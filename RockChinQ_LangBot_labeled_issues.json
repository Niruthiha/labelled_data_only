{
  "repository": "RockChinQ/LangBot",
  "repository_info": {
    "repo": "RockChinQ/LangBot",
    "stars": 12127,
    "language": "Python",
    "description": "🤩 Easy-to-use global IM bot platform designed for the LLM era / 简单易用的大模型即时通信机器人开发平台 ⚡️ Bots for QQ / QQ频道 / Discord / WeChat（企业微信、个人微信）/ Telegram / 飞书 / 钉钉 / Slack 🧩 Integrated with ChatGPT、DeepSeek、D",
    "url": "https://github.com/RockChinQ/LangBot",
    "topics": [
      "agent",
      "ai",
      "bot",
      "chatgpt",
      "deepseek",
      "dify",
      "dingtalk",
      "discord",
      "feishu",
      "langbot",
      "lark",
      "llm",
      "n8n",
      "ollama",
      "openai",
      "plugins",
      "qq",
      "rag",
      "telegram",
      "wechat"
    ],
    "created_at": "2022-12-07T08:48:02Z",
    "updated_at": "2025-06-22T02:24:55Z",
    "search_query": "discord bot openai language:python stars:>2",
    "total_issues_estimate": 130,
    "labeled_issues_estimate": 73,
    "labeling_rate": 56.2,
    "sample_labeled": 18,
    "sample_total": 32,
    "has_issues": true,
    "repo_id": 575321313,
    "default_branch": "master",
    "size": 33453
  },
  "extraction_date": "2025-06-22T00:25:12.307954",
  "extraction_type": "LABELED_ISSUES_ONLY",
  "total_labeled_issues": 500,
  "issues": [
    {
      "issue_number": 1544,
      "title": "[Bug]: 配置完dify流水线 和钉钉测侧直接崩溃 服务正常运行  但是端口5300 已经经入不了",
      "body": "### Runtime environment\n\n后台也没有报错\n\n### Exception\n\n配置完dify流水线 和钉钉测侧直接崩溃 服务正常运行  但是端口5300 已经经入不了\n\n### Reproduction steps\n\n_No response_\n\n### Enabled plugins\n\n_No response_",
      "state": "open",
      "author": "jeff2032",
      "author_type": "User",
      "created_at": "2025-06-19T09:48:40Z",
      "updated_at": "2025-06-21T15:02:59Z",
      "closed_at": null,
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1544/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1544",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1544",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:30.939270",
      "comments": [
        {
          "author": "jeff2032",
          "body": "我的dify 是dock儿部署的 同一台机器配置同一个网络试过 分别试过不同机器部署 设置完基本配置直接崩溃 端口访问不到了\n",
          "created_at": "2025-06-19T09:52:02Z"
        },
        {
          "author": "RockChinQ",
          "body": "贴上docker日志",
          "created_at": "2025-06-19T09:53:08Z"
        },
        {
          "author": "jeff2032",
          "body": "我刚配置完 \n\n![Image](https://github.com/user-attachments/assets/60fac441-f5d4-4906-88d1-ecdb8ca800ac)\n\n![Image](https://github.com/user-attachments/assets/d109b82f-502b-428f-a117-dac4643d4ab9)",
          "created_at": "2025-06-19T10:04:06Z"
        },
        {
          "author": "jeff2032",
          "body": "问题解决了 网站注册机器人用的主线程 我的docker环境网络无法访问钉钉https://api.dingtalk.com/v1.0/oauth2/accessToken 返回accesstoken \n是因为我的dns没设置 解析不了域名 \n然后主线程被阻塞了在了等待返回accesstoken 方法里面。\n\n小小建议：\n我感觉注册机器人这个应该让一个子线程去做，然后设一个超时过期时间，然后前端来一个badrequest 反应，不然主页面5300端口 一直被这个卡住了",
          "created_at": "2025-06-21T15:02:59Z"
        }
      ]
    },
    {
      "issue_number": 1524,
      "title": "[Bug]: 长时间运行后，机器人不在回复消息",
      "body": "### 运行环境\n\nv4.0.5 docker \n\n### 异常情况\n\n![Image](https://github.com/user-attachments/assets/583bc74c-82f3-4d49-a00e-00a3e051a41f)\n\n上门的mail是昨天的，今天早上给机器人发消息就没回了，日志没看出问题，重启langbot容器后正常回复\n\n```\n[06-11 16:46:24.575] process.py (39) - [INFO] : 处理 person_wxid_k161yd0a1jlm22 的请求(33): /mail\n处理 person_wxid_k161yd0a1jlm22 的请求(33): /mail\n[2025-06-12 09:13:39 +0800] [8] [INFO] 110.185.168.6:3008 GET /home/plugins 1.1 200 21951 347892\n[2025-06-12 09:13:39 +0800] [8] [INFO] 110.185.168.6:3009 GET /_next/static/media/langbot-logo.d39c63cb.webp 1.1 200 13922 41844\n[2025-06-12 09:13:39 +0800] [8] [INFO] 110.185.168.6:3011 GET /_next/static/css/d59300f01f02e093.css 1.1 200 2727 37259\n[2025-06-12 09:13:39 +0800] [8] [INFO] 110.185.168.6:3008 GET /_next/static/css/1135f5d02c26ebcb.css 1.1 200 45292 58488\n[2025-06-12 09:13:39 +0800] [8] [INFO] 110.185.168.6:3008 GET /_next/static/css/560b46fe0c14c0cb.css 1.1 200 336 6527\n[2025-06-12 09:13:39 +0800] [8] [INFO] 110.185.168.6:3011 GET /_next/static/chunks/webpack-99b1dc05199f29c8.js 1.1 200 3452 26278\n[2025-06-12 09:13:39 +0800] [8] [INFO] 110.185.168.6:3009 GET /_next/static/chunks/4bd1b696-e824a6915eb5072e.js 1.1 200 169106 63139\n[2025-06-12 09:13:39 +0800] [8] [INFO] 110.185.168.6:3008 GET /_next/static/chunks/main-app-5a26bdfdc3c8384d.js 1.1 200 506 29825\n[2025-06-12 09:13:39 +0800] [8] [INFO] 110.185.168.6:3009 GET /_next/static/chunks/218-3372d8f71196917c.js 1.1 200 4781 26248\n[2025-06-12 09:13:39 +0800] [8] [INFO] 110.185.168.6:3011 GET /_next/static/chunks/684-d91d3c1e10fd1294.js 1.1 200 173188 69936\n[2025-06-12 09:13:39 +0800] [8] [INFO] 110.185.168.6:3008 GET /_next/static/chunks/211-badaa30ec9599341.js 1.1 200 50558 35734\n[2025-06-12 09:13:39 +0800] [8] [INFO] 110.185.168.6:3009 GET /_next/static/chunks/671-3f9a290e9cc47c20.js 1.1 200 33916 28940\n[2025-06-12 09:13:39 +0800] [8] [INFO] 110.185.168.6:3011 GET /_next/static/chunks/app/layout-cc37f0a0bd4fd4a8.js 1.1 200 14447 21739\n[2025-06-12 09:13:39 +0800] [8] [INFO] 110.185.168.6:3008 GET /_next/static/chunks/app/not-found-689857097744da60.js 1.1 200 3515 18528\n[2025-06-12 09:13:39 +0800] [8] [INFO] 110.185.168.6:3009 GET /_next/static/chunks/352-b35dd207f4a63d87.js 1.1 200 27575 29011\n[2025-06-12 09:13:39 +0800] [8] [INFO] 110.185.168.6:3011 GET /_next/static/chunks/464-d428eda3d36d5b11.js 1.1 200 56896 29104\n[2025-06-12 09:13:39 +0800] [8] [INFO] 110.185.168.6:3008 GET /_next/static/chunks/app/home/layout-5584aa97338101cf.js 1.1 200 31107 25839\n[2025-06-12 09:13:39 +0800] [8] [INFO] 110.185.168.6:3009 GET /_next/static/chunks/994-99e484adc309ce2f.js 1.1 200 88972 27853\n[2025-06-12 09:13:39 +0800] [8] [INFO] 110.185.168.6:3008 GET /_next/static/chunks/71-41391571059eef3a.js 1.1 200 7852 7433\n[2025-06-12 09:13:39 +0800] [8] [INFO] 110.185.168.6:3011 GET /_next/static/chunks/171-d08e39e517e20259.js 1.1 200 71501 22832\n[2025-06-12 09:13:39 +0800] [8] [INFO] 110.185.168.6:3009 GET /api/v1/system/info 1.1 200 91 10775\n[2025-06-12 09:13:39 +0800] [8] [INFO] 110.185.168.6:3009 GET /_next/static/chunks/911-1560db0bc9f5fa18.js 1.1 200 12030 17648\n[2025-06-12 09:13:39 +0800] [8] [INFO] 110.185.168.6:3011 GET /_next/static/chunks/912-e112e511216e8f24.js 1.1 200 47377 25052\n[2025-06-12 09:13:40 +0800] [8] [INFO] 110.185.168.6:3011 GET /_next/static/chunks/776-5a0eba509220d05d.js 1.1 200 26952 12340\n[2025-06-12 09:13:40 +0800] [8] [INFO] 110.185.168.6:3011 GET /_next/static/chunks/977-768fadf1ebb02ad3.js 1.1 200 14232 6911\n[2025-06-12 09:13:40 +0800] [8] [INFO] 110.185.168.6:3011 GET /_next/static/chunks/app/home/plugins/page-3e3c8e73f8708b57.js 1.1 200 26971 25132\n[2025-06-12 09:13:40 +0800] [8] [INFO] 110.185.168.6:3011 GET /_next/static/media/langbot-logo.d39c63cb.webp 1.1 200 13922 4714\n[2025-06-12 09:13:40 +0800] [8] [INFO] 110.185.168.6:3011 GET /api/v1/plugins 1.1 200 1981 354198\n```\n\n\n\n### 复现步骤\n\n应该就是长时间运行，我遇见过几次了，确实没找到其他有问题的地方\n\n用的wechatpad\n\n### 启用的插件\n\n自写的一个小插件，返回微信文章表情和返回邮件内容的",
      "state": "closed",
      "author": "lovefan-fan",
      "author_type": "User",
      "created_at": "2025-06-12T01:32:00Z",
      "updated_at": "2025-06-19T01:18:45Z",
      "closed_at": "2025-06-19T01:18:45Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 14,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1524/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1524",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1524",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:31.169242",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "应该是wechatpadpro的问题吧",
          "created_at": "2025-06-12T08:03:47Z"
        },
        {
          "author": "RockChinQ",
          "body": "@fdc310 ",
          "created_at": "2025-06-12T08:03:56Z"
        },
        {
          "author": "fdc310",
          "body": "> ### 运行环境\n> v4.0.5 docker\n> \n> ### 异常情况\n> ![Image](https://github.com/user-attachments/assets/583bc74c-82f3-4d49-a00e-00a3e051a41f)\n> \n> 上门的mail是昨天的，今天早上给机器人发消息就没回了，日志没看出问题，重启langbot容器后正常回复\n> \n> ```\n> [06-11 16:46:24.575] process.py (39) - [INFO] : 处理 person_wxid_k161yd0a1jlm22 的请求(33): /mail\n> 处理 ",
          "created_at": "2025-06-12T08:12:24Z"
        },
        {
          "author": "lovefan-fan",
          "body": "> > ### 运行环境\n> > v4.0.5 docker\n> > ### 异常情况\n> > ![Image](https://github.com/user-attachments/assets/583bc74c-82f3-4d49-a00e-00a3e051a41f)\n> > 上门的mail是昨天的，今天早上给机器人发消息就没回了，日志没看出问题，重启langbot容器后正常回复\n> > ```\n> > [06-11 16:46:24.575] process.py (39) - [INFO] : 处理 person_wxid_k161yd0a1jlm22 的请求(33): /mail\n",
          "created_at": "2025-06-12T08:42:11Z"
        },
        {
          "author": "fdc310",
          "body": "> > > ### 运行环境\n> > > v4.0.5 docker\n> > > ### 异常情况\n> > > ![Image](https://github.com/user-attachments/assets/583bc74c-82f3-4d49-a00e-00a3e051a41f)\n> > > 上门的mail是昨天的，今天早上给机器人发消息就没回了，日志没看出问题，重启langbot容器后正常回复\n> > > ```\n> > > [06-11 16:46:24.575] process.py (39) - [INFO] : 处理 person_wxid_k161yd0a1jlm22 的",
          "created_at": "2025-06-12T08:47:09Z"
        }
      ]
    },
    {
      "issue_number": 1536,
      "title": "[Bug]: 企业微信-对外客服",
      "body": "### Runtime environment\n\n版本:latest\n\n### Exception\n\n按照文档配置企业微信-外部客服，运行时报错，配置步骤如下：\n1、按照文档创建应用、创建langbot企业微信客服，并把企业微信应用的企业id、密钥、token、解密信息全部填写玩不；\n2、配置应用与企业微信客服关联；\n3、在企业微信工作台测试应用聊天，报错；\n\n报错内容如下：\nError in handle_callback_request: Traceback (most recent call last): File \"/app/libs/wecom_customer_service_api/api.py\", line 221, in handle_callback_request message_data = await self.get_detailed_message_list(xml_msg) ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ File \"/app/libs/wecom_customer_service_api/api.py\", line 78, in get_detailed_message_list token = root.find('Token').text ^^^^^^^^^^^^^^^^^^^^^^^ AttributeError: 'NoneType' object has no attribute 'text'\n\n\n\n\n### Reproduction steps\n\n_No response_\n\n### Enabled plugins\n\n_No response_",
      "state": "closed",
      "author": "blueappleTony",
      "author_type": "User",
      "created_at": "2025-06-16T09:04:20Z",
      "updated_at": "2025-06-18T03:06:01Z",
      "closed_at": "2025-06-18T01:49:41Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1536/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1536",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1536",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:31.378085",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "填写不正确，请到社区群找人协助。",
          "created_at": "2025-06-18T01:49:41Z"
        },
        {
          "author": "blueappleTony",
          "body": "> 填写不正确，请到社区和找人帮忙。\n\n具体哪里填写不正确呢 ？",
          "created_at": "2025-06-18T03:06:01Z"
        }
      ]
    },
    {
      "issue_number": 1539,
      "title": "[Bug]: QQ开放平台的QQ群机器人无法应用流水线设置",
      "body": "### Runtime environment\n\nv4.0.6 Docker Ubuntu\n\n### Exception\n\n使用Dify的chatflow流水线，当前流水线的设置：\n1. 触发前缀与@：不论是否开启@，都必须要@才能触发；触发前缀则失效\n2. 回复处理：取消勾选“在群聊中@发送者”后，依旧会@\n\n目前无法排查该设置失效是由于QQ群机器人的固有特性，还是由于BUG导致。\n\n### Reproduction steps\n\n_No response_\n\n### Enabled plugins\n\n_No response_",
      "state": "closed",
      "author": "shinny-Tangzongkai",
      "author_type": "User",
      "created_at": "2025-06-17T02:00:30Z",
      "updated_at": "2025-06-18T01:53:12Z",
      "closed_at": "2025-06-18T01:53:12Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1539/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1539",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1539",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:31.547881",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "因为qq官方限制很多，只能收到at的消息。回复也一定会带at.",
          "created_at": "2025-06-17T06:54:52Z"
        }
      ]
    },
    {
      "issue_number": 1540,
      "title": "[Bug]: 思维链转换策略选择移未生效",
      "body": "### Runtime environment\n\n这个错误和运行环境应该没关系\n\n### Exception\n\n![Image](https://github.com/user-attachments/assets/ea1c14e4-45db-428b-8926-e56c0ed829df)\n\n### Reproduction steps\n\n_No response_\n\n### Enabled plugins\n\n_No response_",
      "state": "closed",
      "author": "TomGitHome",
      "author_type": "User",
      "created_at": "2025-06-17T07:42:53Z",
      "updated_at": "2025-06-18T01:50:50Z",
      "closed_at": "2025-06-18T01:50:50Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1540/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1540",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1540",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:31.689865",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "麻烦提供一下复现步骤，你们这样截个图+一句话，我没法解决。",
          "created_at": "2025-06-18T01:46:23Z"
        }
      ]
    },
    {
      "issue_number": 1538,
      "title": "[Bug]: 钉钉机器人加入到群组中，无法从流水线的群聊中看到对话记录",
      "body": "### Runtime environment\n\nDocker\n\n### Exception\n\n[Bug]: 钉钉机器人加入到群组中，无法从流水线的群聊中看到对话记录\n\n### Reproduction steps\n\n_No response_\n\n### Enabled plugins\n\n_No response_",
      "state": "closed",
      "author": "SDUBB666",
      "author_type": "User",
      "created_at": "2025-06-16T19:02:05Z",
      "updated_at": "2025-06-18T01:49:16Z",
      "closed_at": "2025-06-18T01:49:16Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1538/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1538",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1538",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:31.881352",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "那个是用来调试的，不是用来看记录的。",
          "created_at": "2025-06-17T00:22:44Z"
        }
      ]
    },
    {
      "issue_number": 1522,
      "title": "[Bug]: 机器人会把昨天的消息的都给回复一遍",
      "body": "### 运行环境\n\nv4.0.5\n\n### 异常情况\n\n机器人会把昨天的消息的都给回复一遍\n\n### 复现步骤\n\n头天关闭机器人，第二天又打开\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "baiyajin",
      "author_type": "User",
      "created_at": "2025-06-11T01:01:09Z",
      "updated_at": "2025-06-14T04:02:54Z",
      "closed_at": "2025-06-14T04:02:54Z",
      "labels": [
        "bug?",
        "Stale"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1522/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1522",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1522",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:32.035631",
      "comments": [
        {
          "author": "fdc310",
          "body": "平台和日志有吗\n",
          "created_at": "2025-06-11T01:41:02Z"
        }
      ]
    },
    {
      "issue_number": 1518,
      "title": "[Bug]: [ERROR] : WebSocket error: Handshake status 200 OK -+-+- {'access-control-allow-credentials': 'true'",
      "body": "### 运行环境\n\nv4.0.5\n\n### 异常情况\n\n[06-10 10:01:05.806] wechatpad.py (734) - [INFO] : Connecting to WebSocket: ws://127.0.0.1:8059/ws/GetSyncMsg?key=6811b301-9dd9-4968-a630-e86aa069db84\n[06-10 10:01:05.808] wechatpad.py (745) - [ERROR] : WebSocket error: Handshake status 200 OK -+-+- {'access-control-allow-credentials': 'true', 'access-control-allow-headers': 'Origin, Content-Type, Authorization, Accept-Encoding', 'access-control-allow-methods': 'GET,\n\n### 复现步骤\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "baiyajin",
      "author_type": "User",
      "created_at": "2025-06-10T02:02:58Z",
      "updated_at": "2025-06-14T04:02:54Z",
      "closed_at": "2025-06-14T04:02:54Z",
      "labels": [
        "bug?",
        "Stale"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1518/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1518",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1518",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:32.233346",
      "comments": [
        {
          "author": "fdc310",
          "body": "> ### 运行环境\n> v4.0.5\n> \n> ### 异常情况\n> [06-10 10:01:05.806] wechatpad.py (734) - [INFO] : Connecting to WebSocket: ws://127.0.0.1:8059/ws/GetSyncMsg?key=6811b301-9dd9-4968-a630-e86aa069db84 [06-10 10:01:05.808] wechatpad.py (745) - [ERROR] : WebSocket error: Handshake status 200 OK -+-+- {'access-contr",
          "created_at": "2025-06-11T01:46:53Z"
        }
      ]
    },
    {
      "issue_number": 1528,
      "title": "[Bug]: 无法连接我的mcp,求助",
      "body": "### Runtime environment\n\nmac本地\n\n### 使用的langbot版本 \nv4.0.6\n\n### Exception\n\n### langbot的data/config.yaml配置：\nmcp:\n    servers:\n    -   args:\n        - mcp-server-kubernetes\n        command: npx\n        enable: true\n        env: {}\n        mode: stdio\n        name: stdio Server\n\n### 使用的mcpserver：\nnpx mcp-server-kubernetes   \n\n\n\n\n### 我使用claude desktop是可以正常连接mcp的,claude_desktop_config.json配置为:\n{\n  \"mcpServers\": {\n    \"kubernetes\": {\n      \"command\": \"npx\",\n      \"args\": [\"mcp-server-kubernetes\"]\n    }\n  }\n}\nmcp工具日志打印能够正常获取到\n![Image](https://github.com/user-attachments/assets/d9503f44-53f5-4848-adcd-969634a94c34)\n\n### 使用的大模型：\n\n![Image](https://github.com/user-attachments/assets/61fb90b6-29bf-41d0-8a45-941115310e38)\n\n![Image](https://github.com/user-attachments/assets/d9824e32-7e67-4e4c-9a22-495e6d7cbf36)\n\n但是我的landbot机器人始终不可以\n\n![Image](https://github.com/user-attachments/assets/509be086-b398-47a0-987c-79a1447ac8bf)\n\n\n\n### Reproduction steps\n\n_No response_\n\n### Enabled plugins\n\n_No response_",
      "state": "open",
      "author": "guolin302",
      "author_type": "User",
      "created_at": "2025-06-13T04:39:35Z",
      "updated_at": "2025-06-13T07:14:37Z",
      "closed_at": null,
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1528/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1528",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1528",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:32.403987",
      "comments": [
        {
          "author": "guolin302",
          "body": "如下是我的mcp的index.js\n\n#!/usr/bin/env node\nimport { Server } from \"@modelcontextprotocol/sdk/server/index.js\";\nimport { StdioServerTransport } from \"@modelcontextprotocol/sdk/server/stdio.js\";\nimport { installHelmChart, installHelmChartSchema, upgradeHelmChart, upgradeHelmChartSchema, uninstallHelmChart",
          "created_at": "2025-06-13T07:01:44Z"
        }
      ]
    },
    {
      "issue_number": 1007,
      "title": "[Feature]: 支持对引用消息的回复",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n![Image](https://github.com/user-attachments/assets/a84ba7d9-2035-49c2-b0b5-4e981bf4a389)\n如图所示, 能针对引用消息发送ai命令, 这样的话会很方便.",
      "state": "closed",
      "author": "webjoin111",
      "author_type": "User",
      "created_at": "2025-02-02T11:39:02Z",
      "updated_at": "2025-06-12T09:24:49Z",
      "closed_at": "2025-06-12T09:24:49Z",
      "labels": [
        "m: Platform"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1007/reactions",
        "total_count": 3,
        "+1": 3,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1007",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1007",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:32.577500",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "前俩礼拜 @fdc310 整了，现在已经有了，忘记关issue了。",
          "created_at": "2025-06-12T09:24:49Z"
        }
      ]
    },
    {
      "issue_number": 934,
      "title": "[Bug]: 无法检测到消息链中的“引用消息”组件",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\nWindows11, Python 3.10.14 in Conda\n\n### LangBot 版本\n\nv3.4.0\n\n### 异常情况\n\nAiocqhttp使用LLOneBot v4.4.1\r\n\r\n测试消息如图：\r\n![image](https://github.com/user-attachments/assets/ab67d4f1-da7e-447b-91e0-b8bdc4624e84)\r\n测试代码如下文：\r\n\r\n```\r\n@handler(GroupMessageReceived)\r\nasync def group_normal_message_received(self, ctx: EventContext):\r\n        msg: MessageChain\r\n        msg = ctx.event.message_chain\r\n        if Image in msg:\r\n            print(\"Image found.\")\r\n            img = msg[msg.index(Image)]\r\n        if Quote in msg:\r\n            print(\"Quote found\")\r\n            quote = msg[msg.index(Quote)]\r\n```\r\n图片和文字消息组件均能检测到，但引用消息无法检测到。\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "Garrise",
      "author_type": "User",
      "created_at": "2024-11-25T12:30:12Z",
      "updated_at": "2025-06-12T09:16:21Z",
      "closed_at": "2025-06-12T09:16:21Z",
      "labels": [
        "bug?",
        "m: Platform",
        "IM: aiocqhttp"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/934/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/934",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/934",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:32.741841",
      "comments": []
    },
    {
      "issue_number": 1523,
      "title": "[Bug]: V4.0.6 钉钉偶发性丢失消息",
      "body": "### Runtime environment\n\nCentos7.9 Docker LangBotV4.0.6\n\n### Exception\n\n钉钉调用dify，偶发性丢失消息。\n\n![Image](https://github.com/user-attachments/assets/8711498e-486a-4ed4-ad7e-34faac8608b3)\n![Image](https://github.com/user-attachments/assets/cb518a71-e38e-43b7-8c87-ab8fdcb36547)\n查看langbot日志，数据都已经正常收发了，但是钉钉没有收到消息\n\n### Reproduction steps\n\n_No response_\n\n### Enabled plugins\n\n_No response_",
      "state": "open",
      "author": "GeXin666",
      "author_type": "User",
      "created_at": "2025-06-11T08:12:25Z",
      "updated_at": "2025-06-11T08:12:25Z",
      "closed_at": null,
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1523/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1523",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1523",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:32.741871",
      "comments": []
    },
    {
      "issue_number": 1519,
      "title": "[Bug]: 调用机器人偶尔不返回内容，日志中模型已返回内容",
      "body": "### Runtime environment\n\nLangBot v4.0.4\n\n### Exception\n\n日志中已返回\n<img width=\"773\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/59032b56-a301-4e5b-99d7-4849f0082fac\" />\n钉钉对话框未显示\n<img width=\"368\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/75b28543-9980-471e-a603-3075fcaf827d\" />\n\n\n### Reproduction steps\n\n_No response_\n\n### Enabled plugins\n\n_No response_",
      "state": "open",
      "author": "lslgithub151",
      "author_type": "User",
      "created_at": "2025-06-10T08:22:10Z",
      "updated_at": "2025-06-10T08:56:20Z",
      "closed_at": null,
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1519/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1519",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1519",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:32.741882",
      "comments": []
    },
    {
      "issue_number": 1520,
      "title": "[Bug]: qq机器人接入后 对话时有报错或无响应",
      "body": "### Runtime environment\n\npython3.11.6，Linux VM-4-3-opencloudos  x86_64 GNU/Linux，langbot v4.0.5，QQ9.7.23\n\n### Exception\n\n`[2025-06-10 15:34:07 +0800] [9] [INFO] 172.23.0.1:42242 POST /callback/command 1.1 200 31 1371\n[06-10 15:34:07.386] process.py (39) - [INFO] : 处理 group_CAD424FD82E6A907974A6A66B0E1DD4C 的请求(5): 打个招呼\n[06-10 15:34:14.241] chat.py (73) - [INFO] : 对话(5)响应: assistant: 嗨～你好呀！😊 今...\n[2025-06-10 16:10:38 +0800] [9] [INFO] 172.23.0.1:48632 POST /callback/command 1.1 200 31 1578\n[06-10 16:10:38.752] process.py (39) - [INFO] : 处理 group_CAD424FD82E6A907974A6A66B0E1DD4C 的请求(6): 使用python写个简单的爬虫\n[06-10 16:11:09.467] chat.py (73) - [INFO] : 对话(6)响应: assistant: 以下是一个简单的 ...\n[06-10 16:11:09.617] pipelinemgr.py (200) - [ERROR] : 处理请求时出错 query_id=6 stage=SendResponseBackStage : Expecting value: line 1 column 1 (char 0)\n[06-10 16:11:09.619] pipelinemgr.py (201) - [ERROR] : Traceback: Traceback (most recent call last):\n  File \"/app/pkg/pipeline/pipelinemgr.py\", line 197, in process_query\n    await self._execute_from_stage(0, query)\n  File \"/app/pkg/pipeline/pipelinemgr.py\", line 167, in _execute_from_stage\n    await self._execute_from_stage(i + 1, query)\n  File \"/app/pkg/pipeline/pipelinemgr.py\", line 167, in _execute_from_stage\n    await self._execute_from_stage(i + 1, query)\n  File \"/app/pkg/pipeline/pipelinemgr.py\", line 144, in _execute_from_stage\n    result = await result\n             ^^^^^^^^^^^^\n  File \"/app/pkg/pipeline/respback/respback.py\", line 39, in process\n    await query.adapter.reply_message(\n  File \"/app/pkg/platform/sources/qqofficial.py\", line 189, in reply_message\n    await self.bot.send_group_text_msg(\n  File \"/app/libs/qq_official_api/api.py\", line 212, in send_group_text_msg\n    await self.logger.error(f\"发送群聊消息失败:{response.json()}\")\n                                                ^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_models.py\", line 832, in json\n    return jsonlib.loads(self.content, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/json/decoder.py\", line 355, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n\n[2025-06-10 16:11:29 +0800] [9] [INFO] 172.23.0.1:34454 POST /callback/command 1.1 200 31 1341\n[06-10 16:11:29.682] process.py (39) - [INFO] : 处理 group_CAD424FD82E6A907974A6A66B0E1DD4C 的请求(7): python写个简单加减计算器\n[06-10 16:11:54.798] chat.py (73) - [INFO] : 对话(7)响应: assistant: 以下是一个用 Py...\n[2025-06-10 16:27:03 +0800] [9] [INFO] 172.23.0.1:43694 POST /callback/command 1.1 200 31 1358\n\n![Image](https://github.com/user-attachments/assets/ffab949c-73e6-45e2-bf48-ad6a7c518fea)\n\n![Image](https://github.com/user-attachments/assets/230185a5-a19e-4fbc-83c7-63a5ebab099c)\n\n`\n\n### Reproduction steps\n\n_No response_\n\n### Enabled plugins\n\n_No response_",
      "state": "open",
      "author": "gradient30",
      "author_type": "User",
      "created_at": "2025-06-10T08:34:27Z",
      "updated_at": "2025-06-10T08:34:27Z",
      "closed_at": null,
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1520/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1520",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1520",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:32.741890",
      "comments": []
    },
    {
      "issue_number": 1507,
      "title": "[Bug]: WeChatPadPro适配器，扫码登录成功后，过一会提示该账号需要重新登录",
      "body": "### 运行环境\n\nv4.0.4\n\n### 异常情况\n\n[06-06 21:06:18.401] wechatpad.py (715) - [INFO] : {'Code': 300, 'Data': None, 'Text': '该账号需要重新登录！loginState == MMLoginStateNoLogin '}\nException in thread Thread-3 (wechat_login_process):\nTraceback (most recent call last):\n  File \"C:\\Users\\Administrator\\AppData\\Roaming\\uv\\python\\cpython-3.12.10-windows-x86_64-none\\Lib\\threading.py\", line 1075, in _bootstrap_inner\n    self.run()\n  File \"C:\\Users\\Administrator\\AppData\\Roaming\\uv\\python\\cpython-3.12.10-windows-x86_64-none\\Lib\\threading.py\", line 1012, in run\n    self._target(*self._args, **self._kwargs)\n  File \"D:\\baiyajin-code\\LangBot\\pkg\\platform\\sources\\wechatpad.py\", line 717, in wechat_login_process\n[2025-06-06 21:06:18 +0800] [32852] [INFO] 127.0.0.1:61143 GET /api/v1/platform/adapters 1.1 200 14023 3174\n    self.bot_account_id = profile[\"Data\"][\"userInfo\"][\"nickName\"][\"str\"]\n                          ~~~~~~~~~~~~~~~^^^^^^^^^^^^\nTypeError: 'NoneType' object is not subscriptable\n\n### 复现步骤\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "baiyajin",
      "author_type": "User",
      "created_at": "2025-06-06T13:12:45Z",
      "updated_at": "2025-06-09T14:44:26Z",
      "closed_at": "2025-06-09T14:44:26Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1507/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1507",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1507",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:32.741898",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "同样的，也到wechatpadpro仓库提问一下吧。",
          "created_at": "2025-06-09T14:44:26Z"
        }
      ]
    },
    {
      "issue_number": 1508,
      "title": "[Bug]: 扫码登录后提示1111GET Connection locfree Failed by 80907-889989-dsaf  abandon the conntection get  !",
      "body": "### 运行环境\n\nv4.0.5\n\n### 异常情况\n\nWeChatPadPro启动后\n扫码登录后提示1111GET Connection locfree Failed by 80907-889989-dsaf  abandon the conntection get  !\n\n### 复现步骤\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "baiyajin",
      "author_type": "User",
      "created_at": "2025-06-06T13:31:03Z",
      "updated_at": "2025-06-09T13:54:02Z",
      "closed_at": "2025-06-09T13:54:01Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1508/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1508",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1508",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:32.977872",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "WeChatPro 的问题可以到 wechatpro 的仓库问一下。",
          "created_at": "2025-06-09T13:54:01Z"
        }
      ]
    },
    {
      "issue_number": 1513,
      "title": "[Bug]: 和Dify搭配，chatflow模式，接入飞书之后，请求失败，日志：Conversation Not Exists。 另外，如何更新v4.3.0.2？",
      "body": "### Runtime environment\n\nLangBot:v4.0.5，Dify:v1.4.1\n\n### Exception\n\n日志：\n[06-09 19:23:59.218] process.py (39) - [INFO] : 处理 group_oc_...... 的请求(6): 你是谁\n[06-09 19:23:59.254] chat.py (83) - [ERROR] : 对话(6)请求失败: DifyAPIError 404 {\"code\": \"not_found\", \"message\": \"Conversation Not Exists.\", \"status\": 404}\n[06-09 19:23:59.906] pipelinemgr.py (107) - [ERROR] : 404 {\"code\": \"not_found\", \"message\": \"Conversation Not Exists.\", \"status\": 404}\n\n### Reproduction steps\n\n_No response_\n\n### Enabled plugins\n\n_No response_",
      "state": "closed",
      "author": "Dreamcatcher-wind",
      "author_type": "User",
      "created_at": "2025-06-09T05:36:17Z",
      "updated_at": "2025-06-09T13:50:10Z",
      "closed_at": "2025-06-09T13:50:10Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1513/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1513",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1513",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:33.148762",
      "comments": []
    },
    {
      "issue_number": 1509,
      "title": "[Bug]: 企业微信客服 对接dify chatFlow 报错",
      "body": "### Runtime environment\n\nCurrent Version: v4.0.5\n\n### Exception\n\nlangBot 创建企业微信客服  连接 dify chatFlow  发送消息报错 对话(25)请求失败: DifyAPIError 404 {\"code\": \"not_found\", \"message\": \"Conversation Not Exists.\", \"status\": 404} \n\n![Image](https://github.com/user-attachments/assets/ec49bc1d-877a-423b-9411-d4119a34bf56) \n\n![Image](https://github.com/user-attachments/assets/359eddce-b787-4f40-86d3-a17239f6748b)\n\n![Image](https://github.com/user-attachments/assets/aef5f7d2-0710-4177-82a0-9df8a9319714)\n\n### Reproduction steps\n\n_No response_\n\n### Enabled plugins\n\n_No response_",
      "state": "closed",
      "author": "zhangpd",
      "author_type": "User",
      "created_at": "2025-06-07T07:28:52Z",
      "updated_at": "2025-06-09T13:50:09Z",
      "closed_at": "2025-06-09T13:50:09Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1509/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1509",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1509",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:33.148801",
      "comments": []
    },
    {
      "issue_number": 1423,
      "title": "[Bug]: 初始化页面没有多语言选项",
      "body": "- [x] 初始化页面\n- [x] 每个页面的帮助链接\n- [ ] 初始流水线的信息语言\n- [ ] 后端日志语言\n- [x] 插件配置页“加载中”\n- [ ] README 和文档里的多语言图片",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2025-05-14T14:43:20Z",
      "updated_at": "2025-06-08T08:15:26Z",
      "closed_at": "2025-06-08T08:15:09Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1423/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1423",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1423",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:33.148945",
      "comments": []
    },
    {
      "issue_number": 1506,
      "title": "[Bug]: 本地打包报错Error: Delete `␍`  prettier/prettier",
      "body": "### 运行环境\n\nv4.0.5\n\n### 异常情况\n\n200:5  Error: Delete `␍`  prettier/prettier\n201:3  Error: Delete `␍`  prettier/prettier\n202:1  Error: Delete `␍`  prettier/prettier\n203:23  Error: Delete `␍`  prettier/prettier\n\n./src/lib/utils.ts\n1:46  Error: Delete `␍`  prettier/prettier\n2:42  Error: Delete `␍`  prettier/prettier\n3:1  Error: Delete `␍`  prettier/prettier\n4:46  Error: Delete `␍`  prettier/prettier\n5:32  Error: Delete `␍`  prettier/prettier\n6:2  Error: Delete `␍`  prettier/prettier\n\ninfo  - Need to disable some ESLint rules? Learn more here: https://nextjs.org/docs/app/api-reference/config/eslint#disabling-rules\n\n### 复现步骤\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "baiyajin",
      "author_type": "User",
      "created_at": "2025-06-06T12:11:19Z",
      "updated_at": "2025-06-07T07:20:09Z",
      "closed_at": "2025-06-07T07:20:09Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1506/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1506",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1506",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:33.148979",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "在 web 目录执行一下 `npx prettier --write .` 之后再检查，剩下的error需要你自己手动修正",
          "created_at": "2025-06-06T12:17:45Z"
        }
      ]
    },
    {
      "issue_number": 1503,
      "title": "[Bug]: MCP功能使用稳定性不足，经常报错工具调用失败",
      "body": "### Runtime environment\n\ndocker\n\n### Exception\n\n1、使用sse模式调用了一个k8s的mcp server，使用过程中会出现调用失败的问题，使用其他mcp client工具是可以的，需要帮忙看看是否是langbot这边获取对话的信息然后json转换调用模型的适配问题\n2、报错如下：\n\n![Image](https://github.com/user-attachments/assets/30560b80-6402-4867-8f1f-d781c0f2780b)\n\n![Image](https://github.com/user-attachments/assets/f4e542c8-1905-499b-84e6-5b7bb55cbf81)\n\n\n### Reproduction steps\n\n_No response_\n\n### Enabled plugins\n\n_No response_",
      "state": "open",
      "author": "zhangdongdong7",
      "author_type": "User",
      "created_at": "2025-06-06T08:51:21Z",
      "updated_at": "2025-06-06T09:57:08Z",
      "closed_at": null,
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1503/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1503",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1503",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:33.373399",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "贴一下mcp server的代码？",
          "created_at": "2025-06-06T08:52:23Z"
        },
        {
          "author": "zhangdongdong7",
          "body": "![Image](https://github.com/user-attachments/assets/e7e557f0-ddef-4322-89dc-825402dda5e9)",
          "created_at": "2025-06-06T09:08:20Z"
        },
        {
          "author": "RockChinQ",
          "body": "哦你这是sse啊，那你得告诉我完整的复现步骤",
          "created_at": "2025-06-06T09:09:02Z"
        },
        {
          "author": "zhangdongdong7",
          "body": "1、mcp server使用的是https://mcp.so/server/k8m/weibaohui\n2、sse模式，需要有k8s集群，然后部署一下k8m，然后通过sse暴露出来，https://github.com/weibaohui/k8m?tab=readme-ov-file\n3、我是langbot中配置飞书机器人来对接的，然后对话请求，获取k8s相关tool工具操作",
          "created_at": "2025-06-06T09:57:07Z"
        }
      ]
    },
    {
      "issue_number": 1499,
      "title": "如何接入socks5，来处理异地登录问题",
      "body": "如何接入socks5，来处理异地登录问题",
      "state": "closed",
      "author": "baiyajin",
      "author_type": "User",
      "created_at": "2025-06-05T04:08:50Z",
      "updated_at": "2025-06-06T02:39:00Z",
      "closed_at": "2025-06-06T02:39:00Z",
      "labels": [
        "Please take it seriously"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1499/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1499",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1499",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:33.587407",
      "comments": []
    },
    {
      "issue_number": 1491,
      "title": "[Bug]: 微信客服平台调用mcp工具后不能正确handle机器人连续输出的情况",
      "body": "### Runtime environment\n\nlatest\n\n### Exception\n\n```\n[2025-05-31 16:08:15 +0800] [10] [INFO] 14.116.241.251:50058 POST /callback/command 1.1 200 7 984419\n[05-31 16:08:15.412] process.py (39) - [INFO] : 处理 person_xxx 的请求(3): 你看一下广州塔附近有什么好玩的？\n[05-31 16:08:27.027] chat.py (73) - [INFO] : 对话(3)响应: assistant: 好的，请稍等，我帮...\n[05-31 16:08:33.222] chat.py (73) - [INFO] : 对话(3)响应: tool: \"{\\\"pois\\\":[{\\...\n[05-31 16:08:35.991] chat.py (73) - [INFO] : 对话(3)响应: assistant: 广州塔附近有很多好...\n[05-31 16:08:40.817] pipelinemgr.py (200) - [ERROR] : 处理请求时出错 query_id=3 stage=SendResponseBackStage : Failed to send message\n[05-31 16:08:40.819] pipelinemgr.py (201) - [ERROR] : Traceback: Traceback (most recent call last):\n  File \"/app/pkg/pipeline/pipelinemgr.py\", line 197, in process_query\n    await self._execute_from_stage(0, query)\n  File \"/app/pkg/pipeline/pipelinemgr.py\", line 167, in _execute_from_stage\n    await self._execute_from_stage(i + 1, query)\n  File \"/app/pkg/pipeline/pipelinemgr.py\", line 167, in _execute_from_stage\n    await self._execute_from_stage(i + 1, query)\n  File \"/app/pkg/pipeline/pipelinemgr.py\", line 144, in _execute_from_stage\n    result = await result\n             ^^^^^^^^^^^^\n  File \"/app/pkg/pipeline/respback/respback.py\", line 39, in process\n    await query.adapter.reply_message(\n  File \"/app/pkg/platform/sources/wecomcs.py\", line 162, in reply_message\n    await self.bot.send_text_msg(\n  File \"/app/libs/wecom_customer_service_api/api.py\", line 191, in send_text_msg\n    raise Exception('Failed to send message')\nException: Failed to send message\n\n```\n\n### Reproduction steps\n\n步骤：\n1、使用docker部署全新配置的langbot \n2、在config里面添加高德SSE服务器如下\n```\nmcp:\n    servers:\n    -   enable: true\n        headers: {}\n        mode: sse\n        name: mcp\n        timeout: 30\n        url: https://mcp.amap.com/sse?key=key\n```\n3、配置好微信客服平台及Gemini模型(使用兼容接口，模型为models/gemini-2.5-flash-preview-04-17-thinking)，测试成功对话。其他配置保持默认。\n4、在微信向客服机器人发问：你看一下广州塔附近有什么好玩的？\n5、客服机器人回复第一句：好的，请稍等，我帮您查询一下广州塔附近有哪些好玩的地方。（微信界面成功收到）\n6、客服机器人调用高德MCP（日志显示调用成功）\n7、客服机器人根据MCP结果总结答复：广州塔附近有很多好...，此句发不出去，微信无任何显示，日志有报错。\n8、以为是机器人发送过快，尝试在编辑流水线->安全控制->调整速率限制下的窗口长度和限制次数（例如7秒一次）；未解决。\n\n### Enabled plugins\n\nNone.",
      "state": "open",
      "author": "ptbsare",
      "author_type": "User",
      "created_at": "2025-05-31T08:20:28Z",
      "updated_at": "2025-06-05T14:36:09Z",
      "closed_at": null,
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1491/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1491",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1491",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:33.587464",
      "comments": [
        {
          "author": "agegr",
          "body": "因为发送了重复的 msgid，会失败\nLangBot/libs/wecom_customer_service_api/api.py\n175行，注释掉 'msgid': msgid",
          "created_at": "2025-06-05T14:36:08Z"
        }
      ]
    },
    {
      "issue_number": 1489,
      "title": "[Bug]: 报了好多错",
      "body": "### Runtime environment\n\n报了好多错\n\n### Exception\n\n`[2025-05-30 15:00:15 +0800] [10] [INFO] 112.115.91.12:15818 GET /api/v1/provider/requesters 1.1 200 7414 3043\nTraceback (most recent call last):\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 122, in invoke_llm\n    return await self._closure(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/provider/modelmgr/requesters/deepseekchatcmpl.py\", line 50, in _closure\n    resp = await self._req(args, extra_body=extra_args)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 39, in _req\n    return await self.client.chat.completions.create(**args, extra_body=extra_body)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/resources/chat/completions/completions.py\", line 2028, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1742, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1549, in request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.AuthenticationError: Error code: 401 - {'error': {'message': 'Authentication Fails, Your api key: ****PJuJ is invalid', 'type': 'authentication_error', 'param': None, 'code': 'invalid_request_error'}}\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/app/pkg/api/http/controller/group.py\", line 88, in handler_error\n    return await f(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/api/http/controller/groups/provider/models.py\", line 44, in _\n    await self.ap.model_service.test_llm_model(model_uuid, json_data)\n  File \"/app/pkg/api/http/service/model.py\", line 99, in test_llm_model\n    await runtime_llm_model.requester.invoke_llm(\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 137, in invoke_llm\n    raise errors.RequesterError(f'无效的 api-key: {e.message}')\npkg.provider.modelmgr.errors.RequesterError: 模型请求失败: 无效的 api-key: Error code: 401 - {'error': {'message': 'Authentication Fails, Your api key: ****PJuJ is invalid', 'type': 'authentication_error', 'param': None, 'code': 'invalid_request_error'}}\n[2025-05-30 15:06:19 +0800] [10] [INFO] 112.115.91.12:14884 POST /api/v1/provider/models/llm/_/test 1.1 500 42 1436736\nTraceback (most recent call last):\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_transports/default.py\", line 101, in map_httpcore_exceptions\n    yield\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_transports/default.py\", line 394, in handle_async_request\n    resp = await self._pool.handle_async_request(req)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpcore/_async/connection_pool.py\", line 256, in handle_async_request\n    raise exc from None\n  File \"/app/.venv/lib/python3.12/site-packages/httpcore/_async/connection_pool.py\", line 236, in handle_async_request\n    response = await connection.handle_async_request(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpcore/_async/connection.py\", line 103, in handle_async_request\n    return await self._connection.handle_async_request(request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpcore/_async/http11.py\", line 136, in handle_async_request\n    raise exc\n  File \"/app/.venv/lib/python3.12/site-packages/httpcore/_async/http11.py\", line 86, in handle_async_request\n    await self._send_request_headers(**kwargs)\n  File \"/app/.venv/lib/python3.12/site-packages/httpcore/_async/http11.py\", line 144, in _send_request_headers\n    with map_exceptions({h11.LocalProtocolError: LocalProtocolError}):\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/contextlib.py\", line 158, in __exit__\n    self.gen.throw(value)\n  File \"/app/.venv/lib/python3.12/site-packages/httpcore/_exceptions.py\", line 14, in map_exceptions\n    raise to_exc(exc) from exc\nhttpcore.LocalProtocolError: Illegal header value b'Bearer '\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/app/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1484, in request\n    response = await self._client.send(\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_client.py\", line 1629, in send\n    response = await self._send_handling_auth(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_client.py\", line 1657, in _send_handling_auth\n    response = await self._send_handling_redirects(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_client.py\", line 1694, in _send_handling_redirects\n    response = await self._send_single_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_client.py\", line 1730, in _send_single_request\n    response = await transport.handle_async_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_transports/default.py\", line 393, in handle_async_request\n    with map_httpcore_exceptions():\n         ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/contextlib.py\", line 158, in __exit__\n    self.gen.throw(value)\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_transports/default.py\", line 118, in map_httpcore_exceptions\n    raise mapped_exc(message) from exc\nhttpx.LocalProtocolError: Illegal header value b'Bearer '\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 122, in invoke_llm\n    return await self._closure(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/provider/modelmgr/requesters/deepseekchatcmpl.py\", line 50, in _closure\n    resp = await self._req(args, extra_body=extra_args)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 39, in _req\n    return await self.client.chat.completions.create(**args, extra_body=extra_body)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/resources/chat/completions/completions.py\", line 2028, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1742, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1516, in request\n    raise APIConnectionError(request=request) from err\nopenai.APIConnectionError: Connection error.\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/app/pkg/api/http/controller/group.py\", line 88, in handler_error\n    return await f(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/api/http/controller/groups/provider/models.py\", line 44, in _\n    await self.ap.model_service.test_llm_model(model_uuid, json_data)\n  File \"/app/pkg/api/http/service/model.py\", line 99, in test_llm_model\n    await runtime_llm_model.requester.invoke_llm(\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 143, in invoke_llm\n    raise errors.RequesterError(f'请求错误: {e.message}')\npkg.provider.modelmgr.errors.RequesterError: 模型请求失败: 请求错误: Connection error.\n[2025-05-30 15:06:30 +0800] [10] [INFO] 112.115.91.12:14935 POST /api/v1/provider/models/llm/_/test 1.1 500 42 3976358\n[2025-05-30 15:06:54 +0800] [10] [INFO] 112.115.91.12:13590 POST /api/v1/provider/models/llm/_/test 1.1 - - 14987451\nTraceback (most recent call last):\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_transports/default.py\", line 101, in map_httpcore_exceptions\n    yield\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_transports/default.py\", line 394, in handle_async_request\n    resp = await self._pool.handle_async_request(req)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpcore/_async/connection_pool.py\", line 256, in handle_async_request\n    raise exc from None\n  File \"/app/.venv/lib/python3.12/site-packages/httpcore/_async/connection_pool.py\", line 236, in handle_async_request\n    response = await connection.handle_async_request(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpcore/_async/connection.py\", line 103, in handle_async_request\n    return await self._connection.handle_async_request(request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpcore/_async/http11.py\", line 136, in handle_async_request\n    raise exc\n  File \"/app/.venv/lib/python3.12/site-packages/httpcore/_async/http11.py\", line 86, in handle_async_request\n    await self._send_request_headers(**kwargs)\n  File \"/app/.venv/lib/python3.12/site-packages/httpcore/_async/http11.py\", line 144, in _send_request_headers\n    with map_exceptions({h11.LocalProtocolError: LocalProtocolError}):\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/contextlib.py\", line 158, in __exit__\n    self.gen.throw(value)\n  File \"/app/.venv/lib/python3.12/site-packages/httpcore/_exceptions.py\", line 14, in map_exceptions\n    raise to_exc(exc) from exc\nhttpcore.LocalProtocolError: Illegal header value b'Bearer '\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/app/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1484, in request\n    response = await self._client.send(\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_client.py\", line 1629, in send\n    response = await self._send_handling_auth(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_client.py\", line 1657, in _send_handling_auth\n    response = await self._send_handling_redirects(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_client.py\", line 1694, in _send_handling_redirects\n    response = await self._send_single_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_client.py\", line 1730, in _send_single_request\n    response = await transport.handle_async_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_transports/default.py\", line 393, in handle_async_request\n    with map_httpcore_exceptions():\n         ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/contextlib.py\", line 158, in __exit__\n    self.gen.throw(value)\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_transports/default.py\", line 118, in map_httpcore_exceptions\n    raise mapped_exc(message) from exc\nhttpx.LocalProtocolError: Illegal header value b'Bearer '\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 122, in invoke_llm\n    return await self._closure(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 95, in _closure\n    resp = await self._req(args, extra_body=extra_args)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 39, in _req\n    return await self.client.chat.completions.create(**args, extra_body=extra_body)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/resources/chat/completions/completions.py\", line 2028, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1742, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1516, in request\n    raise APIConnectionError(request=request) from err\nopenai.APIConnectionError: Connection error.\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/app/pkg/api/http/controller/group.py\", line 88, in handler_error\n    return await f(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/api/http/controller/groups/provider/models.py\", line 44, in _\n    await self.ap.model_service.test_llm_model(model_uuid, json_data)\n  File \"/app/pkg/api/http/service/model.py\", line 99, in test_llm_model\n    await runtime_llm_model.requester.invoke_llm(\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 143, in invoke_llm\n    raise errors.RequesterError(f'请求错误: {e.message}')\npkg.provider.modelmgr.errors.RequesterError: 模型请求失败: 请求错误: Connection error.\n[2025-05-30 15:07:23 +0800] [10] [INFO] 112.115.91.12:15484 POST /api/v1/provider/models/llm/_/test 1.1 500 42 3548259\nTraceback (most recent call last):\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_transports/default.py\", line 101, in map_httpcore_exceptions\n    yield\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_transports/default.py\", line 394, in handle_async_request\n    resp = await self._pool.handle_async_request(req)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpcore/_async/connection_pool.py\", line 256, in handle_async_request\n    raise exc from None\n  File \"/app/.venv/lib/python3.12/site-packages/httpcore/_async/connection_pool.py\", line 236, in handle_async_request\n    response = await connection.handle_async_request(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpcore/_async/connection.py\", line 103, in handle_async_request\n    return await self._connection.handle_async_request(request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpcore/_async/http11.py\", line 136, in handle_async_request\n    raise exc\n  File \"/app/.venv/lib/python3.12/site-packages/httpcore/_async/http11.py\", line 86, in handle_async_request\n    await self._send_request_headers(**kwargs)\n  File \"/app/.venv/lib/python3.12/site-packages/httpcore/_async/http11.py\", line 144, in _send_request_headers\n    with map_exceptions({h11.LocalProtocolError: LocalProtocolError}):\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/contextlib.py\", line 158, in __exit__\n    self.gen.throw(value)\n  File \"/app/.venv/lib/python3.12/site-packages/httpcore/_exceptions.py\", line 14, in map_exceptions\n    raise to_exc(exc) from exc\nhttpcore.LocalProtocolError: Illegal header value b'Bearer '\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/app/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1484, in request\n    response = await self._client.send(\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_client.py\", line 1629, in send\n    response = await self._send_handling_auth(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_client.py\", line 1657, in _send_handling_auth\n    response = await self._send_handling_redirects(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_client.py\", line 1694, in _send_handling_redirects\n    response = await self._send_single_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_client.py\", line 1730, in _send_single_request\n    response = await transport.handle_async_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_transports/default.py\", line 393, in handle_async_request\n    with map_httpcore_exceptions():\n         ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/contextlib.py\", line 158, in __exit__\n    self.gen.throw(value)\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_transports/default.py\", line 118, in map_httpcore_exceptions\n    raise mapped_exc(message) from exc\nhttpx.LocalProtocolError: Illegal header value b'Bearer '\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 122, in invoke_llm\n    return await self._closure(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 95, in _closure\n    resp = await self._req(args, extra_body=extra_args)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 39, in _req\n    return await self.client.chat.completions.create(**args, extra_body=extra_body)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/resources/chat/completions/completions.py\", line 2028, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1742, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1516, in request\n    raise APIConnectionError(request=request) from err\nopenai.APIConnectionError: Connection error.\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/app/pkg/api/http/controller/group.py\", line 88, in handler_error\n    return await f(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/api/http/controller/groups/provider/models.py\", line 44, in _\n    await self.ap.model_service.test_llm_model(model_uuid, json_data)\n  File \"/app/pkg/api/http/service/model.py\", line 99, in test_llm_model\n    await runtime_llm_model.requester.invoke_llm(\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 143, in invoke_llm\n    raise errors.RequesterError(f'请求错误: {e.message}')\npkg.provider.modelmgr.errors.RequesterError: 模型请求失败: 请求错误: Connection error.\n[2025-05-30 15:07:30 +0800] [10] [INFO] 112.115.91.12:15484 POST /api/v1/provider/models/llm/_/test 1.1 500 42 2605745\nTraceback (most recent call last):\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_transports/default.py\", line 101, in map_httpcore_exceptions\n    yield\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_transports/default.py\", line 394, in handle_async_request\n    resp = await self._pool.handle_async_request(req)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpcore/_async/connection_pool.py\", line 256, in handle_async_request\n    raise exc from None\n  File \"/app/.venv/lib/python3.12/site-packages/httpcore/_async/connection_pool.py\", line 236, in handle_async_request\n    response = await connection.handle_async_request(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpcore/_async/connection.py\", line 103, in handle_async_request\n    return await self._connection.handle_async_request(request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpcore/_async/http11.py\", line 136, in handle_async_request\n    raise exc\n  File \"/app/.venv/lib/python3.12/site-packages/httpcore/_async/http11.py\", line 86, in handle_async_request\n    await self._send_request_headers(**kwargs)\n  File \"/app/.venv/lib/python3.12/site-packages/httpcore/_async/http11.py\", line 144, in _send_request_headers\n    with map_exceptions({h11.LocalProtocolError: LocalProtocolError}):\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/contextlib.py\", line 158, in __exit__\n    self.gen.throw(value)\n  File \"/app/.venv/lib/python3.12/site-packages/httpcore/_exceptions.py\", line 14, in map_exceptions\n    raise to_exc(exc) from exc\nhttpcore.LocalProtocolError: Illegal header value b'Bearer '\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/app/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1484, in request\n    response = await self._client.send(\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_client.py\", line 1629, in send\n    response = await self._send_handling_auth(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_client.py\", line 1657, in _send_handling_auth\n    response = await self._send_handling_redirects(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_client.py\", line 1694, in _send_handling_redirects\n    response = await self._send_single_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_client.py\", line 1730, in _send_single_request\n    response = await transport.handle_async_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_transports/default.py\", line 393, in handle_async_request\n    with map_httpcore_exceptions():\n         ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/contextlib.py\", line 158, in __exit__\n    self.gen.throw(value)\n  File \"/app/.venv/lib/python3.12/site-packages/httpx/_transports/default.py\", line 118, in map_httpcore_exceptions\n    raise mapped_exc(message) from exc\nhttpx.LocalProtocolError: Illegal header value b'Bearer '\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 122, in invoke_llm\n    return await self._closure(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 95, in _closure\n    resp = await self._req(args, extra_body=extra_args)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 39, in _req\n    return await self.client.chat.completions.create(**args, extra_body=extra_body)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/resources/chat/completions/completions.py\", line 2028, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1742, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1516, in request\n    raise APIConnectionError(request=request) from err\nopenai.APIConnectionError: Connection error.\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/app/pkg/api/http/controller/group.py\", line 88, in handler_error\n    return await f(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/api/http/controller/groups/provider/models.py\", line 44, in _\n    await self.ap.model_service.test_llm_model(model_uuid, json_data)\n  File \"/app/pkg/api/http/service/model.py\", line 99, in test_llm_model\n    await runtime_llm_model.requester.invoke_llm(\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 143, in invoke_llm\n    raise errors.RequesterError(f'请求错误: {e.message}')\npkg.provider.modelmgr.errors.RequesterError: 模型请求失败: 请求错误: Connection error.\n[2025-05-30 15:15:48 +0800] [10] [INFO] 112.115.91.12:14403 POST /api/v1/provider/models/llm/_/test 1.1 500 42 2354084\nTraceback (most recent call last):\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 122, in invoke_llm\n    return await self._closure(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/provider/modelmgr/requesters/deepseekchatcmpl.py\", line 50, in _closure\n    resp = await self._req(args, extra_body=extra_args)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 39, in _req\n    return await self.client.chat.completions.create(**args, extra_body=extra_body)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/resources/chat/completions/completions.py\", line 2028, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1742, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1549, in request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.BadRequestError: Error code: 400 - {'error': {'message': 'Model Not Exist', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_request_error'}}\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/app/pkg/api/http/controller/group.py\", line 88, in handler_error\n    return await f(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/api/http/controller/groups/provider/models.py\", line 44, in _\n    await self.ap.model_service.test_llm_model(model_uuid, json_data)\n  File \"/app/pkg/api/http/service/model.py\", line 99, in test_llm_model\n    await runtime_llm_model.requester.invoke_llm(\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 135, in invoke_llm\n    raise errors.RequesterError(f'请求参数错误: {e.message}')\npkg.provider.modelmgr.errors.RequesterError: 模型请求失败: 请求参数错误: Error code: 400 - {'error': {'message': 'Model Not Exist', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_request_error'}}\n[2025-05-30 15:26:27 +0800] [10] [INFO] 112.115.91.12:15272 POST /api/v1/provider/models/llm/_/test 1.1 500 42 816560\nTraceback (most recent call last):\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 122, in invoke_llm\n    return await self._closure(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/provider/modelmgr/requesters/deepseekchatcmpl.py\", line 50, in _closure\n    resp = await self._req(args, extra_body=extra_args)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 39, in _req\n    return await self.client.chat.completions.create(**args, extra_body=extra_body)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/resources/chat/completions/completions.py\", line 2028, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1742, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1549, in request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.BadRequestError: Error code: 400 - {'error': {'message': 'Model Not Exist', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_request_error'}}\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/app/pkg/api/http/controller/group.py\", line 88, in handler_error\n    return await f(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/api/http/controller/groups/provider/models.py\", line 44, in _\n    await self.ap.model_service.test_llm_model(model_uuid, json_data)\n  File \"/app/pkg/api/http/service/model.py\", line 99, in test_llm_model\n    await runtime_llm_model.requester.invoke_llm(\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 135, in invoke_llm\n    raise errors.RequesterError(f'请求参数错误: {e.message}')\npkg.provider.modelmgr.errors.RequesterError: 模型请求失败: 请求参数错误: Error code: 400 - {'error': {'message': 'Model Not Exist', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_request_error'}}\n[2025-05-30 15:36:19 +0800] [10] [INFO] 112.115.91.12:14981 POST /api/v1/provider/models/llm/_/test 1.1 500 42 576376\nTraceback (most recent call last):\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 122, in invoke_llm\n    return await self._closure(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/provider/modelmgr/requesters/deepseekchatcmpl.py\", line 50, in _closure\n    resp = await self._req(args, extra_body=extra_args)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 39, in _req\n    return await self.client.chat.completions.create(**args, extra_body=extra_body)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/resources/chat/completions/completions.py\", line 2028, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1742, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1549, in request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.BadRequestError: Error code: 400 - {'error': {'message': 'Model Not Exist', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_request_error'}}\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/app/pkg/api/http/controller/group.py\", line 88, in handler_error\n    return await f(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/api/http/controller/groups/provider/models.py\", line 44, in _\n    await self.ap.model_service.test_llm_model(model_uuid, json_data)\n  File \"/app/pkg/api/http/service/model.py\", line 99, in test_llm_model\n    await runtime_llm_model.requester.invoke_llm(\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 135, in invoke_llm\n    raise errors.RequesterError(f'请求参数错误: {e.message}')\npkg.provider.modelmgr.errors.RequesterError: 模型请求失败: 请求参数错误: Error code: 400 - {'error': {'message': 'Model Not Exist', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_request_error'}}\n[2025-05-30 15:36:39 +0800] [10] [INFO] 112.115.91.12:15138 POST /api/v1/provider/models/llm/_/test 1.1 500 42 1494005\n[2025-05-30 15:37:13 +0800] [10] [INFO] 112.115.91.12:15364 POST /api/v1/provider/models/llm 1.1 200 77 52615\n[2025-05-30 15:37:13 +0800] [10] [INFO] 112.115.91.12:15364 GET /api/v1/provider/requesters 1.1 200 7414 3645\n[2025-05-30 15:37:13 +0800] [10] [INFO] 112.115.91.12:15364 GET /api/v1/provider/models/llm 1.1 200 441 4464\n[2025-05-30 15:37:13 +0800] [10] [INFO] 112.115.91.12:15364 GET /api/v1/provider/requesters/deepseek-chat-completions/icon 1.1 200 3287 3366\n[2025-05-30 15:37:16 +0800] [10] [INFO] 112.115.91.12:15364 GET /api/v1/provider/requesters 1.1 200 7414 3284\n[2025-05-30 15:37:16 +0800] [10] [INFO] 112.115.91.12:15364 GET /api/v1/provider/models/llm/7fc121ef-5d06-4c8c-944e-010db258dcd7 1.1 200 438 4390\nTraceback (most recent call last):\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 122, in invoke_llm\n    return await self._closure(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/provider/modelmgr/requesters/deepseekchatcmpl.py\", line 50, in _closure\n    resp = await self._req(args, extra_body=extra_args)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 39, in _req\n    return await self.client.chat.completions.create(**args, extra_body=extra_body)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/resources/chat/completions/completions.py\", line 2028, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1742, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1549, in request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.BadRequestError: Error code: 400 - {'error': {'message': 'Model Not Exist', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_request_error'}}\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/app/pkg/api/http/controller/group.py\", line 88, in handler_error\n    return await f(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/api/http/controller/groups/provider/models.py\", line 44, in _\n    await self.ap.model_service.test_llm_model(model_uuid, json_data)\n  File \"/app/pkg/api/http/service/model.py\", line 99, in test_llm_model\n    await runtime_llm_model.requester.invoke_llm(\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 135, in invoke_llm\n    raise errors.RequesterError(f'请求参数错误: {e.message}')\npkg.provider.modelmgr.errors.RequesterError: 模型请求失败: 请求参数错误: Error code: 400 - {'error': {'message': 'Model Not Exist', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_request_error'}}\n[2025-05-30 15:37:19 +0800] [10] [INFO] 112.115.91.12:15364 POST /api/v1/provider/models/llm/_/test 1.1 500 42 199110\n[2025-05-30 15:37:37 +0800] [10] [INFO] 112.115.91.12:15653 PUT /api/v1/provider/models/llm/7fc121ef-5d06-4c8c-944e-010db258dcd7 1.1 200 34 51885\n[2025-05-30 15:37:37 +0800] [10] [INFO] 112.115.91.12:15653 GET /api/v1/provider/requesters 1.1 200 7414 5107\n[2025-05-30 15:37:37 +0800] [10] [INFO] 112.115.91.12:15653 GET /api/v1/provider/models/llm 1.1 200 437 3994\n[2025-05-30 15:37:37 +0800] [10] [INFO] 112.115.91.12:15653 GET /api/v1/provider/requesters/openai-chat-completions/icon 1.1 200 7038 3359\n[2025-05-30 15:37:38 +0800] [10] [INFO] 112.115.91.12:15364 POST /api/v1/provider/models/llm/_/test 1.1 - - 14996584\n[2025-05-30 15:37:40 +0800] [10] [INFO] 112.115.91.12:15653 GET /api/v1/provider/requesters 1.1 200 7414 3162\n[2025-05-30 15:37:40 +0800] [10] [INFO] 112.115.91.12:15653 GET /api/v1/provider/models/llm/7fc121ef-5d06-4c8c-944e-010db258dcd7 1.1 200 434 3960\n[2025-05-30 15:41:48 +0800] [10] [INFO] 112.115.91.12:13598 GET /api/v1/provider/requesters 1.1 200 7414 3328\n[2025-05-30 15:41:48 +0800] [10] [INFO] 112.115.91.12:13598 GET /api/v1/provider/models/llm/7fc121ef-5d06-4c8c-944e-010db258dcd7 1.1 200 434 4362\nTraceback (most recent call last):\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 122, in invoke_llm\n    return await self._closure(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/provider/modelmgr/requesters/deepseekchatcmpl.py\", line 50, in _closure\n    resp = await self._req(args, extra_body=extra_args)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 39, in _req\n    return await self.client.chat.completions.create(**args, extra_body=extra_body)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/resources/chat/completions/completions.py\", line 2028, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1742, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1549, in request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.BadRequestError: Error code: 400 - {'error': {'message': 'Model Not Exist', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_request_error'}}\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/app/pkg/api/http/controller/group.py\", line 88, in handler_error\n    return await f(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/api/http/controller/groups/provider/models.py\", line 44, in _\n    await self.ap.model_service.test_llm_model(model_uuid, json_data)\n  File \"/app/pkg/api/http/service/model.py\", line 99, in test_llm_model\n    await runtime_llm_model.requester.invoke_llm(\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 135, in invoke_llm\n    raise errors.RequesterError(f'请求参数错误: {e.message}')\npkg.provider.modelmgr.errors.RequesterError: 模型请求失败: 请求参数错误: Error code: 400 - {'error': {'message': 'Model Not Exist', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_request_error'}}\n[2025-05-30 15:42:05 +0800] [10] [INFO] 112.115.91.12:13756 POST /api/v1/provider/models/llm/_/test 1.1 500 42 293262\nTraceback (most recent call last):\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 122, in invoke_llm\n    return await self._closure(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/provider/modelmgr/requesters/deepseekchatcmpl.py\", line 50, in _closure\n    resp = await self._req(args, extra_body=extra_args)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 39, in _req\n    return await self.client.chat.completions.create(**args, extra_body=extra_body)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/resources/chat/completions/completions.py\", line 2028, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1742, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1549, in request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.BadRequestError: Error code: 400 - {'error': {'message': 'Model Not Exist', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_request_error'}}\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/app/pkg/api/http/controller/group.py\", line 88, in handler_error\n    return await f(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/api/http/controller/groups/provider/models.py\", line 44, in _\n    await self.ap.model_service.test_llm_model(model_uuid, json_data)\n  File \"/app/pkg/api/http/service/model.py\", line 99, in test_llm_model\n    await runtime_llm_model.requester.invoke_llm(\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 135, in invoke_llm\n    raise errors.RequesterError(f'请求参数错误: {e.message}')\npkg.provider.modelmgr.errors.RequesterError: 模型请求失败: 请求参数错误: Error code: 400 - {'error': {'message': 'Model Not Exist', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_request_error'}}\n[2025-05-30 15:46:57 +0800] [10] [INFO] 112.115.91.12:15524 POST /api/v1/provider/models/llm/_/test 1.1 500 42 2273181\nTraceback (most recent call last):\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 122, in invoke_llm\n    return await self._closure(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/provider/modelmgr/requesters/deepseekchatcmpl.py\", line 50, in _closure\n    resp = await self._req(args, extra_body=extra_args)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 39, in _req\n    return await self.client.chat.completions.create(**args, extra_body=extra_body)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/resources/chat/completions/completions.py\", line 2028, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1742, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1549, in request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.BadRequestError: Error code: 400 - {'error': {'message': 'Model Not Exist', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_request_error'}}\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/app/pkg/api/http/controller/group.py\", line 88, in handler_error\n    return await f(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/api/http/controller/groups/provider/models.py\", line 44, in _\n    await self.ap.model_service.test_llm_model(model_uuid, json_data)\n  File \"/app/pkg/api/http/service/model.py\", line 99, in test_llm_model\n    await runtime_llm_model.requester.invoke_llm(\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 135, in invoke_llm\n    raise errors.RequesterError(f'请求参数错误: {e.message}')\npkg.provider.modelmgr.errors.RequesterError: 模型请求失败: 请求参数错误: Error code: 400 - {'error': {'message': 'Model Not Exist', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_request_error'}}\n[2025-05-30 15:52:25 +0800] [10] [INFO] 112.115.91.12:17235 POST /api/v1/provider/models/llm/_/test 1.1 500 42 2117766\nTraceback (most recent call last):\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 122, in invoke_llm\n    return await self._closure(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/provider/modelmgr/requesters/deepseekchatcmpl.py\", line 50, in _closure\n    resp = await self._req(args, extra_body=extra_args)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 39, in _req\n    return await self.client.chat.completions.create(**args, extra_body=extra_body)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/resources/chat/completions/completions.py\", line 2028, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1742, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1549, in request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.BadRequestError: Error code: 400 - {'error': {'message': 'Model Not Exist', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_request_error'}}\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/app/pkg/api/http/controller/group.py\", line 88, in handler_error\n    return await f(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/api/http/controller/groups/provider/models.py\", line 44, in _\n    await self.ap.model_service.test_llm_model(model_uuid, json_data)\n  File \"/app/pkg/api/http/service/model.py\", line 99, in test_llm_model\n    await runtime_llm_model.requester.invoke_llm(\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 135, in invoke_llm\n    raise errors.RequesterError(f'请求参数错误: {e.message}')\npkg.provider.modelmgr.errors.RequesterError: 模型请求失败: 请求参数错误: Error code: 400 - {'error': {'message': 'Model Not Exist', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_request_error'}}\n[2025-05-30 15:52:57 +0800] [10] [INFO] 112.115.91.12:13555 POST /api/v1/provider/models/llm/_/test 1.1 500 42 286003\n[2025-05-30 15:52:58 +0800] [10] [INFO] 112.115.91.12:13555 PUT /api/v1/provider/models/llm/7fc121ef-5d06-4c8c-944e-010db258dcd7 1.1 200 34 40612\n[2025-05-30 15:52:58 +0800] [10] [INFO] 112.115.91.12:13555 GET /api/v1/provider/requesters 1.1 200 7414 3216\n[2025-05-30 15:52:58 +0800] [10] [INFO] 112.115.91.12:13555 GET /api/v1/provider/models/llm 1.1 200 438 3673\n[2025-05-30 15:52:59 +0800] [10] [INFO] 112.115.91.12:13555 GET /api/v1/provider/requesters 1.1 200 7414 3235\n[2025-05-30 15:52:59 +0800] [10] [INFO] 112.115.91.12:13555 GET /api/v1/provider/models/llm/7fc121ef-5d06-4c8c-944e-010db258dcd7 1.1 200 435 3977\n[2025-05-30 15:53:08 +0800] [10] [INFO] 112.115.91.12:13611 GET /home/pipelines.txt 1.1 200 4674 3243\n[2025-05-30 15:53:08 +0800] [10] [INFO] 112.115.91.12:13611 GET /_next/static/chunks/911-1560db0bc9f5fa18.js 1.1 200 12030 3602\n[2025-05-30 15:53:08 +0800] [10] [INFO] 112.115.91.12:13612 GET /_next/static/chunks/app/home/pipelines/page-f606bb3e8f27334a.js 1.1 200 13253 2909\n[2025-05-30 15:53:08 +0800] [10] [INFO] 112.115.91.12:13612 GET /api/v1/pipelines 1.1 200 1814 4451\n[2025-05-30 15:53:10 +0800] [10] [INFO] 112.115.91.12:13611 GET /api/v1/pipelines/_/metadata 1.1 200 12861 2923\n[2025-05-30 15:53:10 +0800] [10] [INFO] 112.115.91.12:13612 GET /api/v1/pipelines/97686199-0652-4dc3-9743-cca86fecb7ca 1.1 200 1811 3679\n[2025-05-30 15:53:13 +0800] [10] [INFO] 112.115.91.12:13612 PUT /api/v1/pipelines/97686199-0652-4dc3-9743-cca86fecb7ca 1.1 200 34 21685\n[2025-05-30 15:53:13 +0800] [10] [INFO] Running on http://0.0.0.0:2290 (CTRL + C to quit)\n[2025-05-30 15:53:13 +0800] [10] [INFO] 112.115.91.12:13612 GET /api/v1/pipelines 1.1 200 1812 4475\n[2025-05-30 15:53:14 +0800] [10] [INFO] 112.115.91.12:13611 GET /api/v1/pipelines/_/metadata 1.1 200 12861 3261\n[2025-05-30 15:53:14 +0800] [10] [INFO] 112.115.91.12:13612 GET /api/v1/pipelines/97686199-0652-4dc3-9743-cca86fecb7ca 1.1 200 1809 3822\n[2025-05-30 15:53:15 +0800] [10] [INFO] 112.115.91.12:13612 GET /api/v1/provider/models/llm 1.1 200 438 4156\n[2025-05-30 15:53:34 +0800] [10] [INFO] 112.115.91.12:13773 PUT /api/v1/pipelines/97686199-0652-4dc3-9743-cca86fecb7ca 1.1 200 34 18998\n[2025-05-30 15:53:34 +0800] [10] [INFO] Running on http://0.0.0.0:2290 (CTRL + C to quit)\n[2025-05-30 15:53:34 +0800] [10] [INFO] 112.115.91.12:13773 GET /api/v1/pipelines 1.1 200 1812 4159\n[2025-05-30 15:53:35 +0800] [10] [INFO] 112.115.91.12:13773 GET /home/plugins.txt 1.1 200 4712 2969\n[2025-05-30 15:53:35 +0800] [10] [INFO] 112.115.91.12:13773 GET /_next/static/chunks/912-e112e511216e8f24.js 1.1 200 47377 6043\n[2025-05-30 15:53:35 +0800] [10] [INFO] 112.115.91.12:13806 GET /_next/static/css/560b46fe0c14c0cb.css 1.1 200 336 3066\n[2025-05-30 15:53:35 +0800] [10] [INFO] 112.115.91.12:13807 GET /_next/static/chunks/app/home/plugins/page-dad994d9dab879e3.js 1.1 200 26971 4883\n[2025-05-30 15:53:35 +0800] [10] [INFO] 112.115.91.12:13807 GET /api/v1/plugins 1.1 200 44 2758\n[2025-05-30 15:53:55 +0800] [10] [INFO] 112.115.91.12:13923 GET /home/bots.txt 1.1 200 4654 3214\n[2025-05-30 15:53:55 +0800] [10] [INFO] 112.115.91.12:13923 GET /api/v1/platform/adapters 1.1 200 14023 3386\n[2025-05-30 15:53:55 +0800] [10] [INFO] 112.115.91.12:13923 GET /api/v1/platform/bots 1.1 200 667 3996\n[2025-05-30 16:06:47 +0800] [10] [INFO] 112.115.91.12:16059 GET /home/models.txt 1.1 200 4824 2832\n[2025-05-30 16:06:47 +0800] [10] [INFO] 112.115.91.12:16059 GET /api/v1/provider/requesters 1.1 200 7414 3196\n[2025-05-30 16:06:47 +0800] [10] [INFO] 112.115.91.12:16059 GET /api/v1/provider/models/llm 1.1 200 438 3946\n[2025-05-30 16:06:48 +0800] [10] [INFO] 112.115.91.12:16059 GET /home/bots.txt 1.1 200 4654 2638\n[2025-05-30 16:06:48 +0800] [10] [INFO] 112.115.91.12:16059 GET /api/v1/platform/adapters 1.1 200 14023 3284\n[2025-05-30 16:06:48 +0800] [10] [INFO] 112.115.91.12:16059 GET /api/v1/platform/bots 1.1 200 667 5026\n[2025-05-30 16:06:49 +0800] [10] [INFO] 112.115.91.12:16059 GET /api/v1/provider/requesters 1.1 200 7414 3306\n[2025-05-30 16:06:49 +0800] [10] [INFO] 112.115.91.12:16059 GET /api/v1/provider/models/llm 1.1 200 438 4863\n[2025-05-30 16:06:49 +0800] [10] [INFO] 112.115.91.12:16059 GET /api/v1/provider/requesters 1.1 200 7414 2945\n[2025-05-30 16:06:50 +0800] [10] [INFO] 112.115.91.12:16059 GET /api/v1/provider/models/llm/7fc121ef-5d06-4c8c-944e-010db258dcd7 1.1 200 435 4225\nTraceback (most recent call last):\n  File \"/app/pkg/api/http/controller/group.py\", line 88, in handler_error\n    return await f(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/api/http/controller/groups/provider/models.py\", line 44, in _\n    await self.ap.model_service.test_llm_model(model_uuid, json_data)\n  File \"/app/pkg/api/http/service/model.py\", line 99, in test_llm_model\n    await runtime_llm_model.requester.invoke_llm(\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 122, in invoke_llm\n    return await self._closure(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/provider/modelmgr/requesters/deepseekchatcmpl.py\", line 56, in _closure\n    message = await self._make_msg(resp)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 45, in _make_msg\n    chatcmpl_message = chat_completion.choices[0].message.model_dump()\n                       ^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'str' object has no attribute 'choices'\n[2025-05-30 16:07:21 +0800] [10] [INFO] 112.115.91.12:16519 POST /api/v1/provider/models/llm/_/test 1.1 500 42 591946\nTraceback (most recent call last):\n  File \"/app/pkg/api/http/controller/group.py\", line 88, in handler_error\n    return await f(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/api/http/controller/groups/provider/models.py\", line 44, in _\n    await self.ap.model_service.test_llm_model(model_uuid, json_data)\n  File \"/app/pkg/api/http/service/model.py\", line 99, in test_llm_model\n    await runtime_llm_model.requester.invoke_llm(\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 122, in invoke_llm\n    return await self._closure(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/provider/modelmgr/requesters/deepseekchatcmpl.py\", line 56, in _closure\n    message = await self._make_msg(resp)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 45, in _make_msg\n    chatcmpl_message = chat_completion.choices[0].message.model_dump()\n                       ^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'str' object has no attribute 'choices'\n[2025-05-30 16:10:47 +0800] [10] [INFO] 112.115.91.12:13604 POST /api/v1/provider/models/llm/_/test 1.1 500 42 601703`\n\n### Reproduction steps\n\n_No response_\n\n### Enabled plugins\n\n_No response_",
      "state": "open",
      "author": "baiyajin",
      "author_type": "User",
      "created_at": "2025-05-30T08:20:16Z",
      "updated_at": "2025-06-05T04:05:29Z",
      "closed_at": null,
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1489/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1489",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1489",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:33.747638",
      "comments": [
        {
          "author": "3099749306",
          "body": "大佬解决了吗？我也是LangBot配置DeepSeek的模型，测试报错：模型不存在",
          "created_at": "2025-06-05T02:56:17Z"
        },
        {
          "author": "baiyajin",
          "body": "按它文档中那个图片中的地址来输入进去就ok了\r\n\r\n\r\n\r\n\r\n1254085110\r\n***@***.***",
          "created_at": "2025-06-05T03:01:24Z"
        },
        {
          "author": "3099749306",
          "body": "哪个？可以帮忙截下图吗",
          "created_at": "2025-06-05T03:17:26Z"
        },
        {
          "author": "3099749306",
          "body": "我用的deepseek\n",
          "created_at": "2025-06-05T03:17:50Z"
        },
        {
          "author": "baiyajin",
          "body": "一样，都要选择openAI\r\n\r\n\r\n\r\n\r\n1254085110\r\n***@***.***",
          "created_at": "2025-06-05T03:24:51Z"
        }
      ]
    },
    {
      "issue_number": 1498,
      "title": "[Bug]: 安装插件时无法顺利安装requirements？",
      "body": "### Runtime environment\n\nDocker\n\n### Exception\n\n安装插件时报错如下：\n\n> [2025-06-03 12:45:30 +0000] [9] [INFO] 171.83.7.23:62695 POST /api/v1/plugins/install/github 1.1 200 45 3293\nWARNING: pip is being invoked by an old script wrapper. This will fail in a future version of pip.\nPlease see https://github.com/pypa/pip/issues/5599 for advice on fixing the underlying issue.\nTo avoid this problem you can invoke Python with '-m pip' instead of running pip directly.\nLooking in indexes: https://pypi.tuna.tsinghua.edu.cn/simple\nERROR: Could not find a version that satisfies the requirement PicImageSearch (from versions: none)\nERROR: No matching distribution found for PicImageSearch\n[06-03 12:45:32.108] app.py (209) - [INFO] : 执行热重载 scope=plugin\n执行热重载 scope=plugin\n[06-03 12:45:32.112] manager.py (73) - [INFO] : Loading all plugins...\nLoading all plugins...\n[06-03 12:45:32.119] classic.py (186) - [ERROR] : 加载插件模块 LangBot_YandexImageSearchPlugin.main 时发生错误\nERROR: 加载插件模块 LangBot_YandexImageSearchPlugin.main 时发生错误\nTraceback (most recent call last):\n  File \"/app/pkg/plugin/loaders/classic.py\", line 180, in _walk_plugin_path\n    importlib.import_module(module.__name__ + '.' + item.name)\n  File \"/usr/local/lib/python3.12/importlib/__init__.py\", line 90, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"<frozen importlib._bootstrap>\", line 1387, in _gcd_import\n  File \"<frozen importlib._bootstrap>\", line 1360, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 1331, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 935, in _load_unlocked\n  File \"<frozen importlib._bootstrap_external>\", line 995, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 488, in _call_with_frames_removed\n  File \"/app/plugins/LangBot_YandexImageSearchPlugin/main.py\", line 9, in <module>\n    from PicImageSearch import Network, Yandex\nModuleNotFoundError: No module named 'PicImageSearch'\n\n类似的，另一个插件：\n\n> [2025-06-03 12:55:44 +0000] [9] [INFO] 171.83.7.23:62677 POST /api/v1/plugins/install/github 1.1 200 45 3975\nWARNING: pip is being invoked by an old script wrapper. This will fail in a future version of pip.\nPlease see https://github.com/pypa/pip/issues/5599 for advice on fixing the underlying issue.\nTo avoid this problem you can invoke Python with '-m pip' instead of running pip directly.\nLooking in indexes: https://pypi.tuna.tsinghua.edu.cn/simple\nERROR: Could not find a version that satisfies the requirement beautifulsoup4 (from versions: none)\nERROR: No matching distribution found for beautifulsoup4\n[06-03 12:55:46.080] app.py (209) - [INFO] : 执行热重载 scope=plugin\n执行热重载 scope=plugin\n[06-03 12:55:46.084] manager.py (73) - [INFO] : Loading all plugins...\nLoading all plugins...\n[06-03 12:55:46.090] classic.py (186) - [ERROR] : 加载插件模块 LangBot_YandexImageSearchPlugin.main 时发生错误\nERROR: 加载插件模块 LangBot_YandexImageSearchPlugin.main 时发生错误\nTraceback (most recent call last):\n  File \"/app/pkg/plugin/loaders/classic.py\", line 180, in _walk_plugin_path\n    importlib.import_module(module.__name__ + '.' + item.name)\n  File \"/usr/local/lib/python3.12/importlib/__init__.py\", line 90, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"<frozen importlib._bootstrap>\", line 1387, in _gcd_import\n  File \"<frozen importlib._bootstrap>\", line 1360, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 1331, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 935, in _load_unlocked\n  File \"<frozen importlib._bootstrap_external>\", line 995, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 488, in _call_with_frames_removed\n  File \"/app/plugins/LangBot_YandexImageSearchPlugin/main.py\", line 9, in <module>\n    from PicImageSearch import Network, Yandex\nModuleNotFoundError: No module named 'PicImageSearch'\n[06-03 12:55:46.096] classic.py (186) - [ERROR] : 加载插件模块 WebwlkrPlugin.main 时发生错误\nERROR: 加载插件模块 WebwlkrPlugin.main 时发生错误\nTraceback (most recent call last):\n  File \"/app/pkg/plugin/loaders/classic.py\", line 180, in _walk_plugin_path\n    importlib.import_module(module.__name__ + '.' + item.name)\n  File \"/usr/local/lib/python3.12/importlib/__init__.py\", line 90, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"<frozen importlib._bootstrap>\", line 1387, in _gcd_import\n  File \"<frozen importlib._bootstrap>\", line 1360, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 1331, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 935, in _load_unlocked\n  File \"<frozen importlib._bootstrap_external>\", line 995, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 488, in _call_with_frames_removed\n  File \"/app/plugins/WebwlkrPlugin/main.py\", line 2, in <module>\n    from pkg.plugin.host import EventContext, PluginHost\nImportError: cannot import name 'EventContext' from 'pkg.plugin.host' (/app/pkg/plugin/host.py)\n[06-03 12:55:46.102] classic.py (186) - [ERROR] : 加载插件模块 WebwlkrPlugin.mux 时发生错误\nERROR: 加载插件模块 WebwlkrPlugin.mux 时发生错误\nTraceback (most recent call last):\n  File \"/app/pkg/plugin/loaders/classic.py\", line 180, in _walk_plugin_path\n    importlib.import_module(module.__name__ + '.' + item.name)\n  File \"/usr/local/lib/python3.12/importlib/__init__.py\", line 90, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"<frozen importlib._bootstrap>\", line 1387, in _gcd_import\n  File \"<frozen importlib._bootstrap>\", line 1360, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 1331, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 935, in _load_unlocked\n  File \"<frozen importlib._bootstrap_external>\", line 995, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 488, in _call_with_frames_removed\n  File \"/app/plugins/WebwlkrPlugin/mux.py\", line 4, in <module>\n    from .sites import model\n  File \"/app/plugins/WebwlkrPlugin/sites/model.py\", line 4, in <module>\n    from bs4 import BeautifulSoup\nModuleNotFoundError: No module named 'bs4'\n\n\n### Reproduction steps\n\n今天更新到了新版本，安装插件显示安装成功但是后台报错，插件列表也没有显示，手动进容器通过pip安装缺失的module也没有解决报错，但是有其他插件正常运行。\n\n### Enabled plugins\n\n[LangBot_YandexImageSearchPlugin](https://github.com/Thetail001/LangBot_YandexImageSearchPlugin)\n[WebwlkrPlugin](https://github.com/RockChinQ/WebwlkrPlugin)",
      "state": "open",
      "author": "Thetail001",
      "author_type": "User",
      "created_at": "2025-06-03T13:04:01Z",
      "updated_at": "2025-06-03T13:04:01Z",
      "closed_at": null,
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1498/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1498",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1498",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:33.908495",
      "comments": []
    },
    {
      "issue_number": 1483,
      "title": "[Bug]: 创建一个机器人，适配器选择企业微信网页就卡死且电脑cpu飙升。",
      "body": "### Runtime environment\n\nwindows 11\n\n### Exception\n\n创建一个机器人，适配器选择企业微信网页就卡死且电脑cpu飙升。\n\n### Reproduction steps\n\n_No response_\n\n### Enabled plugins\n\n_No response_",
      "state": "closed",
      "author": "baiyajin",
      "author_type": "User",
      "created_at": "2025-05-27T09:03:23Z",
      "updated_at": "2025-06-03T10:28:54Z",
      "closed_at": "2025-05-28T01:30:48Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 10,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1483/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1483",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1483",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:33.908516",
      "comments": [
        {
          "author": "baiyajin",
          "body": "环境是本地开发测试",
          "created_at": "2025-05-27T09:03:54Z"
        },
        {
          "author": "RockChinQ",
          "body": "有控制台日志和浏览器日志吗？",
          "created_at": "2025-05-27T09:04:41Z"
        },
        {
          "author": "RockChinQ",
          "body": "需要提醒的是，前端使用的是next框架，在开发环境运行时对cpu要求较高。",
          "created_at": "2025-05-27T09:05:10Z"
        },
        {
          "author": "baiyajin",
          "body": "一勾选完企业微信，再鼠标滚动就卡死了，电脑机箱就开始叫起来，电脑配置如下：\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n1254085110\r\n***@***.***",
          "created_at": "2025-05-28T06:51:55Z"
        },
        {
          "author": "baiyajin",
          "body": "大佬您好，我想咨询下能不能实现自动回复外部联系人，个微加企微，机器人能不能做到自动回复他们\r\n\r\n\r\n1254085110\r\n***@***.***",
          "created_at": "2025-06-03T06:10:30Z"
        }
      ]
    },
    {
      "issue_number": 1494,
      "title": "[Bug]: ollama连不上",
      "body": "### Runtime environment\n\nubuntu24.04  langbot和napcat是docker环境  ollama是本地\n\n### Exception\n\n![Image](https://github.com/user-attachments/assets/f9bf7c0f-557b-43d4-a796-2336afaa4d36)\n\n![Image](https://github.com/user-attachments/assets/6fee1821-91fe-4e56-92da-09cf580d47d0)\n\n![Image](https://github.com/user-attachments/assets/a5123de4-8fe6-4eaf-858a-a9465029feb4)\n\n### Reproduction steps\n\ndocker容器内curl http://192.168.31.194:11434能通\n但是编辑模型的时候，测试不通\n\nollama是能用的\n\n![Image](https://github.com/user-attachments/assets/4eb6022b-57b3-4962-92eb-5537ff8810d8)\n\n### Enabled plugins\n\n_No response_",
      "state": "closed",
      "author": "SuZeJun",
      "author_type": "User",
      "created_at": "2025-06-01T17:37:05Z",
      "updated_at": "2025-06-02T00:36:19Z",
      "closed_at": "2025-06-02T00:36:19Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1494/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1494",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1494",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:34.092648",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "网络连接问题请查看文档内“实践”板块的文章，或自行学习docker容器间网络配置方式，我爱莫能助。",
          "created_at": "2025-06-02T00:36:14Z"
        }
      ]
    },
    {
      "issue_number": 1493,
      "title": "[Bug]: 无法调用mcp工具",
      "body": "### Runtime environment\n\nv4.0.4, python3.12, docker\n\n### Exception\n\n无法触发调用工具，在Cherry Studio里测试是正常的\n### 模型配置， 已启用函数调用\n![Image](https://github.com/user-attachments/assets/b0ccd0b8-e727-403b-814f-cae35c4b4ba7)\n###  mcp已经配置，并且无法调用\n![Image](https://github.com/user-attachments/assets/969e5a23-2a50-4839-b63a-b471724e1a33)\n### Cherry Studio正常调用\n![Image](https://github.com/user-attachments/assets/2267f894-4237-4244-8b37-d27a9d3de454)\n\n### Reproduction steps\n\n_No response_\n\n### Enabled plugins\n\n_No response_",
      "state": "open",
      "author": "lonevle",
      "author_type": "User",
      "created_at": "2025-05-31T12:35:38Z",
      "updated_at": "2025-06-01T09:47:01Z",
      "closed_at": null,
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1493/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1493",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1493",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:34.268047",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "你确定这个模型可以函数调用？我们只支持模型本身的func call能力，不支持 ReAct 之类的高级 Agent。",
          "created_at": "2025-05-31T12:43:23Z"
        },
        {
          "author": "RockChinQ",
          "body": "<img width=\"709\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/52a4322a-1ec2-4745-a230-58685842e098\" />\n我这里看 r1没标tools标签",
          "created_at": "2025-05-31T12:44:15Z"
        },
        {
          "author": "lonevle",
          "body": "## 我重新拉取一个模型，qwen3:8b，上面有tools标签，还是无法调用工具\n![Image](https://github.com/user-attachments/assets/f6826001-1224-43d8-a0f3-dfba65c789f2)\n## 这是修改后的配置\n![Image](https://github.com/user-attachments/assets/6c0394bb-99f9-4283-aabd-0b409f063802)\n## 现在还是无法调用工具\n![Image](https://github.com/user-attachments/assets/",
          "created_at": "2025-06-01T02:33:14Z"
        },
        {
          "author": "RockChinQ",
          "body": "发一下你的mcp配置我测一下？",
          "created_at": "2025-06-01T09:08:30Z"
        },
        {
          "author": "lonevle",
          "body": "### mcp配置\n```yaml\nmcp:\n    servers:\n    -   args:\n        - --directory\n        - /mcp/test\n        - run\n        - main.py\n        command: uv\n        enable: true\n        env: {}\n        mode: stdio\n        name: MCP\n```\n\n### mcp服务\n```python\nfrom mcp.server.fastmcp import FastMCP\n\nmcp = FastMCP(\"工",
          "created_at": "2025-06-01T09:47:00Z"
        }
      ]
    },
    {
      "issue_number": 1484,
      "title": "[Bug]: 微信客服平台调用mcp工具后不能正确handle机器人连续输出的情况",
      "body": "### 运行环境\n\nlatest master\n\n### 异常情况\n\n微信客服平台调用mcp工具后不能正确handle机器人连续输出的情况，即：\nUser: 发问\nBot: 好的，我将调用工具XXX，（此在微信成功收到）\nBot调用工具并返回结果\nBot: 想再次输出执行后的答复却发不出去(即不能连续输出两个答复) （此在微信收不到任何后续答复）\n\n\n\n### 复现步骤\n\n日志：\n```\n[05-28 18:27:02.167] process.py (39) - [INFO] : 处理 person_xxx 的请求(0): 调用工具查一下广州塔附近有什么美食\n[05-28 18:27:13.791] chat.py (73) - [INFO] : 对话(0)响应: assistant: Okay, 我可以...\n[05-28 18:27:19.093] chat.py (73) - [INFO] : 对话(0)响应: tool: \"{\\\"results\\\":...\n[05-28 18:27:22.752] chat.py (73) - [INFO] : 对话(0)响应: assistant: 好的，我已经查到了...\n[05-28 18:27:28.375] pipelinemgr.py (200) - [ERROR] : 处理请求时出错 query_id=0 stage=SendResponseBackStage : Failed to send message\n[05-28 18:27:28.377] pipelinemgr.py (201) - [ERROR] : Traceback: Traceback (most recent call last):\n  File \"/app/pkg/pipeline/pipelinemgr.py\", line 197, in process_query\n    await self._execute_from_stage(0, query)\n  File \"/app/pkg/pipeline/pipelinemgr.py\", line 167, in _execute_from_stage\n    await self._execute_from_stage(i + 1, query)\n  File \"/app/pkg/pipeline/pipelinemgr.py\", line 167, in _execute_from_stage\n    await self._execute_from_stage(i + 1, query)\n  File \"/app/pkg/pipeline/pipelinemgr.py\", line 144, in _execute_from_stage\n    result = await result\n             ^^^^^^^^^^^^\n  File \"/app/pkg/pipeline/respback/respback.py\", line 39, in process\n    await query.adapter.reply_message(\n  File \"/app/pkg/platform/sources/wecomcs.py\", line 162, in reply_message\n    await self.bot.send_text_msg(\n  File \"/app/libs/wecom_customer_service_api/api.py\", line 191, in send_text_msg\n    raise Exception('Failed to send message')\nException: Failed to send message\n```\n\n### 启用的插件\n\nNone",
      "state": "closed",
      "author": "ptbsare",
      "author_type": "User",
      "created_at": "2025-05-28T10:32:30Z",
      "updated_at": "2025-05-31T08:21:18Z",
      "closed_at": "2025-05-31T05:12:14Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1484/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1484",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1484",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:34.434826",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感觉是你模型太差劲\n\n参考这个：\nhttps://github.com/RockChinQ/LangBot/issues/1488#issuecomment-2924304867 ",
          "created_at": "2025-05-31T05:07:27Z"
        },
        {
          "author": "ptbsare",
          "body": "@RockChinQ hi 你好，模型用的是gemini-2.5-flash-preview，按理说这个模型不是属于特别差劲的吧，这已经是最新的模型了。同时在其他测试客户端里面此模型调用工具的能力是正常的。留意到日志里面错误发生在SendResponseBackStage，按理说跟模型关系不大？",
          "created_at": "2025-05-31T05:19:20Z"
        },
        {
          "author": "RockChinQ",
          "body": "哦，我看了下，你这个报错应该是发回响应给微信的时候失败了，不是mcp的问题。可能是网络问题，如果持续发生的话，带着稳定复现步骤提个新issue吧。",
          "created_at": "2025-05-31T07:44:54Z"
        },
        {
          "author": "ptbsare",
          "body": "#1491",
          "created_at": "2025-05-31T08:21:17Z"
        }
      ]
    },
    {
      "issue_number": 1354,
      "title": "[Bug]:调用mcp tools报错Input类型不对",
      "body": "### 运行环境\n\ndocker\n\n### 异常情况\n\n1、使用sse模型接入了一个mcp server，但是在用chat对话的时候报错，麻烦帮忙看看\n\n<img width=\"602\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/096009e8-a5df-4d84-ac66-ffc6d22ca331\" />\n\n![Image](https://github.com/user-attachments/assets/3153cff8-49b7-4d08-893d-528f54db0685)\n\n### 复现步骤\n\n1、接入一个mcp server，然后对话调用tools，使用cherry等工具是可以正常调用的\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "zhangdongdong7",
      "author_type": "User",
      "created_at": "2025-04-29T02:49:38Z",
      "updated_at": "2025-05-31T05:12:59Z",
      "closed_at": "2025-05-31T05:12:58Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1354/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1354",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1354",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:34.628823",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "麻烦开调试模式（设置环境变量 DEBUG=true）看一下详细的报错输出，并且提供一下你用的 mcp server 信息",
          "created_at": "2025-04-29T02:57:41Z"
        },
        {
          "author": "zhangdongdong7",
          "body": "1、相同的模型和mcp sercer地址langbot报错\n[04-29 10:52:21.203] chat.py (94) - [ERROR] : 对话(5)请求失败: TypeError can only concatenate str (not \"NoneType\") to str\n[04-29 10:52:21.820] controller.py (98) - [ERROR] : can only concatenate str (not \"NoneType\") to str\n2、使用cherry的时候调用正常\n\n<!-- Failed to upload \"image.png\" ",
          "created_at": "2025-04-29T03:16:30Z"
        },
        {
          "author": "zhangdongdong7",
          "body": "1、我使用的mcp是https://mcp.so/server/k8m/weibaohui\n2、开启了debug之后的日志出现了两种情况：\n请求不报错，但是结果不对\n\n![Image](https://github.com/user-attachments/assets/8c1889ed-8523-4f1d-8f3b-2fa93990a3c2)\n\n请求报错\n\n![Image](https://github.com/user-attachments/assets/3f24d99b-c21e-4926-b433-fd8f6a06c55e)",
          "created_at": "2025-04-29T03:27:53Z"
        },
        {
          "author": "zhangdongdong7",
          "body": "这是完整的debug日志\n[04-29 12:01:25.820] controller.py (192) - [DEBUG] : Query query_id=3 launcher_type=<LauncherTypes.PERSON: 'person'> launcher_id='ou_5b4d235b7ae9790394f9750050cd56d2' sender_id='ou_5b4d235b7ae9790394f9750050cd56d2' message_event=FriendMessage(message_chain=MessageChain([Source(id='om_x1",
          "created_at": "2025-04-29T04:05:01Z"
        },
        {
          "author": "RockChinQ",
          "body": "试一下最新版",
          "created_at": "2025-05-28T06:55:35Z"
        }
      ]
    },
    {
      "issue_number": 1488,
      "title": "[Bug]: 不会调用函数",
      "body": "### Runtime environment\n\ndebian12,docker\n\n### Exception\n\n配置了MCP服务，用的tgbot，模型用的models/gemini-2.0-flash,官方明确显示支持函数调用，\n\n![Image](https://github.com/user-attachments/assets/5270517c-6538-463d-a880-a51f5f366123)\n\nbot输入!func也可以正常显示内容函数，但是输入指令不会调用函数\n\n![Image](https://github.com/user-attachments/assets/813e723c-dfb9-44ce-b6e2-195607042e83)\n\n### Reproduction steps\n\n_No response_\n\n### Enabled plugins\n\n_No response_",
      "state": "closed",
      "author": "chenleidaye",
      "author_type": "User",
      "created_at": "2025-05-30T04:53:13Z",
      "updated_at": "2025-05-31T05:11:55Z",
      "closed_at": "2025-05-31T05:11:55Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1488/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1488",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1488",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:34.792718",
      "comments": [
        {
          "author": "chenleidaye",
          "body": "错误输出\n\n![Image](https://github.com/user-attachments/assets/5c80b1a7-1d44-4267-8a7b-ac5b7acba4c1)\n正确输出\n\n![Image](https://github.com/user-attachments/assets/46e8d31a-2c76-4662-a548-8cd8749f5d67)\n",
          "created_at": "2025-05-30T04:55:47Z"
        },
        {
          "author": "RockChinQ",
          "body": "看看你在模型页怎么配置这个模型的？",
          "created_at": "2025-05-30T09:02:51Z"
        },
        {
          "author": "chenleidaye",
          "body": "> 看看你在模型页怎么配置这个模型的？\n\n![Image](https://github.com/user-attachments/assets/5954ca63-6c67-44c5-b5a7-5feb0d37590f)\n又研究了一下，会调用了，但是回复的这个是什么鬼\n\n![Image](https://github.com/user-attachments/assets/e592d2c4-fb61-450b-b128-b90294a44f65)",
          "created_at": "2025-05-30T09:24:00Z"
        },
        {
          "author": "RockChinQ",
          "body": "你这图里面的名称不是 gpt-4o-mini 么",
          "created_at": "2025-05-30T09:29:00Z"
        },
        {
          "author": "chenleidaye",
          "body": "> 你这图里面的名称不是 gpt-4o-mini 么\n\n因为我之前是用在美国vps搭的，后面换国内环境不允许，gemini连不上\n\n![Image](https://github.com/user-attachments/assets/c1962efa-1857-4651-8348-d8b9aad9c0af)，现在问题是机器回复变量，不是正确内容\n\n![Image](https://github.com/user-attachments/assets/ea25f722-32cc-44bb-946c-c5b7c07d7609)，这个是我在Cherry Studio上测试的",
          "created_at": "2025-05-30T09:36:17Z"
        }
      ]
    },
    {
      "issue_number": 1486,
      "title": "[Bug]: Gemini接口错误的构建请求",
      "body": "### 运行环境\n\nlatest master on linux docker\n\n### 异常情况\n\n```\n\u001b[37m[05-28 18:48:27.361] process.py (39) - [INFO] : 处理 person_xxx 的请求(0): 你好\u001b[0m\n\u001b[37m[05-28 18:48:28.561] chat.py (73) - [INFO] : 对话(0)响应: assistant: 你好！很高兴见到你...\u001b[0m\n[2025-05-28 18:48:47 +0800] [10] [INFO] 14.116.241.251:45604 POST /callback/command 1.1 200 7 927776\n\u001b[37m[05-28 18:48:47.803] process.py (39) - [INFO] : 处理 person_xxx 的请求(1): 那你查询一下广州明天的天气。\u001b[0m\n\u001b[31m[05-28 18:48:47.945] chat.py (83) - [ERROR] : 对话(1)请求失败: RequesterError 模型请求失败: Gemini API 请求错误: 400 INVALID_ARGUMENT. {'error': {'code': 400, 'message': 'Please use a valid role: user, model.', 'status': 'INVALID_ARGUMENT'}}\u001b[0m\n\u001b[31m[05-28 18:48:49.121] pipelinemgr.py (107) - [ERROR] : 模型请求失败: Gemini API 请求错误: 400 INVALID_ARGUMENT. {'error': {'code': 400, 'message': 'Please use a valid role: user, model.', 'status': 'INVALID_ARGUMENT'}}\u001b[0m\n[2025-05-28 18:49:13 +0800] [10] [INFO] 14.116.241.251:37368 POST /callback/command 1.1 200 7 1029302\n\u001b[37m[05-28 18:49:13.383] process.py (39) - [INFO] : 处理 person_xxx的请求(2): 你好\u001b[0m\n\u001b[31m[05-28 18:49:13.568] chat.py (83) - [ERROR] : 对话(2)请求失败: RequesterError 模型请求失败: Gemini API 请求错误: 400 INVALID_ARGUMENT. {'error': {'code': 400, 'message': 'Please use a valid role: user, model.', 'status': 'INVALID_ARGUMENT'}}\u001b[0m\n\u001b[31m[05-28 18:49:14.536] pipelinemgr.py (107) - [ERROR] : 模型请求失败: Gemini API 请求错误: 400 INVALID_ARGUMENT. {'error': {'code': 400, 'message': 'Please use a valid role: user, model.', 'status': 'INVALID_ARGUMENT'}}\u001b[0m\n\n```\n\n### 复现步骤\n\n配置了正确的官方API Key，默认URL，发送第一句话正确答复，第二句即报错。\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "ptbsare",
      "author_type": "User",
      "created_at": "2025-05-28T10:59:41Z",
      "updated_at": "2025-05-31T05:11:55Z",
      "closed_at": "2025-05-31T05:11:54Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1486/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1486",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1486",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:34.976540",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "<img width=\"558\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/54b18b8c-c734-44f4-9586-b89cdf32c069\" />\n\n修了一下，该用gemini那个openai兼容接口了。",
          "created_at": "2025-05-31T05:00:42Z"
        }
      ]
    },
    {
      "issue_number": 1485,
      "title": "[Bug]: Gemini接口配置baseur不被使用",
      "body": "### 运行环境\n\nlatest master docker on linux\n\n### 异常情况\n\nGemini接口配置baseur不被使用，即便是配置了请求URL，点击测试按钮以及发送请求的URL依旧是官方baseURL。\n\n### 复现步骤\n\n_No response_\n\n### 启用的插件\n\nNone.",
      "state": "closed",
      "author": "ptbsare",
      "author_type": "User",
      "created_at": "2025-05-28T10:53:04Z",
      "updated_at": "2025-05-31T05:11:54Z",
      "closed_at": "2025-05-31T05:11:54Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1485/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1485",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1485",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:35.152288",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "提供一下配置截图？",
          "created_at": "2025-05-28T10:54:23Z"
        },
        {
          "author": "ptbsare",
          "body": "实测URL填什么不重要，只要key填一个有效的官方key都会测试成功，哪怕URL填一个无效的地址。\ndocker报错:\n```\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/app/pkg/api/http/controller/group.py\", line 88, in handler_error\n    return await f(*args, **kwargs)\n           ^^^^^^^^^^^",
          "created_at": "2025-05-28T11:05:46Z"
        },
        {
          "author": "RockChinQ",
          "body": "https://docs.langbot.app/zh/insight/community.html 加一下社区群，找 1010553892 ，密钥发我测一下",
          "created_at": "2025-05-28T11:39:26Z"
        }
      ]
    },
    {
      "issue_number": 1487,
      "title": "[Bug]: 企业微信",
      "body": "### 运行环境\n\nDocker\n\n### 异常情况\n\n后台配置多个企业微信机器人时，会出现消息回调不生效\n\n<img width=\"1455\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/f4490103-c5bb-485b-8221-e2ea279dd8fa\" />\n\n### 复现步骤\n\n配置多个企业微信机器人\n\n### 启用的插件\n\n_No response_",
      "state": "open",
      "author": "xiansen4",
      "author_type": "User",
      "created_at": "2025-05-29T08:45:50Z",
      "updated_at": "2025-05-30T08:01:47Z",
      "closed_at": null,
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1487/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1487",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1487",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:35.333238",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "请提供多个企微机器人的配置截图",
          "created_at": "2025-05-29T08:49:30Z"
        },
        {
          "author": "xiansen4",
          "body": "> 请提供多个企微机器人的配置截图\n如果使用同一个回调端口会出现回调错误\n\n<img width=\"1460\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/76554628-6bca-4c5f-81db-fd97fadb2e22\" />",
          "created_at": "2025-05-29T08:55:04Z"
        },
        {
          "author": "ytqh",
          "body": "我可以复现该问题\n\nLangbot 为一个机器人\n\n<img width=\"866\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/54848afa-4ab5-4d89-8e4a-80ee4c1a8002\" />\n\n企业微信中\n- 内部机器人请求正常。\n- 该机器人配置为外部客服后，在客服入口发起聊天，会出现 400 \n\n<img width=\"1013\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/c2552cbc-aa23-4f25-8883",
          "created_at": "2025-05-30T08:01:45Z"
        }
      ]
    },
    {
      "issue_number": 984,
      "title": "[Bug]: 企业微信设置API回调地址保存失败",
      "body": "### 消息平台适配器\n\n其他（或暂未使用）\n\n### 运行环境\n\nv3.4.3.1, debian12(kernel 6.1.119-1), amd64, python3.11.2, 腾讯云虚机\n\n### 异常情况\n\n按照文档填入api回调地址后，保存时提示 \"openapi请求回调地址不通过\"，服务器日志如下。（另外，文档中openapi端口写2290，服务器实际在2280）\n\n\n[2025-01-23 14:31:13 +0800] [3963106] [INFO] 175.27.32.31:26408 GET /callback/command/ 1.1 404 207 809\n[2025-01-23 14:31:33 +0800] [3963106] [INFO] 175.27.32.31:57006 GET /callback/command 1.1 404 207 695\n[2025-01-23 14:31:40 +0800] [3963106] [INFO] 175.27.32.31:58958 GET /callback/command 1.1 404 207 712\n[2025-01-23 14:32:01 +0800] [3963106] [INFO] 175.27.32.31:14530 GET /callback/command 1.1 404 207 682\n[2025-01-23 14:33:12 +0800] [3963106] [INFO] 175.27.32.31:38162 GET /callback/command 1.1 404 207 740\n[2025-01-23 14:38:00 +0800] [3963106] [INFO] 175.27.32.31:20624 GET /callback/command 1.1 404 207 665\n\n### 复现步骤\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "WuLiangXiaoSeng",
      "author_type": "User",
      "created_at": "2025-01-23T06:54:02Z",
      "updated_at": "2025-05-30T03:04:23Z",
      "closed_at": "2025-01-23T14:35:57Z",
      "labels": [
        "bug?",
        "Please take it seriously"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 19,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/984/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/984",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/984",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:35.509167",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "确定一下启用的适配器是wecom么？LangBot 默认会开启2280给 aiocqhttp 适配器用。",
          "created_at": "2025-01-23T07:28:55Z"
        },
        {
          "author": "wangcham",
          "body": "发一下在data/logs/langbot-xxxx里的具体日志信息？",
          "created_at": "2025-01-23T11:23:07Z"
        },
        {
          "author": "RockChinQ",
          "body": "已更新更详细的企业微信配置文档，可以参考：https://docs.langbot.app/deploy/platforms/wechat/wecom.html",
          "created_at": "2025-01-23T14:35:57Z"
        },
        {
          "author": "zhangwei8607",
          "body": "> 已更新更详细的企业微信配置文档，可以参考：https://docs.langbot.app/deploy/platforms/wechat/wecom.html\n\n这个企业微信是不是不能加到群里，只能在应用里发消息啊？",
          "created_at": "2025-02-12T03:30:15Z"
        },
        {
          "author": "wangcham",
          "body": "对的，企业微信是如果要添加机器人到群里，需要新建群的时候把机器人拉进去，暂时还没有实现这个方法。",
          "created_at": "2025-02-12T05:09:37Z"
        }
      ]
    },
    {
      "issue_number": 1430,
      "title": "[Bug]: mcp配置开启之后只能查看func函数，但是对话的时候没有调用",
      "body": "### 运行环境\n\ndocker\n\n### 异常情况\n\nmcp配置开启之后只能查看func函数，但是对话的时候没有调用成功，相同的mcp server使用cherry studio是正常调用的，相同的模型，使用的qwen2-72b\n\n### 复现步骤\n\n1、mcp配置\n\n![Image](https://github.com/user-attachments/assets/885ace02-d9bc-4775-bfdd-8867dd5ac52a)\n2、工具获取\n\n![Image](https://github.com/user-attachments/assets/f803d03f-eb97-44a8-8816-e7b9be559b90)\n3、对话调用\n\n![Image](https://github.com/user-attachments/assets/6755c555-7d38-40e7-a83d-8216eb8756ef)\n4、其他mcp客户端调用\n\n![Image](https://github.com/user-attachments/assets/c98846a5-5242-433b-b477-de20eb90220c)\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "zhangdongdong7",
      "author_type": "User",
      "created_at": "2025-05-15T11:34:09Z",
      "updated_at": "2025-05-28T06:55:15Z",
      "closed_at": "2025-05-28T06:55:13Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1430/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1430",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1430",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:35.709102",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "你看看在模型配置那里，对应的这个模型有没有选择 函数调用 能力？",
          "created_at": "2025-05-17T00:17:24Z"
        },
        {
          "author": "zhangdongdong7",
          "body": "模型是开启了的\n\n![Image](https://github.com/user-attachments/assets/ec671c7f-737d-4f1e-92f5-39e5abcb69c9)",
          "created_at": "2025-05-19T02:26:23Z"
        },
        {
          "author": "ptbsare",
          "body": "#1447 类似的问题，不知道是否相关。",
          "created_at": "2025-05-19T11:59:48Z"
        },
        {
          "author": "RockChinQ",
          "body": "等我毕业论文查完重，下周集中解决。",
          "created_at": "2025-05-19T12:01:14Z"
        },
        {
          "author": "RockChinQ",
          "body": "这个在最新版修复了。",
          "created_at": "2025-05-28T06:55:14Z"
        }
      ]
    },
    {
      "issue_number": 1447,
      "title": "[Bug]: 配置了mcp服务器后Langbot并未将工具在请求中发给大模型",
      "body": "### 运行环境\n\nlatest master\n\n### 异常情况\n\n已经配置了mcp服务器，debug日志显示也已经获取到mcp的工具列表，但是对话发现大模型并没有获取到工具，查看请求发现请求内容的tools为空列表[]\n\n### 复现步骤\n\n配置mcp服务器，与模型对话，请输出工具列表。\n\n### 启用的插件\n\n无。",
      "state": "closed",
      "author": "ptbsare",
      "author_type": "User",
      "created_at": "2025-05-19T01:50:08Z",
      "updated_at": "2025-05-28T06:54:52Z",
      "closed_at": "2025-05-28T06:54:51Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1447/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1447",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1447",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:35.885265",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "这个在最新版修复了。",
          "created_at": "2025-05-28T06:54:51Z"
        }
      ]
    },
    {
      "issue_number": 1470,
      "title": "[Bug]:  接企业微信客服有问题呢",
      "body": "### Runtime environment\n\nlangbot-v4.0.3.1，Amazon Linux 2023.7.20250414，x86-64，Python 3.9.21，docker\n\n### Exception\n\nlangbot  | Traceback (most recent call last):\nlangbot  |   File \"/app/libs/wecom_customer_service_api/api.py\", line 219, in handle_callback_request\nlangbot  |     message_data = await self.get_detailed_message_list(xml_msg)\nlangbot  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nlangbot  |   File \"/app/libs/wecom_customer_service_api/api.py\", line 77, in get_detailed_message_list\nlangbot  |     token = root.find('Token').text\nlangbot  |             ^^^^^^^^^^^^^^^^^^^^^^^\nlangbot  | AttributeError: 'NoneType' object has no attribute 'text'\nlangbot  | [2025-05-22 17:35:19 +0800] [14] [INFO] 183.47.98.227:43140 POST /callback/command 1.1 400 67 7047\n\n\n### Reproduction steps\n\n_No response_\n\n### Enabled plugins\n\n_No response_",
      "state": "closed",
      "author": "zhh5562",
      "author_type": "User",
      "created_at": "2025-05-22T09:48:33Z",
      "updated_at": "2025-05-27T02:27:47Z",
      "closed_at": "2025-05-27T02:27:47Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1470/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1470",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1470",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:36.042649",
      "comments": [
        {
          "author": "wangcham",
          "body": "贴一下复现步骤？",
          "created_at": "2025-05-22T10:03:38Z"
        },
        {
          "author": "zhh5562",
          "body": "> 贴一下复现步骤？\n\n自建了一个机器人，配置的URL：http://xxx:2289/callback/command，LangBot使用了企微客服，随后从企微测试，LangBot日志显示上面的报错\n\n![Image](https://github.com/user-attachments/assets/65d3e831-499a-445b-8055-ca44556020fa)\n\n![Image](https://github.com/user-attachments/assets/71413e0d-554b-48ce-be0f-3518910947f9)",
          "created_at": "2025-05-23T03:33:26Z"
        },
        {
          "author": "wangcham",
          "body": "我们这里没法复现，有事在社区群说吧",
          "created_at": "2025-05-27T02:27:36Z"
        }
      ]
    },
    {
      "issue_number": 1453,
      "title": "[Bug]: onebot 无法链接websocket",
      "body": "### 运行环境\n\nv.4 ubuntu docker\n\n### 异常情况\n\n使用的是llonebot，llonebot日志显示无法连接\n\nlangbot docker运行\n\n\n### 复现步骤\n\n`5/19/2025, 2:58:49 PM [info] (********) | onebot Trying to connect to the websocket server: ws://127.0.0.1:2280/ws\n\n5/19/2025, 2:58:49 PM [error] (********)) | onebot Error: socket hang up\n    at Socket.socketOnEnd (node:_http_client:528:25)\n    at Socket.emit (node:events:530:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)\n\n5/19/2025, 2:58:49 PM [info] (********)) | onebot The websocket connection: ws://127.0.0.1:2280/ws closed, trying reconnecting...\n\n5/19/2025, 2:58:51 PM ntqq api timeout RM_IPCFROM_RENDERER2, ntApi-register, nodeIKernelMsgListener/onRecvSysMsg [] `\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "Tays-s",
      "author_type": "User",
      "created_at": "2025-05-19T07:43:52Z",
      "updated_at": "2025-05-27T02:09:56Z",
      "closed_at": "2025-05-27T02:09:55Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1453/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1453",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1453",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:36.221924",
      "comments": [
        {
          "author": "HsiangNianian",
          "body": "信息太少了，建议进群答疑，这种连接问题基本上不是 bug",
          "created_at": "2025-05-21T10:43:50Z"
        },
        {
          "author": "RockChinQ",
          "body": "网络问题爱莫能助，麻烦自行解决。",
          "created_at": "2025-05-27T02:09:55Z"
        }
      ]
    },
    {
      "issue_number": 1445,
      "title": "[Bug]: 长文本转图片出错",
      "body": "### 运行环境\n\nv4.0.3 on linux docker\n\n### 异常情况\n\n```log\n[05-18 20:32:52.855] pipelinemgr.py (200) - [ERROR] : 处理请求时出错 query_id=3 stage=LongTextProcessStage : unhashable type: 'Query'\n[05-18 20:32:52.857] pipelinemgr.py (201) - [ERROR] : Traceback: Traceback (most recent call last):\n  File \"/app/pkg/pipeline/pipelinemgr.py\", line 197, in process_query\n    await self._execute_from_stage(0, query)\n  File \"/app/pkg/pipeline/pipelinemgr.py\", line 167, in _execute_from_stage\n    await self._execute_from_stage(i + 1, query)\n  File \"/app/pkg/pipeline/pipelinemgr.py\", line 167, in _execute_from_stage\n    await self._execute_from_stage(i + 1, query)\n  File \"/app/pkg/pipeline/pipelinemgr.py\", line 144, in _execute_from_stage\n    result = await result\n             ^^^^^^^^^^^^\n  File \"/app/pkg/pipeline/longtext/longtext.py\", line 86, in process\n    await self.strategy_impl.process(str(query.resp_message_chain[-1]), query)\n  File \"/app/pkg/pipeline/longtext/strategies/image.py\", line 31, in process\n    img_path = self.text_to_image(\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/app/pkg/pipeline/longtext/strategies/image.py\", line 149, in text_to_image\n    line_width = self.get_font(query).getlength(line)\n                 ^^^^^^^^^^^^^^^^^^^^\nTypeError: unhashable type: 'Query'\n```\n\n### 复现步骤\n\n已经正确配置了data目录下的ttf字体路径。\n\n### 启用的插件\n\n无。",
      "state": "closed",
      "author": "ptbsare",
      "author_type": "User",
      "created_at": "2025-05-18T12:41:26Z",
      "updated_at": "2025-05-27T01:58:23Z",
      "closed_at": "2025-05-27T01:58:23Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1445/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1445",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1445",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:36.487640",
      "comments": []
    },
    {
      "issue_number": 1099,
      "title": "[Feature]: 请求支持 ragflow",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\nhttps://github.com/infiniflow/ragflow 是一个 rag 平台，通过 runner 支持 ragflow 以便在 LangBot 对话中使用 ragflow 的应用。",
      "state": "open",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2025-02-18T14:58:47Z",
      "updated_at": "2025-05-26T13:39:18Z",
      "closed_at": null,
      "labels": [
        "good first issue"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1099/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1099",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1099",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:36.487659",
      "comments": [
        {
          "author": "xnge",
          "body": "hi @RockChinQ 我对在LangBot里集成RAGFlow很感兴趣，RAGFlow里面有和知识库对话的功能，我想集成到LangBot中的对话机器人里面去，比如在飞书里可以直接调用RAGFlow里面的对话接口，询问知识库的内容。\n请教一下，我在LangBot里应该如何支持这样的功能，你能给我一些实现这个功能的开发建议和指引吗？我该使用哪种方式开发？使用LangBot的插件？",
          "created_at": "2025-05-26T02:23:31Z"
        },
        {
          "author": "RockChinQ",
          "body": "@xnge 欢迎贡献！\n\nLangBot 对于此类外部agent有很好的抽象层设计，你可以查看[架构图](https://docs.langbot.app/zh/develop/comp-arch.html) 先了解你应该实现的组件位置（Runner），然后参考pkg/provider/runners/ 下每个runner的写法来集成ragflow。\n\n- 你可以直接fork主仓库代码并把ragflow的runner加入到主程序中然后提pr，不必以插件形式接入\n- 更多详细信息可以加开发群询问：1032327138",
          "created_at": "2025-05-26T02:28:19Z"
        },
        {
          "author": "xnge",
          "body": "@RockChinQ 感谢你的回复，\n\n我再明确一下，我需要做的是：\n1. 类似实现一个 https://github.com/RockChinQ/LangBot/blob/master/pkg/provider/runners/localagent.py, 比如我参考 LocalAgentRunner 或者 difysvapi 的代码实现，开发一个ragflowapi，接口也都是localagent.py这里的接口，是吗？\n2. 然后再在流水线的界面上，添加一个 RAGFlow Service API 的Runner，是吗？\n3. 另外请教一下Runner的定义，Runner的意思是说，使用",
          "created_at": "2025-05-26T12:47:34Z"
        },
        {
          "author": "RockChinQ",
          "body": "@xnge \n1. 关于你写的实现需要写的方法，可以看一下 localagent 那个类的父类。\n2. 对，你需要在 templates/metadata/pipeline/ai.yaml 里加上你的 ragflow 配置项schema，参考其他的来写。有一个很好的例子是 #1468 可以稍微参考一下这个pr的yaml写法。当然，它的前端写得有点复杂，理论上你不需要改前端。\n3. llm 不止局限于简单的一来一回对话，人们希望llm可以调用工具访问世界信息，所以 Agent 诞生了。Agent 的运行过程比较复杂：\n\n一来一回对话：\n```\nUser: xxxxxx\nAssistant: xx",
          "created_at": "2025-05-26T13:39:16Z"
        }
      ]
    },
    {
      "issue_number": 1472,
      "title": "[Bug]: 使用discord，返回字符大于2000 出现 In content: Must be 2000 or fewer in length.",
      "body": "### Runtime environment\n\ndocker\n\n### Exception\n\n使用discord，响应长度大于2000，直接报错。建议判断大于2000时切分一下，分批次发送结果。\n\n具体错误日志如下：\n\n`In content: Must be 2000 or fewer in length.\nERROR: 处理请求时出错 query_id=17 stage=SendResponseBackStage : 400 Bad Request (error code: 50035): Invalid Form Body\nIn content: Must be 2000 or fewer in length.\n[05-23 17:45:49.836] pipelinemgr.py (201) - [ERROR] : Traceback: Traceback (most recent call last):\n  File \"/app/pkg/pipeline/pipelinemgr.py\", line 197, in process_query\n    await self._execute_from_stage(0, query)\n  File \"/app/pkg/pipeline/pipelinemgr.py\", line 167, in _execute_from_stage\n    await self._execute_from_stage(i + 1, query)\n  File \"/app/pkg/pipeline/pipelinemgr.py\", line 167, in _execute_from_stage\n    await self._execute_from_stage(i + 1, query)\n  File \"/app/pkg/pipeline/pipelinemgr.py\", line 144, in _execute_from_stage\n    result = await result\n             ^^^^^^^^^^^^\n  File \"/app/pkg/pipeline/respback/respback.py\", line 39, in process\n    await query.adapter.reply_message(\n  File \"/app/pkg/platform/sources/discord.py\", line 224, in reply_message\n    await message_source.source_platform_object.channel.send(**args)\n  File \"/app/.venv/lib/python3.12/site-packages/discord/abc.py\", line 1644, in send\n    data = await state.http.send_message(channel.id, params=params)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.12/site-packages/discord/http.py\", line 762, in request\n    raise HTTPException(response, data)\ndiscord.errors.HTTPException: 400 Bad Request (error code: 50035): Invalid Form Body\nIn content: Must be 2000 or fewer in length.\n`\n\n### Reproduction steps\n\n_No response_\n\n### Enabled plugins\n\n_No response_",
      "state": "open",
      "author": "jp0id",
      "author_type": "User",
      "created_at": "2025-05-23T10:07:50Z",
      "updated_at": "2025-05-23T10:08:55Z",
      "closed_at": null,
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1472/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1472",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1472",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:38.514893",
      "comments": []
    },
    {
      "issue_number": 1457,
      "title": "[Bug]: 飞书单聊正常,  群聊没有反应",
      "body": "### Runtime environment\n\ncentos 3.10.0-1160.el7.x86_64 x86_64下,  docker运行\n\n### Exception\n\n单聊正常\n\n![Image](https://github.com/user-attachments/assets/483de75d-7e07-4ac7-a48b-77d527ece930)\n\n群聊没有反应\n\n![Image](https://github.com/user-attachments/assets/57cd6d9e-f7db-4d1f-bebc-538c7d89dda5)\n\n日志:\n\n![Image](https://github.com/user-attachments/assets/a7574412-30f5-45e1-9711-4a50e0a92444)\n\nlangbot配置\n\n![Image](https://github.com/user-attachments/assets/90d9c3a5-8fb4-4b52-a6f0-6c3f3cdc3ad4)\n\n![Image](https://github.com/user-attachments/assets/9f9b5013-6985-4e95-9d51-aaa52c908284)\n\nlangbot日志, 没有发现相关信息\n\n[2025-05-20 14:11:38 +0800] [9] [INFO] 10.130.153.84:63474 GET /api/v1/pipelines 1.1 200 3337 4862\n[2025-05-20 14:11:38 +0800] [9] [INFO] 10.130.153.84:63474 GET /api/v1/platform/adapters 1.1 200 13747 3026\n[2025-05-20 14:11:38 +0800] [9] [INFO] 10.130.153.84:63474 GET /api/v1/platform/bots/7e0e68e1-4c29-427d-a6e0-aff30f29f3e9 1.1 200 658 3641\n[2025-05-20 14:15:15 +0800] [9] [INFO] 10.130.153.84:54552 GET /api/v1/pipelines 1.1 200 3337 4933\n[2025-05-20 14:15:15 +0800] [9] [INFO] 10.130.153.84:54552 GET /api/v1/platform/adapters 1.1 200 13747 2851\n[2025-05-20 14:15:15 +0800] [9] [INFO] 10.130.153.84:54552 GET /api/v1/platform/bots/7e0e68e1-4c29-427d-a6e0-aff30f29f3e9 1.1 200 658 3506\n[2025-05-20 14:15:19 +0800] [9] [INFO] 10.130.153.84:54552 PUT /api/v1/platform/bots/7e0e68e1-4c29-427d-a6e0-aff30f29f3e9 1.1 200 34 11605\n[2025-05-20 14:15:19 +0800] [9] [INFO] 10.130.153.84:54552 GET /api/v1/platform/adapters 1.1 200 13747 2836\n[2025-05-20 14:15:19 +0800] [9] [INFO] 10.130.153.84:54552 GET /api/v1/platform/bots 1.1 200 1296 3349\n[2025-05-20 14:15:19 +0800] [9] [INFO] 10.130.153.84:54552 GET /api/v1/pipelines 1.1 200 3337 4111\n[2025-05-20 14:15:19 +0800] [9] [INFO] 10.130.153.84:54552 GET /api/v1/platform/adapters 1.1 200 13747 2939\n[2025-05-20 14:15:19 +0800] [9] [INFO] 10.130.153.84:54552 GET /api/v1/platform/bots/7e0e68e1-4c29-427d-a6e0-aff30f29f3e9 1.1 200 659 3824\n[2025-05-20 14:15:26 +0800] [9] [INFO] 10.130.153.84:54592 PUT /api/v1/platform/bots/7e0e68e1-4c29-427d-a6e0-aff30f29f3e9 1.1 200 34 10632\n[2025-05-20 14:15:26 +0800] [9] [INFO] 10.130.153.84:54592 GET /api/v1/platform/adapters 1.1 200 13747 3697\n[2025-05-20 14:15:26 +0800] [9] [INFO] 10.130.153.84:54592 GET /api/v1/platform/bots 1.1 200 1263 45613\n[2025-05-20 14:15:27 +0800] [9] [INFO] 10.130.153.84:54592 GET /api/v1/pipelines 1.1 200 3337 4172\n[2025-05-20 14:15:27 +0800] [9] [INFO] 10.130.153.84:54592 GET /api/v1/platform/adapters 1.1 200 13747 2735\n[2025-05-20 14:15:27 +0800] [9] [INFO] 10.130.153.84:54592 GET /api/v1/platform/bots/7e0e68e1-4c29-427d-a6e0-aff30f29f3e9 1.1 200 626 3592\n[2025-05-20 14:15:44 +0800] [9] [INFO] 10.130.153.84:56479 PUT /api/v1/platform/bots/7e0e68e1-4c29-427d-a6e0-aff30f29f3e9 1.1 200 34 11336\n[2025-05-20 14:15:44 +0800] [9] [INFO] 10.130.153.84:56479 GET /api/v1/platform/adapters 1.1 200 13747 3243\n[2025-05-20 14:15:44 +0800] [9] [INFO] 10.130.153.84:56479 GET /api/v1/platform/bots 1.1 200 1243 3840\n\n权限能获取的都获取了\n\n![Image](https://github.com/user-attachments/assets/68a36e59-dae8-47ad-b95c-a9ec8637a30d)\n\n![Image](https://github.com/user-attachments/assets/6eae493a-121c-4a74-bedf-169dbbbb1794)\n\n![Image](https://github.com/user-attachments/assets/408e5959-f740-475a-84f6-f6e58a2f0cf9)\n\n![Image](https://github.com/user-attachments/assets/1b858998-6cc9-40a6-b569-369a711738eb)\n\n\n\n### Reproduction steps\n\n_No response_\n\n### Enabled plugins\n\n_No response_",
      "state": "closed",
      "author": "wweggplant",
      "author_type": "User",
      "created_at": "2025-05-20T06:25:53Z",
      "updated_at": "2025-05-23T06:20:15Z",
      "closed_at": "2025-05-23T06:20:15Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1457/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1457",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1457",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:38.514926",
      "comments": [
        {
          "author": "wweggplant",
          "body": "langbot日志没有群聊时刻记录,  怀疑是这里的问题. issue目前搜了一遍没有相关反馈",
          "created_at": "2025-05-20T06:32:06Z"
        },
        {
          "author": "wweggplant",
          "body": "发现issue中, 一个月前的版本还正常. 找了一下, 测试 [v3.4.14.3](https://github.com/RockChinQ/LangBot/releases/tag/v3.4.14.3) 这个版本是正常的\n\n![Image](https://github.com/user-attachments/assets/3ef5cfad-3545-493b-86b4-96918aa166f8)\n\n之后4.0.0版本就没有测试过了, 应该是升级后异常",
          "created_at": "2025-05-20T07:39:31Z"
        },
        {
          "author": "RockChinQ",
          "body": "![Image](https://github.com/user-attachments/assets/2c0e6250-ecfc-427c-adc0-8e59452e3c5f) \n\n![Image](https://github.com/user-attachments/assets/9ed78107-50d6-4d67-b76f-6015f27783a0)\n\n我这群聊私聊都正常诶？\n你试一下把机器人名称改成全英文的？记得langbot机器人配置也要改一下。",
          "created_at": "2025-05-21T10:00:40Z"
        },
        {
          "author": "RockChinQ",
          "body": "用最新版试试",
          "created_at": "2025-05-21T10:01:03Z"
        },
        {
          "author": "croatialu",
          "body": "同样的问题，刚才发现原因是 LangBot 的机器人名字 没有 和 飞书机器人的名字对应上。\n\n把 LangBot 和 飞书机器人名字改成一样的，应该就可以了。",
          "created_at": "2025-05-23T06:19:23Z"
        }
      ]
    },
    {
      "issue_number": 1460,
      "title": "[Bug]: 流水线DIFY运行器问题",
      "body": "### 运行环境\n\n4.3.0.1 Docker\n\n### 异常情况\n\nDIFY 运行器应用类型使用chatfolw、agent都无回应、没有合适的工作流类型没有测试。chat类型正常。\n报错日志如下：\n[05-20 17:07:51.627] chat.py (83) - [ERROR] : 对话(14)请求失败: DifyAPIError 404 {\"code\": \"not_found\", \"message\": \"Conversation Not Exists.\", \"status\": 404}\n[05-20 17:07:52.253] pipelinemgr.py (107) - [ERROR] : 404 {\"code\": \"not_found\", \"message\": \"Conversation Not Exists.\", \"status\": 404}\n\n### 复现步骤\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "noahachao",
      "author_type": "User",
      "created_at": "2025-05-20T09:30:07Z",
      "updated_at": "2025-05-22T08:10:32Z",
      "closed_at": "2025-05-21T11:50:55Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1460/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1460",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1460",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:38.681602",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "这个也麻烦提供一下详细的复现步骤：你的dify应用dsl、流水线配置截图、在什么平台运行、发送了哪些消息",
          "created_at": "2025-05-20T12:05:13Z"
        },
        {
          "author": "RockChinQ",
          "body": "之前conversation 确实有个bug，现在已经发了新版了，可以试一下 v4.3.0.2。",
          "created_at": "2025-05-21T11:50:55Z"
        },
        {
          "author": "noahachao",
          "body": "> 之前conversation 确实有个bug，现在已经发了新版了，可以试一下 v4.3.0.2。\n\nchatfolw已正常agent依然错误\n[05-22 11:43:43.185] chat.py (83) - [ERROR] : 对话(3)请求失败: DifyAPIError 404 {\"code\": \"not_found\", \"message\": \"Conversation Not Exists.\", \"status\": 404}\n[05-22 11:43:43.728] pipelinemgr.py (107) - [ERROR] : 404 {\"code\": \"not_found",
          "created_at": "2025-05-22T03:46:46Z"
        },
        {
          "author": "RockChinQ",
          "body": "应该是需要自动重建会话，可以跟踪一下这个issue #1443",
          "created_at": "2025-05-22T08:10:31Z"
        }
      ]
    },
    {
      "issue_number": 1467,
      "title": "[Bug]: 接受消息报错",
      "body": "### 运行环境\n\nDocker\n\n### 异常情况\n\n[05-22 02:36:08.084] pipelinemgr.py (200) - [ERROR] : 处理请求时出错 query_id=1 stage=PreProcessor : 'str' object has no attribute 'get'\n[05-22 02:36:08.087] pipelinemgr.py (201) - [ERROR] : Traceback: Traceback (most recent call last):\n  File \"/app/pkg/pipeline/pipelinemgr.py\", line 197, in process_query\n    await self._execute_from_stage(0, query)\n  File \"/app/pkg/pipeline/pipelinemgr.py\", line 144, in _execute_from_stage\n    result = await result\n             ^^^^^^^^^^^^\n  File \"/app/pkg/pipeline/preproc/preproc.py\", line 85, in process\n    qoute_msg = query.pipeline_config[\"trigger\"].get(\"misc\",'').get(\"combine-quote-message\")\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'str' object has no attribute 'get'\n\n\n### 复现步骤\n\n配置的企业微信内部应用，给bot发一条消息，日志就会这样报错\n\n### 启用的插件\n\n有一个RemoveThink v0.6，不过是关闭状态",
      "state": "closed",
      "author": "lovefan-fan",
      "author_type": "User",
      "created_at": "2025-05-22T02:39:00Z",
      "updated_at": "2025-05-22T05:41:00Z",
      "closed_at": "2025-05-22T03:03:14Z",
      "labels": [
        "bug?",
        "Please take it seriously"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1467/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1467",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1467",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:38.869959",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "刚发了个新版修了这个问题。",
          "created_at": "2025-05-22T03:03:14Z"
        },
        {
          "author": "lovefan-fan",
          "body": "> 刚发了个新版修了这个问题。\n\n重新拉了镜像，还是一样呢",
          "created_at": "2025-05-22T03:29:43Z"
        },
        {
          "author": "RockChinQ",
          "body": "看看版本号多少",
          "created_at": "2025-05-22T03:30:47Z"
        },
        {
          "author": "RockChinQ",
          "body": "重新部署一下",
          "created_at": "2025-05-22T03:31:04Z"
        },
        {
          "author": "lovefan-fan",
          "body": "> 看看版本号多少\n\nv4.0.3.3。重新部署了还是这样",
          "created_at": "2025-05-22T05:38:04Z"
        }
      ]
    },
    {
      "issue_number": 1459,
      "title": "[Bug]: 机器人配置调整后启用配置不生效",
      "body": "### 运行环境\n\n4.0.3.1 docker\n\n### 异常情况\n\n修改流水线后或者修改机器人配置后不能直接生效，只有重启容器后才会生效，配置修改后需要多次重启容器，操作不便。\n体现在对端发送消息后，只有重启容器后才会有日志反馈。\n\n### 复现步骤\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "open",
      "author": "noahachao",
      "author_type": "User",
      "created_at": "2025-05-20T07:00:33Z",
      "updated_at": "2025-05-22T03:52:23Z",
      "closed_at": null,
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1459/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1459",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1459",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:39.130702",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "请提供详细的复现步骤。",
          "created_at": "2025-05-20T07:11:35Z"
        },
        {
          "author": "noahachao",
          "body": "现在还没找到复现规律，使用同一个机器人 来回切换流水线就会有一定概率出现。日志中就不在出现process.py (39) - [INFO] : 处理",
          "created_at": "2025-05-20T09:23:55Z"
        },
        {
          "author": "RockChinQ",
          "body": "辛苦多尝试一下，总结一个稳定复现的步骤。我们这边方便排查。",
          "created_at": "2025-05-21T00:45:29Z"
        },
        {
          "author": "noahachao",
          "body": "> 辛苦多尝试一下，总结一个稳定复现的步骤。我们这边方便排查。\n\n经过多次测试发现可能是生效时间慢，也可能是完全没有生效。\n1.选择一个已经启用的机器人\n2.绑定流水线中换一个流水线\n3.保存\n然后在对端发送消息，有可能出现没有回应，也可能等很久才会回应。\n![Image](https://github.com/user-attachments/assets/007c2c24-3c70-4f48-9fe9-f1d23a807060)",
          "created_at": "2025-05-22T03:52:22Z"
        }
      ]
    },
    {
      "issue_number": 1458,
      "title": "[Bug]: 插件管理已安装插件空白但是日志显示加载错误",
      "body": "### Runtime environment\n\n4.0.3.1\n\n### Exception\n\n[05-20 14:43:27.641] classic.py (186) - [ERROR] : 加载插件模块 QChatGPT_Plugin_Music.main 时发生错误\nTraceback (most recent call last):\n  File \"/app/pkg/plugin/loaders/classic.py\", line 180, in _walk_plugin_path\n    importlib.import_module(module.__name__ + '.' + item.name)\n  File \"/usr/local/lib/python3.12/importlib/__init__.py\", line 90, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"<frozen importlib._bootstrap>\", line 1387, in _gcd_import\n  File \"<frozen importlib._bootstrap>\", line 1360, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 1331, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 935, in _load_unlocked\n  File \"<frozen importlib._bootstrap_external>\", line 995, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 488, in _call_with_frames_removed\n  File \"/app/plugins/QChatGPT_Plugin_Music/main.py\", line 11, in <module>\n    from graiax import silkcoder\n[05-20 14:43:27.644] classic.py (186) - [ERROR] : 加载插件模块 WebwlkrPlugin.main 时发生错误\nTraceback (most recent call last):\n  File \"/app/pkg/plugin/loaders/classic.py\", line 180, in _walk_plugin_path\n    importlib.import_module(module.__name__ + '.' + item.name)\n  File \"/usr/local/lib/python3.12/importlib/__init__.py\", line 90, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"<frozen importlib._bootstrap>\", line 1387, in _gcd_import\n  File \"<frozen importlib._bootstrap>\", line 1360, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 1331, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 935, in _load_unlocked\n  File \"<frozen importlib._bootstrap_external>\", line 995, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 488, in _call_with_frames_removed\n  File \"/app/plugins/WebwlkrPlugin/main.py\", line 2, in <module>\n    from pkg.plugin.host import EventContext, PluginHost\nImportError: cannot import name 'EventContext' from 'pkg.plugin.host' (/app/pkg/plugin/host.py)\n[05-20 14:43:27.743] classic.py (186) - [ERROR] : 加载插件模块 chat_voice.main 时发生错误\n\n![Image](https://github.com/user-attachments/assets/3b260540-3155-40d6-9938-d7f64bd57756)\n\n### Reproduction steps\n\n已安装插件看不到，启动时日志一直显示插件模块加载错误。\n\n### Enabled plugins\n\n_No response_",
      "state": "open",
      "author": "noahachao",
      "author_type": "User",
      "created_at": "2025-05-20T06:52:42Z",
      "updated_at": "2025-05-21T10:01:36Z",
      "closed_at": null,
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1458/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1458",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1458",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:39.293568",
      "comments": [
        {
          "author": "Shijiai",
          "body": "我和你遇到同样的问题。\n",
          "created_at": "2025-05-20T09:08:14Z"
        },
        {
          "author": "RockChinQ",
          "body": "这个确实有点问题，现在在重新设计插件系统",
          "created_at": "2025-05-21T10:01:35Z"
        }
      ]
    },
    {
      "issue_number": 1455,
      "title": "[Bug]: 微信客服接口机器人不支持接收图片",
      "body": "### 运行环境\n\nlatest master on linux x64\n\n### 异常情况\n\n```\n[2025-05-19 22:14:47 +0800] [10] [INFO] 183.47.98.168:54308 POST /callback/command 1.1 - - 1810288\n[2025-05-19 22:14:49 +0800] [10] [INFO] 106.55.201.217:63480 POST /callback/command 1.1 - - 1833332\n[2025-05-19 22:14:51 +0800] [10] [INFO] 112.53.2.93:51746 POST /callback/command 1.1 - - 1822714\n[2025-05-19 22:15:27 +0800] [10] [INFO] 183.47.98.168:40752 POST /callback/command 1.1 200 7 1366183\n[05-19 22:15:27.243] process.py (39) - [INFO] : 处理 person_uwmZEGmDwAAgM0B-QnFJtgelqQesMjkqw 的请求(4): 你可以看到图片吗\n[05-19 22:15:42.537] chat.py (73) - [INFO] : 对话(4)响应: assistant: 我不能像人类一样“...\n[2025-05-19 23:35:00 +0800] [10] [INFO] 183.47.98.227:29394 POST /callback/command 1.1 - - 1838089\n[2025-05-19 23:35:03 +0800] [10] [INFO] 106.55.227.187:15728 POST /callback/command 1.1 - - 1820538\n[2025-05-19 23:35:07 +0800] [10] [INFO] 112.53.2.93:29190 POST /callback/command 1.1 - - 1821823\n[2025-05-20 00:00:49 +0800] [10] [INFO] 113.108.92.100:32236 POST /callback/command 1.1 - - 1832734\n[2025-05-20 00:00:51 +0800] [10] [INFO] 106.55.201.217:43482 POST /callback/command 1.1 - - 1827489\n[2025-05-20 00:06:15 +0800] [10] [INFO] 14.116.241.251:41436 POST /callback/command 1.1 200 7 1255833\n[05-20 00:06:15.891] process.py (39) - [INFO] : 处理 person_uwmZEGmDwAAgM0B-QnFJtgelqQesMjkqw 的请求(5): 你好\n[05-20 00:06:28.260] chat.py (73) - [INFO] : 对话(5)响应: assistant: 你好！你已经说了几...\n```\n\n\n### 复现步骤\n\n发送图片给微信客服机器人，日志有收到/callback/command的POST日志，但是并没有显示处理....对话，也没有[图片]聊天记录标识，机器人无任何反应，发送文字正常。\n\n### 启用的插件\n\n无。",
      "state": "open",
      "author": "ptbsare",
      "author_type": "User",
      "created_at": "2025-05-19T16:11:04Z",
      "updated_at": "2025-05-20T07:19:42Z",
      "closed_at": null,
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1455/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1455",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1455",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:39.469644",
      "comments": []
    },
    {
      "issue_number": 1330,
      "title": "[Bug]: langbot通过长连接方式连接机器人和dfiy,返回用户信息时间过长，从langbot接收到回复平均需要一分钟",
      "body": "### 运行环境\n\nv3.4.14   docker部署  dify版本1.13 LLM模型deepseek-r1满血版  工作流为简单的知识库工作流\n\n### 异常情况\n\n无异常报错，只是单纯的慢,但有时就会直接不给回复，也没有报错信息\n[04-24 13:14:33.702] process.py (42) - [INFO] : 处理 xxxxxxxxxxxxxxxxxxxxxx39a99ef 的请求(10): 列出需要做的任务清单\n[04-24 13:15:11.860] chat.py (80) - [INFO] : 对话(10)响应: assistant: <think>...\n\n### 复现步骤\n\ndocker部署后，修改platform.json 和provider.json，均是按照文档配置的，与飞书建立长连接后，返回消息很慢\n\n### 启用的插件\n\nDeepSeekR1nothink",
      "state": "closed",
      "author": "yinbuo",
      "author_type": "User",
      "created_at": "2025-04-24T05:27:49Z",
      "updated_at": "2025-05-20T02:00:32Z",
      "closed_at": "2025-05-20T02:00:32Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1330/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1330",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1330",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:39.469665",
      "comments": [
        {
          "author": "wangcham",
          "body": "可以贴一下dify的DSL文件吗？",
          "created_at": "2025-04-28T06:45:58Z"
        }
      ]
    },
    {
      "issue_number": 1347,
      "title": "[Bug]: 飞书应用配置了事件回调，用户点击应用时自动发消息，但是与langbot集成后，就报错了",
      "body": "### 运行环境\n\ndocker部署\n\n### 异常情况\n\n[Lark] [2025-04-28 14:17:58,169] [ERROR] handle message failed, message_type: event, message_id: e2a43cf1-3a2c-40e4-91b1-0405ae1192a6, trace_id: 45dadba8ce5a3f1a75e5f170e67690de, err: processor not found, type: p2p_chat_create [conn_id=7497952103426621441]\n[Lark] [2025-04-28 14:18:00,114] [ERROR] handle message failed, message_type: event, message_id: 25c79c1a-8ddb-4e30-9aae-1d78a64a08fb, trace_id: 72e750f29aacb80d12692e7f8c5ebcdb, err: processor not found, type: im.chat.access_event.bot_p2p_chat_entered_v1 [conn_id=7497952103426621441]\n\n### 复现步骤\n\n配置完日志里就有报错\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "devops-jiangxl",
      "author_type": "User",
      "created_at": "2025-04-28T07:13:20Z",
      "updated_at": "2025-05-20T02:00:19Z",
      "closed_at": "2025-05-20T02:00:19Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1347/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1347",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1347",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:39.663269",
      "comments": [
        {
          "author": "wangcham",
          "body": "请贴一下配置文件？",
          "created_at": "2025-05-02T01:57:56Z"
        }
      ]
    },
    {
      "issue_number": 1440,
      "title": "报错： DifyAPIError 404",
      "body": "部署环境：\n1、LangBot部署在阿里云上：配置好企业微信，可以能企业微信应用上将消息发给LangBot上；\n2、Dify部署在自家内网：使用ZeroNew实现了内网穿透应用；\n3、在Langbot中流水线配置如下图：\n\n![Image](https://github.com/user-attachments/assets/46a58df4-4498-4880-a50d-fee6393458d5)\nLangBot可以收到企业微信信息，把没有收到Dify的回复信息，可能是什么原因？如下图所示：\n\n![Image](https://github.com/user-attachments/assets/a74e3391-b6e2-49f4-b571-7840903565ab)",
      "state": "closed",
      "author": "30763880",
      "author_type": "User",
      "created_at": "2025-05-17T05:53:53Z",
      "updated_at": "2025-05-19T15:04:00Z",
      "closed_at": "2025-05-17T14:19:34Z",
      "labels": [
        "bug?",
        "Invalid"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 11,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1440/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1440",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1440",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:39.846583",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "详细的稳定复现过程？",
          "created_at": "2025-05-17T07:43:03Z"
        },
        {
          "author": "30763880",
          "body": "我是觉得LangBot没有跟内网的Dify对接上，但我不确定是什么原因？通过ZeroNews实现内网穿透后，使用https://mydify.ny.takin.cc/，是可以访问打开部署在内网的Dify。\n报“请求失败：DifyAPIError 404”错误，不知道是什么原因？",
          "created_at": "2025-05-17T09:33:21Z"
        },
        {
          "author": "30763880",
          "body": "![Image](https://github.com/user-attachments/assets/6291e24d-da24-44c2-83a2-1ac6d43c2768)\n刚开始没有配置大模型，后来也添加了上，不是报错。",
          "created_at": "2025-05-17T09:42:40Z"
        },
        {
          "author": "RockChinQ",
          "body": "你这是已经对接上了。",
          "created_at": "2025-05-17T11:01:33Z"
        },
        {
          "author": "RockChinQ",
          "body": "我这边复现Chatflow是正常的，没遇到你这个conversation not found 的问题。\n\n<img width=\"562\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/a4e33afa-1cc5-477d-9f04-c9c5273bcf54\" />\n\n<img width=\"686\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/73928edc-26f9-44bd-b1b5-e2018a1efd11\" />\n\n<img widt",
          "created_at": "2025-05-17T11:03:08Z"
        }
      ]
    },
    {
      "issue_number": 1450,
      "title": "[Bug]: webUI模型配置页面卡片文字溢出问题",
      "body": "### 运行环境\n\nv4.0.1\n\n### 异常情况\n\n![Image](https://github.com/user-attachments/assets/62d97246-5206-4c86-a325-833a80bb235e)\n\n### 复现步骤\n\n---\n\n### 启用的插件\n\n---",
      "state": "closed",
      "author": "sheetung",
      "author_type": "User",
      "created_at": "2025-05-19T05:01:02Z",
      "updated_at": "2025-05-19T14:26:05Z",
      "closed_at": "2025-05-19T14:26:05Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1450/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1450",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1450",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:40.045838",
      "comments": []
    },
    {
      "issue_number": 1449,
      "title": "[Bug]: webUI处插件管理默认语言显示与系统不同",
      "body": "### 运行环境\n\nv4.0.3\n\n### 异常情况\n\n如图，清单中已经写好中英文但是插件管理处显示的是英文，\n尝试更换过浏览器以及清理缓存\n![Image](https://github.com/user-attachments/assets/a8c1a9cf-a982-4859-bfe6-a61dfe3ad320)\n\n### 复现步骤\n\n---\n\n### 启用的插件\n\nversaBotPlugin",
      "state": "closed",
      "author": "sheetung",
      "author_type": "User",
      "created_at": "2025-05-19T02:47:34Z",
      "updated_at": "2025-05-19T02:52:23Z",
      "closed_at": "2025-05-19T02:52:23Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1449/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1449",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1449",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:40.045869",
      "comments": []
    },
    {
      "issue_number": 1448,
      "title": "[Bug]: 插件@register注册方法和清单注册方法冲突",
      "body": "### 运行环境\n\nv4.0.3\n\n### 异常情况\n\n新版本无法使用清单方法注册插件，使用v3.4方法时插件可用，但是web插件管理处会重复展示插件\n\n![Image](https://github.com/user-attachments/assets/e94f865c-9b56-470e-8623-b172ca31d117)\n\n### 复现步骤\n\n针对v3.4版本插件做适配过程\n\n### 启用的插件\n\nversaBotPlugin",
      "state": "open",
      "author": "sheetung",
      "author_type": "User",
      "created_at": "2025-05-19T02:45:18Z",
      "updated_at": "2025-05-19T02:45:18Z",
      "closed_at": null,
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1448/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1448",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1448",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:40.045878",
      "comments": []
    },
    {
      "issue_number": 1427,
      "title": "[Bug]: ollama报错",
      "body": "### 运行环境\n\n4.0.3 macos docker\n\n### 异常情况\n\n使用ollama配置本地模型报错。\n2025-05-15 16:50:27.768 | [05-15 16:50:27.768] chat.py (83) - [ERROR] : 对话(11)请求失败: TypeError OllamaChatCompletions._closure() got an unexpected keyword argument 'use_funcs'\n2025-05-15 16:50:27.769 | ERROR: 对话(11)请求失败: TypeError OllamaChatCompletions._closure() got an unexpected keyword argument 'use_funcs'\n\n### 复现步骤\n\n![Image](https://github.com/user-attachments/assets/c370c424-e39d-4d6b-8bae-dc77c56dbb71)\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "noahachao",
      "author_type": "User",
      "created_at": "2025-05-15T09:49:51Z",
      "updated_at": "2025-05-19T02:28:26Z",
      "closed_at": "2025-05-15T12:52:01Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1427/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1427",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1427",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:40.045885",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "已修复，下个版本包含。",
          "created_at": "2025-05-15T12:52:29Z"
        },
        {
          "author": "noahachao",
          "body": "> 已修复，下个版本包含。\n\n另外ollama、LM Studio等本地模型APIkey非必填，虽然随便写一个不影响使用，建议有时间的话优化一下。",
          "created_at": "2025-05-19T02:28:25Z"
        }
      ]
    },
    {
      "issue_number": 1390,
      "title": "[Bug]: 安装 https://github.com/langbot-app/NahidaNewDemo 插件后插件列表没有显示",
      "body": "### 运行环境\n\n4.0\n\n### 异常情况\n\nhttps://github.com/langbot-app/NahidaNewDemo\n\n安装后列表未显示\n\n### 复现步骤\n\n-\n\n### 启用的插件\n\n_No response_",
      "state": "open",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2025-05-12T13:58:12Z",
      "updated_at": "2025-05-18T09:22:17Z",
      "closed_at": null,
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1390/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "RockChinQ"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1390",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1390",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:40.227273",
      "comments": [
        {
          "author": "noahachao",
          "body": "同样问题，部分插件比如WebwlkrPlugin就是这样，显示安装成功，但是已安装插件查看不到，日志如下：\n[05-18 17:17:53.548] manager.py (144) - [ERROR] : 插件 Waifu 初始化失败: 'Application' object has no attribute 'runner_mgr'\nERROR: 插件 Waifu 初始化失败: 'Application' object has no attribute 'runner_mgr'\n[05-18 17:17:53.549] manager.py (145) - [ERROR] : 'Appl",
          "created_at": "2025-05-18T09:22:16Z"
        }
      ]
    },
    {
      "issue_number": 1439,
      "title": "[Bug]: wechatpadpro与langbot对接失败问题",
      "body": "### 运行环境\n\nLangBot v4.0.3   WeChat-iPad-8059 iOS18.3.2\n\n### 异常情况\n\nWeChat-iPad-8059 iOS18.3.2 可以获取微信消息，LangBot无法获取信息，显示为连接超时错误 Caused by ConnectTimeoutError(<urllib3.connection.HTTPConnection object at 0x7f17b04a3d70\nWeChat-iPad-8059 docker部署地址为[：]https://hub.docker.com/r/ebzz/vxbot\n\n### 复现步骤\n\n根据官网教程配置\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "noahachao",
      "author_type": "User",
      "created_at": "2025-05-16T16:23:51Z",
      "updated_at": "2025-05-18T09:19:46Z",
      "closed_at": "2025-05-17T00:19:50Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1439/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1439",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1439",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:40.376554",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "网络问题比较复杂，恕我爱莫能助。可以来社区群找人远程协助一下。",
          "created_at": "2025-05-17T00:19:50Z"
        },
        {
          "author": "noahachao",
          "body": "> 网络问题比较复杂，恕我爱莫能助。可以来社区群找人远程协助一下。\n\n原因找到了是因为同一个docker下面使用wechatipad和langbot两个容器导致的，将两个容器分别放在两个docker下解决了。",
          "created_at": "2025-05-18T09:17:17Z"
        },
        {
          "author": "RockChinQ",
          "body": "关于容器间网络连接的配置方式可以参考：https://docs.langbot.app/zh/workshop/network-details.html",
          "created_at": "2025-05-18T09:19:45Z"
        }
      ]
    },
    {
      "issue_number": 1435,
      "title": "[Bug]: 修改镜像地址后，在docker上部署报错",
      "body": "### 运行环境\n\n4.0\n\n### 异常情况\n\ndocker@docker-Virtual-Machine:~/LangBot$ docker-compose up\nWARN[0000] /home/docker/LangBot/docker-compose.yaml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion \n[+] Running 1/1\n ✘ langbot Error Head \"https://docker.langbot.app/v2/lan...                1.1s \nError response from daemon: Head \"https://docker.langbot.app/v2/langbot-public/rockchin/langbot/manifests/latest\": Get \"http://142.171.219.242:5000/service/token?scope=repository%3Alangbot-public%2Frockchin%2Flangbot%3Apull&service=harbor-registry\": dial tcp 142.171.219.242:5000: connect: connection refused\n====》\n  这个地址无法下载镜像，国内的镜像源头又是3.0版本的。\n\n### 复现步骤\n\n4.0 docker compose up\n时报错\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "kanjoe888",
      "author_type": "User",
      "created_at": "2025-05-15T17:15:11Z",
      "updated_at": "2025-05-16T02:20:52Z",
      "closed_at": "2025-05-16T02:20:51Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1435/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1435",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1435",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:40.593445",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "难道我的服务器也被墙了。",
          "created_at": "2025-05-16T01:00:19Z"
        },
        {
          "author": "RockChinQ",
          "body": "我这边没挂梯也可以正常pull的：\n\n<img width=\"687\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/5f395106-3786-4929-a4ef-93303c61fc55\" />\n\n理论上我这个镜像服务不会被墙的，因为我们做了一个 Cloudflare 的代理，全球都可以正常访问的。可以再试试看。  \n实在不行的话，请参考这个文档设置docker 的 http代理 https://yeasy.gitbook.io/docker_practice/advanced_network/http_https_",
          "created_at": "2025-05-16T02:20:51Z"
        }
      ]
    },
    {
      "issue_number": 1434,
      "title": "[Bug]: 插件依赖初始化下载报错",
      "body": "### 运行环境\n\ndocker\n\n### 异常情况\n\ncompose构建，在加载插件之前的依赖初始化安装，报错：\n```\n[Startup] Prechecking plugin dependencies...\nERROR: Could not find a version that satisfies the requirement PicImageSearch (from versions: none)\nERROR: No matching distribution found for PicImageSearch\nWARNING: pip is being invoked by an old script wrapper. This will fail in a future version of pip.\nPlease see https://github.com/pypa/pip/issues/5599 for advice on fixing the underlying issue.\nTo avoid this problem you can invoke Python with '-m pip' instead of running pip directly.\nERROR: Could not find a version that satisfies the requirement lxml (from versions: none)\nERROR: No matching distribution found for lxml\nWARNING: pip is being invoked by an old script wrapper. This will fail in a future version of pip.\nPlease see https://github.com/pypa/pip/issues/5599 for advice on fixing the underlying issue.\nTo avoid this problem you can invoke Python with '-m pip' instead of running pip directly.\nWARNING: pip is being invoked by an old script wrapper. This will fail in a future version of pip.\nPlease see https://github.com/pypa/pip/issues/5599 for advice on fixing the underlying issue.\nTo avoid this problem you can invoke Python with '-m pip' instead of running pip directly.\nERROR: Could not find a version that satisfies the requirement beautifulsoup4 (from versions: none)\nERROR: No matching distribution found for beautifulsoup4\nWARNING: pip is being invoked by an old script wrapper. This will fail in a future version of pip.\nPlease see https://github.com/pypa/pip/issues/5599 for advice on fixing the underlying issue.\nTo avoid this problem you can invoke Python with '-m pip' instead of running pip directly.\nERROR: Could not find a version that satisfies the requirement beautifulsoup4 (from versions: none)\nERROR: No matching distribution found for beautifulsoup4\nWARNING: pip is being invoked by an old script wrapper. This will fail in a future version of pip.\nPlease see https://github.com/pypa/pip/issues/5599 for advice on fixing the underlying issue.\nTo avoid this problem you can invoke Python with '-m pip' instead of running pip directly.\nERROR: Could not find a version that satisfies the requirement beautifulsoup4 (from versions: none)\nERROR: No matching distribution found for beautifulsoup4\n```\n\n### 复现步骤\n\nv4前的版本，安装有如上所述的依赖的插件，但由于一些原因依赖未安装，然后直接更新到v4后，构建compose\n\n### 启用的插件\n\n#1 AntiHotlinkImageFetcher\n#2 ElysianRealmAssistant\n#3 Md2QQImage_Improved",
      "state": "open",
      "author": "BiFangKNT",
      "author_type": "User",
      "created_at": "2025-05-15T17:14:24Z",
      "updated_at": "2025-05-15T17:14:24Z",
      "closed_at": null,
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1434/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1434",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1434",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:40.750629",
      "comments": []
    },
    {
      "issue_number": 1433,
      "title": "[Bug]: 多次在流水线中切换模型后，模型请求失败，日志如下",
      "body": "### 运行环境\n\nv4.0.3，群晖container，x86-64\n\n### 异常情况\n\n刚开始在流水线中切换模型，机器人可以转换模型进行回答，但随着切换次数变多，或者是切换频繁，导致模型请求失败，日志如下：\n\n模型请求失败: Gemini API 请求错误: 400 INVALID_ARGUMENT. {'error': {'code': 400, 'message': '* GenerateContentRequest.contents[4].parts: contents.parts must not be empty.\\n* GenerateContentRequest.contents[10].parts: contents.parts must not be empty.\\n', 'status': 'INVALID_ARGUMENT'}}\n\n### 复现步骤\n\n流水线中切换模型，多次，频繁\n\n### 启用的插件\n\nRemoveThink",
      "state": "open",
      "author": "Tatchaxzw",
      "author_type": "User",
      "created_at": "2025-05-15T13:06:59Z",
      "updated_at": "2025-05-15T13:06:59Z",
      "closed_at": null,
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1433/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1433",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1433",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:40.750665",
      "comments": []
    },
    {
      "issue_number": 1429,
      "title": "[Bug]: 模型请求失败",
      "body": "### 运行环境\n\nv4.0.3，群晖container，x86-64\n\n### 异常情况\n\n\u001b[37m[05-15 18:01:13.511] process.py (39) - [INFO] : 处理 person_819204571 的请求(1): 你好\u001b[0m\n\u001b[31m[05-15 18:01:14.384] chat.py (83) - [ERROR] : 对话(1)请求失败: RequesterError 模型请求失败: 请求参数错误: Error code: 400 - {'error': {'message': 'Model Not Exist', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_request_error'}}\u001b[0m\n\u001b[31m[05-15 18:01:14.836] pipelinemgr.py (107) - [ERROR] : 模型请求失败: 请求参数错误: Error code: 400 - {'error': {'message': 'Model Not Exist', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_request_error'}}\u001b[0m\n\n\n试了deepseek和gemini，都这样\n\n### 复现步骤\n\n删除数据重新构建了几次，都是这样\n\n### 启用的插件\n\n未启用",
      "state": "closed",
      "author": "Tatchaxzw",
      "author_type": "User",
      "created_at": "2025-05-15T10:42:53Z",
      "updated_at": "2025-05-15T11:12:26Z",
      "closed_at": "2025-05-15T11:12:25Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1429/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1429",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1429",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:40.750677",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "你的模型名称是什么？供应商是什么？确定是否填写正确模型名称？",
          "created_at": "2025-05-15T10:57:38Z"
        },
        {
          "author": "Tatchaxzw",
          "body": "> 你的模型名称是什么？供应商是什么？确定是否填写正确模型名称？\n\n谢谢，模型名称填写错误了，这个问题确实没注意，大家引以为戒",
          "created_at": "2025-05-15T11:12:25Z"
        }
      ]
    },
    {
      "issue_number": 1425,
      "title": "[Bug]: 飞书listener初始化问题",
      "body": "### 运行环境\n\nLangBot所有版本\n\n### 异常情况\n\n飞书adapter，有多个机器人时，所有机器人的callback会是最后一个机器人的callback。\n原因：\nLarkAdapter中的listeners只在类中声明初始化，未在实例中初始化，导致所有实例共享listeners对象，从而造成所有机器人的listeners都一样，也就是最后一个更新机器人的对应的值。\n\n### 复现步骤\n\n创建多个飞书机器人，配置不同的dify chat，给任何一个机器人提问，都是走的同一个dify chat。\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "dataknocker",
      "author_type": "User",
      "created_at": "2025-05-15T03:05:29Z",
      "updated_at": "2025-05-15T03:25:39Z",
      "closed_at": "2025-05-15T03:25:39Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1425/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1425",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1425",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:40.923798",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "又踩坑了。",
          "created_at": "2025-05-15T03:25:31Z"
        }
      ]
    },
    {
      "issue_number": 1373,
      "title": "[Bug]: at-sender不生效",
      "body": "### 运行环境\n\n \"at-sender\": true,  \"quote-origin\": true, 两项都配置了，但钉钉群聊机器人还是没有引用和at回复",
      "state": "closed",
      "author": "wwclearlove",
      "author_type": "User",
      "created_at": "2025-05-07T05:55:10Z",
      "updated_at": "2025-05-14T14:55:17Z",
      "closed_at": "2025-05-14T14:55:17Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1373/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1373",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1373",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:41.123807",
      "comments": [
        {
          "author": "wangcham",
          "body": "钉钉并没有引用和at的配置项，麻烦贴一下data/logs/langbot-xxxx的日志文档，看看是不是适配器开错了。",
          "created_at": "2025-05-07T07:31:25Z"
        }
      ]
    },
    {
      "issue_number": 1377,
      "title": "[Bug]: Dify+钉钉 EchoTextHandler' object has no attribute 'logger'",
      "body": "### 运行环境\n\nUbuntu 24.04.2, docker 28.1.1\n\n### 异常情况\n\n运行环境：\nLangBot 3.4.14.3，dify 1.3.1\n异常情况：\n使用端来看有时候会漏消息，并提示\n`controller.py (189) - [ERROR] : 处理请求时出错 query_id=5 stage=SendResponseBackStage : 'EchoTextHandler' object has no attribute 'logger'`\n\n### 复现步骤\n\n开启debug模式：\n\n> [05-10 17:20:24.660] controller.py (190) - [DEBUG] : Traceback: Traceback (most recent call last):\n>   File \"/usr/local/lib/python3.10/site-packages/urllib3/connectionpool.py\", line 464, in _make_request\n>     self._validate_conn(conn)\n>   File \"/usr/local/lib/python3.10/site-packages/urllib3/connectionpool.py\", line 1093, in _validate_conn\n>     conn.connect()\n>   File \"/usr/local/lib/python3.10/site-packages/urllib3/connection.py\", line 741, in connect\n>     sock_and_verified = _ssl_wrap_socket_and_match_hostname(\n>   File \"/usr/local/lib/python3.10/site-packages/urllib3/connection.py\", line 920, in _ssl_wrap_socket_and_match_hostname\n>     ssl_sock = ssl_wrap_socket(\n>   File \"/usr/local/lib/python3.10/site-packages/urllib3/util/ssl_.py\", line 480, in ssl_wrap_socket\n>     ssl_sock = _ssl_wrap_socket_impl(sock, context, tls_in_tls, server_hostname)\n>   File \"/usr/local/lib/python3.10/site-packages/urllib3/util/ssl_.py\", line 524, in _ssl_wrap_socket_impl\n>     return ssl_context.wrap_socket(sock, server_hostname=server_hostname)\n>   File \"/usr/local/lib/python3.10/ssl.py\", line 513, in wrap_socket\n>     return self.sslsocket_class._create(\n>   File \"/usr/local/lib/python3.10/ssl.py\", line 1104, in _create\n>     self.do_handshake()\n>   File \"/usr/local/lib/python3.10/ssl.py\", line 1375, in do_handshake\n>     self._sslobj.do_handshake()\n> ssl.SSLEOFError: [SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1007)\n\nDuring handling of the above exception, another exception occurred:\n\n> Traceback (most recent call last):\n>   File \"/usr/local/lib/python3.10/site-packages/urllib3/connectionpool.py\", line 787, in urlopen\n>     response = self._make_request(\n>   File \"/usr/local/lib/python3.10/site-packages/urllib3/connectionpool.py\", line 488, in _make_request\n>     raise new_e\n> urllib3.exceptions.SSLError: [SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1007)\n\nThe above exception was the direct cause of the following exception:\nTraceback (most recent call last):\n\n>   File \"/usr/local/lib/python3.10/site-packages/requests/adapters.py\", line 667, in send\n>     resp = conn.urlopen(\n>   File \"/usr/local/lib/python3.10/site-packages/urllib3/connectionpool.py\", line 841, in urlopen\n>     retries = retries.increment(\n>   File \"/usr/local/lib/python3.10/site-packages/urllib3/util/retry.py\", line 519, in increment\n>     raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]\n> urllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='oapi.dingtalk.com', port=443): Max retries exceeded with url: /robot/sendBySession?session=ea05420f5cb6b2f144bd28f875f83b9d (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1007)')))\n\nDuring handling of the above exception, another exception occurred:\n\n> Traceback (most recent call last):\n>   File \"/usr/local/lib/python3.10/site-packages/dingtalk_stream/chatbot.py\", line 636, in reply_text\n>     response = requests.post(incoming_message.session_webhook,\n>   File \"/usr/local/lib/python3.10/site-packages/requests/api.py\", line 115, in post\n>     return request(\"post\", url, data=data, json=json, **kwargs)\n>   File \"/usr/local/lib/python3.10/site-packages/requests/api.py\", line 59, in request\n>     return session.request(method=method, url=url, **kwargs)\n>   File \"/usr/local/lib/python3.10/site-packages/requests/sessions.py\", line 589, in request\n>     resp = self.send(prep, **send_kwargs)\n>   File \"/usr/local/lib/python3.10/site-packages/requests/sessions.py\", line 703, in send\n>     r = adapter.send(request, **kwargs)\n>   File \"/usr/local/lib/python3.10/site-packages/requests/adapters.py\", line 698, in send\n>     raise SSLError(e, request=request)\n> requests.exceptions.SSLError: HTTPSConnectionPool(host='oapi.dingtalk.com', port=443): Max retries exceeded with url: /robot/sendBySession?session=ea05420f5cb6b2f144bd28f875f83b9d (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1007)')))\n\nDuring handling of the above exception, another exception occurred:\n\n> Traceback (most recent call last):\n>   File \"/app/pkg/pipeline/controller.py\", line 186, in process_query\n>     await self._execute_from_stage(0, query)\n>   File \"/app/pkg/pipeline/controller.py\", line 158, in _execute_from_stage\n>     await self._execute_from_stage(i + 1, query)\n>   File \"/app/pkg/pipeline/controller.py\", line 158, in _execute_from_stage\n>     await self._execute_from_stage(i + 1, query)\n>   File \"/app/pkg/pipeline/controller.py\", line 135, in _execute_from_stage\n>     result = await result\n>   File \"/app/pkg/pipeline/respback/respback.py\", line 34, in process\n>     await self.ap.platform_mgr.send(\n>   File \"/app/pkg/platform/manager.py\", line 153, in send\n>     await adapter.reply_message(\n>   File \"/app/pkg/platform/sources/dingtalk.py\", line 150, in reply_message\n>     await self.bot.send_message(content,incoming_message)\n>   File \"/app/libs/dingtalk_api/api.py\", line 135, in send_message\n>     self.EchoTextHandler.reply_text(content,incoming_message)\n>   File \"/usr/local/lib/python3.10/site-packages/dingtalk_stream/chatbot.py\", line 643, in reply_text\n>     self.logger.error(f'reply text failed, error={e}, response.text={response_text}')\n> AttributeError: 'EchoTextHandler' object has no attribute 'logger'\n\n### 启用的插件\n无\n\n_No response_",
      "state": "closed",
      "author": "lycosa9527",
      "author_type": "User",
      "created_at": "2025-05-10T09:26:49Z",
      "updated_at": "2025-05-14T14:26:24Z",
      "closed_at": "2025-05-14T12:53:21Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1377/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1377",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1377",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:41.318917",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "修复了一下这个问题，但他只是输出失败信息时失败了，你可能还是没配置正确，可以在下个版本更新之后看看具体报错是什么。或者到群里找管理员远程协助一下。",
          "created_at": "2025-05-14T12:53:21Z"
        },
        {
          "author": "lycosa9527",
          "body": "> 修复了一下这个问题，但他只是输出失败信息时失败了，你可能还是没配置正确，可以在下个版本更新之后看看具体报错是什么。或者到群里找管理员远程协助一下。\n\n谢谢你的回复呀~那我是不是之后直接pull最新的docker镜像就好了？",
          "created_at": "2025-05-14T14:24:38Z"
        },
        {
          "author": "RockChinQ",
          "body": "对的，可以看看文档说的更新方式",
          "created_at": "2025-05-14T14:26:23Z"
        }
      ]
    },
    {
      "issue_number": 1419,
      "title": "[Bug]: 安装插件失败",
      "body": "### 运行环境\n\ndocker\n\n### 异常情况\n\nversion：v4.0.1\n报错信息：\n[05-14 17:26:21.991] manager.py (73) - [INFO] : Loading all plugins...\nLoading all plugins...\n[05-14 17:26:21.994] classic.py (186) - [ERROR] : 加载插件模块 DeepSeekR1nothink.main 时发生错误\nERROR: 加载插件模块 DeepSeekR1nothink.main 时发生错误\nTraceback (most recent call last):\n  File \"/app/pkg/plugin/loaders/classic.py\", line 180, in _walk_plugin_path\n    importlib.import_module(module.__name__ + '.' + item.name)\n  File \"/usr/local/lib/python3.10/importlib/__init__.py\", line 126, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"<frozen importlib._bootstrap>\", line 1050, in _gcd_import\n  File \"<frozen importlib._bootstrap>\", line 1027, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 1006, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 688, in _load_unlocked\n  File \"<frozen importlib._bootstrap_external>\", line 883, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 241, in _call_with_frames_removed\n  File \"/app/plugins/DeepSeekR1nothink/main.py\", line 5, in <module>\n    from pkg.plugin.host import EventContext, PluginHost\nImportError: cannot import name 'EventContext' from 'pkg.plugin.host' (/app/pkg/plugin/host.py)\n[05-14 17:26:21.997] classic.py (186) - [ERROR] : 加载插件模块 difyimgaudio.main 时发生错误\nERROR: 加载插件模块 difyimgaudio.main 时发生错误\nTraceback (most recent call last):\n  File \"/app/pkg/plugin/loaders/classic.py\", line 180, in _walk_plugin_path\n    importlib.import_module(module.__name__ + '.' + item.name)\n  File \"/usr/local/lib/python3.10/importlib/__init__.py\", line 126, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"<frozen importlib._bootstrap>\", line 1050, in _gcd_import\n  File \"<frozen importlib._bootstrap>\", line 1027, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 1006, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 688, in _load_unlocked\n  File \"<frozen importlib._bootstrap_external>\", line 883, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 241, in _call_with_frames_removed\n  File \"/app/plugins/difyimgaudio/main.py\", line 10, in <module>\n    with open(config_path, 'r', encoding='gbk') as config_file:\nFileNotFoundError: [Errno 2] No such file or directory: 'data/config/provider.json'\n\n\n### 复现步骤\n\n从v3.4.8升级至v4.0.1，安装插件失败\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "jcvv0n",
      "author_type": "User",
      "created_at": "2025-05-14T09:31:47Z",
      "updated_at": "2025-05-14T09:38:38Z",
      "closed_at": "2025-05-14T09:36:15Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1419/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1419",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1419",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:41.508335",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "这个插件应该是还不支持 4.0，给插件仓库提个issue让作者更新一下。",
          "created_at": "2025-05-14T09:33:05Z"
        },
        {
          "author": "jcvv0n",
          "body": "> 这个插件应该是还不支持 4.0，给插件仓库提个issue让作者更新一下。\n\n那旧版插件全都不兼容了吗，需要所有插件作者升级？",
          "created_at": "2025-05-14T09:36:41Z"
        },
        {
          "author": "RockChinQ",
          "body": "4.0在插件api设计上是兼容3.0的，但这个插件使用了插件api标准之外的内容，直接去读取了3.0的配置文件，所以会没法正常使用",
          "created_at": "2025-05-14T09:38:37Z"
        }
      ]
    },
    {
      "issue_number": 1400,
      "title": "[Bug]: 钉钉接入DIfy发送图片未能正确调用",
      "body": "### 运行环境\n\n最新Langbot，docker部署\n\n### 异常情况\n\n在钉钉中发送图片+文字，按照dify工作流的逻辑应该是判断文件是否存在，存在即根据文件来做回答\n目前的问题是，发送了图片+文字，控制台显示图片调用了dify的file upload，但是最后的回复依旧是不带有文件的回复\n\n![Image](https://github.com/user-attachments/assets/4026bb69-d4de-42a7-9fd6-503426452a41)\n\n\n### 复现步骤\n\n同时尝试了直接发送图片，则控制台报错，因为dify那边必须要query文本\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "Geministudents",
      "author_type": "User",
      "created_at": "2025-05-13T06:53:14Z",
      "updated_at": "2025-05-14T09:13:01Z",
      "closed_at": "2025-05-14T09:13:01Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1400/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1400",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1400",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:41.709922",
      "comments": []
    },
    {
      "issue_number": 1412,
      "title": "[Bug]: 增加ModelScope的模型失败",
      "body": "### 运行环境\n\ndocker\n\n### 异常情况\n\n添加ModelScope的api时报错，错误提示为\n\nRequest failed with status code 500\n\n### 复现步骤\n\n正常添加，无其它操作\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "vimbackground",
      "author_type": "User",
      "created_at": "2025-05-13T15:00:04Z",
      "updated_at": "2025-05-14T07:36:03Z",
      "closed_at": "2025-05-14T07:36:02Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1412/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1412",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1412",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:41.709947",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "看看控制台报错什么？试一下 4.0.1 版本",
          "created_at": "2025-05-13T15:14:40Z"
        },
        {
          "author": "vimbackground",
          "body": "可能是图标调用的问题。\n\n发现报错后，配置的模型仍然加上了，但是没有图标\n\n![Image](https://github.com/user-attachments/assets/75e16613-d477-48a4-af6f-0ca6c1c87b07)",
          "created_at": "2025-05-13T15:37:34Z"
        },
        {
          "author": "RockChinQ",
          "body": "修好了，等下个版本包含",
          "created_at": "2025-05-14T07:36:02Z"
        }
      ]
    },
    {
      "issue_number": 1065,
      "title": "[Feature]: 企微 消息 有长度限制，容易被截断",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n对应企微应用消息，能够自动拆分消息转换为多条消息输出",
      "state": "open",
      "author": "181079342",
      "author_type": "User",
      "created_at": "2025-02-11T07:36:17Z",
      "updated_at": "2025-05-14T00:34:03Z",
      "closed_at": null,
      "labels": [
        "m: Platform",
        "IM: wecom"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 14,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1065/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1065",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1065",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:41.873873",
      "comments": [
        {
          "author": "wangcham",
          "body": "请贴一下企业微信对消息长度截断的文档，后续我们会根据文档重新设计接口。",
          "created_at": "2025-02-11T07:54:32Z"
        },
        {
          "author": "VipCrazyMaster",
          "body": "超过600个字就会被截断，我是通过dify接入硅基流动的API使用deepseek，在dify中，实际有完整的回复记录，再用langbot接入企业微信，但是超过600字左右就会被截断。",
          "created_at": "2025-02-13T09:21:27Z"
        },
        {
          "author": "wangcham",
          "body": "好的，我们会在之后的版本中修复。",
          "created_at": "2025-02-13T12:15:33Z"
        },
        {
          "author": "VipCrazyMaster",
          "body": "寻求使用插件解决失败：\n1-使用一个模拟人类打字习惯的消息分段发送插件。会根据标点符号和特殊格式自动分段，并模拟真实的打字速度发送消息。https://github.com/sanxianxiaohuntun/SplitTypingPlugin\n2-安装后，修改\n# 打字机效果配置\ntyping_settings:\n  # 每个字符的延迟时间（秒）\n  char_delay: 0.1\n  # 每段之间的额外停顿时间（秒）\n  segment_pause: 0.1\n  # 最大分段长度，超过此长度将不进行分段\n  max_split_length: 10000\n3-langbot中修改传入消息忽",
          "created_at": "2025-02-27T07:59:13Z"
        },
        {
          "author": "tianqingfeng1",
          "body": "我也遇到了同样的问题\n\n![Image](https://github.com/user-attachments/assets/4961c0bf-e078-4048-b54d-f865a6d88f39)",
          "created_at": "2025-03-06T06:38:22Z"
        }
      ]
    },
    {
      "issue_number": 1403,
      "title": "[Bug]: DeepSeek模型接入报错",
      "body": "### 运行环境\n\nv4.0、Ubuntu24\n\n### 异常情况\n\nDeepSeek配置后对话报错\n`[05-13 15:42:11.627] chat.py (83) - [ERROR] : 对话(597)请求失败: KeyError 'args'\nERROR: 对话(597)请求失败: KeyError 'args'\n[05-13 15:42:11.768] pipelinemgr.py (107) - [ERROR] : 'args'\nERROR: 'args'`\n\n![Image](https://github.com/user-attachments/assets/4e28f99a-9e66-4aa2-a85f-3b352f492d22)\n\n### 复现步骤\n\n![Image](https://github.com/user-attachments/assets/c555f5d2-43b1-43f2-8b58-5fdf25272286)\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "1740611429",
      "author_type": "User",
      "created_at": "2025-05-13T08:18:56Z",
      "updated_at": "2025-05-13T11:37:48Z",
      "closed_at": "2025-05-13T11:37:48Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1403/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1403",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1403",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:42.055319",
      "comments": []
    },
    {
      "issue_number": 1392,
      "title": "[Bug]: 企业微信客服创建时会显示 500 但能正常创建",
      "body": "### 运行环境\n\n4.0\n\n### 异常情况\n\n<img width=\"457\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/022f78b7-aac4-428b-8d37-3a62dc052a6c\" />\n\n### 复现步骤\n\n正常随意填写参数创建\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2025-05-13T01:24:59Z",
      "updated_at": "2025-05-13T11:33:34Z",
      "closed_at": "2025-05-13T11:33:34Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1392/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1392",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1392",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:42.055337",
      "comments": []
    },
    {
      "issue_number": 1396,
      "title": "[Bug]: langbot4.0版本在模型配置页面添加阿里百炼的模型出错",
      "body": "### 运行环境\n\nv4.0、debian12、python3.11\n\n### 异常情况\n\nlangbot4.0版本在模型配置页面添加阿里百炼的模型出错，\n报错信息如下：\n[Lark] [2025-05-13 11:37:20,116] [ERROR] receive message loop exit, err: no close frame received or sent [conn_id=7503764794637287426]\nERROR: receive message loop exit, err: no close frame received or sent [conn_id=7503764794637287426]\nTraceback (most recent call last):\n  File \"/app/pkg/api/http/controller/group.py\", line 88, in handler_error\n    return await f(*args, **kwargs)\n  File \"/app/pkg/api/http/controller/groups/provider/models.py\", line 16, in _\n    model_uuid = await self.ap.model_service.create_llm_model(json_data)\n  File \"/app/pkg/api/http/service/model.py\", line 30, in create_llm_model\n    await self.ap.model_mgr.load_llm_model(llm_model)\n  File \"/app/pkg/provider/modelmgr/modelmgr.py\", line 83, in load_llm_model\n    requester_inst = self.requester_dict[model_info.requester](ap=self.ap, config=model_info.requester_config)\nTypeError: Can't instantiate abstract class BailianChatCompletions with abstract method invoke_llm\n[2025-05-13 11:39:12 +0800] [1] [INFO] 192.168.96.1:57250 POST /api/v1/provider/models/llm 1.1 500 42 8948\nTraceback (most recent call last):\n  File \"/app/pkg/api/http/controller/group.py\", line 88, in handler_error\n    return await f(*args, **kwargs)\n  File \"/app/pkg/api/http/controller/groups/provider/models.py\", line 16, in _\n    model_uuid = await self.ap.model_service.create_llm_model(json_data)\n  File \"/app/pkg/api/http/service/model.py\", line 30, in create_llm_model\n    await self.ap.model_mgr.load_llm_model(llm_model)\n  File \"/app/pkg/provider/modelmgr/modelmgr.py\", line 83, in load_llm_model\n    requester_inst = self.requester_dict[model_info.requester](ap=self.ap, config=model_info.requester_config)\nTypeError: Can't instantiate abstract class BailianChatCompletions with abstract method invoke_llm\n[2025-05-13 11:39:39 +0800] [1] [INFO] 192.168.96.1:40296 POST /api/v1/provider/models/llm 1.1 500 42 5452\n\n![Image](https://github.com/user-attachments/assets/8b2ca6ee-f94d-4bdb-8c36-2546fa4c6a04)\n\n![Image](https://github.com/user-attachments/assets/d86d2f54-0cab-4542-8c33-7fbeaf65ffcc)\n\n### 复现步骤\n\n模型配置页面，添加阿里百炼模型api\n\n![Image](https://github.com/user-attachments/assets/65cbf72e-4e2b-4305-a0cc-f199831a2e07)\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "276876847",
      "author_type": "User",
      "created_at": "2025-05-13T03:58:12Z",
      "updated_at": "2025-05-13T08:09:24Z",
      "closed_at": "2025-05-13T08:09:24Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1396/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1396",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1396",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:42.055343",
      "comments": []
    },
    {
      "issue_number": 1394,
      "title": "[Bug]: 创建docker-compose 后重启报错，且无法调用模型",
      "body": "### 运行环境\n\nv4.0.0\n\n### 异常情况\n\n启动后加入中转站模型地址和key调用报错\n\n![Image](https://github.com/user-attachments/assets/aacf383f-69ff-494c-8cd5-fc9f1fb4b806)\n\nlangbot    | Please see https://github.com/pypa/pip/issues/5599 for advice on fixing the underlying issue.\nlangbot    | To avoid this problem you can invoke Python with '-m pip' instead of running pip directly.\nlangbot    | \nlangbot    |  _                   ___      _   \nlangbot    | | |   __ _ _ _  __ _| _ ) ___| |_ \nlangbot    | | |__/ _` | ' \\/ _` | _ \\/ _ \\  _|\nlangbot    | |____\\__,_|_||_\\__, |___/\\___/\\__|\nlangbot    |                |___/              \nlangbot    | \nlangbot    | ⭐️开源地址: https://github.com/RockChinQ/LangBot\nlangbot    | 📖文档地址: https://docs.langbot.app\nlangbot    | \nlangbot    | [Startup] Prechecking plugin dependencies...\nlangbot    | WARNING: pip is being invoked by an old script wrapper. This will fail in a future version of pip.\nlangbot    | Please see https://github.com/pypa/pip/issues/5599 for advice on fixing the underlying issue.\nlangbot    | To avoid this problem you can invoke Python with '-m pip' instead of running pip directly.\nlangbot    | WARNING: pip is being invoked by an old script wrapper. This will fail in a future version of pip.\nlangbot    | Please see https://github.com/pypa/pip/issues/5599 for advice on fixing the underlying issue.\nlangbot    | To avoid this problem you can invoke Python with '-m pip' instead of running pip directly.\nlangbot    | WARNING: pip is being invoked by an old script wrapper. This will fail in a future version of pip.\nlangbot    | Please see https://github.com/pypa/pip/issues/5599 for advice on fixing the underlying issue.\nlangbot    | To avoid this problem you can invoke Python with '-m pip' instead of running pip directly.\nlangbot    | WARNING: pip is being invoked by an old script wrapper. This will fail in a future version of pip.\nlangbot    | Please see https://github.com/pypa/pip/issues/5599 for advice on fixing the underlying issue.\nlangbot    | To avoid this problem you can invoke Python with '-m pip' instead of running pip directly.\nlangbot    | WARNING: pip is being invoked by an old script wrapper. This will fail in a future version of pip.\nlangbot    | Please see https://github.com/pypa/pip/issues/5599 for advice on fixing the underlying issue.\nlangbot    | To avoid this problem you can invoke Python with '-m pip' instead of running pip directly.\nlangbot    | [05-13 11:35:17.664] mgr.py (39) - [INFO] : Initializing database...\nlangbot    | [05-13 11:35:17.680] mgr.py (57) - [INFO] : Creating initial metadata...\nlangbot    | [05-13 11:35:17.691] manager.py (73) - [INFO] : Loading all plugins...\nlangbot    | [05-13 11:35:17.804] classic.py (186) - [ERROR] : 加载插件模块 WebwlkrPlugin.main 时发生错误\nlangbot    | Traceback (most recent call last):\nlangbot    |   File \"/app/pkg/plugin/loaders/classic.py\", line 180, in _walk_plugin_path\nlangbot    |     importlib.import_module(module.__name__ + '.' + item.name)\nlangbot    |   File \"/usr/local/lib/python3.10/importlib/__init__.py\", line 126, in import_module\nlangbot    |     return _bootstrap._gcd_import(name[level:], package, level)\nlangbot    |   File \"<frozen importlib._bootstrap>\", line 1050, in _gcd_import\nlangbot    |   File \"<frozen importlib._bootstrap>\", line 1027, in _find_and_load\nlangbot    |   File \"<frozen importlib._bootstrap>\", line 1006, in _find_and_load_unlocked\nlangbot    |   File \"<frozen importlib._bootstrap>\", line 688, in _load_unlocked\nlangbot    |   File \"<frozen importlib._bootstrap_external>\", line 883, in exec_module\nlangbot    |   File \"<frozen importlib._bootstrap>\", line 241, in _call_with_frames_removed\nlangbot    |   File \"/app/plugins/WebwlkrPlugin/main.py\", line 2, in <module>\nlangbot    |     from pkg.plugin.host import EventContext, PluginHost\nlangbot    | ImportError: cannot import name 'EventContext' from 'pkg.plugin.host' (/app/pkg/plugin/host.py)\nlangbot    | [05-13 11:35:17.928] classic.py (186) - [ERROR] : 加载插件模块 Wife_Image.ui 时发生错误\nlangbot    | Traceback (most recent call last):\nlangbot    |   File \"/app/pkg/plugin/loaders/classic.py\", line 180, in _walk_plugin_path\nlangbot    |     importlib.import_module(module.__name__ + '.' + item.name)\nlangbot    |   File \"/usr/local/lib/python3.10/importlib/__init__.py\", line 126, in import_module\nlangbot    |     return _bootstrap._gcd_import(name[level:], package, level)\nlangbot    |   File \"<frozen importlib._bootstrap>\", line 1050, in _gcd_import\nlangbot    |   File \"<frozen importlib._bootstrap>\", line 1027, in _find_and_load\nlangbot    |   File \"<frozen importlib._bootstrap>\", line 1006, in _find_and_load_unlocked\nlangbot    |   File \"<frozen importlib._bootstrap>\", line 688, in _load_unlocked\nlangbot    |   File \"<frozen importlib._bootstrap_external>\", line 883, in exec_module\nlangbot    |   File \"<frozen importlib._bootstrap>\", line 241, in _call_with_frames_removed\nlangbot    |   File \"/app/plugins/Wife_Image/ui.py\", line 7, in <module>\nlangbot    |     from PyQt5.QtWidgets import QApplication, QWidget, QLabel, QMenu, QAction, QDesktopWidget, QFrame\nlangbot    | ImportError: libGL.so.1: cannot open shared object file: No such file or directory\nlangbot    | [05-13 11:35:17.930] classic.py (186) - [ERROR] : 加载插件模块 chat_voice.main 时发生错误\nlangbot    | Traceback (most recent call last):\nlangbot    |   File \"/app/pkg/plugin/loaders/classic.py\", line 180, in _walk_plugin_path\nlangbot    |     importlib.import_module(module.__name__ + '.' + item.name)\nlangbot    |   File \"/usr/local/lib/python3.10/importlib/__init__.py\", line 126, in import_module\nlangbot    |     return _bootstrap._gcd_import(name[level:], package, level)\nlangbot    |   File \"<frozen importlib._bootstrap>\", line 1050, in _gcd_import\nlangbot    |   File \"<frozen importlib._bootstrap>\", line 1027, in _find_and_load\nlangbot    |   File \"<frozen importlib._bootstrap>\", line 1006, in _find_and_load_unlocked\nlangbot    |   File \"<frozen importlib._bootstrap>\", line 688, in _load_unlocked\nlangbot    |   File \"<frozen importlib._bootstrap_external>\", line 883, in exec_module\nlangbot    |   File \"<frozen importlib._bootstrap>\", line 241, in _call_with_frames_removed\nlangbot    |   File \"/app/plugins/chat_voice/main.py\", line 5, in <module>\nlangbot    |     from pkg.plugin.host import EventContext, PluginHost\nlangbot    | ImportError: cannot import name 'EventContext' from 'pkg.plugin.host' (/app/pkg/plugin/host.py)\nlangbot    | [05-13 11:35:17.946] modelmgr.py (59) - [INFO] : Loading models from db...\nlangbot    | Traceback (most recent call last):\nlangbot    |   File \"/app/pkg/core/boot.py\", line 60, in main\nlangbot    |     app_inst = await make_app(loop)\nlangbot    |   File \"/app/pkg/core/boot.py\", line 41, in make_app\nlangbot    |     await stage_inst.run(ap)\nlangbot    |   File \"/app/pkg/core/stages/build_app.py\", line 67, in run\nlangbot    |     await llm_model_mgr_inst.initialize()\nlangbot    |   File \"/app/pkg/provider/modelmgr/modelmgr.py\", line 55, in initialize\nlangbot    |     await self.load_models_from_db()\nlangbot    |   File \"/app/pkg/provider/modelmgr/modelmgr.py\", line 70, in load_models_from_db\nlangbot    |     await self.load_llm_model(llm_model)\nlangbot    |   File \"/app/pkg/provider/modelmgr/modelmgr.py\", line 83, in load_llm_model\nlangbot    |     requester_inst = self.requester_dict[model_info.requester](ap=self.ap, config=model_info.requester_config)\nlangbot    | TypeError: Can't instantiate abstract class BailianChatCompletions with abstract method invoke_llm\nlangbot exited with code 0\n\n\n### 复现步骤\n\n创建后配置模型为openai，将中转站地址和key配置保存后，测试飞书机器人，返回请求失败\n\n![Image](https://github.com/user-attachments/assets/dbc6d69b-4dda-4478-bbb7-508a9e30f0f3)\n查看后台日志提示：\nlangbot    | 处理 person_ou_646393052903890bd73190eee432733e 的请求(2): 2222\nlangbot    | HTTP Request: POST https://api.qhaigc.net/chat/completions \"HTTP/1.1 200 OK\"\nlangbot    | [05-13 11:11:23.484] chat.py (83) - [ERROR] : 对话(2)请求失败: AttributeError 'str' object has no attribute 'choices'\nlangbot    | ERROR: 对话(2)请求失败: AttributeError 'str' object has no attribute 'choices'\nlangbot    | HTTP Request: POST https://open.feishu.cn/open-apis/im/v1/messages/om_x100b4d1fcb6a51580f3d962a8aec482/reply \"HTTP/1.1 200 OK\"\nlangbot    | [05-13 11:11:24.226] pipelinemgr.py (107) - [ERROR] : 'str' object has no attribute 'choices'\nlangbot    | ERROR: 'str' object has no attribute 'choices'\n\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "944598263",
      "author_type": "User",
      "created_at": "2025-05-13T03:40:25Z",
      "updated_at": "2025-05-13T08:09:24Z",
      "closed_at": "2025-05-13T08:09:24Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1394/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1394",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1394",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:42.055347",
      "comments": []
    },
    {
      "issue_number": 905,
      "title": "[Bug]: full-scenario模式报错",
      "body": "### 消息平台适配器\r\n\r\naiocqhttp（NapCat）\r\n\r\n### 运行环境\r\n\r\nDocker\r\n\r\n### QChatGPT版本\r\n\r\nv3.3.1.1\r\n\r\n### 异常情况\r\n\r\nnormal模式可以正常使用，切换full-scenario模式并重新启动容器后，出现以下报错\r\n![1I87LXJXY0~2NT09QJ()IO](https://github.com/user-attachments/assets/079c67d9-fa50-4d5f-bd28-ea3df3f759b9)\r\n以下为provider.json中的设置\r\n\r\n![N}ABHAE}EDMJ62H04AZEV4A](https://github.com/user-attachments/assets/1a44d25d-024c-4770-bd55-b2f251414ed6)\r\n\r\n\r\n![MHEJ YT CH4N40 _CPQ8~0Y](https://github.com/user-attachments/assets/2a2a1161-1996-4b99-a3fc-ab1b0854ea11)\r\n\r\n\r\n\r\n### 启用的插件\r\n\r\n无",
      "state": "closed",
      "author": "FFFKLD",
      "author_type": "User",
      "created_at": "2024-10-17T02:54:11Z",
      "updated_at": "2025-05-13T04:45:41Z",
      "closed_at": "2025-05-13T04:45:40Z",
      "labels": [
        "bug?",
        "m: Prompts"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/905/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "4.0",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/905",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/905",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:42.055354",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "可以尝试一下4.0，已经重构了预设机制。",
          "created_at": "2025-05-13T04:45:40Z"
        }
      ]
    },
    {
      "issue_number": 1037,
      "title": "[Bug]: 插件过多web不会下滑",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\n最新版\n\n### 异常情况\n\nweb插件过多不下滑\n\n### 复现步骤\n\n足够多的插件即可复刻\n![Image](https://github.com/user-attachments/assets/40a0c287-c4c4-463a-8eb7-edd85f1cb767)\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "sanxianxiaohuntun",
      "author_type": "User",
      "created_at": "2025-02-08T03:55:40Z",
      "updated_at": "2025-05-13T04:44:54Z",
      "closed_at": "2025-05-13T04:44:53Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1037/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "4.0",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1037",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1037",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:42.246831",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "我想让新请来的前端同学来修这个。",
          "created_at": "2025-02-08T15:07:17Z"
        },
        {
          "author": "sanxianxiaohuntun",
          "body": "草！你还真搞了个工作室了呀！你不都没毕业吗！\n",
          "created_at": "2025-02-09T07:23:15Z"
        },
        {
          "author": "RockChinQ",
          "body": "已经修复力。",
          "created_at": "2025-05-13T04:44:53Z"
        }
      ]
    },
    {
      "issue_number": 1391,
      "title": "[Bug]: Pipeline 改名后，所绑定的bot没有同步更新",
      "body": "### 运行环境\n\n/\n\n### 异常情况\n\n/\n\n### 复现步骤\n\n先把bot绑定到现有pipeline，修改pipeline name，再看bot页，并没有同步更新\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2025-05-13T01:22:34Z",
      "updated_at": "2025-05-13T04:44:01Z",
      "closed_at": "2025-05-13T04:44:01Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1391/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1391",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1391",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:42.409045",
      "comments": []
    },
    {
      "issue_number": 912,
      "title": "[Feature]: !default直接拼接所有预设内容，过长发送失败",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n!default会将所有预设内容拼接，当预设较长时会发送失败，虽然可以直接改源码，但是每次更新都会覆盖\r\n![QQ20241024-211616](https://github.com/user-attachments/assets/498717de-69c5-4f47-8864-224c2bf7261c)\r\n",
      "state": "closed",
      "author": "OverSky-gtq",
      "author_type": "User",
      "created_at": "2024-10-24T13:17:10Z",
      "updated_at": "2025-05-12T13:11:03Z",
      "closed_at": "2025-05-12T13:11:02Z",
      "labels": [
        "m: Prompts"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/912/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "4.0",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/912",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/912",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:42.409069",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "预设内容改短一些，或者换个支持更长上文的模型。后续会加webui，支持在webui上修改预设。",
          "created_at": "2024-10-25T00:54:20Z"
        },
        {
          "author": "RockChinQ",
          "body": "在新版（4.0）里，预设配置已经移动到流水线配置并结合了单预设和多回合预设模式，可以尝试一下，如果还有更多建议，欢迎在新issue反馈。\n\n<img width=\"574\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/de76e9ca-77fd-4581-8e2c-15be816d5788\" />",
          "created_at": "2025-05-12T13:11:02Z"
        }
      ]
    },
    {
      "issue_number": 868,
      "title": "[Feature]: 更换预设命令",
      "body": "### 这是一个？\r\n\r\n新功能\r\n\r\n### 详细描述\r\n\r\n能把之前的切换!reset(预设)的功能回来吗，\r\n比!default(预设)再!reset方便多了。\r\n发现个问题：如果使用!default(预设)会把会话的默认预设给替换掉，如果下一个会话不想使用这个预设了就得重新使用！default(预设)命令进行更换。这样感觉好麻烦啊\r\n![D59F418E5DC330950828AA45471A480C](https://github.com/user-attachments/assets/fdc6cee0-fdcd-4c0e-96f6-8f78b6ff5b8d)\r\n",
      "state": "closed",
      "author": "wcwq98",
      "author_type": "User",
      "created_at": "2024-08-18T09:48:46Z",
      "updated_at": "2025-05-12T13:10:59Z",
      "closed_at": "2025-05-12T13:10:58Z",
      "labels": [
        "m: Prompts"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/868/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.4",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/868",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/868",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:42.580588",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "在新版（4.0）里，预设配置已经移动到流水线配置并结合了单预设和多回合预设模式，可以尝试一下，如果还有更多建议，欢迎在新issue反馈。\n\n<img width=\"574\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/de76e9ca-77fd-4581-8e2c-15be816d5788\" />",
          "created_at": "2025-05-12T13:10:58Z"
        }
      ]
    },
    {
      "issue_number": 823,
      "title": "[Feature]: 对预设系统进一步升级",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n![image](https://github.com/RockChinQ/QChatGPT/assets/129247570/7bccd22c-c7d3-46fa-b37d-a0a9eeebab61)\r\n希望能够实现这种功能",
      "state": "closed",
      "author": "bobandbrony",
      "author_type": "User",
      "created_at": "2024-06-21T18:46:56Z",
      "updated_at": "2025-05-12T13:10:42Z",
      "closed_at": "2025-05-12T13:10:40Z",
      "labels": [
        "eh: Improve",
        "m: Prompts"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/823/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "4.0",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/823",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/823",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:42.799846",
      "comments": [
        {
          "author": "OverSky-gtq",
          "body": "应该适配酒馆那种角色卡格式",
          "created_at": "2024-10-24T13:12:44Z"
        },
        {
          "author": "RockChinQ",
          "body": "在新版（4.0）里，预设配置已经移动到流水线配置并结合了单预设和多回合预设模式，可以尝试一下，如果还有更多建议，欢迎在新issue反馈。\n\n<img width=\"574\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/de76e9ca-77fd-4581-8e2c-15be816d5788\" />",
          "created_at": "2025-05-12T13:10:41Z"
        }
      ]
    },
    {
      "issue_number": 614,
      "title": "[Feature]: 在config.py中指定重启后的默认预设",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n现有的预设系统虽然可以通过!default set来指定重置时默认选择的预设，但当bot重启（包括!reload热重载）后这项设置就会失效，导致每次重启之后都需要用!default set重新指定一次预设。\r\n\r\n希望可以允许将重启后默认选定的预设名字或.json文件（取决于用不用full_scenario）通过config.py进行指定（效果等同于自动进行一次!default set）。",
      "state": "closed",
      "author": "a86296007",
      "author_type": "User",
      "created_at": "2023-11-24T16:47:53Z",
      "updated_at": "2025-05-12T13:10:36Z",
      "closed_at": "2025-05-12T13:10:35Z",
      "labels": [
        "eh: Improve",
        "m: Prompts",
        "m: Session",
        "pd: Need design"
      ],
      "label_count": 4,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/614/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "RockChinQ"
      ],
      "milestone": "4.0",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/614",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/614",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:43.065113",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "在新版（4.0）里，预设配置已经移动到流水线配置并结合了单预设和多回合预设模式，可以尝试一下，如果还有更多建议，欢迎在新issue反馈。\n\n<img width=\"574\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/de76e9ca-77fd-4581-8e2c-15be816d5788\" />",
          "created_at": "2025-05-12T13:10:35Z"
        }
      ]
    },
    {
      "issue_number": 1371,
      "title": "[Bug]: 选择runner为dify时，群聊里@机器人无应答",
      "body": "### 运行环境\n\nv3.4.14.2、centos7.9、docker 方式部署\n\n### 异常情况\n\n选择runner为dify时，单聊机器人可以正常运行，群聊里@机器人无应答，无日志\n\n![Image](https://github.com/user-attachments/assets/c9b83917-0cc9-40bb-bd3c-63bdbdb461d7)\n\n![Image](https://github.com/user-attachments/assets/7d4bc437-d4e4-4dc2-b35b-d95be065d287)\n机器人权限\n\n![Image](https://github.com/user-attachments/assets/4fce89c1-b37f-4462-9c70-d0ba8e2ea8ef)\n\n![Image](https://github.com/user-attachments/assets/212d178c-e9fa-4c9a-93b3-ad46d59ebb54)\n\n\n### 复现步骤\n\ndocker 方式部署启动\n\n\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "gaoyp27",
      "author_type": "User",
      "created_at": "2025-05-06T08:24:01Z",
      "updated_at": "2025-05-12T06:51:09Z",
      "closed_at": "2025-05-12T06:48:29Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1371/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1371",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1371",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:43.338764",
      "comments": [
        {
          "author": "gaoyp27",
          "body": "![Image](https://github.com/user-attachments/assets/6648792e-31fc-4c1e-81cb-cf953eb17313)    pipeline 配置改为如下，可以正常服务了\n\n![Image](https://github.com/user-attachments/assets/47648531-7abb-4870-9fe6-37ff13099345)\n\n",
          "created_at": "2025-05-12T06:42:39Z"
        }
      ]
    },
    {
      "issue_number": 1322,
      "title": "[Bug]: langbot 部署在内网，需要使用代理服务器，且公司使用了中间人私有证书",
      "body": "### 运行环境\n\ndocker \n\n### 异常情况\n\n[Lark] [2025-04-22 16:54:42,605] [ERROR] connect failed, err: HTTPSConnectionPool(host='open.feishu.cn', port=443): Max retries exceeded with url: /callback/ws/endpoint (Caused by SSLError(SSLCertVerificationError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: self-signed certificate in certificate chain (_ssl.c:1007)')))\n\n我已经在docker 容器内安装了私有证书且信任，但仍然报错！\n\n### 复现步骤\n\n使用 docker exec -it  langbot  /bin/bash  进入容器，安装了私有证书且信任后，docker commit 创建了新的镜像，再次启动进入，安装 curl ，且执行  curl --cacert /usr/local/share/ca-certificates/xxx_pem.crt https://open.feishu.cn/callback/ws/endpoint\n404 page not foundroot@6ad624291c3b   说明私有证书有效，但 logs 中始终报错 certificate verify failed: self-signed certificate in certificate chain\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "truezxd",
      "author_type": "User",
      "created_at": "2025-04-22T09:02:09Z",
      "updated_at": "2025-05-12T06:16:09Z",
      "closed_at": "2025-05-12T06:16:09Z",
      "labels": [
        "bug?",
        "Stale"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1322/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1322",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1322",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:43.529443",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "参考一下这个？https://github.com/langgenius/dify/issues/6575",
          "created_at": "2025-04-23T06:34:00Z"
        }
      ]
    },
    {
      "issue_number": 858,
      "title": "[Bug]: Docker 更新重建容器后插件依赖丢失",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\nNone\n\n### 系统环境\n\n\\\n\n### Python环境\n\n\\\n\n### QChatGPT版本\n\n\\\n\n### 异常情况\n\n\\\n\n### 日志信息\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-07-28T13:23:08Z",
      "updated_at": "2025-05-11T13:20:16Z",
      "closed_at": "2025-05-11T13:20:16Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/858/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/858",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/858",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:45.649407",
      "comments": [
        {
          "author": "DetLFY",
          "body": "这个问题好像一直延续到了最新的版本，应该是由于安装插件时会通过插件路径下的requirements.txt安装相关依赖，但是安装完成之后无论是LangBot本身还是插件都不会检查是否缺少相关的依赖，导致重建容器时会因为缺少插件相关的依赖而无法加载插件。\n\n目前手动的一个解决方法是每次重建容器后进入容器插件相关的路径，手动pip install -r requirements.txt，之后再热重载插件就可以。\n\n但是这样的话每次更新版本都要重新下过镜像，也就意味着每次更新就需要重建容器，然后重复上述步骤手动添加插件需要的依赖后再热重载，这样如果后续插件生态一多的话就不利于这种通过docker运行",
          "created_at": "2025-01-30T17:54:12Z"
        },
        {
          "author": "RockChinQ",
          "body": "因为现有的插件机制有一些过时了，最近在考虑重新设计，这个依赖安装的问题自然也会考虑进去的。",
          "created_at": "2025-02-01T05:32:57Z"
        }
      ]
    },
    {
      "issue_number": 819,
      "title": "[Bug]: full-scenario预设模式无法使用",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\nNone\n\n### 系统环境\n\nWindows10 ltsc 中国四川\n\n### Python环境\n\npython 3.10.9\n\n### QChatGPT版本\n\nv3.2.2\n\n### 异常情况\n\n在full-scenario预设模式下，使用!default 指令没有效果\r\n我：!default luna\r\nbot：[bot] 当前所有情景预设:    .........    当前会话使用的是: default\r\n一直都是default\n\n### 日志信息\n\n[2024-06-19 21:28:01.042] D:\\chatbot\\44940****\\QChatGPT-3.2.2\\pkg\\pipeline\\process\\process.py (42) - [INFO] :\r\n    处理 person_304314**** 的请求(34): !default luna\r\n[2024-06-19 21:28:01.046] D:\\chatbot\\44940****\\QChatGPT-3.2.2\\pkg\\pipeline\\process\\handlers\\command.py (112) - [INFO] :\r\n    命令返回: 当前所有情景预设: ...\n\n### 启用的插件\n\n无",
      "state": "closed",
      "author": "bobandbrony",
      "author_type": "User",
      "created_at": "2024-06-19T13:29:07Z",
      "updated_at": "2025-05-11T13:20:16Z",
      "closed_at": "2025-05-11T13:20:15Z",
      "labels": [
        "bug?",
        "m: Prompts"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/819/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "4.0",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/819",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/819",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:45.817784",
      "comments": [
        {
          "author": "bobandbrony",
          "body": "我这里normal模式也切换不了，同样的情况，但预设发不过来了，日志如下：\r\n    处理 person_30431***** 的请求(32): !default lulu\r\n[2024-06-21 17:04:50.088] D:\\chatbot\\44940*****\\QChatGPT-3.2.2\\pkg\\pipeline\\process\\handlers\\command.py (112) - [INFO] :\r\n    命令返回: 当前所有情景预设: ...\r\n[2024-06-21 17:04:58.110] D:\\chatbot\\44940*****\\QChatGPT-3.2.2\\pk",
          "created_at": "2024-06-21T09:13:30Z"
        }
      ]
    },
    {
      "issue_number": 1362,
      "title": "[Bug]:  controller.py (98) - [ERROR] : local variable 'chunk' referenced before assignment",
      "body": "### 运行环境\n\ndocker\n\n### 异常情况\n\n我使用的消息平台是napcat（它们都运行在docker中，已经按照wiki调整两者的容器网络），消息平台和LangBot之间的通讯没有问题。\napi平台使用的是dify（模型名称设置在这个地方应当不会生效）\ndify的地址是局域网中的另一台主机。\ndify的API Endpoint：http://172.16.0.121/v1\n请求运行器是：dify-service-api\n当我认为万事大吉想要发送一条测试消息的时候，Langbot的日志中输出了如下内容：\n\n[04-30 12:01:08.698] process.py (42) - [INFO] : 处理 person_1048893645 的请求(0): 1\n[04-30 12:01:39.320] chat.py (94) - [ERROR] : 对话(0)请求失败: UnboundLocalError local variable 'chunk' referenced before assignment\n[04-30 12:01:39.651] controller.py (98) - [ERROR] : local variable 'chunk' referenced before assignment[04-30 12:02:02.198] process.py (42) - [INFO] : 处理 person_1048893645 的请求(1): 2\n[04-30 12:02:33.098] chat.py (94) - [ERROR] : 对话(1)请求失败: UnboundLocalError local variable 'chunk' referenced before assignment\n[04-30 12:02:33.376] controller.py (98) - [ERROR] : local variable 'chunk' referenced before assignment\n\n\n### 复现步骤\n\n1、使用docker部署LangBot和NapCat并设置容器网络。\n2、启用LangBot消息适配器（aiocqhttp，host:0.0.0.0,port:2280,设置access token）\n3、登录NapCat并设置ws客户端，填写[ws://](ws://langbot:2280/ws)\n4、发送测试消息，验证Napcat和LangBot之间是否通讯正常，langbot是否可以接收NapCat消息\n5、配置Langbot的provider，使用Dify Service Chat\n6、请求运行器使用：dify-service-api\n7、再次发送测试消息，验证模型请求功能\n\n### 启用的插件\n\n未使用任何插件",
      "state": "closed",
      "author": "RilesLee",
      "author_type": "User",
      "created_at": "2025-04-30T04:14:55Z",
      "updated_at": "2025-05-09T01:41:28Z",
      "closed_at": "2025-05-09T01:40:10Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1362/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1362",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1362",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:45.987967",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "dify 上的应用是什么类型？发一下截图？或者dify应用的dsl",
          "created_at": "2025-05-01T09:12:02Z"
        },
        {
          "author": "RockChinQ",
          "body": "把你的 provider.json 文件内容也贴上来看看",
          "created_at": "2025-05-01T09:12:47Z"
        },
        {
          "author": "RilesLee",
          "body": "> dify 上的应用是什么类型？发一下截图？或者dify应用的dsl\n\n在Dify中使用的应用是‘聊天助手’类型的应用",
          "created_at": "2025-05-06T05:10:13Z"
        },
        {
          "author": "RilesLee",
          "body": "> 把你的 provider.json 文件内容也贴上来看看\n\n```json\n{\n  \"dashscope-app-api\": {\n    \"agent\": {\n      \"app-id\": \"Your_app_id\",\n      \"references_quote\": \"参考资料来自:\"\n    },\n    \"api-key\": \"sk-1234567890\",\n    \"app-type\": \"agent\",\n    \"workflow\": {\n      \"app-id\": \"Your_app_id\",\n      \"biz_params\": {\n        \"city\": ",
          "created_at": "2025-05-06T05:19:42Z"
        },
        {
          "author": "RockChinQ",
          "body": "这个问题我这边没法复现，但从代码角度来看，你这里是 langbot 与 dify 的连接可能不正常，导致没有收到任何回复。现在我已经在 #1376 加了个针对这个问题的报错信息，你可以等新版发布之后再试试。",
          "created_at": "2025-05-09T01:41:26Z"
        }
      ]
    },
    {
      "issue_number": 1372,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nCuteVideo\n\n### 插件代码库地址\n\nhttps://github.com/doubleJazzCat/CuteVideo\n\n### 插件简介\n\nlagrange-谁不喜欢群里有个看妹妹机器人呢",
      "state": "closed",
      "author": "doubleJazzCat",
      "author_type": "User",
      "created_at": "2025-05-06T16:50:53Z",
      "updated_at": "2025-05-08T00:51:33Z",
      "closed_at": "2025-05-08T00:51:31Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1372/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1372",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1372",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:46.174360",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2025-05-08T00:51:31Z"
        }
      ]
    },
    {
      "issue_number": 1374,
      "title": "[Bug]: 企业微信只是支持机器人的，不是普通员工号。这个写法太容易让人误解，从而浪费时间。",
      "body": "### 运行环境\n\nwindows\n\n### 异常情况\n\n企业微信只是支持机器人的，不是普通员工号。这个写法太容易让人误解，从而浪费时间。\n\n### 复现步骤\n\n可重复，进去就知道企业微信只是支持机器人的，不是普通员工号。但主页的这个写法支持企业微信太容易让人误解，从而浪费时间。\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "paperplane2002",
      "author_type": "User",
      "created_at": "2025-05-07T07:36:59Z",
      "updated_at": "2025-05-07T07:46:19Z",
      "closed_at": "2025-05-07T07:46:18Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1374/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1374",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1374",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:46.357181",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "本项目介绍中即定义为 “机器人” 而非 普通员工 号，常识上也认为 即时通信机器人 指的是 ”通过即时通信平台官方 API 实现的机器人“。\n\n如果你的需求是 “将企业微信员工个人号作为机器人使用”，可以另提issue，把你所了解的信息都贴上来，我们后续考虑添加支持。但需要注意的是，逆向工程实现的机器人机制是不稳定的、非主流的、非官方的。",
          "created_at": "2025-05-07T07:46:18Z"
        }
      ]
    },
    {
      "issue_number": 1329,
      "title": "[Bug]: 飞书消息会多次重复发送",
      "body": "### 运行环境\n\nv3.4.12.1，docker\n\n### 异常情况\n\n对接Dify做智能体开发，在飞书群里@机器人发送消息，会出现同一个消息多次重复发送到Dify,LangBot日志也是多条\n\n### 复现步骤\n\n对接Dify做智能体开发，在飞书群里@机器人发送消息，会出现同一个消息多次重复发送到Dify,LangBot日志也是多条\n\n### 启用的插件\n\n没有使用任何插件",
      "state": "closed",
      "author": "zhaozhao615",
      "author_type": "User",
      "created_at": "2025-04-24T02:37:30Z",
      "updated_at": "2025-05-07T06:38:12Z",
      "closed_at": "2025-05-07T06:38:12Z",
      "labels": [
        "bug?",
        "Please take it seriously"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 11,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1329/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1329",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1329",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:46.543154",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "怎么复现？配置文件怎么写的？lark是ws还是webhook模式？消息是连续发还是等待响应再发？具体的日志内容是什么？dify上应用配置是什么？",
          "created_at": "2025-04-24T02:39:36Z"
        },
        {
          "author": "zhaozhao615",
          "body": "连续发送多条消息会出现这种情况。飞书配置的长连接模式。dify上是解析飞书消息并保存到飞书多维表格。日志就是正常的接收消息日志，并没有什么异常。",
          "created_at": "2025-04-24T02:51:52Z"
        },
        {
          "author": "RockChinQ",
          "body": "麻烦发一下dify应用的dsl",
          "created_at": "2025-04-24T04:02:09Z"
        },
        {
          "author": "zhaozhao615",
          "body": "[信息提取.zip](https://github.com/user-attachments/files/19885598/default.zip) 辛苦排查下",
          "created_at": "2025-04-24T06:22:21Z"
        },
        {
          "author": "wangcham",
          "body": "您好，我这里按照提供的流程和配置走了一下：\n\n<img width=\"983\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/a3218f05-9f96-4c03-9e6b-22efb258037a\" />\n\n看起来没有异常啊，有没有其他的报错信息呢？",
          "created_at": "2025-04-28T05:39:39Z"
        }
      ]
    },
    {
      "issue_number": 1367,
      "title": "[Bug]: 群聊指令显示未知指令",
      "body": "### 运行环境\n\nwindows手动部署\n\n### 异常情况\n\n我是用windows手动部署，qq官方机器人，使用指令时私聊可以正常回复，而群聊则显示未知指令，权限已经设置为普通用户但依旧不管用，求解答!\n\n### 复现步骤\n\n![Image](https://github.com/user-attachments/assets/fed51316-2f41-4706-99c0-83159ea2b6e9)\n\n![Image](https://github.com/user-attachments/assets/3e292354-932c-47cc-b535-56a86f3d5384)\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "CSYwjy",
      "author_type": "User",
      "created_at": "2025-05-02T16:51:35Z",
      "updated_at": "2025-05-04T02:39:53Z",
      "closed_at": "2025-05-04T02:39:35Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1367/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1367",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1367",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:46.722094",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "<img width=\"193\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/2d05a674-8a18-4b91-8972-631f10cdbbdf\" />  \n\n没启用插件的话，langbot本身没有这个命令。   \n如果是插件提供的命令，去给那个插件的仓库提issue。",
          "created_at": "2025-05-04T02:39:35Z"
        }
      ]
    },
    {
      "issue_number": 1366,
      "title": "[Plugin]: 提供长消息回复合并转发",
      "body": "### 插件名称\n\nMsg2Forward\n\n### 插件代码库地址\n\nhttps://github.com/sheetung/Msg2Forward\n\n### 插件简介\n\n一种更加优雅的langbot消息回复方式，当langbot回复消息超过一定长度后，使用合并转发发出消息",
      "state": "closed",
      "author": "sheetung",
      "author_type": "User",
      "created_at": "2025-05-02T05:23:25Z",
      "updated_at": "2025-05-02T08:31:47Z",
      "closed_at": "2025-05-02T08:31:45Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1366/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1366",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1366",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:46.892783",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2025-05-02T08:31:45Z"
        }
      ]
    },
    {
      "issue_number": 1357,
      "title": "[Bug]: 能上公网的内网机器docker 方式部署 langbot 后，使用飞书长连接方式失败",
      "body": "### 运行环境\n\nv3.4.14.2 ，centos7.9 环境，docker 启动方式\n\n### 异常情况\n\n查看应用日志无报错信息\n langbot 飞书应用配置如下\n\n![Image](https://github.com/user-attachments/assets/fe8acb63-df5a-4d8f-81a5-9c84e21d225b)\n飞书启用时间订阅长连接报错如下\n\n![Image](https://github.com/user-attachments/assets/acc05ff3-a972-46ce-ba91-b68bbff64f25)\n\n### 复现步骤\n\n按照问题方式部署\n\n### 启用的插件\n\n无",
      "state": "closed",
      "author": "gaoyp27",
      "author_type": "User",
      "created_at": "2025-04-29T09:01:55Z",
      "updated_at": "2025-04-29T11:23:18Z",
      "closed_at": "2025-04-29T11:23:18Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1357/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1357",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1357",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:47.082327",
      "comments": [
        {
          "author": "gaoyp27",
          "body": "日志信息\n\n![Image](https://github.com/user-attachments/assets/2c264197-a799-4b15-b0be-98396a86a9fa)",
          "created_at": "2025-04-29T09:58:37Z"
        },
        {
          "author": "RockChinQ",
          "body": "长连接模式请把 `enable-webhook` 设为`false\n\nhttps://docs.langbot.app/deploy/platforms/lark.html#%E5%9C%A8-langbot-%E4%B8%AD%E5%A1%AB%E5%86%99%E4%BF%A1%E6%81%AF%E5%B9%B6%E5%90%AF%E5%8A%A8",
          "created_at": "2025-04-29T11:10:19Z"
        }
      ]
    },
    {
      "issue_number": 1334,
      "title": "[Bug]: 企微客服wecomcs，目前测试过了几个小时后台收到问题就会400，重载下消息平台就好了，其他消息模块没这个问题。",
      "body": "### 运行环境\n\ndocker和windows server2012问题相同\n\n### 异常情况\n\n![Image](https://github.com/user-attachments/assets/54279fe1-ff91-4b04-a92c-422e1f9313fd)\n企微客服wecomcs，目前测试过了几个小时后台收到问题就会400，重载下消息平台就好了，其他消息模块没这个问题。\n\n### 复现步骤\n\n1.企微客服wecomcs模块部署好，测试没问题后。\n2.过几小时再问企微客服，收不到消息，后台报错。\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "892160599",
      "author_type": "User",
      "created_at": "2025-04-25T06:52:12Z",
      "updated_at": "2025-04-29T05:04:54Z",
      "closed_at": "2025-04-29T05:04:54Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1334/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1334",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1334",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:47.274359",
      "comments": [
        {
          "author": "dp543831577",
          "body": "@892160599 wecomcs是咋接上去的，我这接入总报400的错误",
          "created_at": "2025-04-29T03:32:27Z"
        }
      ]
    },
    {
      "issue_number": 1349,
      "title": "[Bug]: 添加企业微信对外客服的时候容器内部报这个错误",
      "body": "### 运行环境\n\nDocker\n\n### 异常情况\n\n已确认下咧参数填完：\n{\n      \"EncodingAESKey\": \"xxxxx\",\n      \"adapter\": \"wecomcs\",\n      \"corpid\": \"xxxxx\",\n      \"enable\": true,\n      \"port\": 2289,\n      \"secret\": \"xxxxxxxxxx\",\n      \"token\": \"xxxxx\"\n    }\n\n绑定的时候，容器内部日志出现：\n\nTraceback (most recent call last):\n  File \"/app/libs/wecom_customer_service_api/api.py\", line 214, in handle_callback_request\n    message_data = await self.get_detailed_message_list(xml_msg)\n  File \"/app/libs/wecom_customer_service_api/api.py\", line 75, in get_detailed_message_list\n    token = root.find(\"Token\").text\nAttributeError: 'NoneType' object has no attribute 'text'\n\n### 复现步骤\n\n1，在企业微信上新建机器人\n2，将机器人API接受消息的端口写成2289，验证成功\n3，进入微信客服API中配置机器人\n4，选择后容器出现上述错误\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "dp543831577",
      "author_type": "User",
      "created_at": "2025-04-28T14:24:09Z",
      "updated_at": "2025-04-29T05:04:53Z",
      "closed_at": "2025-04-29T05:04:53Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1349/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1349",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1349",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:47.467390",
      "comments": [
        {
          "author": "dp543831577",
          "body": "附加消息，在这个日志上面是\n[2025-04-28 22:36:53 +0800] [1] [INFO] XXXXXX:31080 POST /callback/command 1.1 400 67 4656\nTraceback (most recent call last):\n  File \"/app/libs/wecom_customer_service_api/api.py\", line 214, in handle_callback_request\n    message_data = await self.get_detailed_message_list(xml_msg)\n  Fi",
          "created_at": "2025-04-28T14:37:30Z"
        },
        {
          "author": "dp543831577",
          "body": "```\n打印了下消息如下：\n<xml>\n\t<tousername><![CDATA[这里是corpid]]></tousername>\n\t<fromusername><![CDATA[sys]]</fromusername>\n\t<createtime>1745851516</createtime>\n\t<msgtype><![CDATA[event]]</msgtype>\n\t<event><![CDATA[kf_account_auth_change]]></event>\n\t<authaddopenkfid><![CDATA[？？不知道是啥]]></authaddopenkfid>\n</xml>",
          "created_at": "2025-04-28T14:49:18Z"
        },
        {
          "author": "dp543831577",
          "body": "如果是发消息是：\n`<xml>\n\t<tousername><![CDATA[这里是corpid]]></tousername>\n\t<fromusername><![CDATA[这里是用户名]]></fromusername>\n\t<createtime>1745851440</createtime>\n\t<msgtype><![CDATA[text]]></msgtype>\n\t<content><![CDATA[\\xe5\\xa5\\xbd]]></content>\n\t<msgid>7498374841788067913</msgid>\n\t<agentid>1000005</agentid>\n</xm",
          "created_at": "2025-04-28T14:51:25Z"
        }
      ]
    },
    {
      "issue_number": 1333,
      "title": "[Bug]: 飞书langbot使用sora绘图服务器端有返回值与返回信息，但是前端飞书聊天中却返回空对话。",
      "body": "### 运行环境\n\nv3.4.14、windows、x64、python3.13、阿里云上海\n\n### 异常情况\n\n飞书langbot使用sora绘图服务器端有返回值与返回信息，但是前端飞书聊天中却返回空对话。\n日志：\n[04-24 18:24:43.320] process.py (42) - [INFO] : 处理 person_ou_2262ef2f75844aea7be48dd0395e828e 的请求(0): 画一张风景图\nC:\\Program Files\\langbot-v3.4.14-all\\pkg\\provider\\modelmgr\\requesters\\chatcmpl.py:58: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/\n  chatcmpl_message = chat_completion.choices[0].message.dict()\n[04-24 18:25:25.255] chat.py (80) - [INFO] : 对话(0)响应: assistant: ![图片](htt...\n\n\n### 复现步骤\n\nplamform.json中使用飞书消息平台。provide.json中使用openaikey，大模型请求器使用openaiURL：yunwu.api。\n\n### 启用的插件\n\nAIDrawing、Md2QQImage_Improved、Webwlkr、Api和模型一键修改",
      "state": "closed",
      "author": "MikamiLing",
      "author_type": "User",
      "created_at": "2025-04-24T10:49:48Z",
      "updated_at": "2025-04-28T07:30:31Z",
      "closed_at": "2025-04-28T07:30:31Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1333/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1333",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1333",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:47.625675",
      "comments": []
    },
    {
      "issue_number": 1340,
      "title": "[Plugin]: 记下你的消费，统计日均消费",
      "body": "### 插件名称\n\nSpendFlow\n\n### 插件代码库地址\n\nhttps://github.com/sheetung/SpendFlow\n\n### 插件简介\n\n记下你的产品消费，统计日均消费\n也许有webui（大饼）",
      "state": "closed",
      "author": "sheetung",
      "author_type": "User",
      "created_at": "2025-04-27T06:11:48Z",
      "updated_at": "2025-04-27T07:10:25Z",
      "closed_at": "2025-04-27T07:10:23Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1340/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1340",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1340",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:47.625702",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2025-04-27T07:10:23Z"
        }
      ]
    },
    {
      "issue_number": 1335,
      "title": "问答报错：controller.py (189) - [ERROR] : 处理请求时出错 query_id=10 stage=SendResponseBackStage :",
      "body": "请教一下问题，聊天很正常，但每三句左右，就会有一句不回答，然后报错，继续问的话就会继续回答，报错和相关截图如下：\n\n![Image](https://github.com/user-attachments/assets/abc61539-ea96-44f8-a64c-6a039d96ea1e)\n\n![Image](https://github.com/user-attachments/assets/ee9e4ea9-dd83-417b-8db4-8701e2dbdc94)",
      "state": "closed",
      "author": "wantsci",
      "author_type": "User",
      "created_at": "2025-04-25T08:42:26Z",
      "updated_at": "2025-04-27T06:48:12Z",
      "closed_at": "2025-04-27T06:48:11Z",
      "labels": [
        "Stale"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1335/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1335",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1335",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:47.781860",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "开启调试模式（设置环境变量DEBUG=true），重启langbot，复现一下这个问题，把具体报错信息贴上了。",
          "created_at": "2025-04-25T12:58:49Z"
        }
      ]
    },
    {
      "issue_number": 1283,
      "title": "[Feature]: 收到用户消息后立即提示如“正在处理中，请稍候”",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n飞书发送消息后可能要几分钟才能返回结果，能不能在发完后马上回复“正在处理中，请稍候”，结果返回再更新这条消息。",
      "state": "open",
      "author": "dataknocker",
      "author_type": "User",
      "created_at": "2025-04-09T12:32:57Z",
      "updated_at": "2025-04-25T15:11:44Z",
      "closed_at": null,
      "labels": [
        "eh: Feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1283/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "4.0",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1283",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1283",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:47.939889",
      "comments": [
        {
          "author": "tjaol",
          "body": "其实即时通讯工具都是一样，LLM在思考，这段时间没任何返回 我用的最多的是钉钉，希望尽快实现此功能",
          "created_at": "2025-04-10T02:19:54Z"
        },
        {
          "author": "huanzai",
          "body": "支持   太需要这个功能了，我用的是钉钉 @RockChinQ ",
          "created_at": "2025-04-25T15:11:44Z"
        }
      ]
    },
    {
      "issue_number": 1327,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nOracleLang\n\n### 插件代码库地址\n\nhttps://github.com/ydzat/OracleLang\n\n### 插件简介\n\nOracleLang 是一个基于易经原理的智能算卦插件，为 [LangBot](https://github.com/RockChinQ/LangBot) 平台开发。它结合《易经》原理与数学模型，通过用户的问题生成卦象，并提供图示和解释。",
      "state": "closed",
      "author": "ydzat",
      "author_type": "User",
      "created_at": "2025-04-24T00:22:55Z",
      "updated_at": "2025-04-24T13:36:40Z",
      "closed_at": "2025-04-24T13:36:38Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1327/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1327",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1327",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:48.180662",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "<img width=\"355\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/40269914-177e-4043-bf18-e931ac1d7e1e\" />\n辛苦设置一下仓库描述，否则无法正常上架～",
          "created_at": "2025-04-24T02:36:18Z"
        },
        {
          "author": "ydzat",
          "body": "> <img alt=\"Image\" width=\"355\" src=\"https://private-user-images.githubusercontent.com/45992437/436813158-40269914-177e-4043-bf18-e931ac1d7e1e.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NDU0OTI4MzcsI",
          "created_at": "2025-04-24T11:02:34Z"
        },
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2025-04-24T13:36:38Z"
        }
      ]
    },
    {
      "issue_number": 982,
      "title": "[Bug]: Dify接入Agent类型AI-Gemini-2.0-Thinking-Exp-1219后无法输出 Final Answer 事件",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\nDebian 11\n\n### 异常情况\n\nDify接入Gemini-2.0-Thinking-Exp-1219后无法输出 Final Answer 事件，如图，Dify已输出Final Answer事件而QQ内和终端内并没有接受这一结果\n工作室AI类型：Agent\n\n![Image](https://github.com/user-attachments/assets/8fc59e5f-bd9a-440e-a170-7b9a13d230ca)\n\n![Image](https://github.com/user-attachments/assets/5b80aa75-019d-4f7f-9357-cc9c681e10df)\n\n![Image](https://github.com/user-attachments/assets/4db84275-4b9f-4093-86ae-1e4ce60c8257)\n\n### 复现步骤\n\nDify接入驱动Gemini-2.0-Thinking-Exp-1219的Agent AI并在QQ询问AI任何问题\n\n### 启用的插件\n\nN/A",
      "state": "closed",
      "author": "AlanBacker",
      "author_type": "User",
      "created_at": "2025-01-21T01:35:48Z",
      "updated_at": "2025-04-23T08:56:49Z",
      "closed_at": "2025-04-23T08:55:53Z",
      "labels": [
        "bug?",
        "m: Provider"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/982/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/982",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/982",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:48.349427",
      "comments": [
        {
          "author": "XIAO-Q7",
          "body": "\n# 版本\ndity： 社区版 V0.15.3\nlangbot：v3.4.6.2\n系统：langbot docker\n模型：硅基流动的deepseek-ai/DeepSeek-R1-Distill-Qwen-32B\n# 问题描述\n自己创建好agent之后，按照说明文档接入langbot。\n不开启track-function-calls 无任何输出。\n开启track-function-calls之后只输出工具调用上文的内容。最终结果依然不输出。\n从dify后台看回复正常\n也尝试切换了qwen模型同样有这个问题\n\n# 原因猜想\n```\n\u001b[32m[02-09 07:06:29.494] difys",
          "created_at": "2025-02-09T07:23:18Z"
        },
        {
          "author": "RockChinQ",
          "body": "修好了。dify的思维链模型响应格式有改动。下个版本包含这个修复。",
          "created_at": "2025-04-23T08:56:49Z"
        }
      ]
    },
    {
      "issue_number": 1312,
      "title": "[Bug]: 使用企业微信对接 Dify Service API 后，只有 chat 类型是正常工作的，agent 类型有输出但无响应",
      "body": "### 运行环境\n\nv3.4.13.1 on Docker\n\n### 异常情况\n\nBug 如图显示：\n\nDify 的 Agent 应用是有输出的\n![Image](https://github.com/user-attachments/assets/4ec93eab-e46c-4f27-be73-e5014246d6fc)\n\n但企微机器人应用聊天窗口无响应\n![Image](https://github.com/user-attachments/assets/23b11c4a-07b2-4050-a0d2-0566f2293702)\n\n\n\n另外想要了解下，workflow 的提问输入变量名是？\n\n### 复现步骤\n\nplatform.json\n```\n{\n  \"at-sender\": false,\n  \"force-delay\": {\n    \"max\": 0,\n    \"min\": 0\n  },\n  \"hide-exception-info\": true,\n  \"long-text-process\": {\n    \"font-path\": \"\",\n    \"strategy\": \"forward\",\n    \"threshold\": 2560\n  },\n  \"platform-adapters\": [\n    {\n      \"adapter\": \"nakuru\",\n      \"enable\": false,\n      \"host\": \"127.0.0.1\",\n      \"http_port\": 5700,\n      \"token\": \"\",\n      \"ws_port\": 8080\n    },\n    {\n      \"access-token\": \"\",\n      \"adapter\": \"aiocqhttp\",\n      \"enable\": true,\n      \"host\": \"0.0.0.0\",\n      \"port\": 2280\n    },\n    {\n      \"adapter\": \"qq-botpy\",\n      \"appid\": \"\",\n      \"enable\": false,\n      \"intents\": [\n        \"public_guild_messages\",\n        \"direct_message\"\n      ],\n      \"secret\": \"\"\n    },\n    {\n      \"adapter\": \"qqofficial\",\n      \"appid\": \"1234567890\",\n      \"enable\": false,\n      \"port\": 2284,\n      \"secret\": \"xxxxxxx\",\n      \"token\": \"abcdefg\"\n    },\n    {\n      \"EncodingAESKey\": \"==========EncodingAESKey===========\",\n      \"adapter\": \"wecom\",\n      \"contacts_secret\": \"===========contacts_secret===========\",\n      \"corpid\": \"===========corpid===========\",\n      \"enable\": true,\n      \"host\": \"0.0.0.0\",\n      \"port\": 2290,\n      \"secret\": \"==========secret==========\",\n      \"token\": \"==========token==========\"\n    },\n    {\n      \"adapter\": \"lark\",\n      \"app_id\": \"cli_abcdefgh\",\n      \"app_secret\": \"XXXXXXXXXX\",\n      \"bot_name\": \"LangBot\",\n      \"enable\": false,\n      \"enable-webhook\": false,\n      \"encrypt-key\": \"xxxxxxxxx\",\n      \"port\": 2285\n    },\n    {\n      \"adapter\": \"discord\",\n      \"client_id\": \"1234567890\",\n      \"enable\": false,\n      \"token\": \"XXXXXXXXXX\"\n    },\n    {\n      \"adapter\": \"gewechat\",\n      \"app_id\": \"\",\n      \"callback_url\": \"http://your-callback-url:2286/gewechat/callback\",\n      \"enable\": false,\n      \"gewechat_file_url\": \"http://your-gewechat-server:2532\",\n      \"gewechat_url\": \"http://your-gewechat-server:2531\",\n      \"port\": 2286,\n      \"token\": \"\"\n    },\n    {\n      \"AppID\": \"\",\n      \"AppSecret\": \"\",\n      \"EncodingAESKey\": \"\",\n      \"LoadingMessage\": \"AI正在思考中，请发送任意内容获取回复。\",\n      \"Mode\": \"drop\",\n      \"adapter\": \"officialaccount\",\n      \"enable\": false,\n      \"host\": \"0.0.0.0\",\n      \"port\": 2287,\n      \"token\": \"\"\n    },\n    {\n      \"adapter\": \"dingtalk\",\n      \"client_id\": \"\",\n      \"client_secret\": \"\",\n      \"enable\": false,\n      \"markdown_card\": false,\n      \"robot_code\": \"\",\n      \"robot_name\": \"\"\n    },\n    {\n      \"adapter\": \"telegram\",\n      \"enable\": false,\n      \"markdown_card\": false,\n      \"token\": \"\"\n    },\n    {\n      \"adapter\": \"slack\",\n      \"bot_token\": \"\",\n      \"enable\": false,\n      \"port\": 2288,\n      \"signing_secret\": \"\"\n    }\n  ],\n  \"quote-origin\": false,\n  \"track-function-calls\": true\n}\n```\n\n\nprovider.json\n```\n{\n  \"dashscope-app-api\": {\n    \"agent\": {\n      \"app-id\": \"Your_app_id\",\n      \"references_quote\": \"参考资料来自:\"\n    },\n    \"api-key\": \"sk-1234567890\",\n    \"app-type\": \"agent\",\n    \"workflow\": {\n      \"app-id\": \"Your_app_id\",\n      \"biz_params\": {\n        \"city\": \"北京\",\n        \"date\": \"2023-08-10\"\n      },\n      \"references_quote\": \"参考资料来自:\"\n    }\n  },\n  \"dify-service-api\": {\n    \"agent\": {\n      \"api-key\": \"app-1234567890\",\n      \"timeout\": 120\n    },\n    \"app-type\": \"chat\",\n    \"base-url\": \"http://dify-service-host-ip/v1\",\n    \"chat\": {\n      \"api-key\": \"app-1234567890\",\n      \"timeout\": 120\n    },\n    \"options\": {\n      \"convert-thinking-tips\": \"remove\"\n    },\n    \"workflow\": {\n      \"api-key\": \"app-1234567890\",\n      \"output-key\": \"summary\",\n      \"timeout\": 120\n    }\n  },\n  \"enable-chat\": true,\n  \"enable-vision\": true,\n  \"keys\": {\n    \"anthropic\": [\n      \"sk-1234567890\"\n    ],\n    \"bailian\": [\n      \"sk-xxxxxxx\"\n    ],\n    \"deepseek\": [\n      \"sk-1234567890\"\n    ],\n    \"gitee\": [],\n    \"gitee-ai\": [\n      \"XXXXX\"\n    ],\n    \"modelscope\": [\n      \"xxxxxxxx\"\n    ],\n    \"moonshot\": [\n      \"sk-1234567890\"\n    ],\n    \"openai\": [\n      \"sk-1234567890\"\n    ],\n    \"siliconflow\": [\n      \"xxxxxxx\"\n    ],\n    \"volcark\": [\n      \"xxxxxxxx\"\n    ],\n    \"xai\": [\n      \"xai-1234567890\"\n    ],\n    \"zhipuai\": [\n      \"xxxxxxx\"\n    ]\n  },\n  \"mcp\": {\n    \"servers\": []\n  },\n  \"model\": \"gpt-4o\",\n  \"prompt\": {\n    \"default\": \"You are a helpful assistant.\"\n  },\n  \"prompt-mode\": \"normal\",\n  \"requester\": {\n    \"anthropic-messages\": {\n      \"args\": {\n        \"max_tokens\": 1024\n      },\n      \"base-url\": \"https://api.anthropic.com\",\n      \"timeout\": 120\n    },\n    \"bailian-chat-completions\": {\n      \"args\": {},\n      \"base-url\": \"https://dashscope.aliyuncs.com/compatible-mode/v1\",\n      \"timeout\": 120\n    },\n    \"deepseek-chat-completions\": {\n      \"args\": {},\n      \"base-url\": \"https://api.deepseek.com\",\n      \"timeout\": 120\n    },\n    \"gitee-ai-chat-completions\": {\n      \"args\": {},\n      \"base-url\": \"https://ai.gitee.com/v1\",\n      \"timeout\": 120\n    },\n    \"lmstudio-chat-completions\": {\n      \"args\": {},\n      \"base-url\": \"http://127.0.0.1:1234/v1\",\n      \"timeout\": 120\n    },\n    \"modelscope-chat-completions\": {\n      \"args\": {},\n      \"base-url\": \"https://api-inference.modelscope.cn/v1\",\n      \"timeout\": 120\n    },\n    \"moonshot-chat-completions\": {\n      \"args\": {},\n      \"base-url\": \"https://api.moonshot.cn/v1\",\n      \"timeout\": 120\n    },\n    \"ollama-chat\": {\n      \"args\": {},\n      \"base-url\": \"http://127.0.0.1:11434\",\n      \"timeout\": 600\n    },\n    \"openai-chat-completions\": {\n      \"args\": {},\n      \"base-url\": \"https://api.openai.com/v1\",\n      \"timeout\": 120\n    },\n    \"siliconflow-chat-completions\": {\n      \"args\": {},\n      \"base-url\": \"https://api.siliconflow.cn/v1\",\n      \"timeout\": 120\n    },\n    \"volcark-chat-completions\": {\n      \"args\": {},\n      \"base-url\": \"https://ark.cn-beijing.volces.com/api/v3\",\n      \"timeout\": 120\n    },\n    \"xai-chat-completions\": {\n      \"args\": {},\n      \"base-url\": \"https://api.x.ai/v1\",\n      \"timeout\": 120\n    },\n    \"zhipuai-chat-completions\": {\n      \"args\": {},\n      \"base-url\": \"https://open.bigmodel.cn/api/paas/v4\",\n      \"timeout\": 120\n    }\n  },\n  \"runner\": \"dify-service-api\"\n}\n```\n\n### 启用的插件\n\n无",
      "state": "closed",
      "author": "Zerorigin",
      "author_type": "User",
      "created_at": "2025-04-17T08:59:56Z",
      "updated_at": "2025-04-23T08:56:44Z",
      "closed_at": "2025-04-23T08:55:53Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 14,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1312/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1312",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1312",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:48.615413",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "workflow 里的输入参数可以参考 https://docs.langbot.app/config/function/provider#%E8%AF%B7%E6%B1%82%E5%8F%98%E9%87%8F\n\n提供一下这些信息：\n\n- dify 版本\n- dify 上应用的 dsl\n- langbot 控制台输出",
          "created_at": "2025-04-19T14:10:12Z"
        },
        {
          "author": "Zerorigin",
          "body": "> workflow 里的输入参数可以参考 https://docs.langbot.app/config/function/provider#%E8%AF%B7%E6%B1%82%E5%8F%98%E9%87%8F\n> \n> 提供一下这些信息：\n> \n> - dify 版本\n> - dify 上应用的 dsl\n> - langbot 控制台输出\n\n可以，下周回公司开工后，我会提供这些信息给你。",
          "created_at": "2025-04-20T03:33:45Z"
        },
        {
          "author": "Zerorigin",
          "body": "> workflow 里的输入参数可以参考 https://docs.langbot.app/config/function/provider#%E8%AF%B7%E6%B1%82%E5%8F%98%E9%87%8F\n> \n> 提供一下这些信息：\n> \n> * dify 版本\n> * dify 上应用的 dsl\n> * langbot 控制台输出\n\ndify version: 0.15.3\n\napp dsl:\n```\napp:\n  description: LangBot Agent Test.\n  icon: 🤖\n  icon_background: '#FFEAD5'\n  mode: ag",
          "created_at": "2025-04-21T01:04:39Z"
        },
        {
          "author": "RockChinQ",
          "body": "这个应该是由于你使用的是 lm studio 或者 ollama 等本地模型供应商，他们会把思维链的内容直接包含到正文中，而dify并不会自动移除。  \n这种情况可以用 langbot 插件 https://github.com/kanhuiji100/DeepSeekR1nothink 来自动移除 <think>...</think> 的内容。",
          "created_at": "2025-04-23T05:48:58Z"
        },
        {
          "author": "Zerorigin",
          "body": "> 这个应该是由于你使用的是 lm studio 或者 ollama 等本地模型供应商，他们会把思维链的内容直接包含到正文中，而dify并不会自动移除。 这种情况可以用 langbot 插件 https://github.com/kanhuiji100/DeepSeekR1nothink 来自动移除 ... 的内容。\n\n![Image](https://github.com/user-attachments/assets/6520f067-def3-4bd8-85e7-4e6dab4cb6fd)\n\n![Image](https://github.com/user-attachments/ass",
          "created_at": "2025-04-23T08:03:41Z"
        }
      ]
    },
    {
      "issue_number": 1133,
      "title": "[Bug]: 飞书发送空消息给模型报错",
      "body": "### 消息平台适配器\n\nlark（飞书）\n\n### 运行环境\n\nDocker\n\n### 异常情况\n\n飞书 at 机器人没有打字，或者发送非文本信息比如图片，会发送空消息给模型，就报错了\n\n![Image](https://github.com/user-attachments/assets/b0cb2c06-4918-4f7a-b81f-54d4143a1a7c)\n\n### 复现步骤\n\n飞书 at 机器人没有打字，或者发送非文本信息比如图片\n\n### 启用的插件\n\n_No response_",
      "state": "open",
      "author": "AntSworD",
      "author_type": "User",
      "created_at": "2025-02-26T09:47:53Z",
      "updated_at": "2025-04-21T02:43:01Z",
      "closed_at": null,
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1133/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "4.0",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1133",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1133",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:48.926112",
      "comments": [
        {
          "author": "sanxianxiaohuntun",
          "body": "补充，模型回复空消息也会报错，我得处理方法是检测到空消息后　给个这个字符解决",
          "created_at": "2025-04-03T23:10:17Z"
        },
        {
          "author": "RockChinQ",
          "body": "什么模型？",
          "created_at": "2025-04-20T06:08:14Z"
        },
        {
          "author": "AntSworD",
          "body": "> 什么模型？\n\ndeepseek",
          "created_at": "2025-04-21T02:43:00Z"
        }
      ]
    },
    {
      "issue_number": 1316,
      "title": "[Bug]: Dify+钉钉机器人 Error:'EchoTextHandler' object has no attribute 'logger'",
      "body": "### 运行环境\n\nLangBot :v3.4.13.1 Dify：1.1.3\n\n### 异常情况\n\n发现报错：controller.py (189) - [ERROR] : 处理请求时出错 query_id=0 stage=SendResponseBackStage : 'EchoTextHandler' object has no attribute 'logger'\n\n![Image](https://github.com/user-attachments/assets/d55ed4b9-ea5c-4612-a227-bfbfe956899e)\n![Image](https://github.com/user-attachments/assets/6c89aeaf-515a-448b-9665-3402a70a5fa1)\n\n这个报错信息，从LangBot日志看到：钉钉发送信息给LangBot接收正常，LangBot发送给Dify时，有时成功，有有时会失败。\n日志显示有钉钉信息接收后弹出ERROR故障，也有Dify的回答在LangBot中接收成功后发生ERROR。\n\n### 复现步骤\n\nprovider.json\n    \"runner\": \"dify-service-api\",\n    \"dify-service-api\": {\n        \"base-url\": \"https://dify.sleemon.cn/v1\",\n        \"app-type\": \"agent\",\n        \"options\": {\n            \"convert-thinking-tips\": \"plain\"\n        },\n        \"chat\": {\n            \"api-key\": \"app-1234567890\",\n            \"timeout\": 120\n        },\n        \"agent\": {\n            \"api-key\": \"app-VzmtQyrrYFbmDMCd15u0XkqY\",\n            \"timeout\": 120\n        },\n        \"workflow\": {\n            \"api-key\": \"app-ZzInyomuQ9gOm7AhWY0AZnLZ\",\n            \"output-key\": \"summary\",\n            \"timeout\": 120\n        }\n\n\nplatform.json：\n        {\n            \"adapter\": \"dingtalk\",\n            \"enable\": true,\n            \"client_id\": \"dingpalswcvwhmb5n94i\",\n            \"client_secret\": \"yT9wTNx19ILVxG43PEKN0f2NNDhks4uqSuvpVws899ELNUkEAj6LNEedfHLDB9or\",\n            \"robot_code\": \"dingpalswcvwhmb5n94i\",\n            \"robot_name\": \"robot_bbs\",\n            \"markdown_card\": true\n        },\n\n[钉钉聊天Agent.yml.txt](https://github.com/user-attachments/files/19821627/Agent.yml.txt)\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "yang091215",
      "author_type": "User",
      "created_at": "2025-04-19T15:01:23Z",
      "updated_at": "2025-04-20T13:39:05Z",
      "closed_at": "2025-04-20T05:17:48Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1316/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1316",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1316",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:49.149693",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "我们这边实在没法复现啊，也查了一下代码，没有找到可能会导致这个异常的代码。如果下次再发生这个问题，可以设置环境变量`DEBUG=true`来开启调试输出，查看日志里详细的报错 traceback。",
          "created_at": "2025-04-20T05:17:48Z"
        },
        {
          "author": "yang091215",
          "body": "如果你们没有发现和复现，我认为可能是负载均衡上的301跳转产生的问题。",
          "created_at": "2025-04-20T13:39:03Z"
        }
      ]
    },
    {
      "issue_number": 1171,
      "title": "[Bug]: 有些插件触发不稳定",
      "body": "### 消息平台适配器\n\ngewechat（个人微信）\n\n### 运行环境\n\nDocker\n\n### 异常情况\n\n最近尝试在mac 部署langbot后，接入DeepSeek，使用天气插件发现会调用失败，或者干脆不调用，之前只稳定工作了几天。\n\n### 复现步骤\n\n在m2 mac mini上利用docker部署，并连接个人微信，之后安装天气插件，发现无法触发，安装基础的示例插件，hello，可以正常触发。在ChatWeather中初始化应用加入print确认该插件被正常加载。\n\n### 启用的插件\n\nChatWeather， Hello",
      "state": "closed",
      "author": "m14815",
      "author_type": "User",
      "created_at": "2025-03-06T14:56:08Z",
      "updated_at": "2025-04-20T06:02:06Z",
      "closed_at": "2025-04-20T06:02:05Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1171/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1171",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1171",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:49.383157",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "可以找插件作者一起调查一下，我这边没有条件复现～",
          "created_at": "2025-04-20T06:02:05Z"
        }
      ]
    },
    {
      "issue_number": 1318,
      "title": "[Bug]: [04-20 01:04:17.753] controller.py (189) - [ERROR] : 处理请求时出错 query_id=0 stage=PreProcessor : 无法确定模型 ollama/deepseek-r1:7b-qwen-distill-q4_K_M 的信息，请在元数据中配置",
      "body": "### 运行环境\n\nwin10\n\n### 异常情况\n\n[04-20 01:04:17.753] controller.py (189) - [ERROR] : 处理请求时出错 query_id=0 stage=PreProcessor : 无法确定模型 ollama/deepseek-r1:7b-qwen-distill-q4_K_M 的信息，请在元数据中配置\n\n### 复现步骤\n\n这个不是很清楚\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "zichen2077",
      "author_type": "User",
      "created_at": "2025-04-19T17:07:25Z",
      "updated_at": "2025-04-20T03:17:09Z",
      "closed_at": "2025-04-20T03:17:07Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1318/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1318",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1318",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:49.550900",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "看这个 https://docs.langbot.app/config/metadata/llm-models.html",
          "created_at": "2025-04-20T03:17:07Z"
        }
      ]
    },
    {
      "issue_number": 1287,
      "title": "[Bug]: dify-agent在钉钉中无回复",
      "body": "### 消息平台适配器\n\n其他（或暂未使用）\n\n### 运行环境\n\nv3.4.13、win11、docker、Python 3.13.2\n\n### 异常情况\n\ndify-agent在钉钉中无回复或回复不全\n\n![Image](https://github.com/user-attachments/assets/ba8dae4b-2d49-4d3f-80bc-a1140a247ff9)\n![Image](https://github.com/user-attachments/assets/39ff98cb-72c0-41d4-ab66-8f8d8a238a3c)\n![Image](https://github.com/user-attachments/assets/d72b9041-52f0-4970-ab75-6a500cd2424e)\n\n### 复现步骤\n\n配置好钉钉机器人，以及修改好项目对应的dify-agent参数，向钉钉机器人提问\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "tianqi888",
      "author_type": "User",
      "created_at": "2025-04-11T02:25:18Z",
      "updated_at": "2025-04-19T14:20:36Z",
      "closed_at": "2025-04-19T14:20:36Z",
      "labels": [
        "bug?",
        "Invalid"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 9,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1287/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "4.0",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1287",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1287",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:49.726880",
      "comments": [
        {
          "author": "tianqi888",
          "body": "provider.json\n``` json\n{\n  \"dashscope-app-api\": {\n    \"agent\": {\n      \"app-id\": \"Your_app_id\",\n      \"references_quote\": \"参考资料来自:\"\n    },\n    \"api-key\": \"sk-1234567890\",\n    \"app-type\": \"agent\",\n    \"workflow\": {\n      \"app-id\": \"Your_app_id\",\n      \"biz_params\": {\n        \"city\": \"北京\",\n        \"da",
          "created_at": "2025-04-11T03:03:26Z"
        },
        {
          "author": "wangcham",
          "body": "可以发一下platform.json里的钉钉配置项吗",
          "created_at": "2025-04-11T04:26:51Z"
        },
        {
          "author": "tianqi888",
          "body": "@wangcham 这里\n```json\n\n{\n  \"at-sender\": false,\n  \"force-delay\": {\n    \"max\": 0,\n    \"min\": 0\n  },\n  \"hide-exception-info\": true,\n  \"long-text-process\": {\n    \"font-path\": \"\",\n    \"strategy\": \"forward\",\n    \"threshold\": 2560\n  },\n  \"platform-adapters\": [\n    {\n      \"adapter\": \"nakuru\",\n      \"enable\"",
          "created_at": "2025-04-11T08:45:05Z"
        },
        {
          "author": "RockChinQ",
          "body": "麻烦粘贴一下你的dify应用的dsl\n\n<img width=\"316\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/18e675b3-03b8-4b44-a6b8-8e8a8a586a50\" />",
          "created_at": "2025-04-11T09:07:01Z"
        },
        {
          "author": "tianqi888",
          "body": " @RockChinQ  这里\n```yml\napp:\n  description: ''\n  icon: copyright\n  icon_background: '#E4FBCC'\n  mode: agent-chat\n  name: 助手\n  use_icon_as_answer_icon: false\ndependencies:\n- current_identifier: null\n  type: marketplace\n  value:\n    marketplace_plugin_unique_identifier: langgenius/ollama:0.0.3@9ded90ac",
          "created_at": "2025-04-11T09:18:46Z"
        }
      ]
    },
    {
      "issue_number": 1305,
      "title": "[Bug]:",
      "body": "没问题了",
      "state": "closed",
      "author": "lschuangye",
      "author_type": "User",
      "created_at": "2025-04-16T06:16:49Z",
      "updated_at": "2025-04-18T05:25:57Z",
      "closed_at": "2025-04-18T05:25:57Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1305/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1305",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1305",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:49.927442",
      "comments": []
    },
    {
      "issue_number": 1310,
      "title": "[Plugin]: 请求登记新插件 桌宠插件",
      "body": "### 插件名称\n\n桌宠插件\n\n### 插件代码库地址\n\nhttps://github.com/sanxianxiaohuntun/Wife_Image\n\n### 插件简介\n\n拥有tts和langbot互动的桌宠（后续会新增功能）",
      "state": "closed",
      "author": "sanxianxiaohuntun",
      "author_type": "User",
      "created_at": "2025-04-17T05:36:30Z",
      "updated_at": "2025-04-17T11:33:31Z",
      "closed_at": "2025-04-17T11:33:30Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1310/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1310",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1310",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:49.929524",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献喵",
          "created_at": "2025-04-17T11:33:30Z"
        }
      ]
    },
    {
      "issue_number": 1309,
      "title": "[Bug]: Dify配置无效？",
      "body": "### 运行环境\n\nDocker，3.4.14\n\n### 异常情况\n\n运行日志里没任何信息，docker重启过了。Dify那边显示是key没使用过\n```\n[04-17 03:21:57.102] process.py (42) - [INFO] : 处理 person_1283900923 的请求(3): 你好\n[04-17 03:26:34.619] process.py (42) - [INFO] : 处理 person_1283900923 的请求(4): 你好\n````\n\n\n### 复现步骤\n\n\n配置文件里是这么写的，是官方服务器，key是后台新加的\n```\n  \"dify-service-api\": {\n    \"agent\": {\n      \"api-key\": \"app-************\",\n      \"timeout\": 120\n    },\n    \"app-type\": \"chat\",\n    \"base-url\": \"https://api.dify.ai/v1\",\n    \"chat\": {\n      \"api-key\": \"app-************\",\n      \"timeout\": 120\n    },\n    \"options\": {\n      \"convert-thinking-tips\": \"plain\"\n    },\n    \"workflow\": {\n      \"api-key\": \"app-************\",\n      \"output-key\": \"summary\",\n      \"timeout\": 120\n    }\n  },\n  \"enable-chat\": true,\n  \"runner\": \"dify-service-api\"\n```\n\n\n\n### 启用的插件\n\n全新安装",
      "state": "closed",
      "author": "k99k5",
      "author_type": "User",
      "created_at": "2025-04-17T03:41:11Z",
      "updated_at": "2025-04-17T04:00:55Z",
      "closed_at": "2025-04-17T04:00:54Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1309/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1309",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1309",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:50.136167",
      "comments": [
        {
          "author": "k99k5",
          "body": "中间插件bug",
          "created_at": "2025-04-17T04:00:55Z"
        }
      ]
    },
    {
      "issue_number": 1306,
      "title": "[Plugin]: 请求登记新插件 fakepic_plugin（伪造聊天记录整蛊群友）",
      "body": "### 插件名称\n\nfakepic_plugin（伪造聊天记录整蛊群友）\n\n### 插件代码库地址\n\nhttps://github.com/sanxianxiaohuntun/fakepic_plugin\n\n### 插件简介\n\n这个插件可以帮助你伪造QQ聊天记录的截图，可用于整蛊朋友或制作有趣的聊天场景。\n\n",
      "state": "closed",
      "author": "sanxianxiaohuntun",
      "author_type": "User",
      "created_at": "2025-04-16T06:50:29Z",
      "updated_at": "2025-04-16T07:37:16Z",
      "closed_at": "2025-04-16T07:37:15Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1306/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1306",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1306",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:50.366721",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2025-04-16T07:37:15Z"
        }
      ]
    },
    {
      "issue_number": 1132,
      "title": "[Feature]: 请求支持微信对话开放平台",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n[官网首页](https://developers.weixin.qq.com/doc/aispeech/platform/INTRODUCTION.html)\n[机器人回复接口调用](https://developers.weixin.qq.com/doc/aispeech/platform/dialog/skill-reply.html)\n[具体的接口文档](https://developers.weixin.qq.com/doc/aispeech/confapi/thirdapi/thirdapi.html)\n回调跟微信公众号很相似，验签稍微有点不同，请求的body字段也不一样，为json格式，具体请看接口文档\n\n\n**body**\n```golang\ntype XwBrainThirdApiReqInfo struct {\n  RequestId    string\n  SessionId    string\n  Query        string\n  SkillName    string\n  IntentName   string\n  Slots        []*MatchSlotInfo\n  Timestamp    int64\n  Signature    string\n  ThirdApiId   uint64\n  ThirdApiName string\n  UserId       string\n}\n\ntype MatchSlotInfo struct {\n  SlotName       string\n  SlotValue      string\n  NormalizeValue string\n}\n```\n\n**json 示例：**\n```json\n{\n  \"RequestId\": \"123123456456789789123456789\",\n  \"SessionId\": \"12345678901234567_12345678909876543\",\n  \"Query\": \"北京限行尾号是多少\",\n  \"SkillName\": \"限行\",\n  \"IntentName\": \"查限行尾号\",\n  \"Slots\": [\n    {\n      \"SlotName\": \"from_loc\",\n      \"SlotValue\": \"北京\",\n      \"NormalizeValue\": \"{\\\"type\\\":\\\"LOC_CHINA_CITY\\\",\\\"city\\\":\\\"北京市\\\",\\\"city_simple\\\":\\\"北京\\\",\\\"loc_ori\\\":\\\"北京\\\"}\"\n    }\n  ],\n  \"Timestamp\": 1704135845,\n  \"Signature\": \"96f439043e1f7d2bb38162e35406f173\",\n  \"ThirdApiId\": 1234,\n  \"ThirdApiName\": \"车辆限行\",\n  \"UserId\": \"97f7e892\"\n}\n```",
      "state": "closed",
      "author": "jcvv0n",
      "author_type": "User",
      "created_at": "2025-02-26T09:12:00Z",
      "updated_at": "2025-04-16T07:02:02Z",
      "closed_at": "2025-04-16T07:02:02Z",
      "labels": [
        "eh: Feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1132/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1132",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1132",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:50.542477",
      "comments": [
        {
          "author": "jcvv0n",
          "body": "### 补充\n\n**接口2秒超时，调用大模型肯定不可能同步回复消息，需要支持异步调用客服消息推送接口**\n**同理，如果能支持，微信公众号也可以加上异步回复**\n![Image](https://github.com/user-attachments/assets/ec39e893-20e5-4b73-8bb1-464f91bc4d0a)",
          "created_at": "2025-02-26T09:49:10Z"
        },
        {
          "author": "wangcham",
          "body": "有空会支持这个功能，但是微信公众号和对话平台的客服消息需要企业认证之类的资格证书才能调用客服消息api，如果您有进一步的需求，请加入社区群找管理员You too.详细聊聊。",
          "created_at": "2025-02-26T12:24:12Z"
        },
        {
          "author": "jcvv0n",
          "body": "> 有空会支持这个功能，但是微信公众号和对话平台的客服消息需要企业认证之类的资格证书才能调用客服消息api，如果您有进一步的需求，请加入社区群找管理员You too.详细聊聊。\n\n好的，谢谢",
          "created_at": "2025-02-26T12:29:19Z"
        }
      ]
    },
    {
      "issue_number": 961,
      "title": "[Bug]: full-scenario切换预设失效",
      "body": "### 消息平台适配器\n\n其他\n\n### 运行环境\n\ndocker\n\n### LangBot 版本\n\nnapcat\n\n### 异常情况\n\n重建升级容器后使用命令切换预设失效,没切换过来\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "xingyu42",
      "author_type": "User",
      "created_at": "2024-12-21T15:26:43Z",
      "updated_at": "2025-04-16T02:14:51Z",
      "closed_at": "2025-04-16T02:14:49Z",
      "labels": [
        "bug?",
        "Please take it seriously"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/961/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/961",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/961",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:50.778846",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "截图？控制台输出？",
          "created_at": "2024-12-22T02:19:13Z"
        },
        {
          "author": "xingyu42",
          "body": "> 截图？控制台输出？\r\n\r\n![image](https://github.com/user-attachments/assets/a3aa3fb1-163b-45dc-9c27-3aa7d675732d)\r\n没有什么报错的,模型是gemini-2.0-flash-exp",
          "created_at": "2024-12-22T05:41:28Z"
        },
        {
          "author": "RockChinQ",
          "body": "把你能提供的所有信息都贴上来。各个配置文件信息。",
          "created_at": "2024-12-23T13:35:43Z"
        },
        {
          "author": "xingyu42",
          "body": "> 把你能提供的所有信息都贴上来。各个配置文件信息。\r\n\r\n[config.zip](https://github.com/user-attachments/files/18230685/config.zip)\r\n[metadata.zip](https://github.com/user-attachments/files/18230686/metadata.zip)\r\n",
          "created_at": "2024-12-23T15:03:14Z"
        },
        {
          "author": "sanxianxiaohuntun",
          "body": "这个是gemini的bug！有段时间无法使用预设！也就是system的角色！",
          "created_at": "2025-04-16T02:13:09Z"
        }
      ]
    },
    {
      "issue_number": 1301,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nChunithmUtil\n\n### 插件代码库地址\n\nhttps://github.com/AmethystTim/ChunithmUtil\n\n### 插件简介\n\n<h1 align=\"center\">ChunithmUtil</h1>\n\n<h4 align=\"center\">集成了多项Chunithm实用功能的LangBot插件</h4>\n\n## 介绍🤔\n\n《CHUNITHM》是一款由SEGA开发的街机音乐游戏。其主要玩法为配合音乐节奏，通过触碰键盘或抬手以进行相应操作。CHUNITHM于2015年7月16日在日本开始运营。游戏内置多首乐曲并配有不同难度的谱面供玩家游玩。\n\n> 引自萌娘百科，阅读更多：[https://zh.moegirl.org.cn/CHUNITHM](https://zh.moegirl.org.cn/CHUNITHM)\n\n本插件旨在降低游玩Chunithm的门槛，为玩家提供多项Chunithm相关的实用功能，以更好地提升自身游玩技术。\n\n## 特性✨\n\n- ✅：已实现\n- 🚧：开发中\n- ❌：未实现\n\n|功能|描述|实现|\n|---|---|---|\n|模糊搜索|根据别名匹配曲目|✅|\n|精准搜索|根据cid匹配曲目|✅|\n|添加别名|为曲目添加别名|✅|\n|容错计算|计算曲目达成鸟/鸟加的容错|✅|\n|谱面查询|获取曲目预览谱面|✅|\n|随机歌曲|随机获取一首曲目|✅|\n|定数列表|获取指定定数的所有曲目|✅|\n|曲师查询|获取指定曲师的所有曲目|✅|\n|谱师查询|获取指定谱师的所有曲目|✅|\n|自动更新|自动获取新版本曲目信息|🚧|\n|段位曲目|获取指定段位的曲目列表|❌|\n\n## 使用说明📖\n\n### 获取数据\n\n插件安装完成后，需要获取歌曲**元数据**和谱面ID-歌曲的**映射表**，所有指令需要在`ChunithmUtil`插件目录下执行\n\n```python\npython utils/songmeta.py    # 获取歌曲元数据\npython utils/mapping.py     # 获取谱面ID-歌曲的映射表\n```\n\n> 新版本更新后，重新运行指令以获取新曲数据\n\n## 指令🤖\n\n|指令|描述|参数|\n|---|---|---|\n|[歌名]是什么歌|模糊搜索歌曲|歌名|\n|chu查歌[歌名]|精准搜索cid对应歌曲|歌名/cid|\n|chu随机一曲|随机获取一首曲目|-|\n|alias [cid] [别名1,别名2,…]|为曲目添加别名|cid, 别名1, 别名2, …|\n|别名[cid]|查询歌曲别名|cid|\n|chuchart [歌曲id/别名] [难度]|获取指定曲目谱面预览|歌曲id/别名, 难度(exp/mas/ult)|\n|chu lv [定数]|获取指定定数的所有曲目|难度定数|\n|chu容错 [cid/别名] [难度]|计算指定曲目达成鸟/鸟加的容错|cid/别名, 难度(exp/mas/ult)|\n|chu曲师 [曲师名]|获取指定曲师的所有曲目|曲师名|\n|chu谱师 [谱师名]|获取指定谱师的所有曲目|谱师名|\n\n\n## 数据源\n\n- 歌曲元数据：[data.json](https://dp4p6x0xfi5o9.cloudfront.net/chunithm/data.json)\n- Chunithm谱面保管室：[https://sdvx.in/chunithm.html](https://sdvx.in/chunithm.html)",
      "state": "closed",
      "author": "AmethystTim",
      "author_type": "User",
      "created_at": "2025-04-15T03:57:19Z",
      "updated_at": "2025-04-15T06:12:36Z",
      "closed_at": "2025-04-15T06:12:35Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1301/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1301",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1301",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:51.026397",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2025-04-15T06:12:35Z"
        }
      ]
    },
    {
      "issue_number": 1040,
      "title": "[Bug]: kimi调用tool call需要传递tool_call_id",
      "body": "### 消息平台适配器\n\n其他（或暂未使用）\n\n### 运行环境\n\nv3.4.4.1 winserver2022 x86 3.10 大陆 3.10.9\n\n### 异常情况\n\n[WebwlkrPlugin](https://github.com/RockChinQ/WebwlkrPlugin)这个插件会报错`controller.py (98) - [ERROR] : 模型请求失败: 请求参数错误: Error code: 400 - {'error': {'message': 'Invalid request: tool_call_id  is not found', 'type': 'invalid_request_error'}}`\n用的是kimi的模型，需要传递tool_call_id参数，请问如何提取值并传递该参数？\n\n### 复现步骤\n\n把上述插件装上去然后告诉模型随便问一个能触发调用模型的就行\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "SkyFutu",
      "author_type": "User",
      "created_at": "2025-02-08T13:55:41Z",
      "updated_at": "2025-04-14T12:17:12Z",
      "closed_at": "2025-04-14T12:17:12Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1040/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1040",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1040",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:51.209524",
      "comments": [
        {
          "author": "SkyFutu",
          "body": "发现这个问题是由于另一个尚未完成的插件，只不过我借鉴了下大佬写的联网插件awa，报错都一样的",
          "created_at": "2025-02-08T14:03:05Z"
        }
      ]
    },
    {
      "issue_number": 990,
      "title": "[Bug]: DeepSeek R1官方API没有思维链",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\nv3.4.3.2,winserver2016.python 3.1.2,本地\n\n### 异常情况\n\nAPI是官方的deepseek-reasoner，回答内容没有思维链字段\n\n![Image](https://github.com/user-attachments/assets/db3631c1-fecb-4083-a75e-9bfb95d49f59)\n\n![Image](https://github.com/user-attachments/assets/100e473e-8360-4b6e-86d6-ad394b320dd1)\n\n\n### 复现步骤\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "WineTer",
      "author_type": "User",
      "created_at": "2025-01-29T13:34:56Z",
      "updated_at": "2025-04-14T07:05:54Z",
      "closed_at": "2025-04-14T07:05:54Z",
      "labels": [
        "bug?",
        "m: Provider"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/990/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/990",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/990",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:51.360512",
      "comments": []
    },
    {
      "issue_number": 1100,
      "title": "[Bug]: 飞书 首条消息回复前，再次发送消息导致重复回答",
      "body": "### 消息平台适配器\n\nlark（飞书）\n\n### 运行环境\n\nDocker\n\n### 异常情况\n\n国际版飞书(Webhook 模式)+阿里百炼接口+deepseek-chat模型\n\n每次测试都会发生，在与机器人的私聊窗口中，前一条消息还未回复时，再次发送一条消息，会导致第二条消息被回答三遍\n\n```\nlangbot  | [2025-02-19 02:09:47 +0000] [1] [INFO] 3.225.193.57:57142 POST /lark/callback 1.1 200 28 257684\nlangbot  | [02-19 02:09:47.481] process.py (42) - [INFO] : 处理 person_ou_355b49562f313ae1a25beec6fc668cd1 的请求(0): 你好\nlangbot  | [02-19 02:10:04.163] chat.py (80) - [INFO] : 对话(0)响应: assistant: 你好！有什么可以帮...\nlangbot  | [2025-02-19 02:10:09 +0000] [1] [INFO] 34.196.227.34:47216 POST /lark/callback 1.1 200 28 8663\nlangbot  | [2025-02-19 02:10:09 +0000] [1] [INFO] 3.225.193.57:64940 POST /lark/callback 1.1 200 28 217981\nlangbot  | [02-19 02:10:15.281] process.py (42) - [INFO] : 处理 person_ou_355b49562f313ae1a25beec6fc668cd1 的请求(1): hi\nlangbot  | [02-19 02:10:40.350] chat.py (80) - [INFO] : 对话(1)响应: assistant: 你好！有什么需要帮...\nlangbot  | [02-19 02:10:47.577] process.py (42) - [INFO] : 处理 person_ou_355b49562f313ae1a25beec6fc668cd1 的请求(2): hi\nlangbot  | [02-19 02:11:15.968] chat.py (80) - [INFO] : 对话(2)响应: assistant: 你好！有什么需要帮...\nlangbot  | [2025-02-19 02:12:53 +0000] [1] [INFO] 34.196.227.34:60366 POST /lark/callback 1.1 200 28 264003\nlangbot  | [02-19 02:12:53.865] process.py (42) - [INFO] : 处理 person_ou_355b49562f313ae1a25beec6fc668cd1 的请求(3): hi\nlangbot  | [02-19 02:13:20.688] chat.py (80) - [INFO] : 对话(3)响应: assistant: 你好！有什么需要帮...\n```\n\n### 复现步骤\n\n在与机器人的私聊窗口中，前一条消息还未回复时，再次发送一条消息\n\nplatform.json\n```\n{\n    \"platform-adapters\": [\n...\n            \"adapter\": \"wecom\",\n            \"contacts_secret\": \"\",\n            \"corpid\": \"\",\n            \"enable\": false,\n            \"host\": \"0.0.0.0\",\n            \"port\": 2290,\n            \"secret\": \"\",\n            \"token\": \"\"\n        },\n        {\n            \"adapter\": \"lark\",\n            \"app_id\": \"cli_abcd\",\n            \"app_secret\": \"abcd\",\n            \"bot_name\": \"Deepseek\",\n            \"enable\": true,\n            \"enable-webhook\": true,\n            \"encrypt-key\": \"abcd\",\n            \"port\": 2285\n        },\n        {\n            \"adapter\": \"discord\",\n            \"client_id\": \"1234567890\",\n            \"enable\": false,\n...\n}\n\n```\nprovider.json\n\n```\n{\n...\n\"bailian-chat-completions\": {\n            \"args\": {},\n            \"base-url\": \"https://dashscope.aliyuncs.com/compatible-mode/v1\",\n            \"timeout\": 120\n        }\n    },\n    \"model\": \"deepseek-chat\",\n    \"prompt-mode\": \"normal\",\n    \"prompt\": {\n        \"default\": \"\"\n    },\n...\n\"dashscope-app-api\": {\n        \"app-type\": \"agent\",\n        \"api-key\": \"sk-abcd\",\n        \"agent\": {\n            \"app-id\": \"abcd\",\n            \"references_quote\": \"参考资料来自:\"\n        },\n        \"workflow\": {\n            \"app-id\": \"abcd\",\n            \"references_quote\": \"参考资料来自:\",\n            \"biz_params\": {\n                \"city\": \"北京\",\n                \"date\": \"2023-08-10\"\n            }\n        }\n    }\n}\n```\n\n\n### 启用的插件\n\n未启用任何插件",
      "state": "closed",
      "author": "mouyuemoyu",
      "author_type": "User",
      "created_at": "2025-02-19T02:30:11Z",
      "updated_at": "2025-04-14T05:21:24Z",
      "closed_at": "2025-04-14T05:21:23Z",
      "labels": [
        "bug?",
        "good first issue"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1100/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1100",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1100",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:51.360537",
      "comments": [
        {
          "author": "wangcham",
          "body": "我们这里无法复现：\n\n<img width=\"807\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/817d83ae-63ff-4aab-8e6e-9e609bbde964\" />\n\n您可以再尝试一下，如果问题仍然存在，那么贴上完整的复现流程并且开一个新的issue。",
          "created_at": "2025-04-14T05:21:23Z"
        }
      ]
    },
    {
      "issue_number": 1202,
      "title": "[Bug]: Telegram部分群收不到消息",
      "body": "### 消息平台适配器\n\nTelegram\n\n### 运行环境\n\nDocker\n\n### 异常情况\n\nTelegram有的群组，bot无法收到消息，且已排除bot隐私设置或管理权限的问题。\n排查下来原因是Telegram有（至少）两种群，分别叫group和supergroup，而目前的适配器仅包含[对前者的判断](https://github.com/RockChinQ/LangBot/blob/22306cb4eae23cbbb6b097b67d5b013f09c7da75/pkg/platform/sources/telegram.py#L129)，导致後一种类的群消息丢失。\n\n### 复现步骤\n\n建一个群，并设置为public，拉bot进群，发消息，即可复现\n\n因为public群或人数较多的群会自动转为supergroup\n\n### 修复？\n\n将判断条件改为`in ['group', 'supergroup']`，问题得到解决，暂不清楚是否有其他需要一并修改的地方。\n另外建议这里也加下日志？之前因为看不到未处理消息的错误日志，一度以为是群设置或bot帐号问题导致消息没发过来...\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "phoulx",
      "author_type": "User",
      "created_at": "2025-03-17T12:58:49Z",
      "updated_at": "2025-04-13T10:48:39Z",
      "closed_at": "2025-04-13T10:48:39Z",
      "labels": [
        "bug?",
        "good first issue"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1202/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1202",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1202",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:51.557665",
      "comments": [
        {
          "author": "Tiande",
          "body": "修改后群组内也无法使用，私聊没问题",
          "created_at": "2025-04-10T10:25:59Z"
        }
      ]
    },
    {
      "issue_number": 1177,
      "title": "阿里云百炼模型请求失败，需开启stream模式",
      "body": "## 问题描述\n在调用阿里云百炼 qwq-plus-latest 和 qwq-32b 等模型时，系统提示需要开启stream模式。但未找到相关配置方法，请求协助解决。\n\n## 错误日志\n运行过程中出现以下错误（日志片段）：\n```python\n[03-09 06:40:55.527] process.py (42) - [INFO] : 处理 xxxxxxxxxx 的请求(0): hi\n[03-09 06:40:57.985] chat.py (94) - [ERROR] : 对话(0)请求失败: RequesterError 模型请求失败: 请求参数错误: Error code: 400 - {'error': {'code': 'invalid_parameter_error', 'param': None, 'message': 'This model only support stream mode, please enable the stream parameter to access the model. ', 'type': 'invalid_request_error'}, 'id': 'chatcmpl-c92c1670-fb3a-906d-8b33-6d84181695ce', 'request_id': 'c92c1670-fb3a-906d-8b33-6d84181695ce'}\n[03-09 06:40:59.768] controller.py (98) - [ERROR] : 模型请求失败: 请求参数错误: Error code: 400 - {'error': {'code': 'invalid_parameter_error', 'param': None, 'message': 'This model only support stream mode, please enable the stream parameter to access the model. ', 'type': 'invalid_request_error'}, 'id': 'chatcmpl-c92c1670-fb3a-906d-8b33-6d84181695ce', 'request_id': 'c92c1670-fb3a-906d-8b33-6d84181695ce'}\n",
      "state": "closed",
      "author": "ViaVxxx",
      "author_type": "User",
      "created_at": "2025-03-09T06:50:51Z",
      "updated_at": "2025-04-13T09:47:07Z",
      "closed_at": "2025-04-13T09:47:06Z",
      "labels": [
        "good first issue"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1177/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1177",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1177",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:51.723047",
      "comments": [
        {
          "author": "cnliucheng",
          "body": "“stream“:”true\"",
          "created_at": "2025-04-01T13:48:40Z"
        },
        {
          "author": "wangcham",
          "body": "您好，我这边尝试使用这两个模型，是可以正常使用的，可以提供完整的复现过程吗\n\n<img width=\"1011\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/04a5fda2-bd56-4563-9ed5-4757daf0d105\" />",
          "created_at": "2025-04-13T08:45:52Z"
        }
      ]
    },
    {
      "issue_number": 1281,
      "title": "企业微信一直提示回调不通过，该配的都配好了",
      "body": "![Image](https://github.com/user-attachments/assets/cc012fce-30e8-43b3-8e33-cfc72d5cbd86)",
      "state": "closed",
      "author": "yizhidiao",
      "author_type": "User",
      "created_at": "2025-04-07T15:18:23Z",
      "updated_at": "2025-04-11T09:05:15Z",
      "closed_at": "2025-04-11T09:05:15Z",
      "labels": [
        "Stale"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1281/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1281",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1281",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:51.884354",
      "comments": [
        {
          "author": "wangcham",
          "body": "按照文档走的流程吗？发一下data/logs/langbot-xxxx的日志",
          "created_at": "2025-04-07T15:47:31Z"
        },
        {
          "author": "yizhidiao",
          "body": "> 按照文档走的流程吗？发一下data/logs/langbot-xxxx的日志\n\n是的，日志里看不出啥\n\n![Image](https://github.com/user-attachments/assets/9bc39064-7c45-426a-8bbf-368080eae268)",
          "created_at": "2025-04-08T01:20:48Z"
        },
        {
          "author": "wangcham",
          "body": "你没有开企业微信的适配器，上面写着你开的另外两个aiocqhttp和slack的",
          "created_at": "2025-04-08T02:46:10Z"
        }
      ]
    },
    {
      "issue_number": 1288,
      "title": "[Bug]: 接入dify，报错：对话(0)请求失败: DifyAPIError 301",
      "body": "### 消息平台适配器\n\n其他（或暂未使用）\n\n### 运行环境\n\ndify:1.1.3 LangBot:v3.4.13\n\n### 异常情况\n\n[04-11 14:43:12.298] app.py (172) - [INFO] : =======================================[04-11 14:43:52.817] process.py (42) - [INFO] : 处理 person_$:LWCP_v1:$kmHpqyBEg+Z3xS3mhmsf6g== 的请求(0): who are you\n[04-11 14:43:52.917] chat.py (94) - [ERROR] : 对话(0)请求失败: DifyAPIError 301 <html>\n[04-11 14:43:53.070] controller.py (98) - [ERROR] : 301 <html>\n\nprovider.json\n{\n    \"dify-service-api\": {\n        \"agent\": {\n            \"api-key\": \"app-1234567890\",\n            \"timeout\": 120\n        },\n        \"app-type\": \"chat\",\n        \"base-url\": \"http://dify.xxx.com/v1\",\n        \"chat\": {\n            \"api-key\": \"app-gP4IK6daF85zX4VuVEXVhgjx\",\n            \"timeout\": 120\n        },\n        \"options\": {\n            \"convert-thinking-tips\": \"original\"\n        },\n        \"workflow\": {\n            \"api-key\": \"app-1234567890\",\n            \"output-key\": \"summary\",\n            \"timeout\": 120\n        }\n    },\n    \"runner\": \"dify-service-api\"\n}\n\n### 复现步骤\n\n![Image](https://github.com/user-attachments/assets/7250da9b-7d0a-4e78-a25f-d494ea7fa20b)\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "baiguangcheng",
      "author_type": "User",
      "created_at": "2025-04-11T07:20:09Z",
      "updated_at": "2025-04-11T09:04:28Z",
      "closed_at": "2025-04-11T09:04:27Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1288/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1288",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1288",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:52.050061",
      "comments": [
        {
          "author": "baiguangcheng",
          "body": "base-url：使用实例运行时的服务器请求地址：比如：https://dify.xxx.com/api/chat-messages中的https://dify.xxx.com/api\n\napi-key：也找一个实际运行的请求，找到authorization中的信息\n\n![Image](https://github.com/user-attachments/assets/38ff5b41-c6be-400e-a298-0eb600c81250)",
          "created_at": "2025-04-11T08:49:19Z"
        },
        {
          "author": "RockChinQ",
          "body": "https://docs.langbot.app/workshop/dify-service-api.html 文档加了更详细的说明，可以看看。",
          "created_at": "2025-04-11T09:04:27Z"
        }
      ]
    },
    {
      "issue_number": 855,
      "title": "[Feature]: 在设置了管理员账号之后，希望能在群聊中生效",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n例如，我添加了一个管理员用户\r\n\"admin-sessions\": [\"person_123456789\"],\r\n能实现在任意群聊中123456789的管理员指令信息都可以被响应，而不是只在123456789和机器人的私聊中响应\r\n希望可以考虑我的建议，谢谢！",
      "state": "open",
      "author": "7980963",
      "author_type": "User",
      "created_at": "2024-07-22T10:35:33Z",
      "updated_at": "2025-04-11T04:31:49Z",
      "closed_at": null,
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/855/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "4.0",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/855",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/855",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:54.087433",
      "comments": []
    },
    {
      "issue_number": 757,
      "title": "[Feature]: query.message_chain 不应被改写",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\npipeline处理上应该保持query对象里，最开始进入pipeline前的对象内的状态。",
      "state": "open",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-04-11T02:55:12Z",
      "updated_at": "2025-04-11T04:31:49Z",
      "closed_at": null,
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/757/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "4.0",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/757",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/757",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:54.087459",
      "comments": []
    },
    {
      "issue_number": 694,
      "title": "[Feature]: 它是否支持onebot12",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n如果不支持onebot12希望能支持一下，或者写一个插件来转换也可以",
      "state": "open",
      "author": "hhhhhge",
      "author_type": "User",
      "created_at": "2024-02-21T13:37:24Z",
      "updated_at": "2025-04-11T04:31:48Z",
      "closed_at": null,
      "labels": [
        "eh: Improve",
        "IM: aiocqhttp"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 10,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/694/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "4.0",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/694",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/694",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:54.087467",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "接入 onebot 协议用的是 `aiocqhttp` 框架，可以试一下是否支持，我还不是很了解 ob11 和 12 的主要区别",
          "created_at": "2024-02-21T14:05:16Z"
        },
        {
          "author": "hhhhhge",
          "body": "> 接入 onebot 协议用的是 `aiocqhttp` 框架，可以试一下是否支持，我还不是很了解 ob11 和 12 的主要区别\r\n\r\n这区别还挺大，比如链接好像就有区别",
          "created_at": "2024-02-21T14:14:35Z"
        },
        {
          "author": "hhhhhge",
          "body": "> 接入 onebot 协议用的是 `aiocqhttp` 框架，可以试一下是否支持，我还不是很了解 ob11 和 12 的主要区别\r\n\r\nhttps://12.onebot.dev/ 要不看看这个",
          "created_at": "2024-02-21T14:16:09Z"
        },
        {
          "author": "RockChinQ",
          "body": "原则上来说我们只做应用层的东西，目前似乎没有找到成熟的ob12接入框架，欢迎贡献",
          "created_at": "2024-02-21T14:19:27Z"
        },
        {
          "author": "hhhhhge",
          "body": "> 原则上来说我们只做应用层的东西，目前似乎没有找到成熟的ob12接入框架，欢迎贡献\r\n\r\n主要是我想试试微信机器人，看了下好像 https://github.com/JustUndertaker/ComWeChatBotClient 这个项目很合适，并且在nonebot2上实验成功没有问题，它是基于onebot12的，又看看发现好像没有其他gpt框架比你的完善，所有想要你支持一下onebot12",
          "created_at": "2024-02-21T14:22:35Z"
        }
      ]
    },
    {
      "issue_number": 1282,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nPeriodicMessage\n\n### 插件代码库地址\n\nhttps://github.com/RCruichen/rui-chen.git\n\n### 插件简介\n\n测试？",
      "state": "closed",
      "author": "RCruichen",
      "author_type": "User",
      "created_at": "2025-04-08T15:29:42Z",
      "updated_at": "2025-04-08T15:49:18Z",
      "closed_at": "2025-04-08T15:49:17Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1282/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1282",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1282",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:54.280364",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "只有具备一定功能的插件才会被允许上架。\n\n插件安装、使用、开发的说明请查看文档：https://docs.langbot.app/plugin/plugin-intro.html",
          "created_at": "2025-04-08T15:49:17Z"
        }
      ]
    },
    {
      "issue_number": 1278,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\n天气获取插件\n\n### 插件代码库地址\n\nhttps://github.com/FrecklyComb1728/QChatGPT_Plugin_Weather\n\n### 插件简介\n\n使用免费稳定的api获取近日的天气",
      "state": "closed",
      "author": "FrecklyComb1728",
      "author_type": "User",
      "created_at": "2025-04-06T13:24:00Z",
      "updated_at": "2025-04-08T03:24:20Z",
      "closed_at": "2025-04-08T03:24:18Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1278/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1278",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1278",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:54.527082",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "![Image](https://github.com/user-attachments/assets/da445018-f553-4246-b93a-b0b93f0b8d3e)\n\n麻烦在你的插件仓库这里添加一个描述，不然没法正常上架～",
          "created_at": "2025-04-07T02:40:56Z"
        },
        {
          "author": "FrecklyComb1728",
          "body": "> ![Image](https://github.com/user-attachments/assets/da445018-f553-4246-b93a-b0b93f0b8d3e)\n> \n> 麻烦在你的插件仓库这里添加一个描述，不然没法正常上架～\n\n已添加",
          "created_at": "2025-04-07T10:42:43Z"
        },
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2025-04-08T03:24:18Z"
        }
      ]
    },
    {
      "issue_number": 1279,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nFollowMsgPlugin\n\n### 插件代码库地址\n\nhttps://github.com/sheetung/FollowMsgPlugin\n\n### 插件简介\n\n聚焦群消息/群成员内容转发的插件",
      "state": "closed",
      "author": "sheetung",
      "author_type": "User",
      "created_at": "2025-04-07T09:47:32Z",
      "updated_at": "2025-04-07T10:20:09Z",
      "closed_at": "2025-04-07T10:20:08Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1279/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1279",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1279",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:54.790117",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2025-04-07T10:20:08Z"
        }
      ]
    },
    {
      "issue_number": 1276,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nehentai_bot\n\n### 插件代码库地址\n\nhttps://github.com/drdon1234/ehentai_bot\n\n### 插件简介\n\n适配 LangBot 的 EHentai画廊 转 PDF 插件",
      "state": "closed",
      "author": "drdon1234",
      "author_type": "User",
      "created_at": "2025-04-05T11:22:19Z",
      "updated_at": "2025-04-06T02:34:59Z",
      "closed_at": "2025-04-06T02:34:58Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1276/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1276",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1276",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:55.028965",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2025-04-06T02:34:58Z"
        }
      ]
    },
    {
      "issue_number": 1269,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nTaylorMoneyPlusPlugin\n\n### 插件代码库地址\n\nhttps://github.com/Taylo0or/TaylorMoneyPlusPlugin.git\n\n### 插件简介\n\nLangBot插件, 记录群内交易账单信息\n注意：安装后机器人不会回复任何问答",
      "state": "closed",
      "author": "Taylo0or",
      "author_type": "User",
      "created_at": "2025-04-02T00:01:12Z",
      "updated_at": "2025-04-06T02:34:28Z",
      "closed_at": "2025-04-06T02:34:26Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1269/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1269",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1269",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:55.227940",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "麻烦给插件仓库添加一个描述信息，不然无法上架插件市场～",
          "created_at": "2025-04-02T03:25:50Z"
        },
        {
          "author": "Taylo0or",
          "body": "> 麻烦给插件仓库添加一个描述信息，不然无法上架插件市场～\n\nLangBot插件, 记录wx群内交易账单信息",
          "created_at": "2025-04-03T17:27:09Z"
        },
        {
          "author": "RockChinQ",
          "body": "@Taylo0or 我的意思是这里这个\n\n![Image](https://github.com/user-attachments/assets/e88c7da9-58a5-47ef-9510-b53ddb2f2f23)",
          "created_at": "2025-04-04T14:29:47Z"
        },
        {
          "author": "Taylo0or",
          "body": "> [@Taylo0or](https://github.com/Taylo0or) 我的意思是这里这个\n> \n> ![Image](https://github.com/user-attachments/assets/e88c7da9-58a5-47ef-9510-b53ddb2f2f23)\n\n<img width=\"1304\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/e70cf716-9af5-46fd-9405-ef411b58d584\" />\n加好了，谢谢提醒",
          "created_at": "2025-04-04T19:15:25Z"
        },
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2025-04-06T02:34:26Z"
        }
      ]
    },
    {
      "issue_number": 696,
      "title": "[Feature]: 新的插件扩展方式",
      "body": "### 这是一个？\r\n\r\n新功能\r\n\r\n### 详细描述\r\n\r\n- 将插件以zip包形式发布\r\n- 插件所需依赖库装载在zip包内`/lib`目录下，动态加载\r\n- 插件模板提供自动打包工作流便于发布插件",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-02-21T15:42:59Z",
      "updated_at": "2025-04-01T13:30:41Z",
      "closed_at": "2025-04-01T13:30:40Z",
      "labels": [
        "eh: Improve",
        "m: Plugins",
        "pd: Need design"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/696/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "RockChinQ"
      ],
      "milestone": "3.4",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/696",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/696",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:55.389336",
      "comments": []
    },
    {
      "issue_number": 899,
      "title": "[Bug]: o1模型无法使用",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\nWindows10 ltsc2019 python3.11\n\n### QChatGPT版本\n\n3.3.1.1\n\n### 异常情况\n\n使用模型o1-preview-2024-09-12，机器人报错\r\n模型请求失败: 请求参数错误: Error code: 400 - {'error': {'message': \"Unsupported value: 'messages[0].role' does not support 'system' with this model. (request id: 20241011013244498879621KJoeSeim) (request id: 20241011013244232487071AKljpqBl) (request id: 202410110132442379141490dnzREzN) (request id: 20241011013244126982492K5W18cmq)\", 'type': 'invalid_request_error', 'param': 'messages[0].role', 'code': 'unsupported_value'}}\n\n### 启用的插件\n\n无",
      "state": "closed",
      "author": "bobandbrony",
      "author_type": "User",
      "created_at": "2024-10-10T17:36:47Z",
      "updated_at": "2025-04-01T13:30:20Z",
      "closed_at": "2025-04-01T13:30:20Z",
      "labels": [
        "bug?",
        "m: Provider"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/899/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/899",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/899",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:55.389352",
      "comments": [
        {
          "author": "gfhdhytghd",
          "body": "prompt删了试试？",
          "created_at": "2024-12-05T02:56:29Z"
        },
        {
          "author": "njzjz",
          "body": "需要删掉`/data/scenario/default.json`中`system`的`prompt`。",
          "created_at": "2025-02-12T12:43:55Z"
        }
      ]
    },
    {
      "issue_number": 1170,
      "title": "[Feature]: 微信使用关键词才调用大模型回复？",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n微信使用关键词才调用大模型回复：如使用“@bot+问题“",
      "state": "closed",
      "author": "CHZZH-hub",
      "author_type": "User",
      "created_at": "2025-03-06T14:11:20Z",
      "updated_at": "2025-04-01T13:26:49Z",
      "closed_at": "2025-04-01T13:26:48Z",
      "labels": [
        "good first issue"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1170/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1170",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1170",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:55.591617",
      "comments": [
        {
          "author": "shisan98",
          "body": "给你个思路\n我年前做了个自动处理客户问题的东西，回根据用户发送的东西识别意图，然后通过不同的分支进入不同的系统处理东西 ，不知道你能不能理解到我表达的是啥\n就比如客户A 要理发\n客户B  按摩\n\n然后你对接的系统里面 有理发 有按摩 通过提前做好的意图识别分支侦测用户意图然后将他的问题在转到 理发和按摩的分支大模型 然后处理 处理过程中 出问题 校验的时候结果都可以用这个思路在处理\n然后客户C 要修车 这个不是你有的东西 或者说了不相干的话  可以选择无视或者回复客户相关内容",
          "created_at": "2025-03-20T09:50:41Z"
        },
        {
          "author": "RockChinQ",
          "body": "这个应该已经被修好了，现在可以根据文档所述设置群内响应规则：https://docs.langbot.app/config/function/pipeline.html#%E7%BE%A4%E6%B6%88%E6%81%AF%E5%93%8D%E5%BA%94%E8%A7%84%E5%88%99-respond-rules",
          "created_at": "2025-04-01T13:26:49Z"
        }
      ]
    },
    {
      "issue_number": 1003,
      "title": "[Bug]: 无法接入dify",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\nv3.4.4.1、docker\n\n### 异常情况\n\n已经正确填写api密钥，类型chat，请求运行器设置为dify-service-api\n\n### 复现步骤\n\n![Image](https://github.com/user-attachments/assets/0b9d421e-2155-4da8-9888-dfdc617fb747)\n\n![Image](https://github.com/user-attachments/assets/8426f892-ceec-4000-bbd1-e4ff827e8116)\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "1929123",
      "author_type": "User",
      "created_at": "2025-02-02T08:47:17Z",
      "updated_at": "2025-04-01T12:49:08Z",
      "closed_at": "2025-04-01T12:49:08Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 9,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1003/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1003",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1003",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:55.744552",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "你这是自部署的dify还是dify的cloud呢？",
          "created_at": "2025-02-02T09:23:21Z"
        },
        {
          "author": "1929123",
          "body": "在docker上部署的dify\r\n\r\nJunyan Qin (Chin) ***@***.***>于2025年2月2日 周日17:23写道：\r\n\r\n> 你这是自部署的dify还是dify的cloud呢？\r\n>\r\n> —\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/RockChinQ/LangBot/issues/1003#issuecomment-2629313888>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsub",
          "created_at": "2025-02-02T09:24:40Z"
        },
        {
          "author": "RockChinQ",
          "body": "那你要改 api url改成你的dify地址啊",
          "created_at": "2025-02-02T09:26:08Z"
        },
        {
          "author": "1929123",
          "body": "好的，正在尝试\r\n\r\nJunyan Qin (Chin) ***@***.***>于2025年2月2日 周日17:26写道：\r\n\r\n> 那你要改 api url改成你的dify地址啊\r\n>\r\n> —\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/RockChinQ/LangBot/issues/1003#issuecomment-2629314820>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-aut",
          "created_at": "2025-02-02T09:28:51Z"
        },
        {
          "author": "1929123",
          "body": "> 那你要改 api url改成你的dify地址啊\n\n![Image](https://github.com/user-attachments/assets/7d8522df-a627-4719-a5e4-0e86e13d9a75)\n\n![Image](https://github.com/user-attachments/assets/5ebf3e7a-7f32-42c2-9153-81906ea95bf7)\n\n![Image](https://github.com/user-attachments/assets/9fc19b72-4a40-4035-a7d1-34016a70d17e)这次",
          "created_at": "2025-02-02T09:35:57Z"
        }
      ]
    },
    {
      "issue_number": 1205,
      "title": "[Bug]: x.ai Error code: 400",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\nDocker\n\n### 异常情况\n\n[03-18 07:35:14.575] chat.py (94) - [ERROR] : 对话(1)请求失败: RequesterError 模型请求失败: 请求参数错误: Error code: 400 - {'code': 'Client specified an invalid argument', 'error': 'An empty message was provided. Every message needs at least one non-empty content element.'}\n[03-18 07:35:14.851] controller.py (98) - [ERROR] : 模型请求失败: 请求参数错误: Error code: 400 - {'code': 'Client specified an invalid argument', 'error': 'An empty message was provided. Every message needs at least one non-empty content element.'}\n\n### 复现步骤\n\n全新安装，仅填写xai key，模型填写grok-2 \n国内网络，填写代理使用，就发一句你好，之后稳定复现\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "leihao",
      "author_type": "User",
      "created_at": "2025-03-18T07:40:32Z",
      "updated_at": "2025-04-01T12:43:14Z",
      "closed_at": "2025-04-01T12:43:13Z",
      "labels": [
        "bug?",
        "good first issue",
        "pd: Need reproducing"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 9,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1205/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1205",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1205",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:55.950643",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "怎么复现？你填了什么配置？发了什么消息？你的网络环境是什么？有没有代理？key自己检查过了没有？都要写一下。",
          "created_at": "2025-03-18T10:29:50Z"
        },
        {
          "author": "leihao",
          "body": "就填xai的key,切换模型,设置好代理就这样了,key和网络情况也没问题llm文件加一个不存在的模型名能正常看到xai提示模型不可用> 怎么复现？你填了什么配置？发了什么消息？你的网络环境是什么？有没有代理？key自己检查过了没有？都要写一下。\n\n",
          "created_at": "2025-03-18T14:53:05Z"
        },
        {
          "author": "7161457",
          "body": "![Image](https://github.com/user-attachments/assets/f61f92d8-d0d5-479f-b5be-cc3c8daa988b)\n![Image](https://github.com/user-attachments/assets/3c412419-8326-4251-b11a-240a436c4ee5)\n![Image](https://github.com/user-attachments/assets/ce5722c0-3598-4590-9f85-44fb0a8f45dd)\n![Image](https://github.com/us",
          "created_at": "2025-03-26T02:49:34Z"
        },
        {
          "author": "7161457",
          "body": "![Image](https://github.com/user-attachments/assets/1fdfaf98-1f3c-4453-bccf-12d7592aa5f9)\n\n![Image](https://github.com/user-attachments/assets/f4a9b70f-73a1-4e2c-9690-b60097672aac)\n不论问什么都是不行的.",
          "created_at": "2025-03-26T02:51:48Z"
        },
        {
          "author": "7161457",
          "body": "{\n    \"messages\": [\n        {\n            \"role\": \"system\",\n            \"content\": \"你是一个中文翻译专家\"\n        },\n        {\n            \"role\": \"user\",\n            \"content\": \"🗽👀 #TRUMP J. Trump  TRUTH But he doesn’t mind if criminals come into our Country. He is a Constitutional disaster! DJT \"\n        }\n",
          "created_at": "2025-03-26T04:35:03Z"
        }
      ]
    },
    {
      "issue_number": 1136,
      "title": "[Feature]: 使 tg 支持 markdown 发送",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\nhttps://github.com/sudoskys/telegramify-markdown",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2025-02-27T06:47:39Z",
      "updated_at": "2025-04-01T12:02:19Z",
      "closed_at": "2025-04-01T12:02:17Z",
      "labels": [
        "good first issue"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1136/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1136",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1136",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:56.141643",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "将在下一版本包含。",
          "created_at": "2025-04-01T12:02:17Z"
        }
      ]
    },
    {
      "issue_number": 1166,
      "title": "[Bug]: 报未知异常",
      "body": "### 消息平台适配器\n\n其他（或暂未使用）\n\n### 运行环境\n\n v3.4.10.2，Windows Server 2022 21H2(腾讯云)，自动安装的Python，部署在上海地区的云机房\n\n### 异常情况\n\nlanbot运行窗:\nTraceback (most recent call last):\n  File \"C:\\Users\\Administrator\\Desktop\\langbot\\LangBot\\pkg\\platform\\sources\\aiocqhttp.py\", line 280, in on_message\n    return await callback(await self.event_converter.target2yiri(event), self)\n  File \"C:\\Users\\Administrator\\Desktop\\langbot\\LangBot\\pkg\\platform\\sources\\aiocqhttp.py\", line 170, in target2yiri\n    yiri_chain = await AiocqhttpMessageConverter.target2yiri(\n  File \"C:\\Users\\Administrator\\Desktop\\langbot\\LangBot\\pkg\\platform\\sources\\aiocqhttp.py\", line 93, in target2yiri\n    image_base64, image_format = await image.qq_image_url_to_base64(msg.data['url'])\n  File \"C:\\Users\\Administrator\\Desktop\\langbot\\LangBot\\pkg\\utils\\image.py\", line 194, in qq_image_url_to_base64\n    file_bytes, image_format = await get_qq_image_bytes(image_url, query)\n  File \"C:\\Users\\Administrator\\Desktop\\langbot\\LangBot\\pkg\\utils\\image.py\", line 165, in get_qq_image_bytes\n    resp.raise_for_status()\n  File \"C:\\Users\\Administrator\\Desktop\\langbot\\python\\lib\\site-packages\\aiohttp\\client_reqrep.py\", line 1161, in raise_for_status\n    raise ClientResponseError(\naiohttp.client_exceptions.ClientResponseError: 400, message='Bad Request', url='http://gchat.qpic.cn/download?appid=1407&fileid=EhTojXW4-hK_kdvcewoadytEIDXaUBj2lywg_woomrrZ1KnziwMyBHByb2RQgL2jAVoQXgele3vVaYg1q0uxDcSmtA&rkey=CAQSKAB6JWENi5LM_xp9vumLbuThJSaYf-yzMrbZsuq7Uz2qffcqm614gds'\n\n小号登录运行窗:\n03-06 00:09:05 [\u001b[31merror\u001b[39m] 洪荒少女~ | 获取rkey失败 sendCommand timed out after 20000 ms for OidbSvcTrpcTcp.0x9067_202 with trace_id 7TM0ff48ea3266c61a35f85af4287d85d71e08e\n03-06 00:09:06 [\u001b[31merror\u001b[39m] 洪荒少女~ | [Rkey] 异常服务 https://rkey.napneko.icu/rkeys 异常 /  Error: Unexpected status code: 502\n    at IncomingMessage.<anonymous> (file:///C:/Users/Administrator/Desktop/langbot/platform/versions/9.9.17-31245/resources/app/napcat/napcat.mjs:20813:22)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)\n\n\n\n### 复现步骤\n\n我没有办法复现，可能不定时出现问题\n\n### 启用的插件\n\n![Image](https://github.com/user-attachments/assets/4e2a98cf-4fdf-41da-bc95-581352eefa15)",
      "state": "closed",
      "author": "zqj20040627",
      "author_type": "User",
      "created_at": "2025-03-05T16:18:50Z",
      "updated_at": "2025-04-01T11:49:30Z",
      "closed_at": "2025-04-01T11:49:30Z",
      "labels": [
        "bug?",
        "Stale"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1166/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1166",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1166",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:56.302412",
      "comments": [
        {
          "author": "zqj20040627",
          "body": "本地算力",
          "created_at": "2025-03-05T16:28:38Z"
        },
        {
          "author": "zqj20040627",
          "body": "但后续必定出现程序直接卡死的问题",
          "created_at": "2025-03-05T16:40:10Z"
        },
        {
          "author": "RockChinQ",
          "body": "你qq用的是什么协议端？napcat？",
          "created_at": "2025-03-30T14:24:16Z"
        }
      ]
    },
    {
      "issue_number": 1172,
      "title": "[Bug]: 接入gewechat登录成功后报错:callback push msg err",
      "body": "### 消息平台适配器\n\ngewechat（个人微信）\n\n### 运行环境\n\nlangbotV3.4.6.2，OS：rockey linux 9.5\n\n### 异常情况\n\n接入gewechat登录成功后报错\n\n![Image](https://github.com/user-attachments/assets/7a41eeef-6441-45d3-b259-fcda6b5243bb)\n\n### 复现步骤\n\n按照文档配置langbot消息适配器和gewechat，消息适配器配置如下：\n\n![Image](https://github.com/user-attachments/assets/c4054c0e-a0ce-4934-9a2b-42e3826adc4e)\ngewe所在的机器能ping通langbot\n\n![Image](https://github.com/user-attachments/assets/fb00222d-bfeb-4abc-a7c8-6ba441dd8091)\n\n### 启用的插件\n\n[bot] 所有插件(3):\n\n#1 News \nGet News\nv0.1\n作者: zzseki\n\n#2 RemoveThink \n移除消息中的所有think标签及其内容\nv0.3\n作者: the-lazy-me\n\n#3 贴吧老哥模式/喷子/键盘侠 \n模拟贴吧老哥的喷人方式有温和版和暴躁版，可以自由开关\nv0.1\n作者: 小馄饨\n",
      "state": "closed",
      "author": "arcadia-ai",
      "author_type": "User",
      "created_at": "2025-03-07T03:08:43Z",
      "updated_at": "2025-04-01T11:49:14Z",
      "closed_at": "2025-04-01T11:49:14Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1172/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1172",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1172",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:56.469417",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "先确保端口都开放了，能被访问（可以用curl测试）。国内主机+域名需要备案才能提供http服务。",
          "created_at": "2025-03-16T09:14:33Z"
        }
      ]
    },
    {
      "issue_number": 1261,
      "title": "[Bug]: 微信群消息 事件监听器类插件无法使用",
      "body": "### 消息平台适配器\n\n其他（或暂未使用）\n\n### 运行环境\n\nv3.4.11\n\n### 异常情况\n\n微信群消息bug\n1. 不艾特机器人不会做任何响应\n2. 艾特机器人后不会走事件监听的差价函数\n\n### 复现步骤\n\n<img width=\"584\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/c86e394b-dc45-43a7-b393-2dc493ce600f\" />\n\n私信是正常的\n\n<img width=\"539\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/11f7da7c-600a-4bf1-b38e-a46c4b13f51f\" />\n\n### 启用的插件\n\n自己开发的记账插件（在测试，未发布）\nhttps://github.com/Taylo0or/TaylorMoneyPlusPlugin",
      "state": "closed",
      "author": "Taylo0or",
      "author_type": "User",
      "created_at": "2025-03-31T08:20:25Z",
      "updated_at": "2025-04-01T08:25:19Z",
      "closed_at": "2025-04-01T08:25:18Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1261/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1261",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1261",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:56.629123",
      "comments": [
        {
          "author": "Taylo0or",
          "body": "已解决。\n原因：群消息会带上昵称和换行符，需要特殊处理下",
          "created_at": "2025-04-01T08:25:18Z"
        }
      ]
    },
    {
      "issue_number": 1234,
      "title": "[Bug]: v3.4.8更新至v3.4.11并更新依赖后报错",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\nv3.4.11, Windows server 2012 R2\n\n### 异常情况\n\n![Image](https://github.com/user-attachments/assets/9d07fb95-0a85-41de-8c4c-fa5f0ba15e22)\n\n### 复现步骤\n\n今天把服务器上的langbot从v3.4.8指令升级到了v3.4.11并更新了依赖之后，报了两个错误，查找解决方法将httpx版本更改为0.27.2后仍然相同报错\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "Tigrex-Dai",
      "author_type": "User",
      "created_at": "2025-03-24T10:52:08Z",
      "updated_at": "2025-03-31T11:46:05Z",
      "closed_at": "2025-03-31T11:46:05Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1234/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1234",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1234",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:56.795799",
      "comments": []
    },
    {
      "issue_number": 1237,
      "title": "[Bug]: Dify无响应",
      "body": "### 消息平台适配器\n\n其他（或暂未使用）\n\n### 运行环境\n\n3.4.11、windows11、Python 3.11.11、广西\n\n### 异常情况\n\n跟着文档填写齐全了，我是用napcat和langbot连接QQ私人号和Dify，但是Dify没有反应\n\n![Image](https://github.com/user-attachments/assets/6704011d-34dd-4bda-b2e5-bfcf2308bb12)\n\n### 复现步骤\n\n手动部署，然后全程跟着文档做，选用napcat方法连接Dify，在填写provider.json文件的时候，很多不要的key会报错，我就让AI改成以下的情况了，运行也没报错\n{\n    \"enable-chat\": false,\n    \"enable-vision\": false,\n    \"keys\": {\n        \"openai\": [],\n        \"anthropic\": [],\n        \"moonshot\": [],\n        \"deepseek\": [],\n        \"gitee-ai\": [],\n        \"xai\": [],\n        \"zhipuai\": [],\n        \"siliconflow\": [],\n        \"bailian\": [],\n        \"volcark\": []\n    },\n    \"requester\": {\n        \"openai-chat-completions\": {\n            \"base-url\": \"\",\n            \"args\": {},\n            \"timeout\": 120\n        },\n        \"anthropic-messages\": {\n            \"base-url\": \"\",\n            \"args\": {},\n            \"timeout\": 120\n        },\n        \"moonshot-chat-completions\": {\n            \"base-url\": \"\",\n            \"args\": {},\n            \"timeout\": 120\n        },\n        \"deepseek-chat-completions\": {\n            \"base-url\": \"\",\n            \"args\": {},\n            \"timeout\": 120\n        },\n        \"ollama-chat\": {\n            \"base-url\": \"\",\n            \"args\": {},\n            \"timeout\": 120\n        },\n        \"gitee-ai-chat-completions\": {\n            \"base-url\": \"\",\n            \"args\": {},\n            \"timeout\": 120\n        },\n        \"xai-chat-completions\": {\n            \"base-url\": \"\",\n            \"args\": {},\n            \"timeout\": 120\n        },\n        \"zhipuai-chat-completions\": {\n            \"base-url\": \"\",\n            \"args\": {},\n            \"timeout\": 120\n        },\n        \"lmstudio-chat-completions\": {\n            \"base-url\": \"\",\n            \"args\": {},\n            \"timeout\": 120\n        },\n        \"siliconflow-chat-completions\": {\n            \"base-url\": \"\",\n            \"args\": {},\n            \"timeout\": 120\n        },\n        \"bailian-chat-completions\": {\n            \"base-url\": \"\",\n            \"args\": {},\n            \"timeout\": 120\n        },\n        \"volcark-chat-completions\": {\n            \"base-url\": \"\",\n            \"args\": {},\n            \"timeout\": 120\n        }\n    },\n    \"model\": \"gpt-4o\",\n    \"prompt-mode\": \"normal\",\n    \"prompt\": {\n        \"default\": \"\"\n    },\n    \"runner\": \"dify-service-api\",\n    \"dify-service-api\": {\n        \"base-url\": \"https://api.dify.ai/v1\",\n        \"app-type\": \"chat\",\n        \"options\": {\n            \"convert-thinking-tips\": \"remove\"\n        },\n        \"chat\": {\n            \"api-key\": \"app-xxxxxxx\",\n            \"timeout\": 120\n        },\n        \"agent\": {\n            \"api-key\": \"app-1234567890\",\n            \"timeout\": 120\n        },\n        \"workflow\": {\n            \"api-key\": \"app-1234567890\",\n            \"output-key\": \"summary\",\n            \"timeout\": 120\n        }\n    },\n    \"dashscope-app-api\": {\n        \"app-type\": \"agent\",\n        \"api-key\": \"\",\n        \"agent\": {\n            \"app-id\": \"\",\n            \"references_quote\": \"参考资料来自:\"\n        },\n        \"workflow\": {\n            \"app-id\": \"\",\n            \"references_quote\": \"参考资料来自:\",\n            \"biz_params\": {\n                \"city\": \"\",\n                \"date\": \"\"\n            }\n        }\n    },\n    \"mcp\": {\n        \"servers\": []\n    }\n}\n\n### 启用的插件\n\n无",
      "state": "closed",
      "author": "ikun-szh666",
      "author_type": "User",
      "created_at": "2025-03-25T17:02:06Z",
      "updated_at": "2025-03-31T06:07:50Z",
      "closed_at": "2025-03-31T06:07:50Z",
      "labels": [
        "bug?",
        "good first issue",
        "Stale"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1237/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1237",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1237",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:56.795821",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "看langbot控制台，确定一下是否能正常连接 dify。",
          "created_at": "2025-03-29T15:04:28Z"
        },
        {
          "author": "RockChinQ",
          "body": "我会在下一个最新版加上dify api报错信息的提取，更新后就可以判断是否是dify上的应用有报错。",
          "created_at": "2025-03-30T14:51:31Z"
        }
      ]
    },
    {
      "issue_number": 1211,
      "title": "[Bug]: dify-agent在多次调用工具后卡住",
      "body": "### 消息平台适配器\n\ngewechat（个人微信）\n\n### 运行环境\n\nlangbot：v3.4.10.4，windows11，Python 3.12.3，广州，docker部署\n\n### 异常情况\n\n![Image](https://github.com/user-attachments/assets/40208ee5-a451-43ca-b379-64303417ff6d)\n\n使用langbot接入微信，采用dify-agent；dify平台上调试输出没有问题（大概30s左右），并且换成deepseek模型也能正常输出；但是运行一旦提问，dify-agent调用工具几次就会卡住，不会输出后面的内容，即使timeout增加到180仍是这样\n\n### 复现步骤\n\nplatform.json：按教程只配置gewechat适配器；\n            \"adapter\": \"gewechat\",\n            \"enable\": true,\n            \"gewechat_url\": \"http://gewe:2531\",\n            \"gewechat_file_url\": \"http://gewe:2532\",\n            \"port\": 2286,\n            \"callback_url\": \"http://langbot:2286/gewechat/callback\",\n\nprovider.json：   \n        \"runner\": \"dify-service-api\",\n        \"dify-service-api\": {\n         \"app-type\": \"agent\",\n其他地方默认配置。\n在docker运行langbot，dify平台建立一个agent，模型选择deepseek，并配置工具（如获取时间、网页爬虫等），当提问时，如果提问dify-agent多次调用工具就会卡住不会输出后面内容，而在dify-agent平台调试输出就能正常输出（30s左右）。\n\n### 启用的插件\n\n[bot] 所有插件(2):\n\n#1 Async_Task_runner \n基于GPT的函数调用能力，为QChatGPT提供定时任务功能\nv0.1.1\n作者: s2cr3t\n\n#2 Webwlkr \n基于GPT的函数调用能力，为QChatGPT提供联网功能\nv0.1.1\n作者: RockChinQ",
      "state": "closed",
      "author": "yanshj9",
      "author_type": "User",
      "created_at": "2025-03-18T15:38:28Z",
      "updated_at": "2025-03-31T06:07:40Z",
      "closed_at": "2025-03-31T06:07:40Z",
      "labels": [
        "bug?",
        "good first issue"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1211/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1211",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1211",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:56.964873",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "![Image](https://github.com/user-attachments/assets/8c25ab7c-d5a8-4464-a5b6-a49fc38ec646)\n\n![Image](https://github.com/user-attachments/assets/25a248ef-d369-449d-adc6-0188f9b5aaa0)\n\n我这边测试没啥问题，不过我会在最新版加上dify api报错的输出，你这个可能是dify内部报错了，更新后可以查看到具体报错信息。",
          "created_at": "2025-03-30T14:50:48Z"
        }
      ]
    },
    {
      "issue_number": 1248,
      "title": "[Bug]: 关于 provider.json 配置文件解析",
      "body": "### 消息平台适配器\n\nwecom（企业微信）\n\n### 运行环境\n\ndocker\n\n### 异常情况\n\n问题产生原因，在 requester 中  openai-chat-completions 设置中，指定 base-url 时， 若 value 值包含空格，将导致base-url 无效， 若空格在url前，则具体报错体现为: \n```\nlangbot  | [03-30 05:13:55.422] chat.py (94) - [ERROR] : 对话(0)请求失败: RequesterError 模型请求失败: 请求错误: Connection error.                                                                                                   \nlangbot  | [03-30 05:13:56.272] controller.py (98) - [ERROR] : 模型请求失败: 请求错误: Connection error. \n```\n若空格在后，则报错体现为：\n```\nlangbot  | [03-30 05:18:27.984] chat.py (94) - [ERROR] : 对话(0)请求失败: RequesterError 模型请求失败: 请求路径错误: Error code: 404 - {'error': {'message': 'Invalid URL (POST /v1 /chat/completions)', 'type': 'invalid_request_error', 'param': '', 'code': ''}}\nlangbot  | [03-30 05:18:28.814] controller.py (98) - [ERROR] : 模型请求失败: 请求路径错误: Error code: 404 - {'error': {'message': 'Invalid URL (POST /v1 /chat/completions)', 'type': 'invalid_request_error', 'param': '', 'code': ''}}\n```\n\n\n\n### 复现步骤\n\n设置  `provider.json` 中， `requester.openai-chat-completions.base-url` 的 `vaule` 前后包含空格，则复现该问题 \n\n### 启用的插件\n\n无",
      "state": "closed",
      "author": "0x5c0f",
      "author_type": "User",
      "created_at": "2025-03-30T05:24:04Z",
      "updated_at": "2025-03-30T16:00:17Z",
      "closed_at": "2025-03-30T15:59:56Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1248/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1248",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1248",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:57.116696",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "好了，现在url里多少空格都会被忽略了，下个版本发。",
          "created_at": "2025-03-30T16:00:15Z"
        }
      ]
    },
    {
      "issue_number": 867,
      "title": "[Bug]: Claude API报错，first message must use the \"user\" role",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\nWin 11,python 3.10.9\n\n### QChatGPT版本\n\nv3.3.0.1\n\n### 异常情况\n\n### 情况\r\n- 预设模式：full-scenario\r\n- 预设内容：默认生成的default\r\n\r\n用Claude的时候，会出现如下报错\r\n```bash\r\n[2024-08-12 23:06:08.310] F:\\QChatGPT\\pkg\\pipeline\\controller.py (94) - [ERROR] :\r\n    模型请求失败: 请求参数错误: Error code: 400 - {'error': {'message': 'messages: first message must use the \"user\" role (request id: ) (request id: ) (request id: ) (request id: 20240812230606897709001qmTtjTcX) (request id: 20240812230544538712316GEJr6bUZ) (request id: 20240812230544459516921rjxz99RP)', 'type': 'invalid_request_error', 'param': '', 'code': None}}\r\n```\r\n\r\n### 原因\r\n原因：像 anthropic 这样的模型只接受轮流的消息，即：它必须后面跟着 user 或 ai，一个接一个，所以你不能有 2 个具有相同用户或 ai 角色的连续消息。\r\n来自[https://github.com/FlowiseAI/Flowise/issues/2516](https://github.com/FlowiseAI/Flowise/issues/2516)的解释\r\n\r\n### 修改意见\r\n修改templates的default.json为\r\n```json\r\n{\r\n    \"prompt\": [\r\n        {\r\n            \"role\": \"system\",\r\n            \"content\": \"You are a helpful assistant. 如果我需要帮助，你要说“输入!help获得帮助”\"\r\n        },\r\n        {\r\n            \"role\": \"user\",\r\n            \"content\": \"你好\"\r\n        },\r\n        {\r\n            \"role\": \"assistant\",\r\n            \"content\": \"你好！我是一个能干的AI助手。 如果你需要帮助，我会说“输入!help获得帮助”\"\r\n        }\r\n    ]\r\n}\r\n```\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "the-lazy-me",
      "author_type": "User",
      "created_at": "2024-08-12T15:13:37Z",
      "updated_at": "2025-03-30T15:52:17Z",
      "closed_at": "2025-03-30T15:52:15Z",
      "labels": [
        "bug?",
        "m: Provider"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/867/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/867",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/867",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:57.279303",
      "comments": [
        {
          "author": "Tigrex-Dai",
          "body": "我用的也是claude，在full-scenario中好像不吃system所以我就用user给出system的内容后用assistant回应会严格遵从以上内容，也许可以当做是一个临时解决方法？",
          "created_at": "2024-08-13T01:30:10Z"
        },
        {
          "author": "netgfx",
          "body": "can someone post the solution (temporary or not) in English and give a simple explanation?",
          "created_at": "2024-09-03T10:12:33Z"
        },
        {
          "author": "RockChinQ",
          "body": "现在应该会自动删除的，无法复现。",
          "created_at": "2025-03-30T15:52:16Z"
        }
      ]
    },
    {
      "issue_number": 828,
      "title": "[Bug]: requester仅支援填入openai格式的参数，其他会报错：AsyncCompletions.create() got an unexpected keyword argument",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 系统环境\n\nLinux Docker部署\n\n### Python环境\n\nPython 3.10.13\n\n### QChatGPT版本\n\nv3.2.2\n\n### 异常情况\n\n\r\n![image](https://github.com/RockChinQ/QChatGPT/assets/42546145/3bda0539-3f54-4075-9df9-3a5e84aff0ab)\r\n\r\n{\r\n    \"requester\": {\r\n        \"openai-chat-completions\": {\r\n            \"base-url\": \"http://192.168.110.99:3000/v1\",\r\n            \"args\": {\r\n                \"temperature\": 2,\r\n                \"top_p\": 0.99,\r\n                \"k\": 0.99,\r\n                \"frequency_penalty\": 1,\r\n                \"presence_penalty\": 1\r\n            },\r\n            \"timeout\": 120\r\n        }\r\n    },\r\n    \"model\": \"OneAPI/command-r-plus\",\r\n    \"prompt-mode\": \"normal\",\r\n    \"prompt\": {\r\n        \"default\": \"\"\r\n    }\r\n}\r\n\r\n例如[Cohere参数文档](https://docs.cohere.com/reference/chat)中参数为k、p，但必须写成top_p，k是不支援的，仅支援填入openai格式的参数\n\n### 日志信息\n\n[2024-06-26 08:57:23.250] /app/pkg/pipeline/controller.py (81) - [ERROR] :\r\n    AsyncCompletions.create() got an unexpected keyword argument 'k'\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "ElvisChenML",
      "author_type": "User",
      "created_at": "2024-06-26T02:15:03Z",
      "updated_at": "2025-03-30T15:44:40Z",
      "closed_at": "2025-03-30T15:43:47Z",
      "labels": [
        "bug?",
        "m: Provider"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/828/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.4",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/828",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/828",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:57.441135",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "现在通过 AsyncCompletions.create() 的 `extra_body` 参数传递附带 args，不会再被 openai sdk 校验。",
          "created_at": "2025-03-30T15:44:39Z"
        }
      ]
    },
    {
      "issue_number": 883,
      "title": "[Feature]: 使函数调用追踪具有更多形式选项",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n例如 仅回复结果的情况下，加上函数调用次数的信息",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-09-12T02:22:32Z",
      "updated_at": "2025-03-30T15:26:53Z",
      "closed_at": "2025-03-30T15:26:50Z",
      "labels": [
        "m: Platform",
        "m: Tools"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/883/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/883",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/883",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:57.618291",
      "comments": []
    },
    {
      "issue_number": 917,
      "title": "[Bug]: 图片发送超时",
      "body": "### 消息平台适配器\r\n\r\naiocqhttp（使用 OneBot 协议接入的）\r\n\r\n### 运行环境\r\n\r\ndocker\r\n\r\n### QChatGPT版本\r\n\r\nv3.3.1.1\r\n\r\n### 异常情况\r\n\r\n对于同一张图片，在不同的账号或群里，bot的发送状况不一样，在一些账号（目前仅测出我的主账号可以）中可以正常发送图片，而在其他账号或群中发送不了，控制台中会返回以下信息：\r\n```\r\n[2024-11-09 15:09:50.515] /app/pkg/pipeline/controller.py (167) - [ERROR] :\r\n    处理请求时出错 query_id=5 stage=SendResponseBackStage : <ActionFailed status='failed', retcode=1200, data=None, message='Error: Timeout: NTEvent serviceAndMethod:NodeIKernelMsgService/sendMsg ListenerName:NodeIKernelMsgListener/onMsgInfoListUpdate EventRet:\\n{\\n    \"result\": 0,\\n    \"errMsg\": \"\"\\n}\\n\\n    at Timeout.sendDataCallback [as _onTimeout] (file:///app/napcat/napcat.mjs:7886:15)\\n    at listOnTimeout (node:internal/timers:573:17)\\n    at process.processTimers (node:internal/timers:514:7)', wording='Error: Timeout: NTEvent serviceAndMethod:NodeIKernelMsgService/sendMsg ListenerName:NodeIKernelMsgListener/onMsgInfoListUpdate EventRet:\\n{\\n    \"result\": 0,\\n    \"errMsg\": \"\"\\n}\\n\\n    at Timeout.sendDataCallback [as _onTimeout] (file:///app/napcat/napcat.mjs:7886:15)\\n    at listOnTimeout (node:internal/timers:573:17)\\n    at process.processTimers (node:internal/timers:514:7)', echo={'seq': 1}>\r\n```\r\n\r\n与管理员权限无关，我试过给我朋友权限，依旧发送失败。与网络环境也无关，我试过我的主账号在流量环境下依旧可以接收图片\r\n\r\n图片并不是敏感图片，应该也与风控无关。\r\n\r\n图片如下：\r\nhttps://github.com/user-attachments/assets/8a5953b1-196a-4775-b7ef-0e8351718254\r\n\r\n目前仅测出此图片出问题，其他普通图片都能正常发送\r\n\r\n### 启用的插件\r\n\r\n使用的插件：\r\nhttps://github.com/BiFangKNT/QChatGPT_AntiHotlinkImageFetcher",
      "state": "closed",
      "author": "BiFangKNT",
      "author_type": "User",
      "created_at": "2024-11-09T15:21:25Z",
      "updated_at": "2025-03-30T15:26:07Z",
      "closed_at": "2025-03-30T15:26:07Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/917/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/917",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/917",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:57.618305",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "这个估计就是图片太大了吧，应该是消息平台的问题，我们没法解决。",
          "created_at": "2025-01-05T08:31:12Z"
        },
        {
          "author": "BiFangKNT",
          "body": "> 这个估计就是图片太大了吧，应该是消息平台的问题，我们没法解决。\r\n\r\n那为什么我的主账号可以正常发送呢",
          "created_at": "2025-01-05T08:33:22Z"
        },
        {
          "author": "RockChinQ",
          "body": "不太懂，可以让napcat那边看看",
          "created_at": "2025-01-05T08:34:30Z"
        }
      ]
    },
    {
      "issue_number": 1043,
      "title": "[Feature]: 为 webhook style 的适配器添加原始数据调试输出",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n用于调试自己手搓的webhook 解析器",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2025-02-09T13:23:42Z",
      "updated_at": "2025-03-30T15:23:32Z",
      "closed_at": "2025-03-30T15:23:32Z",
      "labels": [
        "m: Platform"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1043/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1043",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1043",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:57.842658",
      "comments": []
    },
    {
      "issue_number": 1163,
      "title": "[Bug]gewe二维码阻塞项目启动",
      "body": "系统配置了gewe重启后不扫码登录微信的话项目就阻塞在那了，需要等扫码后才继续run，这样就会导致gewe需要扫码登录的时候启动项目的话webui访问不了\n\n## 提议\n扫码动作异步处理，而且最二维码可以在webui展示",
      "state": "closed",
      "author": "ZeroDeng01",
      "author_type": "User",
      "created_at": "2025-03-04T17:31:26Z",
      "updated_at": "2025-03-30T15:14:57Z",
      "closed_at": "2025-03-30T15:14:57Z",
      "labels": [
        "good first issue"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1163/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1163",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1163",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:57.842681",
      "comments": []
    },
    {
      "issue_number": 1225,
      "title": "[Bug]: Windows Server 2016无法正常运行",
      "body": "### 消息平台适配器\n\n其他（或暂未使用）\n\n### 运行环境\n\ncfdd0f8cb21f1fa6716d58fbac8b2cc7edef557c，Windows 2016，python3.10.14\n\n### 异常情况\n\n无法正常运行\n<details>\n<summary>日志</summary>\n<pre><blockcode>\nC:\\Users\\Administrator\\Documents\\Work\\langbot-v3.4.10.4-all>python main.py\n\n _                   ___      _\n| |   __ _ _ _  __ _| _ ) ___| |_\n| |__/ _` | ' \\/ _` | _ \\/ _ \\  _|\n|____\\__,_|_||_\\__, |___/\\___/\\__|\n               |___/\n\n⭐️开源地址: https://github.com/RockChinQ/LangBot\n📖文档地址: https://docs.langbot.app\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Administrator\\Documents\\Work\\langbot-v3.4.10.4-all\\pkg\\core\\boot.py\", line 65, in main\n    app_inst = await make_app(loop)\n  File \"C:\\Users\\Administrator\\Documents\\Work\\langbot-v3.4.10.4-all\\pkg\\core\\boot.py\", line 43, in make_app\n    await stage_inst.run(ap)\n  File \"C:\\Users\\Administrator\\Documents\\Work\\langbot-v3.4.10.4-all\\pkg\\core\\stages\\build_app.py\", line 92, in run\n    await llm_model_mgr_inst.initialize()\n  File \"C:\\Users\\Administrator\\Documents\\Work\\langbot-v3.4.10.4-all\\pkg\\provider\\modelmgr\\modelmgr.py\", line 56, in initialize\n    await api_inst.initialize()\n  File \"C:\\Users\\Administrator\\Documents\\Work\\langbot-v3.4.10.4-all\\pkg\\provider\\modelmgr\\requesters\\anthropicmsgs.py\", line 27, in initialize\n    httpx_client = anthropic._base_client.AsyncHttpxClientWrapper(\n  File \"C:\\Program Files (x86)\\Python310-32\\lib\\site-packages\\anthropic\\_base_client.py\", line 1397, in __init__\n    (socket.IPPROTO_TCP, socket.TCP_KEEPINTVL, 60),\nAttributeError: module 'socket' has no attribute 'TCP_KEEPINTVL'\nException ignored in: <function AsyncHttpxClientWrapper.__del__ at 0x057E86E8>\nTraceback (most recent call last):\n  File \"C:\\Program Files (x86)\\Python310-32\\lib\\site-packages\\anthropic\\_base_client.py\", line 1427, in __del__\n    if self.is_closed:\n  File \"C:\\Program Files (x86)\\Python310-32\\lib\\site-packages\\httpx\\_client.py\", line 228, in is_closed\n    return self._state == ClientState.CLOSED\nAttributeError: 'AsyncHttpxClientWrapper' object has no attribute '_state'\n\nC:\\Users\\Administrator\\Documents\\Work\\langbot-v3.4.10.4-all>\n</blockcode></pre>\n</details>\n\n### 复现步骤\n\n在当前目录运行 `python main.py`\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "EatHatsuneShallots",
      "author_type": "User",
      "created_at": "2025-03-22T05:51:52Z",
      "updated_at": "2025-03-30T14:21:43Z",
      "closed_at": "2025-03-30T14:21:43Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1225/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1225",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1225",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:57.842690",
      "comments": [
        {
          "author": "tjaol",
          "body": "![Image](https://github.com/user-attachments/assets/ae208c8b-f869-4a7c-acfa-eb85fccf58b8)\n我这里一切正常",
          "created_at": "2025-03-24T02:52:38Z"
        },
        {
          "author": "RockChinQ",
          "body": "尝试执行 `pip install -U requirements.txt` 来更新一下依赖",
          "created_at": "2025-03-29T15:23:22Z"
        },
        {
          "author": "EatHatsuneShallots",
          "body": "> 尝试执行 `pip install -U requirements.txt` 来更新一下依赖\n\n更新到 629ebae0e972dfcb57cebd2b6b1912854e9939e3 后仍然无效\n使用你提供的命令时报错：\n```\nERROR: Could not find a version that satisfies the requirement requirements.txt (from versions: none)\nHINT: You are attempting to install a package literally named \"requirements.txt\"",
          "created_at": "2025-03-29T16:01:47Z"
        },
        {
          "author": "RockChinQ",
          "body": "@EatHatsuneShallots 更新Python 3.12试一下。实在不行用docker启动吧",
          "created_at": "2025-03-29T17:00:06Z"
        }
      ]
    },
    {
      "issue_number": 1159,
      "title": "[Bug]: 大模型回复消息日志显示<Response [401 Unauthorized]>",
      "body": "### 消息平台适配器\n\nqqofficial（QQ官方API Webhook）\n\n### 运行环境\n\ndocker\n\n### 异常情况\n\n[03-04 08:35:03.726] process.py (42) - [INFO] : 处理 person_EDCF235989985E4D7AC3320414BCD889 的请求(2): 怎么设置操作员\n[03-04 08:35:11.837] chat.py (80) - [INFO] : 对话(2)响应: assistant: 要设置操作员，首先...\n[03-04 08:35:12.775] controller.py (189) - [ERROR] : 处理请求时出错 query_id=2 stage=SendResponseBackStage : <Response [401 Unauthorized]>\n[03-04 08:53:14.875] app.py (205) - [INFO] : 执行热重载 scope=provider\n[03-04 08:53:31.945] process.py (42) - [INFO] : 处理 person_EDCF235989985E4D7AC3320414BCD889 的请求(9): 你是谁\n[03-04 08:53:42.754] chat.py (80) - [INFO] : 对话(9)响应: assistant: 您好！我是由中国的...\n[03-04 08:53:46.511] controller.py (189) - [ERROR] : 处理请求时出错 query_id=9 stage=SendResponseBackStage : <Response [401 Unauthorized]>\n\n### 复现步骤\n\n配置使用的大模型不管哪个都报这个错，接入dify也一样，QQ机器人的白名单也设置了，但是我是测试的沙箱模式，按道理跟这个也没关系\n\n### 启用的插件\n没有",
      "state": "closed",
      "author": "xuxinlong001",
      "author_type": "User",
      "created_at": "2025-03-04T09:00:27Z",
      "updated_at": "2025-03-30T14:12:58Z",
      "closed_at": "2025-03-30T14:12:58Z",
      "labels": [
        "Stale"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1159/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1159",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1159",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:58.008735",
      "comments": [
        {
          "author": "wangcham",
          "body": "按照文档把配置项都填上去了吗？正常走完流程应该是没问题的，要不再重新部署一下？",
          "created_at": "2025-03-04T15:10:28Z"
        }
      ]
    },
    {
      "issue_number": 1249,
      "title": "[Bug]:",
      "body": "### 消息平台适配器\n\ngewechat（个人微信）\n\n### 运行环境\n\nv.3.4.11 ubuntu24.04 x86  \n\n### 异常情况\n\n启动gewe和langbot后 提示扫描下方二维码登录 个人微信（iphne手机）扫码后 安全验证中有“xxx在新设备输入下方数字安全码” 报错manager.py (169) - [ERROR] : 平台适配器运行出错: {\"ret\":500,\"msg\":\"检测登录失败\",\"data\":{\"code\":\"-1\",\"msg\":\"本次登录需要输入安全验证码\"}}\n\n### 复现步骤\n\n03-30 06:53:39.661] manager.py (78) - [INFO] : 初始化平台适配器 0: aiocqhttp\nlangbot  | [03-30 06:53:39.671] manager.py (78) - [INFO] : 初始化平台适配器 1: gewechat\nlangbot  | [03-30 06:53:40.852] show_notes.py (26) - [INFO] : 当前版本：v3.4.11.1\nlangbot  | [2025-03-30 06:53:40 +0000] [1] [INFO] Running on http://0.0.0.0:2280 (CTRL + C to quit)\nlangbot  | [2025-03-30 06:53:40 +0000] [1] [INFO] Running on http://0.0.0.0:5300 (CTRL + C to quit)\nlangbot  | \nlangbot  |  _                   ___      _   \nlangbot  | | |   __ _ _ _  __ _| _ ) ___| |_ \nlangbot  | | |__/ _` | ' \\/ _` | _ \\/ _ \\  _|\nlangbot  | |____\\__,_|_||_\\__, |___/\\___/\\__|\nlangbot  |                |___/              \nlangbot  | \nlangbot  | ⭐️开源地址: https://github.com/RockChinQ/LangBot\nlangbot  | 📖文档地址: https://docs.langbot.app\nlangbot  | \nlangbot  | AppID: wx_N6mvRRa63ORI5EytIXyUg 未在线，执行登录流程\nlangbot  | 请扫描下方二维码登录\n【二维码图片】\nlangbot  | [03-30 06:53:56.774] manager.py (169) - [ERROR] : 平台适配器运行出错: {\"ret\":500,\"msg\":\"检测登录失败\",\"data\":{\"code\":\"-1\",\"msg\":\"本次登录需要输入安全验证码\"}}\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "shelter010",
      "author_type": "User",
      "created_at": "2025-03-30T07:00:51Z",
      "updated_at": "2025-03-30T13:41:05Z",
      "closed_at": "2025-03-30T13:41:04Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1249/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1249",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1249",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:58.163575",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "最好是运行gewe的机器跟扫码手机在同省内。具体的问题请到gewechat的github仓库寻求帮助。",
          "created_at": "2025-03-30T13:41:04Z"
        }
      ]
    },
    {
      "issue_number": 840,
      "title": "[Bug]: 官方qq机器人在群聊内不能识别出管理员账号，使用管理员账号在群聊内发送安装插件命令以及update命令，机器人回复权限不足",
      "body": "### 部署方式\n\nDocker部署\n\n### 消息平台适配器\n\nqq-botpy（QQ官方API）\n\n### 系统环境\n\nubuntu22.04\n\n### Python环境\n\n无\n\n### QChatGPT版本\n\nv3.2.4\n\n### 异常情况\n\n最近新说官方qq机器人个人账号配置沙箱环境可以选择群聊，就试了一下，聊天功能可以正常使用，但是已经在system.json内配置管理员账号后，发送管理员命令，机器人回复权限不足\n\n### 日志信息\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "huxiaotao0620",
      "author_type": "User",
      "created_at": "2024-07-05T16:58:39Z",
      "updated_at": "2025-03-29T15:50:57Z",
      "closed_at": "2024-07-06T11:06:09Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/840/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/840",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/840",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:58.354846",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "1. 管理员设置的单位是“会话”：如果设置为`person_123456`，那么用户 123456 私聊机器人时是管理员会话；如果设置 `group_654321`，那么群聊 654321 里所有消息都具有管理员权限。\r\n2. 使用官方api时，目前只能把整个群设为管理员会话（因为qq-botpy库还没适配私聊场景）。qq-botpy 由于兼容性问题，操作的群号是映射序号，不是实际群号。可以到[元数据](https://qchatgpt.rockchin.top/posts/metadata/adapter-qq-botpy.html)中查看映射出的纯数字群号，也可以在发消息引起机器人响应时，",
          "created_at": "2024-07-06T10:21:58Z"
        },
        {
          "author": "huxiaotao0620",
          "body": "感谢解答！",
          "created_at": "2024-07-06T11:06:06Z"
        },
        {
          "author": "shantuzi1",
          "body": "追问一下佬，我是使用个人qq，但在私聊bot时发送安装插件命令以及update命令也会提示权限不足\n\n![Image](https://github.com/user-attachments/assets/4a009799-0009-4d89-9580-3bb25b019443)",
          "created_at": "2025-03-29T15:50:56Z"
        }
      ]
    },
    {
      "issue_number": 1242,
      "title": "[Bug]: WEB UI 无法加载",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\nLangBot v3.4.11 windows11 23H2 python3.13.2 位于西安\n\n### 异常情况\n\n访问本地Web UI地址，无任何内容，显示白屏。使用edge、Google浏览器、夸克或者Firefox均报错\nedge审查元素控制台信息\n警告：<link rel=preload> has an unsupported `type` value\n错误：index-UDC4zlEW.js:1  Failed to load module script: Expected a JavaScript module script but the server responded with a MIME type of \"text/plain\". Strict MIME type checking is enforced for module scripts per HTML spec.\n警告：The resource <URL> was preloaded using link preload but not used within a few seconds from the window's load event. Please make sure it has an appropriate `as` value and it is preloaded intentionally.\n\nFirefox审查元素控制台信息\n警告：由于未知的“as”或“type”值，或“media”属性不匹配，已忽略预加载 http://127.0.0.1:5300/assets/materialdesignicons-webfont-CSr8KVlo.eot。\n错误：已拦截加载自“http://127.0.0.1:5300/assets/index-UDC4zlEW.js”的模块，它使用了不允许的 MIME 类型（“text/html”）。\n\n### 复现步骤\n\n法1.解压[langbot-v3.4.11-all.zip]，安装依赖，运行main.py\n法2.使用git直接获取项目，并按照教程构建web前端，安装依赖，运行main.py\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "mmzkql",
      "author_type": "User",
      "created_at": "2025-03-28T15:34:05Z",
      "updated_at": "2025-03-28T16:42:03Z",
      "closed_at": "2025-03-28T15:46:26Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1242/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1242",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1242",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:58.549895",
      "comments": [
        {
          "author": "mmzkql",
          "body": "langbot日志\n[2025-03-28 23:37:20 +0800] [3284] [INFO] 127.0.0.1:42681 GET / 1.1 200 1208 98475\n[2025-03-28 23:37:20 +0800] [3284] [INFO] 127.0.0.1:42682 GET /assets/index-donF_f08.css 1.1 200 755832 43019\n[2025-03-28 23:37:20 +0800] [3284] [INFO] 127.0.0.1:42681 GET /assets/index-4EJj9sk1.js 1.1 200 2",
          "created_at": "2025-03-28T15:38:36Z"
        },
        {
          "author": "RockChinQ",
          "body": "新版本修了，可以按照https://docs.langbot.app/deploy/update.html 更新一下。docker需要等15分钟之后才会更新。",
          "created_at": "2025-03-28T15:49:32Z"
        },
        {
          "author": "mmzkql",
          "body": "很抱歉，并没有解决这个问题",
          "created_at": "2025-03-28T16:13:30Z"
        },
        {
          "author": "RockChinQ",
          "body": "现在浏览器控制台报什么错",
          "created_at": "2025-03-28T16:36:45Z"
        },
        {
          "author": "mmzkql",
          "body": "感谢作者，现在edge这边没好，Firefox那边可以打开了\nedge\n警告<link rel=preload> has an unsupported `type` value\n错误Failed to load module script: Expected a JavaScript module script but the server responded with a MIME type of \"text/plain\". Strict MIME type checking is enforced for module scripts per HTML spec.\n警告127.0.0.1/",
          "created_at": "2025-03-28T16:42:02Z"
        }
      ]
    },
    {
      "issue_number": 1014,
      "title": "[Bug]: WebUI无法正常显示",
      "body": "### 消息平台适配器\n\n其他（或暂未使用）\n\n### 运行环境\n\nPython 3.10.11；windows 11；edge浏览器\n\n### 异常情况\n\n访问127.0.0.1:5300地址时，WebUI呈现白屏。\n\n### 复现步骤\n\n正常启动main.py后访问127.0.0.1:5300\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "bilibilixyyyc",
      "author_type": "User",
      "created_at": "2025-02-04T05:16:57Z",
      "updated_at": "2025-03-28T15:49:59Z",
      "closed_at": "2025-03-28T15:46:25Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1014/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1014",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1014",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:58.725271",
      "comments": [
        {
          "author": "Sherlockyor",
          "body": "同样的问题，报错信息：Failed to load module script: Expected a JavaScript module script but the server responded with a MIME type of \"text/plain\". Strict MIME type checking is enforced for module scripts per HTML spec.",
          "created_at": "2025-02-04T09:15:19Z"
        },
        {
          "author": "RockChinQ",
          "body": "我测了一下，不管是手动部署还是docker启动都是正常的。\n\n你俩是从 release 下载的压缩包么？需要确保 web/dist 目录下有文件。",
          "created_at": "2025-02-04T12:37:11Z"
        },
        {
          "author": "Sherlockyor",
          "body": "目录下是有文件的。",
          "created_at": "2025-02-04T16:10:48Z"
        },
        {
          "author": "MoonBlueSky",
          "body": "相同问题，\n\n![Image](https://github.com/user-attachments/assets/9d429e4d-3f04-4a7a-b669-a4cb2fe989f5)\n\n![Image](https://github.com/user-attachments/assets/5249348d-a620-416b-a306-0829cd08de9a)",
          "created_at": "2025-02-07T08:05:24Z"
        },
        {
          "author": "Henriport-T",
          "body": "![Image](https://github.com/user-attachments/assets/ffb4d1ef-a3ac-46cd-b8a2-07da75b9c168)\n我也是一样的问题\n\n![Image](https://github.com/user-attachments/assets/df1720fb-a6fc-4890-944b-8bd58e71db7a)\n改了这里才能显示",
          "created_at": "2025-02-12T05:09:15Z"
        }
      ]
    },
    {
      "issue_number": 1240,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\n基金净值小助手\n\n### 插件代码库地址\n\nhttps://github.com/exneverbur/ShowMeNav\n\n### 插件简介\n\nLangbot插件-基金净值查询小助手+自动播报员!",
      "state": "closed",
      "author": "exneverbur",
      "author_type": "User",
      "created_at": "2025-03-28T09:41:38Z",
      "updated_at": "2025-03-28T14:48:50Z",
      "closed_at": "2025-03-28T14:48:49Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1240/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1240",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1240",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-21T23:46:58.900177",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2025-03-28T14:48:49Z"
        }
      ]
    },
    {
      "issue_number": 1056,
      "title": "[Feature]: 适配腾讯云大模型知识引擎",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\nhttps://lke.cloud.tencent.com/lke#/app/home",
      "state": "open",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2025-02-10T16:15:08Z",
      "updated_at": "2025-03-26T15:05:32Z",
      "closed_at": null,
      "labels": [
        "good first issue",
        "m: Provider"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1056/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1056",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1056",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:22:19.000960",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "快来提pr啦，可以写进简历里的喵。\n",
          "created_at": "2025-02-15T02:49:47Z"
        }
      ]
    },
    {
      "issue_number": 1140,
      "title": "[Bug]: 微信bot账号手动发出去的消息都会调用大模型回复",
      "body": "### 消息平台适配器\n\ngewechat（个人微信）\n\n### 运行环境\n\nv3.4.9.5、Centos7、Docker\n\n### 异常情况\n\n问题1：用做机器人的小号主动发送的任何消息都会被大模型回复，比如我用小号手动发给大号《你是什么模型》，在另一个小号同头像的对话框里被回复，除此以外没有报错信息，附带微信截图均为用作机器人的微信小号\n问题2：微信机器人小号会回复所有包括订阅号，微信支付，微信团队在内的官方账号和其余公众号，导致无限循环对话\n![Image](https://github.com/user-attachments/assets/665b8d2d-c5ef-49ae-be6d-affc09d89b0a)\n\n![Image](https://github.com/user-attachments/assets/1b33193c-935a-4cbc-8fb3-433fa3fef4d4)\n\n![Image](https://github.com/user-attachments/assets/58252eb3-929e-41c5-bba8-478686ed621e)\n\n### 复现步骤\n\n只要用机器人号主动发送消息即可复现\n\n### 启用的插件\n\n无插件",
      "state": "closed",
      "author": "WineTer",
      "author_type": "User",
      "created_at": "2025-02-27T09:57:34Z",
      "updated_at": "2025-03-26T15:04:30Z",
      "closed_at": "2025-03-26T15:04:08Z",
      "labels": [
        "bug?",
        "good first issue"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1140/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 1
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1140",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1140",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:34.358315",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "这个在最新版已修复。",
          "created_at": "2025-03-26T15:04:08Z"
        }
      ]
    },
    {
      "issue_number": 1036,
      "title": "[Bug]: 使用插件热重载不成功",
      "body": "### 消息平台适配器\n\n其他（或暂未使用）\n\n### 运行环境\n\nWindows、LangBot v3.4.6.2、Python3.11\n\n### 异常情况\n\nhttps://github.com/sanxianxiaohuntun/SailingaiAI-Api\n插件\n\n```\n[02-08 11:12:36.021] process.py (42) - [INFO] : 处理 person_xxxxxxxx 的请求(397): gemini-2.0-pro-exp-02-05\n[02-08 11:12:38.040] app.py (201) - [INFO] : 执行热重载 scope=provider\n[02-08 11:12:53.066] app.py (185) - [INFO] : 执行热重载 scope=plugin\n[02-08 11:12:53.094] app.py (176) - [INFO] : 执行热重载 scope=platform\n[02-08 11:12:53.095] manager.py (70) - [INFO] : 初始化平台适配器 0: aiocqhttp\n[02-08 11:12:53.105] manager.py (70) - [INFO] : 初始化平台适配器 1: aiocqhttp\n[2025-02-08 11:12:53 +0800] [25304] [INFO] Running on http://0.0.0.0:8088 (CTRL + C to quit)\n[2025-02-08 11:12:53 +0800] [25304] [INFO] Running on http://0.0.0.0:8089 (CTRL + C to quit)\n[2025-02-08 11:12:59 +0800] [25304] [INFO] 127.0.0.1:60187 GET /ws 1.1 101 - 1996\n```\n\n修改替换文件provider.json然后热重载并未成功\n\n### 复现步骤\n\n1.安装插件\nhttps://github.com/sanxianxiaohuntun/SailingaiAI-Api\n2.进行 `.启航` 命令，根据插件步骤走完，热重载后依然调用原来的模型和api\n\n### 启用的插件\n\nhttps://github.com/sanxianxiaohuntun/SailingaiAI-Api",
      "state": "closed",
      "author": "sanxianxiaohuntun",
      "author_type": "User",
      "created_at": "2025-02-08T03:30:43Z",
      "updated_at": "2025-03-26T14:29:53Z",
      "closed_at": "2025-03-26T14:29:53Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1036/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1036",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1036",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:34.533071",
      "comments": [
        {
          "author": "sanxianxiaohuntun",
          "body": "我插件删了热重载功能了...正常后恢复",
          "created_at": "2025-02-10T10:57:23Z"
        }
      ]
    },
    {
      "issue_number": 1235,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nHistoryOnReload\n\n### 插件代码库地址\n\nhttps://github.com/Sansui233/HistoryOnReload\n\n### 插件简介\n\n解决当前版本重启 langbot、重载 LLM 后丢失对话上下文的问题。\n\n历史对话持久化/管理 功能不知道之后会不会做。目前先插件解决一下，如果不太符合插件要求就不收录，或者以后实现了持久化的话就下架。\n\n相关 issue: #804\n",
      "state": "closed",
      "author": "Sansui233",
      "author_type": "User",
      "created_at": "2025-03-24T23:11:28Z",
      "updated_at": "2025-03-25T03:28:18Z",
      "closed_at": "2025-03-25T03:28:17Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1235/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1235",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1235",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:34.726993",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2025-03-25T03:28:17Z"
        }
      ]
    },
    {
      "issue_number": 1233,
      "title": "[Plugin]: 请求登记新插件 漫画搜索查看插件",
      "body": "### 插件名称\n\n漫画搜索下载查看\n\n### 插件代码库地址\n\nhttps://github.com/sanxianxiaohuntun/pica_plugin\n\n### 插件简介\n\n# 漫画搜索下载插件\n\n## 简介\n\n这是一个用于搜索和下载漫画的插件，支持搜索漫画和下载图片，并使用合并转发功能发送。插件支持在群聊和私聊中使用，会将多页漫画自动分批合并成多个长图显示，提供更好的阅读体验。\n\n## 功能\n\n1. **搜索漫画**：根据关键词搜索漫画，支持翻页\n2. **下载漫画**：根据漫画ID下载指定漫画的所有章节\n3. **智能图片合并**：自动将多页漫画分批合并成长图，避免单图过长\n4. **合并转发**：使用合并转发方式发送漫画预览（支持群聊和私聊）\n5. **批量章节下载**：一次下载漫画的所有章节并发送",
      "state": "closed",
      "author": "sanxianxiaohuntun",
      "author_type": "User",
      "created_at": "2025-03-24T09:17:16Z",
      "updated_at": "2025-03-24T09:20:57Z",
      "closed_at": "2025-03-24T09:20:56Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1233/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1233",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1233",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:34.925821",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2025-03-24T09:20:56Z"
        }
      ]
    },
    {
      "issue_number": 793,
      "title": "[Feature]: 增加markdown转图片的原生支持",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n这样使用更稳定，而不是使用插件",
      "state": "open",
      "author": "bobandbrony",
      "author_type": "User",
      "created_at": "2024-05-25T15:58:19Z",
      "updated_at": "2025-03-22T10:47:05Z",
      "closed_at": null,
      "labels": [
        "eh: Improve",
        "m: Platform"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/793/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/793",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/793",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:35.121439",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "推荐用什么markdown转图片的方案？要轻便、支持中文的",
          "created_at": "2024-05-31T07:54:44Z"
        },
        {
          "author": "bobandbrony",
          "body": "> 推荐用什么markdown转图片的方案？要轻便、支持中文的\n\n这我就不清楚了，我不是做开发的，但我之前用的chatbot项目就支持，你可以去看看?地址https://github.com/lss233/chatgpt-mirai-qq-bot",
          "created_at": "2024-06-01T08:32:21Z"
        },
        {
          "author": "RockChinQ",
          "body": "目前调研，转图片只找到有wkhtmltoimage或者playwright的方案，这些方案都需要**非纯python实现**的依赖软件，暂时不考虑添加此类依赖。如果你有找到纯python实现的、轻量的、支持中文的md转image方案，会加快这个解决进度。",
          "created_at": "2024-06-01T09:27:29Z"
        },
        {
          "author": "bobandbrony",
          "body": "> 目前调研，转图片只找到有wkhtmltoimage或者playwright的方案，这些方案都需要**非纯python实现**的依赖软件，暂时不考虑添加此类依赖。如果你有找到纯python实现的、轻量的、支持中文的md转image方案，会加快这个解决进度。\r\n\r\n理解你的需求，希望找到一个纯Python、轻量且支持中文的Markdown转图片方案。以下是一个可以满足你需求的方案，基于 `markdown2` 和 `Pillow`，并且考虑了中文字体的支持。\r\n\r\n### 方案：使用 `markdown2` 和 `Pillow`\r\n\r\n1. **安装依赖**：\r\n   ```sh\r\n   pi",
          "created_at": "2024-06-02T15:00:06Z"
        },
        {
          "author": "Ynkcc",
          "body": "同样遇到了该问题，试了半天发现还是转了回来。\n纯python方案`使用markdown2 和 Pillow`需要处理的内容太多了，html的格式渲染需要自己手动完成",
          "created_at": "2025-03-22T10:47:03Z"
        }
      ]
    },
    {
      "issue_number": 804,
      "title": "[Feature]: 回调数据库（历史对话持久化）",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n回调v2的数据库功能。\r\n在角色扮演时，重启程序导致丢失记忆很影响对话体验。",
      "state": "open",
      "author": "Pevernow",
      "author_type": "User",
      "created_at": "2024-06-02T04:54:54Z",
      "updated_at": "2025-03-22T10:36:07Z",
      "closed_at": null,
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/804/reactions",
        "total_count": 3,
        "+1": 3,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/804",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/804",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:35.384915",
      "comments": [
        {
          "author": "XiaoQing235",
          "body": "I'm looking forward to this feature as well! please consider implementing it",
          "created_at": "2025-01-29T20:45:19Z"
        },
        {
          "author": "Sansui233",
          "body": "+1",
          "created_at": "2025-03-22T10:36:06Z"
        }
      ]
    },
    {
      "issue_number": 1213,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nGroupChattingContext\n\n### 插件代码库地址\n\nhttps://github.com/Sansui233/GroupChattingContext\n\n### 插件简介\n\n群聊回复时发送群聊历史记录、每个群聊单独追加 prompt",
      "state": "closed",
      "author": "Sansui233",
      "author_type": "User",
      "created_at": "2025-03-18T18:16:38Z",
      "updated_at": "2025-03-22T10:34:38Z",
      "closed_at": "2025-03-19T03:07:59Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1213/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1213",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1213",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:35.573349",
      "comments": [
        {
          "author": "Sansui233",
          "body": "相关 issue #800 #812 ",
          "created_at": "2025-03-18T18:18:39Z"
        },
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2025-03-19T03:08:00Z"
        }
      ]
    },
    {
      "issue_number": 1212,
      "title": "[Bug]: 微信小号的名称如果是字母结合中文，字母在前的，则群聊at后无回复。",
      "body": "### 消息平台适配器\n\ngewechat（个人微信）\n\n### 运行环境\n\ndocker\n\n### 异常情况\n\n微信小号的名称如果是字母结合中文，字母在前的，则群聊at后无回复。\n![Image](https://github.com/user-attachments/assets/d50f42b5-c3c1-4fbe-9c8a-b5ce0507a931)\n\n[2025-03-18 06:58:01 +0000] [1] [INFO] 172.18.0.2:43456 POST /gewechat/callback 1.1 500 265 2249\n[2025-03-18 06:58:01 +0000] [1] [INFO] 172.18.0.2:43446 POST /gewechat/callback 1.1 200 2 3511\n[2025-03-18 06:58:01 +0000] [1] [INFO] 172.18.0.2:52098 POST /gewechat/callback 1.1 200 2 1216\n[2025-03-18 06:58:01 +0000] [1] [INFO] 172.18.0.2:52098 POST /gewechat/callback 1.1 500 265 1271\n[2025-03-18 06:58:02 +0000] [1] [INFO] 172.18.0.2:52098 POST /gewechat/callback 1.1 500 265 1083\n[2025-03-18 06:58:07 +0000] [1] [INFO] 172.18.0.2:52098 POST /gewechat/callback 1.1 200 2 2190\n[03-18 06:58:07.333] process.py (42) - [INFO] : 处理 group_48677394826@chatroom 的请求(27): oneyop:\n 你好\n[03-18 06:58:18.614] chat.py (80) - [INFO] : 对话(27)响应: assistant: 你好呀！欢迎来到九...\n\n### 复现步骤\n\n微信小号的名称如果是字母结合中文，字母在前的，则群聊at后无回复。删掉字母即可正常at回复。\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "yoptree",
      "author_type": "User",
      "created_at": "2025-03-18T16:04:51Z",
      "updated_at": "2025-03-19T14:54:26Z",
      "closed_at": "2025-03-19T14:54:25Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1212/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1212",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1212",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:35.742815",
      "comments": [
        {
          "author": "fdc310",
          "body": "浮现不了啊，你更新一下langbot试试\n\n![Image](https://github.com/user-attachments/assets/71d6afd4-6931-46be-af0c-98d4328df1d9)",
          "created_at": "2025-03-19T11:52:42Z"
        },
        {
          "author": "RockChinQ",
          "body": "这个我们没法复现，请试一下LangBot最新版。",
          "created_at": "2025-03-19T14:54:25Z"
        }
      ]
    },
    {
      "issue_number": 1200,
      "title": "[Bug]: 引用的交流没有回复",
      "body": "### 消息平台适配器\n\ngewechat（个人微信）\n\n### 运行环境\n\nLangBot: v3.4.10.3, 操作系统: CenOs7, 系统架构: x86, 部署方式: Docker\n\n### 异常情况\n\n![Image](https://github.com/user-attachments/assets/49e1e908-7314-432f-a549-479b115bb82f)\n\n如图所示，个人微信只要引用了对方的话，就不会回复。最后两句就没有回复。我看了gewe已经CallBack了。但是LangBot 没有处理消息，给到大模型并回复消息\n\n### 复现步骤\n\n回复带引用的消息，即可复现\n\n### 启用的插件\n\nDeepSeekR1NoThink",
      "state": "closed",
      "author": "apoollo",
      "author_type": "User",
      "created_at": "2025-03-17T02:12:14Z",
      "updated_at": "2025-03-19T14:53:32Z",
      "closed_at": "2025-03-19T14:53:30Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1200/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1200",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1200",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:36.017150",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "最新版可以了。",
          "created_at": "2025-03-19T14:53:30Z"
        }
      ]
    },
    {
      "issue_number": 1206,
      "title": "[Bug]: gewe个微 无法接受dify输出的markdown图片包括url和base64格式的链接",
      "body": "### 消息平台适配器\n\ngewechat（个人微信）\n\n### 运行环境\n\nv3.4.10.3 unbuntu 22.04  x86 python3.10\n\n### 异常情况\n\n接入dify，使用gewe将dify聊天助手生成的图片发送到 微信 显示\n![image](https://www.baidu.com/img/PCtm_d9c8750bed0b3c7d089fa7d55720d6cf.png) \n\n### 复现步骤\n\ndify直接进行回复测试样例如图 ![Image](https://github.com/user-attachments/assets/ae5baf5d-dab5-45b4-bb56-e3bac9382f2e)\n\n### 启用的插件\n\n无",
      "state": "open",
      "author": "Acadiacyj",
      "author_type": "User",
      "created_at": "2025-03-18T10:01:56Z",
      "updated_at": "2025-03-18T10:02:50Z",
      "closed_at": null,
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1206/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1206",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1206",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:38.225766",
      "comments": [
        {
          "author": "Acadiacyj",
          "body": "由于是markdown格式微信其实现实的对应背后的![] + 地址",
          "created_at": "2025-03-18T10:02:48Z"
        }
      ]
    },
    {
      "issue_number": 1201,
      "title": "[Bug]: v3.4.10.3版本调用dify工作流时未正确传user_message_text",
      "body": "### 消息平台适配器\n\ngewechat（个人微信）\n\n### 运行环境\n\nDocker\n\n### 异常情况\n\n个人微信调用dify工作流，dify未收到user_message_text\n\n![Image](https://github.com/user-attachments/assets/1fc27082-1a02-4887-a91a-d54f3e2f22c9)\n\n### 复现步骤\n\n正常部署即可，无特殊操作\n\n### 启用的插件\n\n无",
      "state": "closed",
      "author": "1627408861",
      "author_type": "User",
      "created_at": "2025-03-17T04:32:06Z",
      "updated_at": "2025-03-17T14:04:40Z",
      "closed_at": "2025-03-17T14:04:38Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1201/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1201",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1201",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:38.481771",
      "comments": [
        {
          "author": "cheng2004237",
          "body": "langbot_user_message_text，变量名改成这个就行了",
          "created_at": "2025-03-17T09:07:13Z"
        },
        {
          "author": "RockChinQ",
          "body": "已修复，将在下一版本包含。现在可以先用`langbot_user_message_text`临时替代。",
          "created_at": "2025-03-17T14:04:38Z"
        }
      ]
    },
    {
      "issue_number": 1193,
      "title": "[Bug]: 不能使用钉钉机器人",
      "body": "### 消息平台适配器\n\n其他（或暂未使用）\n\n### 运行环境\n\nv3.4.10.3 , CentOS 64 ,  Docker 部署 \n\n### 异常情况\n\nplatform.json 把钉钉 消息器设置为 true 后， 系统不能完整启动，不报错。管理系统也不能打开。设置为false 后正常。\n\n![Image](https://github.com/user-attachments/assets/1a589660-f8ee-42fc-861f-65e3906e6b16)\n\n### 复现步骤\n\nplatform.json 把钉钉 消息器设置为 true 后，重新启动。即可复现\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "apoollo",
      "author_type": "User",
      "created_at": "2025-03-14T09:32:06Z",
      "updated_at": "2025-03-16T09:13:09Z",
      "closed_at": "2025-03-16T09:13:09Z",
      "labels": [
        "bug?",
        "Stale"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1193/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1193",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1193",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:38.651780",
      "comments": [
        {
          "author": "wangcham",
          "body": "发一下data/logs/langbot-xxx里的完整日志记录",
          "created_at": "2025-03-14T10:05:59Z"
        }
      ]
    },
    {
      "issue_number": 1067,
      "title": "[Bug]: ollama无法连接",
      "body": "### 消息平台适配器\n\n其他（或暂未使用）\n\n### 运行环境\n\nv3.4.7\n\n### 异常情况\n\n![Image](https://github.com/user-attachments/assets/15b701eb-7d4b-4e38-ba92-9e12a5d16a05)\n\n![Image](https://github.com/user-attachments/assets/ada8a9cb-bbb2-4f34-a6c5-64aa3e69890a)\n\n![Image](https://github.com/user-attachments/assets/59f7042d-b9dc-4471-8e10-cb167463279f)\n\n### 复现步骤\n\n    \"ollama-chat\": {\n      \"args\": {},\n      \"base-url\": \"http://192.168.7.45:11434/\",\n      \"timeout\": 600\n    },\n\n\ndocker exec -it langbot /bin/sh\napt install curl\n\n# curl http://192.168.7.45:11434/\nOllama is running\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "kalsolio",
      "author_type": "User",
      "created_at": "2025-02-11T10:58:05Z",
      "updated_at": "2025-03-16T09:00:09Z",
      "closed_at": "2025-03-16T09:00:09Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 19,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1067/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1067",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1067",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:38.859599",
      "comments": [
        {
          "author": "arcadia-ai",
          "body": "我也遇到了\n\n![Image](https://github.com/user-attachments/assets/db9e234d-21a3-4a6f-85b0-00ae6659419f)\n\n![Image](https://github.com/user-attachments/assets/bea225e7-b019-4e44-bd3a-26efaf0919c2)\n\n![Image](https://github.com/user-attachments/assets/b8626f12-f639-4acc-b11e-e18f34990ad6)",
          "created_at": "2025-02-12T06:14:57Z"
        },
        {
          "author": "RockChinQ",
          "body": "https://docs.langbot.app/deploy/network-details.html 参考这个文档配置多个容器的连接",
          "created_at": "2025-02-12T06:16:41Z"
        },
        {
          "author": "arcadia-ai",
          "body": "langbot和napcat的网络是打通了的，我用硅基流动的模型已经能正常使用，只是因为接口太慢想连接本地模型发现报连接失败 本地模型运行在局域网的其他机器上\n\n![Image](https://github.com/user-attachments/assets/061f559c-f5f6-4225-a543-b6fd390baafe)",
          "created_at": "2025-02-12T06:22:25Z"
        },
        {
          "author": "RockChinQ",
          "body": "@arcadia-ai 你curl测试的主机也是在langbot运行主机是吗",
          "created_at": "2025-02-12T06:24:06Z"
        },
        {
          "author": "arcadia-ai",
          "body": "langbot容器内测试本地模型连接情况\n![Image](https://github.com/user-attachments/assets/84837f1a-2990-4747-a851-499c29cff6ce)\n\n![Image](https://github.com/user-attachments/assets/39a127e7-abeb-4454-89e9-bed01e2cc8bf)",
          "created_at": "2025-02-12T06:24:48Z"
        }
      ]
    },
    {
      "issue_number": 1104,
      "title": "[Bug]:  微信第一次登录，会出现“本次登录需要输入安全验证码”无法继续",
      "body": "### 消息平台适配器\n\n其他（或暂未使用）\n\n### 运行环境\n\ndocker\n\n### 异常情况\n\n![Image](https://github.com/user-attachments/assets/4fbbdd2b-e967-4626-af62-fddf899b84d0)\n\n好像现在流程无法输入 安全码。\n\n### 复现步骤\n\n第一次使用微信扫码会出现此情况, 当然程序和本人机器 不是一个省的。\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "df007df",
      "author_type": "User",
      "created_at": "2025-02-20T08:21:55Z",
      "updated_at": "2025-03-16T08:59:24Z",
      "closed_at": "2025-03-16T08:59:23Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1104/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1104",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1104",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:39.107771",
      "comments": [
        {
          "author": "zhangshaorui",
          "body": "重点就在这 dify_on_wechat那个项目也是，必须都得在同一个省才行，就这一点 限制了很多人，东北可以说没有服务器",
          "created_at": "2025-02-21T06:35:16Z"
        },
        {
          "author": "q616865598",
          "body": "解决了没有啊,遇到同样问题了",
          "created_at": "2025-03-12T17:16:02Z"
        },
        {
          "author": "zhangshaorui",
          "body": "> 解决了没有啊,遇到同样问题了\n换成 同省的服务器就行了",
          "created_at": "2025-03-13T00:05:55Z"
        },
        {
          "author": "RockChinQ",
          "body": "试一下最新的gewechat。然后你运行gewechat 的机器要和你扫码的手机在同一个省。",
          "created_at": "2025-03-16T08:59:23Z"
        }
      ]
    },
    {
      "issue_number": 1122,
      "title": "[Bug]: 拉进微信群修改群昵称后，艾特机器人后台不接收消息，不回复",
      "body": "### 消息平台适配器\n\ngewechat（个人微信）\n\n### 运行环境\n\n3.4.8、统信UOS、python3.10.14\n\n### 异常情况\n\n如题：将机器人拉进微信群，修改了它的群昵称后，再艾特后台没有接收消息，单独聊天窗口发消息可以正常接收回复。如果我在已经登录的情况下，修改了微信的昵称，再单独发消息是不是也会出现不接收消息的情况。\n\n### 复现步骤\n\n如上\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "xiyuan-Sir",
      "author_type": "User",
      "created_at": "2025-02-24T09:31:40Z",
      "updated_at": "2025-03-16T08:58:45Z",
      "closed_at": "2025-03-16T08:58:44Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1122/reactions",
        "total_count": 2,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 2
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1122",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1122",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:39.298979",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "已修复，将在下一个最新版包含。",
          "created_at": "2025-03-16T08:58:44Z"
        }
      ]
    },
    {
      "issue_number": 1192,
      "title": "[Bug]: 在接入个人微信后在群消息发送命令会失效",
      "body": "### 消息平台适配器\n\ngewechat（个人微信）\n\n### 运行环境\n\nv3.4.10.3 docker\n\n### 异常情况\n\n例如发送 !cmd langbot收到后会把他当作消息内容处理而不是命令\n查看日志后发现 好像命令的前面加了个人ID而导至的失败\n部分日志如下:\n2025-03-14 11:13:04 [03-14 03:13:04.632] process.py (42) - [INFO] : 处理 group_12345678@chatroom 的请求(1): abcd_011:\n2025-03-14 11:13:04  !cmd\n\n这里的abcd_011就是微信的ID\n\n### 复现步骤\n\n个人微信, 在群消息里发送langbot命令\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "lify-dev",
      "author_type": "User",
      "created_at": "2025-03-14T05:11:36Z",
      "updated_at": "2025-03-16T08:55:44Z",
      "closed_at": "2025-03-16T08:55:43Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1192/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1192",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1192",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:39.501120",
      "comments": [
        {
          "author": "magicrain1979",
          "body": "同问。微信群所有命令都以大模型的形式回复内容，而不是执行命令。再一个，大模型没法联网，回答内容截止只到前年，如何能联网查询最新信息？",
          "created_at": "2025-03-15T04:09:43Z"
        },
        {
          "author": "RockChinQ",
          "body": "命令问题已修复，将包含在下一个最新版。  \n其他问题请开新issue讨论。",
          "created_at": "2025-03-16T08:55:43Z"
        }
      ]
    },
    {
      "issue_number": 1126,
      "title": "[Feature]: 钉钉图片、文件摘要/汇总功能",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n如题",
      "state": "closed",
      "author": "tjaol",
      "author_type": "User",
      "created_at": "2025-02-25T02:34:28Z",
      "updated_at": "2025-03-16T08:53:48Z",
      "closed_at": "2025-03-16T08:53:47Z",
      "labels": [
        "eh: Feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1126/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1126",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1126",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:39.661114",
      "comments": [
        {
          "author": "wangcham",
          "body": "之后会考虑添加这些功能。",
          "created_at": "2025-02-26T07:10:21Z"
        },
        {
          "author": "RockChinQ",
          "body": "这个可以写个插件来做，主程序不会支持类似垂类应用。",
          "created_at": "2025-03-16T08:53:47Z"
        }
      ]
    },
    {
      "issue_number": 1183,
      "title": "[Plugin]: 请求登记新插件 AccessControl 权限控制插件",
      "body": "### 插件名称\n\nAccessControl 权限控制插件\n\n### 插件代码库地址\n\nhttps://github.com/sanxianxiaohuntun/AccessControl\n\n### 插件简介\n\n管理员系统\n私聊白名单管理\n群聊白名单管理\n群聊黑白名单模式\n群成员白名单管理\n群成员黑名单管理\n使用YAML配置文件持久化存储\n完整的命令行管理接口\n/ac 帮助 查看帮助",
      "state": "closed",
      "author": "sanxianxiaohuntun",
      "author_type": "User",
      "created_at": "2025-03-11T02:00:32Z",
      "updated_at": "2025-03-11T04:05:01Z",
      "closed_at": "2025-03-11T04:05:00Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1183/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1183",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1183",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:39.843303",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "好了。表扬。",
          "created_at": "2025-03-11T04:05:00Z"
        }
      ]
    },
    {
      "issue_number": 1022,
      "title": "[Bug]: 启动时报错: 平台适配器运行出错",
      "body": "### 消息平台适配器\n\ngewechat（个人微信）\n\n### 运行环境\n\nDocker\n\n### 异常情况\n\ndocker compose up\n启动后, 报错 `langbot  | [02-06 12:17:44.969] manager.py (161) - [ERROR] : 平台适配器运行出错: Cannot connect to host gewe:2531 ssl:default [Connect call failed ('172.21.0.2', 2531)]\n`\n\ngewe已经启动了\n```\nCONTAINER ID   IMAGE     COMMAND            CREATED          STATUS          PORTS                                                                               NAMES\ncfde265316a8   gewe      \"/usr/sbin/init\"   35 minutes ago   Up 10 minutes   3306/tcp, 0.0.0.0:2531-2532->2531-2532/tcp, :::2531-2532->2531-2532/tcp, 6379/tcp   gewe\n\n```\n\n### 复现步骤\n\n直接docker compose up就会出现\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "crytjy",
      "author_type": "User",
      "created_at": "2025-02-06T12:20:37Z",
      "updated_at": "2025-03-11T01:35:33Z",
      "closed_at": "2025-02-24T04:27:32Z",
      "labels": [
        "bug?",
        "Stale"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1022/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1022",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1022",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:40.015366",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "1. 检查俩容器是否已按照文档放置在同一个网络，能否正常联通\n2. 检查gewechat容器日志，是否正常启动",
          "created_at": "2025-02-06T12:22:33Z"
        },
        {
          "author": "doubleJazzCat",
          "body": "> 1. 检查俩容器是否已按照文档放置在同一个网络，能否正常联通\n> 2. 检查gewechat容器日志，是否正常启动\n\ngewe有点捞啊, 容器都跑不起来",
          "created_at": "2025-02-10T07:34:24Z"
        },
        {
          "author": "Wayneless",
          "body": "同问题，未解决",
          "created_at": "2025-03-11T01:34:12Z"
        },
        {
          "author": "Wayneless",
          "body": "> 1. 检查俩容器是否已按照文档放置在同一个网络，能否正常联通\n> 2. 检查gewechat容器日志，是否正常启动\n\n\n\n> ### 消息平台适配器\n> gewechat（个人微信）\n> \n> ### 运行环境\n> Docker\n> \n> ### 异常情况\n> docker compose up 启动后, 报错 `langbot | [02-06 12:17:44.969] manager.py (161) - [ERROR] : 平台适配器运行出错: Cannot connect to host gewe:2531 ssl:default [Connect call failed ('1",
          "created_at": "2025-03-11T01:34:41Z"
        },
        {
          "author": "RockChinQ",
          "body": "这个就是gewe没正常运行，看gewe日志。",
          "created_at": "2025-03-11T01:35:32Z"
        }
      ]
    },
    {
      "issue_number": 1167,
      "title": "疑问如果使用国外的api，怎么办？",
      "body": "我使用的是docker搭建的langbot+Gewechat，现在的问题是如果我开了代理，就没法发信息，如果不开，又没办法ping上国外的http，求助该怎么办？\n\n![Image](https://github.com/user-attachments/assets/68bd84a6-c878-4ae9-8dec-8fd53c3268f4)",
      "state": "closed",
      "author": "wexiao17",
      "author_type": "User",
      "created_at": "2025-03-06T08:50:40Z",
      "updated_at": "2025-03-10T14:54:47Z",
      "closed_at": "2025-03-10T14:54:47Z",
      "labels": [
        "Stale"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1167/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1167",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1167",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:40.222295",
      "comments": [
        {
          "author": "wangcham",
          "body": "更改baseurl，指向可以访问的地址。",
          "created_at": "2025-03-06T15:03:17Z"
        }
      ]
    },
    {
      "issue_number": 1182,
      "title": "[Bug]: 访问控制白名单模式无法忽略群消息",
      "body": "### 消息平台适配器\n\ngewechat（个人微信）\n\n### 运行环境\n\n v3.4.10.2、ubuntu22、python3.10.12 Docker\n\n### 异常情况\n\n访问控制白名单模式无法忽略群消息\n\n![Image](https://github.com/user-attachments/assets/1f798fbc-310e-412f-ae2a-376efdeee8d9)\n\n![Image](https://github.com/user-attachments/assets/e107614a-90ae-435a-a709-2466d6d07c74)\n\n![Image](https://github.com/user-attachments/assets/a5473181-8cdf-41d0-bb71-4b0d715633ed)\n\n![Image](https://github.com/user-attachments/assets/11fbab61-3405-47b9-ba04-2e50372220af)\n\n### 复现步骤\n\n开启访问控制白名单模式\n\n### 启用的插件\n\n[bot] 所有插件(3):\n\n#1 LinkAnalysis \n解析哔哩哔哩、GitHub、Gitee等多种链接并展示信息\nv0.7\n作者: sheetung\n\n#2 Hello \nhello world\nv0.1\n作者: RockChinQ\n\n#3 KeysChat \n关键词触发插件\nv0.13\n作者: sheetung",
      "state": "closed",
      "author": "sheetung",
      "author_type": "User",
      "created_at": "2025-03-10T12:35:29Z",
      "updated_at": "2025-03-10T12:40:04Z",
      "closed_at": "2025-03-10T12:40:02Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1182/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1182",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1182",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:40.400941",
      "comments": [
        {
          "author": "sheetung",
          "body": "sorry 我的问题",
          "created_at": "2025-03-10T12:40:02Z"
        }
      ]
    },
    {
      "issue_number": 1178,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nhttps://github.com/ldyers/snakeData\n\n### 插件代码库地址\n\nhttps://github.com/ldyers/snakeData\n\n### 插件简介\n\nPlease look at README",
      "state": "closed",
      "author": "ldyers",
      "author_type": "User",
      "created_at": "2025-03-10T02:24:26Z",
      "updated_at": "2025-03-10T08:48:06Z",
      "closed_at": "2025-03-10T08:48:06Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1178/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1178",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1178",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:40.601752",
      "comments": [
        {
          "author": "ldyers",
          "body": "根据HelloPlugin模板修改而来，输入激活符号，写入数据，生成总结图片。已自测成功。请通过上架插架市场。",
          "created_at": "2025-03-10T02:28:19Z"
        },
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2025-03-10T08:48:06Z"
        }
      ]
    },
    {
      "issue_number": 1176,
      "title": "[Bug]: 下载完依赖后再次打开main.py就会报错然后自动关闭",
      "body": "### 消息平台适配器\n\n其他（或暂未使用）\n\n### 运行环境\n\nV3.4.10.2,Windows Server 2022 Datacenter,Python 3.13.2,江苏\n\n### 异常情况\n\n下载完依赖后再次打开main.py后会停顿一会，然后出现以下信息，随后程序自动关闭。重新下载安装后问题仍然存在。尝试切换到v3.4.10.1，也是一样的情况。\n![Image](https://github.com/user-attachments/assets/0d8b4733-bb7c-40d9-81a8-636ef65aa01b)\n\n### 复现步骤\n\n下载完依赖后再次打开就出现了，我还没修改任何东西。之前安装了Lagrange，但还没有运行。\n\n### 启用的插件\n\n尚未使用任何插件",
      "state": "closed",
      "author": "fcdjds",
      "author_type": "User",
      "created_at": "2025-03-08T05:46:07Z",
      "updated_at": "2025-03-08T06:31:31Z",
      "closed_at": "2025-03-08T06:31:31Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1176/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1176",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1176",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:40.813562",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "只支持python 3.10.1 - 3.12.x",
          "created_at": "2025-03-08T05:48:14Z"
        },
        {
          "author": "fcdjds",
          "body": "好的，感谢大佬，切换python版本后成功了",
          "created_at": "2025-03-08T06:30:23Z"
        }
      ]
    },
    {
      "issue_number": 1175,
      "title": "[Bug]: 使用宝塔nginx反向代理127.0.0.1:2284并且开启ssl后还是校验失败",
      "body": "### 消息平台适配器\n\nqqofficial（QQ官方API Webhook）\n\n### 运行环境\n\nDocker\n\n### 异常情况\n\n校验失败\n\n### 复现步骤\n\n在宝塔的网站界面选择反向代理选项，开启ssl，反向代理127.0.0.1:2284\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "paipaiio",
      "author_type": "User",
      "created_at": "2025-03-07T15:49:57Z",
      "updated_at": "2025-03-08T01:12:03Z",
      "closed_at": "2025-03-08T01:12:03Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1175/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1175",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1175",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:41.001766",
      "comments": []
    },
    {
      "issue_number": 1042,
      "title": "[Feature]: 是否能像现有的问答AI一样，提供流式回复用户，deepseek深度思考模型，体感用下来会很卡顿",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n问题很简单，但是有深度思考，回复就很慢\n\n![Image](https://github.com/user-attachments/assets/0ea51ca0-cb55-463a-b222-e4200976b5fe)",
      "state": "open",
      "author": "leeAx",
      "author_type": "User",
      "created_at": "2025-02-09T12:04:52Z",
      "updated_at": "2025-03-06T16:13:34Z",
      "closed_at": null,
      "labels": [
        "m: Provider",
        "m: Platform",
        "pd: Need design"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 12,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1042/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1042",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1042",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:41.001791",
      "comments": [
        {
          "author": "leeAx",
          "body": "希望有流式输出，用户使用体验就好很多",
          "created_at": "2025-02-09T12:05:47Z"
        },
        {
          "author": "likeaturtle",
          "body": "+1",
          "created_at": "2025-02-09T12:37:56Z"
        },
        {
          "author": "leeAx",
          "body": "目前飞书可以实现流式消息输出",
          "created_at": "2025-02-09T13:58:14Z"
        },
        {
          "author": "wuwen635028360",
          "body": "+1",
          "created_at": "2025-02-10T02:36:25Z"
        },
        {
          "author": "Yuai007",
          "body": "或者 能不能把deepseek的think过程 做个可选项 做一个屏蔽  直接输出结果   不然输出的结果太多了  \n",
          "created_at": "2025-02-17T04:25:51Z"
        }
      ]
    },
    {
      "issue_number": 1169,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nLangBotPluginDocument\n\n### 插件代码库地址\n\nhttps://github.com/unanmed/LangBotPluginDocument\n\n### 插件简介\n\n通过 RAG（文档索引增强）技术，使得文档接入大模型成为可能，可以使用此插件来部署文档类 AI 机器人，高性能，响应速度快。",
      "state": "closed",
      "author": "unanmed",
      "author_type": "User",
      "created_at": "2025-03-06T13:00:47Z",
      "updated_at": "2025-03-06T13:05:58Z",
      "closed_at": "2025-03-06T13:05:57Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1169/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1169",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1169",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:41.219323",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "神！感谢贡献！",
          "created_at": "2025-03-06T13:05:57Z"
        }
      ]
    },
    {
      "issue_number": 1147,
      "title": "[Bug]: 选择runner为dify时，飞书机器人似乎不支持群聊艾特回答问题",
      "body": "### 消息平台适配器\n\nlark（飞书）\n\n### 运行环境\n\nv3.4.8\n\n### 异常情况\n\n选择runner为dify时，飞书机器人似乎不支持群聊艾特回答问题，单聊可以正常使用\n\n### 复现步骤\n\n无\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "ZQFORWARD",
      "author_type": "User",
      "created_at": "2025-02-28T07:55:08Z",
      "updated_at": "2025-03-05T09:24:03Z",
      "closed_at": "2025-03-05T09:24:02Z",
      "labels": [
        "bug?",
        "Please take it seriously",
        "Stale"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1147/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1147",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1147",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:41.390039",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "你这信息太少了，根本不知道是什么情况",
          "created_at": "2025-02-28T11:13:22Z"
        }
      ]
    },
    {
      "issue_number": 1161,
      "title": "[Bug]: 个人微信发送消息后无任何返回",
      "body": "### 消息平台适配器\n\ngewechat（个人微信）\n\n### 运行环境\n\nDocker\n\n### 异常情况\n\n发送消息后无任何返回，能够在日志中看到一个 500状态码的请求\n\n![Image](https://github.com/user-attachments/assets/9a88b967-de1e-4497-bf0e-159a307d1740)\n\n### 复现步骤\n\n从上图中可以看到钉钉的聊天可以正常的与大模型交流和返回，仅仅实在个人微信的时候发生了问题\n\n### 启用的插件\n\n无",
      "state": "closed",
      "author": "chengliang4810",
      "author_type": "User",
      "created_at": "2025-03-04T12:37:50Z",
      "updated_at": "2025-03-05T09:23:18Z",
      "closed_at": "2025-03-05T09:23:16Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1161/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1161",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1161",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:41.553576",
      "comments": [
        {
          "author": "PokersKun",
          "body": "同样遇到一样的问题\n<img width=\"767\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/b58a74a5-cd29-47ae-9fcd-3db74049d200\" />",
          "created_at": "2025-03-04T13:50:11Z"
        },
        {
          "author": "ZeroDeng01",
          "body": "> 同样遇到一样的问题 <img alt=\"Image\" width=\"767\" src=\"https://private-user-images.githubusercontent.com/32659429/419042128-b58a74a5-cd29-47ae-9fcd-3db74049d200.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NDE",
          "created_at": "2025-03-04T15:58:14Z"
        },
        {
          "author": "RockChinQ",
          "body": "已在最新版修复，麻烦更新到 3.4.10.1：https://docs.langbot.app/deploy/update.html",
          "created_at": "2025-03-05T09:23:16Z"
        }
      ]
    },
    {
      "issue_number": 1149,
      "title": "[Bug]: 在webui中初始化管理员账号密码时密码带符号导致无法登录webui",
      "body": "### 消息平台适配器\n\nqqofficial（QQ官方API Webhook）\n\n### 运行环境\n\nv3.4.8 Ubuntu20.04 x64 Python3.10\n\n### 异常情况\n\n完成搭建后进入webui初始化时在管理员密码处输入带符号的密码可以正常初始化，但是登陆时提示Object of type bytes is not JSON serializable\n\n![Image](https://github.com/user-attachments/assets/751a0b54-5d0c-4e51-a3d3-c0f3fa99564e)\n\n### 复现步骤\n\n进入webui初始化时在管理员密码处输入带符号的密码完成初始化，登陆时提示Object of type bytes is not JSON serializable\n\n\n\n### 启用的插件\n\n无",
      "state": "closed",
      "author": "SQMY-dor",
      "author_type": "User",
      "created_at": "2025-02-28T18:36:27Z",
      "updated_at": "2025-03-03T04:41:19Z",
      "closed_at": "2025-03-03T04:41:18Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1149/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1149",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1149",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:41.764657",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "我试了一下，`{},;.`这些都可以啊？\n你提供一下 F12 的调试信息呢？你可以先删除 data/persistence.db 以重新初始化",
          "created_at": "2025-03-01T04:02:26Z"
        },
        {
          "author": "SQMY-dor",
          "body": "重新初始化后测试，得出结论是由于云服务厂商的离谱封禁端口策略导致无法完成登录，not a bug",
          "created_at": "2025-03-03T04:41:18Z"
        }
      ]
    },
    {
      "issue_number": 1156,
      "title": "[Bug]: 使用插件时不能够成功发送图片",
      "body": "### 消息平台适配器\n\ngewechat（个人微信）\n\n### 运行环境\n\nv3.4.10 Docker\n\n### 异常情况\n\n当发送的内容为markdown图片链接时，bot发送消息是空白\n\n![Image](https://github.com/user-attachments/assets/6174e674-8518-436c-8edf-5a38703ed3b1)\n插件关键代码如下\n\n![Image](https://github.com/user-attachments/assets/e6c704a5-627f-4162-b725-58f9f2f027a5)\n\n### 复现步骤\n\n![Image](https://github.com/user-attachments/assets/2e349455-7821-40d7-9e99-ba92e42b5090)\n\n### 启用的插件\n\n使用插件为：https://github.com/user-attachments/assets/2e349455-7821-40d7-9e99-ba92e42b5090",
      "state": "closed",
      "author": "haojian1",
      "author_type": "User",
      "created_at": "2025-03-03T03:13:05Z",
      "updated_at": "2025-03-03T04:14:47Z",
      "closed_at": "2025-03-03T04:14:47Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1156/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1156",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1156",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:41.989671",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "具体是哪个插件？您贴这个链接是图片链接",
          "created_at": "2025-03-03T03:14:32Z"
        },
        {
          "author": "haojian1",
          "body": "> 具体是哪个插件？您贴这个链接是图片链接\n\n抱歉贴错了，应该是这个插件:https://github.com/kirifujinagisa/RussianRoulette",
          "created_at": "2025-03-03T03:16:10Z"
        },
        {
          "author": "RockChinQ",
          "body": "这个插件好像没有发图片的逻辑啊？",
          "created_at": "2025-03-03T03:34:45Z"
        },
        {
          "author": "haojian1",
          "body": "> 这个插件好像没有发图片的逻辑啊？\n\n可以请教一下发图片的代码思路吗，我尝试着实现一下",
          "created_at": "2025-03-03T03:37:06Z"
        },
        {
          "author": "RockChinQ",
          "body": "看看文档来构造一个带图片的消息链：https://docs.langbot.app/plugin/dev/messages.html#%E6%B6%88%E6%81%AF%E9%93%BE\n\n你这个问题，可能是因为你用的插件是用 base64 构造图片的，但gewechat只支持发送url图片，你要是自己写插件的话，记得用url来构造图片组件。",
          "created_at": "2025-03-03T03:38:59Z"
        }
      ]
    },
    {
      "issue_number": 1101,
      "title": "[Bug]: gewechat 无法发送图片",
      "body": "### 消息平台适配器\n\ngewechat（个人微信）\n\n### 运行环境\n\ndocker\n\n### 异常情况\n\n无法发送图片\n\n### 复现步骤\n\n使用 https://github.com/sanxianxiaohuntun/XiaocxPlugin 这个插件, 对添加图像试过 url, base64, path 方式\n\nimage_url = match.group(1)  # 提取图像 URL\nprint(f\"image url {image_url}\")\nimage_storage = self.download_and_compress_image(image_url)\nif image_storage is None:\n    parts.append(Plain('❌图片下载失败, %s' % image_url))\nelse:\n    parts.append(Image(url=image_url))  # 添加图像消息\n\n返回\n\n<img width=\"976\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/de666152-9684-4bac-a05c-43469f96bd6d\" />\n\n### 启用的插件\n\nhttps://github.com/sanxianxiaohuntun/XiaocxPlugin",
      "state": "closed",
      "author": "lemoncat7",
      "author_type": "User",
      "created_at": "2025-02-19T06:51:03Z",
      "updated_at": "2025-03-02T13:50:44Z",
      "closed_at": "2025-03-02T13:50:43Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1101/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1101",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1101",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:42.208986",
      "comments": [
        {
          "author": "shockno1",
          "body": "gewe的接口没写完，自己实现一下",
          "created_at": "2025-02-25T03:47:17Z"
        },
        {
          "author": "haojian1",
          "body": "@shockno1 可以咨询一下怎么实现吗",
          "created_at": "2025-02-28T08:09:26Z"
        },
        {
          "author": "RockChinQ",
          "body": "现在主分支已经支持了，可以等待发版。\n",
          "created_at": "2025-02-28T08:10:40Z"
        },
        {
          "author": "haojian1",
          "body": "> 现在主分支已经支持了，可以等待发版。\n\n好像还是没有解决，是不是因为这个插件发送图片使用的是markdown图片链接",
          "created_at": "2025-03-02T13:22:31Z"
        },
        {
          "author": "RockChinQ",
          "body": "这个issue的问题已经在3.4.10修复了，如果有新问题，请开新issue讨论。",
          "created_at": "2025-03-02T13:50:43Z"
        }
      ]
    },
    {
      "issue_number": 882,
      "title": "[Bug]: \u001b[31m[2024-09-11 10:56:27.214] /app/pkg/pipeline/controller.py (94) - [ERROR] : 模型请求失败: 请求参数错误: Error code: 400 - {'error': {'message': \"* GenerateContentRequest.contents[0].parts[0].data: required oneof field 'data' must have one initialized field\\n (request id: 202409111056268631070276dBm4C6R)\", 'type': '', 'param': '', 'code': 400}}\u001b[0m",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\nDocker\n\n### QChatGPT版本\n\nv3.3.3.1\n\n### 异常情况\n\n使用new api自建api节点，使用gpt4o模型正常，调用gemini模型报错400，在new api端设置名称映射把gemini换成gpt4o依然报错，使用消息平台为nepcat\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "lumosshythat",
      "author_type": "User",
      "created_at": "2024-09-11T03:08:22Z",
      "updated_at": "2025-03-02T10:28:21Z",
      "closed_at": "2025-03-02T10:28:21Z",
      "labels": [
        "bug?",
        "m: Provider"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/882/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/882",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/882",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:42.423608",
      "comments": [
        {
          "author": "Olga19821109",
          "body": "同问",
          "created_at": "2024-09-25T01:25:40Z"
        },
        {
          "author": "the-lazy-me",
          "body": "看文档配置llm-models",
          "created_at": "2024-09-25T06:06:30Z"
        },
        {
          "author": "RockChinQ",
          "body": "可以自己调试一下，最近在忙公司项目。  \r\n欢迎PR。",
          "created_at": "2024-09-25T06:47:15Z"
        },
        {
          "author": "Olga19821109",
          "body": "Thank you\r\n\r\n________________________________\r\n发件人: Junyan Qin ***@***.***>\r\n发送时间: 2024年9月25日 6:47\r\n收件人: RockChinQ/QChatGPT ***@***.***>\r\n抄送: Olga19821109 ***@***.***>; Comment ***@***.***>\r\n主题: Re: [RockChinQ/QChatGPT] [Bug]: \u001b[31m[2024-09-11 10:56:27.214] /app/pkg/pipeline/controller.py (94) - [ER",
          "created_at": "2024-09-25T07:07:09Z"
        },
        {
          "author": "Olga19821109",
          "body": "Thank you, I'll try\r\n________________________________\r\n发件人: Xiaoyu Su ***@***.***>\r\n发送时间: 2024年9月25日 6:06\r\n收件人: RockChinQ/QChatGPT ***@***.***>\r\n抄送: Olga19821109 ***@***.***>; Comment ***@***.***>\r\n主题: Re: [RockChinQ/QChatGPT] [Bug]: \u001b[31m[2024-09-11 10:56:27.214] /app/pkg/pipeline/controller.py (94",
          "created_at": "2024-09-25T07:08:16Z"
        }
      ]
    },
    {
      "issue_number": 1144,
      "title": "[Feature]: 请求支持Anthropic的最新混合推理模型Claude3.7-Sonnet",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n这次的模型和以往有些不同，参数中有一个thinking，开启了就像deepseek一样进行“深度思考”，关闭了就像3.5-Sonnet一样，不知道有没有可能在llm-models.json或者别的文件中设置这一项的开关？\n这次的3.7-Sonnet也可以用claude-3.7-sonnet-latest的名称来避免模型不断更新的麻烦√",
      "state": "closed",
      "author": "Tigrex-Dai",
      "author_type": "User",
      "created_at": "2025-02-27T21:05:03Z",
      "updated_at": "2025-03-02T07:39:59Z",
      "closed_at": "2025-03-02T07:39:59Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1144/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1144",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1144",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:42.652861",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "你可以在provider.json里加，requester里的args里加一个thinking选项，你试试看有没有效果",
          "created_at": "2025-02-28T03:24:56Z"
        },
        {
          "author": "Tigrex-Dai",
          "body": "我修改了pkg/provider/modelmgr/entity.py，增加了一个thinking的选项，\npkg/provider/modelmgr/requesters/anthropicmsgs.py里增加了对应的thinking参数，\n测试了以后发现可以正常运行不会报错，但看了一眼好像langbot现在不支持Anthropic的tool_use，我应该没有办法测试thinking功能是否真实有效",
          "created_at": "2025-02-28T12:08:22Z"
        },
        {
          "author": "RockChinQ",
          "body": "@Tigrex-Dai 你提个pr？或者你给我发个key？我这号都被封了",
          "created_at": "2025-03-01T04:18:42Z"
        }
      ]
    },
    {
      "issue_number": 763,
      "title": "[Feature]: 支持 Claude 3 的 Tool Use",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\nhttps://docs.anthropic.com/claude/docs/tool-use",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-05-07T15:04:01Z",
      "updated_at": "2025-03-01T12:34:43Z",
      "closed_at": "2025-03-01T12:34:42Z",
      "labels": [
        "eh: Improve",
        "m: Provider",
        "m: Tools"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/763/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.4",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/763",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/763",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:42.858861",
      "comments": []
    },
    {
      "issue_number": 1138,
      "title": "[Bug]: 应用启动插件无法加载。classic.py (202) - [ERROR] : 加载插件模块 difyimgaudio.main 时发生错误",
      "body": "### 消息平台适配器\n\n钉钉机器人\n\n### 运行环境\n\ndocker\n\n### 异常情况\n\n[02-27 08:11:49.020] classic.py (202) - [ERROR] : 加载插件模块 difyimgaudio.main 时发生错误\n\n\n### 复现步骤\n\n插件[difyimgaudio](https://github.com/bright141/difyimgaudio)安装后，插件列表不显示（已重新加载插件，重启docker容器）。\n\n![Image](https://github.com/user-attachments/assets/e5587b77-6255-4ec3-abb7-6b8644dd0a0e)\n\n\n重启容器提示：[02-27 08:11:49.020] classic.py (202) - [ERROR] : 加载插件模块 difyimgaudio.main 时发生错误\n\n![Image](https://github.com/user-attachments/assets/8896343f-6410-4ac5-a303-0499f6120cad)\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "zhanghuijun0",
      "author_type": "User",
      "created_at": "2025-02-27T08:26:52Z",
      "updated_at": "2025-02-28T15:53:18Z",
      "closed_at": "2025-02-28T15:52:54Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1138/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1138",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1138",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:42.858883",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "贴一下控制台的日志呢？",
          "created_at": "2025-02-28T03:26:03Z"
        },
        {
          "author": "zhanghuijun0",
          "body": "> 贴一下控制台的日志呢？\n\n```\nWARNING: pip is being invoked by an old script wrapper. This will fail in a future version of pip.\nPlease see https://github.com/pypa/pip/issues/5599 for advice on fixing the underlying issue.\nTo avoid this problem you can invoke Python with '-m pip' instead of running pip directl",
          "created_at": "2025-02-28T04:42:18Z"
        },
        {
          "author": "zhanghuijun0",
          "body": "> 贴一下控制台的日志呢？\n\n```\n\n[02-28 03:38:22.237] manager.py (78) - [INFO] : 初始化平台适配器 0: dingtalk\n[02-28 03:38:22.239] manager.py (78) - [INFO] : 初始化平台适配器 1: dingtalk\n[02-28 03:38:23.519] show_notes.py (26) - [INFO] : 当前版本：v3.4.9.4\n[02-28 03:38:23.988] app.py (172) - [INFO] : ================================",
          "created_at": "2025-02-28T04:43:07Z"
        },
        {
          "author": "RockChinQ",
          "body": "重新安装一下这个插件，现在更新了：https://github.com/bright141/difyimgaudio",
          "created_at": "2025-02-28T15:52:54Z"
        }
      ]
    },
    {
      "issue_number": 1145,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nSourceServerBot\n\n### 插件代码库地址\n\nhttps://github.com/lzmjlrt/SourceServerBot\n\n### 插件简介\n\nSourceServerBot 是一个用于查询和监控 Valve Source 引擎游戏服务器(如 CS:GO、GMOD、TF2 等)状态的机器人插件。它可以显示服务器基本信息、当前地图、在线人数以及详细的玩家列表。",
      "state": "closed",
      "author": "lzmjlrt",
      "author_type": "User",
      "created_at": "2025-02-28T02:42:17Z",
      "updated_at": "2025-02-28T03:22:22Z",
      "closed_at": "2025-02-28T03:22:21Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1145/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1145",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1145",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:43.073840",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2025-02-28T03:22:21Z"
        }
      ]
    },
    {
      "issue_number": 865,
      "title": "[Bug]: Claude3.5 sonnet识图时出现未处理的异常404 message = Not found报错",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\nWindows 11 中国大陆\n\n### QChatGPT版本\n\nv3.3.0.2\n\n### 异常情况\n\n![image](https://github.com/user-attachments/assets/7c2fd91c-86a0-4989-9fd6-20ac73f2b965)\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "Tigrex-Dai",
      "author_type": "User",
      "created_at": "2024-08-07T10:03:01Z",
      "updated_at": "2025-02-27T20:57:21Z",
      "closed_at": "2025-02-27T20:57:20Z",
      "labels": [
        "bug?",
        "m: Provider"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/865/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/865",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/865",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:43.250932",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "这个情况我没有遇到过，可能是图片过期了或者是网络环境问题。这一个图片下载的过程比较 workaround，具体实现可以看看 https://github.com/RockChinQ/QChatGPT/blob/master/pkg/utils/image.py",
          "created_at": "2024-09-22T08:54:33Z"
        },
        {
          "author": "Tigrex-Dai",
          "body": "现在基本上没问题了，好像是从v3.4.1.3之后就修复了√",
          "created_at": "2025-02-27T20:57:20Z"
        }
      ]
    },
    {
      "issue_number": 1143,
      "title": "[Bug]: 我自己插件主动发送消息报错",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\ndocker\n\n### 异常情况\n\n我向账号发送消息后，原本是直接返回我定好的内容\n\n![Image](https://github.com/user-attachments/assets/6dd0fc83-b1ae-46ca-ba11-5f8b7bcac963)\n\n，也不会报错，docker更新后就包这个错![Image](https://github.com/user-attachments/assets/6f4175f8-b69f-45ae-a823-93010e2c2a5e)\n\n\n### 复现步骤\n\n![Image](https://github.com/user-attachments/assets/90f8078c-c566-4696-a0c1-50f41f2bf6c0)\n\n### 启用的插件\n\n自编插件？功能也很简单，只有发送到指定用户",
      "state": "closed",
      "author": "fdc310",
      "author_type": "User",
      "created_at": "2025-02-27T18:32:04Z",
      "updated_at": "2025-02-27T20:57:09Z",
      "closed_at": "2025-02-27T20:57:09Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1143/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1143",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1143",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:43.508557",
      "comments": []
    },
    {
      "issue_number": 1109,
      "title": "[Bug]: 个人微信扫码登录提示成功后又自动掉线？",
      "body": "### 消息平台适配器\n\ngewechat（个人微信）\n\n### 运行环境\n\ndocker\n\n### 异常情况\n\n目前部署到了微信扫码这一步，扫完登录后弹出日志 [1] [INFO] 172.19.0.3:48556 POST /gewechat/callback 1.1 500 265 6544\n\n\n![Image](https://github.com/user-attachments/assets/76b8b9c8-bb3b-4c34-9953-ae6098c45c60)\n\n通过其他微信发送信息给bot微信后，bot微信的手机端也会被下线（提示：为了你的账号安全，请重新登录），并且bot微信也没有任何回复。\n\n### 复现步骤\n\n问题尚存\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "gitcat-sudo",
      "author_type": "User",
      "created_at": "2025-02-21T03:20:57Z",
      "updated_at": "2025-02-27T03:43:48Z",
      "closed_at": "2025-02-27T03:43:47Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1109/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1109",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1109",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:43.508580",
      "comments": [
        {
          "author": "zhangshaorui",
          "body": "这个得要求 服务器端微信 跟你手机端微信 在一个省吧",
          "created_at": "2025-02-21T06:21:27Z"
        },
        {
          "author": "gitcat-sudo",
          "body": "> 这个得要求 服务器端微信 跟你手机端微信 在一个省吧\n\n确实不在，bot放阿里云了",
          "created_at": "2025-02-21T08:31:01Z"
        },
        {
          "author": "RockChinQ",
          "body": "我也这样，只能找gewechat那边问问。",
          "created_at": "2025-02-27T03:43:47Z"
        }
      ]
    },
    {
      "issue_number": 719,
      "title": "[Feature]: 建议适配CharacterGLM-6B",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\nCharacterGLM-6B是以chatglm2基础修改或升级而来专门用于角色扮演的ai。详情在https://github.com/thu-coai/CharacterGLM-6B",
      "state": "closed",
      "author": "bright141",
      "author_type": "User",
      "created_at": "2024-03-11T16:10:42Z",
      "updated_at": "2025-02-27T03:34:57Z",
      "closed_at": "2025-02-27T03:34:57Z",
      "labels": [
        "eh: Improve",
        "m: Provider"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/719/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.4",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/719",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/719",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:43.685192",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "现在应该可以用了罢。",
          "created_at": "2025-02-27T03:34:57Z"
        }
      ]
    },
    {
      "issue_number": 1125,
      "title": "docker部署时，无法接收到消息，并且会提示超时，时什么原因，应该如何处理？",
      "body": "### 消息平台适配器\n\n其他（或暂未使用）\n\n### 运行环境\n\nwin11系统下在wsl-ubuntu22.04中使用docker容器部署\n\n### 异常情况\n\n[Lark] [2025-02-24 16:50:27,374] [ERROR] receive message loop exit, err: sent 1011 (internal error) keepalive ping timeout; no close frame received [conn_id=7475027653431721985]\n\n感觉时docker环境下，网络不通，需要怎样配置呢？实在docker-compose文件里面配置吗？如何配置？还是有其他的配置方式？\n\n### 复现步骤\n\n[Lark] [2025-02-24 16:50:27,374] [ERROR] receive message loop exit, err: sent 1011 (internal error) keepalive ping timeout; no close frame received [conn_id=7475027653431721985]\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "Twinhead880",
      "author_type": "User",
      "created_at": "2025-02-24T17:03:08Z",
      "updated_at": "2025-02-27T03:33:13Z",
      "closed_at": "2025-02-27T03:33:13Z",
      "labels": [
        "bug?",
        "Stale"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1125/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1125",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1125",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:43.860020",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "多提供一些信息，你这一行日志不顶用啊。",
          "created_at": "2025-02-25T04:11:39Z"
        },
        {
          "author": "VipCrazyMaster",
          "body": "是否已经根据教程配置？对于LangBot 和消息平台如果都分别部署在不同容器中，需要配置各自的容器网络和各自容器的docker-compose.yaml 文件\n以下是四种情况下的网络配置详解。\nhttps://docs.langbot.app/deploy/network-details.html",
          "created_at": "2025-02-26T15:06:06Z"
        },
        {
          "author": "VipCrazyMaster",
          "body": "另，除了各自容器网络需要配置，请检查防火墙端口是否已启用，这点在你启动langbot时已经有提示说明。",
          "created_at": "2025-02-26T15:07:53Z"
        }
      ]
    },
    {
      "issue_number": 1060,
      "title": "[Bug]: 平台适配器运行出错: Cannot connect to host gewe:2531 ssl:default [Temporary failure in name resolution]",
      "body": "### 消息平台适配器\n\ngewechat（个人微信）\n\n### 运行环境\n\nDocker\n\n### 异常情况\n\n在阿里云上尝试个人微信部署，启动langbot时报错，全部步骤跟着文档走，langbot和gewe都是docker部署，最后启动容器时报错\n\n<img width=\"1237\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/e8193fe6-2633-47ab-8ef6-b4a26e350f97\" />\n<img width=\"1108\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/ced109de-e163-41bc-8cff-ad557d111f76\" />\n\n### 复现步骤\n\n<img width=\"440\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/6284bce6-b9fb-4b05-8ef0-be343ff88e29\" />\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "zzr0716",
      "author_type": "User",
      "created_at": "2025-02-11T03:55:58Z",
      "updated_at": "2025-02-27T02:25:35Z",
      "closed_at": "2025-02-15T12:19:50Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 11,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1060/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1060",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1060",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:44.047107",
      "comments": [
        {
          "author": "ramocky",
          "body": "同样问题",
          "created_at": "2025-02-11T10:46:02Z"
        },
        {
          "author": "EarendelArc",
          "body": "同样问题+1",
          "created_at": "2025-02-11T12:35:33Z"
        },
        {
          "author": "RockChinQ",
          "body": "你们都看看gewechat这个容器在不在正常运行",
          "created_at": "2025-02-11T12:43:31Z"
        },
        {
          "author": "yinjiajin",
          "body": "istoreos环境，用compose直接将2个docker放进一个桥接里面（不要手建，就用deploy.sh里面的自建的方案），好像可以是可以跳过2531问题。",
          "created_at": "2025-02-12T06:57:17Z"
        },
        {
          "author": "BigDragonlin",
          "body": "看一个gewechat的容器日志，冻结的话到gewechat这个项目issue里找解决方法",
          "created_at": "2025-02-12T09:43:41Z"
        }
      ]
    },
    {
      "issue_number": 1134,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nKawaiiDashboard\n\n### 插件代码库地址\n\nhttps://github.com/Hanschase/KawaiiDashboard\n\n### 插件简介\n\n适用于LangBot的服务器基本信息插件，使用更加可爱的面板图片展示服务器基本数据",
      "state": "closed",
      "author": "Hanschase",
      "author_type": "User",
      "created_at": "2025-02-26T13:51:12Z",
      "updated_at": "2025-02-26T14:54:50Z",
      "closed_at": "2025-02-26T14:54:49Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1134/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1134",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1134",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:44.297662",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2025-02-26T14:54:49Z"
        }
      ]
    },
    {
      "issue_number": 1030,
      "title": "[Bug]: docker 部署langbot + gewechat，bot不回复消息",
      "body": "### 消息平台适配器\n\ngewechat（个人微信）\n\n### 运行环境\n\nLangBot版本：docker镜像（2025/02/06版本   sha256: *ba9948）、操作系统：群晖DMS7.2 、系统架构：x86、Python版本：3.8.15\n\n### 异常情况\n\n![Image](https://github.com/user-attachments/assets/597e8c75-8085-48d2-9ede-84a9e13448a8)\n如上图，通过docker-compose up启动后，扫码登录成功。\n通过主微信给bot微信发送!help后，命令行只显示172.20.0.2:34240 POST /gewechat/callbacl 1.1 200 6025\n\nlangbot容器配置如下：\n![Image](https://github.com/user-attachments/assets/88c42686-672c-46c1-9eb2-6b7cae464a40)\n![Image](https://github.com/user-attachments/assets/89d72ccb-81e7-4151-a6a0-99494d7ec7ba)\n\ngewe容器配置如下：\n![Image](https://github.com/user-attachments/assets/38a01a3f-de5f-49ad-8bd0-c635a799ec8e)\n\n每次给bot微信发送消息后，命令行只显示如下日志：\n\n![Image](https://github.com/user-attachments/assets/42801ecb-1fb1-439d-8c2b-edfb428f2ae5)\n\n### 复现步骤\n\n均采用默认配置，刚刚安装好langbot和gewe容器\n\n修改配置文件如下：\n- platform.json\n{\n            \"adapter\": \"aiocqhttp\",\n            \"enable\": false,\n            \"host\": \"0.0.0.0\",\n            \"port\": 2280,\n            \"access-token\": \"\"\n }，\n {\n            \"adapter\": \"gewechat\",\n            \"enable\": true,\n            \"gewechat_url\": \"http://gewe:2531\",\n            \"port\": 2286,\n            \"callback_url\": \"http://langbot:2286/gewechat/callback\",\n            \"app_id\": \"wx_6M3ZGFBZcr4WBfSN********\",\n            \"token\": \"7890c527f7bb4160aecb8c17a0******\"\n  }\n\n其余内容未改动\n\n### 启用的插件\n\n未下载任何插件",
      "state": "closed",
      "author": "Suvee",
      "author_type": "User",
      "created_at": "2025-02-07T16:32:15Z",
      "updated_at": "2025-02-26T05:26:24Z",
      "closed_at": "2025-02-26T05:26:24Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 14,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1030/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1030",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1030",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:44.467587",
      "comments": [
        {
          "author": "Suvee",
          "body": "使用微信A 扫码登录，log提示登录成功，可以正常收到HTTP报文。\n\n使用微信B 添加 微信A（BOT）为好友，发送消息后，log显示可以收到HTTP报文，并且回复200. 但是微信A不回复（开启了DEBUG=true，命令行下也没有出现消息解析的过程）\n\n使用微信A 给自己发消息，log可以收到HTTP报文，并且触发消息解析。发送!help之类的命令也会回复",
          "created_at": "2025-02-08T03:20:34Z"
        },
        {
          "author": "BigDragonlin",
          "body": "> 使用微信A 扫码登录，log提示登录成功，可以正常收到HTTP报文。\n> \n> 使用微信B 添加 微信A（BOT）为好友，发送消息后，log显示可以收到HTTP报文，并且回复200. 但是微信A不回复（开启了DEBUG=true，命令行下也没有出现消息解析的过程）\n> \n> 使用微信A 给自己发消息，log可以收到HTTP报文，并且触发消息解析。发送!help之类的命令也会回复\n\n俺也一样",
          "created_at": "2025-02-09T11:52:58Z"
        },
        {
          "author": "ywtz-619",
          "body": "似乎俺也一样，补充一下：除了私聊不响应，在群里@bot是可以正常回复的。但无论是私聊还是群聊，命令仍然用不了（群聊输入命令会直接由模型回复）。",
          "created_at": "2025-02-09T13:17:51Z"
        },
        {
          "author": "RockChinQ",
          "body": "> 似乎俺也一样，补充一下：除了私聊不响应，在群里[@bot](https://github.com/bot)是可以正常回复的。但无论是私聊还是群聊，命令仍然用不了（群聊输入命令会直接由模型回复）。\n\n@ywtz-619 命令都要在前方加`!`惊叹号哈，触发前缀可以在配置文件command.json设置",
          "created_at": "2025-02-09T13:20:28Z"
        },
        {
          "author": "ywtz-619",
          "body": "> > 似乎俺也一样，补充一下：除了私聊不响应，在群里[@bot](https://github.com/bot)是可以正常回复的。但无论是私聊还是群聊，命令仍然用不了（群聊输入命令会直接由模型回复）。\n> \n> [@ywtz-619](https://github.com/ywtz-619) 命令都要在前方加`!`惊叹号哈，触发前缀可以在配置文件command.json设置\n\n加了的。我参照 @Suvee 的问题测试了一下，确实用bot账号给我自己的账号私聊，日志里显示是可以正常触发消息，包括命令的。但给bot私聊则没有反应，群聊里@bot则只有模型回复没有命令响应。",
          "created_at": "2025-02-09T13:32:54Z"
        }
      ]
    },
    {
      "issue_number": 1074,
      "title": "[Bug]: 大号微信无法获取消息",
      "body": "### 消息平台适配器\n\ngewechat（个人微信）\n\n### 运行环境\n\n最新版本，ubuntu\n\n### 异常情况\n\n无法获取个人大号微信的wxid（猜测），导致无法设置管理员\n若设置其他账号为管理员时，微信大号发送消息，查看日志获取不到消息，导致机器人不能响应。\n\n只能通过群聊响应，当我@机器人的时候，日志会把我以前的微信号带到消息去，如图\n\n![Image](https://github.com/user-attachments/assets/b8a19451-a5f2-4d3a-9bf6-5c90da3be7a4)\n\n### 复现步骤\n\n尝试用改过几次微信号的微信去发送消息\n也可以找个已经接入微信的小号加上我微信：ssmingpang\n因为本人的微信可能有问题\n\n### 启用的插件\n\n无",
      "state": "closed",
      "author": "pangsiuming",
      "author_type": "User",
      "created_at": "2025-02-13T02:16:19Z",
      "updated_at": "2025-02-25T09:17:24Z",
      "closed_at": "2025-02-25T09:17:23Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1074/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1074",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1074",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:44.678151",
      "comments": [
        {
          "author": "Yuai007",
          "body": "我也有过这个问题  命令只能自己发自己用  但是可以拉群 通过群@发送消息    然后用deepseek r1 14b作为模型用的话  消息内容中的</think>有没有知道怎么去掉的\n",
          "created_at": "2025-02-13T11:56:01Z"
        },
        {
          "author": "BigDragonlin",
          "body": "#1030 可能和这些问题一样",
          "created_at": "2025-02-14T07:11:46Z"
        },
        {
          "author": "RockChinQ",
          "body": "之前的代码涉及一个bug，已经设置过微信id的账户没法作为bot号，最新版 3.4.9.4 已经修复了这个问题，大家可以试一下新版：https://docs.langbot.app/deploy/update.html",
          "created_at": "2025-02-25T09:17:19Z"
        }
      ]
    },
    {
      "issue_number": 1129,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\n我的世界java服务器状态查询插件\n\n### 插件代码库地址\n\nhttps://github.com/yiyihuohuo/mcserverquery\n\n### 插件简介\n\n一个超级简单的小插件，提供我的世界java版服务器状态查询\n\n![Image](https://github.com/user-attachments/assets/39b9ecdc-a039-43f2-9b5d-a1405070aa4d)\n\n![Image](https://github.com/user-attachments/assets/343bba72-bf9c-45a8-af82-4ba0a127f901)",
      "state": "closed",
      "author": "yiyihuohuo",
      "author_type": "User",
      "created_at": "2025-02-25T05:44:31Z",
      "updated_at": "2025-02-25T08:56:35Z",
      "closed_at": "2025-02-25T08:56:34Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1129/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1129",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1129",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:44.880987",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2025-02-25T08:56:34Z"
        }
      ]
    },
    {
      "issue_number": 1106,
      "title": "[Bug]: 企业微信保存回调地址一直失败",
      "body": "### 消息平台适配器\n\n其他（或暂未使用）\n\n### 运行环境\n\ndocker\n\n### 异常情况\n\n![Image](https://github.com/user-attachments/assets/ce16d65c-ea89-4f64-bcf1-80b7fe31bd72)\n\n### 复现步骤\n\n![Image](https://github.com/user-attachments/assets/2d2319ff-3b1d-45ed-9c95-1864dd620e76)\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "TestEg-Tian",
      "author_type": "User",
      "created_at": "2025-02-20T11:51:30Z",
      "updated_at": "2025-02-25T08:44:43Z",
      "closed_at": "2025-02-21T03:59:43Z",
      "labels": [
        "Please take it seriously"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 14,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1106/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1106",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1106",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:45.036482",
      "comments": [
        {
          "author": "wangcham",
          "body": "按照文档走一遍流程。",
          "created_at": "2025-02-20T12:11:34Z"
        },
        {
          "author": "TestEg-Tian",
          "body": "> 按照文档走一遍流程。\n\n完全按照文档来的，试了好几遍了哎",
          "created_at": "2025-02-21T00:54:02Z"
        },
        {
          "author": "TestEg-Tian",
          "body": "这个是报错日志：\n183.47.117.101 - - [21/Feb/2025:09:08:25 +0800] \"GET /callback/command?msg_signature={}&timestamp={}&nonce={}&echostr={} HTTP/1.1\" 502 154 \"-\" \"Mozilla/4.0\" \"-\"\n\n报了个502",
          "created_at": "2025-02-21T01:10:08Z"
        },
        {
          "author": "wangcham",
          "body": "麻烦发一下data/logs/langbot-xxxx，这个是控制台日志",
          "created_at": "2025-02-21T02:38:22Z"
        },
        {
          "author": "TestEg-Tian",
          "body": "![Image](https://github.com/user-attachments/assets/3fd75012-20fc-4754-9fbb-2af7226dd539)",
          "created_at": "2025-02-21T02:44:55Z"
        }
      ]
    },
    {
      "issue_number": 1124,
      "title": "[Bug]:",
      "body": "### 消息平台适配器\n\ngewechat（个人微信）\n\n### 运行环境\n\nDocker\n\n### 异常情况\n\n代码版本V3.4.9.2，使用gewechat适配器登录微信，报错了。报错后gewechat配置文件没有自动记录微信的id 和 token。\n\n![Image](https://github.com/user-attachments/assets/486afeda-56fd-4680-b6c7-fb598f6412b5)\n\n### 复现步骤\n\n1、填写gewechat适配器配置，id、token留空\n2、重载消息平台\n3、扫码登录\n4、报错但提示登录成功，且没有自动记录微信的id 和 token。\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "linzhipeng",
      "author_type": "User",
      "created_at": "2025-02-24T11:00:04Z",
      "updated_at": "2025-02-24T15:02:38Z",
      "closed_at": "2025-02-24T15:00:28Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1124/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1124",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1124",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:50.253038",
      "comments": [
        {
          "author": "linzhipeng",
          "body": "打开Debug模式后的日志\n\n![Image](https://github.com/user-attachments/assets/5cbdcf4f-ba4c-462f-8acb-26323ad0eacf)",
          "created_at": "2025-02-24T11:34:50Z"
        },
        {
          "author": "RockChinQ",
          "body": "应该可以了，15分钟之后更新一下到 3.4.9.3，不行再提新issue",
          "created_at": "2025-02-24T15:02:12Z"
        }
      ]
    },
    {
      "issue_number": 1117,
      "title": "[Bug]: 钉钉语音转文字提示bug",
      "body": "### 消息平台适配器\n\n其他（或暂未使用）\n\n### 运行环境\n\nwindows 11\n\n### 异常情况\n\n钉钉发语音给机器人提示一下错误：\nTraceback (most recent call last):\n  File \"C:\\Users\\Wangyi60\\LangBot\\libs\\dingtalk_api\\api.py\", line 165, in get_message\n    if message_data[\"Content\"].startswith(\"@\"+self.robot_name):\n       ~~~~~~~~~~~~^^^^^^^^^^^\nKeyError: 'Content'\n[02-23 11:48:07.148] process.py (42) - [INFO] : 处理 person_0 的请求(0):\n[02-23 11:48:07.512] chat.py (94) - [ERROR] : 对话(0)请求失败: RequesterError 模型请求失败: 请求参数错误: Error code: 400 - {'error': {'message': 'Invalid request: messages must not be empty', 'type': 'invalid_request_error'}}\n[02-23 11:48:07.730] controller.py (98) - [ERROR] : 模型请求失败: 请求参数错误: Error code: 400 - {'error': {'message': 'Invalid request: messages must not be empty', 'type': 'invalid_request_error'}}\n\n\n\n### 复现步骤\n\n![Image](https://github.com/user-attachments/assets/f51eaae0-8d09-4a42-a329-1980f57e0096)\n\n### 启用的插件\n\n无启用插件",
      "state": "closed",
      "author": "tjaol",
      "author_type": "User",
      "created_at": "2025-02-23T06:32:45Z",
      "updated_at": "2025-02-24T13:19:16Z",
      "closed_at": "2025-02-24T13:19:16Z",
      "labels": [
        "pd: Need design"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1117/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1117",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1117",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:50.462727",
      "comments": [
        {
          "author": "wangcham",
          "body": "目前钉钉不支持接受语音消息，后续会考虑适配此功能。",
          "created_at": "2025-02-24T13:18:46Z"
        }
      ]
    },
    {
      "issue_number": 1111,
      "title": "[Bug]: 在llm-model.json里面新增模型，重载LLM之后会被恢复成原来的版本",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\nv3.4.8、Ubuntu、X86、Docker\n\n### 异常情况\n\n已经在llm-models.json中增加一个叫deepseek-r1-32b的模型，但是每次重载LLM之后就直接被删了，我记得更新之前是正常的。\n\n[02-21 08:30:48.248] manager.py (70) - [INFO] : 初始化平台适配器 0: aiocqhttp\n[02-21 08:30:49.467] show_notes.py (26) - [INFO] : 当前版本：v3.4.8\n[02-21 08:30:49.523] app.py (168) - [INFO] : =======================================\n[02-21 08:30:49.523] app.py (168) - [INFO] : ✨ 您可通过以下方式访问管理面板\n[02-21 08:30:49.524] app.py (168) - [INFO] : \n[02-21 08:30:49.524] app.py (168) - [INFO] : 🏠 本地地址：http://127.0.0.1:5300/\n[02-21 08:30:49.525] app.py (168) - [INFO] : \n[02-21 08:30:49.526] app.py (168) - [INFO] : 📌 如果您在容器中运行此程序，请确保容器的 5300 端口已对外暴露\n[02-21 08:30:49.526] app.py (168) - [INFO] : 🔗 若要使用公网地址访问，请阅读以下须知\n[02-21 08:30:49.526] app.py (168) - [INFO] :    1. 公网地址仅供参考，请以您的主机公网 IP 为准；\n[02-21 08:30:49.527] app.py (168) - [INFO] :    2. 要使用公网地址访问，请确保您的主机具有公网 IP，并且系统防火墙已放行 5300 端口；\n[02-21 08:30:49.527] app.py (168) - [INFO] : \n[02-21 08:30:49.527] app.py (168) - [INFO] : 🤯 WebUI 仍处于 Beta 测试阶段，如有问题或建议请反馈到 https://github.com/RockChinQ/LangBot/issues\n[02-21 08:30:49.528] app.py (168) - [INFO] : =======================================\n[02-21 08:31:06.394] controller.py (189) - [ERROR] : 处理请求时出错 query_id=0 stage=PreProcessor : 无法确定模型 deepseek-r1-32b 的信息，请在元数据中配置\n[02-21 08:42:40.231] app.py (201) - [INFO] : 执行热重载 scope=provider\n[02-21 08:43:57.274] app.py (201) - [INFO] : 执行热重载 scope=provider\n[02-21 08:46:13.672] app.py (201) - [INFO] : 执行热重载 scope=provider\n[02-21 08:47:37.113] app.py (201) - [INFO] : 执行热重载 scope=provider\n\n### 复现步骤\n\n在llm-models.json中增加一个叫deepseek-r1-32b的模型，但是每次重载LLM之后就直接被删了。\n\n### 启用的插件\n\n未启动任何插件",
      "state": "closed",
      "author": "wang149876",
      "author_type": "User",
      "created_at": "2025-02-21T08:53:53Z",
      "updated_at": "2025-02-24T13:03:37Z",
      "closed_at": "2025-02-24T13:03:37Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1111/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1111",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1111",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:50.641774",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "贴一下你的llm-models.json内容？",
          "created_at": "2025-02-21T09:01:12Z"
        },
        {
          "author": "wang149876",
          "body": "{\n    \"list\": [\n        {\n            \"name\": \"default\",\n            \"requester\": \"openai-chat-completions\",\n            \"token_mgr\": \"openai\",\n            \"tool_call_supported\": false,\n            \"vision_supported\": false\n        },\n        {\n            \"name\": \"gpt-4o\",\n            \"tool_call_su",
          "created_at": "2025-02-21T09:27:19Z"
        },
        {
          "author": "wang149876",
          "body": "问题找到了，docker部署的修改完llm-models.json之重启docker容器，不能直接重载LLM。",
          "created_at": "2025-02-24T13:03:34Z"
        }
      ]
    },
    {
      "issue_number": 1082,
      "title": "[Bug]: 硅基流动api-key错误",
      "body": "### 消息平台适配器\n\ngewechat（个人微信）\n\n### 运行环境\n\nDocker\n\n### 异常情况\n\ngewechat 正常启动\nlangbot正常启动\n在微信发送消息时报错：\n\n![Image](https://github.com/user-attachments/assets/6db57371-6c77-4984-a1c2-c8d3f40b9bad)\n\napi-key硅基流动官方申请 可以正常使用\n\n![Image](https://github.com/user-attachments/assets/15272aa7-ceb6-43b8-982b-404ef431f187)\n\n### 复现步骤\n\n1.修改消息适配器\n\n![Image](https://github.com/user-attachments/assets/04e1ba57-09fd-4d7b-ae3f-3dc75f46a863)\n\n2.修改硅基流动api-key\n\n![Image](https://github.com/user-attachments/assets/f10ec468-0018-474c-9a5e-170b18ff3ec4)\n\n3.修改模型\n\n![Image](https://github.com/user-attachments/assets/6f2b524a-ae15-4ea9-b475-c0fecbd4b4f4)\n\n启动接收消息报错\n\n![Image](https://github.com/user-attachments/assets/860facf7-6373-4926-b669-4c07b64053a8)\n\n请问这是我配置有问题吗？\n\n另外还想问怎么设置使用R1或者V3模型 实在metadata/llm-modle.json增加即可吗 \n\n感谢！🙇‍\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "yantaosun",
      "author_type": "User",
      "created_at": "2025-02-14T08:26:25Z",
      "updated_at": "2025-02-24T12:58:04Z",
      "closed_at": "2025-02-15T02:47:22Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1082/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1082",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1082",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:50.858534",
      "comments": [
        {
          "author": "15sdwweqqe",
          "body": "我也是一样的报错，没辙了",
          "created_at": "2025-02-15T02:22:35Z"
        },
        {
          "author": "RockChinQ",
          "body": "你俩看一下元数据: `llm-models.json`的配置，默认的`deepseek-chat`模型使用的请求器是`deepseek-chat-completions`官方的，你现在要用siliconflow，就去llm-models.json那加一个新的模型（不要直接改原来的设置，会被覆盖），具体写法看：https://docs.langbot.app/config/metadata/llm-models.html\n\n实在不懂，可以加群抄抄别人的。",
          "created_at": "2025-02-15T02:47:22Z"
        },
        {
          "author": "itsyshao",
          "body": "> 你俩看一下元数据: `llm-models.json`的配置，默认的`deepseek-chat`模型使用的请求器是`deepseek-chat-completions`官方的，你现在要用siliconflow，就去llm-models.json那加一个新的模型（不要直接改原来的设置，会被覆盖），具体写法看：https://docs.langbot.app/config/metadata/llm-models.html\n> \n> 实在不懂，可以加群抄抄别人的。\n\n@RockChinQ hi，修改llm-models.json后，新加模型后，重载LLM 管理器，llm-models.json",
          "created_at": "2025-02-17T08:49:35Z"
        },
        {
          "author": "wang149876",
          "body": "> > 你俩看一下元数据: `llm-models.json`的配置，默认的`deepseek-chat`模型使用的请求器是`deepseek-chat-completions`官方的，你现在要用siliconflow，就去llm-models.json那加一个新的模型（不要直接改原来的设置，会被覆盖），具体写法看：https://docs.langbot.app/config/metadata/llm-models.html\n> > 实在不懂，可以加群抄抄别人的。\n> \n> [@RockChinQ](https://github.com/RockChinQ) hi，修改llm-models.",
          "created_at": "2025-02-24T02:31:16Z"
        },
        {
          "author": "yantaosun",
          "body": "> > > 你俩看一下元数据: `llm-models.json`的配置，默认的`deepseek-chat`模型使用的请求器是`deepseek-chat-completions`官方的，你现在要用siliconflow，就去llm-models.json那加一个新的模型（不要直接改原来的设置，会被覆盖），具体写法看：https://docs.langbot.app/config/metadata/llm-models.html\n> > > 实在不懂，可以加群抄抄别人的。\n> > \n> > \n> > [@RockChinQ](https://github.com/RockChinQ) hi，",
          "created_at": "2025-02-24T08:55:40Z"
        }
      ]
    },
    {
      "issue_number": 1120,
      "title": "[Bug]: 最新版出现bug \"components.yaml\" 报 illegal multibyte sequence",
      "body": "### 消息平台适配器\n\n其他（或暂未使用）\n\n### 运行环境\n\nwindows 11\n\n### 异常情况\n\n```\nTraceback (most recent call last):\n  File \"C:\\Users\\Wangyi60\\LangBot\\pkg\\core\\boot.py\", line 65, in main\n    app_inst = await make_app(loop)\n               ^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Wangyi60\\LangBot\\pkg\\core\\boot.py\", line 43, in make_app\n    await stage_inst.run(ap)\n  File \"C:\\Users\\Wangyi60\\LangBot\\pkg\\core\\stages\\build_app.py\", line 37, in run\n    discover.discover_blueprint(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        \"components.yaml\"\n        ^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Wangyi60\\LangBot\\pkg\\discover\\engine.py\", line 189, in discover_blueprint\n    components[name] = self.load_blueprint_comp_group(component, owner)\n                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Wangyi60\\LangBot\\pkg\\discover\\engine.py\", line 173, in load_blueprint_comp_group\n    components.extend(self.load_component_manifests_in_dir(path, owner, no_save))\n                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Wangyi60\\LangBot\\pkg\\discover\\engine.py\", line 160, in load_component_manifests_in_dir\n    components.append(self.load_component_manifest(os.path.join(path, file), owner, no_save))\n                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Wangyi60\\LangBot\\pkg\\discover\\engine.py\", line 143, in load_component_manifest\n    manifest = yaml.safe_load(f)\n  File \"C:\\Users\\Wangyi60\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\yaml\\__init__.py\", line 125, in safe_load\n    return load(stream, SafeLoader)\n  File \"C:\\Users\\Wangyi60\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\yaml\\__init__.py\", line 79, in load\n    loader = Loader(stream)\n  File \"C:\\Users\\Wangyi60\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\yaml\\loader.py\", line 34, in __init__\n    Reader.__init__(self, stream)\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^\n  File \"C:\\Users\\Wangyi60\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\yaml\\reader.py\", line 85, in __init__\n    self.determine_encoding()\n    ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Wangyi60\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\yaml\\reader.py\", line 124, in determine_encoding\n    self.update_raw()\n    ~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Wangyi60\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\yaml\\reader.py\", line 178, in update_raw\n    data = self.stream.read(size)\nUnicodeDecodeError: 'gbk' codec can't decode byte 0xa8 in position 147: illegal multibyte sequence\n```\n### 复现步骤\n\n正常安装启动，即可复现\n\n### 启用的插件\n\n无插件",
      "state": "closed",
      "author": "tjaol",
      "author_type": "User",
      "created_at": "2025-02-24T06:18:10Z",
      "updated_at": "2025-02-24T07:04:12Z",
      "closed_at": "2025-02-24T06:48:33Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1120/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1120",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1120",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:51.045442",
      "comments": [
        {
          "author": "tjaol",
          "body": "解决了，set PYTHONUTF8=1 && python main.py ",
          "created_at": "2025-02-24T06:46:49Z"
        },
        {
          "author": "RockChinQ",
          "body": "已在 3.4.9.2 修复了。",
          "created_at": "2025-02-24T07:04:11Z"
        }
      ]
    },
    {
      "issue_number": 1119,
      "title": "[Bug]: 使用企业微信机器人时发消息报错\"对话请求失败\"",
      "body": "### 消息平台适配器\n\nwecom（企业微信）\n\n### 运行环境\n\nLangBot：v3.4.9、操作系统：ubuntu22.04、系统架构：x86、python版本：3.12、主机地理位置：上海\n\n### 异常情况\n\n企业微信--->longbot--->oneapi--->deepseek r1 671b\n按照longbot官方文档部署好longbot，对接好oneapi，并添加好企业微信应用后，给应用发消息会提示请求失败。\n\n![Image](https://github.com/user-attachments/assets/a310b65e-ef4b-4cf7-af8b-54d2a8b511eb)\n\n查看oneapi对应的令牌，发现再给企业微信机器人发消息时，令牌额度是有消耗的，因此消息应该是有正常调用到oneapi\n\n查看langbot的报错如下\n\n![Image](https://github.com/user-attachments/assets/41289eda-1be7-4e95-82d5-5c6fa53f9dcd)\n\n通过debug查看报错信息如下\n\n![Image](https://github.com/user-attachments/assets/b2aa6d91-8278-4d42-8be0-025be026d01d)\n\n![Image](https://github.com/user-attachments/assets/e1337065-6a6a-4d02-b5fc-9b3f52da0469)\n\n看报错像是在处理回复时出现了异常，使用deepseek r1及v3模型测试都是如此\n\n\n### 复现步骤\n\n按照longbot官方文档部署好longbot，对接好oneapi，并添加好企业微信应用后，给应用发消息会提示请求失败。\n\n### 启用的插件\n\n![Image](https://github.com/user-attachments/assets/cc559629-ac63-49b9-bb9b-4038a53955e1)",
      "state": "closed",
      "author": "zl2437917",
      "author_type": "User",
      "created_at": "2025-02-24T01:49:38Z",
      "updated_at": "2025-02-24T04:52:57Z",
      "closed_at": "2025-02-24T04:24:51Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1119/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1119",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1119",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:51.241979",
      "comments": [
        {
          "author": "zl2437917",
          "body": "配置信息data/config/provider.json配置了oneapi的接口地址\n\n![Image](https://github.com/user-attachments/assets/7c27fb0c-35c6-4c0a-a16d-c1ab177eeca9)\n\nkey处设置了oneapi对应的key\n\n![Image](https://github.com/user-attachments/assets/17f055ed-1b07-458a-9230-0607614c8005)\n\nmodel处设置了oneapi中令牌可以使用的模型名\n![Image](https://github.c",
          "created_at": "2025-02-24T02:42:38Z"
        },
        {
          "author": "RockChinQ",
          "body": "这个是底层流式请求的格式问题，现在已经回滚为非流式了，可以试一下最新版 3.4.9.1，更新方式见：https://docs.langbot.app/deploy/update.html",
          "created_at": "2025-02-24T04:24:51Z"
        },
        {
          "author": "zl2437917",
          "body": "更新后已正常，感谢",
          "created_at": "2025-02-24T04:52:56Z"
        }
      ]
    },
    {
      "issue_number": 1094,
      "title": "在OpenAI sdk可以调用的API服务在LangBot报错:controller.py (98) - [ERROR] : 'NoneType' object is not subscriptable",
      "body": "### 消息平台适配器\n\nNapCat框架\n\n### 运行环境\n\nubantu 22, docker,\n\n### 异常情况\n\n在OpenAI sdk可以调用的API服务在LangBot报错:`controller.py (98) - [ERROR] : 'NoneType' object is not subscriptable`\n\n```python\nfrom openai import OpenAI\n\n# 创建客户端实例并配置参数\nclient = OpenAI(\n    base_url=\"http://*:5555/v1\",\n    api_key=\"ok\"\n)\n\nresponse = client.chat.completions.create(\n    model=\"gpt_4o\",\n    messages=[\n        {\"role\": \"user\", \"content\": \"你是什么模型\"}\n    ],\n    max_tokens=150,\n    temperature=0.7,\n    stream=False\n)\n\n# 输出结果\nprint(response.choices[0].message.content)\n```\n\n![Image](https://github.com/user-attachments/assets/9be706f1-74f0-49bd-aae5-033ef61f6a11)\n\n## 配置:\n- provide.json\n```json\n{\n  \"dashscope-app-api\": {\n    \"agent\": {\n      \"app-id\": \"Your_app_id\",\n      \"references_quote\": \"参考资料来自:\"\n    },\n    \"api-key\": \"sk-1234567890\",\n    \"app-type\": \"agent\",\n    \"workflow\": {\n      \"app-id\": \"Your_app_id\",\n      \"biz_params\": {\n        \"city\": \"北京\",\n        \"date\": \"2023-08-10\"\n      },\n      \"references_quote\": \"参考资料来自:\"\n    }\n  },\n  \"dify-service-api\": {\n    \"agent\": {\n      \"api-key\": \"app-1234567890\",\n      \"timeout\": 120\n    },\n    \"app-type\": \"chat\",\n    \"base-url\": \"https://api.dify.ai/v1\",\n    \"chat\": {\n      \"api-key\": \"app-1234567890\",\n      \"timeout\": 120\n    },\n    \"workflow\": {\n      \"api-key\": \"app-1234567890\",\n      \"output-key\": \"summary\",\n      \"timeout\": 120\n    }\n  },\n  \"enable-chat\": true,\n  \"enable-vision\": true,\n  \"keys\": {\n    \"anthropic\": [\n      \"sk-1234567890\"\n    ],\n    \"bailian\": [\n      \"sk-xxxxxxx\"\n    ],\n    \"deepseek\": [\n      \"sk-4aa3727cb12047ca86d836ee057eda57\"\n    ],\n    \"gitee\": [],\n    \"gitee-ai\": [\n      \"XXXXX\"\n    ],\n    \"moonshot\": [\n      \"sk-1234567890\"\n    ],\n    \"openai\": [\n      \"ok\"\n    ],\n    \"siliconflow\": [\n      \"sk-**\"\n    ],\n    \"xai\": [\n      \"xai-1234567890\"\n    ],\n    \"you\": [\n      \"ok\"\n    ],\n    \"zhipuai\": [\n      \"xxxxxxx\"\n    ]\n  },\n  \"model\": \"gpt_4o\", // 自定义模型\n  \"prompt\": {\n    \"default\": \"\",\n  },\n  \"prompt-mode\": \"normal\",\n  \"requester\": {\n    \"anthropic-messages\": {\n      \"args\": {\n        \"max_tokens\": 1024\n      },\n      \"base-url\": \"https://api.anthropic.com\",\n      \"timeout\": 120\n    },\n    \"bailian-chat-completions\": {\n      \"args\": {},\n      \"base-url\": \"https://dashscope.aliyuncs.com/compatible-mode/v1\",\n      \"timeout\": 120\n    },\n    \"deepseek-chat-completions\": {\n      \"args\": {},\n      \"base-url\": \"https://api.deepseek.com\",\n      \"timeout\": 120\n    },\n    \"gitee-ai-chat-completions\": {\n      \"args\": {},\n      \"base-url\": \"https://ai.gitee.com/v1\",\n      \"timeout\": 120\n    },\n    \"lmstudio-chat-completions\": {\n      \"args\": {},\n      \"base-url\": \"http://127.0.0.1:1234/v1\",\n      \"timeout\": 120\n    },\n    \"moonshot-chat-completions\": {\n      \"args\": {},\n      \"base-url\": \"https://api.moonshot.cn/v1\",\n      \"timeout\": 120\n    },\n    \"ollama-chat\": {\n      \"args\": {},\n      \"base-url\": \"http://127.0.0.1:11434\",\n      \"timeout\": 600\n    },\n    \"openai-chat-completions\": {\n      \"args\": {},\n      \"base-url\": \"http://***/v1\", // 自定义了服务\n      \"timeout\": 120\n    },\n    \"siliconflow-chat-completions\": {\n      \"args\": {},\n      \"base-url\": \"https://api.siliconflow.cn/v1\",\n      \"timeout\": 120\n    },\n    \"xai-chat-completions\": {\n      \"args\": {},\n      \"base-url\": \"https://api.x.ai/v1\",\n      \"timeout\": 120\n    },\n\n    \"zhipuai-chat-completions\": {\n      \"args\": {},\n      \"base-url\": \"https://open.bigmodel.cn/api/paas/v4\",\n      \"timeout\": 120\n    }\n  },\n  \"runner\": \"local-agent\"\n}\n```\n## debug日志\n```shell\n[02-17 03:48:39.454] app.py (201) - [INFO] : 执行热重载 scope=provider\n[02-17 03:49:05.655] controller.py (38) - [DEBUG] : Checking query query_id=0 launcher_type=<LauncherTypes.PERSON: 'person'> launcher_id=3417759874 sender_id=3417759874 message_event=FriendMessage(message_chain=MessageChain([Source(id=624169545, time=datetime.datetime(2025, 2, 17, 3, 49, 5, 647446)), Plain('你是什么模型？')]), sender=Friend(id=3417759874, nickname='千年破晓', remark='')) message_chain=MessageChain([Source(id=624169545, time=datetime.datetime(2025, 2, 17, 3, 49, 5, 647446)), Plain('你是什么模型？')]) adapter=<pkg.platform.sources.aiocqhttp.AiocqhttpAdapter object at 0x74446491d210> session=None messages=[] prompt=None user_message=None use_model=None use_funcs=None resp_messages=[] resp_message_chain=[] current_stage=None session launcher_type=<LauncherTypes.PERSON: 'person'> launcher_id=3417759874 sender_id=0 use_prompt_name='default' using_conversation=None conversations=[] create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 652995) update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 653009) semaphore=<asyncio.locks.Semaphore object at 0x74446491ca60 [unlocked, value:1]>\n[02-17 03:49:05.659] manager.py (235) - [DEBUG] : 事件 PersonMessageReceived(0) 处理完成，返回值 {}\n[02-17 03:49:05.660] controller.py (184) - [DEBUG] : Processing query query_id=0 launcher_type=<LauncherTypes.PERSON: 'person'> launcher_id=3417759874 sender_id=3417759874 message_event=FriendMessage(message_chain=MessageChain([Source(id=624169545, time=datetime.datetime(2025, 2, 17, 3, 49, 5, 647446)), Plain('你是什么模型？')]), sender=Friend(id=3417759874, nickname='千年破晓', remark='')) message_chain=MessageChain([Source(id=624169545, time=datetime.datetime(2025, 2, 17, 3, 49, 5, 647446)), Plain('你是什么模型？')]) adapter=<pkg.platform.sources.aiocqhttp.AiocqhttpAdapter object at 0x74446491d210> session=None messages=[] prompt=None user_message=None use_model=None use_funcs=None resp_messages=[] resp_message_chain=[] current_stage=None\n[02-17 03:49:05.662] controller.py (138) - [DEBUG] : Stage GroupRespondRuleCheckStage processed query query_id=0 launcher_type=<LauncherTypes.PERSON: 'person'> launcher_id=3417759874 sender_id=3417759874 message_event=FriendMessage(message_chain=MessageChain([Source(id=624169545, time=datetime.datetime(2025, 2, 17, 3, 49, 5, 647446)), Plain('你是什么模型？')]), sender=Friend(id=3417759874, nickname='千年破晓', remark='')) message_chain=MessageChain([Source(id=624169545, time=datetime.datetime(2025, 2, 17, 3, 49, 5, 647446)), Plain('你是什么模型？')]) adapter=<pkg.platform.sources.aiocqhttp.AiocqhttpAdapter object at 0x74446491d210> session=None messages=[] prompt=None user_message=None use_model=None use_funcs=None resp_messages=[] resp_message_chain=[] current_stage=<pkg.pipeline.stagemgr.StageInstContainer object at 0x744464750a30> res result_type=<ResultType.CONTINUE: 1> new_query=Query(query_id=0, launcher_type=<LauncherTypes.PERSON: 'person'>, launcher_id=3417759874, sender_id=3417759874, message_event=FriendMessage(message_chain=MessageChain([Source(id=624169545, time=datetime.datetime(2025, 2, 17, 3, 49, 5, 647446)), Plain('你是什么模型？')]), sender=Friend(id=3417759874, nickname='千年破晓', remark='')), message_chain=MessageChain([Source(id=624169545, time=datetime.datetime(2025, 2, 17, 3, 49, 5, 647446)), Plain('你是什么模型？')]), adapter=<pkg.platform.sources.aiocqhttp.AiocqhttpAdapter object at 0x74446491d210>, session=None, messages=[], prompt=None, user_message=None, use_model=None, use_funcs=None, resp_messages=[], resp_message_chain=[], current_stage=<pkg.pipeline.stagemgr.StageInstContainer object at 0x744464750a30>) user_notice=[] console_notice='' debug_notice='' error_notice=''\n[02-17 03:49:05.663] controller.py (138) - [DEBUG] : Stage BanSessionCheckStage processed query query_id=0 launcher_type=<LauncherTypes.PERSON: 'person'> launcher_id=3417759874 sender_id=3417759874 message_event=FriendMessage(message_chain=MessageChain([Source(id=624169545, time=datetime.datetime(2025, 2, 17, 3, 49, 5, 647446)), Plain('你是什么模型？')]), sender=Friend(id=3417759874, nickname='千年破晓', remark='')) message_chain=MessageChain([Source(id=624169545, time=datetime.datetime(2025, 2, 17, 3, 49, 5, 647446)), Plain('你是什么模型？')]) adapter=<pkg.platform.sources.aiocqhttp.AiocqhttpAdapter object at 0x74446491d210> session=None messages=[] prompt=None user_message=None use_model=None use_funcs=None resp_messages=[] resp_message_chain=[] current_stage=<pkg.pipeline.stagemgr.StageInstContainer object at 0x744464750be0> res result_type=<ResultType.CONTINUE: 1> new_query=Query(query_id=0, launcher_type=<LauncherTypes.PERSON: 'person'>, launcher_id=3417759874, sender_id=3417759874, message_event=FriendMessage(message_chain=MessageChain([Source(id=624169545, time=datetime.datetime(2025, 2, 17, 3, 49, 5, 647446)), Plain('你是什么模型？')]), sender=Friend(id=3417759874, nickname='千年破晓', remark='')), message_chain=MessageChain([Source(id=624169545, time=datetime.datetime(2025, 2, 17, 3, 49, 5, 647446)), Plain('你是什么模型？')]), adapter=<pkg.platform.sources.aiocqhttp.AiocqhttpAdapter object at 0x74446491d210>, session=None, messages=[], prompt=None, user_message=None, use_model=None, use_funcs=None, resp_messages=[], resp_message_chain=[], current_stage=<pkg.pipeline.stagemgr.StageInstContainer object at 0x744464750be0>) user_notice=[] console_notice='' debug_notice='' error_notice=''\n[02-17 03:49:05.672] controller.py (138) - [DEBUG] : Stage PreContentFilterStage processed query query_id=0 launcher_type=<LauncherTypes.PERSON: 'person'> launcher_id=3417759874 sender_id=3417759874 message_event=FriendMessage(message_chain=MessageChain([Source(id=624169545, time=datetime.datetime(2025, 2, 17, 3, 49, 5, 647446)), Plain('你是什么模型？')]), sender=Friend(id=3417759874, nickname='千年破晓', remark='')) message_chain=MessageChain([Plain('你是什么模型？')]) adapter=<pkg.platform.sources.aiocqhttp.AiocqhttpAdapter object at 0x74446491d210> session=None messages=[] prompt=None user_message=None use_model=None use_funcs=None resp_messages=[] resp_message_chain=[] current_stage=<pkg.pipeline.stagemgr.StageInstContainer object at 0x744464750ca0> res result_type=<ResultType.CONTINUE: 1> new_query=Query(query_id=0, launcher_type=<LauncherTypes.PERSON: 'person'>, launcher_id=3417759874, sender_id=3417759874, message_event=FriendMessage(message_chain=MessageChain([Source(id=624169545, time=datetime.datetime(2025, 2, 17, 3, 49, 5, 647446)), Plain('你是什么模型？')]), sender=Friend(id=3417759874, nickname='千年破晓', remark='')), message_chain=MessageChain([Plain('你是什么模型？')]), adapter=<pkg.platform.sources.aiocqhttp.AiocqhttpAdapter object at 0x74446491d210>, session=None, messages=[], prompt=None, user_message=None, use_model=None, use_funcs=None, resp_messages=[], resp_message_chain=[], current_stage=<pkg.pipeline.stagemgr.StageInstContainer object at 0x744464750ca0>) user_notice=[] console_notice='' debug_notice='' error_notice=''\n[02-17 03:49:05.673] manager.py (235) - [DEBUG] : 事件 PromptPreProcessing(1) 处理完成，返回值 {}\n[02-17 03:49:05.675] controller.py (138) - [DEBUG] : Stage PreProcessor processed query query_id=0 launcher_type=<LauncherTypes.PERSON: 'person'> launcher_id=3417759874 sender_id=3417759874 message_event=FriendMessage(message_chain=MessageChain([Source(id=624169545, time=datetime.datetime(2025, 2, 17, 3, 49, 5, 647446)), Plain('你是什么模型？')]), sender=Friend(id=3417759874, nickname='千年破晓', remark='')) message_chain=MessageChain([Plain('你是什么模型？')]) adapter=<pkg.platform.sources.aiocqhttp.AiocqhttpAdapter object at 0x74446491d210> session=Session(launcher_type=<LauncherTypes.PERSON: 'person'>, launcher_id=3417759874, sender_id=0, use_prompt_name='default', using_conversation=Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673177), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673185), use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True), use_funcs=[], uuid=None), conversations=[Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673177), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673185), use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True), use_funcs=[], uuid=None)], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 652995), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 653009), semaphore=<asyncio.locks.Semaphore object at 0x74446491ca60 [locked]>) messages=[] prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]) user_message=Message(role='user', name=None, content=[ContentElement(type='text', text='你是什么模型？', image_url=None, image_base64=None)], tool_calls=None, tool_call_id=None) use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True) use_funcs=[] resp_messages=[] resp_message_chain=[] current_stage=<pkg.pipeline.stagemgr.StageInstContainer object at 0x744464751120> res result_type=<ResultType.CONTINUE: 1> new_query=Query(query_id=0, launcher_type=<LauncherTypes.PERSON: 'person'>, launcher_id=3417759874, sender_id=3417759874, message_event=FriendMessage(message_chain=MessageChain([Source(id=624169545, time=datetime.datetime(2025, 2, 17, 3, 49, 5, 647446)), Plain('你是什么模型？')]), sender=Friend(id=3417759874, nickname='千年破晓', remark='')), message_chain=MessageChain([Plain('你是什么模型？')]), adapter=<pkg.platform.sources.aiocqhttp.AiocqhttpAdapter object at 0x74446491d210>, session=Session(launcher_type=<LauncherTypes.PERSON: 'person'>, launcher_id=3417759874, sender_id=0, use_prompt_name='default', using_conversation=Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673177), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673185), use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True), use_funcs=[], uuid=None), conversations=[Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673177), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673185), use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True), use_funcs=[], uuid=None)], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 652995), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 653009), semaphore=<asyncio.locks.Semaphore object at 0x74446491ca60 [locked]>), messages=[], prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), user_message=Message(role='user', name=None, content=[ContentElement(type='text', text='你是什么模型？', image_url=None, image_base64=None)], tool_calls=None, tool_call_id=None), use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True), use_funcs=[], resp_messages=[], resp_message_chain=[], current_stage=<pkg.pipeline.stagemgr.StageInstContainer object at 0x744464751120>) user_notice=[] console_notice='' debug_notice='' error_notice=''\n[02-17 03:49:05.677] controller.py (138) - [DEBUG] : Stage ConversationMessageTruncator processed query query_id=0 launcher_type=<LauncherTypes.PERSON: 'person'> launcher_id=3417759874 sender_id=3417759874 message_event=FriendMessage(message_chain=MessageChain([Source(id=624169545, time=datetime.datetime(2025, 2, 17, 3, 49, 5, 647446)), Plain('你是什么模型？')]), sender=Friend(id=3417759874, nickname='千年破晓', remark='')) message_chain=MessageChain([Plain('你是什么模型？')]) adapter=<pkg.platform.sources.aiocqhttp.AiocqhttpAdapter object at 0x74446491d210> session=Session(launcher_type=<LauncherTypes.PERSON: 'person'>, launcher_id=3417759874, sender_id=0, use_prompt_name='default', using_conversation=Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673177), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673185), use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True), use_funcs=[], uuid=None), conversations=[Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673177), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673185), use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True), use_funcs=[], uuid=None)], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 652995), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 653009), semaphore=<asyncio.locks.Semaphore object at 0x74446491ca60 [locked]>) messages=[] prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]) user_message=Message(role='user', name=None, content=[ContentElement(type='text', text='你是什么模型？', image_url=None, image_base64=None)], tool_calls=None, tool_call_id=None) use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True) use_funcs=[] resp_messages=[] resp_message_chain=[] current_stage=<pkg.pipeline.stagemgr.StageInstContainer object at 0x744464751360> res result_type=<ResultType.CONTINUE: 1> new_query=Query(query_id=0, launcher_type=<LauncherTypes.PERSON: 'person'>, launcher_id=3417759874, sender_id=3417759874, message_event=FriendMessage(message_chain=MessageChain([Source(id=624169545, time=datetime.datetime(2025, 2, 17, 3, 49, 5, 647446)), Plain('你是什么模型？')]), sender=Friend(id=3417759874, nickname='千年破晓', remark='')), message_chain=MessageChain([Plain('你是什么模型？')]), adapter=<pkg.platform.sources.aiocqhttp.AiocqhttpAdapter object at 0x74446491d210>, session=Session(launcher_type=<LauncherTypes.PERSON: 'person'>, launcher_id=3417759874, sender_id=0, use_prompt_name='default', using_conversation=Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673177), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673185), use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True), use_funcs=[], uuid=None), conversations=[Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673177), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673185), use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True), use_funcs=[], uuid=None)], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 652995), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 653009), semaphore=<asyncio.locks.Semaphore object at 0x74446491ca60 [locked]>), messages=[], prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), user_message=Message(role='user', name=None, content=[ContentElement(type='text', text='你是什么模型？', image_url=None, image_base64=None)], tool_calls=None, tool_call_id=None), use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True), use_funcs=[], resp_messages=[], resp_message_chain=[], current_stage=<pkg.pipeline.stagemgr.StageInstContainer object at 0x744464751360>) user_notice=[] console_notice='' debug_notice='' error_notice=''\n[02-17 03:49:05.679] controller.py (138) - [DEBUG] : Stage RequireRateLimitOccupancy processed query query_id=0 launcher_type=<LauncherTypes.PERSON: 'person'> launcher_id=3417759874 sender_id=3417759874 message_event=FriendMessage(message_chain=MessageChain([Source(id=624169545, time=datetime.datetime(2025, 2, 17, 3, 49, 5, 647446)), Plain('你是什么模型？')]), sender=Friend(id=3417759874, nickname='千年破晓', remark='')) message_chain=MessageChain([Plain('你是什么模型？')]) adapter=<pkg.platform.sources.aiocqhttp.AiocqhttpAdapter object at 0x74446491d210> session=Session(launcher_type=<LauncherTypes.PERSON: 'person'>, launcher_id=3417759874, sender_id=0, use_prompt_name='default', using_conversation=Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673177), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673185), use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True), use_funcs=[], uuid=None), conversations=[Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673177), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673185), use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True), use_funcs=[], uuid=None)], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 652995), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 653009), semaphore=<asyncio.locks.Semaphore object at 0x74446491ca60 [locked]>) messages=[] prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]) user_message=Message(role='user', name=None, content=[ContentElement(type='text', text='你是什么模型？', image_url=None, image_base64=None)], tool_calls=None, tool_call_id=None) use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True) use_funcs=[] resp_messages=[] resp_message_chain=[] current_stage=<pkg.pipeline.stagemgr.StageInstContainer object at 0x7444647512a0> res result_type=<ResultType.CONTINUE: 1> new_query=Query(query_id=0, launcher_type=<LauncherTypes.PERSON: 'person'>, launcher_id=3417759874, sender_id=3417759874, message_event=FriendMessage(message_chain=MessageChain([Source(id=624169545, time=datetime.datetime(2025, 2, 17, 3, 49, 5, 647446)), Plain('你是什么模型？')]), sender=Friend(id=3417759874, nickname='千年破晓', remark='')), message_chain=MessageChain([Plain('你是什么模型？')]), adapter=<pkg.platform.sources.aiocqhttp.AiocqhttpAdapter object at 0x74446491d210>, session=Session(launcher_type=<LauncherTypes.PERSON: 'person'>, launcher_id=3417759874, sender_id=0, use_prompt_name='default', using_conversation=Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673177), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673185), use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True), use_funcs=[], uuid=None), conversations=[Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673177), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673185), use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True), use_funcs=[], uuid=None)], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 652995), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 653009), semaphore=<asyncio.locks.Semaphore object at 0x74446491ca60 [locked]>), messages=[], prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), user_message=Message(role='user', name=None, content=[ContentElement(type='text', text='你是什么模型？', image_url=None, image_base64=None)], tool_calls=None, tool_call_id=None), use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True), use_funcs=[], resp_messages=[], resp_message_chain=[], current_stage=<pkg.pipeline.stagemgr.StageInstContainer object at 0x7444647512a0>) user_notice=[] console_notice='' debug_notice='' error_notice=''\n[02-17 03:49:05.680] process.py (42) - [INFO] : 处理 person_3417759874 的请求(0): 你是什么模型？\n[02-17 03:49:05.682] controller.py (147) - [DEBUG] : Stage MessageProcessor processed query query_id=0 launcher_type=<LauncherTypes.PERSON: 'person'> launcher_id=3417759874 sender_id=3417759874 message_event=FriendMessage(message_chain=MessageChain([Source(id=624169545, time=datetime.datetime(2025, 2, 17, 3, 49, 5, 647446)), Plain('你是什么模型？')]), sender=Friend(id=3417759874, nickname='千年破晓', remark='')) message_chain=MessageChain([Plain('你是什么模型？')]) adapter=<pkg.platform.sources.aiocqhttp.AiocqhttpAdapter object at 0x74446491d210> session=Session(launcher_type=<LauncherTypes.PERSON: 'person'>, launcher_id=3417759874, sender_id=0, use_prompt_name='default', using_conversation=Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673177), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673185), use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True), use_funcs=[], uuid=None), conversations=[Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673177), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673185), use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True), use_funcs=[], uuid=None)], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 652995), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 653009), semaphore=<asyncio.locks.Semaphore object at 0x74446491ca60 [locked]>) messages=[] prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]) user_message=Message(role='user', name=None, content=[ContentElement(type='text', text='你是什么模型？', image_url=None, image_base64=None)], tool_calls=None, tool_call_id=None) use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True) use_funcs=[] resp_messages=[] resp_message_chain=[] current_stage=<pkg.pipeline.stagemgr.StageInstContainer object at 0x744464750e20> gen\n[02-17 03:49:05.683] manager.py (235) - [DEBUG] : 事件 PersonNormalMessageReceived(2) 处理完成，返回值 {}\n[02-17 03:49:24.467] chat.py (94) - [ERROR] : 对话(0)请求失败: TypeError 'NoneType' object is not subscriptable\n[02-17 03:49:24.472] controller.py (150) - [DEBUG] : Stage MessageProcessor processed query query_id=0 launcher_type=<LauncherTypes.PERSON: 'person'> launcher_id=3417759874 sender_id=3417759874 message_event=FriendMessage(message_chain=MessageChain([Source(id=624169545, time=datetime.datetime(2025, 2, 17, 3, 49, 5, 647446)), Plain('你是什么模型？')]), sender=Friend(id=3417759874, nickname='千年破晓', remark='')) message_chain=MessageChain([Plain('你是什么模型？')]) adapter=<pkg.platform.sources.aiocqhttp.AiocqhttpAdapter object at 0x74446491d210> session=Session(launcher_type=<LauncherTypes.PERSON: 'person'>, launcher_id=3417759874, sender_id=0, use_prompt_name='default', using_conversation=Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673177), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673185), use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True), use_funcs=[], uuid=None), conversations=[Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673177), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673185), use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True), use_funcs=[], uuid=None)], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 652995), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 653009), semaphore=<asyncio.locks.Semaphore object at 0x74446491ca60 [locked]>) messages=[] prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]) user_message=Message(role='user', name=None, content=[ContentElement(type='text', text='你是什么模型？', image_url=None, image_base64=None)], tool_calls=None, tool_call_id=None) use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True) use_funcs=[] resp_messages=[] resp_message_chain=[] current_stage=<pkg.pipeline.stagemgr.StageInstContainer object at 0x744464750e20> res result_type=<ResultType.INTERRUPT: 2> new_query=Query(query_id=0, launcher_type=<LauncherTypes.PERSON: 'person'>, launcher_id=3417759874, sender_id=3417759874, message_event=FriendMessage(message_chain=MessageChain([Source(id=624169545, time=datetime.datetime(2025, 2, 17, 3, 49, 5, 647446)), Plain('你是什么模型？')]), sender=Friend(id=3417759874, nickname='千年破晓', remark='')), message_chain=MessageChain([Plain('你是什么模型？')]), adapter=<pkg.platform.sources.aiocqhttp.AiocqhttpAdapter object at 0x74446491d210>, session=Session(launcher_type=<LauncherTypes.PERSON: 'person'>, launcher_id=3417759874, sender_id=0, use_prompt_name='default', using_conversation=Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673177), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673185), use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True), use_funcs=[], uuid=None), conversations=[Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673177), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673185), use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True), use_funcs=[], uuid=None)], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 652995), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 653009), semaphore=<asyncio.locks.Semaphore object at 0x74446491ca60 [locked]>), messages=[], prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), user_message=Message(role='user', name=None, content=[ContentElement(type='text', text='你是什么模型？', image_url=None, image_base64=None)], tool_calls=None, tool_call_id=None), use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True), use_funcs=[], resp_messages=[], resp_message_chain=[], current_stage=<pkg.pipeline.stagemgr.StageInstContainer object at 0x744464750e20>) user_notice='请求失败' console_notice='' debug_notice='Traceback (most recent call last):\\n  File \"/app/pkg/pipeline/process/handlers/chat.py\", line 77, in handle\\n    async for result in runner.run(query):\\n  File \"/app/pkg/provider/runners/localagent.py\", line 26, in run\\n    msg = await query.use_model.requester.call(query, query.use_model, req_messages, query.use_funcs)\\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 192, in call\\n    return await self._closure(query=query, req_messages=req_messages, use_model=model, use_funcs=funcs)\\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 166, in _closure\\n    resp = await self._req(args)\\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 107, in _req\\n    finish_reason=chunk.choices[0].finish_reason if hasattr(chunk.choices[0], \\'finish_reason\\') and chunk.choices[0].finish_reason is not None else \\'stop\\',\\nTypeError: \\'NoneType\\' object is not subscriptable\\n' error_notice=\"'NoneType' object is not subscriptable\"\n[02-17 03:49:24.920] controller.py (94) - [DEBUG] : Traceback (most recent call last):\n  File \"/app/pkg/pipeline/process/handlers/chat.py\", line 77, in handle\n    async for result in runner.run(query):\n  File \"/app/pkg/provider/runners/localagent.py\", line 26, in run\n    msg = await query.use_model.requester.call(query, query.use_model, req_messages, query.use_funcs)\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 192, in call\n    return await self._closure(query=query, req_messages=req_messages, use_model=model, use_funcs=funcs)\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 166, in _closure\n    resp = await self._req(args)\n  File \"/app/pkg/provider/modelmgr/requesters/chatcmpl.py\", line 107, in _req\n    finish_reason=chunk.choices[0].finish_reason if hasattr(chunk.choices[0], 'finish_reason') and chunk.choices[0].finish_reason is not None else 'stop',\nTypeError: 'NoneType' object is not subscriptable\n[02-17 03:49:24.923] controller.py (98) - [ERROR] : 'NoneType' object is not subscriptable\n[02-17 03:49:24.924] controller.py (154) - [DEBUG] : Stage MessageProcessor interrupted query query_id=0 launcher_type=<LauncherTypes.PERSON: 'person'> launcher_id=3417759874 sender_id=3417759874 message_event=FriendMessage(message_chain=MessageChain([Source(id=624169545, time=datetime.datetime(2025, 2, 17, 3, 49, 5, 647446)), Plain('你是什么模型？')]), sender=Friend(id=3417759874, nickname='千年破晓', remark='')) message_chain=MessageChain([Plain('你是什么模型？')]) adapter=<pkg.platform.sources.aiocqhttp.AiocqhttpAdapter object at 0x74446491d210> session=Session(launcher_type=<LauncherTypes.PERSON: 'person'>, launcher_id=3417759874, sender_id=0, use_prompt_name='default', using_conversation=Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673177), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673185), use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True), use_funcs=[], uuid=None), conversations=[Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673177), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673185), use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True), use_funcs=[], uuid=None)], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 652995), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 653009), semaphore=<asyncio.locks.Semaphore object at 0x74446491ca60 [locked]>) messages=[] prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]) user_message=Message(role='user', name=None, content=[ContentElement(type='text', text='你是什么模型？', image_url=None, image_base64=None)], tool_calls=None, tool_call_id=None) use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True) use_funcs=[] resp_messages=[] resp_message_chain=[] current_stage=<pkg.pipeline.stagemgr.StageInstContainer object at 0x744464750e20>\n[02-17 03:49:24.928] controller.py (192) - [DEBUG] : Query query_id=0 launcher_type=<LauncherTypes.PERSON: 'person'> launcher_id=3417759874 sender_id=3417759874 message_event=FriendMessage(message_chain=MessageChain([Source(id=624169545, time=datetime.datetime(2025, 2, 17, 3, 49, 5, 647446)), Plain('你是什么模型？')]), sender=Friend(id=3417759874, nickname='千年破晓', remark='')) message_chain=MessageChain([Plain('你是什么模型？')]) adapter=<pkg.platform.sources.aiocqhttp.AiocqhttpAdapter object at 0x74446491d210> session=Session(launcher_type=<LauncherTypes.PERSON: 'person'>, launcher_id=3417759874, sender_id=0, use_prompt_name='default', using_conversation=Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673177), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673185), use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True), use_funcs=[], uuid=None), conversations=[Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673177), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 673185), use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True), use_funcs=[], uuid=None)], create_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 652995), update_time=datetime.datetime(2025, 2, 17, 3, 49, 5, 653009), semaphore=<asyncio.locks.Semaphore object at 0x74446491ca60 [locked]>) messages=[] prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]) user_message=Message(role='user', name=None, content=[ContentElement(type='text', text='你是什么模型？', image_url=None, image_base64=None)], tool_calls=None, tool_call_id=None) use_model=LLMModelInfo(name='gpt_4o', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7444647f9cc0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7444647f9930>, tool_call_supported=True, vision_supported=True) use_funcs=[] resp_messages=[] resp_message_chain=[] current_stage=<pkg.pipeline.stagemgr.StageInstContainer object at 0x744464750e20> processed\n[02-17 03:49:25.216] apigroup.py (52) - [DEBUG] : data: {\"basic\": {\"host_id\": \"host_6422ab80-9b06-4e3b-b63d-20f2a9864546\", \"instance_id\": \"instance_b19e7aaf-fdd8-4b65-ade3-afdbfa767886\", \"semantic_version\": \"v3.4.8\", \"platform\": \"docker\", \"rid\": \"5b963558-cea9-4de3-92b0-1368bee6e4c8\"}, \"runtime\": {\"admin_id\": \"['person_3417759874']\", \"msg_source\": \"['aiocqhttp']\", \"account_id\": \"-1\"}, \"session_info\": {\"type\": \"person\", \"id\": \"3417759874\"}, \"query_info\": {\"ability_provider\": \"LangBot.Chat\", \"usage\": 0, \"model_name\": \"gpt_4o\", \"response_seconds\": 19, \"retry_times\": -1}}\n[02-17 03:49:25.217] apigroup.py (53) - [DEBUG] : ret: {\"error\":\"Key: 'UsageQueryDTO.QueryInfo.Usage' Error:Field validation for 'Usage' failed on the 'required' tag\"}\n```\n\n### 复现步骤\n\n见上\n\n### 启用的插件\n\n无",
      "state": "closed",
      "author": "faithererer",
      "author_type": "User",
      "created_at": "2025-02-17T04:00:08Z",
      "updated_at": "2025-02-24T04:26:57Z",
      "closed_at": "2025-02-24T04:26:56Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1094/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1094",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1094",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:51.461504",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "版本多少？更新最新版：https://docs.langbot.app/deploy/update.html",
          "created_at": "2025-02-17T04:10:25Z"
        },
        {
          "author": "faithererer",
          "body": "> 版本多少？更新最新版：https://docs.langbot.app/deploy/update.html\n\n v3.4.8 这个就是最新版吧\n\n![Image](https://github.com/user-attachments/assets/6c8b0b64-6d24-4802-9b13-be0b9d4fdddd)",
          "created_at": "2025-02-17T04:12:15Z"
        },
        {
          "author": "RockChinQ",
          "body": "你这个5555用的是什么服务呢？你自己在pycharm调试一下 LangBot？",
          "created_at": "2025-02-17T04:20:34Z"
        },
        {
          "author": "faithererer",
          "body": "> 你这个5555用的是什么服务呢？你自己在pycharm调试一下 LangBot？\n\n用的逆向[you.com逆向](https://github.com/YIWANG-sketch/YOUChat_Proxy), 我在[SillyTavern](https://github.com/SillyTavern/SillyTavern)设置OpenAI格式良好运行。使用langbot也可以请求后端也进行了生成回复，但是返回数据后就会报错:\n\n![Image](https://github.com/user-attachments/assets/8a359e21-5b2a-46f7-a104-0b",
          "created_at": "2025-02-17T04:25:30Z"
        },
        {
          "author": "RockChinQ",
          "body": "这个是底层流式请求的格式问题，现在已经回滚为非流式了，可以试一下最新版 3.4.9.1，更新方式见：https://docs.langbot.app/deploy/update.html",
          "created_at": "2025-02-24T04:26:56Z"
        }
      ]
    },
    {
      "issue_number": 998,
      "title": "[Bug]: 使用第三方的deepseek api无法使用。[ERROR] : 模型请求失败: 请求错误: Request timed out.",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\nDocker\n\n### 异常情况\n\n我使用硅基流动提供的url和deepseek-ai/DeepSeek-V3模型的api，在项目的provider.json文件中，替换了\n```\n\"keys\": {\n    \"anthropic\": [\n      \"sk-1234567890\"\n    ],\n    \"deepseek\": [\n      \"硅基流动给的密钥\"\n    ],\n    \"gitee\": [],\n    \"gitee-ai\": [\n      \"XXXXX\"\n    ],\n    \"moonshot\": [\n      \"sk-1234567890\"\n    ],\n    \"openai\": [\n      \"sk-1234567890\"\n    ],\n    \"xai\": [\n      \"xai-1234567890\"\n    ],\n    \"zhipuai\": [\n      \"xxxxxxx\"\n    ]\n  },\n```\n```和\"deepseek-chat-completions\": {\n      \"args\": {},\n      },\n      \"base-url\": \"https://api.siliconflow.cn/v1/chat/completions\",#硅基流动的url\n      \"timeout\": 120\n    },\n```\nmodel选择， `\"model\": \"deepseek-chat\"，`\n但是无法连接，报错\n[02-01 03:16:44.788] chat.py (94) - [ERROR] : 对话(31)请求失败: RequesterError 模型请求失败: 请求错误: Request timed out.\n[02-01 03:16:44.942] controller.py (98) - [ERROR] : 模型请求失败: 请求错误: Request timed out.\n机器人功能正常运行，只是不能调用模型。\n\n### 复现步骤\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "459zyt",
      "author_type": "User",
      "created_at": "2025-02-01T03:20:21Z",
      "updated_at": "2025-02-23T02:01:17Z",
      "closed_at": "2025-02-01T17:12:46Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 11,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/998/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/998",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/998",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:51.670709",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "看起来没问题，很有可能是他们服务器卡/过载了。",
          "created_at": "2025-02-01T03:21:59Z"
        },
        {
          "author": "459zyt",
          "body": "> 看起来没问题，很有可能是他们服务器卡/过载了。\n\n不会，因为我不通过机器人调用他们的api，会在15秒内回复我不会超时",
          "created_at": "2025-02-01T03:26:51Z"
        },
        {
          "author": "RockChinQ",
          "body": "你base-url 把后面的 /chat/completions 删掉，只剩`https://api.siliconflow.cn/v1` 就可以了",
          "created_at": "2025-02-01T03:29:10Z"
        },
        {
          "author": "459zyt",
          "body": "> 你base-url 把后面的 /chat/completions 删掉，只剩`https://api.siliconflow.cn/v1` 就可以了\n\n删掉之后，错误变成了，[02-01 03:36:31.531] chat.py (94) - [ERROR] : 对话(50)请求失败: RequesterError 模型请求失败: 无效的 api-key: Error code: 401 - {'error': {'message': 'Authentication Fails (no such user)', 'type': 'authentication_error', 'param",
          "created_at": "2025-02-01T03:40:52Z"
        },
        {
          "author": "RockChinQ",
          "body": "401说明url没有错，错的是你的key。确认一下key是否正确填到了deepseek密钥组，base-url是否更改到了deepseek的requester。\n你自己测试直接调用跟langbot内部使用是不同的，langbot会自动加上 /chat/completions",
          "created_at": "2025-02-01T03:42:56Z"
        }
      ]
    },
    {
      "issue_number": 1112,
      "title": "[Bug]:",
      "body": "### 消息平台适配器\n\n其他（或暂未使用）\n\n### 运行环境\n\n最新的\n\n### 异常情况\n\n一、请这是BUG吗，这是用的火山方舟里的，DEEPSEEK模型，\n\nlangbot  | [2025-02-22 04:44:00 +0000] [1] [INFO] 101.126.59.9:27232 POST /lark/callback 1.1 200 28 1760\nlangbot  | [02-22 04:44:00.650] controller.py (189) - [ERROR] : 处理请求时出错 query_id=1 stage=PreProcessor : 无法确定模型 ep-2024444444458-l84tc 的信息，请在元数据中配置\n二、provider.json  关键内容火山方舟 v3 API 与 OpenAI API 协议兼容\n\n{\n  \"keys\": {\n    \"openai\": [\"0a109444444f8-11fd9e7ac67a\"]\n  },\n  \"requester\": {\n    \"openai-chat-completions\": {\n      \"base-url\": \"https://a99999m/api/v3\",\n      \"args\": {\"model\": \"ep-202599999958-l84tc\"},\n      \"headers\": {\"Authorization\": \"Bearer {keys.openai}\"},\n      \"timeout\": 120\n    }\n  },\n  \"models\": {\n    \"ep-202994444998-l84tc\": {\n      \"type\": \"chat_completion\",\n      \"provider\": \"openai\",\n      \"max_tokens\": 4096,\n      \"capabilities\": [\"chat\"],\n      \"endpoint\": \"openai-chat-completions\"\n    }\n  },\n  \"model\": \"ep-2944499999c\"\n}\n\n### 复现步骤\n\n一、请这是BUG吗，这是用的火山方舟里的，DEEPSEEK模型，\n\nlangbot  | [2025-02-22 04:44:00 +0000] [1] [INFO] 101.126.59.9:27232 POST /lark/callback 1.1 200 28 1760\nlangbot  | [02-22 04:44:00.650] controller.py (189) - [ERROR] : 处理请求时出错 query_id=1 stage=PreProcessor : 无法确定模型 ep-2024444444458-l84tc 的信息，请在元数据中配置\n二、provider.json  关键内容火山方舟 v3 API 与 OpenAI API 协议兼容\n\n{\n  \"keys\": {\n    \"openai\": [\"0a109444444f8-11fd9e7ac67a\"]\n  },\n  \"requester\": {\n    \"openai-chat-completions\": {\n      \"base-url\": \"https://a99999m/api/v3\",\n      \"args\": {\"model\": \"ep-202599999958-l84tc\"},\n      \"headers\": {\"Authorization\": \"Bearer {keys.openai}\"},\n      \"timeout\": 120\n    }\n  },\n  \"models\": {\n    \"ep-202994444998-l84tc\": {\n      \"type\": \"chat_completion\",\n      \"provider\": \"openai\",\n      \"max_tokens\": 4096,\n      \"capabilities\": [\"chat\"],\n      \"endpoint\": \"openai-chat-completions\"\n    }\n  },\n  \"model\": \"ep-2944499999c\"\n}\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "hairoulink",
      "author_type": "User",
      "created_at": "2025-02-22T04:49:18Z",
      "updated_at": "2025-02-22T13:41:39Z",
      "closed_at": "2025-02-22T13:41:37Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1112/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1112",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1112",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:51.873653",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "麻烦提供一下获取到api的网站链接？",
          "created_at": "2025-02-22T05:02:58Z"
        },
        {
          "author": "RockChinQ",
          "body": "https://docs.langbot.app/config/metadata/llm-models.html 按照这个文档加一下模型元数据，请求器写openai那个就行",
          "created_at": "2025-02-22T13:41:37Z"
        }
      ]
    },
    {
      "issue_number": 1107,
      "title": "[Bug]: Exception: platform.json 中启用了未知的平台适配器: officialaccount",
      "body": "### 消息平台适配器\n\n其他（或暂未使用）\n\n### 运行环境\n\ndocker\n\n### 异常情况\n\n<img width=\"703\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/edb18a0a-803c-4d52-9e25-5405a7d8175b\" />\n\n### 复现步骤\n\n添加了officialaccount适配器后，启动docker就报错\n\n### 启用的插件\n\n{\n    \"platform-adapters\": [\n        {\n            \"adapter\": \"officialaccount\",\n            \"enable\": true,\n            \"token\": \"abcde\",\n            \"EncodingAESKey\": \"111\",\n            \"AppSecret\": \"11\",\n            \"AppID\": \"11\",\n            \"host\": \"0.0.0.0\",\n            \"port\": 2287\n        },\n        {\n            \"adapter\": \"nakuru\",\n            \"enable\": false,\n            \"host\": \"127.0.0.1\",\n            \"http_port\": 5700,\n            \"token\": \"\",\n            \"ws_port\": 8080\n        },\n        {\n            \"access-token\": \"\",\n            \"adapter\": \"aiocqhttp\",\n            \"enable\": true,\n            \"host\": \"0.0.0.0\",\n            \"port\": 2280\n        },\n        {\n            \"adapter\": \"qq-botpy\",\n            \"appid\": \"\",\n            \"enable\": false,\n            \"intents\": [\n                \"public_guild_messages\",\n                \"direct_message\"\n            ],\n            \"secret\": \"\"\n        },\n        {\n            \"adapter\": \"qqofficial\",\n            \"appid\": \"1234567890\",\n            \"enable\": false,\n            \"port\": 2284,\n            \"secret\": \"xxxxxxx\",\n            \"token\": \"abcdefg\"\n        },\n        {\n            \"EncodingAESKey\": \"\",\n            \"adapter\": \"wecom\",\n            \"contacts_secret\": \"\",\n            \"corpid\": \"\",\n            \"enable\": false,\n            \"host\": \"0.0.0.0\",\n            \"port\": 2290,\n            \"secret\": \"\",\n            \"token\": \"\"\n        },\n        {\n            \"adapter\": \"lark\",\n            \"app_id\": \"cli_abcdefgh\",\n            \"app_secret\": \"XXXXXXXXXX\",\n            \"bot_name\": \"LangBot\",\n            \"enable\": false\n        },\n        {\n            \"adapter\": \"discord\",\n            \"client_id\": \"1234567890\",\n            \"enable\": false,\n            \"token\": \"XXXXXXXXXX\"\n        },\n        {\n            \"adapter\": \"gewechat\",\n            \"app_id\": \"\",\n            \"callback_url\": \"http://your-callback-url:2286/gewechat/callback\",\n            \"enable\": false,\n            \"gewechat_url\": \"http://your-gewechat-server:2531\",\n            \"port\": 2286,\n            \"token\": \"\"\n        }\n\n    ],\n    \"track-function-calls\": true,\n    \"quote-origin\": false,\n    \"at-sender\": false,\n    \"force-delay\": {\n        \"max\": 0,\n        \"min\": 0\n    },\n    \"long-text-process\": {\n        \"font-path\": \"\",\n        \"strategy\": \"forward\",\n        \"threshold\": 2560\n    },\n    \"hide-exception-info\": true\n}",
      "state": "closed",
      "author": "johnnyzuo",
      "author_type": "User",
      "created_at": "2025-02-21T01:48:21Z",
      "updated_at": "2025-02-21T02:39:06Z",
      "closed_at": "2025-02-21T02:39:06Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1107/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1107",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1107",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:52.053740",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "按照文档更新到最新版",
          "created_at": "2025-02-21T01:54:09Z"
        }
      ]
    },
    {
      "issue_number": 1105,
      "title": "[Feature]: 我想LangBot接入ragflow",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\nhttps://github.com/infiniflow/ragflow 是一个 rag 平台，通过 runner 支持 ragflow 以便在 LangBot 对话中使用 ragflow 的应用。",
      "state": "closed",
      "author": "joeshen2021",
      "author_type": "User",
      "created_at": "2025-02-20T09:48:49Z",
      "updated_at": "2025-02-20T09:50:28Z",
      "closed_at": "2025-02-20T09:50:13Z",
      "labels": [
        "duplicated"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1105/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1105",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1105",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:54.153563",
      "comments": []
    },
    {
      "issue_number": 1095,
      "title": "[Plugin]: 请求登记新插件 百炼平台文生图插件",
      "body": "### 插件名称\n\nLangBot_BailianTextToImagePlugin\n\n### 插件代码库地址\n\nhttps://github.com/Thetail001/LangBot_BailianTextToImagePlugin\n\n### 插件简介\n\n调用阿里云百炼平台文生图API生成图片",
      "state": "closed",
      "author": "Thetail001",
      "author_type": "User",
      "created_at": "2025-02-18T00:22:38Z",
      "updated_at": "2025-02-20T07:19:27Z",
      "closed_at": "2025-02-20T07:19:25Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1095/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1095",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1095",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:54.153590",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2025-02-20T07:19:25Z"
        }
      ]
    },
    {
      "issue_number": 1103,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nRemember\n\n### 插件代码库地址\n\nhttps://github.com/s2cr3t/Remember-master\n\n\n### 插件简介\n\n建议的基于函数调用的记忆插件，可通过自然语言让AI记住信息\n\n![Image](https://github.com/user-attachments/assets/5e21cd78-379d-4942-896b-d1c5a88300d2)",
      "state": "closed",
      "author": "s2cr3t",
      "author_type": "User",
      "created_at": "2025-02-19T13:24:50Z",
      "updated_at": "2025-02-20T03:30:31Z",
      "closed_at": "2025-02-20T03:30:30Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1103/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1103",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1103",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:54.344944",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！你这readme好多都是过时的内容了，记得用 HelloPlugin 最新的模板重新写一份。",
          "created_at": "2025-02-20T03:30:30Z"
        }
      ]
    },
    {
      "issue_number": 1083,
      "title": "[Bug]: 企业微信未能成功回复消息",
      "body": "### 消息平台适配器\n\nwecom（企业微信）\n\n### 运行环境\n\ncentos7\n\n### 异常情况\n\n![Image](https://github.com/user-attachments/assets/b0501a8c-c01e-424b-b255-d0be3ac63609)\n\n### 复现步骤\n\n企业微信相关配置都完成之后，重启langbot，给企业微信创建的机器人发消息，langbot控制台有回复，但是没有发送给用户\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "liulang-jack",
      "author_type": "User",
      "created_at": "2025-02-14T09:12:52Z",
      "updated_at": "2025-02-18T08:44:19Z",
      "closed_at": "2025-02-18T08:44:19Z",
      "labels": [
        "bug?",
        "Stale"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1083/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1083",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1083",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:54.544508",
      "comments": [
        {
          "author": "wangcham",
          "body": "麻烦在控制台输入命令 `export DEBUG=true` ，然后重新启动看看有没有报错。",
          "created_at": "2025-02-14T09:48:16Z"
        },
        {
          "author": "liulang-jack",
          "body": "启动没有报错，就是没有发送消息给用户，这个langbot内部有实现回复的逻辑吗？\r\n\r\n\r\n\r\n\r\n417213803\r\n***@***.***\r\n\r\n\r\n\r\n&nbsp;\r\n\r\n\r\n\r\n\r\n------------------&nbsp;原始邮件&nbsp;------------------\r\n发件人:                                                                                                                        \"RockChinQ/LangBot\"       ",
          "created_at": "2025-02-14T09:52:10Z"
        },
        {
          "author": "wangcham",
          "body": "当然有回复的函数，是你发送消息给 LangBot，LangBot经过处理后发送给LLM，LLM生成回复再通过 LangBot 发送给你。你再按照文档走一遍流程，正常是可以成功回复的。",
          "created_at": "2025-02-14T09:54:49Z"
        }
      ]
    },
    {
      "issue_number": 1092,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nFofaPlugin\n\n### 插件代码库地址\n\nhttps://github.com/s2cr3t/FofaPlugin-master\n\n### 插件简介\n\n对接FOFA api的函数事件插件，可以实时查询网络资产\n\n![Image](https://github.com/user-attachments/assets/d225c5d2-1ef4-4a17-9a7b-567545bc7865)",
      "state": "closed",
      "author": "s2cr3t",
      "author_type": "User",
      "created_at": "2025-02-17T00:59:43Z",
      "updated_at": "2025-02-18T04:37:37Z",
      "closed_at": "2025-02-18T04:37:36Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1092/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1092",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1092",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:54.761020",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2025-02-18T04:37:36Z"
        }
      ]
    },
    {
      "issue_number": 1091,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nAsyncTaskPlugin\n\n### 插件代码库地址\n\nhttps://github.com/s2cr3t/AsyncTaskPlugin-master\n\n### 插件简介\n\n定时任务插件，基于GPT的Function Calling功能实现定时任务创建，可以让你的机器人在指定时间提醒你重要事项，支持群组、私聊。\n\n![Image](https://github.com/user-attachments/assets/4afb6563-c908-4ff4-981e-22efd0b60cfb)\n\n![Image](https://github.com/user-attachments/assets/d0a7d61c-51fa-45e1-bf59-ae15b9f36e1c)",
      "state": "closed",
      "author": "s2cr3t",
      "author_type": "User",
      "created_at": "2025-02-17T00:57:45Z",
      "updated_at": "2025-02-18T04:37:25Z",
      "closed_at": "2025-02-18T04:37:24Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1091/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1091",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1091",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:54.947135",
      "comments": [
        {
          "author": "sheetung",
          "body": "这个好呀",
          "created_at": "2025-02-17T06:49:12Z"
        },
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2025-02-18T04:37:24Z"
        }
      ]
    },
    {
      "issue_number": 1090,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nAutoTaskPlugin\n\n### 插件代码库地址\n\nhttps://github.com/sheetung/AutoTaskPlugin\n\n### 插件简介\n\nLangbot插件，定时每日触发data目录下脚本的插件",
      "state": "closed",
      "author": "sheetung",
      "author_type": "User",
      "created_at": "2025-02-16T16:07:37Z",
      "updated_at": "2025-02-18T04:36:44Z",
      "closed_at": "2025-02-18T04:36:43Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1090/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1090",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1090",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:55.205464",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2025-02-18T04:36:43Z"
        }
      ]
    },
    {
      "issue_number": 1087,
      "title": "[Bug]: 安装插件时， beautifulsoup4依赖安装失败",
      "body": "### 消息平台适配器\n\ngewechat（个人微信）\n\n### 运行环境\n\nDocker\n\n### 异常情况\n\n安装WebwlkrPlugin时出错，log显示beautifulsoup4依赖安装失败，导致插件安装失败\n\n### 复现步骤\n\nWARNING: pip is being invoked by an old script wrapper. This will fail in a future version of pip.\nlangbot  | Please see https://github.com/pypa/pip/issues/5599 for advice on fixing the underlying issue.\nlangbot  | To avoid this problem you can invoke Python with '-m pip' instead of running pip directly.\nlangbot  | Looking in indexes: https://pypi.tuna.tsinghua.edu.cn/simple\nlangbot  | Collecting beautifulsoup4\nlangbot  |   ERROR: HTTP error 403 while getting https://pypi.tuna.tsinghua.edu.cn/packages/f9/49/6abb616eb3cbab6a7cca303dc02fdf3836de2e0b834bf966a7f5271a34d8/beautifulsoup4-4.13.3-py3-none-any.whl (from https://pypi.tuna.tsinghua.edu.cn/simple/beautifulsoup4/) (requires-python:>=3.7.0)\nlangbot  | ERROR: Could not install requirement beautifulsoup4 from https://pypi.tuna.tsinghua.edu.cn/packages/f9/49/6abb616eb3cbab6a7cca303dc02fdf3836de2e0b834bf966a7f5271a34d8/beautifulsoup4-4.13.3-py3-none-any.whl (from -r plugins/WebwlkrPlugin/requirements.txt (line 1)) because of HTTP error 403 Client Error: Forbidden for url: https://pypi.tuna.tsinghua.edu.cn/packages/f9/49/6abb616eb3cbab6a7cca303dc02fdf3836de2e0b834bf966a7f5271a34d8/beautifulsoup4-4.13.3-py3-none-any.whl for URL https://pypi.tuna.tsinghua.edu.cn/packages/f9/49/6abb616eb3cbab6a7cca303dc02fdf3836de2e0b834bf966a7f5271a34d8/beautifulsoup4-4.13.3-py3-none-any.whl (from https://pypi.tuna.tsinghua.edu.cn/simple/beautifulsoup4/) (requires-python:>=3.7.0)\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "nevergow",
      "author_type": "User",
      "created_at": "2025-02-15T15:10:56Z",
      "updated_at": "2025-02-15T15:14:00Z",
      "closed_at": "2025-02-15T15:14:00Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1087/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1087",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1087",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:55.387275",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "这是你的环境问题哈，尝试更换pypi镜像源。",
          "created_at": "2025-02-15T15:13:54Z"
        }
      ]
    },
    {
      "issue_number": 1085,
      "title": "[Bug]: 微信公众号、飞书机器人，都未能成功回复消息",
      "body": "### 消息平台适配器\n\n其他（或暂未使用）\n\n### 运行环境\n\nLangBot v3.4.8, linux Ubuntu 18.04.6 LTS\n\n### 异常情况\n\n![Image](https://github.com/user-attachments/assets/2fb03282-35d7-4de0-9fe2-72e0737bdba0)\n\n### 复现步骤\n\n1. 更新到新版的LangBot，配置微信公众号，Dify能收到提问请求并返回。LangBot打印的响应是空，公众号也未收到回复\n2. 之前部署了V3.4.6版本的LangBot，飞书机器人能正常回复，此次升级到V3.4.8的LangBot后，飞书机器人也无法回复了\n3. github上还有人提了企业微信未能成功回复消息，应该都是同一个问题导致的 #1083 \n\nDify版本Version 0.15.3\n\n### 启用的插件\n\n无",
      "state": "closed",
      "author": "jcvv0n",
      "author_type": "User",
      "created_at": "2025-02-15T09:53:40Z",
      "updated_at": "2025-02-15T10:45:14Z",
      "closed_at": "2025-02-15T10:35:45Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 8,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1085/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1085",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1085",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:55.609552",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "dify应用是agent还是chat还是工作流？",
          "created_at": "2025-02-15T10:01:13Z"
        },
        {
          "author": "jcvv0n",
          "body": "> dify应用是agent还是chat还是工作流？\n\n使用的Agent",
          "created_at": "2025-02-15T10:04:55Z"
        },
        {
          "author": "RockChinQ",
          "body": "agent应用截个图发一下？",
          "created_at": "2025-02-15T10:06:04Z"
        },
        {
          "author": "jcvv0n",
          "body": "> agent应用截个图发一下？\n\n这是Chat应用\n![Image](https://github.com/user-attachments/assets/35041dc1-65d8-4375-80ad-404620c3e6af)\n这是Agent应用\n\n![Image](https://github.com/user-attachments/assets/e828c5b1-08ec-4032-8641-cf72b806c693)\n\n刚才重新试了一下，调用Chat能回复，调用Agent就收不到回复了",
          "created_at": "2025-02-15T10:14:44Z"
        },
        {
          "author": "jcvv0n",
          "body": "![Image](https://github.com/user-attachments/assets/a2412e67-3978-401b-b2f5-e975779bf939)\n问题解决了，是这个应用类型未修改。",
          "created_at": "2025-02-15T10:34:22Z"
        }
      ]
    },
    {
      "issue_number": 1001,
      "title": "[Feature]: 是否考虑支持telegram",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n是否考虑支持telegram",
      "state": "closed",
      "author": "CyanidEEEEE",
      "author_type": "User",
      "created_at": "2025-02-01T09:18:31Z",
      "updated_at": "2025-02-14T05:34:40Z",
      "closed_at": "2025-02-14T05:34:39Z",
      "labels": [
        "m: Platform"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1001/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1001",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1001",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:55.829192",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "最近在集中解决消息平台适配问题，会考虑tg的。社区也有人表示正在开发。",
          "created_at": "2025-02-01T09:23:46Z"
        }
      ]
    },
    {
      "issue_number": 1076,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\n群聊分析助手（静静窥屏分析）\n\n### 插件代码库地址\n\nhttps://github.com/LCYLYM/LangBotmessagesummary\n\n### 插件简介\n\n静静窥屏分析\n# 群聊分析助手\n\n一个基于AI的群聊分析工具，支持自动记录消息、生成群聊总结、分析用户画像，并提供Web界面查看分析数据。\n\n## ✨ 功能特点\n\n- 📝 自动记录群聊消息和互动数据\n- 🤖 基于OpenAI的智能群聊总结\n- 👤 用户画像和行为分析\n- 📊 数据可视化和统计报表\n- 🌐 安全的Web数据查看界面\n- 🔔 飞书机器人实时推送通知\n- 🔐 完善的数据安全和访问控制\n\n## 🚀 快速开始\n\n### 环境要求\n\n- Python 3.7+\n- OpenAI API 密钥\n- 飞书机器人 Webhook\n- 基础的Linux/Windows操作系统\n\n### 安装步骤\n\n1. 克隆仓库到本地\n\n**git clone [仓库地址]**\n**cd [项目目录]**\n\n2. 安装依赖包\n\n**pip install -r requirements.txt**\n\n3. 配置环境变量\n\n在系统中设置以下环境变量：\n\n**OpenAI配置：**\n- OPENAI_API_BASE_URL=\"你的API地址\"\n- OPENAI_API_KEY=\"你的API密钥\"\n\n**飞书配置：**\n- FEISHU_WEBHOOK_URL=\"飞书webhook地址\"\n\n**Web认证：**\n- WEB_AUTH_PASSWORD=\"访问密码\"\n\n**群组配置：**\n- ALLOWED_GROUP_ID=\"允许使用命令的群组ID\"\n\n## 📖 使用说明\n\n### 群聊命令\n\n- **总结** - 生成当前群聊的AI总结\n- **看看 @用户** - 分析指定用户的群聊画像\n\n### Web界面\n\n访问 **http://your-host:3300** 查看数据分析界面\n\n功能包括：\n- 按群组浏览消息记录\n- 查看历史总结内容\n- 浏览用户画像分析\n- 基础认证保护\n\n## 📂 数据存储\n\n所有数据以CSV格式存储：\n\n- 消息记录：**/app/data/chat_analyzer/daily_*.csv**\n- 用户画像：**/app/data/chat_analyzer/user_profiles/**\n- 总结记录：**/app/data/chat_analyzer/summary.csv**\n\n## ⚠️ 注意事项\n\n1. 请妥善保管配置信息，不要泄露API密钥\n2. 定期备份重要数据\n3. 遵守数据隐私保护规定\n4. 合理设置访问权限\n\n## 🔒 隐私保护\n\n- 所有数据本地存储\n- Web访问需要密码认证\n- 支持数据脱敏处理\n- 可配置群组访问权限\n\n",
      "state": "closed",
      "author": "LCYLYM",
      "author_type": "User",
      "created_at": "2025-02-13T08:26:36Z",
      "updated_at": "2025-02-13T14:17:19Z",
      "closed_at": "2025-02-13T12:15:02Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1076/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1076",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1076",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:56.065005",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2025-02-13T12:15:02Z"
        },
        {
          "author": "RockChinQ",
          "body": "你重新建一下库，用模板仓库的 use template，而不是fork，你fork的话，在github是搜不到的",
          "created_at": "2025-02-13T12:16:06Z"
        },
        {
          "author": "LCYLYM",
          "body": "https://github.com/LCYLYM/LangBotgroupsummary\n这样成不🤔",
          "created_at": "2025-02-13T14:16:09Z"
        },
        {
          "author": "RockChinQ",
          "body": "可以的",
          "created_at": "2025-02-13T14:17:17Z"
        }
      ]
    },
    {
      "issue_number": 1080,
      "title": "[Bug]: 微信扫码登陆后，控制台报错，发消息无响应",
      "body": "### 消息平台适配器\n\ngewechat（个人微信）\n\n### 运行环境\n\nmaster分支、Windows11专业版、x64、3.12、江苏徐州\n\n### 异常情况\n\n使用docker容器在本地运行gewechat后，运行后Langbot后可以扫码登录微信，但是回调消息报错：\n\n[02-13 21:34:09.754] app.py (168) - [INFO] : 🤯 WebUI 仍处于 Beta 测试阶段，如有问题或建议请反馈到 https://github.com/RockChinQ/LangBot/issues\n[02-13 21:34:09.754] app.py (168) - [INFO] : =======================================\n[2025-02-13 21:34:09 +0800] [12532] [INFO] Running on http://0.0.0.0:2286 (CTRL + C to quit)\nhttp请求失败, url=http://localhost:2531/v2/api/tools/setCallback, exception={\"ret\":500,\"msg\":\"http://localhost:2286/gewechat/callback push msg err\"}\nException in thread Thread-2 (thread_set_callback):\nTraceback (most recent call last):\n  File \"C:\\Users\\wuliucheng\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\gewechat_client\\util\\http_util.py\", line 20, in post_json\n    raise RuntimeError(response.text)\nRuntimeError: {\"ret\":500,\"msg\":\"http://localhost:2286/gewechat/callback push msg err\"}\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\wuliucheng\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\threading.py\", line 1075, in _bootstrap_inner\n    self.run()\n  File \"C:\\Users\\wuliucheng\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\threading.py\", line 1012, in run\n    self._target(*self._args, **self._kwargs)\n  File \"C:\\Users\\wuliucheng\\PycharmProjects\\LangBot\\pkg\\platform\\sources\\gewechat.py\", line 269, in thread_set_callback\n    ret = self.bot.set_callback(self.config[\"token\"], self.config[\"callback_url\"])\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\wuliucheng\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\gewechat_client\\client.py\", line 257, in set_callback\n    return self._login_api.set_callback(token, callback_url)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\wuliucheng\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\gewechat_client\\api\\login_api.py\", line 21, in set_callback\n    return post_json(self.base_url, \"/tools/setCallback\", self.token, param)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\wuliucheng\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\gewechat_client\\util\\http_util.py\", line 23, in post_json\n    raise RuntimeError(str(e))\nRuntimeError: {\"ret\":500,\"msg\":\"http://localhost:2286/gewechat/callback push msg err\"}\n[Signal] 程序退出.\n\n### 复现步骤\n\nplatform.json\n`{\n    \"platform-adapters\": [\n        {\n            \"adapter\": \"nakuru\",\n            \"enable\": false,\n            \"host\": \"127.0.0.1\",\n            \"ws_port\": 8080,\n            \"http_port\": 5700,\n            \"token\": \"\"\n        },\n        {\n            \"adapter\": \"aiocqhttp\",\n            \"enable\": false,\n            \"host\": \"0.0.0.0\",\n            \"port\": 2280,\n            \"access-token\": \"\"\n        },\n        {\n            \"adapter\": \"qq-botpy\",\n            \"enable\": false,\n            \"appid\": \"\",\n            \"secret\": \"\",\n            \"intents\": [\n                \"public_guild_messages\",\n                \"direct_message\"\n            ]\n        },\n        {\n            \"adapter\": \"qqofficial\",\n            \"enable\": false,\n            \"appid\": \"1234567890\",\n            \"secret\": \"xxxxxxx\",\n            \"port\": 2284,\n            \"token\": \"abcdefg\"\n        },\n        {\n            \"adapter\": \"wecom\",\n            \"enable\": false,\n            \"host\": \"0.0.0.0\",\n            \"port\": 2290,\n            \"corpid\": \"\",\n            \"secret\": \"\",\n            \"token\": \"\",\n            \"EncodingAESKey\": \"\",\n            \"contacts_secret\": \"\"\n        },\n        {\n            \"adapter\": \"lark\",\n            \"enable\": false,\n            \"app_id\": \"cli_abcdefgh\",\n            \"app_secret\": \"XXXXXXXXXX\",\n            \"bot_name\": \"LangBot\",\n            \"enable-webhook\": false,\n            \"port\": 2285,\n            \"encrypt-key\": \"xxxxxxxxx\"\n        },\n        {\n            \"adapter\": \"discord\",\n            \"enable\": false,\n            \"client_id\": \"1234567890\",\n            \"token\": \"XXXXXXXXXX\"\n        },\n        {\n            \"adapter\": \"gewechat\",\n            \"enable\": true,\n            \"gewechat_url\": \"http://localhost:2531\",\n            \"port\": 2286,\n            \"callback_url\": \"http://localhost:2286/gewechat/callback\",\n            \"app_id\": \"\",\n            \"token\": \"\"\n        },\n        {\n            \"adapter\": \"officialaccount\",\n            \"enable\": false,\n            \"token\": \"\",\n            \"EncodingAESKey\": \"\",\n            \"AppID\": \"\",\n            \"AppSecret\": \"\",\n            \"host\": \"0.0.0.0\",\n            \"port\": 2287\n        }\n    ],\n    \"track-function-calls\": true,\n    \"quote-origin\": false,\n    \"at-sender\": false,\n    \"force-delay\": {\n        \"min\": 0,\n        \"max\": 0\n    },\n    \"long-text-process\": {\n        \"threshold\": 2560,\n        \"strategy\": \"forward\",\n        \"font-path\": \"\"\n    },\n    \"hide-exception-info\": true\n}`\n\n### 启用的插件\n\n无",
      "state": "closed",
      "author": "wuliucheng0",
      "author_type": "User",
      "created_at": "2025-02-13T13:45:14Z",
      "updated_at": "2025-02-13T13:55:26Z",
      "closed_at": "2025-02-13T13:55:26Z",
      "labels": [
        "bug?",
        "Please take it seriously"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1080/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1080",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1080",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:56.250549",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "配置填写不正确，请严格按照文档步骤操作。",
          "created_at": "2025-02-13T13:47:07Z"
        },
        {
          "author": "RockChinQ",
          "body": "https://docs.langbot.app/deploy/platforms/wechat/gewechat.html",
          "created_at": "2025-02-13T13:48:07Z"
        },
        {
          "author": "wuliucheng0",
          "body": "可以了 callback_url应该是http://host.docker.internal:2286/gewechat/callback",
          "created_at": "2025-02-13T13:55:24Z"
        }
      ]
    },
    {
      "issue_number": 1081,
      "title": "[Bug]: 微信扫码登陆后，控制台报错，发消息无响应",
      "body": "### 消息平台适配器\n\ngewechat（个人微信）\n\n### 运行环境\n\nmaster分支、Windows11专业版、x64、3.12、江苏徐州\n\n### 异常情况\n\n使用docker容器在本地运行gewechat后，运行后Langbot后可以扫码登录微信，但是回调消息报错：\n\n[02-13 21:34:09.754] app.py (168) - [INFO] : 🤯 WebUI 仍处于 Beta 测试阶段，如有问题或建议请反馈到 https://github.com/RockChinQ/LangBot/issues\n[02-13 21:34:09.754] app.py (168) - [INFO] : =======================================\n[2025-02-13 21:34:09 +0800] [12532] [INFO] Running on http://0.0.0.0:2286 (CTRL + C to quit)\nhttp请求失败, url=http://localhost:2531/v2/api/tools/setCallback, exception={\"ret\":500,\"msg\":\"http://localhost:2286/gewechat/callback push msg err\"}\nException in thread Thread-2 (thread_set_callback):\nTraceback (most recent call last):\n  File \"C:\\Users\\wuliucheng\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\gewechat_client\\util\\http_util.py\", line 20, in post_json\n    raise RuntimeError(response.text)\nRuntimeError: {\"ret\":500,\"msg\":\"http://localhost:2286/gewechat/callback push msg err\"}\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\wuliucheng\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\threading.py\", line 1075, in _bootstrap_inner\n    self.run()\n  File \"C:\\Users\\wuliucheng\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\threading.py\", line 1012, in run\n    self._target(*self._args, **self._kwargs)\n  File \"C:\\Users\\wuliucheng\\PycharmProjects\\LangBot\\pkg\\platform\\sources\\gewechat.py\", line 269, in thread_set_callback\n    ret = self.bot.set_callback(self.config[\"token\"], self.config[\"callback_url\"])\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\wuliucheng\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\gewechat_client\\client.py\", line 257, in set_callback\n    return self._login_api.set_callback(token, callback_url)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\wuliucheng\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\gewechat_client\\api\\login_api.py\", line 21, in set_callback\n    return post_json(self.base_url, \"/tools/setCallback\", self.token, param)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\wuliucheng\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\gewechat_client\\util\\http_util.py\", line 23, in post_json\n    raise RuntimeError(str(e))\nRuntimeError: {\"ret\":500,\"msg\":\"http://localhost:2286/gewechat/callback push msg err\"}\n[Signal] 程序退出.\n\n### 复现步骤\n\nplatform.json\n`{\n    \"platform-adapters\": [\n        {\n            \"adapter\": \"nakuru\",\n            \"enable\": false,\n            \"host\": \"127.0.0.1\",\n            \"ws_port\": 8080,\n            \"http_port\": 5700,\n            \"token\": \"\"\n        },\n        {\n            \"adapter\": \"aiocqhttp\",\n            \"enable\": false,\n            \"host\": \"0.0.0.0\",\n            \"port\": 2280,\n            \"access-token\": \"\"\n        },\n        {\n            \"adapter\": \"qq-botpy\",\n            \"enable\": false,\n            \"appid\": \"\",\n            \"secret\": \"\",\n            \"intents\": [\n                \"public_guild_messages\",\n                \"direct_message\"\n            ]\n        },\n        {\n            \"adapter\": \"qqofficial\",\n            \"enable\": false,\n            \"appid\": \"1234567890\",\n            \"secret\": \"xxxxxxx\",\n            \"port\": 2284,\n            \"token\": \"abcdefg\"\n        },\n        {\n            \"adapter\": \"wecom\",\n            \"enable\": false,\n            \"host\": \"0.0.0.0\",\n            \"port\": 2290,\n            \"corpid\": \"\",\n            \"secret\": \"\",\n            \"token\": \"\",\n            \"EncodingAESKey\": \"\",\n            \"contacts_secret\": \"\"\n        },\n        {\n            \"adapter\": \"lark\",\n            \"enable\": false,\n            \"app_id\": \"cli_abcdefgh\",\n            \"app_secret\": \"XXXXXXXXXX\",\n            \"bot_name\": \"LangBot\",\n            \"enable-webhook\": false,\n            \"port\": 2285,\n            \"encrypt-key\": \"xxxxxxxxx\"\n        },\n        {\n            \"adapter\": \"discord\",\n            \"enable\": false,\n            \"client_id\": \"1234567890\",\n            \"token\": \"XXXXXXXXXX\"\n        },\n        {\n            \"adapter\": \"gewechat\",\n            \"enable\": true,\n            \"gewechat_url\": \"http://localhost:2531\",\n            \"port\": 2286,\n            \"callback_url\": \"http://localhost:2286/gewechat/callback\",\n            \"app_id\": \"\",\n            \"token\": \"\"\n        },\n        {\n            \"adapter\": \"officialaccount\",\n            \"enable\": false,\n            \"token\": \"\",\n            \"EncodingAESKey\": \"\",\n            \"AppID\": \"\",\n            \"AppSecret\": \"\",\n            \"host\": \"0.0.0.0\",\n            \"port\": 2287\n        }\n    ],\n    \"track-function-calls\": true,\n    \"quote-origin\": false,\n    \"at-sender\": false,\n    \"force-delay\": {\n        \"min\": 0,\n        \"max\": 0\n    },\n    \"long-text-process\": {\n        \"threshold\": 2560,\n        \"strategy\": \"forward\",\n        \"font-path\": \"\"\n    },\n    \"hide-exception-info\": true\n}`\n\n### 启用的插件\n\n无",
      "state": "closed",
      "author": "wuliucheng0",
      "author_type": "User",
      "created_at": "2025-02-13T13:45:46Z",
      "updated_at": "2025-02-13T13:46:38Z",
      "closed_at": "2025-02-13T13:46:38Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1081/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1081",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1081",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:56.473861",
      "comments": []
    },
    {
      "issue_number": 1075,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nLangBot_RVC_Music\n\n### 插件代码库地址\n\nhttps://github.com/zzseki/LangBot_RVC_Music\n\n### 插件简介\n\nLangBot的插件，RVC+UVR+网易云音乐 实现指定AI模型翻唱歌曲功能  \n![示例图片](https://github.com/zzseki/LangBot_RVC_Music/blob/main/tmp/F3595CB91817E2991F59C356AD573638.jpg)",
      "state": "closed",
      "author": "zzseki",
      "author_type": "User",
      "created_at": "2025-02-13T04:42:12Z",
      "updated_at": "2025-02-13T08:22:14Z",
      "closed_at": "2025-02-13T08:22:12Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1075/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1075",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1075",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:56.473881",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2025-02-13T08:22:12Z"
        }
      ]
    },
    {
      "issue_number": 1070,
      "title": "[Bug]: 消息发送至qq时出现， 处理请求时出错 query_id=0 stage=SendResponseBackStage : Illegal header value b'QQBot '",
      "body": "### 消息平台适配器\n\nqqofficial（QQ官方API Webhook）\n\n### 运行环境\n\ndocker，aliyun esc \n\n### 异常情况\n\n部署langbot并且配置qq webhook完成后，发送消息可以得到模型响应，但是消息返回至qq时出现请求头错误的问题**Illegal header value b'QQBot '**\n\n![Image](https://github.com/user-attachments/assets/1924738a-e575-42f1-841c-415aaa7d4883)\nlangbot部署方式使用最新的docker镜像，caddy部署方式使用docker启动主机网络模式部署\n\n### 复现步骤\n\n安装上述步骤部署并且配置完成后，正常发送消息，必定出现该问题，配置文件仅更改消息平台配置器，输入deepseek密钥，模型选择deepseek-chat\n\n### 启用的插件\n\n无",
      "state": "closed",
      "author": "alsdhkauuhw",
      "author_type": "User",
      "created_at": "2025-02-12T04:09:44Z",
      "updated_at": "2025-02-13T08:01:25Z",
      "closed_at": "2025-02-13T08:01:25Z",
      "labels": [
        "bug?",
        "IM: qqofficial"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1070/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1070",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1070",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:56.756570",
      "comments": [
        {
          "author": "wangcham",
          "body": "请问使用的是qq私聊，群聊还是频道消息？",
          "created_at": "2025-02-12T09:57:05Z"
        },
        {
          "author": "alsdhkauuhw",
          "body": "qq私聊与群聊，都会出现上述错误",
          "created_at": "2025-02-12T12:26:36Z"
        },
        {
          "author": "alsdhkauuhw",
          "body": "频道消息，目前没有试过\n",
          "created_at": "2025-02-12T12:27:22Z"
        },
        {
          "author": "alsdhkauuhw",
          "body": "重新生成qqbot的token与secret就可以解决了",
          "created_at": "2025-02-13T08:01:22Z"
        }
      ]
    },
    {
      "issue_number": 1027,
      "title": "[Feature]: 海外版Lark不提供长连接方式，只提供callback方式",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n海外版飞书未支持ws方式。希望能提供该方式接入\n![Image](https://github.com/user-attachments/assets/491cea78-0fff-4dc7-842d-7dda11f2247f)\n\n![Image](https://github.com/user-attachments/assets/44902a56-c3ca-4e58-a95d-2fa30a19b707)",
      "state": "closed",
      "author": "leeAx",
      "author_type": "User",
      "created_at": "2025-02-07T13:33:13Z",
      "updated_at": "2025-02-12T13:17:35Z",
      "closed_at": "2025-02-12T13:17:35Z",
      "labels": [
        "m: Platform"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1027/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1027",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1027",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:56.962483",
      "comments": [
        {
          "author": "leeAx",
          "body": "自己写一个适配器就可以了",
          "created_at": "2025-02-09T11:59:14Z"
        },
        {
          "author": "RockChinQ",
          "body": "你写好callback的适配器了？提个pr？",
          "created_at": "2025-02-10T03:30:26Z"
        },
        {
          "author": "yzk4219",
          "body": "怎么实现？萌新求问",
          "created_at": "2025-02-11T02:04:39Z"
        },
        {
          "author": "leeAx",
          "body": "> 怎么实现？萌新求问\n\ncopy 下gewechat实现,模仿他的回调，将接收的data封装成lark_oapi.im.v1.P2ImMessageReceiveV1对象，\n调用event = await self.event_converter.target2yiri(P2ImMessageReceiveV1data.copy(), self.lark_client)",
          "created_at": "2025-02-11T02:26:58Z"
        }
      ]
    },
    {
      "issue_number": 1072,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nPromptOnlineStore\n\n### 插件代码库地址\n\nhttps://github.com/Hanschase/PromptOnlineStore\n\n### 插件简介\n\n适用于LangBot的在线提示词仓库，可通过指令下载仓库里的提示词，在线仓库不定时更新",
      "state": "closed",
      "author": "Hanschase",
      "author_type": "User",
      "created_at": "2025-02-12T09:44:39Z",
      "updated_at": "2025-02-12T10:34:12Z",
      "closed_at": "2025-02-12T10:34:11Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1072/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1072",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1072",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:57.179353",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2025-02-12T10:34:11Z"
        }
      ]
    },
    {
      "issue_number": 1069,
      "title": "[Bug]: 对接gewechat启动报错",
      "body": null,
      "state": "closed",
      "author": "wspzf",
      "author_type": "User",
      "created_at": "2025-02-11T16:23:39Z",
      "updated_at": "2025-02-12T08:52:26Z",
      "closed_at": "2025-02-11T16:25:42Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1069/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1069",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1069",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:57.417166",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "哥们你提错地儿了，你用的是人家dify on wechat的代码",
          "created_at": "2025-02-11T16:25:36Z"
        },
        {
          "author": "wspzf",
          "body": "不好意思，发出来就看到了，关闭了。我也碰到 #1030 的问题，换了个平台试试，也有问题",
          "created_at": "2025-02-11T16:28:32Z"
        }
      ]
    },
    {
      "issue_number": 759,
      "title": "[Bug?]: 显示依赖包未安装，安装成功后重启仍显示未安装",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\nyiri-mirai（Mirai）\n\n### 系统环境\n\nwin10\n\n### Python环境\n\n3.11\n\n### QChatGPT版本\n\n3.1.0.3\n\n### 异常情况\n\n在虚拟环境中安装requirements.txt的依赖后显示以下内容，重启后还显示依赖包未安装这段\r\n`python -m pip install aiocqhttp`并重启也不行，重启多次都显示依赖包未安装这段\r\n（在和不在虚拟环境安装都尝试过）\r\n\r\n```\r\nE:\\QQ_Robot\\QChatGPT-3.1.0.3\\QChatGPT-3.1.0.3>python main.py\r\n\r\n  ___   ___ _         _    ___ ___ _____\r\n / _ \\ / __| |_  __ _| |_ / __| _ \\_   _|\r\n| (_) | (__| ' \\/ _` |  _| (_ |  _/ | |\r\n \\__\\_\\\\___|_||_\\__,_|\\__|\\___|_|   |_|\r\n\r\n⭐️开源地址: https://github.com/RockChinQ/QChatGPT\r\n📖文档地址: https://q.rkcn.top\r\n\r\n以下依赖包未安装，将自动安装，请完成后重启程序：\r\n- aiocqhttp\r\nWARNING: pip is being invoked by an old script wrapper. This will fail in a future version of pip.\r\nPlease see https://github.com/pypa/pip/issues/5599 for advice on fixing the underlying issue.\r\nTo avoid this problem you can invoke Python with '-m pip' instead of running pip directly.\r\nRequirement already satisfied: aiocqhttp in e:\\anaconda\\lib\\site-packages (1.4.4)\r\nRequirement already satisfied: Quart<1.0,>=0.17 in e:\\anaconda\\lib\\site-packages (from aiocqhttp) (0.17.0)\r\nRequirement already satisfied: httpx<1.0,>=0.11 in e:\\anaconda\\lib\\site-packages (from aiocqhttp) (0.24.1)\r\nRequirement already satisfied: certifi in e:\\anaconda\\lib\\site-packages (from httpx<1.0,>=0.11->aiocqhttp) (2024.2.2)\r\nRequirement already satisfied: httpcore<0.18.0,>=0.15.0 in e:\\anaconda\\lib\\site-packages (from httpx<1.0,>=0.11->aiocqhttp) (0.17.3)\r\nRequirement already satisfied: idna in e:\\anaconda\\lib\\site-packages (from httpx<1.0,>=0.11->aiocqhttp) (3.4)\r\nRequirement already satisfied: sniffio in e:\\anaconda\\lib\\site-packages (from httpx<1.0,>=0.11->aiocqhttp) (1.3.0)\r\nRequirement already satisfied: aiofiles in e:\\anaconda\\lib\\site-packages (from Quart<1.0,>=0.17->aiocqhttp) (23.2.1)\r\nRequirement already satisfied: blinker in e:\\anaconda\\lib\\site-packages (from Quart<1.0,>=0.17->aiocqhttp) (1.7.0)\r\nRequirement already satisfied: click in e:\\anaconda\\lib\\site-packages (from Quart<1.0,>=0.17->aiocqhttp) (8.1.7)\r\nRequirement already satisfied: hypercorn>=0.11.2 in e:\\anaconda\\lib\\site-packages (from Quart<1.0,>=0.17->aiocqhttp) (0.16.0)\r\nRequirement already satisfied: itsdangerous in e:\\anaconda\\lib\\site-packages (from Quart<1.0,>=0.17->aiocqhttp) (2.1.2)\r\nRequirement already satisfied: jinja2 in e:\\anaconda\\lib\\site-packages (from Quart<1.0,>=0.17->aiocqhttp) (3.1.2)\r\nRequirement already satisfied: markupsafe in e:\\anaconda\\lib\\site-packages (from Quart<1.0,>=0.17->aiocqhttp) (2.1.1)\r\nRequirement already satisfied: toml in e:\\anaconda\\lib\\site-packages (from Quart<1.0,>=0.17->aiocqhttp) (0.10.2)\r\nRequirement already satisfied: werkzeug>=2.0.0 in e:\\anaconda\\lib\\site-packages (from Quart<1.0,>=0.17->aiocqhttp) (3.0.1)\r\nRequirement already satisfied: h11<0.15,>=0.13 in e:\\anaconda\\lib\\site-packages (from httpcore<0.18.0,>=0.15.0->httpx<1.0,>=0.11->aiocqhttp) (0.14.0)\r\nRequirement already satisfied: anyio<5.0,>=3.0 in e:\\anaconda\\lib\\site-packages (from httpcore<0.18.0,>=0.15.0->httpx<1.0,>=0.11->aiocqhttp) (3.7.1)\r\nRequirement already satisfied: h2>=3.1.0 in e:\\anaconda\\lib\\site-packages (from hypercorn>=0.11.2->Quart<1.0,>=0.17->aiocqhttp) (4.1.0)\r\nRequirement already satisfied: priority in e:\\anaconda\\lib\\site-packages (from hypercorn>=0.11.2->Quart<1.0,>=0.17->aiocqhttp) (2.0.0)\r\nRequirement already satisfied: wsproto>=0.14.0 in e:\\anaconda\\lib\\site-packages (from hypercorn>=0.11.2->Quart<1.0,>=0.17->aiocqhttp) (1.2.0)\r\nRequirement already satisfied: colorama in e:\\anaconda\\lib\\site-packages (from click->Quart<1.0,>=0.17->aiocqhttp) (0.4.6)\r\nRequirement already satisfied: hyperframe<7,>=6.0 in e:\\anaconda\\lib\\site-packages (from h2>=3.1.0->hypercorn>=0.11.2->Quart<1.0,>=0.17->aiocqhttp) (6.0.1)\r\nRequirement already satisfied: hpack<5,>=4.0 in e:\\anaconda\\lib\\site-packages (from h2>=3.1.0->hypercorn>=0.11.2->Quart<1.0,>=0.17->aiocqhttp) (4.0.0)\r\n已自动安装缺失的依赖包，请重启程序。\r\n```\n\n### 日志信息\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "lueluelue2006",
      "author_type": "User",
      "created_at": "2024-04-17T03:08:47Z",
      "updated_at": "2025-02-12T08:16:55Z",
      "closed_at": "2024-05-07T12:30:42Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/759/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/759",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/759",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:57.633102",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "环境问题自己解决一下哈～",
          "created_at": "2024-05-07T12:30:42Z"
        },
        {
          "author": "hjyaaaaaa",
          "body": "遇到了同样的问题，卡了好久，后面发现是要必装SQLite的开发库，安装完libsqlite3-dev，使用sqlite3 --version\n有版本输出，重新编译一下创建虚拟环境安装依赖就没问题了",
          "created_at": "2025-02-12T08:16:54Z"
        }
      ]
    },
    {
      "issue_number": 994,
      "title": "[Feature]: 文档能写一下如何接入本地模型吗？",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n文档能写一下如何接入本地模型吗？目前文档里面只有接入api的，本地的好像没有？",
      "state": "closed",
      "author": "gluttonysnorlax",
      "author_type": "User",
      "created_at": "2025-01-30T13:49:53Z",
      "updated_at": "2025-02-12T07:22:15Z",
      "closed_at": "2025-02-12T07:22:15Z",
      "labels": [
        "m: Provider"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/994/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "the-lazy-me"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/994",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/994",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:57.862333",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "@the-lazy-me 有空补一个ollama的文章吧，到`实践`那一块儿",
          "created_at": "2025-01-30T13:51:46Z"
        },
        {
          "author": "gluttonysnorlax",
          "body": "> [@the-lazy-me](https://github.com/the-lazy-me) 有空补一个ollama的文章吧，到那一块儿`实践`\n\n感谢感谢~~",
          "created_at": "2025-01-30T14:14:17Z"
        }
      ]
    },
    {
      "issue_number": 1064,
      "title": "[Plugin]: 请求登记新插件 正则表达式过滤器",
      "body": "### 插件名称\n\n正则表达式过滤器-RegexFilter\n\n### 插件代码库地址\n\nhttps://github.com/sanxianxiaohuntun/RegexFilter\n\n### 插件简介\n\n一个用于过滤大模型回复中特定内容的插件，支持XML标签和普通正则表达式过滤。\n正则表达式过滤器使用说明：\n/正则 <表达式> - 添加新的正则表达式\n/正则 列表 - 显示当前所有正则表达式\n/正则 删除 <表达式> - 删除指定正则表达式\n/正则 关闭 <表达式> - 暂时关闭指定正则表达式\n/正则 启用 <表达式> - 启用指定正则表达式\n示例：/正则 <think></think> - 将过滤掉<think></think>标签及其内部内容",
      "state": "closed",
      "author": "sanxianxiaohuntun",
      "author_type": "User",
      "created_at": "2025-02-11T06:38:42Z",
      "updated_at": "2025-02-12T06:18:07Z",
      "closed_at": "2025-02-12T06:18:06Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1064/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1064",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1064",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:58.071642",
      "comments": [
        {
          "author": "sheetung",
          "body": "肝王",
          "created_at": "2025-02-11T07:51:41Z"
        },
        {
          "author": "RockChinQ",
          "body": "好好好",
          "created_at": "2025-02-12T06:18:06Z"
        }
      ]
    },
    {
      "issue_number": 1063,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nGitAnalysis\n\n### 插件代码库地址\n\nhttps://github.com/sheetung/GitAnalysis\n\n### 插件简介\n\nLangBot 插件，解析GitHub/Gitee仓库信息，包括starts,fork,等",
      "state": "closed",
      "author": "sheetung",
      "author_type": "User",
      "created_at": "2025-02-11T06:02:20Z",
      "updated_at": "2025-02-12T06:17:40Z",
      "closed_at": "2025-02-12T06:17:39Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1063/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1063",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1063",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:58.277573",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2025-02-12T06:17:39Z"
        }
      ]
    },
    {
      "issue_number": 1028,
      "title": "[Feature]: 使用阿里云百炼平台的自定义模型无法在bot上正常使用",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n这是控制台的报错信息\n[02-07 15:36:53.338] chat.py (94) - [ERROR] : 对话(10)请求失败: RequesterError 模型请求失败: 请求错误: Error code: 403 - {'code': 'App.AccessDenied', 'message': 'App access denied.', 'request_id': '9ef7aad5-1a8c-985e-8b9c-8cf9d7319311'}[02-07 15:36:53.570] controller.py (98) - [ERROR] : 模型请求失败: 请求错误: Error code: 403 - {'code': 'App.AccessDenied', 'message': 'App access denied.', 'request_id': '9ef7aad5-1a8c-985e-8b9c-8cf9d7319311'}\n\nllm-models.json的关于这个模型的配置：\n{\n            \"name\": \"64f01f41d20640209425a4a7ddfac5b0\",\n            \"requester\": \"openai-chat-completions\",\n            \"token_mgr\": \"openai\"\n}\n\nproviders.json中的配置\n\"openai-chat-completions\": {\n      \"args\": {},\n      \"base-url\": \"https://dashscope.aliyuncs.com/api/v1/apps\",\n      \"timeout\": 120\n    },\n\n我使用curl进行模型调用，在地址https://dashscope.aliyuncs.com/api/v1/apps/64f01f41d20640209425a4a7ddfac5b0/completion是可以正常得到回复的。\n\n我也尝试过https://dashscope.aliyuncs.com/api/v1   https://dashscope.aliyuncs.com/api   https://dashscope.aliyuncs.com/等链接但是会收到404的报错。\n\n这是阿里云百炼官方提供的调用方法，POST https://dashscope.aliyuncs.com/api/v1/apps/{YOUR_APP_ID}/completion\n\n我在文档和issue中均没有找到关于阿里平台的配置方法，请问我应该如何进行我的配置",
      "state": "closed",
      "author": "lyg09270",
      "author_type": "User",
      "created_at": "2025-02-07T15:50:49Z",
      "updated_at": "2025-02-12T05:44:20Z",
      "closed_at": "2025-02-12T05:44:20Z",
      "labels": [
        "m: Provider"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1028/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1028",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1028",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:58.533289",
      "comments": [
        {
          "author": "lyg09270",
          "body": "继续了解了一下发现阿里用了自己家的dashscope SDK，好像并没有openai的支持，",
          "created_at": "2025-02-08T06:45:26Z"
        }
      ]
    },
    {
      "issue_number": 1052,
      "title": "[Bug]: [ERROR] : 对话(38)请求失败: AttributeError 'NoneType' object has no attribute 'choices'",
      "body": "### 消息平台适配器\n\ngewechat（个人微信）\n\n### 运行环境\n\ndocker\n\n### 异常情况\n\n服务部署成功后，把机器人拉到一个微信群里面，群成员@机器人的时候，这时（机器人的群消息还未返回）私聊机器人，私聊的回话会返回“请求失败”，日志会出现上面的报错信息，等群里面的消息回复后，再私聊就正常了。\n\n整个过程的 debug 日志信息：\n[02-10 06:10:14.647] process.py (42) - [INFO] : 处理 group_44910526804@chatroom 的请求(16): 请问下，百度地图有什么接口能获取一个地址的邮编吗？\n[02-10 06:10:40.359] process.py (42) - [INFO] : 处理 person_wxid_mo9qxb9tht8h22 的请求(17): [笑脸]\n[02-10 06:10:40.657] chat.py (94) - [ERROR] : 对话(17)请求失败: AttributeError 'NoneType' object has no attribute 'choices'\n[02-10 06:10:40.938] controller.py (98) - [ERROR] : 'NoneType' object has no attribute 'choices'\n[02-10 06:11:05.409] process.py (42) - [INFO] : 处理 person_wxid_mo9qxb9tht8h22 的请求(18): 你好\n[02-10 06:11:05.665] chat.py (94) - [ERROR] : 对话(18)请求失败: AttributeError 'NoneType' object has no attribute 'choices'\n[02-10 06:11:05.882] controller.py (98) - [ERROR] : 'NoneType' object has no attribute 'choices'\n[02-10 06:12:07.028] process.py (42) - [INFO] : 处理 person_wxid_mo9qxb9tht8h22 的请求(19): 1\n[02-10 06:12:07.325] chat.py (94) - [ERROR] : 对话(19)请求失败: AttributeError 'NoneType' object has no attribute 'choices'\n[02-10 06:12:07.557] controller.py (98) - [ERROR] : 'NoneType' object has no attribute 'choices'\n[02-10 06:12:14.659] chat.py (80) - [INFO] : 对话(16)响应: assistant: 百度地图提供了丰富...\n[02-10 06:13:23.073] process.py (42) - [INFO] : 处理 person_wxid_mo9qxb9tht8h22 的请求(20): 你好\n[02-10 06:13:28.806] chat.py (80) - [INFO] : 对话(20)响应: assistant: 你好！很高兴再次见...\n[02-10 06:13:32.567] process.py (42) - [INFO] : 处理 person_wxid_mo9qxb9tht8h22 的请求(21): 1[02-10 06:13:40.320] chat.py (80) - [INFO] : 对话(21)响应: assistant: 看起来你输入了“1...\n[02-10 07:57:24.721] process.py (42) - [INFO] : 处理 person_wxid_mo9qxb9tht8h22 的请求(28): 你好呀\n[02-10 07:57:32.321] chat.py (80) - [INFO] : 对话(28)响应: assistant: 你好呀！很高兴再次...\n\n### 复现步骤\n\n模型接口用的是腾讯云的\n\n配置文件内容如下：\ndata/config/platform.json\n{\n    \"platform-adapters\": [\n        {\n            \"adapter\": \"nakuru\",\n            \"enable\": false,\n            \"host\": \"127.0.0.1\",\n            \"ws_port\": 8080,\n            \"http_port\": 5700,\n            \"token\": \"\"\n        },\n        {\n            \"adapter\": \"aiocqhttp\",\n            \"enable\": false,\n            \"host\": \"0.0.0.0\",\n            \"port\": 2280,\n            \"access-token\": \"\"\n        },\n        {\n            \"adapter\": \"qq-botpy\",\n            \"enable\": false,\n            \"appid\": \"\",\n            \"secret\": \"\",\n            \"intents\": [\n                \"public_guild_messages\",\n                \"direct_message\"\n            ]\n        },\n        {\n            \"adapter\": \"qqofficial\",\n            \"enable\": false,\n            \"appid\": \"1234567890\",\n            \"secret\": \"xxxxxxx\",\n            \"port\": 2284,\n            \"token\": \"abcdefg\"\n        },\n        {\n            \"adapter\": \"wecom\",\n            \"enable\": false,\n            \"host\": \"0.0.0.0\",\n            \"port\": 2290,\n            \"corpid\": \"\",\n            \"secret\": \"\",\n            \"token\": \"\",\n            \"EncodingAESKey\": \"\",\n            \"contacts_secret\": \"\"\n        },\n        {\n            \"adapter\": \"lark\",\n            \"enable\": false,\n            \"app_id\": \"cli_abcdefgh\",\n            \"app_secret\": \"XXXXXXXXXX\",\n            \"bot_name\": \"LangBot\"\n        },\n        {\n            \"adapter\": \"discord\",\n            \"enable\": false,\n            \"client_id\": \"1234567890\",\n            \"token\": \"XXXXXXXXXX\"\n        },\n        {\n            \"adapter\": \"gewechat\",\n            \"enable\": true,\n            \"gewechat_url\": \"http://gewe:2531\",\n            \"port\": 2286,\n            \"callback_url\": \"http://langbot:2286/gewechat/callback\",\n            \"app_id\": \"xxxxxxxxxxxxxxxxxxx\",\n            \"token\": \"xxxxxxxxxxxxxxxxx\"\n        }\n    ],\n    \"track-function-calls\": true,\n    \"quote-origin\": false,\n    \"at-sender\": false,\n    \"force-delay\": {\n        \"min\": 0,\n        \"max\": 0\n    },\n    \"long-text-process\": {\n        \"threshold\": 2560,\n        \"strategy\": \"forward\",\n        \"font-path\": \"\"\n    },\n    \"hide-exception-info\": true\n}\n\ndata/config/provider.json\n{\n    \"enable-chat\": true,\n    \"enable-vision\": true,\n    \"keys\": {\n        \"openai\": [\n            \"sk-xxxxxxxxxxxxxxxxx\"\n        ],\n        \"anthropic\": [\n            \"sk-1234567890\"\n        ],\n        \"moonshot\": [\n            \"sk-1234567890\"\n        ],\n        \"deepseek\": [\n            \"sk-xxxxxxxxxxx\"\n        ],\n        \"gitee-ai\": [\n            \"XXXXX\"\n        ],\n        \"xai\": [\n            \"xai-1234567890\"\n        ],\n        \"zhipuai\": [\n            \"xxxxxxx\"\n        ],\n        \"siliconflow\": [\n            \"xxxxxxx\"\n        ]\n    },\n    \"requester\": {\n        \"openai-chat-completions\": {\n            \"base-url\": \"https://api.lkeap.cloud.tencent.com/v1\",\n            \"args\": {},\n            \"timeout\": 120\n        },\n        \"anthropic-messages\": {\n            \"base-url\": \"https://api.anthropic.com\",\n            \"args\": {\n                \"max_tokens\": 1024\n            },\n            \"timeout\": 120\n        },\n        \"moonshot-chat-completions\": {\n            \"base-url\": \"https://api.moonshot.cn/v1\",\n            \"args\": {},\n            \"timeout\": 120\n        },\n        \"deepseek-chat-completions\": {\n            \"base-url\": \"https://api.lkeap.cloud.tencent.com/v1\",\n            \"args\": {},\n            \"timeout\": 600\n        },\n        \"ollama-chat\": {\n            \"base-url\": \"http://127.0.0.1:11434\",\n            \"args\": {},\n            \"timeout\": 600\n        },\n        \"gitee-ai-chat-completions\": {\n            \"base-url\": \"https://ai.gitee.com/v1\",\n            \"args\": {},\n            \"timeout\": 120\n        },\n        \"xai-chat-completions\": {\n            \"base-url\": \"https://api.x.ai/v1\",\n            \"args\": {},\n            \"timeout\": 120\n        },\n        \"zhipuai-chat-completions\": {\n            \"base-url\": \"https://open.bigmodel.cn/api/paas/v4\",\n            \"args\": {},\n            \"timeout\": 120\n        },\n        \"lmstudio-chat-completions\": {\n            \"base-url\": \"http://127.0.0.1:1234/v1\",\n            \"args\": {},\n            \"timeout\": 120\n        },\n        \"siliconflow-chat-completions\": {\n            \"base-url\": \"https://api.siliconflow.cn/v1\",\n            \"args\": {},\n            \"timeout\": 120\n        }\n    },\n    \"model\": \"deepseek-v3\",\n    \"prompt-mode\": \"normal\",\n    \"prompt\": {\n        \"default\": \"\"\n    },\n    \"runner\": \"local-agent\",\n    \"dify-service-api\": {\n        \"base-url\": \"https://api.dify.ai/v1\",\n        \"app-type\": \"chat\",\n        \"chat\": {\n            \"api-key\": \"app-1234567890\",\n            \"timeout\": 120\n        },\n        \"agent\": {\n            \"api-key\": \"app-1234567890\",\n            \"timeout\": 120\n        },\n        \"workflow\": {\n            \"api-key\": \"app-1234567890\",\n            \"output-key\": \"summary\",\n            \"timeout\": 120\n        }\n    }\n}\n\ndata/metadata/llm-models.json\n{\n    \"list\": [\n        {\n            \"name\": \"default\",\n            \"requester\": \"openai-chat-completions\",\n            \"token_mgr\": \"openai\",\n            \"tool_call_supported\": false,\n            \"vision_supported\": false\n        },\n        {\n            \"name\": \"gpt-4o\",\n            \"tool_call_supported\": true,\n            \"vision_supported\": true\n        },\n        {\n            \"name\": \"gpt-4o-2024-11-20\",\n            \"tool_call_supported\": true,\n            \"vision_supported\": true\n        },\n        {\n            \"name\": \"gpt-4o-2024-08-06\",\n            \"tool_call_supported\": true,\n            \"vision_supported\": true\n        },\n        {\n            \"name\": \"gpt-4o-2024-05-13\",\n            \"tool_call_supported\": true,\n            \"vision_supported\": true\n        },\n        {\n            \"name\": \"chatgpt-4o-latest\",\n            \"tool_call_supported\": true,\n            \"vision_supported\": true\n        },\n        {\n            \"name\": \"gpt-4o-mini\",\n            \"tool_call_supported\": true,\n            \"vision_supported\": true\n        },\n        {\n            \"name\": \"o1-preview\",\n            \"tool_call_supported\": true,\n            \"vision_supported\": true\n        },\n        {\n            \"name\": \"o1-mini\",\n            \"tool_call_supported\": true,\n            \"vision_supported\": true\n        },\n        {\n            \"name\": \"gpt-4-turbo\",\n            \"tool_call_supported\": true,\n            \"vision_supported\": true\n        },\n        {\n            \"name\": \"gpt-4\",\n            \"tool_call_supported\": true,\n            \"vision_supported\": true\n        },\n        {\n            \"name\": \"gpt-3.5-turbo\",\n            \"tool_call_supported\": true,\n            \"vision_supported\": false\n        },\n        {\n            \"model_name\": \"SparkDesk\",\n            \"name\": \"OneAPI/SparkDesk\"\n        },\n        {\n            \"model_name\": \"gemini-pro\",\n            \"name\": \"OneAPI/gemini-pro\"\n        },\n        {\n            \"name\": \"claude-3-opus-latest\",\n            \"requester\": \"anthropic-messages\",\n            \"token_mgr\": \"anthropic\",\n            \"vision_supported\": true\n        },\n        {\n            \"name\": \"claude-3-5-sonnet-latest\",\n            \"requester\": \"anthropic-messages\",\n            \"token_mgr\": \"anthropic\",\n            \"vision_supported\": true\n        },\n        {\n            \"name\": \"claude-3-5-haiku-latest\",\n            \"requester\": \"anthropic-messages\",\n            \"token_mgr\": \"anthropic\",\n            \"vision_supported\": true\n        },\n        {\n            \"name\": \"moonshot-v1-8k\",\n            \"requester\": \"moonshot-chat-completions\",\n            \"token_mgr\": \"moonshot\",\n            \"tool_call_supported\": true\n        },\n        {\n            \"name\": \"moonshot-v1-32k\",\n            \"requester\": \"moonshot-chat-completions\",\n            \"token_mgr\": \"moonshot\",\n            \"tool_call_supported\": true\n        },\n        {\n            \"name\": \"moonshot-v1-128k\",\n            \"requester\": \"moonshot-chat-completions\",\n            \"token_mgr\": \"moonshot\",\n            \"tool_call_supported\": true\n        },\n        {\n            \"name\": \"deepseek-chat\",\n            \"requester\": \"deepseek-chat-completions\",\n            \"token_mgr\": \"deepseek\",\n            \"tool_call_supported\": true\n        },\n        {\n            \"name\": \"deepseek-coder\",\n            \"requester\": \"deepseek-chat-completions\",\n            \"token_mgr\": \"deepseek\"\n        },\n        {\n            \"name\": \"deepseek-reasoner\",\n            \"requester\": \"deepseek-chat-completions\",\n            \"token_mgr\": \"deepseek\"\n        },\n        {\n            \"name\": \"grok-2-latest\",\n            \"requester\": \"xai-chat-completions\",\n            \"token_mgr\": \"xai\"\n        },\n        {\n            \"name\": \"grok-2\",\n            \"requester\": \"xai-chat-completions\",\n            \"token_mgr\": \"xai\"\n        },\n        {\n            \"name\": \"grok-2-vision-1212\",\n            \"requester\": \"xai-chat-completions\",\n            \"token_mgr\": \"xai\",\n            \"vision_supported\": true\n        },\n        {\n            \"name\": \"grok-2-1212\",\n            \"requester\": \"xai-chat-completions\",\n            \"token_mgr\": \"xai\"\n        },\n        {\n            \"name\": \"grok-vision-beta\",\n            \"requester\": \"xai-chat-completions\",\n            \"token_mgr\": \"xai\",\n            \"vision_supported\": true\n        },\n        {\n            \"name\": \"grok-beta\",\n            \"requester\": \"xai-chat-completions\",\n            \"token_mgr\": \"xai\"\n        },\n        {\n            \"name\": \"glm-4-plus\",\n            \"requester\": \"zhipuai-chat-completions\",\n            \"token_mgr\": \"zhipuai\"\n        },\n        {\n            \"name\": \"glm-4-0520\",\n            \"requester\": \"zhipuai-chat-completions\",\n            \"token_mgr\": \"zhipuai\"\n        },\n        {\n            \"name\": \"glm-4-air\",\n            \"requester\": \"zhipuai-chat-completions\",\n            \"token_mgr\": \"zhipuai\"\n        },\n        {\n            \"name\": \"glm-4-airx\",\n            \"requester\": \"zhipuai-chat-completions\",\n            \"token_mgr\": \"zhipuai\"\n        },\n        {\n            \"name\": \"glm-4-long\",\n            \"requester\": \"zhipuai-chat-completions\",\n            \"token_mgr\": \"zhipuai\"\n        },\n        {\n            \"name\": \"glm-4-flashx\",\n            \"requester\": \"zhipuai-chat-completions\",\n            \"token_mgr\": \"zhipuai\"\n        },\n        {\n            \"name\": \"glm-4-flash\",\n            \"requester\": \"zhipuai-chat-completions\",\n            \"token_mgr\": \"zhipuai\"\n        },\n        {\n            \"name\": \"glm-4v-plus\",\n            \"requester\": \"zhipuai-chat-completions\",\n            \"token_mgr\": \"zhipuai\",\n            \"vision_supported\": true\n        },\n        {\n            \"name\": \"glm-4v\",\n            \"requester\": \"zhipuai-chat-completions\",\n            \"token_mgr\": \"zhipuai\",\n            \"vision_supported\": true\n        },\n        {\n            \"name\": \"glm-4v-flash\",\n            \"requester\": \"zhipuai-chat-completions\",\n            \"token_mgr\": \"zhipuai\",\n            \"vision_supported\": true\n        },\n        {\n            \"name\": \"glm-zero-preview\",\n            \"requester\": \"zhipuai-chat-completions\",\n            \"token_mgr\": \"zhipuai\",\n            \"vision_supported\": true\n        },\n        {\n            \"name\": \"deepseek-v3\",\n            \"requester\": \"openai-chat-completions\",\n            \"token_mgr\": \"openai\",\n            \"tool_call_supported\": false,\n            \"vision_supported\": false\n        }\n    ]\n}\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "WalkreHuang",
      "author_type": "User",
      "created_at": "2025-02-10T10:08:51Z",
      "updated_at": "2025-02-11T13:24:45Z",
      "closed_at": "2025-02-11T13:24:43Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1052/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1052",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1052",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:58.750826",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "你设置一个环境变量 `export DEBUG=true`，再复现一下这个问题，看看详细报错信息，贴上来",
          "created_at": "2025-02-10T11:41:06Z"
        },
        {
          "author": "WalkreHuang",
          "body": "> 你设置一个环境变量 `export DEBUG=true`，再复现一下这个问题，看看详细报错信息，贴上来\n\n日志信息如下：\n[02-11 01:20:00.088] controller.py (38) - [DEBUG] : Checking query query_id=0 launcher_type=<LauncherTypes.GROUP: 'group'> launcher_id='50551070129@chatroom' sender_id='wxid_mo9qxb9tht8h22' message_event=GroupMessage(message_chain=Messa",
          "created_at": "2025-02-11T01:24:24Z"
        },
        {
          "author": "AnonPai",
          "body": "别看了, 微信号被封了,申诉都没用, 换个微信号",
          "created_at": "2025-02-11T01:40:15Z"
        },
        {
          "author": "RockChinQ",
          "body": "修复了，等下一个版本。",
          "created_at": "2025-02-11T13:24:43Z"
        }
      ]
    },
    {
      "issue_number": 1061,
      "title": "[Plugin]: 请求登记新插件 权限控制插件",
      "body": "### 插件名称\n\nAccessControl 权限控制插件\n\n### 插件代码库地址\n\n[AccessControl 权限控制插件](https://github.com/sanxianxiaohuntun/AccessControl)\n\n### 插件简介\n\nAccessControl 插件命令帮助\n═══════════════\n【基础命令】\n/ac 帮助 - 显示此帮助信息\n/ac 查看配置 - 显示当前所有配置信息\n\n【管理员管理】\n/ac 添加管理员 <用户ID> - 添加一个新的管理员\n/ac 删除管理员 <用户ID> - 移除一个现有管理员\n示例：/ac 添加管理员 2926253308\n\n【私聊权限管理】\n/ac 添加私聊 <用户ID> - 允许指定用户私聊机器人\n/ac 删除私聊 <用户ID> - 移除用户的私聊权限\n示例：/ac 添加私聊 2926253308\n\n【群聊权限管理】\n1. 群聊白名单：\n/ac 添加群聊 <群ID> - 将群添加到白名单（默认白名单模式）\n/ac 删除群聊 <群ID> - 将群从白名单移除\n示例：/ac 添加群聊 348774756\n\n2. 群聊模式设置：\n/ac 设置模式 <群ID> <白名单/黑名单> - 设置群的访问控制模式\n示例：/ac 设置模式 348774756 黑名单\n\n3. 白名单模式下的用户管理：\n/ac 添加群白名单 <群ID> <用户ID> - 允许指定用户访问\n/ac 删除群白名单 <群ID> <用户ID> - 移除用户的访问权限\n示例：/ac 添加群白名单 348774756 551865214\n\n4. 黑名单模式下的用户管理：\n/ac 添加群黑名单 <群ID> <用户ID> - 禁止指定用户访问\n/ac 删除群黑名单 <群ID> <用户ID> - 解除用户的访问限制\n示例：/ac 添加群黑名单 348774756 551865214\n\n【使用说明】\n1. 所有命令仅管理员可用\n2. 群必须先添加到白名单才能进行其他操作\n3. 白名单模式：仅白名单内用户可访问\n4. 黑名单模式：除黑名单外的用户都可访问\n5. 管理员不受任何限制\n\n【注意事项】\n1. 删除群聊会同时清除该群所有配置\n2. 建议定期使用 /ac 查看配置 检查设置\n3. 修改配置后无需重启，立即生效",
      "state": "closed",
      "author": "sanxianxiaohuntun",
      "author_type": "User",
      "created_at": "2025-02-11T04:25:36Z",
      "updated_at": "2025-02-11T10:35:56Z",
      "closed_at": "2025-02-11T10:35:55Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1061/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1061",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1061",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:59.013736",
      "comments": [
        {
          "author": "sanxianxiaohuntun",
          "body": "有插件冲突，我更新下 暂时锁一下",
          "created_at": "2025-02-11T10:35:55Z"
        }
      ]
    },
    {
      "issue_number": 1047,
      "title": "[Bug]:QQ官方机器人接入dify无法正常回复",
      "body": "### 消息平台适配器\n\nqqofficial（QQ官方API Webhook）\n\n### 运行环境\n\nDocker\n\n### 异常情况\n\nlangbot连接dify失败\n\n根据https://docs.langbot.app/config/function/provider.html#dify-service-api-%E9%85%8D%E7%BD%AE-dify-service-api文档配置\n\n![Image](https://github.com/user-attachments/assets/50959e55-b271-4324-8123-2a7f245b2182)\n（ps：上述接口已经通过curl测试通过，可正常访问访问dify并返回结果。）\n\n在qq中@机器人发送：“你是谁”，机器人返回：“请求失败”。\n\n打开debug日志后可看到错误信息：\n\n```bash\n[02-10 03:41:41.040] process.py (42) - [INFO] : 处理 person_9D00E6F52013C51F9676BFB5DF994EC8 的请求(10):\n[02-10 03:41:41.041] controller.py (147) - [DEBUG] : Stage MessageProcessor processed query query_id=10 launcher_type=<LauncherTypes.PERSON: 'person'> launcher_id='9D00E6F52013C51F9676BFB5DF994EC8' sender_id='9D00E6F52013C51F9676BFB5DF994EC8' message_event=FriendMessage(message_chain=MessageChain([Source(id='ROBOT1.0_ahkkVO7K2IaEYSauOdTQRfLtgSpknE-oqrGGCxPATYz5Ii4zd8vz1O0nzoyCkeQbGJeLcQqQ6HKYMCO-dn8PKg!!', time=datetime.datetime(2025, 2, 10, 3, 41, 41, 31038)), Plain('')]), source_platform_object={'t': 'C2C_MESSAGE_CREATE', 'user_openid': '9D00E6F52013C51F9676BFB5DF994EC8', 'timestamp': '2025-02-10T11:41:40+08:00', 'd_author_id': '9D00E6F52013C51F9676BFB5DF994EC8', **'content': '你是谁',** 'd_id': 'ROBOT1.0_ahkkVO7K2IaEYSauOdTQRfLtgSpknE-oqrGGCxPATYz5Ii4zd8vz1O0nzoyCkeQbGJeLcQqQ6HKYMCO-dn8PKg!!', 'id': 'C2C_MESSAGE_CREATE:lslglhl6n6hzrlytp4tgakvpu8tviktxulyekjstwllrvnalz48ppb8ix6asuhn', 'channel_id': {}, 'username': {}, 'guild_id': {}, 'member_openid': {}, 'group_openid': {}, 'image_attachments': None}, sender=Friend(id='9D00E6F52013C51F9676BFB5DF994EC8', nickname='C2C_MESSAGE_CREATE', remark='')) message_chain=MessageChain([Source(id='ROBOT1.0_ahkkVO7K2IaEYSauOdTQRfLtgSpknE-oqrGGCxPATYz5Ii4zd8vz1O0nzoyCkeQbGJeLcQqQ6HKYMCO-dn8PKg!!', time=datetime.datetime(2025, 2, 10, 3, 41, 41, 31038)), Plain('')]) adapter=<pkg.platform.sources.qqofficial.QQOfficialAdapter object at 0x7f1caf96ad70> session=Session(launcher_type=<LauncherTypes.PERSON: 'person'>, launcher_id='9D00E6F52013C51F9676BFB5DF994EC8', sender_id=0, use_prompt_name='default', using_conversation=Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 2, 10, 3, 25, 5, 759647), update_time=datetime.datetime(2025, 2, 10, 3, 25, 5, 759651), use_model=LLMModelInfo(name='default', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7f1caf887bb0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7f1caf887d00>, tool_call_supported=False, vision_supported=False), use_funcs=[], uuid=None), conversations=[Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 2, 10, 3, 25, 5, 759647), update_time=datetime.datetime(2025, 2, 10, 3, 25, 5, 759651), use_model=LLMModelInfo(name='default', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7f1caf887bb0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7f1caf887d00>, tool_call_supported=False, vision_supported=False), use_funcs=[], uuid=None)], create_time=datetime.datetime(2025, 2, 10, 3, 25, 5, 756507), update_time=datetime.datetime(2025, 2, 10, 3, 25, 5, 756509), semaphore=<asyncio.locks.Semaphore object at 0x7f1cafba9fc0 [locked]>) messages=[] prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]) user_message=Message(role='user', name=None, content=[ContentElement(type='text', text='', image_url=None, image_base64=None)], tool_calls=None, tool_call_id=None) use_model=LLMModelInfo(name='default', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7f1caf887bb0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7f1caf887d00>, tool_call_supported=False, vision_supported=False) use_funcs=None resp_messages=[] resp_message_chain=[] current_stage=<pkg.pipeline.stagemgr.StageInstContainer object at 0x7f1cafbe0a00> gen\n[02-10 03:41:41.041] manager.py (235) - [DEBUG] : 事件 PersonNormalMessageReceived(32) 处理完成，返回值 {}\n**[02-10 03:41:41.197] chat.py (94) - [ERROR] : 对话(10)请求失败: DifyAPIError 400 {\"code\": \"invalid_param\", \"message\": \"query is required\", \"status\": 400}**\n[02-10 03:41:41.198] controller.py (150) - [DEBUG] : Stage MessageProcessor processed query query_id=10 launcher_type=<LauncherTypes.PERSON: 'person'> launcher_id='9D00E6F52013C51F9676BFB5DF994EC8' sender_id='9D00E6F52013C51F9676BFB5DF994EC8' message_event=FriendMessage(message_chain=MessageChain([Source(id='ROBOT1.0_ahkkVO7K2IaEYSauOdTQRfLtgSpknE-oqrGGCxPATYz5Ii4zd8vz1O0nzoyCkeQbGJeLcQqQ6HKYMCO-dn8PKg!!', time=datetime.datetime(2025, 2, 10, 3, 41, 41, 31038)), Plain('')]), source_platform_object={'t': 'C2C_MESSAGE_CREATE', 'user_openid': '9D00E6F52013C51F9676BFB5DF994EC8', 'timestamp': '2025-02-10T11:41:40+08:00', 'd_author_id': '9D00E6F52013C51F9676BFB5DF994EC8', 'content': '你是谁', 'd_id': 'ROBOT1.0_ahkkVO7K2IaEYSauOdTQRfLtgSpknE-oqrGGCxPATYz5Ii4zd8vz1O0nzoyCkeQbGJeLcQqQ6HKYMCO-dn8PKg!!', 'id': 'C2C_MESSAGE_CREATE:lslglhl6n6hzrlytp4tgakvpu8tviktxulyekjstwllrvnalz48ppb8ix6asuhn', 'channel_id': {}, 'username': {}, 'guild_id': {}, 'member_openid': {}, 'group_openid': {}, 'image_attachments': None}, sender=Friend(id='9D00E6F52013C51F9676BFB5DF994EC8', nickname='C2C_MESSAGE_CREATE', remark='')) message_chain=MessageChain([Source(id='ROBOT1.0_ahkkVO7K2IaEYSauOdTQRfLtgSpknE-oqrGGCxPATYz5Ii4zd8vz1O0nzoyCkeQbGJeLcQqQ6HKYMCO-dn8PKg!!', time=datetime.datetime(2025, 2, 10, 3, 41, 41, 31038)), Plain('')]) adapter=<pkg.platform.sources.qqofficial.QQOfficialAdapter object at 0x7f1caf96ad70> session=Session(launcher_type=<LauncherTypes.PERSON: 'person'>, launcher_id='9D00E6F52013C51F9676BFB5DF994EC8', sender_id=0, use_prompt_name='default', using_conversation=Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 2, 10, 3, 25, 5, 759647), update_time=datetime.datetime(2025, 2, 10, 3, 25, 5, 759651), use_model=LLMModelInfo(name='default', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7f1caf887bb0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7f1caf887d00>, tool_call_supported=False, vision_supported=False), use_funcs=[], uuid=None), conversations=[Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 2, 10, 3, 25, 5, 759647), update_time=datetime.datetime(2025, 2, 10, 3, 25, 5, 759651), use_model=LLMModelInfo(name='default', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7f1caf887bb0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7f1caf887d00>, tool_call_supported=False, vision_supported=False), use_funcs=[], uuid=None)], create_time=datetime.datetime(2025, 2, 10, 3, 25, 5, 756507), update_time=datetime.datetime(2025, 2, 10, 3, 25, 5, 756509), semaphore=<asyncio.locks.Semaphore object at 0x7f1cafba9fc0 [locked]>) messages=[] prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]) user_message=Message(role='user', name=None, content=[ContentElement(type='text', text='', image_url=None, image_base64=None)], tool_calls=None, tool_call_id=None) use_model=LLMModelInfo(name='default', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7f1caf887bb0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7f1caf887d00>, tool_call_supported=False, vision_supported=False) use_funcs=None resp_messages=[] resp_message_chain=[] current_stage=<pkg.pipeline.stagemgr.StageInstContainer object at 0x7f1cafbe0a00> res result_type=<ResultType.INTERRUPT: 2> new_query=Query(query_id=10, launcher_type=<LauncherTypes.PERSON: 'person'>, launcher_id='9D00E6F52013C51F9676BFB5DF994EC8', sender_id='9D00E6F52013C51F9676BFB5DF994EC8', message_event=FriendMessage(message_chain=MessageChain([Source(id='ROBOT1.0_ahkkVO7K2IaEYSauOdTQRfLtgSpknE-oqrGGCxPATYz5Ii4zd8vz1O0nzoyCkeQbGJeLcQqQ6HKYMCO-dn8PKg!!', time=datetime.datetime(2025, 2, 10, 3, 41, 41, 31038)), Plain('')]), source_platform_object={'t': 'C2C_MESSAGE_CREATE', 'user_openid': '9D00E6F52013C51F9676BFB5DF994EC8', 'timestamp': '2025-02-10T11:41:40+08:00', 'd_author_id': '9D00E6F52013C51F9676BFB5DF994EC8', 'content': '你是谁', 'd_id': 'ROBOT1.0_ahkkVO7K2IaEYSauOdTQRfLtgSpknE-oqrGGCxPATYz5Ii4zd8vz1O0nzoyCkeQbGJeLcQqQ6HKYMCO-dn8PKg!!', 'id': 'C2C_MESSAGE_CREATE:lslglhl6n6hzrlytp4tgakvpu8tviktxulyekjstwllrvnalz48ppb8ix6asuhn', 'channel_id': {}, 'username': {}, 'guild_id': {}, 'member_openid': {}, 'group_openid': {}, 'image_attachments': None}, sender=Friend(id='9D00E6F52013C51F9676BFB5DF994EC8', nickname='C2C_MESSAGE_CREATE', remark='')), message_chain=MessageChain([Source(id='ROBOT1.0_ahkkVO7K2IaEYSauOdTQRfLtgSpknE-oqrGGCxPATYz5Ii4zd8vz1O0nzoyCkeQbGJeLcQqQ6HKYMCO-dn8PKg!!', time=datetime.datetime(2025, 2, 10, 3, 41, 41, 31038)), Plain('')]), adapter=<pkg.platform.sources.qqofficial.QQOfficialAdapter object at 0x7f1caf96ad70>, session=Session(launcher_type=<LauncherTypes.PERSON: 'person'>, launcher_id='9D00E6F52013C51F9676BFB5DF994EC8', sender_id=0, use_prompt_name='default', using_conversation=Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 2, 10, 3, 25, 5, 759647), update_time=datetime.datetime(2025, 2, 10, 3, 25, 5, 759651), use_model=LLMModelInfo(name='default', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7f1caf887bb0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7f1caf887d00>, tool_call_supported=False, vision_supported=False), use_funcs=[], uuid=None), conversations=[Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 2, 10, 3, 25, 5, 759647), update_time=datetime.datetime(2025, 2, 10, 3, 25, 5, 759651), use_model=LLMModelInfo(name='default', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7f1caf887bb0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7f1caf887d00>, tool_call_supported=False, vision_supported=False), use_funcs=[], uuid=None)], create_time=datetime.datetime(2025, 2, 10, 3, 25, 5, 756507), update_time=datetime.datetime(2025, 2, 10, 3, 25, 5, 756509), semaphore=<asyncio.locks.Semaphore object at 0x7f1cafba9fc0 [locked]>), messages=[], prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), user_message=Message(role='user', name=None, content=[ContentElement(type='text', text='', image_url=None, image_base64=None)], tool_calls=None, tool_call_id=None), use_model=LLMModelInfo(name='default', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7f1caf887bb0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7f1caf887d00>, tool_call_supported=False, vision_supported=False), use_funcs=None, resp_messages=[], resp_message_chain=[], current_stage=<pkg.pipeline.stagemgr.StageInstContainer object at 0x7f1cafbe0a00>) user_notice='请求失败' console_notice='' debug_notice='Traceback (most recent call last):\\n  File \"/app/pkg/pipeline/process/handlers/chat.py\", line 77, in handle\\n    async for result in runner.run(query):\\n  File \"/app/pkg/provider/runners/difysvapi.py\", line 285, in run\\n    async for msg in self._chat_messages(query):\\n  File \"/app/pkg/provider/runners/difysvapi.py\", line 94, in _chat_messages\\n    async for chunk in self.dify_client.chat_messages(\\n  File \"/app/libs/dify_service_api/v1/client.py\", line 58, in chat_messages\\n    raise DifyAPIError(f\"{r.status_code} {chunk}\")\\nlibs.dify_service_api.v1.errors.DifyAPIError: 400 {\"code\": \"invalid_param\", \"message\": \"query is required\", \"status\": 400}\\n' error_notice='400 {\"code\": \"invalid_param\", \"message\": \"query is required\", \"status\": 400}'\n[02-10 03:41:41.654] controller.py (94) - [DEBUG] : Traceback (most recent call last):\n  File \"/app/pkg/pipeline/process/handlers/chat.py\", line 77, in handle\n    async for result in runner.run(query):\n  File \"/app/pkg/provider/runners/difysvapi.py\", line 285, in run\n    async for msg in self._chat_messages(query):\n  File \"/app/pkg/provider/runners/difysvapi.py\", line 94, in _chat_messages\n    async for chunk in self.dify_client.chat_messages(\n  File \"/app/libs/dify_service_api/v1/client.py\", line 58, in chat_messages\n    raise DifyAPIError(f\"{r.status_code} {chunk}\")\nlibs.dify_service_api.v1.errors.DifyAPIError: 400 {\"code\": \"invalid_param\", \"message\": \"query is required\", \"status\": 400}\n\n[02-10 03:41:41.654] controller.py (98) - [ERROR] : 400 {\"code\": \"invalid_param\", \"message\": \"query is required\", \"status\": 400}\n[02-10 03:41:41.655] controller.py (154) - [DEBUG] : Stage MessageProcessor interrupted query query_id=10 launcher_type=<LauncherTypes.PERSON: 'person'> launcher_id='9D00E6F52013C51F9676BFB5DF994EC8' sender_id='9D00E6F52013C51F9676BFB5DF994EC8' message_event=FriendMessage(message_chain=MessageChain([Source(id='ROBOT1.0_ahkkVO7K2IaEYSauOdTQRfLtgSpknE-oqrGGCxPATYz5Ii4zd8vz1O0nzoyCkeQbGJeLcQqQ6HKYMCO-dn8PKg!!', time=datetime.datetime(2025, 2, 10, 3, 41, 41, 31038)), Plain('')]), source_platform_object={'t': 'C2C_MESSAGE_CREATE', 'user_openid': '9D00E6F52013C51F9676BFB5DF994EC8', 'timestamp': '2025-02-10T11:41:40+08:00', 'd_author_id': '9D00E6F52013C51F9676BFB5DF994EC8', 'content': '你是谁', 'd_id': 'ROBOT1.0_ahkkVO7K2IaEYSauOdTQRfLtgSpknE-oqrGGCxPATYz5Ii4zd8vz1O0nzoyCkeQbGJeLcQqQ6HKYMCO-dn8PKg!!', 'id': 'C2C_MESSAGE_CREATE:lslglhl6n6hzrlytp4tgakvpu8tviktxulyekjstwllrvnalz48ppb8ix6asuhn', 'channel_id': {}, 'username': {}, 'guild_id': {}, 'member_openid': {}, 'group_openid': {}, 'image_attachments': None}, sender=Friend(id='9D00E6F52013C51F9676BFB5DF994EC8', nickname='C2C_MESSAGE_CREATE', remark='')) message_chain=MessageChain([Source(id='ROBOT1.0_ahkkVO7K2IaEYSauOdTQRfLtgSpknE-oqrGGCxPATYz5Ii4zd8vz1O0nzoyCkeQbGJeLcQqQ6HKYMCO-dn8PKg!!', time=datetime.datetime(2025, 2, 10, 3, 41, 41, 31038)), Plain('')]) adapter=<pkg.platform.sources.qqofficial.QQOfficialAdapter object at 0x7f1caf96ad70> session=Session(launcher_type=<LauncherTypes.PERSON: 'person'>, launcher_id='9D00E6F52013C51F9676BFB5DF994EC8', sender_id=0, use_prompt_name='default', using_conversation=Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 2, 10, 3, 25, 5, 759647), update_time=datetime.datetime(2025, 2, 10, 3, 25, 5, 759651), use_model=LLMModelInfo(name='default', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7f1caf887bb0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7f1caf887d00>, tool_call_supported=False, vision_supported=False), use_funcs=[], uuid=None), conversations=[Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 2, 10, 3, 25, 5, 759647), update_time=datetime.datetime(2025, 2, 10, 3, 25, 5, 759651), use_model=LLMModelInfo(name='default', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7f1caf887bb0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7f1caf887d00>, tool_call_supported=False, vision_supported=False), use_funcs=[], uuid=None)], create_time=datetime.datetime(2025, 2, 10, 3, 25, 5, 756507), update_time=datetime.datetime(2025, 2, 10, 3, 25, 5, 756509), semaphore=<asyncio.locks.Semaphore object at 0x7f1cafba9fc0 [locked]>) messages=[] prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]) user_message=Message(role='user', name=None, content=[ContentElement(type='text', text='', image_url=None, image_base64=None)], tool_calls=None, tool_call_id=None) use_model=LLMModelInfo(name='default', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7f1caf887bb0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7f1caf887d00>, tool_call_supported=False, vision_supported=False) use_funcs=None resp_messages=[] resp_message_chain=[] current_stage=<pkg.pipeline.stagemgr.StageInstContainer object at 0x7f1cafbe0a00>\n[02-10 03:41:41.655] controller.py (192) - [DEBUG] : Query query_id=10 launcher_type=<LauncherTypes.PERSON: 'person'> launcher_id='9D00E6F52013C51F9676BFB5DF994EC8' sender_id='9D00E6F52013C51F9676BFB5DF994EC8' message_event=FriendMessage(message_chain=MessageChain([Source(id='ROBOT1.0_ahkkVO7K2IaEYSauOdTQRfLtgSpknE-oqrGGCxPATYz5Ii4zd8vz1O0nzoyCkeQbGJeLcQqQ6HKYMCO-dn8PKg!!', time=datetime.datetime(2025, 2, 10, 3, 41, 41, 31038)), Plain('')]), source_platform_object={'t': 'C2C_MESSAGE_CREATE', 'user_openid': '9D00E6F52013C51F9676BFB5DF994EC8', 'timestamp': '2025-02-10T11:41:40+08:00', 'd_author_id': '9D00E6F52013C51F9676BFB5DF994EC8', 'content': '你是谁', 'd_id': 'ROBOT1.0_ahkkVO7K2IaEYSauOdTQRfLtgSpknE-oqrGGCxPATYz5Ii4zd8vz1O0nzoyCkeQbGJeLcQqQ6HKYMCO-dn8PKg!!', 'id': 'C2C_MESSAGE_CREATE:lslglhl6n6hzrlytp4tgakvpu8tviktxulyekjstwllrvnalz48ppb8ix6asuhn', 'channel_id': {}, 'username': {}, 'guild_id': {}, 'member_openid': {}, 'group_openid': {}, 'image_attachments': None}, sender=Friend(id='9D00E6F52013C51F9676BFB5DF994EC8', nickname='C2C_MESSAGE_CREATE', remark='')) message_chain=MessageChain([Source(id='ROBOT1.0_ahkkVO7K2IaEYSauOdTQRfLtgSpknE-oqrGGCxPATYz5Ii4zd8vz1O0nzoyCkeQbGJeLcQqQ6HKYMCO-dn8PKg!!', time=datetime.datetime(2025, 2, 10, 3, 41, 41, 31038)), Plain('')]) adapter=<pkg.platform.sources.qqofficial.QQOfficialAdapter object at 0x7f1caf96ad70> session=Session(launcher_type=<LauncherTypes.PERSON: 'person'>, launcher_id='9D00E6F52013C51F9676BFB5DF994EC8', sender_id=0, use_prompt_name='default', using_conversation=Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 2, 10, 3, 25, 5, 759647), update_time=datetime.datetime(2025, 2, 10, 3, 25, 5, 759651), use_model=LLMModelInfo(name='default', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7f1caf887bb0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7f1caf887d00>, tool_call_supported=False, vision_supported=False), use_funcs=[], uuid=None), conversations=[Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 2, 10, 3, 25, 5, 759647), update_time=datetime.datetime(2025, 2, 10, 3, 25, 5, 759651), use_model=LLMModelInfo(name='default', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7f1caf887bb0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7f1caf887d00>, tool_call_supported=False, vision_supported=False), use_funcs=[], uuid=None)], create_time=datetime.datetime(2025, 2, 10, 3, 25, 5, 756507), update_time=datetime.datetime(2025, 2, 10, 3, 25, 5, 756509), semaphore=<asyncio.locks.Semaphore object at 0x7f1cafba9fc0 [locked]>) messages=[] prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]) user_message=Message(role='user', name=None, content=[ContentElement(type='text', text='', image_url=None, image_base64=None)], tool_calls=None, tool_call_id=None) use_model=LLMModelInfo(name='default', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7f1caf887bb0>, requester=<pkg.provider.modelmgr.requesters.chatcmpl.OpenAIChatCompletions object at 0x7f1caf887d00>, tool_call_supported=False, vision_supported=False) use_funcs=None resp_messages=[] resp_message_chain=[] current_stage=<pkg.pipeline.stagemgr.StageInstContainer object at 0x7f1cafbe0a00> processed\n[02-10 03:41:41.769] apigroup.py (52) - [DEBUG] : data: {\"basic\": {\"host_id\": \"host_4aba7e68-748a-4d2e-bb9a-9cd48c6a5b34\", \"instance_id\": \"instance_0700fc64-d5ff-48e4-b61f-762b4d1debf0\", \"semantic_version\": \"v3.4.6.1\", \"platform\": \"docker\", \"rid\": \"299ea945-fa09-49ac-9de7-7f83532c84a5\"}, \"runtime\": {\"admin_id\": \"[]\", \"msg_source\": \"['qqofficial']\", \"account_id\": \"-1\"}, \"session_info\": {\"type\": \"person\", \"id\": \"9D00E6F52013C51F9676BFB5DF994EC8\"}, \"query_info\": {\"ability_provider\": \"LangBot.Chat\", \"usage\": 0, \"model_name\": \"default\", \"response_seconds\": 0, \"retry_times\": -1}}\n[02-10 03:41:41.770] apigroup.py (53) - [DEBUG] : ret: {\"error\":\"Key: 'UsageQueryDTO.QueryInfo.Usage' Error:Field validation for 'Usage' failed on the 'required' tag\\nKey: 'UsageQueryDTO.QueryInfo.ResponseSeconds' Error:Field validation for 'ResponseSeconds' failed on the 'required' tag\"}\n```\n\n### 复现步骤\n\n1、正常部署dify，创建机器人\n2、按langbot dify连接文档配置连接\n3、部署qq官方机器人，并使用webhook的方式连接到langbot\n4、在qq中@机器人或者私信机器人\n\n### 启用的插件\n\n无",
      "state": "closed",
      "author": "hfgang",
      "author_type": "User",
      "created_at": "2025-02-10T03:47:46Z",
      "updated_at": "2025-02-11T10:33:35Z",
      "closed_at": "2025-02-11T10:33:33Z",
      "labels": [
        "bug?",
        "m: Platform",
        "Stale"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1047/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1047",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1047",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:59.176338",
      "comments": [
        {
          "author": "wangcham",
          "body": "麻烦发一下data/logs/langbot-xxxx日志",
          "created_at": "2025-02-10T13:51:35Z"
        },
        {
          "author": "wangcham",
          "body": "是正常的群聊私信还是在频道呢？\n\n",
          "created_at": "2025-02-10T16:43:52Z"
        },
        {
          "author": "RockChinQ",
          "body": "看一下你版本多少？是不是最新的，我们注意到前几天有一个pr修复了类似的问题 #1026 ，已经包含在最新版了。",
          "created_at": "2025-02-11T02:54:58Z"
        },
        {
          "author": "hfgang",
          "body": "> 是正常的群聊私信还是在频道呢？\n\n私聊和群消息都存在这个问题。你要的log日志，已经提交了。目前我用的docker版的，版本是：v3.4.6.1\n\n\n[langbot-2025-02-11.log](https://github.com/user-attachments/files/18748188/langbot-2025-02-11.log)",
          "created_at": "2025-02-11T10:06:41Z"
        },
        {
          "author": "RockChinQ",
          "body": "你重新拉一下最新的镜像呢？",
          "created_at": "2025-02-11T10:08:11Z"
        }
      ]
    },
    {
      "issue_number": 1050,
      "title": "[Plugin]: 请求登记新插件 让AI会发表情包",
      "body": "### 插件名称\n\nAi表情包插件\n\n### 插件代码库地址\n\nhttps://github.com/sanxianxiaohuntun/EmoticonPlugin\n\n### 插件简介\n\n支持多种格式的表情包图片 (GIF, PNG, JPG, JPEG, WEBP)\n自动在 AI 回复中识别和发送表情包\n支持私聊和群聊场景\n表情包和文字可以同时发送\n自动维护表情包配置文件\n\n",
      "state": "closed",
      "author": "sanxianxiaohuntun",
      "author_type": "User",
      "created_at": "2025-02-10T09:25:05Z",
      "updated_at": "2025-02-10T16:44:23Z",
      "closed_at": "2025-02-10T16:44:21Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1050/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1050",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1050",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:59.423897",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "good。",
          "created_at": "2025-02-10T16:44:21Z"
        }
      ]
    },
    {
      "issue_number": 1048,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nDailyGoalsTracker\n\n### 插件代码库地址\n\nhttps://github.com/sheetung/DailyGoalsTracker\n\n### 插件简介\n\nQChat插件，实现每日目标打卡，可重复打卡不同目标，并且统计持续打卡时间，月年打卡记录等",
      "state": "closed",
      "author": "sheetung",
      "author_type": "User",
      "created_at": "2025-02-10T06:34:13Z",
      "updated_at": "2025-02-10T16:44:03Z",
      "closed_at": "2025-02-10T16:43:51Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1048/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1048",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1048",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:59.593104",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "不是，应该是“LangBot 插件”",
          "created_at": "2025-02-10T16:42:55Z"
        },
        {
          "author": "RockChinQ",
          "body": "已加到插件市场，记得改一下描述。",
          "created_at": "2025-02-10T16:43:51Z"
        },
        {
          "author": "sheetung",
          "body": "OK改了",
          "created_at": "2025-02-10T16:44:01Z"
        }
      ]
    },
    {
      "issue_number": 1023,
      "title": "[Bug]: 接入企业微信时遇到账号是0开头的就会出现问题",
      "body": "### 消息平台适配器\n\nwecom（企业微信）\n\n### 运行环境\n\nDocker\n\n### 异常情况\n\n如果企微的这个访问账号是0020203，那么langbot返回的时候会认为账号是20203，就会报不合法的账号错误：\n\n![Image](https://github.com/user-attachments/assets/ba542fac-1298-412f-a90b-bcb80cf7b63c)\n\n### 复现步骤\n\n只要设置一个账号是0开头的企业微信测试下就行\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "weiweisang1993",
      "author_type": "User",
      "created_at": "2025-02-07T00:20:02Z",
      "updated_at": "2025-02-10T16:24:18Z",
      "closed_at": "2025-02-10T16:24:18Z",
      "labels": [
        "bug?",
        "IM: wecom"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 14,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1023/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1023",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1023",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:23:59.762472",
      "comments": [
        {
          "author": "weiweisang1993",
          "body": "刚才找了个账号8开头的试了下就没问题，大神帮忙解决下吧，感激不尽~~~",
          "created_at": "2025-02-07T01:17:42Z"
        },
        {
          "author": "wangcham",
          "body": "你看看是不是企业机器人的可见权限不够？企业微信机器人是可以设置可见范围的，这一点确实在文档中没有提及，后续会补全文档。\n\n![Image](https://github.com/user-attachments/assets/48bc31d4-5ed3-4a66-9c59-8c82447f57a5)",
          "created_at": "2025-02-07T03:38:30Z"
        },
        {
          "author": "weiweisang1993",
          "body": "> 你看看是不是企业机器人的可见权限不够？企业微信机器人是可以设置可见范围的，这一点确实在文档中没有提及，后续会补全文档。\n> \n> ![Image](https://github.com/user-attachments/assets/48bc31d4-5ed3-4a66-9c59-8c82447f57a5)\n\n应该不是这个原因，可见范围是我这个账户0020203，langbot确实也拿到了我的信息，但处理完deepseek的返回消息后给0020203账户时，显示的是发给20203，所以就显示不合法的账户",
          "created_at": "2025-02-07T04:13:31Z"
        },
        {
          "author": "wangcham",
          "body": "好的，我们尽快修复，到时候会发一个新版本解决。",
          "created_at": "2025-02-07T04:27:01Z"
        },
        {
          "author": "weiweisang1993",
          "body": "> 好的，我们尽快修复，到时候会发一个新版本解决。\n\n真的非常感谢~",
          "created_at": "2025-02-07T05:01:11Z"
        }
      ]
    },
    {
      "issue_number": 1049,
      "title": "求助",
      "body": "![Screenshot_2025-02-10-17-23-41-129_com.termux.jpg](https://github.com/user-attachments/assets/4d779093-67f6-42c1-b0da-cc1cd7d76d05)\n\n",
      "state": "closed",
      "author": "ZHAOZ1491",
      "author_type": "User",
      "created_at": "2025-02-10T09:24:31Z",
      "updated_at": "2025-02-10T15:48:35Z",
      "closed_at": "2025-02-10T15:48:35Z",
      "labels": [
        "Stale"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1049/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1049",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1049",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:00.076538",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "更新到最新版本。",
          "created_at": "2025-02-10T09:37:07Z"
        },
        {
          "author": "ZHAOZ1491",
          "body": "这是docker运行的,现在用本地部署，正常了",
          "created_at": "2025-02-10T15:48:31Z"
        }
      ]
    },
    {
      "issue_number": 1051,
      "title": "[Bug]: 镜像拉取失败",
      "body": "### 消息平台适配器\n\n其他（或暂未使用）\n\n### 运行环境\n\nDocker\n\n### 异常情况\n\n拉取镜像失败\nUsing default tag: latest\nlatest: Pulling from rockchin/langbot\n8a1e25ce7c4f: Pull complete\n1103112ebfc4: Downloading\nfb784af4aeda: Download complete\n043e7f3dd05a: Download complete\n538a89c93346: Download complete\nd45af7890cd0: Download complete\nce4464fc06bb: Downloading\n4e471fe81778: Download complete\ne1f0a97b1566: Download complete\nerror parsing HTTP 400 response body: invalid character '<' looking for beginning of value: \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?><Error><Code>InvalidRequest</Code><Message>Missing x-amz-content-sha256</Message></Error>\"\n\n### 复现步骤\n\n![Image](https://github.com/user-attachments/assets/58ed04a8-0c41-4867-82df-12bd010a5ce2)\n\n### 启用的插件\n\n未启用插件",
      "state": "closed",
      "author": "yantaosun",
      "author_type": "User",
      "created_at": "2025-02-10T09:55:26Z",
      "updated_at": "2025-02-10T11:42:32Z",
      "closed_at": "2025-02-10T11:42:31Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1051/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1051",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1051",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:00.326839",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "这是你的镜像源或者网络有问题，我爱莫能助。",
          "created_at": "2025-02-10T11:42:31Z"
        }
      ]
    },
    {
      "issue_number": 1039,
      "title": "[Bug]: 启动容器时会提示“platform.json 中启用了未知的平台适配器: gewechat”",
      "body": "### 消息平台适配器\n\n其他（或暂未使用）\n\n### 运行环境\n\ndocker 环境运行\n\n### 异常情况\n\n作者你好，我在运行这个项目时，在启动容器时会提示“platform.json 中启用了未知的平台适配器: gewechat”，然后容器会退出，具体输出如下：\n` ✔ Container langbot  Created                                                                                                             0.0s \nAttaching to langbot\nlangbot  | [02-08 09:22:33.199] manager.py (68) - [INFO] : 初始化平台适配器 0: aiocqhttp\nlangbot  | [02-08 09:22:33.202] manager.py (68) - [INFO] : 初始化平台适配器 1: gewechat\nlangbot  | Traceback (most recent call last):\nlangbot  |   File \"/app/pkg/core/boot.py\", line 65, in main\nlangbot  |     app_inst = await make_app(loop)\nlangbot  |   File \"/app/pkg/core/boot.py\", line 43, in make_app\nlangbot  |     await stage_inst.run(ap)\nlangbot  |   File \"/app/pkg/core/stages/build_app.py\", line 105, in run\nlangbot  |     await im_mgr_inst.initialize()\nlangbot  |   File \"/app/pkg/platform/manager.py\", line 98, in initialize\nlangbot  |     raise Exception('platform.json 中启用了未知的平台适配器: ' + adapter_name)\nlangbot  | Exception: platform.json 中启用了未知的平台适配器: gewechat`\n\n### 复现步骤\n\ngewe 部署完，配置文件修改之后，docker-compose up 就会出现该情况\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "Miaosful",
      "author_type": "User",
      "created_at": "2025-02-08T09:30:26Z",
      "updated_at": "2025-02-10T03:21:01Z",
      "closed_at": "2025-02-10T03:21:01Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1039/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1039",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1039",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:00.478496",
      "comments": [
        {
          "author": "Miaosful",
          "body": "上面的输出有点混乱，重新发了一下，感谢 \n✔ Container langbot  Created                                                                                                             0.0s \nAttaching to langbot\nlangbot  | [02-08 09:22:33.199] manager.py (68) - [INFO] : 初始化平台适配器 0: aiocqhttp\nlangbot  | [02-08 09:22:33.202] ma",
          "created_at": "2025-02-08T09:31:26Z"
        },
        {
          "author": "RockChinQ",
          "body": "拉取最新的镜像看看",
          "created_at": "2025-02-08T09:32:47Z"
        }
      ]
    },
    {
      "issue_number": 1005,
      "title": "[Bug]: 从v3.4.4.1更新至v3.4.5以后启动提示依赖包未安装（v3.4.4.1启动正常）",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\nv3.4.5、Windows11专业工作站版、x64、Python3.13\n\n### 异常情况\n\n从v3.4.4.1更新至v3.4.5以后启动提示依赖包未安装（v3.4.4.1启动正常），自动安装后启动依旧提示依赖包未安装。\n\n### 复现步骤\n\nD:\\langbot>python main.py\n以下依赖包未安装，将自动安装，请完成后重启程序：\n- discord\nWARNING: pip is being invoked by an old script wrapper. This will fail in a future version of pip.\nPlease see https://github.com/pypa/pip/issues/5599 for advice on fixing the underlying issue.\nTo avoid this problem you can invoke Python with '-m pip' instead of running pip directly.\nLooking in indexes: https://pypi.tuna.tsinghua.edu.cn/simple\nRequirement already satisfied: discord.py in c:\\users\\nekoserver\\appdata\\local\\programs\\python\\python313\\lib\\site-packages (2.4.0)\nRequirement already satisfied: aiohttp<4,>=3.7.4 in c:\\users\\nekoserver\\appdata\\local\\programs\\python\\python313\\lib\\site-packages (from discord.py) (3.11.11)\nRequirement already satisfied: aiohappyeyeballs>=2.3.0 in c:\\users\\nekoserver\\appdata\\local\\programs\\python\\python313\\lib\\site-packages (from aiohttp<4,>=3.7.4->discord.py) (2.4.4)\nRequirement already satisfied: aiosignal>=1.1.2 in c:\\users\\nekoserver\\appdata\\local\\programs\\python\\python313\\lib\\site-packages (from aiohttp<4,>=3.7.4->discord.py) (1.3.2)\nRequirement already satisfied: attrs>=17.3.0 in c:\\users\\nekoserver\\appdata\\local\\programs\\python\\python313\\lib\\site-packages (from aiohttp<4,>=3.7.4->discord.py) (25.1.0)\nRequirement already satisfied: frozenlist>=1.1.1 in c:\\users\\nekoserver\\appdata\\local\\programs\\python\\python313\\lib\\site-packages (from aiohttp<4,>=3.7.4->discord.py) (1.5.0)\nRequirement already satisfied: multidict<7.0,>=4.5 in c:\\users\\nekoserver\\appdata\\local\\programs\\python\\python313\\lib\\site-packages (from aiohttp<4,>=3.7.4->discord.py) (6.1.0)\nRequirement already satisfied: propcache>=0.2.0 in c:\\users\\nekoserver\\appdata\\local\\programs\\python\\python313\\lib\\site-packages (from aiohttp<4,>=3.7.4->discord.py) (0.2.1)\nRequirement already satisfied: yarl<2.0,>=1.17.0 in c:\\users\\nekoserver\\appdata\\local\\programs\\python\\python313\\lib\\site-packages (from aiohttp<4,>=3.7.4->discord.py) (1.18.3)\nRequirement already satisfied: idna>=2.0 in c:\\users\\nekoserver\\appdata\\local\\programs\\python\\python313\\lib\\site-packages (from yarl<2.0,>=1.17.0->aiohttp<4,>=3.7.4->discord.py) (3.10)\n已自动安装缺失的依赖包，请重启程序。\n\n以下是配置文件\n[platform.json](https://github.com/user-attachments/files/18631927/platform.json)\n[provider.json](https://github.com/user-attachments/files/18631928/provider.json)\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "DaFeiMao233",
      "author_type": "User",
      "created_at": "2025-02-02T10:28:53Z",
      "updated_at": "2025-02-08T12:39:18Z",
      "closed_at": "2025-02-04T13:07:25Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1005/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1005",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1005",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:00.701102",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "安装了之后重启可以解决吗？",
          "created_at": "2025-02-02T10:30:27Z"
        },
        {
          "author": "DaFeiMao233",
          "body": "> 安装了之后重启可以解决吗？\n\n不可以，一直提示依赖包discord未安装，将自动安装",
          "created_at": "2025-02-02T11:05:38Z"
        },
        {
          "author": "RockChinQ",
          "body": "这个问题看到有几个人都报告了。你按照以下步骤尝试一下：\n\n1. 先使用 pip 安装一下 requirements.txt 里的依赖\n2. 不行的话，按照 https://docs.langbot.app/deploy/langbot/manual.html 的步骤创建一个新的虚拟环境，在虚拟环境里启动 langbot\n\n若以上方案都无效，加群来找我 1030838208",
          "created_at": "2025-02-02T11:45:52Z"
        },
        {
          "author": "RockChinQ",
          "body": "我知道了，应该是跟python 3.13不兼容，建议你换成python 3.12，或者使用docker启动",
          "created_at": "2025-02-02T11:48:06Z"
        },
        {
          "author": "DaFeiMao233",
          "body": "> 我知道了，应该是跟python 3.13不兼容，建议你换成python 3.12，或者使用docker启动\n\n好的了解了，谢谢",
          "created_at": "2025-02-02T12:02:23Z"
        }
      ]
    },
    {
      "issue_number": 1019,
      "title": "[Bug]: 更正 官方qq webhook版，无法回复指令",
      "body": "### 消息平台适配器\n\nqq-botpy（QQ官方API）\n\n### 运行环境\n\nv3.4.6.1\n\n### 异常情况\n\n1. docker 部署\n2. 发送指令会走对话消息\n\n![Image](https://github.com/user-attachments/assets/7112c779-adf7-4070-ae33-345016241265)\n\n![Image](https://github.com/user-attachments/assets/5ca2c373-a24b-4606-b0d9-7f6fd7057261)\n\n![Image](https://github.com/user-attachments/assets/e6118068-bc5f-4e40-b564-f68e321e0ebd)\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "bzmshang",
      "author_type": "User",
      "created_at": "2025-02-05T11:57:25Z",
      "updated_at": "2025-02-08T06:32:55Z",
      "closed_at": "2025-02-08T06:32:55Z",
      "labels": [
        "bug?",
        "IM: qqofficial"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1019/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1019",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1019",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:00.886021",
      "comments": [
        {
          "author": "wangcham",
          "body": "根据报错来看是大模型平台的问题，LangBot 是可以正常回复消息的，改一下api_key试试。",
          "created_at": "2025-02-05T15:44:35Z"
        },
        {
          "author": "RockChinQ",
          "body": "配置应该都没问题，是大模型接口平台挂了，尝试换一个平台看看。",
          "created_at": "2025-02-05T15:46:43Z"
        },
        {
          "author": "RockChinQ",
          "body": "如果是斜杠开头命令没有响应，检查一下pipeline.json里的消息忽略规则是不是忽略掉这个消息了",
          "created_at": "2025-02-06T12:33:32Z"
        },
        {
          "author": "bzmshang",
          "body": "> 如果是斜杠开头命令没有响应，检查一下pipeline.json里的消息忽略规则是不是忽略掉这个消息了\n\n![Image](https://github.com/user-attachments/assets/8e0af49b-eb36-4bde-884f-aa5b378139c6)\n很早之前就吧所有的忽略都删了\n\n然后添加了 `！` 进行测试，依然不行\n\n![Image](https://github.com/user-attachments/assets/08d3d9de-97e6-4edf-90bb-7b3032f0103e)\n\n![Image](https://github.com/",
          "created_at": "2025-02-06T13:20:18Z"
        },
        {
          "author": "bzmshang",
          "body": "v3.4.6.2已修好![image](https://github.com/user-attachments/assets/3ee05e66-0561-4854-b61f-b1d4336235c4)",
          "created_at": "2025-02-08T06:32:43Z"
        }
      ]
    },
    {
      "issue_number": 1033,
      "title": "[Plugin]: 请求登记新插件 一键修改为起航api同时更新兼容模型列表",
      "body": "### 插件名称\n\n一键修改为起航api同时更新兼容模型列表\n\n### 插件代码库地址\n\nhttps://github.com/sanxianxiaohuntun/SailingaiAI-Api\n\n### 插件简介\n\n一个用于 langbot 的小型插件，一键修改为起航api同时更新兼容模型列表",
      "state": "closed",
      "author": "sanxianxiaohuntun",
      "author_type": "User",
      "created_at": "2025-02-07T22:22:20Z",
      "updated_at": "2025-02-08T02:21:36Z",
      "closed_at": "2025-02-08T02:16:27Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1033/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1033",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1033",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:01.067918",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "所以启航api的英文就译为 lazyapi了么。。",
          "created_at": "2025-02-08T02:16:27Z"
        },
        {
          "author": "sanxianxiaohuntun",
          "body": "QhaigcApi吧。。。晚点我改了",
          "created_at": "2025-02-08T02:17:58Z"
        },
        {
          "author": "sanxianxiaohuntun",
          "body": "更新 url 了 https://github.com/sanxianxiaohuntun/SailingaiAI-Api",
          "created_at": "2025-02-08T02:21:29Z"
        }
      ]
    },
    {
      "issue_number": 1034,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nAPI修改器\n\n### 插件代码库地址\n\nhttps://github.com/sanxianxiaohuntun/apiXGQ/\n\n### 插件简介\n\n输入命令即可一键修API、APIRUL、模型以及自动更新模型列表，如果元数据中没有你的模型它会自动更新你的模型数据到元数据中。",
      "state": "closed",
      "author": "sanxianxiaohuntun",
      "author_type": "User",
      "created_at": "2025-02-07T22:52:08Z",
      "updated_at": "2025-02-08T02:19:35Z",
      "closed_at": "2025-02-08T02:19:35Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1034/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1034",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1034",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:01.267954",
      "comments": []
    },
    {
      "issue_number": 1032,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nLangBot_YandexImageSearchPlugin\n\n### 插件代码库地址\n\nhttps://github.com/Thetail001/LangBot_YandexImageSearchPlugin/tree/master\n\n### 插件简介\n\n通过yandex搜图",
      "state": "closed",
      "author": "Thetail001",
      "author_type": "User",
      "created_at": "2025-02-07T19:52:48Z",
      "updated_at": "2025-02-08T02:19:00Z",
      "closed_at": "2025-02-08T02:18:59Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1032/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1032",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1032",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:01.267973",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！已添加到[star集](https://github.com/stars/RockChinQ/lists/qchatgpt-%E6%8F%92%E4%BB%B6), 将在半小时后于webui上的插件市场可用。",
          "created_at": "2025-02-08T02:18:59Z"
        }
      ]
    },
    {
      "issue_number": 1031,
      "title": "[Plugin]: 请求登记新插件 QQSillyTavern（QQ酒馆）",
      "body": "### 插件名称\n\nQQSillyTavern（QQ酒馆）\n\n### 插件代码库地址\n\nhttps://github.com/sanxianxiaohuntun/QQSillyTavern\n\n### 插件简介\n\n# QQ酒馆 - 角色扮演聊天插件 v0.1测试版\n\n一个功能丰富的角色扮演聊天插件，支持多角色、记忆系统、世界设定等功能。完全兼容SillyTavern的角色卡和世界书格式。\n\n\n\n## 功能特点\n\n- 🎭 支持多角色切换和管理，兼容SillyTavern角色卡\n- 💭 智能记忆系统，包含短期和长期记忆\n- 📚 世界设定系统，支持常驻和关键词触发，兼容SillyTavern世界书\n- 🎯 破甲模式，支持多种模板\n- 👤 用户个人资料设置\n- ⚙️ 灵活的正则处理系统\n",
      "state": "closed",
      "author": "sanxianxiaohuntun",
      "author_type": "User",
      "created_at": "2025-02-07T17:47:58Z",
      "updated_at": "2025-02-08T02:17:29Z",
      "closed_at": "2025-02-08T02:17:29Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1031/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1031",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1031",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:01.437666",
      "comments": []
    },
    {
      "issue_number": 1025,
      "title": "[Bug]: 消息链未被正确解析",
      "body": "### 消息平台适配器\n\nqqofficial（QQ官方API Webhook）\n\n### 运行环境\n\nv3.4.6.1-2-ga8f2438、Ubuntu、x86_64、Docker部署\n\n### 异常情况\n\n## 异常描述\n\nQQ官方API Webhook回调后，在`pkg.pipeline.process.process.py`中`Processor`类的`process`方法中，`query.message_chain`为空`Plain`，但是`query.message_event`中的`content`是能正常收到回调的信息。如下方日志描述，消息并没有被正常回显。\n\n## 关键日志\n```\n[02-07 12:28:28.994] app.py (168) - [INFO] : =======================================[02-07 12:28:48.394] process.py (44) - [INFO] : 处理 person_18EBC16FE9F7FD33D65DC2C888E2C8FA 的请求(0): [02-07 12:28:53.808] chat.py (80) - [INFO] : 对话(0)响应: assistant: Hello! Ho...\n```\n\n## 相关数据\n\n以下为`query: core_entities.Query`的部分属性\n\n```\n{\n\t'query_id': 0,\n\t'launcher_type': < LauncherTypes.PERSON: 'person' > ,\n\t'launcher_id': '********SENDER_ID********',\n\t'sender_id': '********SENDER_ID********',\n\t'message_event': FriendMessage(message_chain = MessageChain([Source(id = '********D_ID********', time = datetime.datetime(2025, 2, 7, 12, 28, 48, 388313)), Plain('')]), source_platform_object = {\n\t\t't': 'C2C_MESSAGE_CREATE',\n\t\t'user_openid': '********SENDER_ID********',\n\t\t'timestamp': '2025-02-07T20:28:47+08:00',\n\t\t'd_author_id': '********SENDER_ID********',\n\t\t'content': '你是谁',\n\t\t'd_id': '********D_ID********',\n\t\t'id': '********ID********',\n\t\t'channel_id': {},\n\t\t'username': {},\n\t\t'guild_id': {},\n\t\t'member_openid': {},\n\t\t'group_openid': {},\n\t\t'image_attachments': None\n\t}, sender = Friend(id = '********SENDER_ID********', nickname = 'C2C_MESSAGE_CREATE', remark = '')),\n\t'message_chain': MessageChain([Plain('')]),\n\t'adapter': < pkg.platform.sources.qqofficial.QQOfficialAdapter object at 0x7fc787c13dc0 > ,\n\t'session': Session(),\n    'messages': [],\n\t'prompt': Prompt(name = 'default', messages = [Message(role = 'system', name = None, content = '', tool_calls = None, tool_call_id = None)]),\n\t'user_message': Message(role = 'user', name = None, content = [ContentElement(type = 'text', text = '', image_url = None, image_base64 = None)], tool_calls = None, tool_call_id = None),\n\t'use_model': LLMModelInfo(),\n    'use_funcs': [],\n\t'resp_messages': [],\n\t'resp_message_chain': [],\n\t'current_stage': < pkg.pipeline.stagemgr.StageInstContainer object at 0x7fc787288b20 >\n}\n```\n\n### 复现步骤\n\n> 由于我已经排除了消息平台与`LangBot`、`LangBot`与`one-api`之间的对接问题，我认为这可能是`LangBot`代码中细微的问题导致的错误，所以此处未贴出相关配置文件与元数据文件。如需贴出，请告知。\n\n### 启用的插件\n\n> 未曾启用插件",
      "state": "closed",
      "author": "7emotions",
      "author_type": "User",
      "created_at": "2025-02-07T12:55:56Z",
      "updated_at": "2025-02-07T15:27:48Z",
      "closed_at": "2025-02-07T15:27:47Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1025/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1025",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1025",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:01.437690",
      "comments": [
        {
          "author": "wangcham",
          "body": "已合并修复代码，感谢纠正！",
          "created_at": "2025-02-07T15:27:47Z"
        }
      ]
    },
    {
      "issue_number": 993,
      "title": "[Bug]: [01-30 15:49:41.914] controller.py (189) - [ERROR] : 处理请求时出错 query_id=0 stage=PreProcessor : 无法确定模型 deepseek-r1-distill-llama-70b 的信息，请在元数据中配置",
      "body": "### 消息平台适配器\n\n其他（或暂未使用）\n\n### 运行环境\n\nwindows10 \n\n### 异常情况\n\n[01-30 15:49:41.914] controller.py (189) - [ERROR] : 处理请求时出错 query_id=0 stage=PreProcessor : 无法确定模型 deepseek-r1-distill-llama-70b 的信息，请在元数据中配置\n\n\n### 复现步骤\n\n[01-30 15:49:41.914] controller.py (189) - [ERROR] : 处理请求时出错 query_id=0 stage=PreProcessor : 无法确定模型 deepseek-r1-distill-llama-70b 的信息，请在元数据中配置\n\n\n### 启用的插件\n\n[01-30 15:49:41.914] controller.py (189) - [ERROR] : 处理请求时出错 query_id=0 stage=PreProcessor : 无法确定模型 deepseek-r1-distill-llama-70b 的信息，请在元数据中配置\n",
      "state": "closed",
      "author": "18921222044",
      "author_type": "User",
      "created_at": "2025-01-30T07:51:39Z",
      "updated_at": "2025-02-07T03:20:51Z",
      "closed_at": "2025-02-07T03:20:51Z",
      "labels": [
        "bug?",
        "Please take it seriously",
        "Stale"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/993/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/993",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/993",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:01.657582",
      "comments": [
        {
          "author": "saownj",
          "body": "这个我也经常有，复现步骤有多种\n\n\n1，保留登录的窗口，关闭另一个窗口，然后在启用关闭的\n2，添加自定义模型，修改元文件llm-models，，然后就会出现\n3，{随机概率}，修改一些参数后可出现。",
          "created_at": "2025-01-30T16:02:56Z"
        },
        {
          "author": "18921222044",
          "body": "您好，您的邮件已收到，我们会尽快处理。祝商祺！",
          "created_at": "2025-01-30T16:03:27Z"
        },
        {
          "author": "BertGuoWatson",
          "body": "看文档，provider.json的配置写了：“model：设置要使用的模型名称。此模型必须存在于 llm-models.json 元数据中。”。所以要去data/metadata/llm-models.json中添加你想要使用的模型的相关信息。",
          "created_at": "2025-02-02T15:00:47Z"
        },
        {
          "author": "Mrxia",
          "body": "在这个目录里面LangBot/data/metadata/llm-models.json添加如下图片中的模型就可以了，根据你的模型来修改，然后重启容器就行了\n![Image](https://github.com/user-attachments/assets/00a3a609-f3ac-4f17-be65-678c00f1b4b3)",
          "created_at": "2025-02-03T12:48:43Z"
        }
      ]
    },
    {
      "issue_number": 1008,
      "title": "[Bug]: 酒馆接入机器人请求失败",
      "body": "### 消息平台适配器\n\nqq-botpy（QQ官方API）\n\n### 运行环境\n\nLangBot整合包(特用于对接酒馆API-20250201\n\n### 异常情况\n\n和机器人对话出现请求失败\n\n[02-03 01:03:39.907] chat.py (94) - [ERROR] : 对话(2)请求失败: AttributeError 'RunnerManager' object has no attribute 'using_runner'\n[02-03 01:03:40.195] controller.py (98) - [ERROR] : 'RunnerManager' object has no attribute 'using_runner'\n\n### 复现步骤\n\n酒馆连接正常，run-bot正常运行，正常登录后，和机器人对话出现请求失败\n测试不使用酒馆，使用LangBot 一键部署整合包(Windows版-20250124) 可以正常使用\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "sxxsxsg",
      "author_type": "User",
      "created_at": "2025-02-02T17:20:13Z",
      "updated_at": "2025-02-07T03:20:40Z",
      "closed_at": "2025-02-07T03:20:39Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1008/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1008",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1008",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:01.853666",
      "comments": [
        {
          "author": "sanxianxiaohuntun",
          "body": "酒馆和bot沟通出问题，重新去看教程",
          "created_at": "2025-02-03T05:48:41Z"
        },
        {
          "author": "xiaolu08",
          "body": "俺也碰到了，重装几次没解决\n[02-03 15:14:39.339] process.py (42) - [INFO] : 处理 group_486910692 的请求(15): 在吗\n[02-03 15:14:39.340] chat.py (94) - [ERROR] : 对话(15)请求失败: AttributeError 'RunnerManager' object has no attribute 'using_runner'[02-03 15:14:39.680] controller.py (98) - [ERROR] : 'RunnerManager' object has n",
          "created_at": "2025-02-03T07:17:26Z"
        },
        {
          "author": "xiaolu08",
          "body": "我知道为什么会出现请求失败了,新出的webui版本覆盖到酒馆整合包里面就会请求失败（）",
          "created_at": "2025-02-03T07:24:47Z"
        },
        {
          "author": "the-lazy-me",
          "body": "请联系整合包作者",
          "created_at": "2025-02-03T17:42:34Z"
        },
        {
          "author": "sxxsxsg",
          "body": "> 我知道为什么会出现请求失败了,新出的webui版本覆盖到酒馆整合包里面就会请求失败（）\n\n怎么解决的",
          "created_at": "2025-02-04T02:55:08Z"
        }
      ]
    },
    {
      "issue_number": 992,
      "title": "[Bug]: 最近使用DeepSeek V3接口时经常出现请求失败",
      "body": "### 消息平台适配器\n\nqq-botpy（QQ官方API）\n\n### 运行环境\n\nDocker\n\n### 异常情况\n\n看了一下报错日志，是因为收到了空内容而无法转换成JSON文本产生的报错，\n然后去DeepSeek的官网看了一下，最近因为访问量高处理慢，他们会用持续返回空行来维持连接，怀疑是LangBot这边没法处理这些空行产生了问题\n\n![Image](https://github.com/user-attachments/assets/460682a7-7a3f-450d-bbd2-5994a7ca2ac7)\n\n![Image](https://github.com/user-attachments/assets/74ebfa4e-c56f-4c69-95d9-556e9a867bd2)\n\n### 复现步骤\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "Koilns",
      "author_type": "User",
      "created_at": "2025-01-29T16:38:37Z",
      "updated_at": "2025-02-07T03:19:46Z",
      "closed_at": "2025-02-07T03:19:37Z",
      "labels": [
        "bug?",
        "m: Provider"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/992/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/992",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/992",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:02.065115",
      "comments": [
        {
          "author": "wangcham",
          "body": "可能是QQ官方的问题。目前QQ官方适配器经常出现断连等问题，所以我们正在用webhook方式重写，等写完之后重新接入deepseek试一下。",
          "created_at": "2025-01-30T11:13:48Z"
        },
        {
          "author": "6288128",
          "body": "> 可能是QQ官方的问题。目前QQ官方适配器经常出现断连等问题，所以我们正在用webhook方式重写，等写完之后重新接入deepseek试一下。\n\n应该不是，因为我遇到了跟他一样的问题，但我使用的适配器是aiocqhttp",
          "created_at": "2025-02-06T02:14:23Z"
        },
        {
          "author": "RockChinQ",
          "body": "deepseek 的官方api 问题，正在解决",
          "created_at": "2025-02-06T05:49:01Z"
        },
        {
          "author": "ltbyun",
          "body": "v3.4.6.1并没有解决这个问题. ",
          "created_at": "2025-02-07T03:17:53Z"
        },
        {
          "author": "RockChinQ",
          "body": "ds还是会卡，3.4.6.1 只是把报错信息给优化了一下，但是仍然还是不太能正常用，只能等ds官方恢复了🙃",
          "created_at": "2025-02-07T03:19:37Z"
        }
      ]
    },
    {
      "issue_number": 1018,
      "title": "[Plugin]: 请求登记新插件 贴吧老哥模式/喷子/键盘侠|可自由开关",
      "body": "### 插件名称\n\n贴吧老哥模式/喷子/键盘侠|可自由开关\n\n### 插件代码库地址\n\nhttps://github.com/sanxianxiaohuntun/TieBa_mode\n\n### 插件简介\n\n模拟贴吧老哥的喷人方式有温和版和暴躁版，可自由开关",
      "state": "closed",
      "author": "sanxianxiaohuntun",
      "author_type": "User",
      "created_at": "2025-02-04T20:30:53Z",
      "updated_at": "2025-02-05T03:50:17Z",
      "closed_at": "2025-02-05T03:50:16Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1018/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1018",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1018",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:02.289502",
      "comments": [
        {
          "author": "sanxianxiaohuntun",
          "body": "![Image](https://github.com/user-attachments/assets/09c00023-6973-49e7-85e4-06f5a8eb78fe)\n\n使用图",
          "created_at": "2025-02-04T20:35:03Z"
        },
        {
          "author": "RockChinQ",
          "body": "OK",
          "created_at": "2025-02-05T03:50:16Z"
        }
      ]
    },
    {
      "issue_number": 1017,
      "title": "[Plugin]: 请求登记新插件 - 界限解除",
      "body": "### 插件名称\n\n界限解除\n\n### 插件代码库地址\n\nhttps://github.com/sanxianxiaohuntun/nsfw_mode\n\n### 插件简介\n\n一个用于 langbot 的小型插件界限解除，make❤️❤️❤️❤️❤️❤️❤️❤️",
      "state": "closed",
      "author": "sanxianxiaohuntun",
      "author_type": "User",
      "created_at": "2025-02-04T19:28:39Z",
      "updated_at": "2025-02-05T03:49:45Z",
      "closed_at": "2025-02-05T03:49:44Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1017/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1017",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1017",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:02.486746",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "OK",
          "created_at": "2025-02-05T03:49:44Z"
        }
      ]
    },
    {
      "issue_number": 980,
      "title": "[Bug]: 使用QQ官方API，机器人运行一段时间后，可能会出现无法回复消息或掉线的问题。",
      "body": "### 消息平台适配器\n\nqq-botpy（QQ官方API）\n\n### 运行环境\n\nv3.4.2.1、Ubuntu24、Python3.11、美国\n\n### 异常情况\n\n`使用QQ官方API搭建的QQ机器人存在断联和收不到消息问题，遇到这种情况后需要重载消息平台。\n以下是部分日志\n\"time\":\"2025-01-20T11:29:49.571938561Z\"}\n{\"log\":\"[2025-01-20 11:29:50 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1564\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:29:50.572524897Z\"}\n{\"log\":\"[2025-01-20 11:29:51 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1814\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:29:51.685436976Z\"}\n{\"log\":\"[2025-01-20 11:29:52 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1180\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:29:52.577610236Z\"}\n{\"log\":\"[2025-01-20 11:29:53 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1514\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:29:53.570480936Z\"}\n{\"log\":\"[2025-01-20 11:29:54 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1238\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:29:54.579218704Z\"}\n{\"log\":\"[2025-01-20 11:29:55 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1501\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:29:55.562464705Z\"}\n{\"log\":\"[2025-01-20 11:29:56 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1571\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:29:56.592898306Z\"}\n{\"log\":\"[2025-01-20 11:29:58 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1606\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:29:58.093207467Z\"}\n{\"log\":\"[2025-01-20 11:29:59 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1528\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:29:59.230950989Z\"}\n{\"log\":\"[2025-01-20 11:29:59 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1488\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:29:59.561912808Z\"}\n{\"log\":\"[2025-01-20 11:30:00 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1550\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:00.577165717Z\"}\n{\"log\":\"[2025-01-20 11:30:01 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1545\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:01.590313223Z\"}\n{\"log\":\"[2025-01-20 11:30:02 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1322\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:02.556046516Z\"}\n{\"log\":\"[2025-01-20 11:30:03 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1393\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:03.578822926Z\"}\n{\"log\":\"[2025-01-20 11:30:04 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1151\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:04.560598547Z\"}\n{\"log\":\"[2025-01-20 11:30:06 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1144\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:06.58282463Z\"}\n{\"log\":\"[2025-01-20 11:30:07 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1230\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:07.266527218Z\"}\n{\"log\":\"[2025-01-20 11:30:07 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1126\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:07.566298203Z\"}\n{\"log\":\"[2025-01-20 11:30:08 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1471\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:08.575334866Z\"}\n{\"log\":\"[2025-01-20 11:30:09 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1168\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:09.58480339Z\"}\n{\"log\":\"[2025-01-20 11:30:10 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1701\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:10.568621296Z\"}\n{\"log\":\"[2025-01-20 11:30:11 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1577\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:11.580760882Z\"}\n{\"log\":\"[2025-01-20 11:30:12 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 2011\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:12.579100069Z\"}\n{\"log\":\"[2025-01-20 11:30:13 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1525\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:13.571291878Z\"}\n{\"log\":\"[2025-01-20 11:30:14 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1520\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:14.574713097Z\"}\n{\"log\":\"[2025-01-20 11:30:15 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1550\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:15.578275063Z\"}\n{\"log\":\"[2025-01-20 11:30:16 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1790\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:16.569499093Z\"}\n{\"log\":\"[2025-01-20 11:30:17 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1676\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:17.567645104Z\"}\n{\"log\":\"[2025-01-20 11:30:18 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1610\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:18.574771935Z\"}\n{\"log\":\"[2025-01-20 11:30:19 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1491\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:19.566484668Z\"}\n{\"log\":\"[2025-01-20 11:30:20 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1770\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:20.56765576Z\"}\n{\"log\":\"[2025-01-20 11:30:21 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1565\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:21.578813222Z\"}\n{\"log\":\"[2025-01-20 11:30:22 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1502\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:22.588253311Z\"}\n{\"log\":\"[2025-01-20 11:30:23 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1346\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:23.570369109Z\"}\n{\"log\":\"[2025-01-20 11:30:24 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1571\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:24.577491903Z\"}\n{\"log\":\"[2025-01-20 11:30:25 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1402\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:25.56506446Z\"}\n{\"log\":\"[2025-01-20 11:30:26 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1498\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:26.575290516Z\"}\n{\"log\":\"[2025-01-20 11:30:27 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1918\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:27.574792124Z\"}\n{\"log\":\"[2025-01-20 11:30:28 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1458\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:28.566429961Z\"}\n{\"log\":\"[2025-01-20 11:30:29 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1766\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:29.561607819Z\"}\n{\"log\":\"[2025-01-20 11:30:30 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1572\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:30.573765147Z\"}\n{\"log\":\"[2025-01-20 11:30:31 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1252\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:31.568205997Z\"}\n{\"log\":\"[2025-01-20 11:30:34 +0000] [1] [INFO] 183.197.189.168:17806 GET /api/v1/logs 1.1 200 76 1643\\n\",\"stream\":\"stdout\",\"time\":\"2025-01-20T11:30:34.565599751Z\"}\n\n### 复现步骤\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "tewhdn",
      "author_type": "User",
      "created_at": "2025-01-20T11:39:37Z",
      "updated_at": "2025-02-04T12:49:37Z",
      "closed_at": "2025-02-04T12:49:37Z",
      "labels": [
        "bug?",
        "m: Platform",
        "IM: qq-botpy"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/980/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/980",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/980",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:02.752741",
      "comments": [
        {
          "author": "wangcham",
          "body": "发一下langbot根目录里的data/logs/langbot-xxxx的详细日志信息",
          "created_at": "2025-01-22T07:37:18Z"
        },
        {
          "author": "doubleJazzCat",
          "body": "没报错啥的, 16:29我改了一下!help的返回内容, 后面发消息就没回应了\n```\n[01-22 16:27:51.620] process.py (42) - [INFO] : 处理 group_xxxxxxxxxx 的请求(9): !help\n[01-22 16:27:51.621] command.py (112) - [INFO] : 命令返回: LangBot...\n[01-22 16:27:52.027] controller.py (189) - [ERROR] : 处理请求时出错 query_id=9 stage=SendResponseBackStage : 消息发送失败",
          "created_at": "2025-01-22T10:12:58Z"
        },
        {
          "author": "wangcham",
          "body": "目前有其他人也出现这样的问题，都是没有报错但是不返回信息。我们已经知道QQ官方正在将ws迁往webhook协议，所以最近正在重写，到时候会发一个新版本会解决。",
          "created_at": "2025-01-22T14:22:09Z"
        }
      ]
    },
    {
      "issue_number": 1012,
      "title": "[Plugin]: 请求登记新插件 SplitTypingPlugin 模拟打字时长分段发送",
      "body": "### 插件名称\n\nSplitTypingPlugin\n\n### 插件代码库地址\n\nhttps://github.com/sanxianxiaohuntun/SplitTypingPlugin/\n\n### 插件简介\n\n一个模拟人类打字习惯的消息分段发送langbot插件。会根据标点符号和特殊格式自动分段，并模拟真实的打字速度发送消息。",
      "state": "closed",
      "author": "sanxianxiaohuntun",
      "author_type": "User",
      "created_at": "2025-02-03T11:54:35Z",
      "updated_at": "2025-02-04T02:37:31Z",
      "closed_at": "2025-02-04T02:37:30Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1012/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1012",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1012",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:07.935791",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "404？你没设置public？",
          "created_at": "2025-02-03T16:26:06Z"
        },
        {
          "author": "sanxianxiaohuntun",
          "body": "草！桌面版发的忘了设置",
          "created_at": "2025-02-03T19:31:32Z"
        },
        {
          "author": "sanxianxiaohuntun",
          "body": "公开了",
          "created_at": "2025-02-03T19:36:11Z"
        },
        {
          "author": "RockChinQ",
          "body": "ok",
          "created_at": "2025-02-04T02:37:30Z"
        }
      ]
    },
    {
      "issue_number": 1011,
      "title": "[Plugin]: 请求登记新插件SunoMusic 音乐生成插件",
      "body": "### 插件名称\n\nSunoMusic 音乐生成插件\n\n### 插件代码库地址\n\nhttps://github.com/sanxianxiaohuntun/SunoMusic\n\n### 插件简介\n\n一个基于 Suno API 的音乐生成插件，支持自然语言描述生成音乐。",
      "state": "closed",
      "author": "sanxianxiaohuntun",
      "author_type": "User",
      "created_at": "2025-02-03T11:06:52Z",
      "updated_at": "2025-02-03T16:25:47Z",
      "closed_at": "2025-02-03T16:25:46Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1011/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1011",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1011",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:08.115701",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2025-02-03T16:25:46Z"
        }
      ]
    },
    {
      "issue_number": 1010,
      "title": "[Plugin]: 请求登记新插件 流试输出兼容插件",
      "body": "### 插件名称\n\nlangbot流试输出兼容插件\n\n### 插件代码库地址\n\nhttps://github.com/sanxianxiaohuntun/liushichuangshu\n\n### 插件简介\n\n安装后开启插件即可使用，无需任何配置\n\n只限于兼容流试输出（比如电子魅魔）\n\n![Image](https://github.com/user-attachments/assets/def4f207-207b-4ab7-b7fa-e953ca9b9ed5)\n![Image](https://github.com/user-attachments/assets/cf75fce8-e326-4a29-82e0-5e7d0f7aa47c)",
      "state": "closed",
      "author": "sanxianxiaohuntun",
      "author_type": "User",
      "created_at": "2025-02-03T01:35:57Z",
      "updated_at": "2025-02-03T16:24:34Z",
      "closed_at": "2025-02-03T16:24:33Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1010/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1010",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1010",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:08.297458",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2025-02-03T16:24:33Z"
        }
      ]
    },
    {
      "issue_number": 1009,
      "title": "[Plugin]: 请求登记新插件 识别群友ID插件",
      "body": "### 插件名称\n\n识别群友ID插件 QunID\n\n### 插件代码库地址\n\nhttps://github.com/sanxianxiaohuntun/QunID\n\n### 插件简介\n\n安装后开启插件即可使用，无需任何配置 格式为 群友 XXXX 说：内容\n\n![Image](https://github.com/user-attachments/assets/d0652eb7-d3df-4daa-9d0e-41ddc18ee2ba)",
      "state": "closed",
      "author": "sanxianxiaohuntun",
      "author_type": "User",
      "created_at": "2025-02-02T23:13:46Z",
      "updated_at": "2025-02-03T16:23:57Z",
      "closed_at": "2025-02-03T16:23:55Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1009/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/1009",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/1009",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:09.461886",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2025-02-03T16:23:55Z"
        }
      ]
    },
    {
      "issue_number": 996,
      "title": "[Bug]: 使用 Ollma 部署 DeepSeek 模型却提示 无效的 api-key: Error code: 40",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\nLangBot 3.4.4.1｜NapCat 4.4.16｜QQNT 6.9.62-30654｜macOS 15.2｜Python 3.12｜广东\n\n### 异常情况\n\n我使用本地 ollma，但是却提示 无效的 api-key，可是我没有 api-key。\n虽然在常见问题中找到了同样的报错，但是那个解决方案不适合我。\n\n请求帮助！🙏\n\n### 复现步骤\n\n1. 使用 Ollma 部署了 deepseek-r1:70b 这个模型\n2. 使用 NapCat 正常的修改了 QQ 并登陆到了 WebUI。\n3. 在 NapCat 的网络配置中创建 WS 客户端，URL 是 ws://127.0.0.1:2280/ws，其它参数不更改并启用。\n4. 在 LangBot 中配置 platform.json 的消息平台适配器为 aiocqhttp 适配器，access-token 留空，开关为启用，host 0.0.0.0（也尝试过 127.0.0.1），port 2280\n5. provider.json 中，我没有任何的 apikey 所以保持了apikey 原始值。\n6. 更改 所使用模型名称为 deepseek-chat（从元数据 llma json 里查到的名字）\n7. 查看过 大模型请求器 中的 Ollma 相关为：API URL http://127.0.0.1:11434，API 请求超时 600。（这是原始值）\n8. 确保以上内容均被正常保存\n9. 从 LangBot 系统信息中点击三种重新载入\n10. 向目标 QQ 发送消息，后台错误提示：\n\n[01-31 23:45:38.786] chat.py (94) - [ERROR] : 对话(44)请求失败: RequesterError 模型请求失败: 无效的 api-key: Error code: 401 - {'error': {'message': 'Authentication Fails (no such user)', 'type': 'authentication_error', 'param': None, 'code': 'invalid_request_error'}}\n[01-31 23:45:38.971] controller.py (98) - [ERROR] : 模型请求失败: 无效的 api-key: Error code: 401 - {'error': {'message': 'Authentication Fails (no such user)', 'type': 'authentication_error', 'param': None, 'code': 'invalid_request_error'}}\n\n问题是……本地的模型没有 API KEY……\n\n### 启用的插件\n\n没有使用任何插件，保证干净。",
      "state": "closed",
      "author": "Ander-Index",
      "author_type": "User",
      "created_at": "2025-01-31T15:53:48Z",
      "updated_at": "2025-02-01T06:04:28Z",
      "closed_at": "2025-02-01T06:03:20Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/996/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/996",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/996",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:09.637918",
      "comments": [
        {
          "author": "the-lazy-me",
          "body": "名称写错了，接 ollama 看文档",
          "created_at": "2025-01-31T16:07:44Z"
        },
        {
          "author": "RockChinQ",
          "body": "确认一下provider.json的model字段值对应的llm-models.json里的llm信息使用的requester是否是ollama-chat",
          "created_at": "2025-02-01T00:35:10Z"
        },
        {
          "author": "Ander-Index",
          "body": "谢谢谢谢！过年回去之后我愿帮助编辑文档。",
          "created_at": "2025-02-01T06:03:18Z"
        },
        {
          "author": "RockChinQ",
          "body": "> 谢谢谢谢！过年回去之后我愿帮助编辑文档。\n\n欢迎贡献，具体的内容可以群里问问群主～",
          "created_at": "2025-02-01T06:04:27Z"
        }
      ]
    },
    {
      "issue_number": 997,
      "title": "[Bug]: 使用智谱ai模型时报错",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\nDocker\n\n### 异常情况\n\n在使用智谱的模型时（禁用了所有插件，模型用了glm-4-long和glm-4-plus测试结果皆是）返回请求失败：\n\n<img width=\"888\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/a1301d5b-36b6-41ca-ae0b-27736dd0e6fd\" />\n\n日志返回的报错如下：\n[02-01 00:26:49.525] chat.py (94) - [ERROR] : 对话(0)请求失败: KeyError 'args'[02-01 00:26:49.854] controller.py (98) - [ERROR] : 'args'\n\n### 复现步骤\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "DetLFY",
      "author_type": "User",
      "created_at": "2025-02-01T00:35:01Z",
      "updated_at": "2025-02-01T01:46:45Z",
      "closed_at": "2025-02-01T00:58:57Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/997/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/997",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/997",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:09.802314",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "provider.json里的chatglm requester少了args字段，可以按照文档加一下。\n\n这是一个webui的bug，现在已修复，建议更新到最新版。",
          "created_at": "2025-02-01T00:36:32Z"
        },
        {
          "author": "DetLFY",
          "body": "重新拉取最新的镜像后已解决。另外希望您能关注一下docker容器重建后一些需要额外依赖的插件会丢失依赖的问题。🙏每次重建都需要手动进容器pip install。",
          "created_at": "2025-02-01T00:58:49Z"
        },
        {
          "author": "RockChinQ",
          "body": "> 重新拉取最新的镜像后已解决。另外希望您能关注一下docker容器重建后一些需要额外依赖的插件会丢失依赖的问题。🙏每次重建都需要手动进容器pip install。\n\n这个依赖的问题已经记录到路线图了的，后续会修。",
          "created_at": "2025-02-01T01:46:44Z"
        }
      ]
    },
    {
      "issue_number": 995,
      "title": "[Bug]: 可能的Bug，使用Ollama出现502错误",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\nv3.4.4，win11，python3.10.16\n\n### 异常情况\n\n使用ollama，deepseek-r1:1.5b，已确保ollama在正常运行\n可通过测试\n```bash\ncurl http://localhost:11434/api/generate -d \"{\\\"model\\\": \\\"deepseek-r1:1.5b\\\", \\\"prompt\\\": \\\"Why is the sky blue?\\\", \\\"stream\\\": false}\"\n\n{\"model\":\"deepseek-r1:1.5b\",\"created_at\":\"2025-01-31T03:32:19.2572876Z\",\"response\":\"\\u003cthink\\u003e\\n\\n\\u003c/think\\u003e\\n\\nThe color of the sky, known as blue, can be attributed to a number of factors. One key reason is Rayleigh scattering, which occurs when shorter (blue) light waves in the visible spectrum are scattered by particles in the atmosphere, such as air molecules or dust, while longer (red and orange) wavelengths are scattered more significantly. This scattering results in a blue tint to the sky because it absorbs the longer wavelengths that appear more intense on the ground.\\n\\nAnother factor is the composition of the Earth's atmosphere, which contains various gases. Oxygen in the stratosphere helps absorb ultraviolet (UV) radiation from the sun, contributing to its blue color. Additionally, ozone absorbs UV and visible light at certain wavelengths, further enhancing the sky's blue hue.\",\"done\":true,\"done_reason\":\"stop\",\"context\":[151644,10234,374,279,12884,6303,30,151645,151648,271,151649,271,785,1894,315,279,12884,11,3881,438,6303,11,646,387,29606,311,264,1372,315,9363,13,3776,1376,2874,374,13255,62969,71816,11,892,13666,979,23327,320,12203,8,3100,16876,304,279,9434,19745,525,36967,553,18730,304,279,16566,11,1741,438,3720,34615,476,15797,11,1393,5021,320,1151,323,18575,8,92859,525,36967,803,11941,13,1096,71816,3059,304,264,6303,48004,311,279,12884,1576,432,90011,279,5021,92859,429,4994,803,18894,389,279,4910,382,14037,8168,374,279,18037,315,279,9237,594,16566,11,892,5610,5257,44512,13,86569,304,279,607,14030,8023,8609,34306,36132,84211,320,22246,8,24403,504,279,7015,11,28720,311,1181,6303,1894,13,22406,11,76437,90011,29036,323,9434,3100,518,3654,92859,11,4623,46494,279,12884,594,6303,39040,13],\"total_duration\":5033714700,\"load_duration\":2393355600,\"prompt_eval_count\":9,\"prompt_eval_duration\":394000000,\"eval_count\":157,\"eval_duration\":2232000000}\n```\n\n部分日志信息：\n```bash\n[01-31 11:25:06.435] process.py (42) - [INFO] : 处理 person_1733904948 的请求(0): 你好\n[01-31 11:25:06.439] manager.py (235) - [DEBUG] : 事件 PersonNormalMessageReceived(2) 处理完成，返回值 {}\n[01-31 11:25:06.897] chat.py (94) - [ERROR] : 对话(0)请求失败: ResponseError  (status code: 502)\n[01-31 11:25:06.906] controller.py (150) - [DEBUG] : Stage MessageProcessor processed query query_id=0 launcher_type=<LauncherTypes.PERSON: 'person'> launcher_id=1733904948 sender_id=1733904948 message_event=FriendMessage(message_chain=MessageChain([Source(id=1984584468, time=datetime.datetime(2025, 1, 31, 11, 25, 6, 398263)), Plain('你好')]), sender=Friend(id=123456789, nickname='xxx', remark='')) message_chain=MessageChain([Plain('你好')]) adapter=<pkg.platform.sources.aiocqhttp.AiocqhttpAdapter object at 0x00000201C37F6950> session=Session(launcher_type=<LauncherTypes.PERSON: 'person'>, launcher_id=1733904948, sender_id=0, use_prompt_name='default', using_conversation=Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 1, 31, 11, 25, 6, 421663), update_time=datetime.datetime(2025, 1, 31, 11, 25, 6, 421663), use_model=LLMModelInfo(name='ollama/deepseek-r1:1.5b', model_name='deepseek-r1:1.5b', token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x00000201C3779AB0>, requester=<pkg.provider.modelmgr.requesters.ollamachat.OllamaChatCompletions object at 0x00000201C37C3550>, tool_call_supported=False, vision_supported=False), use_funcs=[], uuid=None), conversations=[Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 1, 31, 11, 25, 6, 421663), update_time=datetime.datetime(2025, 1, 31, 11, 25, 6, 421663), use_model=LLMModelInfo(name='ollama/deepseek-r1:1.5b', model_name='deepseek-r1:1.5b', token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x00000201C3779AB0>, requester=<pkg.provider.modelmgr.requesters.ollamachat.OllamaChatCompletions object at 0x00000201C37C3550>, tool_call_supported=False, vision_supported=False), use_funcs=[], uuid=None)], create_time=datetime.datetime(2025, 1, 31, 11, 25, 6, 399469), update_time=datetime.datetime(2025, 1, 31, 11, 25, 6, 399469), semaphore=<asyncio.locks.Semaphore object at 0x00000201C58C81C0 [locked]>) messages=[] prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]) user_message=Message(role='user', name=None, content=[ContentElement(type='text', text=' 你好', image_url=None, image_base64=None)], tool_calls=None, tool_call_id=None) use_model=LLMModelInfo(name='ollama/deepseek-r1:1.5b', model_name='deepseek-r1:1.5b', token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x00000201C3779AB0>, requester=<pkg.provider.modelmgr.requesters.ollamachat.OllamaChatCompletions object at 0x00000201C37C3550>, tool_call_supported=False, vision_supported=False) use_funcs=None resp_messages=[] resp_message_chain=[] current_stage=<pkg.pipeline.stagemgr.StageInstContainer object at 0x00000201C5831900> res result_type=<ResultType.INTERRUPT: 2> new_query=Query(query_id=0, launcher_type=<LauncherTypes.PERSON: 'person'>, launcher_id=1733904948, sender_id=1733904948, message_event=FriendMessage(message_chain=MessageChain([Source(id=1984584468, time=datetime.datetime(2025, 1, 31, 11, 25, 6, 398263)), Plain('你好')]), sender=Friend(id=123456789, nickname='xxx', remark='')), message_chain=MessageChain([Plain('你好')]), adapter=<pkg.platform.sources.aiocqhttp.AiocqhttpAdapter object at 0x00000201C37F6950>, session=Session(launcher_type=<LauncherTypes.PERSON: 'person'>, launcher_id=1733904948, sender_id=0, use_prompt_name='default', using_conversation=Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 1, 31, 11, 25, 6, 421663), update_time=datetime.datetime(2025, 1, 31, 11, 25, 6, 421663), use_model=LLMModelInfo(name='ollama/deepseek-r1:1.5b', model_name='deepseek-r1:1.5b', token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x00000201C3779AB0>, requester=<pkg.provider.modelmgr.requesters.ollamachat.OllamaChatCompletions object at 0x00000201C37C3550>, tool_call_supported=False, vision_supported=False), use_funcs=[], uuid=None), conversations=[Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2025, 1, 31, 11, 25, 6, 421663), update_time=datetime.datetime(2025, 1, 31, 11, 25, 6, 421663), use_model=LLMModelInfo(name='ollama/deepseek-r1:1.5b', model_name='deepseek-r1:1.5b', token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x00000201C3779AB0>, requester=<pkg.provider.modelmgr.requesters.ollamachat.OllamaChatCompletions object at 0x00000201C37C3550>, tool_call_supported=False, vision_supported=False), use_funcs=[], uuid=None)], create_time=datetime.datetime(2025, 1, 31, 11, 25, 6, 399469), update_time=datetime.datetime(2025, 1, 31, 11, 25, 6, 399469), semaphore=<asyncio.locks.Semaphore object at 0x00000201C58C81C0 [locked]>), messages=[], prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), user_message=Message(role='user', name=None, content=[ContentElement(type='text', text='你好', image_url=None, image_base64=None)], tool_calls=None, tool_call_id=None), use_model=LLMModelInfo(name='ollama/deepseek-r1:1.5b', model_name='deepseek-r1:1.5b', token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x00000201C3779AB0>, requester=<pkg.provider.modelmgr.requesters.ollamachat.OllamaChatCompletions object at 0x00000201C37C3550>, tool_call_supported=False, vision_supported=False), use_funcs=None, resp_messages=[], resp_message_chain=[], current_stage=<pkg.pipeline.stagemgr.StageInstContainer object at 0x00000201C5831900>) user_notice='请求失败' console_notice='' debug_notice='Traceback (most recent call last):\\n  File \"D:\\\\LangBot\\\\pkg\\\\pipeline\\\\process\\\\handlers\\\\chat.py\", line 77, in handle\\n    async for result in runner.run(query):\\n  File \"D:\\\\LangBot\\\\pkg\\\\provider\\\\runners\\\\localagent.py\", line 26, in run\\n    msg = await query.use_model.requester.call(query, query.use_model, req_messages, query.use_funcs)\\n  File \"D:\\\\LangBot\\\\pkg\\\\provider\\\\modelmgr\\\\requesters\\\\ollamachat.py\", line 127, in call\\n    return await self._closure(query, req_messages, model, funcs)\\n  File \"D:\\\\LangBot\\\\pkg\\\\provider\\\\modelmgr\\\\requesters\\\\ollamachat.py\", line 77, in _closure\\n    resp = await self._req(args)\\n  File \"D:\\\\LangBot\\\\pkg\\\\provider\\\\modelmgr\\\\requesters\\\\ollamachat.py\", line 43, in _req\\n    return await self.client.chat(\\n  File \"D:\\\\anaconda\\\\envs\\\\chatgpt\\\\lib\\\\site-packages\\\\ollama\\\\_client.py\", line 837, in chat\\n    return await self._request(\\n  File \"D:\\\\anaconda\\\\envs\\\\chatgpt\\\\lib\\\\site-packages\\\\ollama\\\\_client.py\", line 682, in _request\\n    return cls(**(await self._request_raw(*args, **kwargs)).json())\\n  File \"D:\\\\anaconda\\\\envs\\\\chatgpt\\\\lib\\\\site-packages\\\\ollama\\\\_client.py\", line 626, in _request_raw\\n    raise ResponseError(e.response.text, e.response.status_code) from None\\nollama._types.ResponseError:  (status code: 502)\\n' error_notice=' (status code: 502)'\n[01-31 11:25:07.306] controller.py (94) - [DEBUG] : Traceback (most recent call last):\n  File \"D:\\LangBot\\pkg\\pipeline\\process\\handlers\\chat.py\", line 77, in handle\n    async for result in runner.run(query):\n  File \"D:\\LangBot\\pkg\\provider\\runners\\localagent.py\", line 26, in run\n    msg = await query.use_model.requester.call(query, query.use_model, req_messages, query.use_funcs)\n  File \"D:\\LangBot\\pkg\\provider\\modelmgr\\requesters\\ollamachat.py\", line 127, in call\n    return await self._closure(query, req_messages, model, funcs)\n  File \"D:\\LangBot\\pkg\\provider\\modelmgr\\requesters\\ollamachat.py\", line 77, in _closure\n    resp = await self._req(args)\n  File \"D:\\LangBot\\pkg\\provider\\modelmgr\\requesters\\ollamachat.py\", line 43, in _req\n    return await self.client.chat(\n  File \"D:\\anaconda\\envs\\chatgpt\\lib\\site-packages\\ollama\\_client.py\", line 837, in chat\n    return await self._request(\n  File \"D:\\anaconda\\envs\\chatgpt\\lib\\site-packages\\ollama\\_client.py\", line 682, in _request\n    return cls(**(await self._request_raw(*args, **kwargs)).json())\n  File \"D:\\anaconda\\envs\\chatgpt\\lib\\site-packages\\ollama\\_client.py\", line 626, in _request_raw\n    raise ResponseError(e.response.text, e.response.status_code) from None\nollama._types.ResponseError:  (status code: 502)\n\n[01-31 11:25:07.307] controller.py (98) - [ERROR] :  (status code: 502)\n```\n\n### 复现步骤\n\n使用ollama接入本地模型，修复args参数丢失后的新bug\n\n### 启用的插件\n\n无插件启用，全部关闭",
      "state": "closed",
      "author": "ShamiMoon",
      "author_type": "User",
      "created_at": "2025-01-31T03:36:04Z",
      "updated_at": "2025-01-31T03:52:55Z",
      "closed_at": "2025-01-31T03:52:55Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/995/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/995",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/995",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:10.044799",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "配置文件咋写的呢？",
          "created_at": "2025-01-31T03:38:16Z"
        },
        {
          "author": "ShamiMoon",
          "body": "> 配置文件咋写的呢？\n\n{\n    \"enable-chat\": true,\n    \"enable-vision\": true,\n    \"keys\": {\n        \"openai\": [\n            \"sk--1234567890\"\n        ],\n        \"anthropic\": [\n            \"sk-1234567890\"\n        ],\n        \"moonshot\": [\n            \"sk-1234567890\"\n        ],\n        \"deepseek\": [\n            \"s",
          "created_at": "2025-01-31T03:40:28Z"
        }
      ]
    },
    {
      "issue_number": 928,
      "title": "[Feature]: 希望后续增加兼容这个API方法",
      "body": "### 这是一个？\r\n\r\n现有功能优化\r\n\r\n### 详细描述\r\n\r\nQChatGPT\\pkg\\provider\\modelmgr\\apis\\chatcmpl.py\r\n\r\n兼容后代码\r\n\r\n```python\r\nfrom __future__ import annotations\r\n\r\nimport asyncio\r\nimport typing\r\nimport json\r\nimport base64\r\nfrom typing import AsyncGenerator\r\n\r\nimport openai\r\nimport openai.types.chat.chat_completion as chat_completion\r\nimport httpx\r\nimport aiohttp\r\nimport async_lru\r\n\r\nfrom .. import api, entities, errors\r\nfrom ....core import entities as core_entities, app\r\nfrom ... import entities as llm_entities\r\nfrom ...tools import entities as tools_entities\r\nfrom ....utils import image\r\n\r\n\r\n@api.requester_class(\"openai-chat-completions\")\r\nclass OpenAIChatCompletions(api.LLMAPIRequester):\r\n    \"\"\"OpenAI ChatCompletion API 请求器\"\"\"\r\n\r\n    client: openai.AsyncClient\r\n\r\n    requester_cfg: dict\r\n\r\n    def __init__(self, ap: app.Application):\r\n        self.ap = ap\r\n\r\n        self.requester_cfg = self.ap.provider_cfg.data['requester']['openai-chat-completions']\r\n\r\n    async def initialize(self):\r\n\r\n        self.client = openai.AsyncClient(\r\n            api_key=\"\",\r\n            base_url=self.requester_cfg['base-url'],\r\n            timeout=self.requester_cfg['timeout'],\r\n            http_client=httpx.AsyncClient(\r\n                proxies=self.ap.proxy_mgr.get_forward_proxies()\r\n            )\r\n        )\r\n\r\n    async def _req(\r\n        self,\r\n        args: dict,\r\n    ) -> chat_completion.ChatCompletion:\r\n        return await self.client.chat.completions.create(**args)\r\n\r\n    async def _make_msg(\r\n        self,\r\n        chat_completion: typing.Union[chat_completion.ChatCompletion, str],  # 支持字符串类型\r\n    ) -> llm_entities.Message:\r\n        if isinstance(chat_completion, str):\r\n            # 如果是字符串类型，去掉开头的 'data: ' 部分并处理每个数据块\r\n            if chat_completion.startswith(\"data:\"):\r\n                # 分割多个 data 部分\r\n                parts = chat_completion.split(\"data:\")[1:]  # 分割并去掉空数据\r\n                combined_message = \"\"\r\n\r\n                for part in parts:\r\n                    part = part.strip()  # 去除多余空格\r\n                    try:\r\n                        # 尝试解析每个 data 部分\r\n                        part_data = json.loads(part)\r\n                        if isinstance(part_data, dict) and 'choices' in part_data:\r\n                            # 提取有效数据并拼接\r\n                            choices = part_data['choices']\r\n                            for choice in choices:\r\n                                if 'delta' in choice and 'content' in choice['delta']:\r\n                                    combined_message += choice['delta']['content']\r\n                        else:\r\n                            raise ValueError(\"Invalid response structure in part\")\r\n                    except Exception as e:\r\n                        self.ap.logger.error(f\"Failed to parse chat completion part: {e}\")\r\n                        continue  # 如果当前部分解析失败，则跳过并继续处理下一个部分\r\n\r\n                # 将所有内容合并为一个完整的响应\r\n                chatcmpl_message = {\"content\": combined_message, \"role\": \"assistant\"}\r\n\r\n            else:\r\n                # 如果响应不是以 'data:' 开头，直接处理\r\n                try:\r\n                    chat_completion = json.loads(chat_completion)\r\n                    if isinstance(chat_completion, dict) and 'choices' in chat_completion:\r\n                        chatcmpl_message = chat_completion['choices'][0]['message']\r\n                    else:\r\n                        raise ValueError(\"Invalid response structure: missing 'choices' key\")\r\n                except Exception as e:\r\n                    self.ap.logger.error(f\"Failed to parse chat completion string: {e}\")\r\n                    raise ValueError(f\"Invalid response format: {chat_completion}\")\r\n        else:\r\n            # 如果是 ChatCompletion 对象，直接处理\r\n            chatcmpl_message = chat_completion.choices[0].message.dict()\r\n\r\n        # 确保 'role' 字段存在且不为 None\r\n        if 'role' not in chatcmpl_message or chatcmpl_message['role'] is None:\r\n            chatcmpl_message['role'] = 'assistant'\r\n\r\n        message = llm_entities.Message(**chatcmpl_message)\r\n\r\n        return message\r\n\r\n    async def _closure(\r\n        self,\r\n        req_messages: list[dict],\r\n        use_model: entities.LLMModelInfo,\r\n        use_funcs: list[tools_entities.LLMFunction] = None,\r\n    ) -> llm_entities.Message:\r\n        self.client.api_key = use_model.token_mgr.get_token()\r\n\r\n        args = self.requester_cfg['args'].copy()\r\n        args[\"model\"] = use_model.name if use_model.model_name is None else use_model.model_name\r\n\r\n        if use_funcs:\r\n            tools = await self.ap.tool_mgr.generate_tools_for_openai(use_funcs)\r\n\r\n            if tools:\r\n                args[\"tools\"] = tools\r\n\r\n        # 设置此次请求中的messages\r\n        messages = req_messages.copy()\r\n\r\n        # 检查vision\r\n        for msg in messages:\r\n            if 'content' in msg and isinstance(msg[\"content\"], list):\r\n                for me in msg[\"content\"]:\r\n                    if me[\"type\"] == \"image_url\":\r\n                        me[\"image_url\"]['url'] = await self.get_base64_str(me[\"image_url\"]['url'])\r\n\r\n        args[\"messages\"] = messages\r\n\r\n        # 发送请求\r\n        resp = await self._req(args)\r\n\r\n        # 处理请求结果\r\n        message = await self._make_msg(resp)\r\n\r\n        return message\r\n    \r\n    async def call(\r\n        self,\r\n        model: entities.LLMModelInfo,\r\n        messages: typing.List[llm_entities.Message],\r\n        funcs: typing.List[tools_entities.LLMFunction] = None,\r\n    ) -> llm_entities.Message:\r\n        req_messages = []  # req_messages 仅用于类内，外部同步由 query.messages 进行\r\n        for m in messages:\r\n            msg_dict = m.dict(exclude_none=True)\r\n            content = msg_dict.get(\"content\")\r\n            if isinstance(content, list):\r\n                # 检查 content 列表中是否每个部分都是文本\r\n                if all(isinstance(part, dict) and part.get(\"type\") == \"text\" for part in content):\r\n                    # 将所有文本部分合并为一个字符串\r\n                    msg_dict[\"content\"] = \"\\n\".join(part[\"text\"] for part in content)\r\n            req_messages.append(msg_dict)\r\n\r\n        try:\r\n            return await self._closure(req_messages, model, funcs)\r\n        except asyncio.TimeoutError:\r\n            raise errors.RequesterError('请求超时')\r\n        except openai.BadRequestError as e:\r\n            if 'context_length_exceeded' in e.message:\r\n                raise errors.RequesterError(f'上文过长，请重置会话: {e.message}')\r\n            else:\r\n                raise errors.RequesterError(f'请求参数错误: {e.message}')\r\n        except openai.AuthenticationError as e:\r\n            raise errors.RequesterError(f'无效的 api-key: {e.message}')\r\n        except openai.NotFoundError as e:\r\n            raise errors.RequesterError(f'请求路径错误: {e.message}')\r\n        except openai.RateLimitError as e:\r\n            raise errors.RequesterError(f'请求过于频繁或余额不足: {e.message}')\r\n        except openai.APIError as e:\r\n            raise errors.RequesterError(f'请求错误: {e.message}')\r\n\r\n    @async_lru.alru_cache(maxsize=128)\r\n    async def get_base64_str(\r\n        self,\r\n        original_url: str,\r\n    ) -> str:\r\n        base64_image, image_format = await image.qq_image_url_to_base64(original_url)\r\n        return f\"data:image/{image_format};base64,{base64_image}\"\r\n```\r\n\r\nAPI返回\r\n\r\n```bash\r\n[11-20 18:40:45.099] chatcmpl.py (67) - [ERROR] : Failed to parse chat completion string: Extra data: line 3 column 1 (char 45)\r\n[11-20 18:40:45.099] chat.py (94) - [ERROR] : 对话(0)请求失败: Invalid response format: {\"choices\":[{\"delta\":{\"content\":\"呜~好舒服\"}}]}\r\n\r\ndata:  {\"choices\":[{\"delta\":{\"content\":\"的抚摸呢。\"}}]}\r\n\r\ndata:  {\"choices\":[{\"delta\":{\"content\":\"（蹭主人的\"}}]}\r\n\r\ndata:  {\"choices\":[{\"delta\":{\"content\":\"手）喵~~\"}}]}\r\n[11-20 18:40:47.677] controller.py (98) - [ERROR] : Invalid response format: {\"choices\":[{\"delta\":{\"content\":\"呜~好舒服\"}}]}\r\n\r\ndata:  {\"choices\":[{\"delta\":{\"content\":\"的抚摸呢。\"}}]}\r\n\r\ndata:  {\"choices\":[{\"delta\":{\"content\":\"（蹭主人的\"}}]}\r\n\r\ndata:  {\"choices\":[{\"delta\":{\"content\":\"手）喵~~\"}}]}\r\n```\r\n\r\n兼容后可正常运行得出结果\r\n\r\n呜~好舒服的抚摸呢。（蹭主人的手）",
      "state": "closed",
      "author": "sanxianxiaohuntun",
      "author_type": "User",
      "created_at": "2024-11-20T17:29:00Z",
      "updated_at": "2025-01-27T14:36:48Z",
      "closed_at": "2025-01-27T14:36:48Z",
      "labels": [
        "m: Provider"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/928/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/928",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/928",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:10.221395",
      "comments": [
        {
          "author": "sanxianxiaohuntun",
          "body": "主要修改代码\r\n\r\n\r\n```python\r\nasync def _make_msg(\r\n    self,\r\n    chat_completion: typing.Union[chat_completion.ChatCompletion, str],  # 支持字符串类型\r\n) -> llm_entities.Message:\r\n    if isinstance(chat_completion, str):\r\n        # 如果是字符串类型，去掉开头的 'data: ' 部分并处理每个数据块\r\n        if chat_completion.startswith(\"data:",
          "created_at": "2024-11-20T17:41:11Z"
        }
      ]
    },
    {
      "issue_number": 832,
      "title": "[Feature]: 希望接入微信对话平台",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n希望能接入微信对话平台，可以先从最简单的简单对话接入开始，慢慢增加后续的一些乃至定时任务之类的。可以用现有的一些解答一些常规问题。同时由于该平台免费，性价比个人认为还可以。",
      "state": "closed",
      "author": "Tom-and-Jerry-childhood",
      "author_type": "User",
      "created_at": "2024-07-03T07:40:27Z",
      "updated_at": "2025-01-26T07:00:30Z",
      "closed_at": "2025-01-26T07:00:30Z",
      "labels": [
        "eh: Improve",
        "Stale"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/832/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.5",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/832",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/832",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:10.451535",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "这个微信对话平台，我理解是开发者在这上面放语料，再使用小程序或公众号连接对话平台使用语料。那我们项目怎么接入这样的平台呢？也像小程序或者公众号一样使用这个对话平台来回复用户问题？",
          "created_at": "2024-12-26T10:00:09Z"
        }
      ]
    },
    {
      "issue_number": 978,
      "title": "[Bug]: 对话(1)请求失败: AttributeError 'RunnerManager' object has no attribute 'using_runner'",
      "body": "### 消息平台适配器\n\nNakuru（go-cqhttp）\n\n### 运行环境\n\nwindows10\n\n### 异常情况\n\n[01-15 14:27:45.131] process.py (42) - [INFO] : 处理 person_xxxxx的请求(0): 你好\r\n[01-15 14:27:45.132] chat.py (94) - [ERROR] : 对话(0)请求失败: AttributeError 'RunnerManager' object has no attribute 'using_runner'\r\n[01-15 14:27:45.320] controller.py (98) - [ERROR] : 'RunnerManager' object has no attribute 'using_runner'\r\n\r\n最新的代码，配置好了AI,回复消息报错这个\n\n### 复现步骤\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "wqj666666",
      "author_type": "User",
      "created_at": "2025-01-15T06:44:58Z",
      "updated_at": "2025-01-26T07:00:09Z",
      "closed_at": "2025-01-26T07:00:09Z",
      "labels": [
        "bug?",
        "Stale"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/978/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/978",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/978",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:10.655522",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "写一下复现步骤，比如写了哪些配置",
          "created_at": "2025-01-15T14:31:24Z"
        }
      ]
    },
    {
      "issue_number": 983,
      "title": "[Bug]: aiohttp.http_exceptions.ContentLengthError",
      "body": "### 消息平台适配器\n\naiocqhttp\n\n### 运行环境\n\nv3.4.2.1\n\n### 异常情况\n\n```\nTraceback (most recent call last):\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.11_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python311\\site-packages\\aiohttp\\streams.py\", line 315, in _wait\n    await waiter\nasyncio.exceptions.CancelledError\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"D:\\Q接入\\最新版本\\langbot-v3.4.2.1-all\\pkg\\platform\\sources\\aiocqhttp.py\", line 281, in on_message\n    return await callback(await self.event_converter.target2yiri(event), self)\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Q接入\\最新版本\\langbot-v3.4.2.1-all\\pkg\\platform\\sources\\aiocqhttp.py\", line 170, in target2yiri\n    yiri_chain = await AiocqhttpMessageConverter.target2yiri(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Q接入\\最新版本\\langbot-v3.4.2.1-all\\pkg\\platform\\sources\\aiocqhttp.py\", line 93, in target2yiri\n    image_base64, image_format = await image.qq_image_url_to_base64(msg.data['url'])\n                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Q接入\\最新版本\\langbot-v3.4.2.1-all\\pkg\\utils\\image.py\", line 56, in qq_image_url_to_base64\n    file_bytes, image_format = await get_qq_image_bytes(image_url, query)\n                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Q接入\\最新版本\\langbot-v3.4.2.1-all\\pkg\\utils\\image.py\", line 28, in get_qq_image_bytes\n    file_bytes = await resp.read()\n                 ^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.11_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python311\\site-packages\\aiohttp\\client_reqrep.py\", line 1214, in read\n    self._body = await self.content.read()\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.11_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python311\\site-packages\\aiohttp\\streams.py\", line 386, in read\n    block = await self.readany()\n            ^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.11_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python311\\site-packages\\aiohttp\\streams.py\", line 408, in readany\n    await self._wait(\"readany\")\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.11_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python311\\site-packages\\aiohttp\\streams.py\", line 314, in _wait\n    with self._timer:\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.11_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python311\\site-packages\\aiohttp\\helpers.py\", line 749, in __exit__\n    raise asyncio.TimeoutError from exc_val\nTimeoutError\n```\n\n### 复现步骤\n\n挂机即可\n\n### 启用的插件\n\n无",
      "state": "closed",
      "author": "sanxianxiaohuntun",
      "author_type": "User",
      "created_at": "2025-01-22T06:28:44Z",
      "updated_at": "2025-01-25T16:53:35Z",
      "closed_at": "2025-01-25T16:53:35Z",
      "labels": [
        "bug?",
        "Please take it seriously"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/983/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/983",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/983",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:10.827994",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "看不懂，什么情况下发生的？",
          "created_at": "2025-01-23T03:31:23Z"
        },
        {
          "author": "sanxianxiaohuntun",
          "body": "> 看不懂，什么情况下发生的？\n\n不知道，挂机发生，然后我给你看下日志，对bot毫无影响。7点半我还在睡觉呢，也没有群消息（群都忽略了），重点：对bot毫无影响任何影响都没有，依然正常回复和使用，但是会报错。\n\n```\n[01-23 01:21:49.929] process.py (42) - [INFO] : 处理 person_xxxxxx 的请求(17188): 原文给我下\n[01-23 01:21:54.985] chat.py (80) - [INFO] : 对话(17188)响应: assistant: 呐~原文在这里哦：...\n[01-23 07:43:32.251] cont",
          "created_at": "2025-01-23T03:54:44Z"
        },
        {
          "author": "sanxianxiaohuntun",
          "body": "补充一下，期间BOT也没收到任何非群消息。后续识图，对话都没有任何问题，补充后续使用：\n```\naiohttp.client_exceptions.ClientPayloadError: Response payload is not completed: <ContentLengthError: 400, message='Not enough data for satisfy content length header.'>\n[01-23 11:31:52.049] controller.py (96) - [INFO] : 根据访问控制忽略消息: person_2010741172\n[0",
          "created_at": "2025-01-23T03:56:08Z"
        }
      ]
    },
    {
      "issue_number": 986,
      "title": "[Bug]: 企业微信access token过期未处理",
      "body": "### 消息平台适配器\n\n其他（或暂未使用）\n\n### 运行环境\n\nRocklinux+docker\n\n### 异常情况\n\n对接企业微信时，每过两个小时要更新token，否则token就过期了，日志中报错如下：\n.[01-24 22:53:38.693] controller.py (189) - [ERROR] : 处理请求时出错 query_id=1 stage=SendResponseBackStage : Failed to send message: {'errcode': 42001, 'errmsg': 'access_token expired, hint: [1737759218426833351570099], from ip: , more info at https://open.work.weixin.qq.com/devtool/query?e=42001'}\n\n\n\n### 复现步骤\n\nbug必然发生，只要无人使用机器人，过两个小时token必然过期，然后就出错。\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "sideblue",
      "author_type": "User",
      "created_at": "2025-01-24T23:32:20Z",
      "updated_at": "2025-01-25T09:26:47Z",
      "closed_at": "2025-01-25T09:23:20Z",
      "labels": [
        "bug?",
        "m: Platform",
        "IM: wecom"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/986/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "wangcham"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/986",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/986",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:10.996796",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "已在 3.4.3.2 修复。",
          "created_at": "2025-01-25T09:26:47Z"
        }
      ]
    },
    {
      "issue_number": 979,
      "title": "[Bug]: 随机匹配参数设置0.0时仍100%返回消息",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\nLangBot-3.4.2.1   Ubuntu 22.04.4   Python-3.10.12\n\n### 异常情况\n\n将pipeline.json中的\r\n\"respond-rules\": {\r\n        \"default\": {\r\n            \"at\": false,\r\n            \"prefix\": [\r\n                \"ai\"\r\n            ],\r\n            \"random\": 0,\r\n            \"regexp\": []\r\n        }\r\n    },\r\n的random设置为0，在群里发送  ai[消息]  仍返回消息，设置为0.5、0.4等概率测试仍是100%返回，均是在文本编辑器中设置保存后重启程序操作的\r\n这是日志文件https://mclo.gs/3x4ERNM\n\n### 复现步骤\n\n设置random为0，在群使用响应前缀发送消息时仍100%返回\n\n### 启用的插件\n\n无插件",
      "state": "closed",
      "author": "KaridaLee",
      "author_type": "User",
      "created_at": "2025-01-16T06:24:29Z",
      "updated_at": "2025-01-23T15:04:49Z",
      "closed_at": "2025-01-23T15:04:49Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/979/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/979",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/979",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:11.224489",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "随机匹配是独立于 prefix 的，只要带了特定 prefix 的消息是一定会回复的。  \n随机仅在其他匹配规则无效时，才会尝试随机响应。  \n",
          "created_at": "2025-01-23T15:04:42Z"
        }
      ]
    },
    {
      "issue_number": 981,
      "title": "[Bug]:下载图片时发生错误Connect Timeout Error",
      "body": "### 消息平台适配器\n\nNakuru（go-cqhttp）\n\n### 运行环境\n\nv3.4.2.1、Windows10\n\n### 异常情况\n\n[01-20 20:53:24.073] controller.py (188) - [ERROR] : 处理请求时出错 query_id=0 stage=SendResponseBackStage : <ActionFailed status='failed', retcode=1200, data=None, message='Error: https://images-ng.pixai.art/images/orig/xxxx 下载失败, Connect Timeout Error', wording='Error: https://images-ng.pixai.art/images/orig/xxxx 下载失败, Connect Timeout Error', echo={'seq': 1}>\n\n### 复现步骤\n\n调用pixai的绘图会出现这个问题，已经成功发送post，在下载图片时候发送网络超时错误，似乎是代理引起的，但是在以下是正常\n\n```\ncurl -proxy https://images-ng.pixai.art/images/orig/xxxx --output image.jpg\nWarning: Invalid character is found in given range. A specified range MUST have only digits in 'start'-'stop'. The\nWarning: server's response to this request is uncertain.\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100  384k  100  384k    0     0   209k      0  0:00:01  0:00:01 --:--:--  209k\n```\n\n### 启用的插件\n\n小程序运行插件",
      "state": "closed",
      "author": "sanxianxiaohuntun",
      "author_type": "User",
      "created_at": "2025-01-20T12:59:46Z",
      "updated_at": "2025-01-20T13:10:21Z",
      "closed_at": "2025-01-20T13:10:21Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/981/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/981",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/981",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:11.457627",
      "comments": [
        {
          "author": "sanxianxiaohuntun",
          "body": "已解决",
          "created_at": "2025-01-20T13:10:17Z"
        }
      ]
    },
    {
      "issue_number": 975,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nGiveMeSetuPlugin\n\n### 插件代码库地址\n\nhttps://github.com/Hanschase/GiveMeSetuPlugin\n\n### 插件简介\n\n适用于LangBot+napcat的色图插件，支持tag搜索，通过转发卡片的方式展现",
      "state": "closed",
      "author": "Hanschase",
      "author_type": "User",
      "created_at": "2025-01-09T03:19:18Z",
      "updated_at": "2025-01-09T03:21:59Z",
      "closed_at": "2025-01-09T03:21:58Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/975/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/975",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/975",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:11.679072",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2025-01-09T03:21:58Z"
        }
      ]
    },
    {
      "issue_number": 974,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nStarMePlugin\n\n### 插件代码库地址\n\nhttps://github.com/Hanschase/StarMePlugin\n\n### 插件简介\n\n适用于LangBot的自动点赞插件，通过!starme注册之后，!letstar开启自动点赞任务，于每天10:00自动点赞",
      "state": "closed",
      "author": "Hanschase",
      "author_type": "User",
      "created_at": "2025-01-08T02:06:57Z",
      "updated_at": "2025-01-08T02:11:21Z",
      "closed_at": "2025-01-08T02:11:21Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/974/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/974",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/974",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:13.935490",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！已添加到 [star集](https://github.com/stars/RockChinQ/lists/qchatgpt-%E6%8F%92%E4%BB%B6)",
          "created_at": "2025-01-08T02:11:21Z"
        }
      ]
    },
    {
      "issue_number": 973,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nBlackJack\n\n### 插件代码库地址\n\nhttps://github.com/AmethystTim/BlackJack\n\n### 插件简介\n\n21点游戏插件，支持2人以上游玩\r\n\r\n- 规则进行了一定简化\r\n  - A默认为点数1\r\n  - 只考虑一副不含大小王的扑克牌\r\n\r\n- 演示\r\n\r\n![readme](https://github.com/user-attachments/assets/95112b78-aa94-45fe-b2d1-bd921f12c9f7)",
      "state": "closed",
      "author": "AmethystTim",
      "author_type": "User",
      "created_at": "2025-01-06T15:15:35Z",
      "updated_at": "2025-01-07T15:46:26Z",
      "closed_at": "2025-01-07T15:46:26Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/973/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/973",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/973",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:14.111896",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！已添加到 [star集](https://github.com/stars/RockChinQ/lists/qchatgpt-%E6%8F%92%E4%BB%B6)",
          "created_at": "2025-01-07T15:46:21Z"
        }
      ]
    },
    {
      "issue_number": 942,
      "title": "[Bug]: docker部署报错，应用运行致命异常: [Errno -2] Name or service not known",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\ndocker\n\n### LangBot 版本\n\nv3.4.0.2\n\n### 异常情况\n\nstdout:  _                   ___      _   \r\nstdout: | |   __ _ _ _  __ _| _ ) ___| |_ \r\nstdout: | |__/ _` | ' \\/ _` | _ \\/ _ \\  _|\r\nstdout: |____\\__,_|_||_\\__, |___/\\___/\\__|\r\nstdout:                |___/              \r\nstdout: \r\nstdout: ⭐️开源地址: https://github.com/RockChinQ/LangBot\r\nstdout: 📖文档地址: https://docs.langbot.app\r\nstdout: \r\nstdout: 以下文件不存在，已自动生成，请按需修改配置文件后重启：\r\nstdout: - plugins/__init__.py\r\nstdout: - plugins/plugins.json\r\nstdout: - data/config/command.json\r\nstdout: - data/config/pipeline.json\r\nstdout: - data/config/platform.json\r\nstdout: - data/config/provider.json\r\nstdout: - data/config/system.json\r\nstdout: - data/scenario/default.json\r\nstdout: \r\nstdout:  _                   ___      _   \r\nstdout: | |   __ _ _ _  __ _| _ ) ___| |_ \r\nstdout: | |__/ _` | ' \\/ _` | _ \\/ _ \\  _|\r\nstdout: |____\\__,_|_||_\\__, |___/\\___/\\__|\r\nstdout:                |___/              \r\nstdout: \r\nstdout: ⭐️开源地址: https://github.com/RockChinQ/LangBot\r\nstdout: 📖文档地址: https://docs.langbot.app\r\nstdout: \r\nstdout: [37m[12-03 11:53:29.072] manager.py (79) - [INFO] : 初始化平台适配器 0: aiocqhttp[0m\r\nstdout: [31m[12-03 11:53:30.193] app.py (136) - [ERROR] : 应用运行致命异常: [Errno -2] Name or service not known[0m\n\n### 启用的插件\n\n无",
      "state": "closed",
      "author": "xupeng19881010",
      "author_type": "User",
      "created_at": "2024-12-03T03:57:36Z",
      "updated_at": "2025-01-06T13:31:53Z",
      "closed_at": "2025-01-06T13:30:26Z",
      "labels": [
        "bug?",
        "Stale"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/942/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/942",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/942",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:14.281156",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "现在启动时不再获取本机ip，重试一下",
          "created_at": "2025-01-04T15:22:06Z"
        }
      ]
    },
    {
      "issue_number": 956,
      "title": "[Bug]: 调用dify无法发送Agent的图片",
      "body": "### 消息平台适配器\n\nNone\n\n### 运行环境\n\nDebian 11\n\n### LangBot 版本\n\nv3.4.1.2\n\n### 异常情况\n\n![546a8145670a01586acdbd189c63b777](https://github.com/user-attachments/assets/81686dcd-7edc-4245-a6f7-1247b687c4a4)\r\n↑这是原图，能看到有图片\r\n![image](https://github.com/user-attachments/assets/063d13d2-3eb9-4c7f-8e78-ad6ace1be13f)\r\n↑这是QQ里的回复\r\n并没有把图片发出来，接入的是dify Agent\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "AlanBacker",
      "author_type": "User",
      "created_at": "2024-12-17T09:51:01Z",
      "updated_at": "2025-01-06T13:29:28Z",
      "closed_at": "2025-01-06T13:29:27Z",
      "labels": [
        "bug?",
        "pd: Need reproducing"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/956/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/956",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/956",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:14.498647",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "dify真是复杂啊。",
          "created_at": "2024-12-17T15:25:11Z"
        }
      ]
    },
    {
      "issue_number": 655,
      "title": "[Feature]: 希望能支持chatglmAPI",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n希望能支持chatglmAPI或者是本地部署的chatglm-6b模型api",
      "state": "closed",
      "author": "shenleqinau",
      "author_type": "User",
      "created_at": "2024-01-08T07:00:22Z",
      "updated_at": "2025-01-06T12:29:42Z",
      "closed_at": "2025-01-06T12:29:27Z",
      "labels": [
        "eh: Improve",
        "m: Provider",
        "pd: Need design"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/655/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "RockChinQ"
      ],
      "milestone": "3.4",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/655",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/655",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:14.662707",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "ChatGLM 是有本地部署 API 和在线调用 API 两种使用方式吗？在线调用的需要申请内测吗？",
          "created_at": "2024-01-12T06:55:29Z"
        },
        {
          "author": "JiaweiMorris",
          "body": "> ChatGLM 是有本地部署 API 和在线调用 API 两种使用方式吗？在线调用的需要申请内测吗？\r\n\r\nhttps://open.bigmodel.cn/overview  在这个网站注册后就可以了",
          "created_at": "2024-01-22T13:59:12Z"
        },
        {
          "author": "shenleqinau",
          "body": "chatglm的API有官方的大模型apikey以及本地的api调用两种是不一样的chatglmapi调用方法在GitHub能看到以及大模型申请可以去chatglm.cn都是不要钱的",
          "created_at": "2024-01-24T14:41:27Z"
        },
        {
          "author": "RockChinQ",
          "body": "收到，过几周会推进一下",
          "created_at": "2024-01-24T14:43:39Z"
        },
        {
          "author": "bright141",
          "body": "已经成功测试，本地搭建chatglm3-6b，然后修改api地址到本地chatglm3的api地址。但需要修改相应模型名称（需要把模型名称添加到QChatGPT/pkg/openai/modelmgr.py模型名称列表中）",
          "created_at": "2024-01-27T13:28:07Z"
        }
      ]
    },
    {
      "issue_number": 967,
      "title": "[Bug]: 模型对话请求失败",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\nDocker\n\n### 异常情况\n\n[12-26 06:05:02.533] process.py (42) - [INFO] : 处理 person_734654865 的请求(2): 你好\r\n[12-26 06:05:02.533] chat.py (94) - [ERROR] : 对话(2)请求失败: TypeError MoonshotChatCompletions._closure() takes from 3 to 4 positional arguments but 5 were given[12-26 06:05:02.678] controller.py (98) - [ERROR] : MoonshotChatCompletions._closure() takes from 3 to 4 positional arguments but 5 were given\r\n[12-26 06:06:10.920] process.py (42) - [INFO] : 处理 person_734654865 的请求(3): !cmd default\r\n[12-26 06:06:10.920] command.py (112) - [INFO] : 命令返回: default: 操作情景预设...\r\n[12-26 06:06:20.288] process.py (42) - [INFO] : 处理 person_734654865 的请求(4): !default set\r\n[12-26 06:06:20.289] command.py (85) - [INFO] : 命令(4)报错: 参数不足: 请提供情景预设名称\r\n[12-26 06:07:24.066] process.py (42) - [INFO] : 处理 person_734654865 的请求(5): !default set default\r\n[12-26 06:07:24.067] command.py (112) - [INFO] : 命令返回: 已设置当前会话默认情景预设为 defau...\r\n[12-26 06:07:30.914] process.py (42) - [INFO] : 处理 person_734654865 的请求(6): !reset\r\n[12-26 06:07:30.914] command.py (112) - [INFO] : 命令返回: 已重置当前会话\r\n[12-26 06:07:34.542] process.py (42) - [INFO] : 处理 person_734654865 的请求(7): 你好\r\n[12-26 06:07:34.543] chat.py (94) - [ERROR] : 对话(7)请求失败: TypeError MoonshotChatCompletions._closure() takes from 3 to 4 positional arguments but 5 were given\r\n[12-26 06:07:34.678] controller.py (98) - [ERROR] : MoonshotChatCompletions._closure() takes from 3 to 4 positional arguments but 5 were given\r\n[12-26 06:07:55.410] process.py (42) - [INFO] : 处理 person_734654865 的请求(8): 1\r\n[12-26 06:07:55.411] chat.py (94) - [ERROR] : 对话(8)请求失败: TypeError MoonshotChatCompletions._closure() takes from 3 to 4 positional arguments but 5 were given\r\n[12-26 06:07:55.549] controller.py (98) - [ERROR] : MoonshotChatCompletions._closure() takes from 3 to 4 positional arguments but 5 were given\n\n### 复现步骤\n\n配置好后，命令可以正常回复，但是对话报错\n\n### 启用的插件\n\n无",
      "state": "closed",
      "author": "SKY-Xuan",
      "author_type": "User",
      "created_at": "2024-12-26T06:34:12Z",
      "updated_at": "2024-12-27T04:29:42Z",
      "closed_at": "2024-12-27T04:29:42Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/967/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/967",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/967",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:14.884589",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "配置什么？什么模型？什么接口？怎么复现？",
          "created_at": "2024-12-26T06:38:51Z"
        },
        {
          "author": "SKY-Xuan",
          "body": "> 配置什么？什么模型？什么接口？怎么复现？\r\n\r\nprovider.json\r\n``` \r\n{\r\n    \"enable-chat\": true,\r\n    \"enable-vision\": true,\r\n    \"keys\": {\r\n        \"openai\": [\r\n        \r\n        ],\r\n        \"anthropic\": [\r\n        \r\n        ],\r\n        \"moonshot\": [\r\n            \"sk-6re6KV8XmLLcJjd7mPArcsZb8TRIOszxIY6m6Ad9wzGa####\"\r\n  ",
          "created_at": "2024-12-26T06:44:30Z"
        }
      ]
    },
    {
      "issue_number": 962,
      "title": "[Bug]: macOS平台启动失败",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\nmacOS arm\n\n### LangBot 版本\n\nlangbot-v3.4.1.2-all\n\n### 异常情况\n\n![f8bf69ddc2da2b12ffcef26c3e525b90](https://github.com/user-attachments/assets/3195e828-4f74-47ef-bb65-faac7c795f31)\r\n第一次运行\r\n![b85c0f2c66348cf7481e49fd4f5241ea](https://github.com/user-attachments/assets/7be6d8da-eef0-41da-82c5-aac64fc0f10e)\r\n第二次\r\n\r\n  File \"/Users/choikuan/Downloads/langbot-v3.4.1.2-all/pkg/provider/modelmgr/requesters/anthropicmsgs.py\", line 24, in initialize\r\n    self.client = anthropic.AsyncAnthropic(\r\nTypeError: AsyncAnthropic.__init__() got an unexpected keyword argument 'proxies'\r\n\r\n\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "fwz233-RE",
      "author_type": "User",
      "created_at": "2024-12-22T07:10:46Z",
      "updated_at": "2024-12-24T11:27:58Z",
      "closed_at": "2024-12-24T11:27:58Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/962/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/962",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/962",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:15.063165",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "相同问题 #960 ",
          "created_at": "2024-12-22T07:11:46Z"
        }
      ]
    },
    {
      "issue_number": 960,
      "title": "[Bug]: Anthropic 请求器无法初始化客户端",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\nwin11 python3.11\n\n### LangBot 版本\n\nv3.4.1.2\n\n### 异常情况\n\n![image](https://github.com/user-attachments/assets/112d17e4-a183-4721-995e-71f9321f092a)\r\n部署bot时出现的问题 \n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "Dawn-code0",
      "author_type": "User",
      "created_at": "2024-12-20T09:52:14Z",
      "updated_at": "2024-12-24T11:27:57Z",
      "closed_at": "2024-12-24T11:27:57Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/960/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/960",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/960",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:15.326460",
      "comments": []
    },
    {
      "issue_number": 957,
      "title": "[Bug]: 图片请求失败的bug以及解决方法，[ERROR] : 400, message='Bad Request', url='http://multimedia.nt.qq.com.cn/download'",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\nWindows\n\n### LangBot 版本\n\n最新版本\n\n### 异常情况\n\n[12-17 22:47:09.652] process.py (42) - [INFO] : 处理 person_  的请求(3): [图片]\r\n[12-17 22:47:11.769] chat.py (94) - [ERROR] : 对话(3)请求失败: ClientResponseError 400, message='Bad Request', url='http://multimedia.nt.qq.com.cn/download'\r\n[12-17 22:47:12.081] controller.py (98) - [ERROR] : 400, message='Bad Request', url='http://multimedia.nt.qq.com.cn/download'\n\n### 启用的插件\n\n无\r\n`pkg\\utils\\image.py`出现的错误\r\n\r\n源文件\r\n```\r\nimport base64\r\nimport typing\r\nfrom urllib.parse import urlparse, parse_qs\r\nimport ssl\r\n\r\nimport aiohttp\r\n\r\n\r\ndef get_qq_image_downloadable_url(image_url: str) -> tuple[str, dict]:\r\n    \"\"\"获取QQ图片的下载链接\"\"\"\r\n    parsed = urlparse(image_url)\r\n    query = parse_qs(parsed.query)\r\n    return f\"http://{parsed.netloc}{parsed.path}\", query\r\n\r\n\r\nasync def get_qq_image_bytes(image_url: str) -> tuple[bytes, str]:\r\n    \"\"\"获取QQ图片的bytes\"\"\"\r\n    image_url, query = get_qq_image_downloadable_url(image_url)\r\n    ssl_context = ssl.create_default_context()\r\n    ssl_context.check_hostname = False\r\n    ssl_context.verify_mode = ssl.CERT_NONE\r\n    async with aiohttp.ClientSession(trust_env=False) as session:\r\n        async with session.get(image_url, params=query, ssl=ssl_context) as resp:\r\n            resp.raise_for_status()\r\n            file_bytes = await resp.read()\r\n            content_type = resp.headers.get('Content-Type')\r\n            if not content_type or not content_type.startswith('image/'):\r\n                image_format = 'jpeg'\r\n            else: \r\n                image_format = content_type.split('/')[-1]\r\n            return file_bytes, image_format\r\n\r\n\r\nasync def qq_image_url_to_base64(\r\n    image_url: str\r\n) -> typing.Tuple[str, str]:\r\n    \"\"\"将QQ图片URL转为base64，并返回图片格式\r\n\r\n    Args:\r\n        image_url (str): QQ图片URL\r\n\r\n    Returns:\r\n        typing.Tuple[str, str]: base64编码和图片格式\r\n    \"\"\"\r\n    image_url, query = get_qq_image_downloadable_url(image_url)\r\n\r\n    # Flatten the query dictionary\r\n    query = {k: v[0] for k, v in query.items()}\r\n\r\n    file_bytes, image_format = await get_qq_image_bytes(image_url)\r\n\r\n    base64_str = base64.b64encode(file_bytes).decode()\r\n\r\n    return base64_str, image_format\r\n```\r\n\r\n\r\n解决方法\r\n\r\n```\r\nimport base64\r\nimport typing\r\nfrom urllib.parse import urlparse, parse_qs\r\nimport ssl\r\nimport logging\r\nimport aiohttp\r\n\r\n\r\nlogger = logging.getLogger(__name__)\r\n\r\n\r\ndef get_qq_image_downloadable_url(image_url: str) -> tuple[str, dict]:\r\n    \"\"\"获取QQ图片的下载链接\"\"\"\r\n    parsed = urlparse(image_url)\r\n    query = parse_qs(parsed.query)\r\n    return f\"http://{parsed.netloc}{parsed.path}\", query\r\n\r\n\r\nasync def get_qq_image_bytes(image_url: str) -> tuple[bytes, str]:\r\n    \"\"\"获取QQ图片的bytes\"\"\"\r\n    image_url, query = get_qq_image_downloadable_url(image_url)\r\n    headers = {\r\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36',\r\n        'Referer': 'https://multimedia.nt.qq.com.cn/'\r\n    }\r\n    try:\r\n        async with aiohttp.ClientSession(trust_env=True) as session:  # 尝试开启代理设置\r\n            async with session.get(image_url, params=query, headers=headers) as resp:\r\n                resp.raise_for_status()\r\n                file_bytes = await resp.read()\r\n                content_type = resp.headers.get('Content-Type')\r\n                if not content_type or not content_type.startswith('image/'):\r\n                   image_format = 'jpeg'\r\n                else:\r\n                  image_format = content_type.split('/')[-1]\r\n\r\n                return file_bytes, image_format\r\n\r\n    except aiohttp.ClientResponseError as e:\r\n        logger.error(f\"Error downloading image from {image_url}: {e}\")\r\n        logger.error(f\"Response status code: {e.status}\")\r\n        try:\r\n            content = await resp.text()\r\n        except Exception:\r\n            content = \"<Response content is not text>\"\r\n        logger.error(f\"Response content: {content}\")\r\n        raise\r\n    except Exception as e:\r\n        logger.error(f\"An unexpected error occurred while downloading image from {image_url}: {e}\")\r\n        raise\r\n\r\n\r\nasync def qq_image_url_to_base64(\r\n    image_url: str\r\n) -> typing.Tuple[str, str]:\r\n    \"\"\"将QQ图片URL转为base64，并返回图片格式\r\n\r\n    Args:\r\n        image_url (str): QQ图片URL\r\n\r\n    Returns:\r\n        typing.Tuple[str, str]: base64编码和图片格式\r\n    \"\"\"\r\n    logger.debug(f\"Converting image URL to base64: {image_url}\")\r\n    file_bytes, image_format = await get_qq_image_bytes(image_url)\r\n\r\n    base64_str = base64.b64encode(file_bytes).decode()\r\n\r\n    return base64_str, image_format\r\n```\r\n\r\n\r\n新增部分\r\n```\r\n    headers = {\r\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36',\r\n        'Referer': 'https://multimedia.nt.qq.com.cn/'\r\n    }\r\n```\r\n模拟了浏览器请求之后请求成功\r\n\r\n[12-17 23:20:49.937] process.py (42) - [INFO] : 处理 person_  的请求(0): [图片]\r\n[12-17 23:21:02.949] chat.py (80) - [INFO] : 对话(0)响应: assistant: 哇，好可爱的小女孩\r\n",
      "state": "closed",
      "author": "sanxianxiaohuntun",
      "author_type": "User",
      "created_at": "2024-12-17T15:21:12Z",
      "updated_at": "2024-12-24T11:27:57Z",
      "closed_at": "2024-12-24T11:27:57Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/957/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/957",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/957",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:15.326482",
      "comments": []
    },
    {
      "issue_number": 955,
      "title": "[Bug]: 下载 QQ 聊天图片失败",
      "body": "### 消息平台适配器\r\n\r\naiocqhttp（使用 OneBot 协议接入的）\r\n\r\n### 运行环境\r\n\r\nDocker\r\n\r\n### LangBot 版本\r\n\r\nv3.4.1.1\r\n\r\n### 异常情况\r\n\r\n发送图片的时候偶尔不能处理，返回请求失败，文字信息正常\r\n消息端是napcat，模型是gpt4o-mini\r\n\r\n2024-12-17 12:27:23 langbot  | [12-17 04:27:23.612] process.py (42) - [INFO] : 处理 group_423061359 的请求(1010): [图片]\r\n2024-12-17 12:27:23 langbot  | [12-17 04:27:23.801] chat.py (94) - [ERROR] : 对话(1010)请求失败: 400, message='Bad Request', url='http://multimedia.nt.qq.com.cn/download'\r\n2024-12-17 12:27:24 langbot  | [12-17 04:27:24.128] controller.py (98) - [ERROR] : 400, message='Bad Request', url='http://multimedia.nt.qq.com.cn/download'\r\n\r\n今天下午又好了，是不是触发了qq的风控？\r\n2024-12-17 15:12:38 [12-17 07:12:38.218] process.py (42) - [INFO] : 处理 group_423061359 的请求(1152): [图片]\r\n2024-12-17 15:12:47 [12-17 07:12:47.896] chat.py (80) - [INFO] : 对话(1152)响应: assistant: 这个角色好可爱呀感...\r\n\r\n### 启用的插件\r\n\r\n所有插件(1):\r\n#1 BiliAnalysis \r\n当收到B站视频链接时，对B站链接进行分析并发送封面，标题，作者，等内容\r\nv0.2\r\n作者: Hanschase",
      "state": "closed",
      "author": "sanxi33",
      "author_type": "User",
      "created_at": "2024-12-17T05:03:58Z",
      "updated_at": "2024-12-24T11:27:57Z",
      "closed_at": "2024-12-24T11:27:57Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/955/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/955",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/955",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:15.326488",
      "comments": []
    },
    {
      "issue_number": 945,
      "title": "[Bug]: 使用ollama作为模型请求的时候，返回的对话疑似不能正常解析",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\nWindows Server 2022 ，python3.10.11 \n\n### LangBot 版本\n\n3.4.0.2\n\n### 异常情况\n\n根据文档 已完成NapCat与langbot的ws连接\r\n在此基础上，我配置了本地的ollama(配置了局域网访问)，并且使用gemma2:27b。\r\n现在是QQ发送消息，langbot与ollama交互的时候，可发现GPU的cuda是在进行工作回复的，但是回复回来是以下的日志。\r\n\r\n[12-08 14:21:49.048] chat.py (95) - [ERROR] : 对话(1)请求失败: 'ChatResponse' object has no attribute 'pop'\r\n[12-08 14:21:49.353] controller.py (98) - [ERROR] : 'ChatResponse' object has no attribute 'pop'\r\n\r\n报异常前 我对query进行了查看\r\n\r\n[12-08 14:21:48.137] chat.py (73) - [INFO] : 看看參數 query_id=1 launcher_type=<LauncherTypes.PERSON: 'person'> launcher_id=111111111 sender_id=111111111 message_event=FriendMessage(message_chain=MessageChain([Source(id=269009979, time=datetime.datetime(2024, 12, 8, 14, 21, 48, 133059)), Plain('你好')]), sender=Friend(id=111111111, nickname='🐠', remark='')) message_chain=MessageChain([Source(id=269009979, time=datetime.datetime(2024, 12, 8, 14, 21, 48, 133059)), Plain('你好')]) adapter=<pkg.platform.sources.aiocqhttp.AiocqhttpAdapter object at 0x0000024D0540EB30> session=Session(launcher_type=<LauncherTypes.PERSON: 'person'>, launcher_id=857082026, sender_id=0, use_prompt_name='default', using_conversation=Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2024, 12, 8, 14, 20, 56, 917743), update_time=datetime.datetime(2024, 12, 8, 14, 20, 56, 917743), use_model=LLMModelInfo(name='gemma2:27b', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x0000024D053E0970>, requester=<pkg.provider.modelmgr.requesters.ollamachat.OllamaChatCompletions object at 0x0000024D053FCE20>, tool_call_supported=False, vision_supported=False), use_funcs=[]), conversations=[Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2024, 12, 8, 14, 20, 56, 917743), update_time=datetime.datetime(2024, 12, 8, 14, 20, 56, 917743), use_model=LLMModelInfo(name='gemma2:27b', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x0000024D053E0970>, requester=<pkg.provider.modelmgr.requesters.ollamachat.OllamaChatCompletions object at 0x0000024D053FCE20>, tool_call_supported=False, vision_supported=False), use_funcs=[])], create_time=datetime.datetime(2024, 12, 8, 14, 20, 56, 915741), update_time=datetime.datetime(2024, 12, 8, 14, 20, 56, 915741), semaphore=<asyncio.locks.Semaphore object at 0x0000024D05493F10 [locked]>) messages=[] prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]) user_message=Message(role='user', name=None, content=[ContentElement(type='text', text='你好', image_url=None)], tool_calls=None, tool_call_id=None) use_model=LLMModelInfo(name='gemma2:27b', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x0000024D053E0970>, requester=<pkg.provider.modelmgr.requesters.ollamachat.OllamaChatCompletions object at 0x0000024D053FCE20>, tool_call_supported=False, vision_supported=False) use_funcs=None resp_messages=[] resp_message_chain=[] current_stage=<pkg.pipeline.stagemgr.StageInstContainer object at 0x0000024D05451720>\r\n\r\n我不知道是什么问题。\r\n\r\n以下是截图，我确信ollama是正常可访问的。\r\n![222](https://github.com/user-attachments/assets/09c22cac-2025-49e0-ade8-b019db982060)\r\n\r\n![111](https://github.com/user-attachments/assets/21ee0091-7fa1-4608-ae42-bb684e314021)\r\n\r\n以下是我的配置\r\nllm-models.json\r\n        {\r\n            \"name\": \"gemma2:27b\",\r\n            \"requester\": \"ollama-chat\"\r\n        }\r\n\r\nprovider.json\r\n        \"ollama-chat\": {\r\n            \"base-url\": \"http://192.168.10.100:11434\",\r\n            \"args\": {},\r\n            \"timeout\": 600\r\n        }\r\n    },\r\n    \"model\": \"gemma2:27b\",\r\n    \"prompt-mode\": \"normal\",\r\n    \"prompt\": {\r\n        \"default\": \"\"\r\n    },\r\n    \"runner\": \"local-agent\"\r\n}\r\n我该如何解决这个问题\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "Wanglanhua450",
      "author_type": "User",
      "created_at": "2024-12-08T06:35:19Z",
      "updated_at": "2024-12-16T17:42:31Z",
      "closed_at": "2024-12-16T17:42:31Z",
      "labels": [
        "bug?",
        "m: Provider"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/945/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/945",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/945",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:15.326496",
      "comments": [
        {
          "author": "Wanglanhua450",
          "body": "确实是这个版本的问题，我使用3.4.0就不会报错",
          "created_at": "2024-12-08T07:37:04Z"
        },
        {
          "author": "DudeGuuud",
          "body": "3.4.1遇到同样的问题了，回退到3.4.0闪退",
          "created_at": "2024-12-14T15:10:38Z"
        },
        {
          "author": "RockChinQ",
          "body": "已修复，将在下一版本包含。",
          "created_at": "2024-12-15T09:06:34Z"
        }
      ]
    },
    {
      "issue_number": 951,
      "title": "[Bug]: 无法使用dify agent应用",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\nDebian 11\n\n### LangBot 版本\n\nv3.4.1.1\n\n### 异常情况\n\n在正确配置provider.json（至少是按照文档的）后\r\n我试图调用接入到dify的agent（本报告中agent的名称为\"Gemini-QQ\"）后无法正常调用\r\n![image](https://github.com/user-attachments/assets/9d66d9ba-aa75-4ac8-9aff-f80e3e08be7c)\r\n![image](https://github.com/user-attachments/assets/a7602d6d-5195-4987-b394-1e0791f16b2e)\r\n![image](https://github.com/user-attachments/assets/0731a9a3-3c8f-46cf-90fe-f568f5eb7147)\r\n\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "AlanBacker",
      "author_type": "User",
      "created_at": "2024-12-15T09:37:04Z",
      "updated_at": "2024-12-16T17:26:57Z",
      "closed_at": "2024-12-16T17:21:03Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/951/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/951",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/951",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:15.529876",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "已在新版修复，需要根据文档重新填写配置文件。",
          "created_at": "2024-12-16T17:26:56Z"
        }
      ]
    },
    {
      "issue_number": 948,
      "title": "[Bug]: dify无法上传图片",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\ndocker\n\n### LangBot 版本\n\n3.4.1.1\n\n### 异常情况\n\n图片无法上传\r\n![image](https://github.com/user-attachments/assets/353ea7a5-84ac-4810-9bc9-f731e3c4afff)\r\n![d9a4c4c8307762cfda4ff79a9fb270fd](https://github.com/user-attachments/assets/22fe8d0f-4691-4f2f-b1aa-c62eb06d97bf)\r\n![41e3484f0003fe4643858cbe19a2203a](https://github.com/user-attachments/assets/c54a116b-4ead-471a-89f1-0cb004ac5082)\r\n\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "LovelyGuYiMeng",
      "author_type": "User",
      "created_at": "2024-12-15T06:09:28Z",
      "updated_at": "2024-12-16T17:24:34Z",
      "closed_at": "2024-12-16T17:21:02Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/948/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/948",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/948",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:15.765283",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "把控制台输出贴出来",
          "created_at": "2024-12-16T12:05:37Z"
        },
        {
          "author": "RockChinQ",
          "body": "已发布在 v3.4.1.2",
          "created_at": "2024-12-16T17:24:32Z"
        }
      ]
    },
    {
      "issue_number": 949,
      "title": "[Bug]: dify AI生图时间过长导致超时直接判定请求失败",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\ndocker\n\n### LangBot 版本\n\n3.4.1.1\n\n### 异常情况\n\ndify AI生图时间过长导致超时直接判定请求失败\r\n![0c08747f360d359e02490ecdee985825](https://github.com/user-attachments/assets/8eeb8e78-4142-4395-ac43-826dab876501)\r\n![01afb0b48b0630b1768baf997b2bed14](https://github.com/user-attachments/assets/a59dbd5b-14e7-4de6-9ad0-94dbc6d16707)\r\n\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "LovelyGuYiMeng",
      "author_type": "User",
      "created_at": "2024-12-15T06:11:09Z",
      "updated_at": "2024-12-16T17:21:03Z",
      "closed_at": "2024-12-16T17:21:03Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/949/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/949",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/949",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:16.017905",
      "comments": []
    },
    {
      "issue_number": 941,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nLangBot_Plugin_YoutubeAnalysis\n\n### 插件代码库地址\n\nhttps://github.com/Garrise/LangBot_Plugin_YoutubeAnalysis\n\n### 插件简介\n\n支持油管视频链接解析\r\n（抱歉之前操作有误，请重新添加插件，谢谢，并去掉我fork的别人的插件：https://github.com/Garrise/LangBot_Plugin_BilibiliAnalysis）",
      "state": "closed",
      "author": "Garrise",
      "author_type": "User",
      "created_at": "2024-12-02T01:42:52Z",
      "updated_at": "2024-12-16T15:58:01Z",
      "closed_at": "2024-12-16T15:58:00Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/941/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/941",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/941",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:16.017925",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2024-12-16T15:58:00Z"
        }
      ]
    },
    {
      "issue_number": 765,
      "title": "[Feature]: AI App 平台集成",
      "body": "### 这是一个？\r\n\r\n新功能\r\n\r\n### 详细描述\r\n\r\ndify, fastgpt, linkai 等知识库/agent/wf 平台集成性\r\n\r\n#758",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-05-11T06:46:41Z",
      "updated_at": "2024-12-14T10:24:55Z",
      "closed_at": "2024-12-14T10:24:55Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/765/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.4",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/765",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/765",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:16.217474",
      "comments": []
    },
    {
      "issue_number": 838,
      "title": "添加 本地私有模型知识管理 dify 接入 ",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n添加 本地私有模型知识管理 dify 接入        ",
      "state": "closed",
      "author": "2667339025",
      "author_type": "User",
      "created_at": "2024-07-04T09:54:15Z",
      "updated_at": "2024-12-14T10:24:44Z",
      "closed_at": "2024-12-14T10:24:44Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/838/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/838",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/838",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:16.217497",
      "comments": []
    },
    {
      "issue_number": 939,
      "title": "[Bug]: Ollama连接错误?",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\nDocker\n\n### LangBot 版本\n\nv3.4.0.2\n\n### 异常情况\n\n任何时候使用ollama进行大模型聊天都会产生Connection error错误,使用!ollama会产生Connection refused错误\r\n我的ollama部署在Docker中\r\n日志:\r\n```\r\n[12-01 14:58:22.522] manager.py (79) - [INFO] : 初始化平台适配器 0: aiocqhttp\r\n[12-01 14:58:24.163] app.py (170) - [INFO] : =======================================\r\n[12-01 14:58:24.163] app.py (170) - [INFO] : ✨ 您可通过以下方式访问管理面板\r\n[12-01 14:58:24.163] app.py (170) - [INFO] : \r\n[12-01 14:58:24.163] app.py (170) - [INFO] : 🏠 本地地址：http://172.22.0.2:5300/\r\n[12-01 14:58:24.163] app.py (170) - [INFO] : 🌐 公网地址：http://118.79.109.246:5300/\r\n[12-01 14:58:24.163] app.py (170) - [INFO] : \r\n[12-01 14:58:24.163] app.py (170) - [INFO] : 📌 如果您在容器中运行此程序，请确保容器的 5300 端口已对外暴露\r\n[12-01 14:58:24.164] app.py (170) - [INFO] : 🔗 若要使用公网地址访问，请阅读以下须知[12-01 14:58:24.164] app.py (170) - [INFO] :    1. 公网地址仅供参考，请以您的主机公网 IP 为准；\r\n[12-01 14:58:24.164] app.py (170) - [INFO] :    2. 要使用公网地址访问，请确保您的主机具有公网 IP，并且系统防火墙已放行 5300 端口；\r\n[12-01 14:58:24.164] app.py (170) - [INFO] : \r\n[12-01 14:58:24.164] app.py (170) - [INFO] : 🤯 WebUI 仍处于 Beta 测试阶段，如有问题或建议请反馈到 https://github.com/RockChinQ/LangBot/issues\r\n[12-01 14:58:24.164] app.py (170) - [INFO] : =======================================[12-01 14:58:34.198] process.py (42) - [INFO] : 处理 person_1329261154 的请求(0): 你好[12-01 14:58:35.460] chat.py (94) - [ERROR] : 对话(0)请求失败: 模型请求失败: 请求错误: Connection error.[12-01 14:58:41.258] controller.py (98) - [ERROR] : 模型请求失败: 请求错误: Connection error.[12-01 14:58:48.841] process.py (42) - [INFO] : 处理 person_1329261154 的请求(1): !ollama\r\n[12-01 14:58:48.842] controller.py (188) - [ERROR] : 处理请求时出错 query_id=1 stage=MessageProcessor : [Errno 111] Connection refused[12-01 15:02:18.150] process.py (42) - [INFO] : 处理 person_1329261154 的请求(2): !versions\r\n[12-01 15:02:18.150] command.py (85) - [INFO] : 命令(2)报错: 未知命令: versions[12-01 15:02:25.929] process.py (42) - [INFO] : 处理 person_1329261154 的请求(3): !version\r\n[12-01 15:02:26.747] command.py (112) - [INFO] : 命令返回: 当前版本: ...\r\n```\r\ndocker ps:\r\n```\r\nCONTAINER ID   IMAGE                                    COMMAND                   CREATED          STATUS                 PORTS                                                                                   NAMES\r\nbb240a18b6bb   rockchin/langbot:latest                  \"python main.py\"          23 minutes ago   Up 6 minutes           0.0.0.0:2280-2290->2280-2290/tcp, 0.0.0.0:5300->5300/tcp, :::2280-2290->2280-2290/tcp   langbot_lxs7-langbot_LXS7-1\r\ne5bf7aa1471b   dockerpull.org/ollama/ollama:rocm        \"/bin/ollama serve\"       24 hours ago     Up 2 hours             0.0.0.0:11434->11434/tcp, :::11434->11434/tcp                                           ollama\r\n1e10332d1a2a   9472fd378a1c                             \"bash start.sh\"           33 hours ago     Up 2 hours (healthy)                                                                                           open-webui\r\n7c247ce22237   ghcr.io/sillytavern/sillytavern:latest   \"tini -- ./docker-en…\"   3 months ago     Up 2 hours             0.0.0.0:8000->8000/tcp, :::8000->8000/tcp   \r\n```\r\n直接访问ollama的api地址没有问题\n\n### 启用的插件\n\n无插件",
      "state": "closed",
      "author": "safe049",
      "author_type": "User",
      "created_at": "2024-12-01T15:05:51Z",
      "updated_at": "2024-12-06T11:10:40Z",
      "closed_at": "2024-12-06T11:10:39Z",
      "labels": [
        "bug?",
        "Stale"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 13,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/939/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/939",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/939",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:16.217506",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "看你platform.json怎么填的",
          "created_at": "2024-12-01T15:32:06Z"
        },
        {
          "author": "safe049",
          "body": "platform.json:\r\n```\r\n{\r\n  \"at-sender\": true,\r\n  \"force-delay\": {\r\n    \"max\": 0,\r\n    \"min\": 0\r\n  },\r\n  \"hide-exception-info\": true,\r\n  \"long-text-process\": {\r\n    \"font-path\": \"\",\r\n    \"strategy\": \"forward\",\r\n    \"threshold\": 256\r\n  },\r\n  \"platform-adapters\": [\r\n    {\r\n      \"adapter\": \"nakuru\",\r\n  ",
          "created_at": "2024-12-01T16:27:37Z"
        },
        {
          "author": "RockChinQ",
          "body": "说错了，是provider.json。",
          "created_at": "2024-12-01T16:28:50Z"
        },
        {
          "author": "safe049",
          "body": "```\r\n{\r\n  \"enable-chat\": true,\r\n  \"enable-vision\": true,\r\n  \"keys\": {\r\n    \"anthropic\": [\r\n      \"sk-1234567890\"\r\n    ],\r\n    \"deepseek\": [\r\n      \"sk-1234567890\"\r\n    ],\r\n    \"gitee\": [],\r\n    \"gitee-ai\": [\r\n      \"XXXXX\"\r\n    ],\r\n    \"moonshot\": [\r\n      \"sk-1234567890\"\r\n    ],\r\n    \"openai\": [\r\n ",
          "created_at": "2024-12-01T16:37:09Z"
        },
        {
          "author": "RockChinQ",
          "body": "跨容器不能用127.0.0.1作为主机名连接。可以去网上看看多个docker容器网络互联的配置方式。",
          "created_at": "2024-12-01T16:40:43Z"
        }
      ]
    },
    {
      "issue_number": 940,
      "title": "[Bug]: 调用引用组件时失败",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\nWindows11 Python 3.10.14\n\n### LangBot 版本\n\nv3.4.0.2\n\n### 异常情况\n\n下述代码在运行时不产生任何结果，也没有报错：\r\n```\r\n    @handler(PersonMessageReceived)\r\n    @handler(GroupMessageReceived)\r\n    async def message_received(self, ctx: EventContext):\r\n        msg = ctx.event.message_chain.get_first(Plain).text\r\n        content = \"抽一张哈罗牌，请输入'哈罗牌 抽卡'\\n通过名字查找一张哈罗牌，请输入'哈罗牌 查看 [牌名]'\\n进行一次完整的挂毯式哈罗占卜，请输入'哈罗牌 占卜 [牌组名/属性名]'\"\r\n        ctx.add_return(\"reply\", [Quote(id=ctx.event.message_chain.message_id, group_id=ctx.event.launcher_id, sender_id=ctx.event.sender_id, target_id=ctx.event.launcher_id, origin=ctx.event.message_chain), content])\r\n        ctx.prevent_default()\r\n```\n\n### 启用的插件\n\n_No response_",
      "state": "open",
      "author": "Garrise",
      "author_type": "User",
      "created_at": "2024-12-01T22:11:40Z",
      "updated_at": "2024-12-01T22:11:40Z",
      "closed_at": null,
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/940/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/940",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/940",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:16.429890",
      "comments": []
    },
    {
      "issue_number": 937,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nYoutubeAnalysis\n\n### 插件代码库地址\n\nhttps://github.com/Garrise/LangBot_Plugin_YoutubeAnalysis\n\n### 插件简介\n\n识别群聊里的YouTube视频链接并返回视频预览内容",
      "state": "closed",
      "author": "Garrise",
      "author_type": "User",
      "created_at": "2024-11-29T20:35:40Z",
      "updated_at": "2024-11-30T12:38:13Z",
      "closed_at": "2024-11-30T12:38:13Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/937/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/937",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/937",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:16.429913",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！已添加到[star集](https://github.com/stars/RockChinQ/lists/qchatgpt-%E6%8F%92%E4%BB%B6)",
          "created_at": "2024-11-30T12:38:13Z"
        }
      ]
    },
    {
      "issue_number": 936,
      "title": "[Bug]: 识别图片的bug？",
      "body": "### 消息平台适配器\r\n\r\naiocqhttp（使用 OneBot 协议接入的）\r\n\r\n### 运行环境\r\n\r\nWindows\r\n\r\n### LangBot 版本\r\n\r\n[bot] 当前版本:  v3.4.0.2\r\n\r\n### 异常情况\r\n\r\n在使用图片功能时会出现异常（发送图片给bot）\r\n```\r\n[11-27 18:01:50.523] chat.py (94) - [ERROR] : 对话(44)请求失败: 模型请求失败: 请求参数错误: Error code: 400 - {'error': {'message': \"* [12].parts[0].data: required oneof field 'data' must have one initialized field\\n  (request id: 20241127180146162454006EwMGL0Vt)\", 'code': 400}}\r\n[11-27 18:01:51.056] controller.py (98) - [ERROR] : 模型请求失败: 请求参数错误: Error code: 400 - {'error': {'message': \"* [12].parts[0].data: required oneof field 'data' must have one initialized field\\n  (request id: 20241127180146162454006EwMGL0Vt)\", 'code': 400}}\r\n```\r\n\r\n复现步骤\r\n1、使用前序叫bot比如ai 、/ai\r\n2、ai后面带上图片 识别失败报错， ai后面带上图片+文本会导致文本吞掉部分如下：\r\n```\r\n[11-27 18:01:21.265] process.py (42) - [INFO] : 处理 group_xxxx 的请求(41): [图片]得见吗\r\n[11-27 18:01:26.498] chat.py (80) - [INFO] : 对话(41)响应: assistant: 唔...不可以的哦...\r\n```\r\n原文应该是图片 看得见吗\r\n3、使用@方法激活AI情况下单独发送图片为正常\r\n\r\n\r\n可能原因\r\n1、\r\n`[Text]: 馄饨喵 | [Image: 240x240] [图片] 932093E1F4B0C73695A0BCD7049E543A.jpg 11283 https://multimedia.nt.qq.com.cn/download?appid=1407&fileid=EhSZIhz98-vQuXjixinEhmBuWuYruhiTWCD_CijV7puIofyJAzIEcHJvZFCAvaMBWhDsu2_QA9ojoXsV1y6IyAWl&rkey=CAQSKDhbt4PfkGhOLY83Nb9lAqhqXhnxnLUCMDrJmpU5ZK95RNc1q6zyzOk`\r\n以上出现报错\r\n2、` [Text]: 馄饨喵 | [Image: 240x240] [图片] 932093E1F4B0C73695A0BCD7049E543A.jpg 11283 https://multimedia.nt.qq.com.cn/download?appid=1407&fileid=EhSZIhz98-vQuXjixinEhmBuWuYruhiTWCD_Cij1kcGzofyJAzIEcHJvZFCAvaMBWhA0mCt8OOdbPLNPhMCMgK2l&rkey=CAESKK4DJFVxjpK-Lfsjd0eks5BMq-hUn6uMO6yyZFxQdRi6gRmQd-Q_zWA | [Text]: 摸摸头`\r\n以上出现报错\r\n3、 ` [Mention]: @XXXXX(XXXXXXXX) | [Text]:   | [Image: 240x240] [图片] 932093E1F4B0C73695A0BCD7049E543A.jpg 11283 https://multimedia.nt.qq.com.cn/download?appid=1407&fileid=EhSZIhz98-vQuXjixinEhmBuWuYruhiTWCD_CiiT283_o_yJAzIEcHJvZFCAvaMBWhDz4XnWS-4T2ZIwU6nL9zXU&rkey=CAESKK4DJFVxjpK-_WyZieDN6BEaQk7f9X6RcX2Je3xfpoRfQTylhWtceks`\r\n正常未报错\r\n4、` [Mention]: @XXXXXXX(XXXXXX) | [Text]:  摸摸头 | [Image: 240x240] [图片] 932093E1F4B0C73695A0BCD7049E543A.jpg 11283 https://multimedia.nt.qq.com.cn/download?appid=1407&fileid=EhSZIhz98-vQuXjixinEhmBuWuYruhiTWCD_Ciii7biOpPyJAzIEcHJvZFCAvaMBWhAg7LDgoQT3fxPYP4AYHEbS&rkey=CAESKK4DJFVxjpK-gfA20tsjC-BX8Hb6MjpSjwtfzY3Y0xbm3RTIMEyPAFc`\r\n未识别图片，文本正常识别\r\n\r\n\r\n### 启用的插件\r\n\r\n为单独测试环境，未启用插件",
      "state": "open",
      "author": "sanxianxiaohuntun",
      "author_type": "User",
      "created_at": "2024-11-27T10:17:20Z",
      "updated_at": "2024-11-27T10:44:09Z",
      "closed_at": null,
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/936/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/936",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/936",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:16.676514",
      "comments": [
        {
          "author": "sanxianxiaohuntun",
          "body": "补充：\r\n1、模型为gemini 1.5 pro\r\n2、使用正则表达后正常`（.*XXXXX.*）`\r\n",
          "created_at": "2024-11-27T10:18:42Z"
        }
      ]
    },
    {
      "issue_number": 935,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nAIDrawing\n\n### 插件代码库地址\n\nhttps://github.com/Hanschase/AIDrawing\n\n### 插件简介\n\n适用于LangBot的AI绘图插件，利用内容函数进行关键词优化，支持后续关键词补充，使用pollinations.ai接口进行AI绘图并自带发送图像的能力，实现自由画图",
      "state": "closed",
      "author": "Hanschase",
      "author_type": "User",
      "created_at": "2024-11-27T08:43:05Z",
      "updated_at": "2024-11-27T08:44:10Z",
      "closed_at": "2024-11-27T08:44:10Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/935/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/935",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/935",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:16.863272",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2024-11-27T08:44:08Z"
        }
      ]
    },
    {
      "issue_number": 926,
      "title": "[Bug]: 内容函数出现 tool: err: 'method' object is not iterable问题",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\nWindows Server 2019，Python 3.11.9\n\n### LangBot 版本\n\nv3.4.0\n\n### 异常情况\n\n[11-19 14:44:37.624] process.py (42) - [INFO] : 处理 group_703541085 的请求(20): 查下最近的新闻\r\n[11-19 14:44:39.303] chat.py (80) - [INFO] : 对话(20)响应: 调用工具: call_n3I8sC767s0hBCJ6ASDwxZkf\r\n[11-19 14:44:45.762] chat.py (80) - [INFO] : 对话(20)响应: tool: err: 'method' object is not iterable\r\n不止是访问网页插件，自己做的内容函数插件也遇到了相同的问题\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "Hanschase",
      "author_type": "User",
      "created_at": "2024-11-19T06:47:39Z",
      "updated_at": "2024-11-22T16:30:32Z",
      "closed_at": "2024-11-22T16:25:52Z",
      "labels": [
        "bug?",
        "m: Tools"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/926/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/926",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/926",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:17.058751",
      "comments": [
        {
          "author": "Okysu",
          "body": "同样出现了这个问题",
          "created_at": "2024-11-22T16:05:29Z"
        },
        {
          "author": "RockChinQ",
          "body": "设置环境变量\r\n`DEBUG=true`\r\n开启调试输出，把报错附近的日志贴上来",
          "created_at": "2024-11-22T16:13:24Z"
        },
        {
          "author": "RockChinQ",
          "body": "v3.4.0.2 已修复。",
          "created_at": "2024-11-22T16:25:52Z"
        }
      ]
    },
    {
      "issue_number": 931,
      "title": "[Feature]: 请求支持Openai和Anthropic的新模型",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n希望可以添加Openai的o1模型和Claude的Haiku3.5模型支持！\r\nbtw我看claude的模型都有一个claude-xxxx-latest的版本可以用，不知道能不能用于自动更新模型",
      "state": "closed",
      "author": "Tigrex-Dai",
      "author_type": "User",
      "created_at": "2024-11-22T08:38:54Z",
      "updated_at": "2024-11-22T14:29:17Z",
      "closed_at": "2024-11-22T14:29:16Z",
      "labels": [
        "m: Provider"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/931/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/931",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/931",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:17.262078",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "已更新，重启即可自动拉取。",
          "created_at": "2024-11-22T14:29:16Z"
        }
      ]
    },
    {
      "issue_number": 824,
      "title": "[Feature]: 加入集成式多接口适配",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\nOne API 需要单独搭建，比较麻烦，而 [LiteLLM](https://github.com/BerriAI/litellm) 框架可以直接以 openai-python 的调用格式访问各个 LLM。",
      "state": "open",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-06-22T04:39:02Z",
      "updated_at": "2024-11-22T12:34:03Z",
      "closed_at": null,
      "labels": [
        "eh: Improve",
        "m: Provider"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/824/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.4",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/824",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/824",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:17.462746",
      "comments": []
    },
    {
      "issue_number": 753,
      "title": "[Bug]: 发送 QQ Poke 表情时 Gemini 模型报错",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 系统环境\n\nwindow10\n\n### Python环境\n\npython10\n\n### QChatGPT版本\n\n3.1.0\n\n### 异常情况\n\n发QQ表情包就请求失败\r\n<img width=\"443\" alt=\"d66d5e70971d755bab59bc39c06282db\" src=\"https://github.com/RockChinQ/QChatGPT/assets/163013919/97550b07-1179-4b5d-b29d-dab4e83a8234\">\r\n\n\n### 日志信息\n\n[2024-04-07 16:09:54.822] C:\\Users\\Administrator\\Desktop\\QQjqr\\QChatGPT-master\\pkg\\pipeline\\process\\handlers\\chat.py (97) - [ERROR] :\r\n    对话(5)请求失败: 模型请求失败: 请求参数错误: Error code: 400 - {'error': {'message': \"* GenerateContentRequest.contents[12].parts[0].data: required oneof field 'data' must have one initialized field\\n (request id: 2024040716102129395394QsCsmrtg) (request id: )\", 'type': '', 'param': '', 'code': 400}}\r\n[2024-04-07 16:09:55.161] C:\\Users\\Administrator\\Desktop\\QQjqr\\QChatGPT-master\\pkg\\pipeline\\controller.py (81) - [ERROR] :\r\n    模型请求失败: 请求参数错误: Error code: 400 - {'error': {'message': \"* GenerateContentRequest.contents[12].parts[0].data: required oneof field 'data' must have one initialized field\\n (request id: 2024040716102129395394QsCsmrtg) (request id: )\", 'type': '', 'param': '', 'code': 400}}\n\n### 启用的插件\n\n_No response_",
      "state": "open",
      "author": "xiaoyu013",
      "author_type": "User",
      "created_at": "2024-04-07T08:12:43Z",
      "updated_at": "2024-11-22T12:34:02Z",
      "closed_at": null,
      "labels": [
        "bug?",
        "m: Provider",
        "pd: Need reproducing"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/753/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/753",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/753",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:17.462766",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "用的什么AI",
          "created_at": "2024-04-07T08:51:49Z"
        },
        {
          "author": "xiaoyu013",
          "body": "gemini-pro",
          "created_at": "2024-04-07T11:47:21Z"
        },
        {
          "author": "RockChinQ",
          "body": "你觉得实现成什么样比较好？",
          "created_at": "2024-05-31T07:47:21Z"
        }
      ]
    },
    {
      "issue_number": 409,
      "title": "[Feature]: 希望可以集成LangChain框架，支持更多复杂场景下的插件API",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n个人觉得既然这个bot是基于GPT的存在而诞生的，相较于老牌的nonebot等，插件上就应该提供更多LLM应用的可能性\r\n\r\nLangChain是目前比较流行的语言模型应用开发框架，关于提示词、记忆、向量化的功能都很好用\r\n\r\n希望可以考虑看看直接将LangChain框架集成进本体或者插件sdk，给其他插件开发者原生提供这些支持\r\n\r\n我也简单写了一个[天气查询插件](https://github.com/lieyanqzu/WeatherPlugin)，算是提供给大家一些在用户感知的一轮对话中进行多次文本处理的思路",
      "state": "open",
      "author": "lieyanqzu",
      "author_type": "User",
      "created_at": "2023-04-11T15:50:34Z",
      "updated_at": "2024-11-22T12:34:01Z",
      "closed_at": null,
      "labels": [
        "eh: Improve",
        "m: Provider",
        "m: Plugins"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/409/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.4",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/409",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/409",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:17.638050",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢建议！将在2.5.0版本重构插件管理",
          "created_at": "2023-04-11T15:52:16Z"
        },
        {
          "author": "cdn0x12",
          "body": "看到消息说longchain库可能有prompt注入风险，添加longchain支持后用户是否需要做额外的安全保护工作？\n\n来源：https://mp.weixin.qq.com/s?__biz=Mzg3MjY5Mzc5Mg==&mid=2247483793&idx=1&sn=4456c7805964af58356b03cb75bb6432#rd",
          "created_at": "2023-04-17T09:53:28Z"
        },
        {
          "author": "lieyanqzu",
          "body": "> 看到消息说longchain库可能有prompt注入风险，添加longchain支持后用户是否需要做额外的安全保护工作？\r\n> \r\n> 来源：https://mp.weixin.qq.com/s?__biz=Mzg3MjY5Mzc5Mg==&mid=2247483793&idx=1&sn=4456c7805964af58356b03cb75bb6432#rd\r\n\r\n据我所知，目前只有[LLM Math](https://python.langchain.com/en/latest/modules/chains/examples/llm_math.html)、[PAL](https://py",
          "created_at": "2023-04-17T10:46:21Z"
        },
        {
          "author": "cdn0x12",
          "body": "> > 看到消息说longchain库可能有prompt注入风险，添加longchain支持后用户是否需要做额外的安全保护工作？\r\n> > 来源：https://mp.weixin.qq.com/s?__biz=Mzg3MjY5Mzc5Mg==&mid=2247483793&idx=1&sn=4456c7805964af58356b03cb75bb6432#rd\r\n> \r\n> 据我所知，目前只有[LLM Math](https://python.langchain.com/en/latest/modules/chains/examples/llm_math.html)、[PAL](https:",
          "created_at": "2023-04-17T11:13:42Z"
        }
      ]
    },
    {
      "issue_number": 827,
      "title": "[Feature]: 实现自有消息组件对象",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n弃用YiriMirai的组件依赖",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-06-26T02:09:27Z",
      "updated_at": "2024-11-22T12:29:29Z",
      "closed_at": "2024-11-22T12:29:29Z",
      "labels": [
        "eh: Improve",
        "m: Platform"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/827/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/827",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/827",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:17.827031",
      "comments": []
    },
    {
      "issue_number": 891,
      "title": "[Feature]: 对于Gemini新功能Function calling的适配",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n近期Google更新了新的功能 Function calling，可以通过调用js来进行一系列操作，比如联网\r\n求适配，这是官方文档：https://ai.google.dev/gemini-api/docs/function-calling\r\n这是隔壁大佬做的一个web search的示例：https://github.com/hihumanzone/Gemini-OpenAI-web-search-function-call",
      "state": "open",
      "author": "AlanBacker",
      "author_type": "User",
      "created_at": "2024-09-26T05:45:00Z",
      "updated_at": "2024-11-22T12:29:16Z",
      "closed_at": null,
      "labels": [
        "pd: Need reproducing",
        "m: Tools"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/891/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/891",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/891",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:17.827044",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "现在 Gemini 只支持用 OneAPI 接入，你试一下在 llm-models.json 给对应模型启用一下 func calling 看看能不能直接用？\r\n\r\n参考：\r\n- https://qchatgpt.rockchin.top/config/metadata/llm-models.html\r\n- https://qchatgpt.rockchin.top/usage/faq.html#q1-%E5%A6%82%E4%BD%95%E6%8E%A5%E5%85%A5-oneapi%E3%80%81linkai-%E7%AD%89%E7%AC%AC%E4%B8%89%E6%96%B9-o",
          "created_at": "2024-09-26T06:04:02Z"
        },
        {
          "author": "AlanBacker",
          "body": "测试了一下开启不了，有点懵，请求一些指引，谢谢。这是我的llm-models.json已经配置好的设置:\r\n        { \r\n            \"model_name\": \"gemini-1.5-pro-002\",\r\n            \"name\": \"OneAPI/gemini-1.5-pro-002\",\r\n            \"tool_call_supported\": true \r\n        },",
          "created_at": "2024-09-26T06:45:10Z"
        }
      ]
    },
    {
      "issue_number": 613,
      "title": "[Feature]: 为群聊中的不同用户的消息添加对应的名字/标签",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n如题，目前来说当bot在一个群聊中运行时，其会将所有群友发送的消息都视作同一个用户来进行对话，那么可否在输入每个群员发送的内容时，于消息前方附加上其个人信息（群名片、QQ号等）呢？这样的话，辅以相应的情景预设，群聊中的对话也许会更有效率一点？",
      "state": "closed",
      "author": "a86296007",
      "author_type": "User",
      "created_at": "2023-11-23T07:08:38Z",
      "updated_at": "2024-11-22T12:27:40Z",
      "closed_at": "2024-11-22T12:27:40Z",
      "labels": [
        "eh: Improve",
        "m: Session"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/613/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "RockChinQ"
      ],
      "milestone": "3.4",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/613",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/613",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:18.045284",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "这个目前无法实现，OpenAI的api不支持自定义role",
          "created_at": "2023-11-24T10:02:34Z"
        },
        {
          "author": "a86296007",
          "body": "> 这个目前无法实现，OpenAI的api不支持自定义role\r\n\r\n直接以文本的形式插入到聊天文字前方也不可以吗？\r\n\r\n举例的话，假如群员 aaaa 说了一句话 bbbbccccdddd，目前来说会直接给AI发送\"bbbbccccdddd\"，但能否将发送的内容变成\"aaaa: bbbbccccdddd\"这样，再使用特定的预设prompt让AI认人呢？",
          "created_at": "2023-11-24T16:35:29Z"
        },
        {
          "author": "a86296007",
          "body": "> 直接以文本的形式插入到聊天文字前方也不可以吗？\r\n\r\n仔细想了想，感觉可以做成一个插件",
          "created_at": "2023-11-24T16:36:53Z"
        },
        {
          "author": "RockChinQ",
          "body": "这个做不了，因为主流的AI接口都不支持区分用户，需要prompt工程，可以自己写个插件实现一下。",
          "created_at": "2024-11-22T12:27:40Z"
        }
      ]
    },
    {
      "issue_number": 715,
      "title": "[Feature]: URL 打码功能",
      "body": "### 这是一个？\r\n\r\n新功能\r\n\r\n### 详细描述\r\n\r\n为了规避腾讯机器人url not allowed的报错，防止回答被拦截，希望可以检测返回消息中的url并打码。\r\n例如：https://github.com/ ，改为：https冒号//github点com/ （仅供参考）",
      "state": "closed",
      "author": "Yuumi0221",
      "author_type": "User",
      "created_at": "2024-03-11T05:39:49Z",
      "updated_at": "2024-11-22T12:25:41Z",
      "closed_at": "2024-11-22T12:25:41Z",
      "labels": [
        "eh: Improve",
        "IM: qq-botpy"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/715/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/715",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/715",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:18.274810",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "这个用插件实现吧。",
          "created_at": "2024-11-22T12:25:41Z"
        }
      ]
    },
    {
      "issue_number": 783,
      "title": "[Feature]: 运行器扩展性",
      "body": "### 这是一个？\r\n\r\n新功能\r\n\r\n### 详细描述\r\n\r\n解藕目前的运行器，允许用户扩展\r\n\r\n相关issue：#409",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-05-17T09:12:53Z",
      "updated_at": "2024-11-22T12:23:48Z",
      "closed_at": "2024-11-22T12:23:48Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/783/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.4",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/783",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/783",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:18.448500",
      "comments": []
    },
    {
      "issue_number": 698,
      "title": "[Feature]: 强烈建议把!reload命令加回来",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n3.0版本，!reload插件热加载的功能去掉了，\r\n插件修改后（用户自己开发插件或者动态修改config等文件代码）每次都要重启整个项目，对于服务器上后台挂项目的情况很不友好。",
      "state": "closed",
      "author": "touyamakaze",
      "author_type": "User",
      "created_at": "2024-02-23T09:57:03Z",
      "updated_at": "2024-11-22T12:20:16Z",
      "closed_at": "2024-11-22T12:20:15Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/698/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "RockChinQ"
      ],
      "milestone": "3.4",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/698",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/698",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:18.448518",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "3.4.0 热重载随着webui回来了：https://docs.langbot.app/webui/system.html#%E7%83%AD%E9%87%8D%E8%BD%BD",
          "created_at": "2024-11-22T12:20:15Z"
        }
      ]
    },
    {
      "issue_number": 923,
      "title": "[Bug]: 修复控制台日志输出emoji时报错",
      "body": "### 消息平台适配器\n\nNone\n\n### 运行环境\n\nWin\n\n### LangBot 版本\n\nv3.4\n\n### 异常情况\n\n```\r\n[11-17 22:03:24.741] app.py (170) - [INFO] : 🤯 WebUI 仍处于 Beta 测试阶段，如有问题或建议请反馈到 https://github.com/RockChinQ/LangBot/issues\r\n--- Logging error ---\r\nTraceback (most recent call last):\r\n  File \"C:\\Python310\\lib\\logging\\__init__.py\", line 1103, in emit\r\n    stream.write(msg + self.terminator)\r\nUnicodeEncodeError: 'gbk' codec can't encode character '\\U0001f92f' in position 50: illegal multibyte sequence\r\nCall stack:\r\n  File \"F:\\langbot-v3.4.0-all\\main.py\", line 83, in <module>\r\n    loop.run_until_complete(main_entry(loop))\r\n  File \"C:\\Python310\\lib\\asyncio\\base_events.py\", line 636, in run_until_complete\r\n    self.run_forever()\r\n  File \"C:\\Python310\\lib\\asyncio\\windows_events.py\", line 321, in run_forever\r\n    super().run_forever()\r\n  File \"C:\\Python310\\lib\\asyncio\\base_events.py\", line 603, in run_forever\r\n    self._run_once()\r\n  File \"C:\\Python310\\lib\\asyncio\\base_events.py\", line 1906, in _run_once\r\n    handle._run()\r\n  File \"C:\\Python310\\lib\\asyncio\\events.py\", line 80, in _run\r\n    self._context.run(self._callback, *self._args)\r\n  File \"F:\\langbot-v3.4.0-all\\main.py\", line 53, in main_entry\r\n    await boot.main(loop)\r\n  File \"F:\\langbot-v3.4.0-all\\pkg\\core\\boot.py\", line 67, in main\r\n    await app_inst.run()\r\n  File \"F:\\langbot-v3.4.0-all\\pkg\\core\\app.py\", line 131, in run\r\n    await self.print_web_access_info()\r\n  File \"F:\\langbot-v3.4.0-all\\pkg\\core\\app.py\", line 170, in print_web_access_info\r\n    self.logger.info(line)\r\nMessage: '🤯 WebUI 仍处于 Beta 测试阶段，如有问题或建议请反馈到 https://github.com/RockChinQ/LangBot/issues'\r\nArguments: ()\r\n[11-17 22:03:24.742] app.py (170) - [INFO] : =======================================\r\n```\r\n\r\n修改建议？\r\n修改后的 pkg/core/bootutils/log.py\r\n```\r\nimport logging\r\nimport os\r\nimport sys\r\nimport time\r\n\r\nimport colorlog\r\n\r\nfrom ...utils import constants\r\n\r\n\r\nlog_colors_config = {\r\n    \"DEBUG\": \"green\",  # cyan white\r\n    \"INFO\": \"white\",\r\n    \"WARNING\": \"yellow\",\r\n    \"ERROR\": \"red\",\r\n    \"CRITICAL\": \"cyan\",\r\n}\r\n\r\n\r\nasync def init_logging(extra_handlers: list[logging.Handler] = None) -> logging.Logger:\r\n    # 删除所有现有的logger\r\n    for handler in logging.root.handlers[:]:\r\n        logging.root.removeHandler(handler)\r\n\r\n    level = logging.INFO\r\n\r\n    if constants.debug_mode:\r\n        level = logging.DEBUG\r\n\r\n    log_file_name = \"data/logs/langbot-%s.log\" % time.strftime(\r\n        \"%Y-%m-%d\", time.localtime()\r\n    )\r\n\r\n    qcg_logger = logging.getLogger(\"qcg\")\r\n\r\n    qcg_logger.setLevel(level)\r\n\r\n    color_formatter = colorlog.ColoredFormatter(\r\n        fmt=\"%(log_color)s[%(asctime)s.%(msecs)03d] %(filename)s (%(lineno)d) - [%(levelname)s] : %(message)s\",\r\n        datefmt=\"%m-%d %H:%M:%S\",\r\n        log_colors=log_colors_config,\r\n    )\r\n\r\n    stream_handler = logging.StreamHandler(sys.stdout)\r\n    stream_handler.setLevel(level)\r\n    stream_handler.setFormatter(color_formatter)\r\n    stream_handler.stream = open(sys.stdout.fileno(), mode='w', encoding='utf-8', buffering=1)\r\n\r\n    log_handlers: list[logging.Handler] = [stream_handler, logging.FileHandler(log_file_name, encoding='utf-8')]\r\n    log_handlers += extra_handlers if extra_handlers is not None else []\r\n\r\n    for handler in log_handlers:\r\n        handler.setLevel(level)\r\n        handler.setFormatter(color_formatter)\r\n        qcg_logger.addHandler(handler)\r\n\r\n    qcg_logger.debug(\"日志初始化完成，日志级别：%s\" % level)\r\n    logging.basicConfig(\r\n        level=logging.CRITICAL,  # 设置日志输出格式\r\n        format=\"[DEPR][%(asctime)s.%(msecs)03d] %(pathname)s (%(lineno)d) - [%(levelname)s] :\\n%(message)s\",\r\n        # 日志输出的格式\r\n        # -8表示占位符，让输出左对齐，输出长度都为8位\r\n        datefmt=\"%Y-%m-%d %H:%M:%S\",  # 时间输出的格式\r\n        handlers=[logging.NullHandler()],\r\n    )\r\n\r\n    return qcg_logger\r\n\r\n```\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "the-lazy-me",
      "author_type": "User",
      "created_at": "2024-11-17T14:09:42Z",
      "updated_at": "2024-11-19T11:36:18Z",
      "closed_at": "2024-11-19T11:36:18Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/923/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/923",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/923",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:18.612631",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "你pr一下吧，我已经躺床上了。",
          "created_at": "2024-11-17T14:11:20Z"
        },
        {
          "author": "the-lazy-me",
          "body": "我再看看别的，似乎消息适配器配置页有bug，默认情况下，这些点不动（包括其他的），不能修改内容\r\n![image](https://github.com/user-attachments/assets/1612eb98-2d6a-4529-b3fb-47ff26004a4e)\r\n",
          "created_at": "2024-11-17T14:13:47Z"
        },
        {
          "author": "RockChinQ",
          "body": "已修复。编辑消息平台适配器那里，要点击折叠面板右上角一个笔的按钮才能编辑。",
          "created_at": "2024-11-19T11:36:18Z"
        }
      ]
    },
    {
      "issue_number": 925,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nBiliAnalysis\n\n### 插件代码库地址\n\nhttps://github.com/Hanschase/BiliAnalysis\n\n### 插件简介\n\n适用于LangBot的B站视频链接解析插件，对B站链接进行分析并发送封面，标题，作者，等内容",
      "state": "closed",
      "author": "Hanschase",
      "author_type": "User",
      "created_at": "2024-11-18T09:48:03Z",
      "updated_at": "2024-11-18T12:21:36Z",
      "closed_at": "2024-11-18T12:21:35Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/925/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/925",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/925",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:18.828202",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！已添加到[Star集](https://github.com/stars/RockChinQ/lists/qchatgpt-%E6%8F%92%E4%BB%B6)",
          "created_at": "2024-11-18T12:21:35Z"
        }
      ]
    },
    {
      "issue_number": 897,
      "title": "[Bug]: 处理事件 GroupMessageReceived 时发生错误: 'NoneType' object has no attribute 'adapter'",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\nWindows Server 2019，Python 3.11.9\n\n### QChatGPT版本\n\nv3.3.1.0\n\n### 异常情况\n\n问题：测试GroupNormalMessageReceived能正常运行，测试GroupMessageReceived时log正常发送信息，但似乎在send_message报错\r\n![image](https://github.com/user-attachments/assets/acdca653-20ec-4f55-9d95-2187d1a366ce)\r\n![image](https://github.com/user-attachments/assets/6f60d5c0-d343-4241-8115-30a0e5b46c53)\r\n\r\n代码为：\r\n    \r\n    @handler(GroupMessageReceived)\r\n    async def __(self, ctx:EventContext):\r\n        text = str(ctx.event.message_chain).strip()\r\n        if text == \"Test\":\r\n            ctx.prevent_default()\r\n            ctx.prevent_postorder()\r\n            self.ap.logger.info(f\"Test,{ctx.event.launcher_type}_{ctx.event.launcher_id}[ID]{ctx.event.sender_id}:{text}\")\r\n            await ctx.send_message(ctx.event.launcher_type, str(ctx.event.launcher_id),\r\n                                   MessageChain([At(int(ctx.event.sender_id)), \"YES!\"]))\r\n\r\n    @handler(GroupNormalMessageReceived)\r\n    async def ___(self, ctx:EventContext):\r\n        text = ctx.event.text_message\r\n        if text == \"Test\":\r\n            ctx.prevent_default()\r\n            ctx.prevent_postorder()\r\n            self.ap.logger.info(f\"NormalTest,{ctx.event.launcher_type}_{ctx.event.launcher_id}[ID]{ctx.event.sender_id}:{text}\")\r\n            await ctx.send_message(ctx.event.launcher_type, str(ctx.event.launcher_id),\r\n                                   MessageChain([At(int(ctx.event.sender_id)), \"Normal YES!\"]))\r\n                                   \r\n日志信息：\r\n\u001b[37m[2024-10-09 14:26:24.766] C:\\Users\\Administrator\\QChatGPT\\pkg\\platform\\manager.py (108) - [INFO] :\r\n    初始化平台适配器 0: aiocqhttp\u001b[0m\r\n\u001b[37m[2024-10-09 14:26:27.300] C:\\Users\\Administrator\\QChatGPT\\pkg\\core\\stages\\show_notes.py (26) - [INFO] :\r\n    您正在使用 Windows 系统，若窗口左上角显示处于”选择“模式，程序将被暂停运行，此时请右键窗口中空白区域退出选择模式。\u001b[0m\r\n\u001b[37m[2024-10-09 14:26:35.854] C:\\Users\\Administrator\\QChatGPT\\plugins\\SysStatPlugin\\main.py (63) - [INFO] :\r\n    Test,group_703541085[ID]1900487324:Test\u001b[0m\r\n\u001b[31m[2024-10-09 14:26:35.855] C:\\Users\\Administrator\\QChatGPT\\pkg\\plugin\\manager.py (153) - [ERROR] :\r\n    插件 SysStat 处理事件 GroupMessageReceived 时发生错误: 'NoneType' object has no attribute 'adapter'\u001b[0m\r\n\u001b[37m[2024-10-09 14:26:44.723] C:\\Users\\Administrator\\QChatGPT\\pkg\\pipeline\\process\\process.py (42) - [INFO] :\r\n    处理 group_703541085 的请求(0): Test\u001b[0m\r\n\u001b[37m[2024-10-09 14:26:44.724] C:\\Users\\Administrator\\QChatGPT\\plugins\\SysStatPlugin\\main.py (75) - [INFO] :\r\n    NormalTest,group_703541085[ID]1900487324:Test\u001b[0m\n\n### 启用的插件\n\n[bot] 所有插件(5):\r\n\r\n#1 SysStat \r\n查看系统状态(原作者：RockChinQ，Hanschase修改版)\r\nv0.1\r\n作者: RockChinQ\r\n\r\n#2 BiliAnalysis \r\n当收到B站视频链接时，对B站链接进行分析并发送封面，标题，作者，等内容\r\nv0.2\r\n作者: Hanschase\r\n\r\n#3 DailyRegisterPlugin \r\n提供签到和随机加成好感度的功能\r\nv0.1\r\n作者: Hanshchase\r\n\r\n#4 GiveMeSetuPlugin \r\n功能正如其名，让她给，她不得不给！\r\nv0.1\r\n作者: Hanschase\r\n\r\n#5 Webwlkr \r\n基于GPT的函数调用能力，为QChatGPT提供联网功能\r\nv0.1.1\r\n作者: RockChinQ\r\n",
      "state": "closed",
      "author": "Hanschase",
      "author_type": "User",
      "created_at": "2024-10-09T06:44:52Z",
      "updated_at": "2024-11-18T09:12:56Z",
      "closed_at": "2024-11-18T09:12:56Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/897/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/897",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/897",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:19.093683",
      "comments": [
        {
          "author": "Hanschase",
          "body": "3.4.0版本问题已解决",
          "created_at": "2024-11-18T09:12:54Z"
        }
      ]
    },
    {
      "issue_number": 895,
      "title": "[Bug]:python3.9中typing库的 | 操作符不支持",
      "body": "### 消息平台适配器\n\nNakuru（go-cqhttp）\n\n### 运行环境\n\nUbuntu python3.9.12\n\n### QChatGPT版本\n\nv3.3.1\n\n### 异常情况\n\npython3.9，typing库的 | 操作符不支持\r\n报错TypeError: unsupported operand type(s) for |: '_UnionGenericAlias' and '_UnionGenericAlias'\r\n\r\nQChatGPT-3.3.1.1/pkg/provider/entities.py中：\r\ncontent: typing.Optional[list[ContentElement]] | typing.Optional[str] = None\r\n\r\nQChatGPT-3.3.1.1/pkg/core/entities.py中：\r\nresp_messages: typing.Optional[list[llm_entities.Message]] | typing.Optional[list[mirai.MessageChain]] = []\r\n\r\n用typing.Union改写后正常运行\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "setwhite",
      "author_type": "User",
      "created_at": "2024-10-07T11:41:20Z",
      "updated_at": "2024-11-18T02:21:19Z",
      "closed_at": "2024-11-18T02:21:11Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/895/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/895",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/895",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:19.278596",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "现在不支持3.9了，最低要求python 3.10.1。",
          "created_at": "2024-11-18T02:21:11Z"
        }
      ]
    },
    {
      "issue_number": 918,
      "title": "[Bug]: 疑似权限不足无法启动",
      "body": "### 消息平台适配器\n\nNone\n\n### 运行环境\n\nWindows11 python3.10.14 in miniconda 主机上海\n\n### QChatGPT版本\n\n3.3.0 release\n\n### 异常情况\n\nQChat端报错：\r\n[2024-11-11 01:23:47.861] D:\\AI\\qqgpt\\QChatGPT-3.3.1.1\\pkg\\core\\stages\\show_notes.py (26) - [INFO] :\r\n    您正在使用 Windows 系统，若窗口左上角显示处于”选择“模式，程序将被暂停运行，此时请右键窗口中空白区域退出选择模式。\r\n[2024-11-11 01:23:47.862] D:\\AI\\qqgpt\\QChatGPT-3.3.1.1\\pkg\\platform\\manager.py (174) - [ERROR] :\r\n    平台适配器运行出错: [WinError 10013] 以一种访问权限不允许的方式做了一个访问套接字的尝试。\r\n\r\nLagrange部署报错：\r\n\r\nwarn: Lagrange.OneBot.Core.Network.Service.ReverseWSService[1001]\r\n      [ReverseWSService] Disconnect(fc651244-5c59-4326-8c70-324953c1f52c)\r\n      System.Net.WebSockets.WebSocketException (0x80004005): The server returned status code '500' when status code '101' was expected.\r\n         at System.Net.WebSockets.WebSocketHandle.ValidateResponse(HttpResponseMessage response\r\n, String secValue)\r\n         at System.Net.WebSockets.WebSocketHandle.ConnectAsync(Uri uri, HttpMessageInvoker invoker, CancellationToken cancellationToken, ClientWebSocketOptions options)\r\n         at System.Net.WebSockets.ClientWebSocket.ConnectAsyncCore(Uri uri, HttpMessageInvoker invoker, CancellationToken cancellationToken)\r\n         at Lagrange.OneBot.Core.Network.Service.ReverseWSService.ExecuteAsync(CancellationToken stoppingToken)\r\n\r\nQchat报错并停止，lagrange重复上述报错\r\n尝试了一些办法无法解决，搜索得知是权限相关\r\n\r\n\n\n### 启用的插件\n\n/",
      "state": "closed",
      "author": "catoxide",
      "author_type": "User",
      "created_at": "2024-11-10T17:30:08Z",
      "updated_at": "2024-11-16T12:05:19Z",
      "closed_at": "2024-11-16T12:05:19Z",
      "labels": [
        "bug?",
        "Stale"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/918/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/918",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/918",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:19.463496",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "看看你platform.json咋配置的",
          "created_at": "2024-11-10T23:51:01Z"
        },
        {
          "author": "catoxide",
          "body": "> 看看你platform.json咋配置的\r\n\r\n{\r\n    \"platform-adapters\": [\r\n        {\r\n            \"adapter\": \"yiri-mirai\",\r\n            \"enable\": false,\r\n            \"host\": \"127.0.0.1\",\r\n            \"port\": 8080,\r\n            \"verifyKey\": \"yirimirai\",\r\n            \"qq\": 123456789\r\n        },\r\n        {\r\n            ",
          "created_at": "2024-11-11T13:39:55Z"
        },
        {
          "author": "RockChinQ",
          "body": "你的 8080 端口被其他程序占用了，https://www.cnblogs.com/ck-zscs/p/16053551.html 。把你 aiocqhttp 那个配置的端口改一下，换成 8081 8082 之类的，同时 lagrange 配置文件的端口也改一下。",
          "created_at": "2024-11-12T07:33:45Z"
        },
        {
          "author": "catoxide",
          "body": "> 你的 8080 端口被其他程序占用了，https://www.cnblogs.com/ck-zscs/p/16053551.html 。把你 aiocqhttp 那个配置的端口改一下，换成 8081 8082 之类的，同时 lagrange 配置文件的端口也改一下。\r\n\r\n啊啊 是的是的 能用了（）最近在干别的所以忘记回了（）感谢（）",
          "created_at": "2024-11-15T22:36:57Z"
        }
      ]
    },
    {
      "issue_number": 919,
      "title": "[Bug]: 使用napcat,在qq群里@机器人回复Model not found or too long input. Or any other error (xD)",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\npy310\n\n### QChatGPT版本\n\n3.3.0最新\n\n### 异常情况\n\n群聊@机器人回复Model not found or too long input. Or any other error (xD)，而且set命令提示 没有权限\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "xupeng19881010",
      "author_type": "User",
      "created_at": "2024-11-12T06:35:55Z",
      "updated_at": "2024-11-13T06:52:36Z",
      "closed_at": "2024-11-13T06:52:03Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/919/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/919",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/919",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:19.677519",
      "comments": [
        {
          "author": "xupeng19881010",
          "body": "私聊机器人没有问题",
          "created_at": "2024-11-12T06:36:41Z"
        },
        {
          "author": "xupeng19881010",
          "body": "已找到问题，比关闭",
          "created_at": "2024-11-13T06:52:36Z"
        }
      ]
    },
    {
      "issue_number": 915,
      "title": "[Bug]: 使用gemini-pro会有几率出现报错",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\ndocker\n\n### QChatGPT版本\n\nv3.3.1.1\n\n### 异常情况\n\n[2024-11-04 10:13:55.629] /app/pkg/pipeline/process/process.py (42) - [INFO] :\r\n    处理 group_433350051 的请求(768): 你怎么了\r\n[2024-11-04 10:13:55.914] /app/pkg/pipeline/process/handlers/chat.py (93) - [ERROR] :\r\n    对话(768)请求失败: 模型请求失败: 请求参数错误: Error code: 400 - {'error': {'message': \"* GenerateContentRequest.contents[13].parts[0].data: required one1104181355675651939fRTDotSd)\", 'type': '', 'param': '', 'code': 400}}\r\n[2024-11-04 10:13:56.304] /app/pkg/pipeline/controller.py (94) - [ERROR] :\r\n    模型请求失败: 请求参数错误: Error code: 400 - {'error': {'message': \"* GenerateContentRequest.contents[13].parts[0].data: required oneof field 'data' musfRTDotSd)\", 'type': '', 'param': '', 'code': 400}}\r\n[2024-11-04 10:14:43.697] /app/pkg/pipeline/process/process.py (42) - [INFO] :\r\n    处理 group_433350051 的请求(774): 你这个月电费200块钱\r\n[2024-11-04 10:14:44.036] /app/pkg/pipeline/process/handlers/chat.py (93) - [ERROR] :\r\n    对话(774)请求失败: 模型请求失败: 请求参数错误: Error code: 400 - {'error': {'message': \"* GenerateContentRequest.contents[13].parts[0].data: required one1104181443796336689Vzp9yqAC)\", 'type': '', 'param': '', 'code': 400}}\r\n[2024-11-04 10:14:44.463] /app/pkg/pipeline/controller.py (94) - [ERROR] :\r\n    模型请求失败: 请求参数错误: Error code: 400 - {'error': {'message': \"* GenerateContentRequest.contents[13].parts[0].data: required oneof field 'data' musVzp9yqAC)\", 'type': '', 'param': '', 'code': 400}}\r\n\n\n### 启用的插件\n\n未启用",
      "state": "closed",
      "author": "Mgrsc",
      "author_type": "User",
      "created_at": "2024-11-04T10:34:13Z",
      "updated_at": "2024-11-09T05:27:50Z",
      "closed_at": "2024-11-09T05:27:50Z",
      "labels": [
        "bug?",
        "pd: Need reproducing"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/915/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/915",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/915",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:19.912540",
      "comments": [
        {
          "author": "the-lazy-me",
          "body": "一个临时解决方案？\n修改provider.json，这是默认预设，下为文档示例\n\n\"prompt-mode\": \"normal\",\n\"prompt\": {\n    \"default\": \"如果用户之后想获取帮助，请你说”输入!help获取帮助“。\" \n}",
          "created_at": "2024-11-05T09:42:12Z"
        }
      ]
    },
    {
      "issue_number": 913,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nXiaocxPlugin\n\n### 插件代码库地址\n\nhttps://github.com/sanxianxiaohuntun/XiaocxPlugin\n\n### 插件简介\n\n一个QChatGPT的小插件\r\n\r\n一个小程序运行插件可以让gpt帮你写一些简单的小功能py然后丢进QChatGPT\\plugins\\XiaocxPlugin\\data\\里就可以执行小程序，里面我已经丢了几个文件了 只需要/py文件名比如 天气.py 你就/天气它就会执行这个小程序\r\n![1](https://github.com/user-attachments/assets/cfacc80a-7c32-4faf-b556-341801e28228)\r\n![QQ截图20241026000430](https://github.com/user-attachments/assets/37966dc5-c3e4-46f4-92e8-9ee76691ad45)\r\n",
      "state": "closed",
      "author": "sanxianxiaohuntun",
      "author_type": "User",
      "created_at": "2024-10-25T16:15:40Z",
      "updated_at": "2024-10-27T07:01:38Z",
      "closed_at": "2024-10-27T07:01:37Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/913/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/913",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/913",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:20.142709",
      "comments": [
        {
          "author": "sanxianxiaohuntun",
          "body": "注意 只需把py丢进data里然后直接/py名字无需加.py后续 即可测试 完全不用重启主程序",
          "created_at": "2024-10-25T16:21:11Z"
        },
        {
          "author": "RockChinQ",
          "body": "非常好插件，感谢贡献！已加入 [star集](https://github.com/stars/RockChinQ/lists/qchatgpt-%E6%8F%92%E4%BB%B6)",
          "created_at": "2024-10-27T07:01:37Z"
        }
      ]
    },
    {
      "issue_number": 910,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nImageSearchPlugin\n\n### 插件代码库地址\n\nhttps://github.com/BiFangKNT/QChatGPT_ImageSearchPlugin\n\n### 插件简介\n\n使用识图网站搜索图片来源",
      "state": "closed",
      "author": "BiFangKNT",
      "author_type": "User",
      "created_at": "2024-10-21T22:47:37Z",
      "updated_at": "2024-10-22T07:48:05Z",
      "closed_at": "2024-10-22T07:48:05Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/910/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/910",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/910",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:20.348102",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！\r\n\r\n我觉得应该尽快做一个插件市场。",
          "created_at": "2024-10-22T07:47:59Z"
        }
      ]
    },
    {
      "issue_number": 909,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\r\n\r\nElysianRealmAssistant\r\n\r\n### 插件代码库地址\r\n\r\nhttps://github.com/BiFangKNT/QChatGPT_ElysianRealmAssistant\r\n\r\n### 插件简介\r\n\r\n崩坏3往世乐土攻略助手",
      "state": "closed",
      "author": "BiFangKNT",
      "author_type": "User",
      "created_at": "2024-10-21T00:14:31Z",
      "updated_at": "2024-10-21T03:45:23Z",
      "closed_at": "2024-10-21T03:44:45Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/909/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/909",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/909",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:20.502669",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！均已加入[Star集](https://github.com/stars/RockChinQ/lists/qchatgpt-%E6%8F%92%E4%BB%B6)。",
          "created_at": "2024-10-21T03:45:23Z"
        }
      ]
    },
    {
      "issue_number": 908,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nAntiHotlinkImageFetcher\n\n### 插件代码库地址\n\nhttps://github.com/BiFangKNT/QChatGPT_AntiHotlinkImageFetcher\n\n### 插件简介\n\n根据关键词输入，自动处理防盗链图片链接，转为图片输出",
      "state": "closed",
      "author": "BiFangKNT",
      "author_type": "User",
      "created_at": "2024-10-21T00:13:52Z",
      "updated_at": "2024-10-21T03:44:45Z",
      "closed_at": "2024-10-21T03:44:45Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/908/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/908",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/908",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:20.686430",
      "comments": []
    },
    {
      "issue_number": 901,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nBreminderPlugin\n\n### 插件代码库地址\n\nhttps://github.com/Hanschase/BreminderPlugin\n\n### 插件简介\n\n适用于QChatGPT的B站直播间订阅推送，可以申请或取消B站直播间的开播推送",
      "state": "closed",
      "author": "Hanschase",
      "author_type": "User",
      "created_at": "2024-10-14T02:28:56Z",
      "updated_at": "2024-10-17T08:08:40Z",
      "closed_at": "2024-10-17T08:08:40Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/901/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/901",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/901",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:20.686445",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！已添加到[star集](https://github.com/stars/RockChinQ/lists/qchatgpt-%E6%8F%92%E4%BB%B6)",
          "created_at": "2024-10-17T08:08:40Z"
        }
      ]
    },
    {
      "issue_number": 903,
      "title": "[Bug]: python3.14启动报错",
      "body": "### 消息平台适配器\n\nNone\n\n### 运行环境\n\nCentOS 7.6 64位\n\n### QChatGPT版本\n\nv3.3.1.1\n\n### 异常情况\n\n2024.10.16 刚pull的版本, 其实之前也有\r\n启动时报错, 无法启动\r\n\r\npython3 main.py \r\n\r\n  ___   ___ _         _    ___ ___ _____ \r\n / _ \\ / __| |_  __ _| |_ / __| _ \\_   _|\r\n| (_) | (__| ' \\/ _` |  _| (_ |  _/ | |  \r\n \\__\\_\\\\___|_||_\\__,_|\\__|\\___|_|   |_|  \r\n\r\n⭐️开源地址: https://github.com/RockChinQ/QChatGPT\r\n📖文档地址: https://q.rkcn.top\r\n\r\nTraceback (most recent call last):\r\n  File \"/root/work/QChatGPT/main.py\", line 72, in <module>\r\n    asyncio.run(main_entry())\r\n    ~~~~~~~~~~~^^^^^^^^^^^^^^\r\n  File \"/usr/python/lib/python3.14/asyncio/runners.py\", line 194, in run\r\n    return runner.run(main)\r\n           ~~~~~~~~~~^^^^^^\r\n  File \"/usr/python/lib/python3.14/asyncio/runners.py\", line 118, in run\r\n    return self._loop.run_until_complete(task)\r\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\r\n  File \"/usr/python/lib/python3.14/asyncio/base_events.py\", line 721, in run_until_complete\r\n    return future.result()\r\n           ~~~~~~~~~~~~~^^\r\n  File \"/root/work/QChatGPT/main.py\", line 25, in main_entry\r\n    missing_deps = await deps.check_deps()\r\n                   ^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/root/work/QChatGPT/pkg/core/bootutils/deps.py\", line 28, in check_deps\r\n    __import__(dep)\r\n    ~~~~~~~~~~^^^^^\r\n  File \"/usr/python/lib/python3.14/site-packages/mirai/__init__.py\", line 22, in <module>\r\n    from mirai.bot import (\r\n        LifeSpan, Mirai, MiraiRunner, Shutdown, SimpleMirai, Startup\r\n    )\r\n  File \"/usr/python/lib/python3.14/site-packages/mirai/bot.py\", line 13, in <module>\r\n    import mirai.models.api\r\n  File \"/usr/python/lib/python3.14/site-packages/mirai/models/__init__.py\", line 10, in <module>\r\n    from mirai.models.bus import ModelEventBus\r\n  File \"/usr/python/lib/python3.14/site-packages/mirai/models/bus.py\", line 12, in <module>\r\n    from mirai.models.events import Event\r\n  File \"/usr/python/lib/python3.14/site-packages/mirai/models/events.py\", line 21, in <module>\r\n    from mirai.models.message import MessageChain\r\n  File \"/usr/python/lib/python3.14/site-packages/mirai/models/message.py\", line 116, in <module>\r\n    class MessageChain(MiraiBaseModel):\r\n    ...<549 lines>...\r\n            return source.id if source else -1\r\n  File \"/usr/python/lib/python3.14/site-packages/pydantic/main.py\", line 241, in __new__\r\n    vg.check_for_unused()\r\n    ~~~~~~~~~~~~~~~~~~~^^\r\n  File \"/usr/python/lib/python3.14/site-packages/pydantic/class_validators.py\", line 189, in check_for_unused\r\n    raise ConfigError(\r\n    ...<2 lines>...\r\n    )\r\npydantic.errors.ConfigError: Validators defined with incorrect fields: _parse_component (use check_fields=False if you're inheriting from the model and intended this)\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "yunnis",
      "author_type": "User",
      "created_at": "2024-10-16T03:37:40Z",
      "updated_at": "2024-10-16T03:49:58Z",
      "closed_at": "2024-10-16T03:49:57Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/903/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/903",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/903",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:20.868921",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "换成Python 3.12",
          "created_at": "2024-10-16T03:47:47Z"
        },
        {
          "author": "yunnis",
          "body": "收到, 好快的回",
          "created_at": "2024-10-16T03:49:57Z"
        }
      ]
    },
    {
      "issue_number": 896,
      "title": "[Bug]: 启动失败",
      "body": "### 消息平台适配器\r\n\r\naiocqhttp（使用 OneBot 协议接入的）\r\n\r\n### 运行环境\r\n\r\nWindows10 ltsc2019 python3.11\r\n\r\n### QChatGPT版本\r\n\r\n3.3.1.1\r\n\r\n### 异常情况\r\n\r\n启动报错\r\nTraceback (most recent call last):\r\n  File \"D:\\chatbot\\449----56\\QChatGPT-3.3.1.1\\pkg\\core\\boot.py\", line 43, in main\r\n    app_inst = await make_app()\r\n               ^^^^^^^^^^^^^^^^\r\n  File \"D:\\chatbot\\449----56\\QChatGPT-3.3.1.1\\pkg\\core\\boot.py\", line 34, in make_app\r\n    await stage_inst.run(ap)\r\n  File \"D:\\chatbot\\449----56\\QChatGPT-3.3.1.1\\pkg\\core\\stages\\load_config.py\", line 19, in run\r\n    ap.system_cfg = await config.load_json_config(\"data/config/system.json\", \"templates/system.json\", completion=False)\r\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"D:\\chatbot\\449----56\\QChatGPT-3.3.1.1\\pkg\\config\\manager.py\", line 71, in load_json_config\r\n    await cfg_mgr.load_config(completion=completion)\r\n  File \"D:\\chatbot\\449----56\\QChatGPT-3.3.1.1\\pkg\\config\\manager.py\", line 24, in load_config\r\n    self.data = await self.file.load(completion=completion)\r\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"D:\\chatbot\\449----56\\QChatGPT-3.3.1.1\\pkg\\config\\impls\\json.py\", line 41, in load\r\n    cfg = json.load(f)\r\n          ^^^^^^^^^^^^\r\n  File \"C:\\Users\\Admin\\miniconda3\\Lib\\json\\__init__.py\", line 293, in load\r\n    return loads(fp.read(),\r\n                 ^^^^^^^^^\r\n  File \"<frozen codecs>\", line 322, in decode\r\nUnicodeDecodeError: 'utf-8' codec can't decode bytes in position 399-400: invalid continuation byte\r\n\r\n### 启用的插件\r\n\r\n无",
      "state": "closed",
      "author": "bobandbrony",
      "author_type": "User",
      "created_at": "2024-10-08T17:31:39Z",
      "updated_at": "2024-10-08T18:29:44Z",
      "closed_at": "2024-10-08T18:29:44Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/896/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/896",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/896",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:21.032434",
      "comments": []
    },
    {
      "issue_number": 894,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nQQ音乐插件\n\n### 插件代码库地址\n\nhttps://github.com/wcwq98/ChatGPT_Plugin_QQMusic\n\n### 插件简介\n\n搜索QQ音乐转成语音后可在线播放",
      "state": "closed",
      "author": "wcwq98",
      "author_type": "User",
      "created_at": "2024-10-02T12:15:04Z",
      "updated_at": "2024-10-03T16:23:46Z",
      "closed_at": "2024-10-03T16:23:46Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/894/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/894",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/894",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:21.032451",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2024-10-03T16:23:46Z"
        }
      ]
    },
    {
      "issue_number": 893,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nQChatGPT_Plugin_Dynamic_Bilibili\n\n### 插件代码库地址\n\nhttps://github.com/zzseki/QChatGPT_Plugin_Dynamic_Bilibili\n\n### 插件简介\n\n一个QChatGPT的插件，获取up主动态和直播开播提示，bot会以图片的方式进行通知\r\n![屏幕截图](https://github.com/user-attachments/assets/f8e8c8fd-bdd7-483b-bc69-0ac6e188b7a8)\r\n",
      "state": "closed",
      "author": "zzseki",
      "author_type": "User",
      "created_at": "2024-10-02T07:27:50Z",
      "updated_at": "2024-10-02T07:37:42Z",
      "closed_at": "2024-10-02T07:37:41Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/893/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/893",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/893",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:26.213616",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2024-10-02T07:37:41Z"
        }
      ]
    },
    {
      "issue_number": 805,
      "title": "[Bug]: !update升级至最新版用不了",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 系统环境\n\nWindows10 ltsc 中国四川\n\n### Python环境\n\npython 3.10.9\n\n### QChatGPT版本\n\nv3.2.0.1\n\n### 异常情况\n\n我从v3.2.0.1升级到了3.2.2，再次使用遇到报错'str' object has no attribute 'choices'\n\n### 日志信息\n\n    处理 person_30431*** 的请求(6): 你好\r\n[2024-06-03 00:04:33.073] D:\\chatbot\\4494***\\QChatGPT-3.2.0.1\\pkg\\pipeline\\process\\handlers\\chat.py (92) - [ERROR] :\r\n    对话(6)请求失败: 'str' object has no attribute 'choices'\r\n[2024-06-03 00:04:33.596] D:\\chatbot\\449***\\QChatGPT-3.2.0.1\\pkg\\pipeline\\controller.py (81) - [ERROR] :\r\n    'str' object has no attribute 'choices'\n\n### 启用的插件\n\n无",
      "state": "closed",
      "author": "bobandbrony",
      "author_type": "User",
      "created_at": "2024-06-02T16:08:43Z",
      "updated_at": "2024-09-28T11:11:48Z",
      "closed_at": "2024-06-02T16:21:59Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/805/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/805",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/805",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:26.380913",
      "comments": [
        {
          "author": "bobandbrony",
          "body": "好吧，是我中转地址填错了",
          "created_at": "2024-06-02T16:21:59Z"
        },
        {
          "author": "S-R-Afraid",
          "body": "可以详细说明一下吗？我也遇到这个问题了，具体是改哪个文件的配置呢？谢谢！",
          "created_at": "2024-09-28T11:07:16Z"
        },
        {
          "author": "RockChinQ",
          "body": "> 可以详细说明一下吗？我也遇到这个问题了，具体是改哪个文件的配置呢？谢谢！\n\n可以看一下文档的 常见问题 页",
          "created_at": "2024-09-28T11:09:00Z"
        },
        {
          "author": "S-R-Afraid",
          "body": "好的！感谢您的回答！",
          "created_at": "2024-09-28T11:11:47Z"
        }
      ]
    },
    {
      "issue_number": 892,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\r\n\r\nperplexity-api\r\n\r\n### 插件代码库地址\r\n\r\nhttps://github.com/LittleLicy/QchatGPT-perplexity-ai-api\r\n\r\n### 插件简介\r\n\r\nPerplexity(简称pplx)互联网搜索功能插件，基于Perplexity API调用",
      "state": "closed",
      "author": "LittleLicy",
      "author_type": "User",
      "created_at": "2024-09-27T17:23:02Z",
      "updated_at": "2024-09-28T09:00:54Z",
      "closed_at": "2024-09-28T09:00:53Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/892/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/892",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/892",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:26.620393",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2024-09-28T09:00:53Z"
        }
      ]
    },
    {
      "issue_number": 564,
      "title": "[Feature]: 主动消息撤回",
      "body": "### 这是一个？\r\n\r\n新功能\r\n\r\n### 详细描述\r\n\r\n我在QChatGPT\\pkg\\qqbot\\sources\\yirimirai.py中加入了如下适配器：\r\n```python\r\n    async def recall(self, massage_id):\r\n        return await self.bot.recall(massage_id)\r\n```     \r\n\r\n此注册器在python\\Lib\\site-packages\\mirai\\bot.pyi中有如下描述(第1009行开始)：\r\n```python\r\n    @type_check_only\r\n    class __RecallProxy():\r\n        async def set(self, target: int) -> Response:\r\n            撤回消息。\r\n\r\n            Args:\r\n                target (`int`): 需要撤回的消息的 message_id。\r\n\r\n    @overload\r\n    @property\r\n    def recall(self) -> __RecallProxy:\r\n        撤回消息。\r\n\r\n    @overload\r\n    async def recall(self, target: int) -> Response:\r\n        撤回消息。\r\n\r\n        Args:\r\n            target (`int`): 需要撤回的消息的 message_id。\r\n```\r\n            \r\n他们的具体实现我在python\\Lib\\site-packages\\miraicle\\mirai.py中找到了疑似的方法(第330行开始)：\r\n```python\r\n    def recall(self, msg_id: int):\r\n        撤回消息\r\n        :param msg_id: 需要撤回的消息的 messageId\r\n        :return: mirai-api-http 的响应\r\n        content = {'sessionKey': self.session_key,\r\n                   'target': msg_id}\r\n        if self.adapter == 'http':\r\n            response = self.__session.post(url=f'{self.base_url}/recall', json=content).json()\r\n            return response\r\n        elif self.adapter == 'ws':\r\n            response = self.__ws_send(command='recall', content=content)\r\n            return response\r\n```\r\n\r\n但是并不能工作，具体的报错反馈如下\r\n```\r\n[2023-09-11 21:13:54.992] host.py (373) - [ERROR] : 插件randoming触发事件person_command_sent时发生错误\r\n[2023-09-11 21:13:54.992] host.py (374) - [ERROR] : Traceback (most recent call last):\r\n  File \"C:\\QChatGPT_file\\bot3\\QChatGPT\\.\\pkg\\plugin\\host.py\", line 367, in emit\r\n    hook(plugin['instance'], **kwargs)\r\n  File \"C:\\QChatGPT_file\\bot3\\QChatGPT\\.\\plugins\\randomimg\\main.py\", line 356, in person_normal_message_received\r\n    tmp = asyncio.run(adapter.recall(note_message.message_id))  # massage_id=note_message.message_id))\r\n  File \"asyncio\\runners.py\", line 44, in run\r\n  File \"asyncio\\base_events.py\", line 649, in run_until_complete\r\n  File \"C:\\QChatGPT_file\\bot3\\python\\lib\\site-packages\\mirai\\models\\api.py\", line 415, in __call__\r\n    return await self.set(*args, **kwargs)\r\n  File \"C:\\QChatGPT_file\\bot3\\python\\lib\\site-packages\\mirai\\models\\api.py\", line 383, in set\r\n    return await self._call_api(\r\n  File \"C:\\QChatGPT_file\\bot3\\python\\lib\\site-packages\\mirai\\models\\api.py\", line 373, in _call_api\r\n    return await api.call(self.api_provider, method, response_type)\r\n  File \"C:\\QChatGPT_file\\bot3\\python\\lib\\site-packages\\mirai\\models\\api.py\", line 304, in call\r\n    raw_response = await api_provider.call_api(\r\n  File \"C:\\QChatGPT_file\\bot3\\python\\lib\\site-packages\\mirai\\bot.py\", line 91, in call_api\r\n    return await self._adapter.call_api(api, *args, **kwargs)\r\n  File \"C:\\QChatGPT_file\\bot3\\python\\lib\\site-packages\\mirai\\adapters\\websocket.py\", line 236, in call_api\r\n    return await self._recv(sync_id)\r\n  File \"C:\\QChatGPT_file\\bot3\\python\\lib\\site-packages\\mirai\\adapters\\websocket.py\", line 165, in _recv\r\n    raise exceptions.ApiError(data)\r\nmirai.exceptions.ApiError: (400, '[ERROR 400]参数错误。', '无效参数')\r\n```\r\n\r\n目测为mirai-api-http的问题。\r\n\r\n此外，有一些事件并不能监听到。比如：好友头像戳一戳事件。这里我想说明一下，qq的戳一戳有三类，头像戳一戳无法监听(logging.debug也不行)，然后才是class Poke，也就是正常的戳一戳动态表情，此类方法能被正常监听。但是戳一戳动态表情里面只有前三个能正常监听，后面的内容不知道是一个什么类，反正不是Poke，也不能被message_chain[1].type in [\"Poke\"]:这个代码捕捉，日志记录如下，几乎像一个文本了都：\r\n正常戳一戳日志：\r\n```\r\n2023-09-11 21:23:48 V/Bot.3353064953: 醉饮红尘外(1636708665) -> [mirai:poke:,1,0]\r\n2023-09-11 21:23:48 V/Bot.3353064953: Friend(1636708665) <- [mirai:poke:戳一戳,1,-1]\r\n```\r\n异常戳一戳日志：\r\n```\r\n2023-09-11 21:22:46 V/Bot.3353064953: 醉饮红尘外(1636708665) -> [点赞]请使用最新版本手机QQ查看。\r\n> [2023-09-11 21:22:46.799] message.py (26) - [INFO] : [person_1636708665]发送消息:[点赞]请使用最新版本手机QQ查看。\r\n```\r\n但是除了头像戳一戳事件，别的戳一戳都能够通过Poke类正常发送。\r\n\r\n这个戳一戳可能也和撤回消息有关？因为我手动用bot的QQ撤回也得不到返回值，按理说应该有一个Response的返回值，但反正logging.debug也监听不到bot的手动撤回消息事件\r\n",
      "state": "closed",
      "author": "wangmumu0601",
      "author_type": "User",
      "created_at": "2023-09-11T13:30:57Z",
      "updated_at": "2024-09-26T06:17:24Z",
      "closed_at": "2024-09-26T06:17:24Z",
      "labels": [
        "eh: Improve",
        "pd: Need reproducing"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/564/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "2.6.0",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/564",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/564",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:26.820088",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "YiriMirai使用了比较抽象的元编程方式对mah接口进行映射，目前估计问题是协议兼容性问题，待复现并查明",
          "created_at": "2023-09-11T14:12:55Z"
        },
        {
          "author": "RockChinQ",
          "body": "这个戳一戳问题，是mirai配置导致的，你得用支持接收戳一戳的协议（手机QQ应该可以），具体请到mirai的仓库去找",
          "created_at": "2023-09-13T03:11:45Z"
        },
        {
          "author": "RockChinQ",
          "body": "这个是消息平台 SDK 的问题，自行研究一下。",
          "created_at": "2024-09-26T06:17:24Z"
        }
      ]
    },
    {
      "issue_number": 789,
      "title": "[Feature]:  支持自定义整个 path 的 chat completions 请求器",
      "body": "### 这是一个？\r\n\r\n新功能\r\n\r\n### 详细描述\r\n\r\n有些api链接比较怪，不用v1，甚至还有复杂的前缀，不能直接通过openai库调用。\r\n\r\n但api调用输入输出格式都基本符合openai的标准，因此用httpx的post功能手动以rest api形式提供对任意类openai api的支持。\r\n\r\n无需oneapi，且oneapi有时也无法处理不用v1的的上游api链接。\r\n\r\nhttpx是openai自带依赖，也就意味着不需要额外依赖，比较轻便\r\n\r\n这里是我随手爆改的原版chatcmpl.py，做了最小化更改以便可以直接替换原文件以提供此功能，但代码不太规范，格式较乱，且可能破坏原有openai多模态功能。您可以当做一个参考，将功能代码片段提取出来，再写一个anycmpl.py。\r\n\r\nbase_url直接对应chat completion的api地址，而不是基础地址，如：“https://api.openai.com/v1/chat/completions”\r\n\r\n另外建议将不在已知Llm_model列表中的模型不采用报错，而是默认当成anycmpl并假定不具有工具调用和多模态能力，以便简化切换不同模型的工作量。\r\n\r\n@RockChinQ  \r\n\r\n\r\n用以下代码替换chatcmpl.py即可预览功能\r\n```\r\nfrom __future__ import annotations\r\n\r\nimport asyncio\r\nimport typing\r\nimport json\r\nimport base64\r\nfrom typing import AsyncGenerator\r\n\r\nimport openai\r\nimport openai.types.chat.chat_completion as chat_completion\r\nimport httpx\r\nimport aiohttp\r\nimport async_lru\r\n\r\nfrom .. import api, entities, errors\r\nfrom ....core import entities as core_entities, app\r\nfrom ... import entities as llm_entities\r\nfrom ...tools import entities as tools_entities\r\nfrom ....utils import image\r\n\r\n\r\n@api.requester_class(\"openai-chat-completions\")\r\nclass OpenAIChatCompletions(api.LLMAPIRequester):\r\n    \"\"\"OpenAI ChatCompletion API 请求器\"\"\"\r\n\r\n    client: openai.AsyncClient\r\n\r\n    requester_cfg: dict\r\n\r\n    def __init__(self, ap: app.Application):\r\n        self.ap = ap\r\n\r\n        self.requester_cfg = self.ap.provider_cfg.data['requester']['openai-chat-completions']\r\n\r\n    async def initialize(self):\r\n\r\n        self.client = openai.AsyncClient(\r\n            api_key=\"\",\r\n            base_url=self.requester_cfg['base-url'],\r\n            timeout=self.requester_cfg['timeout'],\r\n            http_client=httpx.AsyncClient(\r\n                proxies=self.ap.proxy_mgr.get_forward_proxies()\r\n            )\r\n        )\r\n        self.base_url=self.requester_cfg['base-url']\r\n        self.timeout=self.requester_cfg['timeout']\r\n        self.proxies=self.ap.proxy_mgr.get_forward_proxies()\r\n\r\n    async def _req(\r\n        self,\r\n        args: dict,\r\n    ):\r\n        headers = {\r\n            \"Content-Type\": \"application/json\",\r\n            \"Authorization\": f\"Bearer {self.api_key}\",\r\n        }\r\n        \r\n        print(args)\r\n\r\n        with httpx.Client() as client:\r\n            response = client.post(self.base_url, headers=headers, json=args)\r\n            if response.status_code == 200:\r\n                print(response.text)\r\n                response_data = response.json()\r\n                return response_data\r\n            else:\r\n                raise Exception(f\"Request failed with status code: {response.status_code}\")\r\n\r\n    async def _make_msg(\r\n        self,\r\n        chat_completion,\r\n    ) -> llm_entities.Message:\r\n        chatcmpl_message = chat_completion[\"choices\"][0][\"message\"]\r\n\r\n        message = llm_entities.Message(**chatcmpl_message)\r\n\r\n        return message\r\n\r\n    async def _closure(\r\n        self,\r\n        req_messages: list[dict],\r\n        use_model: entities.LLMModelInfo,\r\n        use_funcs: list[tools_entities.LLMFunction] = None,\r\n    ) -> llm_entities.Message:\r\n        self.client.api_key = use_model.token_mgr.get_token()\r\n        self.api_key = use_model.token_mgr.get_token()\r\n\r\n        args = self.requester_cfg['args'].copy()\r\n        args[\"model\"] = use_model.name if use_model.model_name is None else use_model.model_name\r\n\r\n        if use_funcs:\r\n            tools = await self.ap.tool_mgr.generate_tools_for_openai(use_funcs)\r\n\r\n            if tools:\r\n                args[\"tools\"] = tools\r\n\r\n        # 设置此次请求中的messages\r\n        messages = req_messages.copy()\r\n\r\n        # 检查vision\r\n        for msg in messages:\r\n            if 'content' in msg and isinstance(msg[\"content\"], list):\r\n                for me in msg[\"content\"]:\r\n                    if me[\"type\"] == \"image_url\":\r\n                        me[\"image_url\"]['url'] = await self.get_base64_str(me[\"image_url\"]['url'])\r\n\r\n        for m in messages:\r\n            if 'content' in m and isinstance(m[\"content\"], list):\r\n                m[\"content\"] = \" \".join([c[\"text\"] for c in m[\"content\"]])\r\n\r\n        # 删除空的\r\n        messages = [m for m in messages if m[\"content\"].strip() != \"\"]\r\n        \r\n        args[\"messages\"] = messages\r\n        \r\n\r\n        # 发送请求\r\n        resp = await self._req(args)\r\n\r\n        # 处理请求结果\r\n        message = await self._make_msg(resp)\r\n\r\n        return message\r\n    \r\n    async def call(\r\n        self,\r\n        model: entities.LLMModelInfo,\r\n        messages: typing.List[llm_entities.Message],\r\n        funcs: typing.List[tools_entities.LLMFunction] = None,\r\n    ) -> llm_entities.Message:\r\n        req_messages = [  # req_messages 仅用于类内，外部同步由 query.messages 进行\r\n            m.dict(exclude_none=True) for m in messages\r\n        ]\r\n\r\n        try:\r\n            return await self._closure(req_messages, model, funcs)\r\n        except asyncio.TimeoutError:\r\n            raise errors.RequesterError('请求超时')\r\n        except openai.BadRequestError as e:\r\n            if 'context_length_exceeded' in e.message:\r\n                raise errors.RequesterError(f'上文过长，请重置会话: {e.message}')\r\n            else:\r\n                raise errors.RequesterError(f'请求参数错误: {e.message}')\r\n        except openai.AuthenticationError as e:\r\n            raise errors.RequesterError(f'无效的 api-key: {e.message}')\r\n        except openai.NotFoundError as e:\r\n            raise errors.RequesterError(f'请求路径错误: {e.message}')\r\n        except openai.RateLimitError as e:\r\n            raise errors.RequesterError(f'请求过于频繁或余额不足: {e.message}')\r\n        except openai.APIError as e:\r\n            raise errors.RequesterError(f'请求错误: {e.message}')\r\n\r\n    @async_lru.alru_cache(maxsize=128)\r\n    async def get_base64_str(\r\n        self,\r\n        original_url: str,\r\n    ) -> str:\r\n        \r\n        base64_image = await image.qq_image_url_to_base64(original_url)\r\n\r\n        return f\"data:image/jpeg;base64,{base64_image}\"\r\n```",
      "state": "open",
      "author": "Pevernow",
      "author_type": "User",
      "created_at": "2024-05-25T09:56:58Z",
      "updated_at": "2024-09-26T06:16:24Z",
      "closed_at": null,
      "labels": [
        "eh: Improve",
        "pd: Need design"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/789/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.4",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/789",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/789",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:27.396361",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "不错的idea，我会花时间看一下",
          "created_at": "2024-05-25T10:02:29Z"
        }
      ]
    },
    {
      "issue_number": 792,
      "title": "[Feature]: 增加dall-e模型",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n增加绘画模型",
      "state": "open",
      "author": "bobandbrony",
      "author_type": "User",
      "created_at": "2024-05-25T15:36:39Z",
      "updated_at": "2024-09-26T06:15:00Z",
      "closed_at": null,
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/792/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/792",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/792",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:27.594631",
      "comments": [
        {
          "author": "AoaoMH",
          "body": "同求",
          "created_at": "2024-06-09T16:20:15Z"
        }
      ]
    },
    {
      "issue_number": 886,
      "title": "[Bug]: 中转站claude回复消息时，不返回role，导致出现none is not an allowed value报错",
      "body": "### 消息平台适配器\r\n\r\naiocqhttp（使用 OneBot 协议接入的）\r\n\r\n### 运行环境\r\n\r\nwin10\r\n\r\n### QChatGPT版本\r\n\r\nv3.3.1.0\r\n\r\n### 异常情况\r\n\r\nBUG原因:\r\n1、调用中转站api时，中转站返回如下：\r\n{'id': 'chatcmpl-98lgI5GPYHMHFUl1pWKOY2BzRWCLJ', 'object': 'chat.completion.chunk', 'created': 0, 'choices': [{'index': 0, 'message': {'content': '你好！很高兴见到你。有什么我可以帮助你的吗?'}}], 'model': 'claude-3-5-sonnet-20240620'}\r\n\r\n明显该中转站在返回message时未返回role值\r\n\r\n2、在pkg/provider/modelmgr/apis/ 中各请求器未判断返回message时未返回role的情况，导致_make_msg函数中role变量为none\r\n，故报错：\r\n\r\n [ERROR]:\r\n1 validation error for Message\r\nrolenone is not an allowed value (type=type_error.none.not_allowed)\r\n\r\n临时解决办法：\r\n在_make_msg函数中实例化Message 对象之前检查role是否为空:\r\n\r\n    async def _make_msg(\r\n        self,\r\n        chat_completion: chat_completion.ChatCompletion,\r\n    ) -> llm_entities.Message:\r\n        chatcmpl_message = chat_completion.choices[0].message.dict()\r\n\r\n        # 确保 role 字段存在且不为 None\r\n        if 'role' not in chatcmpl_message or chatcmpl_message['role'] is None:\r\n            chatcmpl_message['role'] = 'assistant'\r\n\r\n        message = llm_entities.Message(**chatcmpl_message)\r\n\r\n        return message\r\n\r\n\r\n### 启用的插件\r\n\r\n_No response_",
      "state": "closed",
      "author": "YunZLu",
      "author_type": "User",
      "created_at": "2024-09-20T06:34:40Z",
      "updated_at": "2024-09-26T01:31:26Z",
      "closed_at": "2024-09-26T01:31:26Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/886/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/886",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/886",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:27.771448",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "最近在忙公司项目没有时间看。\r\n欢迎提PR修改。",
          "created_at": "2024-09-22T08:40:32Z"
        },
        {
          "author": "YunZLu",
          "body": "好的，已提交PR。",
          "created_at": "2024-09-23T15:55:46Z"
        }
      ]
    },
    {
      "issue_number": 887,
      "title": "[Bug]: 时不时会出现KeyError: 'role'的报错",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\nWindows 11 , Python 3.10\n\n### QChatGPT版本\n\nv3.3.1.0\n\n### 异常情况\n\n![image](https://github.com/user-attachments/assets/96a0f07a-c1af-4129-af00-39a96fc49873)\r\n翻找相关issue找到#702 也许是相同的问题\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "Tigrex-Dai",
      "author_type": "User",
      "created_at": "2024-09-22T07:49:04Z",
      "updated_at": "2024-09-22T08:50:56Z",
      "closed_at": "2024-09-22T08:50:56Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/887/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/887",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/887",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:27.954330",
      "comments": [
        {
          "author": "Tigrex-Dai",
          "body": "根据 #708 提交了pr√",
          "created_at": "2024-09-22T07:55:23Z"
        }
      ]
    },
    {
      "issue_number": 880,
      "title": "[Bug]: 使用实例项目时报错没有text_massage对象",
      "body": "### 消息平台适配器\n\nNone\n\n### 运行环境\n\nwindows serves 2022  x86  python 3.10.9\n\n### QChatGPT版本\n\n3.3.0.1\n\n### 异常情况\n\n示例代码来源于文档[https://qchatgpt.rockchin.top/develop/plugin-dev.html](url)\r\n测试报错为\r\n![ed5a6f7d39d3dff48fd4dc6d14afb050](https://github.com/user-attachments/assets/ea10a2c4-406d-4537-a580-d295070bd09b)\r\n\r\n在handsome插件下报错\r\n[https://github.com/RockChinQ/TheMostHandsome](url)\r\n**_[2024-09-07 21:48:52.166] C:\\Users\\Administrator\\Desktop\\qqbot\\QChatGPT\\pkg\\plugin\\manager.py (153) - [ERROR] :\r\n    插件 Keyword_active_review 触发事件 PersonNormalMessageReceived 时发生错误: 'message_chain'_**\r\n都是事件监听器出了问题（应该\r\n但是不知道如何解决\r\n十分感谢\n\n### 启用的插件\n\n使用的插件有（不包括测试）\r\n#1 Md2QQImage \r\n优化 bot 发送的消息，将图片链接转换为实际图片\r\nv1.0\r\n作者: Annalasu\r\n\r\n#2 SillyTavernPlugin \r\nSillyTavernPlugin插件，用于将酒馆角色卡转写为QChatGPT人格预设的插件\r\nv1.0\r\n作者: the-lazy-me\r\n\r\n#3 URLMasker \r\nMask url to bypass\r\nv0.1\r\n作者: Antlt",
      "state": "closed",
      "author": "TwperBody",
      "author_type": "User",
      "created_at": "2024-09-07T14:00:19Z",
      "updated_at": "2024-09-22T08:49:41Z",
      "closed_at": "2024-09-22T08:49:41Z",
      "labels": [
        "bug?",
        "Invalid"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/880/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/880",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/880",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:28.125337",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "1. HelloPlugin 和文档中的实例代码的逻辑正常可用，你需要检查自己的代码是否有问题\r\n\r\n<img width=\"580\" alt=\"image\" src=\"https://github.com/user-attachments/assets/dade5385-b7f4-4a1d-a9d4-882439bccaa1\">\r\n\r\n<img width=\"597\" alt=\"image\" src=\"https://github.com/user-attachments/assets/14bc75c0-5065-451a-8612-b929775cdf23\">\r\n",
          "created_at": "2024-09-08T06:56:36Z"
        }
      ]
    },
    {
      "issue_number": 884,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nSendLike\n\n### 插件代码库地址\n\nhttps://github.com/Licy12138/SendLike\n\n### 插件简介\n\n一个给QQ名片点赞的插件！",
      "state": "closed",
      "author": "LittleLicy",
      "author_type": "User",
      "created_at": "2024-09-12T15:00:29Z",
      "updated_at": "2024-09-12T22:53:23Z",
      "closed_at": "2024-09-12T22:53:23Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/884/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/884",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/884",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:28.349461",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！已加入 [star集](https://github.com/stars/RockChinQ/lists/qchatgpt-%E6%8F%92%E4%BB%B6)",
          "created_at": "2024-09-12T22:53:23Z"
        }
      ]
    },
    {
      "issue_number": 849,
      "title": "[Feature]: 希望能够支持官方QQ机器人的列表对话",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n目前官方的QQ机器人平台开放了直接在消息列表添加机器人对话的权限，希望大大们在未来的更新中支持列表对话。\r\n![截图](https://github.com/RockChinQ/QChatGPT/assets/135106661/0120a9b7-9eeb-4ed9-88fa-a1dfdda1f482)\r\n\r\n",
      "state": "closed",
      "author": "Linklee-sad",
      "author_type": "User",
      "created_at": "2024-07-10T12:01:27Z",
      "updated_at": "2024-09-08T08:23:16Z",
      "closed_at": "2024-09-08T08:23:16Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/849/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/849",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/849",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:28.519567",
      "comments": []
    },
    {
      "issue_number": 830,
      "title": "[Bug]: ctx.add_return(\"reply\", [Voice(path=str(result))]) 回复语音文件时总是报错",
      "body": "### 部署方式\r\n\r\n手动部署\r\n\r\n### 消息平台适配器\r\n\r\naiocqhttp（使用 OneBot 协议接入的）\r\n\r\n### 系统环境\r\n\r\nwindow server 2022\r\n\r\n### Python环境\r\n\r\npython 3.12\r\n\r\n### QChatGPT版本\r\n\r\nv3.2.3\r\n\r\n### 异常情况\r\n```\r\nfrom mirai import *\r\n@handler(PersonNormalMessageReceived)\r\n    async def person_normal_message_received(self, ctx: EventContext):\r\n        msg = ctx.event.text_message\r\n        if msg == '顶真' or msg == 'dz':\r\n            self.logger.debug(f\"你好\")\r\n            result = self.get_api_response(msg)\r\n            path=str(result)\r\n            print(path)\r\n            if result:\r\n                ctx.add_return(\"reply\", [Voice(path=str(result))])\r\n            ctx.prevent_default()\r\n```\r\n 此处代码运行时报错，语音文件已下载到本地C:\\Users\\lx\\AppData\\Local\\Temp\\2\\tmp7dm3cxxk.wav\r\n\r\n```\r\n[2024-06-27 17:14:20.061] C:\\Users\\lx\\Desktop\\bot\\QChatGPT\\pkg\\pipeline\\process\\process.py (42) - [INFO] :\r\n    处理 person_xxxxxxxxx 的请求(0): 顶真\r\nC:\\Users\\lx\\AppData\\Local\\Temp\\2\\tmp7dm3cxxk.wav\r\n报错为：\r\n[2024-06-27 17:14:31.738] C:\\Users\\lx\\Desktop\\bot\\QChatGPT\\pkg\\pipeline\\controller.py (152) - [ERROR] :\r\n    处理请求时出错 query_id=0: <ActionFailed status='failed', retcode=200, data=None, echo={'seq': 1}>\r\n    \r\n    Voice是mirai中的方法\r\n```\r\n### 日志信息\r\n```\r\n[2024-06-27 17:14:20.061] C:\\Users\\lx\\Desktop\\bot\\QChatGPT\\pkg\\pipeline\\process\\process.py (42) - [INFO] :\r\n    处理 person_xxxxxxxxx 的请求(0): 顶真\r\nC:\\Users\\lx\\AppData\\Local\\Temp\\2\\tmp7dm3cxxk.wav\r\n[2024-06-27 17:14:31.738] C:\\Users\\lx\\Desktop\\bot\\QChatGPT\\pkg\\pipeline\\controller.py (152) - [ERROR] :\r\n    处理请求时出错 query_id=0: <ActionFailed status='failed', retcode=200, data=None, echo={'seq': 1}>\r\n```\r\n### 启用的插件\r\n\r\n_No response_",
      "state": "closed",
      "author": "smxy-lx",
      "author_type": "User",
      "created_at": "2024-06-27T09:29:07Z",
      "updated_at": "2024-09-08T07:04:57Z",
      "closed_at": "2024-09-08T07:04:57Z",
      "labels": [
        "bug?",
        "Stale"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/830/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.3",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/830",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/830",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:28.519587",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "用的消息平台是哪个？能否发一下复现这个问题的语音文件？",
          "created_at": "2024-07-04T05:28:27Z"
        }
      ]
    },
    {
      "issue_number": 874,
      "title": "[Bug]: 处理请求时出错 query_id=10 stage=MessageProcessor : list index out of range",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\nubuntu 24.40 LTS x86_64 python3.2 \n\n### QChatGPT版本\n\nv3.3.0.2\n\n### 异常情况\n\n以管理员身份发送命令：!model show 会报错：处理请求时出错 query_id=10 stage=MessageProcessor : list index out of range\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "icelly-QAQ",
      "author_type": "User",
      "created_at": "2024-08-28T07:19:36Z",
      "updated_at": "2024-09-08T07:04:45Z",
      "closed_at": "2024-09-08T07:04:45Z",
      "labels": [
        "bug?",
        "Stale"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/874/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/874",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/874",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:28.691838",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "开一下调试模式（设置环境变量 DEBUG=true），然后把出错时的输出贴上来。",
          "created_at": "2024-08-28T13:51:37Z"
        }
      ]
    },
    {
      "issue_number": 878,
      "title": "[Feature]: 优化换行",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\ngpt回复内容里会有换行需要处理 这里特指比如智普的AI  glm-4-flash 等  openai的chatgpt 没有这类问题\r\n\r\n![image](https://github.com/user-attachments/assets/4f610e6a-8603-4dea-b534-72ba3f18a3e3)\r\n",
      "state": "closed",
      "author": "xiaxiaomo-debug",
      "author_type": "User",
      "created_at": "2024-09-04T02:05:27Z",
      "updated_at": "2024-09-08T07:03:46Z",
      "closed_at": "2024-09-08T07:03:42Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/878/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/878",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/878",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:28.858378",
      "comments": [
        {
          "author": "xiaxiaomo-debug",
          "body": "可以给您提供一个中转key 测试:  url  https://gpts.xiamoai.top   key : sk-WHts9aHbrkYyxcRR1b55D4A477994a3386F1FfA23c5dA050   model: gpt-3.5-turbo",
          "created_at": "2024-09-04T06:13:01Z"
        },
        {
          "author": "RockChinQ",
          "body": "这是你的中转站问题，它对AI响应进行了一次转义：\r\n\r\n<img width=\"495\" alt=\"image\" src=\"https://github.com/user-attachments/assets/95268224-c2d4-4719-972a-c01644f09fd3\">\r\n\r\n<img width=\"527\" alt=\"image\" src=\"https://github.com/user-attachments/assets/7268b5d7-6d44-4755-be41-ce0961be050b\">\r\n\r\nOpenAI 官方key：\r\n\r\n<img width=\"1016\"",
          "created_at": "2024-09-08T07:03:42Z"
        }
      ]
    },
    {
      "issue_number": 879,
      "title": "[Bug]: 为什么显示{\"detail\":\"未注册的用户，请联系管理员\"}",
      "body": "### 消息平台适配器\n\nNone\n\n### 运行环境\n\npython\n\n### QChatGPT版本\n\n3.30\n\n### 异常情况\n\n{\"detail\":\"未注册的用户，请联系管理员\"}\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "xyx19991216",
      "author_type": "User",
      "created_at": "2024-09-05T05:30:54Z",
      "updated_at": "2024-09-05T05:39:45Z",
      "closed_at": "2024-09-05T05:39:45Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/879/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/879",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/879",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:29.080150",
      "comments": [
        {
          "author": "the-lazy-me",
          "body": "问题来自Newchatvoice插件，看插件教程",
          "created_at": "2024-09-05T05:34:55Z"
        }
      ]
    },
    {
      "issue_number": 877,
      "title": "[Bug]:  图片发送失败?",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\nwindows\n\n### QChatGPT版本\n\n最新版本\n\n### 异常情况\n\n比如 使用这个插件 https://github.com/zzseki/QChatGPT_Plugin_News \r\n他会发送一张图片 然后控制台就报错了\r\n报错信息:\r\n[2024-09-03 23:27:26.738] C:\\Users\\Administrator\\Desktop\\QChatGPT-master\\pkg\\pipeline\\process\\process.py (42) - [INFO] :\r\n    处理 person_120018425 的请求(2): 新闻\r\n[2024-09-03 23:27:27.472] C:\\Users\\Administrator\\Desktop\\QChatGPT-master\\plugins\\QChatGPT_Plugin_News\\main.py (28) - [INFO] :\r\n    https://file.alapi.cn/60s/202409031725298531.png\r\n[2024-09-03 23:27:27.706] C:\\Users\\Administrator\\Desktop\\QChatGPT-master\\pkg\\pipeline\\controller.py (167) - [ERROR] :\r\n    处理请求时出错 query_id=2 stage=SendResponseBackStage : <ActionFailed status='failed', retcode=200, data=None, echo={'seq': 3}>\n\n### 启用的插件\n\nNews,Webwlkr",
      "state": "closed",
      "author": "120018425",
      "author_type": "User",
      "created_at": "2024-09-03T15:40:42Z",
      "updated_at": "2024-09-04T06:14:14Z",
      "closed_at": "2024-09-04T06:14:14Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/877/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/877",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/877",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:29.265873",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "需要更多的控制台信息",
          "created_at": "2024-09-04T02:22:16Z"
        },
        {
          "author": "xiaxiaomo-debug",
          "body": "好像莫名其妙的又自己好了...close了 谢谢大佬",
          "created_at": "2024-09-04T02:38:59Z"
        }
      ]
    },
    {
      "issue_number": 873,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nChatWeather\n\n### 插件代码库地址\n\nhttps://github.com/cnrenil/ChatWeather\n\n### 插件简介\n\n使用内容函数，调用和风天气API接口，可以实现基本的天气查询功能。效果：\r\n```\r\nUser：ai 明天山东省济南市历城区的天气\r\nReturn：‭明天（2024年8月25日）山东省济南市历城区的天气情况如下：\r\n\r\n- **最高气温**：35°C\r\n- **最低气温**：26°C\r\n- **白天气象**：多云\r\n- **夜间气象**：雷阵雨\r\n- **风向**：北风，风速3 m/s\r\n- **湿度**：80%\r\n- **降水概率**：0.0%\r\n- **日出时间**：05:38\r\n- **日落时间**：18:52\r\n- **紫外线指数**：8\r\n\r\n详细天气信息可以访问 [天气链接](https://www.qweather.com/weather/licheng-101120111.html)。\r\n```\r\n详细天气信息链接可以手动要求获取。\r\n内容函数优点可以与预设共同使用，同时可以让ai判断调用和格式化输出。\r\n与neko预设共同使用的效果：\r\n```\r\nUser:ai 帮我看看明天历城区适不适合跑步\r\nReturn:@‭Neko：（抬头看向你）明天历城区的天气可能不太适合跑步喵~【有些担忧】明天的最高气温会达到29度，还有可能会有小雨喵~建议主人根据天气情况决定哦喵~\r\n```",
      "state": "closed",
      "author": "cnrenil",
      "author_type": "User",
      "created_at": "2024-08-25T00:43:43Z",
      "updated_at": "2024-08-25T09:00:30Z",
      "closed_at": "2024-08-25T09:00:30Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/873/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/873",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/873",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:29.451568",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2024-08-25T09:00:25Z"
        }
      ]
    },
    {
      "issue_number": 800,
      "title": "[Feature]: 读取群聊历史记录",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n开启新一轮对话时，附带群聊当中最近的指定数目条历史信息，而不仅仅是@机器人进行的历史对话，该功能有助于使用random随机模式时使得机器人对话更符合群聊的整体语境。",
      "state": "closed",
      "author": "HUSTerAIA",
      "author_type": "User",
      "created_at": "2024-05-31T14:30:33Z",
      "updated_at": "2024-08-24T09:09:12Z",
      "closed_at": "2024-08-24T09:09:11Z",
      "labels": [
        "eh: Improve",
        "m: Session"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/800/reactions",
        "total_count": 2,
        "+1": 1,
        "-1": 0,
        "laugh": 1,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/800",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/800",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:29.600948",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "这个做个插件实现就好了，主项目就不做了。",
          "created_at": "2024-08-24T09:09:11Z"
        }
      ]
    },
    {
      "issue_number": 812,
      "title": "[Feature]: 随机匹配可不可以将历史消息一并发给gpt？",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n\r\n![59ed73f856f86b7615a8306f9e67cc4d](https://github.com/RockChinQ/QChatGPT/assets/31347252/06227b0f-bf34-4ba6-a9c1-955f8fdc38ea)\r\n\r\n比如这里我设置为0.1，他现在只回答匹配到的那条，有没有办法让他把上次回复到这次回复之间的所有对话都一起塞进去？",
      "state": "closed",
      "author": "pplokijuhyg",
      "author_type": "User",
      "created_at": "2024-06-13T01:10:05Z",
      "updated_at": "2024-08-24T09:08:45Z",
      "closed_at": "2024-08-24T09:08:45Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/812/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/812",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/812",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:31.779964",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "这个做个插件实现就好了，主项目就不做了。",
          "created_at": "2024-08-24T09:08:45Z"
        }
      ]
    },
    {
      "issue_number": 786,
      "title": "[Bug]: hello的插件无法正常使用",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 系统环境\n\nwindows11\n\n### Python环境\n\npython3.12.3\n\n### QChatGPT版本\n\nv3.2.0.1\n\n### 异常情况\n\n个人发送hello给机器人，机器人无法正常响应\n\n### 日志信息\n\n[2024-05-20 20:33:40.219] d:\\QChatGPT-3.2.0.1\\QChatGPT-3.2.0.1\\pkg\\pipeline\\process\\process.py (42) - [INFO] :\r\n    处理 person_874520037 的请求(15): hello\r\n[2024-05-20 20:33:40.219] d:\\QChatGPT-3.2.0.1\\QChatGPT-3.2.0.1\\pkg\\pipeline\\controller.py (152) - [ERROR] :\r\n    处理请求时出错 query_id=15: 2 validation errors for Message\r\ncontent\r\n  value is not a valid list (type=type_error.list)\r\ncontent\r\n  str type expected (type=type_error.str)\n\n### 启用的插件\n\nhello",
      "state": "closed",
      "author": "FeiJinYi",
      "author_type": "User",
      "created_at": "2024-05-20T12:40:02Z",
      "updated_at": "2024-08-09T14:29:04Z",
      "closed_at": "2024-05-23T08:31:07Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/786/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/786",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/786",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:31.979533",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "3.2.1修复了",
          "created_at": "2024-05-23T08:31:07Z"
        },
        {
          "author": "Zogur",
          "body": "[2024-08-09 22:19:35.031] D:\\qqbot\\QChatGPT\\pkg\\pipeline\\process\\process.py (42) - [INFO] :\r\n    处理 person_3468845886 的请求(3): 你好\r\n[2024-08-09 22:20:40.779] D:\\qqbot\\QChatGPT\\pkg\\pipeline\\process\\handlers\\chat.py (93) - [ERROR] :\r\n    对话(3)请求失败: 模型请求失败: 请求错误: Connection error.\r\n[2024-08-09 22:20:43.1",
          "created_at": "2024-08-09T14:27:48Z"
        },
        {
          "author": "Zogur",
          "body": "！cmd指令类可以响应\r\n",
          "created_at": "2024-08-09T14:29:03Z"
        }
      ]
    },
    {
      "issue_number": 866,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nMd2QQImage\n\n### 插件代码库地址\n\nhttps://github.com/Annalasu/QcPlugin_Md2QQImage.git\n\n### 插件简介\n\n将画图模型返回的 markdown 图片URL转换为实际图片",
      "state": "closed",
      "author": "Annalasu",
      "author_type": "User",
      "created_at": "2024-08-09T05:38:52Z",
      "updated_at": "2024-08-09T06:28:21Z",
      "closed_at": "2024-08-09T06:28:21Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/866/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/866",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/866",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:32.187049",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！",
          "created_at": "2024-08-09T06:28:16Z"
        }
      ]
    },
    {
      "issue_number": 859,
      "title": "[Bug]: 正则表达式似乎不可用？",
      "body": "### 消息平台适配器\n\nyiri-mirai（Mirai）\n\n### 运行环境\n\npython3.10.9\n\n### QChatGPT版本\n\n3.3.0.1\n\n### 异常情况\n\n在default下的regexp填写正则表达式，启动也没有发生报错，但是私聊或者群聊均没有作用\n\n### 启用的插件\n\nWaifu",
      "state": "closed",
      "author": "bright141",
      "author_type": "User",
      "created_at": "2024-07-29T13:54:14Z",
      "updated_at": "2024-08-01T15:12:34Z",
      "closed_at": "2024-08-01T15:12:34Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/859/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/859",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/859",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:32.410996",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "配置文件和你的需求填上来",
          "created_at": "2024-08-01T15:01:11Z"
        }
      ]
    },
    {
      "issue_number": 854,
      "title": "[Bug]: 传入消息忽略规则再次失效",
      "body": "### 部署方式\r\n\r\n手动部署\r\n\r\n### 消息平台适配器\r\n\r\nyiri-mirai（Mirai）\r\n\r\n### 系统环境\r\n\r\nWindows Server 2022 Standard 中国大陆\r\n\r\n### Python环境\r\n\r\nPython 3.11.6\r\n\r\n### QChatGPT版本\r\n\r\nv3.2.4\r\n\r\n### 异常情况\r\n\r\npipeline配置中的传入消息忽略规则再次失效,前缀匹配和正则匹配都无效,消息会在聊天环境和控制台中响应\r\n\r\n### 日志信息\r\n\r\n框架使用 Overflow + gensokyo (我也测试了Overflow + LLOneBot 但依然无效)\r\n\r\n pipeline.json 配置内容:\r\n![Snipaste_2024-07-19_09-34-54](https://github.com/user-attachments/assets/72818ce3-6298-48b7-b3f0-ce724caa0a20)\r\n\r\nOverflow 日志:\r\n![Snipaste_2024-07-19_09-23-29](https://github.com/user-attachments/assets/68226b7b-d282-4053-aa3c-f2112cdf58dc)\r\n\r\ngensokyo 日志:\r\n![Snipaste_2024-07-19_09-30-36](https://github.com/user-attachments/assets/4c676118-2f95-4fb6-9af0-2dfad8c786b8)\r\n![Snipaste_2024-07-19_09-29-52](https://github.com/user-attachments/assets/034979dc-5b89-410a-83d4-a0551bb20308)\r\n![Snipaste_2024-07-19_09-28-01](https://github.com/user-attachments/assets/eec49d4c-2cc1-43b7-be65-7e62b1bc282f)\r\n![Snipaste_2024-07-19_09-29-08](https://github.com/user-attachments/assets/7c9cd3a2-c33b-4bab-965f-9bd9bbc1303a)\r\n\r\nQChatGPT 日志:\r\n![Snipaste_2024-07-19_09-57-09](https://github.com/user-attachments/assets/5d070d74-f242-4f98-a077-c793f3d92333)\r\n\r\n\r\n### 启用的插件\r\n\r\n![Snipaste_2024-07-19_09-09-16](https://github.com/user-attachments/assets/4d8a9b93-6089-4d73-93bf-9d36a843002f)\r\n",
      "state": "closed",
      "author": "shuangshun",
      "author_type": "User",
      "created_at": "2024-07-19T01:39:07Z",
      "updated_at": "2024-08-01T15:12:34Z",
      "closed_at": "2024-08-01T15:12:34Z",
      "labels": [
        "bug?",
        "m: Platform"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/854/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/854",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/854",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:32.630644",
      "comments": [
        {
          "author": "shuangshun",
          "body": "补充: Overflow 版本: v2.16.0-fa91aeb-SNAPSHOT\r\ngensokyo 版本: Release 453/merge",
          "created_at": "2024-07-19T01:45:55Z"
        }
      ]
    },
    {
      "issue_number": 862,
      "title": "[Bug]: 群聊中和私聊中发送动图就会阻塞",
      "body": "### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 运行环境\n\ndocker\n\n### QChatGPT版本\n\nv3.3.0.1\n\n### 异常情况\n\n2024-07-31 16:25:30.885] /app/pkg/pipeline/process/process.py (42) - [INFO] :\r\n    处理 person_xxx 的请求(15): [图片]\r\n\r\n\r\n\r\n下面是开了三个并发数，三幅动图把三个都阻塞了\r\n[2024-07-31 16:29:24.772] /app/pkg/pipeline/process/process.py (42) - [INFO] :\r\n    处理 group_xxx 的请求(7): 这个很强\r\n[2024-07-31 16:29:28.259] /app/pkg/pipeline/process/process.py (42) - [INFO] :\r\n    处理 group_xxx 的请求(8): [图片]\r\n[2024-07-31 16:29:28.498] /app/pkg/pipeline/process/process.py (42) - [INFO] :\r\n    处理 group_xxx 的请求(9): [图片]\r\n[2024-07-31 16:29:30.818] /app/pkg/pipeline/process/handlers/chat.py (79) - [INFO] :\r\n    对话(7)响应: assistant: 谢谢夸奖！在“挑战...\r\n[2024-07-31 16:29:31.271] /app/pkg/pipeline/process/process.py (42) - [INFO] :\r\n    处理 group_xxx 的请求(10): [图片]\n\n### 启用的插件\n\n无",
      "state": "closed",
      "author": "EmissaryD",
      "author_type": "User",
      "created_at": "2024-07-31T16:31:38Z",
      "updated_at": "2024-07-31T17:04:36Z",
      "closed_at": "2024-07-31T17:04:36Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/862/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/862",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/862",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:32.885809",
      "comments": [
        {
          "author": "EmissaryD",
          "body": "sorry搞错了，是图片太大了",
          "created_at": "2024-07-31T17:04:32Z"
        }
      ]
    },
    {
      "issue_number": 861,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nGalgameMaker\n\n### 插件代码库地址\n\nhttps://github.com/ElvisChenML/GalgameMaker\n\n### 插件简介\n\n将规定格式的Markdown剧情设计脚本转为QQ选项游戏。 Easily create your own Galgame in QQ!",
      "state": "closed",
      "author": "ElvisChenML",
      "author_type": "User",
      "created_at": "2024-07-31T05:54:24Z",
      "updated_at": "2024-07-31T06:00:34Z",
      "closed_at": "2024-07-31T06:00:33Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/861/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/861",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/861",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:33.126594",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "OK已经加了",
          "created_at": "2024-07-31T06:00:34Z"
        }
      ]
    },
    {
      "issue_number": 860,
      "title": "[BUG]前缀忽略功能似乎失效了",
      "body": "### 消息平台适配器\n\nyiri-mirai（Mirai）\n\n### 运行环境\n\nDebian Testing JVM 17\n\n### QChatGPT版本\n\n[bot] 当前版本:  v3.3.0.1\n\n### 异常情况\n\n在私聊窗口中发送/help会触发机器人回复。pipeline是删掉重新生成的默认配置文件，前缀忽略已经设置了。\r\n\r\n![Screenshot_20240730_220839](https://github.com/user-attachments/assets/e26b0bb9-d011-4f8f-acfc-b6c5a856d7ce)\r\n如图\r\n配置文件pipeline.json如下：\r\n```json\r\n{\r\n    \"access-control\":{\r\n        \"mode\": \"blacklist\",\r\n        \"blacklist\": [],\r\n        \"whitelist\": []\r\n    },\r\n    \"respond-rules\": {\r\n        \"default\": {\r\n            \"at\": true,\r\n            \"prefix\": [\r\n                \"/ai\", \"!ai\", \"！ai\", \"ai\"\r\n            ],\r\n            \"regexp\": [],\r\n            \"random\": 0.0\r\n        }\r\n    },\r\n    \"income-msg-check\": true,\r\n    \"ignore-rules\": {\r\n        \"prefix\": [\"/\"],\r\n        \"regexp\": []\r\n    },\r\n    \"check-sensitive-words\": true,\r\n    \"baidu-cloud-examine\": {\r\n        \"enable\": false,\r\n        \"api-key\": \"\",\r\n        \"api-secret\": \"\"\r\n    },\r\n    \"rate-limit\": {\r\n        \"strategy\": \"drop\",\r\n        \"algo\": \"fixwin\",\r\n        \"fixwin\": {\r\n            \"default\": {\r\n                \"window-size\": 60,\r\n                \"limit\": 60\r\n            }\r\n        }\r\n    },\r\n    \"msg-truncate\": {\r\n        \"method\": \"round\",\r\n        \"round\": {\r\n            \"max-round\": 10\r\n        }\r\n    }\r\n}\r\n```\n\n### 启用的插件\n\n[bot] 所有插件(0):\r\n",
      "state": "closed",
      "author": "cnrenil",
      "author_type": "User",
      "created_at": "2024-07-30T14:13:50Z",
      "updated_at": "2024-07-30T14:21:16Z",
      "closed_at": "2024-07-30T14:21:15Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/860/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/860",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/860",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:33.285579",
      "comments": [
        {
          "author": "cnrenil",
          "body": "Duplicate #854 ",
          "created_at": "2024-07-30T14:21:15Z"
        }
      ]
    },
    {
      "issue_number": 848,
      "title": "[Feature]: 模型切换命令",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n集成 !model 模型切换命令",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-07-09T16:27:48Z",
      "updated_at": "2024-07-28T12:57:28Z",
      "closed_at": "2024-07-28T12:57:28Z",
      "labels": [
        "eh: Improve",
        "m: Commands"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/848/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/848",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/848",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:33.500602",
      "comments": []
    },
    {
      "issue_number": 839,
      "title": "[Feature]: Runner 层抽象",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n目前仅有固定的一个runner，添加此层抽象，可以实现知识库接入等扩展性。",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-07-05T04:19:17Z",
      "updated_at": "2024-07-28T12:57:28Z",
      "closed_at": "2024-07-28T12:57:27Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/839/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.3",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/839",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/839",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:33.500624",
      "comments": []
    },
    {
      "issue_number": 802,
      "title": "[Feature]: 增加模型切换功能",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n这样就不需要重启机器人就能切换模型",
      "state": "closed",
      "author": "bobandbrony",
      "author_type": "User",
      "created_at": "2024-06-01T14:56:52Z",
      "updated_at": "2024-07-28T12:57:27Z",
      "closed_at": "2024-07-28T12:57:27Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/802/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.3",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/802",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/802",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:33.500631",
      "comments": []
    },
    {
      "issue_number": 758,
      "title": "[Feature]:  求求支持ollama 和知识库",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n求求支持ollama 和知识库",
      "state": "closed",
      "author": "pulikeyati",
      "author_type": "User",
      "created_at": "2024-04-16T06:44:30Z",
      "updated_at": "2024-07-28T12:57:27Z",
      "closed_at": "2024-07-28T12:57:27Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/758/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.3",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/758",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/758",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:33.500638",
      "comments": []
    },
    {
      "issue_number": 851,
      "title": "[Bug]: 艾特机器人没反应",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 系统环境\n\nwin 11\n\n### Python环境\n\npython 3.10\n\n### QChatGPT版本\n\nv3.2.4\n\n### 异常情况\n\n![image](https://github.com/user-attachments/assets/5a6f30d0-1a7c-41e5-aae0-d400b6afbcfb)\r\n![image](https://github.com/user-attachments/assets/a6bf8da5-bbd1-4836-b47f-f3163422159b)\r\n艾特机器人后台没有任何动静，但是直接发响应前缀会回复\n\n### 日志信息\n\n_No response_\n\n### 启用的插件\n\nWebwlkr \r\nmiHoYoVoice",
      "state": "closed",
      "author": "KimiFT",
      "author_type": "User",
      "created_at": "2024-07-15T00:55:15Z",
      "updated_at": "2024-07-28T11:49:28Z",
      "closed_at": "2024-07-28T11:49:27Z",
      "labels": [
        "bug?",
        "Stale"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/851/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/851",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/851",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:33.500645",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "机器人控制台的输出贴一下",
          "created_at": "2024-07-17T09:41:39Z"
        }
      ]
    },
    {
      "issue_number": 837,
      "title": "[Bug]: GroupNormalMessageReceived中无法正确查询到At Bot信息",
      "body": "### 部署方式\n\nDocker部署\n\n### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 系统环境\n\nLinux Docker部署\n\n### Python环境\n\nPython 3.10.13\n\n### QChatGPT版本\n\nv3.2.3\n\n### 异常情况\n\n![c61b3b64626bf39ffa4a032bcbc81c75](https://github.com/RockChinQ/QChatGPT/assets/42546145/2a7de393-3fde-41e9-a94d-790057ce55bd)\r\n![e25233414d641360bab29b0e1d8390be](https://github.com/RockChinQ/QChatGPT/assets/42546145/e724fa00-8d22-430b-bd9b-1a12816b50ec)\r\nmessage_chain中没有At消息，无法获取Bot是否被At\n\n### 日志信息\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "ElvisChenML",
      "author_type": "User",
      "created_at": "2024-07-04T08:04:04Z",
      "updated_at": "2024-07-28T10:49:53Z",
      "closed_at": "2024-07-28T10:49:53Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/837/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/837",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/837",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:33.668009",
      "comments": [
        {
          "author": "ElvisChenML",
          "body": "![image](https://github.com/RockChinQ/QChatGPT/assets/42546145/4154fb9b-a7e0-413e-9e9c-c1bafc7e932c)\r\n这个issue如果不好处理或是不处理也行，直接关闭就好了，虽然GroupNormalMessageReceived没了，但我可以在GroupMessageReceived阶段拿一下。",
          "created_at": "2024-07-10T00:32:45Z"
        },
        {
          "author": "RockChinQ",
          "body": "最近还在帮我爸写小程序。每天处理开源项目最多花两小时。issue基本上都会处理的，只是顺序问题。",
          "created_at": "2024-07-10T12:35:46Z"
        },
        {
          "author": "RockChinQ",
          "body": "在 #757 跟踪",
          "created_at": "2024-07-28T10:49:53Z"
        }
      ]
    },
    {
      "issue_number": 826,
      "title": "[Feature]: 希望可以适配新的Claude-3.5-sonnet",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\nClaude前两天新出了一个3.5 Sonnet，希望可以添加适配，谢谢！",
      "state": "closed",
      "author": "Tigrex-Dai",
      "author_type": "User",
      "created_at": "2024-06-25T12:01:48Z",
      "updated_at": "2024-07-28T07:46:56Z",
      "closed_at": "2024-07-28T07:46:56Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/826/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.3",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/826",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/826",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:33.929088",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "已经适配了，重启就能更新模型列表",
          "created_at": "2024-07-28T07:46:56Z"
        }
      ]
    },
    {
      "issue_number": 850,
      "title": "[Bug？]: 使用qq官方机器人，但是 平台适配器运行出错: Cannot connect to host bots.qq.com:443 ssl:default [getaddrinfo failed]",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\nqq-botpy（QQ官方API）\n\n### 系统环境\n\nWindows 11 中国\n\n### Python环境\n\nPython 3.12.4\n\n### QChatGPT版本\n\nv3.2.4\n\n### 异常情况\n\n根据文档部署，配置好后`python main.py`启动\r\n\r\nQQ机器人是注册好了的，不过没有通过审核（处于沙箱测试阶段）\r\n![image](https://github.com/RockChinQ/QChatGPT/assets/128208553/9794bf2f-5846-4c92-84a8-4a36343ca7a7)\r\n\r\n报错\r\n```\r\nG:\\PycharmProjects\\QChatGPT\\pkg\\platform\\manager.py (174) - [ERROR] :\r\n    平台适配器运行出错: Cannot connect to host bots.qq.com:443 ssl:default [getaddrinfo failed]\r\n```\r\n\n\n### 日志信息\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "ShanJianSoda",
      "author_type": "User",
      "created_at": "2024-07-10T12:36:04Z",
      "updated_at": "2024-07-23T07:39:34Z",
      "closed_at": "2024-07-23T07:39:34Z",
      "labels": [
        "bug?",
        "Stale"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/850/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/850",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/850",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:34.164870",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "你的主机没法正常访问 QQ API 的地址。\r\n\r\n尝试：\r\n\r\n1. 关闭 代理\r\n2. 更换网络\r\n3. 检查 DNS 是否正常",
          "created_at": "2024-07-17T09:41:08Z"
        }
      ]
    },
    {
      "issue_number": 853,
      "title": "[Bug]: 无法回复音频和图片",
      "body": "### 部署方式\r\n\r\nDocker部署\r\n\r\n### 消息平台适配器\r\n\r\naiocqhttp（使用 OneBot 协议接入的）\r\n\r\n### 系统环境\r\n\r\nubuntu 阿里云\r\n\r\n### Python环境\r\n\r\npython3.10\r\n\r\n### QChatGPT版本\r\n\r\n3.2.4\r\n\r\n### 异常情况\r\n\r\n# 图片\r\n`ctx.add_return(\"reply\", [Image(url = url)]) `\r\n输出的是空\r\n已经检查过url正确https://file.alapi.cn/60s/202407181721238540.png\r\n# 音频\r\n`ctx.add_return(\"reply\", [Voice(path=str(silk_file))])`\r\n[2024-07-18 04:26:54.533] /app/pkg/pipeline/controller.py (167) - [ERROR] :\r\n处理请求时出错 query_id=1 stage=SendResponseBackStage : <ActionFailed status='failed', retcode=200, data=None, echo={'seq': 2}>\r\n同样检查过silk_file本地路径已经存在\r\n### 日志信息\r\n\r\n_No response_\r\n\r\n### 启用的插件\r\n\r\nQChatGPT_Plugin_Music",
      "state": "open",
      "author": "EvilCalf",
      "author_type": "User",
      "created_at": "2024-07-18T06:05:07Z",
      "updated_at": "2024-07-19T08:02:39Z",
      "closed_at": null,
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/853/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/853",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/853",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:34.366023",
      "comments": [
        {
          "author": "EvilCalf",
          "body": "[音频.zip](https://github.com/user-attachments/files/16278774/default.zip)\r\n",
          "created_at": "2024-07-18T06:30:18Z"
        },
        {
          "author": "EvilCalf",
          "body": "顺带还有一个问题想请教，插件中如何修改用户的输入",
          "created_at": "2024-07-18T08:54:12Z"
        },
        {
          "author": "RockChinQ",
          "body": "修改用户输入的话，你挂的事件里有 alter 就可以修改，没有的话就不行。",
          "created_at": "2024-07-19T01:41:00Z"
        },
        {
          "author": "EvilCalf",
          "body": "> 修改用户输入的话，你挂的事件里有 alter 就可以修改，没有的话就不行。\r\n\r\n了解了，那alter变量是直接替换原本的输入？那图片和音频没法发送，大佬能看看么",
          "created_at": "2024-07-19T01:48:15Z"
        },
        {
          "author": "RockChinQ",
          "body": "对，有注释的，可以看一下；之后有空调试一下，欢迎PR，最近在忙家里的小程序。",
          "created_at": "2024-07-19T02:26:59Z"
        }
      ]
    },
    {
      "issue_number": 852,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nMarkdown2IMG\n\n### 插件代码库地址\n\nhttps://github.com/inkOrCloud/Markdown2IMG.git\n\n### 插件简介\n\n将markdown文本转为图片输出,适用于3.x",
      "state": "closed",
      "author": "inkOrCloud",
      "author_type": "User",
      "created_at": "2024-07-15T06:13:00Z",
      "updated_at": "2024-07-17T09:40:05Z",
      "closed_at": "2024-07-17T09:40:05Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/852/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/852",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/852",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:34.616994",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！已添加到[插件集合](https://github.com/stars/RockChinQ/lists/qchatgpt-%E6%8F%92%E4%BB%B6)",
          "created_at": "2024-07-17T09:40:03Z"
        }
      ]
    },
    {
      "issue_number": 831,
      "title": "[Feature]: 希望添加类似于Spit_chatBot这个项目的 消息分段 随机截断 的功能",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n去年在小破站看到一个很有意思的仿人类聊天的QQ机器人视频，让我对这个插件的神奇工作方式暂不绝口，能记录聊天记录，然后像普通群员一样截段输出，无奈go-cqhttp不好使哦，自己又不会折腾，这个功能自己到现在也没体验上\r\n[**我用ChatGPT创造了一个数字生命，在QQ群里伪装人类**](https://www.bilibili.com/video/BV1gm4y1C7oY/?spm_id_from=333.999.0.0)\r\n[**项目地址**](https://github.com/LUMOXu/Spit_chatBot)\r\n我希望贵项目也能拥有类似于spit这样类似的功能",
      "state": "closed",
      "author": "SpiritHerb",
      "author_type": "User",
      "created_at": "2024-06-27T15:16:08Z",
      "updated_at": "2024-07-17T09:38:04Z",
      "closed_at": "2024-07-17T09:38:04Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/831/reactions",
        "total_count": 2,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 2,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/831",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/831",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:34.802737",
      "comments": [
        {
          "author": "HUSTerAIA",
          "body": "附议，理想形态",
          "created_at": "2024-06-28T07:31:02Z"
        },
        {
          "author": "ElvisChenML",
          "body": "看到你们的issue，我在我插件新增了Spit_chatBot类似的功能，来试试吧\r\n\r\n插件链接：[Waifu](https://github.com/ElvisChenML/Waifu)",
          "created_at": "2024-07-05T09:28:58Z"
        },
        {
          "author": "RockChinQ",
          "body": "这个功能会使程序行为不可控，暂时不考虑在主线实现，可以使用 @ElvisChenML 实现的插件。",
          "created_at": "2024-07-17T09:38:04Z"
        }
      ]
    },
    {
      "issue_number": 842,
      "title": "[Feature]: Ollama平台集成-pr前沟通",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n参考ollama的[API文档](https://ollama.fan/reference/api/), 实现了对Ollama平台的集成:\r\n+ 引入[ollama-python](https://github.com/ollama/ollama-python)库, 在pkg/provider/modelmgr/apis目录下新增了ollamachatcmpl.py文件,  参考`OpenAIChatCompletions`新增`OllamaChatCompletions`类, 利用`ollama-python`提供的API, 实现对话补全(非流式)的功能；\r\n+ 在metadata/llm_models.json配置ollama支持的大模型元数据;\r\n+ 在data/conifg/provider.json配置requester:`ollama-chat-completions`,更改model为`llm_models.json`中的模型名称, 启动程序后即可与本地ollama大模型对话.\r\n\r\n新增4个ollama相关命令:\r\n+ ollama_list: ollama模型列表\r\n+ ollama_show: ollama模型详情\r\n+ ollama_pull: ollama模型拉取\r\n+ ollama_del: ollama模型删除\r\n\r\n总共2个commit, 作者大大看看这些实现可以提交pr吗?",
      "state": "closed",
      "author": "canyuan0801",
      "author_type": "User",
      "created_at": "2024-07-09T07:20:24Z",
      "updated_at": "2024-07-09T16:15:51Z",
      "closed_at": "2024-07-09T16:15:51Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/842/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/842",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/842",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:35.169875",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "没有问题，欢迎贡献！\n\n命令这块儿弄成单个命令吧 !ollama，那几个命令作为此命令的子命令，实现上可以参考现有的命令实现模式。",
          "created_at": "2024-07-09T07:51:05Z"
        },
        {
          "author": "canyuan0801",
          "body": "好，我弄成单个命令试试",
          "created_at": "2024-07-09T08:06:41Z"
        },
        {
          "author": "canyuan0801",
          "body": "使用方法(以qwen2模型为例):\r\n1. 本地安装好Ollama后, 然后使用命令拉取qwen2模型: `!ollama pull qwen2`;\r\n2. 使用`!ollama`命令查看模型名称, `llm-models.json`添加如下配置:\r\n    ```json\r\n    {\r\n          \"name\": \"qwen2:latest\",\r\n          \"requester\": \"ollama-chat-completions\"\r\n    }\r\n    ```\r\n3. `provider.json`添加requester:\r\n    ```json\r\n    \"oll",
          "created_at": "2024-07-09T08:39:45Z"
        }
      ]
    },
    {
      "issue_number": 846,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nQChatGPT_Plugin_Music\n\n### 插件代码库地址\n\nhttps://github.com/zzseki/QChatGPT_Plugin_Music\n\n### 插件简介\n\n可以使QChatGpt播放音乐\r\n向QChatGpt发送：播放歌曲：XXX 即可",
      "state": "closed",
      "author": "zzseki",
      "author_type": "User",
      "created_at": "2024-07-09T10:25:05Z",
      "updated_at": "2024-07-09T16:15:37Z",
      "closed_at": "2024-07-09T16:15:37Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/846/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/846",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/846",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:35.391644",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！已添加到 [插件合集](https://github.com/stars/RockChinQ/lists/qchatgpt-%E6%8F%92%E4%BB%B6)。",
          "created_at": "2024-07-09T16:15:37Z"
        }
      ]
    },
    {
      "issue_number": 841,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nQChatGPT_Plugin_Weather\n\n### 插件代码库地址\n\nhttps://github.com/zzseki/QChatGPT_Plugin_Weather\n\n### 插件简介\n\n能够查询国内城市未来七天内的详细天气数据",
      "state": "closed",
      "author": "zzseki",
      "author_type": "User",
      "created_at": "2024-07-08T15:00:05Z",
      "updated_at": "2024-07-09T16:15:29Z",
      "closed_at": "2024-07-09T16:15:29Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/841/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/841",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/841",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:35.562792",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！已添加到 [插件合集](https://github.com/stars/RockChinQ/lists/qchatgpt-%E6%8F%92%E4%BB%B6)。",
          "created_at": "2024-07-09T16:15:29Z"
        }
      ]
    },
    {
      "issue_number": 808,
      "title": "[Bug]: 启动后报错退出",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\nyiri-mirai（Mirai）\n\n### 系统环境\n\nWindows 10 企业版 LTSC 1809 中国大陆\n\n### Python环境\n\nPython 3.12.4\n\n### QChatGPT版本\n\n3.2.2\n\n### 异常情况\n\n如标题\n\n### 日志信息\n\n.\\QChatGPT-3.2.2>python main.py\r\n\r\n  ___   ___ _         _    ___ ___ _____\r\n / _ \\ / __| |_  __ _| |_ / __| _ \\_   _|\r\n| (_) | (__| ' \\/ _` |  _| (_ |  _/ | |\r\n \\__\\_\\\\___|_||_\\__,_|\\__|\\___|_|   |_|\r\n\r\n⭐️开源地址: https://github.com/RockChinQ/QChatGPT\r\n📖文档地址: https://q.rkcn.top\r\n\r\nTraceback (most recent call last):\r\n  File \"D:\\qq机器人\\QChatGPT-3.2.2\\main.py\", line 72, in <module>\r\n    asyncio.run(main_entry())\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\runners.py\", line 194, in run\r\n    return runner.run(main)\r\n           ^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\runners.py\", line 118, in run\r\n    return self._loop.run_until_complete(task)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\base_events.py\", line 687, in run_until_complete\r\n    return future.result()\r\n           ^^^^^^^^^^^^^^^\r\n  File \"D:\\qq机器人\\QChatGPT-3.2.2\\main.py\", line 25, in main_entry\r\n    missing_deps = await deps.check_deps()\r\n                   ^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"D:\\qq机器人\\QChatGPT-3.2.2\\pkg\\core\\bootutils\\deps.py\", line 27, in check_deps\r\n    __import__(dep)\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\mirai\\__init__.py\", line 22, in <module>\r\n    from mirai.bot import (\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\mirai\\bot.py\", line 13, in <module>\r\n    import mirai.models.api\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\mirai\\models\\api.py\", line 68, in <module>\r\n    class SessionInfoResponse(Response):\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\pydantic\\main.py\", line 286, in __new__\r\n    cls.__try_update_forward_refs__()\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\pydantic\\main.py\", line 807, in __try_update_forward_refs__\r\n    update_model_forward_refs(cls, cls.__fields__.values(), cls.__config__.json_encoders, localns, (NameError,))\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\pydantic\\typing.py\", line 554, in update_model_forward_refs\r\n    update_field_forward_refs(f, globalns=globalns, localns=localns)\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\pydantic\\typing.py\", line 520, in update_field_forward_refs\r\n    field.type_ = evaluate_forwardref(field.type_, globalns, localns or None)\r\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\pydantic\\typing.py\", line 66, in evaluate_forwardref\r\n    return cast(Any, type_)._evaluate(globalns, localns, set())\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nTypeError: ForwardRef._evaluate() missing 1 required keyword-only argument: 'recursive_guard'\r\n\r\n.\\QChatGPT-3.2.2>pause\r\n请按任意键继续. . .\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "Mooshed88-a",
      "author_type": "User",
      "created_at": "2024-06-07T18:09:04Z",
      "updated_at": "2024-07-08T03:54:48Z",
      "closed_at": "2024-07-08T03:54:48Z",
      "labels": [
        "bug?",
        "Stale"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/808/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.3",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/808",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/808",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:35.730425",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "尝试换一下pydantic的版本，我这正常的版本是：\r\n\r\npydantic==1.10.15",
          "created_at": "2024-06-26T02:48:10Z"
        },
        {
          "author": "Mooshed88-a",
          "body": "> 尝试换一下pydantic的版本，我这正常的版本是：\r\n> \r\n> pydantic==1.10.15\r\n\r\n更换版本后，依然存在问题，报错内容和之前一样",
          "created_at": "2024-06-28T20:13:55Z"
        },
        {
          "author": "RockChinQ",
          "body": "相关 issue：https://github.com/pydantic/pydantic/issues/9609\r\nPydantic 最新版修复了这个问题，但 YiriMirai 与 Pydantic 最新版不兼容，可以尝试把 Python 降至 3.12.3以下，继续使用上述的 Pydantic 版本。",
          "created_at": "2024-07-03T14:59:43Z"
        },
        {
          "author": "Mooshed88-a",
          "body": "降级python后解决了，非常感谢！",
          "created_at": "2024-07-08T03:54:48Z"
        }
      ]
    },
    {
      "issue_number": 688,
      "title": "[Bug]: 捕捉到未知异常 ",
      "body": "### 部署方式\r\n\r\n手动部署\r\n\r\n### 登录框架\r\n\r\nMirai\r\n\r\n### 系统环境\r\n\r\nwindows sever 2022\r\n\r\n### Python环境\r\n\r\npython 3.10.9\r\n\r\n### QChatGPT版本\r\n\r\n2.6.10\r\n\r\n### 异常情况\r\n\r\n运行main.py 报错\r\n\r\n### 日志信息\r\n```\r\n[2024-02-16 00:22:37.495] manager.py (242) - [INFO] : 加载禁用列表: person: [2854196310], group: [204785790, 691226829]\r\n[2024-02-16 00:22:37.511] settings.py (98) - [INFO] : 已全局启用内容函数。\r\n[2024-02-16 00:22:37.511] host.py (163) - [INFO] : 以下插件已初始化:\r\n[2024-02-16 00:22:39.520] main.py (348) - [INFO] : 您正在使用Windows系统，若命令行窗口处于“选择”模式，程序可能会被暂停，此时请右键点击窗口空白区域使其取消选择模式。\r\n2024-02-16 00:22:39 - ERROR    Unsupported extension: name = frame-log, params = []\r\n[2024-02-16 00:22:39.558] base.py (43) - [ERROR] : Unsupported extension: name = frame-log, params = []\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\Administrator\\Desktop\\QchatGPT\\QChatGPT-2.6.10\\QChatGPT-2.6.10\\main.py\", line 287, in run_bot_wrapper\r\n    qqbot.adapter.run_sync()\r\n  File \"C:\\Users\\Administrator\\Desktop\\QchatGPT\\QChatGPT-2.6.10\\QChatGPT-2.6.10\\pkg\\qqbot\\sources\\yirimirai.py\", line 120, in run_sync\r\n    loop.run_until_complete(MiraiRunner(self.bot)._run())\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\base_events.py\", line 649, in run_until_complete\r\n    return future.result()\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\mirai\\bot.py\", line 240, in _run\r\n    await self.startup()\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\mirai\\bot.py\", line 228, in startup\r\n    await asyncio.gather(*coros)\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\mirai\\bot.py\", line 137, in startup\r\n    await self._adapter.login(self.qq)\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\mirai\\adapters\\base.py\", line 35, in wrapped\r\n    return await func(self, *args, **kwargs)\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\mirai\\adapters\\websocket.py\", line 187, in login\r\n    self.connection = await connect(self.host_name, extra_headers=headers)\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\websockets\\legacy\\client.py\", line 647, in __await_impl_timeout__\r\n    return await self.__await_impl__()\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\websockets\\legacy\\client.py\", line 654, in __await_impl__\r\n    await protocol.handshake(\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\websockets\\legacy\\client.py\", line 329, in handshake\r\n    self.extensions = self.process_extensions(\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\websockets\\legacy\\client.py\", line 218, in process_extensions\r\n    raise NegotiationError(\r\nwebsockets.exceptions.NegotiationError: Unsupported extension: name = frame-log, params = []\r\n[2024-02-16 00:22:39.558] main.py (324) - [ERROR] : 捕捉到未知异常:Unsupported extension: name = frame-log, params = [], 请前往 https://github.com/RockChinQ/QChatGPT/issues 查找或提issue\r\nException in thread Thread-2 (run_bot_wrapper):\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\threading.py\", line 1016, in _bootstrap_inner\r\n    self.run()\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\threading.py\", line 953, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"C:\\Users\\Administrator\\Desktop\\QchatGPT\\QChatGPT-2.6.10\\QChatGPT-2.6.10\\main.py\", line 327, in run_bot_wrapper\r\n    raise e\r\n  File \"C:\\Users\\Administrator\\Desktop\\QchatGPT\\QChatGPT-2.6.10\\QChatGPT-2.6.10\\main.py\", line 287, in run_bot_wrapper\r\n    qqbot.adapter.run_sync()\r\n  File \"C:\\Users\\Administrator\\Desktop\\QchatGPT\\QChatGPT-2.6.10\\QChatGPT-2.6.10\\pkg\\qqbot\\sources\\yirimirai.py\", line 120, in run_sync\r\n    loop.run_until_complete(MiraiRunner(self.bot)._run())\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\base_events.py\", line 649, in run_until_complete\r\n    return future.result()\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\mirai\\bot.py\", line 240, in _run\r\n    await self.startup()\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\mirai\\bot.py\", line 228, in startup\r\n    await asyncio.gather(*coros)\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\mirai\\bot.py\", line 137, in startup\r\n    await self._adapter.login(self.qq)\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\mirai\\adapters\\base.py\", line 35, in wrapped\r\n    return await func(self, *args, **kwargs)\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\mirai\\adapters\\websocket.py\", line 187, in login\r\n    self.connection = await connect(self.host_name, extra_headers=headers)\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\websockets\\legacy\\client.py\", line 647, in __await_impl_timeout__\r\n    return await self.__await_impl__()\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\websockets\\legacy\\client.py\", line 654, in __await_impl__\r\n    await protocol.handshake(\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\websockets\\legacy\\client.py\", line 329, in handshake\r\n    self.extensions = self.process_extensions(\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\websockets\\legacy\\client.py\", line 218, in process_extensions\r\n    raise NegotiationError(\r\nwebsockets.exceptions.NegotiationError: Unsupported extension: name = frame-log, params = []\r\n```\r\n### 启用的插件\r\n\r\n_No response_",
      "state": "closed",
      "author": "Tudouuuuuu",
      "author_type": "User",
      "created_at": "2024-02-15T16:23:03Z",
      "updated_at": "2024-07-05T05:45:36Z",
      "closed_at": "2024-07-05T05:45:36Z",
      "labels": [
        "bug?",
        "pd: Need reproducing",
        "Stale"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/688/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/688",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/688",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:35.951184",
      "comments": [
        {
          "author": "mettenchen",
          "body": "看一下有没有装Microsoft Virtual C++",
          "created_at": "2024-02-15T19:39:11Z"
        },
        {
          "author": "Tudouuuuuu",
          "body": "装了",
          "created_at": "2024-02-16T06:50:41Z"
        },
        {
          "author": "Tudouuuuuu",
          "body": "aiofiles==23.2.1\r\naiohttp==3.9.3\r\naiosignal==1.3.1\r\nanyio==4.2.0\r\nasync-lru==2.0.4\r\nasync-timeout==4.0.3\r\nattrs==23.2.0\r\nCallingGPT==0.0.1.0\r\ncertifi==2024.2.2\r\ncharset-normalizer==3.3.2\r\ncolorama==0.4.6\r\ncolorlog==6.6.0\r\ndistro==1.9.0\r\ndulwich==0.21.7\r\nexceptiongroup==1.2.0\r\nfrozenlist==1.4.1\r\nfunc",
          "created_at": "2024-02-17T16:49:26Z"
        },
        {
          "author": "RockChinQ",
          "body": "试一下3.x的新版本",
          "created_at": "2024-05-31T07:42:13Z"
        }
      ]
    },
    {
      "issue_number": 811,
      "title": "[Bug]: 无任何插件，提示role none is not an allowed value",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\nNone\n\n### 系统环境\n\nWinserver\n\n### Python环境\n\npython 3.12\n\n### QChatGPT版本\n\nv3.2.2\n\n### 异常情况\n\n查看api后发现，机器人收到的我的消息并且发送给了openai，openai返回的信息似乎不能正确被机器人接受。将api部署至别的应用例如chatgpt-web发现是可以正常使用的，但是应用在机器人上却无法使用。\n\n### 日志信息\n\n![image](https://github.com/RockChinQ/QChatGPT/assets/111718628/87fabd2a-a8ea-45f7-9793-2d1bc686fa85)\r\n\n\n### 启用的插件\n\n无",
      "state": "closed",
      "author": "vansmart521",
      "author_type": "User",
      "created_at": "2024-06-12T12:16:44Z",
      "updated_at": "2024-07-05T05:45:13Z",
      "closed_at": "2024-07-05T05:45:13Z",
      "labels": [
        "bug?",
        "Stale"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/811/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.2.4",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/811",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/811",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:36.129718",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "最新版再试一下。",
          "created_at": "2024-07-03T14:54:57Z"
        }
      ]
    },
    {
      "issue_number": 801,
      "title": "[Bug]: 使用指令!help报错",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\nqq-botpy（QQ官方API）\n\n### 系统环境\n\nWindows Server 2019\n\n### Python环境\n\nPython 3.12.3\n\n### QChatGPT版本\n\nv3.2.2\n\n### 异常情况\n\n使用指令!help报错\n\n### 日志信息\n\n```\r\n\r\n  ___   ___ _         _    ___ ___ _____\r\n / _ \\ / __| |_  __ _| |_ / __| _ \\_   _|\r\n| (_) | (__| ' \\/ _` |  _| (_ |  _/ | |\r\n \\__\\_\\\\___|_||_\\__,_|\\__|\\___|_|   |_|\r\n\r\n⭐️开源地址: https://github.com/RockChinQ/QChatGPT\r\n📖文档地址: https://q.rkcn.top\r\n\r\n[2024-06-01 18:32:34.841] C:\\Users\\Administrator\\Desktop\\qchat\\QChatGPT\\pkg\\platform\\manager.py (108) - [INFO] :\r\n    初始化平台适配器 0: qq-botpy\r\n[2024-06-01 18:32:34.841] C:\\Users\\Administrator\\Desktop\\qchat\\QChatGPT\\pkg\\platform\\sources\\qqbotpy.py (528) - [INFO] :\r\n    运行 QQ 官方适配器\r\n[2024-06-01 18:32:54.503] C:\\Users\\Administrator\\Desktop\\qchat\\QChatGPT\\pkg\\pipeline\\process\\process.py (42) - [INFO] :\r\n    处理 person_17198369178661219439 的请求(0): !help\r\n[2024-06-01 18:32:54.506] C:\\Users\\Administrator\\Desktop\\qchat\\QChatGPT\\pkg\\pipeline\\process\\handlers\\command.py (112) - [INFO] :\r\n    命令返回: QChatGPT - 😎高稳定性、🧩支持...\r\n--- Logging error ---\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\Administrator\\Miniconda3\\Lib\\logging\\__init__.py\", line 1163, in emit\r\n    stream.write(msg + self.terminator)\r\nUnicodeEncodeError: 'gbk' codec can't encode character '\\U0001f60e' in position 157: illegal multibyte sequence\r\nCall stack:\r\n  File \"C:\\Users\\Administrator\\Desktop\\qchat\\QChatGPT\\main.py\", line 72, in <module>\r\n    asyncio.run(main_entry())\r\n  File \"C:\\Users\\Administrator\\Miniconda3\\Lib\\asyncio\\runners.py\", line 194, in run\r\n    return runner.run(main)\r\n  File \"C:\\Users\\Administrator\\Miniconda3\\Lib\\asyncio\\runners.py\", line 118, in run\r\n    return self._loop.run_until_complete(task)\r\n  File \"C:\\Users\\Administrator\\Miniconda3\\Lib\\asyncio\\base_events.py\", line 674, in run_until_complete\r\n    self.run_forever()\r\n  File \"C:\\Users\\Administrator\\Miniconda3\\Lib\\asyncio\\windows_events.py\", line 322, in run_forever\r\n    super().run_forever()\r\n  File \"C:\\Users\\Administrator\\Miniconda3\\Lib\\asyncio\\base_events.py\", line 641, in run_forever\r\n    self._run_once()\r\n  File \"C:\\Users\\Administrator\\Miniconda3\\Lib\\asyncio\\base_events.py\", line 1987, in _run_once\r\n    handle._run()\r\n  File \"C:\\Users\\Administrator\\Miniconda3\\Lib\\asyncio\\events.py\", line 88, in _run\r\n    self._context.run(self._callback, *self._args)\r\n  File \"C:\\Users\\Administrator\\Desktop\\qchat\\QChatGPT\\pkg\\pipeline\\controller.py\", line 54, in _process_query\r\n    await self.process_query(selected_query)\r\n  File \"C:\\Users\\Administrator\\Desktop\\qchat\\QChatGPT\\pkg\\pipeline\\controller.py\", line 150, in process_query\r\n    await self._execute_from_stage(0, query)\r\n  File \"C:\\Users\\Administrator\\Desktop\\qchat\\QChatGPT\\pkg\\pipeline\\controller.py\", line 130, in _execute_from_stage\r\n    async for sub_result in result:\r\n  File \"C:\\Users\\Administrator\\Desktop\\qchat\\QChatGPT\\pkg\\pipeline\\process\\process.py\", line 46, in generator\r\n    async for result in self.cmd_handler.handle(query):\r\n  File \"C:\\Users\\Administrator\\Desktop\\qchat\\QChatGPT\\pkg\\pipeline\\process\\handlers\\command.py\", line 112, in handle\r\n    self.ap.logger.info(f'命令返回: {self.cut_str(str(content[0]))}')\r\nMessage: '命令返回: QChatGPT - 😎高稳定性、🧩支持...'\r\nArguments: ()\r\n[2024-06-01 18:32:56.090] C:\\Users\\Administrator\\Desktop\\qchat\\QChatGPT\\pkg\\pipeline\\controller.py (152) - [ERROR] :\r\n    处理请求时出错 query_id=0: {{reqparam|q.rkcn.top}}\r\n```\n\n### 启用的插件\n\n无插件",
      "state": "closed",
      "author": "Chun-QiuCC",
      "author_type": "User",
      "created_at": "2024-06-01T10:45:12Z",
      "updated_at": "2024-07-05T05:44:50Z",
      "closed_at": "2024-07-05T05:44:50Z",
      "labels": [
        "bug?",
        "Stale"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/801/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.2.4",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/801",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/801",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:36.403669",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感觉像是你系统的编码问题，试一下去system.json把帮助信息内容给删了看看",
          "created_at": "2024-06-26T02:53:40Z"
        }
      ]
    },
    {
      "issue_number": 835,
      "title": "[Bug]: 群聊发送的指令插件不响应",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 系统环境\n\nwindows  server 2019 江苏\n\n### Python环境\n\npy 3.10.9\n\n### QChatGPT版本\n\nv3.2.3\n\n### 异常情况\n\n刚从2.x升级到3.x，然后按照文档部署完后把文档里的开发模板（hello插件）放到plugin然后启动机器人，但是私聊发送指令hello就能响应，群聊发送就不会响应，后台是可以看到显示处理group的消息：hello的\n\n### 日志信息\n\n_No response_\n\n### 启用的插件\n\nbot] 所有插件(1):\r\n\r\n#1 Hello \r\nhello world\r\nv0.1\r\n作者: RockChinQ",
      "state": "closed",
      "author": "SkyFutu",
      "author_type": "User",
      "created_at": "2024-07-03T16:31:48Z",
      "updated_at": "2024-07-05T05:44:23Z",
      "closed_at": "2024-07-05T05:44:23Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/835/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.2.4",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/835",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/835",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:36.614022",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "发发你的插件代码",
          "created_at": "2024-07-04T08:26:07Z"
        },
        {
          "author": "SkyFutu",
          "body": "> 发发你的插件代码\r\n\r\n```python\r\nfrom pkg.plugin.context import register, handler, llm_func, BasePlugin, APIHost, EventContext\r\nfrom pkg.plugin.events import *  # 导入事件类\r\n\r\n\r\n\"\"\"\r\n在收到私聊或群聊消息\"hello\"时，回复\"hello, <发送者id>!\"或\"hello, everyone!\"\r\n\"\"\"\r\n\r\n\r\n# 注册插件\r\n@register(name=\"Hello\", description=\"hello world\", ve",
          "created_at": "2024-07-04T08:39:40Z"
        },
        {
          "author": "RockChinQ",
          "body": "<img width=\"527\" alt=\"image\" src=\"https://github.com/RockChinQ/QChatGPT/assets/45992437/9733b6da-b2fe-49bd-8504-583592983add\">\r\n\r\n首先是得符合群内响应规则，才会进入这个 GroupNormalMessageReceived 事件。其次是，at 机器人的话，后面会自动添加一个空格，你要么改成 `msg == \" hello\"` 要么对 `msg = msg.strip()` 再去判断。\r\n\r\n如果用的是前缀规则，这样是可以被响应的（前缀规则识别`ai`）：\r\n<img",
          "created_at": "2024-07-05T04:08:45Z"
        },
        {
          "author": "SkyFutu",
          "body": "> <img alt=\"image\" width=\"527\" src=\"https://private-user-images.githubusercontent.com/45992437/345997463-9733b6da-b2fe-49bd-8504-583592983add.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MjAxNTgyMDAsI",
          "created_at": "2024-07-05T05:43:18Z"
        }
      ]
    },
    {
      "issue_number": 806,
      "title": "[Bug]: lagrange接入，主动用手机qq登录机器人并发送消息时，会触发QChatGPT，并且不断获取回复，变成了自己给自己发信息",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 系统环境\n\nLinux Win均存在\n\n### Python环境\n\npython3.10.9\n\n### QChatGPT版本\n\nv3.2.1\n\n### 异常情况\n\naiocqhttp lagrange接入，当用户主动用手机qq登录机器人并发送消息时，会触发QChatGPT，并且不断获取回复，变成了自己给自己发信息\r\n\r\n\n\n### 日志信息\n\n```\r\n\u001b[37m[2024-06-03 15:25:59.009] /root/qcgbot02/QChatGPT/pkg/pipeline/process/process.py (42) - [INFO] :\r\n    处理 person_3347276938 的请求(2): 你好\u001b[0m\r\n\u001b[37m[2024-06-03 15:26:01.331] /root/qcgbot02/QChatGPT/pkg/pipeline/process/handlers/chat.py (78) - [INFO] :\r\n    对话(2)响应: assistant: 你好！有什么可以帮...\u001b[0m\r\n\u001b[37m[2024-06-03 15:26:02.103] /root/qcgbot02/QChatGPT/pkg/pipeline/process/process.py (42) - [INFO] :\r\n    处理 person_3347276938 的请求(3): 你好！有什么可以帮助你的吗？\u001b[0m\r\n\u001b[37m[2024-06-03 15:26:04.160] /root/qcgbot02/QChatGPT/pkg/pipeline/process/handlers/chat.py (78) - [INFO] :\r\n    对话(3)响应: assistant: 非常抱歉，我是一个...\u001b[0m\r\n\u001b[37m[2024-06-03 15:26:04.797] /root/qcgbot02/QChatGPT/pkg/pipeline/process/process.py (42) - [INFO] :\r\n    处理 person_3347276938 的请求(4): 非常抱歉，我是一个语言模型，我可以帮助您回答问题、提供信息和进行谈话。请问有什么我可以帮助您的呢？\u001b[0m\r\n\u001b[37m[2024-06-03 15:26:06.600] /root/qcgbot02/QChatGPT/pkg/pipeline/process/handlers/chat.py (78) - [INFO] :\r\n    对话(4)响应: assistant: 看起来我们陷入了一...\u001b[0m\r\n\u001b[37m[2024-06-03 15:26:07.175] /root/qcgbot02/QChatGPT/pkg/pipeline/process/process.py (42) - [INFO] :\r\n    处理 person_3347276938 的请求(5): 看起来我们陷入了一个循环！您有任何问题需要帮助解决吗？随时告诉我您想了解的内容。\u001b[0m\r\n\u001b[37m[2024-06-03 15:26:09.480] /root/qcgbot02/QChatGPT/pkg/pipeline/process/handlers/chat.py (78) - [INFO] :\r\n    对话(5)响应: assistant: 哈哈，是的，看来我...\u001b[0m\r\n\u001b[37m[2024-06-03 15:26:09.850] /root/qcgbot02/QChatGPT/pkg/pipeline/process/process.py (42) - [INFO] :\r\n    处理 person_3347276938 的请求(6): 哈哈，是的，看来我们陷入了一个有趣的循环！如果您有任何问题或需要帮助，请随时告诉我，我将尽力为您提供支持和答案。\u001b[0m\r\n\u001b[37m[2024-06-03 15:26:11.953] /root/qcgbot02/QChatGPT/pkg/pipeline/process/handlers/chat.py (78) - [INFO] :\r\n    对话(6)响应: assistant: 感谢您的理解！请问...\u001b[0m\r\n\u001b[37m[2024-06-03 15:26:12.312] /root/qcgbot02/QChatGPT/pkg/pipeline/process/process.py (42) - [INFO] :\r\n    处理 person_3347276938 的请求(7): 感谢您的理解！请问有什么问题我可以帮助您解决或是需要了解的内容吗？随时和我分享您的需求。\u001b[0m\r\n\u001b[37m[2024-06-03 15:26:13.224] /root/qcgbot02/QChatGPT/pkg/core/app.py (101) - [INFO] :\r\n    程序退出.\u001b[0m\r\n```\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "the-lazy-me",
      "author_type": "User",
      "created_at": "2024-06-03T15:33:35Z",
      "updated_at": "2024-07-04T08:18:19Z",
      "closed_at": "2024-07-04T08:18:14Z",
      "labels": [
        "bug?",
        "Invalid"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/806/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.2.4",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/806",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/806",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:36.849329",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "没法复现这个问题",
          "created_at": "2024-07-04T05:20:07Z"
        }
      ]
    },
    {
      "issue_number": 809,
      "title": "[Bug]: 设置请求限速规则 rate-limit后,在群里的请求超过这个限制时,机器人不会告诉你超过了,而直接只在后台报错",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 系统环境\n\nmacOS 11.7.10 x86_64 中国大陆\n\n### Python环境\n\nPython 3.11.3\n\n### QChatGPT版本\n\nv3.2.2\n\n### 异常情况\n\n对于私聊情况,超过设定的rate-limit之后会在qq私聊正常发送:\r\n```bash\r\n请求数超过限速器设定值，已丢弃本消息。\r\n```\r\n后台也会正常提示:\r\n```bash\r\nQChatGPT/pkg/pipeline/controller.py (80) - [INFO] :\r\n    根据限速规则忽略 person:946210692 消息\r\n```\r\n,但是在群聊里超过的情况下则qq里不会发送这个消息,且后台控制台里报错:\r\n```bash\r\n/QChatGPT/pkg/pipeline/controller.py (152) - [ERROR] :\r\n    处理请求时出错 query_id=1: 'str' object has no attribute 'insert'\r\n```\r\n,我大概看了下源码,发现对象确实是变成了str,所以str.insert调用就报错,这是测试的情况:\r\n```bash\r\n0:GroupRespondRuleCheckStage---result.user_notice_type: <class 'list'>\r\n1:BanSessionCheckStage---result.user_notice_type: <class 'list'>\r\n2:PreContentFilterStage---result.user_notice_type: <class 'list'>\r\n3:PreProcessor---result.user_notice_type: <class 'list'>\r\n4:ConversationMessageTruncator---result.user_notice_type: <class 'list'>\r\n5:RequireRateLimitOccupancy---result.user_notice_type: <class 'list'>\r\n[2024-06-08 11:55:40.670] /QChatGPT/pkg/pipeline/process/process.py (42) - [INFO] :\r\n    处理 group_620844902 的请求(0): !help\r\n[2024-06-08 11:55:40.700] /QChatGPT/pkg/pipeline/process/handlers/command.py (112) - [INFO] :\r\n    命令返回: 你小子怎么又来need help了...\r\n7:ReleaseRateLimitOccupancy---result.user_notice_type: <class 'list'>\r\n8:PostContentFilterStage---result.user_notice_type: <class 'list'>\r\n10:LongTextProcessStage---result.user_notice_type: <class 'list'>\r\nsend: [bot] 你小子怎么又来need help了\r\n发送命令 !cmd 可查看命令列表\r\ntype: <class 'mirai.models.message.MessageChain'>\r\n11:SendResponseBackStage---result.user_notice_type: <class 'list'>\r\n\r\n\r\n\r\n0:GroupRespondRuleCheckStage---result.user_notice_type: <class 'list'>\r\n1:BanSessionCheckStage---result.user_notice_type: <class 'list'>\r\n2:PreContentFilterStage---result.user_notice_type: <class 'list'>\r\n3:PreProcessor---result.user_notice_type: <class 'list'>\r\n4:ConversationMessageTruncator---result.user_notice_type: <class 'list'>\r\n5:RequireRateLimitOccupancy---result.user_notice_type: <class 'str'>\r\nsend: 超速了超速了。\r\ntype: <class 'str'>\r\n[2024-06-08 11:55:47.657] /QChatGPT/pkg/pipeline/controller.py (153) - [ERROR] :\r\n    处理请求时出错 query_id=1: 'str' object has no attribute 'insert'\r\n```\r\n\r\n下面是我在源码测试的位置:\r\n/QChatGPT/pkg/pipeline/controller.py\r\n<img width=\"849\" alt=\"iShot_2024-06-08_11 32 55\" src=\"https://github.com/RockChinQ/QChatGPT/assets/62422917/1d830979-1702-4d5f-a705-c5e03e7da80b\">\r\n/QChatGPT/pkg/platform/manager.py\r\n<img width=\"1119\" alt=\"iShot_2024-06-08_11 34 36\" src=\"https://github.com/RockChinQ/QChatGPT/assets/62422917/200f063a-ac23-45b1-a624-83449fd79c89\">\r\n/QChatGPT/pkg/pipeline/entities.py\r\n<img width=\"881\" alt=\"iShot_2024-06-08_11 33 59\" src=\"https://github.com/RockChinQ/QChatGPT/assets/62422917/d51bb701-a68a-4e89-b788-ca4c8c09cb8a\">\r\n\r\n再往上查我就看不太懂了,得交给你们来了\n\n### 日志信息\n\n我是把rate-limit设置为\r\n```\r\n\"group_620844902\": {\r\n                \"window-size\": 60,\r\n                \"limit\": 1\r\n            }\r\n```\r\n然后在群里连续两次发送/ai !help来测试的\r\n```bash\r\n[2024-06-08 11:55:34.765] /QChatGPT/pkg/platform/manager.py (108) - [INFO] :\r\n    初始化平台适配器 0: aiocqhttp\r\n[2024-06-08 11:55:40.670] /QChatGPT/pkg/pipeline/process/process.py (42) - [INFO] :\r\n    处理 group_620844902 的请求(0): !help\r\n[2024-06-08 11:55:40.700] /QChatGPT/pkg/pipeline/process/handlers/command.py (112) - [INFO] :\r\n    命令返回: 有时候我也想help...\r\n[2024-06-08 11:55:47.657] /QChatGPT/pkg/pipeline/controller.py (153) - [ERROR] :\r\n    处理请求时出错 query_id=1: 'str' object has no attribute 'insert'\r\n[2024-06-08 11:57:32.400] /QChatGPT/pkg/core/app.py (101) - [INFO] :\r\n    程序退出.\r\n```\n\n### 启用的插件\n\n还没部署过插件",
      "state": "closed",
      "author": "fantastic-d5",
      "author_type": "User",
      "created_at": "2024-06-08T04:08:15Z",
      "updated_at": "2024-07-04T04:48:18Z",
      "closed_at": "2024-07-04T04:48:17Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/809/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.2.4",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/809",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/809",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:37.216607",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "已修复，会在 3.2.4 版本包含。",
          "created_at": "2024-07-04T04:48:17Z"
        }
      ]
    },
    {
      "issue_number": 836,
      "title": "[Feature]: 于platform.json配置项中增加关闭“请求失败”提示信息",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n目前仅有将完整报错提示精简为“请求失败”的配置项\"hide-exception-info\": true，\r\n需要一个不发送“请求失败”的配置项。",
      "state": "open",
      "author": "ElvisChenML",
      "author_type": "User",
      "created_at": "2024-07-04T02:56:16Z",
      "updated_at": "2024-07-04T02:56:16Z",
      "closed_at": null,
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/836/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/836",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/836",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:37.420429",
      "comments": []
    },
    {
      "issue_number": 803,
      "title": "[Bug]: 插件修改用户发言无效果",
      "body": "### 部署方式\n\nDocker部署\n\n### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 系统环境\n\nCentOS 7 美国\n\n### Python环境\n\ndocker部署\n\n### QChatGPT版本\n\n3.2.1\n\n### 异常情况\n\n![image](https://github.com/RockChinQ/QChatGPT/assets/15666692/d14ca16f-883b-4086-84e7-846cd95bedcd)\r\n修改代码如上，无效果，直接打印可以确定插件正常执行\n\n### 日志信息\n\n_No response_\n\n### 启用的插件\n\n仅自己写的插件",
      "state": "closed",
      "author": "by123456by",
      "author_type": "User",
      "created_at": "2024-06-01T15:30:13Z",
      "updated_at": "2024-07-03T15:17:00Z",
      "closed_at": "2024-07-03T15:16:45Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/803/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.2.4",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/803",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/803",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:37.420452",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "最新代码已修复，等待 3.2.4 发布。",
          "created_at": "2024-07-03T15:16:45Z"
        }
      ]
    },
    {
      "issue_number": 825,
      "title": "[Bug]: QQ 官方 API 图片识别功能不正常",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\nqq-botpy（QQ官方API）\n\n### 系统环境\n\n-\n\n### Python环境\n\n-\n\n### QChatGPT版本\n\n-\n\n### 异常情况\n\n消息链中无图片元素\n\n### 日志信息\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-06-24T09:04:14Z",
      "updated_at": "2024-07-03T14:37:05Z",
      "closed_at": "2024-07-03T14:37:05Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/825/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/825",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/825",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:37.642497",
      "comments": []
    },
    {
      "issue_number": 833,
      "title": "[Feature]: 环境特定的温馨提示",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n防呆设计",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-07-03T08:52:37Z",
      "updated_at": "2024-07-03T09:45:57Z",
      "closed_at": "2024-07-03T09:45:57Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/833/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/833",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/833",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:37.642521",
      "comments": []
    },
    {
      "issue_number": 821,
      "title": "[Bug]: ChatGPT没有返回信息",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\nyiri-mirai（Mirai）\n\n### 系统环境\n\nUbuntu 22.04\n\n### Python环境\n\nPython 3.11\n\n### QChatGPT版本\n\nv3.2.2\n\n### 异常情况\n\n输入信息后，Bot不回答任何消息。\r\n查看后台日志有接受并处理，但不返回任何信息。\n\n### 日志信息\n\n[2024-06-21 03:04:46.860] /home/garrise/QChatGPT/pkg/pipeline/process/process.py (42) - [INFO] :\r\n    处理 group_645492747 的请求(1): 你好\r\n[2024-06-21 03:04:46.860] /home/garrise/QChatGPT/pkg/pipeline/controller.py (128) - [DEBUG] :\r\n    Stage MessageProcessor processed query query_id=1 launcher_type=<LauncherTypes.GROUP: 'group'> launcher_id=645492747 sender_id=370957070 message_event=GroupMessage(message_chain=MessageChain([Source(id=-2147329964, time=datetime.datetime(1970, 1, 20, 21, 28, 59, tzinfo=datetime.timezone.utc)), Plain(' 你好')]), sender=GroupMember(id=370957070, member_name='加利斯', permission='OWNER', group=Group(id=645492747, name='哈罗测试', permission='ADMINISTRATOR'), join_timestamp=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc), last_speak_timestamp=datetime.datetime(1970, 1, 1, 0, 0, tzinfo=datetime.timezone.utc))) message_chain=MessageChain([Source(id=-2147329964, time=datetime.datetime(1970, 1, 20, 21, 28, 59, tzinfo=datetime.timezone.utc)), Plain(' 你好')]) adapter=<pkg.platform.sources.yirimirai.YiriMiraiAdapter object at 0x7f0d4e44cfa0> session=Session(launcher_type=<LauncherTypes.GROUP: 'group'>, launcher_id=645492747, sender_id=0, use_prompt_name='default', using_conversation=Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2024, 6, 21, 3, 4, 38, 934972), update_time=datetime.datetime(2024, 6, 21, 3, 4, 38, 934976), use_model=LLMModelInfo(name='gpt-4-turbo', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7f0d4f03c6a0>, requester=<pkg.provider.modelmgr.apis.chatcmpl.OpenAIChatCompletions object at 0x7f0d4f03dcf0>, tool_call_supported=True, vision_supported=True), use_funcs=[]), conversations=[Conversation(prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]), messages=[], create_time=datetime.datetime(2024, 6, 21, 3, 4, 38, 934972), update_time=datetime.datetime(2024, 6, 21, 3, 4, 38, 934976), use_model=LLMModelInfo(name='gpt-4-turbo', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7f0d4f03c6a0>, requester=<pkg.provider.modelmgr.apis.chatcmpl.OpenAIChatCompletions object at 0x7f0d4f03dcf0>, tool_call_supported=True, vision_supported=True), use_funcs=[])], create_time=datetime.datetime(2024, 6, 21, 3, 4, 38, 931774), update_time=datetime.datetime(2024, 6, 21, 3, 4, 38, 931778), semaphore=<asyncio.locks.Semaphore object at 0x7f0d4daf0490 [locked]>) messages=[] prompt=Prompt(name='default', messages=[Message(role='system', name=None, content='', tool_calls=None, tool_call_id=None)]) user_message=Message(role='user', name=None, content=[ContentElement(type='text', text=' 你好', image_url=None)], tool_calls=None, tool_call_id=None) use_model=LLMModelInfo(name='gpt-4-turbo', model_name=None, token_mgr=<pkg.provider.modelmgr.token.TokenManager object at 0x7f0d4f03c6a0>, requester=<pkg.provider.modelmgr.apis.chatcmpl.OpenAIChatCompletions object at 0x7f0d4f03dcf0>, tool_call_supported=True, vision_supported=True) use_funcs=[] resp_messages=[] resp_message_chain=[] gen\r\n[2024-06-21 03:04:46.861] /home/garrise/QChatGPT/pkg/plugin/manager.py (169) - [DEBUG] :\r\n    事件 GroupNormalMessageReceived(5) 处理完成，返回值 {}\r\n\n\n### 启用的插件\n\n无",
      "state": "closed",
      "author": "Garrise",
      "author_type": "User",
      "created_at": "2024-06-21T06:31:47Z",
      "updated_at": "2024-06-27T04:03:46Z",
      "closed_at": "2024-06-27T04:03:46Z",
      "labels": [
        "bug?",
        "Stale"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/821/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/821",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/821",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:37.642529",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "这个日志不全吧？",
          "created_at": "2024-06-21T06:34:14Z"
        },
        {
          "author": "Huoyuuu",
          "body": "我先概述一下日志内容\r\n```\r\n1. 系统成功接收并开始处理来自群组xxxxxxxxx的消息\"你好\"\r\n[2024-06-21 03:04:46.860] /home/garrise/QChatGPT/pkg/pipeline/process/process.py (42) - [INFO] :\r\n处理 group_xxxxxxxxx 的请求(1): 你好\r\n[2024-06-21 03:04:46.860] /home/garrise/QChatGPT/pkg/pipeline/controller.py (128) - [DEBUG] :\r\nStage MessageProcessor ",
          "created_at": "2024-06-21T17:30:24Z"
        }
      ]
    },
    {
      "issue_number": 822,
      "title": "[Feature]: 只有文字消息时，content以string格式发送",
      "body": "### 这是一个？\r\n\r\n现有功能优化\r\n\r\n### 详细描述\r\n\r\n目前的completion请求的content均以`[]content_part`格式发送：\r\n```json\r\n{\r\n  \"messages\": [\r\n    {\r\n      \"role\": \"system\",\r\n      \"content\": \"<system_prompt>\"\r\n    },\r\n    {\r\n      \"role\": \"user\",\r\n      \"content\": [\r\n        {\r\n          \"type\": \"text\",\r\n          \"text\": \"<user_prompt>\"\r\n        }\r\n      ]\r\n    }\r\n  ],\r\n  \"model\": \"<model_name>\",\r\n  // ... optional params\r\n}\r\n```\r\n\r\n**希望可以增加一个选项，在`content`只有`text`的情况下将所有`content`回退到string格式发送**：\r\n\r\n```json\r\n// ...\r\n    {\r\n      \"role\": \"user\",\r\n      \"content\": \"<user_prompt>\"\r\n    }\r\n// ...\r\n```\r\n\r\n这样的格式对只支持旧版OpenAI API的模型（特别是没有多模态能力的模型）会更加友好。\r\n\r\n例如： \r\n1. #817 中的`yi-large`模型\r\n2. Google Gemini API 在只有文字内容时貌似只接受 string 格式的 content 。\r\n\r\n### 替代方案\r\n还可以考虑直接使用 `enable-vision` 作判断，`enable-vision`为`false`时以string格式发送content，但是这样会破坏对仅支持`[]content_part`格式`content`的模型的兼容性",
      "state": "closed",
      "author": "cdn0x12",
      "author_type": "User",
      "created_at": "2024-06-21T15:58:45Z",
      "updated_at": "2024-06-26T02:54:44Z",
      "closed_at": "2024-06-26T02:54:44Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/822/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/822",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/822",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:37.871929",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "#818 改成了只要content内全部都是text元素就自动转换成string",
          "created_at": "2024-06-24T09:07:15Z"
        }
      ]
    },
    {
      "issue_number": 820,
      "title": "[Bug]: GPT-4o的视觉功能在私聊中正常工作，但在群聊中无法处理图片，调试后发现群聊中接收到的是字符串\"[图片]\"",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 系统环境\n\nUbuntu22.04\n\n### Python环境\n\nPython 3.10.12\n\n### QChatGPT版本\n\nv3.2.2\n\n### 异常情况\n\n### 问题标题：[Bug]: GPT-4o的视觉功能在私聊中正常工作，但在群聊中无法处理图片\r\n\r\n### 问题描述：\r\n\r\n各位，\r\n\r\n我在使用GPT-4o的视觉功能时遇到了一个问题：它在私聊中工作正常，但在群聊中无法处理图片。以下是具体情况：\r\n\r\n**私聊：**\r\n- 当我在私聊中发送图片时，GPT-4o的视觉功能可以正确处理并给出反馈。\r\n- 示例： ![私聊图片](https://github.com/RockChinQ/QChatGPT/assets/86390123/aa5dfb49-15df-4825-8d37-aaac2ce8f057)\r\n\r\n**群聊：**\r\n- 当我在群聊中发送图片时，GPT-4o的视觉功能只接收到一个字符串“[图片]”，而不是实际的图片。\r\n- 示例： ![群聊图片](https://github.com/RockChinQ/QChatGPT/assets/86390123/db88819b-16ce-4068-bbf7-cd432843d52e)\r\n\r\n**观察到的现象：**\r\n- 问题仅出现在群聊中。\r\n- 我已确保按照多模态文档中提到的打开了`enable-vision`设置。\r\n- `pipeline.json`中的response-rules设置也按照前缀或@信号配置了机器人回复消息，但问题仍未解决。\r\n- 在`pkg/provider/modelmgr/apis/chatcmpl.py`文件的 `_req` 函数体内部进行调试时，发现群聊中的图片消息在API调用前已经变成了字符串“[图片]”，这表明问题与网络或API地址无关。\r\n\r\n**调试信息：**\r\n- ![调试信息](https://github.com/RockChinQ/QChatGPT/assets/86390123/f89febab-46c6-412c-bcb6-98caee53a0fb)\r\n\r\n**总结：**\r\n- 问题似乎与私聊和群聊消息处理方式的差异有关。尽管我已按照文档进行配置，但仍无法解决此问题。我使用的是Lagrange消息平台，不知道群聊私聊中图片的不同处理方式是否和它有关。\r\n\r\n请问可以提供一些指导来解决或进一步排查这个问题吗？\r\n\r\n谢谢大家的帮助。\n\n### 日志信息\n\n私聊消息：\r\n```\r\n[2024-06-21 00:05:25.687] /root/Git/QChatGPT/pkg/pipeline/process/process.py (42) - [INFO] :\r\n    处理 person_xxxxxxxxx 的请求(2): [图片]\r\nMsg: [{'role': 'system', 'content': 'You are a helpful AI assistant.'}, {'role': 'user', 'content': [{'type': 'image_url', 'image_url': {'url': 'http://gchat.qpic.cn/offpic_new/xxxxxxxxx//xxxxxxxxx-xxxxxxxxx-CE5CCEB705BA0427AB278B921D6C8BE3/0?term=255&is_origin=0'}}]}]\r\nRequest args: {\r\n  \"model\": \"gpt-4o\",\r\n  \"messages\": [\r\n    {\r\n      \"role\": \"system\",\r\n      \"content\": \"You are a helpful AI assistant.\"\r\n    },\r\n    {\r\n      \"role\": \"user\",\r\n      \"content\": [\r\n        {\r\n          \"type\": \"image_url\",\r\n          \"image_url\": {\r\n            \"url\": \"data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAcBAMAAACjeJNyAAAAAXNSR0IArs4c6QAAACdQTFRFAAAA5eXlo1wAADKBxeXlo+XlAABcgaPF5eXFADJc5aNcXKPlgVwyI+tn1gAAACpJREFUCNdjYCAAUgUFhZBpBgYTOtOpUhCaW+IAmGZ2FBRUADGmQ2l8AAAt8gfI56R0iQAAAABJRU5ErkJggg==\"\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n}\r\nResponse: ChatCompletion(id='chatcmpl-9cEZtPve7i5iwpswgavnraQCAxnXQ', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content='The image shows an uppercase letter \"L\" from the Armenian alphabet. The Armenian script is used to write the Armenian language, and the character displayed is \"Լ,\" which corresponds to the sound [l].', role='assistant', function_call=None, tool_calls=None))], created=1718899529, model='gpt-4o-2024-05-13', object='chat.completion', system_fingerprint='fp_9cb5d38cf7', usage=CompletionUsage(completion_tokens=41, prompt_tokens=273, total_tokens=314))\r\n```\r\n\r\n\r\n群聊消息：\r\n```\r\n[2024-06-21 00:00:35.471] /root/Git/QChatGPT/pkg/pipeline/process/process.py (42) - [INFO] :\r\n分析图片内容。_xxxxxxxxx 的请求(3): [图片]\r\nRequest args: {\r\n  \"model\": \"gpt-4o\",\r\n  \"messages\": [\r\n    {\r\n      \"role\": \"system\",\r\n      \"content\": \"You are a helpful AI assistant.\"\r\n    },\r\n    {\r\n      \"role\": \"user\",\r\n      \"content\": [\r\n        {\r\n          \"type\": \"text\",\r\n          \"text\": \"[\\u56fe\\u7247]\\r\\u5206\\u6790\\u56fe\\u7247\\u5185\\u5bb9\\u3002\"\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n}\r\nResponse: ChatCompletion(id='chatcmpl-9cEVBOYkRLtIAQiviApk2hBM6DwYU', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content='很抱歉，我目前无法查看图片。但你可以描述图片的内容，我会尽力帮你分析和解答。请告诉我图片中有哪些元素或细节，这样我就可以提供更准确的帮助。', role='assistant', function_call=None, tool_calls=None))], created=1718899237, model='gpt-4o-2024-05-13', object='chat.completion', system_fingerprint='fp_f4e629d0a5', usage=CompletionUsage(completion_tokens=47, prompt_tokens=26, total_tokens=73))\r\n```\n\n### 启用的插件\n\n无",
      "state": "closed",
      "author": "Huoyuuu",
      "author_type": "User",
      "created_at": "2024-06-20T16:45:04Z",
      "updated_at": "2024-06-26T02:54:44Z",
      "closed_at": "2024-06-26T02:54:44Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/820/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/820",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/820",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:38.061068",
      "comments": [
        {
          "author": "Huoyuuu",
          "body": "尝试了将qchatgpt库删掉，重新下载，重新配置，重新启动\r\n将Lagrange消息平台删掉，下载build的最新版本，重新开跑\r\n尝试从linux平台切换到win平台\r\n\r\n私聊识图功能自始至终都能跑通\r\n群聊识图功能自始至终传入的都是**字符串\"图片\"**\r\n\r\n![3 L3HPQ}4TC`Y2 EFN0M`31](https://github.com/RockChinQ/QChatGPT/assets/86390123/4374af53-695e-4ebf-a5a1-2063021a7fd4)\r\n",
          "created_at": "2024-06-22T16:28:34Z"
        },
        {
          "author": "Huoyuuu",
          "body": "### 问题描述与分析\r\n\r\n群聊中的图片信息无法被正确处理。经过调查，确定这是由于项目代码与本地环境不兼容所致。虽然其他用户反馈系统可以正常运行，但在我的环境中问题依然存在，即使在不同操作系统和平台上也能复现。\r\n\r\n### 问题定位\r\n\r\n通过设置环境变量 `DEBUG=true` 进行调试，发现问题出现在 `Stage PreProcessor` 阶段。具体表现为 `user_message` 变量中的消息链错误地处理了图片部分，把图片链接处理成了字符串\"图片\"，而 `GroupMessage` 中的消息链却是正确的。\r\n![image](https://github.com/RockC",
          "created_at": "2024-06-22T18:03:44Z"
        },
        {
          "author": "RockChinQ",
          "body": "已在 https://github.com/RockChinQ/QChatGPT/commit/4ffa773facd578ed9b75630b9014415c0b1d1c84 修复。是群内响应(resprule)匹配前缀响应时，错误地把message_chain的纯文本用于结果输出导致的。",
          "created_at": "2024-06-26T02:20:54Z"
        }
      ]
    },
    {
      "issue_number": 817,
      "title": "[Bug]: 本地 QChatGPT 环境与新模型 yi-large 兼容性问题",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 系统环境\n\nUbuntu22.04\n\n### Python环境\n\nPython 3.10.12\n\n### QChatGPT版本\n\nv3.2.2\n\n### 异常情况\n\n### 问题描述\r\n\r\n本地 QChatGPT 环境和新模型本身都没有问题，但在引入新模型 yi-large 后，发送信息时出现错误，调试后推测是代码和yi-large存在不兼容，计划提一个pull request。\r\n\r\n### 问题详情\r\n\r\n引入新模型 yi-large，仅添加 `name` 字段 \"yi-large\"，其余参数均保持默认，并在 `provider.json` 中对 `API_KEY` 和 `BASE_URL` 做对应调整，确认对provider.json和元数据中llm-models.json的修改部分是没有问题的。但是在发送信息时出现错误。\r\n\r\n![错误截图](https://github.com/RockChinQ/QChatGPT/assets/86390123/4fa686b9-75ee-47c3-ab78-6e5eaf379e0c)\r\n\r\n尝试排查问题，yi-large 模型本身直接进行调用可以正常工作，不是 yi-large 的问题。机器人方面我之前也用过 OpenAI 和 deepseek 的模型调用，都是正常工作的，于是我推测是 yi-large 模型和代码本身不兼容。尝试输出请求内容进行调试。\r\n\r\n#### 示例请求\r\n```json\r\n{\r\n  \"model\": \"yi-large\",\r\n  \"messages\": [\r\n    {\r\n      \"role\": \"system\",\r\n      \"content\": \"<background>You are a helpful AI assistant.\\n</background>\"\r\n    },\r\n    {\r\n      \"role\": \"user\",\r\n      \"content\": [\r\n        {\r\n          \"type\": \"text\",\r\n          \"text\": \"dd\"\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n}\r\n```\r\n经过排查，从输出的 request messages 和 request args 中可以看出，user 消息的 content 字段被错误地设置为一个数组，而它应该是一个字符串。这导致了 JSON parse error 的问题，因为 OpenAI API 期望 content 是一个字符串而不是数组。代码部分需要确保 content 字段是一个字符串。而前面的输入中，user 消息的 content 字段包含了一个对象数组，而不是一个纯文本字符串。需要将这个对象数组转换为一个纯文本字符串。\r\n\r\n### 解决方案\r\n\r\n我计划提一个 pull request，在 `pkg/provider/modelmgr/apis/chatcmpl.py` 的 `call` 模块添加相关校验语句。将\r\n```python\r\nasync def call(\r\n    self,\r\n    model: entities.LLMModelInfo,\r\n    messages: typing.List[llm_entities.Message],\r\n    funcs: typing.List[tools_entities.LLMFunction] = None,\r\n) -> llm_entities.Message:\r\n    req_messages = [  # req_messages 仅用于类内，外部同步由 query.messages 进行\r\n        m.dict(exclude_none=True) for m in messages\r\n    ]\r\n```\r\n改为\r\n```python\r\nasync def call(\r\n    self,\r\n    model: entities.LLMModelInfo,\r\n    messages: typing.List[llm_entities.Message],\r\n    funcs: typing.List[tools_entities.LLMFunction] = None,\r\n) -> llm_entities.Message:\r\n    req_messages = [] # req_messages 仅用于类内，外部同步由 query.messages 进行\r\n    for m in messages:\r\n        msg_dict = m.dict(exclude_none=True)\r\n        if isinstance(msg_dict.get(\"content\"), list):\r\n            # 确保content是字符串\r\n            msg_dict[\"content\"] = \"\".join(\r\n                [part[\"text\"] for part in msg_dict[\"content\"]])\r\n        req_messages.append(msg_dict)\r\n```\r\n更正后一切正常。\n\n### 日志信息\n\nxxx@xxx:~/Git/QChatGPT# python3 main.py \r\n\r\n  ___   ___ _         _    ___ ___ _____ \r\n / _ \\ / __| |_  __ _| |_ / __| _ \\_   _|\r\n| (_) | (__| ' \\/ _` |  _| (_ |  _/ | |  \r\n \\__\\_\\\\___|_||_\\__,_|\\__|\\___|_|   |_|  \r\n\r\n⭐️开源地址: https://github.com/RockChinQ/QChatGPT\r\n📖文档地址: https://q.rkcn.top\r\n\r\n[2024-06-19 16:25:54.406] /root/Git/QChatGPT/pkg/platform/manager.py (108) - [INFO] :\r\n    初始化平台适配器 0: aiocqhttp\r\n[2024-06-19 16:25:54 +0800] [36407] [INFO] Running on http://0.0.0.0:8080 (CTRL + C to quit)\r\n[2024-06-19 16:25:55 +0800] [36407] [INFO] 127.0.0.1:49186 GET /ws 1.1 101 - 805\r\n[2024-06-19 16:25:58.208] /root/Git/QChatGPT/pkg/pipeline/process/process.py (42) - [INFO] :\r\n    处理 person_xxxxxxxxxxx 的请求(0): dd\r\n[2024-06-19 16:25:58.462] /root/Git/QChatGPT/pkg/pipeline/process/handlers/chat.py (92) - [ERROR] :\r\n    对话(0)请求失败: 模型请求失败: 请求参数错误: Error code: 400 - {'error': {'code': '400', 'message': 'JSON parse error: Cannot deserialize value of type `java.lang.String` from Array value (token `JsonToken.START_ARRAY`)', 'type': 'invalid_request_error', 'param': None}}\r\n[2024-06-19 16:25:58.895] /root/Git/QChatGPT/pkg/pipeline/controller.py (81) - [ERROR] :\r\n    模型请求失败: 请求参数错误: Error code: 400 - {'error': {'code': '400', 'message': 'JSON parse error: Cannot deserialize value of type `java.lang.String` from Array value (token `JsonToken.START_ARRAY`)', 'type': 'invalid_request_error', 'param': None}}\r\n\n\n### 启用的插件\n\n无",
      "state": "closed",
      "author": "Huoyuuu",
      "author_type": "User",
      "created_at": "2024-06-19T09:18:55Z",
      "updated_at": "2024-06-26T02:54:44Z",
      "closed_at": "2024-06-26T02:54:44Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/817/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/817",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/817",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:38.288648",
      "comments": [
        {
          "author": "Huoyuuu",
          "body": "这里的解决方案是不完备的，只适合文本模型，图像处理部分的内容应该需要进一步的考量。",
          "created_at": "2024-06-19T10:53:05Z"
        }
      ]
    },
    {
      "issue_number": 810,
      "title": "[Bug]: 为单个群聊设置特定的响应规则时，并未响应",
      "body": "### 部署方式\r\n\r\n手动部署\r\n\r\n### 消息平台适配器\r\n\r\naiocqhttp（使用 OneBot 协议接入的）\r\n\r\n### 系统环境\r\n\r\narchlinux、x86_64、香港\r\n\r\n### Python环境\r\n\r\nPython 3.12.3\r\n\r\n### QChatGPT版本\r\n\r\nv3.2.2\r\n\r\n### 异常情况\r\n\r\n为单个群聊设置特定的响应规则，并未响应。同样的写法，只在default里面有响应。\r\n```json\r\n    \"respond-rules\": {\r\n        \"default\": {\r\n            \"at\": true,\r\n            \"prefix\": [\r\n                \"/ai\",\r\n                \"!ai\",\r\n                \"！ai\",\r\n                \"ai\",\r\n                \"!1test\"\r\n            ],\r\n            \"regexp\": [],\r\n            \"random\": 0.0\r\n        },\r\n        \"10****19\": {\r\n            \"at\": true,\r\n            \"prefix\": [\r\n                \"/ai\",\r\n                \"!ai\",\r\n                \"！ai\",\r\n                \"ai\",\r\n                \"!2test\"\r\n            ],\r\n            \"regexp\": [],\r\n            \"random\": 0.0\r\n        }\r\n    },\r\n```\r\n同一个群里面，只有 `!1test` 会有响应，而 `!2test` 则无响应，其他如正则也是一样，只有 `default` 里才会有响应。\r\n\r\n### 日志信息\r\n\r\n**napcat消息**：\r\n```\r\n2024-06-11 21:26:03 [INFO] bot(****)\r\n群[五星好公民(10****19)] baitwo02(****): !1test 这是一个测试，你只需要回答收到就好\r\n\r\n\r\n2024-06-11 21:26:05 [INFO] bot(****)\r\n发送消息 给群聊 群[五星好公民(10****19)] : 收到。\r\n\r\n\r\n2024-06-11 21:26:09 [INFO] bot(****)\r\n群[五星好公民(10****19)] baitwo02(****): !2test 这是一个测试，你只需要回答收到就好\r\n\r\n\r\n2024-06-11 21:27:15 [INFO] bot(****)\r\n群[五星好公民(10****19)] baitwo02(****): 终止\r\n\r\n```\r\n\r\n**QChatGPT控制台**：\r\n```\r\nbaitwo02@arch-ycy ~/qqbot/QChatGPT (master)\r\n❯ python3 main.py                                                                                                                                                              (qchatgpt)\r\n\r\n  ___   ___ _         _    ___ ___ _____\r\n / _ \\ / __| |_  __ _| |_ / __| _ \\_   _|\r\n| (_) | (__| ' \\/ _` |  _| (_ |  _/ | |\r\n \\__\\_\\\\___|_||_\\__,_|\\__|\\___|_|   |_|\r\n\r\n⭐开源地址: https://github.com/RockChinQ/QChatGPT\r\n📖文档地址: https://q.rkcn.top\r\n\r\n[2024-06-11 21:25:50.862] /home/baitwo02/qqbot/QChatGPT/pkg/platform/manager.py (108) - [INFO] :\r\n    初始化平台适配器 0: aiocqhttp\r\n[2024-06-11 21:25:50 +0800] [549765] [INFO] Running on http://0.0.0.0:8080 (CTRL + C to quit)\r\n[2024-06-11 21:25:53 +0800] [549765] [INFO] 127.0.0.1:46098 GET /ws 1.1 101 - 4293\r\n[2024-06-11 21:26:03.972] /home/baitwo02/qqbot/QChatGPT/pkg/pipeline/process/process.py (42) - [INFO] :\r\n    处理 group_10****19 的请求(0): 这是一个测试，你只需要回答收到就好\r\n[2024-06-11 21:26:05.178] /home/baitwo02/qqbot/QChatGPT/pkg/pipeline/process/handlers/chat.py (78) - [INFO] :\r\n    对话(0)响应: assistant: 收到。\r\n[2024-06-11 21:29:00 +0800] [549765] [INFO] 205.210.31.86:58110 GET / 1.1 405 153 2948\r\n[2024-06-11 21:29:00 +0800] [549765] [INFO] 205.210.31.86:58110 GET / 1.1 - - 3998\r\n```\r\n\r\n### 启用的插件\r\n\r\n[bot] 所有插件(0):",
      "state": "closed",
      "author": "baitwo02",
      "author_type": "User",
      "created_at": "2024-06-11T13:34:28Z",
      "updated_at": "2024-06-26T02:54:43Z",
      "closed_at": "2024-06-26T02:54:43Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/810/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/810",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/810",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:38.511260",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "已修复，将在3.2.3 发布",
          "created_at": "2024-06-26T02:37:31Z"
        }
      ]
    },
    {
      "issue_number": 816,
      "title": "[Bug]: 删掉遥测服务器导致启动失败",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\nNone\n\n### 系统环境\n\nWindows10 ltsc 中国四川\n\n### Python环境\n\npython 3.10.9\n\n### QChatGPT版本\n\nv3.2.2\n\n### 异常情况\n\n我把\"qcg-center-url\": \"https://api.qchatgpt.rockchin.top/api/v2\"改成\"qcg-center-url\": null。启动报错\r\n![f31c02d1612ae6c356a51de89373971d](https://github.com/RockChinQ/QChatGPT/assets/129247570/2a9204f3-1c55-4982-9723-e3f032ccf88a)\n\n### 日志信息\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "bobandbrony",
      "author_type": "User",
      "created_at": "2024-06-19T05:17:51Z",
      "updated_at": "2024-06-26T02:26:46Z",
      "closed_at": "2024-06-26T02:26:46Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/816/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/816",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/816",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:38.730855",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "所以结果就是不能删，你要是想避免发送遥测数据，把`\"report-usage\": true,`就可以了",
          "created_at": "2024-06-26T02:26:46Z"
        }
      ]
    },
    {
      "issue_number": 814,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nWaifu\n\n### 插件代码库地址\n\nhttps://github.com/ElvisChenML/Waifu\n\n### 插件简介\n\n用于创建真实感聊天机器人，探索真实的聊天体验。",
      "state": "closed",
      "author": "ElvisChenML",
      "author_type": "User",
      "created_at": "2024-06-18T10:30:12Z",
      "updated_at": "2024-06-26T02:25:20Z",
      "closed_at": "2024-06-26T02:25:19Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/814/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 1,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/814",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/814",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:43.878597",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！已加到星标集：https://github.com/stars/RockChinQ/lists/qchatgpt-%E6%8F%92%E4%BB%B6",
          "created_at": "2024-06-26T02:25:19Z"
        }
      ]
    },
    {
      "issue_number": 807,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\ngpt-vits\n\n### 插件代码库地址\n\nhttps://github.com/logos000/vits.git\n\n### 插件简介\n\n通过本地gpts-vits 的api接口提供本地语音推理",
      "state": "closed",
      "author": "logos000",
      "author_type": "User",
      "created_at": "2024-06-06T05:32:47Z",
      "updated_at": "2024-06-26T02:24:07Z",
      "closed_at": "2024-06-26T02:24:07Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/807/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/807",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/807",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:44.061357",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献！已加到星标集：https://github.com/stars/RockChinQ/lists/qchatgpt-%E6%8F%92%E4%BB%B6",
          "created_at": "2024-06-26T02:24:07Z"
        }
      ]
    },
    {
      "issue_number": 815,
      "title": "[Bug]: 无法启动",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 系统环境\n\nWindows10 ltsc 中国四川\n\n### Python环境\n\npython 3.10.9\n\n### QChatGPT版本\n\nv3.2.2\n\n### 异常情况\n\n无法启动，配置文件都是填好了的\n\n### 日志信息\n\nPS D:\\chatbot\\44940****\\QChatGPT-3.2.2> python main.py\r\n\r\n  ___   ___ _         _    ___ ___ _____\r\n / _ \\ / __| |_  __ _| |_ / __| _ \\_   _|\r\n| (_) | (__| ' \\/ _` |  _| (_ |  _/ | |\r\n \\__\\_\\\\___|_||_\\__,_|\\__|\\___|_|   |_|\r\n\r\n⭐️开源地址: https://github.com/RockChinQ/QChatGPT\r\n📖文档地址: https://q.rkcn.top\r\n\r\nTraceback (most recent call last):\r\n  File \"D:\\chatbot\\44940****\\QChatGPT-3.2.2\\pkg\\core\\boot.py\", line 42, in main\r\n    app_inst = await make_app()\r\n  File \"D:\\chatbot\\44940****\\QChatGPT-3.2.2\\pkg\\core\\boot.py\", line 33, in make_app\r\n    await stage_inst.run(ap)\r\n  File \"D:\\chatbot\\44940****\\QChatGPT-3.2.2\\pkg\\core\\stages\\build_app.py\", line 35, in run\r\n    center_v2_api = center_v2.V2CenterAPI(\r\n  File \"D:\\chatbot\\44940****\\QChatGPT-3.2.2\\pkg\\audit\\center\\v2.py\", line 32, in __init__\r\n    self.main = main.V2MainDataAPI(backend_url, ap)\r\n  File \"D:\\chatbot\\44940****\\QChatGPT-3.2.2\\pkg\\audit\\center\\groups\\main.py\", line 12, in __init__\r\n    super().__init__(prefix+\"/main\", ap)\r\nTypeError: unsupported operand type(s) for +: 'NoneType' and 'str'\n\n### 启用的插件\n\n无",
      "state": "closed",
      "author": "bobandbrony",
      "author_type": "User",
      "created_at": "2024-06-18T17:15:23Z",
      "updated_at": "2024-06-19T05:13:54Z",
      "closed_at": "2024-06-19T05:13:54Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/815/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/815",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/815",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:45.272883",
      "comments": [
        {
          "author": "bobandbrony",
          "body": "已解决，原因是我把遥测数据服务器删了",
          "created_at": "2024-06-19T05:13:54Z"
        }
      ]
    },
    {
      "issue_number": 813,
      "title": "[Feature]: 请求 provider.yaml 中配置的相关接口时加上重试",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n目前请求 openai 接口经常由于网络等原因出现请求失败的错误，希望通过增加重试机制来减少该问题出现概率。",
      "state": "open",
      "author": "kincoy",
      "author_type": "User",
      "created_at": "2024-06-18T04:21:01Z",
      "updated_at": "2024-06-18T04:21:01Z",
      "closed_at": null,
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/813/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/813",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/813",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:45.480744",
      "comments": []
    },
    {
      "issue_number": 742,
      "title": "[Feature]: qq号黑名单",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n实现针对qq号的黑名单。例如开启白名单后，白名单群聊中，在黑名单qq号的消息会被忽略",
      "state": "open",
      "author": "bright141",
      "author_type": "User",
      "created_at": "2024-03-26T06:34:38Z",
      "updated_at": "2024-06-01T15:03:09Z",
      "closed_at": null,
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/742/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "RockChinQ"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/742",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/742",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:45.480763",
      "comments": [
        {
          "author": "bobandbrony",
          "body": "有一种解决方案，在限速规则那里添加“黑名单”QQ号，把速度改成0",
          "created_at": "2024-06-01T15:03:08Z"
        }
      ]
    },
    {
      "issue_number": 754,
      "title": "[Feature]: 允许内容函数打断请求",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n内容函数可能需要直接返回自然语言结果给用户，此时应该允许内容函数直接打断llm请求推进过程，直接进入下一个 pipeline_stage。",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-04-08T03:07:34Z",
      "updated_at": "2024-05-31T07:48:10Z",
      "closed_at": "2024-05-31T07:48:10Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/754/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/754",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/754",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:45.682140",
      "comments": []
    },
    {
      "issue_number": 717,
      "title": "[Feature]: 希望添加私聊响应规则或私聊响应开关",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n目前只有群聊响应规则和忽略规则，私聊则是必定响应，在双开bot和某些情况下影响私聊调试，可否添加一个私聊响应规则或者私聊响应开关？\r\n\r\n另外可能还需要用到私聊白名单和黑名单，对bot的好友使用进行管控\r\n\r\nexample：\r\n![04BFAA62EF6EF9FCBF79E7445BF71991](https://github.com/RockChinQ/QChatGPT/assets/52225526/7e513762-29f4-4f6d-ad0c-413a50f1184b)\r\n",
      "state": "closed",
      "author": "murasamme",
      "author_type": "User",
      "created_at": "2024-03-11T08:19:00Z",
      "updated_at": "2024-05-31T07:41:34Z",
      "closed_at": "2024-05-31T07:41:33Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/717/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/717",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/717",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:45.682272",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "黑白名单现在支持的: https://qchatgpt.rockchin.top/posts/config/pipeline.html#%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6-access-control\r\n\r\n私聊响应规则就不做了，可以自己写一个 内容过滤器 来实现：https://qchatgpt.rockchin.top/posts/plugin/extension.html#%E5%86%85%E5%AE%B9%E8%BF%87%E6%BB%A4%E5%99%A8",
          "created_at": "2024-05-31T07:41:34Z"
        }
      ]
    },
    {
      "issue_number": 799,
      "title": "[Feature]: 启动失败时输出完整traceback",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n要不然不知道具体啥问题",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-05-31T06:32:40Z",
      "updated_at": "2024-05-31T07:38:02Z",
      "closed_at": "2024-05-31T07:38:02Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/799/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/799",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/799",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:45.885667",
      "comments": []
    },
    {
      "issue_number": 798,
      "title": "[Bug]: 模型请求失败",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 系统环境\n\nArch Linux (中国大陆)\n\n### Python环境\n\nPython 3.12\n\n### QChatGPT版本\n\nv3.2.1\n\n### 异常情况\n\n安装好环境后运行`python main.py`, 无法成功调用模型进行对话\r\n\r\n采用的llm engine为[tabbyAPI](https://github.com/theroyallab/tabbyAPI)\n\n### 日志信息\n\nQChatGPT输出\r\n\r\n```shell\r\n\r\n  ___   ___ _         _    ___ ___ _____ \r\n / _ \\ / __| |_  __ _| |_ / __| _ \\_   _|\r\n| (_) | (__| ' \\/ _` |  _| (_ |  _/ | |  \r\n \\__\\_\\\\___|_||_\\__,_|\\__|\\___|_|   |_|  \r\n\r\n⭐️开源地址: https://github.com/RockChinQ/QChatGPT\r\n📖文档地址: https://q.rkcn.top\r\n\r\n[2024-05-30 16:15:13.240] /home/orion/repo/qchatGPT/pkg/platform/manager.py (108) - [INFO] :\r\n    初始化平台适配器 0: aiocqhttp\r\n[2024-05-30 16:15:13 +0800] [18932] [INFO] Running on http://127.0.0.1:9999 (CTRL + C to quit)\r\n[2024-05-30 16:15:15 +0800] [18932] [INFO] 127.0.0.1:55080 GET /ws 1.1 101 - 1918\r\n[2024-05-30 16:15:20.946] /home/orion/repo/qchatGPT/pkg/pipeline/process/process.py (42) - [INFO] :\r\n    处理 person_753959614 的请求(2): 你好\r\n[2024-05-30 16:15:31.654] /home/orion/repo/qchatGPT/pkg/pipeline/process/handlers/chat.py (92) - [ERROR] :\r\n    对话(2)请求失败: 模型请求失败: 请求错误: Error code: 422 - {'detail': [{'type': 'string_type', 'loc': ['body', 'messages', 'str'], 'msg': 'Input should be a valid string', 'input': [{'role': 'system', 'content': ''}, {'role': 'user', 'content': [{'type': 'text', 'text': '你好'}]}]}, {'type': 'string_type', 'loc': ['body', 'messages', 'list[dict[str,str]]', 1, 'content'], 'msg': 'Input should be a valid string', 'input': [{'type': 'text', 'text': '你好'}]}]}\r\n[2024-05-30 16:15:44.470] /home/orion/repo/qchatGPT/pkg/pipeline/controller.py (81) - [ERROR] :\r\n    模型请求失败: 请求错误: Error code: 422 - {'detail': [{'type': 'string_type', 'loc': ['body', 'messages', 'str'], 'msg': 'Input should be a valid string', 'input': [{'role': 'system', 'content': ''}, {'role': 'user', 'content': [{'type': 'text', 'text': '你好'}]}]}, {'type': 'string_type', 'loc': ['body', 'messages', 'list[dict[str,str]]', 1, 'content'], 'msg': 'Input should be a valid string', 'input': [{'type': 'text', 'text': '你好'}]}]}\r\n```\r\n\r\ntabbyAPI输出\r\n\r\n```shell\r\nINFO:     127.0.0.1:60088 - \"POST /v1/chat/completions HTTP/1.1\" 422\r\n```\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "Orion-zhen",
      "author_type": "User",
      "created_at": "2024-05-30T08:20:33Z",
      "updated_at": "2024-05-30T08:40:11Z",
      "closed_at": "2024-05-30T08:25:25Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 11,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/798/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/798",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/798",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:45.885686",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "azure渠道这几天有问题，你的上游是azure所有就会报错。换其他的接口试试看",
          "created_at": "2024-05-30T08:25:25Z"
        },
        {
          "author": "Orion-zhen",
          "body": "但是我接入的是本地llm啊, 没有采用任何联网模型",
          "created_at": "2024-05-30T08:27:12Z"
        },
        {
          "author": "RockChinQ",
          "body": "本地llm啊，什么模型",
          "created_at": "2024-05-30T08:28:12Z"
        },
        {
          "author": "Orion-zhen",
          "body": "llama3-70b",
          "created_at": "2024-05-30T08:30:01Z"
        },
        {
          "author": "RockChinQ",
          "body": "你元数据咋写的，确保元数据里这个模型的 `vision-supported` 是 `false`，或者尝试修改 `data/config/provider.json`里的`enable-vision`为`false`",
          "created_at": "2024-05-30T08:31:06Z"
        }
      ]
    },
    {
      "issue_number": 796,
      "title": "[Feature]: 添加JSON配置文件语法检查",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n有语法错误时检查并提示",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-05-29T08:58:02Z",
      "updated_at": "2024-05-29T13:11:41Z",
      "closed_at": "2024-05-29T13:11:41Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/796/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/796",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/796",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:46.148421",
      "comments": []
    },
    {
      "issue_number": 795,
      "title": "[Feature]: 调用工具时，assistant 返回的空content消息不应被提示给用户",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n```bash\r\n[2024-05-29 11:05:02.505] /root/code/python/QChatGPT/pkg/pipeline/process/handlers/chat.py (78) - [INFO] :\r\n    对话(0)响应: assistant:\r\n```\r\n\r\n这时message_chain 为空字符串，用户会收到\r\n\r\n<img width=\"300\" alt=\"image\" src=\"https://github.com/RockChinQ/QChatGPT/assets/45992437/47d22e6c-7620-447e-90a9-22bf985c6ca4\">\r\n",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-05-29T03:07:15Z",
      "updated_at": "2024-05-29T13:01:10Z",
      "closed_at": "2024-05-29T13:01:09Z",
      "labels": [
        "eh: Improve",
        "m: Session"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/795/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/795",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/795",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:46.148440",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "并发症\r\n![d1fb05723097ec4d0d1aceaa914bbef7](https://github.com/RockChinQ/QChatGPT/assets/45992437/35b9827b-fc3a-4b0c-b519-6be299dcdb9d)\r\n\r\n![b7e0897f2187bbc50ab388918487e339](https://github.com/RockChinQ/QChatGPT/assets/45992437/a124b2bb-e4a1-4207-a665-6fb1febd4813)\r\n",
          "created_at": "2024-05-29T08:42:49Z"
        }
      ]
    },
    {
      "issue_number": 766,
      "title": "[Feature]: 提供 上下文 tokens/回合 限制器的扩展性",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n支持插件实现",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-05-12T09:25:23Z",
      "updated_at": "2024-05-29T12:39:02Z",
      "closed_at": "2024-05-29T12:39:02Z",
      "labels": [
        "eh: Improve",
        "m: Session"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/766/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 1
      },
      "assignees": [],
      "milestone": "3.3",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/766",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/766",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:46.375618",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "3.2.2发",
          "created_at": "2024-05-29T12:39:02Z"
        }
      ]
    },
    {
      "issue_number": 791,
      "title": "[Feature]: 对请求限速规则进一步升级",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n现在只能限制1分钟的请求，希望能增加1h和1d的请求限制",
      "state": "closed",
      "author": "bobandbrony",
      "author_type": "User",
      "created_at": "2024-05-25T15:35:54Z",
      "updated_at": "2024-05-26T02:34:34Z",
      "closed_at": "2024-05-26T02:34:24Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/791/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/791",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/791",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:46.580585",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "有道理",
          "created_at": "2024-05-26T01:14:24Z"
        },
        {
          "author": "RockChinQ",
          "body": "3.2.2发",
          "created_at": "2024-05-26T02:34:33Z"
        }
      ]
    },
    {
      "issue_number": 790,
      "title": "[Bug]: 插件安装失败: 'NoneType' object is not subscriptable",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 系统环境\n\nWin10 上海\n\n### Python环境\n\nPython 3.11\n\n### QChatGPT版本\n\nv3.2.1\n\n### 异常情况\n\n[bot] 插件安装失败: 'NoneType' object is not subscriptable\n\n### 日志信息\n\n[2024-05-25 18:32:01.782] D:\\QChatGPT\\pkg\\pipeline\\process\\handlers\\command.py (112) - [INFO] :\r\n    命令返回: 正在安装插件...\r\nTraceback (most recent call last):\r\n  File \"D:\\QChatGPT\\pkg\\command\\operators\\plugin.py\", line 59, in execute\r\n    await self.ap.plugin_mgr.install_plugin(repo)\r\n  File \"D:\\QChatGPT\\pkg\\plugin\\manager.py\", line 69, in install_plugin\r\n    await self.installer.install_plugin(plugin_source)\r\n  File \"D:\\QChatGPT\\pkg\\plugin\\installers\\github.py\", line 100, in install_plugin\r\n    repo_label = await self.download_plugin_source_code(plugin_source, \"plugins/\")\r\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"D:\\QChatGPT\\pkg\\plugin\\installers\\github.py\", line 39, in download_plugin_source_code\r\n    target_path += repo[1]\r\n                   ~~~~^^^\r\nTypeError: 'NoneType' object is not subscriptable\r\n[2024-05-25 18:32:02.313] D:\\QChatGPT\\pkg\\pipeline\\process\\handlers\\command.py (85) - [INFO] :\r\n    命令(9)报错: 插件安装失败: 'NoneType' o...\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "hhhhhge",
      "author_type": "User",
      "created_at": "2024-05-25T10:34:06Z",
      "updated_at": "2024-05-25T11:46:52Z",
      "closed_at": "2024-05-25T11:46:52Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 10,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/790/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/790",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/790",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:46.787616",
      "comments": [
        {
          "author": "hhhhhge",
          "body": "怎么正则匹配还不匹配gitee或者其他的呢，还有我的git下载的镜像地址\r\n",
          "created_at": "2024-05-25T10:39:24Z"
        },
        {
          "author": "RockChinQ",
          "body": "这个是用GitHub api下载的，不是clone，所以不支持gitee和其他镜像。建议你到plugins/目录下直接自己clone插件代码。别忘了安装插件的依赖",
          "created_at": "2024-05-25T10:43:41Z"
        },
        {
          "author": "hhhhhge",
          "body": "from git import Repo\r\n\r\n# 目标克隆目录\r\nclone_dir = '/path/to/clone/directory'\r\n# Git 仓库 URL\r\nrepo_url = 'https://github.com/user/repo.git'\r\n\r\n# 克隆仓库\r\nRepo.clone_from(repo_url, clone_dir)\r\n\r\nprint(f\"Repository cloned to {clone_dir}\")\r\n\r\n",
          "created_at": "2024-05-25T11:03:31Z"
        },
        {
          "author": "hhhhhge",
          "body": "不知道gpt给的这个好不好用\r\n",
          "created_at": "2024-05-25T11:03:43Z"
        },
        {
          "author": "hhhhhge",
          "body": "没毛病",
          "created_at": "2024-05-25T11:04:13Z"
        }
      ]
    },
    {
      "issue_number": 788,
      "title": "[Bug]: 平台适配器运行出错: [Errno 99] Cannot assign requested address",
      "body": "### 部署方式\n\nDocker部署\n\n### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 系统环境\n\nlinux x64 大陆\n\n### Python环境\n\npython 3.10\n\n### QChatGPT版本\n\nv3.2.1\n\n### 异常情况\n\n之前用的go-cqhttp正常，后来掉线登不上了，换成了lagrange\r\n\r\nQchatGPT删除了原来的配置，更新到最新版本\r\n\r\nlagrange启动成功了，后台可以收到消息。但是QchatGPT连不上。\r\n\r\n\r\n使用的Lagrange 官方docker版本。根据wiki配置\r\nappsettings.json：\r\n```\r\n    \"Implementations\": [\r\n        {\r\n            \"Type\": \"ReverseWebSocket\",\r\n            \"Host\": \"ws://127.0.0.1\",\r\n            \"Port\": 38080,\r\n            \"Suffix\": \"/ws\",\r\n            \"ReconnectInterval\": 5000,\r\n            \"HeartBeatInterval\": 5000,\r\n            \"AccessToken\": \"\"\r\n        }\r\n```\r\n\r\nQchatGPT配置：\r\n```\r\n       {\r\n            \"adapter\": \"aiocqhttp\",\r\n            \"enable\": true,\r\n            \"host\": \"10.0.0.10\",\r\n            \"port\": 38080,\r\n            \"access-token\": \"\"\r\n        }\r\n```\n\n### 日志信息\n\nQchatGPT日志：\r\n```\r\n\u001b[37m[2024-05-24 10:18:11.159] /app/pkg/platform/manager.py (108) - [INFO] :\r\n    初始化平台适配器 0: aiocqhttp\u001b[0m\r\n\u001b[31m[2024-05-24 10:18:11.176] /app/pkg/platform/manager.py (174) - [ERROR] :\r\n    平台适配器运行出错: [Errno 99] Cannot assign requested address\u001b[0m\r\n```\r\n\r\nlangr日志：\r\n```\r\nLagrange.OneBot.Core.Network.Service.ReverseWSService[4]\r\n[ReverseWSService] Client reconnecting at interval of 5000\r\n```\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "crossgg",
      "author_type": "User",
      "created_at": "2024-05-24T11:53:21Z",
      "updated_at": "2024-05-24T12:20:44Z",
      "closed_at": "2024-05-24T12:20:44Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/788/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/788",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/788",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:46.969416",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "platform.json里面监听0.0.0.0就行了",
          "created_at": "2024-05-24T11:54:40Z"
        },
        {
          "author": "crossgg",
          "body": "> platform\r\n\r\n可以了非常感谢。\r\n我理解错了，以为和go-cqhttp一样，是开放go-cqhttp容器的端口给 QchatGPT连接。\r\n这个是 是要Qchatgpt容器开放端口给`Lagrange` 连接",
          "created_at": "2024-05-24T12:20:44Z"
        }
      ]
    },
    {
      "issue_number": 782,
      "title": "[Feature]: 文档说明插件不再支持消息链返回",
      "body": "### 这是一个？\r\n\r\n现有功能优化\r\n\r\n### 详细描述\r\n\r\n或者仍允许传递消息链，但需测试 纯文本、url图片、base64图片的情况",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-05-17T09:00:27Z",
      "updated_at": "2024-05-18T12:14:56Z",
      "closed_at": "2024-05-18T12:14:25Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/782/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.3",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/782",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/782",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:47.202928",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "#785 仍然继续支持插件传递 消息链",
          "created_at": "2024-05-18T12:14:56Z"
        }
      ]
    },
    {
      "issue_number": 780,
      "title": "[Bug]: Message 对象转换 mirai 消息链对象时未处理base64格式的图片",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 系统环境\n\n/\n\n### Python环境\n\n/\n\n### QChatGPT版本\n\n3.2.0.1\n\n### 异常情况\n\nhttps://github.com/RockChinQ/QChatGPT/blob/abbd15d5cc9cae4de21c04a13dd6198b98d6e478/pkg/provider/entities.py#L97-L100\n\n### 日志信息\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-05-17T08:45:23Z",
      "updated_at": "2024-05-18T12:14:25Z",
      "closed_at": "2024-05-18T12:14:25Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/780/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.3",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/780",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/780",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:47.472727",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "url获取的也不对，应该是 ce.image_url.url",
          "created_at": "2024-05-17T08:46:16Z"
        }
      ]
    },
    {
      "issue_number": 781,
      "title": "[Feature]: 删除多个地方残留的 config.py 字段",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n-",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-05-17T08:52:33Z",
      "updated_at": "2024-05-18T10:52:52Z",
      "closed_at": "2024-05-18T10:52:52Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/781/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.3",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/781",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/781",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:47.658803",
      "comments": []
    },
    {
      "issue_number": 784,
      "title": "[Bug]: 无法开启",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\nNakuru（go-cqhttp）\n\n### 系统环境\n\nWindows10 ltsc 中国四川\n\n### Python环境\n\npython 3.10.9\n\n### QChatGPT版本\n\nv3.2.0\n\n### 异常情况\n\n原因未知，platform.json的内容是这样的\r\n{\r\n    \"access-control\":{\r\n        \"mode\": \"blacklist\",\r\n        \"blacklist\": [],\r\n        \"whitelist\": []\r\n    },\r\n    \"respond-rules\": {\r\n        \"default\": {\r\n            \"at\": true,\r\n            \"prefix\": [\r\n                \"\"\r\n            ],\r\n            \"regexp\": [],\r\n            \"random\": 0.0\r\n        }\r\n    },\r\n    \"income-msg-check\": false,\r\n    \"ignore-rules\": {\r\n        \"prefix\": [\"/\"],\r\n        \"regexp\": []\r\n    },\r\n    \"check-sensitive-words\": false,\r\n    \"baidu-cloud-examine\": {\r\n        \"enable\": false,\r\n        \"api-key\": \"\",\r\n        \"api-secret\": \"\"\r\n    },\r\n    \"rate-limit\": {\r\n        \"strategy\": \"drop\",\r\n        \"algo\": \"fixwin\",\r\n        \"fixwin\": {\r\n            \"default\": 60\r\n        }\r\n    },\r\n\t\"submit-messages-tokens\": 4096,\r\n}\n\n### 日志信息\n\n  ___   ___ _         _    ___ ___ _____\r\n / _ \\ / __| |_  __ _| |_ / __| _ \\_   _|\r\n| (_) | (__| ' \\/ _` |  _| (_ |  _/ | |\r\n \\__\\_\\\\___|_||_\\__,_|\\__|\\___|_|   |_|\r\n\r\n⭐️开源地址: https://github.com/RockChinQ/QChatGPT\r\n�文档地址: https://q.rkcn.top\r\n\r\nTraceback (most recent call last):\r\n  File \"D:\\chatbot\\3175216623\\QChatGPT-3.2.0\\main.py\", line 72, in <module>\r\n    asyncio.run(main_entry())\r\n  File \"C:\\Users\\Admin\\miniconda3\\Lib\\asyncio\\runners.py\", line 190, in run\r\n    return runner.run(main)\r\n           ^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\Admin\\miniconda3\\Lib\\asyncio\\runners.py\", line 118, in run\r\n    return self._loop.run_until_complete(task)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\Admin\\miniconda3\\Lib\\asyncio\\base_events.py\", line 653, in run_until_complete\r\n    return future.result()\r\n           ^^^^^^^^^^^^^^^\r\n  File \"D:\\chatbot\\3175216623\\QChatGPT-3.2.0\\main.py\", line 49, in main_entry\r\n    await boot.main()\r\n  File \"D:\\chatbot\\3175216623\\QChatGPT-3.2.0\\pkg\\core\\boot.py\", line 38, in main\r\n    app_inst = await make_app()\r\n               ^^^^^^^^^^^^^^^^\r\n  File \"D:\\chatbot\\3175216623\\QChatGPT-3.2.0\\pkg\\core\\boot.py\", line 30, in make_app\r\n    await stage_inst.run(ap)\r\n  File \"D:\\chatbot\\3175216623\\QChatGPT-3.2.0\\pkg\\core\\stages\\load_config.py\", line 16, in run\r\n    ap.pipeline_cfg = await config.load_json_config(\"data/config/pipeline.json\", \"templates/pipeline.json\", completion=False)\r\n                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"D:\\chatbot\\3175216623\\QChatGPT-3.2.0\\pkg\\config\\manager.py\", line 55, in load_json_config\r\n    await cfg_mgr.load_config(completion=completion)\r\n  File \"D:\\chatbot\\3175216623\\QChatGPT-3.2.0\\pkg\\config\\manager.py\", line 24, in load_config\r\n    self.data = await self.file.load(completion=completion)\r\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"D:\\chatbot\\3175216623\\QChatGPT-3.2.0\\pkg\\config\\impls\\json.py\", line 40, in load\r\n    cfg = json.load(f)\r\n          ^^^^^^^^^^^^\r\n  File \"C:\\Users\\Admin\\miniconda3\\Lib\\json\\__init__.py\", line 293, in load\r\n    return loads(fp.read(),\r\n           ^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\Admin\\miniconda3\\Lib\\json\\__init__.py\", line 346, in loads\r\n    return _default_decoder.decode(s)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\Admin\\miniconda3\\Lib\\json\\decoder.py\", line 337, in decode\r\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\r\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\Admin\\miniconda3\\Lib\\json\\decoder.py\", line 353, in raw_decode\r\n    obj, end = self.scan_once(s, idx)\r\n               ^^^^^^^^^^^^^^^^^^^^^^\r\njson.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 36 column 1 (char 726)\r\n\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "bobandbrony",
      "author_type": "User",
      "created_at": "2024-05-17T10:18:48Z",
      "updated_at": "2024-05-17T10:50:13Z",
      "closed_at": "2024-05-17T10:21:13Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/784/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/784",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/784",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:47.658816",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "你配置文件语法问题哈，去网上搜一下json语法教程",
          "created_at": "2024-05-17T10:21:05Z"
        },
        {
          "author": "bobandbrony",
          "body": "> 你配置文件语法问题哈，去网上搜一下json语法教程\r\n\r\n啊？那我还是用老版本吧。。。这个json看得我一脸懵逼\r\n老版本我不到10分钟就配置好了",
          "created_at": "2024-05-17T10:33:18Z"
        },
        {
          "author": "RockChinQ",
          "body": "json不难的啊，甚至你把配置文件发给ChatGPT问一下他都能给你修复",
          "created_at": "2024-05-17T10:34:33Z"
        },
        {
          "author": "bobandbrony",
          "body": "> json不难的啊，甚至你把配置文件发给ChatGPT问一下他都能给你修复\r\n\r\ngpt也解决不了，最后我把\"\"submit-messages-tokens\": 4096,\"末尾的逗号删了就过了\r\n然后platform.json又报错了\r\n![image](https://github.com/RockChinQ/QChatGPT/assets/129247570/2fb0e43f-40c7-4992-94af-9f837d1caf50)\r\n但是gpt说是对的\r\n![image](https://github.com/RockChinQ/QChatGPT/assets/129247570/9",
          "created_at": "2024-05-17T10:50:12Z"
        }
      ]
    },
    {
      "issue_number": 778,
      "title": "[Bug]: AIOCQHTTP 无法发送图片",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 系统环境\n\nlinux 大陆\n\n### Python环境\n\npython3.11\n\n### QChatGPT版本\n\n使用最新的主分支\n\n### 异常情况\n\n发送图片出现报错。发现发送图片处理的函数的arg 是空的。\r\n原因是msg返回的图片时msg.base64，但是没有相关处理类，增加一段代码即可解决该问题\r\nif hasattr(msg, \"base64\"):\r\n      arg = msg.base64\r\n      msg_list.append(aiocqhttp.MessageSegment.image(f\"base64://{arg}\"))\r\n                    \n\n### 日志信息\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "jerryliang122",
      "author_type": "User",
      "created_at": "2024-05-17T08:05:10Z",
      "updated_at": "2024-05-17T09:05:59Z",
      "closed_at": "2024-05-17T09:05:59Z",
      "labels": [
        "bug?",
        "IM: aiocqhttp"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/778/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/778",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/778",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:47.870306",
      "comments": []
    },
    {
      "issue_number": 775,
      "title": "[Bug]: 更新到最新版本后报错'ContentElement' object has no attribute 'get'",
      "body": "### 部署方式\n\n一键安装包部署\n\n### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 系统环境\n\nWindows 11 法国\n\n### Python环境\n\nPython 3.11\n\n### QChatGPT版本\n\nv3.2.0\n\n### 异常情况\n\n今天更新了新版本后私聊突然报错'ContentElement' object has no attribute 'get'，请求失败\n\n### 日志信息\n\n![image](https://github.com/RockChinQ/QChatGPT/assets/26639371/5a9b8515-6216-4052-81f6-64b474a61623)\r\n\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "Tigrex-Dai",
      "author_type": "User",
      "created_at": "2024-05-16T22:34:33Z",
      "updated_at": "2024-05-17T01:50:33Z",
      "closed_at": "2024-05-17T01:50:33Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/775/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/775",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/775",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:47.870320",
      "comments": [
        {
          "author": "Tigrex-Dai",
          "body": "我用的模型是Claude3 haiku",
          "created_at": "2024-05-16T22:53:26Z"
        },
        {
          "author": "RockChinQ",
          "body": "v3.2.0.1 修复了",
          "created_at": "2024-05-17T01:50:33Z"
        }
      ]
    },
    {
      "issue_number": 774,
      "title": "[Bug]: 卡在\"未运行平台适配器，请根据文档配置并启用平台适配器。\"",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\nNakuru（go-cqhttp）\n\n### 系统环境\n\nWindows10 ltsc 中国四川\n\n### Python环境\n\npython 3.10.9\n\n### QChatGPT版本\n\nv3.2.0\n\n### 异常情况\n\n之前2.6.0的版本可正常用，升级到最新版就报错\r\n\n\n### 日志信息\n\n\r\n  ___   ___ _         _    ___ ___ _____\r\n / _ \\ / __| |_  __ _| |_ / __| _ \\_   _|\r\n| (_) | (__| ' \\/ _` |  _| (_ |  _/ | |\r\n \\__\\_\\\\___|_||_\\__,_|\\__|\\___|_|   |_|\r\n\r\n⭐️开源地址: https://github.com/RockChinQ/QChatGPT\r\n�文档地址: https://q.rkcn.top\r\n\r\n[2024-05-17 00:04:32.892] D:\\chatbot\\317---\\QChatGPT-3.2.0\\pkg\\platform\\manager.py (147) - [WARNING] :\r\n    未运行平台适配器，请根据文档配置并启用平台适配器。\r\n\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "bobandbrony",
      "author_type": "User",
      "created_at": "2024-05-16T16:55:35Z",
      "updated_at": "2024-05-17T01:48:58Z",
      "closed_at": "2024-05-17T01:20:47Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/774/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/774",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/774",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:48.037581",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "看文档进行配置 https://q.rkcn.top",
          "created_at": "2024-05-17T01:20:40Z"
        },
        {
          "author": "bobandbrony",
          "body": "> 看文档进行配置 https://q.rkcn.top\r\n\r\n未生成配置文件，需要自己新建一个吗？\r\n",
          "created_at": "2024-05-17T01:27:27Z"
        },
        {
          "author": "RockChinQ",
          "body": "配置文件都在 data/config 目录下，如果你看的文档中说你配置文件是 config.py 。换个浏览器打开文档。",
          "created_at": "2024-05-17T01:46:56Z"
        },
        {
          "author": "bobandbrony",
          "body": "> 配置文件都在 data/config 目录下，如果你看的文档中说你配置文件是 config.py 。换个浏览器打开文档。\r\n\r\n原来文档更新了，谢谢",
          "created_at": "2024-05-17T01:48:57Z"
        }
      ]
    },
    {
      "issue_number": 764,
      "title": "[Feature]: 支持 moonshot 的 Tool Use ",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\nhttps://platform.moonshot.cn/docs/api/tool-use",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-05-07T15:07:31Z",
      "updated_at": "2024-05-16T13:22:33Z",
      "closed_at": "2024-05-16T13:22:33Z",
      "labels": [
        "eh: Improve",
        "m: Provider"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/764/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/764",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/764",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:48.206546",
      "comments": []
    },
    {
      "issue_number": 771,
      "title": "[Feature]: 解藕 MessageChain 与 Pipeline 上的 数据",
      "body": "### 这是一个？\r\n\r\n现有功能优化\r\n\r\n### 详细描述\r\n\r\n不再于pipeline和query对象中使用 MessageChain，改为自行实现的对象。仅在发送阶段才转为 MessageChain",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-05-14T03:45:38Z",
      "updated_at": "2024-05-16T13:13:17Z",
      "closed_at": "2024-05-16T13:13:17Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/771/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/771",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/771",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:48.206566",
      "comments": []
    },
    {
      "issue_number": 768,
      "title": "[Feature]: 将 ContentFilter 中传递的审核载核改为 Message 中的 Content",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n便于适配多模态审核",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-05-14T03:00:28Z",
      "updated_at": "2024-05-16T13:13:17Z",
      "closed_at": "2024-05-16T02:32:35Z",
      "labels": [
        "eh: Improve",
        "m: Session"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/768/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/768",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/768",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:48.206573",
      "comments": []
    },
    {
      "issue_number": 767,
      "title": "[Feature]: 希望可以适配新的GPT-4o",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\nOpenAI出了一个新的GPT-4o模型，希望可以适配！",
      "state": "closed",
      "author": "Tigrex-Dai",
      "author_type": "User",
      "created_at": "2024-05-13T19:19:18Z",
      "updated_at": "2024-05-16T13:13:17Z",
      "closed_at": "2024-05-16T13:13:17Z",
      "labels": [
        "eh: Improve",
        "m: Provider",
        "m: Session",
        "pd: Need design"
      ],
      "label_count": 4,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/767/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/767",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/767",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:48.206580",
      "comments": []
    },
    {
      "issue_number": 619,
      "title": "[Feature]: 希望支持AI图片视觉",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\nGPT-4 with vision模型现在已经可以理解图片内容了，希望这边也整上这个功能（或者包含此功能的插件）\r\n\r\n官方文档：https://platform.openai.com/docs/guides/vision",
      "state": "closed",
      "author": "a86296007",
      "author_type": "User",
      "created_at": "2023-11-27T08:01:22Z",
      "updated_at": "2024-05-16T13:13:16Z",
      "closed_at": "2024-05-16T13:13:16Z",
      "labels": [
        "eh: Improve",
        "pd: Need design"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/619/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "RockChinQ"
      ],
      "milestone": "3.2",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/619",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/619",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:48.206608",
      "comments": [
        {
          "author": "Tigrex-Dai",
          "body": "Claude3系列模型也都可以理解图片内容啦，期待一下！\r\n官方文档：https://docs.anthropic.com/claude/docs/vision",
          "created_at": "2024-05-04T08:36:24Z"
        }
      ]
    },
    {
      "issue_number": 770,
      "title": "[Feature]: Query 的 resp_message_chain 改为 list 类型",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n优化 yield 的情况",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-05-14T03:30:32Z",
      "updated_at": "2024-05-14T15:09:07Z",
      "closed_at": "2024-05-14T15:09:07Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/770/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/770",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/770",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:48.376270",
      "comments": []
    },
    {
      "issue_number": 769,
      "title": "[Feature]: messages 存回 conversation 应该仅在成功执行本次请求时执行",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\nhttps://github.com/RockChinQ/QChatGPT/blob/972d3c18af81c72d4eeb54b22fd26ac458b0c1f4/pkg/pipeline/process/handlers/chat.py#L83-L118\r\n\r\n此处应该在成功完成请求后再存回conversation，否则若请求期间失败，仅保存失败前的内容到conversation将破坏messages的结构，可能使后续请求失败",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-05-14T03:24:05Z",
      "updated_at": "2024-05-14T14:42:44Z",
      "closed_at": "2024-05-14T14:42:44Z",
      "labels": [
        "eh: Improve",
        "m: Session"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/769/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/769",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/769",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:48.376291",
      "comments": []
    },
    {
      "issue_number": 772,
      "title": "[Feature]: 解藕Chat的处理器和请求器",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n请求器应仅实现对不同API的请求，流程控制应当抽象出来。",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-05-14T07:15:08Z",
      "updated_at": "2024-05-14T14:21:34Z",
      "closed_at": "2024-05-14T14:21:34Z",
      "labels": [
        "eh: Improve",
        "m: Provider"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/772/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/772",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/772",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:48.376297",
      "comments": []
    },
    {
      "issue_number": 761,
      "title": "[Feature]: 接入 deepseek 模型",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\nhttps://platform.deepseek.com/docs",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-05-07T08:15:52Z",
      "updated_at": "2024-05-07T14:48:38Z",
      "closed_at": "2024-05-07T14:48:38Z",
      "labels": [
        "eh: Improve",
        "m: Provider"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/761/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/761",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/761",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:48.376305",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "- [ ] https://github.com/deepseek-ai/awesome-deepseek-integration",
          "created_at": "2024-05-07T08:42:21Z"
        }
      ]
    },
    {
      "issue_number": 760,
      "title": "[Bug]: 长消息处理策略不生效",
      "body": "### 部署方式\r\n\r\n手动部署\r\n\r\n### 消息平台适配器\r\n\r\naiocqhttp（使用 OneBot 协议接入的）\r\n\r\n### 系统环境\r\n\r\nubuntu20.04 日本\r\n\r\n### Python环境\r\n\r\n3.11\r\n\r\n### QChatGPT版本\r\n\r\nv3.1.04\r\n\r\n### 异常情况\r\n\r\n配置如下：\r\n![image](https://github.com/RockChinQ/QChatGPT/assets/133567918/73e10b1e-1340-4530-b474-a744827337fe)\r\n长消息处理没起作用：\r\n![image](https://github.com/RockChinQ/QChatGPT/assets/133567918/574fa331-abe0-4e15-9c44-a6eef6ccf3ba)\r\n日志无报错\r\n\r\n好像是在打开了群消息@之后，就这样了，关掉了群消息@后，还是这样，无论是群消息还是个人消息回复，都没有处理长消息\r\n\r\n### 日志信息\r\n\r\n![image](https://github.com/RockChinQ/QChatGPT/assets/133567918/2c5a00eb-51af-4d72-b088-c8b6f7898924)\r\n\r\n\r\n### 启用的插件\r\n\r\n无",
      "state": "closed",
      "author": "Laucky67",
      "author_type": "User",
      "created_at": "2024-04-30T16:33:46Z",
      "updated_at": "2024-05-07T08:23:14Z",
      "closed_at": "2024-05-07T08:23:14Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/760/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/760",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/760",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:48.593022",
      "comments": [
        {
          "author": "Laucky67",
          "body": "配置发错了，填的是forward。因为forward没起作用，想换image再调回来重试一下看能不能让forward起作用，所以图截错了\r\n![image](https://github.com/RockChinQ/QChatGPT/assets/133567918/0de11bfd-bb5a-4795-a1e6-d5143566f58e)\r\n",
          "created_at": "2024-04-30T16:34:50Z"
        },
        {
          "author": "RockChinQ",
          "body": "aiocqhttp是暂时不支持转发消息的",
          "created_at": "2024-05-01T12:49:37Z"
        }
      ]
    },
    {
      "issue_number": 756,
      "title": "[Bug]: 没有生成配置文件config.py",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\nNakuru（go-cqhttp）\n\n### 系统环境\n\nubuntu20.04 日本\n\n### Python环境\n\n3.10.0\n\n### QChatGPT版本\n\nv3.1.04\n\n### 异常情况\n\n运行了main.py后，没有生成config.py\n\n### 日志信息\n\nroot@GreenCloud:~/QChatGPT# python3 main.py\r\n\r\n  ___   ___ _         _    ___ ___ _____ \r\n / _ \\ / __| |_  __ _| |_ / __| _ \\_   _|\r\n| (_) | (__| ' \\/ _` |  _| (_ |  _/ | |  \r\n \\__\\_\\\\___|_||_\\__,_|\\__|\\___|_|   |_|  \r\n\r\n⭐️开源地址: https://github.com/RockChinQ/QChatGPT\r\n📖文档地址: https://q.rkcn.top\r\n\r\n以下文件不存在，已自动生成，请按需修改配置文件后重启：\r\n- plugins/__init__.py\r\n- plugins/plugins.json\r\n- data/config/command.json\r\n- data/config/pipeline.json\r\n- data/config/platform.json\r\n- data/config/provider.json\r\n- data/config/system.json\r\n- data/scenario/default.json\r\nroot@GreenCloud:~/QChatGPT# python3 main.py\r\n\r\n  ___   ___ _         _    ___ ___ _____ \r\n / _ \\ / __| |_  __ _| |_ / __| _ \\_   _|\r\n| (_) | (__| ' \\/ _` |  _| (_ |  _/ | |  \r\n \\__\\_\\\\___|_||_\\__,_|\\__|\\___|_|   |_|  \r\n\r\n⭐️开源地址: https://github.com/RockChinQ/QChatGPT\r\n📖文档地址: https://q.rkcn.top\r\n\r\n[2024-04-10 23:18:26.640] /root/QChatGPT/pkg/utils/announce.py (115) - [INFO] :\r\n    [公告] 2024-03-08 22:30:00: QChatGPT 3.x 已发布，若您仍在使用不再维护的 2.x 版本，请尽快迁移至 3.x 版本：https://github.com/RockChinQ/QChatGPT/discussions/690\r\nTraceback (most recent call last):\r\n  File \"/root/QChatGPT/main.py\", line 72, in <module>\r\n    asyncio.run(main_entry())\r\n  File \"/www/server/pyporject_evn/versions/3.10.0/lib/python3.10/asyncio/runners.py\", line 44, in run\r\n    return loop.run_until_complete(main)\r\n  File \"/www/server/pyporject_evn/versions/3.10.0/lib/python3.10/asyncio/base_events.py\", line 641, in run_until_complete\r\n    return future.result()\r\n  File \"/root/QChatGPT/main.py\", line 49, in main_entry\r\n    await boot.main()\r\n  File \"/root/QChatGPT/pkg/core/boot.py\", line 38, in main\r\n    app_inst = await make_app()\r\n  File \"/root/QChatGPT/pkg/core/boot.py\", line 30, in make_app\r\n    await stage_inst.run(ap)\r\n  File \"/root/QChatGPT/pkg/core/stages/build_app.py\", line 58, in run\r\n    ap.query_pool = pool.QueryPool()\r\n  File \"/root/QChatGPT/pkg/pipeline/pool.py\", line 26, in __init__\r\n    self.condition = asyncio.Condition(self.pool_lock)\r\n  File \"/www/server/pyporject_evn/versions/3.10.0/lib/python3.10/asyncio/locks.py\", line 234, in __init__\r\n    raise ValueError(\"loop argument must agree with lock\")\r\nValueError: loop argument must agree with lock\r\n\r\n运行主程序后的文件：\r\n![image](https://github.com/RockChinQ/QChatGPT/assets/133567918/85c0694d-9e6d-42c0-93fd-38cbf789d947)\r\n\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "Laucky67",
      "author_type": "User",
      "created_at": "2024-04-10T15:23:32Z",
      "updated_at": "2024-04-13T09:42:32Z",
      "closed_at": "2024-04-13T09:42:32Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/756/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/756",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/756",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:48.781192",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "config.py 是 2.x 的配置文件，现在的配置文件都是在 data/config/ 目录下，具体配置方法查看 https://qchatgpt.rockchin.top \r\n\r\n还有，python 3.10.0 有bug，没法正常启动，换成 3.10.4 之类的版本",
          "created_at": "2024-04-10T15:30:02Z"
        },
        {
          "author": "Laucky67",
          "body": "> config.py 是 2.x 的配置文件，现在的配置文件都是在 data/config/ 目录下，具体配置方法查看 https://qchatgpt.rockchin.top\r\n> \r\n> 还有，python 3.10.0 有bug，没法正常启动，换成 3.10.4 之类的版本\r\n\r\n谢谢谢谢，机器人已经跑起来了，但是文档中的配置和config里面的配置还是不太一样呀，有点不太会填写配置，比如管理员QQ该如何设置",
          "created_at": "2024-04-11T05:48:07Z"
        },
        {
          "author": "RockChinQ",
          "body": "哪里不一样？\r\n",
          "created_at": "2024-04-11T05:49:30Z"
        },
        {
          "author": "Laucky67",
          "body": "> 哪里不一样？\r\n\r\n文档中是这个样子\r\n![image](https://github.com/RockChinQ/QChatGPT/assets/133567918/09714db9-2221-450e-8279-f81bab306748)\r\n\r\n但是config文件夹中是这个样子\r\n![image](https://github.com/RockChinQ/QChatGPT/assets/133567918/9e2e01b2-123c-4951-9136-ef8dd2b53c8f)\r\n![image](https://github.com/RockChinQ/QChatGPT/asse",
          "created_at": "2024-04-11T06:26:13Z"
        },
        {
          "author": "RockChinQ",
          "body": "你这里缓存了以前的文档，换个浏览器看看",
          "created_at": "2024-04-11T06:27:18Z"
        }
      ]
    },
    {
      "issue_number": 755,
      "title": "[Feature]: 基于 HTTP API 的插件加载方式",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n通过 HTTP 接口提供插件功能",
      "state": "open",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-04-09T03:38:08Z",
      "updated_at": "2024-04-09T03:38:08Z",
      "closed_at": null,
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/755/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/755",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/755",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:48.994628",
      "comments": []
    },
    {
      "issue_number": 751,
      "title": "[Bug]: mirai启动正常，QChatGPT启动时缺少库？",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\nyiri-mirai（Mirai）\n\n### 系统环境\n\nwin10\n\n### Python环境\n\n3.11\n\n### QChatGPT版本\n\n3.1.0.3\n\n### 异常情况\n\n详见日志\n\n### 日志信息\n\nE:\\QQ_Robot\\QChatGPT-3.1.0.3\\QChatGPT-3.1.0.3>python main.py\r\n\r\n  ___   ___ _         _    ___ ___ _____\r\n / _ \\ / __| |_  __ _| |_ / __| _ \\_   _|\r\n| (_) | (__| ' \\/ _` |  _| (_ |  _/ | |\r\n \\__\\_\\\\___|_||_\\__,_|\\__|\\___|_|   |_|\r\n\r\n⭐️开源地址: https://github.com/RockChinQ/QChatGPT\r\n📖文档地址: https://q.rkcn.top\r\n\r\nTraceback (most recent call last):\r\n  File \"E:\\QQ_Robot\\QChatGPT-3.1.0.3\\QChatGPT-3.1.0.3\\main.py\", line 86, in <module>\r\n    asyncio.run(main_entry())\r\n  File \"E:\\Anaconda\\Lib\\asyncio\\runners.py\", line 190, in run\r\n    return runner.run(main)\r\n           ^^^^^^^^^^^^^^^^\r\n  File \"E:\\Anaconda\\Lib\\asyncio\\runners.py\", line 118, in run\r\n    return self._loop.run_until_complete(task)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"E:\\Anaconda\\Lib\\asyncio\\base_events.py\", line 653, in run_until_complete\r\n    return future.result()\r\n           ^^^^^^^^^^^^^^^\r\n  File \"E:\\QQ_Robot\\QChatGPT-3.1.0.3\\QChatGPT-3.1.0.3\\main.py\", line 25, in main_entry\r\n    missing_deps = await deps.check_deps()\r\n                   ^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"E:\\QQ_Robot\\QChatGPT-3.1.0.3\\QChatGPT-3.1.0.3\\pkg\\core\\bootutils\\deps.py\", line 26, in check_deps\r\n    __import__(dep)\r\n  File \"E:\\Anaconda\\Lib\\site-packages\\mirai\\__init__.py\", line 22, in <module>\r\n    from mirai.bot import (\r\n  File \"E:\\Anaconda\\Lib\\site-packages\\mirai\\bot.py\", line 13, in <module>\r\n    import mirai.models.api\r\n  File \"E:\\Anaconda\\Lib\\site-packages\\mirai\\models\\__init__.py\", line 10, in <module>\r\n    from mirai.models.bus import ModelEventBus\r\n  File \"E:\\Anaconda\\Lib\\site-packages\\mirai\\models\\bus.py\", line 12, in <module>\r\n    from mirai.models.events import Event\r\n  File \"E:\\Anaconda\\Lib\\site-packages\\mirai\\models\\events.py\", line 17, in <module>\r\n    from mirai.models.base import MiraiIndexedModel\r\n  File \"E:\\Anaconda\\Lib\\site-packages\\mirai\\models\\base.py\", line 11, in <module>\r\n    class MiraiMetaclass(pdm.ModelMetaclass):\r\n                         ^^^^^^^^^^^^^^^^^^\r\n  File \"E:\\Anaconda\\Lib\\site-packages\\pydantic\\_migration.py\", line 304, in wrapper\r\n    raise AttributeError(f'module {__name__!r} has no attribute {name!r}')\r\nAttributeError: module 'pydantic._migration' has no attribute 'ModelMetaclass'\r\n\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "lueluelue2006",
      "author_type": "User",
      "created_at": "2024-04-05T15:23:37Z",
      "updated_at": "2024-04-07T06:14:14Z",
      "closed_at": "2024-04-07T06:14:14Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/751/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/751",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/751",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:48.994663",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "pydantic 的问题，显式指定一下装以下依赖：\r\n\r\n```\r\npydantic==1.10.14\r\npydantic_core==2.16.3\r\n```",
          "created_at": "2024-04-06T08:49:07Z"
        },
        {
          "author": "lueluelue2006",
          "body": "我安装了这两个库，但他还是报错，好像是mirai库的问题？\r\n```\r\nE:\\QQ_Robot\\QChatGPT3.0\\QChatGPT>python main.py\r\n\r\n  ___   ___ _         _    ___ ___ _____\r\n / _ \\ / __| |_  __ _| |_ / __| _ \\_   _|\r\n| (_) | (__| ' \\/ _` |  _| (_ |  _/ | |\r\n \\__\\_\\\\___|_||_\\__,_|\\__|\\___|_|   |_|\r\n\r\n⭐️开源地址: https://github.com/RockChinQ/QChatGP",
          "created_at": "2024-04-06T11:24:14Z"
        },
        {
          "author": "RockChinQ",
          "body": "pip freeze 看看",
          "created_at": "2024-04-07T04:22:52Z"
        },
        {
          "author": "lueluelue2006",
          "body": "已解决，非常感谢！！！！！",
          "created_at": "2024-04-07T06:14:04Z"
        }
      ]
    },
    {
      "issue_number": 752,
      "title": "报错插件 GenshinVoice 触发事件 NormalMessageResponded 时发生错误: name 'logging' is not defined",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\nNone\n\n### 系统环境\n\ncentos7\n\n### Python环境\n\n3.10.9\n\n### QChatGPT版本\n\nv2.6.0\n\n### 异常情况\n\n插件 GenshinVoice 触发事件 NormalMessageResponded 时发生错误: name 'logging' is not defined\r\n![image](https://github.com/RockChinQ/QChatGPT/assets/148668561/d3370526-a1ec-4f85-92e7-5302dd03eba8)\r\n\n\n### 日志信息\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "ldblog",
      "author_type": "User",
      "created_at": "2024-04-06T14:02:38Z",
      "updated_at": "2024-04-06T15:37:44Z",
      "closed_at": "2024-04-06T15:37:37Z",
      "labels": [
        "bug?",
        "External Plugin"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/752/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/752",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/752",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:49.220052",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "插件的问题去目标插件仓库去提",
          "created_at": "2024-04-06T15:37:37Z"
        }
      ]
    },
    {
      "issue_number": 750,
      "title": "[Bug]: 安装虚拟环境和依赖后，在虚拟环境中python main.py提示在命令行中运行",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 系统环境\n\nwin10 中国\n\n### Python环境\n\n3.10\n\n### QChatGPT版本\n\n仓库最新\n\n### 异常情况\n\n![image](https://github.com/RockChinQ/QChatGPT/assets/32565940/371bbfa2-ec26-4cc6-9d8f-1cb76189e602)\r\n\n\n### 日志信息\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "mengluo04",
      "author_type": "User",
      "created_at": "2024-04-05T09:34:22Z",
      "updated_at": "2024-04-06T08:52:05Z",
      "closed_at": "2024-04-06T08:52:05Z",
      "labels": [
        "bug?",
        "m: Lifecycle"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/750/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/750",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/750",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:49.406026",
      "comments": [
        {
          "author": "mengluo04",
          "body": "虚拟环境会被psutil识别为python.exe",
          "created_at": "2024-04-05T09:40:35Z"
        },
        {
          "author": "RockChinQ",
          "body": "最新版删了这个判断了。",
          "created_at": "2024-04-06T08:52:05Z"
        }
      ]
    },
    {
      "issue_number": 98,
      "title": "[提示] 同一主机内机器人多开的方式",
      "body": "同主机多mirai、多yirimirai、多QChatGPT机器人解决方案  \r\n欢迎各位补充",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2023-01-12T17:13:14Z",
      "updated_at": "2024-04-01T09:11:40Z",
      "closed_at": "2024-04-01T09:11:14Z",
      "labels": [
        "eh: Improve",
        "help needed",
        "good first issue"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/98/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/98",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/98",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:49.597838",
      "comments": [
        {
          "author": "crossgg",
          "body": "目前可以用多开多个docker容器的方式",
          "created_at": "2023-02-10T08:50:45Z"
        },
        {
          "author": "RockChinQ",
          "body": "目前可以支持单主机内单mirai-console内登录多个账号后，启动多个不同目录的QChatGPT程序文件",
          "created_at": "2023-02-19T13:01:50Z"
        },
        {
          "author": "Ctrini",
          "body": "可以更改mirai中的setting.yml端口，和Qchatgpt中的config.py端口，这样可以解决同一主机内多开机器人的问题。\n\n例如：\n机器人1，端口：8080\n机器人2，端口：8081\n以此类推...\n\n每个机器人都需要拥有一个单独的文件夹。\n![Screenshot_20230303-092114_Microsoft 远程桌面.png](https://user-images.githubusercontent.com/109058155/222607637-e477c7af-c79a-46f4-b6a1-a8670f8856a2.png)\n\n",
          "created_at": "2023-03-03T01:17:30Z"
        },
        {
          "author": "ChangqingQ11",
          "body": "在mirai中使用autoLogin add <账号> <密码>(去掉<>)就能实现多个账号登录，只要Bot不储存在同一个文件夹应该就没问题\r\n",
          "created_at": "2023-03-06T02:42:06Z"
        },
        {
          "author": "RockChinQ",
          "body": "以上是 2.x 版本的方案，可能已经过时。",
          "created_at": "2024-04-01T09:11:39Z"
        }
      ]
    },
    {
      "issue_number": 488,
      "title": "[Feature]: latex语法转为图片",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n希望实现一个将latex语法转换为图片并发送的功能",
      "state": "closed",
      "author": "xyber-nova",
      "author_type": "User",
      "created_at": "2023-06-05T14:28:09Z",
      "updated_at": "2024-04-01T09:11:05Z",
      "closed_at": "2024-04-01T09:11:00Z",
      "labels": [
        "eh: Improve",
        "External Plugin",
        "m: Platform"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/488/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/488",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/488",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:49.794837",
      "comments": [
        {
          "author": "xyber-nova",
          "body": "@RockChinQ 这个Issue的代码我来写吧，到时候我发个PR",
          "created_at": "2023-07-04T08:49:21Z"
        },
        {
          "author": "RockChinQ",
          "body": "> @RockChinQ 这个Issue的代码我来写吧，到时候我发个PR\r\n\r\n耶，祝你好运，但是建议你将此功能封装成一个Python的包，以提供更高的移植性",
          "created_at": "2023-07-04T10:58:53Z"
        },
        {
          "author": "RockChinQ",
          "body": "这个功能，现在可以写插件实现: https://qchatgpt.rockchin.top/posts/plugin/extension.html. 扩展一个长消息处理策略。",
          "created_at": "2024-04-01T09:11:00Z"
        }
      ]
    },
    {
      "issue_number": 748,
      "title": "[Bug]: OneBot阿里通义千问API报错",
      "body": "### 部署方式\n\nDocker部署\n\n### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 系统环境\n\nUnraid v6.12.6 中国大陆\n\n### Python环境\n\nDocker内置Python环境\n\n### QChatGPT版本\n\nv3.1.0.1\n\n### 异常情况\n\n尝试使用oneapi转换的通义千问API时报错\r\n如需debug可提供搭建好的oneapi环境\n\n### 日志信息\n\n```\r\nroot@PowerServer:/mnt/user/appdata/qchatgptdocker# docker compose up\r\n[+] Running 1/0\r\n ✔ Container qchatgptdocker-qchatgpt-1  Created                                                                                         0.0s \r\nAttaching to qchatgptdocker-qchatgpt-1\r\nqchatgptdocker-qchatgpt-1  | \r\nqchatgptdocker-qchatgpt-1  |   ___   ___ _         _    ___ ___ _____ \r\nqchatgptdocker-qchatgpt-1  |  / _ \\ / __| |_  __ _| |_ / __| _ \\_   _|\r\nqchatgptdocker-qchatgpt-1  | | (_) | (__| ' \\/ _` |  _| (_ |  _/ | |  \r\nqchatgptdocker-qchatgpt-1  |  \\__\\_\\\\___|_||_\\__,_|\\__|\\___|_|   |_|  \r\nqchatgptdocker-qchatgpt-1  | \r\nqchatgptdocker-qchatgpt-1  | ⭐️开源地址: https://github.com/RockChinQ/QChatGPT\r\nqchatgptdocker-qchatgpt-1  | 📖文档地址: https://q.rkcn.top\r\nqchatgptdocker-qchatgpt-1  | \r\nqchatgptdocker-qchatgpt-1  | [2024-03-29 19:52:56.426] /app/pkg/platform/manager.py (108) - [INFO] :\r\nqchatgptdocker-qchatgpt-1  |     初始化平台适配器 0: aiocqhttp\r\nqchatgptdocker-qchatgpt-1  | [2024-03-29 19:52:56 +0000] [1] [INFO] Running on http://0.0.0.0:5140 (CTRL + C to quit)\r\nqchatgptdocker-qchatgpt-1  | [2024-03-29 19:52:58 +0000] [1] [INFO] 192.168.2.18:64909 GET /ws 1.1 101 - 510\r\nqchatgptdocker-qchatgpt-1  | [2024-03-29 19:53:13.188] /app/pkg/pipeline/process/process.py (36) - [INFO] :\r\nqchatgptdocker-qchatgpt-1  |     处理 person_13******37 的请求(0): 你好\r\nqchatgptdocker-qchatgpt-1  | [2024-03-29 19:53:13.456] /app/pkg/pipeline/process/handlers/chat.py (97) - [ERROR] :\r\nqchatgptdocker-qchatgpt-1  |     对话(0)请求失败: 模型请求失败: 请求参数错误: Error code: 400 - {'error': {'code': 'InvalidParameter', 'message': 'Provider API error: Role must be user or assistant and Content length must be greater than 0 (request id: 20240330035313198634539KHrrO4yq)', 'param': '07682f42-5cb6-9c46-ad1a-cc63e2d9cde2', 'type': 'InvalidParameter'}}\r\nqchatgptdocker-qchatgpt-1  | [2024-03-29 19:53:13.978] /app/pkg/pipeline/controller.py (81) - [ERROR] :\r\nqchatgptdocker-qchatgpt-1  |     模型请求失败: 请求参数错误: Error code: 400 - {'error': {'code': 'InvalidParameter', 'message': 'Provider API error: Role must be user or assistant and Content length must be greater than 0 (request id: 20240330035313198634539KHrrO4yq)', 'param': '07682f42-5cb6-9c46-ad1a-cc63e2d9cde2', 'type': 'InvalidParameter'}}\r\n\r\n```\r\n\r\n\r\noneapi log内容\r\n```\r\n[ERR] 2024/03/30 - 03:53:13 | 20240330035313198634539KHrrO4yq | relay error happen, status code is 400, won't retry in this case \r\n[ERR] 2024/03/30 - 03:53:13 | 20240330035313198634539KHrrO4yq | relay error (channel #3(通义千问)): Provider API error: Role must be user or assistant and Content length must be greater than 0 \r\n[GIN] 2024/03/30 - 03:53:13 | 20240330035313198634539KHrrO4yq | 400 |  256.296039ms |      172.17.0.1 |    POST /v1/chat/completions\r\n\r\n```\n\n### 启用的插件\n\n[bot] 所有插件(1):\r\n\r\n#1 Switcher \r\n快捷切换使用的模型\r\nv0.2.0\r\n作者: RockChinQ",
      "state": "closed",
      "author": "karllee830",
      "author_type": "User",
      "created_at": "2024-03-29T19:54:32Z",
      "updated_at": "2024-03-31T06:44:00Z",
      "closed_at": "2024-03-31T06:44:00Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/748/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/748",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/748",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:51.858920",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "等 3.1.0.2 版本发布后，在 data/config/provider.json 里，把 prompt 的内容给删了，只剩下空字符串就可以了。",
          "created_at": "2024-03-30T03:03:57Z"
        }
      ]
    },
    {
      "issue_number": 741,
      "title": "插件返回错误",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\nyiri-mirai（Mirai）\n\n### 系统环境\n\nwindows  server 2019 江苏\n\n### Python环境\n\npy 3.10.9\n\n### QChatGPT版本\n\nv3.1\n\n### 异常情况\n\n两个问题，一个是群聊合并转发名字不是2.x版本的bot，而是叫“qq用户”\r\n第二个是插件返回图片中，v2.6版本正常，v3.1版本返回“[图片]”代码如下\r\n        while True:\r\n            try:\r\n                # 转base64返回\r\n                resp = requests.get(url=\"\",\r\n                img_base64 = base64.b64encode(resp.content).decode()\r\n\r\n\r\n                image_msg = mirai.Image(base64=img_base64)\r\n                return [image_msg]\r\n 前两个issue我好像写错了closed看这个吧\r\n![%7BAE77EE24-79C2-49eb-8DD2-FA301A966BF0%7D](https://github.com/RockChinQ/QChatGPT/assets/119418823/ed19e151-17e1-4d02-9760-b1a76b84fe3c)\r\n![%7B004454E4-9838-4778-98FB-EC084300F0CE%7D](https://github.com/RockChinQ/QChatGPT/assets/119418823/61b1b180-1ad5-4278-9df9-5e8e7568bd2b)\r\n\n\n### 日志信息\n\n![%7B2E830823-2275-487c-B665-4DCAEA13C0D1%7D](https://github.com/RockChinQ/QChatGPT/assets/119418823/f391df00-8ded-477a-ac97-0a2ccd14e0f4)\r\n\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "SkyFutu",
      "author_type": "User",
      "created_at": "2024-03-23T16:45:44Z",
      "updated_at": "2024-03-31T06:40:38Z",
      "closed_at": "2024-03-31T06:40:37Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/741/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "RockChinQ"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/741",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/741",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:52.111053",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "转发消息就是专门改成 QQ用户 的，降低风控概率。\r\n\r\n复现图片消息这个问题的插件代码发一下我看看",
          "created_at": "2024-03-29T09:29:02Z"
        },
        {
          "author": "SkyFutu",
          "body": "```python\r\n#基本上是复制文档的模板，通过request来请求图床，然后转成base64后就return了\r\nfrom pkg.plugin.models import *\r\nfrom pkg.plugin.host import EventContext, PluginHost\r\nimport requests\r\nimport base64\r\nimport mirai\r\n\r\n\r\n# 注册插件\r\n@register(name=\"\", description=\"\", version=\"1\", author=\"SkyFuture\")\r\nclass PixivImagePlugin(Plu",
          "created_at": "2024-03-29T10:52:05Z"
        },
        {
          "author": "RockChinQ",
          "body": "修复了，将在 v3.1.0.2 包含。\r\n\r\n测试代码：\r\n\r\n```python\r\nfrom pkg.plugin.context import register, handler, llm_func, BasePlugin, APIHost, EventContext\r\nfrom pkg.plugin.events import *  # 导入事件类\r\n\r\nimport mirai\r\n\r\n\r\n\"\"\"\r\n在收到私聊或群聊消息\"hello\"时，回复\"hello, <发送者id>!\"或\"hello, everyone!\"\r\n\"\"\"\r\n\r\n\r\n# 注册插件\r\n@register(name=\"Hel",
          "created_at": "2024-03-31T06:40:37Z"
        }
      ]
    },
    {
      "issue_number": 739,
      "title": "[Bug]: 群聊内命令无法使用",
      "body": "### 部署方式\n\nDocker部署\n\n### 消息平台适配器\n\nyiri-mirai（Mirai）\n\n### 系统环境\n\ndebian 11 arm64\n\n### Python环境\n\n使用的容器环境\n\n### QChatGPT版本\n\n3.1.0.1\n\n### 异常情况\n\n群聊在管理员会话 admin-sessions中且不在访问控制 access-control排除名单。发送命令机器人和后台均无响应\n\n### 日志信息\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "bright141",
      "author_type": "User",
      "created_at": "2024-03-23T16:39:05Z",
      "updated_at": "2024-03-30T09:47:36Z",
      "closed_at": "2024-03-30T09:47:30Z",
      "labels": [
        "bug?",
        "Invalid"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/739/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "RockChinQ"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/739",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/739",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:52.291974",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "发一下命令截图和相关配置信息",
          "created_at": "2024-03-29T09:27:18Z"
        },
        {
          "author": "bright141",
          "body": "群聊发送命令后qchatgpt后台没有反应，所以我就没截\r\n![7dd83f19f10fffdc5a9bd275cc4d5f81](https://github.com/RockChinQ/QChatGPT/assets/123460862/5eeeb98e-dafa-432c-9e21-1e167427f0e1)\r\n![a27f1e39f5c41a293f6e2cb568c6369e](https://github.com/RockChinQ/QChatGPT/assets/123460862/c61855cc-9e79-4845-b2e4-dba1e774d307)\r\n![7fb97223",
          "created_at": "2024-03-29T09:41:50Z"
        },
        {
          "author": "RockChinQ",
          "body": "你这没响应啊，你要at机器人啊",
          "created_at": "2024-03-29T09:43:03Z"
        },
        {
          "author": "bright141",
          "body": "az，还以为at只是触发ai聊天设置",
          "created_at": "2024-03-29T09:46:41Z"
        }
      ]
    },
    {
      "issue_number": 749,
      "title": "[Bug]: 函数调用失败后 conversation 的messages被污染",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\nNone\n\n### 系统环境\n\n-\n\n### Python环境\n\n-\n\n### QChatGPT版本\n\n-\n\n### 异常情况\n\n调用失败时，messages 中仍包含包含 tool call message 而没有 tool 返回值的 message，导致之后请求失败\n\n### 日志信息\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-03-30T03:02:26Z",
      "updated_at": "2024-03-30T09:45:44Z",
      "closed_at": "2024-03-30T09:45:44Z",
      "labels": [
        "bug?",
        "m: Provider"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/749/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/749",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/749",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:52.530745",
      "comments": []
    },
    {
      "issue_number": 746,
      "title": "[Bug]: 消息适配器使用QQ官方时，安装联网插件WebwlkrPlugin后，在qq群询问搜索，无法返回回复",
      "body": "### 部署方式\n\nDocker部署\n\n### 消息平台适配器\n\nqq-botpy（QQ官方API）\n\n### 系统环境\n\ncentos\n\n### Python环境\n\npython为容器里安装好\n\n### QChatGPT版本\n\n3.1.0.1\n\n### 异常情况\n\n安装联网插件WebwlkrPlugin后，在qq群询问搜索，无法返回回复\r\ndocker容器里开的debug日志，显示接口500\n\n### 日志信息\n\n\r\n![3Q RC%78$K52BF(I8961@SF](https://github.com/RockChinQ/QChatGPT/assets/6660053/454c1338-a83e-40a2-a4a1-f4952f797758)\r\n\r\n\n\n### 启用的插件\n\nWebwlkrPlugin",
      "state": "closed",
      "author": "jackeychenshuhao",
      "author_type": "User",
      "created_at": "2024-03-29T11:08:59Z",
      "updated_at": "2024-03-30T03:04:47Z",
      "closed_at": "2024-03-30T03:04:47Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/746/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/746",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/746",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:52.530762",
      "comments": []
    },
    {
      "issue_number": 738,
      "title": "插件图片返回错误",
      "body": null,
      "state": "closed",
      "author": "SkyFutu",
      "author_type": "User",
      "created_at": "2024-03-23T16:37:34Z",
      "updated_at": "2024-03-29T10:52:44Z",
      "closed_at": "2024-03-23T16:39:16Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/738/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/738",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/738",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:52.530768",
      "comments": []
    },
    {
      "issue_number": 740,
      "title": "看最新iss",
      "body": null,
      "state": "closed",
      "author": "SkyFutu",
      "author_type": "User",
      "created_at": "2024-03-23T16:41:12Z",
      "updated_at": "2024-03-29T10:52:31Z",
      "closed_at": "2024-03-23T16:41:28Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/740/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/740",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/740",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:52.530773",
      "comments": []
    },
    {
      "issue_number": 743,
      "title": "[Bug]: 传入消息忽略规则失效",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 系统环境\n\nWindows10 中国大陆\n\n### Python环境\n\npython 3.11.5\n\n### QChatGPT版本\n\nv3.1.0.1\n\n### 异常情况\n\npipeline中设置私聊传入消息忽略规则无法生效，正则和prefix都不行，匹配的消息会在控制台直接响应\n\n### 日志信息\n\n![{006D87FF-C950-4621-88BD-34DFCCD3B90C}](https://github.com/RockChinQ/QChatGPT/assets/28557147/80ef5ea2-1c20-406b-867e-11c4bf36821d)\r\n\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "WineTer",
      "author_type": "User",
      "created_at": "2024-03-26T09:53:42Z",
      "updated_at": "2024-03-29T09:34:43Z",
      "closed_at": "2024-03-29T09:25:42Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/743/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "RockChinQ"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/743",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/743",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:52.530779",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "已修复，将在 `v3.1.0.2` 包含，但是提醒你，你的 regexp 规则(`\"\"`)会忽略所有消息。",
          "created_at": "2024-03-29T09:25:33Z"
        },
        {
          "author": "WineTer",
          "body": "> 已修复，将在 `v3.1.0.2` 包含，但是提醒你，你的 regexp 规则(`\"\"`)会忽略所有消息。\r\n\r\n感谢大佬 辛苦了",
          "created_at": "2024-03-29T09:34:42Z"
        }
      ]
    },
    {
      "issue_number": 737,
      "title": "接受QQ自带的表情包请求失败",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 系统环境\n\nwindow10\n\n### Python环境\n\npython10\n\n### QChatGPT版本\n\n3.1.0\n\n### 异常情况\n\n[Bug]: 一接受QQ自带的表情包就请求失败，然后怎么聊天都请求失败\n\n### 日志信息\n\n<img width=\"718\" alt=\"04FE6FBDFB595099BDE43C5214C51FE0\" src=\"https://github.com/RockChinQ/QChatGPT/assets/163013919/3450ff55-b8f1-4b96-8f05-14f556f4870d\">\r\n\n\n### 启用的插件\n\n[2024-03-23 14:31:29.517] C:\\Users\\Administrator\\Desktop\\ai\\QChatGPT-3.1.0\\QChatGPT-3.1.0\\pkg\\pipeline\\process\\handlers\\chat.py (97) - [ERROR] :\r\n    对话(1)请求失败: 模型请求失败: 请求参数错误: Error code: 400 - {'error': {'message': \"* GenerateContentRequest.contents[4].parts[0].data: required oneof field 'data' must have one initialized field\\n (request id: 20240323143144397036627ZRyc73Tm) (request id: )\", 'type': '', 'param': '', 'code': 400}}\r\n[2024-03-23 14:31:29.947] C:\\Users\\Administrator\\Desktop\\ai\\QChatGPT-3.1.0\\QChatGPT-3.1.0\\pkg\\pipeline\\controller.py (81) - [ERROR] :\r\n    模型请求失败: 请求参数错误: Error code: 400 - {'error': {'message': \"* GenerateContentRequest.contents[4].parts[0].data: required oneof field 'data' must have one initialized field\\n (request id: 20240323143144397036627ZRyc73Tm) (request id: )\", 'type': '', 'param': '', 'code': 400}}",
      "state": "closed",
      "author": "xiaoyu013",
      "author_type": "User",
      "created_at": "2024-03-23T06:33:54Z",
      "updated_at": "2024-03-29T09:34:33Z",
      "closed_at": "2024-03-29T09:34:33Z",
      "labels": [
        "bug?",
        "Stale"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/737/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/737",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/737",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:52.715249",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "怎么复现？用的什么模型？发什么消息",
          "created_at": "2024-03-23T14:42:54Z"
        }
      ]
    },
    {
      "issue_number": 745,
      "title": "[Feature]: 忽略空 System Prompt",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n以避免类似 #744 的情况",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-03-27T10:13:13Z",
      "updated_at": "2024-03-29T09:34:18Z",
      "closed_at": "2024-03-29T09:34:17Z",
      "labels": [
        "eh: Improve",
        "m: Session"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/745/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/745",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/745",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:52.934302",
      "comments": []
    },
    {
      "issue_number": 744,
      "title": "[Bug]: 程序使用gemini-pro时报错",
      "body": "### 部署方式\n\nDocker部署\n\n### 消息平台适配器\n\naiocqhttp（使用 OneBot 协议接入的）\n\n### 系统环境\n\ndocker \n\n### Python环境\n\nPython 3.10.13\n\n### QChatGPT版本\n\nv3.1.0.1\n\n### 异常情况\n\n# 程序使用OneAPI接入的gemini-pro报错\r\n### 环境1：docker-compose部署，使用aiocqhttp适配器-ws反向连接的llonebot\r\n### 环境2：OneAPI环境 美西VPS，docker-compose部署，接入gemini-pro\r\n\r\n测试curl https://generativelanguage.googleapis.com/v1beta/models/gemini-pro?key=$API_KEY  回报正常\r\n\r\n{\r\n  \"name\": \"models/gemini-pro\",\r\n  \"version\": \"001\",\r\n  \"displayName\": \"Gemini 1.0 Pro\",\r\n  \"description\": \"The best model for scaling across a wide range of tasks\",\r\n  \"inputTokenLimit\": 30720,\r\n  \"outputTokenLimit\": 2048,\r\n  \"supportedGenerationMethods\": [\r\n    \"generateContent\",\r\n    \"countTokens\"\r\n  ],\r\n  \"temperature\": 0.9,\r\n  \"topP\": 1,\r\n  \"topK\": 1\r\n}\r\n\r\n确定IP未被谷歌拉黑\r\n\r\n\r\n# 程序报错内容\r\n\r\n\r\n     qchat  | [2024-03-26 15:11:05.506] /app/pkg/pipeline/process/handlers/chat.py (97) - [ERROR] :\r\n     qchat  |     对话(0)请求失败: 模型请求失败: 请求参数错误: Error code: 400 - {'error': {'message': \"* \r\n     GenerateContentRequest.contents[0].parts[0].data: required oneof field 'data' must have one initialized field\r\n     \\n (request id: 202403262311052850525336600142)\", 'type': '', 'param': '', 'code': 400}}\r\n\r\n### 查询过issues同类型报错，但并不能解决\r\n\r\n#645 \r\n\r\n## 使用另外的程序调用OneAPI的gemini-pro则正常\r\n感觉似乎并不是OneAPI方面的问题\r\n![测试](https://github.com/RockChinQ/QChatGPT/assets/18377783/d83ea6fe-2698-45c3-9fc3-2b4d75b9ff0f)\r\n\n\n### 日志信息\n\n# 报错的完整日志文件\r\n[qcg-2024-03-26-15-10-56.log](https://github.com/RockChinQ/QChatGPT/files/14760634/qcg-2024-03-26-15-10-56.log)\n\n### 启用的插件\n\n无插件",
      "state": "closed",
      "author": "LAN-Cliv",
      "author_type": "User",
      "created_at": "2024-03-26T15:28:03Z",
      "updated_at": "2024-03-26T15:41:42Z",
      "closed_at": "2024-03-26T15:41:42Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/744/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/744",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/744",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:52.934324",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "可能是默认prompt为空导致的参数错误，可以尝试在 [配置文件provider.json](https://qchatgpt.rockchin.top/posts/config/provider.html) 设置一个不为空的 prompt试试看",
          "created_at": "2024-03-26T15:34:37Z"
        },
        {
          "author": "LAN-Cliv",
          "body": "> 可能是默认prompt为空导致的参数错误，可以尝试在 [配置文件provider.json](https://qchatgpt.rockchin.top/posts/config/provider.html) 设置一个不为空的 prompt试试看\r\n\r\n正常了，非常感谢🤞",
          "created_at": "2024-03-26T15:41:30Z"
        }
      ]
    },
    {
      "issue_number": 736,
      "title": "[Bug]: 访问控制 access-control配置项blacklist和whitelist均无效无效",
      "body": "### 部署方式\n\nDocker部署\n\n### 消息平台适配器\n\nyiri-mirai（Mirai）\n\n### 系统环境\n\ndebian 11 arm64\n\n### Python环境\n\n使用的容器环境\n\n### QChatGPT版本\n\n3.10\n\n### 异常情况\n\n正确配置访问控制 access-control配置项blacklist和whitelist后，在blacklist下无论在不在列表内均会触发ai聊天。whitelist下与blacklist一致\n\n### 日志信息\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "bright141",
      "author_type": "User",
      "created_at": "2024-03-22T13:36:24Z",
      "updated_at": "2024-03-23T14:40:02Z",
      "closed_at": "2024-03-23T14:40:02Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/736/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/736",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/736",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:53.155188",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "已修复，等待发版",
          "created_at": "2024-03-23T14:40:02Z"
        }
      ]
    },
    {
      "issue_number": 398,
      "title": "自定义!cmd",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n希望能自定义!cmd，这样可以把Qchatgpt插件和mirai插件的指令都统一归纳",
      "state": "closed",
      "author": "SkyFutu",
      "author_type": "User",
      "created_at": "2023-04-08T07:39:57Z",
      "updated_at": "2024-03-22T11:40:27Z",
      "closed_at": "2024-03-22T09:15:52Z",
      "labels": [
        "eh: Improve",
        "m: Commands",
        "m: Plugins"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/398/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "RockChinQ"
      ],
      "milestone": "3.1",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/398",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/398",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:53.379525",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "涉及到插件管理模块重构以及多模块解耦重构，预计将在`2.5.0`实现",
          "created_at": "2023-04-12T08:37:22Z"
        },
        {
          "author": "RockChinQ",
          "body": "已支持命令组件扩展，这种方式的命令支持将帮助信息显示到 `!cmd`命令中，请等待 v3.1 发布后查看文档中的组件扩展方式。",
          "created_at": "2024-03-22T09:15:52Z"
        },
        {
          "author": "SkyFutu",
          "body": "难绷，我自己已经写了个help插件了",
          "created_at": "2024-03-22T11:21:37Z"
        },
        {
          "author": "RockChinQ",
          "body": "因为!cmd命令的响应都是程序自动生成的，所以单独附加自定义内容会破坏单一性原则~",
          "created_at": "2024-03-22T11:40:26Z"
        }
      ]
    },
    {
      "issue_number": 689,
      "title": "[Feature]: 希望在内容审核能力侧可以支持扩展，方便增加自定义增加安全过滤的能力",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n需要的几件事情：\r\n\r\n* 基于内容做脱敏替换\r\n* 内容安全审核、广告识别\r\n* 增加自动化路由的内部私有模型（特定场景）",
      "state": "closed",
      "author": "samzong",
      "author_type": "User",
      "created_at": "2024-02-18T08:03:38Z",
      "updated_at": "2024-03-22T09:15:15Z",
      "closed_at": "2024-03-22T09:15:12Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/689/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "RockChinQ"
      ],
      "milestone": "3.1",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/689",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/689",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:53.788387",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "已支持组件扩展，请等待 v3.1 发布后查看文档中的组件扩展方式。",
          "created_at": "2024-03-22T09:15:12Z"
        }
      ]
    },
    {
      "issue_number": 723,
      "title": "[Bug]: aiocqhttp不支持语音消息类型",
      "body": "### 部署方式\r\n\r\n手动部署\r\n\r\n### 消息平台适配器\r\n\r\naiocqhttp\r\n\r\n### 系统环境\r\n\r\nWindows10 中国大陆\r\n\r\n### Python环境\r\n\r\npython 3.11.5\r\n\r\n### QChatGPT版本\r\n\r\nv3.02\r\n\r\n### 异常情况\r\n\r\naiocqhttp适配器接NTQQ LLOneBot无法发送voice\r\n\r\n### 日志信息\r\n\r\nPS D:\\chat\\QChatGPT> & C:/Users/Administrator/AppData/Local/Programs/Python/Python311/python.exe d:/chat/QChatGPT/main.py\r\n\r\n  ___   ___ _         _    ___ ___ _____         \r\n / _ \\ / __| |_  __ _| |_ / __| _ \\_   _|        \r\n| (_) | (__| ' \\/ _` |  _| (_ |  _/ | |          \r\n \\__\\_\\\\___|_||_\\__,_|\\__|\\___|_|   |_|          \r\n\r\n⭐️开源地址: https://github.com/RockChinQ/QChatGPT\r\n📖文档地址: https://q.rkcn.top\r\n\r\n[2024-03-13 14:48:48.647] d:\\chat\\QChatGPT\\pkg\\platform\\manager.py (108) - [INFO] :\r\n    初始化平台适配器 0: aiocqhttp\r\n[2024-03-13 14:48:48 +0800] [14236] [INFO] Running on http://0.0.0.0:3002 (CTRL + C to quit)\r\n[2024-03-13 14:48:51 +0800] [14236] [INFO] 127.0.0.1:61103 GET /ws 1.1 101 - 2007\r\n[2024-03-13 14:49:00.247] d:\\chat\\QChatGPT\\pkg\\pipeline\\process\\process.py (36) - [INFO] :\r\n    处理 person_200522012 的请求(0): !voice type mhyvoice\r\n[2024-03-13 14:49:00.249] d:\\chat\\QChatGPT\\pkg\\plugin\\manager.py (151) - [ERROR] :\r\n    插件 chat_voice 触发事件 PersonCommandSent 时发生错误: name 'logging' is not defined\r\n[2024-03-13 14:49:00.251] d:\\chat\\QChatGPT\\pkg\\pipeline\\process\\handlers\\command.py (93) - [INFO] :\r\n    命令(0)报错: 未知命令: voice\r\n[2024-03-13 15:21:00.925] d:\\chat\\QChatGPT\\pkg\\pipeline\\process\\process.py (36) - [INFO] :\r\n    处理 person_200522012 的请求(1): 06\r\n[2024-03-13 15:21:02.812] d:\\chat\\QChatGPT\\pkg\\pipeline\\process\\handlers\\chat.py (81) - [INFO] :\r\n    对话(1)响应: Hello! How can I ass...\r\n[2024-03-13 15:21:02.814] d:\\chat\\QChatGPT\\pkg\\plugin\\manager.py (151) - [ERROR] :\r\n    插件 chat_voice 触发事件 NormalMessageResponded 时发生错误: name 'logging' is not defined\r\n\r\n### 启用的插件\r\n\r\nchat_voice",
      "state": "closed",
      "author": "WineTer",
      "author_type": "User",
      "created_at": "2024-03-13T08:29:07Z",
      "updated_at": "2024-03-20T05:41:10Z",
      "closed_at": "2024-03-20T05:41:10Z",
      "labels": [
        "bug?",
        "IM: aiocqhttp",
        "Stale"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/723/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.1",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/723",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/723",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:53.957844",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "应该是支持语音的，你这个报错是其他问题，找插件作者问问",
          "created_at": "2024-03-14T08:21:17Z"
        }
      ]
    },
    {
      "issue_number": 681,
      "title": "[Feature]: 插件加载阶段前置",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n在Application对象构建之前就加载所有插件，以便添加插件扩展的运行时组件。",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-02-08T05:21:02Z",
      "updated_at": "2024-03-19T14:48:14Z",
      "closed_at": "2024-03-19T14:48:14Z",
      "labels": [
        "eh: Improve",
        "m: Lifecycle"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/681/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "RockChinQ"
      ],
      "milestone": "3.1",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/681",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/681",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:54.138844",
      "comments": []
    },
    {
      "issue_number": 731,
      "title": "[Bug]:  无法使用full-scenario模式",
      "body": "### 部署方式\n\n手动部署\n\n### 消息平台适配器\n\nNakuru（go-cqhttp）\n\n### 系统环境\n\nwindows server 2019\n\n### Python环境\n\npython3\n\n### QChatGPT版本\n\nv3.0\n\n### 异常情况\n\n在provider设置为full-scenario模式时会提示未知的 Prompt 加载器: {mode_name}')\r\nValueError: 未知的 Prompt 加载器: full-scenario\n\n### 日志信息\n\nTraceback (most recent call last):\r\n  File \"E:\\备胎计划\\机器人\\Chatgpt\\QChatgpt\\main.py\", line 54, in <module>\r\n    asyncio.run(main_entry())\r\n  File \"D:\\Data\\python\\Lib\\asyncio\\runners.py\", line 194, in run\r\n    return runner.run(main)\r\n           ^^^^^^^^^^^^^^^^\r\n  File \"D:\\Data\\python\\Lib\\asyncio\\runners.py\", line 118, in run\r\n    return self._loop.run_until_complete(task)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"D:\\Data\\python\\Lib\\asyncio\\base_events.py\", line 684, in run_until_complete\r\n    return future.result()\r\n           ^^^^^^^^^^^^^^^\r\n  File \"E:\\备胎计划\\机器人\\Chatgpt\\QChatgpt\\main.py\", line 48, in main_entry\r\n    await boot.main()\r\n  File \"E:\\备胎计划\\机器人\\Chatgpt\\QChatgpt\\pkg\\core\\boot.py\", line 37, in main\r\n    app_inst = await make_app()\r\n               ^^^^^^^^^^^^^^^^\r\n  File \"E:\\备胎计划\\机器人\\Chatgpt\\QChatgpt\\pkg\\core\\boot.py\", line 29, in make_app\r\n    await stage_inst.run(ap)\r\n  File \"E:\\备胎计划\\机器人\\Chatgpt\\QChatgpt\\pkg\\core\\stages\\build_app.py\", line 79, in run\r\n    await llm_prompt_mgr_inst.initialize()\r\n  File \"E:\\备胎计划\\机器人\\Chatgpt\\QChatgpt\\pkg\\provider\\sysprompt\\sysprompt.py\", line 32, in initialize\r\n    raise ValueError(f'未知的 Prompt 加载器: {mode_name}')\r\nValueError: 未知的 Prompt 加载器: full-scenario\n\n### 启用的插件\n\nWebwlkrPlugin",
      "state": "closed",
      "author": "buildin1",
      "author_type": "User",
      "created_at": "2024-03-17T15:30:53Z",
      "updated_at": "2024-03-18T13:06:14Z",
      "closed_at": "2024-03-18T13:06:14Z",
      "labels": [
        "bug?",
        "m: Provider"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/731/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/731",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/731",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:54.138865",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "确认是bug，将在 3.1 版本修复",
          "created_at": "2024-03-18T13:05:19Z"
        }
      ]
    },
    {
      "issue_number": 727,
      "title": "[Feature]: 自定义模型名称",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n支持自定义模型，指定其使用的请求器和密钥管理器",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-03-16T06:28:01Z",
      "updated_at": "2024-03-16T14:19:29Z",
      "closed_at": "2024-03-16T14:19:29Z",
      "labels": [
        "eh: Improve",
        "m: Provider"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/727/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.1",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/727",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/727",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:54.374082",
      "comments": []
    },
    {
      "issue_number": 721,
      "title": "[Bug]: 模型改成gpt-3.5-turbo-0125后报错",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\nNone\n\n### 系统环境\n\nWindows11 中国大陆\n\n### Python环境\n\n3.10.9\n\n### QChatGPT版本\n\nv3.0.2\n\n### 异常情况\n\n似乎不支持openai最新的gpt-3.5-turbo-0125模型。\n\n### 日志信息\n\n\r\n  ___   ___ _         _    ___ ___ _____\r\n / _ \\ / __| |_  __ _| |_ / __| _ \\_   _|\r\n| (_) | (__| ' \\/ _` |  _| (_ |  _/ | |\r\n \\__\\_\\\\___|_||_\\__,_|\\__|\\___|_|   |_|\r\n\r\n⭐️开源地址: https://github.com/RockChinQ/QChatGPT\r\n📖文档地址: https://q.rkcn.top\r\n\r\n[2024-03-12 22:21:08.705] E:\\QChatGPT\\pkg\\platform\\manager.py (108) - [INFO] :\r\n    初始化平台适配器 0: aiocqhttp\r\n[2024-03-12 22:21:08.845] E:\\QChatGPT\\pkg\\plugin\\loaders\\legacy.py (147) - [ERROR] :\r\n    加载插件模块 chat_voice.main 时发生错误\r\nTraceback (most recent call last):\r\n  File \"E:\\QChatGPT\\pkg\\plugin\\loaders\\legacy.py\", line 141, in _walk_plugin_path\r\n    importlib.import_module(module.__name__ + \".\" + item.name)\r\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.10_3.10.3056.0_x64__qbz5n2kfra8p0\\lib\\importlib\\__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1050, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 1027, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 1006, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 688, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 883, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 241, in _call_with_frames_removed\r\n  File \"E:\\QChatGPT\\plugins\\chat_voice\\main.py\", line 6, in <module>\r\n    from plugins.chat_voice.config.mapper import voice_type_mapping, method_mapping\r\n  File \"E:\\QChatGPT\\plugins\\chat_voice\\config\\mapper.py\", line 3, in <module>\r\n    from plugins.chat_voice.config.voice_config import SoVitsConfig\r\nModuleNotFoundError: No module named 'plugins.chat_voice.config.voice_config'\r\n[2024-03-12 22:21:09.701] E:\\QChatGPT\\pkg\\plugin\\loaders\\legacy.py (147) - [ERROR] :\r\n    加载插件模块 revLibs.main 时发生错误\r\nTraceback (most recent call last):\r\n  File \"E:\\QChatGPT\\pkg\\plugin\\loaders\\legacy.py\", line 141, in _walk_plugin_path\r\n    importlib.import_module(module.__name__ + \".\" + item.name)\r\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.10_3.10.3056.0_x64__qbz5n2kfra8p0\\lib\\importlib\\__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1050, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 1027, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 1006, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 688, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 883, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 241, in _call_with_frames_removed\r\n  File \"E:\\QChatGPT\\plugins\\revLibs\\main.py\", line 11, in <module>\r\n    import plugins.revLibs.pkg.process.revss as revss\r\n  File \"E:\\QChatGPT\\plugins\\revLibs\\pkg\\process\\revss.py\", line 9, in <module>\r\n    import pkg.openai.dprompt as dprompt\r\nModuleNotFoundError: No module named 'pkg.openai'\r\n[2024-03-12 22:21:09.703] E:\\QChatGPT\\pkg\\plugin\\loaders\\legacy.py (147) - [ERROR] :\r\n    加载插件模块 revLibs.pkg.process.impls.gpt4free 时发生错误\r\nTraceback (most recent call last):\r\n  File \"E:\\QChatGPT\\pkg\\plugin\\loaders\\legacy.py\", line 141, in _walk_plugin_path\r\n    importlib.import_module(module.__name__ + \".\" + item.name)\r\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.10_3.10.3056.0_x64__qbz5n2kfra8p0\\lib\\importlib\\__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1050, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 1027, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 1006, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 688, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 883, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 241, in _call_with_frames_removed\r\n  File \"E:\\QChatGPT\\plugins\\revLibs\\pkg\\process\\impls\\gpt4free.py\", line 6, in <module>\r\n    import g4f\r\nModuleNotFoundError: No module named 'g4f'\r\n[2024-03-12 22:21:09.703] E:\\QChatGPT\\pkg\\plugin\\loaders\\legacy.py (147) - [ERROR] :\r\n    加载插件模块 revLibs.pkg.process.proccmd 时发生错误\r\nTraceback (most recent call last):\r\n  File \"E:\\QChatGPT\\pkg\\plugin\\loaders\\legacy.py\", line 141, in _walk_plugin_path\r\n    importlib.import_module(module.__name__ + \".\" + item.name)\r\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.10_3.10.3056.0_x64__qbz5n2kfra8p0\\lib\\importlib\\__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1050, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 1027, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 1006, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 688, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 883, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 241, in _call_with_frames_removed\r\n  File \"E:\\QChatGPT\\plugins\\revLibs\\pkg\\process\\proccmd.py\", line 1, in <module>\r\n    import plugins.revLibs.pkg.process.revss as revss\r\n  File \"E:\\QChatGPT\\plugins\\revLibs\\pkg\\process\\revss.py\", line 9, in <module>\r\n    import pkg.openai.dprompt as dprompt\r\nModuleNotFoundError: No module named 'pkg.openai'\r\n[2024-03-12 22:21:09.716] E:\\QChatGPT\\pkg\\plugin\\loaders\\legacy.py (147) - [ERROR] :\r\n    加载插件模块 revLibs.pkg.process.procmsg 时发生错误\r\nTraceback (most recent call last):\r\n  File \"E:\\QChatGPT\\pkg\\plugin\\loaders\\legacy.py\", line 141, in _walk_plugin_path\r\n    importlib.import_module(module.__name__ + \".\" + item.name)\r\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.10_3.10.3056.0_x64__qbz5n2kfra8p0\\lib\\importlib\\__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1050, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 1027, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 1006, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 688, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 883, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 241, in _call_with_frames_removed\r\n  File \"E:\\QChatGPT\\plugins\\revLibs\\pkg\\process\\procmsg.py\", line 2, in <module>\r\n    import plugins.revLibs.pkg.process.revss as revss\r\n  File \"E:\\QChatGPT\\plugins\\revLibs\\pkg\\process\\revss.py\", line 9, in <module>\r\n    import pkg.openai.dprompt as dprompt\r\nModuleNotFoundError: No module named 'pkg.openai'\r\n[2024-03-12 22:21:09.720] E:\\QChatGPT\\pkg\\plugin\\loaders\\legacy.py (147) - [ERROR] :\r\n    加载插件模块 revLibs.pkg.process.revss 时发生错误\r\nTraceback (most recent call last):\r\n  File \"E:\\QChatGPT\\pkg\\plugin\\loaders\\legacy.py\", line 141, in _walk_plugin_path\r\n    importlib.import_module(module.__name__ + \".\" + item.name)\r\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.10_3.10.3056.0_x64__qbz5n2kfra8p0\\lib\\importlib\\__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1050, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 1027, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 1006, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 688, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 883, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 241, in _call_with_frames_removed\r\n  File \"E:\\QChatGPT\\plugins\\revLibs\\pkg\\process\\revss.py\", line 9, in <module>\r\n    import pkg.openai.dprompt as dprompt\r\nModuleNotFoundError: No module named 'pkg.openai'\r\n[2024-03-12 22:21:09 +0800] [17300] [INFO] Running on http://127.0.0.1:8181 (CTRL + C to quit)\r\n[2024-03-12 22:21:09 +0800] [17300] [INFO] 127.0.0.1:52378 GET /ws 1.1 101 - 0\r\n[2024-03-12 22:21:12.478] E:\\QChatGPT\\pkg\\pipeline\\controller.py (152) - [ERROR] :\r\n    处理请求时出错 query_id=0: 不支持模型: gpt-3.5-turbo-0125 , 请检查配置文件\n\n### 启用的插件\n\n{\r\n    \"plugins\": [\r\n        {\r\n            \"name\": \"Switcher\",\r\n            \"description\": \"快捷切换使用的模型\",\r\n            \"version\": \"0.2.0\",\r\n            \"author\": \"RockChinQ\",\r\n            \"source\": \"https://github.com/RockChinQ/Switcher\",\r\n            \"main_file\": \"plugins/Switcher/main.py\",\r\n            \"pkg_path\": \"plugins/Switcher/\",\r\n            \"priority\": 0,\r\n            \"enabled\": true\r\n        },\r\n        {\r\n            \"name\": \"Webwlkr\",\r\n            \"description\": \"基于GPT的函数调用能力，为QChatGPT提供联网功能\",\r\n            \"version\": \"0.1.1\",\r\n            \"author\": \"RockChinQ\",\r\n            \"source\": \"https://github.com/RockChinQ/WebwlkrPlugin\",\r\n            \"main_file\": \"plugins/WebwlkrPlugin/main.py\",\r\n            \"pkg_path\": \"plugins/WebwlkrPlugin/\",\r\n            \"priority\": 0,\r\n            \"enabled\": true\r\n        },\r\n        {\r\n            \"pkg_path\": \"plugins/revLibs/\",\r\n            \"source\": \"https://github.com/RockChinQ/revLibs\"\r\n        },\r\n        {\r\n            \"pkg_path\": \"plugins/chat_voice/\",\r\n            \"source\": \"https://github.com/oliverkirk-sudo/chat_voice.git\"\r\n        }\r\n    ]\r\n}",
      "state": "closed",
      "author": "Phi-2X",
      "author_type": "User",
      "created_at": "2024-03-12T14:29:38Z",
      "updated_at": "2024-03-16T14:19:29Z",
      "closed_at": "2024-03-16T14:19:28Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/721/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.1",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/721",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/721",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:54.374101",
      "comments": [
        {
          "author": "Phi-2X",
          "body": "日志里插件的那几个报错确认不是这个bug的原因，但是好像这个版本下好多插件都失效了呀，有点麻烦",
          "created_at": "2024-03-12T14:31:27Z"
        },
        {
          "author": "RockChinQ",
          "body": "0125似乎还没有被支持，你可以看看其他的已支持的模型：https://github.com/RockChinQ/QChatGPT/blob/0ee383be2773eb000bab45a016d217b5d6bb772f/pkg/provider/requester/modelmgr.py#L37-L241\r\n\r\n另外，预计在下一个版本中会支持 在线模型信息分发 和 模型信息自定义，插件的 API 和兼容性也将进行重新设计。",
          "created_at": "2024-03-12T14:59:16Z"
        }
      ]
    },
    {
      "issue_number": 687,
      "title": "请问如何自定义模型名？例如gpt-4-all",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n请问如何自定义模型名？例如gpt-4-all",
      "state": "closed",
      "author": "lueluelue2006",
      "author_type": "User",
      "created_at": "2024-02-12T10:52:41Z",
      "updated_at": "2024-03-16T14:19:28Z",
      "closed_at": "2024-03-16T14:19:28Z",
      "labels": [
        "eh: Improve",
        "m: Provider",
        "pd: Need design"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/687/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/687",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/687",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:54.558956",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "暂时不支持，这个需求是从何而来？",
          "created_at": "2024-02-12T11:51:36Z"
        },
        {
          "author": "lueluelue2006",
          "body": "> 暂时不支持，这个需求是从何而来？\r\n\r\n有很多OneAPI站点有自定义名字的模型，比如说gpt-4-all来表示plus。还有一些比如说deepseek，Kimi等模型",
          "created_at": "2024-02-12T13:18:15Z"
        }
      ]
    },
    {
      "issue_number": 722,
      "title": "[Feature]: aiocqhttp 和 qq-botpy 的主动消息发送接口",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\nrt",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-03-13T08:06:07Z",
      "updated_at": "2024-03-16T07:18:29Z",
      "closed_at": "2024-03-16T07:18:28Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/722/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.1",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/722",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/722",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:54.780462",
      "comments": []
    },
    {
      "issue_number": 705,
      "title": "[Feature]: pipeline 算子级别的超时控制",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n将现有超时控制粒度提升到 pipeline 的 process 算子",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-02-28T09:31:07Z",
      "updated_at": "2024-03-16T06:23:52Z",
      "closed_at": "2024-03-16T06:23:52Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/705/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "RockChinQ"
      ],
      "milestone": "3.1",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/705",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/705",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:54.780489",
      "comments": []
    },
    {
      "issue_number": 691,
      "title": "[Bug]: 处理对话时尝试访问“openaipublic.blob.core.windows.net”并失败",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\nMirai\n\n### 系统环境\n\nWindows Server 2022 中国大陆-宿迁\n\n### Python环境\n\nPython 3.11\n\n### QChatGPT版本\n\nv3.0.0\n\n### 异常情况\n\n部署使用的云服务器所在的网络环境比较奇怪，无法直连github等大多数不那么稳定的国外网站，不过反代此前一直可以正常使用。\r\n\r\n在部署新版本QCG之后，第一次测试对话弹出错误并反复发生（具体内容参考日志信息）。\r\n\r\n之后用科学上网并移除反代连接了一次，成功；随后再断开科学上网恢复使用反代地址，就可以正常对话，短期内并没有再次触发这个错误（即使重启bot也不会触发）。\n\n### 日志信息\n\n[\r\n[qcg-2024-02-19-23-22-34.log](https://github.com/RockChinQ/QChatGPT/files/14334455/qcg-2024-02-19-23-22-34.log)\r\n](url)\n\n### 启用的插件\n\n无",
      "state": "closed",
      "author": "a86296007",
      "author_type": "User",
      "created_at": "2024-02-19T16:03:31Z",
      "updated_at": "2024-03-14T08:13:46Z",
      "closed_at": "2024-03-14T08:13:40Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/691/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "RockChinQ"
      ],
      "milestone": "3.1",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/691",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/691",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:54.780499",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "这个是计算token数时访问openai服务器失败导致的，可以尝试在 `data/config/system.json`里设置一个正向代理试试看",
          "created_at": "2024-02-20T01:56:29Z"
        },
        {
          "author": "a86296007",
          "body": "> 这个是计算token数时访问openai服务器失败导致的，可以尝试在 `data/config/system.json`里设置一个正向代理试试看\r\n\r\n我这边大概没有长时间使用正向代理的条件，不知能否添加一个跳过此步骤的设置呢",
          "created_at": "2024-02-20T02:01:39Z"
        },
        {
          "author": "RockChinQ",
          "body": "已删除 分词器 ，不再进行分词分割上文阶段：\r\ncommit 1d963d0f0c3335a36a78b6c66bde1cf010a5ad29\r\n",
          "created_at": "2024-03-14T08:13:40Z"
        }
      ]
    },
    {
      "issue_number": 711,
      "title": "[Feature]: 完善 qq-botpy 群号和用户号缓存转换机制",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n使用本地json文件存储映射关系",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-03-08T06:43:05Z",
      "updated_at": "2024-03-14T08:05:15Z",
      "closed_at": "2024-03-14T08:05:15Z",
      "labels": [
        "eh: Improve",
        "IM: qq-botpy"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/711/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.1",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/711",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/711",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:54.980835",
      "comments": []
    },
    {
      "issue_number": 714,
      "title": "[Feature]: 控制器报错时带上阶段名称输出",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\nrt",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-03-11T03:59:05Z",
      "updated_at": "2024-03-14T02:51:14Z",
      "closed_at": "2024-03-14T02:51:14Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/714/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.1",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/714",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/714",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:54.980855",
      "comments": []
    },
    {
      "issue_number": 718,
      "title": "[Feature]: aiocqhttp 的 access token 设置问题",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n可能需要在文档中指引",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-03-11T13:59:25Z",
      "updated_at": "2024-03-13T08:49:58Z",
      "closed_at": "2024-03-13T08:49:58Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/718/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.1",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/718",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/718",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:54.980862",
      "comments": []
    },
    {
      "issue_number": 716,
      "title": "[Bug]: 回复bot时会给api提供额外的@{qq} 信息",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\nNone\n\n### 系统环境\n\nUbuntu\n\n### Python环境\n\nPython 3.10.12\n\n### QChatGPT版本\n\nv3.0.2\n\n### 异常情况\n\n在群里做回复操作时，\n\n### 日志信息\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "murasamme",
      "author_type": "User",
      "created_at": "2024-03-11T07:49:55Z",
      "updated_at": "2024-03-13T08:32:33Z",
      "closed_at": "2024-03-13T08:32:33Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/716/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.1",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/716",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/716",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:54.980868",
      "comments": [
        {
          "author": "murasamme",
          "body": "设置at响应，回复机器人时候会把@[机器人qq] 也给送到api里，某些语境下会干扰回答\r\n\r\n回复机器人：\r\n![EAB45AF26E4273C39E2D4B114FFF39AB](https://github.com/RockChinQ/QChatGPT/assets/52225526/c9a20922-9b3c-4dc6-9171-05d473ff4a6d)\r\n\r\n机器人回复：\r\n![F1625ED015F3936F16EDD09C0051BC89](https://github.com/RockChinQ/QChatGPT/assets/52225526/d93e455c-fe5f-4",
          "created_at": "2024-03-11T07:55:57Z"
        },
        {
          "author": "murasamme",
          "body": "使用插件：无\r\n登陆框架：Lagrange",
          "created_at": "2024-03-11T07:56:50Z"
        },
        {
          "author": "murasamme",
          "body": "设置at触发的条件下，仅回复bot信息不进行at也会触发消息。也就是当回复+at时触发bot的应该是回复事件，而at则作为消息内容传递出去了。这部分可以做一下区分\r\n![{E2DFC838-C216-4146-8BEB-E448526D298A}](https://github.com/RockChinQ/QChatGPT/assets/52225526/c4376d4c-6908-4abe-80ef-17cd3d8f7086)\r\n![QQ截图20240312154651](https://github.com/RockChinQ/QChatGPT/assets/52225526/719d94",
          "created_at": "2024-03-12T07:47:24Z"
        },
        {
          "author": "RockChinQ",
          "body": "用的什么消息框架登录的？",
          "created_at": "2024-03-13T08:11:04Z"
        },
        {
          "author": "RockChinQ",
          "body": "已修复。",
          "created_at": "2024-03-13T08:31:23Z"
        }
      ]
    },
    {
      "issue_number": 710,
      "title": "[Feature]: 支持更多组件的可扩展性",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n提供统一的组件扩展 API 供调用。\r\n\r\n支持以下组件的扩展：\r\n\r\n- 命令算子\r\n- 启动阶段\r\n- 请求处理阶段\r\n- 内容过滤器\r\n- 长消息处理策略\r\n- 限速算法\r\n- 群消息响应规则\r\n- 消息平台适配器\r\n- 插件安装器\r\n- 插件加载器\r\n- LLM API 请求器\r\n- 分词器\r\n- Prompt 加载器",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-03-03T08:40:30Z",
      "updated_at": "2024-03-12T16:32:28Z",
      "closed_at": "2024-03-12T16:32:28Z",
      "labels": [
        "eh: Improve",
        "m: Plugins",
        "pd: Need design"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/710/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "RockChinQ"
      ],
      "milestone": "3.1",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/710",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/710",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:55.160975",
      "comments": []
    },
    {
      "issue_number": 720,
      "title": "[Plugin]: 请求登记新插件",
      "body": "### 插件名称\n\nURLMaskerPlugin\n\n### 插件代码库地址\n\nhttps://github.com/Yuumi0221/URLMaskerPlugin\n\n### 插件简介\n\nURL打码功能插件，关联：#715 ",
      "state": "closed",
      "author": "Yuumi0221",
      "author_type": "User",
      "created_at": "2024-03-12T02:17:17Z",
      "updated_at": "2024-03-12T03:31:37Z",
      "closed_at": "2024-03-12T03:31:37Z",
      "labels": [
        "External Plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/720/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/720",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/720",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:55.160994",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "感谢贡献，已添加到：\r\n\r\n- https://qchatgpt.rockchin.top/posts/plugin/list.html\r\n- https://github.com/stars/RockChinQ/lists/qchatgpt-%E6%8F%92%E4%BB%B6",
          "created_at": "2024-03-12T03:31:32Z"
        }
      ]
    },
    {
      "issue_number": 713,
      "title": "[Bug]: 下载的插件指令使用时均为未知指令",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\nMirai\n\n### 系统环境\n\nWindows 10 专业版 22H2 中国\n\n### Python环境\n\nPython 3.9.13 (tags/v3.9.13:6de2ca5, May 17 2022, 16:36:42)\n\n### QChatGPT版本\n\n当前版本:  v3.0.2\n\n### 异常情况\n\n刚下下来就有的问题，问题：任何附加插件的指令都无法识别（包括官方提供插件目录下的），这两天在研究自制插件实在是解决不了这个问题所以才来问\n\n### 日志信息\n\n[qcg-2024-03-08-20-45-58.log](https://github.com/RockChinQ/QChatGPT/files/14538288/qcg-2024-03-08-20-45-58.log)\r\n\n\n### 启用的插件\n\n启用[SysStatPlugin]\r\n启用了Hello world\r\n启用了Server MC(这个是自己写的删了和不删没有区别）",
      "state": "closed",
      "author": "RWFYS",
      "author_type": "User",
      "created_at": "2024-03-08T12:52:01Z",
      "updated_at": "2024-03-08T13:33:10Z",
      "closed_at": "2024-03-08T13:33:10Z",
      "labels": [
        "bug?",
        "m: Commands",
        "m: Plugins"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/713/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/713",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/713",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:55.364946",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "3.x 触发命令事件时，传入的 `command` 参数本应为 删除 `!` 第一段字符串（`sys`)，但遗漏了删除 `!` 的步骤（错误地传入 `!sys`），现已在 最新代码修复，下一版本发布后，将恢复为 删除了 `!` 的第一节命令（`sys`)。",
          "created_at": "2024-03-08T13:14:34Z"
        },
        {
          "author": "RWFYS",
          "body": "谢谢，已解决问题",
          "created_at": "2024-03-08T13:33:07Z"
        }
      ]
    },
    {
      "issue_number": 56,
      "title": "修改README中关于部署的部分，增加doc目录存放说明文档",
      "body": "晚上花了6h部署（可能是太菜了QAQ）\r\n\r\n最后还是部署成功了，但一路下来踩坑翻看文档和issues观感并不是很好。\r\n所以我打算修改部分README，主要修改关于部署这部分的。\r\n我想结合之前的文档，issue和这次部署成功的经验单独写一份md文件。\r\n对原README的修改部分会尽可能的小，新加的内容会写新文件里，README里再去链接。\r\n我想详尽的部署教程，对于不熟悉的新手还是很有帮助的。\r\n",
      "state": "closed",
      "author": "summeriver13",
      "author_type": "User",
      "created_at": "2022-12-22T19:15:05Z",
      "updated_at": "2024-03-03T09:42:49Z",
      "closed_at": "2023-07-08T04:31:55Z",
      "labels": [
        "eh: Improve",
        "help needed",
        "good first issue"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 11,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/56/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/56",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/56",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:55.536688",
      "comments": [
        {
          "author": "summeriver13",
          "body": "等待维护者回复后，开PR或者再讨论。",
          "created_at": "2022-12-22T19:17:02Z"
        },
        {
          "author": "RockChinQ",
          "body": "感谢支持，您大可尝试编写可读性更高、更直观的部署教程，个人认为放到一个单独的文档可能会更好，同时若增加对常见问题的issue指引或许会更加方便",
          "created_at": "2022-12-23T02:00:37Z"
        },
        {
          "author": "RockChinQ",
          "body": "https://github.com/RockChinQ/QChatGPT/wiki",
          "created_at": "2023-01-02T07:19:33Z"
        },
        {
          "author": "summeriver13",
          "body": "wiki好像没办法提交pr吧？\r\n我以前是了解到wiki好像只能维护者去修改。",
          "created_at": "2023-01-06T12:28:24Z"
        },
        {
          "author": "summeriver13",
          "body": "不论如何，我先写好部署教程的md文件，再看用什么方式提交吧。",
          "created_at": "2023-01-06T12:29:29Z"
        }
      ]
    },
    {
      "issue_number": 704,
      "title": "[Bug]: 模型请求失败",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\ngo-cqhttp\n\n### 系统环境\n\nwindowsserver\n\n### Python环境\n\npython9.x\n\n### QChatGPT版本\n\n最新版本\n\n### 异常情况\n\n发送信息后，在qqchatgpt这个超时，然后报错\n\n### 日志信息\n\n[2024-02-27 10:12:58.437] C:\\sc\\qqchatgpt\\QChatGPT-master\\pkg\\pipeline\\process\\handlers\\chat.py (92) - [ERROR] :\r\n    对话(0)请求失败: 模型请求失败: 请求错误: Connection error.\r\n[2024-02-27 10:12:58.437] C:\\sc\\qqchatgpt\\QChatGPT-master\\pkg\\core\\controller.py (152) - [ERROR] :\r\n    处理请求时出错 query_id=0: Unknown message type: 请求失败<class 'str'>\n\n### 启用的插件\n\n[2024-02-27 10:16:22.987] C:\\sc\\qqchatgpt\\QChatGPT-master\\pkg\\platform\\manager.py (108) - [INFO] :\r\n    初始化平台适配器 0: nakuru\r\n[2024-02-27 10:16:23.000] C:\\sc\\qqchatgpt\\QChatGPT-master\\pkg\\platform\\sources\\nakuru.py (328) - [INFO] :\r\n    运行 Nakuru 适配器",
      "state": "closed",
      "author": "shecong",
      "author_type": "User",
      "created_at": "2024-02-27T02:17:14Z",
      "updated_at": "2024-03-03T08:42:10Z",
      "closed_at": "2024-03-03T08:42:10Z",
      "labels": [
        "bug?",
        "Stale"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/704/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "RockChinQ"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/704",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/704",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:55.819732",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "境内主机无法直接访问 OpenAI 接口。看文档，到 `data/config/provider.json` 加一下反向代理，或者去 `data/config/system.json` 加一下正向代理。",
          "created_at": "2024-02-27T11:10:12Z"
        },
        {
          "author": "shecong",
          "body": "代理地址需要怎么填写\r\n自己有梯子",
          "created_at": "2024-02-28T00:02:10Z"
        },
        {
          "author": "shecong",
          "body": "添加文档提示的正向代理后\r\nTraceback (most recent call last):\r\n  File \"C:\\sc\\qqchatgpt\\QChatGPT-master\\main.py\", line 18, in <module>\r\n    asyncio.run(boot.main())\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python39\\lib\\asyncio\\runners.py\", line 44, in run\r\n    return loop.run_until_complete(m",
          "created_at": "2024-02-28T00:07:57Z"
        },
        {
          "author": "shecong",
          "body": "请会爆出这个\r\n处理请求时出错 query_id=5: Server disconnected ",
          "created_at": "2024-02-28T00:22:19Z"
        },
        {
          "author": "RockChinQ",
          "body": "加一下反向代理，直接用我提供的那个就行了 `https://api.openai.rockchin.top/v1`",
          "created_at": "2024-02-28T04:44:37Z"
        }
      ]
    },
    {
      "issue_number": 683,
      "title": "[Feature]: 支持提示词变量",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n在提示词中加入变量实现类似于{用户}问了{问题}的功能",
      "state": "closed",
      "author": "iyxddw",
      "author_type": "User",
      "created_at": "2024-02-10T04:40:53Z",
      "updated_at": "2024-03-02T13:02:15Z",
      "closed_at": "2024-03-02T13:02:15Z",
      "labels": [
        "eh: Improve",
        "External Plugin"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/683/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "RockChinQ"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/683",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/683",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:55.988708",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "详细描述一下，提供一些案例什么的",
          "created_at": "2024-02-20T06:28:41Z"
        },
        {
          "author": "iyxddw",
          "body": "在程序中提供一些预置变量，例如提问者的名字，群号，当前时间等等并且能在提示词中直接调用",
          "created_at": "2024-02-20T10:00:13Z"
        },
        {
          "author": "RockChinQ",
          "body": "要不自己写个插件做这个吧，QChatGPT 提供了一个 PreProcess 的事件，可以看看文档，实现方式可以参考[预处理插件](https://github.com/RockChinQ/CommonPreprocess)",
          "created_at": "2024-02-28T02:32:23Z"
        }
      ]
    },
    {
      "issue_number": 702,
      "title": "[Bug]: aiocqhttp的兼容性问题",
      "body": "### 部署方式\r\n\r\n手动部署\r\n\r\n### 登录框架\r\n\r\nNone\r\n\r\n### 系统环境\r\n\r\nwin10\r\n\r\n### Python环境\r\n\r\npy3.11\r\n\r\n### QChatGPT版本\r\n\r\nv3.0.1.3\r\n\r\n### 异常情况\r\n\r\n每次@都会遇到，使用的是liteloaderqqnt的liteloaderqqnt-onebotapi插件 https://github.com/linyuchen/LiteLoaderQQNT-OneBotApi 是什么情况\r\n\r\n### 日志信息\r\n\r\n[2024-02-25 20:55:41.875] C:\\Users\\hhhge\\Desktop\\QChatGPT\\pkg\\platform\\manager.py (108) - [INFO] :\r\n    初始化平台适配器 0: aiocqhttp\r\n[2024-02-25 20:55:41 +0800] [9864] [INFO] Running on http://0.0.0.0:6700 (CTRL + C to quit)\r\n[2024-02-25 20:55:42 +0800] [9864] [INFO] 127.0.0.1:64603 GET /ws 1.1 101 - 3963\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\hhhge\\Desktop\\QChatGPT\\pkg\\platform\\sources\\aiocqhttp.py\", line 255, in on_message\r\n    return await callback(self.event_converter.target2yiri(event), self)\r\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\hhhge\\Desktop\\QChatGPT\\pkg\\platform\\sources\\aiocqhttp.py\", line 173, in target2yiri\r\n    special_title=event.sender[\"title\"],\r\n                  ~~~~~~~~~~~~^^^^^^^^^\r\nKeyError: 'title'\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\hhhge\\Desktop\\QChatGPT\\pkg\\platform\\sources\\aiocqhttp.py\", line 255, in on_message\r\n    return await callback(self.event_converter.target2yiri(event), self)\r\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\hhhge\\Desktop\\QChatGPT\\pkg\\platform\\sources\\aiocqhttp.py\", line 173, in target2yiri\r\n    special_title=event.sender[\"title\"],\r\n                  ~~~~~~~~~~~~^^^^^^^^^\r\nKeyError: 'title'\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\hhhge\\Desktop\\QChatGPT\\pkg\\platform\\sources\\aiocqhttp.py\", line 255, in on_message\r\n    return await callback(self.event_converter.target2yiri(event), self)\r\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\hhhge\\Desktop\\QChatGPT\\pkg\\platform\\sources\\aiocqhttp.py\", line 173, in target2yiri\r\n    special_title=event.sender[\"title\"],\r\n                  ~~~~~~~~~~~~^^^^^^^^^\r\nKeyError: 'title'\r\n\r\n\r\n### 启用的插件\r\n\r\n无",
      "state": "closed",
      "author": "hhhhhge",
      "author_type": "User",
      "created_at": "2024-02-25T13:04:42Z",
      "updated_at": "2024-03-02T13:00:27Z",
      "closed_at": "2024-03-02T12:59:42Z",
      "labels": [
        "bug?",
        "IM: aiocqhttp"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 14,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/702/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "RockChinQ"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/702",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/702",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:56.168577",
      "comments": [
        {
          "author": "hhhhhge",
          "body": "![屏幕截图(1)](https://github.com/RockChinQ/QChatGPT/assets/102860110/c792ad5d-b03f-401b-8dc0-c644c85d8aaa)\r\n",
          "created_at": "2024-02-25T13:11:55Z"
        },
        {
          "author": "hhhhhge",
          "body": "![捕获](https://github.com/RockChinQ/QChatGPT/assets/102860110/674227d1-ee8a-426c-86be-1a56208cf73a)\r\n",
          "created_at": "2024-02-25T13:14:31Z"
        },
        {
          "author": "RockChinQ",
          "body": "最近没有太多时间测试，欢迎修改后提pr",
          "created_at": "2024-02-25T13:14:44Z"
        },
        {
          "author": "RockChinQ",
          "body": "这个title这一行可以做一个存在性检查，以`\"\"`作为缺省值",
          "created_at": "2024-02-25T13:15:36Z"
        },
        {
          "author": "hhhhhge",
          "body": "行我试试",
          "created_at": "2024-02-25T13:15:53Z"
        }
      ]
    },
    {
      "issue_number": 706,
      "title": "[Feature]: 启动流程阶段化",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n将启动流程划分为多个阶段以便动态组合",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-02-29T03:35:39Z",
      "updated_at": "2024-03-02T12:27:52Z",
      "closed_at": "2024-03-02T12:27:52Z",
      "labels": [
        "eh: Improve",
        "m: Lifecycle"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/706/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/706",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/706",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:56.378880",
      "comments": []
    },
    {
      "issue_number": 701,
      "title": "[Bug]: 发信息得不到gpt回复",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\ngo-cqhttp\n\n### 系统环境\n\nUbuntu20.04\n\n### Python环境\n\nPython3.10\n\n### QChatGPT版本\n\nv2.6.10\n\n### 异常情况\n\n之前是正常的，一段时间没用之后提示api connection error，换了key之后如图\r\n![屏幕截图 2024-02-25 134602](https://github.com/RockChinQ/QChatGPT/assets/149854263/8c61e951-ccf1-4210-8702-34bd4f923cc6)\r\n\n\n### 日志信息\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "kisara71",
      "author_type": "User",
      "created_at": "2024-02-25T05:48:18Z",
      "updated_at": "2024-03-02T07:03:08Z",
      "closed_at": "2024-03-02T07:03:08Z",
      "labels": [
        "bug?",
        "Stale"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/701/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "RockChinQ"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/701",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/701",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:56.378902",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "估计是你请求API的问题吧，检查一下目标地址能不能正常请求。或者在`config.py`最底部设置`logging_level = logging.DEBUG` 开启调试输出看看有什么内容。",
          "created_at": "2024-02-25T13:07:23Z"
        }
      ]
    },
    {
      "issue_number": 700,
      "title": "[Feature]: QQ机器人用户身份识别",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n## QQ机器人用户身份识别\r\n\r\n### 需求描述\r\n\r\n在使用QQ机器人项目时，我们发现了一个关键的身份识别问题。当不同用户在群聊中向机器人询问关于他们自身身份的问题时，机器人未能正确区分各自的身份，导致对所有用户给出相同的回答。也就是所谓的“不认人”\r\n\r\n### 细节分析\r\n\r\n- **身份混淆**：机器人错误地将对所有用户的回答统一为对某一特定用户的回答，如将所有用户都识别为“主人”。\r\n- **范围影响**：此问题不仅限于直接的身份询问，如“我是谁？”，还可能影响其他基于用户身份的交互功能。\r\n- **隐私与安全风险**：身份识别的混淆可能会泄露用户的隐私信息或对用户的安全性造成潜在风险。\r\n\r\n### 期望的解决方案\r\n\r\n1. **用户识别和管理系统改进**：对机器人的用户识别和管理系统进行全面审查和改进，确保它能够准确区分并记住每个用户的身份。\r\n2. **身份验证机制增强**：引入更复杂的身份验证机制，如通过QQ号或其他唯一标识符来确认用户身份。\r\n3. **回答前的身份验证**：在机器人回答涉及用户身份的问题之前，先验证提问者的身份，确保回答与提问者的实际身份相符。\r\n\r\n### 示例情景（注意：以下情景仅供参考，不应用于实际的bug复现或测试）\r\n\r\n- 用户A被设置为机器人的主人。\r\n- 在群聊中，用户A询问机器人：“我是谁？”机器人正确回答：“你是我的主人。”\r\n- 用户B在同一群聊中询问机器人：“我是谁？”机器人错误地回答：“你是我的主人。”\r\n\r\n请开发者注意，上述情景仅用于说明问题，不应作为测试案例。实际的问题可能更加复杂且涉及多个用户和不同的群聊环境。\r\n\r\n",
      "state": "open",
      "author": "zhouzeyu504",
      "author_type": "User",
      "created_at": "2024-02-24T04:27:23Z",
      "updated_at": "2024-02-29T02:30:43Z",
      "closed_at": null,
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/700/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/700",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/700",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:56.603496",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "#699 重复了，你自己保留一个，把另外一个close了",
          "created_at": "2024-02-27T09:13:02Z"
        },
        {
          "author": "zhouzeyu504",
          "body": "刚看到，晚上回来改，要上学了😪\n\n---- 回复的原邮件 ----\n| 发件人 | Junyan ***@***.***> |\n| 发送日期 | 2024年02月27日 17:13 |\n| 收件人 | RockChinQ/QChatGPT ***@***.***> |\n| 抄送人 | zhouzeyu504 ***@***.***>,\nState ***@***.***> |\n| 主题 | Re: [RockChinQ/QChatGPT] [Feature]: QQ机器人用户身份识别 (Issue #700) |\n\n#699 重复了，你自己保留一个，把另外一个close了\n\n—\nReply t",
          "created_at": "2024-02-27T22:42:44Z"
        },
        {
          "author": "a86296007",
          "body": "我之前发的#613 应该也指的是这方面的问题",
          "created_at": "2024-02-28T02:57:53Z"
        },
        {
          "author": "RockChinQ",
          "body": "你现在几个issue的描述似乎有点出入，建议你重新整理一下，保留到一个issue里就好了，也方便我整理需求",
          "created_at": "2024-02-28T02:59:40Z"
        },
        {
          "author": "zhouzeyu504",
          "body": "> 我之前发的[#613 ](https://github.com/RockChinQ/QChatGPT/issues/613)应该也指的是这方面的问题\r\n\r\n确实是这样，既然一个api-key不能同时多开回话，那么可不可以使用多个api-key呢？",
          "created_at": "2024-02-28T15:50:12Z"
        }
      ]
    },
    {
      "issue_number": 699,
      "title": "[Feature]: QQ机器人用户身份识别错误问题，希望增加插件。",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n## QQ机器人用户身份识别错误问题\r\n\r\n### 问题描述\r\n\r\n在使用QQ机器人项目时，我们发现了一个关键的身份识别问题。当不同用户在群聊中向机器人询问关于他们自身身份的问题时，机器人未能正确区分各自的身份，导致对所有用户给出相同的回答。\r\n\r\n### 细节分析\r\n\r\n- **身份混淆**：机器人错误地将对所有用户的回答统一为对某一特定用户的回答，如将所有用户都识别为“主人”。\r\n- **范围影响**：此问题不仅限于直接的身份询问，如“我是谁？”，还可能影响其他基于用户身份的交互功能。\r\n- **隐私与安全风险**：身份识别的混淆可能会泄露用户的隐私信息或对用户的安全性造成潜在风险。\r\n\r\n### 期望的解决方案\r\n\r\n1. **用户识别和管理系统改进**：对机器人的用户识别和管理系统进行全面审查和改进，确保它能够准确区分并记住每个用户的身份。\r\n2. **身份验证机制增强**：引入更复杂的身份验证机制，如通过QQ号或其他唯一标识符来确认用户身份。\r\n3. **回答前的身份验证**：在机器人回答涉及用户身份的问题之前，先验证提问者的身份，确保回答与提问者的实际身份相符。\r\n\r\n### 示例情景（注意：以下情景仅供参考，不应用于实际的bug复现或测试）\r\n\r\n- 用户A被设置为机器人的主人。\r\n- 在群聊中，用户A询问机器人：“我是谁？”机器人正确回答：“你是我的主人。”\r\n- 用户B在同一群聊中询问机器人：“我是谁？”机器人错误地回答：“你是我的主人。”\r\n\r\n请开发者注意，上述情景仅用于说明问题，不应作为测试案例。实际的问题可能更加复杂且涉及多个用户和不同的群聊环境。",
      "state": "closed",
      "author": "zhouzeyu504",
      "author_type": "User",
      "created_at": "2024-02-24T04:25:36Z",
      "updated_at": "2024-02-28T15:45:25Z",
      "closed_at": "2024-02-28T15:45:00Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/699/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/699",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/699",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:56.812547",
      "comments": []
    },
    {
      "issue_number": 697,
      "title": "[Bug]: go-cqhttp链接成功，没有gpt回复？",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\ngo-cqhttp\n\n### 系统环境\n\nMasOS Sonoma 14, 加拿大，链接了vpn\n\n### Python环境\n\n3.10.9\n\n### QChatGPT版本\n\nv3.0.1.3 \n\n### 异常情况\n\ngo-cqhttp链接成功，登录成功，能在go-cqhttp中看到qq号接到的消息，但是除此之外没有任何反应了，gpt似乎没有连接上？但是看了一遍也没看出哪里出问题了……platform.json和provider.json中的地址也和与go-cqhttp的config.yml里面的一样，设置了nakuru \"enable\": true, token也一样，似乎除了账号不会做出任何回复之外没什么问题了……不好意思，从来没有接触过这方面的东西，连github账号都是刚注册的，，麻烦了……！\r\n\n\n### 日志信息\n\n终端：\r\n[2024-02-22 20:42:53] [INFO]: 当前版本:v1.2.0 \r\n[2024-02-22 20:42:53] [INFO]: 将使用 device.json 内的设备信息运行Bot. \r\n[2024-02-22 20:42:53] [INFO]: 检查签名服务器：https://qsign.ikunshare.link  (1/2) \r\n[2024-02-22 20:42:53] [INFO]: 检查签名服务器：-  (2/2) \r\n[2024-02-22 20:42:54] [WARNING]: 签名服务器 https://qsign.ikunshare.link 可能不可用，请求出现错误：Get \"https://qsign.ikunshare.link\": dial tcp: lookup qsign.ikunshare.link: no such host \r\n[2024-02-22 20:42:54] [WARNING]: no usable sign server \r\n[2024-02-22 20:42:54] [WARNING]: 警告: 未配置签名服务器或签名服务器不可用, 这可能会导致登录 45 错误码或发送消息被风控 \r\n[2024-02-22 20:42:54] [INFO]: Bot将在5秒后登录并开始信息处理, 按 Ctrl+C 取消. \r\n[2024-02-22 20:42:59] [INFO]: 开始尝试登录并同步消息... \r\n[2024-02-22 20:42:59] [INFO]: 使用协议: MacOS 5.8.9 \r\n[2024-02-22 20:43:07] [INFO]: Protocol -> connect to server: [::ffff:43.154.240.7]:8080 \r\n[2024-02-22 20:43:08] [WARNING]: Protocol -> device lock is disabled. HTTP API may fail. \r\n[2024-02-22 20:43:11] [INFO]: 收到服务器地址更新通知, 将在下一次重连时应用.  \r\n[2024-02-22 20:43:12] [INFO]: 正在检查协议更新... \r\n[2024-02-22 20:43:12] [INFO]: 登录成功 欢迎使用: 卦AI（oc bot） \r\n[2024-02-22 20:43:12] [INFO]: 开始加载好友列表... \r\n[2024-02-22 20:43:13] [INFO]: 共加载 6 个好友. \r\n[2024-02-22 20:43:13] [INFO]: 开始加载群列表... \r\n[2024-02-22 20:43:13] [INFO]: 共加载 1 个群. \r\n[2024-02-22 20:43:14] [INFO]: 资源初始化完成, 开始处理信息. \r\n[2024-02-22 20:43:14] [INFO]: アトリは、高性能ですから! \r\n[2024-02-22 20:43:14] [INFO]: 正在检查更新. \r\n[2024-02-22 20:43:14] [INFO]: CQ WebSocket 服务器已启动: [::]:6700 \r\n[2024-02-22 20:43:14] [INFO]: CQ HTTP 服务器已启动: [::]:5700 \r\n[2024-02-22 20:43:14] [INFO]: 检查更新完成. 当前已运行最新版本. \r\n[2024-02-22 20:43:14] [INFO]: 开始诊断网络情况 \r\n[2024-02-22 20:43:16] [INFO]: 网络诊断完成. 未发现问题 \r\n[2024-02-22 20:55:43] [INFO]: 收到好友 ᖽ·ρ•(1932188296) 的消息: 在？ (2098927207) \r\n[2024-02-22 21:02:50] [INFO]: 收到好友 ᖽ·ρ•(1932188296) 的消息: !help (169617137) \r\n[2024-02-22 21:03:07] [INFO]: 收到好友 ᖽ·ρ•(1932188296) 的消息: 没有任何消息… (-1827309749) \r\n\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "Radicalsign2713",
      "author_type": "User",
      "created_at": "2024-02-23T02:19:47Z",
      "updated_at": "2024-02-28T02:29:30Z",
      "closed_at": "2024-02-28T02:29:30Z",
      "labels": [
        "bug?",
        "Stale"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 9,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/697/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/697",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/697",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:24:56.812567",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "你启动了 QChatGPT 吗？\r\n\r\n正常情况的 go-cqhttp 输出，QChatGPT 连上之后会显示`[2024-02-23 13:04:24] [INFO]: 接受 WebSocket 连接: 127.0.0.1:64674 (/)` 类似的输出：\r\n\r\n![image](https://github.com/RockChinQ/QChatGPT/assets/45992437/a8bae891-ffae-4741-b536-b0474191f229)\r\n\r\n正常的 QChatGPT 启用 Nakuru ，启动后的输出：\r\n![image](https://github.com/R",
          "created_at": "2024-02-23T05:07:02Z"
        },
        {
          "author": "Radicalsign2713",
          "body": "输入python3 main.py后提示是\r\n/Library/Frameworks/Python.framework/Versions/3.10/bin/python3: can't open file '/Users/（用户名）/main.py': [Errno 2] No such file or directory\r\n\r\n找到文件位置后输入python3 main.py会得到\r\nPython3 /Users/（用户名）/Downloads/QChatGPT/main.py\r\n\r\n  ___   ___ _         _    ___ ___ _____ \r\n / _ \\ / __",
          "created_at": "2024-02-23T14:45:48Z"
        },
        {
          "author": "Radicalsign2713",
          "body": "templates/init.py下是有文件的……只是init.py里似乎没什么东西……？\r\n<img width=\"1372\" alt=\"Screenshot 2024-02-23 at 9 47 36 AM\" src=\"https://github.com/RockChinQ/QChatGPT/assets/160985275/b5b628a8-3bdf-492b-954e-6e509ba69c24\">\r\n",
          "created_at": "2024-02-23T14:48:20Z"
        },
        {
          "author": "RockChinQ",
          "body": "既然你这里有这个文件，那应该是读得到的吧。提醒你必须在main.py同目录执行启动命令，也就是工作目录必须在main.py这个目录",
          "created_at": "2024-02-23T14:56:11Z"
        },
        {
          "author": "Radicalsign2713",
          "body": "谢谢大佬T T解决了！！不过现在每次发出请求的时候都会出现这样的错误，不过检查了网络连接确保一切没问题后仍然会这样想请问有解决方法吗……！（不好意思打扰了……谢谢！！）\r\n\r\n[2024-02-24 16:14:05.725] /Users/（用户名）/QChatGPT/pkg/platform/manager.py (108) - [INFO] :\r\n    初始化平台适配器 0: nakuru\r\n[2024-02-24 16:14:05.729] /Users/（用户名）/QChatGPT/pkg/platform/sources/nakuru.py (328) - [INFO] :\r\n ",
          "created_at": "2024-02-24T21:23:24Z"
        }
      ]
    },
    {
      "issue_number": 703,
      "title": "[Bug]: 正向代理无效",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\nMirai\n\n### 系统环境\n\nUbuntu23.04\n\n### Python环境\n\npython3.12.1\n\n### QChatGPT版本\n\nv3.0.1.3\n\n### 异常情况\n\n将正向代理文件system.json设置如下\r\n{\r\n    \"admin-sessions\": [],\r\n    \"network-proxies\": {\r\n        \"http\":\"http://192.168.31.123:7893\",\r\n        \"https\": null\r\n    },\r\n    \"report-usage\": true,\r\n    \"logging-level\": \"info\",\r\n    \"session-concurrency\": {\r\n        \"default\": 1\r\n    },\r\n    \"pipeline-concurrency\": 20,\r\n    \"help-message\": \"QChatGPT - 😎高稳定性、🧩支持插件、🌏实时联网的 ChatGPT QQ 机器人🤖\\n链接：https://q.rkcn.top\"\r\n}\r\n\r\n此中192.168.31.123:7893为旁路由openclash地址，同一局域网192.168.31.xxx下使用代理都可以访问chatgpt\r\n反向代理文件provider.json内容如下：\r\n{\r\n    \"enable-chat\": true,\r\n    \"openai-config\": {\r\n        \"api-keys\": [\r\n            \"apixxxxxxxxxxxxxxxxxxxxxxxxxx\"   #消除过\r\n        ],\r\n        \"base_url\": \"https://api.openai.com/v1\",\r\n        \"chat-completions-params\": {\r\n            \"model\": \"gpt-3.5-turbo\"\r\n        },\r\n        \"request-timeout\": 120\r\n    },\r\n    \"prompt-mode\": \"normal\",\r\n    \"prompt\": {\r\n        \"default\": \"如果用户之后想获取帮助，请你说”输入!help获取帮助“。\" \r\n    }\r\n}\n\n### 日志信息\n\n  ___   ___ _         _    ___ ___ _____ \r\n / _ \\ / __| |_  __ _| |_ / __| _ \\_   _|\r\n| (_) | (__| ' \\/ _` |  _| (_ |  _/ | |  \r\n \\__\\_\\\\___|_||_\\__,_|\\__|\\___|_|   |_|  \r\n\r\n⭐️开源地址: https://github.com/RockChinQ/QChatGPT\r\n📖文档地址: https://q.rkcn.top\r\n\r\n[2024-02-26 21:24:11.957] /home/wuanjun/qqbot/QChatGPT/pkg/platform/manager.py (108) - [INFO] :\r\n    初始化平台适配器 0: yiri-mirai\r\n2024-02-26 21:24:12 - INFO     [WebSocket] 成功登录到账号2328412881。\r\n2024-02-26 21:24:12 - INFO     [WebSocket] 机器人开始运行。按 Ctrl + C 停止。\r\n[2024-02-26 21:24:17.414] /home/wuanjun/qqbot/QChatGPT/pkg/pipeline/process/process.py (35) - [INFO] :\r\n    处理 person_1615630234 的请求(0): 1\r\n[2024-02-26 21:30:19.895] /home/wuanjun/qqbot/QChatGPT/pkg/pipeline/process/handlers/chat.py (92) - [ERROR] :\r\n    对话(0)请求失败: 模型请求失败: 请求错误: Request timed out.\r\n[2024-02-26 21:30:21.712] /home/wuanjun/qqbot/QChatGPT/pkg/core/controller.py (81) - [ERROR] :\r\n    模型请求失败: 请求错误: Request timed out.\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "Deemo119",
      "author_type": "User",
      "created_at": "2024-02-26T13:31:20Z",
      "updated_at": "2024-02-27T11:35:34Z",
      "closed_at": "2024-02-27T11:35:34Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/703/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "RockChinQ"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/703",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/703",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:02.086796",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "https也加一下看看",
          "created_at": "2024-02-26T14:33:05Z"
        },
        {
          "author": "Deemo119",
          "body": "添加https后为\r\n{\r\n\"admin-sessions\": [],\r\n\"network-proxies\": {\r\n\"http\":\"http://192.168.31.123:7893/\",\r\n\"https\": \"https:192.168.31.123:7893\"\r\n},\r\n\"report-usage\": true,\r\n\"logging-level\": \"info\",\r\n\"session-concurrency\": {\r\n\"default\": 1\r\n},\r\n\"pipeline-concurrency\": 20,\r\n\"help-message\": \"QChatGPT - 😎高稳定性、🧩支持插",
          "created_at": "2024-02-27T04:34:41Z"
        },
        {
          "author": "RockChinQ",
          "body": "已解决的话可以关闭一下issue",
          "created_at": "2024-02-27T11:07:09Z"
        },
        {
          "author": "Deemo119",
          "body": "依然报错，openclash运行日志内没有连接，请问新版本文件provider.json中，如何添加反向代理地址，在官网没有找到新版本的配置文件说明\r\n{\r\n\"enable-chat\": true,\r\n\"openai-config\": {\r\n\"api-keys\": [\r\n\"sk-xxxxxxxxxxxxxLe2e2S9\"\r\n],\r\n\"base_url\": \"https://api.openai.com/v1\",\r\n\"chat-completions-params\": {\r\n\"model\": \"gpt-3.5-turbo\"\r\n},\r\n\"request-timeout\": 120\r\n},\r\n\"pr",
          "created_at": "2024-02-27T11:32:04Z"
        },
        {
          "author": "RockChinQ",
          "body": "反向代理地址就设置到 `openai-config.base-url` 那",
          "created_at": "2024-02-27T11:33:33Z"
        }
      ]
    },
    {
      "issue_number": 666,
      "title": "[Bug]: 安装报错ERROR: Could not build wheels for multidict, which is required to install pyproject.toml-based projects",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\ngo-cqhttp\n\n### 系统环境\n\nWindows10 ltsc 中国四川\n\n### Python环境\n\npython 3.12.1\n\n### QChatGPT版本\n\nv2.6.9\n\n### 异常情况\n\n使用pip3 install -r requirements.txt安装依赖时\n\n### 日志信息\n\nBuilding wheels for collected packages: multidict\r\n  Building wheel for multidict (pyproject.toml) ... error\r\n  error: subprocess-exited-with-error\r\n\r\n  × Building wheel for multidict (pyproject.toml) did not run successfully.\r\n  │ exit code: 1\r\n  ╰─> [74 lines of output]\r\n      *********************\r\n      * Accelerated build *\r\n      *********************\r\n      running bdist_wheel\r\n      running build\r\n      running build_py\r\n      creating build\r\n      creating build\\lib.win-amd64-cpython-312\r\n      creating build\\lib.win-amd64-cpython-312\\multidict\r\n      copying multidict\\_abc.py -> build\\lib.win-amd64-cpython-312\\multidict\r\n      copying multidict\\_compat.py -> build\\lib.win-amd64-cpython-312\\multidict\r\n      copying multidict\\_multidict_base.py -> build\\lib.win-amd64-cpython-312\\multidict\r\n      copying multidict\\_multidict_py.py -> build\\lib.win-amd64-cpython-312\\multidict\r\n      copying multidict\\__init__.py -> build\\lib.win-amd64-cpython-312\\multidict\r\n      running egg_info\r\n      writing multidict.egg-info\\PKG-INFO\r\n      writing dependency_links to multidict.egg-info\\dependency_links.txt\r\n      writing top-level names to multidict.egg-info\\top_level.txt\r\n      reading manifest file 'multidict.egg-info\\SOURCES.txt'\r\n      reading manifest template 'MANIFEST.in'\r\n      warning: no previously-included files matching '*.pyc' found anywhere in distribution\r\n      warning: no previously-included files found matching 'multidict\\_multidict.html'\r\n      warning: no previously-included files found matching 'multidict\\*.so'\r\n      warning: no previously-included files found matching 'multidict\\*.pyd'\r\n      warning: no previously-included files found matching 'multidict\\*.pyd'\r\n      no previously-included directories found matching 'docs\\_build'\r\n      adding license file 'LICENSE'\r\n      writing manifest file 'multidict.egg-info\\SOURCES.txt'\r\n      C:\\Users\\Admin\\AppData\\Local\\Temp\\pip-build-env-ofurg2jg\\overlay\\Lib\\site-packages\\setuptools\\command\\build_py.py:207: _Warning: Package 'multidict._multilib' is absent from the `packages` configuration.\r\n      !!\r\n\r\n              ********************************************************************************\r\n              ############################\r\n              # Package would be ignored #\r\n              ############################\r\n              Python recognizes 'multidict._multilib' as an importable package[^1],\r\n              but it is absent from setuptools' `packages` configuration.\r\n\r\n              This leads to an ambiguous overall configuration. If you want to distribute this\r\n              package, please make sure that 'multidict._multilib' is explicitly added\r\n              to the `packages` configuration field.\r\n\r\n              Alternatively, you can also rely on setuptools' discovery methods\r\n              (for example by using `find_namespace_packages(...)`/`find_namespace:`\r\n              instead of `find_packages(...)`/`find:`).\r\n\r\n              You can read more about \"package discovery\" on setuptools documentation page:\r\n\r\n              - https://setuptools.pypa.io/en/latest/userguide/package_discovery.html\r\n\r\n              If you don't want 'multidict._multilib' to be distributed and are\r\n              already explicitly excluding 'multidict._multilib' via\r\n              `find_namespace_packages(...)/find_namespace` or `find_packages(...)/find`,\r\n              you can try to use `exclude_package_data`, or `include-package-data=False` in\r\n              combination with a more fine grained `package-data` configuration.\r\n\r\n              You can read more about \"package data files\" on setuptools documentation page:\r\n\r\n              - https://setuptools.pypa.io/en/latest/userguide/datafiles.html\r\n\r\n\r\n              [^1]: For Python, any directory (with suitable naming) can be imported,\r\n                    even if it does not contain any `.py` files.\r\n                    On the other hand, currently there is no concept of package data\r\n                    directory, all directories are treated like packages.\r\n              ********************************************************************************\r\n\r\n      !!\r\n        check.warn(importable)\r\n      copying multidict\\__init__.pyi -> build\\lib.win-amd64-cpython-312\\multidict\r\n      copying multidict\\py.typed -> build\\lib.win-amd64-cpython-312\\multidict\r\n      running build_ext\r\n      building 'multidict._multidict' extension\r\n      error: Microsoft Visual C++ 14.0 or greater is required. Get it with \"Microsoft C++ Build Tools\": https://visualstudio.microsoft.com/visual-cpp-build-tools/\r\n      [end of output]\r\n\r\n  note: This error originates from a subprocess, and is likely not a problem with pip.\r\n  ERROR: Failed building wheel for multidict\r\nFailed to build multidict\r\nERROR: Could not build wheels for multidict, which is required to install pyproject.toml-based projects\n\n### 启用的插件\n\n无",
      "state": "closed",
      "author": "bobandbrony",
      "author_type": "User",
      "created_at": "2024-01-17T14:53:58Z",
      "updated_at": "2024-02-21T09:54:50Z",
      "closed_at": "2024-01-17T17:05:38Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/666/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/666",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/666",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:02.304665",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "3.12 我还没测过，估计不能用。换 Python 3.11 试一下呢？\r\n\r\n\r\nhttps://www.python.org/downloads/release/python-3117/",
          "created_at": "2024-01-17T15:11:15Z"
        },
        {
          "author": "bobandbrony",
          "body": "> 3.12 我还没测过，估计不能用。换 Python 3.11 试一下呢？\r\n> \r\n> https://www.python.org/downloads/release/python-3117/\r\n\r\n呃，可能是这个版本的问题，由于其他项目需要，我降回了3.9.11\r\n这会报错\r\nPS D:\\chatbot\\-\\QChatGPT-2.6.9> py main.py\r\nTraceback (most recent call last):\r\nFile \"D:\\chatbot\\-\\QChatGPT-2.6.9\\main.py\", line 57, in\r\nfrom pkg.utils.log i",
          "created_at": "2024-01-17T16:11:29Z"
        },
        {
          "author": "RockChinQ",
          "body": "现在你更新一下 openai 库到最新版本就可以了\r\npip install -U openai",
          "created_at": "2024-01-17T16:29:32Z"
        },
        {
          "author": "bobandbrony",
          "body": "> 现在你更新一下 openai 库到最新版本就可以了 pip install -U openai\r\n已解决，谢谢！\r\n教程提供的qsign地址没法用",
          "created_at": "2024-01-17T17:05:20Z"
        },
        {
          "author": "RockChinQ",
          "body": "multidict暂不支持 3.12，跟踪issue：https://github.com/aio-libs/multidict/issues/887",
          "created_at": "2024-01-18T07:23:13Z"
        }
      ]
    },
    {
      "issue_number": 583,
      "title": "[Feature]: 接入 QQ 官方 API",
      "body": "### 这是一个？\r\n\r\n新功能\r\n\r\n### 详细描述\r\n\r\n>  目前QQ开放平台升级中，升级结束后正式开放机器人的接入，目前阶段辛苦大家先详读QQ机器人开发者文档中的细则，并提前最好机器人的规划和构思。\r\n> https://docs.qq.com/doc/DRkVHT1N2a1JYSnVr",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2023-10-16T03:09:41Z",
      "updated_at": "2024-02-20T06:27:28Z",
      "closed_at": "2024-02-20T06:27:28Z",
      "labels": [
        "IM: qq-botpy"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/583/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "RockChinQ"
      ],
      "milestone": "3.0",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/583",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/583",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:02.526311",
      "comments": []
    },
    {
      "issue_number": 639,
      "title": "[Feature]: 希望增加对API使用的用户群组管理",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n希望能够增加API的不同用户使用管理\r\n拥有群组分类和usage查询功能",
      "state": "open",
      "author": "Vlfx1",
      "author_type": "User",
      "created_at": "2023-12-18T14:17:45Z",
      "updated_at": "2024-02-20T06:27:01Z",
      "closed_at": null,
      "labels": [
        "pd: Need design"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/639/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "RockChinQ"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/639",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/639",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:02.526328",
      "comments": []
    },
    {
      "issue_number": 692,
      "title": "[Bug]: 安装时候报错: TypeError: unsupported operand type(s) for |: 'ModelMetaclass' and 'NoneType'",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\nNone\n\n### 系统环境\n\nCentos7 中国大陆 阿里云服务器\n\n### Python环境\n\npython 3.9.13\n\n### QChatGPT版本\n\n无\n\n### 异常情况\n\n安装时候运行python3 main.py报错:unsupported operand type(s) for |: 'ModelMetaclass' and 'NoneType',经过检查是typing的原因\n\n### 日志信息\n\n服务器报错:\r\nTraceback (most recent call last):\r\n  File \"/root/QChatGPT/main.py\", line 17, in <module>\r\n    from pkg.core import boot\r\n  File \"/root/QChatGPT/pkg/core/boot.py\", line 11, in <module>\r\n    from . import app\r\n  File \"/root/QChatGPT/pkg/core/app.py\", line 9, in <module>\r\n    from ..platform import manager as im_mgr\r\n  File \"/root/QChatGPT/pkg/platform/manager.py\", line 15, in <module>\r\n    from ..plugin import events\r\n  File \"/root/QChatGPT/pkg/plugin/events.py\", line 12, in <module>\r\n    class BaseEventModel(pydantic.BaseModel):\r\n  File \"pydantic/main.py\", line 178, in pydantic.main.ModelMetaclass.__new__\r\n  File \"pydantic/typing.py\", line 400, in pydantic.typing.resolve_annotations\r\n    \r\n  File \"/usr/local/python3/lib/python3.9/typing.py\", line 292, in _eval_type\r\n    return t._evaluate(globalns, localns, recursive_guard)\r\n  File \"/usr/local/python3/lib/python3.9/typing.py\", line 554, in _evaluate\r\n    eval(self.__forward_code__, globalns, localns),\r\n  File \"<string>\", line 1, in <module>\r\nTypeError: unsupported operand type(s) for |: 'ModelMetaclass' and 'NoneType'\r\n\r\n个人pc报错:\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\yxn\\Downloads\\QChatGPT-master\\main.py\", line 17, in <module>\r\n    from pkg.core import boot\r\n  File \"C:\\Users\\yxn\\Downloads\\QChatGPT-master\\pkg\\core\\boot.py\", line 11, in <module>\r\n    from . import app\r\n  File \"C:\\Users\\yxn\\Downloads\\QChatGPT-master\\pkg\\core\\app.py\", line 9, in <module>\r\n    from ..platform import manager as im_mgr\r\n  File \"C:\\Users\\yxn\\Downloads\\QChatGPT-master\\pkg\\platform\\manager.py\", line 15, in <module>\r\n    from ..plugin import events\r\n  File \"C:\\Users\\yxn\\Downloads\\QChatGPT-master\\pkg\\plugin\\events.py\", line 12, in <module>\r\n    class BaseEventModel(pydantic.BaseModel):\r\n  File \"pydantic\\main.py\", line 178, in pydantic.main.ModelMetaclass.__new__\r\n  File \"pydantic\\typing.py\", line 400, in pydantic.typing.resolve_annotations\r\n  File \"D:\\Python39\\lib\\typing.py\", line 292, in _eval_type\r\n    return t._evaluate(globalns, localns, recursive_guard)\r\n  File \"D:\\Python39\\lib\\typing.py\", line 554, in _evaluate\r\n    eval(self.__forward_code__, globalns, localns),\r\n  File \"<string>\", line 1, in <module>\r\nTypeError: unsupported operand type(s) for |: 'ModelMetaclass' and 'NoneType'\n\n### 启用的插件\n\n无",
      "state": "closed",
      "author": "yxn4065",
      "author_type": "User",
      "created_at": "2024-02-20T03:25:50Z",
      "updated_at": "2024-02-20T03:50:46Z",
      "closed_at": "2024-02-20T03:50:45Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/692/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/692",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/692",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:02.526357",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "执行 `pip freeze` 发上来看看你环境都有什么包",
          "created_at": "2024-02-20T03:27:17Z"
        },
        {
          "author": "yxn4065",
          "body": "> pip freeze\r\n\r\n3==0.0.0\r\naioconsole==0.7.0\r\naiocqhttp==1.4.4\r\naiofiles==23.2.1\r\naiohttp==3.9.3\r\naiosignal==1.3.1\r\nanyio==4.3.0\r\nAPScheduler==3.10.4\r\nasync-lru==2.0.4\r\nasync-timeout==4.0.3\r\nattrs==23.2.0\r\nblinker==1.7.0\r\nCallingGPT==0.0.1.0\r\ncertifi==2024.2.2\r\ncharset-normalizer==3.3.2\r\nclick==8.1.7",
          "created_at": "2024-02-20T03:32:18Z"
        },
        {
          "author": "RockChinQ",
          "body": "3.0.1 修了",
          "created_at": "2024-02-20T03:50:45Z"
        }
      ]
    },
    {
      "issue_number": 606,
      "title": "[Bug]:429 Too many requests",
      "body": "### 部署方式\r\n\r\nDocker部署\r\n\r\n### 登录框架\r\n\r\ngo-cqhttp\r\n\r\n### 系统环境\r\n\r\nrockchin/qchatgpt:latest\r\n\r\n### Python环境\r\n\r\n3.10\r\n\r\n### 异常情况\r\n\r\n向OpenAI接口发送请求的时候，会报错，http429 Too Many Requests。\r\n\r\n### 报错信息\r\n\r\n[37m[2023-11-20 21:33:59.751] message.py (27) - [INFO] : [person_12345678]发送消息:介绍一下这个项目 https://git...\u001b[0m\r\n\u001b[37m[2023-11-20 21:34:00.847] _client.py (1013) - [INFO] : HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 429 Too Many Requests\"\u001b[0m\r\n\u001b[37m[2023-11-20 21:34:00.848] _base_client.py (919) - [INFO] : Retrying request to /chat/completions in 0.915115 seconds\u001b[0m\r\n\u001b[37m[2023-11-20 21:34:02.015] _client.py (1013) - [INFO] : HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 429 Too Many Requests\"\u001b[0m\r\n\u001b[37m[2023-11-20 21:34:02.015] _base_client.py (919) - [INFO] : Retrying request to /chat/completions in 1.881526 seconds\u001b[0m\r\n\u001b[37m[2023-11-20 21:34:04.155] _client.py (1013) - [INFO] : HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 429 Too Many Requests\"\u001b[0m\r\n\u001b[37m[2023-11-20 22:18:43.250] application.py (95) - [INFO] : Event: handling a event: FriendMessage\u001b[0m\r\n\u001b[37m[2023-11-20 22:18:43.252] message.py (27) - [INFO] : [person_12345678]发送消息:查询\u001b[0m\r\n\u001b[37m[2023-11-20 22:18:44.323] _client.py (1013) - [INFO] : HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 429 Too Many Requests\"\u001b[0m\r\n\u001b[37m[2023-11-20 22:18:44.324] _base_client.py (919) - [INFO] : Retrying request to /chat/completions in 0.965826 seconds\u001b[0m\r\n\u001b[37m[2023-11-20 22:18:45.542] _client.py (1013) - [INFO] : HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 429 Too Many Requests\"\u001b[0m\r\n\u001b[37m[2023-11-20 22:18:45.543] _base_client.py (919) - [INFO] : Retrying request to /chat/completions in 1.825946 seconds\u001b[0m\r\n\u001b[37m[2023-11-20 22:18:47.619] _client.py (1013) - [INFO] : HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 429 Too Many Requests\"\u001b[0m\r\n\u001b[37m[2023-11-21 07:48:13.043] application.py (95) - [INFO] : Event: handling a event: FriendMessage\u001b[0m\r\n\u001b[37m[2023-11-21 07:48:13.048] message.py (27) - [INFO] : [person_12345678]发送消息:查询\u001b[0m\r\n\u001b[37m[2023-11-21 07:48:14.087] _client.py (1013) - [INFO] : HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 429 Too Many Requests\"\u001b[0m\r\n\u001b[37m[2023-11-21 07:48:14.088] _base_client.py (919) - [INFO] : Retrying request to /chat/completions in 0.836453 seconds\u001b[0m\r\n\u001b[37m[2023-11-21 07:48:15.223] _client.py (1013) - [INFO] : HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 429 Too Many Requests\"\u001b[0m\r\n\u001b[37m[2023-11-21 07:48:15.224] _base_client.py (919) - [INFO] : Retrying request to /chat/completions in 1.782747 seconds\u001b[0m\r\n\u001b[37m[2023-11-21 07:48:17.356] _client.py (1013) - [INFO] : HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 429 Too Many Requests\"\u001b[0m\r\n\u001b[37m[2023-11-21 07:48:32.260] application.py (95) - [INFO] : Event: handling a event: FriendMessage\u001b[0m\r\n\u001b[37m[2023-11-21 07:48:32.262] message.py (27) - [INFO] : [person_12345678]发送消息:gpt 你是谁\u001b[0m\r\n\u001b[37m[2023-11-21 07:48:32.952] _client.py (1013) - [INFO] : HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 429 Too Many Requests\"\u001b[0m\r\n\u001b[37m[2023-11-21 07:48:32.953] _base_client.py (919) - [INFO] : Retrying request to /chat/completions in 0.841468 seconds\u001b[0m\r\n\u001b[37m[2023-11-21 07:48:34.052] _client.py (1013) - [INFO] : HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 429 Too Many Requests\"\u001b[0m\r\n\u001b[37m[2023-11-21 07:48:34.053] _base_client.py (919) - [INFO] : Retrying request to /chat/completions in 1.920742 seconds\u001b[0m",
      "state": "closed",
      "author": "a1014068504",
      "author_type": "User",
      "created_at": "2023-11-21T03:08:26Z",
      "updated_at": "2024-02-20T01:36:09Z",
      "closed_at": "2023-11-29T08:20:07Z",
      "labels": [
        "bug?",
        "m: Provider"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/606/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/606",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/606",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:02.754606",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "OpenAI侧问题，应该是最近太多人用了，然后免费账号会被限速，可以绑个卡试试看",
          "created_at": "2023-11-22T01:11:02Z"
        },
        {
          "author": "a1014068504",
          "body": "邮件已收到~",
          "created_at": "2023-11-22T01:11:26Z"
        },
        {
          "author": "MadornC",
          "body": "这个确认是OpenAI侧的问题吗？reload后就可以重发请求了",
          "created_at": "2024-02-20T01:35:47Z"
        },
        {
          "author": "a1014068504",
          "body": "邮件已收到~",
          "created_at": "2024-02-20T01:36:08Z"
        }
      ]
    },
    {
      "issue_number": 671,
      "title": "[Bug]: 使用OpenShamrock下群聊消息会导致程序崩溃",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\nNone\n\n### 系统环境\n\n小米MIX4\n\n### Python环境\n\nPython3.10.12\n\n### QChatGPT版本\n\nv2.6.10 优化审计API调用逻辑\n\n### 异常情况\n\n私聊能够正常回复,在群聊里触发机器人后会异常\n\n### 日志信息\n\n![screenshot-20240124-183748](https://github.com/RockChinQ/QChatGPT/assets/46891488/4393c81e-9a79-487d-95fb-190ab19328ad)\r\n![6555C1EB5AF1E1438E0D1CFD3B3DF4A3](https://github.com/RockChinQ/QChatGPT/assets/46891488/49f57a00-a98b-4007-aa88-75ff0b795738)\r\n\n\n### 启用的插件\n\nSwitcher",
      "state": "closed",
      "author": "DDDD-zzz",
      "author_type": "User",
      "created_at": "2024-01-24T10:43:33Z",
      "updated_at": "2024-02-19T13:59:44Z",
      "closed_at": "2024-02-19T13:59:44Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/671/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.0",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/671",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/671",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:02.983158",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "确实，目前未完美适配shamrock。预计过几个版本完善。",
          "created_at": "2024-01-24T10:47:33Z"
        },
        {
          "author": "RockChinQ",
          "body": "将在 3.0 版本中正式支持",
          "created_at": "2024-02-07T12:24:50Z"
        }
      ]
    },
    {
      "issue_number": 611,
      "title": "[Feature]: 独立控制器进行请求调度",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n解藕各个现有模块",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2023-11-22T11:30:55Z",
      "updated_at": "2024-02-19T13:59:44Z",
      "closed_at": "2024-02-19T13:59:43Z",
      "labels": [
        "eh: Improve",
        "m: Session"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/611/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 1,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "RockChinQ"
      ],
      "milestone": "3.0",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/611",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/611",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:03.164589",
      "comments": []
    },
    {
      "issue_number": 539,
      "title": "[Feature]: 包装并独立执行单个请求",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n使用`Query`请求类包装一次请求的上下文及执行过程",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2023-08-07T12:10:13Z",
      "updated_at": "2024-02-19T13:59:43Z",
      "closed_at": "2024-02-19T13:59:42Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/539/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "RockChinQ"
      ],
      "milestone": "3.0",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/539",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/539",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:03.164612",
      "comments": []
    },
    {
      "issue_number": 528,
      "title": "[Feature]: 更细粒度的请求超时控制",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n将超时控制细化到请求接口",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2023-08-02T02:33:18Z",
      "updated_at": "2024-02-19T13:59:42Z",
      "closed_at": "2024-02-19T13:59:42Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/528/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "RockChinQ"
      ],
      "milestone": "3.0",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/528",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/528",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:03.164619",
      "comments": []
    },
    {
      "issue_number": 684,
      "title": "[Bug]: !default命令不能用（？）",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\ngo-cqhttp\n\n### 系统环境\n\nwin10专业版\n\n### Python环境\n\n3.10\n\n### QChatGPT版本\n\n2.6.10\n\n### 异常情况\n\nconfig.py中写道“# 也可以使用命令：\r\n# !default <名称>\r\n#   将指定的情景预设设置为默认情景预设”但是对机器人使用却返回“[bot]err:命令不存在：default.meimo”\n\n### 日志信息\n\n![image](https://github.com/RockChinQ/QChatGPT/assets/135406843/87d3e889-f45d-4f0c-9f4b-f4a6c345482f)\r\n\n\n### 启用的插件\n\nWebwlk",
      "state": "closed",
      "author": "youyi0218",
      "author_type": "User",
      "created_at": "2024-02-10T14:45:46Z",
      "updated_at": "2024-02-13T12:54:39Z",
      "closed_at": "2024-02-13T12:54:39Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/684/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/684",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/684",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:03.164626",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "哦现在是要用 `!default set <名称>`才可以",
          "created_at": "2024-02-11T14:05:44Z"
        }
      ]
    },
    {
      "issue_number": 686,
      "title": "[Bug]: !default这个命令会直接说出所有系统提示词，这个命令不是只有主人能输入，其他人也可以输入",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n!default这个命令会直接说出所有系统提示词，这个命令不是只有主人能输入，其他人也可以输入",
      "state": "closed",
      "author": "lueluelue2006",
      "author_type": "User",
      "created_at": "2024-02-12T08:51:44Z",
      "updated_at": "2024-02-12T10:42:33Z",
      "closed_at": "2024-02-12T10:42:33Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/686/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/686",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/686",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:03.348805",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "你可以在 cmdpriv.json 中修改命令的最低权限级别，详情查看：https://qchatgpt.rockchin.top/posts/feature.html#%E5%91%BD%E4%BB%A4%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6",
          "created_at": "2024-02-12T08:52:59Z"
        }
      ]
    },
    {
      "issue_number": 682,
      "title": "[Bug]: 不论是反代还是正向代理都出错",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\ngo-cqhttp\n\n### 系统环境\n\nwin10专业版 位于大陆\n\n### Python环境\n\n3.10\n\n### QChatGPT版本\n\n2.6.10\n\n### 异常情况\n\n在config.py中，无论是用反向代理（oneapi，腾讯云函数）还是正向代理（clash）都报错SyntaxError: invalid syntax\n\n### 日志信息\n\n### oneapi\r\nD:\\Program\\QChatGPT>python main.py\r\nTraceback (most recent call last):\r\n  File \"D:\\Program\\QChatGPT\\main.py\", line 57, in <module>\r\n    from pkg.utils.log import init_runtime_log_file, reset_logging\r\n  File \"D:\\Program\\QChatGPT\\pkg\\utils\\log.py\", line 6, in <module>\r\n    from . import context\r\n  File \"D:\\Program\\QChatGPT\\pkg\\utils\\context.py\", line 8, in <module>\r\n    from ..qqbot import manager as qqbot_mgr\r\n  File \"D:\\Program\\QChatGPT\\pkg\\qqbot\\manager.py\", line 12, in <module>\r\n    from ..qqbot import process as processor\r\n  File \"D:\\Program\\QChatGPT\\pkg\\qqbot\\process.py\", line 16, in <module>\r\n    from ..qqbot import command, message\r\n  File \"D:\\Program\\QChatGPT\\pkg\\qqbot\\command.py\", line 4, in <module>\r\n    from ..qqbot.cmds import aamgr as cmdmgr\r\n  File \"D:\\Program\\QChatGPT\\pkg\\qqbot\\cmds\\aamgr.py\", line 7, in <module>\r\n    import tips as tips_custom\r\n  File \"D:\\Program\\QChatGPT\\tips.py\", line 1, in <module>\r\n    import config\r\n  File \"D:\\Program\\QChatGPT\\config.py\", line 73\r\n    \"reverse_proxy\": https://one.caifree.com/v1\r\n                          ^\r\nSyntaxError: invalid syntax\r\n### clash\r\nD:\\Program\\QChatGPT>python main.py\r\nTraceback (most recent call last):\r\n  File \"D:\\Program\\QChatGPT\\main.py\", line 57, in <module>\r\n    from pkg.utils.log import init_runtime_log_file, reset_logging\r\n  File \"D:\\Program\\QChatGPT\\pkg\\utils\\log.py\", line 6, in <module>\r\n    from . import context\r\n  File \"D:\\Program\\QChatGPT\\pkg\\utils\\context.py\", line 8, in <module>\r\n    from ..qqbot import manager as qqbot_mgr\r\n  File \"D:\\Program\\QChatGPT\\pkg\\qqbot\\manager.py\", line 12, in <module>\r\n    from ..qqbot import process as processor\r\n  File \"D:\\Program\\QChatGPT\\pkg\\qqbot\\process.py\", line 16, in <module>\r\n    from ..qqbot import command, message\r\n  File \"D:\\Program\\QChatGPT\\pkg\\qqbot\\command.py\", line 4, in <module>\r\n    from ..qqbot.cmds import aamgr as cmdmgr\r\n  File \"D:\\Program\\QChatGPT\\pkg\\qqbot\\cmds\\aamgr.py\", line 7, in <module>\r\n    import tips as tips_custom\r\n  File \"D:\\Program\\QChatGPT\\tips.py\", line 1, in <module>\r\n    import config\r\n  File \"D:\\Program\\QChatGPT\\config.py\", line 72\r\n    \"http_proxy\": http://127.0.0.1:7890,\r\n                      ^\r\nSyntaxError: invalid syntax\r\n腾讯云函数\r\nD:\\Program\\QChatGPT>python main.py\r\nTraceback (most recent call last):\r\n  File \"D:\\Program\\QChatGPT\\main.py\", line 57, in <module>\r\n    from pkg.utils.log import init_runtime_log_file, reset_logging\r\n  File \"D:\\Program\\QChatGPT\\pkg\\utils\\log.py\", line 6, in <module>\r\n    from . import context\r\n  File \"D:\\Program\\QChatGPT\\pkg\\utils\\context.py\", line 8, in <module>\r\n    from ..qqbot import manager as qqbot_mgr\r\n  File \"D:\\Program\\QChatGPT\\pkg\\qqbot\\manager.py\", line 12, in <module>\r\n    from ..qqbot import process as processor\r\n  File \"D:\\Program\\QChatGPT\\pkg\\qqbot\\process.py\", line 16, in <module>\r\n    from ..qqbot import command, message\r\n  File \"D:\\Program\\QChatGPT\\pkg\\qqbot\\command.py\", line 4, in <module>\r\n    from ..qqbot.cmds import aamgr as cmdmgr\r\n  File \"D:\\Program\\QChatGPT\\pkg\\qqbot\\cmds\\aamgr.py\", line 7, in <module>\r\n    import tips as tips_custom\r\n  File \"D:\\Program\\QChatGPT\\tips.py\", line 1, in <module>\r\n    import config\r\n  File \"D:\\Program\\QChatGPT\\config.py\", line 73\r\n    \"reverse_proxy\": https://service-hgbpvnnu-1310799201.hk.tencentapigw.cn/v1\r\n                                                        ^\r\nSyntaxError: invalid decimal literal\n\n### 启用的插件\n\n无插件",
      "state": "closed",
      "author": "youyi0218",
      "author_type": "User",
      "created_at": "2024-02-09T03:55:44Z",
      "updated_at": "2024-02-09T04:03:09Z",
      "closed_at": "2024-02-09T04:03:09Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/682/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/682",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/682",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:03.546110",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "地址是字符串，需要用英文双引号包裹",
          "created_at": "2024-02-09T03:58:23Z"
        },
        {
          "author": "youyi0218",
          "body": "> 地址是字符串，需要用英文双引号包裹\r\n\r\n正向和反向都需要双引号吗",
          "created_at": "2024-02-09T03:59:54Z"
        },
        {
          "author": "RockChinQ",
          "body": "这跟你什么代理没关系，这是Python语法",
          "created_at": "2024-02-09T04:01:59Z"
        },
        {
          "author": "youyi0218",
          "body": "> 这跟你什么代理没关系，这是Python语法\r\n\r\n懂了，加上双引号就跑起来了，谢谢大佬orz",
          "created_at": "2024-02-09T04:03:09Z"
        }
      ]
    },
    {
      "issue_number": 596,
      "title": "[Feature]: 适配 ChatCompletion 最新的标准",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\nhttps://platform.openai.com/docs/api-reference/chat/create",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2023-11-13T10:31:28Z",
      "updated_at": "2024-02-07T12:34:43Z",
      "closed_at": "2024-02-07T12:34:43Z",
      "labels": [
        "m: Provider"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/596/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "RockChinQ"
      ],
      "milestone": "3.0",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/596",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/596",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:03.747291",
      "comments": []
    },
    {
      "issue_number": 633,
      "title": "[Feature]: 希望能支持Bert-VITS2",
      "body": "### 这是一个？\r\n\r\n新功能\r\n\r\n### 详细描述\r\n\r\nBert-VITS2于2023年8月推出，现在已更新至2.2。\r\n希望这边也整上这个功能（或者包含此功能的插件）。\r\n我希望能支持Hugging Face上的Bert-VITS2模型、原神/星穹铁道语音合成在线推理网站（https://tts.ai-hobbyist.org/） 或者是本地推理。\r\n然而，原神/星穹铁道语音合成在线推理网站（https://tts.ai-hobbyist.org/） 的API接口已失效，以后会推出新版API。\r\n",
      "state": "closed",
      "author": "Sprt98",
      "author_type": "User",
      "created_at": "2023-12-15T02:49:34Z",
      "updated_at": "2024-02-07T12:32:20Z",
      "closed_at": "2024-02-07T12:32:20Z",
      "labels": [
        "help needed",
        "good first issue",
        "External Plugin"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/633/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/633",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/633",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:03.747310",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "这一个可以自己写个插件做一下吧，插件开发教程可以参考本仓库wiki",
          "created_at": "2023-12-18T02:38:46Z"
        },
        {
          "author": "RockChinQ",
          "body": "这是应该由插件支持的功能，可以看看最近的：\r\nhttps://github.com/the-lazy-me/RuiShengVoice\r\nhttps://github.com/the-lazy-me/GenshinVoice",
          "created_at": "2024-02-07T12:32:20Z"
        }
      ]
    },
    {
      "issue_number": 674,
      "title": "[Bug]: 启动main.py后无任何输出",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\nMirai\n\n### 系统环境\n\nUbuntu 22.04 中国北京 腾讯云(采用了反向代理)\n\n### Python环境\n\nPython3.10.12\n\n### QChatGPT版本\n\nv2.6.10\n\n### 异常情况\n\nmirai运行正常，mirai-api-http和QChatGPT的配置没有问题\r\n单纯就是运行python3 main.py之后就无反应，无一字输出\n\n### 日志信息\n\nMirai那边已经login successful并且可以正常接收账号信息\r\nQChatGPT的日志和输出始终为空\n\n### 启用的插件\n\n无额外插件",
      "state": "closed",
      "author": "zxcvbnm-das",
      "author_type": "User",
      "created_at": "2024-02-04T05:13:00Z",
      "updated_at": "2024-02-07T12:30:37Z",
      "closed_at": "2024-02-07T12:30:37Z",
      "labels": [
        "bug?",
        "pd: Need reproducing",
        "m: Lifecycle"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 12,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/674/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/674",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/674",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:03.926832",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "发个截图看看",
          "created_at": "2024-02-04T05:57:57Z"
        },
        {
          "author": "zxcvbnm-das",
          "body": "mirai的初始日志（一直到mirai start successful）\r\n```\r\nubuntu@VM-24-15-ubuntu:~/mirai$ ./mcl\r\n  14:41:46 [INFO] iTX Technologies Mirai Console Loader version 2.1.2-61c8bd8\r\n  14:41:46 [INFO] Runtime: OpenJDK 64-Bit Server VM 17.0.10 (arch: 64)\r\n  14:41:46 [INFO] https://github.com/iTXTech/mirai-console-loader\r",
          "created_at": "2024-02-04T06:54:34Z"
        },
        {
          "author": "RockChinQ",
          "body": "估计是你python命令不太对吧，你试试看单独敲 `python3` 有没有反应。或者试试 `python`，总之你这估计是环境的问题，确认是用 3.9 以上python启动 `main.py` 就可以了。",
          "created_at": "2024-02-04T07:09:25Z"
        },
        {
          "author": "zxcvbnm-das",
          "body": "不是不是，`python`命令是`python2`，`python3 --version`执行后可以输出`Python 3.10.12`",
          "created_at": "2024-02-04T07:10:39Z"
        },
        {
          "author": "RockChinQ",
          "body": "那你要不在 config.py 中[开启调试模式](https://github.com/RockChinQ/QChatGPT/issues/402)，试试看有什么输出？",
          "created_at": "2024-02-04T07:48:21Z"
        }
      ]
    },
    {
      "issue_number": 672,
      "title": "[Bug]: Multiple exceptions: [Errno 111] Connect call failed ('::1', 8080, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 8080)",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\nMirai\n\n### 系统环境\n\nLinux  5.15.0-91-generic #101-Ubuntu SMP Tue Nov 14 13:30:08 UTC 2023 x86_64 x86_64 x86_64 GNU/Linux\n\n### Python环境\n\nPython3.10\n\n### QChatGPT版本\n\nv2.6.10\n\n### 异常情况\n\n![image](https://github.com/RockChinQ/QChatGPT/assets/113227651/f86030c4-954c-463d-9775-b319b6e672cb)\r\n[2024-01-25 15:50:06.866] main.py (324) - [ERROR] : 捕捉到未知异常:Multiple exceptions: [Errno 111] Connect call failed ('::1', 8080, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 8080), 请前往 https://github.com/RockChinQ/QChatGPT/issues 查找或提issue\r\n\n\n### 日志信息\n\n![image](https://github.com/RockChinQ/QChatGPT/assets/113227651/e6dfc239-bc93-446e-ba00-9839ca38f80f)\r\n\n\n### 启用的插件\n\n无",
      "state": "closed",
      "author": "aba666666",
      "author_type": "User",
      "created_at": "2024-01-25T07:52:17Z",
      "updated_at": "2024-02-07T12:30:26Z",
      "closed_at": "2024-02-07T12:30:26Z",
      "labels": [
        "bug?",
        "duplicated"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/672/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/672",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/672",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:04.162816",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "#68 ",
          "created_at": "2024-01-25T07:53:13Z"
        }
      ]
    },
    {
      "issue_number": 603,
      "title": "[Feature]: 请求支持OpenShamrock",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n文档:https://whitechi73.github.io/OpenShamrock/\r\n目前测试不会被风控",
      "state": "closed",
      "author": "ikun0014",
      "author_type": "User",
      "created_at": "2023-11-15T12:02:26Z",
      "updated_at": "2024-02-07T12:24:20Z",
      "closed_at": "2024-02-07T12:24:20Z",
      "labels": [
        "IM: aiocqhttp"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/603/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "RockChinQ"
      ],
      "milestone": "3.0",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/603",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/603",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:04.332418",
      "comments": [
        {
          "author": "ikun0014",
          "body": "已使用nakuru适配器进行测试，目前可以正常消息，功能是否完整正在测试中",
          "created_at": "2023-12-11T11:23:07Z"
        },
        {
          "author": "RockChinQ",
          "body": "将在 3.0 中正式支持",
          "created_at": "2024-02-07T12:24:09Z"
        }
      ]
    },
    {
      "issue_number": 676,
      "title": "[Bug]: !cmd指令无法回应",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\ngo-cqhttp\n\n### 系统环境\n\nWindows10 ltsc 中国四川\n\n### Python环境\n\npython 3.9\n\n### QChatGPT版本\n\nv2.6.10\n\n### 异常情况\n\n给机器人发送!cmd指令时，机器人无法发送相应信息，gocq报错\n\n### 日志信息\n\ngoroutine 43521 [running]:\r\nnet/http.(*conn).serve.func1()\r\n        net/http/server.go:1854 +0xbf\r\npanic({0x6f3040, 0xc000376180})\r\n        runtime/panic.go:890 +0x263\r\ngithub.com/Mrs4s/MiraiGo/client/internal/highway.(*Session).nextAddr(0x74d73?)\r\n        github.com/Mrs4s/MiraiGo@v0.0.0-20230823050531-a8213e127b2b/client/internal/highway/highway.go:227 +0xfd\r\ngithub.com/Mrs4s/MiraiGo/client/internal/highway.(*Session).selectConn(0x25910?)\r\n        github.com/Mrs4s/MiraiGo@v0.0.0-20230823050531-a8213e127b2b/client/internal/highway/highway.go:248 +0xe5\r\ngithub.com/Mrs4s/MiraiGo/client/internal/highway.(*Session).uploadSingle(0xc0000d47e0, {0x1b, {0x843600, 0xc00048aa80}, {0xc0004145f0, 0x10,\r\n 0x10}, 0x311, {0xc0002b40e0, 0x68, ...}, ...})\r\n        github.com/Mrs4s/MiraiGo@v0.0.0-20230823050531-a8213e127b2b/client/internal/highway/bdh.go:39 +0x68\r\ngithub.com/Mrs4s/MiraiGo/client/internal/highway.(*Session).Upload(0xc0000d47e0, {0x1b, {0x843600, 0xc00048aa80}, {0xc0004145f0, 0x10, 0x10}\r\n, 0x311, {0xc0002b40e0, 0x68, ...}, ...})\r\n        github.com/Mrs4s/MiraiGo@v0.0.0-20230823050531-a8213e127b2b/client/internal/highway/bdh.go:117 +0x425\r\ngithub.com/Mrs4s/MiraiGo/client.(*ForwardMessageBuilder).Main(0xc0003954f8, 0xc000466708)\r\n        github.com/Mrs4s/MiraiGo@v0.0.0-20230823050531-a8213e127b2b/client/multimsg.go:316 +0x5b8\r\ngithub.com/Mrs4s/go-cqhttp/coolq.(*CQBot).uploadForwardElement(0xc00013ca00, {0x5, {0xc0002ac024, 0x51a}, {0x0, 0x0}, 0x0, 0x24, {0x0, 0x0,\r\n...}}, ...)\r\n        github.com/Mrs4s/go-cqhttp/coolq/api.go:962 +0x1e5\r\ngithub.com/Mrs4s/go-cqhttp/coolq.(*CQBot).CQSendGroupForwardMessage(0xc00013ca00, 0x25575d35?, {0x5, {0xc0002ac024, 0x51a}, {0x0, 0x0}, 0x0,\r\n 0x24, {0x0, ...}})\r\n        github.com/Mrs4s/go-cqhttp/coolq/api.go:978 +0x7d\r\ngithub.com/Mrs4s/go-cqhttp/modules/api.(*Caller).call(0xc000353320, {0xc0002c62c6, 0x16}, 0xbf5620, {0x843e60, 0xc0004280c0})\r\n        github.com/Mrs4s/go-cqhttp/modules/api/api.go:38 +0x1ac5\r\ngithub.com/Mrs4s/go-cqhttp/modules/api.(*Caller).Call(0xc000353320, {0xc0002c62c6, 0x16}, 0x0?, {0x843e60, 0xc0004280c0})\r\n        github.com/Mrs4s/go-cqhttp/modules/api/caller.go:35 +0xc5\r\ngithub.com/Mrs4s/go-cqhttp/server.(*httpServer).ServeHTTP(0xc000353300, {0x847e70, 0xc0001ae1c0}, 0xc000092f00)\r\n        github.com/Mrs4s/go-cqhttp/server/http.go:213 +0x8ba\r\nnet/http.serverHandler.ServeHTTP({0x8467b8?}, {0x847e70, 0xc0001ae1c0}, 0xc000092f00)\r\n        net/http/server.go:2936 +0x316\r\nnet/http.(*conn).serve(0xc000132a20, {0x848360, 0xc0002e1b30})\r\n        net/http/server.go:1995 +0x612\r\ncreated by net/http.(*Server).Serve\r\n        net/http/server.go:3089 +0x5ed\n\n### 启用的插件\n\n无",
      "state": "closed",
      "author": "bobandbrony",
      "author_type": "User",
      "created_at": "2024-02-06T09:18:43Z",
      "updated_at": "2024-02-06T12:09:07Z",
      "closed_at": "2024-02-06T09:26:25Z",
      "labels": [
        "bug?",
        "IM: aiocqhttp"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/676/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/676",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/676",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:04.523307",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "你这个是 go-cqhttp 的问题。",
          "created_at": "2024-02-06T09:26:25Z"
        },
        {
          "author": "bobandbrony",
          "body": "好吧，发现问题了，与另一个gocq撞端口了🤣",
          "created_at": "2024-02-06T12:09:05Z"
        }
      ]
    },
    {
      "issue_number": 675,
      "title": "［漏洞反馈］程序与Mirai后端通信意外中止导致程序阻塞",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\nMirai\n\n### 系统环境\n\nDebian Testing、amd64、新加坡腾讯云机房\n\n### Python环境\n\n3.11.7\n\n### QChatGPT版本\n\n2.6.10\n\n### 异常情况\n\n关联的ISSUES： #571\r\n\r\n使用MCSManager作为管理面板自动启动QChatgpt和mirai，问题有：无法在mirai未启动完成时连接和mirai维护中断时连接，但是qchatgpt进程又未正确退出，导致无法自动重启\r\n\r\n程序应该在检测到程序未正常连接和程序断连后自动重启或延迟一段时间自动重连，或者程序立刻终止\n\n### 日志信息\n\n关联的ISSUES： #571\r\n\r\n```\r\n[2024-02-04 18:08:04.661] manager.py (242) - [INFO] : 加载禁用列表: person: [xxx], group: [xxx, xxx]\r\n[2024-02-04 18:08:04.666] models.py (295) - [INFO] : 插件注册完成: n='Switcher', d='快捷切换使用的模型', v=0.2.0, a='RockChinQ' (<class 'plugins.Switcher.main.SwitcherPlugin'>)\r\n[2024-02-04 18:08:04.695] models.py (295) - [INFO] : 插件注册完成: n='SysStat', d='查看 系统状态', v=0.1, a='RockChinQ' (<class 'plugins.SysStatPlugin.main.SysStatPlugin'>)\r\n[2024-02-04 18:08:06.235] models.py (295) - [INFO] : 插件注册完成: n='revLibs', d='接入acheong08/ChatGPT、Claude、Bard等逆向库', v=0.9.1, a='RockChinQ' (<class 'plugins.revLibs.main.RevLibsPlugin'>)\r\n[2024-02-04 18:08:06.240] settings.py (98) - [INFO] : 已全局启用内容函数。\r\n[2024-02-04 18:08:06.241] main.py (79) - [INFO] : [rev] 已加载逆向库xtekky/gpt4free, 使 用接口实现类: <class 'plugins.revLibs.pkg.process.impls.gpt4free.GPT4FreeImpl'>\r\n[2024-02-04 18:08:06.241] main.py (95) - [INFO] : [rev] 已将主程序消息处理超时时间设置为10分钟\r\n[2024-02-04 18:08:06.242] host.py (163) - [INFO] : 以下插件已初始化: Switcher, SysStat, revLibs\r\n2024-02-04 18:08:06 - INFO     [WebSocket] 成功登录到账号xxx。\r\n[2024-02-04 18:08:06.526] websocket.py (194) - [INFO] : [WebSocket] 成功登录到账号xxx。\r\n2024-02-04 18:08:06 - INFO     [WebSocket] 机器人开始运行。按 Ctrl + C 停止。\r\n[2024-02-04 18:08:06.527] websocket.py (250) - [INFO] : [WebSocket] 机器人开始运行。按 Ctrl + C 停止。\r\n[2024-02-04 18:08:18.242] main.py (355) - [INFO] : QQ: xxx, MAH: localhost:8080\r\n[2024-02-04 18:08:18.242] main.py (356) - [CRITICAL] : 程序启动完成,如长时间未显示 \"成功登录到账号xxxxx\" ,并且不回复消息,解决办法(请勿到群里问): https://github.com/RockChinQ/QChatGPT/issues/37\r\n2024-02-04 18:08:25 - ERROR    [WebSocket] WebSocket 通道意外关闭。code: 1006, reason:\r\n[2024-02-04 18:08:25.471] websocket.py (154) - [ERROR] : [WebSocket] WebSocket 通道意外 关闭。code: 1006, reason:\r\n^C[2024-02-04 18:08:57.264] main.py (423) - [INFO] : 持久化session: person_2484443126\r\n已杀死\r\n```\n\n### 启用的插件\n\nSwitcher, SysStat, revLibs\r\n三个插件均启用，且正常运行",
      "state": "closed",
      "author": "cnrenil",
      "author_type": "User",
      "created_at": "2024-02-04T10:14:19Z",
      "updated_at": "2024-02-05T07:01:02Z",
      "closed_at": "2024-02-05T02:06:32Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 9,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/675/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/675",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/675",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:04.707383",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "#272 ",
          "created_at": "2024-02-04T10:15:27Z"
        },
        {
          "author": "cnrenil",
          "body": "我研究了一下，好像可以\n在pkg/qqbot/sources/yirimirai.py中的run_sync函数中\n```\ntry:\n    asyncio.run(MiraiRunner(self.bot)._run())\nexcept BaseException:\n    print(\"BE\")\n```\n得知退出了。但是，我Python没学过，无法做出一点贡献。。。我不会完全退出整个程序，只能打印，只知道可以捕获异常",
          "created_at": "2024-02-04T11:06:10Z"
        },
        {
          "author": "RockChinQ",
          "body": "异常是可以捕获，但yirimirai底层某个对象是单例的，暂时没研究过如何重启bot实例",
          "created_at": "2024-02-04T11:13:06Z"
        },
        {
          "author": "cnrenil",
          "body": "> 异常是可以捕获，但yirimirai底层某个对象是单例的，暂时没研究过如何重启bot实例\n\n好吧，先close了。",
          "created_at": "2024-02-04T11:37:09Z"
        },
        {
          "author": "cnrenil",
          "body": "在bot退出时会抛出一个SystemExit的异常，这是BaseException，不是Exception，所以在main.py捕获的异常不完整，还有一个NetworkError的异常，这是刚开始就没连上，可以在main.py里面添加一个捕获异常信号了，这样可以统一一下，直接在run_sync的 try except那里添加，我试过了可以。\n这样至少可以保证在连接被中止时可以把QChatgpt也一并关闭，便于维护",
          "created_at": "2024-02-05T01:51:58Z"
        }
      ]
    },
    {
      "issue_number": 654,
      "title": "[Bug]:  运行主程序超时",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\nMirai\n\n### 系统环境\n\nUbuntu22.04\n\n### Python环境\n\npython3.9.5\n\n### QChatGPT版本\n\n最新版本\n\n### 异常情况\n\nTraceback (most recent call last):\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/site-packages/websockets/legacy/client.py\", line 647, in __await_impl_timeout__\r\n    return await self.__await_impl__()\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/site-packages/websockets/legacy/client.py\", line 654, in __await_impl__\r\n    await protocol.handshake(\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/site-packages/websockets/legacy/client.py\", line 319, in handshake\r\n    status_code, response_headers = await self.read_http_response()\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/site-packages/websockets/legacy/client.py\", line 139, in read_http_response\r\n    status_code, reason, headers = await read_response(self.reader)\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/site-packages/websockets/legacy/http.py\", line 120, in read_response\r\n    status_line = await read_line(stream)\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/site-packages/websockets/legacy/http.py\", line 194, in read_line\r\n    line = await stream.readline()\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/asyncio/streams.py\", line 540, in readline\r\n    line = await self.readuntil(sep)\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/asyncio/streams.py\", line 632, in readuntil\r\n    await self._wait_for_data('readuntil')\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/asyncio/streams.py\", line 517, in _wait_for_data\r\n    await self._waiter\r\nasyncio.exceptions.CancelledError\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/preject/qqbot/QChatGPT/main.py\", line 287, in run_bot_wrapper\r\n    qqbot.adapter.run_sync()\r\n  File \"/home/preject/qqbot/QChatGPT/pkg/qqbot/sources/yirimirai.py\", line 120, in run_sync\r\n    loop.run_until_complete(MiraiRunner(self.bot)._run())\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/asyncio/base_events.py\", line 642, in run_until_complete\r\n    return future.result()\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/site-packages/mirai/bot.py\", line 240, in _run\r\n    await self.startup()\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/site-packages/mirai/bot.py\", line 228, in startup\r\n    await asyncio.gather(*coros)\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/site-packages/mirai/bot.py\", line 137, in startup\r\n    await self._adapter.login(self.qq)\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/site-packages/mirai/adapters/base.py\", line 35, in wrapped\r\n    return await func(self, *args, **kwargs)\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/site-packages/mirai/adapters/websocket.py\", line 187, in login\r\n    self.connection = await connect(self.host_name, extra_headers=headers)\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/site-packages/websockets/legacy/client.py\", line 647, in __await_impl_timeout__\r\n    return await self.__await_impl__()\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/site-packages/websockets/legacy/async_timeout.py\", line 169, in __aexit__\r\n    self._do_exit(exc_type)\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/site-packages/websockets/legacy/async_timeout.py\", line 252, in _do_exit\r\n    raise asyncio.TimeoutError\r\nasyncio.exceptions.TimeoutError\r\n[2024-01-04 12:59:34.315] main.py (324) - [ERROR] : 捕捉到未知异常:, 请前往 https://github.com/RockChinQ/QChatGPT/issues 查找或提issue\r\nException in thread Thread-2:\r\nTraceback (most recent call last):\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/site-packages/websockets/legacy/client.py\", line 647, in __await_impl_timeout__\r\n    return await self.__await_impl__()\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/site-packages/websockets/legacy/client.py\", line 654, in __await_impl__\r\n    await protocol.handshake(\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/site-packages/websockets/legacy/client.py\", line 319, in handshake\r\n    status_code, response_headers = await self.read_http_response()\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/site-packages/websockets/legacy/client.py\", line 139, in read_http_response\r\n    status_code, reason, headers = await read_response(self.reader)\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/site-packages/websockets/legacy/http.py\", line 120, in read_response\r\n    status_line = await read_line(stream)\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/site-packages/websockets/legacy/http.py\", line 194, in read_line\r\n    line = await stream.readline()\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/asyncio/streams.py\", line 540, in readline\r\n    line = await self.readuntil(sep)\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/asyncio/streams.py\", line 632, in readuntil\r\n    await self._wait_for_data('readuntil')\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/asyncio/streams.py\", line 517, in _wait_for_data\r\n    await self._waiter\r\nasyncio.exceptions.CancelledError\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/threading.py\", line 954, in _bootstrap_inner\r\n    self.run()\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/threading.py\", line 892, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/home/preject/qqbot/QChatGPT/main.py\", line 327, in run_bot_wrapper\r\n    raise e\r\n  File \"/home/preject/qqbot/QChatGPT/main.py\", line 287, in run_bot_wrapper\r\n    qqbot.adapter.run_sync()\r\n  File \"/home/preject/qqbot/QChatGPT/pkg/qqbot/sources/yirimirai.py\", line 120, in run_sync\r\n    loop.run_until_complete(MiraiRunner(self.bot)._run())\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/asyncio/base_events.py\", line 642, in run_until_complete\r\n    return future.result()\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/site-packages/mirai/bot.py\", line 240, in _run\r\n    await self.startup()\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/site-packages/mirai/bot.py\", line 228, in startup\r\n    await asyncio.gather(*coros)\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/site-packages/mirai/bot.py\", line 137, in startup\r\n    await self._adapter.login(self.qq)\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/site-packages/mirai/adapters/base.py\", line 35, in wrapped\r\n    return await func(self, *args, **kwargs)\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/site-packages/mirai/adapters/websocket.py\", line 187, in login\r\n    self.connection = await connect(self.host_name, extra_headers=headers)\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/site-packages/websockets/legacy/client.py\", line 647, in __await_impl_timeout__\r\n    return await self.__await_impl__()\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/site-packages/websockets/legacy/async_timeout.py\", line 169, in __aexit__\r\n    self._do_exit(exc_type)\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/site-packages/websockets/legacy/async_timeout.py\", line 252, in _do_exit\r\n    raise asyncio.TimeoutError\r\nasyncio.exceptions.TimeoutError\n\n### 日志信息\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "ivring2",
      "author_type": "User",
      "created_at": "2024-01-04T05:02:33Z",
      "updated_at": "2024-02-03T03:03:30Z",
      "closed_at": "2024-02-03T03:03:30Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/654/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/654",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/654",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:04.913909",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "估计是连不通mirai吧，检查一下mirai有没有正常运行，mirai-api-http是否配置正确，端口是否正常放行（检查系统防火墙）",
          "created_at": "2024-01-04T07:13:27Z"
        },
        {
          "author": "ivring2",
          "body": "mirai 运行 正常 配置也正常 端口也能通 就是超时",
          "created_at": "2024-01-04T08:15:45Z"
        },
        {
          "author": "RockChinQ",
          "body": "再次按照文档检查是否配置 mirai-api-http 并且在 config.py 填写了正确的配置。实在不行把所有日志都贴出来，尽可能多。",
          "created_at": "2024-01-04T08:20:56Z"
        },
        {
          "author": "ivring2",
          "body": "2024-01-04 16:39:09 - ERROR    \r\n[2024-01-04 16:39:09.654] base.py (43) - [ERROR] : \r\nTraceback (most recent call last):\r\n  File \"/root/anaconda3/envs/qqgpt/lib/python3.9/site-packages/websockets/legacy/client.py\", line 647, in __await_impl_timeout__\r\n    return await self.__await_impl__()\r\n  File \"",
          "created_at": "2024-01-04T08:40:58Z"
        },
        {
          "author": "RockChinQ",
          "body": "还是不太清楚，如果你确定你的 mirai-api-http（不是mirai本身） 版本正确、配置正确、运行正常，并且 `config.py` 中填写的 mirai_http_api 配置信息符合 mirai-api-http 的设置。那么你需要确定 QChatGPT 实例能正常访问 mirai-api-http 提供的端口，这种情况下，异常通常是由防火墙拦截、mirai-api-http 端口和其他程序冲突等问题造成的。",
          "created_at": "2024-01-04T08:45:24Z"
        }
      ]
    },
    {
      "issue_number": 665,
      "title": "[Bug]: plugin 命令中错误的远程地址获取逻辑",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\nNone\n\n### 系统环境\n\n·\n\n### Python环境\n\n·\n\n### QChatGPT版本\n\n·\n\n### 异常情况\n\n```python\r\n                if updater.is_repo(\"/\".join(plugin['path'].split('/')[:-1])):\r\n                    remote_url = updater.get_remote_url(\"/\".join(plugin['path'].split('/')[:-1]))\r\n                    if remote_url != \"https://github.com/RockChinQ/QChatGPT\" and remote_url != \"https://gitee.com/RockChin/QChatGPT\":\r\n                        reply_str += \"源码: \"+remote_url+\"\\n\"\r\n```\r\n\r\n应该改成从metadata中获取远程地址\n\n### 日志信息\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-01-15T14:33:35Z",
      "updated_at": "2024-02-01T17:08:23Z",
      "closed_at": "2024-02-01T17:08:23Z",
      "labels": [
        "bug?",
        "m: Plugins"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/665/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "3.0",
      "html_url": "https://github.com/RockChinQ/LangBot/issues/665",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/665",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:05.140327",
      "comments": []
    },
    {
      "issue_number": 656,
      "title": "[Bug]: 热重载之后不再向日志文件输出日志",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\nNone\n\n### 系统环境\n\ndarwin\n\n### Python环境\n\n3.11\n\n### QChatGPT版本\n\n2.6.9\n\n### 异常情况\n\n热重载之后不再将日志输出到文件\n\n### 日志信息\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-01-11T03:49:11Z",
      "updated_at": "2024-02-01T17:07:57Z",
      "closed_at": "2024-02-01T17:07:57Z",
      "labels": [
        "bug?",
        "pd: Need reproducing",
        "m: Lifecycle"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/656/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/656",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/656",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:05.140348",
      "comments": []
    },
    {
      "issue_number": 662,
      "title": "[Bug]: No module named 'openai.types'",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\ngo-cqhttp\n\n### 系统环境\n\nWindows 10、中国大陆\n\n### Python环境\n\nPython 3.10.9\n\n### QChatGPT版本\n\nv2.6.9\n\n### 异常情况\n\n在更新到最新版本之后，出现：\r\nTraceback (most recent call last):\r\n  File \"F:\\bot3\\QChatGPT\\main.py\", line 57, in <module>\r\n    from pkg.utils.log import init_runtime_log_file, reset_logging\r\n  File \"F:\\bot3\\QChatGPT\\.\\pkg\\utils\\log.py\", line 6, in <module>\r\n    from . import context\r\n  File \"F:\\bot3\\QChatGPT\\.\\pkg\\utils\\context.py\", line 7, in <module>\r\n    from ..openai import manager as openai_mgr\r\n  File \"F:\\bot3\\QChatGPT\\.\\pkg\\openai\\manager.py\", line 4, in <module>\r\n    from openai.types import images_response\r\nModuleNotFoundError: No module named 'openai.types'\r\n之后再启动机器人的时候也出现这个错误。\r\n\n\n### 日志信息\n\n[2024-01-14 18:54:50.290] F:\\bot3\\QChatGPT\\main.py (73) - [INFO] :\r\n检查config模块完整性.\r\n[2024-01-14 18:54:50.305] F:\\bot3\\QChatGPT\\main.py (101) - [INFO] :\r\n检查tips模块完整性.\r\n[2024-01-14 18:56:09.540] F:\\bot3\\QChatGPT\\.\\pkg\\openai\\keymgr.py (61) - [INFO] :\r\n使用api-key:api1\r\n[2024-01-14 18:56:09.555] F:\\bot3\\QChatGPT\\.\\pkg\\openai\\manager.py (30) - [INFO] :\r\n文字总使用量：822320\r\n[2024-01-14 18:56:09.563] F:\\bot3\\QChatGPT\\.\\pkg\\qqbot\\manager.py (90) - [INFO] :\r\nUse adapter:nakuru\r\n[2024-01-14 18:56:10.115] F:\\bot3\\QChatGPT\\.\\pkg\\qqbot\\manager.py (214) - [INFO] :\r\n加载禁用列表: person: [2854196310], group: [204785790, 614876491]\r\n[2024-01-14 18:56:10.132] F:\\bot3\\QChatGPT\\.\\pkg\\plugin\\host.py (90) - [INFO] :\r\n加载插件\r\n[2024-01-14 18:56:10.770] F:\\bot3\\QChatGPT\\.\\pkg\\plugin\\models.py (219) - [INFO] :\r\n插件注册完成: n='BanMassage', d='屏蔽插件，若匹配到关键词则屏蔽，不回复', v=0.1, a='多米诺艾尔' (<class 'plugins.BanMassage.main.HelloPlugin'>)\r\n[2024-01-14 18:56:10.779] F:\\bot3\\QChatGPT\\.\\pkg\\plugin\\host.py (82) - [INFO] :\r\n加载模块: plugins/BanMassage/main.py 成功\r\n[2024-01-14 18:56:10.792] F:\\bot3\\QChatGPT\\.\\pkg\\plugin\\host.py (82) - [INFO] :\r\n加载模块: plugins/ChatWaifu/config.py 成功\r\n[2024-01-14 18:57:49.311] F:\\bot3\\QChatGPT\\.\\pkg\\plugin\\models.py (219) - [INFO] :\r\n插件注册完成: n='ChatWaifu', d='这是一个语音程序，可以让你的GPT3生成语音发送到QQ群里', v=0.2, a='多米诺艾尔' (<class 'plugins.ChatWaifu.main.HelloPlugin'>)\r\n[2024-01-14 18:57:49.311] F:\\bot3\\QChatGPT\\.\\pkg\\plugin\\host.py (82) - [INFO] :\r\n加载模块: plugins/ChatWaifu/main.py 成功\r\n[2024-01-14 18:57:49.327] F:\\bot3\\QChatGPT\\.\\pkg\\plugin\\host.py (82) - [INFO] :\r\n加载模块: plugins/headers.py 成功\r\n[2024-01-14 18:57:51.090] F:\\bot3\\QChatGPT\\.\\pkg\\plugin\\models.py (219) - [INFO] :\r\n插件注册完成: n='Hello', d='hello world', v=0.1, a='RockChinQ' (<class 'plugins.randomimg.main.HelloPlugin'>)\r\n[2024-01-14 18:57:51.090] F:\\bot3\\QChatGPT\\.\\pkg\\plugin\\host.py (82) - [INFO] :\r\n加载模块: plugins/randomimg/main.py 成功\r\n[2024-01-14 18:57:51.096] F:\\bot3\\QChatGPT\\.\\pkg\\plugin\\host.py (107) - [INFO] :\r\n初始化插件\r\n[2024-01-14 18:57:51.096] F:\\bot3\\QChatGPT\\.\\pkg\\plugin\\host.py (115) - [INFO] :\r\n插件 BanMassage 已初始化\r\n[2024-01-14 18:57:51.097] F:\\bot3\\QChatGPT\\.\\pkg\\plugin\\host.py (115) - [INFO] :\r\n插件 Hello 已初始化\r\n[2024-01-14 18:57:51.098] F:\\bot3\\QChatGPT\\.\\pkg\\plugin\\host.py (115) - [INFO] :\r\n插件 ChatWaifu 已初始化\r\n[2024-01-14 18:57:51.131] F:\\bot3\\python\\lib\\site-packages\\nakuru\\application.py (59) - [INFO] :\r\nProtocol: connected\r\n[2024-01-14 18:57:53.115] F:\\bot3\\QChatGPT\\main.py (261) - [INFO] :\r\n您正在使用Windows系统，若命令行窗口处于“选择”模式，程序可能会被暂停，此时请右键点击窗口空白区域使其取消选择模式。\r\n[2024-01-14 18:58:05.128] F:\\bot3\\QChatGPT\\main.py (273) - [INFO] :\r\nhost: localhost, port: 6700, http_port: 5700\r\n[2024-01-14 18:58:05.131] F:\\bot3\\QChatGPT\\main.py (274) - [CRITICAL] :\r\n程序启动完成,如长时间未显示 \"Protocol: connected\" ,并且不回复消息,请检查config.py中的nakuru_config是否正确\r\n[2024-01-14 18:58:26.366] F:\\bot3\\QChatGPT\\main.py (301) - [INFO] :\r\n新版本可用，请发送 !update 进行自动更新\r\n更新日志:\r\nv2.6.9 完善的使用量分析\r\nv2.6.8 支持 Gemini Pro 模型\r\nv2.6.7 修复绘图命令不可用问题\r\nv2.6.6 修复反代失败\r\nv2.6.5 优化导入\r\nv2.6.4 修复插件安装问题\r\nv2.6.3 适配 OpenAI 新版本 API\r\nv2.6.0 One API支持\r\nv2.5.2 优化函数调用逻辑、api-key主动负载\r\nv2.5.1 功能适配、token bugfix\r\nv2.5.0 支持函数调用功能\r\nv2.4.7 gpt-turbo-16k模型支持\r\nv2.4.6 消息禁用、会话自动重置\r\nv2.4.5 增强的!cfg命令\r\nv2.4.4 热重载bug，消息主动延迟\r\nv2.4.3.1 fixVerNum\r\nv2.4.3 优化插件更新逻辑\r\nv2.4.2 细化到单个群的响应规则\r\nv2.4.1 完善数据统计\r\n[2024-01-14 18:58:26.991] F:\\bot3\\QChatGPT\\main.py (313) - [CRITICAL] :\r\n[公告]<2023-08-01 10:49:26> 现已支持GPT函数调用功能，欢迎了解：https://github.com/RockChinQ/QChatGPT/wiki/%E6%8F%92%E4%BB%B6%E4%BD%BF%E7%94%A8-%E5%86%85%E5%AE%B9%E5%87%BD%E6%95%B0\r\n[2024-01-14 18:58:26.992] F:\\bot3\\QChatGPT\\main.py (313) - [CRITICAL] :\r\n[公告]<2023-11-10 12:20:09> OpenAI 库1.0版本已发行，若出现 OpenAI 调用问题，请更新 QChatGPT 版本。详见项目主页：https://github.com/RockChinQ/QChatGPT\r\n[2024-01-14 18:58:26.994] F:\\bot3\\QChatGPT\\main.py (313) - [CRITICAL] :\r\n[公告]<2023-11-13 18:02:39> 近期 OpenAI 接口改动频繁，正在积极适配并添加新功能，请尽快更新到最新版本，更新方式：https://github.com/RockChinQ/QChatGPT/discussions/595\r\n[2024-01-14 18:58:26.995] F:\\bot3\\QChatGPT\\main.py (313) - [CRITICAL] :\r\n[公告]<2023-12-07 9:20:00> QChatGPT 一周年啦！感谢大家的选择和支持，RockChinQ 在此衷心感谢素未谋面但又至关重要的你们每一个人，愿 AI 与我们同在！欢迎前往：https://github.com/RockChinQ/QChatGPT/discussions/627 参与讨论。\r\n[2024-01-14 18:59:13.332] F:\\bot3\\python\\lib\\site-packages\\nakuru\\application.py (95) - [INFO] :\r\nEvent: handling a event: FriendMessage\r\n[2024-01-14 18:59:13.376] F:\\bot3\\QChatGPT\\.\\pkg\\qqbot\\command.py (27) - [INFO] :\r\n[person_2357901854]发起指令:!update\r\n[2024-01-14 18:59:13.379] F:\\bot3\\QChatGPT\\.\\pkg\\qqbot\\process.py (157) - [INFO] :\r\n回复[person_2357901854]文字消息:[bot]正在更新，请耐心等待，请勿重复发起更新...\r\n[2024-01-14 18:59:14.280] F:\\bot3\\QChatGPT\\.\\pkg\\utils\\updater.py (96) - [INFO] :\r\n更新日志: ['v2.6.9 完善的使用量分析', 'v2.6.8 支持 Gemini Pro 模型', 'v2.6.7 修复绘图命令不可用问题', 'v2.6.6 修复反代失败', 'v2.6.5 优化导入', 'v2.6.4 修复插件安装问题', 'v2.6.3 适配 OpenAI 新版本 API', 'v2.6.0 One API支持', 'v2.5.2 优化函数调用逻辑、api-key主动负载', 'v2.5.1 功能适配、token bugfix', 'v2.5.0 支持函数调用功能', 'v2.4.7 gpt-turbo-16k模型支持', 'v2.4.6 消息禁用、会话自动重置', 'v2.4.5 增强的!cfg命令', 'v2.4.4 热重载bug，消息主动延迟', 'v2.4.3.1 fixVerNum', 'v2.4.3 优化插件更新逻辑', 'v2.4.2 细化到单个群的响应规则', 'v2.4.1 完善数据统计', 'v2.4.0 支持go-cqhttp登录']\r\n[2024-01-14 18:59:14.280] F:\\bot3\\QChatGPT\\.\\pkg\\utils\\updater.py (105) - [INFO] :\r\n开始下载最新版本: https://api.github.com/repos/RockChinQ/QChatGPT/zipball/v2.6.9\r\n[2024-01-14 18:59:16.335] F:\\bot3\\QChatGPT\\.\\pkg\\utils\\updater.py (124) - [INFO] :\r\n下载最新版本完成: temp/updater/v2.6.9.zip\r\n[2024-01-14 18:59:17.588] F:\\bot3\\QChatGPT\\.\\pkg\\qqbot\\manager.py (340) - [INFO] :\r\n通知管理员:已更新到最新版本: v2.6.9\r\n更新日志:\r\nv2.6.9 完善的使用量分析\r\nv2.6.8 支持 Gemini Pro 模型\r\nv2.6.7 修复绘图命令不可用问题\r\nv2.6.6 修复反代失败\r\nv2.6.5 优化导入\r\nv2.6.4 修复插件安装问题\r\nv2.6.3 适配 OpenAI 新版本 API\r\nv2.6.0 One API支持\r\nv2.5.2 优化函数调用逻辑、api-key主动负载\r\nv2.5.1 功能适配、token bugfix\r\nv2.5.0 支持函数调用功能\r\nv2.4.7 gpt-turbo-16k模型支持\r\nv2.4.6 消息禁用、会话自动重置\r\nv2.4.5 增强的!cfg命令\r\nv2.4.4 热重载bug，消息主动延迟\r\nv2.4.3.1 fixVerNum\r\nv2.4.3 优化插件更新逻辑\r\nv2.4.2 细化到单个群的响应规则\r\nv2.4.1 完善数据统计\r\n完整的更新日志请前往 https://github.com/RockChinQ/QChatGPT/releases 查看\r\n[2024-01-14 18:59:17.599] F:\\bot3\\QChatGPT\\.\\pkg\\utils\\reloader.py (27) - [INFO] :\r\n执行程序关闭流程\r\n[2024-01-14 18:59:17.658] F:\\bot3\\QChatGPT\\.\\main.py (423) - [INFO] :\r\n持久化session: person_2357901854\r\n[2024-01-14 18:59:17.806] F:\\bot3\\QChatGPT\\.\\pkg\\utils\\reloader.py (17) - [INFO] :\r\nreload module: audit.gatherer, path: audit/gatherer.py\r\n[2024-01-14 18:59:17.814] F:\\bot3\\QChatGPT\\.\\pkg\\utils\\reloader.py (17) - [INFO] :\r\nreload module: audit.identifier, path: audit/identifier.py\r\n[2024-01-14 18:59:17.824] F:\\bot3\\QChatGPT\\.\\pkg\\utils\\reloader.py (17) - [INFO] :\r\nreload module: config.manager, path: config/manager.py\r\n[2024-01-14 18:59:17.826] F:\\bot3\\QChatGPT\\.\\pkg\\utils\\reloader.py (17) - [INFO] :\r\nreload module: config.model, path: config/model.py\r\n[2024-01-14 18:59:17.831] F:\\bot3\\QChatGPT\\.\\pkg\\utils\\reloader.py (17) - [INFO] :\r\nreload module: database.manager, path: database/manager.py\r\n[2024-01-14 18:59:17.852] F:\\bot3\\QChatGPT\\.\\pkg\\utils\\reloader.py (17) - [INFO] :\r\nreload module: openai.api.chat_completion, path: openai/api/chat_completion.py\r\n[2024-01-14 18:59:17.869] F:\\bot3\\QChatGPT\\.\\pkg\\qqbot\\manager.py (340) - [INFO] :\r\n通知管理员:更新失败:No module named 'openai.types'\r\n[2024-01-14 18:59:49.121] F:\\bot3\\python\\lib\\site-packages\\nakuru\\application.py (95) - [INFO] :\r\nEvent: handling a event: FriendMessage\r\n\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "Sprt98",
      "author_type": "User",
      "created_at": "2024-01-14T13:24:55Z",
      "updated_at": "2024-01-22T12:30:05Z",
      "closed_at": "2024-01-22T12:30:05Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/662/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/662",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/662",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:05.140357",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "更新一下 openai 库到 1.0 以上。\npip install -U openai",
          "created_at": "2024-01-15T01:51:33Z"
        }
      ]
    },
    {
      "issue_number": 668,
      "title": "[Bug]: OSError: Multiple exceptions: [Errno 61] Connect call failed ('::1', 8080, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8080)",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\nMirai\n\n### 系统环境\n\nMacOS,中国，使用梯子（放在了config.py --http_proxy）\n\n### Python环境\n\npython 3.10\n\n### QChatGPT版本\n\n?\n\n### 异常情况\n\n无法运行main.py文件，一直显示OSError: Multiple exceptions: [Errno 61] Connect call failed ('::1', 8080, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8080)。但是我使用sudo lsof -i :8080检查了，8080没有被其他进程占用\n\n### 日志信息\n\n./anaconda3/envs/qqchat/bin/python ./Downloads/QChatGPT-master/main.py\r\n[2024-01-19 15:21:37.045] manager.py (242) - [INFO] : 加载禁用列表: person: [2854196310], group: [204785790, 691226829]\r\n[2024-01-19 15:21:37.046] settings.py (98) - [INFO] : 已全局启用内容函数。\r\n[2024-01-19 15:21:37.046] host.py (163) - [INFO] : 以下插件已初始化: \r\n2024-01-19 15:21:37 - ERROR    Multiple exceptions: [Errno 61] Connect call failed ('::1', 8080, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8080)\r\n[2024-01-19 15:21:37.049] base.py (43) - [ERROR] : Multiple exceptions: [Errno 61] Connect call failed ('::1', 8080, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8080)\r\nTraceback (most recent call last):\r\n  File \"./Downloads/QChatGPT-master/main.py\", line 287, in run_bot_wrapper\r\n    qqbot.adapter.run_sync()\r\n  File \"./Downloads/QChatGPT-master/pkg/qqbot/sources/yirimirai.py\", line 120, in run_sync\r\n    loop.run_until_complete(MiraiRunner(self.bot)._run())\r\n  File \"./anaconda3/envs/qqchat/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\r\n    return future.result()\r\n  File \"./anaconda3/envs/qqchat/lib/python3.10/site-packages/mirai/bot.py\", line 240, in _run\r\n    await self.startup()\r\n  File \"./anaconda3/envs/qqchat/lib/python3.10/site-packages/mirai/bot.py\", line 228, in startup\r\n    await asyncio.gather(*coros)\r\n  File \"./anaconda3/envs/qqchat/lib/python3.10/site-packages/mirai/bot.py\", line 137, in startup\r\n    await self._adapter.login(self.qq)\r\n  File \"./anaconda3/envs/qqchat/lib/python3.10/site-packages/mirai/adapters/base.py\", line 35, in wrapped\r\n    return await func(self, *args, **kwargs)\r\n  File \"./anaconda3/envs/qqchat/lib/python3.10/site-packages/mirai/adapters/websocket.py\", line 187, in login\r\n    self.connection = await connect(self.host_name, extra_headers=headers)\r\n  File \"./anaconda3/envs/qqchat/lib/python3.10/site-packages/websockets/legacy/client.py\", line 647, in __await_impl_timeout__\r\n    return await self.__await_impl__()\r\n  File \"./anaconda3/envs/qqchat/lib/python3.10/site-packages/websockets/legacy/client.py\", line 651, in __await_impl__\r\n    _transport, _protocol = await self._create_connection()\r\n  File \"./anaconda3/envs/qqchat/lib/python3.10/asyncio/base_events.py\", line 1084, in create_connection\r\n    raise OSError('Multiple exceptions: {}'.format(\r\nOSError: Multiple exceptions: [Errno 61] Connect call failed ('::1', 8080, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8080)\r\n[2024-01-19 15:21:37.054] main.py (324) - [ERROR] : 捕捉到未知异常:Multiple exceptions: [Errno 61] Connect call failed ('::1', 8080, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8080), 请前往 https://github.com/RockChinQ/QChatGPT/issues 查找或提issue\r\nException in thread Thread-2 (run_bot_wrapper):\r\nTraceback (most recent call last):\r\n  File \"./anaconda3/envs/qqchat/lib/python3.10/threading.py\", line 1016, in _bootstrap_inner\r\n    self.run()\r\n  File \"./anaconda3/envs/qqchat/lib/python3.10/threading.py\", line 953, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"./Downloads/QChatGPT-master/main.py\", line 327, in run_bot_wrapper\r\n    raise e\r\n  File \"./Downloads/QChatGPT-master/main.py\", line 287, in run_bot_wrapper\r\n    qqbot.adapter.run_sync()\r\n  File \"./Downloads/QChatGPT-master/pkg/qqbot/sources/yirimirai.py\", line 120, in run_sync\r\n    loop.run_until_complete(MiraiRunner(self.bot)._run())\r\n  File \"./anaconda3/envs/qqchat/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\r\n    return future.result()\r\n  File \"./anaconda3/envs/qqchat/lib/python3.10/site-packages/mirai/bot.py\", line 240, in _run\r\n    await self.startup()\r\n  File \"./anaconda3/envs/qqchat/lib/python3.10/site-packages/mirai/bot.py\", line 228, in startup\r\n    await asyncio.gather(*coros)\r\n  File \"./anaconda3/envs/qqchat/lib/python3.10/site-packages/mirai/bot.py\", line 137, in startup\r\n    await self._adapter.login(self.qq)\r\n  File \"./anaconda3/envs/qqchat/lib/python3.10/site-packages/mirai/adapters/base.py\", line 35, in wrapped\r\n    return await func(self, *args, **kwargs)\r\n  File \"./anaconda3/envs/qqchat/lib/python3.10/site-packages/mirai/adapters/websocket.py\", line 187, in login\r\n    self.connection = await connect(self.host_name, extra_headers=headers)\r\n  File \"./anaconda3/envs/qqchat/lib/python3.10/site-packages/websockets/legacy/client.py\", line 647, in __await_impl_timeout__\r\n    return await self.__await_impl__()\r\n  File \"./anaconda3/envs/qqchat/lib/python3.10/site-packages/websockets/legacy/client.py\", line 651, in __await_impl__\r\n    _transport, _protocol = await self._create_connection()\r\n  File \"./anaconda3/envs/qqchat/lib/python3.10/asyncio/base_events.py\", line 1084, in create_connection\r\n    raise OSError('Multiple exceptions: {}'.format(\r\nOSError: Multiple exceptions: [Errno 61] Connect call failed ('::1', 8080, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8080)\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "TedSIWEILIU",
      "author_type": "User",
      "created_at": "2024-01-19T07:26:07Z",
      "updated_at": "2024-01-22T12:29:38Z",
      "closed_at": "2024-01-22T12:29:38Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/668/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/668",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/668",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:05.305890",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "#68",
          "created_at": "2024-01-19T07:29:41Z"
        }
      ]
    },
    {
      "issue_number": 664,
      "title": "[Feature]: default 命令判断权限的错误逻辑",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n```python\r\n\r\n58 | class DefaultSetCommand(aamgr.AbstractCommandNode):\r\n59 | @classmethod\r\n60 | def process(cls, ctx: aamgr.Context) -> tuple[bool, list]:\r\n61 | reply = []\r\n62 |  \r\n63 | if len(ctx.crt_params) == 0:\r\n64 | reply = [\"[bot]err: 请指定情景预设名称\"]\r\n65 | elif len(ctx.crt_params) > 0:\r\n66 | import pkg.openai.dprompt as dprompt\r\n67 | try:\r\n68 | full_name = dprompt.mode_inst().set_using_name(ctx.crt_params[0])\r\n69 | reply = [\"[bot]已设置默认情景预设为:{}\".format(full_name)]\r\n70 | except Exception as e:\r\n71 | reply = [\"[bot]err: {}\".format(e)]\r\n72 | else:\r\n73 | reply = [\"[bot]err: 仅管理员可设置默认情景预设\"]\r\n74 |  \r\n75 | return True, reply\r\n```\r\n\r\n72 73 行可能是不可到达的",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-01-15T13:36:15Z",
      "updated_at": "2024-01-17T17:02:34Z",
      "closed_at": "2024-01-17T17:02:34Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/664/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/664",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/664",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:05.508967",
      "comments": []
    },
    {
      "issue_number": 663,
      "title": "[Bug]:  !cfg 正常 !~ 报错 ",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\ngo-cqhttp\n\n### 系统环境\n\nUbuntu Server 20.04 LTS 64bit 中国大陆\n\n### Python环境\n\nPython 3.11\n\n### QChatGPT版本\n\nv2.6.9\n\n### 异常情况\n\n!cfg 命令可以正常使用，!~报错\n\n### 日志信息\n\n[2024-01-15 17:47:02.919] /home/lighthouse/QChatGPT-2.6.7/pkg/qqbot/command.py (11) - [INFO] :\r\n[person_1042075652]发起指令:!~ prompt_submit_len...\r\n[2024-01-15 17:47:02.919] /home/lighthouse/QChatGPT-2.6.7/pkg/qqbot/manager.py (396) - [INFO] :\r\n通知管理员:person_1042075652指令执行失败:invalid syntax (<string>, line 1)\r\n[2024-01-15 17:47:02.921] /home/lighthouse/QChatGPT-2.6.7/pkg/qqbot/command.py (46) - [ERROR] :\r\ninvalid syntax (<string>, line 1)\r\nTraceback (most recent call last):\r\n  File \"/home/lighthouse/QChatGPT-2.6.7/pkg/qqbot/command.py\", line 39, in process_command\r\n    reply = cmdmgr.execute(context)\r\n            ^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/lighthouse/QChatGPT-2.6.7/pkg/qqbot/cmds/aamgr.py\", line 267, in execute\r\n    execed, reply = node['cls'].process(ctx)\r\n                    ^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/lighthouse/QChatGPT-2.6.7/pkg/qqbot/cmds/system/cconfig.py\", line 90, in process\r\n    return True, config_operation(ctx.command, ctx.params)\r\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/lighthouse/QChatGPT-2.6.7/pkg/qqbot/cmds/system/cconfig.py\", line 57, in config_operation\r\n    cfg_value = eval(cfg_value)\r\n                ^^^^^^^^^^^^^^^\r\n  File \"<string>\", line 1\r\n    prompt_submit_length 1024\r\n                         ^^^^\r\nSyntaxError: invalid syntax\r\n[2024-01-15 17:47:02.922] /home/lighthouse/QChatGPT-2.6.7/pkg/qqbot/process.py (156) - [INFO] :\r\n回复[person_1042075652]文字消息:[bot]err:invalid syntax (<string>, line 1)\r\n[2024-01-15 17:47:09.582] /usr/local/lib/python3.11/dist-packages/nakuru/application.py (95) - [INFO] :\r\nEvent: handling a event: FriendMessage\r\n[2024-01-15 17:47:09.584] /home/lighthouse/QChatGPT-2.6.7/pkg/qqbot/command.py (11) - [INFO] :\r\n[person_1042075652]发起指令:!~\r\n[2024-01-15 17:47:09.585] /home/lighthouse/QChatGPT-2.6.7/pkg/qqbot/process.py (156) - [INFO] :\r\n回复[person_1042075652]文字消息:[bot]err:指令不存在：cfg\r\n[2024-01-15 17:47:16.021] /usr/local/lib/python3.11/dist-packages/nakuru/application.py (95) - [INFO] :\r\nEvent: handling a event: FriendMessage\r\n[2024-01-15 17:47:16.023] /home/lighthouse/QChatGPT-2.6.7/pkg/qqbot/command.py (11) - [INFO] :\r\n[person_1042075652]发起指令:!cfg\r\n[2024-01-15 17:47:16.023] /home/lighthouse/QChatGPT-2.6.7/pkg/qqbot/process.py (156) - [INFO] :\r\n回复[person_1042075652]文字消息:[bot]err:请输入!cmd cfg查看使用方法\n\n### 启用的插件\n\n#1 Switcher \r\n快捷切换使用的模型\r\nv0.2.0\r\n作者: RockChinQ\r\n\r\n#2 Webwlkr \r\n基于GPT的函数调用能力，为QChatGPT提供联网功能\r\nv0.1.1\r\n作者: RockChinQ\r\n\r\n#3 chat_voice \r\n让机器人用语音输出\r\nv1.4\r\n作者: oliverkirk-sudo",
      "state": "closed",
      "author": "Vlfx1",
      "author_type": "User",
      "created_at": "2024-01-15T09:54:01Z",
      "updated_at": "2024-01-15T12:14:35Z",
      "closed_at": "2024-01-15T12:14:35Z",
      "labels": [
        "bug?",
        "pd: Need reproducing"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/663/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/663",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/663",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:05.508984",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "～ 后面不用加空格，比如： `!~all` 查看所有配置项",
          "created_at": "2024-01-15T12:10:04Z"
        },
        {
          "author": "Vlfx1",
          "body": "好的，可以使用了",
          "created_at": "2024-01-15T12:14:00Z"
        }
      ]
    },
    {
      "issue_number": 660,
      "title": "[Feature]: 优化 v2 审计 API 调用逻辑",
      "body": "### 这是一个？\r\n\r\n现有功能优化\r\n\r\n### 详细描述\r\n\r\n- [x] 允许用户关闭审计功能\r\n- [x] 删除 v1 审计 API 调用逻辑\r\n- [ ] ~~使 instance_id 与所在目录绑定~~",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-01-12T09:04:48Z",
      "updated_at": "2024-01-12T12:18:32Z",
      "closed_at": "2024-01-12T12:18:32Z",
      "labels": [
        "eh: Improve"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/660/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/660",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/660",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:05.758770",
      "comments": []
    },
    {
      "issue_number": 658,
      "title": "[Feature]: 删除已被弃用的模型",
      "body": "### 这是一个？\n\n现有功能优化\n\n### 详细描述\n\n删除 text-davinci-003 等已被弃用的模型",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-01-11T17:59:44Z",
      "updated_at": "2024-01-12T06:49:48Z",
      "closed_at": "2024-01-12T06:49:48Z",
      "labels": [
        "eh: Improve",
        "m: Provider"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/658/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/658",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/658",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:05.758786",
      "comments": []
    },
    {
      "issue_number": 657,
      "title": "[Bug]: resend命令失效",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\nNone\n\n### 系统环境\n\n/\n\n### Python环境\n\n/\n\n### QChatGPT版本\n\n/\n\n### 异常情况\n\n[bot]err:'module' object is not subscriptable\n\n### 日志信息\n\n_No response_\n\n### 启用的插件\n\n_No response_",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2024-01-11T17:12:44Z",
      "updated_at": "2024-01-12T06:40:09Z",
      "closed_at": "2024-01-12T06:40:09Z",
      "labels": [
        "bug?",
        "m: Session"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/657/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/657",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/657",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:05.758793",
      "comments": []
    },
    {
      "issue_number": 653,
      "title": "[Bug]: 添加了QChatAIPaint插件后主程序无法启动（或许我应该提交在插件的issue下？）",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\ngo-cqhttp\n\n### 系统环境\n\nproot装的Ubuntu\n\n### Python环境\n\n3.10\n\n### QChatGPT版本\n\n2.6.9\n\n### 异常情况\n\n在跑起来之后通过机器人命令安装了QChatAIPaint插件，然后！reload后台日志机器人报错但未停止响应，但是与之对话无反应。配置好插件的config并安装了插件所需的pydantic==1.8.2之后主程序启动就报错\n\n### 日志信息\n\nTraceback (most recent call last):\r\n  File \"/root/QChatGPT/main.py\", line 57, in <module>\r\n    from pkg.utils.log import init_runtime_log_file, reset_logging\r\n  File \"/root/QChatGPT/pkg/utils/log.py\", line 6, in <module>\r\n    from . import context\r\n  File \"/root/QChatGPT/pkg/utils/context.py\", line 7, in <module>\r\n    from ..openai import manager as openai_mgr\r\n  File \"/root/QChatGPT/pkg/openai/manager.py\", line 3, in <module>\r\n    import openai\r\n  File \"/usr/local/lib/python3.10/dist-packages/openai/__init__.py\", line 8, in <module>\r\n    from . import types\r\n  File \"/usr/local/lib/python3.10/dist-packages/openai/types/__init__.py\", line 5, in <module>\r\n    from .edit import Edit as Edit\r\n  File \"/usr/local/lib/python3.10/dist-packages/openai/types/edit.py\", line 6, in <module>\r\n    from .._models import BaseModel\r\n  File \"/usr/local/lib/python3.10/dist-packages/openai/_models.py\", line 33, in <module>\r\n    from ._utils import (\r\n  File \"/usr/local/lib/python3.10/dist-packages/openai/_utils/__init__.py\", line 2, in <module>\r\n    from ._utils import flatten as flatten\r\n  File \"/usr/local/lib/python3.10/dist-packages/openai/_utils/_utils.py\", line 24, in <module>\r\n    from .._compat import parse_date as parse_date\r\n  File \"/usr/local/lib/python3.10/dist-packages/openai/_compat.py\", line 55, in <module>\r\n    from pydantic.typing import is_union as is_union\r\nImportError: cannot import name 'is_union' from 'pydantic.typing' (/usr/local/lib/python3.10/dist-packages/pydantic/typing.py)\r\n\n\n### 启用的插件\n\nQChatAIPaint\r\nWebwlkrPlugin",
      "state": "closed",
      "author": "youyi0218",
      "author_type": "User",
      "created_at": "2024-01-01T09:01:10Z",
      "updated_at": "2024-01-01T09:02:15Z",
      "closed_at": "2024-01-01T09:02:15Z",
      "labels": [
        "bug?",
        "External Plugin"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/653/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/653",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/653",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:05.758798",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "插件问题前往插件仓库提交issue",
          "created_at": "2024-01-01T09:02:05Z"
        }
      ]
    },
    {
      "issue_number": 645,
      "title": "[Bug]: gemini pro 报错",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\ngo-cqhttp\n\n### 系统环境\n\nubuntu\n\n### Python环境\n\npy310\n\n### 异常情况\n\n调用oneapi gemini pro返回数据有问题\r\nError code: 400 - {'error': {'message': \"* GenerateContentRequest.contents[0].parts[0].data: required oneof field 'data' must have one initialized field\\n (request id: 20231222105122808167575ttJofmwT)\", 'type': '', 'param': '', 'code': 400}}\n\n### 日志信息\n\nstderr: [37m[2023-12-22 10:51:24.126] _client.py (1013) - [INFO] : HTTP Request: POST http://127.0.0.1:3005/v1/chat/completions \"HTTP/1.1 400 Bad Request\"[0m\r\nstderr: [37m[2023-12-22 10:51:24.128] manager.py (392) - [INFO] : 通知管理员:person_840600000000API调用参数错误:Error code: 400 - {'error': {'message': \"* GenerateContentRequest.contents[0].parts[0].data: required oneof field 'data' must have one initialized field\\n (request id: 20231222105122808167575ttJofmwT)\", 'type': '', 'param': '', 'code': 400}}\r\nstderr: [0m",
      "state": "closed",
      "author": "jsxupeng",
      "author_type": "User",
      "created_at": "2023-12-22T02:54:27Z",
      "updated_at": "2023-12-30T08:28:54Z",
      "closed_at": "2023-12-30T08:28:54Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 12,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/645/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/645",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/645",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:05.945295",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "#646  开一下调试模式，重试，然后把异常情况附近的输出都贴出来",
          "created_at": "2023-12-22T02:57:56Z"
        },
        {
          "author": "jsxupeng",
          "body": "是不是我调用方式不对？",
          "created_at": "2023-12-22T03:08:26Z"
        },
        {
          "author": "RockChinQ",
          "body": "不管你调用方式对不对，你都得把你详细日志给贴出来我才能给你排查啊",
          "created_at": "2023-12-22T03:09:31Z"
        },
        {
          "author": "jsxupeng",
          "body": "贴在#646里了 ",
          "created_at": "2023-12-22T03:11:46Z"
        },
        {
          "author": "RockChinQ",
          "body": "```\r\n\r\n---------------------------\r\nstderr: [37m[2023-12-22 11:02:00.988] message.py (27) - [INFO] : [person_840651001]发送消息:你好[0m\r\nstderr: [32m[2023-12-22 11:02:00.988] host.py (445) - [DEBUG] : 触发事件: session_first_message_received (11)[0m\r\nstderr: [32m[2023-12-22 11:02:00.988] host.py (487) - [DEBU",
          "created_at": "2023-12-22T03:12:48Z"
        }
      ]
    },
    {
      "issue_number": 648,
      "title": "[Bug]: 反代\"HTTP/1.1 400 Bad Request\"报错",
      "body": "### 部署方式\r\n\r\n手动部署\r\n\r\n### 登录框架\r\n\r\nNone\r\n\r\n### 系统环境\r\n\r\ncentos\r\n\r\n### Python环境\r\n\r\npython3.10\r\n\r\n### QChatGPT版本\r\n\r\nv2.6.9\r\n\r\n### 异常情况\r\n\r\n机器人提示：\r\n会话token超限，已自动重置，请重新发送消息\r\n日志提示：\r\n[2023-12-23 01:22:04.277] _client.py (1013) - [INFO] : HTTP Request: POST https://api.openai.rockchin.top/v1/chat/completions \"HTTP/1.1 400 Bad Request\"\r\n[2023-12-23 01:22:04.281] process.py (153) - [INFO] : 回复[person_1@@@@@1]文字消息:[bot]会话token超限，已自动重置，请重新发送消息\r\n\r\n\r\n\r\n### 日志信息\r\n\r\n```\r\n[2023-12-23 01:44:48.810] v2.py (28) - [DEBUG] : basic_info: {'host_id': 'host_bf01c48f-d9f2-4bdb-8439-af220b5754f7', 'instance_id': 'instance_a9a90f38-3193-4331-972a-8089157ae361', 'semantic_version': 'v2.6.9', 'platform': 'linux'}, runtime_info: {'admin_id': '1@@@@1', 'msg_source': 'yirimirai'}\r\n[2023-12-23 01:44:48.814] dprompt.py (29) - [DEBUG] : prompts: {'default': [{'role': 'system', 'content': '如果我之后想获取帮助，请你说“输入!help获取帮助”'}], 'default.json': [{'role': 'system', 'content': 'You are a helpful assistant. 如果我需要帮助，你要说“输入!help获得帮助”'}, {'role': 'assistant', 'content': '好的，我是一个能干的AI助手。 如果你需要帮助，我会说“输入!help获得帮助”'}]}\r\n[2023-12-23 01:44:48.816] aamgr.py (297) - [DEBUG] : walk: pkg.qqbot.cmds, path: ['/root/openaigpt3/QChatGPT-2.6.8/pkg/qqbot/cmds']\r\n[2023-12-23 01:44:48.820] aamgr.py (297) - [DEBUG] : walk: pkg.qqbot.cmds.funcs, path: ['/root/openaigpt3/QChatGPT-2.6.8/pkg/qqbot/cmds/funcs']\r\n[2023-12-23 01:44:48.823] aamgr.py (191) - [DEBUG] : cls: <class 'pkg.qqbot.cmds.funcs.draw.DrawCommand'>, name: draw, parent: None\r\n[2023-12-23 01:44:48.826] aamgr.py (191) - [DEBUG] : cls: <class 'pkg.qqbot.cmds.funcs.func.FuncCommand'>, name: func, parent: None\r\n[2023-12-23 01:44:48.829] aamgr.py (297) - [DEBUG] : walk: pkg.qqbot.cmds.plugin, path: ['/root/openaigpt3/QChatGPT-2.6.8/pkg/qqbot/cmds/plugin']\r\n[2023-12-23 01:44:48.833] aamgr.py (191) - [DEBUG] : cls: <class 'pkg.qqbot.cmds.plugin.plugin.PluginCommand'>, name: plugin, parent: None\r\n[2023-12-23 01:44:48.834] aamgr.py (191) - [DEBUG] : cls: <class 'pkg.qqbot.cmds.plugin.plugin.PluginGetCommand'>, name: get, parent: <class 'pkg.qqbot.cmds.plugin.plugin.PluginCommand'>\r\n[2023-12-23 01:44:48.835] aamgr.py (191) - [DEBUG] : cls: <class 'pkg.qqbot.cmds.plugin.plugin.PluginUpdateCommand'>, name: update, parent: <class 'pkg.qqbot.cmds.plugin.plugin.PluginCommand'>\r\n[2023-12-23 01:44:48.837] aamgr.py (191) - [DEBUG] : cls: <class 'pkg.qqbot.cmds.plugin.plugin.PluginDelCommand'>, name: del, parent: <class 'pkg.qqbot.cmds.plugin.plugin.PluginCommand'>\r\n[2023-12-23 01:44:48.838] aamgr.py (191) - [DEBUG] : cls: <class 'pkg.qqbot.cmds.plugin.plugin.PluginOnOffCommand'>, name: off, parent: <class 'pkg.qqbot.cmds.plugin.plugin.PluginCommand'>\r\n[2023-12-23 01:44:48.839] aamgr.py (191) - [DEBUG] : cls: <class 'pkg.qqbot.cmds.plugin.plugin.PluginOnOffCommand'>, name: on, parent: <class 'pkg.qqbot.cmds.plugin.plugin.PluginCommand'>\r\n[2023-12-23 01:44:48.843] aamgr.py (297) - [DEBUG] : walk: pkg.qqbot.cmds.session, path: ['/root/openaigpt3/QChatGPT-2.6.8/pkg/qqbot/cmds/session']\r\n[2023-12-23 01:44:48.846] aamgr.py (191) - [DEBUG] : cls: <class 'pkg.qqbot.cmds.session.default.DefaultCommand'>, name: default, parent: None\r\n[2023-12-23 01:44:48.848] aamgr.py (191) - [DEBUG] : cls: <class 'pkg.qqbot.cmds.session.default.DefaultSetCommand'>, name: set, parent: <class 'pkg.qqbot.cmds.session.default.DefaultCommand'>\r\n[2023-12-23 01:44:48.850] aamgr.py (191) - [DEBUG] : cls: <class 'pkg.qqbot.cmds.session.del.DelCommand'>, name: del, parent: None\r\n[2023-12-23 01:44:48.852] aamgr.py (191) - [DEBUG] : cls: <class 'pkg.qqbot.cmds.session.del.DelAllCommand'>, name: all, parent: <class 'pkg.qqbot.cmds.session.del.DelCommand'>\r\n[2023-12-23 01:44:48.854] aamgr.py (191) - [DEBUG] : cls: <class 'pkg.qqbot.cmds.session.delhst.DelHistoryCommand'>, name: delhst, parent: None\r\n[2023-12-23 01:44:48.856] aamgr.py (191) - [DEBUG] : cls: <class 'pkg.qqbot.cmds.session.delhst.DelAllHistoryCommand'>, name: all, parent: <class 'pkg.qqbot.cmds.session.delhst.DelHistoryCommand'>\r\n[2023-12-23 01:44:48.858] aamgr.py (191) - [DEBUG] : cls: <class 'pkg.qqbot.cmds.session.last.LastCommand'>, name: last, parent: None\r\n[2023-12-23 01:44:48.861] aamgr.py (191) - [DEBUG] : cls: <class 'pkg.qqbot.cmds.session.list.ListCommand'>, name: list, parent: None\r\n[2023-12-23 01:44:48.864] aamgr.py (191) - [DEBUG] : cls: <class 'pkg.qqbot.cmds.session.next.NextCommand'>, name: next, parent: None\r\n[2023-12-23 01:44:48.866] aamgr.py (191) - [DEBUG] : cls: <class 'pkg.qqbot.cmds.session.prompt.PromptCommand'>, name: prompt, parent: None\r\n[2023-12-23 01:44:48.869] aamgr.py (191) - [DEBUG] : cls: <class 'pkg.qqbot.cmds.session.resend.ResendCommand'>, name: resend, parent: None\r\n[2023-12-23 01:44:48.872] aamgr.py (191) - [DEBUG] : cls: <class 'pkg.qqbot.cmds.session.reset.ResetCommand'>, name: reset, parent: None\r\n[2023-12-23 01:44:48.875] aamgr.py (297) - [DEBUG] : walk: pkg.qqbot.cmds.system, path: ['/root/openaigpt3/QChatGPT-2.6.8/pkg/qqbot/cmds/system']\r\n[2023-12-23 01:44:48.879] aamgr.py (191) - [DEBUG] : cls: <class 'pkg.qqbot.cmds.system.cconfig.CfgCommand'>, name: cfg, parent: None\r\n[2023-12-23 01:44:48.881] aamgr.py (191) - [DEBUG] : cls: <class 'pkg.qqbot.cmds.system.cmd.CmdCommand'>, name: cmd, parent: None\r\n[2023-12-23 01:44:48.884] aamgr.py (191) - [DEBUG] : cls: <class 'pkg.qqbot.cmds.system.help.HelpCommand'>, name: help, parent: None\r\n[2023-12-23 01:44:48.887] aamgr.py (191) - [DEBUG] : cls: <class 'pkg.qqbot.cmds.system.reload.ReloadCommand'>, name: reload, parent: None\r\n[2023-12-23 01:44:48.889] aamgr.py (191) - [DEBUG] : cls: <class 'pkg.qqbot.cmds.system.update.UpdateCommand'>, name: update, parent: None\r\n[2023-12-23 01:44:48.892] aamgr.py (191) - [DEBUG] : cls: <class 'pkg.qqbot.cmds.system.usage.UsageCommand'>, name: usage, parent: None\r\n[2023-12-23 01:44:48.895] aamgr.py (191) - [DEBUG] : cls: <class 'pkg.qqbot.cmds.system.version.VersionCommand'>, name: version, parent: None\r\n[2023-12-23 01:44:48.896] aamgr.py (312) - [DEBUG] : {'draw': {'description': '使用DALL·E生成图片', 'usage': '!draw <图片提示语>', 'aliases': [], 'privilege': 1, 'parent': None, 'cls': <class 'pkg.qqbot.cmds.funcs.draw.DrawCommand'>, 'sub': []}, 'func': {'description': '管理内容函数', 'usage': '!func', 'aliases': [], 'privilege': 1, 'parent': None, 'cls': <class 'pkg.qqbot.cmds.funcs.func.FuncCommand'>, 'sub': []}, 'plugin': {'description': '插件管理', 'usage': '!plugin\\n!plugin get <插件仓库地址>\\n!plugin update\\n!plugin del <插件名>\\n!plugin on <插件名>\\n!plugin off <插件名>', 'aliases': [], 'privilege': 1, 'parent': None, 'cls': <class 'pkg.qqbot.cmds.plugin.plugin.PluginCommand'>, 'sub': ['get', 'update', 'del', 'off', 'on']}, 'plugin.get': {'description': '安装插件', 'usage': '!plugin get <插件仓库地址>', 'aliases': [], 'privilege': 2, 'parent': 'plugin', 'cls': <class 'pkg.qqbot.cmds.plugin.plugin.PluginGetCommand'>, 'sub': []}, 'plugin.update': {'description': '更新指定插件或全部插件', 'usage': '!plugin update', 'aliases': [], 'privilege': 2, 'parent': 'plugin', 'cls': <class 'pkg.qqbot.cmds.plugin.plugin.PluginUpdateCommand'>, 'sub': []}, 'plugin.del': {'description': '删除插件', 'usage': '!plugin del <插件名>', 'aliases': [], 'privilege': 2, 'parent': 'plugin', 'cls': <class 'pkg.qqbot.cmds.plugin.plugin.PluginDelCommand'>, 'sub': []}, 'plugin.off': {'description': '禁用指定插件', 'usage': '!plugin off <插件名>', 'aliases': [], 'privilege': 2, 'parent': 'plugin', 'cls': <class 'pkg.qqbot.cmds.plugin.plugin.PluginOnOffCommand'>, 'sub': []}, 'plugin.on': {'description': '启用指定插件', 'usage': '!plugin on <插件名>', 'aliases': [], 'privilege': 2, 'parent': 'plugin', 'cls': <class 'pkg.qqbot.cmds.plugin.plugin.PluginOnOffCommand'>, 'sub': []}, 'default': {'description': '操作情景预设', 'usage': '!default\\n!default set [指定情景预设为默认]', 'aliases': [], 'privilege': 1, 'parent': None, 'cls': <class 'pkg.qqbot.cmds.session.default.DefaultCommand'>, 'sub': ['set']}, 'default.set': {'description': '设置默认情景预设', 'usage': '!default set <情景预设名称>', 'aliases': [], 'privilege': 2, 'parent': 'default', 'cls': <class 'pkg.qqbot.cmds.session.default.DefaultSetCommand'>, 'sub': []}, 'del': {'description': '删除当前会话的历史记录', 'usage': '!del <序号>\\n!del all', 'aliases': [], 'privilege': 1, 'parent': None, 'cls': <class 'pkg.qqbot.cmds.session.del.DelCommand'>, 'sub': ['all']}, 'del.all': {'description': '删除当前会话的全部历史记录', 'usage': '!del all', 'aliases': [], 'privilege': 1, 'parent': 'del', 'cls': <class 'pkg.qqbot.cmds.session.del.DelAllCommand'>, 'sub': []}, 'delhst': {'description': '删除指定会话的所有历史记录', 'usage': '!delhst <会话名称>\\n!delhst all', 'aliases': [], 'privilege': 2, 'parent': None, 'cls': <class 'pkg.qqbot.cmds.session.delhst.DelHistoryCommand'>, 'sub': ['all']}, 'delhst.all': {'description': '删除所有会话的全部历史记录', 'usage': '!delhst all', 'aliases': [], 'privilege': 2, 'parent': 'delhst', 'cls': <class 'pkg.qqbot.cmds.session.delhst.DelAllHistoryCommand'>, 'sub': []}, 'last': {'description': '切换前一次对话', 'usage': '!last', 'aliases': [], 'privilege': 1, 'parent': None, 'cls': <class 'pkg.qqbot.cmds.session.last.LastCommand'>, 'sub': []}, 'list': {'description': '列出当前会话的所有历史记录', 'usage': '!list\\n!list [页数]', 'aliases': [], 'privilege': 1, 'parent': None, 'cls': <class 'pkg.qqbot.cmds.session.list.ListCommand'>, 'sub': []}, 'next': {'description': '切换后一次对话', 'usage': '!next', 'aliases': [], 'privilege': 1, 'parent': None, 'cls': <class 'pkg.qqbot.cmds.session.next.NextCommand'>, 'sub': []}, 'prompt': {'description': '获取当前会话的前文', 'usage': '!prompt', 'aliases': [], 'privilege': 1, 'parent': None, 'cls': <class 'pkg.qqbot.cmds.session.prompt.PromptCommand'>, 'sub': []}, 'resend': {'description': '重新获取上一次问题的回复', 'usage': '!resend', 'aliases': [], 'privilege': 1, 'parent': None, 'cls': <class 'pkg.qqbot.cmds.session.resend.ResendCommand'>, 'sub': []}, 'reset': {'description': '重置当前会话', 'usage': '!reset', 'aliases': [], 'privilege': 1, 'parent': None, 'cls': <class 'pkg.qqbot.cmds.session.reset.ResetCommand'>, 'sub': []}, 'cfg': {'description': '配置项管理', 'usage': '!cfg <配置项> [配置值]\\n!cfg all', 'aliases': [], 'privilege': 2, 'parent': None, 'cls': <class 'pkg.qqbot.cmds.system.cconfig.CfgCommand'>, 'sub': []}, 'cmd': {'description': '显示指令列表', 'usage': '!cmd\\n!cmd <指令名称>', 'aliases': [], 'privilege': 1, 'parent': None, 'cls': <class 'pkg.qqbot.cmds.system.cmd.CmdCommand'>, 'sub': []}, 'help': {'description': '显示自定义的帮助信息', 'usage': '!help', 'aliases': [], 'privilege': 1, 'parent': None, 'cls': <class 'pkg.qqbot.cmds.system.help.HelpCommand'>, 'sub': []}, 'reload': {'description': '执行热重载', 'usage': '!reload', 'aliases': [], 'privilege': 2, 'parent': None, 'cls': <class 'pkg.qqbot.cmds.system.reload.ReloadCommand'>, 'sub': []}, 'update': {'description': '更新程序', 'usage': '!update', 'aliases': [], 'privilege': 2, 'parent': None, 'cls': <class 'pkg.qqbot.cmds.system.update.UpdateCommand'>, 'sub': []}, 'usage': {'description': '获取使用情况', 'usage': '!usage', 'aliases': [], 'privilege': 1, 'parent': None, 'cls': <class 'pkg.qqbot.cmds.system.usage.UsageCommand'>, 'sub': []}, 'version': {'description': '查看版本信息', 'usage': '!version', 'aliases': [], 'privilege': 1, 'parent': None, 'cls': <class 'pkg.qqbot.cmds.system.version.VersionCommand'>, 'sub': []}}\r\n[2023-12-23 01:44:48.899] main.py (257) - [DEBUG] : 设置反向代理: https://api-gpt.xfjy.in/v1\r\n[2023-12-23 01:44:48.901] manager.py (37) - [DEBUG] : SQL: (\"\\n        create table if not exists `sessions` (\\n            `id` INTEGER PRIMARY KEY AUTOINCREMENT,\\n            `name` varchar(255) not null,\\n            `type` varchar(255) not null,\\n            `number` bigint not null,\\n            `create_timestamp` bigint not null,\\n            `last_interact_timestamp` bigint not null,\\n            `status` varchar(255) not null default 'on_going',\\n            `default_prompt` text not null default '',\\n            `prompt` text not null,\\n            `token_counts` text not null default '[]'\\n        )\\n        \",)\r\n[2023-12-23 01:44:48.903] manager.py (37) - [DEBUG] : SQL: (\"PRAGMA table_info('sessions')\",)\r\n[2023-12-23 01:44:48.905] manager.py (37) - [DEBUG] : SQL: ('\\n        create table if not exists `account_fee`(\\n            `id` INTEGER PRIMARY KEY AUTOINCREMENT,\\n            `key_md5` varchar(255) not null,\\n            `timestamp` bigint not null,\\n            `fee` DECIMAL(12,6) not null\\n        )\\n        ',)\r\n[2023-12-23 01:44:48.906] manager.py (37) - [DEBUG] : SQL: ('\\n        create table if not exists `account_usage`(\\n            `id` INTEGER PRIMARY KEY AUTOINCREMENT,\\n            `json` text not null\\n        )\\n        ',)\r\n[2023-12-23 01:44:48.907] keymgr.py (78) - [DEBUG] : 使用api-key:default\r\n[2023-12-23 01:44:48.909] manager.py (37) - [DEBUG] : SQL: ('\\n        select `json` from `account_usage` order by id desc limit 1\\n        ',)\r\n[2023-12-23 01:44:48.914] _config.py (78) - [DEBUG] : load_ssl_context verify=True cert=None trust_env=True http2=False\r\n[2023-12-23 01:44:48.922] _config.py (144) - [DEBUG] : load_verify_locations cafile='/root/python3.12/lib/python3.10/site-packages/certifi/cacert.pem'\r\n[2023-12-23 01:44:48.974] manager.py (37) - [DEBUG] : SQL: ('\\n        select `name`, `type`, `number`, `create_timestamp`, `last_interact_timestamp`, `prompt`, `status`, `default_prompt`, `token_counts`\\n        from `sessions` where `last_interact_timestamp` > 1703265888\\n        ',)\r\n[2023-12-23 01:44:48.976] session.py (67) - [DEBUG] : 加载session: person_1@@@@1\r\n[2023-12-23 01:44:48.978] session.py (157) - [DEBUG] : prompt is: [{'role': 'system', 'content': '如果我之后想获取帮助，请你说“输入!help获取帮助”'}]\r\n[2023-12-23 01:44:48.979] manager.py (114) - [DEBUG] : Use adapter:yirimirai\r\n[2023-12-23 01:44:49.032] manager.py (242) - [INFO] : 加载禁用列表: person: [2854196310], group: [204785790, 691226829]\r\n[2023-12-23 01:44:49.034] host.py (120) - [DEBUG] : 加载插件\r\n[2023-12-23 01:44:49.037] host.py (92) - [DEBUG] : 扫描插件包: plugins/WebwlkrPlugin\r\n[2023-12-23 01:44:49.041] host.py (100) - [DEBUG] : 扫描插件模块: plugins/WebwlkrPlugin/main.py\r\n[2023-12-23 01:44:49.770] models.py (295) - [INFO] : 插件注册完成: n='Webwlkr', d='基于GPT的函数调用能力，为QChatGPT提供联网功能', v=0.1.1, a='RockChinQ' (<class 'plugins.WebwlkrPlugin.main.WebwlkrPlugin'>)\r\n[2023-12-23 01:44:49.772] host.py (106) - [DEBUG] : 加载模块: plugins/WebwlkrPlugin/main.py 成功\r\n[2023-12-23 01:44:49.773] host.py (100) - [DEBUG] : 扫描插件模块: plugins/WebwlkrPlugin/mux.py\r\n[2023-12-23 01:44:49.775] host.py (106) - [DEBUG] : 加载模块: plugins/WebwlkrPlugin/mux.py 成功\r\n[2023-12-23 01:44:49.776] host.py (92) - [DEBUG] : 扫描插件包: plugins/WebwlkrPlugin/sites\r\n[2023-12-23 01:44:49.779] host.py (92) - [DEBUG] : 扫描插件包: plugins/WebwlkrPlugin/sites/github\r\n[2023-12-23 01:44:49.782] host.py (100) - [DEBUG] : 扫描插件模块: plugins/WebwlkrPlugin/sites/github/github_repo_adapter.py\r\n[2023-12-23 01:44:49.785] host.py (106) - [DEBUG] : 加载模块: plugins/WebwlkrPlugin/sites/github/github_repo_adapter.py 成功\r\n[2023-12-23 01:44:49.786] host.py (100) - [DEBUG] : 扫描插件模块: plugins/WebwlkrPlugin/sites/github/github_user_adapter.py\r\n[2023-12-23 01:44:49.789] host.py (106) - [DEBUG] : 加载模块: plugins/WebwlkrPlugin/sites/github/github_user_adapter.py 成功\r\n[2023-12-23 01:44:49.790] host.py (100) - [DEBUG] : 扫描插件模块: plugins/WebwlkrPlugin/sites/model.py\r\n[2023-12-23 01:44:49.791] host.py (106) - [DEBUG] : 加载模块: plugins/WebwlkrPlugin/sites/model.py 成功\r\n[2023-12-23 01:44:49.793] host.py (100) - [DEBUG] : 扫描插件模块: plugins/WebwlkrPlugin/webpilot.py\r\n[2023-12-23 01:44:49.794] host.py (106) - [DEBUG] : 加载模块: plugins/WebwlkrPlugin/webpilot.py 成功\r\n[2023-12-23 01:44:49.796] host.py (124) - [DEBUG] : {'Webwlkr': {'name': 'Webwlkr', 'description': '基于GPT的函数调用能力，为QChatGPT提供联网功能', 'version': '0.1.1', 'author': 'RockChinQ', 'hooks': {}, 'path': 'plugins/WebwlkrPlugin/main.py', 'enabled': True, 'instance': None, 'class': <class 'plugins.WebwlkrPlugin.main.WebwlkrPlugin'>}}\r\n[2023-12-23 01:44:49.797] switch.py (50) - [DEBUG] : 加载开关数据\r\n[2023-12-23 01:44:49.799] settings.py (46) - [DEBUG] : 加载plugins/settings.json数据\r\n[2023-12-23 01:44:49.800] settings.py (98) - [INFO] : 已全局启用内容函数。\r\n[2023-12-23 01:44:49.801] host.py (134) - [DEBUG] : registered plugins: {'Webwlkr': {'name': 'Webwlkr', 'description': '基于GPT的函数调用能力，为QChatGPT提供联网功能', 'version': '0.1.1', 'author': 'RockChinQ', 'hooks': {}, 'path': 'plugins/WebwlkrPlugin/main.py', 'enabled': True, 'instance': None, 'class': <class 'plugins.WebwlkrPlugin.main.WebwlkrPlugin'>}}\r\n[2023-12-23 01:44:49.803] host.py (137) - [DEBUG] : registered content functions: [{'description': 'Call this function to search about the question before you answer any questions.\\n- Do not search through google.com at any time.\\n- If you need to search somthing, visit https://www.sogou.com/web?query=<something>.\\n- If user ask you to open a url (start with http:// or https://), visit it directly.\\n- Summary the plain content result by yourself, DO NOT directly output anything in the result you got.', 'parameters': {'type': 'object', 'required': ['url', 'brief_len'], 'properties': {'url': {'type': 'string', 'description': 'url to visit'}, 'brief_len': {'type': 'integer', 'description': 'max length of the plain text content, recommend 1024-4096, prefer 4096'}}}, 'name': 'Webwlkr-access_the_web', 'enabled': True}]\r\n[2023-12-23 01:44:49.804] host.py (138) - [DEBUG] : function instance map: {'Webwlkr-access_the_web': <function WebwlkrPlugin._ at 0x7fe51d6b8f70>}\r\n[2023-12-23 01:44:49.805] host.py (146) - [DEBUG] : 初始化插件\r\n[2023-12-23 01:44:49.810] host.py (163) - [INFO] : 以下插件已初始化: Webwlkr\r\n[2023-12-23 01:44:49.812] main.py (286) - [DEBUG] : 使用账号: 1********8\r\n[2023-12-23 01:44:49.813] selector_events.py (54) - [DEBUG] : Using selector: EpollSelector\r\n[2023-12-23 01:44:49.825] protocol.py (256) - [DEBUG] : = connection is CONNECTING\r\n[2023-12-23 01:44:49.829] client.py (115) - [DEBUG] : > GET /all HTTP/1.1\r\n[2023-12-23 01:44:49.830] client.py (117) - [DEBUG] : > Host: localhost:1212\r\n[2023-12-23 01:44:49.832] client.py (117) - [DEBUG] : > Upgrade: websocket\r\n[2023-12-23 01:44:49.833] client.py (117) - [DEBUG] : > Connection: Upgrade\r\n[2023-12-23 01:44:49.834] client.py (117) - [DEBUG] : > Sec-WebSocket-Key: zi2KLxDOQzw8X7n3LRP8tA==\r\n[2023-12-23 01:44:49.836] client.py (117) - [DEBUG] : > Sec-WebSocket-Version: 13\r\n[2023-12-23 01:44:49.837] client.py (117) - [DEBUG] : > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits\r\n[2023-12-23 01:44:49.838] client.py (117) - [DEBUG] : > verifyKey: yirimirai\r\n[2023-12-23 01:44:49.840] client.py (117) - [DEBUG] : > qq: 1********8\r\n[2023-12-23 01:44:49.841] client.py (117) - [DEBUG] : > User-Agent: Python/3.10 websockets/12.0\r\n[2023-12-23 01:44:49.850] client.py (144) - [DEBUG] : < HTTP/1.1 101 Switching Protocols\r\n[2023-12-23 01:44:49.852] client.py (146) - [DEBUG] : < Upgrade: websocket\r\n[2023-12-23 01:44:49.853] client.py (146) - [DEBUG] : < Connection: Upgrade\r\n[2023-12-23 01:44:49.855] client.py (146) - [DEBUG] : < Sec-WebSocket-Accept: WXQCQOR9SQIXIIWxcR6D4cQsDII=\r\n[2023-12-23 01:44:49.856] protocol.py (357) - [DEBUG] : = connection is OPEN\r\n[2023-12-23 01:44:49.859] protocol.py (1172) - [DEBUG] : < TEXT '{\"syncId\":\"\",\"data\":{\"code\":0,\"session\":\"rjJRkHK5\"}}' [52 bytes]\r\n2023-12-23 01:44:49 - INFO     [WebSocket] 成功登录到账号1********8。\r\n[2023-12-23 01:44:49.959] websocket.py (194) - [INFO] : [WebSocket] 成功登录到账号1********8。\r\n2023-12-23 01:44:49 - INFO     [WebSocket] 机器人开始运行。按 Ctrl + C 停止。\r\n[2023-12-23 01:44:49.962] websocket.py (250) - [INFO] : [WebSocket] 机器人开始运行。按 Ctrl + C 停止。\r\n[2023-12-23 01:45:00.003] ratelimit.py (58) - [DEBUG] : 清空当前分钟的对话次数\r\n[2023-12-23 01:45:01.824] main.py (355) - [INFO] : QQ: 1********8, MAH: localhost:1212\r\n[2023-12-23 01:45:01.827] main.py (356) - [CRITICAL] : 程序启动完成,如长时间未显示 \"成功登录到账号xxxxx\" ,并且不回复消息,解决办法(请勿到群里问): https://github.com/RockChinQ/QChatGPT/issues/37\r\n[2023-12-23 01:45:02.163] protocol.py (1172) - [DEBUG] : < TEXT '{\"syncId\":\"-1\",\"data\":{\"type\":\"FriendMessage\",\"...丁丁\",\"remark\":\"丶木子丁丁\"}}}' [241 bytes]\r\n[2023-12-23 01:45:02.233] host.py (514) - [DEBUG] : 触发事件: person_message_received (0)\r\n[2023-12-23 01:45:02.235] host.py (564) - [DEBUG] : 事件 person_message_received (0) 处理完毕，返回值: {}\r\n[2023-12-23 01:45:02.237] session.py (125) - [DEBUG] : person_1@@@@1,lock acquire,<unlocked _thread.lock object at 0x7fe52817b040>\r\n[2023-12-23 01:45:02.239] session.py (127) - [DEBUG] : person_1@@@@1,lock acquire successfully,<locked _thread.lock object at 0x7fe52817b040>\r\n[2023-12-23 01:45:02.240] host.py (514) - [DEBUG] : 触发事件: person_normal_message_received (1)\r\n[2023-12-23 01:45:02.241] host.py (564) - [DEBUG] : 事件 person_normal_message_received (1) 处理完毕，返回值: {}\r\n[2023-12-23 01:45:02.243] message.py (27) - [INFO] : [person_1@@@@1]发送消息:测试是什么意思\r\n[2023-12-23 01:45:02.244] host.py (514) - [DEBUG] : 触发事件: session_first_message_received (2)\r\n[2023-12-23 01:45:02.245] host.py (564) - [DEBUG] : 事件 session_first_message_received (2) 处理完毕，返回值: {}\r\n[2023-12-23 01:45:02.246] host.py (514) - [DEBUG] : 触发事件: prompt_pre_processing (3)\r\n[2023-12-23 01:45:02.247] host.py (564) - [DEBUG] : 事件 prompt_pre_processing (3) 处理完毕，返回值: {}\r\n[2023-12-23 01:45:02.249] session.py (431) - [DEBUG] : cut_out: [\r\n    {\r\n        \"role\": \"system\",\r\n        \"content\": \"如果我之后想获取帮助，请你说“输入!help获取帮助”\"\r\n    },\r\n    {\r\n        \"role\": \"user\",\r\n        \"content\": \"测试是什么意思\"\r\n    }\r\n]\r\n[2023-12-23 01:45:04.446] model.py (25) - [DEBUG] : 请求接口参数: {'model': 'gpt-3.5-turbo', 'messages': [{'role': 'system', 'content': '如果我之后想获取帮助，请你说“输入!help获取帮助”'}, {'role': 'user', 'content': '测试是什么意思'}], 'functions': [{'description': 'Call this function to search about the question before you answer any questions.\\n- Do not search through google.com at any time.\\n- If you need to search somthing, visit https://www.sogou.com/web?query=<something>.\\n- If user ask you to open a url (start with http:// or https://), visit it directly.\\n- Summary the plain content result by yourself, DO NOT directly output anything in the result you got.', 'parameters': {'type': 'object', 'required': ['url', 'brief_len'], 'properties': {'url': {'type': 'string', 'description': 'url to visit'}, 'brief_len': {'type': 'integer', 'description': 'max length of the plain text content, recommend 1024-4096, prefer 4096'}}}, 'name': 'Webwlkr-access_the_web'}], 'temperature': 0.9, 'max_tokens': 4096, 'top_p': 0.9, 'frequency_penalty': 0.2, 'presence_penalty': 1.0}\r\n[2023-12-23 01:45:04.489] _base_client.py (434) - [DEBUG] : Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '如果我之后想获取帮助，请你说“输入!help获取帮助”'}, {'role': 'user', 'content': '测试是什么意思'}], 'model': 'gpt-3.5-turbo', 'frequency_penalty': 0.2, 'functions': [{'description': 'Call this function to search about the question before you answer any questions.\\n- Do not search through google.com at any time.\\n- If you need to search somthing, visit https://www.sogou.com/web?query=<something>.\\n- If user ask you to open a url (start with http:// or https://), visit it directly.\\n- Summary the plain content result by yourself, DO NOT directly output anything in the result you got.', 'parameters': {'type': 'object', 'required': ['url', 'brief_len'], 'properties': {'url': {'type': 'string', 'description': 'url to visit'}, 'brief_len': {'type': 'integer', 'description': 'max length of the plain text content, recommend 1024-4096, prefer 4096'}}}, 'name': 'Webwlkr-access_the_web'}], 'max_tokens': 4096, 'presence_penalty': 1.0, 'temperature': 0.9, 'top_p': 0.9}}\r\n[2023-12-23 01:45:04.514] _trace.py (45) - [DEBUG] : connect_tcp.started host='api-gpt.xfjy.in' port=443 local_address=None timeout=5.0 socket_options=None\r\n[2023-12-23 01:45:04.804] _trace.py (45) - [DEBUG] : connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7fe51cc7bf70>\r\n[2023-12-23 01:45:04.806] _trace.py (45) - [DEBUG] : start_tls.started ssl_context=<ssl.SSLContext object at 0x7fe5280ab840> server_hostname='api-gpt.xfjy.in' timeout=5.0\r\n[2023-12-23 01:45:05.100] _trace.py (45) - [DEBUG] : start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7fe51cc7bfa0>\r\n[2023-12-23 01:45:05.102] _trace.py (45) - [DEBUG] : send_request_headers.started request=<Request [b'POST']>\r\n[2023-12-23 01:45:05.105] _trace.py (45) - [DEBUG] : send_request_headers.complete\r\n[2023-12-23 01:45:05.106] _trace.py (45) - [DEBUG] : send_request_body.started request=<Request [b'POST']>\r\n[2023-12-23 01:45:05.108] _trace.py (45) - [DEBUG] : send_request_body.complete\r\n[2023-12-23 01:45:05.109] _trace.py (45) - [DEBUG] : receive_response_headers.started request=<Request [b'POST']>\r\n[2023-12-23 01:45:05.543] _trace.py (45) - [DEBUG] : receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'openresty'), (b'Date', b'Fri, 22 Dec 2023 17:45:05 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'366'), (b'Connection', b'keep-alive'), (b'access-control-allow-origin', b'*'), (b'openai-organization', b'wong-8'), (b'openai-processing-ms', b'10'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=15724800; includeSubDomains'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'160000'), (b'x-ratelimit-limit-tokens_usage_based', b'160000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'155904'), (b'x-ratelimit-remaining-tokens_usage_based', b'155904'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'1.536s'), (b'x-ratelimit-reset-tokens_usage_based', b'1.536s'), (b'x-request-id', b'5eb56262e334352b7cfdbcb17e7d3b18'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=3ejvPQ5EkBx6cgOA8DCK26wmtEqjiDqVqqQwKk55F3Q-1703267105-1-ATf4efbpHUxailrNt5AkJhI1lzuvPkyivBrpN45/ipXRsGD/VvzChdiQZOdVl36kTYGe8vaZ/JVr3PRVXBJ1mFk=; path=/; expires=Fri, 22-Dec-23 18:15:05 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Set-Cookie', b'_cfuvid=NIut8S1L40QcF6uNyxQXUe8rZ9A20QmQjMGBKGIkNYU-1703267105434-0-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'CF-RAY', b'839a2d3039c8c5bc-SEA'), (b'alt-svc', b'h3=\":443\"; ma=86400'), (b'Strict-Transport-Security', b'max-age=63072000; preload')])\r\n[2023-12-23 01:45:05.551] _client.py (1013) - [INFO] : HTTP Request: POST https://api-gpt.xfjy.in/v1/chat/completions \"HTTP/1.1 400 Bad Request\"\r\n[2023-12-23 01:45:05.553] _trace.py (45) - [DEBUG] : receive_response_body.started request=<Request [b'POST']>\r\n[2023-12-23 01:45:05.555] _trace.py (45) - [DEBUG] : receive_response_body.complete\r\n[2023-12-23 01:45:05.556] _trace.py (45) - [DEBUG] : response_closed.started\r\n[2023-12-23 01:45:05.557] _trace.py (45) - [DEBUG] : response_closed.complete\r\n[2023-12-23 01:45:05.559] _base_client.py (907) - [DEBUG] : HTTP Request: POST https://api-gpt.xfjy.in/v1/chat/completions \"400 Bad Request\"\r\n[2023-12-23 01:45:05.562] process.py (156) - [INFO] : 回复[person_1@@@@1]文字消息:[bot]会话token超限，已自动重置，请重新发送消息\r\n[2023-12-23 01:45:05.587] session.py (132) - [DEBUG] : person_1@@@@1,lock release,<locked _thread.lock object at 0x7fe52817b040>\r\n[2023-12-23 01:45:05.588] session.py (134) - [DEBUG] : person_1@@@@1,lock release successfully,<unlocked _thread.lock object at 0x7fe52817b040>\r\n[2023-12-23 01:45:05.590] selector_events.py (54) - [DEBUG] : Using selector: EpollSelector\r\n[2023-12-23 01:45:05.594] protocol.py (1178) - [DEBUG] : > TEXT '{\"syncId\": \"54273\", \"command\": \"sendFriendMessa...9001\\\\u6d88\\\\u606f\"}]}}' [252 bytes]\r\n[2023-12-23 01:45:06.848] connectionpool.py (1003) - [DEBUG] : Starting new HTTPS connection (1): api.github.com:443\r\n[2023-12-23 01:45:07.751] connectionpool.py (456) - [DEBUG] : https://api.github.com:443 \"GET /repos/RockChinQ/QChatGPT/releases HTTP/1.1\" 200 None\r\n[2023-12-23 01:45:07.775] connectionpool.py (1003) - [DEBUG] : Starting new HTTPS connection (1): api.github.com:443\r\n[2023-12-23 01:45:07.792] protocol.py (1172) - [DEBUG] : < TEXT '{\"syncId\":\"54273\",\"data\":{\"code\":0,\"msg\":\"success\",\"messageId\":51273}}' [70 bytes]\r\n[2023-12-23 01:45:08.400] connectionpool.py (456) - [DEBUG] : https://api.github.com:443 \"GET /repos/RockChinQ/QChatGPT/contents/res/announcement.json HTTP/1.1\" 200 1287\r\n[2023-12-23 01:45:09.860] protocol.py (1262) - [DEBUG] : % sending keepalive ping\r\n[2023-12-23 01:45:09.861] protocol.py (1178) - [DEBUG] : > PING 98 ad cc 36 [binary, 4 bytes]\r\n[2023-12-23 01:45:09.864] protocol.py (1172) - [DEBUG] : < PONG 98 ad cc 36 [binary, 4 bytes]\r\n[2023-12-23 01:45:09.866] protocol.py (1269) - [DEBUG] : % received keepalive pong\r\n[2023-12-23 01:45:29.868] protocol.py (1262) - [DEBUG] : % sending keepalive ping\r\n[2023-12-23 01:45:29.869] protocol.py (1178) - [DEBUG] : > PING 8a 83 07 c4 [binary, 4 bytes]\r\n[2023-12-23 01:45:29.872] protocol.py (1172) - [DEBUG] : < PONG 8a 83 07 c4 [binary, 4 bytes]\r\n[2023-12-23 01:45:29.874] protocol.py (1269) - [DEBUG] : % received keepalive pong\r\n^[[F[2023-12-23 01:45:49.876] protocol.py (1262) - [DEBUG] : % sending keepalive ping\r\n[2023-12-23 01:45:49.878] protocol.py (1178) - [DEBUG] : > PING b0 b0 3a 22 [binary, 4 bytes]\r\n[2023-12-23 01:45:49.881] protocol.py (1172) - [DEBUG] : < PONG b0 b0 3a 22 [binary, 4 bytes]\r\n[2023-12-23 01:45:49.883] protocol.py (1269) - [DEBUG] : % received keepalive pong\r\n[2023-12-23 01:46:00.062] ratelimit.py (58) - [DEBUG] : 清空当前分钟的对话次数\r\n[2023-12-23 01:46:09.885] protocol.py (1262) - [DEBUG] : % sending keepalive ping\r\n[2023-12-23 01:46:09.886] protocol.py (1178) - [DEBUG] : > PING 78 bf 49 59 [binary, 4 bytes]\r\n[2023-12-23 01:46:09.889] protocol.py (1172) - [DEBUG] : < PONG 78 bf 49 59 [binary, 4 bytes]\r\n[2023-12-23 01:46:09.891] protocol.py (1269) - [DEBUG] : % received keepalive pong\r\n```\r\n\r\n### 启用的插件\r\n```\r\n#1 Webwlkr \r\n基于GPT的函数调用能力，为QChatGPT提供联网功能\r\nv0.1.1\r\n```",
      "state": "closed",
      "author": "a115599663322",
      "author_type": "User",
      "created_at": "2023-12-22T17:54:32Z",
      "updated_at": "2023-12-24T05:52:03Z",
      "closed_at": "2023-12-24T05:52:03Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/648/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/648",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/648",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:08.087199",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "Webwlkr 爬取的网页内容是很长的，但普通的 gpt-3.5-turbo 只支持 4096 token的上下文，可以换成 gpt-3.5-turbo-16k 或者其他的更大上下文的模型试试看。",
          "created_at": "2023-12-23T02:13:29Z"
        },
        {
          "author": "a115599663322",
          "body": "\r\n> Webwlkr 抓取的网页内容很长，但普通的 gpt-3.5-turbo 只支持 4096 token 的上下文，可以换成 gpt-3.5-turbo-16k 或者其他更大上下文的模型试试看。\r\n\r\n已禁用了Webwlkr插件，尝试与机器人对话依旧产生该报错",
          "created_at": "2023-12-23T09:57:17Z"
        },
        {
          "author": "RockChinQ",
          "body": "禁用之后的输出再发一下，方便可以把反代和key私聊发给我QQ测试一下",
          "created_at": "2023-12-23T15:25:43Z"
        },
        {
          "author": "a115599663322",
          "body": "> 禁用之后的输出再发一下，方便可以把反代和key私聊发给我QQ测试一下\r\n已通过QQ邮箱发送给您，请注意查收，谢谢。以下是报错\r\n\r\n```[2023-12-24 02:59:56.672] main.py (356) - [CRITICAL] : 程序启动完成,如长时间未显示 \"成功登录到账号xxxxx\" ,并且不回复消息,解决办法(请勿到群里问): https://github.com/RockChinQ/QChatGPT/issues/37\r\n[2023-12-24 03:00:00.016] ratelimit.py (58) - [DEBUG] : 清空当前分钟的对话次数\r\n[20",
          "created_at": "2023-12-23T19:12:23Z"
        },
        {
          "author": "RockChinQ",
          "body": "用你给我的信息，模型`gpt-3.5-turbo`测试我这是正常的：\r\n\r\n<img width=\"717\" alt=\"image\" src=\"https://github.com/RockChinQ/QChatGPT/assets/45992437/02d123e9-1e6c-45e1-9566-fb379efe2256\">\r\n\r\n```\r\n[2023-12-24 11:51:25.042] message.py (27) - [INFO] : [person_1010553892]发送消息:你好\r\n[2023-12-24 11:51:25.042] host.py (514) - [DEB",
          "created_at": "2023-12-24T03:54:55Z"
        }
      ]
    },
    {
      "issue_number": 647,
      "title": "[BUG]",
      "body": "**运行环境**\r\n- 部署方式：\r\n    手动部署\r\n- 系统环境：\r\n    e,g, ubuntu x64\r\n- Python环境（仅手动部署填写）：\r\n    e.g. Python 3.10.9\r\n\r\n**描述漏洞**\r\n什么时候发生的，mirai还是主程序，越详细越好\r\n\r\n**完整报错信息**\r\nubuntu@ip-172-31-13-103:~/QChatGPT$ python3 main.py\r\n[2023-12-22 05:42:23.709] main.py (125) - [INFO] : 检查tips模块完整性.\r\nDatabase initialized.\r\n[2023-12-22 05:42:23.717] keymgr.py (78) - [INFO] : 使用api-key:default\r\n[2023-12-22 05:42:23.816] manager.py (238) - [INFO] : 加载禁用列表: person: [2854196310], group: [204785790, 691226829]\r\n[2023-12-22 05:42:23.817] settings.py (98) - [INFO] : 已全局启用内容函数。\r\n[2023-12-22 05:42:23.817] host.py (135) - [INFO] : 初始化插件\r\n[2023-12-22 05:42:23.817] host.py (152) - [INFO] : 以下插件已初始化:\r\n[2023-12-22 05:42:35.824] main.py (332) - [INFO] : QQ: 1070753345, MAH: localhost:8080\r\n[2023-12-22 05:42:35.825] main.py (333) - [CRITICAL] : 程序启动完成,如长时间未显示 \"成功登录到账号xxxxx\" ,并且不回复消息,解决办法(请勿到群里问): https://github.com/RockChinQ/QChatGPT/issues/37\r\n\r\n完整的报错信息\r\n",
      "state": "closed",
      "author": "shebing5",
      "author_type": "User",
      "created_at": "2023-12-22T05:45:09Z",
      "updated_at": "2023-12-23T15:26:07Z",
      "closed_at": "2023-12-23T15:26:07Z",
      "labels": [
        "Please take it seriously"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/647/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/647",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/647",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:08.272344",
      "comments": [
        {
          "author": "shebing5",
          "body": "发送消息不回复",
          "created_at": "2023-12-22T05:46:06Z"
        },
        {
          "author": "RockChinQ",
          "body": "1. 有问题先看[文档](https://q.rkcn.top)\r\n2. 先搜issue再发issue\r\n3. 输出消息末尾提示了解决办法issue\r\n",
          "created_at": "2023-12-22T05:48:26Z"
        }
      ]
    },
    {
      "issue_number": 630,
      "title": "[Bug]: 百度和阿里不能使用",
      "body": "### 部署方式\r\n\r\nDocker部署\r\n\r\n### 登录框架\r\n\r\ngo-cqhttp\r\n\r\n### 系统环境\r\n\r\nubuntu\r\n\r\n### Python环境\r\n\r\npy310\r\n\r\n### 异常情况\r\n\r\n百度和阿里不能使用，调用oneapi报错\r\nfailed to get token encoder for model ERNIE-Bot-turbo: no encoding for model ERNIE-Bot-turbo, using encoder for gpt-3.5-turbo\r\n\r\n### 报错信息\r\n\r\n_No response_",
      "state": "closed",
      "author": "jsxupeng",
      "author_type": "User",
      "created_at": "2023-12-11T03:04:34Z",
      "updated_at": "2023-12-22T15:53:57Z",
      "closed_at": "2023-12-22T15:53:57Z",
      "labels": [
        "bug?",
        "m: Provider"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/630/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "RockChinQ"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/630",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/630",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:08.434526",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "你搭了 one-api 才能用啊，https://github.com/songquanpeng/one-api",
          "created_at": "2023-12-11T03:07:53Z"
        },
        {
          "author": "jsxupeng",
          "body": "自己搭了 星火能用 chatglm能用，chatgptapi能用，就百度和阿里不能用",
          "created_at": "2023-12-11T03:17:17Z"
        },
        {
          "author": "jsxupeng",
          "body": "failed to get token encoder for model ERNIE-Bot-turbo: no encoding for model ERNIE-Bot-turbo, using encoder for gpt-3.5-turbo\r\n这个是oneapi的日志",
          "created_at": "2023-12-11T03:18:08Z"
        },
        {
          "author": "RockChinQ",
          "body": "你发一下模型的配置信息，我调试一下；还有 one-api 和 QChatGPT 的控制台日志，多发一点",
          "created_at": "2023-12-11T03:18:39Z"
        },
        {
          "author": "jsxupeng",
          "body": "qchatgpt：\r\nstderr: [37m[2023-12-11 11:20:13.654] process.py (153) - [INFO] : 回复[person_840651001]文字消息:[Switcher] 已切换至 OneAPI 百度文心千帆ERNIE-Bot-Turbo[0m\r\nstderr: [37m[2023-12-11 11:20:13.661] process.py (183) - [INFO] : [风控] 强制延迟1.61秒(如需关闭，请到config.py修改force_delay_range字段)[0m\r\nstderr: [37m[2023-12-11 1",
          "created_at": "2023-12-11T03:23:40Z"
        }
      ]
    },
    {
      "issue_number": 643,
      "title": "[Bug]: 反向代理无法使用",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\nMirai\n\n### 系统环境\n\nUbuntu20\n\n### Python环境\n\npython3.12.1\n\n### 异常情况\n\n最新版的qchatv2.6.8，使用代理，\r\n具体config.py文件为下\r\nopenai_config = {\r\n    \"api_key\": {\r\n        \"default\": \"sk-CviiY656zP0Vs45648122b7TkEuiwLe2e2S9\"\r\n    },\r\n#    \"http_proxy\": None,\r\n    \"reverse_proxy\": \"https://api.openai.rockchin.top/v1\"\r\n}\r\n\r\n具体报错为下\r\nroot@wuanjun-MINI-S:~/qqbot/QChatGPT# python3 main.py\r\n[2023-12-21 17:23:17.294] main.py (125) - [INFO] : 检查tips模块完整性.\r\nDatabase initialized.\r\n[2023-12-21 17:23:17.301] keymgr.py (78) - [INFO] : 使用api-key:default\r\n[2023-12-21 17:23:17.343] manager.py (238) - [INFO] : 加载禁用列表: person: [2854196310], group: [204785790, 691226829]\r\n[2023-12-21 17:23:17.343] settings.py (98) - [INFO] : 已全局启用内容函数。\r\n[2023-12-21 17:23:17.343] host.py (135) - [INFO] : 初始化插件\r\n[2023-12-21 17:23:17.344] host.py (152) - [INFO] : 以下插件已初始化: \r\n2023-12-21 17:23:17 - INFO     [WebSocket] 成功登录到账号2328412881。\r\n[2023-12-21 17:23:17.450] websocket.py (194) - [INFO] : [WebSocket] 成功登录到账号2328412881。\r\n2023-12-21 17:23:17 - INFO     [WebSocket] 机器人开始运行。按 Ctrl + C 停止。\r\n[2023-12-21 17:23:17.450] websocket.py (250) - [INFO] : [WebSocket] 机器人开始运行。按 Ctrl + C 停止。\r\n[2023-12-21 17:23:29.344] main.py (332) - [INFO] : QQ: 2328412881, MAH: localhost:8080\r\n[2023-12-21 17:23:29.345] main.py (333) - [CRITICAL] : 程序启动完成,如长时间未显示 \"成功登录到账号xxxxx\" ,并且不回复消息,解决办法(请勿到群里问): https://github.com/RockChinQ/QChatGPT/issues/37\r\n[2023-12-21 17:23:31.796] message.py (27) - [INFO] : [person_1615630234]发送消息:你好\r\n[2023-12-21 17:23:32.943] _client.py (1027) - [INFO] : HTTP Request: POST https://api.openai.rockchin.top/v1/chat/completions \"HTTP/1.1 429 Too Many Requests\"\r\n[2023-12-21 17:23:32.944] _base_client.py (952) - [INFO] : Retrying request to /chat/completions in 0.871576 seconds\r\n[2023-12-21 17:23:34.283] _client.py (1027) - [INFO] : HTTP Request: POST https://api.openai.rockchin.top/v1/chat/completions \"HTTP/1.1 429 Too Many Requests\"\r\n[2023-12-21 17:23:34.284] _base_client.py (952) - [INFO] : Retrying request to /chat/completions in 1.875531 seconds\r\n[2023-12-21 17:23:36.492] _client.py (1027) - [INFO] : HTTP Request: POST https://api.openai.rockchin.top/v1/chat/completions \"HTTP/1.1 429 Too Many Requests\"\r\n\r\n更换了很多代，都是同样报错\r\n更换的代理如：https://api-gpt.xfjy.in/v1\n\n### 日志信息\n\n_No response_",
      "state": "closed",
      "author": "Deemo119",
      "author_type": "User",
      "created_at": "2023-12-21T09:30:22Z",
      "updated_at": "2023-12-21T12:15:04Z",
      "closed_at": "2023-12-21T12:15:04Z",
      "labels": [
        "bug?",
        "m: Provider"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/643/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/643",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/643",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:08.631118",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "429不是程序问题，是你渠道问题，检查渠道和OpenAI状态",
          "created_at": "2023-12-21T11:36:00Z"
        },
        {
          "author": "Deemo119",
          "body": "感谢您的解答，是apikey的问题",
          "created_at": "2023-12-21T12:14:59Z"
        }
      ]
    },
    {
      "issue_number": 638,
      "title": "[Bug]: !cfg命令失效",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\ngo-cqhttp\n\n### 系统环境\n\nUbuntu Server 20.04 LTS 64bit\n\n### Python环境\n\nPython 3.11\n\n### 异常情况\n\n!cfg 命令失效\n\n### 日志信息\n\n[2023-12-18 21:40:37.594] /usr/local/lib/python3.11/dist-packages/nakuru/application.py (95) - [INFO] :\r\nEvent: handling a event: FriendMessage\r\n[2023-12-18 21:40:37.595] /home/lighthouse/QChatGPT-2.6.7/pkg/qqbot/command.py (11) - [INFO] :\r\n[person_1042075652]发起指令:!~openai_config.api_key\r\n[2023-12-18 21:40:37.595] /home/lighthouse/QChatGPT-2.6.7/pkg/qqbot/process.py (153) - [INFO] :\r\n回复[person_1042075652]文字消息:[bot]err:未找到配置项 openai_config.api_key\r\n[2023-12-18 21:42:01.357] /usr/local/lib/python3.11/dist-packages/nakuru/application.py (95) - [INFO] :\r\nEvent: handling a event: FriendMessage\r\n[2023-12-18 21:42:01.358] /home/lighthouse/QChatGPT-2.6.7/pkg/qqbot/command.py (11) - [INFO] :\r\n[person_1042075652]发起指令:!cfg default_prompt \"我是Rock Chin\"\r\n[2023-12-18 21:42:01.358] /home/lighthouse/QChatGPT-2.6.7/pkg/qqbot/process.py (153) - [INFO] :\r\n回复[person_1042075652]文字消息:[bot]err:未找到配置项 default_prompt\r\n\r\n[2023-12-18 21:45:48.305] /usr/local/lib/python3.11/dist-packages/nakuru/application.py (95) - [INFO] :\r\nEvent: handling a event: FriendMessage\r\n[2023-12-18 21:45:48.306] /home/lighthouse/QChatGPT-2.6.7/pkg/qqbot/command.py (11) - [INFO] :\r\n[person_1042075652]发起指令:!~ completion_api_params.model \"gpt-3.5-turbo\"\r\n[2023-12-18 21:45:48.306] /home/lighthouse/QChatGPT-2.6.7/pkg/qqbot/manager.py (392) - [INFO] :\r\n通知管理员:person_1042075652指令执行失败:invalid syntax (<string>, line 1)\r\n[2023-12-18 21:45:48.308] /home/lighthouse/QChatGPT-2.6.7/pkg/qqbot/command.py (46) - [ERROR] :\r\ninvalid syntax (<string>, line 1)\r\nTraceback (most recent call last):\r\n  File \"/home/lighthouse/QChatGPT-2.6.7/pkg/qqbot/command.py\", line 39, in process_command\r\n    reply = cmdmgr.execute(context)\r\n            ^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/lighthouse/QChatGPT-2.6.7/pkg/qqbot/cmds/aamgr.py\", line 268, in execute\r\n    execed, reply = node['cls'].process(ctx)\r\n                    ^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/lighthouse/QChatGPT-2.6.7/pkg/qqbot/cmds/system/cconfig.py\", line 100, in process\r\n    return True, config_operation(ctx.command, ctx.params)\r\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/lighthouse/QChatGPT-2.6.7/pkg/qqbot/cmds/system/cconfig.py\", line 65, in config_operation\r\n    cfg_value = eval(cfg_value)\r\n                ^^^^^^^^^^^^^^^\r\n  File \"<string>\", line 1\r\n    completion_api_params.model \"gpt-3.5-turbo\"\r\n                                ^^^^^^^^^^^^^^^\r\nSyntaxError: invalid syntax\r\n[2023-12-18 21:45:48.309] /home/lighthouse/QChatGPT-2.6.7/pkg/qqbot/process.py (153) - [INFO] :\r\n回复[person_1042075652]文字消息:[bot]err:invalid syntax (<string>, line 1)\r\n",
      "state": "closed",
      "author": "Vlfx1",
      "author_type": "User",
      "created_at": "2023-12-18T13:54:41Z",
      "updated_at": "2023-12-19T09:41:10Z",
      "closed_at": "2023-12-19T09:40:34Z",
      "labels": [
        "bug?",
        "m: Commands"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/638/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/638",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/638",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:08.807644",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "已修复，将在下一版本中包含。",
          "created_at": "2023-12-19T09:41:00Z"
        }
      ]
    },
    {
      "issue_number": 581,
      "title": "[Bug]: 初始化失败:Expecting value: line 1 column 1 (char 0)",
      "body": "### 部署方式\r\n\r\n手动部署\r\n\r\n### 登录框架\r\n\r\ngo-cqhttp\r\n\r\n### 系统环境\r\n\r\nubuntu 18\r\n\r\n### Python环境\r\n\r\npython3.10\r\n\r\n### 异常情况\r\n\r\ncq-http登录和启动正常，报错和配置文件如下\r\n\r\n**main.py**\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3/dist-packages/simplejson/scanner.py\", line 37, in _scan_once\r\n    nextchar = string[idx]\r\nIndexError: string index out of range\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.10/dist-packages/requests/models.py\", line 971, in json\r\n    return complexjson.loads(self.text, **kwargs)\r\n  File \"/usr/lib/python3/dist-packages/simplejson/__init__.py\", line 518, in loads\r\n    return _default_decoder.decode(s)\r\n  File \"/usr/lib/python3/dist-packages/simplejson/decoder.py\", line 370, in decode\r\n    obj, end = self.raw_decode(s)\r\n  File \"/usr/lib/python3/dist-packages/simplejson/decoder.py\", line 400, in raw_decode\r\n    return self.scan_once(s, idx=_w(s, idx).end())\r\n  File \"/usr/lib/python3/dist-packages/simplejson/scanner.py\", line 79, in scan_once\r\n    return _scan_once(string, idx)\r\n  File \"/usr/lib/python3/dist-packages/simplejson/scanner.py\", line 39, in _scan_once\r\n    raise JSONDecodeError(errmsg, string, idx)\r\nsimplejson.errors.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/bc/robot/QChatGPT/main.py\", line 213, in start\r\n    qqbot = pkg.qqbot.manager.QQBotManager(first_time_init=first_time_init)\r\n  File \"/bc/robot/QChatGPT/pkg/qqbot/manager.py\", line 130, in __init__\r\n    self.adapter = NakuruProjectAdapter(config.nakuru_config)\r\n  File \"/bc/robot/QChatGPT/pkg/qqbot/sources/nakuru.py\", line 188, in __init__\r\n    self.bot_account_id = int(resp.json()['data']['user_id'])\r\n  File \"/usr/local/lib/python3.10/dist-packages/requests/models.py\", line 975, in json\r\n    raise RequestsJSONDecodeError(e.msg, e.doc, e.pos)\r\nrequests.exceptions.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\r\n[2023-10-05 20:10:21.251] main.py (284) - [ERROR] : 初始化失败:Expecting value: line 1 column 1 (char 0)\r\n[2023-10-05 20:10:33.256] main.py (302) - [INFO] : host: localhost, port: 6700, http_port: 5700\r\n[2023-10-05 20:10:33.256] main.py (303) - [CRITICAL] : 程序启动完成,如长时间未显示 \"Protocol: connected\" ,并且不回复消息,请检查config.py中的nakuru_config是否正确\r\n\r\n\r\n**config.py配置文件**\r\n![image](https://github.com/RockChinQ/QChatGPT/assets/45087936/23fc9076-7551-44ec-b595-46cd68829956)\r\n<img width=\"422\" alt=\"image\" src=\"https://github.com/RockChinQ/QChatGPT/assets/45087936/a7c2b2a5-a014-43fa-b2d7-8b0218637b38\">\r\n\r\n",
      "state": "closed",
      "author": "Programmer-Red",
      "author_type": "User",
      "created_at": "2023-10-05T12:17:17Z",
      "updated_at": "2023-12-18T08:34:37Z",
      "closed_at": "2023-12-18T08:34:37Z",
      "labels": [
        "bug?",
        "IM: aiocqhttp"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/581/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/581",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/581",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:09.025802",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "不太清楚，应该是nakuru或者go-cqhttp的问题，使用 go-cqhttp 最新版测试未发现此问题，可以再重新部署试一下",
          "created_at": "2023-12-09T14:20:03Z"
        }
      ]
    },
    {
      "issue_number": 632,
      "title": "[Bug]: 启动run-bot.bat之后，长时间未显示 \"Protocol: connected\" ，并且不回复消息",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\ngo-cqhttp\n\n### 系统环境\n\nWindows 10\n\n### Python环境\n\nPython 3.10\n\n### 异常情况\n\n前一段时间还正常，今天启动run-bot.bat之后，长时间未显示 \"Protocol: connected\" ，并且不回复消息。\r\n\n\n### 报错信息\n\n_No response_",
      "state": "closed",
      "author": "Sprt98",
      "author_type": "User",
      "created_at": "2023-12-14T16:22:16Z",
      "updated_at": "2023-12-18T08:33:24Z",
      "closed_at": "2023-12-18T08:33:24Z",
      "labels": [
        "bug?",
        "Please take it seriously"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/632/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/632",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/632",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:09.207198",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "日志？",
          "created_at": "2023-12-14T16:23:34Z"
        },
        {
          "author": "Sprt98",
          "body": "> 日志？\r\n\r\n[2023-12-15 00:13:28.158] F:\\bot3\\QChatGPT\\main.py (73) - [INFO] :\r\n检查config模块完整性.\r\n[2023-12-15 00:13:28.161] F:\\bot3\\QChatGPT\\main.py (101) - [INFO] :\r\n检查tips模块完整性.\r\n[2023-12-15 00:13:57.412] F:\\bot3\\QChatGPT\\main.py (261) - [INFO] :\r\n您正在使用Windows系统，若命令行窗口处于“选择”模式，程序可能会被暂停，此时请右键点击窗口空白区域使其取",
          "created_at": "2023-12-15T02:32:43Z"
        },
        {
          "author": "RockChinQ",
          "body": "你这是go-cqhttp没配置好啊。。你得看gocq的日志。还有，发issue请提供尽可能多的信息",
          "created_at": "2023-12-15T02:35:13Z"
        }
      ]
    },
    {
      "issue_number": 612,
      "title": "[Bug]: 百度云内容安全审核会吃掉[bot]开头的系统消息",
      "body": "### 部署方式\r\n\r\n安装器部署\r\n\r\n### 登录框架\r\n\r\nMirai\r\n\r\n### 系统环境\r\n\r\nWindows Server 2019 Datacenter\r\n\r\n### Python环境\r\n\r\nPython 3.10\r\n\r\n### 异常情况\r\n\r\n百度云内容安全审核可能会吃掉[bot]开头的系统消息，如!help或!version的内容。\r\n\r\n### 报错信息\r\n\r\n```\r\n[2023-11-23 09:50:13.351] command.py (11) - [INFO] : [person_2445484145]发起指令:!version\r\n[2023-11-23 09:50:14.634] process.py (155) - [INFO] : 回复[person_2445484145]文字消息:[bot]当前版本:\r\nv2.6.6 修复反代失败\r\n## What's Changed\r\n* Fix: 反向代理设置无效 by @RockChinQ in https://github.com/Rock...\r\n[2023-11-23 09:50:14.712] filter.py (60) - [INFO] : 向百度云发送:text=[bot]当前版本:\r\nv2.6.6 修复反代失败\r\n## What's Changed\r\n* Fix: 反向代理设置无效 by @RockChinQ in https://github.com/RockChinQ/QChatGPT/pull/608\r\n* Feat: 更新后不再自动热重载 by @RockChinQ in https://github.com/RockChinQ/QChatGPT/pull/610\r\n\r\n\r\n**Full Changelog**: https://github.com/RockChinQ/QChatGPT/compare/v2.6.5...v2.6.6\r\n\r\n[2023-11-23 09:50:14.900] filter.py (79) - [WARNING] : 百度云判定结果：不合规\r\n[2023-11-23 09:50:14.900] process.py (185) - [INFO] : [风控] 强制延迟0.22秒(如需关闭，请到config.py修改force_delay_range字段)\r\n```",
      "state": "closed",
      "author": "a86296007",
      "author_type": "User",
      "created_at": "2023-11-23T01:53:44Z",
      "updated_at": "2023-12-18T08:33:12Z",
      "closed_at": "2023-12-18T08:33:04Z",
      "labels": [
        "bug?",
        "m: Platform"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/612/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "RockChinQ"
      ],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/612",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/612",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:09.382484",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "现在命令回复（包含`[bot]`）的消息不再进行敏感词检查，将在下一版本包含这个更改。",
          "created_at": "2023-12-18T08:33:00Z"
        }
      ]
    },
    {
      "issue_number": 615,
      "title": "[Bug]: claude ai json解析错误",
      "body": "### 部署方式\n\nDocker部署\n\n### 登录框架\n\ngo-cqhttp\n\n### 系统环境\n\nubuntu\n\n### Python环境\n\npy310\n\n### 异常情况\n\n使用claude 保json错误\n\n### 报错信息\n\nstderr: Traceback (most recent call last):\r\nstderr:   File \"/QChatGPT/plugins/revLibs/pkg/process/procmsg.py\", line 39, in process_message\r\nstderr:     for section in session.get_reply(prompt):\r\nstderr:   File \"/QChatGPT/plugins/revLibs/pkg/process/revss.py\", line 118, in get_reply\r\nstderr:     for reply_period_msg, reply_period_dict in self.__rev_interface_impl__.get_reply(prompt, **kwargs):\r\nstderr:   File \"/QChatGPT/plugins/revLibs/pkg/process/impls/claude.py\", line 50, in get_reply\r\nstderr:     resp = self.chatbot.send_message(prompt, self.conversation_id)\r\nstderr:   File \"/usr/local/lib/python3.10/site-packages/claude_api.py\", line 129, in send_message\r\nstderr:     data = json.loads(json_str)\r\nstderr:   File \"/usr/local/lib/python3.10/json/__init__.py\", line 346, in loads\r\nstderr:     return _default_decoder.decode(s)\r\nstderr:   File \"/usr/local/lib/python3.10/json/decoder.py\", line 337, in decode\r\nstderr:     obj, end = self.raw_decode(s, idx=_w(s, 0).end())\r\nstderr:   File \"/usr/local/lib/python3.10/json/decoder.py\", line 355, in raw_decode\r\nstderr:     raise JSONDecodeError(\"Expecting value\", s, err.value) from None\r\nstderr: json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\r\nstderr: [31m[2023-11-25 21:43:11.825] procmsg.py (63) - [ERROR] : Traceback (most recent call last):\r\nstderr:   File \"/QChatGPT/plugins/revLibs/pkg/process/procmsg.py\", line 39, in process_message\r\nstderr:     for section in session.get_reply(prompt):\r\nstderr:   File \"/QChatGPT/plugins/revLibs/pkg/process/revss.py\", line 118, in get_reply\r\nstderr:     for reply_period_msg, reply_period_dict in self.__rev_interface_impl__.get_reply(prompt, **kwargs):\r\nstderr:   File \"/QChatGPT/plugins/revLibs/pkg/process/impls/claude.py\", line 50, in get_reply\r\nstderr:     resp = self.chatbot.send_message(prompt, self.conversation_id)\r\nstderr:   File \"/usr/local/lib/python3.10/site-packages/claude_api.py\", line 129, in send_message\r\nstderr:     data = json.loads(json_str)\r\nstderr:   File \"/usr/local/lib/python3.10/json/__init__.py\", line 346, in loads\r\nstderr:     return _default_decoder.decode(s)\r\nstderr:   File \"/usr/local/lib/python3.10/json/decoder.py\", line 337, in decode\r\nstderr:     obj, end = self.raw_decode(s, idx=_w(s, 0).end())\r\nstderr:   File \"/usr/local/lib/python3.10/json/decoder.py\", line 355, in raw_decode\r\nstderr:     raise JSONDecodeError(\"Expecting value\", s, err.value) from None\r\nstderr: json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)",
      "state": "closed",
      "author": "xupeng19881010",
      "author_type": "User",
      "created_at": "2023-11-25T13:47:02Z",
      "updated_at": "2023-12-12T12:27:48Z",
      "closed_at": "2023-11-26T13:39:02Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/615/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/615",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/615",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:09.551241",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "尝试换个新cookies先",
          "created_at": "2023-11-25T13:49:41Z"
        },
        {
          "author": "xupeng19881010",
          "body": "cookies已经换过重新获取过了，还是这样，我是用Cookie-Editor直接导出的json",
          "created_at": "2023-11-25T14:18:48Z"
        },
        {
          "author": "RockChinQ",
          "body": "上游依赖问题，https://github.com/KoushikNavuluri/Claude-API 这个仓库的 issues 里查查",
          "created_at": "2023-11-26T06:30:00Z"
        },
        {
          "author": "xupeng19881010",
          "body": "谢谢，获取了最新的commit解决了。。",
          "created_at": "2023-11-26T13:39:02Z"
        },
        {
          "author": "Cutelinwanfeng",
          "body": "> 谢谢，获取了最新的commit解决了。。\r\n\r\n请问怎么解决的 我连不上claude ",
          "created_at": "2023-12-12T12:24:23Z"
        }
      ]
    },
    {
      "issue_number": 629,
      "title": "[Bug]: No module named 'CallingGPT'",
      "body": "### 部署方式\n\n一键安装包部署\n\n### 登录框架\n\nMirai\n\n### 系统环境\n\nwin11\n\n### Python环境\n\npython3.9\n\n### 异常情况\n\n打开run-bot.bat时提示：初始化失败:No module named 'CallingGPT'\n\n### 报错信息\n\nD:\\EDGE下载\\QChatGPT>..\\python\\python.exe main.py\r\n[2023-12-11 02:05:00.664] main.py (118) - [INFO] : 检查config模块完整性.\r\n[2023-12-11 02:05:00.666] main.py (151) - [INFO] : 检查tips模块完整性.\r\nTraceback (most recent call last):\r\n  File \"D:\\EDGE下载\\QChatGPT\\main.py\", line 218, in start\r\n    import pkg.openai.manager\r\n  File \"D:\\EDGE下载\\QChatGPT\\.\\pkg\\openai\\manager.py\", line 5, in <module>\r\n    from ..openai import keymgr\r\n  File \"D:\\EDGE下载\\QChatGPT\\.\\pkg\\openai\\keymgr.py\", line 5, in <module>\r\n    from ..plugin import host as plugin_host\r\n  File \"D:\\EDGE下载\\QChatGPT\\.\\pkg\\plugin\\host.py\", line 24, in <module>\r\n    from CallingGPT.session.session import Session\r\nModuleNotFoundError: No module named 'CallingGPT'\r\n[2023-12-11 02:05:01.249] main.py (328) - [ERROR] : 初始化失败:No module named 'CallingGPT'\r\n[2023-12-11 02:05:03.255] main.py (334) - [INFO] : 您正在使用Windows系统，若命令行窗口处于“选择”模式，程序可能会被暂停，此时请右键点击窗口空白区域使其取消选择模式。\r\n[2023-12-11 02:05:15.260] main.py (342) - [INFO] : QQ: 2609413463, MAH: localhost:8080",
      "state": "closed",
      "author": "CreativeBiao",
      "author_type": "User",
      "created_at": "2023-12-10T18:13:56Z",
      "updated_at": "2023-12-11T11:50:11Z",
      "closed_at": "2023-12-11T03:08:11Z",
      "labels": [
        "bug?",
        "duplicated"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/629/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/629",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/629",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:09.771878",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "#616 #621",
          "created_at": "2023-12-11T00:19:11Z"
        },
        {
          "author": "CreativeBiao",
          "body": "谢谢大佬",
          "created_at": "2023-12-11T11:50:10Z"
        }
      ]
    },
    {
      "issue_number": 579,
      "title": "[Feature]: DALL·E 3 和 多模态架构设计",
      "body": "### 这是一个？\n\n新功能\n\n### 详细描述\n\n接入 OpenAI DALL·E 3 模型并尝试支持多模态的架构",
      "state": "closed",
      "author": "RockChinQ",
      "author_type": "User",
      "created_at": "2023-10-01T03:42:24Z",
      "updated_at": "2023-12-09T14:33:27Z",
      "closed_at": "2023-12-09T14:33:27Z",
      "labels": [
        "m: Provider"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/579/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/579",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/579",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:09.946276",
      "comments": [
        {
          "author": "leihao",
          "body": "这个是不是也与新版关联的问题,就丢这里好了\r\n[bot]err:\r\n\r\nYou tried to access openai.Image, but this is no longer supported in openai>=1.0.0 - see the README at https://github.com/openai/openai-python for the API.\r\n\r\nYou can run `openai migrate` to automatically upgrade your codebase to use the 1.0.0 interface. \r\n\r\nAlter",
          "created_at": "2023-11-29T10:15:35Z"
        },
        {
          "author": "Lssg97",
          "body": "同楼上情况一样，目前已经无法使用 !draw 命令。",
          "created_at": "2023-12-07T09:17:24Z"
        },
        {
          "author": "RockChinQ",
          "body": "在 #628 修复绘图命令不可用问题",
          "created_at": "2023-12-09T14:20:53Z"
        },
        {
          "author": "RockChinQ",
          "body": "[更新到v2.6.7](https://github.com/RockChinQ/QChatGPT/discussions/595) 可解决绘图命令不可用问题，绘图命令不可用问题请不要再在此issue讨论，dalle3使用方式可以在 #628 或者最新的`config-template.py`找到，或在 discussion 发起讨论。",
          "created_at": "2023-12-09T14:28:53Z"
        },
        {
          "author": "RockChinQ",
          "body": "多模态目前仅计划支持视觉，统一到 #619 跟踪。",
          "created_at": "2023-12-09T14:33:27Z"
        }
      ]
    },
    {
      "issue_number": 624,
      "title": "[Bug]: gateway timeout504",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\ngo-cqhttp\n\n### 系统环境\n\n Ubuntu Server 22.04\n\n### Python环境\n\nPython3.10\n\n### 异常情况\n\n在请求长对话时会出现此错误。例如我问1+1等于几之类的可以正常回复，但是如果请求写一篇自我介绍之类的就会出现这个错误\n\n### 报错信息\n\nHTTP code 504 from API (<html>\r\n<head><title>504 Gateway Time-out</title></head>\r\n<body>\r\n<center><h1>504 Gateway Time-out</h1></center>\r\n<hr><center>openresty/1.19.9.1</center>\r\n</body>\r\n</html>\r\n另外启动时也有问题，如下：[2023-12-02 20:09:36.225] host.py (84) - [ERROR] : 加载模块: plugins/randomimg/main.py 失败: (<class 'ModuleNotFoundError'>, ModuleNotFoundError(\"No module named 'lxml'\"), <traceback object at 0x7fa05da2d740>)",
      "state": "closed",
      "author": "kisara71",
      "author_type": "User",
      "created_at": "2023-12-02T12:18:23Z",
      "updated_at": "2023-12-02T12:53:01Z",
      "closed_at": "2023-12-02T12:53:01Z",
      "labels": [
        "bug?",
        "External Plugin"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/624/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/624",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/624",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:10.146921",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "504是你反向代理的问题，去联系反向代理提供方。启动时报错是插件缺少依赖，自行安装依赖或者咨询插件作者。",
          "created_at": "2023-12-02T12:20:30Z"
        },
        {
          "author": "kisara71",
          "body": "> 504是你反向代理的问题，去联系反向代理提供方。启动时报错是插件缺少依赖，自行安装依赖或者咨询插件作者。\r\n\r\nhttps://github.com/Ice-Hazymoon/openai-scf-proxy 用这项目弄得反向代理，重新弄了一个出现同样问题",
          "created_at": "2023-12-02T12:47:24Z"
        },
        {
          "author": "RockChinQ",
          "body": "这个项目最近确实出了问题，可以去项目issues咨询一下，或者尝试换一个 反代项目。",
          "created_at": "2023-12-02T12:50:34Z"
        },
        {
          "author": "kisara71",
          "body": "> 这个项目最近确实出了问题，可以去项目issues咨询一下，或者尝试换一个 反代项目。\r\n\r\n好的，谢谢大佬",
          "created_at": "2023-12-02T12:51:53Z"
        }
      ]
    },
    {
      "issue_number": 621,
      "title": "[Bug]: 安装依赖时报错",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\nMirai\n\n### 系统环境\n\nwindowsserver\n\n### Python环境\n\npython13\n\n### 异常情况\n\n使用自动部署，手动安装pip install -r requirements.txt执行之后报错\n\n### 报错信息\n\nC:\\sc\\qqchatgpt\\css\\QChatGPT>pip install -r requirements.txt\r\nCollecting requests (from -r requirements.txt (line 1))\r\n  Using cached requests-2.31.0-py3-none-any.whl.metadata (4.6 kB)\r\nRequirement already satisfied: openai in c:\\users\\administrator\\appdata\\local\\programs\\python\\python312\\lib\\site-packages (from -r requirements.txt (line 2)) (1.3.6)\r\nCollecting dulwich~=0.21.6 (from -r requirements.txt (line 3))\r\n  Using cached dulwich-0.21.6-cp312-cp312-win_amd64.whl\r\nCollecting colorlog~=6.6.0 (from -r requirements.txt (line 4))\r\n  Using cached colorlog-6.6.0-py2.py3-none-any.whl (11 kB)\r\nCollecting yiri-mirai-rc (from -r requirements.txt (line 5))\r\n  Using cached yiri_mirai_rc-0.2.7.3-py3-none-any.whl.metadata (3.4 kB)\r\nCollecting websockets (from -r requirements.txt (line 6))\r\n  Using cached websockets-12.0-cp312-cp312-win_amd64.whl.metadata (6.8 kB)\r\nCollecting urllib3 (from -r requirements.txt (line 7))\r\n  Using cached urllib3-2.1.0-py3-none-any.whl.metadata (6.4 kB)\r\nCollecting func_timeout~=4.3.5 (from -r requirements.txt (line 8))\r\n  Using cached func_timeout-4.3.5-py3-none-any.whl\r\nCollecting Pillow (from -r requirements.txt (line 9))\r\n  Using cached Pillow-10.1.0-cp312-cp312-win_amd64.whl.metadata (9.6 kB)\r\nCollecting nakuru-project-idk (from -r requirements.txt (line 10))\r\n  Using cached nakuru_project_idk-0.0.2.1-py3-none-any.whl (24 kB)\r\nRequirement already satisfied: CallingGPT in c:\\users\\administrator\\appdata\\local\\programs\\python\\python312\\lib\\site-packages (from -r requirements.txt (line 11)) (0.0.1.0)\r\nCollecting tiktoken (from -r requirements.txt (line 12))\r\n  Using cached tiktoken-0.5.1.tar.gz (32 kB)\r\n  Installing build dependencies ... done\r\n  Getting requirements to build wheel ... done\r\n  Preparing metadata (pyproject.toml) ... done\r\nCollecting PyYaml (from -r requirements.txt (line 13))\r\n  Using cached PyYAML-6.0.1-cp312-cp312-win_amd64.whl.metadata (2.1 kB)\r\nCollecting charset-normalizer<4,>=2 (from requests->-r requirements.txt (line 1))\r\n  Using cached charset_normalizer-3.3.2-cp312-cp312-win_amd64.whl.metadata (34 kB)\r\nRequirement already satisfied: idna<4,>=2.5 in c:\\users\\administrator\\appdata\\local\\programs\\python\\python312\\lib\\site-packages (from requests->-r requirements.txt (line 1)) (3.6)\r\nRequirement already satisfied: certifi>=2017.4.17 in c:\\users\\administrator\\appdata\\local\\programs\\python\\python312\\lib\\site-packages (from requests->-r requirements.txt (line 1)) (2023.11.17)\r\nRequirement already satisfied: anyio<4,>=3.5.0 in c:\\users\\administrator\\appdata\\local\\programs\\python\\python312\\lib\\site-packages (from openai->-r requirements.txt (line 2)) (3.7.1)\r\nRequirement already satisfied: distro<2,>=1.7.0 in c:\\users\\administrator\\appdata\\local\\programs\\python\\python312\\lib\\site-packages (from openai->-r requirements.txt (line 2)) (1.8.0)\r\nRequirement already satisfied: httpx<1,>=0.23.0 in c:\\users\\administrator\\appdata\\local\\programs\\python\\python312\\lib\\site-packages (from openai->-r requirements.txt (line 2)) (0.25.2)\r\nRequirement already satisfied: pydantic<3,>=1.9.0 in c:\\users\\administrator\\appdata\\local\\programs\\python\\python312\\lib\\site-packages (from openai->-r requirements.txt (line 2)) (2.5.2)\r\nRequirement already satisfied: sniffio in c:\\users\\administrator\\appdata\\local\\programs\\python\\python312\\lib\\site-packages (from openai->-r requirements.txt (line 2)) (1.3.0)\r\nRequirement already satisfied: tqdm>4 in c:\\users\\administrator\\appdata\\local\\programs\\python\\python312\\lib\\site-packages (from openai->-r requirements.txt (line 2)) (4.66.1)\r\nRequirement already satisfied: typing-extensions<5,>=4.5 in c:\\users\\administrator\\appdata\\local\\programs\\python\\python312\\lib\\site-packages (from openai->-r requirements.txt (line 2)) (4.8.0)\r\nRequirement already satisfied: colorama in c:\\users\\administrator\\appdata\\local\\programs\\python\\python312\\lib\\site-packages (from colorlog~=6.6.0->-r requirements.txt (line 4)) (0.4.6)\r\nCollecting aiofiles<24.0.0,>=23.2.1 (from yiri-mirai-rc->-r requirements.txt (line 5))\r\n  Using cached aiofiles-23.2.1-py3-none-any.whl.metadata (9.7 kB)\r\nCollecting pydantic<3,>=1.9.0 (from openai->-r requirements.txt (line 2))\r\n  Using cached pydantic-1.10.13-py3-none-any.whl.metadata (149 kB)\r\nCollecting starlette<1.0,>=0.14.2 (from yiri-mirai-rc->-r requirements.txt (line 5))\r\n  Using cached starlette-0.32.0.post1-py3-none-any.whl.metadata (5.8 kB)\r\nCollecting aiohttp (from nakuru-project-idk->-r requirements.txt (line 10))\r\n  Using cached aiohttp-3.9.1-cp312-cp312-win_amd64.whl.metadata (7.6 kB)\r\nCollecting async-lru (from nakuru-project-idk->-r requirements.txt (line 10))\r\n  Using cached async_lru-2.0.4-py3-none-any.whl.metadata (4.5 kB)\r\nCollecting logbook (from nakuru-project-idk->-r requirements.txt (line 10))\r\n  Using cached Logbook-1.7.0.post0-cp312-cp312-win_amd64.whl.metadata (2.6 kB)\r\nCollecting regex>=2022.1.18 (from tiktoken->-r requirements.txt (line 12))\r\n  Using cached regex-2023.10.3-cp312-cp312-win_amd64.whl.metadata (41 kB)\r\nRequirement already satisfied: httpcore==1.* in c:\\users\\administrator\\appdata\\local\\programs\\python\\python312\\lib\\site-packages (from httpx<1,>=0.23.0->openai->-r requirements.txt (line 2)) (1.0.2)\r\nRequirement already satisfied: h11<0.15,>=0.13 in c:\\users\\administrator\\appdata\\local\\programs\\python\\python312\\lib\\site-packages (from httpcore==1.*->httpx<1,>=0.23.0->openai->-r requirements.txt (line 2)) (0.14.0)\r\nCollecting attrs>=17.3.0 (from aiohttp->nakuru-project-idk->-r requirements.txt (line 10))\r\n  Using cached attrs-23.1.0-py3-none-any.whl (61 kB)\r\nCollecting multidict<7.0,>=4.5 (from aiohttp->nakuru-project-idk->-r requirements.txt (line 10))\r\n  Using cached multidict-6.0.4.tar.gz (51 kB)\r\n  Installing build dependencies ... done\r\n  Getting requirements to build wheel ... done\r\n  Installing backend dependencies ... done\r\n  Preparing metadata (pyproject.toml) ... done\r\nCollecting yarl<2.0,>=1.0 (from aiohttp->nakuru-project-idk->-r requirements.txt (line 10))\r\n  Using cached yarl-1.9.3-cp312-cp312-win_amd64.whl.metadata (29 kB)\r\nCollecting frozenlist>=1.1.1 (from aiohttp->nakuru-project-idk->-r requirements.txt (line 10))\r\n  Using cached frozenlist-1.4.0.tar.gz (90 kB)\r\n  Installing build dependencies ... done\r\n  Getting requirements to build wheel ... done\r\n  Preparing metadata (pyproject.toml) ... done\r\nCollecting aiosignal>=1.1.2 (from aiohttp->nakuru-project-idk->-r requirements.txt (line 10))\r\n  Using cached aiosignal-1.3.1-py3-none-any.whl (7.6 kB)\r\nUsing cached requests-2.31.0-py3-none-any.whl (62 kB)\r\nUsing cached yiri_mirai_rc-0.2.7.3-py3-none-any.whl (77 kB)\r\nUsing cached websockets-12.0-cp312-cp312-win_amd64.whl (124 kB)\r\nUsing cached urllib3-2.1.0-py3-none-any.whl (104 kB)\r\nUsing cached Pillow-10.1.0-cp312-cp312-win_amd64.whl (2.6 MB)\r\nUsing cached PyYAML-6.0.1-cp312-cp312-win_amd64.whl (138 kB)\r\nUsing cached aiofiles-23.2.1-py3-none-any.whl (15 kB)\r\nUsing cached charset_normalizer-3.3.2-cp312-cp312-win_amd64.whl (100 kB)\r\nUsing cached pydantic-1.10.13-py3-none-any.whl (158 kB)\r\nUsing cached regex-2023.10.3-cp312-cp312-win_amd64.whl (268 kB)\r\nUsing cached starlette-0.32.0.post1-py3-none-any.whl (70 kB)\r\nUsing cached aiohttp-3.9.1-cp312-cp312-win_amd64.whl (362 kB)\r\nUsing cached async_lru-2.0.4-py3-none-any.whl (6.1 kB)\r\nUsing cached Logbook-1.7.0.post0-cp312-cp312-win_amd64.whl (122 kB)\r\nUsing cached yarl-1.9.3-cp312-cp312-win_amd64.whl (75 kB)\r\nBuilding wheels for collected packages: tiktoken, frozenlist, multidict\r\n  Building wheel for tiktoken (pyproject.toml) ... error\r\n  error: subprocess-exited-with-error\r\n\r\n  × Building wheel for tiktoken (pyproject.toml) did not run successfully.\r\n  │ exit code: 1\r\n  ╰─> [38 lines of output]\r\n      running bdist_wheel\r\n      running build\r\n      running build_py\r\n      creating build\r\n      creating build\\lib.win-amd64-cpython-312\r\n      creating build\\lib.win-amd64-cpython-312\\tiktoken\r\n      copying tiktoken\\core.py -> build\\lib.win-amd64-cpython-312\\tiktoken\r\n      copying tiktoken\\load.py -> build\\lib.win-amd64-cpython-312\\tiktoken\r\n      copying tiktoken\\model.py -> build\\lib.win-amd64-cpython-312\\tiktoken\r\n      copying tiktoken\\registry.py -> build\\lib.win-amd64-cpython-312\\tiktoken\r\n      copying tiktoken\\_educational.py -> build\\lib.win-amd64-cpython-312\\tiktoken\r\n      copying tiktoken\\__init__.py -> build\\lib.win-amd64-cpython-312\\tiktoken\r\n      creating build\\lib.win-amd64-cpython-312\\tiktoken_ext\r\n      copying tiktoken_ext\\openai_public.py -> build\\lib.win-amd64-cpython-312\\tiktoken_ext\r\n      running egg_info\r\n      writing tiktoken.egg-info\\PKG-INFO\r\n      writing dependency_links to tiktoken.egg-info\\dependency_links.txt\r\n      writing requirements to tiktoken.egg-info\\requires.txt\r\n      writing top-level names to tiktoken.egg-info\\top_level.txt\r\n      reading manifest file 'tiktoken.egg-info\\SOURCES.txt'\r\n      reading manifest template 'MANIFEST.in'\r\n      warning: no files found matching 'Makefile'\r\n      adding license file 'LICENSE'\r\n      writing manifest file 'tiktoken.egg-info\\SOURCES.txt'\r\n      copying tiktoken\\py.typed -> build\\lib.win-amd64-cpython-312\\tiktoken\r\n      running build_ext\r\n      running build_rust\r\n      error: can't find Rust compiler\r\n\r\n      If you are using an outdated pip version, it is possible a prebuilt wheel is available for this package but pip is not able to install from it. Installing from the wheel would avoid the need for a Rust compiler.\r\n\r\n      To update pip, run:\r\n\r\n          pip install --upgrade pip\r\n\r\n      and then retry package installation.\r\n\r\n      If you did intend to build this package from source, try installing a Rust compiler from your system package manager and ensure it is on the PATH during installation. Alternatively, rustup (available at https://rustup.rs) is the recommended way to download and update the Rust compiler toolchain.\r\n      [end of output]\r\n\r\n  note: This error originates from a subprocess, and is likely not a problem with pip.\r\n  ERROR: Failed building wheel for tiktoken\r\n  Building wheel for frozenlist (pyproject.toml) ... error\r\n  error: subprocess-exited-with-error\r\n\r\n  × Building wheel for frozenlist (pyproject.toml) did not run successfully.\r\n  │ exit code: 1\r\n  ╰─> [33 lines of output]\r\n      *********************\r\n      * Accelerated build *\r\n      *********************\r\n      running bdist_wheel\r\n      running build\r\n      running build_py\r\n      creating build\r\n      creating build\\lib.win-amd64-cpython-312\r\n      creating build\\lib.win-amd64-cpython-312\\frozenlist\r\n      copying frozenlist\\__init__.py -> build\\lib.win-amd64-cpython-312\\frozenlist\r\n      running egg_info\r\n      writing frozenlist.egg-info\\PKG-INFO\r\n      writing dependency_links to frozenlist.egg-info\\dependency_links.txt\r\n      writing top-level names to frozenlist.egg-info\\top_level.txt\r\n      reading manifest file 'frozenlist.egg-info\\SOURCES.txt'\r\n      reading manifest template 'MANIFEST.in'\r\n      warning: no previously-included files matching '*.pyc' found anywhere in distribution\r\n      warning: no previously-included files matching '*.pyd' found anywhere in distribution\r\n      warning: no previously-included files matching '*.so' found anywhere in distribution\r\n      warning: no previously-included files matching '*.lib' found anywhere in distribution\r\n      warning: no previously-included files matching '*.dll' found anywhere in distribution\r\n      warning: no previously-included files matching '*.a' found anywhere in distribution\r\n      warning: no previously-included files matching '*.obj' found anywhere in distribution\r\n      warning: no previously-included files found matching 'frozenlist\\*.html'\r\n      no previously-included directories found matching 'docs\\_build'\r\n      adding license file 'LICENSE'\r\n      writing manifest file 'frozenlist.egg-info\\SOURCES.txt'\r\n      copying frozenlist\\__init__.pyi -> build\\lib.win-amd64-cpython-312\\frozenlist\r\n      copying frozenlist\\_frozenlist.pyx -> build\\lib.win-amd64-cpython-312\\frozenlist\r\n      copying frozenlist\\py.typed -> build\\lib.win-amd64-cpython-312\\frozenlist\r\n      running build_ext\r\n      building 'frozenlist._frozenlist' extension\r\n      error: Microsoft Visual C++ 14.0 or greater is required. Get it with \"Microsoft C++ Build Tools\": https://visualstudio.microsoft.com/visual-cpp-build-tools/\r\n      [end of output]\r\n\r\n  note: This error originates from a subprocess, and is likely not a problem with pip.\r\n  ERROR: Failed building wheel for frozenlist\r\n  Building wheel for multidict (pyproject.toml) ... error\r\n  error: subprocess-exited-with-error\r\n\r\n  × Building wheel for multidict (pyproject.toml) did not run successfully.\r\n  │ exit code: 1\r\n  ╰─> [74 lines of output]\r\n      *********************\r\n      * Accelerated build *\r\n      *********************\r\n      running bdist_wheel\r\n      running build\r\n      running build_py\r\n      creating build\r\n      creating build\\lib.win-amd64-cpython-312\r\n      creating build\\lib.win-amd64-cpython-312\\multidict\r\n      copying multidict\\_abc.py -> build\\lib.win-amd64-cpython-312\\multidict\r\n      copying multidict\\_compat.py -> build\\lib.win-amd64-cpython-312\\multidict\r\n      copying multidict\\_multidict_base.py -> build\\lib.win-amd64-cpython-312\\multidict\r\n      copying multidict\\_multidict_py.py -> build\\lib.win-amd64-cpython-312\\multidict\r\n      copying multidict\\__init__.py -> build\\lib.win-amd64-cpython-312\\multidict\r\n      running egg_info\r\n      writing multidict.egg-info\\PKG-INFO\r\n      writing dependency_links to multidict.egg-info\\dependency_links.txt\r\n      writing top-level names to multidict.egg-info\\top_level.txt\r\n      reading manifest file 'multidict.egg-info\\SOURCES.txt'\r\n      reading manifest template 'MANIFEST.in'\r\n      warning: no previously-included files matching '*.pyc' found anywhere in distribution\r\n      warning: no previously-included files found matching 'multidict\\_multidict.html'\r\n      warning: no previously-included files found matching 'multidict\\*.so'\r\n      warning: no previously-included files found matching 'multidict\\*.pyd'\r\n      warning: no previously-included files found matching 'multidict\\*.pyd'\r\n      no previously-included directories found matching 'docs\\_build'\r\n      adding license file 'LICENSE'\r\n      writing manifest file 'multidict.egg-info\\SOURCES.txt'\r\n      C:\\Users\\Administrator\\AppData\\Local\\Temp\\2\\pip-build-env-84ns6ak9\\overlay\\Lib\\site-packages\\setuptools\\command\\build_py.py:207: _Warning: Package 'multidict._multilib' is absent from the `packages` configuration.\r\n      !!\r\n\r\n              ********************************************************************************\r\n              ############################\r\n              # Package would be ignored #\r\n              ############################\r\n              Python recognizes 'multidict._multilib' as an importable package[^1],\r\n              but it is absent from setuptools' `packages` configuration.\r\n\r\n              This leads to an ambiguous overall configuration. If you want to distribute this\r\n              package, please make sure that 'multidict._multilib' is explicitly added\r\n              to the `packages` configuration field.\r\n\r\n              Alternatively, you can also rely on setuptools' discovery methods\r\n              (for example by using `find_namespace_packages(...)`/`find_namespace:`\r\n              instead of `find_packages(...)`/`find:`).\r\n\r\n              You can read more about \"package discovery\" on setuptools documentation page:\r\n\r\n              - https://setuptools.pypa.io/en/latest/userguide/package_discovery.html\r\n\r\n              If you don't want 'multidict._multilib' to be distributed and are\r\n              already explicitly excluding 'multidict._multilib' via\r\n              `find_namespace_packages(...)/find_namespace` or `find_packages(...)/find`,\r\n              you can try to use `exclude_package_data`, or `include-package-data=False` in\r\n              combination with a more fine grained `package-data` configuration.\r\n\r\n              You can read more about \"package data files\" on setuptools documentation page:\r\n\r\n              - https://setuptools.pypa.io/en/latest/userguide/datafiles.html\r\n\r\n\r\n              [^1]: For Python, any directory (with suitable naming) can be imported,\r\n                    even if it does not contain any `.py` files.\r\n                    On the other hand, currently there is no concept of package data\r\n                    directory, all directories are treated like packages.\r\n              ********************************************************************************\r\n\r\n      !!\r\n        check.warn(importable)\r\n      copying multidict\\__init__.pyi -> build\\lib.win-amd64-cpython-312\\multidict\r\n      copying multidict\\py.typed -> build\\lib.win-amd64-cpython-312\\multidict\r\n      running build_ext\r\n      building 'multidict._multidict' extension\r\n      error: Microsoft Visual C++ 14.0 or greater is required. Get it with \"Microsoft C++ Build Tools\": https://visualstudio.microsoft.com/visual-cpp-build-tools/\r\n      [end of output]\r\n\r\n  note: This error originates from a subprocess, and is likely not a problem with pip.\r\n  ERROR: Failed building wheel for multidict\r\nFailed to build tiktoken frozenlist multidict\r\nERROR: Could not build wheels for tiktoken, frozenlist, multidict, which is required to install pyproject.toml-based projects",
      "state": "closed",
      "author": "shecong",
      "author_type": "User",
      "created_at": "2023-11-29T09:59:59Z",
      "updated_at": "2023-11-29T12:31:24Z",
      "closed_at": "2023-11-29T12:31:24Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 8,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/621/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/621",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/621",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:10.352620",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "python 3.13 ？可能是版本太高了，建议使用3.9 - 3.11 之间（含）的版本",
          "created_at": "2023-11-29T10:01:01Z"
        },
        {
          "author": "shecong",
          "body": "使用的是安装器自带的3.10的",
          "created_at": "2023-11-29T10:39:54Z"
        },
        {
          "author": "RockChinQ",
          "body": "自动部署的Python是独立的，在安装器同目录下的Python目录下，要安装依赖请使用这个目录下的python.exe可执行文件来执行。",
          "created_at": "2023-11-29T10:41:57Z"
        },
        {
          "author": "shecong",
          "body": "我没有其他操作启动的时候就提示没有 callgpt，有解决方案吗在 2023年11月29日，18:42，Junyan Qin ***@***.***> 写道：﻿\r\n自动部署的Python是独立的，在安装器同目录下的Python目录下，要安装依赖请使用这个目录下的python.exe可执行文件来执行。\r\n\r\n—Reply to this email directly, view it on GitHub, or unsubscribe.You are receiving this because you authored the thread.Message ID: ***@***.***>",
          "created_at": "2023-11-29T10:44:54Z"
        },
        {
          "author": "RockChinQ",
          "body": "> 我没有其他操作启动的时候就提示没有 callgpt，有解决方案吗在 2023年11月29日，18:42，Junyan Qin ***@***.***> 写道：﻿ 自动部署的Python是独立的，在安装器同目录下的Python目录下，要安装依赖请使用这个目录下的python.exe可执行文件来执行。 —Reply to this email directly, view it on GitHub, or unsubscribe.You are receiving this because you authored the thread.Message ID: ***@***.***>\r\n\r\n",
          "created_at": "2023-11-29T10:47:08Z"
        }
      ]
    },
    {
      "issue_number": 620,
      "title": "[Bug]: 启动异常 找不到模块CallingGPT",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\nMirai\n\n### 系统环境\n\nWin11\n\n### Python环境\n\n3.10\n\n### 异常情况\n\n安装完后打开runbot提示此错误\n\n### 报错信息\n\nTraceback (most recent call last):\r\n  File \"E:\\Q-ChatGPT\\QChatGPT\\main.py\", line 218, in start\r\n    import pkg.openai.manager\r\n  File \"E:\\Q-ChatGPT\\QChatGPT\\.\\pkg\\openai\\manager.py\", line 5, in <module>\r\n    from ..openai import keymgr\r\n  File \"E:\\Q-ChatGPT\\QChatGPT\\.\\pkg\\openai\\keymgr.py\", line 5, in <module>\r\n    from ..plugin import host as plugin_host\r\n  File \"E:\\Q-ChatGPT\\QChatGPT\\.\\pkg\\plugin\\host.py\", line 24, in <module>\r\n    from CallingGPT.session.session import Session\r\nModuleNotFoundError: No module named 'CallingGPT'\r\n[2023-11-28 21:33:34.099] main.py (328) - [ERROR] : 初始化失败:No module named 'CallingGPT'",
      "state": "closed",
      "author": "VegaEC",
      "author_type": "User",
      "created_at": "2023-11-28T13:36:12Z",
      "updated_at": "2023-11-28T13:38:49Z",
      "closed_at": "2023-11-28T13:38:44Z",
      "labels": [
        "bug?",
        "duplicated"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/620/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/620",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/620",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:10.931318",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "重复问题，搜一下前几天一个issue吧",
          "created_at": "2023-11-28T13:38:40Z"
        }
      ]
    },
    {
      "issue_number": 616,
      "title": "[Bug]: [ERROR] : 初始化失败:No module named 'CallingGPT'",
      "body": "### 部署方式\n\n手动部署\n\n### 登录框架\n\nMirai\n\n### 系统环境\n\nUbuntu\n\n### Python环境\n\nPython 3.10\n\n### 异常情况\n\n输出完./run-bot.sh,后提示没有模块CallingGPT\n\n### 报错信息\n\nTraceback (most recent call last):\r\n  File \"/root/bot/QChatGPT/main.py\", line 218, in start\r\n    import pkg.openai.manager\r\n  File \"/root/bot/QChatGPT/pkg/openai/manager.py\", line 5, in <module>\r\n    from ..openai import keymgr\r\n  File \"/root/bot/QChatGPT/pkg/openai/keymgr.py\", line 5, in <module>\r\n    from ..plugin import host as plugin_host\r\n  File \"/root/bot/QChatGPT/pkg/plugin/host.py\", line 24, in <module>\r\n    from CallingGPT.session.session import Session\r\nModuleNotFoundError: No module named 'CallingGPT'\r\n[2023-11-26 11:54:30.033] main.py (328) - [ERROR] : 初始化失败:No module named 'CallingGPT'\r\n",
      "state": "closed",
      "author": "JaeHua",
      "author_type": "User",
      "created_at": "2023-11-26T04:00:47Z",
      "updated_at": "2023-11-26T13:58:16Z",
      "closed_at": "2023-11-26T13:58:16Z",
      "labels": [
        "bug?"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/RockChinQ/LangBot/issues/616/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/RockChinQ/LangBot/issues/616",
      "api_url": "https://api.github.com/repos/RockChinQ/LangBot/issues/616",
      "repository": "RockChinQ/LangBot",
      "extraction_date": "2025-06-22T00:25:11.109764",
      "comments": [
        {
          "author": "RockChinQ",
          "body": "你部署方式到底是什么",
          "created_at": "2023-11-26T04:57:42Z"
        },
        {
          "author": "RockChinQ",
          "body": "如果是手动部署，按照手动部署的步骤使用命令`pip install -r requirements.txt`把依赖装全。如果是安装器部署，到`/root/bot/`目录，执行命令`./python/python -m pip install -r QChatGPT/requirements.txt`",
          "created_at": "2023-11-26T13:58:16Z"
        }
      ]
    }
  ]
}