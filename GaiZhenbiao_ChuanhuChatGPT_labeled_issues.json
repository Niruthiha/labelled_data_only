{
  "repository": "GaiZhenbiao/ChuanhuChatGPT",
  "repository_info": {
    "repo": "GaiZhenbiao/ChuanhuChatGPT",
    "stars": 15412,
    "language": "Python",
    "description": "GUI for ChatGPT API and many LLMs. Supports agents, file-based QA, GPT finetuning and query with web search. All with a neat UI.",
    "url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT",
    "topics": [
      "chatbot",
      "chatglm",
      "chatgpt-api",
      "claude",
      "dalle3",
      "ernie",
      "gemini",
      "gemma",
      "inspurai",
      "llama",
      "midjourney",
      "minimax",
      "moss",
      "ollama",
      "qwen",
      "spark",
      "stablelm"
    ],
    "created_at": "2023-03-02T13:37:13Z",
    "updated_at": "2025-06-21T15:33:50Z",
    "search_query": "ollama language:python stars:>2",
    "total_issues_estimate": 148,
    "labeled_issues_estimate": 124,
    "labeling_rate": 84.2,
    "sample_labeled": 32,
    "sample_total": 38,
    "has_issues": true,
    "repo_id": 608660982,
    "default_branch": "main",
    "size": 3259
  },
  "extraction_date": "2025-06-21T23:44:48.693135",
  "extraction_type": "LABELED_ISSUES_ONLY",
  "total_labeled_issues": 500,
  "issues": [
    {
      "issue_number": 1176,
      "title": "[Bug]: 使用第三方汇聚API时，出现不兼容Claude的情况。",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n使用GPT模型没有问题，使用Claude相关模型会有报错。\r\n已经使用12.04号更新的版本依然会有报错。\r\n\n\n### 复现操作\n\n实现了两个厂商的汇聚API，对于Claude模型都有报错。\r\n测试Chat-Next和Lobe没有报错。\r\n麻烦有空可以看下。\r\n\r\n我设置的两个厂商是：\"openai_api_base\": \"https://api.xiaoai.plus/v1\",和\"openai_api_base\": \"https://s.lconai.com/v1\",\r\n\n\n### 错误日志\n\n```shell\n2024-12-05 01:28:46,180 [INFO] [base_model.py:615] 用户的输入为：output\"test\"\r\nTraceback (most recent call last):\r\n  File \"/chu/Dev-ChuanhuChatGPT/ChuanhuChatGPT/modules/models/OpenAIVision.py\", line 244, in _decode_chat_response\r\n    if chunk_length > 6 and \"delta\" in chunk[\"choices\"][0]:\r\nIndexError: list index out of range\r\nERROR: {'id': '', 'object': 'chat.completion.chunk', 'created': 1733362128, 'model': 'claude-3-5-sonnet-20240620', 'system_fingerprint': '', 'choices': [], 'usage': {'prompt_tokens': 21, 'completion_tokens': 0, 'total_tokens': 21, 'prompt_tokens_details': {'cached_tokens': 0, 'text_tokens': 0, 'audio_tokens': 0, 'image_tokens': 0}, 'completion_tokens_details': {'text_tokens': 0, 'audio_tokens': 0}}}\r\nTraceback (most recent call last):\r\n  File \"/chu/Dev-ChuanhuChatGPT/ChuanhuChatGPT/modules/models/OpenAIVision.py\", line 244, in _decode_chat_response\r\n    if chunk_length > 6 and \"delta\" in chunk[\"choices\"][0]:\r\nIndexError: list index out of range\r\nERROR: {'id': '', 'object': 'chat.completion.chunk', 'created': 1733362128, 'model': 'claude-3-5-sonnet-20240620', 'system_fingerprint': '', 'choices': [], 'usage': {'prompt_tokens': 21, 'completion_tokens': 0, 'total_tokens': 21, 'prompt_tokens_details': {'cached_tokens': 0, 'text_tokens': 0, 'audio_tokens': 0, 'image_tokens': 0}, 'completion_tokens_details': {'text_tokens': 0, 'audio_tokens': 0}}}\r\nJSON解析错误,收到的内容: data: [DONE]\r\n2024-12-05 01:28:50,696 [INFO] [base_model.py:703] 回答为：\r\n2024-12-05 01:28:50,696 [INFO] [base_model.py:709] Tokens per second：4.882235892234999\n```\n\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n![image](https://github.com/user-attachments/assets/149329dd-f94d-47e5-b3eb-6550da643af3)\r\n",
      "state": "open",
      "author": "crosswk",
      "author_type": "User",
      "created_at": "2024-12-05T01:40:05Z",
      "updated_at": "2025-04-12T12:52:31Z",
      "closed_at": null,
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1176/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 1
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1176",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1176",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:42:58.170135",
      "comments": [
        {
          "author": "crosswk",
          "body": "还有另外一个报错，和Bug1169好像是一样的。\r\n\r\n2024-12-05 01:22:39,715 [INFO] [base_model.py:612] 用户的输入为：output \"test\"\r\nTraceback (most recent call last):\r\n  File \"/chu/Dev-ChuanhuChatGPT/Prive-ChuanhuChatGPT-Dev/modules/models/OpenAIVision.py\", line 250, in _decode_chat_response\r\n    finish_reason = chunk[\"finish_det",
          "created_at": "2024-12-05T01:43:31Z"
        },
        {
          "author": "umiskky",
          "body": "> ### 这个bug是否已存在现有issue了？\r\n> * [x]  我确认没有已有issue，且已阅读**常见问题**。\r\n> \r\n> ### 错误表现\r\n> 使用GPT模型没有问题，使用Claude相关模型会有报错。 已经使用12.04号更新的版本依然会有报错。\r\n> \r\n> ### 复现操作\r\n> 实现了两个厂商的汇聚API，对于Claude模型都有报错。 测试Chat-Next和Lobe没有报错。 麻烦有空可以看下。\r\n> \r\n> 我设置的两个厂商是：\"openai_api_base\": \"[https://api.xiaoai.plus/v1\",和\"openai_api_base]",
          "created_at": "2025-01-02T06:39:42Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "我看一下",
          "created_at": "2025-01-02T07:07:56Z"
        }
      ]
    },
    {
      "issue_number": 1183,
      "title": "[功能请求]:  是否开发支持deepseeker的功能",
      "body": "### 相关问题\n\n是否开发支持deepseeker的功能？；另外chuanhuchatgpt有2个月没更新了，还会继续过呢更新吗？\n\n### 可能的解决办法\n\n如果可以，我愿协助开发\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "enci2022",
      "author_type": "User",
      "created_at": "2025-02-26T07:05:14Z",
      "updated_at": "2025-04-12T12:28:30Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1183/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1183",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1183",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:42:58.380915",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "DeepSeek的API格式与OpenAI相同，可以使用配置文件的自定义功能加入DeepSeek模型。也许我应该写一个文档示例？",
          "created_at": "2025-02-26T07:57:48Z"
        },
        {
          "author": "changqian9",
          "body": "谢谢 感觉加一个文档会更大降低使用门槛，要不是看issues我也以为不支持",
          "created_at": "2025-02-27T03:08:50Z"
        },
        {
          "author": "enci2022",
          "body": "谢谢，建议加一个deepseeker的py文件把。",
          "created_at": "2025-02-27T03:17:36Z"
        },
        {
          "author": "changqian9",
          "body": "另外建议加入 https://github.com/deepseek-ai/awesome-deepseek-integration?tab=readme-ov-file",
          "created_at": "2025-02-27T03:50:56Z"
        }
      ]
    },
    {
      "issue_number": 1181,
      "title": "[本地部署]: http访问正常，可套反向代理使用https时登录界面css丢失，且无法登录",
      "body": "### 是否已存在现有反馈与解答？\n\n- [x] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [x] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n无反向代理直接访问http正常\n\n前些日子买了1年泛域名证书，就想着给贵项目加个https\n然后我就按照 wiki 配置了反向代理\n能访问，但页面css丢失\n\n![Image](https://github.com/user-attachments/assets/44eab6c3-1982-46a3-a993-9e55038605fb)\n\nF12网络选项卡\n\n![Image](https://github.com/user-attachments/assets/ef1ea1f7-f9fc-4183-8a1a-91a534571c45)\n\n点击登录时会有无响应的login\n\n![Image](https://github.com/user-attachments/assets/e8646854-5b7d-4fa7-94cc-36a34e0e8a26)\n\n请求URL是：我访问的域名+/login\n引用站点策略是：strict-origin-when-cross-origin\n\n请求标头\n\n![Image](https://github.com/user-attachments/assets/15f00f5c-5f3b-47d0-9120-139acb0f0811)\n\n无任何预览\n\n### 复现操作\n\nhttp访问正常无问题\n\n在1panel面板新建一个反向代理网站\n最终指向：内网192.168.1.104:10101\n\n根据wiki给的反向代理配置修改配置文件\n\n站点配置：\n\n![Image](https://github.com/user-attachments/assets/00b5496a-a6df-4886-9946-6dce41a404e6)\n\n全局配置：\n\n![Image](https://github.com/user-attachments/assets/c066e035-f156-42f1-89c3-6d5a02e252ec)\n\n### 错误日志\n\n```shell\nnginx日志：\n\n36.248.157.232 - - [05/Feb/2025:06:54:06 +0000] \"GET / HTTP/2.0\" 200 1752 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:06 +0000] \"GET /assets/index-D6iiusuW.js HTTP/2.0\" 200 12410 \"https://exple/\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:06 +0000] \"GET /file=web_assets/javascript/ChuanhuChat.js?1731738015.0 HTTP/2.0\" 401 30 \"https://exple/\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:06 +0000] \"GET /file=web_assets/javascript/chat-history.js?1731738015.0 HTTP/2.0\" 401 30 \"https://exple/\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:06 +0000] \"GET /file=web_assets/javascript/fake-gradio.js?1731738015.0 HTTP/2.0\" 401 30 \"https://exple/\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:06 +0000] \"GET /file=web_assets/javascript/external-scripts.js?1731738015.0 HTTP/2.0\" 401 30 \"https://exple/\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:06 +0000] \"GET /file=web_assets/javascript/sliders.js?1731738015.0 HTTP/2.0\" 401 30 \"https://exple/\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:06 +0000] \"GET /file=web_assets/javascript/message-button.js?1731738015.0 HTTP/2.0\" 401 30 \"https://exple/\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:06 +0000] \"GET /file=web_assets/javascript/chat-list.js?1731738015.0 HTTP/2.0\" 401 30 \"https://exple/\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:06 +0000] \"GET /file=web_assets/javascript/localization.js?1731738015.0 HTTP/2.0\" 401 30 \"https://exple/\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:06 +0000] \"GET /file=web_assets/javascript/updater.js?1731738015.0 HTTP/2.0\" 401 30 \"https://exple/\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:06 +0000] \"GET /file=web_assets/javascript/file-input.js?1731738015.0 HTTP/2.0\" 401 30 \"https://exple/\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:06 +0000] \"GET /file=web_assets/stylesheet/chatbot.css?1731738015.0 HTTP/2.0\" 401 30 \"https://exple/\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:06 +0000] \"GET /file=web_assets/stylesheet/override-gradio.css?1731738015.0 HTTP/2.0\" 401 30 \"https://exple/\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:06 +0000] \"GET /file=web_assets/stylesheet/ChuanhuChat.css?1731738015.0 HTTP/2.0\" 401 30 \"https://exple/\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:06 +0000] \"GET /file=web_assets/stylesheet/custom-components.css?1731738015.0 HTTP/2.0\" 401 30 \"https://exple/\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:06 +0000] \"GET /file=web_assets/javascript/user-info.js?1731738015.0 HTTP/2.0\" 401 30 \"https://exple/\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:06 +0000] \"GET /file=web_assets/stylesheet/markdown.css?1731738015.0 HTTP/2.0\" 401 30 \"https://exple/\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:06 +0000] \"GET /file=web_assets/javascript/webui.js?1731738015.0 HTTP/2.0\" 401 30 \"https://exple/\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:06 +0000] \"GET /file=web_assets/javascript/utils.js?1731738015.0 HTTP/2.0\" 401 30 \"https://exple/\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:06 +0000] \"GET /assets/index-Ds_LdHYW.css HTTP/2.0\" 200 6235 \"https://exple/\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:06 +0000] \"GET /assets/svelte/svelte.js HTTP/2.0\" 200 33087 \"https://exple/assets/index-D6iiusuW.js\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:06 +0000] \"GET /assets/_commonjsHelpers-BosuxZz1.js HTTP/2.0\" 200 745 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:06 +0000] \"GET /assets/Index-B4pUrfBk.css HTTP/2.0\" 200 3627 \"https://exple/\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:06 +0000] \"GET /assets/Index-DvJ399W-.js HTTP/2.0\" 200 46634 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:06 +0000] \"GET /favicon.ico HTTP/2.0\" 200 76550 \"https://exple/\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:06 +0000] \"GET /assets/index-Ds_LdHYW.css HTTP/2.0\" 200 6235 \"https://exple/\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:07 +0000] \"GET /assets/Index-B0JJ6p9c.css HTTP/2.0\" 200 424 \"https://exple/\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:07 +0000] \"GET /assets/Login-CiRbhdJk.js HTTP/2.0\" 200 2321 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:07 +0000] \"GET /assets/Index-DDCF2BFd.js HTTP/2.0\" 200 791 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:07 +0000] \"GET /assets/Textbox-OSHpBx5r.js HTTP/2.0\" 200 4038 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:07 +0000] \"GET /assets/Info-Cs8uP4Sq.js HTTP/2.0\" 200 784 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:07 +0000] \"GET /assets/Check-Ck0iADAu.js HTTP/2.0\" 200 606 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:07 +0000] \"GET /assets/Index-INgKs-Lw.js HTTP/2.0\" 200 1091 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:07 +0000] \"GET /assets/Login-BCwzjozv.css HTTP/2.0\" 200 578 \"https://exple/\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:07 +0000] \"GET /assets/Copy-ZPOKSMtK.js HTTP/2.0\" 200 686 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:07 +0000] \"GET /assets/Example-Cj3ii62O.css HTTP/2.0\" 200 149 \"https://exple/\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:07 +0000] \"GET /assets/BlockTitle-BG3S3JH7.js HTTP/2.0\" 200 1127 \"-\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:07 +0000] \"GET /assets/Textbox-D8IAzrZj.css HTTP/2.0\" 200 554 \"https://exple/\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n36.248.157.232 - - [05/Feb/2025:06:54:07 +0000] \"GET /assets/Index-CptIZeFZ.css HTTP/2.0\" 200 497 \"https://exple/\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0\" \"-\"\n\n贵项目没有任何报错\n```\n\n### 运行环境\n\n```markdown\n运行贵项目使用的\n- OS: Windows 10 22H2\n- Browser: Microsoft Edge\n- Gradio version: 4.29.0\n- Python version: 3.9\n反向代理使用的\n- OS: Debian/GNU Linux 11.7\n- 1Panel: v1.10.23-lts\n- OpenResty(nginx): 1.21.4.3-3-3-focal\n```\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "Azusa-mikan",
      "author_type": "User",
      "created_at": "2025-02-05T06:58:22Z",
      "updated_at": "2025-03-12T12:19:38Z",
      "closed_at": null,
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1181/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1181",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1181",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:42:58.574296",
      "comments": [
        {
          "author": "shiyanghong",
          "body": "走默认443端口",
          "created_at": "2025-03-10T01:37:12Z"
        },
        {
          "author": "Azusa-mikan",
          "body": "> 走默认443端口\n\n这是必须的吗？",
          "created_at": "2025-03-12T12:19:36Z"
        }
      ]
    },
    {
      "issue_number": 1184,
      "title": "[Bug]: DeepSeek官方API接入返回报错",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [x] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n2.配置完成，调用私有化部署过DeepSeek-R1-14B可以正常使用，\n然后把配置里面url,key换成了官方的地址和key，就报错。\n\n\n### 复现操作\n\n\n\t\"extra_model_metadata\": {\n\t\t  \"DeepSeek-R1\": {\n\t\t\t\t\"model_name\": \"deepseek-reasoner\",\n\t\t\t\t\"description\": \"This is DeepSeek's powerful open source LLM.\",\n\t\t\t\t\"model_type\": \"OpenAIVision\",\n\t\t\t\t\"multimodal\": false,\n\t\t\t\t\"api_host\": \"https://api.deepseek.com/v1\",\n\t\t\t\t\"api_key\": \"sk-355xxxxxxx\",\n\t\t\t\t\"token_limit\": 32760,\n\t\t\t\t\"temperature\": 0.6,\n\t\t\t\t\"system\": \"You are a helpful AI assistant.\",\n\t\t\t\t\"placeholder\": {\n\t\t\t\t\t\"logo\": \"https://avatars.githubusercontent.com/u/148330874\"\n\t\t\t\t}\n\t\t  }\n\t}\n\n### 错误日志\n\n```shell\nJSON解析错误,收到的内容: {\"error\":{\"message\":\"deepseek-reasoner does not support successive user or assistant messages (messages[1] and messages[2] in your input). You should interleave the user/assistant messages in the message sequence.\",\"type\":\"invalid_request_error\",\"param\":null,\"code\":\"invalid_request_error\"}}\nTraceback (most recent call last):\n  File \"/Users/weisong/code/AI/ChuanhuChatGPT/modules/models/base_model.py\", line 686, in predict\n    for chatbot, status_text in iter:\n  File \"/Users/weisong/code/AI/ChuanhuChatGPT/modules/models/base_model.py\", line 378, in stream_next_chatbot\n    for partial_text in stream_iter:\n  File \"/Users/weisong/code/AI/ChuanhuChatGPT/modules/models/OpenAIVision.py\", line 50, in get_answer_stream_iter\n    for i in iter:\n  File \"/Users/weisong/code/AI/ChuanhuChatGPT/modules/models/OpenAIVision.py\", line 263, in _decode_chat_response\n    raise Exception(error_msg)\nException: {\"error\":{\"message\":\"deepseek-reasoner does not support successive user or assistant messages (messages[1] and messages[2] in your input). You should interleave the user/assistant messages in the message sequence.\",\"type\":\"invalid_request_error\",\"param\":null,\"code\":\"invalid_request_error\"}}\n```\n\n### 运行环境\n\n- OS:  win/mac 都试过\n- Browser: \n- Gradio version: \n- Python version: \n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "weisong82",
      "author_type": "User",
      "created_at": "2025-02-28T02:54:47Z",
      "updated_at": "2025-03-09T17:00:18Z",
      "closed_at": "2025-03-09T17:00:17Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1184/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1184",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1184",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:42:58.800705",
      "comments": [
        {
          "author": "weisong82",
          "body": "\"error\":{\"message\":\"deepseek-reasoner does not support successive user or assistant messages (messages[1] and messages[2] in your input). You should interleave the user/assistant messages in the message sequence.\"",
          "created_at": "2025-02-28T02:57:18Z"
        },
        {
          "author": "lingmiao",
          "body": "这个模型不对\"model_name\": \"deepseek-reasoner\",",
          "created_at": "2025-03-04T02:13:43Z"
        },
        {
          "author": "weisong82",
          "body": "> 这个模型不对\"model_name\": \"deepseek-reasoner\",\n\nhttps://api-docs.deepseek.com/\n\n* To be compatible with OpenAI, you can also use https://api.deepseek.com/v1 as the base_url. But note that the v1 here has NO relationship with the model's version.\n\n* The deepseek-chat model has been upgraded to DeepSeek-V",
          "created_at": "2025-03-04T04:17:08Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "现在应该解决了\nhttps://github.com/GaiZhenbiao/ChuanhuChatGPT/commit/466dfb342cd25dc6e295311f6322f0fac4216d9c",
          "created_at": "2025-03-09T17:00:17Z"
        }
      ]
    },
    {
      "issue_number": 1177,
      "title": "[Bug]: 有时出现空消息且页面无报错",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n![image](https://github.com/user-attachments/assets/bb3113b6-845e-45a8-bb56-553942345235)\r\n\n\n### 复现操作\n\n不断打开新对话跟gpt打招呼，有时就会出现\n\n### 错误日志\n\n```shell\n2024-12-17 10:56:08,092 [INFO] [_client.py:1026] HTTP Request: GET https://api.gradio.app/gradio-messaging/en \"HTTP/1.1 200 OK\"\r\n2024-12-17 10:56:09,521 [INFO] [config.py:118] 已设置可用模型：['GPT3.5 Turbo', 'GPT-4o', 'o1-preview']\r\n2024-12-17 10:56:09,521 [INFO] [config.py:123] 已添加额外的模型：[]\r\n2024-12-17 10:56:09,521 [INFO] [config.py:202] OpenAI API Base set to: https://api.zhizengzeng.com/v1\r\n2024-12-17 10:56:09,521 [INFO] [config.py:331] 默认模型设置为了：GPT3.5 Turbo\r\n2024-12-17 10:56:10,612 [INFO] [utils.py:160] NumExpr defaulting to 1 threads.\r\nfatal: detected dubious ownership in repository at '/home/ChuanhuChatGPT'\r\nTo add an exception for this directory, call:\r\n\r\n\tgit config --global --add safe.directory /home/ChuanhuChatGPT\r\nfatal: detected dubious ownership in repository at '/home/ChuanhuChatGPT'\r\nTo add an exception for this directory, call:\r\n\r\n\tgit config --global --add safe.directory /home/ChuanhuChatGPT\r\n2024-12-17 10:57:02,404 [INFO] [ChuanhuChatbot.py:506] Get User Name: chen_ql\r\n2024-12-17 10:57:02,405 [INFO] [models.py:38] 正在加载 OpenAI 模型: GPT3.5 Turbo\r\n2024-12-17 10:57:02,408 [INFO] [models.py:149] 模型设置为了： GPT3.5 Turbo\r\n2024-12-17 10:59:22,113 [INFO] [models.py:38] 正在加载 OpenAI 模型: GPT-4o\r\n2024-12-17 10:59:22,115 [INFO] [models.py:149] 模型设置为了： GPT-4o\r\n2024-12-17 10:59:30,542 [INFO] [base_model.py:615] 用户chen_ql的输入为：\u001b[34m你好\u001b[0m\r\n2024-12-17 10:59:32,372 [INFO] [base_model.py:703] 回答为：\u001b[34m你好！有什么我可以帮助你的吗？\u001b[0m\r\n2024-12-17 10:59:32,372 [INFO] [base_model.py:709] Tokens per second：16.959412610912512\r\n2024-12-17 10:59:37,105 [INFO] [base_model.py:615] 用户chen_ql的输入为：\u001b[34m你好\u001b[0m\r\nTraceback (most recent call last):\r\n  File \"/home/ChuanhuChatGPT/modules/models/OpenAIVision.py\", line 250, in _decode_chat_response\r\n    finish_reason = chunk[\"finish_details\"]\r\nKeyError: 'finish_details'\r\nTraceback (most recent call last):\r\n  File \"/home/ChuanhuChatGPT/modules/models/OpenAIVision.py\", line 250, in _decode_chat_response\r\n    finish_reason = chunk[\"finish_details\"]\r\nKeyError: 'finish_details'\r\nTraceback (most recent call last):\r\n  File \"/home/ChuanhuChatGPT/modules/models/OpenAIVision.py\", line 250, in _decode_chat_response\r\n    finish_reason = chunk[\"finish_details\"]\r\nKeyError: 'finish_details'\r\nTraceback (most recent call last):\r\n  File \"/home/ChuanhuChatGPT/modules/models/OpenAIVision.py\", line 250, in _decode_chat_response\r\n    finish_reason = chunk[\"finish_details\"]\r\nKeyError: 'finish_details'\r\nTraceback (most recent call last):\r\n  File \"/home/ChuanhuChatGPT/modules/models/OpenAIVision.py\", line 250, in _decode_chat_response\r\n    finish_reason = chunk[\"finish_details\"]\r\nKeyError: 'finish_details'\r\nTraceback (most recent call last):\r\n  File \"/home/ChuanhuChatGPT/modules/models/OpenAIVision.py\", line 250, in _decode_chat_response\r\n    finish_reason = chunk[\"finish_details\"]\r\nKeyError: 'finish_details'\r\nTraceback (most recent call last):\r\n  File \"/home/ChuanhuChatGPT/modules/models/OpenAIVision.py\", line 250, in _decode_chat_response\r\n    finish_reason = chunk[\"finish_details\"]\r\nKeyError: 'finish_details'\r\nTraceback (most recent call last):\r\n  File \"/home/ChuanhuChatGPT/modules/models/OpenAIVision.py\", line 250, in _decode_chat_response\r\n    finish_reason = chunk[\"finish_details\"]\r\nKeyError: 'finish_details'\r\nTraceback (most recent call last):\r\n  File \"/home/ChuanhuChatGPT/modules/models/OpenAIVision.py\", line 250, in _decode_chat_response\r\n    finish_reason = chunk[\"finish_details\"]\r\nKeyError: 'finish_details'\r\nTraceback (most recent call last):\r\n  File \"/home/ChuanhuChatGPT/modules/models/OpenAIVision.py\", line 250, in _decode_chat_response\r\n    finish_reason = chunk[\"finish_details\"]\r\nKeyError: 'finish_details'\r\nTraceback (most recent call last):\r\n  File \"/home/ChuanhuChatGPT/modules/models/OpenAIVision.py\", line 250, in _decode_chat_response\r\n    finish_reason = chunk[\"finish_details\"]\r\nKeyError: 'finish_details'\r\n2024-12-17 10:59:41,836 [INFO] [base_model.py:703] 回答为：\u001b[34m\u001b[0m\r\n2024-12-17 10:59:41,836 [INFO] [base_model.py:709] Tokens per second：4.439494087378722\n```\n\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "hengyanqwe",
      "author_type": "User",
      "created_at": "2024-12-17T03:00:47Z",
      "updated_at": "2025-02-26T14:22:08Z",
      "closed_at": "2025-02-26T14:22:08Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1177/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1177",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1177",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:42:58.974980",
      "comments": [
        {
          "author": "hengyanqwe",
          "body": "提议：加一条browserconsole的配置，输出接收到的json信息，不然我都不好排查是川虎chat的原因还是api提供商的原因",
          "created_at": "2024-12-17T03:04:52Z"
        },
        {
          "author": "crosswk",
          "body": "和已有的Bug1169、Bug1176是一样的，我按照Bug1169作者的描述，加了几行代码，暂时解决了这个问题。",
          "created_at": "2024-12-19T09:24:56Z"
        }
      ]
    },
    {
      "issue_number": 1179,
      "title": "[功能请求]: 可以考虑加一个Gemini的baseurl配置吗？",
      "body": "### 相关问题\n\n可以考虑加一个Gemini的baseurl配置吗？\n\n### 可能的解决办法\n\n像\"openai_api_base\": \"https://api.zhizengzeng.com\",一样加个\"gemini_api_base\": \"https://api.zhizengzeng.com\",\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "hengyanqwe",
      "author_type": "User",
      "created_at": "2024-12-24T01:25:35Z",
      "updated_at": "2025-02-26T11:02:28Z",
      "closed_at": "2025-02-26T11:02:27Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1179/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1179",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1179",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:42:59.143857",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "现在可以在`config.json`中设置`google_genai_api_host`\n\nhttps://github.com/GaiZhenbiao/ChuanhuChatGPT/commit/eece834d7f131754efe2a12a2863886c4124cc33",
          "created_at": "2025-02-26T11:02:27Z"
        }
      ]
    },
    {
      "issue_number": 1178,
      "title": "[功能请求]:  高价收购基于该项目二次开发的商业系统，公司内部使用，绝不对外开放",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n1\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "RolloTomasiii",
      "author_type": "User",
      "created_at": "2024-12-19T04:33:12Z",
      "updated_at": "2025-02-02T00:46:27Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1178/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 1
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1178",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1178",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:42:59.294400",
      "comments": [
        {
          "author": "RolloTomasiii",
          "body": "q",
          "created_at": "2024-12-19T04:33:33Z"
        },
        {
          "author": "crosswk",
          "body": "感觉这个项目还是很有潜力的，相对Lobe，我更喜欢这个项目，Lobe都成功商业化了，这个更有商业化的前景，但是感觉作者目前没有把更多的精力放在这个项目了。",
          "created_at": "2024-12-19T09:26:53Z"
        },
        {
          "author": "leopeng1995",
          "body": "因为这种项目社区有很多，如果有商业化需求的公司很可能就自己开发了，而且这类项目琐碎的细节特别多，基于一个相对成熟做二次开发是最好的。",
          "created_at": "2025-02-02T00:46:26Z"
        }
      ]
    },
    {
      "issue_number": 1114,
      "title": "[本地部署]: chatglm2-6b本地模型无法使用，确认是在models/文件夹下",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\nai提示说是值与MODEL_METADATA字典不匹配，但是并没有字符上的异常。\n\n### 复现操作\n\n正常部署，创建虚拟环境，git抓取并配置使用chatglm2-6b模型。\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/154309554/59f6e06e-d583-48d9-a825-9acb5e6831cd)\r\n\n\n### 错误日志\n\n```shell\nOpening ChuanhuChatGPT...\r\nvenv \"F:\\APPLICATION\\amaconda\\envs\\ChuanhuChat\\Python.exe\"\r\n2024-05-06 23:31:39,573 [INFO] [_client.py:1026] HTTP Request: GET https://api.gradio.app/gradio-messaging/en \"HTTP/1.1 200 OK\"\r\n2024-05-06 23:31:40,834 [INFO] [config.py:327] 默认模型设置为了：chatglm2-6b\r\n2024-05-06 23:31:42,142 [INFO] [utils.py:148] Note: NumExpr detected 12 cores but \"NUMEXPR_MAX_THREADS\" not set, so enforcing safe limit of 8.\r\n2024-05-06 23:31:42,143 [INFO] [utils.py:161] NumExpr defaulting to 8 threads.\r\nTraceback (most recent call last):\r\n  File \"F:\\CodeAPP\\MapGBT\\ChuanhuChatGPT\\ChuanhuChatbot.py\", line 204, in <module>\r\n    value=i18n(MODEL_METADATA[MODELS[DEFAULT_MODEL]][\"description\"]),\r\nKeyError: 'chatglm2-6b'\n```\n\n\n### 运行环境\n\n```markdown\n- OS: windows 11 23H2\r\n- Browser: edge\r\n- Gradio version: 4.26.0\r\n- Python version: 3.10.14\n```\n\n\n### 补充说明\n\ncuda版本3.11",
      "state": "open",
      "author": "MoonShadow1976",
      "author_type": "User",
      "created_at": "2024-05-06T15:47:31Z",
      "updated_at": "2024-11-16T13:15:04Z",
      "closed_at": null,
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1114/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1114",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1114",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:04.500359",
      "comments": [
        {
          "author": "panp4n",
          "body": "一样的问题，请问解决了吗？",
          "created_at": "2024-09-19T03:30:16Z"
        },
        {
          "author": "MoonShadow1976",
          "body": "> 一样的问题，请问解决了吗？\r\n\r\n没，我改用ollama了",
          "created_at": "2024-10-03T12:28:40Z"
        },
        {
          "author": "phoenixlucky",
          "body": "我都也是这个问题",
          "created_at": "2024-11-16T13:15:03Z"
        }
      ]
    },
    {
      "issue_number": 1174,
      "title": "[Bug]: 1. 大模型回答时无法滚动  2. 回答时切换聊天窗口回答文本位置会发生混乱",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n**模型：** azure openai\r\n### bug1\r\n**表现：** 大模型回答时，聊天界面无法滚动\r\n\r\n### bug2\r\n**表现：** 大模型回答时，切换聊天窗口会导致聊天界面混乱\r\n**截图：**\r\n![image](https://github.com/user-attachments/assets/8706afef-1707-45da-8662-d29e757fc947)\r\n\n\n### 复现操作\n\n1. 正常提问\n\n### 错误日志\n\n```shell\n无\n```\n\n\n### 运行环境\n\n- OS:  ubuntu 22\r\n- Browser:  Chrome\r\n- Gradio version:  4.29.0\r\n- Python version:  3.9\r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "TownsendWu",
      "author_type": "User",
      "created_at": "2024-11-04T08:52:05Z",
      "updated_at": "2024-11-13T16:23:47Z",
      "closed_at": "2024-11-13T16:23:47Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1174/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1174",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1174",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:04.696957",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "我也没太搞明白为啥第一个问题为什么会出现。\r\n\r\n不过第二个问题的一个解决办法是，在生成时禁用切换聊天窗口。我觉得这个解决办法是可以接受的，可以避免很多潜在的bug。",
          "created_at": "2024-11-13T15:30:34Z"
        },
        {
          "author": "Keldos-Li",
          "body": "第一个问题的原因是回答时上方会有一个透明的gradio层用来提示状态，现已后置。",
          "created_at": "2024-11-13T16:21:50Z"
        },
        {
          "author": "Keldos-Li",
          "body": "如有更多反馈，欢迎继续回复或提交新的 issue  (´・ω・`)",
          "created_at": "2024-11-13T16:23:47Z"
        }
      ]
    },
    {
      "issue_number": 1173,
      "title": "[Bug]: Azure OpenAI 回复失败",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n2024-10-22 17:46:45,174 [INFO] [models.py:149] 模型设置为了： Azure OpenAI\r\n2024-10-22 17:46:50,863 [INFO] [base_model.py:615] 用户的输入为：who are you\r\nE:\\workspace\\ChuanhuChatGPT\\ChuanhuChat\\Lib\\site-packages\\langchain_core\\_api\\deprecation.py:119: LangChainDeprecationWarning: The method `BaseChatModel.__call__` was deprecated in langchain-core 0.1.7 and will be removed in 0.3.0. Use invoke instead.\r\n  warn_deprecated(\r\nException in thread Thread-9 (thread_func):\r\nTraceback (most recent call last):\r\n  File \"D:\\software\\anaconda3\\Lib\\threading.py\", line 1038, in _bootstrap_inner\r\n    self.run()\r\n  File \"D:\\software\\anaconda3\\Lib\\threading.py\", line 975, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"E:\\workspace\\ChuanhuChatGPT\\modules\\models\\base_model.py\", line 1240, in thread_func\r\n    self.model(\r\n  File \"E:\\workspace\\ChuanhuChatGPT\\ChuanhuChat\\Lib\\site-packages\\langchain_core\\_api\\deprecation.py\", line 148, in warning_emitting_wrapper\r\n    return wrapped(*args, **kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"E:\\workspace\\ChuanhuChatGPT\\ChuanhuChat\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 808, in __call__\r\n    generation = self.generate(\r\n                 ^^^^^^^^^^^^^^\r\n  File \"E:\\workspace\\ChuanhuChatGPT\\ChuanhuChat\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 421, in generate\r\n    raise e\r\n  File \"E:\\workspace\\ChuanhuChatGPT\\ChuanhuChat\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 411, in generate\r\n    self._generate_with_cache(\r\n  File \"E:\\workspace\\ChuanhuChatGPT\\ChuanhuChat\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 632, in _generate_with_cache\r\n    result = self._generate(\r\n             ^^^^^^^^^^^^^^^\r\n  File \"E:\\workspace\\ChuanhuChatGPT\\ChuanhuChat\\Lib\\site-packages\\langchain_community\\chat_models\\openai.py\", line 434, in _generate\r\n    return generate_from_stream(stream_iter)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"E:\\workspace\\ChuanhuChatGPT\\ChuanhuChat\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 67, in generate_from_stream\r\n    for chunk in stream:\r\n  File \"E:\\workspace\\ChuanhuChatGPT\\ChuanhuChat\\Lib\\site-packages\\langchain_community\\chat_models\\openai.py\", line 398, in _stream\r\n    for chunk in self.completion_with_retry(\r\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"E:\\workspace\\ChuanhuChatGPT\\ChuanhuChat\\Lib\\site-packages\\langchain_community\\chat_models\\openai.py\", line 356, in completion_with_retry\r\n    return self.client.create(**kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"E:\\workspace\\ChuanhuChatGPT\\ChuanhuChat\\Lib\\site-packages\\openai\\_utils\\_utils.py\", line 275, in wrapper\r\n    return func(*args, **kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^\r\n  File \"E:\\workspace\\ChuanhuChatGPT\\ChuanhuChat\\Lib\\site-packages\\openai\\resources\\chat\\completions.py\", line 667, in create\r\n    return self._post(\r\n           ^^^^^^^^^^^\r\n  File \"E:\\workspace\\ChuanhuChatGPT\\ChuanhuChat\\Lib\\site-packages\\openai\\_base_client.py\", line 1213, in post\r\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\r\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"E:\\workspace\\ChuanhuChatGPT\\ChuanhuChat\\Lib\\site-packages\\openai\\_base_client.py\", line 902, in request\r\n    return self._request(\r\n           ^^^^^^^^^^^^^^\r\n  File \"E:\\workspace\\ChuanhuChatGPT\\ChuanhuChat\\Lib\\site-packages\\openai\\_base_client.py\", line 993, in _request\r\n    raise self._make_status_error_from_response(err.response) from None\r\nopenai.NotFoundError: Error code: 404 - {'error': {'code': '404', 'message': 'Resource not found'}}\n\n### 复现操作\n\n流程ok\n\n### 错误日志\n\n```shell\n2024-10-22 17:46:45,174 [INFO] [models.py:149] 模型设置为了： Azure OpenAI\r\n2024-10-22 17:46:50,863 [INFO] [base_model.py:615] 用户的输入为：who are you\r\nE:\\workspace\\ChuanhuChatGPT\\ChuanhuChat\\Lib\\site-packages\\langchain_core\\_api\\deprecation.py:119: LangChainDeprecationWarning: The method `BaseChatModel.__call__` was deprecated in langchain-core 0.1.7 and will be removed in 0.3.0. Use invoke instead.\r\n  warn_deprecated(\r\nException in thread Thread-9 (thread_func):\r\nTraceback (most recent call last):\r\n  File \"D:\\software\\anaconda3\\Lib\\threading.py\", line 1038, in _bootstrap_inner\r\n    self.run()\r\n  File \"D:\\software\\anaconda3\\Lib\\threading.py\", line 975, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"E:\\workspace\\ChuanhuChatGPT\\modules\\models\\base_model.py\", line 1240, in thread_func\r\n    self.model(\r\n  File \"E:\\workspace\\ChuanhuChatGPT\\ChuanhuChat\\Lib\\site-packages\\langchain_core\\_api\\deprecation.py\", line 148, in warning_emitting_wrapper\r\n    return wrapped(*args, **kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"E:\\workspace\\ChuanhuChatGPT\\ChuanhuChat\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 808, in __call__\r\n    generation = self.generate(\r\n                 ^^^^^^^^^^^^^^\r\n  File \"E:\\workspace\\ChuanhuChatGPT\\ChuanhuChat\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 421, in generate\r\n    raise e\r\n  File \"E:\\workspace\\ChuanhuChatGPT\\ChuanhuChat\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 411, in generate\r\n    self._generate_with_cache(\r\n  File \"E:\\workspace\\ChuanhuChatGPT\\ChuanhuChat\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 632, in _generate_with_cache\r\n    result = self._generate(\r\n             ^^^^^^^^^^^^^^^\r\n  File \"E:\\workspace\\ChuanhuChatGPT\\ChuanhuChat\\Lib\\site-packages\\langchain_community\\chat_models\\openai.py\", line 434, in _generate\r\n    return generate_from_stream(stream_iter)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"E:\\workspace\\ChuanhuChatGPT\\ChuanhuChat\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 67, in generate_from_stream\r\n    for chunk in stream:\r\n  File \"E:\\workspace\\ChuanhuChatGPT\\ChuanhuChat\\Lib\\site-packages\\langchain_community\\chat_models\\openai.py\", line 398, in _stream\r\n    for chunk in self.completion_with_retry(\r\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"E:\\workspace\\ChuanhuChatGPT\\ChuanhuChat\\Lib\\site-packages\\langchain_community\\chat_models\\openai.py\", line 356, in completion_with_retry\r\n    return self.client.create(**kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"E:\\workspace\\ChuanhuChatGPT\\ChuanhuChat\\Lib\\site-packages\\openai\\_utils\\_utils.py\", line 275, in wrapper\r\n    return func(*args, **kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^\r\n  File \"E:\\workspace\\ChuanhuChatGPT\\ChuanhuChat\\Lib\\site-packages\\openai\\resources\\chat\\completions.py\", line 667, in create\r\n    return self._post(\r\n           ^^^^^^^^^^^\r\n  File \"E:\\workspace\\ChuanhuChatGPT\\ChuanhuChat\\Lib\\site-packages\\openai\\_base_client.py\", line 1213, in post\r\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\r\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"E:\\workspace\\ChuanhuChatGPT\\ChuanhuChat\\Lib\\site-packages\\openai\\_base_client.py\", line 902, in request\r\n    return self._request(\r\n           ^^^^^^^^^^^^^^\r\n  File \"E:\\workspace\\ChuanhuChatGPT\\ChuanhuChat\\Lib\\site-packages\\openai\\_base_client.py\", line 993, in _request\r\n    raise self._make_status_error_from_response(err.response) from None\r\nopenai.NotFoundError: Error code: 404 - {'error': {'code': '404', 'message': 'Resource not found'}}\n```\n\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "g-wellsa",
      "author_type": "User",
      "created_at": "2024-10-22T09:52:19Z",
      "updated_at": "2024-10-23T12:06:13Z",
      "closed_at": null,
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1173/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1173",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1173",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:04.865943",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "微软停止了中国区个人Azure OpenAI的服务",
          "created_at": "2024-10-23T00:16:41Z"
        },
        {
          "author": "g-wellsa",
          "body": "> 微软停止了中国区个人Azure OpenAI的服务\r\n\r\nno no no 我在chatbox 上都可以\r\n",
          "created_at": "2024-10-23T12:06:12Z"
        }
      ]
    },
    {
      "issue_number": 1169,
      "title": "[Bug]: 使用自定义 OpenAI API 时，流式输出的最后一条会被丢弃，导致回答不完整",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n### Bug现象\r\n流式输出末尾不完整\r\n\r\n#### 控制台log\r\n\r\n```\r\n2024-09-24 10:40:59,532 [DEBUG] [OpenAIVision.py:160] [{'role': 'user', 'content': 'hi'}]\r\n2024-09-24 10:41:00,515 [INFO] [base_model.py:703] 回答为：Hello! ... . How can I assis\r\n```\r\n末尾 `assis` 被截断。\r\n\r\n#### 流式 response 内容\r\n\r\n我手动在`OpenAIVisionClient._decode_chat_response()` [#L238](https://github.com/GaiZhenbiao/ChuanhuChatGPT/blob/3856d4f559f7ec5570ace6a92f0cc4017b5595cb/modules/models/OpenAIVision.py#L238) 添加了 log: \r\n`logging.warning(f\"***** {chunk['choices'][0]}\")`\r\n```\r\n2024-09-24 10:41:00,432 [DEBUG] [OpenAIVision.py:246] ***** {'index': 0, 'delta': {'content': 'How '}, 'finish_reason': None}\r\n2024-09-24 10:41:00,448 [DEBUG] [OpenAIVision.py:246] ***** {'index': 0, 'delta': {'content': 'can '}, 'finish_reason': None}\r\n2024-09-24 10:41:00,469 [DEBUG] [OpenAIVision.py:246] ***** {'index': 0, 'delta': {'content': 'I assi'}, 'finish_reason': None}\r\n2024-09-24 10:41:00,482 [DEBUG] [OpenAIVision.py:246] ***** {'index': 0, 'delta': {'content': 's'}, 'finish_reason': None}\r\n2024-09-24 10:41:00,515 [DEBUG] [OpenAIVision.py:246] ***** {'index': 0, 'delta': {'content': 't you today?'}, 'finish_reason': 'stop'}\r\n```\r\n\r\n可见，最后一条（包含 'finish_reason': 'stop' 的一条）response 的 delta.content 丢失了。\r\n\r\n虽然 OpenAI 官方API中可能不会遇到此问题，但是建议可以考虑此情况，加强对 API 的兼容性\r\n\r\n### 解决办法\r\n我暂时的解决方法，在 [OpenAIVision.py#L251](https://github.com/GaiZhenbiao/ChuanhuChatGPT/blob/3856d4f559f7ec5570ace6a92f0cc4017b5595cb/modules/models/OpenAIVision.py#L251) 添加判断，如果有 content:\r\n```python\r\nif finish_reason == \"stop\":\r\n    if (\"content\" in chunk[\"choices\"][0][\"delta\"] and chunk[\"choices\"][0][\"delta\"][\"content\"] is not None):\r\n        yield chunk[\"choices\"][0][\"delta\"][\"content\"]\r\n```\n\n### 复现操作\n\n1. 正常本地部署 (pip)\r\n2. 通过 OpenAI API 连接本地大模型\r\n3. 随意提问\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: Windows 10\r\n- Browser: /\r\n- Gradio version: /\r\n- Python version: 3.11\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "jwang-paradise",
      "author_type": "User",
      "created_at": "2024-09-24T04:03:45Z",
      "updated_at": "2024-10-22T02:28:14Z",
      "closed_at": null,
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1169/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1169",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1169",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:05.027442",
      "comments": [
        {
          "author": "hyyz17200",
          "body": "我也有类似的问题\r\n\r\n`Oct 21 22:23:33  python[493862]:   File \"/media/mydata/ChuanhuChatGPT/modules/models/OpenAIVision.py\", line 250, in _decode_chat_response\r\nOct 21 22:23:33  python[493862]:     finish_reason = chunk[\"finish_details\"]\r\nOct 21 22:23:33  python[493862]:                     ~~~~~^^^^^^^^^^^^",
          "created_at": "2024-10-22T02:27:59Z"
        }
      ]
    },
    {
      "issue_number": 1168,
      "title": "[Bug]: 使用docker + nginx部署后 样式有问题",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [x] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n![image](https://github.com/user-attachments/assets/71bae7e8-f478-44f2-a7f1-b094cbc6f673)\r\n![image](https://github.com/user-attachments/assets/5410a534-4e96-49ed-b9dd-1e06811007ae)\r\n![image](https://github.com/user-attachments/assets/2197f09e-c024-487a-9b80-a4f8660350ac)\r\n\n\n### 复现操作\n\n1. docker拉取镜像启动成功\r\n2. nginx配置\r\n3. 访问界面就是这样用不了\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [x] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "cone387",
      "author_type": "User",
      "created_at": "2024-09-23T06:58:57Z",
      "updated_at": "2024-09-29T01:07:54Z",
      "closed_at": null,
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1168/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1168",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1168",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:05.188509",
      "comments": []
    },
    {
      "issue_number": 1161,
      "title": "[远程部署]: 界面打开后显示Connection errored out",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n终端 `python ChuanhuChatbot.py` 启动服务后，界面报错:\r\n\r\n![image](https://github.com/user-attachments/assets/faae3cf3-b78e-467c-b5db-8b6ba4d565de)\r\n\n\n### 复现操作\n\n我的操作如下:\r\n\r\n1. 拉取项目(2024年9月13日拉取)\r\n\r\n```bash\r\ngit clone https://github.com/GaiZhenbiao/ChuanhuChatGPT.git\r\ncd ChuanhuChatGPT\r\n```\r\n\r\n2. 创建虚拟环境、安装依赖项： \r\n\r\n```bash\r\nconda create -n chuanhu python=3.10\r\nconda activate chuanhu\r\npip install -r requirements.txt\r\n```\r\n\r\n3. 配置 config.json，我的内容如下:\r\n\r\n> 我已尝试，如果设置登录账号和密码，进入主页也会显示相同错误。\r\n\r\n```json\r\n{\r\n    \"openai_api_key\": \"sk-xxxxxxxxx\",\r\n    \"language\": \"auto\",\r\n    \"users\": [],\r\n\r\n    \"https_proxy\": \"http://127.0.0.1:7890\",\r\n    \"http_proxy\": \"http://127.0.0.1:7890\",\r\n\r\n    \"server_name\": \"0.0.0.0\",\r\n    \"server_port\": 7860,\r\n    \"share\": false\r\n}\r\n```\r\n\r\n4. 启动服务:\r\n\r\n```bash\r\npython ChuanhuChatbot.py\r\n```\r\n\r\n稍作等待，浏览器自动打开 `http://localhost:7860/` ，但提示 **Connection errored out**。\n\n### 错误日志\n\n```shell\n(chuanhu) root@iZ2zea5v77oawjy2qz7c20Z:/data/ChuanhuChatGPT# python ChuanhuChatbot.py \r\n2024-09-14 11:58:59,013 [INFO] [_client.py:1038] HTTP Request: GET https://api.gradio.app/gradio-messaging/en \"HTTP/1.1 200 OK\"\r\n2024-09-14 11:58:59,427 [INFO] [config.py:330] 默认模型设置为了：GPT-4o-mini\r\n2024-09-14 11:59:00,160 [INFO] [utils.py:161] NumExpr defaulting to 4 threads.\r\nRunning on local URL:  http://0.0.0.0:7860\r\n\r\nTo create a public link, set `share=True` in `launch()`.\r\n2024-09-14 11:59:01,285 [INFO] [utils.py:643] Your IP region: Japan。\r\nIMPORTANT: You are using gradio version 4.26.0, however version 4.29.0 is available, please upgrade.\r\n--------\r\nERROR:    Exception in ASGI application\r\nTraceback (most recent call last):\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/type_adapter.py\", line 190, in __init__\r\n    core_schema = _getattr_no_parents(type, '__pydantic_core_schema__')\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/type_adapter.py\", line 98, in _getattr_no_parents\r\n    raise AttributeError(attribute)\r\nAttributeError: __pydantic_core_schema__\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py\", line 406, in run_asgi\r\n    result = await app(  # type: ignore[func-returns-value]\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py\", line 70, in __call__\r\n    return await self.app(scope, receive, send)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/fastapi/applications.py\", line 1054, in __call__\r\n    await super().__call__(scope, receive, send)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/starlette/applications.py\", line 113, in __call__\r\n    await self.middleware_stack(scope, receive, send)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/starlette/middleware/errors.py\", line 187, in __call__\r\n    raise exc\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/starlette/middleware/errors.py\", line 165, in __call__\r\n    await self.app(scope, receive, _send)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/gradio/route_utils.py\", line 695, in __call__\r\n    await self.simple_response(scope, receive, send, request_headers=headers)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/gradio/route_utils.py\", line 711, in simple_response\r\n    await self.app(scope, receive, send)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/starlette/middleware/exceptions.py\", line 62, in __call__\r\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/starlette/_exception_handler.py\", line 62, in wrapped_app\r\n    raise exc\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/starlette/_exception_handler.py\", line 51, in wrapped_app\r\n    await app(scope, receive, sender)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/starlette/routing.py\", line 715, in __call__\r\n    await self.middleware_stack(scope, receive, send)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/starlette/routing.py\", line 735, in app\r\n    await route.handle(scope, receive, send)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/starlette/routing.py\", line 288, in handle\r\n    await self.app(scope, receive, send)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/starlette/routing.py\", line 76, in app\r\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/starlette/_exception_handler.py\", line 62, in wrapped_app\r\n    raise exc\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/starlette/_exception_handler.py\", line 51, in wrapped_app\r\n    await app(scope, receive, sender)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/starlette/routing.py\", line 73, in app\r\n    response = await f(request)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/fastapi/routing.py\", line 291, in app\r\n    solved_result = await solve_dependencies(\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/fastapi/dependencies/utils.py\", line 639, in solve_dependencies\r\n    ) = await request_body_to_args(  # body_params checked above\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/fastapi/dependencies/utils.py\", line 813, in request_body_to_args\r\n    fields_to_extract = get_cached_model_fields(first_field.type_)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/fastapi/_compat.py\", line 657, in get_cached_model_fields\r\n    return get_model_fields(model)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/fastapi/_compat.py\", line 284, in get_model_fields\r\n    return [\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/fastapi/_compat.py\", line 285, in <listcomp>\r\n    ModelField(field_info=field_info, name=name)\r\n  File \"<string>\", line 6, in __init__\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/fastapi/_compat.py\", line 110, in __post_init__\r\n    self._type_adapter: TypeAdapter[Any] = TypeAdapter(\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/type_adapter.py\", line 192, in __init__\r\n    core_schema = _get_schema(type, config_wrapper, parent_depth=_parent_depth + 1)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/type_adapter.py\", line 81, in _get_schema\r\n    schema = gen.generate_schema(type_)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 468, in generate_schema\r\n    schema = self._generate_schema(obj)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 700, in _generate_schema\r\n    schema = self._post_process_generated_schema(self._generate_schema_inner(obj))\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 707, in _generate_schema_inner\r\n    return self._annotated_schema(obj)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 1586, in _annotated_schema\r\n    schema = self._apply_annotations(source_type, annotations)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 1654, in _apply_annotations\r\n    schema = get_inner_schema(source_type)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_schema_generation_shared.py\", line 82, in __call__\r\n    schema = self._handler(__source_type)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 1736, in new_handler\r\n    schema = metadata_get_schema(source, get_inner_schema)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 1732, in <lambda>\r\n    lambda source, handler: handler(source)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_schema_generation_shared.py\", line 82, in __call__\r\n    schema = self._handler(__source_type)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 1635, in inner_handler\r\n    schema = self._generate_schema(obj)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 700, in _generate_schema\r\n    schema = self._post_process_generated_schema(self._generate_schema_inner(obj))\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 727, in _generate_schema_inner\r\n    return self.match_type(obj)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 810, in match_type\r\n    return self._match_generic_type(obj, origin)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 834, in _match_generic_type\r\n    return self._union_schema(obj)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 1036, in _union_schema\r\n    choices.append(self.generate_schema(arg))\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 468, in generate_schema\r\n    schema = self._generate_schema(obj)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 700, in _generate_schema\r\n    schema = self._post_process_generated_schema(self._generate_schema_inner(obj))\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 727, in _generate_schema_inner\r\n    return self.match_type(obj)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 814, in match_type\r\n    return self._unknown_type_schema(obj)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 366, in _unknown_type_schema\r\n    raise PydanticSchemaGenerationError(\r\npydantic.errors.PydanticSchemaGenerationError: Unable to generate pydantic-core schema for <class 'starlette.requests.Request'>. Set `arbitrary_types_allowed=True` in the model_config to ignore this error or implement `__get_pydantic_core_schema__` on your type to fully support it.\r\n\r\nIf you got this error by calling handler(<some type>) within `__get_pydantic_core_schema__` then you likely need to call `handler.generate_schema(<some type>)` since we do not call `__get_pydantic_core_schema__` on `<some type>` otherwise to avoid infinite recursion.\r\n\r\nFor further information visit https://errors.pydantic.dev/2.5/u/schema-for-unknown-type\r\nERROR:    Exception in ASGI application\r\nTraceback (most recent call last):\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/type_adapter.py\", line 190, in __init__\r\n    core_schema = _getattr_no_parents(type, '__pydantic_core_schema__')\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/type_adapter.py\", line 98, in _getattr_no_parents\r\n    raise AttributeError(attribute)\r\nAttributeError: __pydantic_core_schema__\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py\", line 406, in run_asgi\r\n    result = await app(  # type: ignore[func-returns-value]\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py\", line 70, in __call__\r\n    return await self.app(scope, receive, send)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/fastapi/applications.py\", line 1054, in __call__\r\n    await super().__call__(scope, receive, send)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/starlette/applications.py\", line 113, in __call__\r\n    await self.middleware_stack(scope, receive, send)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/starlette/middleware/errors.py\", line 187, in __call__\r\n    raise exc\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/starlette/middleware/errors.py\", line 165, in __call__\r\n    await self.app(scope, receive, _send)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/gradio/route_utils.py\", line 695, in __call__\r\n    await self.simple_response(scope, receive, send, request_headers=headers)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/gradio/route_utils.py\", line 711, in simple_response\r\n    await self.app(scope, receive, send)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/starlette/middleware/exceptions.py\", line 62, in __call__\r\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/starlette/_exception_handler.py\", line 62, in wrapped_app\r\n    raise exc\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/starlette/_exception_handler.py\", line 51, in wrapped_app\r\n    await app(scope, receive, sender)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/starlette/routing.py\", line 715, in __call__\r\n    await self.middleware_stack(scope, receive, send)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/starlette/routing.py\", line 735, in app\r\n    await route.handle(scope, receive, send)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/starlette/routing.py\", line 288, in handle\r\n    await self.app(scope, receive, send)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/starlette/routing.py\", line 76, in app\r\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/starlette/_exception_handler.py\", line 62, in wrapped_app\r\n    raise exc\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/starlette/_exception_handler.py\", line 51, in wrapped_app\r\n    await app(scope, receive, sender)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/starlette/routing.py\", line 73, in app\r\n    response = await f(request)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/fastapi/routing.py\", line 291, in app\r\n    solved_result = await solve_dependencies(\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/fastapi/dependencies/utils.py\", line 639, in solve_dependencies\r\n    ) = await request_body_to_args(  # body_params checked above\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/fastapi/dependencies/utils.py\", line 813, in request_body_to_args\r\n    fields_to_extract = get_cached_model_fields(first_field.type_)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/fastapi/_compat.py\", line 657, in get_cached_model_fields\r\n    return get_model_fields(model)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/fastapi/_compat.py\", line 284, in get_model_fields\r\n    return [\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/fastapi/_compat.py\", line 285, in <listcomp>\r\n    ModelField(field_info=field_info, name=name)\r\n  File \"<string>\", line 6, in __init__\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/fastapi/_compat.py\", line 110, in __post_init__\r\n    self._type_adapter: TypeAdapter[Any] = TypeAdapter(\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/type_adapter.py\", line 192, in __init__\r\n    core_schema = _get_schema(type, config_wrapper, parent_depth=_parent_depth + 1)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/type_adapter.py\", line 81, in _get_schema\r\n    schema = gen.generate_schema(type_)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 468, in generate_schema\r\n    schema = self._generate_schema(obj)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 700, in _generate_schema\r\n    schema = self._post_process_generated_schema(self._generate_schema_inner(obj))\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 707, in _generate_schema_inner\r\n    return self._annotated_schema(obj)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 1586, in _annotated_schema\r\n    schema = self._apply_annotations(source_type, annotations)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 1654, in _apply_annotations\r\n    schema = get_inner_schema(source_type)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_schema_generation_shared.py\", line 82, in __call__\r\n    schema = self._handler(__source_type)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 1736, in new_handler\r\n    schema = metadata_get_schema(source, get_inner_schema)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 1732, in <lambda>\r\n    lambda source, handler: handler(source)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_schema_generation_shared.py\", line 82, in __call__\r\n    schema = self._handler(__source_type)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 1635, in inner_handler\r\n    schema = self._generate_schema(obj)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 700, in _generate_schema\r\n    schema = self._post_process_generated_schema(self._generate_schema_inner(obj))\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 727, in _generate_schema_inner\r\n    return self.match_type(obj)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 810, in match_type\r\n    return self._match_generic_type(obj, origin)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 834, in _match_generic_type\r\n    return self._union_schema(obj)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 1036, in _union_schema\r\n    choices.append(self.generate_schema(arg))\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 468, in generate_schema\r\n    schema = self._generate_schema(obj)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 700, in _generate_schema\r\n    schema = self._post_process_generated_schema(self._generate_schema_inner(obj))\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 727, in _generate_schema_inner\r\n    return self.match_type(obj)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 814, in match_type\r\n    return self._unknown_type_schema(obj)\r\n  File \"/root/anaconda3/envs/chuanhu/lib/python3.10/site-packages/pydantic/_internal/_generate_schema.py\", line 366, in _unknown_type_schema\r\n    raise PydanticSchemaGenerationError(\r\npydantic.errors.PydanticSchemaGenerationError: Unable to generate pydantic-core schema for <class 'starlette.requests.Request'>. Set `arbitrary_types_allowed=True` in the model_config to ignore this error or implement `__get_pydantic_core_schema__` on your type to fully support it.\r\n\r\nIf you got this error by calling handler(<some type>) within `__get_pydantic_core_schema__` then you likely need to call `handler.generate_schema(<some type>)` since we do not call `__get_pydantic_core_schema__` on `<some type>` otherwise to avoid infinite recursion.\r\n\r\nFor further information visit https://errors.pydantic.dev/2.5/u/schema-for-unknown-type\n```\n\n\n### 运行环境\n\n- OS:  ubuntu 22.04\r\n- Server:  Alibaba Cloud ubuntu 22.04\r\n- Gradio version:  4.26.0\r\n- Python version:  3.10.14\r\n- Browser:  Chrome浏览器\n\n### 补充说明\n\n我已查看查看[疑难杂症解决](https://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98)页面，没有符合我的错误场景。\r\n\r\n我已尽可能查看相似issue和disscusion，例如 #89 、#100、#287、#309、#528，发现与我的错误场景都不同。\r\n\r\n个人尝试：\r\n\r\n1. 配置Nginx\r\n\r\n配置Nginx后，运行程序，依旧提示相同错误(**Connection errored out**)，终端错误日志相同。\r\n\r\n```conf\r\n(chuanhu) root@iZ2zea5v77oawjy2qz7c20Z:/data/ChuanhuChatGPT# cat /etc/nginx/sites-available/www.peilongchencc.cn \r\nserver {\r\n    listen 80;  # 监听 80 端口，用于处理 HTTP 请求\r\n    server_name peilongchencc.cn www.peilongchencc.cn;  # 定义服务器的域名，允许通过 peilongchencc.cn 和 www.peilongchencc.cn 访问\r\n\r\n    # 将所有 HTTP 请求永久重定向到 HTTPS\r\n    # 301 状态码表示永久重定向，$host 代表请求的主机，$request_uri 代表请求的 URI\r\n    return 301 https://$host$request_uri;\r\n}\r\n\r\nserver {\r\n    listen 443 ssl;  # 监听 443 端口，启用 SSL（即 HTTPS）\r\n    server_name peilongchencc.cn www.peilongchencc.cn;  # 定义服务器的域名，允许通过 peilongchencc.cn 和 www.peilongchencc.cn 访问\r\n\r\n    # SSL 证书配置，用于加密 HTTPS 连接\r\n    ssl_certificate /etc/letsencrypt/live/www.peilongchencc.cn/fullchain.pem;  # 定义 SSL 证书的完整链路径\r\n    ssl_certificate_key /etc/letsencrypt/live/www.peilongchencc.cn/privkey.pem;  # 定义 SSL 证书的私钥路径\r\n\r\n    # 配置 WebSocket 代理\r\n    location / {\r\n        # 将所有请求代理到本地 7860 端口上的应用\r\n        proxy_pass http://localhost:7860;\r\n\r\n        # 支持 WebSocket 连接，WebSocket 升级需要设置 HTTP/1.1 协议\r\n        proxy_http_version 1.1;  # 使用 HTTP 1.1 协议支持 WebSocket\r\n        proxy_set_header Upgrade $http_upgrade;  # 设置 Upgrade 头，用于处理 WebSocket 升级\r\n        proxy_set_header Connection \"upgrade\";  # 将连接类型设置为 \"upgrade\" 以启用 WebSocket\r\n\r\n        # 保留客户端的真实请求信息\r\n        proxy_set_header Host $host;  # 保留客户端的 Host 头信息\r\n        proxy_set_header X-Real-IP $remote_addr;  # 传递客户端的真实 IP 地址\r\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;  # 传递代理链中的客户端 IP 地址\r\n        proxy_set_header X-Forwarded-Proto $scheme;  # 保留客户端的协议（HTTP 或 HTTPS）\r\n\r\n        # 防止超时(任何一个时刻超过 60 秒没有数据传输)\r\n        # 如果超过 60 秒没有数据传输，则可能触发超时错误，proxy_read_timeout 和 proxy_send_timeout 用于防止此类问题\r\n        # 以流式输出举例，如果程序一直在输出内容，超过60s也不会报错。\r\n        proxy_read_timeout 60s;  # 允许 Nginx 等待后端服务器的响应，最长不超过 60 秒\r\n        proxy_send_timeout 60s;  # 允许 Nginx 发送数据到后端服务器的时间限制，最长不超过 60 秒\r\n    }\r\n}\r\n(chuanhu) root@iZ2zea5v77oawjy2qz7c20Z:/data/ChuanhuChatGPT# \r\n```\r\n\r\n2. 尝试修改服务端口，例如 `http://localhost:8866`、`http://localhost:8867` 均无效。\r\n\r\n3. 尝试将 `pydantic` 升级到最新版本，无效。\r\n\r\n4. 尝试将 `gradio` 升级到最新版本，无效。\r\n\r\nPs: 由于终端已经提示 **\"Your IP region: Japan。\"**，因此我没有在Clash配置文件中添加[常见问题](https://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98)中的配置。\r\n",
      "state": "closed",
      "author": "peilongchencc",
      "author_type": "User",
      "created_at": "2024-09-14T04:37:24Z",
      "updated_at": "2024-09-27T13:53:56Z",
      "closed_at": "2024-09-14T06:44:42Z",
      "labels": [
        "question",
        "server deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1161/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1161",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1161",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:05.188530",
      "comments": [
        {
          "author": "peilongchencc",
          "body": "@GaiZhenbiao \r\n麻烦您有空帮忙看一下",
          "created_at": "2024-09-14T04:40:16Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "请查看wiki中关于服务器部署的部分，你这应该是nginx没有配置websocket导致的。",
          "created_at": "2024-09-14T05:42:04Z"
        },
        {
          "author": "Keldos-Li",
          "body": "不过这个issue真的提得赏心悦目）",
          "created_at": "2024-09-14T06:22:27Z"
        },
        {
          "author": "peilongchencc",
          "body": "> 请查看wiki中关于服务器部署的部分，你这应该是nginx没有配置websocket导致的。\r\n\r\n🚨我按照您wiki中关于服务器部署教程，配置并重新载入nginx后。`python ChuanhuChatbot.py`启动服务，**错误是一样的**。\r\n\r\n界面:\r\n\r\n![image](https://github.com/user-attachments/assets/5bd18edd-1685-4134-a237-9501eccb853f)\r\n\r\n![image](https://github.com/user-attachments/assets/7659ecd6-9a56-4d",
          "created_at": "2024-09-14T06:25:39Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "看上去应该是一些库的版本问题。你安装下面的版本试试：\r\npip install openapi-schema-pydantic==1.2.4 pydantic==2.5.2 pydantic-core==2.14.5 fastapi==0.104.1\r\n",
          "created_at": "2024-09-14T06:36:53Z"
        }
      ]
    },
    {
      "issue_number": 1170,
      "title": "[Bug]: The chat stuck with error when i talk with uploaded image file ",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\nwhen i talk with uploaded image\r\n\r\n![image](https://github.com/user-attachments/assets/003becf7-9ae1-4050-a270-89aec6c76f11)\r\n\r\n\r\n\r\n```\r\n\r\nRunning on local URL:  http://127.0.0.1:7862\r\n\r\nTo create a public link, set `share=True` in `launch()`.\r\n2024-09-25 09:00:47,696 [INFO] [models.py:38] 正在加载 OpenAI 模型: GPT-4o\r\n2024-09-25 09:00:47,697 [INFO] [models.py:149] Model is set to:  GPT-4o\r\n2024-09-25 09:01:02,046 [INFO] [base_model.py:615] 用户的输入为：translete this\r\n2024-09-25 09:01:03,949 [INFO] [base_model.py:703] 回答为：The text translates to \"Version issue brought by api (#1167)\" in English.\r\n2024-09-25 09:01:03,949 [INFO] [base_model.py:709] Tokens per second：20.525676002261644\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.8/dist-packages/gradio/queueing.py\", line 566, in process_events\r\n    response = await route_utils.call_process_api(\r\n  File \"/usr/local/lib/python3.8/dist-packages/gradio/route_utils.py\", line 270, in call_process_api\r\n    output = await app.get_blocks().process_api(\r\n  File \"/usr/local/lib/python3.8/dist-packages/gradio/blocks.py\", line 1847, in process_api\r\n    result = await self.call_function(\r\n  File \"/usr/local/lib/python3.8/dist-packages/gradio/blocks.py\", line 1445, in call_function\r\n    prediction = await utils.async_iteration(iterator)\r\n  File \"/usr/local/lib/python3.8/dist-packages/gradio/utils.py\", line 629, in async_iteration\r\n    return await iterator.__anext__()\r\n  File \"/usr/local/lib/python3.8/dist-packages/gradio/utils.py\", line 622, in __anext__\r\n    return await anyio.to_thread.run_sync(\r\n  File \"/usr/local/lib/python3.8/dist-packages/anyio/to_thread.py\", line 56, in run_sync\r\n    return await get_async_backend().run_sync_in_worker_thread(\r\n  File \"/usr/local/lib/python3.8/dist-packages/anyio/_backends/_asyncio.py\", line 2144, in run_sync_in_worker_thread\r\n    return await future\r\n  File \"/usr/local/lib/python3.8/dist-packages/anyio/_backends/_asyncio.py\", line 851, in run\r\n    result = context.run(func, *args)\r\n  File \"/usr/local/lib/python3.8/dist-packages/gradio/utils.py\", line 605, in run_sync_iterator_async\r\n    return next(iterator)\r\n  File \"/usr/local/lib/python3.8/dist-packages/gradio/utils.py\", line 788, in gen_wrapper\r\n    response = next(iterator)\r\n  File \"/root/chuanchu2/ChuanhuChatGPT/modules/utils.py\", line 43, in predict\r\n    for i in iter:\r\n  File \"/root/chuanchu2/ChuanhuChatGPT/modules/models/base_model.py\", line 734, in predict\r\n    self.auto_save(chatbot)\r\n  File \"/root/chuanchu2/ChuanhuChatGPT/modules/models/base_model.py\", line 983, in auto_save\r\n    save_file(self.history_file_path, self)\r\n  File \"/root/chuanchu2/ChuanhuChatGPT/modules/utils.py\", line 415, in save_file\r\n    chatbot = [(history[i][\"content\"], history[i + 1][\"content\"]) for i in range(0, len(history), 2)]\r\n  File \"/root/chuanchu2/ChuanhuChatGPT/modules/utils.py\", line 415, in <listcomp>\r\n    chatbot = [(history[i][\"content\"], history[i + 1][\"content\"]) for i in range(0, len(history), 2)]\r\nIndexError: list index out of range\r\n\r\n\r\n```\n\n### 复现操作\n\n1. upload image to chat window\r\n2. ask something\r\n3. you got error\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\nhttps://github.com/GaiZhenbiao/ChuanhuChatGPT/commit/3856d4f559f7ec5570ace6a92f0cc4017b5595cb\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "noxonsu",
      "author_type": "User",
      "created_at": "2024-09-25T07:02:13Z",
      "updated_at": "2024-09-25T14:10:24Z",
      "closed_at": "2024-09-25T14:09:47Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1170/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1170",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1170",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:05.384742",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "it should be fixed now.",
          "created_at": "2024-09-25T14:10:22Z"
        }
      ]
    },
    {
      "issue_number": 1171,
      "title": "[Bug]: 调用Ollama模型在回复过程中无法取消终止回复",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n如图，在调用Ollama的过程中，无法点击右下角红色的按钮，停止模型的回复。\r\n\r\n<img width=\"951\" alt=\"image\" src=\"https://github.com/user-attachments/assets/c2674d54-7da5-4782-b204-94cdd08ed556\">\r\n\n\n### 复现操作\n\n1. 正常部署模型\n\n### 错误日志\n\n```shell\n不会报错，但对话窗口会卡住，直到模型全部回复结束\n```\n\n\n### 运行环境\n\n- OS: RHEL 8.8\r\n- Browser: Edge\r\n- Gradio version: 4.29.0\r\n- Python version: 3.10\r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n**config.json**\r\n\r\n{\r\n    // 各配置具体说明，见 [https://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/使用教程#配置-configjson]\r\n\r\n    //== API 配置 ==\r\n    // ⭐️ 这里填写的Ollama\r\n    \"openai_api_key\": \"Ollama\", // 你的 OpenAI API Key，一般必填，若空缺则需在图形界面中填入API Key\r\n    \"google_genai_api_key\": \"\", // 你的 Google Gemini API Key ，用于 Google Gemini 对话模型\r\n    \"xmchat_api_key\": \"\", // 你的 xmchat API Key，用于 XMChat 对话模型\r\n    \"minimax_api_key\": \"\", // 你的 MiniMax API Key，用于 MiniMax 对话模型\r\n    \"minimax_group_id\": \"\", // 你的 MiniMax Group ID，用于 MiniMax 对话模型\r\n    \"midjourney_proxy_api_base\": \"https://xxx/mj\", // 你的 https://github.com/novicezk/midjourney-proxy 代理地址\r\n    \"midjourney_proxy_api_secret\": \"\", // 你的 MidJourney Proxy API Secret，用于鉴权访问 api，可选\r\n    \"midjourney_discord_proxy_url\": \"\", // 你的 MidJourney Discord Proxy URL，用于对生成对图进行反代，可选\r\n    \"midjourney_temp_folder\": \"./tmp\", // 你的 MidJourney 临时文件夹，用于存放生成的图片，填空则关闭自动下载切图（直接显示MJ的四宫格图）\r\n    \"spark_appid\": \"\", // 你的 讯飞星火大模型 API AppID，用于讯飞星火大模型对话模型\r\n    \"spark_api_key\": \"\", // 你的 讯飞星火大模型 API Key，用于讯飞星火大模型对话模型\r\n    \"spark_api_secret\": \"\", // 你的 讯飞星火大模型 API Secret，用于讯飞星火大模型对话模型\r\n    \"claude_api_secret\":\"\",// 你的 Claude API Secret，用于 Claude 对话模型\r\n    \"ernie_api_key\": \"\",// 你的文心一言在百度云中的API Key，用于文心一言对话模型\r\n    \"ernie_secret_key\": \"\",// 你的文心一言在百度云中的Secret Key，用于文心一言对话模型\r\n    \"ollama_host\": \"\", // 你的 Ollama Host，用于 Ollama 对话模型\r\n    \"huggingface_auth_token\": \"\", // 你的 Hugging Face API Token，用于访问有限制的模型\r\n    \"groq_api_key\": \"\", // 你的 Groq API Key，用于 Groq 对话模型(https://console.groq.com/)\r\n\r\n    //== Azure ==\r\n    \"openai_api_type\": \"openai\", // 可选项：azure, openai\r\n    \"azure_openai_api_key\": \"\", // 你的 Azure OpenAI API Key，用于 Azure OpenAI 对话模型\r\n    \"azure_openai_api_base_url\": \"\", // 你的 Azure Base URL\r\n    \"azure_openai_api_version\": \"2023-05-15\", // 你的 Azure OpenAI API 版本\r\n    \"azure_deployment_name\": \"\", // 你的 Azure OpenAI Chat 模型 Deployment 名称\r\n    \"azure_embedding_deployment_name\": \"\", // 你的 Azure OpenAI Embedding 模型 Deployment 名称\r\n    \"azure_embedding_model_name\": \"text-embedding-ada-002\", // 你的 Azure OpenAI Embedding 模型名称\r\n\r\n    //== 基础配置 ==\r\n    \"language\": \"auto\", // 界面语言，可选\"auto\", \"zh_CN\", \"en_US\", \"ja_JP\", \"ko_KR\", \"sv_SE\", \"ru_RU\", \"vi_VN\"\r\n    \"users\": [], // 用户列表，[[\"用户名1\", \"密码1\"], [\"用户名2\", \"密码2\"], ...]\r\n    \"local_embedding\": false, //是否在本地编制索引\r\n    \"hide_history_when_not_logged_in\": false, //未登录情况下是否不展示对话历史\r\n    \"check_update\": true, //是否启用检查更新\r\n    \"default_model\": \"Ollama\", // 默认模型\r\n    \"chat_name_method_index\": 2, // 选择对话名称的方法。0: 使用日期时间命名；1: 使用第一条提问命名，2: 使用模型自动总结\r\n    \"bot_avatar\": \"default\", // 机器人头像，可填写本地或网络图片链接，或者\"none\"（不显示头像）\r\n    \"user_avatar\": \"default\", // 用户头像，可填写本地或网络图片链接，或者\"none\"（不显示头像）\r\n\r\n    //== API 用量 ==\r\n    \"show_api_billing\": false, //是否显示OpenAI API用量（启用需要填写sensitive_id）\r\n    \"sensitive_id\": \"\", // 你 OpenAI 账户的 Sensitive ID，用于查询 API 用量\r\n    \"usage_limit\": 120, // 该 OpenAI API Key 的当月限额，单位：美元，用于计算百分比和显示上限\r\n    \"legacy_api_usage\": false, // 是否使用旧版 API 用量查询接口（OpenAI现已关闭该接口，但是如果你在使用第三方 API，第三方可能仍然支持此接口）\r\n\r\n    //== 川虎助理设置 ==\r\n    \"GOOGLE_CSE_ID\": \"\", //谷歌搜索引擎ID，用于川虎助理Pro模式，获取方式请看 https://stackoverflow.com/questions/37083058/programmatically-searching-google-in-python-using-custom-search\r\n    \"GOOGLE_API_KEY\": \"\", //谷歌API Key，用于川虎助理Pro模式\r\n    \"WOLFRAM_ALPHA_APPID\": \"\", //Wolfram Alpha API Key，用于川虎助理Pro模式，获取方式请看 https://products.wolframalpha.com/api/\r\n    \"SERPAPI_API_KEY\": \"\", //SerpAPI API Key，用于川虎助理Pro模式，获取方式请看 https://serpapi.com/\r\n\r\n    //== 文档处理与显示 ==\r\n    \"latex_option\": \"default\", // LaTeX 公式渲染策略，可选\"default\", \"strict\", \"all\"或者\"disabled\"\r\n    \"advance_docs\": {\r\n        \"pdf\": {\r\n            \"two_column\": false, // 是否认为PDF是双栏的\r\n            \"formula_ocr\": true // 是否使用OCR识别PDF中的公式\r\n        }\r\n    },\r\n\r\n    //== 高级配置 ==\r\n    // 是否多个API Key轮换使用\r\n    \"multi_api_key\": false,\r\n    \"hide_my_key\": false, // 如果你想在UI中隐藏 API 密钥输入框，将此值设置为 true\r\n    // \"available_models\": [\"GPT3.5 Turbo\", \"GPT4 Turbo\", \"GPT4 Vision\"], // 可用的模型列表，将覆盖默认的可用模型列表\r\n    // \"extra_models\": [\"模型名称3\", \"模型名称4\", ...], // 额外的模型，将添加到可用的模型列表之后\r\n    // \"api_key_list\": [\r\n    //     \"sk-xxxxxxxxxxxxxxxxxxxxxxxx1\",\r\n    //     \"sk-xxxxxxxxxxxxxxxxxxxxxxxx2\",\r\n    //     \"sk-xxxxxxxxxxxxxxxxxxxxxxxx3\"\r\n    // ],\r\n    // 自定义OpenAI API Base\r\n    // \"openai_api_base\": \"https://api.openai.com\",\r\n    // 自定义使用代理（请替换代理URL）\r\n    // \"https_proxy\": \"http://127.0.0.1:1079\",\r\n    // \"http_proxy\": \"http://127.0.0.1:1079\",\r\n    // 自定义端口、自定义ip（请替换对应内容）\r\n    \"server_name\": \"0.0.0.0\",\r\n    \"server_port\": 7860,\r\n    // 如果要share到gradio，设置为true\r\n    // \"share\": false,\r\n    //如果不想自动打开浏览器，设置为false\r\n    //\"autobrowser\": false\r\n    // ⭐️ 用户界面中将会显示的模型\r\n    \"available_models\": [\"qwen2:7b\", \"llama3.1:8b\"], \r\n\t\r\n\t// ⭐️ 手动添加的Ollama模型，api_host与model_name需要和Ollama对应上\r\n    \"extra_model_metadata\": { //\r\n        \"qwen2:7b\": {\r\n            \"model_name\": \"qwen2:7b\",\r\n            \"description\": \"An expert of mean jokes, who answers all user questions in a humorous and mean way.\",\r\n            \"model_type\": \"OpenAIVision\",\r\n            \"multimodal\": false,\r\n            // \"api_host\": \"http://localhost:11434/v1/chat/completions\",\r\n            \"api_host\": \"http://localhost:11434\",\r\n            \"token_limit\": 4096,\r\n            \"max_generation\": 4096,\r\n            \"system\": \"You are an expert of mean jokes. You Answer all user questions in a humorous and mean way, pretending you are Elon Musk.\",\r\n            \"placeholder\": {\r\n                \"logo\": \"https://wallpaperaccess.com/full/9170621.png\",\r\n                \"slogan\": \"I am NOT politically correct\",\r\n                \"question_1\": \"How can I get X Premium+?\",\r\n                \"question_2\": \"Roast me pls\",\r\n                \"question_3\": \"What's the true nature of the universe\",\r\n                \"question_4\": \"Ai is biased\",\r\n            }\r\n        },\r\n        \r\n        \"llama3.1:8b\": {\r\n            \"model_name\": \"llama3.1:8b\",\r\n            \"description\": \"An expert of mean jokes, who answers all user questions in a humorous and mean way.\",\r\n            \"model_type\": \"OpenAIVision\",\r\n            \"multimodal\": false,\r\n            // \"api_host\": \"http://localhost:11434/v1/chat/completions\",\r\n            \"api_host\": \"http://localhost:11434\",\r\n            \"token_limit\": 4096,\r\n            \"max_generation\": 4096,\r\n            \"system\": \"You are an expert of mean jokes. You Answer all user questions in a humorous and mean way, pretending you are Elon Musk.\",\r\n            \"placeholder\": {\r\n                \"logo\": \"https://wallpaperaccess.com/full/9170621.png\",\r\n                \"slogan\": \"I am NOT politically correct\",\r\n                \"question_1\": \"How can I get X Premium+?\",\r\n                \"question_2\": \"Roast me pls\",\r\n                \"question_3\": \"What's the true nature of the universe\",\r\n                \"question_4\": \"Ai is biased\",\r\n            }\r\n        },\r\n    },\r\n    \r\n}\r\n\r\n",
      "state": "open",
      "author": "GuokaiLiu",
      "author_type": "User",
      "created_at": "2024-09-25T12:53:02Z",
      "updated_at": "2024-09-25T12:53:02Z",
      "closed_at": null,
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1171/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1171",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1171",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:05.545920",
      "comments": []
    },
    {
      "issue_number": 1165,
      "title": "[Docker]: 构建失败ImportError: cannot import name 'lower_char' ",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\ndocker建构失败\r\n具体报错\r\nTraceback (most recent call last):\r\n\r\n  File \"/app/ChuanhuChatbot.py\", line 12, in <module>\r\n\r\n    from modules.overwrites import patch_gradio\r\n\r\n  File \"/app/modules/overwrites.py\", line 5, in <module>\r\n\r\n    from multipart.multipart import MultipartState, CR, LF, HYPHEN, COLON, lower_char, LOWER_A, LOWER_Z, SPACE, FLAG_PART_BOUNDARY, FLAG_LAST_BOUNDARY, join_bytes\r\n\r\nImportError: cannot import name 'lower_char' from 'multipart.multipart' (/root/.local/lib/python3.10/site-packages/multipart/multipart.py)\n\n### 复现操作\n\n在zeabur.com上自动构建会出现这个问题\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Docker version: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "BigDataMao",
      "author_type": "User",
      "created_at": "2024-09-21T15:46:31Z",
      "updated_at": "2024-09-23T10:26:02Z",
      "closed_at": "2024-09-23T10:26:02Z",
      "labels": [
        "question",
        "docker deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 14,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1165/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1165",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1165",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:05.545940",
      "comments": [
        {
          "author": "BigDataMao",
          "body": "已复查,不是dockerfile问题,是main分支代码问题",
          "created_at": "2024-09-22T03:06:40Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "我看看",
          "created_at": "2024-09-22T07:33:30Z"
        },
        {
          "author": "BigDataMao",
          "body": "python-multipart==0.0.9可以解决此问题\r\n但似乎还有其他问题\r\nraise PydanticSchemaGenerationError(\r\npydantic.errors.PydanticSchemaGenerationError: Unable to generate pydantic-core schema for <class 'starlette.requests.Request'>. Set `arbitrary_types_allowed=True` in the model_config to ignore this error or implement `",
          "created_at": "2024-09-22T07:37:54Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "安装下面版本的pydantic呢？\r\nopenapi-schema-pydantic       1.2.4\r\npydantic                      2.5.2\r\npydantic_core                 2.14.5",
          "created_at": "2024-09-22T07:40:06Z"
        },
        {
          "author": "BigDataMao",
          "body": "我这边尝试结果是无效\r\nraise mapped_exc(message) from exc\r\nhttpx.ConnectTimeout: timed out",
          "created_at": "2024-09-22T08:02:16Z"
        }
      ]
    },
    {
      "issue_number": 1163,
      "title": "[Bug]: GPT o1-mini 模型回复内容，前端显示格式问题",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n目前使用o1-mini模型回答问题后，前端首先会显示正常的markdown格式，然后会自动刷新一次，回复的内容都会成为一个段落，这一整个段落很难阅读。\r\n![2024-09-18 22 09 09](https://github.com/user-attachments/assets/10118852-83ef-4e66-9148-30bc02643325)\r\n![2024-09-18 22 09 20](https://github.com/user-attachments/assets/e3a361a7-a39b-4536-9b76-2f175f7bb6c7)\r\n\n\n### 复现操作\n\nlatest\n\n### 错误日志\n\n```shell\n只有截图文件，没有错误日志。\n```\n\n\n### 运行环境\n\nlatest\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\nlatest",
      "state": "closed",
      "author": "crosswk",
      "author_type": "User",
      "created_at": "2024-09-18T14:14:33Z",
      "updated_at": "2024-09-18T17:04:58Z",
      "closed_at": "2024-09-18T17:04:58Z",
      "labels": [
        "bug",
        "📌 confirmed"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1163/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1163",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1163",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:05.737207",
      "comments": [
        {
          "author": "crosswk",
          "body": "上面截图的API，是o1-mini逆向的api测试结果，使用正常的API效果也是一样的。首先会刷新一个正常的格式，然后自动刷新一下，回复的内容都会挤到一个段落中。",
          "created_at": "2024-09-18T14:15:59Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "还真是，我看看怎么回事",
          "created_at": "2024-09-18T15:41:43Z"
        }
      ]
    },
    {
      "issue_number": 1160,
      "title": "[Bug]: o1-mini模型对话报错",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\no1-mini不支持system字段了。\n\n### 复现操作\n\n正常部署最新版本\n\n### 错误日志\n\n```shell\n前端报错：\r\n☹️发生了错误：Unsupported value: 'messages[0].role' does not support 'system' with this model. (request id: 2024091403134518573335634751935)\r\n\r\n\r\n后端报错：\r\nException: {\"error\":{\"message\":\"Unsupported value: 'messages[0].role' does not support 'system' with this model. (request id: 2024091403134518573335634751935)\",\"type\":\"invalid_request_error\",\"param\":\"messages[0].role\",\"code\":\"unsupported_value\"}}\n```\n\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n \n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "crosswk",
      "author_type": "User",
      "created_at": "2024-09-14T03:23:25Z",
      "updated_at": "2024-09-15T13:00:01Z",
      "closed_at": "2024-09-14T03:32:34Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1160/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1160",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1160",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:05.948929",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "应该修复了",
          "created_at": "2024-09-14T03:32:46Z"
        },
        {
          "author": "crosswk",
          "body": "o1还不支持流式传输了，能否选择这个模型是，自动关闭流式传输。Unsupported value: 'stream' does not support true with this model. Only the default (false) value is supported. (request id: 202409140926411873031618470080) @GaiZhenbiao ",
          "created_at": "2024-09-14T09:28:10Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "在 https://github.com/GaiZhenbiao/ChuanhuChatGPT/commit/226a9b21daa7f43569b40e057ed766f703c47c6a 中，o1 模型的流式传输功能被默认关闭",
          "created_at": "2024-09-15T13:00:00Z"
        }
      ]
    },
    {
      "issue_number": 910,
      "title": "[Bug]: azure 模型下知识库问答报错",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n2023-10-08 15:38:18,860 [INFO] [index_func.py:125] 构建索引中……\r\n2023-10-08 15:38:26,338 [WARNING] [before_sleep.py:65] Retrying langchain.embeddings.openai.embed_with_retry.<locals>._embed_with_retry in 4.0 seconds as it raised APIConnectionError: Error communicating with OpenAI: ('Connection aborted.', ConnectionResetError(54, 'Connection reset by peer')).\r\n2023-10-08 15:38:30,670 [WARNING] [before_sleep.py:65] Retrying langchain.embeddings.openai.embed_with_retry.<locals>._embed_with_retry in 4.0 seconds as it raised APIConnectionError: Error communicating with OpenAI: ('Connection aborted.', ConnectionResetError(54, 'Connection reset by peer')).\r\n2023-10-08 15:38:34,986 [WARNING] [before_sleep.py:65] Retrying langchain.embeddings.openai.embed_with_retry.<locals>._embed_with_retry in 4.0 seconds as it raised APIConnectionError: Error communicating with OpenAI: ('Connection aborted.', ConnectionResetError(54, 'Connection reset by peer')).\r\n2023-10-08 15:38:39,309 [WARNING] [before_sleep.py:65] Retrying langchain.embeddings.openai.embed_with_retry.<locals>._embed_with_retry in 8.0 seconds as it raised APIConnectionError: Error communicating with OpenAI: ('Connection aborted.', ConnectionResetError(54, 'Connection reset by peer')).\r\n2023-10-08 15:38:47,653 [WARNING] [before_sleep.py:65] Retrying langchain.embeddings.openai.embed_with_retry.<locals>._embed_with_retry in 10.0 seconds as it raised APIConnectionError: Error communicating with OpenAI: ('Connection aborted.', ConnectionResetError(54, 'Connection reset by peer')).\r\n2023-10-08 15:38:57,992 [ERROR] [index_func.py:136] 索引构建失败！Error communicating with OpenAI: ('Connection aborted.', ConnectionResetError(54, 'Connection reset by peer'))\n\n### 复现操作\n\n不提供其它 key，只配置azure 的，也正确提供了azure_embedding_deployment_name，聊天可以正常使用，但是上传文档知识库似乎链接的还是 openai 的\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "stockcoder",
      "author_type": "User",
      "created_at": "2023-10-08T10:28:03Z",
      "updated_at": "2024-09-11T07:33:14Z",
      "closed_at": "2024-09-11T07:33:14Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/910/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/910",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/910",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:06.196444",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "你可以把配置信息发到我的邮箱，我解决一下：`chefs-vernier.0q@icloud.com`",
          "created_at": "2023-10-10T05:53:19Z"
        },
        {
          "author": "TigrisRiva",
          "body": "遇到相同的问题。配置我仔细检查了没有问题\r\n 索引构建失败！Error code: 404 - {'error': {'code': '404', 'message': 'Resource not found'}}\r\n",
          "created_at": "2023-12-13T06:34:15Z"
        },
        {
          "author": "TigrisRiva",
          "body": "完整信息：\r\n 加载索引中……\r\n/usr/local/lib/python3.9/site-packages/langchain/embeddings/openai.py:320: UserWarning: If you have openai>=1.0.0 installed and are using Azure, please use the `AzureOpenAIEmbeddings` class.\r\n  warnings.warn(\r\n2023-12-13 01:31:08,698 [INFO] [index_func.py:25] loading file: 简易待办.txt\r",
          "created_at": "2023-12-13T06:37:50Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "我调查一下🤔你可以暂时使用本地编制索引的功能，其实效果不比OpenAI的差。",
          "created_at": "2023-12-18T06:59:17Z"
        },
        {
          "author": "TigrisRiva",
          "body": "这个其实不能算一个BUG，只不过大家搭建环境的时候OPENAI版本号不一样\r\n导致整个代码可能都不同。",
          "created_at": "2023-12-18T07:50:31Z"
        }
      ]
    },
    {
      "issue_number": 992,
      "title": "[Bug]: 使用vision模型识别图片时，无法生成答案",
      "body": "### 这个bug是否已存在现有issue了？\r\n\r\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\r\n\r\n### 错误表现\r\n\r\n答案框为空, 使用了第三方API，可能存在json解析问题。\r\n\r\n### 复现操作\r\n\r\n![1](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/43903287/92114ba9-f798-4643-98d5-590c911726f0)\r\n![2](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/43903287/5f7080d8-02d9-4161-8346-eb5c1c0c94c9)\r\n\r\n\r\n### 错误日志\r\n\r\n_No response_\r\n\r\n### 运行环境\r\n\r\n_No response_\r\n\r\n### 帮助解决\r\n\r\n- [ ] 我愿意协助解决！ 愿意提供API和token协助解决。\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "closed",
      "author": "Scolism",
      "author_type": "User",
      "created_at": "2023-12-16T12:45:28Z",
      "updated_at": "2024-09-05T09:19:32Z",
      "closed_at": "2023-12-21T11:29:18Z",
      "labels": [
        "bug",
        "📌 confirmed"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/992/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/992",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/992",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:06.434525",
      "comments": [
        {
          "author": "Scolism",
          "body": "\r\n\r\n\r\n> 我也遇到了同样的问题。答案应该是生成了的，你的截图里在 ‘content’ 后面也能看到生成的答案变成了一个一个单个的字，最后报错我这边是 “JSON解析错误,收到的内容: data: [DONE]“，在 OpenAI 网站那边也能看到模型被调用了，就是答案显出不出来。之前用 GPT4 Vision 都没有这个问题，就是今天更新了最新版本后出现的。\r\n\r\n我也看到了单个字的答案，但是连起来的话，答案也太短了。",
          "created_at": "2023-12-16T15:53:54Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "我修复一下",
          "created_at": "2023-12-17T11:44:16Z"
        },
        {
          "author": "Scolism",
          "body": "> 我修复一下\r\n\r\n谢谢大佬！",
          "created_at": "2023-12-17T13:01:46Z"
        },
        {
          "author": "Scolism",
          "body": "已修复。",
          "created_at": "2023-12-21T11:29:18Z"
        }
      ]
    },
    {
      "issue_number": 1157,
      "title": "[功能请求]: 建议增加外部api调用功能",
      "body": "### 相关问题\n\n建议增加外部应用可调用的API\n\n### 可能的解决办法\n\n建议增加外部应用可调用的API\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "HelloXMFJ",
      "author_type": "User",
      "created_at": "2024-09-04T15:44:06Z",
      "updated_at": "2024-09-04T15:44:06Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1157/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1157",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1157",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:06.626893",
      "comments": []
    },
    {
      "issue_number": 1156,
      "title": "[本地部署]: ubuntu18.04本地部署遇到python问题",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\npython3.10 ChuanhuChatbot.py 运行出错\n\n### 复现操作\n\n正常本地部署，内容还没修改\n\n### 错误日志\n\n```shell\nubuntu@ubuntu:~/chatgpt-web$ python3.10 ChuanhuChatbot.py \r\nTraceback (most recent call last):\r\n  File \"/home/ubuntu/chatgpt-web/ChuanhuChatbot.py\", line 10, in <module>\r\n    from modules.overwrites import *\r\n  File \"/home/ubuntu/chatgpt-web/modules/overwrites.py\", line 4, in <module>\r\n    from llama_index import Prompt\r\nImportError: cannot import name 'Prompt' from 'llama_index' (unknown location)\r\n2024-08-28 10:53:44,265 [INFO] [_client.py:1038] HTTP Request: GET https://api.gradio.app/gradio-messaging/en \"HTTP/1.1 200 OK\"\r\nubuntu@ubuntu:~/chatgpt-web$\n```\n\n\n### 运行环境\n\n```markdown\n- OS: ubuntu18.04\r\n- Browser: Edge\r\n- Gradio version: 1.3.0\r\n- Python version: 3.10\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "txarmux",
      "author_type": "User",
      "created_at": "2024-08-28T11:04:47Z",
      "updated_at": "2024-08-28T11:24:58Z",
      "closed_at": "2024-08-28T11:24:58Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1156/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1156",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1156",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:06.626915",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "请使用最新的主线代码。你用的应该是很久之前的版本了",
          "created_at": "2024-08-28T11:24:55Z"
        }
      ]
    },
    {
      "issue_number": 1134,
      "title": "Incorrect API key provided",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [ ] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n☹️发生了错误：{ “error”: { “message”: “Incorrect API key provided: sk-L*******************************************4HZ5. You can find your API key at [https://platform.openai.com/account/api-keys.”](https://platform.openai.com/account/api-keys.%E2%80%9D), “type”: “invalid_request_error”, “param”: null, “code”: “invalid_api_key” }}\r\n\n\n### 复现操作\n\n正常完成部署\r\n部署后直接使用（默认为gpt-3.5-turbo），没有任何问题。\r\n切换为gpt-4，使用时出现以上报错。（报错之后，在OpenAI Translator以及OpenAI后台检查过，我的key正常的并且是有权限使用gpt-4的）\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "Xtaiyang",
      "author_type": "User",
      "created_at": "2024-05-23T10:19:58Z",
      "updated_at": "2024-08-24T09:43:14Z",
      "closed_at": null,
      "labels": [
        "invalid"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1134/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1134",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1134",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:06.878084",
      "comments": [
        {
          "author": "Xtaiyang",
          "body": "就是用着用着有时候就会这么显示\r\n",
          "created_at": "2024-05-24T06:14:48Z"
        },
        {
          "author": "ThorinKong",
          "body": "我也有这种情况，我是同时设置了GPT4o和Gemini，有时候用一阵子Gemini，再从前端切换回GPT4o后，发送给openAI的apikey就变成了Gemini的key，之后就报错Incorrect API key provided。重启后端后就又正常了",
          "created_at": "2024-08-24T09:43:13Z"
        }
      ]
    },
    {
      "issue_number": 1136,
      "title": "[功能请求]: 希望支持通义千问API , 以及讯飞星火的Spark Pro以及Spark3.5 Max",
      "body": "### 相关问题\n\n无\n\n### 可能的解决办法\n\n通义千问支持类openai格式的调用 ( ? )\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Morpheusr",
      "author_type": "User",
      "created_at": "2024-05-30T06:53:35Z",
      "updated_at": "2024-08-21T05:47:56Z",
      "closed_at": "2024-08-21T05:47:56Z",
      "labels": [
        "feature request",
        "🤖 model"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1136/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1136",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1136",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:07.062366",
      "comments": []
    },
    {
      "issue_number": 1154,
      "title": "[本地部署]: 宝塔的虚拟环境，安装报错",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\nCollecting primp>=0.6.0 (from duckduckgo-search>=5.3.0->-r requirements.txt (line 25))\r\n  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/3f/39/e19361a629083228a0df97ac718965ab27626e2173a073f8a31736115ca9/primp-0.6.0.tar.gz (79 kB)\r\n  Installing build dependencies ... done\r\n  Getting requirements to build wheel ... done\r\n  Preparing metadata (pyproject.toml) ... error\r\n  error: subprocess-exited-with-error\r\n  \r\n  × Preparing metadata (pyproject.toml) did not run successfully.\r\n  │ exit code: 1\r\n  ╰─> [6 lines of output]\r\n      \r\n      Cargo, the Rust package manager, is not installed or is not on PATH.\r\n      This package requires Rust and Cargo to compile extensions. Install it through\r\n      the system's package manager or via https://rustup.rs/\r\n      \r\n      Checking for Rust toolchain....\r\n      [end of output]\r\n  \r\n  note: This error originates from a subprocess, and is likely not a problem with pip.\r\nerror: metadata-generation-failed\r\n\r\n× Encountered error while generating package metadata.\r\n╰─> See above for output.\r\n\r\nnote: This is an issue with the package mentioned above, not pip.\r\nhint: See above for details.\n\n### 复现操作\n\n宝塔面板的python项目：\r\npython版本：3.10.12\r\npip安装模块报错\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n```markdown\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: 3.10.12\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "ft4710403",
      "author_type": "User",
      "created_at": "2024-08-20T03:41:43Z",
      "updated_at": "2024-08-20T04:17:50Z",
      "closed_at": null,
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1154/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1154",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1154",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:07.062390",
      "comments": [
        {
          "author": "ft4710403",
          "body": "后来我把docker里面的python支持库：root\\.local\\lib\\python3.10\\site-packages\r\n直接拷贝到宝塔虚拟环境运行，还是报错：\r\n\r\n是不是因为我的环境没联网呢，用的代理，代理配置如下：\r\n#export no_proxy=\"localhost, 127.0.0.1, ::1\"\r\n\r\nexport http_proxy='http://XXXX:8888'\r\nexport https_proxy='http://XXXX:8888'\r\nexport ALL_PROXY='socks5://XXXX:8888'\r\n#source /etc/environ",
          "created_at": "2024-08-20T04:17:48Z"
        }
      ]
    },
    {
      "issue_number": 68,
      "title": "ws连接超时",
      "body": "![image](https://user-images.githubusercontent.com/62868358/223610446-db7e9a61-221f-4153-a75a-42172c96302f.png)\r\n您好，我部署在了国外的vps上，启动后发现ws连接都是超时的，知道是啥情况吗\r\n",
      "state": "closed",
      "author": "whoisavicii",
      "author_type": "User",
      "created_at": "2023-03-08T03:14:23Z",
      "updated_at": "2024-08-14T14:27:56Z",
      "closed_at": "2023-03-12T01:55:22Z",
      "labels": [
        "docker deployment"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 16,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/68/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/68",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/68",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:07.248760",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "应该是Nginx配置错误；检查一下？",
          "created_at": "2023-03-08T03:18:39Z"
        },
        {
          "author": "whoisavicii",
          "body": "没有 我直接python chuanhuchatgpt.py启动的",
          "created_at": "2023-03-08T03:20:18Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "检查一下服务器端口放行吧",
          "created_at": "2023-03-08T03:21:39Z"
        },
        {
          "author": "whoisavicii",
          "body": "websocket跑的也是http的端口7680呀，web都打得开，难不成我的vps禁了ws？\r\n",
          "created_at": "2023-03-08T03:25:32Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "要不你试试Nginx反向代理，操作说明Readme里有",
          "created_at": "2023-03-08T03:26:29Z"
        }
      ]
    },
    {
      "issue_number": 1076,
      "title": "[Bug]: 输出内容包含数学公式，无法以LaTeX 格式正常显示",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n当我输入问题：请详细解释一下正态分布的概率密度函数的意义，尽可能举例说明，数学公式使用$$，返回如下内容\r\n![1710322329413](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/10733836/1fd650d9-a51f-4db1-b4d2-23b2663050dc)\r\n我希望返回的样式是如下的：\r\n![1710322414848](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/10733836/deeb2699-cd1d-4a89-b9bd-302e92d4ae40)\r\n\n\n### 复现操作\n\n输入问题：请详细解释一下正态分布的概率密度函数的意义，尽可能举例说明，数学公式使用$$\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "chaoyi1987",
      "author_type": "User",
      "created_at": "2024-03-13T09:34:33Z",
      "updated_at": "2024-08-13T14:07:03Z",
      "closed_at": "2024-03-20T14:03:33Z",
      "labels": [
        "invalid"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1076/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1076",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1076",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:07.455983",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "你好，我这里测试是完全正常的：\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/23137268/877658f0-8a76-4373-af23-b7805551d6f6)\r\n\r\n请你确认一下配置中的 _[设置 LaTeX 渲染参数](https://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B#%E8%AE%BE%E7%BD%AE-latex-%E6%B8%B2%E6%9F%93%E5%8F%82%E6",
          "created_at": "2024-03-14T05:01:19Z"
        },
        {
          "author": "Keldos-Li",
          "body": "如果仍有问题，请继续回复。",
          "created_at": "2024-03-20T14:03:33Z"
        },
        {
          "author": "chaoyi1987",
          "body": "![1723393883355](https://github.com/user-attachments/assets/081d235d-1670-4880-8deb-b5cd106ca5dd)\r\n这个是config.json配置文件的截图\r\n[正态分布讲解.json](https://github.com/user-attachments/files/16574549/default.json)\r\n这个是我导出聊天记录的json文件\r\n![1723393953972](https://github.com/user-attachments/assets/e92fffbb-f15b-42f3-",
          "created_at": "2024-08-11T16:33:19Z"
        },
        {
          "author": "Keldos-Li",
          "body": "是的，从20240618那个版本开始又禁用了latex渲染，这个问题由于gradio的bug之前一直没有解决，我应该在release note里提一句的，抱歉！\n\nsee also #1102",
          "created_at": "2024-08-11T16:50:49Z"
        },
        {
          "author": "chaoyi1987",
          "body": "那好像这个问题确实挺久了，也不知道啥时候能修复这个问题",
          "created_at": "2024-08-13T14:07:03Z"
        }
      ]
    },
    {
      "issue_number": 1151,
      "title": "[功能请求]: 是否能使用sess格式的apikey进行对话？",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n现在的3.5key都是sess格式的，想问问能不能用\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "NachtPraise",
      "author_type": "User",
      "created_at": "2024-08-13T13:08:49Z",
      "updated_at": "2024-08-13T13:08:49Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1151/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1151",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1151",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:07.622782",
      "comments": []
    },
    {
      "issue_number": 1131,
      "title": "[其他]: 前端页面中关于代码运行结果的部分是不是显示的太过于暗",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 错误描述\n\n![屏幕截图 2024-05-20 102112](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/30788155/f5325dbb-c17c-400e-9fd7-c90e79275d94)\r\n前端页面中关于代码运行结果的部分的显示不够明显\n\n### 复现操作\n\n正常部署运行\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: centos7.6\r\n- Browser: Chrome\r\n- Gradio version: 4.26.0\r\n- Python version: 3.8.6\r\n(或您的其他运行环境信息)\r\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "kasperlmc",
      "author_type": "User",
      "created_at": "2024-05-20T02:23:44Z",
      "updated_at": "2024-08-02T07:00:27Z",
      "closed_at": "2024-08-02T07:00:27Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1131/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "Keldos-Li"
      ],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1131",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1131",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:07.622803",
      "comments": []
    },
    {
      "issue_number": 1146,
      "title": "[Bug]: Azure OpenAI调用失败",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n调用 Azure OpenAI 打印了日志，但是页面上没有返回消息；这里的逻辑我看不大懂，但是按照之前的代码我添加了self.callback就可以了，请问这里是不是这样子修复一下？\r\n```\r\n    def on_llm_new_token(\r\n        self,\r\n        token: str,\r\n        *,\r\n        chunk: Optional[Union[GenerationChunk, ChatGenerationChunk]] = None,\r\n        run_id: UUID,\r\n        parent_run_id: Optional[UUID] = None,\r\n        **kwargs: Any,\r\n    ) -> Any:\r\n        \"\"\"Run on new LLM token. Only available when streaming is enabled.\r\n\r\n        Args:\r\n            token (str): The new token.\r\n            chunk (GenerationChunk | ChatGenerationChunk): The new generated chunk,\r\n            containing content and other information.\r\n        \"\"\"\r\n        logging.info(f\"### CHUNK ###: {chunk}\")\r\n        # 添加了这行就可以了\r\n        self.callback(token)   \r\n```\n\n### 复现操作\n\n1、正常部署\r\n2、选择 Azure OpenAI 模型\n\n### 错误日志\n\n```shell\n2024-07-24 14:02:28,200 [INFO] [base_model.py:131] ### CHUNK ###: text='。' message=AIMessageChunk(content='。')\r\n2024-07-24 14:02:28,201 [INFO] [base_model.py:131] ### CHUNK ###: text='有' message=AIMessageChunk(content='有')\r\n2024-07-24 14:02:28,201 [INFO] [base_model.py:131] ### CHUNK ###: text='什' message=AIMessageChunk(content='什')\r\n2024-07-24 14:02:28,203 [INFO] [base_model.py:131] ### CHUNK ###: text='么' message=AIMessageChunk(content='么')\r\n2024-07-24 14:02:28,203 [INFO] [base_model.py:131] ### CHUNK ###: text='我' message=AIMessageChunk(content='我')\r\n2024-07-24 14:02:28,204 [INFO] [base_model.py:131] ### CHUNK ###: text='可以' message=AIMessageChunk(content='可以')\r\n2024-07-24 14:02:28,205 [INFO] [base_model.py:131] ### CHUNK ###: text='帮' message=AIMessageChunk(content='帮')\r\n2024-07-24 14:02:28,206 [INFO] [base_model.py:131] ### CHUNK ###: text='助' message=AIMessageChunk(content='助')\r\n2024-07-24 14:02:28,207 [INFO] [base_model.py:131] ### CHUNK ###: text='你' message=AIMessageChunk(content='你')\r\n2024-07-24 14:02:28,209 [INFO] [base_model.py:131] ### CHUNK ###: text='的' message=AIMessageChunk(content='的')\r\n2024-07-24 14:02:28,210 [INFO] [base_model.py:131] ### CHUNK ###: text='吗' message=AIMessageChunk(content='吗')\r\n2024-07-24 14:02:28,212 [INFO] [base_model.py:131] ### CHUNK ###: text='？' message=AIMessageChunk(content='？')\r\n2024-07-24 14:02:28,213 [INFO] [base_model.py:131] ### CHUNK ###: generation_info={'finish_reason': 'stop'} message=AIMessageChunk(content='')\n```\n\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "ZhengQinyu",
      "author_type": "User",
      "created_at": "2024-07-24T06:08:08Z",
      "updated_at": "2024-08-02T06:33:25Z",
      "closed_at": "2024-08-02T06:33:25Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1146/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1146",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1146",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:07.622810",
      "comments": []
    },
    {
      "issue_number": 1107,
      "title": "前台网页回答对话框显示空白，后台日志正常。",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n后台日志显示收到了回单，前台网页显示空白\r\n\r\n前台：\r\n![微信截图_20240421154906](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/16083471/1bf69746-cade-4f60-bc34-9d7a0722752e)\r\n\r\n后台：\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/16083471/e668d391-f49b-4330-9264-c6b049908641)\r\n\n\n### 复现操作\n\n1 正常安装\r\n2 选择Aure OpenAI\r\n3 提出问题\r\n4 前台网页答复是空白的\n\n### 错误日志\n\n```shell\n2024-04-21 07:44:50,200 [INFO] [base_model.py:131] ### CHUNK ###: text='天' message=AIMessageChunk(content='天')\r\nchuanhuchatgpt-chuanhuchat-1  | 2024-04-21 07:44:50,201 [INFO] [base_model.py:131] ### CHUNK ###: text='的' message=AIMessageChunk(content='的')\r\nchuanhuchatgpt-chuanhuchat-1  | 2024-04-21 07:44:50,203 [INFO] [base_model.py:131] ### CHUNK ###: text='日期' message=AIMessageChunk(content='日期')\r\nchuanhuchatgpt-chuanhuchat-1  | 2024-04-21 07:44:50,206 [INFO] [base_model.py:131] ### CHUNK ###: text='是' message=AIMessageChunk(content='是')\r\nchuanhuchatgpt-chuanhuchat-1  | 2024-04-21 07:44:50,208 [INFO] [base_model.py:131] ### CHUNK ###: text='202' message=AIMessageChunk(content='202')\r\nchuanhuchatgpt-chuanhuchat-1  | 2024-04-21 07:44:50,209 [INFO] [base_model.py:131] ### CHUNK ###: text='4' message=AIMessageChunk(content='4')\r\nchuanhuchatgpt-chuanhuchat-1  | 2024-04-21 07:44:50,211 [INFO] [base_model.py:131] ### CHUNK ###: text='年' message=AIMessageChunk(content='年')\r\nchuanhuchatgpt-chuanhuchat-1  | 2024-04-21 07:44:50,213 [INFO] [base_model.py:131] ### CHUNK ###: text='4' message=AIMessageChunk(content='4')\r\nchuanhuchatgpt-chuanhuchat-1  | 2024-04-21 07:44:50,214 [INFO] [base_model.py:131] ### CHUNK ###: text='月' message=AIMessageChunk(content='月')\r\nchuanhuchatgpt-chuanhuchat-1  | 2024-04-21 07:44:50,215 [INFO] [base_model.py:131] ### CHUNK ###: text='21' message=AIMessageChunk(content='21')\r\nchuanhuchatgpt-chuanhuchat-1  | 2024-04-21 07:44:50,216 [INFO] [base_model.py:131] ### CHUNK ###: text='日' message=AIMessageChunk(content='日')\r\nchuanhuchatgpt-chuanhuchat-1  | 2024-04-21 07:44:50,217 [INFO] [base_model.py:131] ### CHUNK ###: text='[[' message=AIMessageChunk(content='[[')\r\nchuanhuchatgpt-chuanhuchat-1  | 2024-04-21 07:44:50,218 [INFO] [base_model.py:131] ### CHUNK ###: text='10' message=AIMessageChunk(conte\n```\n\n\n### 运行环境\n\ndocker  compose 安装\r\n\r\n代码版本\r\ngit log --oneline\r\n7231bea (HEAD -> main, origin/main, origin/HEAD) Merged GPT4-V into GPT4-Turbo to accommodate OpenAI's new API change.\r\n5881220 fix [Bug]: 配置\"hide_history_when_not_logged_in\": true后，界面报错 #1101\r\nfccd3de openai besed RAG uses text-embedding-3-large now.\r\n0c4dc56 feat: improved Chuanhu Assistant behaviour when handling file uploads\r\nc759290 (tag: 20240410) chore: specify python3.10 in Dockerfile\r\n094e66e added numexpr dependency\r\n3f4dde0 fixed file-based RAG\r\nbb92452 fix weird style caused by Gradio introducing prose in chatbot\r\n26c6692 removed chuanhu assistant model entry in example\r\n3fda5bb since available tools can be infered from config, Chuanhu Assistant now uses GPT 3.5 by default, and uses GPT4-Turbo (preview) in Pro mode\r\nfaf1d94 code clean up, bumped openai version\r\n\r\nDockerfile是仓库自带的\r\n\r\nconfig是自己的参数\r\n\r\ncompose.yml文件如下：\r\n\r\nversion: '3.8'\r\nservices:\r\n  chuanhuchat:\r\n    build: .\r\n    ports:\r\n      - \"7860:7860\"\r\n    volumes:\r\n      - .:/app\r\n      - ./config.json:/app/config.json\r\n    # environment:\r\n    #   - OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxx\r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n用docker正常安装，安装过程没有报错。",
      "state": "closed",
      "author": "wuminmin",
      "author_type": "User",
      "created_at": "2024-04-21T07:57:16Z",
      "updated_at": "2024-08-02T06:33:25Z",
      "closed_at": "2024-08-02T06:33:25Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1107/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1107",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1107",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:07.622815",
      "comments": [
        {
          "author": "Caleb66666",
          "body": "同样遇到了这个问题，敢问后续有解掉吗？ @wuminmin ",
          "created_at": "2024-07-05T11:10:48Z"
        },
        {
          "author": "wangfan002",
          "body": "同问，tag 20240410就没有这个问题",
          "created_at": "2024-07-31T10:00:44Z"
        }
      ]
    },
    {
      "issue_number": 1149,
      "title": "[功能请求]: 是否支持GLM-4V国产视觉大模型？",
      "body": "### 相关问题\n\n我在Space中看到已经支持了GLM-4V国产视觉大模型，但是文档中如何配置呢？请问如何配置智源AI的GLM-4V模型的API KEY的接入呢？（不加载本地模型的方式。）\n\n### 可能的解决办法\n\n类似其它大模型的API KEY接入方式，可以接入GLM-4V视觉大模型的API KEY，如何操作？\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "wpfnlp",
      "author_type": "User",
      "created_at": "2024-07-30T03:24:40Z",
      "updated_at": "2024-08-02T02:12:31Z",
      "closed_at": null,
      "labels": [
        "feature request",
        "🤖 model"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1149/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1149",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1149",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:07.818796",
      "comments": []
    },
    {
      "issue_number": 1140,
      "title": "[远程部署]: 最新版本通过nginx反向代理时登陆等接口和theme.css 404",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\nnginx设置反向代理带了端口，访问时发现theme.css的url没端口，其他/login等接口也这样，老版本没问题，这个咋解决\n\n### 复现操作\n\n参考文档设置了nginx反向代理但是带端口\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: centos7\r\n- Server: \r\n- Gradio version: 4.26.0\r\n- Python version: \r\n\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "s478264",
      "author_type": "User",
      "created_at": "2024-07-09T07:37:18Z",
      "updated_at": "2024-07-23T11:57:31Z",
      "closed_at": null,
      "labels": [
        "question",
        "server deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1140/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1140",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1140",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:07.818816",
      "comments": [
        {
          "author": "z-henry",
          "body": "+1 反代后广域网接口不带端口号，局域网正常",
          "created_at": "2024-07-12T06:37:50Z"
        },
        {
          "author": "devotion-i",
          "body": "+1 同样问题，带端口号不行。",
          "created_at": "2024-07-23T11:57:30Z"
        }
      ]
    },
    {
      "issue_number": 1144,
      "title": "[功能请求]: 支持 GPT-4o Mini",
      "body": "### 相关问题\n\nOpenAI 关于推出 GPT4o Mini API 的通知：https://community.openai.com/t/introducing-gpt-4o-mini-in-the-api/871594\n\n### 可能的解决办法\n\n添加模型 GPT-4o Mini\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Wybxc",
      "author_type": "User",
      "created_at": "2024-07-23T09:26:47Z",
      "updated_at": "2024-07-23T10:23:38Z",
      "closed_at": "2024-07-23T10:23:38Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1144/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1144",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1144",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:08.022435",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "Added now https://github.com/GaiZhenbiao/ChuanhuChatGPT/commit/a7c3971860ae3185089d49d40689a7a2e0d9584d",
          "created_at": "2024-07-23T10:23:36Z"
        }
      ]
    },
    {
      "issue_number": 1092,
      "title": "[功能请求]: 请求添加Kimi大模型的支持",
      "body": "### 相关问题\n\nKimi 的长文本支持效果不错，希望能支持\n\n### 可能的解决办法\n\n\r\nKimi 使用 OpenAI 的 库，文档如下：\r\n[Kimi](https://platform.moonshot.cn/docs/api-reference#%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF)\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "guoqingy",
      "author_type": "User",
      "created_at": "2024-04-01T08:13:39Z",
      "updated_at": "2024-07-07T02:05:32Z",
      "closed_at": null,
      "labels": [
        "feature request",
        "🤖 model"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1092/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1092",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1092",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:08.172698",
      "comments": []
    },
    {
      "issue_number": 1119,
      "title": "[本地部署]: 前端进度条显示问题",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/59468866/644c863b-be65-4102-bdbc-88fe8dcc4e4f)\r\n如图，我切换模型之后，希望可以单独去掉这几个加载框，而保留其他的，请问这该怎么设置呢？\n\n### 复现操作\n\n1.正常部署模型\r\n2.切换模型时发现progress进度条重复且位置不对\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n```markdown\n- OS: Linux Centos 8\r\n- Browser: Chrome\r\n- Gradio version:  3.43.2\r\n- Python version: 3.10\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "Patrick-Ni",
      "author_type": "User",
      "created_at": "2024-05-12T03:10:45Z",
      "updated_at": "2024-06-28T14:42:58Z",
      "closed_at": null,
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1119/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "Keldos-Li"
      ],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1119",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1119",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:08.172721",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "@Keldos-Li 有办法解决吗",
          "created_at": "2024-05-12T14:24:16Z"
        }
      ]
    },
    {
      "issue_number": 1117,
      "title": "[Bug]: 自定义模型没有使用自定义api_host",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n使用自定义模型添加模型：\r\n```json\r\n\"extra_model_metadata\": {\r\n        \"GLM-4\": {\r\n            \"model_type\": \"OpenAIVision\",\r\n            \"model_name\": \"glm-4\",\r\n            \"multimodal\": false,\r\n            \"api_host\": \"http://one-api:3000/\",\r\n            \"api_key\": \"sk-XXXXXXXXXXXXXXXXXX\",\r\n         }\r\n}\r\n```\r\n选择模型进行使用时，会报错：\r\n```\r\n{    \"error\": {        \"message\": \"Incorrect API key provided: sk-XX*****************************XXX. You can find your API key at https://platform.openai.com/account/api-keys.\",        \"type\": \"invalid_request_error\",        \"param\": null,        \"code\": \"invalid_api_key\"    }}\r\n```\r\n经检查发现OpenAPIVision中第40行处，虽然使用api_host生成了新的API URL，但并没有使用。实际使用中使用的是shared.state中的对应OpenAI原始URL\n\n### 复现操作\n\n1. Docker部署Chuanhu Chat和OneAPI\r\n3. 使用自定义模型添加模型：\r\n```json\r\n\"extra_model_metadata\": {\r\n        \"GLM-4\": {\r\n            \"model_type\": \"OpenAIVision\",\r\n            \"model_name\": \"glm-4\",\r\n            \"multimodal\": false,\r\n            \"api_host\": \"http://one-api:3000/\",\r\n            \"api_key\": \"sk-XXXXXXXXXXXXXXXXXX\",\r\n         }\r\n}\r\n```\r\n4. 使用时选择自定义模型\r\n5. 控制台报错Incorrect API key\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: Ubuntu 22.04\r\n- Browser: Firefox\r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "zodiacg",
      "author_type": "User",
      "created_at": "2024-05-11T08:56:33Z",
      "updated_at": "2024-06-28T14:40:17Z",
      "closed_at": "2024-06-28T14:40:17Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1117/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1117",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1117",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:08.338103",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "我看看",
          "created_at": "2024-05-11T12:29:28Z"
        },
        {
          "author": "vc12345679",
          "body": "举例： extra_model_metadata 设置如下时\r\n```json\r\n\"extra_model_metadata\": {\r\n      \"DeepSeek V2\": {\r\n            \"model_name\": \"deepseek-chat\",\r\n            \"description\": \"This is DeepSeek's powerful open source LLM.\",\r\n            \"model_type\": \"OpenAIVision\",\r\n            \"multimodal\": false,\r\n           ",
          "created_at": "2024-05-13T07:04:35Z"
        },
        {
          "author": "Keldos-Li",
          "body": "closed via #1125",
          "created_at": "2024-06-28T14:40:17Z"
        }
      ]
    },
    {
      "issue_number": 291,
      "title": "[本地部署] 启动后报错 localhost not accessible",
      "body": "本地部署，启动了，看到 川虎的温馨提示：访问 http://localhost:7860 查看界面 \r\n网页也能打开一下，然后立即就报错了。\r\n\r\nTraceback (most recent call last):\r\n  File \"/Users/dufu/Downloads/ChuanhuChatGPT-main/ChuanhuChatbot.py\", line 451, in <module>\r\n    demo.queue().launch(share=False, favicon_path=\"./assets/favicon.png\")  # 改为 share=True 可以创建公开分享链接\r\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/gradio/blocks.py\", line 1514, in launch\r\n    raise ValueError(\r\nValueError: When localhost is not accessible, a shareable link must be created. Please set share=True.",
      "state": "closed",
      "author": "dufu1991",
      "author_type": "User",
      "created_at": "2023-03-22T07:52:20Z",
      "updated_at": "2024-06-28T12:28:17Z",
      "closed_at": "2023-04-13T18:23:56Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/291/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/291",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/291",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:08.674736",
      "comments": [
        {
          "author": "fuxin123z",
          "body": "?",
          "created_at": "2023-03-31T10:26:25Z"
        },
        {
          "author": "MZhao-ouo",
          "body": "长时间无回复，Closed",
          "created_at": "2023-04-13T18:23:56Z"
        },
        {
          "author": "Accurio",
          "body": "如果使用代理服务器，需要设置 `HTTP_PROXY`、`HTTPS_PROXY` 和 `NO_PROXY` 环境变量。\r\n\r\n```Python\r\nimport os\r\nfrom urllib.request import getproxies\r\n\r\nproxies = getproxies()\r\nos.environ[\"http_proxy\"]  = proxies[\"http\"]\r\nos.environ[\"https_proxy\"] = proxies[\"https\"]\r\nos.environ[\"no_proxy\"]    = \"localhost, 127.0.0.1/8, ::1\"\r",
          "created_at": "2024-06-28T12:28:16Z"
        }
      ]
    },
    {
      "issue_number": 1115,
      "title": "[Bug]: 裁剪 PDF 文件首页（使用 pdfplumber 包获取的首页) 标题存在异常",
      "body": "### 这个bug是否已存在现有issue了？\r\n\r\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\r\n\r\n### 错误表现\r\n\r\n上传 PDF 文件时，优先使用 pdfplumber 解析文档，在调用 get_title_with_cropped_page 裁剪首页时，出现异常 exception\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/70558061/e80c985b-45f1-44c4-8e3a-eeeaacf8e859)\r\n\r\n原因是下面的代码传参数出现了错误：\r\n`user_info = [i[\"text\"] for i in extract_words(first_page.within_bbox((x0,title_bottom,x1,top)))]`\r\n\r\n### 复现操作\r\n\r\n上传PDF\r\n\r\n### 错误日志\r\n\r\n_No response_\r\n\r\n### 运行环境\r\n\r\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\r\n\r\n### 帮助解决\r\n\r\n- [X] 我愿意协助解决！\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "closed",
      "author": "kavons",
      "author_type": "User",
      "created_at": "2024-05-07T05:42:09Z",
      "updated_at": "2024-06-19T18:42:31Z",
      "closed_at": "2024-06-19T18:42:31Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1115/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1115",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1115",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:08.855629",
      "comments": []
    },
    {
      "issue_number": 1123,
      "title": "[功能请求]: add preset model Gemini 1.5 Pro",
      "body": "### 相关问题\r\n\r\n_No response_\r\n\r\n### 可能的解决办法\r\n\r\n在 modules/presets.py 中添加 Gemini 1.5 Pro metadata\r\n\r\n### 帮助开发\r\n\r\n- [X] 我愿意协助开发！\r\n\r\n### 补充说明\r\n\r\nPR #1124 ",
      "state": "closed",
      "author": "vc12345679",
      "author_type": "User",
      "created_at": "2024-05-13T02:24:31Z",
      "updated_at": "2024-06-19T18:38:04Z",
      "closed_at": "2024-06-19T18:38:04Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1123/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1123",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1123",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:08.855650",
      "comments": []
    },
    {
      "issue_number": 1137,
      "title": "[功能请求]: 新版本gradio报错",
      "body": "### 相关问题\n\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/97452846/178feb82-3a28-49f4-a209-46c06e13f5a4)\r\n\n\n### 可能的解决办法\n\n降版本才行\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Xtaiyang",
      "author_type": "User",
      "created_at": "2024-06-04T03:16:21Z",
      "updated_at": "2024-06-04T03:17:49Z",
      "closed_at": "2024-06-04T03:17:49Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1137/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1137",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1137",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:08.855658",
      "comments": []
    },
    {
      "issue_number": 1133,
      "title": "[Bug]: 循环引用的问题会导致无法使用知识库功能",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n![屏幕截图 2024-05-22 102431](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/30788155/5b67c58d-7fd9-4ad5-8c64-b51038718793)\r\n![屏幕截图 2024-05-22 102453](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/30788155/ad65096b-9ff4-4781-90d7-b6c3d70d1145)\r\n\r\n因为要使用知识库的功能，必须要调用base_model.py中的handle_file_upload方法，\r\n而handle_file_upload方法会调用到index_func.py中的construct_index函数，\r\n但是index_func.py又使用from modules.utils import *引用了utils中的全部内容，\r\n同时在utils中的1432行出现了from .models.base_model import BaseLLMModel，使得utils又对base_model 进行了引用，进而导致了循环引用的问题，使得base_model.py的from ..index_func import *无法生效，进而导致handle_file_upload方法无法调用到index_func.py中的construct_index函数，导致知识库的功能出错。\n\n### 复现操作\n\n正常部署了最新版本代码，然后问答正常，但是知识库功能不正常。\n\n### 错误日志\n\n```shell\n2024-05-15 13:48:29,424 [INFO] [base_model.py:492] 加载索引中……\r\nTraceback (most recent call last):\r\n  File \"/usr/local/python38/lib/python3.8/site-packages/gradio/queueing.py\", line 566, in process_events\r\n    response = await route_utils.call_process_api(\r\n  File \"/usr/local/python38/lib/python3.8/site-packages/gradio/route_utils.py\", line 261, in call_process_api\r\n    output = await app.get_blocks().process_api(\r\n  File \"/usr/local/python38/lib/python3.8/site-packages/gradio/blocks.py\", line 1786, in process_api\r\n    result = await self.call_function(\r\n  File \"/usr/local/python38/lib/python3.8/site-packages/gradio/blocks.py\", line 1350, in call_function\r\n    prediction = await utils.async_iteration(iterator)\r\n  File \"/usr/local/python38/lib/python3.8/site-packages/gradio/utils.py\", line 583, in async_iteration\r\n    return await iterator.__anext__()\r\n  File \"/usr/local/python38/lib/python3.8/site-packages/gradio/utils.py\", line 576, in __anext__\r\n    return await anyio.to_thread.run_sync(\r\n  File \"/usr/local/python38/lib/python3.8/site-packages/anyio/to_thread.py\", line 33, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n  File \"/usr/local/python38/lib/python3.8/site-packages/anyio/_backends/_asyncio.py\", line 877, in run_sync_in_worker_thread\r\n    return await future\r\n  File \"/usr/local/python38/lib/python3.8/site-packages/anyio/_backends/_asyncio.py\", line 807, in run\r\n    result = context.run(func, *args)\r\n  File \"/usr/local/python38/lib/python3.8/site-packages/gradio/utils.py\", line 559, in run_sync_iterator_async\r\n    return next(iterator)\r\n  File \"/usr/local/python38/lib/python3.8/site-packages/gradio/utils.py\", line 742, in gen_wrapper\r\n    response = next(iterator)\r\n  File \"/home/luxun/ChuanhuChatGPT/modules/utils.py\", line 41, in predict\r\n    for i in iter:\r\n  File \"/home/luxun/ChuanhuChatGPT/modules/models/base_model.py\", line 632, in predict\r\n    ) = self.prepare_inputs(\r\n  File \"/home/luxun/ChuanhuChatGPT/modules/models/base_model.py\", line 493, in prepare_inputs\r\n    index = construct_index(\r\nNameError: name 'construct_index' is not defined\n```\n\n\n### 运行环境\n\n- OS: centos\r\n- Browser: Chrome\r\n- Gradio version: 4.26.0\r\n- Python version: 3.8.6\r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "kasperlmc",
      "author_type": "User",
      "created_at": "2024-05-22T02:36:20Z",
      "updated_at": "2024-05-28T17:49:31Z",
      "closed_at": "2024-05-28T17:49:30Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1133/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1133",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1133",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:08.855664",
      "comments": [
        {
          "author": "ThorinKong",
          "body": "貌似utils.py引用BaseLLMModel只是为了类型注解\r\n在utils.py中把 from .models.base_model import BaseLLMModel移动到if TYPE_CHECKING:里就行了",
          "created_at": "2024-05-28T11:33:05Z"
        }
      ]
    },
    {
      "issue_number": 985,
      "title": "[Bug]: 模型切换问题",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n模型切换时会出现apikey丢失的情况\r\n分析了下\n\n### 复现操作\n\n1. 正常完成部署\r\n2. 先选择azure 模型\r\n3. 上传知识库文件并完成索引\r\n4. 删除知识库文件，切换到gpt3.5模型\r\n报错，看起来时apikey丢失了\r\n不确定是否是删除知识库文件时发生的丢失\r\n\n\n### 错误日志\n\n```shell\n发生了错误：{ \"error\": { \"message\": \"Incorrect API key provided: sk-xxxxxxx. You can find your API key at https://platform.openai.com/account/api-keys.\", \"type\": \"invalid_request_error\", \"param\": null, \"code\": \"invalid_api_key\" }}\n```\n\n\n### 运行环境\n\nOPENAI版本：>1.0\r\nOPENAI版本如果超过1.0，会出现知识库无法索引的情况，修改代码construct_index代码中的Azure部分\r\nembeddings = AzureOpenAIEmbeddings(\r\n                model=os.environ[\"AZURE_EMBEDDING_MODEL_NAME\"],\r\n                azure_deployment=os.environ[\"AZURE_EMBEDDING_DEPLOYMENT_NAME\"], \r\n                api_key=os.environ[\"AZURE_OPENAI_API_KEY\"],\r\n                openai_api_type = os.environ[\"OPENAI_API_TYPE\"],\r\n                azure_endpoint=os.environ[\"AZURE_OPENAI_API_BASE_URL\"], \r\n                api_version = os.environ[\"AZURE_OPENAI_API_VERSION\"])\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "TigrisRiva",
      "author_type": "User",
      "created_at": "2023-12-15T03:41:08Z",
      "updated_at": "2024-05-23T10:13:24Z",
      "closed_at": "2023-12-15T05:32:22Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/985/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/985",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/985",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:09.063030",
      "comments": [
        {
          "author": "TigrisRiva",
          "body": "已经解决",
          "created_at": "2023-12-15T05:32:22Z"
        },
        {
          "author": "Xtaiyang",
          "body": "> 已经解决\r\n\r\n怎么解决的\r\n",
          "created_at": "2024-05-23T10:13:23Z"
        }
      ]
    },
    {
      "issue_number": 1129,
      "title": "[功能请求]: 请问可以添加对moonshot的支持吗，即kimi的API，我自己写了个简单的demo发到request了",
      "body": "### 相关问题\n\n无\n\n### 可能的解决办法\n\nkimi的api，也就是moonshot，调用方式和openai是一样的，但是我自己目前不知道如何实现图片的功能\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\nhttps://platform.moonshot.cn/docs/api/chat",
      "state": "open",
      "author": "KelvinLauMiau",
      "author_type": "User",
      "created_at": "2024-05-15T08:43:02Z",
      "updated_at": "2024-05-20T09:13:05Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1129/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1129",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1129",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:09.228821",
      "comments": []
    },
    {
      "issue_number": 1130,
      "title": "[本地部署]: 页面提问后，过大约一小时左右继续提问，前端显示error",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n页面提问后，过大约一小时左右继续提问，前端显示error\n\n### 复现操作\n\n页面提问后，过大约一小时左右继续提问，前端显示error\n\n### 错误日志\n\n```shell\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.10/site-packages/gradio/queueing.py\", line 527, in process_events\r\n    response = await route_utils.call_process_api(\r\n  File \"/usr/local/lib/python3.10/site-packages/gradio/route_utils.py\", line 261, in call_process_api\r\n    output = await app.get_blocks().process_api(\r\n  File \"/usr/local/lib/python3.10/site-packages/gradio/blocks.py\", line 1786, in process_api\r\n    result = await self.call_function(\r\n  File \"/usr/local/lib/python3.10/site-packages/gradio/blocks.py\", line 1338, in call_function\r\n    prediction = await anyio.to_thread.run_sync(\r\n  File \"/usr/local/lib/python3.10/site-packages/anyio/to_thread.py\", line 56, in run_sync\r\n    return await get_async_backend().run_sync_in_worker_thread(\r\n  File \"/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py\", line 2144, in run_sync_in_worker_thread\r\n    return await future\r\n  File \"/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py\", line 851, in run\r\n    result = context.run(func, *args)\r\n  File \"/usr/local/lib/python3.10/site-packages/gradio/utils.py\", line 759, in wrapper\r\n    response = f(*args, **kwargs)\r\n  File \"/home/ChuanhuChatGPT/modules/utils.py\", line 46, in billing_info\r\n    return current_model.billing_info()\r\nAttributeError: 'NoneType' object has no attribute 'billing_info'\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.10/site-packages/gradio/queueing.py\", line 527, in process_events\r\n    response = await route_utils.call_process_api(\r\n  File \"/usr/local/lib/python3.10/site-packages/gradio/route_utils.py\", line 261, in call_process_api\r\n    output = await app.get_blocks().process_api(\r\n  File \"/usr/local/lib/python3.10/site-packages/gradio/blocks.py\", line 1786, in process_api\r\n    result = await self.call_function(\r\n  File \"/usr/local/lib/python3.10/site-packages/gradio/blocks.py\", line 1350, in call_function\r\n    prediction = await utils.async_iteration(iterator)\r\n  File \"/usr/local/lib/python3.10/site-packages/gradio/utils.py\", line 583, in async_iteration\r\n    return await iterator.__anext__()\r\n  File \"/usr/local/lib/python3.10/site-packages/gradio/utils.py\", line 576, in __anext__\r\n    return await anyio.to_thread.run_sync(\r\n  File \"/usr/local/lib/python3.10/site-packages/anyio/to_thread.py\", line 56, in run_sync\r\n    return await get_async_backend().run_sync_in_worker_thread(\r\n  File \"/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py\", line 2144, in run_sync_in_worker_thread\r\n    return await future\r\n  File \"/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py\", line 851, in run\r\n    result = context.run(func, *args)\r\n  File \"/usr/local/lib/python3.10/site-packages/gradio/utils.py\", line 559, in run_sync_iterator_async\r\n    return next(iterator)\r\n  File \"/usr/local/lib/python3.10/site-packages/gradio/utils.py\", line 742, in gen_wrapper\r\n    response = next(iterator)\r\n  File \"/home/ChuanhuChatGPT/modules/utils.py\", line 40, in predict\r\n    iter = current_model.predict(*args)\r\nAttributeError: 'NoneType' object has no attribute 'predict'\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.10/site-packages/gradio/queueing.py\", line 527, in process_events\r\n    response = await route_utils.call_process_api(\r\n  File \"/usr/local/lib/python3.10/site-packages/gradio/route_utils.py\", line 261, in call_process_api\r\n    output = await app.get_blocks().process_api(\r\n  File \"/usr/local/lib/python3.10/site-packages/gradio/blocks.py\", line 1786, in process_api\r\n    result = await self.call_function(\r\n  File \"/usr/local/lib/python3.10/site-packages/gradio/blocks.py\", line 1338, in call_function\r\n    prediction = await anyio.to_thread.run_sync(\r\n  File \"/usr/local/lib/python3.10/site-packages/anyio/to_thread.py\", line 56, in run_sync\r\n    return await get_async_backend().run_sync_in_worker_thread(\r\n  File \"/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py\", line 2144, in run_sync_in_worker_thread\r\n    return await future\r\n  File \"/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py\", line 851, in run\r\n    result = context.run(func, *args)\r\n  File \"/usr/local/lib/python3.10/site-packages/gradio/utils.py\", line 759, in wrapper\r\n    response = f(*args, **kwargs)\r\n  File \"/home/ChuanhuChatGPT/modules/utils.py\", line 92, in auto_name_chat_history\r\n    return current_model.auto_name_chat_history(*args)\r\nAttributeError: 'NoneType' object has no attribute 'auto_name_chat_history'\n```\n\n\n### 运行环境\n\n```markdown\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version:\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "baiyi-os",
      "author_type": "User",
      "created_at": "2024-05-16T09:07:57Z",
      "updated_at": "2024-05-16T09:07:57Z",
      "closed_at": null,
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1130/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 1,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1130",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1130",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:09.228838",
      "comments": []
    },
    {
      "issue_number": 1126,
      "title": "[Bug]: 本地部署的模型切换时，如果不等模型A分配到显卡上就切换另外一个模型B，会导致显示B而实际上调用A",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n本地部署的模型切换时，如果不等模型A分配到显卡上就切换另外一个模型B，会导致显示B而实际上调用A\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/59468866/91eda13a-cf66-4218-b7de-db940b2974be)\r\n是否可以在部署模型时禁止用户切换模型？或者放弃当前的部署，转而部署新的模型\n\n### 复现操作\n\n1.正常完成本地部署\r\n2.切换qwen-7b-chat模型时，没有等待模型分配到显卡上就切换模型qwen-14b-chat\r\n3.实际回复时仍然调用的是qwen-7b-chat\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: Centos 8\r\n- Browser: chrome\r\n- Gradio version: 3.43.2\r\n- Python version: 3.10\r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "Patrick-Ni",
      "author_type": "User",
      "created_at": "2024-05-13T07:59:40Z",
      "updated_at": "2024-05-14T15:37:31Z",
      "closed_at": null,
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1126/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "Keldos-Li"
      ],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1126",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1126",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:09.228845",
      "comments": []
    },
    {
      "issue_number": 1127,
      "title": "[功能请求]: GPT4o 已经发布，希望添加模型GPT4o",
      "body": "### 相关问题\n\n GPT4o 选项\n\n### 可能的解决办法\n\n添加模型GPT4o\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "fanzhixin",
      "author_type": "User",
      "created_at": "2024-05-14T05:07:58Z",
      "updated_at": "2024-05-14T15:31:47Z",
      "closed_at": "2024-05-14T15:31:47Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1127/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1127",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1127",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:09.228849",
      "comments": [
        {
          "author": "vc12345679",
          "body": "PR #1128 ",
          "created_at": "2024-05-14T14:39:27Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "加入了 https://github.com/GaiZhenbiao/ChuanhuChatGPT/commit/ac0a1ea87d5a5293d6622631122562b0fce9202c",
          "created_at": "2024-05-14T15:31:45Z"
        }
      ]
    },
    {
      "issue_number": 1121,
      "title": "[Bug]: BaseLLMModel.init() got an unexpected keyword argument 'api_key'",
      "body": "### 这个bug是否已存在现有issue了？\r\n\r\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\r\n\r\n### 错误表现\r\n\r\nGroq 模型不能正常工作，选择Groq相关模型后显示Error，后台报 BaseLLMModel.init() got an unexpected keyword argument 'api_key'\r\n\r\n\r\n\r\n### 复现操作\r\n\r\n选择Groq相关模型后显示Error\r\n\r\n### 错误日志\r\n\r\n_No response_\r\n\r\n### 运行环境\r\n\r\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\r\n\r\n### 帮助解决\r\n\r\n- [x] 我愿意协助解决！\r\n\r\n### 补充说明\r\n\r\n确认为 groq.py/Groq_Client 的 __init__ 函数中 call 父类 (BaseLLMModel) __init__ 函数时参数传递格式有误\r\nhttps://github.com/GaiZhenbiao/ChuanhuChatGPT/blob/7aee8f287dcfc72cd2908255d6b23556c620b7d1/modules/models/Groq.py#L21\r\n\r\n已提交 PR #1122, 修复后使用正常\r\n\r\n参考其它模型（GoogleGemini）__init__ 定义\r\nhttps://github.com/GaiZhenbiao/ChuanhuChatGPT/blob/7aee8f287dcfc72cd2908255d6b23556c620b7d1/modules/models/GoogleGemini.py#L20",
      "state": "closed",
      "author": "vc12345679",
      "author_type": "User",
      "created_at": "2024-05-13T01:03:48Z",
      "updated_at": "2024-05-13T16:31:00Z",
      "closed_at": "2024-05-13T16:31:00Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1121/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1121",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1121",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:09.380755",
      "comments": []
    },
    {
      "issue_number": 1064,
      "title": "[功能请求]: 想自定义登录页面",
      "body": "### 相关问题\n\n想自定义登录页面\n\n### 可能的解决办法\n\n想自定义登录页面\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "hengyanqwe",
      "author_type": "User",
      "created_at": "2024-03-05T06:59:14Z",
      "updated_at": "2024-05-09T05:55:58Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1064/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1064",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1064",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:09.380776",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "这个需求有点含糊，想如何自定义？怎样算自定义？是要加什么删什么还是改个皮？不太清楚想法。\r\n\r\n要是有朋友突然问， _聊天界面想自定义_，我们又该如何呢……ε=(´ο｀*)))",
          "created_at": "2024-04-05T17:21:42Z"
        },
        {
          "author": "hengyanqwe",
          "body": "> 这个需求有点含糊，想如何自定义？怎样算自定义？是要加什么删什么还是改个皮？不太清楚想法。\r\n> \r\n> 要是有朋友突然问， _聊天界面想自定义_，我们又该如何呢……ε=(´ο｀*)))\r\n\r\n我是想最起码得是中文的，并且我了解了下gradio，貌似这东西是生成的登录页面并且还改不了，我其实是想最好有一个具体的能改的html页面，直接写代码就行了。",
          "created_at": "2024-04-05T17:25:37Z"
        },
        {
          "author": "Keldos-Li",
          "body": "> 我是想最起码得是中文的\r\n\r\n此事可行；\r\n\r\n---\r\n\r\n> 我其实是想最好有一个具体的能改的html页面，直接写代码就行了。\r\n\r\n做不到，除非重写gradio自己打包成库\r\n\r\n---\r\n\r\n或者大概给gradio提交pull request也是可以的\r\n",
          "created_at": "2024-04-05T18:02:41Z"
        },
        {
          "author": "ZQF-CDUT",
          "body": "请问实现了这个功能吗，我也需要",
          "created_at": "2024-05-09T05:55:56Z"
        }
      ]
    },
    {
      "issue_number": 1102,
      "title": "[Bug]: gradio4.26输出LaTeX出错",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\nchat界面响应回答的时候，一开始是有流式输出，还没输出完，窗口就变成一片空白\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/32857610/aeb96e3c-6739-4531-ab1e-2e959cc2dd93)\r\n\n\n### 复现操作\n\n1.正常完成本地部署2. 选取GPT4-turbo模型，正确填写API 3.在对话框中要求 ChatGPT\"以LaTex格式输出三角函数\"4.ChatGPT\r\n输出部分内容后回复页面空白\n\n### 错误日志\n\n```shell\n终端中显示正常回复，UI页面没有回复的内容\n```\n\n\n### 运行环境\n\n- OS: MacOS 14.4 (23E214)\r\n- Browser: Edge  123.0.2420.97 (正式版本) (arm64)\r\n- Gradio version: 4.26.0\r\n- Python version: 3.11.8\r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "jhy549",
      "author_type": "User",
      "created_at": "2024-04-18T01:19:24Z",
      "updated_at": "2024-05-04T13:48:07Z",
      "closed_at": null,
      "labels": [
        "bug",
        "🔌 dependency",
        "📌 confirmed"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1102/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1102",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1102",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:09.538121",
      "comments": [
        {
          "author": "jhy549",
          "body": "<img width=\"955\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/32857610/3ac299fc-2e3d-447a-ad61-e8d98b992cc1\">\r\n\r\n界面：\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/32857610/99782a28-a0ee-4e39-9389-869095c699f7)\r\n\r\n",
          "created_at": "2024-04-18T01:28:19Z"
        },
        {
          "author": "jhy549",
          "body": "经测试，是因为流式输出的内容较长，生成速度慢了前端就显示不出内容，该如何解决呢？",
          "created_at": "2024-04-18T01:35:00Z"
        },
        {
          "author": "Keldos-Li",
          "body": "hi，这个错误我们已经确认过，是LaTeX输出导致的UI问题，来源是Gradio更新4版本后出现的。\n\n我们已经把问题提交给了Gradio，等他们修复中……目前如果要避免错误，只能暂时禁用latex渲染，或者回到川虎Chat的上一个版本（记得重新安装依赖）。\n\n对造成的不便深感歉意😞",
          "created_at": "2024-04-18T02:24:57Z"
        },
        {
          "author": "JaceJu-frog",
          "body": "你好维护者，我用gradio 3.43.2 和gradio-client 0.5.0也出现如图所示的错误，请问回退到上一个版本是 [20240310](https://github.com/GaiZhenbiao/ChuanhuChatGPT/releases/tag/20240310) 吗",
          "created_at": "2024-05-01T05:34:57Z"
        },
        {
          "author": "Keldos-Li",
          "body": "@JaceJu-frog 是的，上一个版本是 [20240310](https://github.com/GaiZhenbiao/ChuanhuChatGPT/releases/tag/20240310)\r\n\r\nlink https://github.com/gradio-app/gradio/issues/8006",
          "created_at": "2024-05-04T13:48:06Z"
        }
      ]
    },
    {
      "issue_number": 1110,
      "title": "[Bug]: 手机上访问切换模型无法显示完全，或很难选取列表最下面的模型",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n如视频，无法正确选取模型\r\n\r\nhttps://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/37688676/a4bb4539-6879-4b78-b9ea-4a6ea4cfaf5c\r\n\r\n\n\n### 复现操作\n\n全部正确部署，使用docker。\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: Ubuntu 22\r\n- Browser: edge\r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "zswll2",
      "author_type": "User",
      "created_at": "2024-04-30T01:29:47Z",
      "updated_at": "2024-05-04T13:34:35Z",
      "closed_at": "2024-05-04T13:34:35Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1110/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1110",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1110",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:09.710612",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "确实有这个问题。\r\n@GaiZhenbiao 要不要把 model selecte dropdown 的 filterable 改成 False？🤔",
          "created_at": "2024-04-30T06:58:03Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "确实，改一下吧",
          "created_at": "2024-05-04T13:34:12Z"
        }
      ]
    },
    {
      "issue_number": 798,
      "title": "[Docker]: docker版本无法正确就文件进行提问",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n1. 初次docker部署后，在尝试与文件进行对话时，提示错误。错误日志提示需要安装\"sentence_transformers\"这个module。个人的解决方案为直接在docker容器内进入bash，pip install sentence_transformers，未修改dockerfile或者requirement.txt。如此处理后文件可以正常拖放，并且建立索引。\r\n2. 正常按流程复现操作会提示一个和choices这个模块有问题的日志(错误日志1)，但是我我通过pip install --upgrade langchain (解决了？)后续出现了下边的错误日志2\n\n### 复现操作\n\n1. 正常完成docker部署并设置好配置文件\r\n2. 拖放pdf文件(出现问题1)\r\n3. 与pdf文件对话(出现问题2)\n\n### 错误日志\n\n```shell\n错误日志1：\r\n\r\nTraceback (most recent call last):\r\n  File \"/root/.local/lib/python3.9/site-packages/gradio/routes.py\", line 414, in run_predict\r\n    output = await app.get_blocks().process_api(\r\n  File \"/root/.local/lib/python3.9/site-packages/gradio/blocks.py\", line 1320, in process_api\r\n    result = await self.call_function(\r\n  File \"/root/.local/lib/python3.9/site-packages/gradio/blocks.py\", line 1048, in call_function\r\n    prediction = await anyio.to_thread.run_sync(\r\n  File \"/root/.local/lib/python3.9/site-packages/anyio/to_thread.py\", line 33, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n  File \"/root/.local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py\", line 877, in run_sync_in_worker_thread\r\n    return await future\r\n  File \"/root/.local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py\", line 807, in run\r\n    result = context.run(func, *args)\r\n  File \"/app/modules/utils.py\", line 120, in handle_summarize_index\r\n    return current_model.summarize_index(*args)\r\n  File \"/app/modules/models/base_model.py\", line 304, in summarize_index\r\n    summary = chain({\"input_documents\": list(index.docstore.__dict__[\"_dict\"].values())}, return_only_outputs=True)[\"output_text\"]\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/chains/base.py\", line 140, in __call__\r\n    raise e\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/chains/base.py\", line 134, in __call__\r\n    self._call(inputs, run_manager=run_manager)\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/chains/combine_documents/base.py\", line 84, in _call\r\n    output, extra_return_dict = self.combine_docs(\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/chains/combine_documents/map_reduce.py\", line 144, in combine_docs\r\n    results = self.llm_chain.apply(\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/chains/llm.py\", line 157, in apply\r\n    raise e\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/chains/llm.py\", line 154, in apply\r\n    response = self.generate(input_list, run_manager=run_manager)\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/chains/llm.py\", line 79, in generate\r\n    return self.llm.generate_prompt(\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/chat_models/base.py\", line 143, in generate_prompt\r\n    return self.generate(prompt_messages, stop=stop, callbacks=callbacks)\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/chat_models/base.py\", line 91, in generate\r\n    raise e\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/chat_models/base.py\", line 83, in generate\r\n    results = [\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/chat_models/base.py\", line 84, in <listcomp>\r\n    self._generate(m, stop=stop, run_manager=run_manager)\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/chat_models/openai.py\", line 297, in _generate\r\n    return self._create_chat_result(response)\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/chat_models/openai.py\", line 312, in _create_chat_result\r\n    for res in response[\"choices\"]:\r\nKeyError: 'choices'\r\n\r\n错误日志2：\r\n2023-06-08 23:20:59,467 [INFO] [base_model.py:632] filename: history/jingtian/2023-06-05_14-15-45.json\r\n2023-06-08 23:21:03,749 [INFO] [index_func.py:123] 找到了缓存的索引文件，加载中……\r\n2023-06-08 23:21:03,750 [INFO] [loader.py:64] Loading faiss.\r\n2023-06-08 23:21:03,790 [INFO] [loader.py:66] Successfully loaded faiss.\r\n2023-06-08 23:21:06,040 [INFO] [index_func.py:123] 找到了缓存的索引文件，加载中……\r\n2023-06-08 23:21:06,042 [INFO] [base_model.py:294] Generating content summary...\r\nTraceback (most recent call last):\r\n  File \"/root/.local/lib/python3.9/site-packages/gradio/routes.py\", line 414, in run_predict\r\n    output = await app.get_blocks().process_api(\r\n  File \"/root/.local/lib/python3.9/site-packages/gradio/blocks.py\", line 1320, in process_api\r\n    result = await self.call_function(\r\n  File \"/root/.local/lib/python3.9/site-packages/gradio/blocks.py\", line 1048, in call_function\r\n    prediction = await anyio.to_thread.run_sync(\r\n  File \"/root/.local/lib/python3.9/site-packages/anyio/to_thread.py\", line 33, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n  File \"/root/.local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py\", line 877, in run_sync_in_worker_thread\r\n    return await future\r\n  File \"/root/.local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py\", line 807, in run\r\n    result = context.run(func, *args)\r\n  File \"/app/modules/utils.py\", line 120, in handle_summarize_index\r\n    return current_model.summarize_index(*args)\r\n  File \"/app/modules/models/base_model.py\", line 304, in summarize_index\r\n    summary = chain({\"input_documents\": list(index.docstore.__dict__[\"_dict\"].values())}, return_only_outputs=True)[\"output_text\"]\r\n  File \"/usr/local/lib/python3.9/site-packages/langchain/chains/base.py\", line 140, in __call__\r\n    raise e\r\n  File \"/usr/local/lib/python3.9/site-packages/langchain/chains/base.py\", line 134, in __call__\r\n    self._call(inputs, run_manager=run_manager)\r\n  File \"/usr/local/lib/python3.9/site-packages/langchain/chains/combine_documents/base.py\", line 84, in _call\r\n    output, extra_return_dict = self.combine_docs(\r\n  File \"/usr/local/lib/python3.9/site-packages/langchain/chains/combine_documents/map_reduce.py\", line 144, in combine_docs\r\n    results = self.llm_chain.apply(\r\n  File \"/usr/local/lib/python3.9/site-packages/langchain/chains/llm.py\", line 157, in apply\r\n    raise e\r\n  File \"/usr/local/lib/python3.9/site-packages/langchain/chains/llm.py\", line 154, in apply\r\n    response = self.generate(input_list, run_manager=run_manager)\r\n  File \"/usr/local/lib/python3.9/site-packages/langchain/chains/llm.py\", line 79, in generate\r\n    return self.llm.generate_prompt(\r\n  File \"/usr/local/lib/python3.9/site-packages/langchain/chat_models/base.py\", line 143, in generate_prompt\r\n    return self.generate(prompt_messages, stop=stop, callbacks=callbacks)\r\n  File \"/usr/local/lib/python3.9/site-packages/langchain/chat_models/base.py\", line 91, in generate\r\n    raise e\r\n  File \"/usr/local/lib/python3.9/site-packages/langchain/chat_models/base.py\", line 83, in generate\r\n    results = [\r\n  File \"/usr/local/lib/python3.9/site-packages/langchain/chat_models/base.py\", line 84, in <listcomp>\r\n    self._generate(m, stop=stop, run_manager=run_manager)\r\n  File \"/usr/local/lib/python3.9/site-packages/langchain/chat_models/openai.py\", line 297, in _generate\n```\n\n\n### 运行环境\n\n- OS: \r\n- Docker version: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "sebastian0619",
      "author_type": "User",
      "created_at": "2023-06-08T23:29:39Z",
      "updated_at": "2024-05-03T11:43:32Z",
      "closed_at": null,
      "labels": [
        "question",
        "docker deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/798/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/798",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/798",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:09.858264",
      "comments": [
        {
          "author": "YANG301",
          "body": "我在linux遇到了与你一样的问题，解决方法也与你一致。我的docker也是直接拉的最新的镜像。\r\n这是我的报错\r\n`\r\n2024-05-03 11:29:15,628 [INFO] [index_func.py:29] loading file: 基于YOLOv5Gradio的在线多功能视频图像检测系统.docx\r\n/root/.local/lib/python3.10/site-packages/langchain/document_loaders/__init__.py:36: LangChainDeprecationWarning: Importing document loaders",
          "created_at": "2024-05-03T11:43:31Z"
        }
      ]
    },
    {
      "issue_number": 1111,
      "title": "[本地部署]: Azure OpenAI调用错误，部署报错openai_api_key为空",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n尝试配置Azure OpenAI，如下。但运行后仍然调用的是`models/OpenAI.py`, 而不是`models/Azure.py`，导致的报错为：`openai_api_key`为空\r\n\r\n{\r\n    \"openai_api_type\": \"azure\",\r\n    \"azure_openai_api_key\": \"我的Azure OpenAI密钥\",\r\n    \"azure_openai_api_base_url\": \"https://openai-pgs.openai.azure.com\",\r\n    \"azure_openai_api_version\": \"2024-02-01\",\r\n    \"azure_deployment_name\": \"cpii_gpt-4-0613\",\r\n    \"azure_embedding_deployment_name\": \"cpii_text-embedding-ada-002\",\r\n    \"azure_embedding_model_name\": \"text-embedding-ada-002\",\r\n}\n\n### 复现操作\n\n如上配置config.json\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n```markdown\n- OS: macOS 14.4.1\r\n- Browser: Chrome\r\n- Gradio version: 4.26.0\r\n- Python version: 3.8.18\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "JinchaoLove",
      "author_type": "User",
      "created_at": "2024-05-02T23:24:22Z",
      "updated_at": "2024-05-03T02:14:09Z",
      "closed_at": "2024-05-03T02:13:33Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1111/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1111",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1111",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:10.022690",
      "comments": [
        {
          "author": "JinchaoLove",
          "body": "请问如何正确配置Azure OpenAI呢？",
          "created_at": "2024-05-02T23:28:48Z"
        },
        {
          "author": "JinchaoLove",
          "body": "解决了！1. \"default_model\"改为\"Azure OpenAI\", 2. \"azure_openai_api_base_url\"末尾要加上\"/openai\", 见langchain的[issue](https://github.com/langchain-ai/langchain/issues/13284)",
          "created_at": "2024-05-03T02:13:34Z"
        }
      ]
    },
    {
      "issue_number": 1109,
      "title": "[功能请求]: Mermaid 流程图",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n识别 mermaid 标记，显示流程图，并显示出修改链接\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "stockcoder",
      "author_type": "User",
      "created_at": "2024-04-25T05:40:11Z",
      "updated_at": "2024-04-25T06:11:18Z",
      "closed_at": "2024-04-25T06:11:18Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1109/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1109",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1109",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:10.202566",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "Duplicate with #1097",
          "created_at": "2024-04-25T06:11:01Z"
        }
      ]
    },
    {
      "issue_number": 470,
      "title": "[功能请求]: 想要图片生成功能！",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n跪求增加api key调用图片生成的模型，这样对话中就可以生成图片了\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "kiddog99",
      "author_type": "User",
      "created_at": "2023-03-30T10:30:36Z",
      "updated_at": "2024-04-21T11:43:46Z",
      "closed_at": "2023-12-22T10:48:18Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/470/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/470",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/470",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:10.362288",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "现在可以使用 Midjourney 和 dalle 生成图片~",
          "created_at": "2023-12-22T10:48:19Z"
        },
        {
          "author": "Fr3027",
          "body": "请教下dalle生成图片的时候可以指定尺寸吗，现在只有1024*1024的",
          "created_at": "2024-04-21T11:43:45Z"
        }
      ]
    },
    {
      "issue_number": 1104,
      "title": "[功能请求]: 有没有可能增加联网搜索为bing！有时候网络环境不允许",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n增加联网搜索为bing\n\n### 帮助开发\n\n- [x] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "huangsir11",
      "author_type": "User",
      "created_at": "2024-04-18T07:05:05Z",
      "updated_at": "2024-04-18T07:05:14Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1104/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1104",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1104",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:10.583218",
      "comments": []
    },
    {
      "issue_number": 1101,
      "title": "[Bug]: 配置\"hide_history_when_not_logged_in\": true后，界面报错",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\ndocker部署的\r\n配置\"hide_history_when_not_logged_in\": true后，界面报错\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/161782704/9f52a361-8e51-4d92-9b5e-db6e438f2e23)\r\n\n\n### 复现操作\n\n在没修改之前一切正常，为了隐藏历史，修改了该参数，报错\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "huangsir11",
      "author_type": "User",
      "created_at": "2024-04-17T02:29:40Z",
      "updated_at": "2024-04-18T01:11:17Z",
      "closed_at": "2024-04-17T16:27:02Z",
      "labels": [
        "bug",
        "📌 confirmed"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1101/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1101",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1101",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:10.583238",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "修复了，感谢反馈～",
          "created_at": "2024-04-17T16:27:02Z"
        },
        {
          "author": "huangsir11",
          "body": "> 修复了，感谢反馈～\r\n\r\n不客气哦，应该的，docker什么时候会同步更新呐",
          "created_at": "2024-04-18T01:11:16Z"
        }
      ]
    },
    {
      "issue_number": 1100,
      "title": "[Bug]: midjourney_temp_folder 配置无效",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n在config.json中设置了midjourney_temp_folder:\"./tmp\"后，./tmp文件夹不在gradio的allowed_paths中，导致聊天记录中图片均403。\r\n在config.json中设置了midjourney_temp_folder:\"./other_folder\"后，midjourney生成的图片仍然下载至./tmp文件夹中。\r\n相关代码：\r\n[https://github.com/GaiZhenbiao/ChuanhuChatGPT/blob/fccd3de495e1b2184d49ca4c1c353dc10fc2eb3e/ChuanhuChatbot.py#L814](url)\r\n[https://github.com/GaiZhenbiao/ChuanhuChatGPT/blob/fccd3de495e1b2184d49ca4c1c353dc10fc2eb3e/modules/models/midjourney.py#L58](url)\n\n### 复现操作\n\n1.正常完成部署并配置好midjourney相关配置和环境\r\n2.选取midjourney模型\r\n3.在对话框中填写/mj 任意描述话语 并发送\r\n4.程序返回的图片均不能显示，控制台报错403\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "ThorinKong",
      "author_type": "User",
      "created_at": "2024-04-13T05:56:42Z",
      "updated_at": "2024-04-13T14:06:30Z",
      "closed_at": null,
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1100/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1100",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1100",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:10.747149",
      "comments": []
    },
    {
      "issue_number": 1098,
      "title": "[功能请求]: 启用chromium的文本查找功能",
      "body": "### 相关问题\r\n\r\n目前的文本查找功能不够好，无法在页面中高亮，只能跳转到大概的位置。希望能启用chromium内置的文本查找功能。\r\n\r\n### 可能的解决办法\r\n\r\n启用chromium内置的文本查找功能。\r\n\r\n### 帮助开发\r\n\r\n- [ ] 我愿意协助开发！\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "closed",
      "author": "jeffgyf",
      "author_type": "User",
      "created_at": "2024-04-10T17:20:13Z",
      "updated_at": "2024-04-12T04:17:29Z",
      "closed_at": "2024-04-12T04:17:28Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1098/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1098",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1098",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:10.747169",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "Hi，抱歉，好像没有很理解您的意思？",
          "created_at": "2024-04-10T17:39:38Z"
        },
        {
          "author": "jeffgyf",
          "body": "抱歉，发错repo了😅",
          "created_at": "2024-04-12T04:17:28Z"
        }
      ]
    },
    {
      "issue_number": 1099,
      "title": "[Bug]: 嘗試開一個新的聊天室時, system prompt會有高機率消失(已經勾選新建對話保留prompt)",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n\r\nhttps://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/137477635/1e4b685f-96a7-4448-bdfa-9e2bc7bc777b\r\n\r\n1. 請參考這個問題複製影片\r\n2. 這問題是昨天4/10晚上升級川虎後發生的, 更新前沒有這問題\r\n3. 請問大神, 我們能不能自己透過modify 川虎的檔案來讓system prompt保留住呢? (想嘗試理解透過修改哪裡能夠保留system prompt)\n\n### 复现操作\n\n請參考問題複製影片, 感恩。\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "tomkuo1124",
      "author_type": "User",
      "created_at": "2024-04-11T04:10:12Z",
      "updated_at": "2024-04-11T12:24:25Z",
      "closed_at": null,
      "labels": [
        "bug",
        "📌 confirmed"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1099/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1099",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1099",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:10.903755",
      "comments": []
    },
    {
      "issue_number": 1077,
      "title": "[Docker]: 部署时报错itsdangerous模块缺失，无法启动",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n拉取最新版镜像（20240310），启动时gradio报依赖缺失，无法启动（itsdangerous）\n\n### 复现操作\n\n1. 正常使用docker-compose部署\r\n2. 服务无法启动\n\n### 错误日志\n\n```shell\n2024-03-15 01:17:27,910 [INFO] [config.py:311] 默认模型设置为了：GPT3.5 Turbo\r\n2024-03-15 01:17:28,690 [INFO] [gradio_patch.py:114] Overrided the gradio.oauth/logout route\r\n/bin/sh: 1: git: not found\r\nTraceback (most recent call last):\r\n  File \"/root/.local/lib/python3.9/site-packages/gradio/oauth.py\", line 21, in attach_oauth\r\n    from starlette.middleware.sessions import SessionMiddleware\r\n  File \"/root/.local/lib/python3.9/site-packages/starlette/middleware/sessions.py\", line 5, in <module>\r\n    import itsdangerous\r\nModuleNotFoundError: No module named 'itsdangerous'\r\nThe above exception was the direct cause of the following exception:\r\nTraceback (most recent call last):\r\n  File \"/app/ChuanhuChatbot.py\", line 811, in <module>\r\n    logout_btn.click(\r\n  File \"/root/.local/lib/python3.9/site-packages/gradio/blocks.py\", line 1538, in __exit__\r\n    self.app = routes.App.create_app(self)\r\n  File \"/root/.local/lib/python3.9/site-packages/gradio/routes.py\", line 285, in create_app\r\n    attach_oauth(app)\r\n  File \"/root/.local/lib/python3.9/site-packages/gradio/oauth.py\", line 23, in attach_oauth\r\n    raise ImportError(\r\nImportError: Cannot initialize OAuth to due a missing library. Please run `pip install gradio[oauth]` or add `gradio[oauth]` to your requirements.txt file in order to install the required dependencies.\n```\n\n\n### 运行环境\n\n- OS: Linux/amd64\r\n- Docker version: 24.0.5\r\n- Gradio version: 镜像内置\r\n- Python version: 镜像内置\r\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "zodiacg",
      "author_type": "User",
      "created_at": "2024-03-15T01:29:50Z",
      "updated_at": "2024-04-10T17:15:18Z",
      "closed_at": "2024-03-20T14:44:28Z",
      "labels": [
        "bug",
        "📌 confirmed"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 11,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1077/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1077",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1077",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:10.903775",
      "comments": [
        {
          "author": "R3n1ian9",
          "body": "遇到了同样的问题",
          "created_at": "2024-03-15T06:18:15Z"
        },
        {
          "author": "yufeiyohi",
          "body": "我也碰到了同样的问题，docker中没有安装相对应的python model",
          "created_at": "2024-03-15T08:31:19Z"
        },
        {
          "author": "C-Dragon8",
          "body": "我也碰到了同样的问题，重新安装itsdangerous、gradio后仍报错。",
          "created_at": "2024-03-16T02:34:19Z"
        },
        {
          "author": "AsoulAva",
          "body": "遇到了同样的问题",
          "created_at": "2024-03-19T09:02:53Z"
        },
        {
          "author": "guyuhengand",
          "body": "确实有这个问题，老大快来救救呀，我怎么配置都说缺itsdangerous，docker版本换过，系统换过",
          "created_at": "2024-03-20T12:09:40Z"
        }
      ]
    },
    {
      "issue_number": 1090,
      "title": "[本地部署]: 本地部署完成后，上传文件报错",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n[本地部署]: 本地部署完成后，上传文件报错\n\n### 复现操作\n\n本地部署完成后，上传文件报错\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/33093118/0e89ce32-7ce3-4ef6-b99f-bbc1eac9866b)\r\n\n\n### 错误日志\n\n```shell\n100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 2/2 [00:00<00:00, 2809.31it/s]\r\nTraceback (most recent call last):\r\n  File \"/Users/dingtao/work/hpr/ai/code/ChuanhuChatGPT/modules/models/base_model.py\", line 412, in handle_file_upload\r\n    construct_index(self.api_key, file_src=files)\r\n  File \"/Users/dingtao/work/hpr/ai/code/ChuanhuChatGPT/modules/index_func.py\", line 133, in construct_index\r\n    raise Exception(i18n(\"没有找到任何支持的文档。\"))\r\nException: 没有找到任何支持的文档。\n```\n\n\n### 运行环境\n\n```markdown\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version:\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "KrystalandBarry",
      "author_type": "User",
      "created_at": "2024-04-01T05:58:58Z",
      "updated_at": "2024-04-10T17:13:39Z",
      "closed_at": null,
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1090/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1090",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1090",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:11.117506",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "测试一下其他文件可不可以？另外，请提供关于失败文件的更多相关信息。什么格式？什么编码？等等\r\n",
          "created_at": "2024-04-02T13:48:22Z"
        },
        {
          "author": "KrystalandBarry",
          "body": "换了很多文件都不行，pdf，docx，jpg等，都是utf-8",
          "created_at": "2024-04-03T00:59:03Z"
        },
        {
          "author": "KrystalandBarry",
          "body": "![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/33093118/5bdb70be-6d9f-4ad5-9aca-a4ef4dc629a1)\r\n在线体验的地址，上传文件对话也报错",
          "created_at": "2024-04-03T01:02:10Z"
        },
        {
          "author": "Keldos-Li",
          "body": "hugging face上似乎确实有问题，但我本地测试一切正常……\r\n\r\n我无法复现，还请再描述一下详细的环境配置等信息，也许也和文件本身有关，也许是一些依赖版本不匹配当前代码的原因……可以试着pull最新的主线代码，然后pip install -r requirements.txt --upgrade",
          "created_at": "2024-04-05T16:59:46Z"
        },
        {
          "author": "Keldos-Li",
          "body": "再使用最新的版本试试呢？",
          "created_at": "2024-04-10T17:13:39Z"
        }
      ]
    },
    {
      "issue_number": 604,
      "title": "[功能请求]: 能不能增加生成思维导图功能",
      "body": "### 相关问题\r\n\r\n无相关问题\r\n\r\n### 可能的解决办法\r\n\r\n通过对话的形式生成markdown思维导图，最后生成的思维导图每个节点还能通过UI交互？当然我不知道gradio能不能做到，还需要研究一下。。。\r\n\r\n### 帮助开发\r\n\r\n- [X] 我愿意协助开发！\r\n\r\n### 补充说明\r\n\r\n生成思维导图的在线工具比如 https://markmap.js.org/ 是不是可以参考。。。",
      "state": "open",
      "author": "chucksylar",
      "author_type": "User",
      "created_at": "2023-04-12T03:59:42Z",
      "updated_at": "2024-04-10T17:13:02Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/604/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "Keldos-Li"
      ],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/604",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/604",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:11.304197",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "有趣的js……（怎么都是js）\r\n\r\n之前我想让gradio通过网址引入外部js失败了，如果能引入可以一试，但感觉并不是很有必要。大部分人可能并不需要这个思维导图，做这个还得加按钮什么来转换的，感觉会比较麻烦。优先级往后靠吧。",
          "created_at": "2023-04-12T04:52:52Z"
        },
        {
          "author": "simulai",
          "body": "mark",
          "created_at": "2023-04-26T14:19:42Z"
        }
      ]
    },
    {
      "issue_number": 1097,
      "title": "[功能请求]: 请支持gradio界面先吃mermaid脑图或流程图的功能",
      "body": "### 相关问题\n\n[功能请求]: 请支持gradio界面先吃mermaid脑图或流程图的功能\n\n### 可能的解决办法\n\n[功能请求]: 请支持gradio界面先吃mermaid脑图或流程图的功能\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n[功能请求]: 请支持gradio界面先吃mermaid脑图或流程图的功能",
      "state": "open",
      "author": "enci2022",
      "author_type": "User",
      "created_at": "2024-04-10T16:11:38Z",
      "updated_at": "2024-04-10T17:12:38Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1097/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "Keldos-Li"
      ],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1097",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1097",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:11.477669",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "同 #604 ，待后续开发",
          "created_at": "2024-04-10T17:11:59Z"
        }
      ]
    },
    {
      "issue_number": 636,
      "title": "[Bug]: 无法读取发票pdf文件信息",
      "body": "### 这个bug是否已存在现有issue了？\r\n\r\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\r\n\r\n### 错误表现\r\n\r\n上传一个发票文件，询问开具的是什么商品的发票，回答不出来，提取的信息除了数字部分，中文部分都是乱码。\r\n![image](https://user-images.githubusercontent.com/12162720/231832979-a0f67c5f-3f8c-4874-af13-197958bcd731.png)\r\n![image](https://user-images.githubusercontent.com/12162720/231833953-171651eb-6bbf-4b2f-821e-06833e359ec4.png)\r\n\r\n\r\n### 复现操作\r\n\r\n在提供的hf页面上使用\r\n\r\n### 错误日志\r\n\r\n_No response_\r\n\r\n### 运行环境\r\n\r\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\r\n\r\n### 帮助解决\r\n\r\n- [X] 我愿意协助解决！\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "open",
      "author": "freebr",
      "author_type": "User",
      "created_at": "2023-04-13T17:08:06Z",
      "updated_at": "2024-04-10T17:09:18Z",
      "closed_at": null,
      "labels": [
        "invalid"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/636/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/636",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/636",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:11.655407",
      "comments": [
        {
          "author": "popoleaf",
          "body": "这个东西对读取表格非常拉胯",
          "created_at": "2023-05-10T01:55:53Z"
        },
        {
          "author": "weisong82",
          "body": "这种表格本身就不容易读。。",
          "created_at": "2023-12-21T09:11:33Z"
        }
      ]
    },
    {
      "issue_number": 685,
      "title": "[功能请求]: 可以支持模拟登陆吗。用session的access token方式",
      "body": "### 相关问题\n\n可以支持模拟登陆吗。用session的access token方式\n\n### 可能的解决办法\n\n希望除了apikey，还可以支持模拟登陆吗。用session的access token方式登录。会更完善\n\n### 帮助开发\n\n- [x] 我愿意协助开发！\n\n### 补充说明\n\nhttps://github.com/binjie09/chatgpt-web",
      "state": "closed",
      "author": "120805481",
      "author_type": "User",
      "created_at": "2023-04-19T12:59:11Z",
      "updated_at": "2024-04-10T17:08:56Z",
      "closed_at": "2024-04-10T17:08:56Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/685/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/685",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/685",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:12.922908",
      "comments": [
        {
          "author": "haoguangxie",
          "body": "这个功能有计划开发吗？我也需要",
          "created_at": "2023-04-26T12:26:11Z"
        },
        {
          "author": "XudongLiu",
          "body": "Gradio中可以设置一个登录的选项，可以自行完善这个功能。",
          "created_at": "2023-11-08T09:51:32Z"
        },
        {
          "author": "Keldos-Li",
          "body": "使用这种方式可能存在法律风险",
          "created_at": "2023-11-08T10:04:24Z"
        }
      ]
    },
    {
      "issue_number": 905,
      "title": "[Bug]: 在最新的 gradio 3.45.2下面聊天界面显示错误",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n 聊天界面的回复显示不出来\n\n### 复现操作\n\n升级 gradio 版本到最新的 3.45.2\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "stockcoder",
      "author_type": "User",
      "created_at": "2023-10-02T18:34:34Z",
      "updated_at": "2024-04-10T17:08:04Z",
      "closed_at": "2024-04-10T17:08:03Z",
      "labels": [
        "🤷 no can do"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/905/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/905",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/905",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:13.123464",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "您好，这有可能gradio 3.45.2 的问题。由于gradio每次更新都会产生大量变动，都需要我们重新适配，因此请不要随意升级gradio版本，而应当使用我们在`requirements.txt`中指定的版本。\r\n\r\n如果你在其他项目需要不同版本的gradio，请使用Python或conda的虚拟环境。",
          "created_at": "2023-10-03T04:51:33Z"
        },
        {
          "author": "stockcoder",
          "body": "\r\n\r\n\r\n> 您好，这有可能gradio 3.45.2 的问题。由于gradio每次更新都会产生大量变动，都需要我们重新适配，因此请不要随意升级gradio版本，而应当使用我们在`requirements.txt`中指定的版本。\r\n> \r\n> 如果你在其他项目需要不同版本的gradio，请使用Python或conda的虚拟环境。\r\n\r\n\r\n\r\n> 您好，这有可能gradio 3.45.2 的问题。由于gradio每次更新都会产生大量变动，都需要我们重新适配，因此请不要随意升级gradio版本，而应当使用我们在`requirements.txt`中指定的版本。\r\n> \r\n> 如果你在其他项目需",
          "created_at": "2023-10-03T06:48:43Z"
        },
        {
          "author": "Keldos-Li",
          "body": "方便问问具体是什么功能吗？ 刚才看了gradio的更新日志又看了实际的源码，感觉有点棘手",
          "created_at": "2023-10-03T06:52:37Z"
        },
        {
          "author": "Keldos-Li",
          "body": "现已经更新适配到 gradio 4.26 ~",
          "created_at": "2024-04-10T17:08:03Z"
        }
      ]
    },
    {
      "issue_number": 1002,
      "title": "[其他]: 无法在线搜索的问题",
      "body": "### 是否已存在现有反馈与解答？\r\n\r\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\r\n\r\n### 错误描述\r\n\r\n本地部署完全无法在线搜索，hugging face的部署也有很大概率无法现在搜索，需要多次重试\r\n\r\n### 复现操作\r\n\r\n完全正常部署不报错，开启在线搜索，没有任何反应\r\n\r\n### 错误日志\r\n\r\n```shell\r\n无日志输出，后台和前台一样进入无限等待\r\n```\r\n\r\n### 运行环境\r\n\r\nPython: 3.11.2  •  Gradio: 3.43.2  •  ChuanhuChat: 20231215\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "open",
      "author": "skystary",
      "author_type": "User",
      "created_at": "2023-12-20T11:24:11Z",
      "updated_at": "2024-04-10T17:06:57Z",
      "closed_at": null,
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1002/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1002",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1002",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:13.324945",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "更新一下python版本到3.10 或 3.11，更新一下最新版看看是否已经解决？若还有问题请再继续回复该issue",
          "created_at": "2024-04-10T17:06:57Z"
        }
      ]
    },
    {
      "issue_number": 1078,
      "title": "[Bug]: 打开在线搜索出现event loop 错误",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n使用python=3.9版本启动部署时打开在线搜索会报错误：raise RuntimeError('There is no current event loop in thread %r.'\r\nRuntimeError: There is no current event loop in thread 'AnyIO worker thread'\r\n报错代码段在\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/22487109/e61dd46a-6213-48f2-8b37-9f88ca860f94)\r\n\r\n\n\n### 复现操作\n\n使用python=3.9版本部署，怀疑是低版本python和gradio的匹配问题\r\n升级python=3.11解决，但是需要requirement.txt添加gradio[oauth]包，或者单独pip install gradio[oauth] ，可解决以上错误问题\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "bianlongpeng",
      "author_type": "User",
      "created_at": "2024-03-15T03:04:17Z",
      "updated_at": "2024-04-10T16:57:27Z",
      "closed_at": "2024-04-10T16:57:27Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1078/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1078",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1078",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:15.510677",
      "comments": [
        {
          "author": "swcoffee",
          "body": "duckduckgo-search==4.1.1",
          "created_at": "2024-03-18T10:03:56Z"
        },
        {
          "author": "Keldos-Li",
          "body": "python >= 3.10 可以解决此问题……比较奇怪，可能什么地方就不适配了吧",
          "created_at": "2024-04-08T16:42:32Z"
        },
        {
          "author": "Keldos-Li",
          "body": "更新一下python版本到3.10 或 3.11，更新一下最新版看看是否已经解决？若还有问题请再继续回复该issue",
          "created_at": "2024-04-10T16:57:27Z"
        }
      ]
    },
    {
      "issue_number": 1045,
      "title": "[Bug]: RuntimeError: There is no current event loop in thread 'Thread-5'",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n运行 python  ChuanhuChatbot.py 后报错： RuntimeError: There is no current event loop in thread 'Thread-5'\r\n[gradio](https://github.com/gradio-app/gradio/issues/3904) 也有类似的问题\n\n### 复现操作\n\n按照Readme 快速上手执行报错\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: Ubuntu 18.04.5 LTS (GNU/Linux 4.15.0-200-generic x86_64)\r\n- Browser: Chrome\r\n- Gradio version: gradio==3.43.2\r\n- Python version: 3.9.13\r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "duanshengliu",
      "author_type": "User",
      "created_at": "2024-02-07T07:22:52Z",
      "updated_at": "2024-04-08T16:41:00Z",
      "closed_at": null,
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1045/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1045",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1045",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:15.712225",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "@duanshengliu 试着使用python3.10版本",
          "created_at": "2024-04-08T16:40:59Z"
        }
      ]
    },
    {
      "issue_number": 1095,
      "title": "[其他]: python部署发生了错误，需Requires-Python >=3.8.1",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 错误描述\n\nrelease解压zip，执行`run_Windows.bat`后提示缺失了xxx模块\r\n\r\n也许和我已经安装conda的缘故，执行安装`pip install -r requirements.txt`导致无法正确安装\r\n\r\n\r\n只好直接Git clone仓库，用自己的conda创建3.11版本运行`pip install -r requirements.txt`和`python ChuanhuChatbot.py`才跑成功\r\n\r\n题外话：\r\n（1）第三方平台的支持（比如New API或ONE API）\r\n        配置文件只能配置官方key吗？没有第三方中转站支持啊，比如https://xxxxxxx/v1/chat/completions sk-xxxxxxxxx\r\n\r\n        我自用中转站https://faka.cdai.cc/\r\n\r\n（2）能否增加Sakura模型的支持？\r\n        https://github.com/SakuraLLM/Sakura-13B-Galgame\r\n        用来咨询一些日文的翻译等杂项\n\n### 复现操作\n\nrelease下来的zip有问题，python版本无法满足安装需要\n\n### 错误日志\n\n```shell\nOpening ChuanhuChatGPT...\r\nCreating venv...\r\nLooking in indexes: https://pypi.tuna.tsinghua.edu.cn/simple\r\nRequirement already satisfied: pip in g:\\[notes]\\chuanhuchatgpt-20240310-git\\chuanhuchat\\lib\\site-packages (24.0)\r\nLooking in indexes: https://pypi.tuna.tsinghua.edu.cn/simple\r\nCollecting gradio==3.44.0\r\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/93/e4/6c2901817c3b591d7de76820fff96a416f1515a21253e13e06690e1334ee/gradio-3.44.0-py3-none-any.whl (20.2 MB)\r\nCollecting gradio_client==0.5.0\r\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/fe/85/ec0323f39192c4bee04e8e06e64213aff816b9d1b61c3c8367e75b1c7e10/gradio_client-0.5.0-py3-none-any.whl (298 kB)\r\nCollecting pypinyin\r\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/67/bd/752e5d033a00dc33d0a955bf0bfd26a3c83a46b1404221e0f4a9ffbc7795/pypinyin-0.51.0-py2.py3-none-any.whl (1.4 MB)\r\nCollecting tiktoken\r\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/22/ef/9aee13c039ecabce8a46e2e690a49207443cf68030136f9a6f1c66069fe7/tiktoken-0.6.0-cp38-cp38-win_amd64.whl (798 kB)\r\nCollecting socksio\r\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/37/c3/6eeb6034408dac0fa653d126c9204ade96b819c936e136c5e8a6897eee9c/socksio-1.0.0-py3-none-any.whl (12 kB)\r\nRequirement already satisfied: tqdm in c:\\users\\li\\.conda\\envs\\python38\\lib\\site-packages (from -r requirements.txt (line 6)) (4.65.0)\r\nRequirement already satisfied: colorama in c:\\users\\li\\.conda\\envs\\python38\\lib\\site-packages (from -r requirements.txt (line 7)) (0.4.6)\r\nCollecting googlesearch-python\r\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/b0/e3/50560f6432da8c1dfbc3d1d9d465ac6069a5dd6c81fe92b98793c97e540c/googlesearch-python-1.2.3.tar.gz (3.9 kB)\r\n  Preparing metadata (setup.py) ... done\r\nRequirement already satisfied: Pygments in c:\\users\\li\\.conda\\envs\\python38\\lib\\site-packages (from -r requirements.txt (line 9)) (2.14.0)\r\nCollecting openai==1.3.7\r\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/3e/d3/309769dad11d5f75b81c7252d9dc849ed440d0921215e759af169054f3b6/openai-1.3.7-py3-none-any.whl (221 kB)\r\nERROR: Ignored the following versions that require a different python version: 0.0.100 Requires-Python >=3.8.1,<4.0; 0.0.101 Requires-Python >=3.8.1,<4.0; 0.0.101rc0 Requires-Python >=3.8.1,<4.0; 0.0.102 Requires-Python >=3.8.1,<4.0; 0.0.102rc0 Requires-Python >=3.8.1,<4.0; 0.0.103 Requires-Python >=3.8.1,<4.0; 0.0.104 Requires-Python >=3.8.1,<4.0; 0.0.105 Requires-Python >=3.8.1,<4.0; 0.0.106 Requires-Python >=3.8.1,<4.0; 0.0.107 Requires-Python >=3.8.1,<4.0; 0.0.108 Requires-Python >=3.8.1,<4.0; 0.0.109 Requires-Python >=3.8.1,<4.0; 0.0.110 Requires-Python >=3.8.1,<4.0; 0.0.111 Requires-Python >=3.8.1,<4.0; 0.0.112 Requires-Python >=3.8.1,<4.0; 0.0.113 Requires-Python >=3.8.1,<4.0; 0.0.114 Requires-Python >=3.8.1,<4.0; 0.0.115 Requires-Python >=3.8.1,<4.0; 0.0.116 Requires-Python >=3.8.1,<4.0; 0.0.117 Requires-Python >=3.8.1,<4.0; 0.0.118 Requires-Python >=3.8.1,<4.0; 0.0.119 Requires-Python >=3.8.1,<4.0; 0.0.120 Requires-Python >=3.8.1,<4.0; 0.0.121 Requires-Python >=3.8.1,<4.0; 0.0.122 Requires-Python >=3.8.1,<4.0; 0.0.123 Requires-Python >=3.8.1,<4.0; 0.0.124 Requires-Python >=3.8.1,<4.0; 0.0.125 Requires-Python >=3.8.1,<4.0; 0.0.126 Requires-Python >=3.8.1,<4.0; 0.0.127 Requires-Python >=3.8.1,<4.0; 0.0.128 Requires-Python >=3.8.1,<4.0; 0.0.129 Requires-Python >=3.8.1,<4.0; 0.0.130 Requires-Python >=3.8.1,<4.0; 0.0.131 Requires-Python >=3.8.1,<4.0; 0.0.132 Requires-Python >=3.8.1,<4.0; 0.0.133 Requires-Python >=3.8.1,<4.0; 0.0.134 Requires-Python >=3.8.1,<4.0; 0.0.135 Requires-Python >=3.8.1,<4.0; 0.0.136 Requires-Python >=3.8.1,<4.0; 0.0.137 Requires-Python >=3.8.1,<4.0; 0.0.138 Requires-Python >=3.8.1,<4.0; 0.0.139 Requires-Python >=3.8.1,<4.0; 0.0.140 Requires-Python >=3.8.1,<4.0; 0.0.141 Requires-Python >=3.8.1,<4.0; 0.0.142 Requires-Python >=3.8.1,<4.0; 0.0.143 Requires-Python >=3.8.1,<4.0; 0.0.144 Requires-Python >=3.8.1,<4.0; 0.0.145 Requires-Python >=3.8.1,<4.0; 0.0.146 Requires-Python >=3.8.1,<4.0; 0.0.147 Requires-Python >=3.8.1,<4.0; 0.0.148 Requires-Python >=3.8.1,<4.0; 0.0.149 Requires-Python >=3.8.1,<4.0; 0.0.150 Requires-Python >=3.8.1,<4.0; 0.0.151 Requires-Python >=3.8.1,<4.0; 0.0.152 Requires-Python >=3.8.1,<4.0; 0.0.153 Requires-Python >=3.8.1,<4.0; 0.0.154 Requires-Python >=3.8.1,<4.0; 0.0.155 Requires-Python >=3.8.1,<4.0; 0.0.156 Requires-Python >=3.8.1,<4.0; 0.0.157 Requires-Python >=3.8.1,<4.0; 0.0.158 Requires-Python >=3.8.1,<4.0; 0.0.159 Requires-Python >=3.8.1,<4.0; 0.0.160 Requires-Python >=3.8.1,<4.0; 0.0.161 Requires-Python >=3.8.1,<4.0; 0.0.162 Requires-Python >=3.8.1,<4.0; 0.0.163 Requires-Python >=3.8.1,<4.0; 0.0.164 Requires-Python >=3.8.1,<4.0; 0.0.165 Requires-Python >=3.8.1,<4.0; 0.0.166 Requires-Python >=3.8.1,<4.0; 0.0.167 Requires-Python >=3.8.1,<4.0; 0.0.168 Requires-Python >=3.8.1,<4.0; 0.0.169 Requires-Python >=3.8.1,<4.0; 0.0.170 Requires-Python >=3.8.1,<4.0; 0.0.171 Requires-Python >=3.8.1,<4.0; 0.0.172 Requires-Python >=3.8.1,<4.0; 0.0.173 Requires-Python >=3.8.1,<4.0; 0.0.174 Requires-Python >=3.8.1,<4.0; 0.0.175 Requires-Python >=3.8.1,<4.0; 0.0.176 Requires-Python >=3.8.1,<4.0; 0.0.177 Requires-Python >=3.8.1,<4.0; 0.0.178 Requires-Python >=3.8.1,<4.0; 0.0.179 Requires-Python >=3.8.1,<4.0; 0.0.180 Requires-Python >=3.8.1,<4.0; 0.0.181 Requires-Python >=3.8.1,<4.0; 0.0.182 Requires-Python >=3.8.1,<4.0; 0.0.183 Requires-Python >=3.8.1,<4.0; 0.0.184 Requires-Python >=3.8.1,<4.0; 0.0.185 Requires-Python >=3.8.1,<4.0; 0.0.186 Requires-Python >=3.8.1,<4.0; 0.0.187 Requires-Python >=3.8.1,<4.0; 0.0.188 Requires-Python >=3.8.1,<4.0; 0.0.189 Requires-Python >=3.8.1,<4.0; 0.0.190 Requires-Python >=3.8.1,<4.0; 0.0.191 Requires-Python >=3.8.1,<4.0; 0.0.192 Requires-Python >=3.8.1,<4.0; 0.0.193 Requires-Python >=3.8.1,<4.0; 0.0.194 Requires-Python >=3.8.1,<4.0; 0.0.195 Requires-Python >=3.8.1,<4.0; 0.0.196 Requires-Python >=3.8.1,<4.0; 0.0.197 Requires-Python >=3.8.1,<4.0; 0.0.198 Requires-Python >=3.8.1,<4.0; 0.0.199 Requires-Python >=3.8.1,<4.0; 0.0.200 Requires-Python >=3.8.1,<4.0; 0.0.201 Requires-Python >=3.8.1,<4.0; 0.0.202 Requires-Python >=3.8.1,<4.0; 0.0.203 Requires-Python >=3.8.1,<4.0; 0.0.204 Requires-Python >=3.8.1,<4.0; 0.0.205 Requires-Python >=3.8.1,<4.0; 0.0.206 Requires-Python >=3.8.1,<4.0; 0.0.207 Requires-Python >=3.8.1,<4.0; 0.0.208 Requires-Python >=3.8.1,<4.0; 0.0.209 Requires-Python >=3.8.1,<4.0; 0.0.210 Requires-Python >=3.8.1,<4.0; 0.0.211 Requires-Python >=3.8.1,<4.0; 0.0.212 Requires-Python >=3.8.1,<4.0; 0.0.213 Requires-Python >=3.8.1,<4.0; 0.0.214 Requires-Python >=3.8.1,<4.0; 0.0.215 Requires-Python >=3.8.1,<4.0; 0.0.216 Requires-Python >=3.8.1,<4.0; 0.0.217 Requires-Python >=3.8.1,<4.0; 0.0.218 Requires-Python >=3.8.1,<4.0; 0.0.219 Requires-Python >=3.8.1,<4.0; 0.0.220 Requires-Python >=3.8.1,<4.0; 0.0.221 Requires-Python >=3.8.1,<4.0; 0.0.222 Requires-Python >=3.8.1,<4.0; 0.0.223 Requires-Python >=3.8.1,<4.0; 0.0.224 Requires-Python >=3.8.1,<4.0; 0.0.225 Requires-Python >=3.8.1,<4.0; 0.0.226 Requires-Python >=3.8.1,<4.0; 0.0.227 Requires-Python >=3.8.1,<4.0; 0.0.228 Requires-Python >=3.8.1,<4.0; 0.0.229 Requires-Python >=3.8.1,<4.0; 0.0.230 Requires-Python >=3.8.1,<4.0; 0.0.231 Requires-Python >=3.8.1,<4.0; 0.0.232 Requires-Python >=3.8.1,<4.0; 0.0.233 Requires-Python >=3.8.1,<4.0; 0.0.234 Requires-Python >=3.8.1,<4.0; 0.0.235 Requires-Python >=3.8.1,<4.0; 0.0.236 Requires-Python >=3.8.1,<4.0; 0.0.237 Requires-Python >=3.8.1,<4.0; 0.0.238 Requires-Python >=3.8.1,<4.0; 0.0.239 Requires-Python >=3.8.1,<4.0; 0.0.240 Requires-Python >=3.8.1,<4.0; 0.0.240rc0 Requires-Python >=3.8.1,<4.0; 0.0.240rc1 Requires-Python >=3.8.1,<4.0; 0.0.240rc4 Requires-Python >=3.8.1,<4.0; 0.0.242 Requires-Python >=3.8.1,<4.0; 0.0.243 Requires-Python >=3.8.1,<4.0; 0.0.244 Requires-Python >=3.8.1,<4.0; 0.0.245 Requires-Python >=3.8.1,<4.0; 0.0.246 Requires-Python >=3.8.1,<4.0; 0.0.247 Requires-Python >=3.8.1,<4.0; 0.0.248 Requires-Python >=3.8.1,<4.0; 0.0.249 Requires-Python >=3.8.1,<4.0; 0.0.250 Requires-Python >=3.8.1,<4.0; 0.0.251 Requires-Python >=3.8.1,<4.0; 0.0.252 Requires-Python >=3.8.1,<4.0; 0.0.253 Requires-Python >=3.8.1,<4.0; 0.0.254 Requires-Python >=3.8.1,<4.0; 0.0.255 Requires-Python >=3.8.1,<4.0; 0.0.256 Requires-Python >=3.8.1,<4.0; 0.0.257 Requires-Python >=3.8.1,<4.0; 0.0.258 Requires-Python >=3.8.1,<4.0; 0.0.259 Requires-Python >=3.8.1,<4.0; 0.0.260 Requires-Python >=3.8.1,<4.0; 0.0.261 Requires-Python >=3.8.1,<4.0; 0.0.262 Requires-Python >=3.8.1,<4.0; 0.0.263 Requires-Python >=3.8.1,<4.0; 0.0.264 Requires-Python >=3.8.1,<4.0; 0.0.265 Requires-Python >=3.8.1,<4.0; 0.0.266 Requires-Python >=3.8.1,<4.0; 0.0.267 Requires-Python >=3.8.1,<4.0; 0.0.268 Requires-Python >=3.8.1,<4.0; 0.0.269 Requires-Python >=3.8.1,<4.0; 0.0.270 Requires-Python >=3.8.1,<4.0; 0.0.271 Requires-Python >=3.8.1,<4.0; 0.0.272 Requires-Python >=3.8.1,<4.0; 0.0.273 Requires-Python >=3.8.1,<4.0; 0.0.274 Requires-Python >=3.8.1,<4.0; 0.0.275 Requires-Python >=3.8.1,<4.0; 0.0.276 Requires-Python >=3.8.1,<4.0; 0.0.277 Requires-Python >=3.8.1,<4.0; 0.0.278 Requires-Python >=3.8.1,<4.0; 0.0.279 Requires-Python >=3.8.1,<4.0; 0.0.28 Requires-Python >=3.8.1,<4.0; 0.0.281 Requires-Python >=3.8.1,<4.0; 0.0.283 Requires-Python >=3.8.1,<4.0; 0.0.284 Requires-Python >=3.8.1,<4.0; 0.0.285 Requires-Python >=3.8.1,<4.0; 0.0.286 Requires-Python >=3.8.1,<4.0; 0.0.287 Requires-Python >=3.8.1,<4.0; 0.0.288 Requires-Python >=3.8.1,<4.0; 0.0.289 Requires-Python >=3.8.1,<4.0; 0.0.29 Requires-Python >=3.8.1,<4.0; 0.0.290 Requires-Python >=3.8.1,<4.0; 0.0.291 Requires-Python >=3.8.1,<4.0; 0.0.292 Requires-Python >=3.8.1,<4.0; 0.0.293 Requires-Python >=3.8.1,<4.0; 0.0.294 Requires-Python >=3.8.1,<4.0; 0.0.295 Requires-Python >=3.8.1,<4.0; 0.0.296 Requires-Python >=3.8.1,<4.0; 0.0.297 Requires-Python >=3.8.1,<4.0; 0.0.298 Requires-Python >=3.8.1,<4.0; 0.0.299 Requires-Python >=3.8.1,<4.0; 0.0.30 Requires-Python >=3.8.1,<4.0; 0.0.300 Requires-Python >=3.8.1,<4.0; 0.0.301 Requires-Python >=3.8.1,<4.0; 0.0.302 Requires-Python >=3.8.1,<4.0; 0.0.303 Requires-Python >=3.8.1,<4.0; 0.0.304 Requires-Python >=3.8.1,<4.0; 0.0.305 Requires-Python >=3.8.1,<4.0; 0.0.306 Requires-Python >=3.8.1,<4.0; 0.0.307 Requires-Python >=3.8.1,<4.0; 0.0.308 Requires-Python >=3.8.1,<4.0; 0.0.309 Requires-Python >=3.8.1,<4.0; 0.0.31 Requires-Python >=3.8.1,<4.0; 0.0.310 Requires-Python >=3.8.1,<4.0; 0.0.311 Requires-Python >=3.8.1,<4.0; 0.0.312 Requires-Python >=3.8.1,<4.0; 0.0.313 Requires-Python >=3.8.1,<4.0; 0.0.314 Requires-Python >=3.8.1,<4.0; 0.0.315 Requires-Python >=3.8.1,<4.0; 0.0.316 Requires-Python >=3.8.1,<4.0; 0.0.317 Requires-Python >=3.8.1,<4.0; 0.0.318 Requires-Python >=3.8.1,<4.0; 0.0.319 Requires-Python >=3.8.1,<4.0; 0.0.32 Requires-Python >=3.8.1,<4.0; 0.0.320 Requires-Python >=3.8.1,<4.0; 0.0.321 Requires-Python >=3.8.1,<4.0; 0.0.322 Requires-Python >=3.8.1,<4.0; 0.0.323 Requires-Python >=3.8.1,<4.0; 0.0.324 Requires-Python >=3.8.1,<4.0; 0.0.325 Requires-Python >=3.8.1,<4.0; 0.0.326 Requires-Python >=3.8.1,<4.0; 0.0.327 Requires-Python >=3.8.1,<4.0; 0.0.329 Requires-Python >=3.8.1,<4.0; 0.0.33 Requires-Python >=3.8.1,<4.0; 0.0.330 Requires-Python >=3.8.1,<4.0; 0.0.331 Requires-Python >=3.8.1,<4.0; 0.0.331rc0 Requires-Python >=3.8.1,<4.0; 0.0.331rc1 Requires-Python >=3.8.1,<4.0; 0.0.331rc2 Requires-Python >=3.8.1,<4.0; 0.0.331rc3 Requires-Python >=3.8.1,<4.0; 0.0.332 Requires-Python >=3.8.1,<4.0; 0.0.333 Requires-Python >=3.8.1,<4.0; 0.0.334 Requires-Python >=3.8.1,<4.0; 0.0.335 Requires-Python >=3.8.1,<4.0; 0.0.336 Requires-Python >=3.8.1,<4.0; 0.0.337 Requires-Python >=3.8.1,<4.0; 0.0.338 Requires-Python >=3.8.1,<4.0; 0.0.339 Requires-Python >=3.8.1,<4.0; 0.0.339rc0 Requires-Python >=3.8.1,<4.0; 0.0.339rc1 Requires-Python >=3.8.1,<4.0; 0.0.339rc2 Requires-Python >=3.8.1,<4.0; 0.0.339rc3 Requires-Python >=3.8.1,<4.0; 0.0.34 Requires-Python >=3.8.1,<4.0; 0.0.340 Requires-Python >=3.8.1,<4.0; 0.0.341 Requires-Python >=3.8.1,<4.0; 0.0.342 Requires-Python >=3.8.1,<4.0; 0.0.343 Requires-Python >=3.8.1,<4.0; 0.0.344 Requires-Python >=3.8.1,<4.0; 0.0.345 Requires-Python >=3.8.1,<4.0; 0.0.346 Requires-Python >=3.8.1,<4.0; 0.0.347 Requires-Python >=3.8.1,<4.0; 0.0.348 Requires-Python >=3.8.1,<4.0; 0.0.349 Requires-Python >=3.8.1,<4.0; 0.0.349rc1 Requires-Python >=3.8.1,<4.0; 0.0.349rc2 Requires-Python >=3.8.1,<4.0; 0.0.35 Requires-Python >=3.8.1,<4.0; 0.0.350 Requires-Python >=3.8.1,<4.0; 0.0.351 Requires-Python >=3.8.1,<4.0; 0.0.352 Requires-Python >=3.8.1,<4.0; 0.0.353 Requires-Python >=3.8.1,<4.0; 0.0.354 Requires-Python >=3.8.1,<4.0; 0.0.36 Requires-Python >=3.8.1,<4.0; 0.0.37 Requires-Python >=3.8.1,<4.0; 0.0.38 Requires-Python >=3.8.1,<4.0; 0.0.39 Requires-Python >=3.8.1,<4.0; 0.0.40 Requires-Python >=3.8.1,<4.0; 0.0.41 Requires-Python >=3.8.1,<4.0; 0.0.42 Requires-Python >=3.8.1,<4.0; 0.0.43 Requires-Python >=3.8.1,<4.0; 0.0.44 Requires-Python >=3.8.1,<4.0; 0.0.45 Requires-Python >=3.8.1,<4.0; 0.0.46 Requires-Python >=3.8.1,<4.0; 0.0.47 Requires-Python >=3.8.1,<4.0; 0.0.48 Requires-Python >=3.8.1,<4.0; 0.0.49 Requires-Python >=3.8.1,<4.0; 0.0.50 Requires-Python >=3.8.1,<4.0; 0.0.51 Requires-Python >=3.8.1,<4.0; 0.0.52 Requires-Python >=3.8.1,<4.0; 0.0.53 Requires-Python >=3.8.1,<4.0; 0.0.54 Requires-Python >=3.8.1,<4.0; 0.0.55 Requires-Python >=3.8.1,<4.0; 0.0.56 Requires-Python >=3.8.1,<4.0; 0.0.57 Requires-Python >=3.8.1,<4.0; 0.0.58 Requires-Python >=3.8.1,<4.0; 0.0.59 Requires-Python >=3.8.1,<4.0; 0.0.60 Requires-Python >=3.8.1,<4.0; 0.0.61 Requires-Python >=3.8.1,<4.0; 0.0.63 Requires-Python >=3.8.1,<4.0; 0.0.64 Requires-Python >=3.8.1,<4.0; 0.0.65 Requires-Python >=3.8.1,<4.0; 0.0.66 Requires-Python >=3.8.1,<4.0; 0.0.67 Requires-Python >=3.8.1,<4.0; 0.0.68 Requires-Python >=3.8.1,<4.0; 0.0.69 Requires-Python >=3.8.1,<4.0; 0.0.70 Requires-Python >=3.8.1,<4.0; 0.0.71 Requires-Python >=3.8.1,<4.0; 0.0.72 Requires-Python >=3.8.1,<4.0; 0.0.73 Requires-Python >=3.8.1,<4.0; 0.0.74 Requires-Python >=3.8.1,<4.0; 0.0.75 Requires-Python >=3.8.1,<4.0; 0.0.76 Requires-Python >=3.8.1,<4.0; 0.0.77 Requires-Python >=3.8.1,<4.0; 0.0.78 Requires-Python >=3.8.1,<4.0; 0.0.79 Requires-Python >=3.8.1,<4.0; 0.0.80 Requires-Python >=3.8.1,<4.0; 0.0.81 Requires-Python >=3.8.1,<4.0; 0.0.82 Requires-Python >=3.8.1,<4.0; 0.0.83 Requires-Python >=3.8.1,<4.0; 0.0.84 Requires-Python >=3.8.1,<4.0; 0.0.85 Requires-Python >=3.8.1,<4.0; 0.0.86 Requires-Python >=3.8.1,<4.0; 0.0.87 Requires-Python >=3.8.1,<4.0; 0.0.88 Requires-Python >=3.8.1,<4.0; 0.0.89 Requires-Python >=3.8.1,<4.0; 0.0.90 Requires-Python >=3.8.1,<4.0; 0.0.91 Requires-Python >=3.8.1,<4.0; 0.0.92 Requires-Python >=3.8.1,<4.0; 0.0.93 Requires-Python >=3.8.1,<4.0; 0.0.94 Requires-Python >=3.8.1,<4.0; 0.0.95 Requires-Python >=3.8.1,<4.0; 0.0.96 Requires-Python >=3.8.1,<4.0; 0.0.97 Requires-Python >=3.8.1,<4.0; 0.0.98 Requires-Python >=3.8.1,<4.0; 0.0.99 Requires-Python >=3.8.1,<4.0; 0.0.99rc0 Requires-Python >=3.8.1,<4.0; 0.1.0 Requires-Python >=3.8.1,<4.0; 0.1.1 Requires-Python >=3.8.1,<4.0; 0.1.1 Requires-Python >=3.9; 0.1.10 Requires-Python >=3.8.1,<4.0; 0.1.11 Requires-Python >=3.8.1,<4.0; 0.1.12 Requires-Python >=3.8.1,<4.0; 0.1.13 Requires-Python <4.0,>=3.8.1; 0.1.14 Requires-Python <4.0,>=3.8.1; 0.1.2 Requires-Python >=3.8.1,<4.0; 0.1.3 Requires-Python >=3.8.1,<4.0; 0.1.4 Requires-Python >=3.8.1,<4.0; 0.1.5 Requires-Python >=3.8.1,<4.0; 0.1.6 Requires-Python >=3.8.1,<4.0; 0.1.7 Requires-Python >=3.8.1,<4.0; 0.1.8 Requires-Python >=3.8.1,<4.0; 0.1.9 Requires-Python >=3.8.1,<4.0\r\nERROR: Could not find a version that satisfies the requirement langchain==0.0.345 (from versions: 0.0.1, 0.0.2, 0.0.3, 0.0.4, 0.0.5, 0.0.6, 0.0.7, 0.0.8, 0.0.9, 0.0.10, 0.0.11, 0.0.12, 0.0.13, 0.0.14, 0.0.15, 0.0.16, 0.0.17, 0.0.18, 0.0.19, 0.0.20, 0.0.21, 0.0.22, 0.0.23, 0.0.24, 0.0.25, 0.0.26, 0.0.27)\r\nERROR: No matching distribution found for langchain==0.0.345\r\nxxxx\r\n后面就提示模块缺失colorama了\n```\n\n\n### 运行环境\n\n- OS: WIN10 21H2\r\n- Browser: Cent Browser\r\n- Gradio version: None\r\n- Python version: release自带的python版本\r\n\r\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "allrobot",
      "author_type": "User",
      "created_at": "2024-04-04T16:21:25Z",
      "updated_at": "2024-04-06T10:31:47Z",
      "closed_at": "2024-04-06T10:31:46Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1095/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1095",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1095",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:15.878400",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "Hi，是这样的：\r\n\r\n0. 运行 `run_Windows.bat` 时，直接调用的是系统环境的python，例如，Microsoft Store中安装的某个python版本。release中并没有附带python程序，也没有指定使用的python版本……我们只是使用这个系统默认的python新建环境。如果需要确认此时使用的是哪个python，可以在cmd中使用 `where python` 来确认用的是哪里的python，然后确认这个python是什么版本……\r\n\r\n   可能也是我们考虑不周吧……以为大家默认的python版本都是3.8以上了……\r\n\r\n1. 是支持第三方中转的，设置 c",
          "created_at": "2024-04-05T13:48:01Z"
        },
        {
          "author": "allrobot",
          "body": "> 0. 运行 `run_Windows.bat` 时，直接调用的是系统环境的python，例如，Microsoft Store中安装的某个python版本。release中并没有附带python程序，也没有指定使用的python版本……我们只是使用这个系统默认的python新建环境。如果需要确认此时使用的是哪个python，可以在cmd中使用 `where python` 来确认用的是哪里的python，然后确认这个python是什么版本……\r\n>    可能也是我们考虑不周吧……以为大家默认的python版本都是3.8以上了……\r\n\r\npython默认用3.8的，并非>=3.8.1，所以部",
          "created_at": "2024-04-06T10:31:46Z"
        }
      ]
    },
    {
      "issue_number": 872,
      "title": "[Bug]: 接入Azure OpenAI 报错",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n加入了一些log之后发现错误似乎是在openai.py\r\nmessage格式不对\r\n2023-08-27 19:16:52,039 [INFO] [base_model.py:769] [SystemMessage(content='You are a helpful assistant.', additional_kwargs={}), HumanMessage(content='1', additional_kwargs={}, example=False)]\r\n2023-08-27 19:16:52,043 [INFO] [base.py:84] [SystemMessage(content='You are a helpful assistant.', additional_kwargs={}), HumanMessage(content='1', additional_kwargs={}, example=False)]\r\n2023-08-27 19:16:52,043 [INFO] [openai.py:279] content='You are a helpful assistant.' additional_kwargs={}\r\n2023-08-27 19:16:52,043 [INFO] [openai.py:308] content='You are a helpful assistant.' additional_kwargs={}\n\n### 复现操作\n\n正常在config中填入azure信息后报错\n\n### 错误日志\n\n```shell\nTraceback (most recent call last):\r\n  File \"E:\\OneDrive\\ChatGPT\\ChuanhuChatGPT-main\\ChuanhuChatGPT\\modules\\models\\base_model.py\", line 462, in predict\r\n    chatbot, status_text = self.next_chatbot_at_once(\r\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"E:\\OneDrive\\ChatGPT\\ChuanhuChatGPT-main\\ChuanhuChatGPT\\modules\\models\\base_model.py\", line 292, in next_chatbot_at_once\r\n    ai_reply, total_token_count = self.get_answer_at_once()\r\n                                  ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"E:\\OneDrive\\ChatGPT\\ChuanhuChatGPT-main\\ChuanhuChatGPT\\modules\\models\\base_model.py\", line 770, in get_answer_at_once\r\n    response = self.model.generate(history)\r\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\hddpp\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\langchain\\chat_models\\base.py\", line 94, in generate\r\n    raise e\r\n  File \"C:\\Users\\hddpp\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\langchain\\chat_models\\base.py\", line 86, in generate\r\n    results = [\r\n              ^\r\n  File \"C:\\Users\\hddpp\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\langchain\\chat_models\\base.py\", line 87, in <listcomp>\r\n    self._generate(m, stop=stop, run_manager=run_manager)\r\n  File \"C:\\Users\\hddpp\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\langchain\\chat_models\\openai.py\", line 280, in _generate\r\n    message_dicts, params = self._create_message_dicts(messages, stop)\r\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\hddpp\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\langchain\\chat_models\\openai.py\", line 309, in _create_message_dicts\r\n    message_dicts = [_convert_message_to_dict(m) for m in messages]\r\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\hddpp\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\langchain\\chat_models\\openai.py\", line 309, in <listcomp>\r\n    message_dicts = [_convert_message_to_dict(m) for m in messages]\r\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\hddpp\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\langchain\\chat_models\\openai.py\", line 92, in _convert_message_to_dict\r\n    raise ValueError(f\"Got unknown type {message}\")\r\nValueError: Got unknown type ('content', 'You are a helpful assistant.')\n```\n\n\n### 运行环境\n\nOS: Windows11 22H2\r\nBrowser: Chrome\r\nGradio version: 3.22.1\r\nPython version: 3.11.1\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Concinnity-P",
      "author_type": "User",
      "created_at": "2023-08-27T11:51:58Z",
      "updated_at": "2024-04-05T17:31:12Z",
      "closed_at": "2024-04-05T17:31:11Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/872/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/872",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/872",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:16.077794",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "我等会儿看下👀",
          "created_at": "2023-08-27T11:59:13Z"
        },
        {
          "author": "Keldos-Li",
          "body": "顺便，这个gradio版本有点老了，和我们项目匹配的现在应该是gradio 3.40.0",
          "created_at": "2023-08-27T16:16:35Z"
        },
        {
          "author": "Concinnity-P",
          "body": "> 顺便，这个gradio版本有点老了，和我们项目匹配的现在应该是gradio 3.40.0\r\n\r\n我现在就是3.40.0版本呀",
          "created_at": "2023-08-28T02:09:15Z"
        },
        {
          "author": "Keldos-Li",
          "body": "哦 你运行环境那里没改……我还以为怎么是这么老版呢。",
          "created_at": "2023-08-28T02:11:20Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "请测试一下，最新版还有这个问题吗？",
          "created_at": "2023-09-03T09:05:56Z"
        }
      ]
    },
    {
      "issue_number": 742,
      "title": "[功能请求]: 可同一个账号在不同地方登录不展示历史对话",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n目前同一个账号在不同浏览器，不同IP登录会展示之前的历史对话，能否添加可选是否展示历史对话\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "pumpkin-nangua",
      "author_type": "User",
      "created_at": "2023-05-10T02:24:56Z",
      "updated_at": "2024-04-05T17:30:15Z",
      "closed_at": "2024-04-05T17:30:15Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/742/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/742",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/742",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:16.272975",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "应当使用不同的账户",
          "created_at": "2024-04-05T17:30:15Z"
        }
      ]
    },
    {
      "issue_number": 859,
      "title": "[本地部署]:发生了错误：: No module named ‘transformers_modules.models/chatglm2-6b-int4’",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n全部都按照文档更新过了，模型是点击选项里，让他自动下载的，\r\n下载完后，哪怕是重启了，还是出现\r\n发生了错误：: No module named ‘transformers_modules.models/chatglm2-6b-int4’\n\n### 复现操作\n\n下载了模型\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n```markdown\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version:\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Myra009",
      "author_type": "User",
      "created_at": "2023-08-15T04:54:47Z",
      "updated_at": "2024-04-05T17:28:25Z",
      "closed_at": "2024-04-05T17:28:25Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/859/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/859",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/859",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:16.430970",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "你安装`requirements_advanced.txt`了吗？为了运行本地模型，需要安装这里面的额外依赖。安装命令是：\r\n\r\n```\r\npip install -r requirements_advanced.txt\r\n```",
          "created_at": "2023-08-15T09:58:47Z"
        },
        {
          "author": "Myra009",
          "body": "> 你安装`requirements_advanced.txt`了吗？为了运行本地模型，需要安装这里面的额外依赖。安装命令是：\r\n> \r\n> ```\r\n> pip install -r requirements_advanced.txt\r\n> ```\r\n\r\n是的，这个也安装了，也更新过最新版",
          "created_at": "2023-08-16T14:33:04Z"
        },
        {
          "author": "qianli-42",
          "body": "更改你本地模型的命名，我修改了他的ChatGLM源代码中的模型路径这个参数",
          "created_at": "2023-09-25T16:08:20Z"
        },
        {
          "author": "Keldos-Li",
          "body": "应该已经解决了（许久之前）？",
          "created_at": "2024-04-05T17:28:25Z"
        }
      ]
    },
    {
      "issue_number": 858,
      "title": "[Bug]: azure opena使用报错",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n切换成azure openai 无法使用，使用代理出现_ssl.c:997错误，tunnel模式不会报错，但tunnel模式下依然无法使用，错误如下：\r\nTraceback (most recent call last):\r\n  File \"D:\\Users\\ChuanhuChatGPT\\modules\\models\\base_model.py\", line 454, in predict\r\n    for chatbot, status_text in iter:\r\n  File \"D:\\Users\\ChuanhuChatGPT\\modules\\models\\base_model.py\", line 276, in stream_next_chatbot\r\n    self.history.append(construct_assistant(partial_text))\r\nUnboundLocalError: local variable 'partial_text' referenced before assignment\r\n\r\n相同设置在chatgpt_academic和chatbox上均可以正常使用\n\n### 复现操作\n\n正常本地部署\n\n### 错误日志\n\n```shell\nTraceback (most recent call last):\r\n  File \"D:\\Users\\ChuanhuChatGPT\\modules\\models\\base_model.py\", line 454, in predict\r\n    for chatbot, status_text in iter:\r\n  File \"D:\\Users\\ChuanhuChatGPT\\modules\\models\\base_model.py\", line 276, in stream_next_chatbot\r\n    self.history.append(construct_assistant(partial_text))\r\nUnboundLocalError: local variable 'partial_text' referenced before assignment\n```\n\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "yxmnjxzx",
      "author_type": "User",
      "created_at": "2023-08-12T02:30:07Z",
      "updated_at": "2024-04-05T17:27:31Z",
      "closed_at": "2024-04-05T17:27:31Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/858/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/858",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/858",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:16.593449",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "更新一下再试试呢？",
          "created_at": "2023-08-12T05:06:18Z"
        },
        {
          "author": "yxmnjxzx",
          "body": "似乎还是不行，报错：\r\n2023-08-12 14:08:40,268 [INFO] [models.py:625] 模型设置为了： Azure OpenAI\r\n2023-08-12 14:08:42,576 [WARNING] [base_model.py:242] billing info not implemented, using default\r\n2023-08-12 14:08:42,675 [INFO] [base_model.py:406] 用户的输入为：hi\r\n2023-08-12 14:08:49,420 [INFO] [util.py:67] error_code=404",
          "created_at": "2023-08-12T06:10:05Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "\"Resource not found\"，hmm…… 你愿意提供你的 Azure OpenAI API 给我用于测试吗？因为我手头并没有这个。你可以发邮件给我：cascade.lucite-04@icloud.com",
          "created_at": "2023-08-12T12:30:23Z"
        },
        {
          "author": "Keldos-Li",
          "body": "应该已经解决了（许久之前）",
          "created_at": "2024-04-05T17:27:31Z"
        }
      ]
    },
    {
      "issue_number": 1088,
      "title": "[功能请求]: 允许修改用户历史消息并从该消息处重新开始对话",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n参考chatgpt官网的用户消息修改功能。当前版本下必须一条条删除或者修改导出的json对话记录后再次导入，较为麻烦\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "jeffgyf",
      "author_type": "User",
      "created_at": "2024-03-31T09:01:21Z",
      "updated_at": "2024-04-05T17:26:27Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1088/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1088",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1088",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:16.765092",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "- #216\r\n\r\n先记着，不保证能实现",
          "created_at": "2024-04-05T17:26:26Z"
        }
      ]
    },
    {
      "issue_number": 926,
      "title": "请问“一键总结”功能是不是没有办法只用本地大模型进行？报错需要调用api-key",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n使用本地模型进行一键总结\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n请问“一键总结”功能是不是没有办法只用本地大模型进行？加载本地千问14B，知识库文件上传和问答功能正常，点击“总结”，报错需要调用api-key",
      "state": "closed",
      "author": "MOLIZHU2023",
      "author_type": "User",
      "created_at": "2023-11-03T08:43:19Z",
      "updated_at": "2024-04-05T17:25:13Z",
      "closed_at": "2024-04-05T17:25:13Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/926/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/926",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/926",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:16.933284",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "也许请在配置中启用local embedding",
          "created_at": "2023-12-22T10:43:43Z"
        },
        {
          "author": "wayfare11",
          "body": "遇到了同样的问题\r\n<img width=\"886\" alt=\"Snipaste_2024-01-15_14-05-37\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/81129160/dc2f3065-53c6-47b1-8b90-7dc37cb33fee\">\r\n\r\n",
          "created_at": "2024-01-15T06:05:53Z"
        },
        {
          "author": "Keldos-Li",
          "body": "现在一键总结没了）",
          "created_at": "2024-04-05T17:25:13Z"
        }
      ]
    },
    {
      "issue_number": 577,
      "title": "[功能请求]: 能否添加“使用账号回答”功能而非API回答",
      "body": "### 相关问题\n\n目前api响应很慢，经常报错\n\n### 可能的解决办法\n\n使用账号通过网页授权方式进行回答\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Radicolax",
      "author_type": "User",
      "created_at": "2023-04-09T10:43:26Z",
      "updated_at": "2024-04-05T17:22:38Z",
      "closed_at": "2024-04-05T17:22:38Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/577/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/577",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/577",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:17.162783",
      "comments": [
        {
          "author": "HsunGong",
          "body": "这不太现实，建议你换个梯子更好。。。",
          "created_at": "2023-04-09T12:15:06Z"
        },
        {
          "author": "Radicolax",
          "body": "最近api很慢，想看看能不能借鉴gpt插件实现通过账号授权回答，应该不是网络问题\r\n\r\n\r\n\r\nSent&nbsp;from&nbsp;my&nbsp;iPhone\r\n\r\n\r\n------------------ 原始邮件 ------------------\r\nFrom: Xun Gong ***@***.***&gt;\r\n发送时间: 04/09/2023, 20:15\r\nTo: GaiZhenbiao/ChuanhuChatGPT ***@***.***&gt;\r\n抄送: GeekHank ***@***.***&gt;, Author ***@***.***&gt;\r\nSubject: ",
          "created_at": "2023-04-09T12:27:39Z"
        },
        {
          "author": "xingfanxia",
          "body": "网页更慢啊",
          "created_at": "2023-04-10T22:13:10Z"
        },
        {
          "author": "Radicolax",
          "body": "快很多\r\n\r\n\r\n\r\nSent&nbsp;from&nbsp;my&nbsp;iPhone\r\n\r\n\r\n------------------ 原始邮件 ------------------\r\nFrom: Philo-Sophia ***@***.***&gt;\r\n发送时间: 04/11/2023, 06:13\r\nTo: GaiZhenbiao/ChuanhuChatGPT ***@***.***&gt;\r\n抄送: GeekHank ***@***.***&gt;, Author ***@***.***&gt;\r\nSubject: Re: [GaiZhenbiao/ChuanhuChatGPT] ",
          "created_at": "2023-04-10T23:46:26Z"
        },
        {
          "author": "kkkk24juastin",
          "body": "为什么不再去搭一个web平台呢，比如https://github.com/duanxiangchun/chatgptweb",
          "created_at": "2023-04-15T08:15:43Z"
        }
      ]
    },
    {
      "issue_number": 1079,
      "title": "[功能请求]: 添加一个能让管理者发布公告的功能",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n可以增加一块区域在右上角固定公告栏或者在登录之后弹窗，这样有许多的bug规避或者注意事项能让使用者第一时间知道，许多bug也就能慢慢修了。\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "AsoulAva",
      "author_type": "User",
      "created_at": "2024-03-20T02:36:27Z",
      "updated_at": "2024-04-05T17:12:02Z",
      "closed_at": "2024-04-05T17:12:01Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1079/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1079",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1079",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:17.365389",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "此需求不难，或可自行尝试实现。如果大家都这般热心来帮忙修bug提交些pr就好了。",
          "created_at": "2024-04-05T17:12:01Z"
        }
      ]
    },
    {
      "issue_number": 1093,
      "title": "[Bug]: 最新版本地加载Qwen无法并发，如果重新加载界面就会重新加载模型，爆显存",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n最新版本地加载Qwen无法并发，如果重新加载界面就会重新加载模型，爆显存\r\n\r\nhttps://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/97641405/97b4bd55-d96b-4587-aa38-76adc8f9e478\r\n\r\n\n\n### 复现操作\n\n1.正常本地部署\r\n2.使用Qwen模型\r\n3.单独点开一个界面没有问题\r\n4.重复再点开一个界面后模型重新加载，旧模型不清除，导致显存溢出\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: ubuntu 20.04\r\n- Browser: chrome\r\n- Gradio version: latest\r\n- Python version: 3.10\r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "Evantso",
      "author_type": "User",
      "created_at": "2024-04-03T06:33:30Z",
      "updated_at": "2024-04-05T16:48:30Z",
      "closed_at": null,
      "labels": [
        "bug",
        "📌 confirmed"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1093/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1093",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1093",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:17.536977",
      "comments": []
    },
    {
      "issue_number": 1094,
      "title": "[功能请求]: 允许DALL-E 3模型对现有图片进行调整修改",
      "body": "### 相关问题\r\n\r\n在谷歌上搜到的一段话: \r\n_\"You can also use DALL-E 3 to generate variations of an existing image. To do this, simply upload the image to DALL-E 3 and then enter a prompt describing the changes you want to make. For example, you could say \"Make this image more colorful\" or \"Make this image look more like a painting.\"_\r\n是否意味着DALL-E 3能实现像midjourney那样，允许用户端输入一个现有的图片，然后根据用户指示对这个输入的图片进行修改调整。但是好像目前川虎的DALL-E 3还不支持多模态输入，所以目前无法通过川虎这边的DALL-E 3实现对现有图片的修改调整。\r\n\r\n### 帮助开发\r\n\r\n- [ ] 我愿意协助开发！\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "open",
      "author": "max-su-2019",
      "author_type": "User",
      "created_at": "2024-04-04T03:52:25Z",
      "updated_at": "2024-04-04T11:57:06Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1094/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1094",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1094",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:17.537000",
      "comments": []
    },
    {
      "issue_number": 593,
      "title": "[Bug]: windows本地部署chatglm-6b，每多开一个网页或重新刷新网页都会多占一份模型内存，导致爆显存",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\nwindows本地部署chatglm-6b，没多开一个网页或重新加载都会多占一份模型内存，导致爆显存。另外选择模型的话，选过chatglm-6b-int4在切换到chatglm-6b，那么会占用这两份显存，之前模型的显存并不会被释放。\n\n### 复现操作\n\n1.正常完成本地部署\r\n2.直接使用本地chatglm模型可以正常运行\r\n3.新开一个网页，显存占用翻倍，直到爆显存退出\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: windows\r\n- Browser: edge\r\n- Gradio version: 3.24.1\r\n- Python version: 3.9\r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "liuyunrui123",
      "author_type": "User",
      "created_at": "2023-04-11T06:32:43Z",
      "updated_at": "2024-04-03T06:12:43Z",
      "closed_at": "2023-04-17T03:14:27Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/593/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/593",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/593",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:17.537008",
      "comments": [
        {
          "author": "liuyunrui123",
          "body": "另外还有个现象，如果设置chatglm-6b模型为默认启动选择的模型，那么启动后是直接占用了原有的双倍显存，聊天就会爆显存",
          "created_at": "2023-04-11T06:35:17Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "我正在修复这个问题",
          "created_at": "2023-04-11T06:54:24Z"
        },
        {
          "author": "LeeKonyu",
          "body": "> 另外还有个现象，如果设置chatglm-6b模型为默认启动选择的模型，那么启动后是直接占用了原有的双倍显存，聊天就会爆显存\r\n\r\n大佬，能加个联系方式吗？我才开始接触这个，现在正在用chatglm，想通过chuanhu的方式来传文件索引，想问问你怎么实现的。",
          "created_at": "2023-04-15T15:46:04Z"
        },
        {
          "author": "MZhao-ouo",
          "body": "已修复",
          "created_at": "2023-04-17T03:14:27Z"
        },
        {
          "author": "Chrosea",
          "body": "这个问题在最新版依然存在，可不可以把默认模型载入和网页渲染的过程分离",
          "created_at": "2024-03-07T06:36:12Z"
        }
      ]
    },
    {
      "issue_number": 1085,
      "title": "[本地部署]: 本地部署报超时",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n本地部署后，改了apikey，能正常启动，但对话报超时\n\n### 复现操作\n\n本地部署后，改了apikey，能正常启动，但对话报超时\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/33093118/51462ab2-cdb5-42d3-8904-04532169723a)\r\n\n\n### 错误日志\n\n```shell\nTraceback (most recent call last):\r\n  File \"/Users/dingtao/work/hpr/ai/code/ChuanhuChatGPT/venv/lib/python3.10/site-packages/urllib3/connection.py\", line 174, in _new_conn\r\n    conn = connection.create_connection(\r\n  File \"/Users/dingtao/work/hpr/ai/code/ChuanhuChatGPT/venv/lib/python3.10/site-packages/urllib3/util/connection.py\", line 95, in create_connection\r\n    raise err\r\n  File \"/Users/dingtao/work/hpr/ai/code/ChuanhuChatGPT/venv/lib/python3.10/site-packages/urllib3/util/connection.py\", line 85, in create_connection\r\n    sock.connect(sa)\r\nTimeoutError: [Errno 60] Operation timed out\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/Users/dingtao/work/hpr/ai/code/ChuanhuChatGPT/venv/lib/python3.10/site-packages/urllib3/connectionpool.py\", line 715, in urlopen\r\n    httplib_response = self._make_request(\r\n  File \"/Users/dingtao/work/hpr/ai/code/ChuanhuChatGPT/venv/lib/python3.10/site-packages/urllib3/connectionpool.py\", line 404, in _make_request\r\n    self._validate_conn(conn)\r\n  File \"/Users/dingtao/work/hpr/ai/code/ChuanhuChatGPT/venv/lib/python3.10/site-packages/urllib3/connectionpool.py\", line 1058, in _validate_conn\r\n    conn.connect()\r\n  File \"/Users/dingtao/work/hpr/ai/code/ChuanhuChatGPT/venv/lib/python3.10/site-packages/urllib3/connection.py\", line 363, in connect\r\n    self.sock = conn = self._new_conn()\r\n  File \"/Users/dingtao/work/hpr/ai/code/ChuanhuChatGPT/venv/lib/python3.10/site-packages/urllib3/connection.py\", line 179, in _new_conn\r\n    raise ConnectTimeoutError(\r\nurllib3.exceptions.ConnectTimeoutError: (<urllib3.connection.HTTPSConnection object at 0x122583700>, 'Connection to openaipublic.blob.core.windows.net timed out. (connect timeout=None)')\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/Users/dingtao/work/hpr/ai/code/ChuanhuChatGPT/venv/lib/python3.10/site-packages/requests/adapters.py\", line 486, in send\r\n    resp = conn.urlopen(\r\n  File \"/Users/dingtao/work/hpr/ai/code/ChuanhuChatGPT/venv/lib/python3.10/site-packages/urllib3/connectionpool.py\", line 799, in urlopen\r\n    retries = retries.increment(\r\n  File \"/Users/dingtao/work/hpr/ai/code/ChuanhuChatGPT/venv/lib/python3.10/site-packages/urllib3/util/retry.py\", line 592, in increment\r\n    raise MaxRetryError(_pool, url, error or ResponseError(cause))\r\nurllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='openaipublic.blob.core.windows.net', port=443): Max retries exceeded with url: /encodings/cl100k_base.tiktoken (Caused by ConnectTimeoutError(<urllib3.connection.HTTPSConnection object at 0x122583700>, 'Connection to openaipublic.blob.core.windows.net timed out. (connect timeout=None)'))\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/Users/dingtao/work/hpr/ai/code/ChuanhuChatGPT/modules/models/base_model.py\", line 668, in predict\r\n    for chatbot, status_text in iter:\r\n  File \"/Users/dingtao/work/hpr/ai/code/ChuanhuChatGPT/modules/models/base_model.py\", line 347, in stream_next_chatbot\r\n    user_token_count = self.count_token(inputs)\r\n  File \"/Users/dingtao/work/hpr/ai/code/ChuanhuChatGPT/modules/models/OpenAI.py\", line 62, in count_token\r\n    input_token_count = count_token(construct_user(user_input))\r\n  File \"/Users/dingtao/work/hpr/ai/code/ChuanhuChatGPT/modules/utils.py\", line 164, in count_token\r\n    encoding = tiktoken.get_encoding(\"cl100k_base\")\r\n  File \"/Users/dingtao/work/hpr/ai/code/ChuanhuChatGPT/venv/lib/python3.10/site-packages/tiktoken/registry.py\", line 73, in get_encoding\r\n    enc = Encoding(**constructor())\r\n  File \"/Users/dingtao/work/hpr/ai/code/ChuanhuChatGPT/venv/lib/python3.10/site-packages/tiktoken_ext/openai_public.py\", line 72, in cl100k_base\r\n    mergeable_ranks = load_tiktoken_bpe(\r\n  File \"/Users/dingtao/work/hpr/ai/code/ChuanhuChatGPT/venv/lib/python3.10/site-packages/tiktoken/load.py\", line 147, in load_tiktoken_bpe\r\n    contents = read_file_cached(tiktoken_bpe_file, expected_hash)\r\n  File \"/Users/dingtao/work/hpr/ai/code/ChuanhuChatGPT/venv/lib/python3.10/site-packages/tiktoken/load.py\", line 64, in read_file_cached\r\n    contents = read_file(blobpath)\r\n  File \"/Users/dingtao/work/hpr/ai/code/ChuanhuChatGPT/venv/lib/python3.10/site-packages/tiktoken/load.py\", line 25, in read_file\r\n    resp = requests.get(blobpath)\r\n  File \"/Users/dingtao/work/hpr/ai/code/ChuanhuChatGPT/venv/lib/python3.10/site-packages/requests/api.py\", line 73, in get\r\n    return request(\"get\", url, params=params, **kwargs)\r\n  File \"/Users/dingtao/work/hpr/ai/code/ChuanhuChatGPT/venv/lib/python3.10/site-packages/requests/api.py\", line 59, in request\r\n    return session.request(method=method, url=url, **kwargs)\r\n  File \"/Users/dingtao/work/hpr/ai/code/ChuanhuChatGPT/venv/lib/python3.10/site-packages/requests/sessions.py\", line 589, in request\r\n    resp = self.send(prep, **send_kwargs)\r\n  File \"/Users/dingtao/work/hpr/ai/code/ChuanhuChatGPT/venv/lib/python3.10/site-packages/requests/sessions.py\", line 703, in send\r\n    r = adapter.send(request, **kwargs)\r\n  File \"/Users/dingtao/work/hpr/ai/code/ChuanhuChatGPT/venv/lib/python3.10/site-packages/requests/adapters.py\", line 507, in send\r\n    raise ConnectTimeout(e, request=request)\r\nrequests.exceptions.ConnectTimeout: HTTPSConnectionPool(host='openaipublic.blob.core.windows.net', port=443): Max retries exceeded with url: /encodings/cl100k_base.tiktoken (Caused by ConnectTimeoutError(<urllib3.connection.HTTPSConnection object at 0x122583700>, 'Connection to openaipublic.blob.core.windows.net timed out. (connect timeout=None)'))\n```\n\n\n### 运行环境\n\n```markdown\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version:\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "KrystalandBarry",
      "author_type": "User",
      "created_at": "2024-03-27T06:11:56Z",
      "updated_at": "2024-04-03T01:03:28Z",
      "closed_at": "2024-04-03T01:03:28Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1085/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1085",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1085",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:17.717147",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "连接问题，参考 #5.\r\n可以尝试检查 urllib 库和代理配置。\r\n\r\n*另，这类问题应该在discussion中提问*",
          "created_at": "2024-03-27T06:36:54Z"
        },
        {
          "author": "KrystalandBarry",
          "body": "好的，这个我之前也看了，版本对应urllib也按照那个issue的改了，但还是不行",
          "created_at": "2024-03-27T06:39:44Z"
        },
        {
          "author": "KrystalandBarry",
          "body": "改了urllib版本，换了美国的ip，也还是不行",
          "created_at": "2024-03-28T01:16:07Z"
        },
        {
          "author": "Keldos-Li",
          "body": "奇怪了，但大概总是某个环境的问题……",
          "created_at": "2024-04-02T13:51:41Z"
        }
      ]
    },
    {
      "issue_number": 1029,
      "title": "[功能请求]: 提供对 Copilot 的支持",
      "body": "### 相关问题\n\n这个项目：https://github.com/aaamoon/copilot-gpt4-service 已经实现了从 Copilot CLI 中提取 GPT-4 的功能，经过我的测试，ChuanhuGPT 只需要修改 GPT-4 的 API Base 就可以使用。但是，该项目不支持流式传输，必须在 ChuanhuGPT 的左下角页面处设置 stream 为 false 才能正常使用。\n\n### 可能的解决办法\n\n解决思路有两个：\r\n\r\n1. 在 GPT-4 的基础上继承一个 GPT-4-Copilot，将 Stream 默认设置成否。\r\n2. 在配置文件中提供一个选项，可以设置默认的 stream 行为。\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Nativu5",
      "author_type": "User",
      "created_at": "2024-01-10T17:46:42Z",
      "updated_at": "2024-04-02T13:57:18Z",
      "closed_at": "2024-04-02T13:57:18Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1029/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1029",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1029",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:17.934825",
      "comments": [
        {
          "author": "Cheukfung",
          "body": "copilot-gpt4-service已经支持流式传输的，再不行你可以用one-api再转一下",
          "created_at": "2024-02-08T08:14:30Z"
        },
        {
          "author": "Keldos-Li",
          "body": "这违反相关使用政策……原仓库也被封了",
          "created_at": "2024-04-02T13:57:18Z"
        }
      ]
    },
    {
      "issue_number": 914,
      "title": "[Bug]: instruct模型报错",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [x] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\ngpt-3.5-turbo-instruct报错：\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/68996932/48d697bb-a75f-45e9-bce2-3de3e2a9ce0b)\r\n\n\n### 复现操作\n\n只在这个模型选择下报错\n\n### 错误日志\n\n```shell\n2023-10-11 10:10:36,457 [INFO] [base_model.py:378] 用户的输入为：23\r\n2023-10-11 10:10:36,939 [ERROR] [models.py:90] 获取API使用情况失败:API request failed with status code 403: {\r\n  \"error\": {\r\n    \"message\": \"Your request to GET /dashboard/billing/usage must be made with a session key (that is, it can only be made from the browser). You made it with the following key type: secret.\",\r\n    \"type\": \"server_error\",\r\n    \"param\": null,\r\n    \"code\": null\r\n  }\r\n}\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/ChuanhuChatGPT/modules/models/base_model.py\", line 425, in predict\r\n    for chatbot, status_text in iter:\r\n  File \"/home/ChuanhuChatGPT/modules/models/base_model.py\", line 250, in stream_next_chatbot\r\n    for partial_text in stream_iter:\r\n  File \"/home/ChuanhuChatGPT/modules/models/models.py\", line 58, in get_answer_stream_iter\r\n    for i in iter:\r\n  File \"/home/ChuanhuChatGPT/modules/models/models.py\", line 219, in _decode_chat_response\r\n    raise Exception(error_msg)\r\nException: {  \"error\": {    \"message\": \"This is not a chat model and thus not supported in the v1/chat/completions endpoint. Did you mean to use v1/completions?\",    \"type\": \"invalid_request_error\",    \"param\": \"model\",    \"code\": null  }}\n```\n\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "hengyanqwe",
      "author_type": "User",
      "created_at": "2023-10-11T02:30:10Z",
      "updated_at": "2024-04-02T02:11:39Z",
      "closed_at": "2023-10-12T01:58:51Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/914/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/914",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/914",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:18.126559",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "今天我做一下适配",
          "created_at": "2023-10-11T02:35:58Z"
        },
        {
          "author": "hengyanqwe",
          "body": "> 今天我做一下适配\r\n\r\n辛苦大佬了",
          "created_at": "2023-10-11T02:37:32Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "做好了，拉取最新版本测试一下吧～https://github.com/GaiZhenbiao/ChuanhuChatGPT/commit/e99bd71662ad69f2fa2bc2c85a5b88ae9d48b0d8\r\n\r\n另外，这不是一个对话模型，而是一个补全模型，所以不要期待它和对话模型一样表现。你们的“对话”实际上会被合成为\r\n```\r\n你说的话……\r\n\r\n模型的补全……\r\n\r\n更多内容……\r\n```\r\n这样的段落。",
          "created_at": "2023-10-12T01:58:52Z"
        }
      ]
    },
    {
      "issue_number": 216,
      "title": "[功能请求] 在对话过程中修改历史记录中的任意一次请求，并且保留每次修改的记录",
      "body": "### 该功能请求是否与某个问题相关？\r\n> 能否支持官网的以下功能：\r\n> 在对话过程中修改历史记录中的任意一次请求，并且保留每次修改的记录\r\n\r\n### 可能的解决办法\r\n> 保存多个历史记录json的版本，每次修改或回退时重新加载\r\n\r\n### 其他\r\n> 补充说明\r\n",
      "state": "open",
      "author": "au-summer",
      "author_type": "User",
      "created_at": "2023-03-20T03:20:04Z",
      "updated_at": "2024-03-31T08:52:51Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/216/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/216",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/216",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:18.314458",
      "comments": [
        {
          "author": "hhxxff",
          "body": "希望增加代码关键词高亮显示！",
          "created_at": "2023-03-20T04:24:54Z"
        },
        {
          "author": "Keldos-Li",
          "body": "> 希望增加代码关键词高亮显示！\n\n代码高亮已经有了🥺，昨晚通过 #135 引入了这一功能～",
          "created_at": "2023-03-20T04:30:36Z"
        },
        {
          "author": "jeffgyf",
          "body": "+1，就是类似chatgpt官网的那种功能",
          "created_at": "2024-03-31T08:52:50Z"
        }
      ]
    },
    {
      "issue_number": 1086,
      "title": "[Bug]: 自动命名文件名引号(\")引发错误",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n举个例子：\r\nname = 'history/\"鱼香肉丝制作秘诀：步骤详解川菜烹饪\".json'\r\n\r\n引发报错原因：**文件名中有英文的引号**\r\n\n\n### 复现操作\n\n如题\n\n### 错误日志\n\n```shell\nFile \"/root/anaconda3/envs/test/lib/python3.11/site-packages/anyio/_backends/_asyncio.py\", line 877, in run_sync_in_worker_thread\r\n    return await future\r\n           ^^^^^^^^^^^^\r\n  File \"/root/anaconda3/envs/test/lib/python3.11/site-packages/anyio/_backends/_asyncio.py\", line 807, in run\r\n    result = context.run(func, *args)\r\n             ^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/root/anaconda3/envs/test/lib/python3.11/site-packages/gradio/utils.py\", line 641, in wrapper\r\n    response = f(*args, **kwargs)\r\n               ^^^^^^^^^^^^^^^^^^\r\n  File \"/ai/apps/FenghouChat/modules/utils.py\", line 144, in set_single_turn\r\n    current_model.set_single_turn(*args)\r\n  File \"/ai/apps/FenghouChat/modules/models/base_model.py\", line 786, in set_single_turn\r\n    self.auto_save()\r\n  File \"/ai/apps/FenghouChat/modules/models/base_model.py\", line 898, in auto_save\r\n    save_file(self.history_file_path, self, chatbot)\r\n  File \"/ai/apps/FenghouChat/modules/utils.py\", line 411, in save_file\r\n    with open(history_file_path, \"w\", encoding=\"utf-8\") as f:\r\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nOSError: [Errno 22] Invalid argument: 'history/\"鱼香肉丝制作秘诀：步骤详解川菜烹饪\".json'\n```\n\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [x] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "zollty",
      "author_type": "User",
      "created_at": "2024-03-30T06:51:18Z",
      "updated_at": "2024-03-30T08:44:19Z",
      "closed_at": "2024-03-30T08:44:18Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1086/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1086",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1086",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:18.536533",
      "comments": []
    },
    {
      "issue_number": 782,
      "title": "[功能请求]: 支持api2d或者其他第三方api吗？",
      "body": "### 相关问题\n\n支持api2d或者其他第三方api吗？\n\n### 可能的解决办法\n\n我把/modules/presets.py 文件里面的api_host改成api2d的接口地址，OPENAI_API_KEY 也设置成api2d的key\r\n提示：☹️发生了错误：{ “error”: { “message”: “”, “type”: “invalid_request_error”, “param”: null, “code”: “invalid_api_key” }}\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "mctds",
      "author_type": "User",
      "created_at": "2023-05-26T07:49:29Z",
      "updated_at": "2024-03-28T13:51:16Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/782/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/782",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/782",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:18.536553",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "请在config.json里设置api_host",
          "created_at": "2023-05-26T07:54:29Z"
        }
      ]
    },
    {
      "issue_number": 1030,
      "title": "[功能请求]: 智谱AI接口请求",
      "body": "### 相关问题\n\nChatGLM官方智谱AI已经开放API试用，请求适配！\n\n### 可能的解决办法\n\n可以根据zhipuai包开发相关接口\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\npython 包 zhipuai",
      "state": "open",
      "author": "Liozhang",
      "author_type": "User",
      "created_at": "2024-01-11T02:48:58Z",
      "updated_at": "2024-03-28T05:32:10Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1030/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1030",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1030",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:18.771891",
      "comments": [
        {
          "author": "AsoulAva",
          "body": "https://github.com/fuzhengwei/chatglm-sdk-java 也许能用这里的接口",
          "created_at": "2024-03-28T05:32:10Z"
        }
      ]
    },
    {
      "issue_number": 1084,
      "title": "[本地部署]: ollama serve +川虎部署失败",
      "body": "### 是否已存在现有反馈与解答？\r\n\r\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\r\n\r\n### 是否是一个代理配置相关的疑问？\r\n\r\n- [X] 我确认这不是一个代理配置相关的疑问。\r\n\r\n### 错误描述\r\n\r\n不能推理\r\n<img width=\"1827\" alt=\"截屏2024-03-26 09 43 16\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/146583103/afb0947d-1726-42f5-a79f-7d123535387f\">\r\n<img width=\"697\" alt=\"截屏2024-03-26 09 43 23\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/146583103/6a801a58-6da5-40c0-99cc-119869f2841a\">\r\n\r\n\r\n### 复现操作\r\n\r\n1. 模型是qwen:14b-chat-v1.5-fp16\r\n2. 运行ollama serve\r\n<img width=\"697\" alt=\"截屏2024-03-26 09 40 39\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/146583103/46f1d040-bb86-4fda-b275-f451b6162a95\">\r\n\r\n3.川虎配置文件设置了\r\n\"openai_api_key\": \"ollama\",\r\n   \"extra_models\": [\"qwen:14b-chat-v1.5-fp16\"],\r\n    \"openai_api_base\": \"http://localhost:11434/v1\",\r\n\r\n### 错误日志\r\n\r\n_No response_\r\n\r\n### 运行环境\r\n\r\n```markdown\r\n- OS: macOS\r\n- Browser: safari\r\n- Gradio version: \r\n- Python version:\r\n```\r\n\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "open",
      "author": "taozhiyuai",
      "author_type": "User",
      "created_at": "2024-03-26T01:44:26Z",
      "updated_at": "2024-03-26T22:01:05Z",
      "closed_at": null,
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 8,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1084/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1084",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1084",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:19.063496",
      "comments": [
        {
          "author": "taozhiyuai",
          "body": "模型列表点击我添加的qwen:14b-chat-v1.5-fp16, 也不能选择",
          "created_at": "2024-03-26T01:45:50Z"
        },
        {
          "author": "Keldos-Li",
          "body": "\"openai_api_key\"设置为openai，api base设置为你的本地api地址，模型选择时选择gpt系列的模型，不要添加新的模型",
          "created_at": "2024-03-26T02:14:26Z"
        },
        {
          "author": "taozhiyuai",
          "body": "> \"openai_api_key\"设置为openai，api base设置为你的本地api地址，模型选择时选择gpt系列的模型，不要添加新的模型\r\n\r\n<img width=\"1714\" alt=\"截屏2024-03-26 10 39 51\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/146583103/4d550dcc-79e4-499e-a256-2b0aa6a918a0\">\r\nlm studio像你说的操作可以.换成ollama server 就出现如图错误",
          "created_at": "2024-03-26T02:40:32Z"
        },
        {
          "author": "taozhiyuai",
          "body": "附上我的json\r\n[config.json](https://github.com/GaiZhenbiao/ChuanhuChatGPT/files/14751779/config.json)\r\n\r\n\r\n\"openai_api_key\": \"ollama\", \r\n    \"default_model\": \"GPT3.5 Turbo\", // 默认模型\r\n  \"openai_api_base\": \"http://localhost:11434/v1\",\r\n\r\n下面的注释掉了\r\n    // \"available_models\": [\"GPT3.5 Turbo\", \"GPT4 Turbo\", \"",
          "created_at": "2024-03-26T02:42:56Z"
        },
        {
          "author": "taozhiyuai",
          "body": "> \"openai_api_key\"设置为openai，api base设置为你的本地api地址，模型选择时选择gpt系列的模型，不要添加新的模型\r\n\r\n试了很多次,总是如图错误.请问怎么办.",
          "created_at": "2024-03-26T14:31:26Z"
        }
      ]
    },
    {
      "issue_number": 1083,
      "title": "[本地部署]: LM Studio架设API Server,不能运行",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n我在lm studio架设API服务器\r\n<img width=\"1840\" alt=\"截屏2024-03-25 13 07 49\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/146583103/73fd32a8-949a-4c29-a9ef-f08a6a5cd178\">\r\n\r\nconfig.json中配置,其他均为默认配置\r\n \"openai_api_key\": \"lm-studio\",\r\n    \"openai_api_base\": \"http://localhost:1234/v1\",\r\n\r\n成功启动主界面\r\n<img width=\"1005\" alt=\"截屏2024-03-25 13 09 11\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/146583103/3171ae09-5d18-4323-bd40-c6fe159c19ef\">\r\n\r\n\r\n但是不能推理\r\n<img width=\"1827\" alt=\"截屏2024-03-25 13 09 30\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/146583103/7e342b49-689f-42dc-8b0d-95f8717c218c\">\r\n\n\n### 复现操作\n\n正常部署\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n```markdown\n- OS: MACOS 14.4\r\n- Browser: SAFARI\r\n- Gradio version: \r\n- Python version: 3.9\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "taozhiyuai",
      "author_type": "User",
      "created_at": "2024-03-25T05:11:26Z",
      "updated_at": "2024-03-26T01:38:49Z",
      "closed_at": "2024-03-26T01:38:48Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1083/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1083",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1083",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:19.327259",
      "comments": []
    },
    {
      "issue_number": 1081,
      "title": "similar to Why isn't the interpreter supported? #1021",
      "body": "### 相关问题\r\n\r\nI ask the same question: Can assistants solve the code interpreter problem? They are already in the langchain, under agents.\r\nWe should integrate openAI and azure assistants (called also agents or minigpts)\r\n\r\n### 可能的解决办法\r\n\r\nhttps://python.langchain.com/docs/modules/agents/agent_types/openai_assistants\r\n\r\nfrom langchain.agents.openai_assistant import OpenAIAssistantRunnable\r\n\r\n### 帮助开发\r\n\r\n- [X] 我愿意协助开发！\r\n\r\n### 补充说明\r\n\r\nI can help as much as possible, but we need to make some changes to the base_model.py ; I'm not fully confident about doing it alone.",
      "state": "open",
      "author": "PedroGruvhagen",
      "author_type": "User",
      "created_at": "2024-03-20T13:59:02Z",
      "updated_at": "2024-03-21T11:58:32Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1081/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1081",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1081",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:19.327278",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "Yeah, I'm looking forward to integrate that too.",
          "created_at": "2024-03-20T14:43:19Z"
        },
        {
          "author": "PedroGruvhagen",
          "body": "Brilliant! Is it on the roadmap?",
          "created_at": "2024-03-21T11:58:31Z"
        }
      ]
    },
    {
      "issue_number": 1021,
      "title": "[功能请求]: 为什么不支持interpreter?",
      "body": "### 相关问题\n\n好像没看到有这个功能,为什么不支持interpreter?\n\n### 可能的解决办法\n\n希望支持interpreter\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "q351941406",
      "author_type": "User",
      "created_at": "2024-01-04T11:11:34Z",
      "updated_at": "2024-03-20T13:55:58Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1021/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1021",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1021",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:19.489641",
      "comments": [
        {
          "author": "PedroGruvhagen",
          "body": "I ask the same question: Can assistants solve the code interpreter problem? They are already in the langchain, under agents.\r\n",
          "created_at": "2024-03-20T13:55:57Z"
        }
      ]
    },
    {
      "issue_number": 1080,
      "title": "[功能请求]: 请求增加和Azure AD集成单点登录",
      "body": "### 相关问题\n\n目前只能单独手工管理登录账号，而且用户不能自己改密码，是否有可能和Azure集成单点登录功能。谢谢！\n\n### 可能的解决办法\n\n请大佬们集思广益\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "edwardzfy",
      "author_type": "User",
      "created_at": "2024-03-20T06:16:58Z",
      "updated_at": "2024-03-20T13:52:27Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1080/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1080",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1080",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:19.664674",
      "comments": [
        {
          "author": "PedroGruvhagen",
          "body": "I have the same question actually\r\n",
          "created_at": "2024-03-20T13:52:26Z"
        }
      ]
    },
    {
      "issue_number": 1074,
      "title": "[功能请求]: Gemini代理问题",
      "body": "### 相关问题\n\nGemini调用是否可以加载代理？官方api似乎还不支持\n\n### 可能的解决办法\n\n应该可以通过grpc.proxy_channel实现\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "Cop-Tur",
      "author_type": "User",
      "created_at": "2024-03-11T13:33:50Z",
      "updated_at": "2024-03-16T12:27:10Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1074/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1074",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1074",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:19.863878",
      "comments": []
    },
    {
      "issue_number": 1028,
      "title": "[功能请求]: 每次登陆都开启新的一段对话",
      "body": "### 相关问题\n\n不熟悉这个“历史记录”这个概念的朋友，可能会一直在同一段对话里一直聊\n\n### 可能的解决办法\n\n每次登陆都新开一个聊天对话\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "ParkerLyu01",
      "author_type": "User",
      "created_at": "2024-01-10T10:07:10Z",
      "updated_at": "2024-03-14T05:23:01Z",
      "closed_at": "2024-03-14T05:23:00Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1028/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1028",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1028",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:19.863906",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "Close via 40a0cc7018628b47948bd1a00e474e2350b45fe1",
          "created_at": "2024-03-14T05:23:00Z"
        }
      ]
    },
    {
      "issue_number": 1073,
      "title": "[远程部署]:   android 手机，用webview打开地址加载不出来",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\nandroid手机用webview 加载失败\n\n### 复现操作\n\n浏览器可以打开\r\nwebview控件加载不出来\n\n### 错误日志\n\n```shell\n2024-03-10 00:33:37.092 10131-10131 chromium                         I  [INFO:CONSOLE(35)] \"Uncaught SyntaxError: Unexpected token .\", source: http://xxxx:7860/file=web_assets/javascript/chat-list.js?1709990789.527254 (35)\r\n2024-03-10 00:33:37.138 10131-10131 chromium                          I  [INFO:CONSOLE(1)] \"Uncaught SyntaxError: Unexpected token ?\", source: http://xxxx:7860/assets/index-2576a72b.js (1)\n```\n\n\n### 运行环境\n\n- OS: \r\n- Server: \r\n- Gradio version: \r\n- Python version: 3.11\r\n\n\n### 补充说明\n\n无",
      "state": "open",
      "author": "themass",
      "author_type": "User",
      "created_at": "2024-03-09T16:40:31Z",
      "updated_at": "2024-03-09T16:40:31Z",
      "closed_at": null,
      "labels": [
        "question",
        "server deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1073/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1073",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1073",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:20.074486",
      "comments": []
    },
    {
      "issue_number": 1072,
      "title": "[远程部署]:  start error",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\nroot@ecs-wYF2x3:~/work/ChuanhuChatGPT# python ChuanhuChatbot.py \r\n2024-03-09 15:47:01,596 [INFO] [_client.py:1026] HTTP Request: GET https://api.gradio.app/gradio-messaging/en \"HTTP/1.1 200 OK\"\r\n2024-03-09 15:47:03,126 [INFO] [font_manager.py:1578] generated new fontManager\r\nTraceback (most recent call last):\r\n  File \"/root/work/ChuanhuChatGPT/ChuanhuChatbot.py\", line 8, in <module>\r\n    from modules.models.models import get_model\r\n  File \"/root/work/ChuanhuChatGPT/modules/models/models.py\", line 9, in <module>\r\n    from modules import config\r\n  File \"/root/work/ChuanhuChatGPT/modules/config.py\", line 9, in <module>\r\n    from . import shared\r\n  File \"/root/work/ChuanhuChatGPT/modules/shared.py\", line 1, in <module>\r\n    from modules.presets import CHAT_COMPLETION_URL, BALANCE_API_URL, USAGE_API_URL, API_HOST, OPENAI_API_BASE, IMAGES_COMPLETION_URL\r\n  File \"/root/work/ChuanhuChatGPT/modules/presets.py\", line 366, in <module>\r\n    ).set(\r\n      ^^^^\r\nTypeError: Base.set() got an unexpected keyword argument 'chatbot_code_background_color_dark'\n\n### 复现操作\n\n安装 python 环境，\r\n执行  python ChuanhuChatbot.py \n\n### 错误日志\n\n```shell\nroot@ecs-wYF2x3:~/work/ChuanhuChatGPT# python ChuanhuChatbot.py \r\n2024-03-09 15:47:01,596 [INFO] [_client.py:1026] HTTP Request: GET https://api.gradio.app/gradio-messaging/en \"HTTP/1.1 200 OK\"\r\n2024-03-09 15:47:03,126 [INFO] [font_manager.py:1578] generated new fontManager\r\nTraceback (most recent call last):\r\n  File \"/root/work/ChuanhuChatGPT/ChuanhuChatbot.py\", line 8, in <module>\r\n    from modules.models.models import get_model\r\n  File \"/root/work/ChuanhuChatGPT/modules/models/models.py\", line 9, in <module>\r\n    from modules import config\r\n  File \"/root/work/ChuanhuChatGPT/modules/config.py\", line 9, in <module>\r\n    from . import shared\r\n  File \"/root/work/ChuanhuChatGPT/modules/shared.py\", line 1, in <module>\r\n    from modules.presets import CHAT_COMPLETION_URL, BALANCE_API_URL, USAGE_API_URL, API_HOST, OPENAI_API_BASE, IMAGES_COMPLETION_URL\r\n  File \"/root/work/ChuanhuChatGPT/modules/presets.py\", line 366, in <module>\r\n    ).set(\r\n      ^^^^\r\nTypeError: Base.set() got an unexpected keyword argument 'chatbot_code_background_color_dark'\n```\n\n\n### 运行环境\n\n- OS:  linux \r\n- Server: \r\n- Gradio version: 0.9\r\n- Python version:  3.11\r\n\n\n### 补充说明\n\ndd ",
      "state": "closed",
      "author": "themass",
      "author_type": "User",
      "created_at": "2024-03-09T15:55:17Z",
      "updated_at": "2024-03-09T15:57:36Z",
      "closed_at": "2024-03-09T15:57:36Z",
      "labels": [
        "question",
        "server deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1072/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1072",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1072",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:20.074504",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "请安装 requirements.txt 中指定的版本。\r\n```\r\npip install -r requirements.txt --upgrade\r\n```",
          "created_at": "2024-03-09T15:57:36Z"
        }
      ]
    },
    {
      "issue_number": 672,
      "title": "[Docker]: Error occurred when getting dialogue, check the background log",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n安装了docker版，部署完后提示☹️Error: Error occurred when getting dialogue, check the background log\r\n\r\n之前是正常的，后来用不了就拉了最新版本的部署完就出现这个问题，我也不太清楚后台日志在哪…\n\n### 复现操作\n\n正常部署\n\n### 错误日志\n\n```shell\n☹️Error: Error occurred when getting dialogue, check the background log\n```\n\n\n### 运行环境\n\n- OS: \r\n- Docker version: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "7-orion",
      "author_type": "User",
      "created_at": "2023-04-16T11:45:10Z",
      "updated_at": "2024-03-07T13:52:25Z",
      "closed_at": "2023-05-10T09:25:34Z",
      "labels": [
        "question",
        "docker deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/672/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/672",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/672",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:20.268763",
      "comments": [
        {
          "author": "Nativu5",
          "body": "最新版本的 Docker 镜像弃用了原本的环境变量部署方式，请您移步 Wiki 查看新版 Docker 镜像的部署方式。",
          "created_at": "2023-04-17T10:47:41Z"
        },
        {
          "author": "VoxHwa",
          "body": "按照部署方式，在用claude的时候我也碰到这个问题",
          "created_at": "2024-03-07T13:51:02Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "> 按照部署方式，在用claude的时候我也碰到这个问题\r\n\r\n后台日志是什么？",
          "created_at": "2024-03-07T13:52:24Z"
        }
      ]
    },
    {
      "issue_number": 1035,
      "title": "[Bug]: 切换聊天窗口的时候，显示的是同一个聊天记录。",
      "body": "### 这个bug是否已存在现有issue了？\r\n\r\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\r\n\r\n### 错误表现\r\n\r\n当我切换左边的聊天窗口栏中的聊天时，右边现实的是相同聊天记录。（右边的是聊天窗口栏中，第二个的聊天记录；第一个聊天记录应该是空的。）\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/67033006/8e169a78-b39e-43ba-9b72-83299910cf79)\r\n\r\n\r\n### 复现操作\r\n\r\n往复切换聊天记录窗口栏中的选项时，就出现了以上所说的Bug。\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/67033006/80c71d6a-2c5d-477c-aee3-bea55eeaffa6)\r\n\r\n### 错误日志\r\n\r\n```shell\r\nERROR: {'id': 'chatcmpl-8hZTVlauLyiyjClfSxtmwnjLff14s', 'object': 'chat.completion.chunk', 'created': 1705395161, 'model': 'gpt-3.5-turbo-16k-0613', 'system_fingerprint': None, 'choices': [{'index': 0, 'delta': {'content': '\\n'}, 'logprobs': None, 'finish_reason': None}]}\r\nException ignored in: <generator object OpenAIClient._decode_chat_response at 0x0000020B6D856440>\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\yu_ga\\Saved Games\\ChuanhuChatGPT\\modules\\models\\base_model.py\", line 607, in predict\r\n    for chatbot, status_text in iter:\r\nRuntimeError: generator ignored GeneratorExit\r\n2024-01-16 17:53:27,547 [INFO] [base_model.py:624] 回答为：using System.Collections.Generic; using UnityEngine;\r\n\r\npublic class EvaluationObject : MonoBehaviour {\r\n  // SerializeFieldを使ってInspector上で値を設定できるようにする\r\n\r\n2024-01-16 17:53:32,764 [INFO] [base_model.py:995] 没有找到对话历史记录 新しい会話 01-16 17-53\r\n```\r\n\r\n\r\n### 运行环境\r\n\r\n- OS: Windows\r\n- Browser: Edge \r\n- Gradio version:  \r\n- Python version: \r\n\r\n\r\n### 帮助解决\r\n\r\n- [ ] 我愿意协助解决！\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "open",
      "author": "beta2-2",
      "author_type": "User",
      "created_at": "2024-01-16T09:02:52Z",
      "updated_at": "2024-03-07T13:01:45Z",
      "closed_at": null,
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1035/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1035",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1035",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:20.490309",
      "comments": [
        {
          "author": "beta2-2",
          "body": "复现操作追加：\r\n不断新建新的聊天记录，然后在过去的有内容的聊天记录和新建的聊天记录来回切换；\r\n或者在不断新建的聊天记录，突然删除掉一个，然后在过去的有内容的聊天记录里来回切换。",
          "created_at": "2024-01-17T02:57:36Z"
        },
        {
          "author": "chengshaoxi0",
          "body": "遇到了同样的问题，希望得到解决，非常感谢， 我可以二次开发但是无法定位问题",
          "created_at": "2024-02-22T08:28:57Z"
        },
        {
          "author": "VoxHwa",
          "body": "我这还有一个问题，一旦刷新页面，左侧历史记录将被清空，但历史确实是存在的，开始一段新对话后，再新开一个，左侧就会加载历史了。这个加载时间不太对",
          "created_at": "2024-03-07T13:01:44Z"
        }
      ]
    },
    {
      "issue_number": 1062,
      "title": "[功能请求]: Claude API模式支持切换Claude 3 Haiku, Claude 3 Sonnet, Claude 3 Opus模型",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n我希望支持切换Claude 3 Haiku, Claude 3 Sonnet, Claude 3 Opus模型\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\nhttps://www.anthropic.com/news/claude-3-family\r\nClaude API控制台\r\nhttps://console.anthropic.com/dashboard",
      "state": "closed",
      "author": "Morpheusr",
      "author_type": "User",
      "created_at": "2024-03-05T02:39:45Z",
      "updated_at": "2024-03-07T05:26:33Z",
      "closed_at": "2024-03-05T03:06:49Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1062/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1062",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1062",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:20.677914",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "现在支持啦！\r\n<img width=\"617\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/51039745/3d7c1cb1-ce85-4084-abbc-55ffd21ffc0b\">\r\n",
          "created_at": "2024-03-05T03:07:08Z"
        },
        {
          "author": "Morpheusr",
          "body": "好耶, 谢谢作者 !",
          "created_at": "2024-03-07T05:26:32Z"
        }
      ]
    },
    {
      "issue_number": 1069,
      "title": "[功能请求]: 有计划支持gemini api吗？",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\nPaLM已经过时了，希望支持gemini\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "ryanbai",
      "author_type": "User",
      "created_at": "2024-03-07T02:19:19Z",
      "updated_at": "2024-03-07T02:53:31Z",
      "closed_at": "2024-03-07T02:53:31Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1069/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1069",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1069",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:20.877432",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "最新版本已经支持Gemini",
          "created_at": "2024-03-07T02:53:17Z"
        }
      ]
    },
    {
      "issue_number": 1066,
      "title": "[Bug]: 在選取Claude 3 Opus, Claude 3 Sonnet 模型下, 按下開始新的聊天, System prompt會被清空(即使已經打勾\"新建對話保留Prompt\")",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n\r\nhttps://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/137477635/cfc1f63e-6e24-4947-8a07-6ed8d92ddb9b\r\n\r\n請版主參考這問題複製流程影片, 感謝版主\n\n### 复现操作\n\n1. 確保System Prompt勾選\"新建對話保留Prompt\"\r\n2. 把模型換成Claude 3 Opus, Claude 3 Sonnet\r\n3. 點 + 來開啟新的聊天\r\n4. 發現System Prompt被清空\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "tomkuo1124",
      "author_type": "User",
      "created_at": "2024-03-06T09:05:22Z",
      "updated_at": "2024-03-06T14:05:15Z",
      "closed_at": "2024-03-06T09:29:19Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1066/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1066",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1066",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:21.053613",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "确实存在这个问题！我修复一下～",
          "created_at": "2024-03-06T09:24:04Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "请拉取最新主线代码以解决这个问题",
          "created_at": "2024-03-06T09:29:36Z"
        },
        {
          "author": "tomkuo1124",
          "body": "再次感恩版主大大的快速回覆修改! 感恩",
          "created_at": "2024-03-06T14:05:13Z"
        }
      ]
    },
    {
      "issue_number": 938,
      "title": "[Bug]: GPT4 Vision 上传非图片文件报错",
      "body": "### 这个bug是否已存在现有issue了？\r\n\r\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\r\n\r\n### 错误表现\r\n\r\n![QQ截图20231111143553](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/53503340/a23e66fb-b917-481c-9117-aacf2470578e)\r\n\r\n\r\n### 复现操作\r\n\r\n9月份版本是正常的，但是我更新以后就出现这个问题，我尝试过10.20那个版本同样如此，我排查了反代，关了反代依然如此\r\n\r\n### 错误日志\r\n\r\n```shell\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.10/dist-packages/gradio/queueing.py\", line 388, in call_prediction\r\n    output = await route_utils.call_process_api(\r\n  File \"/usr/local/lib/python3.10/dist-packages/gradio/route_utils.py\", line 219, in call_process_api\r\n    output = await app.get_blocks().process_api(\r\n  File \"/usr/local/lib/python3.10/dist-packages/gradio/blocks.py\", line 1440, in process_api\r\n    data = self.postprocess_data(fn_index, result[\"prediction\"], state)\r\n  File \"/usr/local/lib/python3.10/dist-packages/gradio/blocks.py\", line 1341, in postprocess_data\r\n    prediction_value = block.postprocess(prediction_value)\r\n  File \"/usr/GPT_chuanhu/modules/overwrites.py\", line 36, in postprocess\r\n    self._postprocess_chat_messages(message_pair[0], \"user\"),\r\n  File \"/usr/GPT_chuanhu/modules/overwrites.py\", line 52, in postprocess_chat_messages\r\n    file_uri = chat_message[0]\r\nIndexError: list index out of range\r\n```\r\n\r\n\r\n### 运行环境\r\n\r\n- OS: Ubuntu 22.04.2 LTS\r\n- Browser: edge 119.0.2151.44\r\n- Gradio version: Version: 3.43.2\r\n- Python version: Python 3.10.12\r\n\r\n\r\n### 帮助解决\r\n\r\n- [ ] 我愿意协助解决！\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "closed",
      "author": "LaoJiuYes",
      "author_type": "User",
      "created_at": "2023-11-11T06:38:46Z",
      "updated_at": "2024-03-05T07:18:43Z",
      "closed_at": "2024-03-05T07:18:11Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 16,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/938/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/938",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/938",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:21.220283",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "请尝试安装目前本项目支持的gradio版本：\r\n```\r\npip install gradio==3.43.2\r\n```",
          "created_at": "2023-11-11T06:50:07Z"
        },
        {
          "author": "LaoJiuYes",
          "body": "> 请尝试安装目前本项目支持的gradio版本：\r\n> \r\n> ```\r\n> pip install gradio==3.43.2\r\n> ```\r\n\r\n谢谢川虎",
          "created_at": "2023-11-11T06:53:31Z"
        },
        {
          "author": "LaoJiuYes",
          "body": "> 请尝试安装目前本项目支持的gradio版本：\r\n> \r\n> ```\r\n> pip install gradio==3.43.2\r\n> ```\r\n![2](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/53503340/daaef051-5200-4f19-82bb-bf382fe6974b)\r\n还是这样\r\n忘了说了，我每次更新都会执行`pip install -r requirements.txt`跑一遍。\r\n这次不知道咋回事。\r\n",
          "created_at": "2023-11-11T07:09:41Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "你在使用哪个模型？",
          "created_at": "2023-11-11T07:12:23Z"
        },
        {
          "author": "LaoJiuYes",
          "body": "GPT4 version\r\n\r\n> 你在使用哪个模型？\r\n\r\n",
          "created_at": "2023-11-11T07:14:41Z"
        }
      ]
    },
    {
      "issue_number": 1040,
      "title": "[Bug]: 使用gpt-vision识图 发送多张图片时，前端无法正确显示，只能正确显示第一张",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\ngpt-vision单词可识别多张图片，当我们使用chuanhu时也可以发送多张图片，但是只能正确显示第一张，效果如下：\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/133076068/0eaf3700-37c5-4bb0-a686-b04ec9de2c72)\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/133076068/467e0334-8067-4a8e-8e6c-123ce454d403)\r\n后台日志显示 这是两张不同的照片，但是前端却只能正确显示第一张\n\n### 复现操作\n\n使用gpt-vision\n\n### 错误日志\n\n```shell\nnull\n```\n\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\nnull",
      "state": "closed",
      "author": "Mchousexuxu",
      "author_type": "User",
      "created_at": "2024-01-29T06:55:30Z",
      "updated_at": "2024-03-05T07:17:48Z",
      "closed_at": "2024-03-05T07:17:47Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1040/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1040",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1040",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:21.435591",
      "comments": [
        {
          "author": "Xtaiyang",
          "body": "我得也是，而且手机端在上传一张图片分析之后就不能上传知识库了，只能新建对话上传\r\n",
          "created_at": "2024-02-26T03:35:27Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "已经在 https://github.com/GaiZhenbiao/ChuanhuChatGPT/commit/414815f44ca0741fa6bdbf50fbe44184e8ed5ff0 （最新版）中修复",
          "created_at": "2024-03-05T07:17:42Z"
        }
      ]
    },
    {
      "issue_number": 1060,
      "title": "[功能请求]: Huggingface 上部署版本更新",
      "body": "### 相关问题\n\n关注到最近一次Huggingface部署的提交中是11月20日那一次，中间存在一些模型更新（openai embedding，turbo模型更新），希望有空可以与项目同步一下\n\n### 可能的解决办法\n\n将目前项目在huggingface部署版本上进行一次同步\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "middle-chunjie",
      "author_type": "User",
      "created_at": "2024-03-04T07:19:13Z",
      "updated_at": "2024-03-04T07:19:13Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1060/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1060",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1060",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:21.606815",
      "comments": []
    },
    {
      "issue_number": 984,
      "title": "[本地部署]: duckduckgo搜索超时",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n我确信代理规则中有duckduckgo.com的主域名但是通过这个包进行搜索还是超时，下面涉及的包我都尝试更新到了最新版但并无作用。\r\n\r\n尝试访问lite.duckduckgo.com\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/86949124/f9c5adcc-fbc7-4ef8-97e5-6e601154438f)\r\n\n\n### 复现操作\n\n1.正常完成部署\r\n2.勾选在线搜索并询问\r\n3.出现报错\n\n### 错误日志\n\n```shell\nTraceback (most recent call last):\r\n  File \"J:\\bots\\chatGPT\\long3\\ChuanhuChatGPT\\ChuanhuChat\\lib\\site-packages\\curl_cffi\\requests\\session.py\", line 695, in request\r\n    c.perform()\r\n  File \"J:\\bots\\chatGPT\\long3\\ChuanhuChatGPT\\ChuanhuChat\\lib\\site-packages\\curl_cffi\\curl.py\", line 257, in perform\r\n    self._check_error(ret, action=\"perform\")\r\n  File \"J:\\bots\\chatGPT\\long3\\ChuanhuChatGPT\\ChuanhuChat\\lib\\site-packages\\curl_cffi\\curl.py\", line 112, in _check_error\r\n    raise error\r\ncurl_cffi.curl.CurlError: Failed to perform, ErrCode: 28, Reason: 'Failed to connect to lite.duckduckgo.com port 443 after 21008 ms: Timed out'. This may be a libcurl error, See https://curl.se/libcurl/c/libcurl-errors.html first for more details.\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"J:\\bots\\chatGPT\\long3\\ChuanhuChatGPT\\ChuanhuChat\\lib\\site-packages\\duckduckgo_search\\duckduckgo_search.py\", line 42, in _get_url\r\n    resp = self._session.request(method, url, **kwargs)\r\n  File \"J:\\bots\\chatGPT\\long3\\ChuanhuChatGPT\\ChuanhuChat\\lib\\site-packages\\curl_cffi\\requests\\session.py\", line 699, in request\r\n    raise RequestsError(str(e), e.code, rsp) from e\r\ncurl_cffi.requests.errors.RequestsError: Failed to perform, ErrCode: 28, Reason: 'Failed to connect to lite.duckduckgo.com port 443 after 21008 ms: Timed out'. This may be a libcurl error, See https://curl.se/libcurl/c/libcurl-errors.html first for more details.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"J:\\bots\\chatGPT\\long3\\ChuanhuChatGPT\\ChuanhuChat\\lib\\site-packages\\gradio\\queueing.py\", line 388, in call_prediction\r\n    output = await route_utils.call_process_api(\r\n  File \"J:\\bots\\chatGPT\\long3\\ChuanhuChatGPT\\ChuanhuChat\\lib\\site-packages\\gradio\\route_utils.py\", line 219, in call_process_api\r\n    output = await app.get_blocks().process_api(\r\n  File \"J:\\bots\\chatGPT\\long3\\ChuanhuChatGPT\\ChuanhuChat\\lib\\site-packages\\gradio\\blocks.py\", line 1437, in process_api\r\n    result = await self.call_function(\r\n  File \"J:\\bots\\chatGPT\\long3\\ChuanhuChatGPT\\ChuanhuChat\\lib\\site-packages\\gradio\\blocks.py\", line 1123, in call_function\r\n    prediction = await utils.async_iteration(iterator)\r\n  File \"J:\\bots\\chatGPT\\long3\\ChuanhuChatGPT\\ChuanhuChat\\lib\\site-packages\\gradio\\utils.py\", line 503, in async_iteration\r\n    return await iterator.__anext__()\r\n  File \"J:\\bots\\chatGPT\\long3\\ChuanhuChatGPT\\ChuanhuChat\\lib\\site-packages\\gradio\\utils.py\", line 496, in __anext__\r\n    return await anyio.to_thread.run_sync(\r\n  File \"J:\\bots\\chatGPT\\long3\\ChuanhuChatGPT\\ChuanhuChat\\lib\\site-packages\\anyio\\to_thread.py\", line 33, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n  File \"J:\\bots\\chatGPT\\long3\\ChuanhuChatGPT\\ChuanhuChat\\lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 877, in run_sync_in_worker_thread\r\n    return await future\r\n  File \"J:\\bots\\chatGPT\\long3\\ChuanhuChatGPT\\ChuanhuChat\\lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 807, in run\r\n    result = context.run(func, *args)\r\n  File \"J:\\bots\\chatGPT\\long3\\ChuanhuChatGPT\\ChuanhuChat\\lib\\site-packages\\gradio\\utils.py\", line 479, in run_sync_iterator_async\r\n    return next(iterator)\r\n  File \"J:\\bots\\chatGPT\\long3\\ChuanhuChatGPT\\ChuanhuChat\\lib\\site-packages\\gradio\\utils.py\", line 629, in gen_wrapper\r\n    yield from f(*args, **kwargs)\r\n  File \"J:\\bots\\chatGPT\\long3\\ChuanhuChatGPT\\modules\\utils.py\", line 36, in predict\r\n    for i in iter:\r\n  File \"J:\\bots\\chatGPT\\long3\\ChuanhuChatGPT\\modules\\models\\base_model.py\", line 550, in predict\r\n    ) = self.prepare_inputs(\r\n  File \"J:\\bots\\chatGPT\\long3\\ChuanhuChatGPT\\modules\\models\\base_model.py\", line 470, in prepare_inputs\r\n    for r in islice(ddgs_gen, 10):\r\n  File \"J:\\bots\\chatGPT\\long3\\ChuanhuChatGPT\\ChuanhuChat\\lib\\site-packages\\duckduckgo_search\\duckduckgo_search.py\", line 91, in text\r\n    for i, result in enumerate(results, start=1):\r\n  File \"J:\\bots\\chatGPT\\long3\\ChuanhuChatGPT\\ChuanhuChat\\lib\\site-packages\\duckduckgo_search\\duckduckgo_search.py\", line 276, in _text_lite\r\n    resp = self._get_url(\"POST\", \"https://lite.duckduckgo.com/lite/\", data=payload)\r\n  File \"J:\\bots\\chatGPT\\long3\\ChuanhuChatGPT\\ChuanhuChat\\lib\\site-packages\\duckduckgo_search\\duckduckgo_search.py\", line 50, in _get_url\r\n    raise DuckDuckGoSearchException(f\"_get_url() {url} {type(ex).__name__}: {ex}\")\r\nduckduckgo_search.exceptions.DuckDuckGoSearchException: _get_url() https://lite.duckduckgo.com/lite/ RequestsError: Failed to perform, ErrCode: 28, Reason: 'Failed to connect to lite.duckduckgo.com port 443 after 21008 ms: Timed out'. This may be a libcurl error, See https://curl.se/libcurl/c/libcurl-errors.html first for more details.\n```\n\n\n### 运行环境\n\n```markdown\n- OS: Windows10 22H2\r\n- Browser: Chrome\r\n- Gradio version: 3.43.2\r\n- Python version: 3.9\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "slideslide",
      "author_type": "User",
      "created_at": "2023-12-14T06:34:08Z",
      "updated_at": "2024-03-02T11:52:34Z",
      "closed_at": "2023-12-14T06:44:23Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/984/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/984",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/984",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:21.606835",
      "comments": [
        {
          "author": "slideslide",
          "body": "已解决",
          "created_at": "2023-12-14T06:44:23Z"
        },
        {
          "author": "caramel678",
          "body": "大佬，怎么解决的，求指导，谢谢",
          "created_at": "2023-12-22T06:41:51Z"
        },
        {
          "author": "Denticle",
          "body": "我也遇到这个问题",
          "created_at": "2023-12-27T07:39:33Z"
        },
        {
          "author": "slideslide",
          "body": "建议检查以下事项：\r\n项目是否为最新版本\r\nchuanhu文件夹中duckduckgo版本是否正确\r\n代理规则是否正确",
          "created_at": "2023-12-27T08:50:29Z"
        },
        {
          "author": "jamsnrihk",
          "body": "我下了最新版本，也遇到这个问题",
          "created_at": "2024-03-02T11:52:33Z"
        }
      ]
    },
    {
      "issue_number": 1057,
      "title": "[功能请求]: 添加更多自定义接口地址",
      "body": "### 相关问题\r\n\r\n因网络及其他原因，需要反向代理访问部分api接口。请求添加更多api的自定义接口地址功能。如`claude`和`palm`。\r\n\r\n### 可能的解决办法\r\n\r\n未知\r\n\r\n### 帮助开发\r\n\r\n- [ ] 我愿意协助开发！\r\n\r\n### 补充说明\r\n\r\n无",
      "state": "open",
      "author": "originalFactor",
      "author_type": "User",
      "created_at": "2024-02-27T15:32:13Z",
      "updated_at": "2024-02-27T15:32:47Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1057/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1057",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1057",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:21.786698",
      "comments": []
    },
    {
      "issue_number": 1056,
      "title": "[bug] 手机端在上传一张图片分析之后就不能上传知识库了",
      "body": "              我得也是，而且手机端在上传一张图片分析之后就不能上传知识库了，只能新建对话上传\r\n\r\n_Originally posted by @Xtaiyang in https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1040#issuecomment-1963260256_\r\n            ",
      "state": "open",
      "author": "Keldos-Li",
      "author_type": "User",
      "created_at": "2024-02-26T11:01:44Z",
      "updated_at": "2024-02-26T11:02:10Z",
      "closed_at": null,
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1056/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "Keldos-Li"
      ],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1056",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1056",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:21.786719",
      "comments": []
    },
    {
      "issue_number": 1054,
      "title": "[本地部署]: 首次启动 TypeError: str expected, not NoneType",
      "body": "### 是否已存在现有反馈与解答？\n\n- [x] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n首次启动\r\nTypeError: str expected, not NoneType\n\n### 复现操作\n\n首次启动\r\nTypeError: str expected, not NoneType\n\n### 错误日志\n\n```shell\nC:\\Users\\User\\Documents\\ChuanhuChatGPT>python ChuanhuChatbot.py\r\n2024-02-25 04:18:01,201 [WARNING] [webui_locale.py:24] Language file for zh_TW does not exist. Using English instead.\r\n2024-02-25 04:18:01,203 [WARNING] [webui_locale.py:25] Available languages: en_US, extract_loca, ja_JP, ko_KR, ru_RU, sv_SE, vi_VN, zh_CN\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\User\\Documents\\ChuanhuChatGPT\\ChuanhuChatbot.py\", line 8, in <module>\r\n    from modules.models.models import get_model\r\n  File \"C:\\Users\\User\\Documents\\ChuanhuChatGPT\\modules\\models\\models.py\", line 9, in <module>\r\n    from modules import config\r\n  File \"C:\\Users\\User\\Documents\\ChuanhuChatGPT\\modules\\config.py\", line 117, in <module>\r\n    os.environ[\"GOOGLE_GENAI_API_KEY\"] = google_genai_api_key\r\n    ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"<frozen os>\", line 684, in __setitem__\r\n  File \"<frozen os>\", line 744, in check_str\r\nTypeError: str expected, not NoneType\n```\n\n\n### 运行环境\n\n```markdown\n- OS: win10 22H2\r\n- Browser: Chrome 121.0.6167.185 \r\n- Gradio version: 3.43.2\r\n- Python version: 3.11.8\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "WILDADF",
      "author_type": "User",
      "created_at": "2024-02-24T20:41:56Z",
      "updated_at": "2024-02-25T05:49:49Z",
      "closed_at": "2024-02-25T05:49:49Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1054/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1054",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1054",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:21.786747",
      "comments": [
        {
          "author": "WILDADF",
          "body": "复制一份 config_example.json，并将其重命名为 config.json就可以运行\r\n这是正常的吗?\r\n[本地部署](https://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B#%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2)时,我跳过了3.填写项目配置.",
          "created_at": "2024-02-24T20:54:55Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "这是一个bug，项目应该可以在没有config的情况下运行才对。我修一下。",
          "created_at": "2024-02-25T05:27:10Z"
        }
      ]
    },
    {
      "issue_number": 1055,
      "title": "[本地部署]: 安装依赖报错 ERROR: Failed building wheel for faiss-cpu",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n安装依赖报错 ERROR: Failed building wheel for faiss-cpu\r\n\n\n### 复现操作\n\nThere are currently no CPython 3.12 wheels on PyPI\r\ndowngrade to CPython 3.11 or below\r\nhttps://github.com/kyamagu/faiss-wheels/issues/80\r\nhttps://github.com/kyamagu/faiss-wheels/issues/87\n\n### 错误日志\n\n```shell\nBuilding wheels for collected packages: faiss-cpu\r\n  Building wheel for faiss-cpu (pyproject.toml) ... error\r\n  error: subprocess-exited-with-error\r\n\r\n  × Building wheel for faiss-cpu (pyproject.toml) did not run successfully.\r\n  │ exit code: 1\r\n  ╰─> [8 lines of output]\r\n      running bdist_wheel\r\n      running build\r\n      running build_py\r\n      running build_ext\r\n      building 'faiss._swigfaiss' extension\r\n      swigging faiss\\faiss\\python\\swigfaiss.i to faiss\\faiss\\python\\swigfaiss_wrap.cpp\r\n      swig.exe -python -c++ -Doverride= -I/usr/local/include -Ifaiss -doxygen -DSWIGWIN -module swigfaiss -o faiss\\faiss\\python\\swigfaiss_wrap.cpp faiss\\faiss\\python\\swigfaiss.i\r\n      error: command 'swig.exe' failed: None\r\n      [end of output]\r\n\r\n  note: This error originates from a subprocess, and is likely not a problem with pip.\r\n  ERROR: Failed building wheel for faiss-cpu\r\nFailed to build faiss-cpu\r\nERROR: Could not build wheels for faiss-cpu, which is required to install pyproject.toml-based projects\n```\n\n\n### 运行环境\n\n```markdown\n- OS: win10 22H2\r\n- Browser: Chrome 121.0.6167.185 \r\n- Gradio version: 3.43.2\r\n- Python version: 3.12.0\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "WILDADF",
      "author_type": "User",
      "created_at": "2024-02-24T20:50:17Z",
      "updated_at": "2024-02-25T05:28:32Z",
      "closed_at": "2024-02-25T05:28:32Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1055/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1055",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1055",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:21.967753",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "你的Python版本（3.12）太新了，建议使用 3.11 或 3.10 版本的Python。我在文档里加一下Python版本的提示。",
          "created_at": "2024-02-25T05:28:30Z"
        }
      ]
    },
    {
      "issue_number": 1053,
      "title": "[其他]: LaTeX rendering improperly in chat page",
      "body": "\r\n![PixPin_2024-02-23_20-03-04](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/63134846/c2aae375-d1b5-4838-ab6d-95af6d515f19)\r\n### 是否已存在现有反馈与解答？\r\n\r\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\r\n\r\n### 错误描述\r\n\r\nHello, this is about LaTeX rendering. I have updated to the latest version and set \r\n```\r\n\"latex_option\": \"all\"\r\n``` \r\nIn the config.json file, but when using it, I still **encounter issues with LaTeX not rendering in the answers**. In the source code, I conducted a full-text search for LaTeX but only found the settings for LaTeX. I would like to know what the logic behind LaTeX rendering is. Is it that the web interface for LaTeX conversion has malfunctioned?\r\nThis is my config file:\r\n```\r\n{\r\n    // 你的OpenAI API Key，一般必填，\r\n    // 若缺省填为 \"openai_api_key\": \"\" 则必须再在图形界面中填入API Key\r\n    \"language\": \"zh_CN\", // 界面语言，可选\"auto\", \"zh_CN\", \"en_US\", \"ja_JP\", \"ko_KR\", \"sv_SE\", \"ru_RU\", \"vi_VN\"\r\n    \"usage_limit\": 5, // API Key的当月限额，单位：美元\r\n    // 你的xmchat API Key，与OpenAI API Key不同\r\n    // \"xmchat_api_key\": \"\",\r\n    // \"language\": \"auto\",\r\n    // 如果使用代理，请取消注释下面的两行，并替换代理URL\r\n    // \"https_proxy\": \"http://127.0.0.1:7890\",\r\n    // \"http_proxy\": \"http://127.0.0.1:7890\",\r\n    \"local_embedding\": false, //是否在本地编制索引\r\n    \"hide_history_when_not_logged_in\": false, //未登录情况下是否不展示对话历史\r\n    \"chat_name_method_index\": 0, //选择对话名称的方法。0: 使用日期时间命名；1: 使用第一条提问命名，2: 使用模型自动总结\r\n    \"default_model\": \"gpt-4-1106-preview\", // 默认模型\r\n\r\n    \"latex_option\": \"all\", \r\n    \"advance_docs\": {\r\n        \"pdf\": {\r\n            // 是否认为PDF是双栏的\r\n            \"two_column\": false,\r\n            // 是否使用OCR识别PDF中的公式\r\n            \"formula_ocr\": true\r\n        }\r\n    },\r\n    // 是否多个API Key轮换使用\r\n    \"multi_api_key\": false,\r\n    \"api_key_list\": [\r\n        \"sk-xxxxxxxxxxxxxxxxxxxxxxxx1\",\r\n        \"sk-xxxxxxxxxxxxxxxxxxxxxxxx2\",\r\n        \"sk-xxxxxxxxxxxxxxxxxxxxxxxx3\"\r\n    ],\r\n    // 如果使用自定义端口、自定义ip，请取消注释并替换对应内容\r\n    // \"server_name\": \"0.0.0.0\",\r\n    // \"server_port\": 7860,\r\n    // 如果要share到gradio，设置为true\r\n    // \"share\": false,\r\n}\r\n\r\n```\r\n\r\n### 复现操作\r\n\r\nSuccessfully deployed and ran for three months. In the dialog box, select GPT-4 Turbo, enter and ask: \"What is the Huber loss function, and where is it generally used?\" The answer successfully appears, but the LaTeX in the displayed answer on the screen is not rendered.\r\n\r\n\r\n### 错误日志\r\n\r\n```shell\r\n虽然上述情况可以使用\"幻觉\"这个词，但在严格的技术讨论中，通常会使用更准确的术语，如\"生成错误\"、\"误导性特征关注\"、\"对抗攻击\"或\"过度拟合\"等。由于\"幻觉\"这个词并不是机器学习领域的标准术语，不建议在正式的文献或技术讨论中使用。[0m\r\n2024-02-23 12:57:26,464 [INFO] [base_model.py:537] 用户mqy的输入为：[34m什么叫huber loss function，一般用在什么地方\u001b[0m\r\n2024-02-23 12:57:56,819 [INFO] [base_model.py:624] 回答为：[34mHuber损失函数（Huber loss function）是一种用于回归问题的损失函数，经常被用于处理数据中含有异常值（outliers）的情况下的回归任务。Huber损失函数相比于均方误差损失（mean squared error, MSE）对于异常值更加鲁棒（不会受到异常值的严重影响），同时相比于绝对误差损失（mean absolute error, MAE）在误差较小的时候保持可微性，结合了MSE和MAE的优点。\r\nHuber损失函数定义如下：\r\n\\[L_{\\delta}(y, f(x)) = \r\n\\begin{cases}\r\n\\frac{1}{2}(y - f(x))^2 , & \\text{for } |y - f(x)| \\le \\delta,\\\\ \r\n\\delta(|y - f(x)| - \\frac{1}{2}\\delta), & \\text{otherwise.}\r\n\\end{cases}\\]\r\n\r\n>这里的\\(y\\)代表观测到的真实值，\\(f(x)\\)代表模型的预测值，\\(\\delta\\)是一个预设的阈值。\r\n```\r\n\r\n\r\n### 运行环境\r\n\r\n- OS: Windows11 22H2\r\n- Browser: Edge\r\n- Gradio version: 3.43.2\r\n- Python version: 3.9.13\r\n(或您的其他运行环境信息)\r\n\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "closed",
      "author": "JaceJu-frog",
      "author_type": "User",
      "created_at": "2024-02-23T12:01:43Z",
      "updated_at": "2024-02-23T13:11:52Z",
      "closed_at": "2024-02-23T13:11:52Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1053/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1053",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1053",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:22.179906",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "Hi，你的设置没有问题。这个确实会产生这样的问题，参考这个issue：\r\n- #952\r\n\r\n因为chatbot实际是markdown环境而不是LaTeX环境，所以发生这种问题在所难免_(:з」∠)_\r\nworkaround一般也是在prompt中提示gpt是markdown而不是LaTeX，明确要求gpt使用$形式的输出，或者多加一次转义字符，如`\\\\[ ... \\\\]`\r\n我先close啦。相关建议和意见可以前往 #952 讨论~",
          "created_at": "2024-02-23T13:11:52Z"
        }
      ]
    },
    {
      "issue_number": 1050,
      "title": "[Bug]: 登录无反应，多次登录后成功",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n用户登录界面，填写用户名和密码后点击登录按钮，页面刷新，没有跳转，用户名和密码框清空，没有错误或成功提示。\n\n### 复现操作\n\n早期在正常 Docker 部署和设置反向代理后，登录操作一次成功，是正常的。\r\n近期配置文件仅修改过 API 相关内容，用户密码部分未改动，然后出现上述问题。\r\n\r\n按照刚才的方式反复操作近10余次不等，期间结合若干次手动刷新页面，然后能登陆成功，跳转至聊天界面。\r\n\r\n浏览器控制台中没有输出明显错误信息，只有一个 Mixed Content 的错误（见下方）看起来不是重点，因为正常登录后该错误仍存在。\r\n\r\n由于目前找不到明显线索，希望给予提示我再尝试排查。\n\n### 错误日志\n\n```shell\nMixed Content: The page at 'https://mydomain:9443/' was loaded over HTTPS, but requested an insecure script 'http://spin.js.org/spin.umd.js'. This request has been blocked; the content must be served over HTTPS.\n```\n\n\n### 运行环境\n\n- OS: Windows 11 Pro 23H2\r\n- Browser:  Edge 121.0.2277.128\r\n- Gradio version: 3.43.2\r\n- Python version:  3.9.17\r\n\r\nDocker 方式部署，使用 traefik 和 nginx 反向代理。\r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "acotor",
      "author_type": "User",
      "created_at": "2024-02-22T03:38:46Z",
      "updated_at": "2024-02-22T03:38:46Z",
      "closed_at": null,
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1050/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1050",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1050",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:22.347556",
      "comments": []
    },
    {
      "issue_number": 1044,
      "title": "[功能请求]: 使用Azure OpenAI API支持查询Endpoint下的全部部署。",
      "body": "### 相关问题\r\n\r\n暂未发现与现有问题有关。\r\n期望效果：我想通过一次性配置 config.json，实现将 gpt-4, gpt-3.5-turbo-16k 等模型一并引入 chuanhu，供我使用时选择。\r\n当前问题：当前 config.json 模板中有`\"azure_deployment_name\"`一值，我理解为 chaunhu 要求用户指定使用比如 deploy-gpt-3.5-turbo 部署（deployment）。这似乎导致我虽然拥有一组 Azure OpenAI API 资源，仅能引入一个模型。实际上微软在一组资源中为用户授权了多个模型，但一个部署只能对应一个模型。另外，项目缺少 Azure OpenAI API 的配置示例、详细文档，未能描述清楚项目是如何处理该 API 资源的。\r\n\r\n### 可能的解决办法\r\n\r\n首先，解决思路上，OpenCat 提供了一种好的思路，只需要用户提供 Azure OpenAI API、Endpoint Url 即可，软件会自动查询该终结点下的所有部署，用户可以每个模型创建一个部署，最终实现无需修改配置文件，在运行时可以按对话、场景选择需要的模型。\r\n其次，在功能实现的前提下，配置文件中去掉 deployment 的配置项，或通过文档说明该项是可选。配置了该项，即代表管理员限制了只能使用例如 gpt-3.5-turbo 模型而限制用户使用 gpt-4；配置留空则表示管理员允许用户使用所有已部署的模型。\r\n\r\n### 帮助开发\r\n\r\n- [ ] 我愿意协助开发！\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "open",
      "author": "acotor",
      "author_type": "User",
      "created_at": "2024-02-04T06:25:08Z",
      "updated_at": "2024-02-22T03:21:46Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1044/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1044",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1044",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:22.347577",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "了解",
          "created_at": "2024-02-04T06:26:34Z"
        },
        {
          "author": "acotor",
          "body": "补充一下：可能的解决办法\r\n`config.json` 中 `\"azure_deployment_name\"` 如果允许填写多个部署名，也是可以的，LibreChat 就是这么处理的。同时另外增加一个类似 `azure_default_deployment` 用于指定 azure 的默认聊天模型。写 deployment 名而不是写 model 名，是因为 Azure 在部署模型时，一个部署只能对应一个模型，而部署名不允许有小数点，只有数字、字母和-_，因此会有 [部署名]`gpt-35-turbo` - [模型名]`gpt-3.5-turbo` 这样的映射关系存在。假设川虎支持多个 Azur",
          "created_at": "2024-02-22T03:21:44Z"
        }
      ]
    },
    {
      "issue_number": 1049,
      "title": "[Docker]: 使用Dalle3时,如何把生成的图片自动保存在聊天记录本地读取,否则过一段时间可能存在无法读取openai服务器图片情况.",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n<img width=\"738\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/63192432/8f8f0cef-9a67-4a23-9749-0da44f0548a1\">\r\n\n\n### 复现操作\n\n使用Dalle3模型,生成图片,图片返回的是Openai官方服务器的链接,能否自动保存到本地并在聊天框中显示,这样可以持续留存<img width=\"738\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/63192432/8f8f0cef-9a67-4a23-9749-0da44f0548a1\">\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: linux\r\n- Docker version: latest\r\n- Gradio version: \r\n- Python version: \r\n\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "fky1990",
      "author_type": "User",
      "created_at": "2024-02-20T10:11:50Z",
      "updated_at": "2024-02-22T03:08:14Z",
      "closed_at": null,
      "labels": [
        "question",
        "docker deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1049/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1049",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1049",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:22.529770",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "<img width=\"675\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/51039745/f429424f-083f-4a87-9726-a118cb5c368f\">\r\n\r\n应该是能显示的才对. 并且还有个漂亮的图片查看器\r\n\r\n<img width=\"1243\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/51039745/56b05198-a763-4773-bca1-363d456312f7\"",
          "created_at": "2024-02-20T10:27:45Z"
        },
        {
          "author": "fky1990",
          "body": "<img width=\"1135\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/63192432/ff069e11-1639-4634-8db3-d655f908dcf2\">\r\n在家有科学网络的时候是可以访问的,但是出门以后不一定有科学网络,要是可以把oaidalleapiprodscus.blob.core.windows.net生成的图片自动保存到docker的文件夹里面就好了,这样只需要保证服务器环境可以访问,客户端能不能翻墙都能访问,就太方便了!",
          "created_at": "2024-02-20T10:30:14Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "我考虑做一下",
          "created_at": "2024-02-21T05:50:04Z"
        },
        {
          "author": "acotor",
          "body": "除了支持保存到映射的文件夹，也可以考虑支持对象存储 oss ~",
          "created_at": "2024-02-22T03:08:13Z"
        }
      ]
    },
    {
      "issue_number": 869,
      "title": "[本地部署]: 使用本地LLM是否支持设置多gpu运行",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n如题\n\n### 复现操作\n\n如题\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n```markdown\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version:\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "percyc",
      "author_type": "User",
      "created_at": "2023-08-24T02:05:39Z",
      "updated_at": "2024-02-22T03:06:28Z",
      "closed_at": null,
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/869/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/869",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/869",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:22.705369",
      "comments": [
        {
          "author": "percyc",
          "body": "查看了源码，发现没有该选项，只能通过改源码实现了。",
          "created_at": "2023-08-24T06:54:04Z"
        },
        {
          "author": "Maxagl",
          "body": "chatglm2-6b的页面有多卡部署的方法。记得导入chatglm2-6b的util模块，同时还要把model = model.half().cuda()注释掉（修改文件为/modules/models/ChatGLM.py），我这边不注释还是内存不够。\r\n`from utils import load_model_on_gpus`\r\n` model = load_model_on_gpus(\"模型位置\", num_gpus=2)`\r\n",
          "created_at": "2023-11-17T08:42:57Z"
        },
        {
          "author": "vmiku99",
          "body": "以chatglm3-6b-32k为例\r\n\r\n对于models/chatglm*/tokenization_chatglm.py中的ChatGLMTokenizer(PreTrainedTokenizer)\r\n加入\r\n```\r\ndef build_prompt(query, history):\r\n        prompt = \"欢迎使用 ChatGLM3-6B 模型，输入内容即可进行对话，clear 清空对话历史，stop 终止程序\"\r\n        for query, response in history:\r\n            prompt += f\"\\n\\n用户：{query",
          "created_at": "2024-02-22T03:06:27Z"
        }
      ]
    },
    {
      "issue_number": 1039,
      "title": "[功能请求]: 添加Google Gemini Pro 大模型",
      "body": "### 相关问题\n\nGoogle Gemini Pro已经开放有一段时间了，希望可以添加。\n\n### 可能的解决办法\n\n添加此模型即可\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "heyan0616",
      "author_type": "User",
      "created_at": "2024-01-28T14:49:39Z",
      "updated_at": "2024-02-20T09:13:33Z",
      "closed_at": "2024-02-20T09:13:32Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1039/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1039",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1039",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:22.912682",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "working on it!",
          "created_at": "2024-01-28T16:29:26Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "现在加入了对Gemini的支持\r\n\r\nhttps://github.com/GaiZhenbiao/ChuanhuChatGPT/commit/1318660e6c4a58d35bf6e7717bec43aa46c54cbb",
          "created_at": "2024-02-20T09:13:32Z"
        }
      ]
    },
    {
      "issue_number": 1017,
      "title": "[功能请求]: 请求增加配置项限制单次会话最大对话数量",
      "body": "### 相关问题\n\n开放给内部使用的GPT4 Turbo有人使用习惯不好，经常不切换新的会话，使用单一会话发起大量对话严重消耗token\n\n### 可能的解决办法\n\n如果可以，请新增一项配置项来限制单次会话内最大对话数量。或者如果open ai有现成的配置项，能否直接在config.json中配置？\r\n谢谢\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "morrigank12",
      "author_type": "User",
      "created_at": "2023-12-28T08:28:32Z",
      "updated_at": "2024-02-20T08:41:44Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1017/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1017",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1017",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:23.093511",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "可以打开单轮对话开关\r\n<img width=\"309\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/51039745/a0ae7a44-3903-43c4-997e-e2464aef0c0a\">\r\n",
          "created_at": "2024-01-02T03:23:03Z"
        },
        {
          "author": "morrigank12",
          "body": "因为确实是需要上下文关联，所以没办法直接开启单论对话，而且也不方便要求所有人去ui上开启这个开关，使用的人很多没什么电脑经验的。如果可以的话，希望能在配置文件中设置单轮对话的最大token或者最大对话数量，如果这个需求并不普遍的话，请您关闭这个issue吧，谢谢。",
          "created_at": "2024-02-20T08:41:43Z"
        }
      ]
    },
    {
      "issue_number": 1048,
      "title": "[功能请求]: 添加用户使用token数记录",
      "body": "### 相关问题\n\n在添加用户后，在history文件夹下，只有聊天的历史记录，用户可以在用户界面看到自己使用的token数，但管理员，无法从后台看到用户使用的token数\n\n### 可能的解决办法\n\n最简单快速的方法，将前台每次请求显示的消耗token数，记录到history里每个用户的文件夹下，比如tokens_日期.txt,方便管理员统计\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "fanzhixin",
      "author_type": "User",
      "created_at": "2024-02-18T11:57:15Z",
      "updated_at": "2024-02-20T08:07:46Z",
      "closed_at": "2024-02-20T08:07:46Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1048/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1048",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1048",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:23.260337",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "- Duplicate with #510",
          "created_at": "2024-02-20T08:07:46Z"
        }
      ]
    },
    {
      "issue_number": 1047,
      "title": "huggingface上部署后，提问时候，报错401 Authorization Required [远程部署]: ",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\nhuggingface上部署后，提问时候，报错401 Authorization Required，使用得是oneapi 中转的openai key \n\n### 复现操作\n\nhuggingface上部署后，提问时候，报错401 Authorization Required，使用得是oneapi 中转的openai key \n\n### 错误日志\n\n```shell\n401 Authorization Required\n```\n\n\n### 运行环境\n\n- OS: \r\n- Server: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "leoncool23",
      "author_type": "User",
      "created_at": "2024-02-18T03:08:58Z",
      "updated_at": "2024-02-18T03:10:52Z",
      "closed_at": null,
      "labels": [
        "question",
        "server deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1047/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1047",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1047",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:23.423631",
      "comments": [
        {
          "author": "leoncool23",
          "body": "JSON解析错误,收到的内容: <!DOCTYPE HTML PUBLIC \"-//IETF//DTD HTML 2.0//EN\">\r\nJSON解析错误,收到的内容: <html>\r\nJSON解析错误,收到的内容: <head><title>401 Authorization Required</title></head>\r\nJSON解析错误,收到的内容: <body>\r\nJSON解析错误,收到的内容: <h1>401 Authorization Required</h1>\r\nJSON解析错误,收到的内容: <p>This server could not verify that you ar",
          "created_at": "2024-02-18T03:10:51Z"
        }
      ]
    },
    {
      "issue_number": 1043,
      "title": "[功能请求]: HIDE_MY_KEY 加入到配置中",
      "body": "### 相关问题\n\n我直接用的docker pull的方式部署的，\r\n如果能将HIDE_MY_KEY 不能为配置控制，每次更新就需要自己重新构建image\n\n### 可能的解决办法\n\n是否可以考虑将HIDE_MY_KEY 集成到config.json中\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "z-henry",
      "author_type": "User",
      "created_at": "2024-02-01T07:29:04Z",
      "updated_at": "2024-02-17T08:03:35Z",
      "closed_at": "2024-02-17T08:03:35Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1043/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1043",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1043",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:23.614576",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "<img width=\"625\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/51039745/fb71a3d7-b59e-4827-b7df-fe8dcdad4076\">\r\n\r\n支持的",
          "created_at": "2024-02-17T08:03:35Z"
        }
      ]
    },
    {
      "issue_number": 1046,
      "title": "[Bug]: Changing Language to English/German does not work",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\nChanging language in the settings does not work\n\n### 复现操作\n\nAll models\n\n### 错误日志\n\n```shell\nI don't speak chinese\n```\n\n\n### 运行环境\n\n- OS: On HugginFace\r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Nitschi",
      "author_type": "User",
      "created_at": "2024-02-07T08:44:24Z",
      "updated_at": "2024-02-07T12:37:11Z",
      "closed_at": "2024-02-07T12:37:10Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1046/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1046",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1046",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:23.772050",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "Hi, you could create a Repository Secret called `LANGUAGE` and set it to `en_US` for you Huggingface Space in the space settings. Visit [our tutorial](https://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/使用教程#设置space) for more info (Sorry it's in Chinese; I think you can translate that into English us",
          "created_at": "2024-02-07T12:37:11Z"
        }
      ]
    },
    {
      "issue_number": 486,
      "title": "[本地部署]: 本地部署完成，访问http://127.0.0.1:7860/，出现UI异常",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n部署完成，在访问http://127.0.0.1:7860/的时候，UI异常，\r\n控制台出现\r\nindex.bd1e689b.js:1          GET https://www.googletagmanager.com/gtag/js?id=UA-156449732-1 net::ERR_SSL_PROTOCOL_ERROR\r\n![image](https://user-images.githubusercontent.com/60383097/229128176-b21bf420-99d0-49bb-8e24-66b70a42000f.png)\r\n\n\n### 复现操作\n\n正常完成部署，访问时出现UI显示异常。\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n```markdown\n- OS: win10\r\n- Browser: Chrome\r\n- Gradio version: \r\n- Python version:\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "yolend88",
      "author_type": "User",
      "created_at": "2023-03-31T13:07:46Z",
      "updated_at": "2024-01-31T14:32:51Z",
      "closed_at": "2023-04-19T14:32:31Z",
      "labels": [
        "question",
        "localhost deployment",
        "🤷 no can do"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 8,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/486/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/486",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/486",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:23.956896",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "其实呢……感觉应该也算代理问题😂\r\n\r\n好神奇，gradio还会加载这些js。或许可以尝试将 googletagmanager.com 也加入代理规则。",
          "created_at": "2023-03-31T13:26:27Z"
        },
        {
          "author": "yolend88",
          "body": "全局代理之后没有了js报错，但是UI还是异常\r\n![image](https://user-images.githubusercontent.com/60383097/229151597-d4a912d5-7f8e-41cb-a972-f1ba3ef0f1cd.png)\r\n",
          "created_at": "2023-03-31T14:39:35Z"
        },
        {
          "author": "yolend88",
          "body": "看上去像是css没有加载成功的样子，是什么回事呢？",
          "created_at": "2023-03-31T15:15:11Z"
        },
        {
          "author": "Keldos-Li",
          "body": "这也太奇怪了，浏览器的控制台没别的报错或者警告么，清除缓存啥的都试试",
          "created_at": "2023-03-31T15:35:09Z"
        },
        {
          "author": "yolend88",
          "body": "没有，就是UI显示不正常，清理了缓存，无痕浏览，都不行，奇了怪了\r\n![image](https://user-images.githubusercontent.com/60383097/229166819-6388bd37-52bf-4027-98aa-ac03a9ad7210.png)\r\n",
          "created_at": "2023-03-31T15:40:54Z"
        }
      ]
    },
    {
      "issue_number": 1042,
      "title": "[Bug]: (只發生在上傳文檔後與GPT對答)History裡面存檔的\"新對話xx.md\"只是儲存使用者存的system prompt內容, 並沒有存到使用者與GPT對答紀錄。",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n使用川虎GPT與GPT聊天後, 歷史紀錄會同時存有XXX.md, XXX.json兩種檔案:\r\nxxx.json file裡面會同時儲存使用者的system prompt與對答紀錄\r\nxxx.md file裡面只有存到使用者的system prompt, 並沒有儲存我們與GPT的對答紀錄\r\n\r\n由於小弟使用的Logseq筆記軟體可以吃xxx.md file(markdown file), 如果版主能夠幫忙讓history儲存的 xxx.md file儲存到我們問GPT的對答紀錄, 這對於我們是莫大的福音, 希望版主能夠考慮一下, 幫忙我們看一下這個需求, 感恩。 😊\r\n\n\n### 复现操作\n\nHistory資料夾裡面的 xxx.md file裡面只有存到使用者的system prompt, 並沒有儲存我們與GPT的對答紀錄\r\n\r\n由於小弟使用的Logseq筆記軟體可以吃xxx.md file(markdown file), 如果版主能夠幫忙讓history儲存的 xxx.md file儲存到我們問GPT的對答紀錄, 這對於我們是莫大的福音, 希望版主能夠考慮一下, 幫忙我們看一下這個需求, 感恩。\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: Ubuntu 22.04.3\r\n- Browser: Filefox browser 122.0\r\n- Gradio version: \r\n- Python version: 3.10\r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "tomkuo1124",
      "author_type": "User",
      "created_at": "2024-01-31T06:26:45Z",
      "updated_at": "2024-01-31T13:36:14Z",
      "closed_at": null,
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1042/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1042",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1042",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:24.223930",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "<img width=\"813\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/51039745/97daee79-2dd5-43ea-b739-fef2be88a91e\">\r\n按理是会保存对话的。你能贴出你的md文档吗？",
          "created_at": "2024-01-31T06:32:59Z"
        },
        {
          "author": "tomkuo1124",
          "body": "\r\n\r\nhttps://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/137477635/95becbb7-7bd5-4195-9672-65fa451a5e68\r\n\r\n\r\n[新对话 01-31 14-43.json](https://github.com/GaiZhenbiao/ChuanhuChatGPT/files/14108204/01-31.14-43.json)\r\n[新对话 01-31 14-43.md](https://github.com/GaiZhenbiao/ChuanhuChatGPT/files/14108205/01-31.",
          "created_at": "2024-01-31T06:49:14Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "好的，我检查一下",
          "created_at": "2024-01-31T13:17:21Z"
        },
        {
          "author": "tomkuo1124",
          "body": "感恩版主願意幫忙, 謝謝 😊",
          "created_at": "2024-01-31T13:36:13Z"
        }
      ]
    },
    {
      "issue_number": 1041,
      "title": "[功能请求]: 加入json format功能",
      "body": "### 相关问题\r\n\r\n希望在参数选项中, 加入一个response_fromat = {\"type\": \"json_object\"}的选项,  目前我想用chuanhu来测试一下设计的prompt, 图形化界面非常方便, 但好像没有看到让GPT以json格式输出的图形化按键\r\n\r\n### 可能的解决办法\r\n\r\n希望在参数选项中, 加入一个response_fromat = {\"type\": \"json_object\"}的选项, \r\n完整的python如下, 传入参数时, 再加入一个response_format即可, 目前支持gpt-3.5-turbo-1106 和 gpt-4-1106模型:\r\n            response = self._client.chat.completions.create(\r\n                model=self._model,\r\n                messages=self._memories,\r\n                temperature=temperature,\r\n                response_format={\"type\": \"json_object\"},  #  or 'type': 'text'\r\n            )\r\n这个是openai的API里的一个参数, 可以让GPT4以json格式输出. \r\n\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/72247380/d71bb130-8ab6-445c-a147-8736a587c680)\r\n\r\n默认使用text,  手动选择json后设置为json_object\r\n\r\n### 帮助开发\r\n\r\n- [ ] 我愿意协助开发！\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "open",
      "author": "MiangChen",
      "author_type": "User",
      "created_at": "2024-01-31T02:42:18Z",
      "updated_at": "2024-01-31T02:44:00Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1041/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1041",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1041",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:24.519272",
      "comments": []
    },
    {
      "issue_number": 1011,
      "title": "[Bug]: 使用DALL-E3模型作图以后，再切换回gpt4进行文字交流，生成空白回复",
      "body": "### 这个bug是否已存在现有issue了？\r\n\r\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\r\n\r\n### 错误表现\r\n\r\n![11](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/43903287/446c0464-10d5-4b1d-9ffc-bb216095ddd2)\r\n![微信图片_20231222203835](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/43903287/a3437e74-acd2-4185-865e-6551b108b7f1)\r\n\r\n\r\n### 复现操作\r\n\r\n第三方api进行操作，使用DALL-E3模型作图以后，再切换回gpt4进行文字交流，生成空白回复, 报错信息提示有json解析问题\r\n\r\n### 错误日志\r\n\r\n```shell\r\n2023-12-22 20:28:11,609 [INFO] [models.py:39] 正在加载OpenAI模型: GPT4\r\n2023-12-22 20:28:11,609 [INFO] [models.py:138] 模型设置为了： GPT4\r\n2023-12-22 20:28:15,994 [INFO] [base_model.py:528] 用户louise的输入为：你好\r\nJSON解析错误,收到的内容: {\"error\":{\"message\":\"Bad Request\\n (request id: 2023122220303462231090t0qgLNzc)\",\"type\":\"invalid_request_error\",\"param\":\"\",\"code\":2}}\r\nTraceback (most recent call last):\r\n  File \"/www/wwwroot/cc.mio.cm/ChuanhuChatGPT/modules/models/base_model.py\", line 598, in predict\r\n    for chatbot, status_text in iter:\r\n  File \"/www/wwwroot/cc.mio.cm/ChuanhuChatGPT/modules/models/base_model.py\", line 322, in stream_next_chatbot\r\n    for partial_text in stream_iter:\r\n  File \"/www/wwwroot/cc.mio.cm/ChuanhuChatGPT/modules/models/OpenAI.py\", line 46, in get_answer_stream_iter\r\n    for i in iter:\r\n  File \"/www/wwwroot/cc.mio.cm/ChuanhuChatGPT/modules/models/OpenAI.py\", line 222, in _decode_chat_response\r\n    raise Exception(error_msg)\r\nException: {\"error\":{\"message\":\"Bad Request\\n (request id: 2023122220303462231090t0qgLNzc)\",\"type\":\"invalid_request_error\",\"param\":\"\",\"code\":2}}\r\n```\r\n\r\n\r\n### 运行环境\r\n\r\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\r\n\r\n### 帮助解决\r\n\r\n- [ ] 我愿意协助解决！\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "closed",
      "author": "Scolism",
      "author_type": "User",
      "created_at": "2023-12-22T12:41:28Z",
      "updated_at": "2024-01-23T13:42:42Z",
      "closed_at": "2024-01-23T13:42:29Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1011/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1011",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1011",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:24.519289",
      "comments": [
        {
          "author": "Scolism",
          "body": "新版本已解决。",
          "created_at": "2024-01-23T13:42:41Z"
        }
      ]
    },
    {
      "issue_number": 944,
      "title": "[Bug]: 疑似未调用 azure openai api",
      "body": "### 这个bug是否已存在现有issue了？\r\n\r\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\r\n\r\n### 错误表现\r\n\r\n不支持Azure\r\n\r\n### 复现操作\r\n\r\nconfig.json里面填写如下配置：\r\n```\r\n    \"openai_api_type\": \"azure\", \r\n    \"azure_openai_api_key\": \"xxxxxxxx\", \r\n    \"azure_openai_api_base_url\": \"xxxxxxxxxxxxxx.openai.azure.com\",\r\n    \"azure_openai_api_version\": \"2023-07-01-preview\", \r\n    \"azure_deployment_name\": \"gpt-35-turbo-0613\", \r\n    \"azure_embedding_deployment_name\": \"text-embedding-ada-002\", \r\n    \"azure_embedding_model_name\": \"text-embedding-ada-002\", \r\n```\r\n调用的还是openai。\r\n\r\n\r\n查看源代码：\r\n```\r\n# modules/models/base_model.py\r\nclass ModelType(Enum):\r\n    @classmethod\r\n    def get_type(cls, model_name: str):\r\n        model_type = None\r\n        model_name_lower = model_name.lower()\r\n         ....\r\n        elif \"azure\" in model_name_lower or \"api\" in model_name_lower:\r\n            model_type = ModelType.LangchainChat\r\n        return model_type\r\n\r\n# modules/models/models.py\r\ndef get_model() -> BaseLLMModel:\r\n    # ...\r\n    # model_name是没有azure或者api选项的。\r\n    model_type = ModelType.get_type(model_name)\r\n    # ...\r\n    try:\r\n        # ...\r\n        elif model_type == ModelType.LangchainChat:\r\n            from .Azure import Azure_OpenAI_Client\r\n            model = Azure_OpenAI_Client(model_name, user_name=user_name)\r\n        # ...\r\n```\r\n\r\n我尝试手动在`ONLINE_MODELS`中增加 `Azure`选项， 页面运行后报错：\r\n\r\n```shell\r\n2023-11-14 11:53:40,957 [INFO] [base_model.py:457] 用户的输入为：hello?\r\nException in thread Thread-6:\r\nTraceback (most recent call last):\r\n  File \"/usr/lib64/python3.9/threading.py\", line 980, in _bootstrap_inner\r\n    self.run()\r\n  File \"/usr/lib64/python3.9/threading.py\", line 917, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/opt/ChuanhuChatGPT/modules/models/base_model.py\", line 875, in thread_func\r\n    self.model(messages=history, callbacks=[\r\n  File \"/opt/ChuanhuChatGPT/.venv/lib64/python3.9/site-packages/langchain/chat_models/base.py\", line 551, in __call__\r\n    generation = self.generate(\r\n  File \"/opt/ChuanhuChatGPT/.venv/lib64/python3.9/site-packages/langchain/chat_models/base.py\", line 309, in generate\r\n    raise e\r\n  File \"/opt/ChuanhuChatGPT/.venv/lib64/python3.9/site-packages/langchain/chat_models/base.py\", line 299, in generate\r\n    self._generate_with_cache(\r\n  File \"/opt/ChuanhuChatGPT/.venv/lib64/python3.9/site-packages/langchain/chat_models/base.py\", line 446, in _generate_with_cache\r\n    return self._generate(\r\n  File \"/opt/ChuanhuChatGPT/.venv/lib64/python3.9/site-packages/langchain/chat_models/openai.py\", line 333, in _generate\r\n    for chunk in self._stream(\r\n  File \"/opt/ChuanhuChatGPT/.venv/lib64/python3.9/site-packages/langchain/chat_models/openai.py\", line 305, in _stream\r\n    for chunk in self.completion_with_retry(\r\n  File \"/opt/ChuanhuChatGPT/.venv/lib64/python3.9/site-packages/langchain/chat_models/openai.py\", line 272, in completion_with_retry\r\n    retry_decorator = _create_retry_decorator(self, run_manager=run_manager)\r\n  File \"/opt/ChuanhuChatGPT/.venv/lib64/python3.9/site-packages/langchain/chat_models/openai.py\", line 68, in _create_retry_decorator\r\n    openai.error.Timeout,\r\nAttributeError: module 'openai' has no attribute 'error'\r\n```\r\n\r\n\r\n### 运行环境\r\n\r\n- OS:  Rocket Linux 9.2\r\n- Browser:  Chrome\r\n- Gradio version: gradio==3.43.2\r\n- Python version:  3.9.6 \r\n\r\n\r\n### 帮助解决\r\n\r\n- [ ] 我愿意协助解决！\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "open",
      "author": "mingregister",
      "author_type": "User",
      "created_at": "2023-11-14T04:09:33Z",
      "updated_at": "2024-01-22T03:24:56Z",
      "closed_at": null,
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/944/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/944",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/944",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:24.831953",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "emm 主要是我没有Azure，所以很难测试这个…… 待我去搞个Azure账号",
          "created_at": "2023-11-17T06:30:31Z"
        },
        {
          "author": "daidong78",
          "body": "我也发现这个问题",
          "created_at": "2023-11-30T03:18:45Z"
        },
        {
          "author": "vaxin",
          "body": "这个bug修了么？",
          "created_at": "2023-12-22T12:34:26Z"
        },
        {
          "author": "FreedomXD",
          "body": "我在本地解决了，index_func.py中 改成\r\n```\r\nfrom langchain.embeddings import AzureOpenAIEmbeddings, OpenAIEmbeddings\r\n        if os.environ.get(\"OPENAI_API_TYPE\", \"openai\") == \"openai\":\r\n            embeddings = OpenAIEmbeddings(openai_api_base=os.environ.get(\r\n                \"OPENAI_API_BASE\", None), openai_a",
          "created_at": "2024-01-22T03:24:07Z"
        }
      ]
    },
    {
      "issue_number": 1033,
      "title": "[Bug]: 预置prompt有时无效",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n对于预置的prompt，直接选中后，并不起效果；示例如下：\r\n<img width=\"1407\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/120290007/346e3fcd-9fbd-41f2-879c-b488ac353fd1\">\r\n\r\n在prompt栏进行粘贴的部分才有效果：\r\n<img width=\"1430\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/120290007/56974513-5c5a-4d01-b7da-a2706d99e841\">\r\n\r\n必要的文字如下\r\nattorney\r\n你现在是一名优秀的英语老师，我是正在学习英文的学生,我的母语是中文。我给你发送英文单词、短语、句子，请你从一名教师教授学生的角度帮我用汉语进行讲解，包括具体的含义、用法，以及使用示例；如果是单词，需要回复音标\r\n\n\n### 复现操作\n\n拉取最新的代码，部署、运行\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n使用的docker\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "ParkerLyu01",
      "author_type": "User",
      "created_at": "2024-01-15T10:09:41Z",
      "updated_at": "2024-01-21T08:01:37Z",
      "closed_at": "2024-01-21T08:01:37Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1033/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1033",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1033",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:25.029296",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "我调查一下",
          "created_at": "2024-01-21T07:34:27Z"
        }
      ]
    },
    {
      "issue_number": 1037,
      "title": "[功能请求]: 支持以clewd代理方式实现的Claude2 to OpenAI API",
      "body": "### 相关问题\r\n\r\n**clewd** ：是一个反向代理，项目地址为：https://github.com/teralomaniac/clewd\r\n**实现能力**：无需申请Claude2的API，即可实现在三方ChatGPT WEB UI中调用Claude2的能力。\r\n**工作方式**：将网页版Claude2的数据包装为OpenAI的API格式，只需要Claude的账户的Cookie，即可通过clewd构建的反向代理来以OpenAI的API格式调用Claude2。\r\n\r\n**目前问题**\r\n将config.js中的openai_api_base改为clewd的反向代理地址后，发现response解析不正常，需要微调代码。\r\n\r\n同一个请求，OpenAI返回内容为：\r\n`{\r\n  \"id\": \"chatcmpl-8iHxx51gLB61XFc1Khb7b6dErBv5J\",\r\n  \"object\": \"chat.completion\",\r\n  \"created\": 1705566185,\r\n  \"model\": \"gpt-3.5-turbo-0613\",\r\n  \"choices\": [\r\n    {\r\n      \"index\": 0,\r\n      \"message\": {\r\n        \"role\": \"assistant\",\r\n        \"content\": \"Hello! How can I assist you today?\"\r\n      },\r\n      \"logprobs\": null,\r\n      \"finish_reason\": \"stop\"\r\n    }\r\n  ],\r\n  \"usage\": {\r\n    \"prompt_tokens\": 9,\r\n    \"completion_tokens\": 9,\r\n    \"total_tokens\": 18\r\n  },\r\n  \"system_fingerprint\": null\r\n}\r\n`\r\nclewd代理返回的内容为：\r\n`{\"choices\":[{\"message\":{\"content\":\" Hello! My name is Claude. How can I assist you today?\"}}]}`\r\n\r\n以至于目前会报如下出错信息\r\n`...\r\nERROR: {'choices': [{'delta': {'content': ' '}}]}\r\nERROR: {'choices': [{'delta': {'content': 't'}}]}\r\nERROR: {'choices': [{'delta': {'content': 'o'}}]}\r\nERROR: {'choices': [{'delta': {'content': 'd'}}]}\r\nERROR: {'choices': [{'delta': {'content': 'a'}}]}\r\nERROR: {'choices': [{'delta': {'content': 'y'}}]}\r\nERROR: {'choices': [{'delta': {'content': '?'}}]}\r\nJSON解析错误,收到的内容: data: [DONE]\r\n2024-01-18 16:49:05,814 [INFO] [base_model.py:624] 回答为：`\r\n\r\n\r\n### 可能的解决办法\r\n\r\n怀疑返回的json格式只是少了一些字段，做一些异常处理应该可以实现功能。\r\n\r\n### 帮助开发\r\n\r\n- [ ] 我愿意协助开发！\r\n\r\n### 补充说明\r\n\r\n**获取Claude2 Cookie方法**：\r\n1.转到 [Claude.ai](https://claude.ai/chats) - 打开开发人员工具/检查（ctrl + shift + I 或 F12）转到网络/Network选项卡，然后开启一个新聊天页面发送任意对话\r\n2.找到 chat_conversations 然后复制 整个 Cookie: 后的内容，将其中sessionKey项复制出，并按sk-ant-sid01-xxxxx格式保存\r\n\r\n**部署clewd**：\r\n1.安装node.js >= 20.4.0\r\n2.git clone https://github.com/teralomaniac/clewd.git\r\n3.执行start.sh\r\n4.在生成的config.js中的Cookie字段写入sk-ant-sid01-xxxxx的sessionKey\r\n5.重新执行start.sh\r\n\r\n使用反向代理http://127.0.0.1:8444/v1地址，替代https://api.openai.com/v1",
      "state": "open",
      "author": "ramblezhang",
      "author_type": "User",
      "created_at": "2024-01-18T10:56:11Z",
      "updated_at": "2024-01-18T11:02:25Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1037/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1037",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1037",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:25.180040",
      "comments": []
    },
    {
      "issue_number": 1036,
      "title": "[Bug]: token相关问题",
      "body": "### 这个bug是否已存在现有issue了？\r\n\r\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\r\n\r\n### 错误表现\r\n\r\n1.在当前对话中切换模型，导致all_token_count被清空，使得实际history已经超过token limit，但是仍然会发送。\r\n2.在重新载入对话，及新客户端登录，切换用户时，载入了history但是不会重新计算当前对话的token，导致同上问题。\r\n\r\n### 复现操作\r\n\r\n同上\r\n\r\n### 错误日志\r\n\r\n_No response_\r\n\r\n### 运行环境\r\n\r\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\r\n\r\n### 帮助解决\r\n\r\n- [X] 我愿意协助解决！\r\n\r\n### 补充说明\r\n\r\n我对于all_token_count有一些疑问，在切换对话时，all_token_count貌似是会在对话间转移，在保持会话的情况下不同的对话都会添加到里面。是否应该将all_token_count改为储存当前对话的所有token，并在切换对话、重新载入对话时重新计算历史token，切换模型时继承all_token_count。\r\n\r\n如果可以的话我可以提交一个PR来修改",
      "state": "open",
      "author": "tusik",
      "author_type": "User",
      "created_at": "2024-01-17T03:05:58Z",
      "updated_at": "2024-01-17T03:06:53Z",
      "closed_at": null,
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1036/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1036",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1036",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:25.180076",
      "comments": []
    },
    {
      "issue_number": 964,
      "title": "[功能请求]:或者说疑问，关于本地部署gradio外链的问题 ",
      "body": "### 相关问题\n\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/72657813/53955909-c7cc-4e31-b8d3-1c6693463962)\r\n在云服务器上部署的，但是有点奇怪\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/72657813/2dd7f88b-c7d2-455b-9ee3-e1f42258ed69)\r\n以前这一项我从来都不打开，但是可以外链，直接用IP：7860就能进入。现在不行了，生成了一个gradio外链，但是说是会72小时过期，让我自己去抱脸上部署一个\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/72657813/66ea3457-d05f-43c0-abca-9053d7e53b9a)\r\n\n\n### 可能的解决办法\n\n想请问一下，以前没生成gradio外链的时候是怎么进行连接的。现在必须按GPT说的那种自己弄一个gradio库么？\r\n\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "yaya6630170",
      "author_type": "User",
      "created_at": "2023-11-28T08:49:24Z",
      "updated_at": "2024-01-15T12:31:41Z",
      "closed_at": "2024-01-15T12:31:41Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/964/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/964",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/964",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:25.180083",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "1. IP+端口的方式如果以前能用，现在也应该能用才对，这方面没有什么改动。\r\n2. Gradio链接确实会过期，因为它提供了免费的frp服务。部署到Huggingface意味着不需要自己的服务器了。",
          "created_at": "2023-11-28T08:53:25Z"
        },
        {
          "author": "yaya6630170",
          "body": "> 1. IP+端口的方式如果以前能用，现在也应该能用才对，这方面没有什么改动。\r\n> 2. Gradio链接确实会过期，因为它提供了免费的frp服务。部署到Huggingface意味着不需要自己的服务器了。\n\r\n请教一下，我share那行注释掉的，为啥会自动用gradio生成外链啊\r\n",
          "created_at": "2023-11-28T12:18:07Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "那就不应该哇，你看看是不是编辑器没保存更改什么的",
          "created_at": "2023-11-29T03:54:16Z"
        }
      ]
    },
    {
      "issue_number": 963,
      "title": "如何只通过api_key和base_url来添加新模型[功能请求]: ",
      "body": "### 相关问题\n\n本地训练了一个模型chatglm模型，以api的形式部署在局域网的端口上，格式如下：\r\nfrom openai import OpenAI\r\nclient = OpenAI(\r\napi_key=\"****\",\r\nbase_url=\"http://127.0.0.1:9679/deploy/\",\r\n)\r\n# Chat completion API\r\nchat_completion = client.chat.completions.create(\r\nmessages=[\r\n{\r\n\"role\": \"user\",\r\n\"content\": \"你好\",\r\n}\r\n],\r\nmodel=\"chatglm3-6b-32k\",\r\n)\r\n这种情况下能添加模型么\n\n### 可能的解决办法\n\nqaq\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Yannliu59",
      "author_type": "User",
      "created_at": "2023-11-24T05:09:09Z",
      "updated_at": "2024-01-15T12:30:11Z",
      "closed_at": "2024-01-15T12:30:11Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/963/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/963",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/963",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:25.346988",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "在config里把OpenAI API Base修改一下就行了。",
          "created_at": "2023-11-24T05:10:21Z"
        }
      ]
    },
    {
      "issue_number": 1023,
      "title": "[Bug]: docker方式部署，除可发送消息、选择模型进行对话，其他所有按钮点击后无任何反应。——一种可能的解决方式：在Cloudflare中，“速度”→“优化”→“内容优化”→将Rocket Loader™选项关闭。",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n通过服务器部署后，网页除了可以发送消息，其他所有按钮点击无反应。见下图红框：\r\n![2024-01-05_164547](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/49544089/d01eec43-891b-4cee-bb28-dccda16e8a23)\r\n\n\n### 复现操作\n\n1. 正常完成服务器部署；\r\n2. 正常配置Base Url、API Key；\r\n3. 网页除了可以发送消息，其他所有按钮（见图）点击无反应；\r\n4. 手机端登录网页后，除按钮点击无反应外，输入框也无显示，只能查看到对话记录；\r\n5. 已尝试：按照“常见问题”文档，进行依赖安装、升级，重新通过服务器docker部署等方案，无法解决此问题。\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: Ubuntu 22.04\r\n- Browser: Chrome、Safari\r\n- Gradio version: 3.43.2\r\n- Python version: 3.10.12\r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "C-Dragon8",
      "author_type": "User",
      "created_at": "2024-01-05T08:54:52Z",
      "updated_at": "2024-01-15T12:27:46Z",
      "closed_at": "2024-01-15T12:27:46Z",
      "labels": [
        "invalid",
        "question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 22,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1023/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1023",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1023",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:25.490108",
      "comments": []
    },
    {
      "issue_number": 1014,
      "title": "[Bug]: 更新后台提示成功，但实际没成功",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n后台提示更新成功，重启应用后没有更新成功\n\n### 复现操作\n\n登录系统，提示有更新，点击更新\r\n前台一直等待，没有任何提示\r\n后台输出更新成功，需要重启\r\n重启后依旧提示需要更新，实际版本也没有变化\n\n### 错误日志\n\n```shell\nDec 25 11:08:40 iZwz9i4r54fzph8zcnclp9Z python[81770]: 2023-12-25 11:08:40,694 [INFO] [utils.py:698] Successfully updated, restart needed\r\nDec 25 11:09:13 iZwz9i4r54fzph8zcnclp9Z systemd[1]: Stopping chuanhuchat.service - ChuanhuChatGPT service...\r\nDec 25 11:09:13 iZwz9i4r54fzph8zcnclp9Z systemd[1]: chuanhuchat.service: Deactivated successfully.\r\nDec 25 11:09:13 iZwz9i4r54fzph8zcnclp9Z systemd[1]: Stopped chuanhuchat.service - ChuanhuChatGPT service.\r\nDec 25 11:09:13 iZwz9i4r54fzph8zcnclp9Z systemd[1]: chuanhuchat.service: Consumed 6.629s CPU time.\r\nDec 25 11:09:13 iZwz9i4r54fzph8zcnclp9Z systemd[1]: Started chuanhuchat.service - ChuanhuChatGPT service.\n```\n\n\n### 运行环境\n\nPython: 3.11.2  •  Gradio: 3.43.2  •  ChuanhuChat: 20231215\r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "skystary",
      "author_type": "User",
      "created_at": "2023-12-25T03:22:09Z",
      "updated_at": "2024-01-15T08:15:08Z",
      "closed_at": "2024-01-15T08:15:07Z",
      "labels": [
        "bug",
        "📌 confirmed"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1014/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1014",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1014",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:25.490132",
      "comments": []
    },
    {
      "issue_number": 961,
      "title": "[其他]: 提问后，回答总是显示error",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 错误描述\n\n提问后，回答总是显示error\r\n报错如下：\r\nException ignored in: <generator object OpenAIClient._decode_chat_response at 0x7f6941a0f2e0>\r\nTraceback (most recent call last):\r\n  File \"/usr/local/anaconda3/lib/python3.11/site-packages/anyio/_backends/_asyncio.py\", line 802, in run\r\n    context, func, args, future = item\r\n                   ^^^^\r\nRuntimeError: generator ignored GeneratorExit\n\n### 复现操作\n\n正常提问，连续提问3-4此后会出现这个情况\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n(或您的其他运行环境信息)\r\n\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "baiyi-os",
      "author_type": "User",
      "created_at": "2023-11-22T09:35:04Z",
      "updated_at": "2024-01-11T06:12:17Z",
      "closed_at": null,
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/961/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/961",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/961",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:25.490140",
      "comments": [
        {
          "author": "baiyi-os",
          "body": "帮忙看下这个问题",
          "created_at": "2023-12-01T05:55:22Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "无法复现这个问题。请补充更多信息。",
          "created_at": "2023-12-04T06:15:39Z"
        },
        {
          "author": "baiyi-os",
          "body": "目前发现只有在模型切换到GPT4 Turbo时才会出现\r\n这是在服务端看到的日志：\r\nERROR: {'id': 'chatcmpl-8T1RojF1zGZRKd3AjIqiXfgDOM8Uw', 'object': 'chat.completion.chunk', 'created': 1701927768, 'model': 'gpt-4-1106-preview', 'system_fingerprint': 'fp_a24b4d720c', 'choices': [{'index': 0, 'delta': {'content': 'host'}, 'finish_reason': N",
          "created_at": "2023-12-07T06:04:43Z"
        },
        {
          "author": "XudongLiu",
          "body": "我有时也发现这个问题，可能是接口不稳定，不知道您是不是在多轮问答后才出现的这个问题 @baiyi-os ",
          "created_at": "2024-01-11T02:27:30Z"
        },
        {
          "author": "baiyi-os",
          "body": "我是多轮回答后会出现这个问题\r\n目前两种情况，一种是nginx导致的，其实在服务端已经看到了完整的答案，但是通过nginx显示不完全，并且页面右上角显示error\r\n第二种就是服务端报错导致的\r\n对于第一种不知道有没有配置优化的方法，我当初是按照教程中的nginx配置的",
          "created_at": "2024-01-11T06:12:16Z"
        }
      ]
    },
    {
      "issue_number": 1027,
      "title": "[本地部署]: 好象不支持本地部署llama.cpp了？",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n无法连接到本地rest接口上。\n\n### 复现操作\n\n本机运行llama.cpp提供rest api。\r\n例如，运行在127.0.0.1，端口8080\r\n\r\nconfig文件中配置了 \"openai_api_base\": \"http://127.0.0.1:8080\",\r\n运行后，无法正确连接到rest接口。\n\n### 错误日志\n\n```shell\nsocket.gaierror: [Errno -2] Name or service not known\n```\n\n\n### 运行环境\n\n```markdown\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version:\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "KylixC",
      "author_type": "User",
      "created_at": "2024-01-09T12:59:16Z",
      "updated_at": "2024-01-09T12:59:16Z",
      "closed_at": null,
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1027/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1027",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1027",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:25.678058",
      "comments": []
    },
    {
      "issue_number": 1020,
      "title": "[Bug]: Chrome 在模型选择框旁边显示密码提示框",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/6214067/34023c31-664f-4eef-9f6e-175de0adf7fe)\r\n\r\n这个密码提示框不应该出现，比较阻挡视线。。\n\n### 复现操作\n\n1. 把 chuanhuchat配置成需要用户名密码的模式\r\n2. 使用用户名密码登陆，使用 chrome 保存用户名密码\r\n3. 点击模型选择框，弹出密码提示框\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: Ubuntu 18.04\r\n- Browser: Chrome Version 120.0.6099.109\r\n- Gradio version: 3.43.2\r\n- Python version: 3.9.17\r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "stingshen",
      "author_type": "User",
      "created_at": "2024-01-04T03:37:29Z",
      "updated_at": "2024-01-06T04:04:21Z",
      "closed_at": "2024-01-06T04:04:21Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1020/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1020",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1020",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:25.678083",
      "comments": [
        {
          "author": "astorm-z",
          "body": "+1\r\n",
          "created_at": "2024-01-04T09:49:44Z"
        }
      ]
    },
    {
      "issue_number": 198,
      "title": "[token计算错误] 项目中计算token的算法是错误的，可能导致错误的请求！",
      "body": "## **我浏览源码时候发现了一些错误，因为不太清楚本项目的contribute规则，因此直接给一个issue希望开发者迅速push！**\r\n\r\n### 错误描述\r\n**当前的 token 统计算法是错误的，下方是一个最基本的用户消息格式 。**\r\n> **_prompt = \"这是一次测试\"\r\nmessages = [{\"role\": \"user\", \"content\": prompt}]_**\r\n\r\n**当前的算法采用了 openai 开源的分词库 tiktoken，但是只统计了 prompt 的 token 数量，但是实际上的计算方法应该统计**\r\n > _**message = \"role: user, content: 这是一次测试！\"**_ \r\n\r\n### 问题源码\r\n**我摘出了其中的部分代码**\r\n> _主要在 utill.py 文件中_\r\n```\r\ndef count_token(input_str):\r\n    encoding = tiktoken.get_encoding(\"cl100k_base\")\r\n    length = len(encoding.encode(input_str))\r\n    return length\r\n\r\nuser_token_count = 0\r\nif len(all_token_counts) == 0:\r\n    system_prompt_token_count = count_token(system_prompt)\r\n    user_token_count = count_token(inputs) + system_prompt_token_count\r\nelse:\r\n    user_token_count = count_token(inputs)\r\nall_token_counts.append(user_token_count)\r\n```\r\n**目前的统计算法是不准确的**\r\n\r\n### 实验结果\r\n_**一、官方API**_\r\n```\r\nopenai.api_key = api_key\r\nmessages = [{\"role\": \"user\", \"content\": \"这是一次测试！\"}]\r\nprompt = \"You are a helpful assistant.\"\r\nmessages.insert(0, {\"role\": \"system\", \"content\": prompt})\r\nresponse = openai.ChatCompletion.create(model=\"gpt-3.5-turbo\",\r\n                                        messages=messages,\r\n                                        n=1,)\r\n\r\nprint(response.usage)\r\n\r\n\"\"\"\r\n{\r\n  \"completion_tokens\": 24,\r\n  \"prompt_tokens\": 24,\r\n  \"total_tokens\": 48\r\n}\r\n\"\"\"\r\n```\r\n**_二、POST方法_**\r\n```\r\nmessages = [{\"role\": \"user\", \"content\": \"这是一次测试！\"}] \r\n# messages = []\r\nprompt = \"You are a helpful assistant.\"\r\nmessages.insert(0, {\"role\": \"system\", \"content\": prompt})\r\npayload = {\r\n    \"model\": \"gpt-3.5-turbo\",\r\n    \"messages\": messages,\r\n    \"temperature\": 1,\r\n    \"top_p\": 1,\r\n    \"n\": 1,\r\n    \"stream\": False,\r\n    \"presence_penalty\": 0,\r\n    \"frequency_penalty\": 0,\r\n}\r\nheaders = {\r\n    \"Content-Type\": \"application/json\",\r\n    \"Authorization\": f\"Bearer {api_key}\"\r\n}\r\nproxies = {\r\n    \"http\": f\"http://127.0.0.1:{7890}\",\r\n    \"https\": f\"http://127.0.0.1:{7890}\"\r\n}\r\napi_url = \"https://api.openai.com/v1/chat/completions\"\r\nresponse = requests.post(api_url,\r\n                        json=payload,\r\n                        headers=headers,\r\n                        timeout=200,\r\n                        proxies=proxies,\r\n                        stream=True,)\r\n\r\nresponse = json.loads(response.text)\r\nop(response[\"usage\"])\r\n\r\n\"\"\"\r\n{'completion_tokens': 19, 'prompt_tokens': 24, 'total_tokens': 43}\r\n\"\"\"\r\n```\r\n**我们可以看到实际给出的 prompt_tokens 数是 24**\r\n\r\n**此时使用目前的算法是不准确的，一定是偏小的，这可能导致 request 错误**\r\n```\r\nprint(len(tokenizer.encode(\"You are a helpful assistant.\"))+len(tokenizer.encode(\"这是一次测试！\")))\r\n\r\n# Output: 12\r\n```\r\n\r\n**而使用新算法是准确的，但是考虑到 openai 可能会改变分词策略，建议给请求输入 token 数量计算加上一个 gap 值大概 2^3，适当估大当前的 token 数量，防止超过 4096，最后通过请求返回结果的 total_tokens 矫正**\r\n```\r\ntokenizer = tiktoken.get_encoding(\"cl100k_base\")\r\nprompt = \"role: system, content: You are a helpful assistant.role: user, content: 这是一次测试！\"\r\nprint(len(tokenizer.encode(prompt)))\r\n# Output: 24\r\n```\r\n\r\n### **解决方案**\r\n```\r\nmodel = \"gpt-3.5-turbo\"\r\ntry:\r\n    tokenizer = tiktoken.encoding_for_model(model)\r\nexcept KeyError:\r\n    tokenizer = tiktoken.get_encoding(\"cl100k_base\")\r\nmessage = \"\".join([f\"role: {msg['role']}, content: {msg['content']}\" for msg in messages])\r\nlenght = len(self.tokenizer.encode(message)\r\n\r\n\r\n# 或许可用的 function\r\ndef system_messages(self):\r\n    setflag = False\r\n    if not self.messages:\r\n        setflag = True\r\n    else:\r\n        for message in self.messages:\r\n            if message[\"role\"] != \"system\":\r\n                setflag = True\r\n            else:\r\n                setflag = False\r\n                break\r\n    if setflag:\r\n        if self.trend == \"general\":\r\n            prompt = \"You are a helpful assistant.\"\r\n            self.messages.insert(0, {\"role\": \"system\", \"content\": prompt})\r\n            self.token_current += (len(self.tokenizer.encode(prompt)) + self.token_gaps)\r\n            self.token_usage = {\"completion_tokens\": 0,\r\n                                \"prompt_tokens\": (len(self.tokenizer.encode(prompt)) + self.token_gaps), \r\n                                \"total_tokens\": (len(self.tokenizer.encode(prompt)) + self.token_gaps)}\r\n            self.token_nums.insert(0, self.token_usage.copy())\r\n        elif self.trend == \"poet\":\r\n            prompt = \"You are ChatGPT, a large language model trained by OpenAI. You can generate poems based on the user's input. You can write poems in different styles and formats, such as haiku, sonnet, free verse, etc. You are creative, expressive, and poetic.\"\r\n            self.messages.insert(0, {\"role\": \"system\", \"content\": prompt})\r\n            self.token_current += (len(self.tokenizer.encode(prompt)) + self.token_gaps)\r\n            self.token_usage = {\"completion_tokens\": 0,\r\n                                \"prompt_tokens\": (len(self.tokenizer.encode(prompt)) + self.token_gaps), \r\n                                \"total_tokens\": (len(self.tokenizer.encode(prompt)) + self.token_gaps)}\r\n            self.token_nums.insert(0, self.token_usage.copy())\r\n        elif self.trend == \"tutor\":\r\n            prompt = \"You are ChatGPT, a large language model trained by OpenAI. You can follow instructions given by the user. You can perform various tasks such as arithmetic calculations, text manipulation, web search, etc. You are smart, efficient, and reliable.\"\r\n            self.messages.insert(0, {\"role\": \"system\", \"content\": prompt})\r\n            self.token_current += (len(self.tokenizer.encode(prompt)) + self.token_gaps)\r\n            self.token_usage = {\"completion_tokens\": 0,\r\n                                \"prompt_tokens\": (len(self.tokenizer.encode(prompt)) + self.token_gaps), \r\n                                \"total_tokens\": (len(self.tokenizer.encode(prompt)) + self.token_gaps)}\r\n            self.token_nums.insert(0, self.token_usage.copy())\r\n\r\ndef control_messages(self,\r\n                     role=None,\r\n                     content=None,\r\n                     usage=None,\r\n                     mode=None): \r\n    if mode == \"message\":\r\n        if role == \"user\":\r\n            self.messages.append({\"role\": \"user\", \"content\": content})\r\n            self.token_current += (len(self.tokenizer.encode(content)) + self.token_gaps)\r\n        elif role == \"assistant\":\r\n            self.messages.append({\"role\": \"assistant\", \"content\": content})\r\n            self.token_current += (len(self.tokenizer.encode(content)) + self.token_gaps)\r\n    elif mode == \"decrease\":\r\n        for _ in range(1+self.n):\r\n            self.messages.pop(1)\r\n        self.token_current -= (self.token_nums.pop(1)[\"total_tokens\"] - self.token_gaps)\r\n    elif mode == \"increase\":\r\n        self.token_nums.append({\"completion_tokens\": usage[\"completion_tokens\"],\r\n                                \"prompt_tokens\": usage[\"prompt_tokens\"] - self.token_usage[\"total_tokens\"], \r\n                                \"total_tokens\": usage[\"total_tokens\"] - self.token_usage[\"total_tokens\"]})\r\n        self.token_usage[\"completion_tokens\"] = usage[\"completion_tokens\"]\r\n        self.token_usage[\"prompt_tokens\"] = usage[\"prompt_tokens\"]\r\n        self.token_usage[\"total_tokens\"] = usage[\"total_tokens\"]\r\n        self.token_current = usage[\"total_tokens\"]\r\n        \r\n```",
      "state": "closed",
      "author": "RedHeartSecretMan",
      "author_type": "User",
      "created_at": "2023-03-18T08:54:40Z",
      "updated_at": "2024-01-04T07:02:08Z",
      "closed_at": "2023-03-18T11:38:40Z",
      "labels": [
        "bug",
        "🚀 enhancement"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/198/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/198",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/198",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:25.909128",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "感谢您的关注！关于contribution，您可以拉取main分支代码并在修正后直接向main分支提交pull request。",
          "created_at": "2023-03-18T09:06:38Z"
        },
        {
          "author": "RedHeartSecretMan",
          "body": "好的",
          "created_at": "2023-03-18T09:27:14Z"
        },
        {
          "author": "SiinXu",
          "body": "我想问一个 token 计算问题，input tokens 计算的时候，每一轮对话都会把初始的 prompt tokens 算在里边吗？",
          "created_at": "2024-01-04T06:08:45Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "> 我想问一个 token 计算问题，input tokens 计算的时候，每一轮对话都会把初始的 prompt tokens 算在里边吗？\r\n\r\n是的。每一次对话的token消耗量为此前所有轮次+新轮次消耗的token量之和。",
          "created_at": "2024-01-04T07:02:08Z"
        }
      ]
    },
    {
      "issue_number": 1001,
      "title": "[其他]: 川虎助手问题",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 错误描述\n\n提示：1 validation error for Tool args_schema subclass of BaseModel expected (type=type_error.subclass; expected_class=BaseModel)\r\n\r\nPS：依赖都装完了，切换到川虎助手pro，又提示要安装numexpr（不知道是不是依赖写漏了）\r\n\r\nPPS：部署安装依赖的时候遇到大量问题，始终解决不了，最后使用了虚拟环境才成功，但是虚拟环境又无法直接在配置中直接指定外服务器和端口，所以是修改了启动文件（还好有OpenAI帮忙）\n\n### 复现操作\n\n打开网页，切换模型为川虎助理，直接报错\n\n### 错误日志\n\n```shell\n/home/ecs-user/ChuanhuChatGPT/myenv/lib/python3.11/site-packages/langchain/__init__.py:34: UserWarning: Importing PromptTemplate from langchain root module is no longer supported. Please use langchain.prompts.PromptTemplate instead.\r\n  warnings.warn(\r\n/home/ecs-user/ChuanhuChatGPT/myenv/lib/python3.11/site-packages/langchain/__init__.py:34: UserWarning: Importing LLMChain from langchain root module is no longer supported. Please use langchain.chains.LLMChain instead.\r\n  warnings.warn(\r\nTraceback (most recent call last):\r\n  File \"/home/ecs-user/ChuanhuChatGPT/modules/models/models.py\", line 104, in get_model\r\n    model = ChuanhuAgent_Client(model_name, access_key, user_name=user_name)\r\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/ecs-user/ChuanhuChatGPT/modules/models/ChuanhuAgent.py\", line 86, in __init__\r\n    Tool.from_function(\r\n  File \"/home/ecs-user/ChuanhuChatGPT/myenv/lib/python3.11/site-packages/langchain_core/tools.py\", line 570, in from_function\r\n    return cls(\r\n           ^^^^\r\n  File \"/home/ecs-user/ChuanhuChatGPT/myenv/lib/python3.11/site-packages/langchain_core/tools.py\", line 550, in __init__\r\n    super(Tool, self).__init__(\r\n  File \"/home/ecs-user/ChuanhuChatGPT/myenv/lib/python3.11/site-packages/langchain_core/load/serializable.py\", line 97, in __init__\r\n    super().__init__(**kwargs)\r\n  File \"/home/ecs-user/ChuanhuChatGPT/myenv/lib/python3.11/site-packages/pydantic/v1/main.py\", line 341, in __init__\r\n    raise validation_error\r\npydantic.v1.error_wrappers.ValidationError: 1 validation error for Tool\r\nargs_schema\r\n  subclass of BaseModel expected (type=type_error.subclass; expected_class=BaseModel)\n```\n\n\n### 运行环境\n\nPython: 3.11.2  •  Gradio: 3.43.2  •  ChuanhuChat: [20231215]\r\nOS: Windows11 22H2  •  Browser: Firefox\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "skystary",
      "author_type": "User",
      "created_at": "2023-12-20T10:52:41Z",
      "updated_at": "2024-01-02T03:45:48Z",
      "closed_at": "2024-01-02T03:45:48Z",
      "labels": [
        "bug",
        "question",
        "📌 confirmed"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1001/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1001",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1001",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:26.120191",
      "comments": [
        {
          "author": "Alwzc",
          "body": "我也遇到了这个问题，你是怎么解决的",
          "created_at": "2023-12-21T06:55:27Z"
        },
        {
          "author": "astorm-z",
          "body": "+1",
          "created_at": "2023-12-25T06:18:16Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "确实有问题，正在修复～",
          "created_at": "2023-12-25T06:19:10Z"
        },
        {
          "author": "pengtb",
          "body": "[here](https://github.com/langchain-ai/langchain/issues/5974#issuecomment-1793656335) it is.",
          "created_at": "2023-12-27T09:30:55Z"
        }
      ]
    },
    {
      "issue_number": 1012,
      "title": "[本地部署]: 提示__init__() got an unexpected keyword argument 'proxy_ssl_context'",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n更新了之后无法运行，提示：TypeError: __init__() got an unexpected keyword argument 'proxy_ssl_context'。请帮忙瞧瞧是什么问题。\n\n### 复现操作\n\n运行了run_Linux.sh，进行了更新。\n\n### 错误日志\n\n```shell\n2023-12-24 06:57:40,924 [INFO] [utils.py:160] NumExpr defaulting to 1 threads.\r\n2023-12-24 06:57:41,864 [INFO] [config.py:297] 默认模型设置为了：GPT4\r\nTraceback (most recent call last):\r\n  File \"/usr/local/ChuanhuChatGPT/ChuanhuChatbot.py\", line 9, in <module>\r\n    from modules.train_func import *\r\n  File \"/usr/local/ChuanhuChatGPT/modules/train_func.py\", line 7, in <module>\r\n    client = OpenAI(api_key=os.getenv(\"OPENAI_API_KEY\"))\r\n  File \"/usr/local/lib/python3.9/site-packages/openai/_client.py\", line 107, in __init__\r\n    super().__init__(\r\n  File \"/usr/local/lib/python3.9/site-packages/openai/_base_client.py\", line 760, in __init__\r\n    self._client = http_client or httpx.Client(\r\n  File \"/usr/local/lib/python3.9/site-packages/httpx/_client.py\", line 682, in __init__\r\n    self._mounts: typing.Dict[URLPattern, typing.Optional[BaseTransport]] = {\r\n  File \"/usr/local/lib/python3.9/site-packages/httpx/_client.py\", line 685, in <dictcomp>\r\n    else self._init_proxy_transport(\r\n  File \"/usr/local/lib/python3.9/site-packages/httpx/_client.py\", line 739, in _init_proxy_transport\r\n    return HTTPTransport(\r\n  File \"/usr/local/lib/python3.9/site-packages/httpx/_transports/default.py\", line 149, in __init__\r\n    self._pool = httpcore.HTTPProxy(\r\nTypeError: __init__() got an unexpected keyword argument 'proxy_ssl_context'\n```\n\n\n### 运行环境\n\n```markdown\n- OS: CentOS 9\r\n- Browser:Chrome\r\n- Gradio version: 3.43.2\r\n- Python version: python3.9\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "yzAnwen",
      "author_type": "User",
      "created_at": "2023-12-23T23:09:31Z",
      "updated_at": "2023-12-29T08:29:19Z",
      "closed_at": null,
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1012/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1012",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1012",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:26.300427",
      "comments": [
        {
          "author": "mension",
          "body": "httpx 包版本，你换成最新的\r\n",
          "created_at": "2023-12-28T02:51:50Z"
        },
        {
          "author": "mension",
          "body": "@GaiZhenbiao 大佬瞅一下，换成最新包，其他环境会不会有影响，我的mac 用clash做proxy，换成最新包是ok的",
          "created_at": "2023-12-28T03:19:00Z"
        },
        {
          "author": "mension",
          "body": "[HTTPProxy.__init__() got an unexpected keyword argument 'proxy_ssl_context' #2893](https://github.com/encode/httpx/discussions/2893) ",
          "created_at": "2023-12-28T07:12:40Z"
        },
        {
          "author": "yzAnwen",
          "body": "pip3 install --upgrade httpx 就解决了。感谢！",
          "created_at": "2023-12-29T08:28:43Z"
        }
      ]
    },
    {
      "issue_number": 1016,
      "title": "[远程部署]: WebSocket connection to 'wss://test.com/queue/join' failed:",
      "body": "### 是否已存在现有反馈与解答？\r\n\r\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\r\n\r\n### 是否是一个代理配置相关的疑问？\r\n\r\n- [X] 我确认这不是一个代理配置相关的疑问。\r\n\r\n### 错误描述\r\n\r\n远程服务器`docker`或本地源码部署，通过`nginx`反向代理(`SSL`)，网页可以打开，但是`websocket`连接失败，已按`README`配置了`WebSocket` 代理的。\r\n另外：直接通过远程服务器`ip`+端口访问是正常运行的。\r\n对应的`WSS`请求头：\r\n```\r\nPragma:\r\nno-cache\r\nSec-Websocket-Extensions:\r\npermessage-deflate; client_max_window_bits\r\nSec-Websocket-Key:\r\nFku812mKjqwGYP35AbrsEw==\r\nSec-Websocket-Version:\r\n13\r\nUpgrade:\r\nwebsocket\r\n```\r\n\r\n看过相关的`issue`，不过未能解决问题。\r\n\r\n### 复现操作\r\n\r\n1. 正常完成本地部署；\r\n2. 正常配置了`openai`的`key`及地址；\r\n3. 没有开启服务器代理；\r\n4. 没有配置用户名和密码；\r\n5.  配置了`Nginx`反向代理；\r\n\r\n### 错误日志\r\n\r\n```shell\r\n终端没有报错。\r\n\r\n2023-12-26 15:29:37,572 [INFO] [config.py:297] 默认模型设置为了：GPT3.5 Turbo\r\nRunning on local URL:  http://0.0.0.0:7860\r\nTo create a public link, set `share=True` in `launch()`.\r\n```\r\n网页端`ws`报错：\r\n```\r\nError\r\nConnection errored out.\r\n```\r\n```\r\n\r\n\r\n### 运行环境\r\n\r\n- OS: Ubuntu 22.04.1 LTS \r\n- Server: 20231223\r\n- Gradio version: 3.43.2\r\n- Python version: 3.9.18\r\n- Nginx version: openresty/1.21.4.2\r\n",
      "state": "closed",
      "author": "zmingchun",
      "author_type": "User",
      "created_at": "2023-12-26T08:28:37Z",
      "updated_at": "2023-12-27T06:37:34Z",
      "closed_at": "2023-12-27T06:35:46Z",
      "labels": [
        "question",
        "server deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1016/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1016",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1016",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:26.492966",
      "comments": [
        {
          "author": "zmingchun",
          "body": "![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/1988270/75a5321a-614f-46e4-8341-b2e989c5898b)\r\n问题已自行解决，域名DNS是用cloudflare的，在网络那里有个配置，是否允许ws连接的。开启允许即可。",
          "created_at": "2023-12-27T06:35:46Z"
        }
      ]
    },
    {
      "issue_number": 971,
      "title": "[其他]: 使用Qwen-1_8B-Chat模型加载出错",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 错误描述\n\n服务器部署正常，使用Chatglm2-6b-int4正常，但使用Qwen-1_8B-Chat模型加载出错\n\n### 复现操作\n\n正常完成了服务器部署\r\n使用Chatglm2-6b-int4正常\r\n换成Qwen-1_8B-Chat模型加载出错\n\n### 错误日志\n\n```shell\nTraceback (most recent call last):\r\n  File \"D:\\ChatGPT\\ChuanhuChatGPT\\modules\\models\\models.py\", line 128, in get_model\r\n    model = Qwen_Client(model_name, user_name=user_name)\r\n  File \"D:\\ChatGPT\\ChuanhuChatGPT\\modules\\models\\Qwen.py\", line 12, in __init__\r\n    self.tokenizer = AutoTokenizer.from_pretrained(MODEL_METADATA[model_name][\"repo_id\"], trust_remote_code=True, resume_download=True)\r\nKeyError: 'Qwen-1_8B-Chat'\n```\n\n\n### 运行环境\n\n- OS: Windows 10 22H2\r\n- Browser: Microsoft EDGE 119\r\n- Gradio version: \r\n- Python version: 3.10.11\r\n(或您的其他运行环境信息)\r\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Sooloom",
      "author_type": "User",
      "created_at": "2023-12-05T05:53:37Z",
      "updated_at": "2023-12-25T08:23:27Z",
      "closed_at": "2023-12-25T08:23:27Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/971/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/971",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/971",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:26.641086",
      "comments": [
        {
          "author": "windark998",
          "body": "同样咨询该问题。加载 Qwen-14B-Chat-Int4模型时，始终提示keyerror错误。presets路径、configure.py和json都做了修改依旧无效。\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\Administrator\\ChuanhuChatGPT\\modules\\models\\models.py\", line 132, in get_model\r\n    model = Qwen_Client(model_name, user_name=user_name)\r\n  File \"C:\\Users\\Admin",
          "created_at": "2023-12-24T06:05:44Z"
        }
      ]
    },
    {
      "issue_number": 929,
      "title": "[功能请求]: 1.新增对ChatGLM3-6B的支持  2.同步更新对GPT支持",
      "body": "### 相关问题\n\n两个主要诉求：\r\n1.接入ChatGLM3-6B  \r\n2.同步更新GPT支持\n\n### 可能的解决办法\n\n1.我认为国内本地模型目前表现最好，最有希望的是GLM系列。是较为值得持续更新的。\r\n2.GPT新版本的支持\r\n这两个事务是否有开发计划？\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "rutther",
      "author_type": "User",
      "created_at": "2023-11-07T11:52:19Z",
      "updated_at": "2023-12-22T10:45:12Z",
      "closed_at": "2023-12-22T10:45:12Z",
      "labels": [
        "feature request",
        "🤖 model"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/929/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/929",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/929",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:26.839305",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "Resolved via 2c3fb9f62d2a92634cf8408564220a64249b7a3b and other commits...",
          "created_at": "2023-12-22T10:45:12Z"
        }
      ]
    },
    {
      "issue_number": 890,
      "title": "[功能请求]: 可以同步一下hugging face的space到最新版本吗",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n可以同步一下hugging face的space到最新版本吗，谢谢\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "zmcmcc",
      "author_type": "User",
      "created_at": "2023-09-17T08:21:38Z",
      "updated_at": "2023-12-22T10:43:11Z",
      "closed_at": "2023-12-22T10:43:11Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/890/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "GaiZhenbiao"
      ],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/890",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/890",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:27.019015",
      "comments": []
    },
    {
      "issue_number": 1008,
      "title": "[Bug]: 日志打印中的Token 计数是否不全，观察只有几千以上的Token计数记录，没有小的会话记录，感谢",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\nlog中查看基本都是此类日志\r\n2023-12-21 11:15:04,475 [INFO] [base_model.py:506] Token 计数: 3512，本次对话累计消耗了 14560 tokens\r\n2023-12-21 13:28:12,784 [INFO] [base_model.py:506] Token 计数: 3298，本次对话累计消耗了 18419 tokens\r\n2023-12-21 14:15:59,797 [INFO] [base_model.py:506] Token 计数: 3415，本次对话累计消耗了 11179 tokens\r\n2023-12-21 14:29:45,117 [INFO] [base_model.py:506] Token 计数: 3225，本次对话累计消耗了 22613 tokens\r\n2023-12-21 15:19:07,934 [INFO] [base_model.py:506] Token 计数: 3250，本次对话累计消耗了 16925 tokens\r\n2023-12-21 15:23:53,546 [INFO] [base_model.py:506] Token 计数: 3182，本次对话累计消耗了 9360 tokens\r\n2023-12-21 16:18:17,936 [INFO] [base_model.py:506] Token 计数: 3103，本次对话累计消耗了 16136 tokens\r\n2023-12-21 16:29:13,871 [INFO] [base_model.py:506] Token 计数: 3376，本次对话累计消耗了 15800 tokens\r\n2023-12-21 16:47:08,143 [INFO] [base_model.py:506] Token 计数: 3098，本次对话累计消耗了 7169 tokens\r\n2023-12-21 16:55:45,570 [INFO] [base_model.py:506] Token 计数: 7368，本次对话累计消耗了 21308 tokens\r\n2023-12-21 17:08:44,983 [INFO] [base_model.py:506] Token 计数: 7535，本次对话累计消耗了 14215 tokens\r\n2023-12-21 17:13:45,055 [INFO] [base_model.py:506] Token 计数: 7204，本次对话累计消耗了 31677 tokens\r\n2023-12-21 17:21:33,339 [INFO] [base_model.py:506] Token 计数: 7998，本次对话累计消耗了 7998 tokens\r\n2023-12-21 17:28:21,543 [INFO] [base_model.py:506] Token 计数: 3242，本次对话累计消耗了 24410 tokens\r\n2023-12-21 18:28:19,708 [INFO] [base_model.py:506] Token 计数: 3118，本次对话累计消耗了 10425 tokens\r\n2023-12-21 18:54:46,064 [INFO] [base_model.py:506] Token 计数: 3447，本次对话累计消耗了 18751 tokens\r\n\r\n是否存在问题，如何按天统计token总消耗量，感谢\n\n### 复现操作\n\n正常日志打印\n\n### 错误日志\n\n```shell\n2023-12-21 11:15:04,475 [INFO] [base_model.py:506] Token 计数: 3512，本次对话累计消耗了 14560 tokens\r\n2023-12-21 13:28:12,784 [INFO] [base_model.py:506] Token 计数: 3298，本次对话累计消耗了 18419 tokens\r\n2023-12-21 14:15:59,797 [INFO] [base_model.py:506] Token 计数: 3415，本次对话累计消耗了 11179 tokens\r\n2023-12-21 14:29:45,117 [INFO] [base_model.py:506] Token 计数: 3225，本次对话累计消耗了 22613 tokens\r\n2023-12-21 15:19:07,934 [INFO] [base_model.py:506] Token 计数: 3250，本次对话累计消耗了 16925 tokens\r\n2023-12-21 15:23:53,546 [INFO] [base_model.py:506] Token 计数: 3182，本次对话累计消耗了 9360 tokens\r\n2023-12-21 16:18:17,936 [INFO] [base_model.py:506] Token 计数: 3103，本次对话累计消耗了 16136 tokens\r\n2023-12-21 16:29:13,871 [INFO] [base_model.py:506] Token 计数: 3376，本次对话累计消耗了 15800 tokens\r\n2023-12-21 16:47:08,143 [INFO] [base_model.py:506] Token 计数: 3098，本次对话累计消耗了 7169 tokens\r\n2023-12-21 16:55:45,570 [INFO] [base_model.py:506] Token 计数: 7368，本次对话累计消耗了 21308 tokens\r\n2023-12-21 17:08:44,983 [INFO] [base_model.py:506] Token 计数: 7535，本次对话累计消耗了 14215 tokens\r\n2023-12-21 17:13:45,055 [INFO] [base_model.py:506] Token 计数: 7204，本次对话累计消耗了 31677 tokens\r\n2023-12-21 17:21:33,339 [INFO] [base_model.py:506] Token 计数: 7998，本次对话累计消耗了 7998 tokens\r\n2023-12-21 17:28:21,543 [INFO] [base_model.py:506] Token 计数: 3242，本次对话累计消耗了 24410 tokens\r\n2023-12-21 18:28:19,708 [INFO] [base_model.py:506] Token 计数: 3118，本次对话累计消耗了 10425 tokens\r\n2023-12-21 18:54:46,064 [INFO] [base_model.py:506] Token 计数: 3447，本次对话累计消耗了 18751 tokens\n```\n\n\n### 运行环境\n\n- OS:  Linux\r\n- Browser: Chrome\r\n- Gradio version: Gradio: 3.41.2\r\n- Python version: Python: 3.10.11 \r\n-  [ChuanhuChat](https://github.com/GaiZhenbiao/ChuanhuChatGPT): [20230728](https://github.com/GaiZhenbiao/ChuanhuChatGPT/releases/tag/20230728)*\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "himself07",
      "author_type": "User",
      "created_at": "2023-12-22T01:59:03Z",
      "updated_at": "2023-12-22T10:25:26Z",
      "closed_at": null,
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1008/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1008",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1008",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:27.019035",
      "comments": []
    },
    {
      "issue_number": 1000,
      "title": "[其他]: No module named 'faiss.swigfaiss_avx2'",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 错误描述\n\nfaiss-cpu：1.7.4\n\n### 复现操作\n\n普通地进行索引\n\n### 错误日志\n\n```shell\n2023-12-19 21:05:11,007 [INFO] [loader.py:54] Loading faiss with AVX2 support.\r\n2023-12-19 21:05:11,007 [INFO] [loader.py:58] Could not load library with AVX2 support due to:\r\nModuleNotFoundError(\"No module named 'faiss.swigfaiss_avx2'\")\r\n2023-12-19 21:05:11,007 [INFO] [loader.py:64] Loading faiss.\r\n2023-12-19 21:05:11,046 [INFO] [loader.py:66] Successfully loaded faiss.\n```\n\n\n### 运行环境\n\n- OS: Windows10 22H2\r\n- Browser: Chrome\r\n- Gradio version: 3.43.2\r\n- Python version: 3.9\r\n(或您的其他运行环境信息)\r\n\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "slideslide",
      "author_type": "User",
      "created_at": "2023-12-19T13:12:56Z",
      "updated_at": "2023-12-19T13:12:56Z",
      "closed_at": null,
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1000/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/1000",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/1000",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:27.019040",
      "comments": []
    },
    {
      "issue_number": 999,
      "title": "[功能请求]: 希望在未登录的状态下，通过浏览器缓存保留对话记录",
      "body": "### 相关问题\n\nfyi\n\n### 可能的解决办法\n\n目前已知只有在登录状态下实现聊天记录隔壁。\r\n可是现在的使用场景想在不登陆的状态下也可以实现保存对话的记录，是否可以通过读取浏览器缓存的方式实现未登录状态下的对话记录隔离？\r\n\r\n烦请各位指点迷津，谢谢拉\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Mchousexuxu",
      "author_type": "User",
      "created_at": "2023-12-18T09:21:43Z",
      "updated_at": "2023-12-18T15:36:30Z",
      "closed_at": "2023-12-18T15:36:30Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/999/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/999",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/999",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:27.019045",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "可以在config.json中设置\r\n```\r\n    \"hide_history_when_not_logged_in\": true,\r\n```\r\n\r\n此时只在聊天框中通过浏览器缓存记录聊天历史。注意，此时新建对话，聊天历史会被清除。\r\n\r\n参见 [https://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/使用教程#未登录时隐藏历史对话记录](未登录时隐藏历史对话记录)",
          "created_at": "2023-12-18T15:36:30Z"
        }
      ]
    },
    {
      "issue_number": 983,
      "title": "[远程部署]: 文件上传失败，知识库上传失败",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n![1702385871756](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/130928638/4eb1aabd-1dfe-48cd-8857-9698f69a62dd)\n\n文件一上传就错误，每次都这样。只有openai，是配置有问题么？\n\n### 复现操作\n\n正常部署，可以和ai对话。但是文件不能上传\n\n### 错误日志\n\n```shell\n\n文件一上传就错误，每次都这样。只有openai，是配置有问题么？\r\n  //== API 配置 ==\r\n    \"openai_api_key\": \"sk-XXXXXXXXXXXXXXXXXXXX\", // 你的 OpenAI API Key，一般必填，若空缺则需在图形界面中填入API Key\r\n    \"google_palm_api_key\": \"\", // 你的 Google PaLM API Key，用于 Google PaLM 对话模型\r\n    \"xmchat_api_key\": \"\", // 你的 xmchat API Key，用于 XMChat 对话模型\r\n    \"minimax_api_key\": \"\", // 你的 MiniMax API Key，用于 MiniMax 对话模型\r\n    \"minimax_group_id\": \"\", // 你的 MiniMax Group ID，用于 MiniMax 对话模型\r\n    \"midjourney_proxy_api_base\": \"https://xxx/mj\", // 你的 https://github.com/novicezk/midjourney-proxy 代理地址\r\n    \"midjourney_proxy_api_secret\": \"\", // 你的 MidJourney Proxy API Secret，用于鉴权访问 api，可选\r\n    \"midjourney_discord_proxy_url\": \"\", // 你的 MidJourney Discord Proxy URL，用于对生成对图进行反代，可选\r\n    \"midjourney_temp_folder\": \"./tmp\", // 你的 MidJourney 临时文件夹，用于存放生成的图片，填空则关闭自动下载切图（直接显示MJ的四宫格图）\r\n    \"spark_appid\": \"\", // 你的 讯飞星火大模型 API AppID，用于讯飞星火大模型对话模型\r\n    \"spark_api_key\": \"\", // 你的 讯飞星火大模型 API Key，用于讯飞星火大模型对话模型\r\n    \"spark_api_secret\": \"\", // 你的 讯飞星火大模型 API Secret，用于讯飞星火大模型对话模型\r\n    \"claude_api_secret\":\"\",// 你的 Claude API Secret，用于 Claude 对话模型\r\n    \"ernie_api_key\": \"\",// 你的文心一言在百度云中的API Key，用于文心一言对话模型\r\n    \"ernie_secret_key\": \"\",// 你的文心一言在百度云中的Secret Key，用于文心一言对话模型\r\n\r\n\r\n    //== Azure ==\r\n    \"openai_api_type\": \"openai\", // 可选项：azure, openai\r\n    \"azure_openai_api_key\": \"\", // 你的 Azure OpenAI API Key，用于 Azure OpenAI 对话模型\r\n    \"azure_openai_api_base_url\": \"\", // 你的 Azure Base URL\r\n    \"azure_openai_api_version\": \"2023-05-15\", // 你的 Azure OpenAI API 版本\r\n    \"azure_deployment_name\": \"\", // 你的 Azure OpenAI Chat 模型 Deployment 名称\r\n    \"azure_embedding_deployment_name\": \"\", // 你的 Azure OpenAI Embedding 模型 Deployment 名称\r\n    \"azure_embedding_model_name\": \"text-embedding-ada-002\", // 你的 Azure OpenAI Embedding 模型名称\r\n\r\n    //== 基础配置 ==\r\n    \"language\": \"zh_CN\", // 界面语言，可选\"auto\", \"zh_CN\", \"en_US\", \"ja_JP\", \"ko_KR\", \"sv_SE\", \"ru_RU\", \"vi_VN\"\r\n    \"users\": [], // 用户列表，[[用户名1, 密码1], [用户名2, 密码2], ...]\r\n    \"local_embedding\": true, //是否在本地编制索引\r\n    \"hide_history_when_not_logged_in\": false, //未登录情况下是否不展示对话历史\r\n    \"check_update\": false, //是否启用检查更新\r\n    \"default_model\": \"gpt-3.5-turbo\", // 默认模型\r\n    \"chat_name_method_index\": 2, // 选择对话名称的方法。0: 使用日期时间命名；1: 使用第一条提问命名，2: 使用模型自动总结\r\n    \"bot_avatar\": \"default\", // 机器人头像，可填写本地或网络图片链接，或者\"none\"（不显示头像）\r\n    \"user_avatar\": \"default\", // 用户头像，可填写本地或网络图片链接，或者\"none\"（不显示头像）\r\n\r\n    //== API 用量 ==\r\n    \"show_api_billing\": false, //是否显示OpenAI API用量（启用需要填写sensitive_id）\r\n    \"sensitive_id\": \"\", // 你 OpenAI 账户的 Sensitive ID，用于查询 API 用量\r\n    \"usage_limit\": 120, // 该 OpenAI API Key 的当月限额，单位：美元，用于计算百分比和显示上限\r\n    \"legacy_api_usage\": false, // 是否使用旧版 API 用量查询接口（OpenAI现已关闭该接口，但是如果你在使用第三方 API，第三方可能仍然支持此接口）\r\n\r\n    //== 川虎助理设置 ==\r\n    \"default_chuanhu_assistant_model\": \"gpt-4\", //川虎助理使用的模型，可选gpt-3.5-turbo或者gpt-4等\r\n    \"GOOGLE_CSE_ID\": \"2XXXXXXX\", //谷歌搜索引擎ID，用于川虎助理Pro模式，获取方式请看 https://stackoverflow.com/questions/37083058/programmatically-searching-google-in-python-using-custom-search\r\n    \"GOOGLE_API_KEY\": \"AXXXXXXXXXXX\", //谷歌API Key，用于川虎助理Pro模式\r\n    \"WOLFRAM_ALPHA_APPID\": \"9XXXXXXXX\", //Wolfram Alpha API Key，用于川虎助理Pro模式，获取方式请看 https://products.wolframalpha.com/api/\r\n    \"SERPAPI_API_KEY\": \"bXXXXXXXXXXXXXX\", //SerpAPI API Key，用于川虎助理Pro模式，获取方式请看 https://serpapi.com/\r\n\r\n    //== 文档处理与显示 ==\r\n    \"latex_option\": \"default\", // LaTeX 公式渲染策略，可选\"default\", \"strict\", \"all\"或者\"disabled\"\r\n    \"advance_docs\": {\r\n        \"pdf\": {\r\n            \"two_column\": false, // 是否认为PDF是双栏的\r\n            \"formula_ocr\": true // 是否使用OCR识别PDF中的公式\r\n        }\r\n    },\r\n\r\n    //== 高级配置 ==\r\n    // 是否多个API Key轮换使用\r\n    \"multi_api_key\": false,\r\n    \"hide_my_key\": false, // 如果你想在UI中隐藏 API 密钥输入框，将此值设置为 true\r\n    // \"available_models\": [\"GPT3.5 Turbo\", \"GPT4 Turbo\", \"GPT4 Vision\"], // 可用的模型列表，将覆盖默认的可用模型列表\r\n    // \"extra_models\": [\"模型名称3\", \"模型名称4\", ...], // 额外的模型，将添加到可用的模型列表之后\r\n    // \"api_key_list\": [\r\n    //     \"sk-xxxxxxxxxxxxxxxxxxxxxxxx1\",\r\n    //     \"sk-xxxxxxxxxxxxxxxxxxxxxxxx2\",\r\n    //     \"sk-xxxxxxxxxxxxxxxxxxxxxxxx3\"\r\n    // ],\r\n    // 自定义OpenAI API Base\r\n    // \"openai_api_base\": \"https://api.openai.com\",\r\n    // 自定义使用代理（请替换代理URL）\r\n    // \"https_proxy\": \"http://127.0.0.1:1079\",\r\n    // \"http_proxy\": \"http://127.0.0.1:1079\",\r\n    // 自定义端口、自定义ip（请替换对应内容）\r\n    \"server_name\": \"0.0.0.0\",\r\n    \"server_port\": 80,\r\n    // 如果要share到gradio，设置为true\r\n    // \"share\": false,\r\n}\n```\n\n\n### 运行环境\n\n- OS: ----\r\n- Server: -----\r\n- Gradio version:3.43.2\r\n- Python version: 3.9.2\r\n\n\n### 补充说明\n\n![1702385871756](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/130928638/4eb1aabd-1dfe-48cd-8857-9698f69a62dd)\r\n文件一上传就错误，每次都这样。只有openai",
      "state": "closed",
      "author": "cmdr123",
      "author_type": "User",
      "created_at": "2023-12-12T13:10:21Z",
      "updated_at": "2023-12-18T07:44:36Z",
      "closed_at": "2023-12-18T07:44:36Z",
      "labels": [
        "question",
        "server deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/983/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/983",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/983",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:29.344343",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "特定模型可以上传文件，比如3.5turbo不带instruction的；如果是本地部署的模型需要启用local embedding。\n\n所以，或者，我们是不是应该在前面也是一个判断，如果当前模型不支持上传文件，就禁用上传或者报错提示不支持文件什么的……🤔  ",
          "created_at": "2023-12-12T16:52:38Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "现在已经解决。可以在使用Instruct模型时上传文件了。",
          "created_at": "2023-12-18T07:44:21Z"
        }
      ]
    },
    {
      "issue_number": 987,
      "title": "[功能请求]: 基于微擎交付系统的一键部署方案，为社区贡献一份力量",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n【川虎Chat】为ChatGPT等多种LLM提供了一个轻快好用的Web图形界面和众多附加功能\r\n\r\n安装地址：https://console.w7.cc/api/deploy/thirdparty_cd/redirect?route=/zpk-install?path=https%3A%2F%2Fzpk.w7.cc%2Frespo%2Finfo%2Fchatgpt_chuanhu\r\n\r\n说明：安装地址为一键部署方案，服务器环境基于k3s，微擎交付系统是管理k3s的控制面板，可视化一键管理基于k3s部署的应用\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "w7team",
      "author_type": "User",
      "created_at": "2023-12-15T11:46:11Z",
      "updated_at": "2023-12-18T07:26:44Z",
      "closed_at": "2023-12-18T07:26:44Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/987/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/987",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/987",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:29.508109",
      "comments": []
    },
    {
      "issue_number": 991,
      "title": "[其他]: 在本地部署的时候，修改对话名称的时候会报错",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 错误描述\n\n在本地部署的时候，修改对话名称的时候会报错\r\n而且，我导入自己的历史对话的时候，第一次对话总会自动修改我的对话名称，能不能在对话命名选项里加一个不修改对话命名的选择\n\n### 复现操作\n\n正常完成部署\r\n\n\n### 错误日志\n\n```shell\nTraceback (most recent call last):\r\n  File \"L:\\Anaconda3\\envs\\ChuanhuChatbot\\Lib\\site-packages\\gradio\\queueing.py\", line 388, in call_prediction\r\n    output = await route_utils.call_process_api(\r\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"L:\\Anaconda3\\envs\\ChuanhuChatbot\\Lib\\site-packages\\gradio\\route_utils.py\", line 219, in call_process_api\r\n    output = await app.get_blocks().process_api(\r\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"L:\\Anaconda3\\envs\\ChuanhuChatbot\\Lib\\site-packages\\gradio\\blocks.py\", line 1437, in process_api\r\n    result = await self.call_function(\r\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"L:\\Anaconda3\\envs\\ChuanhuChatbot\\Lib\\site-packages\\gradio\\blocks.py\", line 1109, in call_function\r\n    prediction = await anyio.to_thread.run_sync(\r\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"L:\\Anaconda3\\envs\\ChuanhuChatbot\\Lib\\site-packages\\anyio\\to_thread.py\", line 33, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"L:\\Anaconda3\\envs\\ChuanhuChatbot\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 877, in run_sync_in_worker_thread\r\n    return await future\r\n           ^^^^^^^^^^^^\r\n  File \"L:\\Anaconda3\\envs\\ChuanhuChatbot\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 807, in run\r\n    result = context.run(func, *args)\r\n             ^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"L:\\Anaconda3\\envs\\ChuanhuChatbot\\Lib\\site-packages\\gradio\\utils.py\", line 641, in wrapper\r\n    response = f(*args, **kwargs)\r\n               ^^^^^^^^^^^^^^^^^^\r\n  File \"d:\\Microsoft VS Code\\my project\\ChuanhuChatGPT\\modules\\utils.py\", line 88, in rename_chat_history\r\n    return current_model.rename_chat_history(*args)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nTypeError: BaseLLMModel.rename_chat_history() takes 3 positional arguments but 4 were given\n```\n\n\n### 运行环境\n\n- OS: win10\r\n- Browser: Chrome\r\n- Gradio version: \r\n- Python version: 3.11.5\r\n(或您的其他运行环境信息)\r\n\n\n### 补充说明\n\n没有",
      "state": "closed",
      "author": "WanZunGe",
      "author_type": "User",
      "created_at": "2023-12-16T09:11:23Z",
      "updated_at": "2023-12-18T06:26:18Z",
      "closed_at": "2023-12-18T06:26:18Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/991/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/991",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/991",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:29.508149",
      "comments": [
        {
          "author": "slideslide",
          "body": "挪走当前用户的历史记录创建完第一个再挪回来就可以暂时解决",
          "created_at": "2023-12-16T09:53:57Z"
        },
        {
          "author": "WanZunGe",
          "body": "> 挪走当前用户的历史记录创建完第一个再挪回来就可以暂时解决\r\n不行哦，我挪走所有历史记录，然后重开新建一个对话，新建的对话依然无法改名，改了会报错\r\n",
          "created_at": "2023-12-18T05:22:35Z"
        }
      ]
    },
    {
      "issue_number": 993,
      "title": "[功能请求]: 通过clipboard上传图片",
      "body": "### 相关问题\n\n目前gradio4.4以上版本已经支持gr.inputs.Image(source=\"clipboard\")，是否可以考虑将剪切板粘贴图片也添加进来，在粘贴截图之类的信息时会方便很多。\r\n\r\n\n\n### 可能的解决办法\n\n目前我试验过直接升级gradio似乎会导致很多兼容性的问题，希望作者可以考虑是否有比较好的解决方案。\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "v2rockets",
      "author_type": "User",
      "created_at": "2023-12-16T14:45:56Z",
      "updated_at": "2023-12-18T06:22:26Z",
      "closed_at": "2023-12-18T06:22:26Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/993/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/993",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/993",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:29.696812",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "是的……升级gradio会有大量大量的兼容性问题……🥲不想适配……🥲",
          "created_at": "2023-12-16T14:56:34Z"
        },
        {
          "author": "Keldos-Li",
          "body": "这个功能在做了",
          "created_at": "2023-12-17T17:40:29Z"
        }
      ]
    },
    {
      "issue_number": 973,
      "title": "[Bug]: DALL-E 3 API调用没有应用 openai_api_base 配置项",
      "body": "### 这个bug是否已存在现有issue了？\r\n\r\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\r\n\r\n### 错误表现\r\n\r\nconfig.json中配置了openai_api_base，DALL-E 3的API调用还是走的 api.openai.com，GPT4 Turbo的API调用正常走配置的api_base地址\r\n\r\n以下为关闭clash，配置了openai_api_base情况下，调用DALL-E 3的日志\r\n<img width=\"1143\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/3469890/58448973-e31b-4526-b086-a23b043b3cdc\">\r\n\r\n\r\n以下为开启clash后clash代理日志，其中api.openai.com那行为DALL-E 3 API调用，其他的为GPT4 Turbo API调用(代理地址)\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/3469890/a4ba8006-20e9-4fb9-a2dc-aaffa514d0e6)\r\n\r\n\r\n\r\n### 复现操作\r\n\r\ngit clone main分支最新代码，配置config后启动服务\r\n\r\n### 错误日志\r\n\r\n_No response_\r\n\r\n### 运行环境\r\n\r\n- OS: Ubuntu 22.04\r\n- Browser: Chrome 119\r\n- Gradio version: 3.43.2\r\n- Python version: 3.11.2\r\n\r\n\r\n### 帮助解决\r\n\r\n- [ ] 我愿意协助解决！\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "closed",
      "author": "devforma",
      "author_type": "User",
      "created_at": "2023-12-06T06:46:05Z",
      "updated_at": "2023-12-17T11:43:19Z",
      "closed_at": "2023-12-17T11:43:19Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/973/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/973",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/973",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:29.864949",
      "comments": [
        {
          "author": "astorm-z",
          "body": "+1",
          "created_at": "2023-12-07T02:33:56Z"
        },
        {
          "author": "slideslide",
          "body": "解决这个问题的代码已上传，等待merge后就可以关闭这个issue了",
          "created_at": "2023-12-16T17:21:23Z"
        }
      ]
    },
    {
      "issue_number": 927,
      "title": "[功能请求]: 希望添加GPT 4.0-turbo的完整相关支持",
      "body": "### 相关问题\n\nGPT 4.0-turbo支持多模态，输入方式得改进一下了。\n\n### 可能的解决办法\n\n在输入框添加图片输入选项\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\nNew GPT-4 Turbo:\r\nWe announced GPT-4 Turbo, our most advanced model. It offers a 128K context window and knowledge of world events up to April 2023. \r\nWe’ve reduced pricing for GPT-4 Turbo considerably: input tokens are now priced at $0.01/1K and output tokens at $0.03/1K, making it 3x and 2x cheaper respectively compared to the previous GPT-4 pricing. \r\nWe’ve improved function calling, including the ability to call multiple functions in a single message, to always return valid functions with JSON mode, and improved accuracy on returning the right function parameters.\r\nModel outputs are more deterministic with our new reproducible outputs beta feature.\r\nYou can access GPT-4 Turbo by passing gpt-4-1106-preview in the API, with a stable production-ready model release planned later this year.\r\n\r\n**GPT-4 Turbo now supports visual inputs in the Chat Completions API**, enabling use cases like caption generation and visual analysis. You can access the vision features by using the gpt-4-vision-preview model. This vision capability will be integrated into the production-ready version of GPT-4 Turbo when it comes out of preview later this year.",
      "state": "closed",
      "author": "slideslide",
      "author_type": "User",
      "created_at": "2023-11-07T02:48:10Z",
      "updated_at": "2023-12-16T17:26:23Z",
      "closed_at": "2023-12-16T17:26:23Z",
      "labels": [
        "feature request",
        "🚀 enhancement",
        "🖥️ UI&UX",
        "🤖 model"
      ],
      "label_count": 4,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/927/reactions",
        "total_count": 3,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 1
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/927",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/927",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:30.061167",
      "comments": [
        {
          "author": "middle-chunjie",
          "body": "并且官方自己已经制作Assistant API了，感觉可以跟进",
          "created_at": "2023-11-07T04:01:20Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "正在做～",
          "created_at": "2023-11-07T07:36:14Z"
        },
        {
          "author": "slideslide",
          "body": "> 正在做～\r\n\r\n目前vision通过原本文件上传图片会出现两个图片对话气泡，以及是不是不需要3.5 16k了？现在的3.5 turbo默认是16k了。\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/86949124/7b684846-9aca-4f8f-9d75-43f369100c3d)\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/86949124/b70e7054-ed60-453f-8f07-255639aa51c4)\r\n\r",
          "created_at": "2023-11-09T15:18:43Z"
        },
        {
          "author": "MZhao-ouo",
          "body": "![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/70903329/39b14fda-ac42-4b0f-8b97-b690cda6c355)\r\n11.11才改，现在还在测试版",
          "created_at": "2023-11-09T15:32:03Z"
        },
        {
          "author": "slideslide",
          "body": "> ![image](https://user-images.githubusercontent.com/70903329/281783646-39b14fda-ac42-4b0f-8b97-b690cda6c355.png) 11.11才改，现在还在测试版\r\n\r\n噢，看漏了hhh",
          "created_at": "2023-11-10T11:57:09Z"
        }
      ]
    },
    {
      "issue_number": 990,
      "title": "[功能请求]: DALL-E 3模型走自定义api",
      "body": "### 相关问题\n\n DALL-E 3模型不走自定义OpenAI API Base\n\n### 可能的解决办法\n\nDALL-E 3模型走自定义api\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "slideslide",
      "author_type": "User",
      "created_at": "2023-12-16T08:03:42Z",
      "updated_at": "2023-12-16T08:06:34Z",
      "closed_at": "2023-12-16T08:04:53Z",
      "labels": [
        "duplicate",
        "feature request"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/990/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/990",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/990",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:30.347795",
      "comments": [
        {
          "author": "slideslide",
          "body": "有人提了bug",
          "created_at": "2023-12-16T08:04:53Z"
        }
      ]
    },
    {
      "issue_number": 932,
      "title": "[Bug]: 使用第三方API 返回结果和openai不一致导致解析出错",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n命令行log是有显示GPT返回的信息的但是web端不显示. 换浏览器问题也是一样的\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/71442540/82b796c3-8bff-4c8d-bed8-9b8ba9c6e85c)\r\n\n\n### 复现操作\n\n我尝试了多种部署方法, windows正常py启动 venv启动 docker启动 都有这个问题\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: brave chrom\r\n- Gradio version: 3.43.2\r\n- Python version:  3.11.2\r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "hanxin789",
      "author_type": "User",
      "created_at": "2023-11-09T06:44:17Z",
      "updated_at": "2023-12-15T09:38:44Z",
      "closed_at": null,
      "labels": [
        "invalid"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/932/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/932",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/932",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:30.605137",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "请给出完整的命令行日志，看上去是API返回的格式不符合预期。你在使用第三方API吗？",
          "created_at": "2023-11-09T08:02:10Z"
        },
        {
          "author": "hanxin789",
          "body": "是的第三方API 应该怎么改呢\r\n\r\n完整日志：\r\nOpening ChuanhuChatGPT...\r\nvenv \"E:\\gpt\\ChuanhuChatGPT-20231020-git\\\\ChuanhuChat\\Scripts\\Python.exe\"\r\n2023-11-09 19:40:11,034 [INFO] [utils.py:160] NumExpr defaulting to 8 threads.\r\n2023-11-09 19:40:13,247 [INFO] [config.py:158] OpenAI API Base set to: https://gptapi.us/v1\r",
          "created_at": "2023-11-09T11:41:00Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "如果你方便的话，可以发送你的API URL和API Key到我的邮箱，这样方便排查问题：chefs-vernier.0q@icloud.com",
          "created_at": "2023-11-15T03:43:58Z"
        },
        {
          "author": "Qmymy",
          "body": "我也遇到了这样的情况，调用3.5模型就没这样的问题，但是gpt4模型就会出现这样的问题，我的错误日志如下：\r\nERROR: {'choices': [{'index': 0, 'delta': {'content': None, 'role': 'assistant'}}], 'created': 1702613201, 'id': 'chatcmpl-8VtlBHBWyFMQNlTx83Z5KGqbcJ2Xu'}\r\nERROR: {'choices': [{'index': 0, 'delta': {'content': '你', 'role': None}}], 'created': 17",
          "created_at": "2023-12-15T04:14:20Z"
        },
        {
          "author": "Qmymy",
          "body": " 第一种格式：\"id\": \"chatcmpl-8VwcI42GGbmSzlNcAdkVP7Uwfpe1t\",\r\n  \"object\": \"chat.completion\",\r\n  \"created\": 1702624182,\r\n  \"model\": \"gpt-3.5-0613\",\r\n  \"choices\": [\r\n    {\r\n      \"index\": 0,\r\n      \"message\": {\r\n        \"role\": \"assistant\",\r\n        \"content\": \"Hello! How can I assist you today?\"\r\n      },\r",
          "created_at": "2023-12-15T08:23:05Z"
        }
      ]
    },
    {
      "issue_number": 979,
      "title": "[功能请求]: 希望能够像ChatGPT网站一样登录后不直接加载历史记录",
      "body": "### 相关问题\n\n现在网址打开登录后是直接加载最新一轮的历史对话记录的，希望能够像ChatGPT网站一样登录后不直接加载历史记录，而是新开一个对话，用户有需要再去选择侧边栏的历史对话记录\n\n### 可能的解决办法\n\n登录后不直接加载历史记录，而是新开一个对话，用户有需要再去选择侧边栏的历史对话记录\n\n### 帮助开发\n\n- [x] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Qmymy",
      "author_type": "User",
      "created_at": "2023-12-08T09:31:21Z",
      "updated_at": "2023-12-12T12:05:05Z",
      "closed_at": "2023-12-12T12:05:05Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/979/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/979",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/979",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:30.840030",
      "comments": [
        {
          "author": "Qmymy",
          "body": "已实现，在base_model文件中修改def auto_load(self)函数\r\ndef auto_load(self)函数\r\n        # 创建一个新的空白历史文件名，而不是加载现有的历史文件\r\n        self.history_file_path = new_auto_history_filename(self.user_identifier)\r\n        # 直接调用修改后的 load_chat_history 方法\r\n        filename, system_prompt, chatbot = self.load_chat_history()\r\n    ",
          "created_at": "2023-12-12T12:05:03Z"
        }
      ]
    },
    {
      "issue_number": 982,
      "title": "[本地部署]:  Connection Error",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n本地部署，并用nginx做好端口映射后，会出现一个错误 Connection Error\r\n在浏览器的console里可以看到错误：\r\nindex.js:494 WebSocket connection to 'ws://我的域名/queue/join' failed:  \r\nping过域名，ip是正常的。\r\n\r\n\n\n### 复现操作\n\n1. 正常完成部署\r\n2. 在nginx做好端口配置，7860映射到60端口并配置域名\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n```markdown\n- OS: CENTOS 7.0\r\n- Browser: CHROME\r\n- Gradio version: \r\n- Python version: 3.8\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "TigrisRiva",
      "author_type": "User",
      "created_at": "2023-12-12T07:00:25Z",
      "updated_at": "2023-12-12T07:03:03Z",
      "closed_at": "2023-12-12T07:03:03Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/982/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/982",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/982",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:31.010445",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "请检查是否打开了不必要的Nginx安全设置。例如这个就不应该打开：\r\n![telegram-cloud-photo-size-5-6163304746258118899-y](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/51039745/29f56f91-91b9-4a10-a3ab-a3466f3321a7)\r\n",
          "created_at": "2023-12-12T07:02:57Z"
        }
      ]
    },
    {
      "issue_number": 981,
      "title": "[功能请求]: 能够支持chatglm3吗",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n本地启动后，上传txt文件系统报错2023-12-11 15:11:29,663 [ERROR] [index_func.py:137] 索引构建失败！Incorrect API key provided: sk-xxxxxxx. You can find your API key at https://platform.openai.com/account/api-keys.。\n\n显示需要连接openai。能否用本地的模型？是否支持chatglm3？\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "ilovejava15",
      "author_type": "User",
      "created_at": "2023-12-11T07:24:41Z",
      "updated_at": "2023-12-11T15:55:58Z",
      "closed_at": "2023-12-11T15:55:58Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/981/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/981",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/981",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:31.215332",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "可以的。请在config中设置“local_embedding”选项。",
          "created_at": "2023-12-11T15:55:34Z"
        }
      ]
    },
    {
      "issue_number": 974,
      "title": "[功能请求]: 希望加入功能权限控制",
      "body": "### 相关问题\n\n在企业内部署代码需要限制员工使用部分功能。希望加入各种功能的控制。\r\n\n\n### 可能的解决办法\n\n无\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "Jas0nxlee",
      "author_type": "User",
      "created_at": "2023-12-06T11:00:25Z",
      "updated_at": "2023-12-08T05:59:38Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/974/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/974",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/974",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:31.372753",
      "comments": [
        {
          "author": "rutther",
          "body": "> ### 相关问题\r\n> 在企业内部署代码需要限制员工使用部分功能。希望加入各种功能的控制。\r\n> \r\n> ### 可能的解决办法\r\n> 无\r\n> \r\n> ### 帮助开发\r\n> * [x] 我愿意协助开发！\r\n> \r\n> ### 补充说明\r\n> _没有回应_\r\n\r\n我也在研究这个问题，但是gradio官方的文档，意思是没有，像样的也就是基于huggingface的aouth方案。我尝试了所谓的“密码=用户名”的无注册自定义形式，也就只能利用自带的login。另外还有是利用前端的cookies的方式，确实也是可行的。但是我似乎没有找到通过client创建用户和鉴权的方法。",
          "created_at": "2023-12-06T14:06:43Z"
        },
        {
          "author": "Kilig947",
          "body": "在demo.load中可以控制用户能够访问的功能，实现方案是：在加载页面时，通过用户名判断用户应该展示哪些功能，隐藏哪些功能\r\n",
          "created_at": "2023-12-08T04:06:08Z"
        },
        {
          "author": "MZhao-ouo",
          "body": "Github 开源版本不是专门给企业定制的，这些功能暂时不考虑",
          "created_at": "2023-12-08T05:59:37Z"
        }
      ]
    },
    {
      "issue_number": 977,
      "title": "[Bug]: docker 下部署的项目更改config文件中的available_models参数无法替换可用模型列表",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n我想限制gpt-4的api使用，太费钱了，但是官方没有可提供的对单个种类api的限制选项，所以我修改了配置文件中的available_models参数，并只写了gpt-3.5-turbo（默认的GPT3-TURBO也试过），但是在多次重启docker并进入docker内确认config文件已修改，网页上依旧可以切换模型且使用gpt-4模型。\r\n![QQ截图20231208133757](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/76208944/5801a79a-f5fd-460b-bf9a-332be01f5c30)\r\n\n\n### 复现操作\n\n1.按照教程正常使用docker部署（服务器在德国，没有代理，申请了TLS 证书，开了https，有域名）\r\n2.修改config文件，增加了available_models参数\r\n3.重启docker容器\r\n4.列表依旧没有改变\n\n### 错误日志\n\n```shell\n无错误日志\n```\n\n\n### 运行环境\n\n- OS: Ubuntu\r\n- Browser: Chrome\r\n-Version：20231110\r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "YANG301",
      "author_type": "User",
      "created_at": "2023-12-08T05:45:37Z",
      "updated_at": "2023-12-08T05:48:58Z",
      "closed_at": "2023-12-08T05:48:57Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/977/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/977",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/977",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:31.539632",
      "comments": [
        {
          "author": "YANG301",
          "body": "我好像知道了，这功能是11/10后更新的",
          "created_at": "2023-12-08T05:48:57Z"
        }
      ]
    },
    {
      "issue_number": 970,
      "title": "[功能请求]: 加入多GPU的支持",
      "body": "### 相关问题\n\n现在无法使用多块GPU同时使用\n\n### 可能的解决办法\n\n应该提供该参数设置\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "Sooloom",
      "author_type": "User",
      "created_at": "2023-12-05T03:08:45Z",
      "updated_at": "2023-12-05T03:08:45Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/970/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/970",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/970",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:31.697401",
      "comments": []
    },
    {
      "issue_number": 965,
      "title": "[Bug]: 啟用帳號登入功能時，history如果沒有該帳號的資料夾會錯誤",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n啟用帳號登入功能時，history如果沒有該帳號的資料夾會錯誤\n\n### 复现操作\n\n啟用帳號登入功能時，history如果沒有該帳號的資料夾會錯誤\n\n### 错误日志\n\n```shell\nTo create a public link, set `share=True` in `launch()`.\r\n2023-11-28 16:14:28,371 [INFO] [utils.py:625] 您的IP区域：Taiwan。\r\n2023-11-28 16:14:35,244 [INFO] [ChuanhuChatbot.py:492] Get User Name: 26666\r\n2023-11-28 16:14:35,255 [INFO] [models.py:39] 正在加载OpenAI模型: GPT3.5 Turbo\r\nTraceback (most recent call last):\r\n  File \"d:\\VSCode\\Python\\eGenieChatGPT_Latest\\modules\\models\\models.py\", line 42, in get_model\r\n    model = OpenAIClient(\r\n            ^^^^^^^^^^^^^\r\n  File \"d:\\VSCode\\Python\\eGenieChatGPT_Latest\\modules\\models\\OpenAI.py\", line 28, in __init__\r\n    super().__init__(\r\n  File \"d:\\VSCode\\Python\\eGenieChatGPT_Latest\\modules\\models\\base_model.py\", line 234, in __init__\r\n    self.history_file_path = get_first_history_name(user)\r\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"d:\\VSCode\\Python\\eGenieChatGPT_Latest\\modules\\utils.py\", line 474, in get_first_history_name\r\n    history_names = get_history_names(user_name)\r\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"d:\\VSCode\\Python\\eGenieChatGPT_Latest\\modules\\utils.py\", line 466, in get_history_names\r\n    history_files = get_file_names_by_last_modified_time(\r\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"d:\\VSCode\\Python\\eGenieChatGPT_Latest\\modules\\utils.py\", line 454, in get_file_names_by_last_modified_time\r\n    files = get_file_names_by_type(dir, filetypes)\r\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"d:\\VSCode\\Python\\eGenieChatGPT_Latest\\modules\\utils.py\", line 435, in get_file_names_by_type\r\n    files += [f for f in os.listdir(dir) if f.endswith(type)]\r\n                         ^^^^^^^^^^^^^^^\r\nFileNotFoundError: [WinError 3] 系統找不到指定的路徑。: 'history\\\\26666'\r\nTraceback (most recent call last):\r\n  File \"d:\\VSCode\\Python\\eGenieChatGPT_Latest\\.venv\\Lib\\site-packages\\gradio\\queueing.py\", line 388, in call_prediction\r\n    output = await route_utils.call_process_api(\r\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"d:\\VSCode\\Python\\eGenieChatGPT_Latest\\.venv\\Lib\\site-packages\\gradio\\route_utils.py\", line 219, in call_process_api\r\n    output = await app.get_blocks().process_api(\r\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"d:\\VSCode\\Python\\eGenieChatGPT_Latest\\.venv\\Lib\\site-packages\\gradio\\blocks.py\", line 1437, in process_api\r\n    result = await self.call_function(\r\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"d:\\VSCode\\Python\\eGenieChatGPT_Latest\\.venv\\Lib\\site-packages\\gradio\\blocks.py\", line 1109, in call_function\r\n    prediction = await anyio.to_thread.run_sync(\r\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"d:\\VSCode\\Python\\eGenieChatGPT_Latest\\.venv\\Lib\\site-packages\\anyio\\to_thread.py\", line 33, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"d:\\VSCode\\Python\\eGenieChatGPT_Latest\\.venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 877, in run_sync_in_worker_thread\r\n    return await future\r\n           ^^^^^^^^^^^^\r\n  File \"d:\\VSCode\\Python\\eGenieChatGPT_Latest\\.venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 807, in run\r\n    result = context.run(func, *args)\r\n             ^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"d:\\VSCode\\Python\\eGenieChatGPT_Latest\\.venv\\Lib\\site-packages\\gradio\\utils.py\", line 641, in wrapper\r\n    response = f(*args, **kwargs)\r\n               ^^^^^^^^^^^^^^^^^^\r\n  File \"d:\\VSCode\\Python\\eGenieChatGPT_Latest\\ChuanhuChatbot.py\", line 501, in create_greeting\r\n    loaded_stuff = current_model.auto_load()\r\n                   ^^^^^^^^^^^^^^^^^^^^^^^\r\nAttributeError: 'NoneType' object has no attribute 'auto_load'\r\nKeyboard interruption in main thread... closing server.\r\nTraceback (most recent call last):\r\n  File \"d:\\VSCode\\Python\\eGenieChatGPT_Latest\\.venv\\Lib\\site-packages\\gradio\\blocks.py\", line 2209, in block_thread\r\n    time.sleep(0.1)\r\nKeyboardInterrupt\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"d:\\VSCode\\Python\\eGenieChatGPT_Latest\\ChuanhuChatbot.py\", line 799, in <module>\r\n    demo.queue(concurrency_count=CONCURRENT_COUNT).launch(\r\n  File \"d:\\VSCode\\Python\\eGenieChatGPT_Latest\\.venv\\Lib\\site-packages\\gradio\\blocks.py\", line 2125, in launch      \r\n    self.block_thread()\r\n  File \"d:\\VSCode\\Python\\eGenieChatGPT_Latest\\.venv\\Lib\\site-packages\\gradio\\blocks.py\", line 2213, in block_thread\r\n    self.server.close()\r\n  File \"d:\\VSCode\\Python\\eGenieChatGPT_Latest\\.venv\\Lib\\site-packages\\gradio\\networking.py\", line 75, in close     \r\n    self.thread.join()\r\n  File \"C:\\Program Files\\Python311\\Lib\\threading.py\", line 1112, in join\r\n    self._wait_for_tstate_lock()\r\n  File \"C:\\Program Files\\Python311\\Lib\\threading.py\", line 1132, in _wait_for_tstate_lock\r\n    if lock.acquire(block, timeout):\r\n       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n```\n\n\n### 运行环境\n\nOS: win10\r\nBrowser: edge\r\nGradio version: 3.43.2\r\nPython version: 3.11.5\r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "ixqkedp",
      "author_type": "User",
      "created_at": "2023-11-28T22:22:49Z",
      "updated_at": "2023-12-04T06:17:05Z",
      "closed_at": "2023-12-04T06:17:05Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/965/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/965",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/965",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:31.697425",
      "comments": [
        {
          "author": "angkec",
          "body": "Heroku的部署会有同样问题",
          "created_at": "2023-11-29T15:00:38Z"
        }
      ]
    },
    {
      "issue_number": 962,
      "title": "[本地部署]: chuanhuchat.js中修改input_textbox内容后，提交submit后，不能正确获取text内容",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n我在chuanhuchat.js中调用webkit通过语音识别后，写入'user-input-tb'，\r\n```\r\nuser_input_ta = user_input_tb.querySelector(\"textarea\");\r\nuser_input_ta.value = text;\r\ndisableSendBtn();\r\n```\r\n\r\n在网页上提交，不能获取上面提交的文本。  \r\n![20231122-182601](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/42927959/87cbfb5b-f1a0-4ae1-a888-8b84aacd80c0)\r\n\r\n\n\n### 复现操作\n\n我在chuanhuchat.js中调用webkit通过语音识别后，写入'user-input-tb'，\r\n```\r\nuser_input_ta = user_input_tb.querySelector(\"textarea\");\r\nuser_input_ta.value = text;\r\ndisableSendBtn();\r\n```\r\n\r\n在网页上提交，不能获取上面提交的文本\n\n### 错误日志\n\n```shell\n2023-11-22 18:06:28,583 [INFO] [utils.py:538] 您的IP区域：Australia。\r\nfatal: not a git repository (or any of the parent directories): .git\r\nfatal: not a git repository (or any of the parent directories): .git\r\n2023-11-22 18:06:28,752 [INFO] [ChuanhuChatbot.py:802]\r\n川虎的温馨提示：访问 http://localhost:7860 查看界面\r\nRunning on local URL:  http://127.0.0.1:7860\r\n\r\nTo create a public link, set `share=True` in `launch()`.\r\n2023-11-22 18:06:29,969 [INFO] [models.py:39] 正在加载OpenAI模型: GPT3.5 Turbo\r\n2023-11-22 18:06:29,971 [INFO] [models.py:136] 模型设置为了： GPT3.5 Turbo\r\nclick voice button<>\r\ntransfer_input:< >\r\nclick voice button<>\r\n2023-11-22 18:25:15,861 [INFO] [base_model.py:464] 用户的输入为：\r\n2023-11-22 18:25:15,864 [INFO] [base_model.py:498] ☹️发生了错误：请输入对话内容。\n```\n\n\n### 运行环境\n\n```markdown\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version:\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "dereklll",
      "author_type": "User",
      "created_at": "2023-11-22T10:27:30Z",
      "updated_at": "2023-11-29T02:43:24Z",
      "closed_at": "2023-11-29T02:43:24Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/962/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/962",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/962",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:31.866573",
      "comments": [
        {
          "author": "dereklll",
          "body": "不知道是否是gradio本身的问题？还是我的用法有问题？",
          "created_at": "2023-11-22T10:35:03Z"
        },
        {
          "author": "dereklll",
          "body": "close",
          "created_at": "2023-11-29T02:43:24Z"
        }
      ]
    },
    {
      "issue_number": 941,
      "title": "[功能请求]: 支持 ChatGLM3",
      "body": "### 相关问题\n\n目前ChatGLM3还没有支持\n\n### 可能的解决办法\n\n支持ChatGLM3\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "jiawei243",
      "author_type": "User",
      "created_at": "2023-11-13T07:57:53Z",
      "updated_at": "2023-11-23T06:39:35Z",
      "closed_at": "2023-11-23T06:39:35Z",
      "labels": [
        "feature request",
        "🤖 model"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/941/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/941",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/941",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:32.059902",
      "comments": []
    },
    {
      "issue_number": 959,
      "title": "[Bug]: OpenAI.py執行時不會載入參數圖形介面的預設值",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\nwebui啟動時，右邊參數圖型介面的預設值是\r\ntemperature: 1.0\r\ntop-p:1\r\nmax context: 2000\r\nmax generations: 1000\r\npresence penalty: 0\r\nfrequency penalty: 0\r\n\r\n但在OpenAI.py執行時\r\n在def _get_response(self, stream=False)函式裡的\r\npayload = { 上方\r\n用print將數值印出\r\n發現OpenAI.py裡的值不會載入參數圖型介面的預設值\r\n\r\ntemperature: None\r\ntop-p: None\r\npresence penalty: 0\r\nfrequency penalty: 0\r\nmax generations: None\r\n\r\n**另外max context這個參數在OpenAI.py裡似呼沒用到？**\r\n\r\n![2023-11-21 22 40 36](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/53467418/f11218fa-9bf0-4e3d-b324-fb7a8bf0a70f)\r\n\r\n\n\n### 复现操作\n\n但在OpenAI.py執行時\r\n在def _get_response(self, stream=False)函式裡的\r\npayload = { 上方\r\n用print將數值印出\r\n發現OpenAI.py裡的值不會設定參數圖型介面的預設值\r\n\r\ntemperature: None\r\ntop-p: None\r\npresence penalty: 0\r\nfrequency penalty: 0\r\nmax generations: None\r\n\r\n**另外max context這個參數在OpenAI.py裡似呼沒用到？**\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: win10\r\n- Browser: edge\r\n- Gradio version: 3.43.2\r\n- Python version: 3.11.5\r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "ixqkedp",
      "author_type": "User",
      "created_at": "2023-11-21T15:04:20Z",
      "updated_at": "2023-11-22T13:58:27Z",
      "closed_at": null,
      "labels": [
        "bug",
        "👍 good"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/959/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/959",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/959",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:32.059921",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "也许我们不该这么显示所谓的预设🤔，而应该加一个启用开关什么的…………？",
          "created_at": "2023-11-21T17:57:30Z"
        },
        {
          "author": "ixqkedp",
          "body": "但temperature的預設值如果是None，在詢問AI模型時不會有問題？",
          "created_at": "2023-11-22T13:58:26Z"
        }
      ]
    },
    {
      "issue_number": 958,
      "title": "[功能请求]: 加上语音识别功能",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n增加语音输入识别和语音播放文字的功能，这样可以实现语音对话，谢谢！\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n可以参考Dify或FastGPT的实现。",
      "state": "open",
      "author": "daidong78",
      "author_type": "User",
      "created_at": "2023-11-21T08:59:48Z",
      "updated_at": "2023-11-22T01:37:19Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/958/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/958",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/958",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:32.229230",
      "comments": [
        {
          "author": "rutther",
          "body": "> ### 相关问题\r\n> _没有回应_\r\n> \r\n> ### 可能的解决办法\r\n> 增加语音输入识别和语音播放文字的功能，这样可以实现语音对话，谢谢！\r\n> \r\n> ### 帮助开发\r\n> * [x] 我愿意协助开发！\r\n> \r\n> ### 补充说明\r\n> 可以参考Dify或FastGPT的实现。\r\n\r\n我另外写了两个服务脚本实现的这个功能,一个是语音输入转文本,并且可以在页面上写用户ID进行标记,\r\n生成相应文本队列.之后将文本输出到gradio的端口返回生成文本.\r\n语音合成服务我是起了一个本地bertvits2的服务,将产生的回答文本进行播放.\r\n不过我写的非常粗糙.如果开发者有群组,",
          "created_at": "2023-11-22T01:35:58Z"
        }
      ]
    },
    {
      "issue_number": 960,
      "title": "[Bug]: 添加的自定义prompt模板读取错误",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n在flowgpt上找到了个prompt，想要将它加到templates文件里的自定义模板中，我将其按CSV格式做了个文件后，发现在浏览器中选择加载这个prompt模板时会显示Error，添加的其它自定义prompt文件却都能正常加载读取，怀疑是不是因为这个prompt的字符串里存在不兼容的特殊字符导致的。\r\n[NovelGPT Prompts.csv](https://github.com/GaiZhenbiao/ChuanhuChatGPT/files/13428049/NovelGPT.Prompts.csv)\r\n\n\n### 复现操作\n\n1.将此prompt文件添加到templates文件夹中\r\n1.正常完成本地部署，打开了浏览器\r\n2.在浏览器中加载此prompt\n\n### 错误日志\n\n```shell\nTraceback (most recent call last):\r\n  File \"F:\\ChuanhuChatGPT\\ChuanhuChat\\lib\\site-packages\\gradio\\queueing.py\", line 388, in call_prediction\r\n    output = await route_utils.call_process_api(\r\n  File \"F:\\ChuanhuChatGPT\\ChuanhuChat\\lib\\site-packages\\gradio\\route_utils.py\", line 219, in call_process_api\r\n    output = await app.get_blocks().process_api(\r\n  File \"F:\\ChuanhuChatGPT\\ChuanhuChat\\lib\\site-packages\\gradio\\blocks.py\", line 1437, in process_api\r\n    result = await self.call_function(\r\n  File \"F:\\ChuanhuChatGPT\\ChuanhuChat\\lib\\site-packages\\gradio\\blocks.py\", line 1109, in call_function\r\n    prediction = await anyio.to_thread.run_sync(\r\n  File \"F:\\ChuanhuChatGPT\\ChuanhuChat\\lib\\site-packages\\anyio\\to_thread.py\", line 33, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n  File \"F:\\ChuanhuChatGPT\\ChuanhuChat\\lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 877, in run_sync_in_worker_thread\r\n    return await future\r\n  File \"F:\\ChuanhuChatGPT\\ChuanhuChat\\lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 807, in run\r\n    result = context.run(func, *args)\r\n  File \"F:\\ChuanhuChatGPT\\ChuanhuChat\\lib\\site-packages\\gradio\\utils.py\", line 641, in wrapper\r\n    response = f(*args, **kwargs)\r\n  File \"F:\\ChuanhuChatGPT\\modules\\utils.py\", line 436, in load_template\r\n    lines = list(reader)\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\codecs.py\", line 322, in decode\r\n    (result, consumed) = self._buffer_decode(data, self.errors, final)\r\nUnicodeDecodeError: 'utf-8' codec can't decode byte 0xa1 in position 1817: invalid start byte\r\n```\n```\n\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "max-su-2019",
      "author_type": "User",
      "created_at": "2023-11-21T15:34:02Z",
      "updated_at": "2023-11-21T15:44:50Z",
      "closed_at": "2023-11-21T15:43:09Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/960/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/960",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/960",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:32.407948",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "这个文件是用Windows的一个编码保存的\r\n<img width=\"135\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/51039745/0419f280-b584-4763-88d1-4933552dd7f3\">\r\n用VSCode等文本编辑器转换成utf-8编码即可，我帮你转化了下：\r\n[NovelGPT Prompts.csv](https://github.com/GaiZhenbiao/ChuanhuChatGPT/files/13428144/NovelGPT.Prompts.csv)",
          "created_at": "2023-11-21T15:40:56Z"
        },
        {
          "author": "max-su-2019",
          "body": "好的明白了!",
          "created_at": "2023-11-21T15:44:49Z"
        }
      ]
    },
    {
      "issue_number": 930,
      "title": "[Bug]: 切换到星火大模型再切换回openai chatgpt api后报错",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n切换使用星火大模型后再切换回ChatGPT系列API时报错，报错显示在给OpenAI接口发送API KEY时发送了之前星火大模型的API\n\n### 复现操作\n\n1. 正常本地部署；\r\n2. 默认使用ChatGPT-3.5-Turbo模型；\r\n3. 切换至星火大模型并进行对话；\r\n4. 切换回ChatGPT-3.5-Turbo模型并对话；\r\n5. 右上角显示报错信息。\n\n### 错误日志\n\n```shell\n☹️Error: { \"error\": { \"message\": \"Incorrect API key provided: [[Config中配置的星火大模型API KEY]]. You can find your API key at https://platform.openai.com/account/api-keys.\", \"type\": \"invalid_request_error\", \"param\": null, \"code\": \"invalid_api_key\" }}\n```\n\n\n### 运行环境\n\n- Server OS: Ubuntu 20.04 LTS x86_64\r\n- Client Browser: Chrome\r\n- Gradio version:  3.43.2\r\n- Python version:  3.8.0\r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "youqie",
      "author_type": "User",
      "created_at": "2023-11-08T01:53:41Z",
      "updated_at": "2023-11-21T12:13:51Z",
      "closed_at": "2023-11-21T12:13:50Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/930/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/930",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/930",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:32.592165",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "我相信这个bug已经被修复了。",
          "created_at": "2023-11-21T12:13:50Z"
        }
      ]
    },
    {
      "issue_number": 945,
      "title": "[功能请求]: 使用ENV代替config.json",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n目前的程序框架使用config.json储存相关设置，但这种方法并非业界标准，更通用的方法是使用ENV文件，其主要好处是支持注释，甚至添加范例。\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "yongtao-wang",
      "author_type": "User",
      "created_at": "2023-11-15T08:08:08Z",
      "updated_at": "2023-11-21T07:51:12Z",
      "closed_at": "2023-11-21T07:51:11Z",
      "labels": [
        "💭 exploration"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/945/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/945",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/945",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:32.796522",
      "comments": [
        {
          "author": "MZhao-ouo",
          "body": "你可以给出例子吗？config.json 也是挺常用的一种配置方法，并且我们也支持注释，范例可以写在注释里面",
          "created_at": "2023-11-15T08:26:37Z"
        },
        {
          "author": "yongtao-wang",
          "body": "JSON does not really support comment, see: https://stackoverflow.com/questions/244777/can-comments-be-used-in-json\r\nAnd here is an example of using .env to load local variables: https://dev.to/jakewitcher/using-env-files-for-environment-variables-in-python-applications-55a1\r\n\r\nSorry for being unable",
          "created_at": "2023-11-16T18:13:40Z"
        },
        {
          "author": "Keldos-Li",
          "body": "We are actually using jsonc for JSON with comments... I am not sure whether it's worth transferring the configuration file to `.env`. 🤔",
          "created_at": "2023-11-16T18:34:46Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "我们目前使用`comment_json`(JSON with Comments)来在JSON中添加注释，并没有问题～",
          "created_at": "2023-11-17T04:36:22Z"
        }
      ]
    },
    {
      "issue_number": 951,
      "title": "[功能请求]: 集成GPT-4 turbo的多模态模型吗，包括图片和语音功能，并且适配手机平台使用",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n集成GPT-4 turbo的多模态模型吗，包括图片和语音功能，并且适配手机平台使用\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "gupeihua",
      "author_type": "User",
      "created_at": "2023-11-17T06:12:41Z",
      "updated_at": "2023-11-21T07:50:58Z",
      "closed_at": "2023-11-21T07:50:58Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/951/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/951",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/951",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:32.985266",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "现在就支持GPT4 Turbo，也支持图片，也适配了手机平台。语音功能暂不考虑，可以用输入法自带的语音转文字功能，和openai的差不了多少。",
          "created_at": "2023-11-21T07:50:58Z"
        }
      ]
    },
    {
      "issue_number": 953,
      "title": "[功能请求]: GPT-4 Turbo模型的Token长度限制似乎有问题？",
      "body": "### 相关问题\n\n使用GPT-4 Turbo模型时，进行了三四轮对话就开始忘掉之前的内容了。但是GPT-4 Turbo模型是支持128K的，是不是忘了更改相关内容了？\n\n### 可能的解决办法\n\n更改检查Token是否超限的相关代码。\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "moerail",
      "author_type": "User",
      "created_at": "2023-11-17T16:15:59Z",
      "updated_at": "2023-11-20T18:47:51Z",
      "closed_at": "2023-11-18T06:21:58Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/953/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/953",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/953",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:33.165553",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "确实存在这个问题，现在修复了～",
          "created_at": "2023-11-18T06:21:58Z"
        },
        {
          "author": "moerail",
          "body": "> 确实存在这个问题，现在修复了～\r\n\r\n请问怎么更新呢？我在Hugging Face和本地部署的依然有同样问题。",
          "created_at": "2023-11-19T15:26:57Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "git clone 主线代码；huggingface的版本我刚刚更新啦",
          "created_at": "2023-11-20T05:16:28Z"
        },
        {
          "author": "moerail",
          "body": "谢谢提示！已经更新了，然后看到修好了!\r\n________________________________\r\nFrom: Chuan Hu ***@***.***>\r\nSent: Monday, November 20, 2023 6:16\r\nTo: GaiZhenbiao/ChuanhuChatGPT ***@***.***>\r\nCc: 西园寺铃 ***@***.***>; Author ***@***.***>\r\nSubject: Re: [GaiZhenbiao/ChuanhuChatGPT] [功能请求]: GPT-4 Turbo模型的Token长度限制似乎有问题？ (Issue #9",
          "created_at": "2023-11-20T18:47:51Z"
        }
      ]
    },
    {
      "issue_number": 955,
      "title": "[Bug]: RAW-MESSAGE中的LaTeX公式文本在DOM元素刷新时被错误地渲染",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\nRAW-MESSAGE中的LaTeX公式文本在DOM元素刷新时被错误地渲染。例如，当前一条消息包含LaTeX文本时，继续对话后（或与任意滑块交互）之前消息的raw message中的latex文本会被错误地渲染。\r\n\r\n这是由于escape_markdown的结果在网页元素渲染时没有被转义造成的。HTML中仍然使用了未经转义的字符。\n\n### 复现操作\n\n见上 ，此处从略。\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\nwill fix.",
      "state": "closed",
      "author": "Keldos-Li",
      "author_type": "User",
      "created_at": "2023-11-18T09:40:17Z",
      "updated_at": "2023-11-18T15:06:36Z",
      "closed_at": "2023-11-18T15:06:36Z",
      "labels": [
        "bug",
        "📌 confirmed"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/955/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "Keldos-Li"
      ],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/955",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/955",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:33.352028",
      "comments": []
    },
    {
      "issue_number": 952,
      "title": "[Bug]: `\\[ \\]` 和 `\\( \\)`形式的 Latex 公式不會被渲染",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n```\r\n當然可以，這裡有幾個較為複雜的數學公式：\r\n\r\n1. 高斯積分 (Gaussian Integral):\r\n\\[ \\int_{-\\infty}^{\\infty} e^{-x^2} dx = \\sqrt{\\pi} \\]\r\n\r\n2. 正弦積分和餘弦積分 (Sine Integral and Cosine Integral):\r\n\\[ \\text{Si}(x) = \\int_{0}^{x} \\frac{\\sin(t)}{t} dt \\]\r\n\\[ \\text{Ci}(x) = -\\int_{x}^{\\infty} \\frac{\\cos(t)}{t} dt \\]\r\n\r\n3. Riemann Zeta 函數的解析延拓 (Analytic Continuation) 公式:\r\n\\[ \\zeta(s) = 2^s \\pi^{s-1} \\sin\\left(\\frac{\\pi s}{2}\\right) \\Gamma(1-s) \\zeta(1-s) \\]\r\n其中 \\( \\Gamma(s) \\) 是伽瑪函數 (Gamma function)。\r\n\r\n4. 橢圓積分 (Elliptic Integral) 的第一種完全形式:\r\n\\[ K(k) = \\int_{0}^{\\frac{\\pi}{2}} \\frac{1}{\\sqrt{1 - k^2 \\sin^2(\\theta)}} d\\theta \\]\r\n\r\n5. 黎曼曲面上的柯西積分公式 (Cauchy's Integral Formula on a Riemann Surface):\r\n\\[ f(a) = \\frac{1}{2\\pi i} \\oint_\\gamma \\frac{f(z)}{z-a} dz \\]\r\n其中 \\( \\gamma \\) 是纏繞點 \\( a \\) 的一條曲線。\r\n\r\n6. 貝塞爾函數 (Bessel Function) 的積分表示:\r\n\\[ J_n(x) = \\frac{1}{\\pi} \\int_{0}^{\\pi} \\cos(n \\tau - x \\sin \\tau) d\\tau \\]\r\n\r\n這些公式概覽了不同數學分支的深度和複雜性，包括積分學、特殊函數、複變函數理論以及數學物理中的概念。\r\n```\r\n\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/45501123/8118865e-c1e1-4847-800f-b21b1fd15ec8)\r\n\n\n### 复现操作\n\n要求GPT給出複雜的數學公式\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: Windows 11 22H2\r\n- Browser: Chrome\r\n- Gradio version: 3.43.2\r\n- Python version: 3.10.11\r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "misunonozomi",
      "author_type": "User",
      "created_at": "2023-11-17T15:06:08Z",
      "updated_at": "2023-11-18T07:48:06Z",
      "closed_at": null,
      "labels": [
        "bug",
        "wontfix",
        "🤷 no can do"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/952/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/952",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/952",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:33.352044",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "这种公式形式（`\\[ \\]` or `\\( \\)`）和Markdown中使用的转义字符`\\`冲突了……这恐怕解决不了，也许应该在对话中告诉LLM使用$形式的。\r\n\r\n不过现在LATEX渲染确实有点问题来着，我看看怎么调整一下。",
          "created_at": "2023-11-18T07:46:33Z"
        }
      ]
    },
    {
      "issue_number": 954,
      "title": "[其他]: token计算是否正确？",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 错误描述\n\n我使用GPT-3.5使用时，发现token计算对不上，请问token是否有问题？\r\n\r\n第一次计算的结果\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/6935703/d2508383-6ba0-4536-a5e1-2760c8c2deeb)\r\n\r\n第二次计算结果\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/6935703/6b886780-03fb-4619-a10c-96d73835938e)\r\n\r\n使用官方的计算结果(官方计算地址:https://platform.openai.com/tokenizer)\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/6935703/e6fa6cfb-bbec-4d03-b144-0340e4e050bc)\r\n\r\n\n\n### 复现操作\n\n1，在本地成功部署\r\n2，打开对话框，使用GPT-3.5模型对话输入，1+1=？，连续两次\r\n3，每次计算结果都和官方Token计算对不上\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n(或您的其他运行环境信息)\r\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "longjq",
      "author_type": "User",
      "created_at": "2023-11-18T06:13:02Z",
      "updated_at": "2023-11-18T06:27:32Z",
      "closed_at": "2023-11-18T06:27:31Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/954/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/954",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/954",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:33.536024",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "这是因为Chat模型存在一些额外开销。OpenAI没有提供流式传输时的准确token计数，因此流式传输时显示的token计数只是一个比较准确的估算。在设置里关闭流式传输，就可以看到OpenAI提供的准确的token消耗，如下图：\r\n<img width=\"853\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/51039745/e9f0feed-533a-4f5b-9c9b-a0bd2122b3d6\">\r\n",
          "created_at": "2023-11-18T06:27:03Z"
        }
      ]
    },
    {
      "issue_number": 928,
      "title": "[功能请求]: 请问什么时候能够支持文心一言呢",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n请问什么时候能够支持文心一言呢\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "KcNcoL",
      "author_type": "User",
      "created_at": "2023-11-07T06:36:59Z",
      "updated_at": "2023-11-17T09:08:58Z",
      "closed_at": "2023-11-17T09:08:58Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/928/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/928",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/928",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:33.711012",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "近期支持一下～",
          "created_at": "2023-11-07T07:36:33Z"
        },
        {
          "author": "XudongLiu",
          "body": "我有文新的接口，可以开发一下。",
          "created_at": "2023-11-08T03:29:30Z"
        }
      ]
    },
    {
      "issue_number": 946,
      "title": "[Bug]: 为什么官方的Hugging Face 演示站点总结PDF报错",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n![WX20231115-165950@2x](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/10751712/107f0fa0-262f-4fce-ab16-81890466050e)\r\n\n\n### 复现操作\n\n我添加了Key，上传了一个pdf文件，点击总结之后报错了。\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: mac 14.2 Beta版(23C5030f)\r\n- Browser: Chrome\r\n- Gradio version: 官方演示站点\r\n- Python version: 官方演示站点\r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\nhttps://huggingface.co/spaces/JohnSmith9982/ChuanhuChatGPT\r\n我在官方的演示站点尝试PDF总结的。",
      "state": "closed",
      "author": "onlinedear",
      "author_type": "User",
      "created_at": "2023-11-15T09:04:23Z",
      "updated_at": "2023-11-17T06:29:50Z",
      "closed_at": "2023-11-17T06:29:50Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/946/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/946",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/946",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:33.918400",
      "comments": [
        {
          "author": "cfanlu",
          "body": "好像是langchain和openai版本有冲突，我本地部署也是一样，文档已上传后台就报错”索引构建失败“\r\n后来参考这个帖子，改了下版本就可以了。\r\nhttps://community.openai.com/t/attributeerror-module-openai-has-no-attribute-error/486676/9\r\nlangchain==0.0.316\r\nopenai==0.28.1",
          "created_at": "2023-11-16T07:56:57Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "我更新了演示的版本，现在和GitHub同步了，应该没问题了。",
          "created_at": "2023-11-17T06:29:50Z"
        }
      ]
    },
    {
      "issue_number": 950,
      "title": "[Bug]: 歷史記綠 .md檔問題",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n1. 刪除歷史記錄時只會刪除.json檔，不會刪除.md檔，例如將歷史記綠A刪除，history資料夾夾裡的檔案會由A.json、A.md變成A.md。\r\n2. 重新命名歷史記錄時，原本的.md檔不會被刪除，例如將歷史記錄A改名成B，history資料夾夾裡的檔案會由A.json、A.md變成A.md、B.json、B.md。\n\n### 复现操作\n\n1.將歷史記綠A刪除，history資料夾夾裡的檔案會由A.json、A.md變成A.md。\r\n2. 將歷史記錄A改名成B，history資料夾夾裡的檔案會由A.json、A.md變成A.md、B.json、B.md。\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "ixqkedp",
      "author_type": "User",
      "created_at": "2023-11-17T00:18:01Z",
      "updated_at": "2023-11-17T04:27:48Z",
      "closed_at": "2023-11-17T04:27:41Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/950/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/950",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/950",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:34.094564",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "修复啦",
          "created_at": "2023-11-17T04:27:48Z"
        }
      ]
    },
    {
      "issue_number": 948,
      "title": "[Docker]: 索引构建失败！module 'openai' has no attribute 'error'",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n索引构建失败！module 'openai' has no attribute 'error'\r\n\n\n### 复现操作\n\nDocker部署完后，问答正常，上传文件总是索引失败\n\n### 错误日志\n\n```shell\n索引构建失败！module 'openai' has no attribute 'error'\n```\n\n\n### 运行环境\n\n- OS: \r\n- Docker version: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "mysuperdoor",
      "author_type": "User",
      "created_at": "2023-11-16T10:05:38Z",
      "updated_at": "2023-11-16T11:53:38Z",
      "closed_at": "2023-11-16T11:53:38Z",
      "labels": [
        "question",
        "docker deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/948/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/948",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/948",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:34.264005",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "请更新langchain版本：\r\nhttps://github.com/GaiZhenbiao/ChuanhuChatGPT/discussions/947#discussioncomment-7583659",
          "created_at": "2023-11-16T11:53:38Z"
        }
      ]
    },
    {
      "issue_number": 939,
      "title": "目前在线搜索不能使用",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n使用docker部署，目前在线搜索不能使用，勾选就报错\r\n![屏幕截图 2023-11-12 170928](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/73843390/92806775-e30c-4f5b-b633-7a6bc222769b)\r\n\n\n### 复现操作\n\n使用docker部署，目前在线搜索不能使用，勾选就报错，不勾选可以正常回答，我已经看过以前类似的issue了，无法解决，我的服务器是国外的，不存在网络问题，麻烦作者抽个解决一下呗，感谢！\n\n### 错误日志\n\n```shell\n2023-11-12 09:04:00,194 [WARNING] [duckduckgo_search.py:52] _get_url() https://lite.duckduckgo.com/lite/ HTTPStatusError Client error '403 Forbidden' for url 'https://lite.duckduckgo.com/lite/'\r\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403\r\n2023-11-12 09:04:03,351 [WARNING] [duckduckgo_search.py:52] _get_url() https://lite.duckduckgo.com/lite/ HTTPStatusError Client error '403 Forbidden' for url 'https://lite.duckduckgo.com/lite/'\r\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403\r\n2023-11-12 09:04:06,512 [WARNING] [duckduckgo_search.py:52] _get_url() https://lite.duckduckgo.com/lite/ HTTPStatusError Client error '403 Forbidden' for url 'https://lite.duckduckgo.com/lite/'\r\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403\r\nTraceback (most recent call last):\r\n  File \"/root/.local/lib/python3.9/site-packages/gradio/queueing.py\", line 388, in call_prediction\r\n    output = await route_utils.call_process_api(\r\n  File \"/root/.local/lib/python3.9/site-packages/gradio/route_utils.py\", line 219, in call_process_api\r\n    output = await app.get_blocks().process_api(\r\n  File \"/root/.local/lib/python3.9/site-packages/gradio/blocks.py\", line 1437, in process_api\r\n    result = await self.call_function(\r\n  File \"/root/.local/lib/python3.9/site-packages/gradio/blocks.py\", line 1123, in call_function\r\n    prediction = await utils.async_iteration(iterator)\r\n  File \"/root/.local/lib/python3.9/site-packages/gradio/utils.py\", line 503, in async_iteration\r\n    return await iterator.__anext__()\r\n  File \"/root/.local/lib/python3.9/site-packages/gradio/utils.py\", line 496, in __anext__\r\n    return await anyio.to_thread.run_sync(\r\n  File \"/root/.local/lib/python3.9/site-packages/anyio/to_thread.py\", line 33, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n  File \"/root/.local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py\", line 877, in run_sync_in_worker_thread\r\n    return await future\r\n  File \"/root/.local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py\", line 807, in run\r\n    result = context.run(func, *args)\r\n  File \"/root/.local/lib/python3.9/site-packages/gradio/utils.py\", line 479, in run_sync_iterator_async\r\n    return next(iterator)\r\n  File \"/root/.local/lib/python3.9/site-packages/gradio/utils.py\", line 629, in gen_wrapper\r\n    yield from f(*args, **kwargs)\r\n  File \"/app/modules/utils.py\", line 36, in predict\r\n    for i in iter:\r\n  File \"/app/modules/models/base_model.py\", line 439, in predict\r\n    limited_context, fake_inputs, display_append, inputs, chatbot = self.prepare_inputs(\r\n  File \"/app/modules/models/base_model.py\", line 393, in prepare_inputs\r\n    for r in islice(ddgs_gen, 10):\r\n  File \"/root/.local/lib/python3.9/site-packages/duckduckgo_search/duckduckgo_search.py\", line 95, in text\r\n    for i, result in enumerate(results, start=1):\r\n  File \"/root/.local/lib/python3.9/site-packages/duckduckgo_search/duckduckgo_search.py\", line 274, in _text_lite\r\n    resp = self._get_url(\"POST\", \"https://lite.duckduckgo.com/lite/\", data=payload)\r\n  File \"/root/.local/lib/python3.9/site-packages/duckduckgo_search/duckduckgo_search.py\", line 54, in _get_url\r\n    raise ex\r\n  File \"/root/.local/lib/python3.9/site-packages/duckduckgo_search/duckduckgo_search.py\", line 48, in _get_url\r\n    resp.raise_for_status()\r\n  File \"/root/.local/lib/python3.9/site-packages/httpx/_models.py\", line 749, in raise_for_status\r\n    raise HTTPStatusError(message, request=request, response=self)\r\nhttpx.HTTPStatusError: Client error '403 Forbidden' for url 'https://lite.duckduckgo.com/lite/'\r\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403\n```\n\n\n### 运行环境\n\n- OS: \r\n- Docker version: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Suyuan406",
      "author_type": "User",
      "created_at": "2023-11-12T09:12:54Z",
      "updated_at": "2023-11-16T08:34:02Z",
      "closed_at": "2023-11-16T08:31:39Z",
      "labels": [
        "bug",
        "📌 confirmed"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/939/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/939",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/939",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:34.435161",
      "comments": [
        {
          "author": "yy1781051483",
          "body": "+1",
          "created_at": "2023-11-13T03:57:35Z"
        },
        {
          "author": "litian-98",
          "body": "+1",
          "created_at": "2023-11-13T05:52:07Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "好的，我调查一下",
          "created_at": "2023-11-13T06:44:54Z"
        },
        {
          "author": "Nativu5",
          "body": "能复现。\r\n\r\n```\r\n2023-11-14 10:07:27,082 [WARNING] [duckduckgo_search.py:52] _get_url() https://lite.duckduckgo.com/lite/ HTTPStatusError Client error '403 Forbidden' for url 'https://lite.duckduckgo.com/lite/'\r\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403\r\n20",
          "created_at": "2023-11-14T11:45:09Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "请升级duckduckgo的版本，并重新安装gradio：\r\n```\r\npip install duckduckgo-search --upgrade\r\npip install gradio==3.43.2\r\n```\r\n经过我的测试，这样可以解决在线搜索不能用的问题。在最新的依赖中，我提升了duckduckgo的版本。",
          "created_at": "2023-11-16T08:33:38Z"
        }
      ]
    },
    {
      "issue_number": 943,
      "title": "[功能请求]: 请求增加限制用户可用模型配置项",
      "body": "### 相关问题\n\n公司内部使用的GPT key使用川虎搭的网站，最近GPT4 Turbo发布后GPT4的使用价格高于GPT4 Turbo，但仍然有人会选择GPT4使用\n\n### 可能的解决办法\n\nconfig.json中增加一个json配置项来决定用户可选择哪些模型，不需要根据用户区分，全部统一即可\r\n配置项类似于\"available_model\": [\"GPT4 Turbo\", \"GPT4 Vision\"]\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "morrigank12",
      "author_type": "User",
      "created_at": "2023-11-14T01:28:11Z",
      "updated_at": "2023-11-15T03:27:14Z",
      "closed_at": "2023-11-15T03:27:00Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/943/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/943",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/943",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:34.647928",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "好的",
          "created_at": "2023-11-14T03:02:30Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "现在加入了这个功能啦",
          "created_at": "2023-11-15T03:27:13Z"
        }
      ]
    },
    {
      "issue_number": 510,
      "title": "[功能请求]: 显示每个用户的使用额度",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n创建一个csv文件把用户名和对应使用的token储存在本地，每次response的时候更新\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "realnoob007",
      "author_type": "User",
      "created_at": "2023-04-02T08:30:39Z",
      "updated_at": "2023-11-14T03:34:26Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/510/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/510",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/510",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:34.827110",
      "comments": [
        {
          "author": "hengyanqwe",
          "body": "很难不支持",
          "created_at": "2023-11-14T03:34:26Z"
        }
      ]
    },
    {
      "issue_number": 886,
      "title": "[本地部署]: 本地部署启动报错",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n按照文档教程 \r\ngit clone https://github.com/GaiZhenbiao/ChuanhuChatGPT.git\r\ncd ChuanhuChatGPT\r\npip install -r requirements.txt\r\n然后，在项目文件夹中复制一份 config_example.json，并将其重命名为 config.json，在其中填入 API-Key 等设置。\r\n\r\npython ChuanhuChatbot.py\r\n报错如下\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/108260847/3c0ee603-cb65-474c-8db8-c4b6d23a43d5)\r\n\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/108260847/dabc2fd4-2978-489e-bfb0-cb0102d2784a)\r\n\n\n### 复现操作\n\n啥也没干 启动报错\n\n### 错误日志\n\n```shell\nPS D:\\git\\ChuanhuChatGP> python ChuanhuChatbot.py\r\n'TZ' 不是内部或外部命令，也不是可运行的程序\r\n或批处理文件。\r\nD:\\git\\ChuanhuChatGP\\modules\\overwrites.py:89: GradioUnusedKwargWarning: You have unused kwarg parameters in JSON, please remove them: {'readonly': True}\r\n  res = original_IOComponent_init(self, *args, **kwargs)\r\nRunning on local URL:  http://192.168.5.88:7860\r\n\r\nCould not create share link. Please check your internet connection or our status page: https://status.gradio.app.\r\nTraceback (most recent call last):\r\n  File \"D:\\Program Files\\Python\\Lib\\site-packages\\gradio\\queueing.py\", line 388, in call_prediction\r\n    output = await route_utils.call_process_api(\r\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"D:\\Program Files\\Python\\Lib\\site-packages\\gradio\\route_utils.py\", line 219, in call_process_api\r\n    output = await app.get_blocks().process_api(\r\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"D:\\Program Files\\Python\\Lib\\site-packages\\gradio\\blocks.py\", line 1437, in process_api\r\n    result = await self.call_function(\r\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"D:\\Program Files\\Python\\Lib\\site-packages\\gradio\\blocks.py\", line 1109, in call_function\r\n    prediction = await anyio.to_thread.run_sync(\r\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"D:\\Program Files\\Python\\Lib\\site-packages\\anyio\\to_thread.py\", line 33, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"D:\\Program Files\\Python\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 877, in run_sync_in_worker_thread\r\n    return await future\r\n           ^^^^^^^^^^^^\r\n  File \"D:\\Program Files\\Python\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 807, in run\r\n    result = context.run(func, *args)\r\n             ^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"D:\\Program Files\\Python\\Lib\\site-packages\\gradio\\utils.py\", line 641, in wrapper\r\n    response = f(*args, **kwargs)\r\n               ^^^^^^^^^^^^^^^^^^\r\n  File \"D:\\git\\ChuanhuChatGP\\ChuanhuChatbot.py\", line 496, in create_greeting\r\n    filename, system_prompt, chatbot = current_model.auto_load()\r\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"D:\\git\\ChuanhuChatGP\\modules\\models\\base_model.py\", line 762, in auto_load\r\n    filepath = get_history_filepath(self.user_identifier)\r\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"D:\\git\\ChuanhuChatGP\\modules\\utils.py\", line 679, in get_history_filepath\r\n    latest_file = new_auto_history_filename(username)\r\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"D:\\git\\ChuanhuChatGP\\modules\\utils.py\", line 671, in new_auto_history_filename\r\n    now = i18n(\"新对话 \") + datetime.datetime.now().strftime('%m-%d %H꞉%M')\r\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nUnicodeEncodeError: 'locale' codec can't encode character '\\ua789' in position 8: encoding error\n```\n\n\n### 运行环境\n\n```markdown\n- OS:  Windows11 22H2\r\n- Browser: Chrome\r\n- Gradio version: 3.43.2\r\n- Python version: 3.11\n```\n\n\n### 补充说明\n\n/",
      "state": "closed",
      "author": "Timoshao",
      "author_type": "User",
      "created_at": "2023-09-14T10:05:58Z",
      "updated_at": "2023-11-12T16:26:57Z",
      "closed_at": "2023-11-12T16:26:57Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 8,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/886/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/886",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/886",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:35.021763",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "拉一下最新版代码",
          "created_at": "2023-09-14T10:16:57Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "这是 Windows 编码引起的 bug，现在已经在最新版代码里修复了。请拉取最新版本的代码。",
          "created_at": "2023-09-14T10:36:31Z"
        },
        {
          "author": "Timoshao",
          "body": "> 这是 Windows 编码引起的 bug，现在已经在最新版代码里修复了。请拉取最新版本的代码。\n请问如何拉取最新代码？\n我用git clone https://github.com/GaiZhenbiao/ChuanhuChatGPT.git\n和发行版20230830下载的都测试了",
          "created_at": "2023-09-14T12:30:41Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "> > 这是 Windows 编码引起的 bug，现在已经在最新版代码里修复了。请拉取最新版本的代码。\r\n> > 请问如何拉取最新代码？\r\n> > 我用git clone https://github.com/GaiZhenbiao/ChuanhuChatGPT.git\r\n> > 和发行版20230830下载的都测试了\r\n\r\n在 git clone 的目录下执行 `git pull` 就行了",
          "created_at": "2023-09-14T12:31:43Z"
        },
        {
          "author": "Timoshao",
          "body": "> > > 这是 Windows 编码引起的 bug，现在已经在最新版代码里修复了。请拉取最新版本的代码。\r\n> > > 请问如何拉取最新代码？\r\n> > > 我用git clone https://github.com/GaiZhenbiao/ChuanhuChatGPT.git\r\n> > > 和发行版20230830下载的都测试了\r\n> \r\n> 在 git clone 的目录下执行 `git pull` 就行了\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/108260847/b5e7631e-e885-44f",
          "created_at": "2023-09-15T01:36:24Z"
        }
      ]
    },
    {
      "issue_number": 904,
      "title": "在vercel中手动输入构建和安装指令进行部署，在运行启动代码时总是报错",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 错误描述\n\nvercel部署时发生的错误\n\n### 复现操作\n\n无\n\n### 错误日志\n\n```shell\nWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\r\n  File \"ChuanhuChatbot.py\", line 312\r\n    placeholder=f\"word:likelihood\",\r\n                                 ^\r\nSyntaxError: invalid syntax\r\nError: Command \"python ChuanhuChatbot.py\" exited with 1\n```\n\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n(或您的其他运行环境信息)\r\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "iliaoke",
      "author_type": "User",
      "created_at": "2023-10-01T03:30:51Z",
      "updated_at": "2023-11-12T16:25:02Z",
      "closed_at": "2023-11-12T16:25:02Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/904/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/904",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/904",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:35.249256",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "不是很清楚vercel部署会怎么样。如果vercel使用Python，也请确保使用Python3.9及以上版本。",
          "created_at": "2023-10-02T07:18:02Z"
        },
        {
          "author": "iliaoke",
          "body": "输入命令检测了一下是Python版本太低了。但官方说默认的Python版本是3.9。我实际检测是python2，网上没查到怎么在vercel中自定义Python版本。\r\n\r\n\r\n\r\n---原始邮件---\r\n发件人: ***@***.***&gt;\r\n发送时间: 2023年10月2日(周一) 下午3:18\r\n收件人: ***@***.***&gt;;\r\n抄送: ***@***.******@***.***&gt;;\r\n主题: Re: [GaiZhenbiao/ChuanhuChatGPT] 在vercel中手动输入构建和安装指令进行部署，在运行启动代码时总是报错 (Issue #904)\r\n\r\n",
          "created_at": "2023-10-02T07:37:06Z"
        }
      ]
    },
    {
      "issue_number": 933,
      "title": "[Bug]: Literally all settings don't save. (Reset upon page reload)",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\nWhen I reload the page, all settings are being reset. Chats are also vanishing sometimes, but after I created a new user, the issue with chats disappeared (partially, because chat settings are still being reset.)\n\n### 复现操作\n\n1. Launch the web ui script \r\n2. Open the webpage in browser\r\n3. Change some settings\r\n4. Reload the webpage\r\n5. Nothing has been saved.\n\n### 错误日志\n\n```shell\nThere's absolutely no errors or even warnings indicating that something is wrong.\n```\n\n\n### 运行环境\n\n- OS: Android 12\r\n- Browser: Chrome 115.0.5790.138\r\n- Gradio version: gradio==3.43.2, gradio-client==0.5.0\r\n- Python version: 3.8, 3.11 (tried both, and either of them have same results.)\r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\nI'm running it in termux, in proot distro. Everything has installed without any issues though, so I doubt it's an issue with my environment.\r\n\r\nOh, btw, I'm using it in venv, if it helps.",
      "state": "open",
      "author": "Happ1ness-dev",
      "author_type": "User",
      "created_at": "2023-11-10T02:56:06Z",
      "updated_at": "2023-11-12T16:23:37Z",
      "closed_at": null,
      "labels": [
        "💭 exploration"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/933/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/933",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/933",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:35.429575",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "Hi, thank you for your detailed feedback. Indeed, we haven't done the function of automatically saving settings yet, and theoretically every refresh of the page will still use the settings or default settings in `config.json` instead of what we changed last time in UI. (From this perspective, this i",
          "created_at": "2023-11-10T14:14:01Z"
        }
      ]
    },
    {
      "issue_number": 917,
      "title": "[Bug]: 使用文件对话output出现�",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\nattention显示成atten�on ， simulation显示成simula�on。  文件里面都是正确的单词。但是output里面出现这个� 不知道为啥哦。谢谢您。\n\n### 复现操作\n\n正常上传文件，但是output出现�\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "zhulibing",
      "author_type": "User",
      "created_at": "2023-10-13T00:40:17Z",
      "updated_at": "2023-11-12T16:21:04Z",
      "closed_at": "2023-11-12T16:20:41Z",
      "labels": [
        "invalid",
        "question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/917/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/917",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/917",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:35.656168",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "是个比较奇怪的问题，推测是字符编码出错。这个大概和文件的编码格式有关，也许需要文件也统一使用UTF-8编码。如果您还有问题，可以进一步回复。",
          "created_at": "2023-11-12T16:20:41Z"
        }
      ]
    },
    {
      "issue_number": 822,
      "title": "[功能请求]: 能否添加上传图片功能呢？页面可否加入自助注册功能?",
      "body": "### 相关问题\n\n能否添加上传图片功能呢？类似bing的图片识别和文言一心的那种？还有页面可否加入自助注册功能？多人使用可以自助注册账号\n\n### 可能的解决办法\n\n能否添加上传图片功能呢？类似bing的图片识别和文言一心的那种？还有页面可否加入自助注册功能？多人使用可以自助注册账号\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "tutianyu101",
      "author_type": "User",
      "created_at": "2023-06-27T14:01:27Z",
      "updated_at": "2023-11-12T16:16:45Z",
      "closed_at": "2023-11-12T16:16:45Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/822/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/822",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/822",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:35.823231",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "支持上传图片的，请使用 XMChat 模型（需要申请XMChat 的 API Key）",
          "created_at": "2023-06-27T14:06:33Z"
        },
        {
          "author": "tutianyu101",
          "body": "> 支持上传图片的，请使用 XMChat 模型（需要申请XMChat 的 API Key）\r\n\r\n我说的是gpt4的，上传图片的那种。大佬这个可以实现吗？",
          "created_at": "2023-06-28T03:07:17Z"
        },
        {
          "author": "MZhao-ouo",
          "body": "> > 支持上传图片的，请使用 XMChat 模型（需要申请XMChat 的 API Key）\r\n> \r\n> 我说的是gpt4的，上传图片的那种。大佬这个可以实现吗？\r\n\r\ngpt4我们也没拿到识别图像的api，XMChat可以做到一部分识图的功能",
          "created_at": "2023-06-28T03:16:56Z"
        },
        {
          "author": "baiyi-os",
          "body": "现在有这个api了吗，目前看还是不行，报错如下：\r\n2023-10-10 21:09:49,260 [INFO] [index_func.py:25] loading file: xin.jpg\r\n2023-10-10 21:09:49,261 [ERROR] [index_func.py:73] Error loading file: xin.jpg\r\nTraceback (most recent call last):\r\n  File \"/usr/local/Python-3.9.12/lib/python3.9/site-packages/langchain/document_loade",
          "created_at": "2023-10-10T13:11:04Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "截至目前，GPT4-V还没有开放API调用，开放了我们会第一时间跟进。GPT4-V效果确实很不错～",
          "created_at": "2023-10-10T13:37:54Z"
        }
      ]
    },
    {
      "issue_number": 936,
      "title": "[其他]:  huggingface部署，使用3.5报错，☹️Error: 剩余配额不足",
      "body": "### 是否已存在现有反馈与解答？\r\n\r\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\r\n\r\n### 错误描述\r\n\r\nhuggingface部署，使用3.5报错，☹️Error: 剩余配额不足\r\n返回错误：☹️Error: 剩余配额不足，实际情况是完全够用。如图所示\r\n访问你们官方的也会返回这个错误\r\n[JohnSmith9982](https://huggingface.co/JohnSmith9982)/[ChuanhuChatGPT](https://huggingface.co/spaces/JohnSmith9982/ChuanhuChatGPT)\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/18629921/c2717aee-d165-43d9-b21a-217091db994f)\r\n\r\n\r\n### 复现操作\r\n\r\n输入密匙后，使用gpt3.5都会报这个错误，主要不知道是什么问题，无法使用。\r\n发起会话后，显示回来的内容为空，在huggingface看不到日志\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/18629921/ad59589e-8dea-48ed-943f-f9a3e4c740d5)\r\n\r\n\r\n### 错误日志\r\n\r\n_No response_\r\n\r\n### 运行环境\r\n\r\n使用 huggingface 的免费配置部署的\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "closed",
      "author": "youtehub",
      "author_type": "User",
      "created_at": "2023-11-11T03:19:43Z",
      "updated_at": "2023-11-12T07:55:37Z",
      "closed_at": "2023-11-11T03:44:55Z",
      "labels": [
        "duplicate",
        "question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/936/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/936",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/936",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:36.002616",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "你的免费增金过期了。免费增金只能在一定期限（三个月）内使用，超过这个期限就会过期没法用。",
          "created_at": "2023-11-11T03:44:55Z"
        },
        {
          "author": "youtehub",
          "body": "好的，谢谢了",
          "created_at": "2023-11-11T21:14:32Z"
        }
      ]
    },
    {
      "issue_number": 934,
      "title": "[其他]: 关于启用鉴权情况下的API调用问题",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 错误描述\n\n启动gradio的多用户后，调用api需要鉴权。\r\n而目前我查阅到的情况，除了hg的OAtuh，此外似乎也就只有cookies的方式可以让api调用时完成login。\r\n有没有什么方案可以实现api的login。\n\n### 复现操作\n\n如描述\r\ncookie测试，一个access-token-unsecure即可访问，但是仍然算不上什么办法。\r\n若有建议的方案或者思路，可否告诉我。\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: ubuntu22.04\r\n- Browser: edge\r\n- Gradio version: \r\n- Python version: \r\n(或您的其他运行环境信息)\r\n\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "rutther",
      "author_type": "User",
      "created_at": "2023-11-10T09:00:44Z",
      "updated_at": "2023-11-10T09:00:44Z",
      "closed_at": null,
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/934/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/934",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/934",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:36.206130",
      "comments": []
    },
    {
      "issue_number": 258,
      "title": "[本地部署] HTTPSConnectionPool: Failed to establish a new connection",
      "body": "请问这是什么错误呢？我已经将openai.com加入使用的代理App的代理规则里面去了。放在代理的配置文件的末尾。\r\n![image](https://user-images.githubusercontent.com/42884681/226616727-e4f7dbe5-000d-437a-8c0e-3bdaa682bf39.png)\r\n![image](https://user-images.githubusercontent.com/42884681/226616846-4c9106b2-45ee-40ca-9b3b-91af7799b7b1.png)\r\n\r\n下面是报错的内容：\r\nINFO:root:输入为：新的定时\r\nINFO:root:使用流式传输\r\nINFO:root:实时回答模式\r\nINFO:root:输入token计数: 22\r\nTraceback (most recent call last):\r\n  File \"D:\\Python39\\lib\\site-packages\\urllib3\\connection.py\", line 156, in _new_conn\r\n    conn = connection.create_connection(\r\n  File \"D:\\Python39\\lib\\site-packages\\urllib3\\util\\connection.py\", line 84, in create_connection\r\n    raise err\r\n  File \"D:\\Python39\\lib\\site-packages\\urllib3\\util\\connection.py\", line 74, in create_connection\r\n    sock.connect(sa)\r\nTimeoutError: [WinError 10060] 由于连接方在一段时间后没有正确答复或连接的主机没有反应，连接尝试失败。\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"D:\\Python39\\lib\\site-packages\\urllib3\\connectionpool.py\", line 665, in urlopen\r\n    httplib_response = self._make_request(\r\n  File \"D:\\Python39\\lib\\site-packages\\urllib3\\connectionpool.py\", line 376, in _make_request\r\n    self._validate_conn(conn)\r\n  File \"D:\\Python39\\lib\\site-packages\\urllib3\\connectionpool.py\", line 994, in _validate_conn\r\n    conn.connect()\r\n  File \"D:\\Python39\\lib\\site-packages\\urllib3\\connection.py\", line 334, in connect\r\n    conn = self._new_conn()\r\n  File \"D:\\Python39\\lib\\site-packages\\urllib3\\connection.py\", line 168, in _new_conn\r\n    raise NewConnectionError(\r\nurllib3.exceptions.NewConnectionError: <urllib3.connection.VerifiedHTTPSConnection object at 0x00000285229DB910>: Failed to establish a new connection: [WinError 10060] 由于连接方在一段时间后没有正确答复或连接的主机没有反应，连接尝试失败。\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"D:\\Python39\\lib\\site-packages\\requests\\adapters.py\", line 489, in send\r\n    resp = conn.urlopen(\r\n  File \"D:\\Python39\\lib\\site-packages\\urllib3\\connectionpool.py\", line 719, in urlopen\r\n    retries = retries.increment(\r\n  File \"D:\\Python39\\lib\\site-packages\\urllib3\\util\\retry.py\", line 436, in increment\r\n    raise MaxRetryError(_pool, url, error or ResponseError(cause))\r\nurllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='api.openai.com', port=443): Max retries exceeded with url: /v1/chat/completions (Caused by NewConnectionError('<urllib3.connection.VerifiedHTTPSConnection object at 0x00000285229DB910>: Failed to establish a new connection: [WinError 10060] 由于连接方在一段时间后没有正确答复或连接的主机没有反应，连 接尝试失败。'))\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"D:\\Python39\\lib\\site-packages\\gradio\\routes.py\", line 394, in run_predict\r\n    output = await app.get_blocks().process_api(\r\n  File \"D:\\Python39\\lib\\site-packages\\gradio\\blocks.py\", line 1075, in process_api\r\n    result = await self.call_function(\r\n  File \"D:\\Python39\\lib\\site-packages\\gradio\\blocks.py\", line 898, in call_function\r\n    prediction = await anyio.to_thread.run_sync(\r\n  File \"D:\\Python39\\lib\\site-packages\\anyio\\to_thread.py\", line 31, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n  File \"D:\\Python39\\lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 937, in run_sync_in_worker_thread\r\n    return await future\r\n  File \"D:\\Python39\\lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 867, in run\r\n    result = context.run(func, *args)\r\n  File \"D:\\Python39\\lib\\site-packages\\gradio\\utils.py\", line 549, in async_iteration\r\n    return next(iterator)\r\n  File \"D:\\Learning\\ChuanhuChatGPT\\chat_func.py\", line 329, in predict\r\n    for chatbot, history, status_text, all_token_counts in iter:\r\n  File \"D:\\Learning\\ChuanhuChatGPT\\chat_func.py\", line 133, in stream_predict\r\n    response = get_response(\r\n  File \"D:\\Learning\\ChuanhuChatGPT\\chat_func.py\", line 85, in get_response\r\n    response = requests.post(\r\n  File \"D:\\Python39\\lib\\site-packages\\requests\\api.py\", line 115, in post\r\n    return request(\"post\", url, data=data, json=json, **kwargs)\r\n  File \"D:\\Python39\\lib\\site-packages\\requests\\api.py\", line 59, in request\r\n    return session.request(method=method, url=url, **kwargs)\r\n  File \"D:\\Python39\\lib\\site-packages\\requests\\sessions.py\", line 587, in request\r\n    resp = self.send(prep, **send_kwargs)\r\n  File \"D:\\Python39\\lib\\site-packages\\requests\\sessions.py\", line 701, in send\r\n    r = adapter.send(request, **kwargs)\r\n  File \"D:\\Python39\\lib\\site-packages\\requests\\adapters.py\", line 565, in send\r\n    raise ConnectionError(e, request=request)\r\nrequests.exceptions.ConnectionError: HTTPSConnectionPool(host='api.openai.com', port=443): Max retries exceeded with url: /v1/chat/completions (Caused by NewConnectionError('<urllib3.connection.VerifiedHTTPSConnection object at 0x00000285229DB910>: Failed to establish a new connection: [WinError 10060] 由于连接方在一段时间后没有正确答复或连接的主机没有反应，连接尝试失败。'))\r\n\r\n",
      "state": "closed",
      "author": "alanjustalan",
      "author_type": "User",
      "created_at": "2023-03-21T13:17:16Z",
      "updated_at": "2023-11-08T01:26:09Z",
      "closed_at": "2023-03-22T02:39:05Z",
      "labels": [
        "question",
        "👽Proxy"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/258/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/258",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/258",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:36.206150",
      "comments": [
        {
          "author": "hiki321",
          "body": "我也遇到了同样的问题\r\n",
          "created_at": "2023-03-21T13:25:38Z"
        },
        {
          "author": "alanjustalan",
          "body": "之后代理切换全局后，代理软件显示“无法切换到此配置文件！Error:Map keys must be unique at line 9588,column 1:rules:”",
          "created_at": "2023-03-21T13:30:26Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "> 之后代理切换全局后，代理软件显示“无法切换到此配置文件！Error:Map keys must be unique at line 9588,column 1:rules:”\r\n\r\n说明你已经有rules字段了，加入新内容即可。",
          "created_at": "2023-03-21T14:25:28Z"
        },
        {
          "author": "likeyan2022",
          "body": "求解！Windows 本地部署的话怎么使用clash配置代理地址\r\n",
          "created_at": "2023-04-13T06:43:49Z"
        },
        {
          "author": "wfqyys",
          "body": "请问可以使用反代吗？",
          "created_at": "2023-11-07T14:36:48Z"
        }
      ]
    },
    {
      "issue_number": 925,
      "title": "[功能请求]: 什么时候支持讯飞星火认知大模型3.0？",
      "body": "### 相关问题\n\n获得了[讯飞星火认知大模型](https://xinghuo.xfyun.cn/)3.0的使用权限，发现目前只支持到2.0\n\n### 可能的解决办法\n\n求支持3.0\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "ryanbai",
      "author_type": "User",
      "created_at": "2023-11-03T02:43:10Z",
      "updated_at": "2023-11-03T04:53:58Z",
      "closed_at": "2023-11-03T04:53:45Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/925/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/925",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/925",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:36.488981",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "现在支持啦，去试试吧！",
          "created_at": "2023-11-03T04:53:45Z"
        }
      ]
    },
    {
      "issue_number": 924,
      "title": "[本地部署]: 本地無法部署原始<meta-llama/Llama-2-7b-chat-hf>模型",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n无法使用原版<meta-llama/Llama-2-7b-chat-hf>模型本地部署。我看了一下代码，好像只有提供量化版llama2的部署，不知道作者是否有空为这部分撰写部署代码，方便其他使用者可以部署非量化原始版llama2和微调中文版的llama2。\n\n### 复现操作\n\n因为models/models/LLaMA.py里的代码是提供gguf版模型的运行使用，所以无法原始版<meta-llama/Llama-2-7b-chat-hf>模型使用。\r\n我查看了QWEN和chatglm的HF仓库文件发现跟<meta-llama/Llama-2-7b-chat-hf>差不多，所以我尝试先把模型下载到本地，然后通过models/models/ChatGLM.py或者models /models/Qwen.py加载使用，但是报了一个错误<AttributeError: 'LlamaForCausalLM' object has no attribute 'chat_stream>。\r\n也许是我不知道正确的配置方式是什么，所以想请问作者可以提供如何配置原始版<meta-llama/Llama-2-7b-chat-hf>模型方式吗，或者可能代码本身就不支援原版llama2需要作者改写一下代码去适配llama2，谢谢！\n\n### 错误日志\n\n```shell\nTraceback (most recent call last):\r\n  File \"D:\\LLM_Project\\ChuanhuChatGPT\\modules\\models\\base_model.py\", line 479, in predict\r\n    for chatbot, status_text in iter:\r\n  File \"D:\\LLM_Project\\ChuanhuChatGPT\\modules\\models\\base_model.py\", line 288, in stream_next_chatbot\r\n    for partial_text in stream_iter:\r\n  File \"D:\\LLM_Project\\ChuanhuChatGPT\\modules\\models\\Qwen.py\", line 71, in get_answer_stream_iter\r\n    for response in self.model.chat_stream(\r\n  File \"D:\\miniconda3\\envs\\ChuanhuChatGPT\\lib\\site-packages\\torch\\nn\\modules\\module.py\", line 1614, in __getattr__\r\n    raise AttributeError(\"'{}' object has no attribute '{}'\".format(\r\nAttributeError: 'LlamaForCausalLM' object has no attribute 'chat_stream\n```\n\n\n### 运行环境\n\n```markdown\nOS: Windows11 22H2\r\nBrowser: Chrome\r\nGradio version: 3.22.1\r\nPython version: 3.11.1\n```\n\n\n### 补充说明\n\n可以让本地部署的使用者使用原本llama2的模型，和其他基于llama2的微调模型",
      "state": "open",
      "author": "HSIAOKUOWEI",
      "author_type": "User",
      "created_at": "2023-11-01T06:37:02Z",
      "updated_at": "2023-11-01T11:13:45Z",
      "closed_at": null,
      "labels": [
        "👍 good",
        "🤖 model"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/924/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/924",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/924",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:36.724272",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "那我把运行原版LLaMA 2的代码加回来，之前是用llama.cpp替换了torch。",
          "created_at": "2023-11-01T06:40:33Z"
        },
        {
          "author": "HSIAOKUOWEI",
          "body": "万分感谢作者這麽快回答！！\r\n當然也許有些人沒有那麽多GPU，還是想用量化過gguf版，也許可以在代碼裏同時保留加載原始版和加載量化版的代碼，供使用者自己選擇，謝謝！",
          "created_at": "2023-11-01T06:58:27Z"
        }
      ]
    },
    {
      "issue_number": 901,
      "title": "讯飞星火连接失败",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n在尝试访问讯飞星火大模型的时候报错。之前测试过 openai 的 api，没有问题。尝试了挂代理/不挂代理。\r\n\r\n`2023-09-27 22:24:17,468 [ERROR] [_logging.py:64] error from callback <bound method Spark_Client.on_error of <modules.models.spark.Spark_Client object at 0x1682a8d30>>: can only concatenate str (not \"WebSocketBadStatusException\") to str\r\n2023-09-27 22:24:17,468 [INFO] [_logging.py:76] tearing down on exception can only concatenate str (not \"TypeError\") to str`\n\n### 复现操作\n\n完成部署后尝试访问讯飞星火大模型。\n\n### 错误日志\n\n```shell\n2023-09-27 22:24:08,914 [INFO] [base_model.py:417] 用户的输入为：hi\r\n2023-09-27 22:24:17,468 [ERROR] [_logging.py:64] error from callback <bound method Spark_Client.on_error of <modules.models.spark.Spark_Client object at 0x1682a8d30>>: can only concatenate str (not \"WebSocketBadStatusException\") to str\r\n2023-09-27 22:24:17,468 [INFO] [_logging.py:76] tearing down on exception can only concatenate str (not \"TypeError\") to str\n```\n\n\n### 运行环境\n\n- OS: MacOS\r\n- Browser: CHROME\r\n- Gradio version: \r\n- Python version: 3.10\r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "merak0514",
      "author_type": "User",
      "created_at": "2023-09-27T14:26:12Z",
      "updated_at": "2023-11-01T11:12:45Z",
      "closed_at": "2023-10-10T05:34:51Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/901/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/901",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/901",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:36.953035",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "我测试是没问题的，你可以检查下 `config.json` 里讯飞星火的三个配置项是否设置正确：\r\n```\r\n    \"spark_appid\": \"3xxxxxxe\", // 你的 讯飞星火大模型 API AppID，用于讯飞星火大模型对话模型\r\n    \"spark_api_key\": \"c4xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx3\", // 你的 讯飞星火大模型 API Key，用于讯飞星火大模型对话模型\r\n    \"spark_api_secret\": \"YjAXXXXXXXXXXXXXXXXXXXXX4\", // 你的 讯飞星火大模型 API Secret，用",
          "created_at": "2023-10-10T05:34:51Z"
        },
        {
          "author": "merak0514",
          "body": "你好，还是出错，我确认 config.json 中是对的，讯飞官方测试代码可以正常运行。\r\n这是错误日志：\r\n2023-09-27 22:24:08,914 [INFO] [base_model.py:417] 用户的输入为：hi\r\n2023-09-27 22:24:17,468 [ERROR] [_logging.py:64] error from callback <bound method Spark_Client.on_error of <modules.models.spark.Spark_Client object at 0x1682a8d30>>: can only concat",
          "created_at": "2023-10-12T12:42:59Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "看上去还是身份认证出错了，你可以检查下。\r\n\r\n> 我测试是没问题的，你可以检查下 `config.json` 里讯飞星火的三个配置项是否设置正确：\r\n> \r\n> ```\r\n>     \"spark_appid\": \"3xxxxxxe\", // 你的 讯飞星火大模型 API AppID，用于讯飞星火大模型对话模型\r\n>     \"spark_api_key\": \"c4xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx3\", // 你的 讯飞星火大模型 API Key，用于讯飞星火大模型对话模型\r\n>     \"spark_api_secret\": \"YjAXXXXXXXXXXXXX",
          "created_at": "2023-10-12T12:46:05Z"
        },
        {
          "author": "Sugar10747",
          "body": "我遇到了同样的问题，但是我解决了，经过检查发现应该是api_key和api_secret填反了，因为星火demo和本项目代码里这两个地方是反着放了，需要注意一下",
          "created_at": "2023-11-01T08:32:16Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "离谱，应该是他们的demo写错了，我是按工作台里的来的\r\n\r\n<img width=\"476\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/51039745/f0376c86-de34-459c-88b3-967729d2dd30\">\r\n",
          "created_at": "2023-11-01T08:36:02Z"
        }
      ]
    },
    {
      "issue_number": 851,
      "title": "[功能请求]: 能否加入claude",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n在github上发现KoushikNavuluri/Claude-API这个非官方claude api，是否可以利用这个api给这个项目加入claude\n\n### 帮助开发\n\n- [x] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Diaoxiaozhang",
      "author_type": "User",
      "created_at": "2023-07-30T02:21:10Z",
      "updated_at": "2023-10-25T14:34:36Z",
      "closed_at": "2023-10-25T14:34:35Z",
      "labels": [
        "feature request",
        "🤖 model"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/851/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/851",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/851",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:37.158723",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "Resolved via d98791824586846e9871d4630b572a5bc10c9488",
          "created_at": "2023-10-25T14:34:35Z"
        }
      ]
    },
    {
      "issue_number": 911,
      "title": "[功能请求]: ",
      "body": "### 相关问题\n\n怎么把chatbot默认的output 改为英文显示\n\n### 可能的解决办法\n\n英文显示output\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "zhulibing",
      "author_type": "User",
      "created_at": "2023-10-09T21:25:04Z",
      "updated_at": "2023-10-25T14:32:53Z",
      "closed_at": "2023-10-25T14:32:53Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/911/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/911",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/911",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:37.312026",
      "comments": [
        {
          "author": "MZhao-ouo",
          "body": "可以在`config.json`里面设置语言\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/70903329/a096e1df-1e4c-46b2-bcce-92332ea9bfc0)\r\n",
          "created_at": "2023-10-10T02:09:04Z"
        },
        {
          "author": "Keldos-Li",
          "body": "他的意思应该是模型输出的语言。要输出英语，建议使用英文提问；或者输入时/system prompt里附带一句请使用英文回复。",
          "created_at": "2023-10-10T02:20:45Z"
        }
      ]
    },
    {
      "issue_number": 921,
      "title": "[Bug]: 讯飞的大模型调用不了知识库功能",
      "body": "### 这个bug是否已存在现有issue了？\r\n\r\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\r\n\r\n### 错误表现\r\n\r\n我想看看讯飞的能不能使用知识库的功能，后面发现知识库接的是openai的接口。\r\n\r\n### 复现操作\r\n\r\n![bug](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/35690593/1e9673ea-26ca-4944-a5d2-ccb25441a31d)\r\n\r\n\r\n### 错误日志\r\n\r\n```shell\r\n2023-10-22 09:36:07,880 [WARNING] [before_sleep.py:65] Retrying langchain.embeddings.openai.embed_with_retry.<locals>._embed_with_retry in 4.0 seconds as it raised Timeout: Request timed out: HTTPSConnectionPool(host='api.openai.com', port=443): Max retries exceeded with url: /v1/embeddings (Caused by ConnectTimeoutError(<urllib3.connection.HTTPSConnection object at 0x000001CA7D8B9DE0>, 'Connection to api.openai.com timed out. (connect timeout=600)')).\r\n```\r\n\r\n\r\n### 运行环境\r\n\r\n- OS: windows11\r\n- Browser: edge\r\n- Gradio version: \r\n- Python version:python3.10 \r\n\r\n\r\n### 帮助解决\r\n\r\n- [ ] 我愿意协助解决！\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "closed",
      "author": "achaosss",
      "author_type": "User",
      "created_at": "2023-10-22T01:38:12Z",
      "updated_at": "2023-10-22T13:11:45Z",
      "closed_at": "2023-10-22T06:38:52Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/921/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/921",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/921",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:37.488077",
      "comments": [
        {
          "author": "achaosss",
          "body": "文件问答只能基于gpt4吗\r\n",
          "created_at": "2023-10-22T02:53:17Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "并不是，不过这个功能仍然需要访问OpenAI服务。或者，你可以启用本地索引功能，在设置文件里把`local_embedding`设置为 True就行了。这样就不需要填写OpenAI API Key了。",
          "created_at": "2023-10-22T06:38:52Z"
        },
        {
          "author": "achaosss",
          "body": "> 启用本地索引功能\r\n\r\n启用本地索引功能之后，还需要翻墙才能用吗。问这个原因是想找一个不用翻墙就能用的知识问答大模型功能。",
          "created_at": "2023-10-22T10:07:39Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "> > 启用本地索引功能\r\n> \r\n> 启用本地索引功能之后，还需要翻墙才能用吗。问这个原因是想找一个不用翻墙就能用的知识问答大模型功能。\r\n\r\n不需要。甚至，如果使用本地大模型，可以不联网。",
          "created_at": "2023-10-22T13:11:45Z"
        }
      ]
    },
    {
      "issue_number": 923,
      "title": "[其他]: 知识库可以上传excel数据进行简单分析吗",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 错误描述\n\n我往知识库上传了一份excel数据表，希望模型可以了解到一些知识，但是模型好像识别不到内容。\r\n\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/35690593/d01a9115-2ec8-4a3e-bd44-9149a58a5772)\r\n\r\n\n\n### 复现操作\n\n因为种种原因。\r\n模型用的是讯飞大模型\r\nlocal_embedding设置为 True\r\n\r\n知识库功能好像用不了。\n\n### 错误日志\n\n```shell\n2023-10-22 18:24:49,797 [INFO] [SentenceTransformer.py:105] Use pytorch device: cpu\r\n2023-10-22 18:24:49,797 [INFO] [index_func.py:121] 找到了缓存的索引文件，加载中……\r\n2023-10-22 18:24:49,803 [INFO] [base_model.py:369] 索引获取成功，生成回答中……\r\nBatches: 100%|████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 43.59it/s] \r\n2023-10-22 18:24:50,021 [INFO] [_logging.py:76] Websocket connected\r\n2023-10-22 18:24:52,123 [INFO] [base_model.py:496] 回答为：对不起，您的问题中并没有提供关于上传的表的任何信息。为了帮助您更好地回答您的问题，我需要更多的上下文信息。例如，您可以告诉我这个表是关于什么的，或者提供一些关于表中栏位的具体信息。\r\n2023-10-22 18:25:45,118 [INFO] [base_model.py:430] 用户的输入为：我有上传什么内容\r\n2023-10-22 18:25:45,122 [INFO] [base_model.py:365] 加载索引中……\r\n2023-10-22 18:25:45,125 [INFO] [SentenceTransformer.py:66] Load pretrained SentenceTransformer: sentence-transformers/distiluse-base-multilingual-cased-v2\r\n2023-10-22 18:25:46,424 [INFO] [SentenceTransformer.py:105] Use pytorch device: cpu\r\n2023-10-22 18:25:46,425 [INFO] [index_func.py:121] 找到了缓存的索引文件，加载中……\r\n2023-10-22 18:25:46,429 [INFO] [base_model.py:369] 索引获取成功，生成回答中……\r\nBatches: 100%|████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 32.34it/s] \r\n2023-10-22 18:25:46,637 [INFO] [_logging.py:76] Websocket connected\r\n2023-10-22 18:25:48,223 [INFO] [base_model.py:496] 回答为：很抱歉，我无法回答这个问题，因为我没有足够的信息来确定您上传了什么内容。请提供更多详细信息，以便我能更好地帮助您。\n```\n\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n(或您的其他运行环境信息)\r\n\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "achaosss",
      "author_type": "User",
      "created_at": "2023-10-22T10:34:50Z",
      "updated_at": "2023-10-22T10:34:50Z",
      "closed_at": null,
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/923/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/923",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/923",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:37.668808",
      "comments": []
    },
    {
      "issue_number": 895,
      "title": "[Docker]: 在Docker中部署llama2-7b-chat-hf模型，无法使用CPU加载",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n在Docker中部署Llma2-7b-chat-hf模型，因为没有GPU资源无法使用cuda,在加载模型时报RuntimeError: Found no NVIDIA driver on your system 错误，如何手动修改配置禁用Cuda，使用CPU加载模型。\n\n### 复现操作\n\n1.正常完成dockers部署，能加载chatglm-6b-int4模型，\r\n2.加载Llma2-7b-chat-hf模型时，报RuntimeError: Found no NVIDIA driver on your system 错误。\n\n### 错误日志\n\n```shell\n正在加载LLaMA模型: Llama-2-7b-hf + No LoRA\r\nTraceback (most recent call last):\r\n  File \"/app/modules/models/models.py\", line 645, in get_model\r\n    model = LLaMA_Client(\r\n  File \"/app/modules/models/models.py\", line 397, in __init__\r\n    LLAMA_MODEL = AutoModel.get_model(\r\n  File \"/usr/local/lib/python3.9/site-packages/lmflow/models/auto_model.py\", line 16, in get_model\r\n    return HFDecoderModel(model_args, *args, **kwargs)\r\n  File \"/usr/local/lib/python3.9/site-packages/lmflow/models/hf_decoder_model.py\", line 216, in __init__\r\n    if gpu in torch.cuda.get_device_name():\r\n  File \"/usr/local/lib/python3.9/site-packages/torch/cuda/__init__.py\", line 365, in get_device_name\r\n    return get_device_properties(device).name\r\n  File \"/usr/local/lib/python3.9/site-packages/torch/cuda/__init__.py\", line 395, in get_device_properties\r\n    _lazy_init()  # will define _get_device_properties\r\n  File \"/usr/local/lib/python3.9/site-packages/torch/cuda/__init__.py\", line 247, in _lazy_init\r\n    torch._C._cuda_init()\r\nRuntimeError: Found no NVIDIA driver on your system. Please check that you have an NVIDIA GPU and installed a driver from http://www.nvidia.com/Download/index.aspx\r\nTraceback (most recent call last):\r\n  File \"/root/.local/lib/python3.9/site-packages/gradio/queueing.py\", line 388, in call_prediction\r\n    output = await route_utils.call_process_api(\r\n  File \"/root/.local/lib/python3.9/site-packages/gradio/route_utils.py\", line 219, in call_process_api\r\n    output = await app.get_blocks().process_api(\r\n  File \"/root/.local/lib/python3.9/site-packages/gradio/blocks.py\", line 1437, in process_api\r\n    result = await self.call_function(\r\n  File \"/root/.local/lib/python3.9/site-packages/gradio/blocks.py\", line 1109, in call_function\r\n    prediction = await anyio.to_thread.run_sync(\r\n  File \"/root/.local/lib/python3.9/site-packages/anyio/to_thread.py\", line 33, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n  File \"/root/.local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py\", line 877, in run_sync_in_worker_thread\r\n    return await future\r\n  File \"/root/.local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py\", line 807, in run\r\n    result = context.run(func, *args)\r\n  File \"/root/.local/lib/python3.9/site-packages/gradio/utils.py\", line 641, in wrapper\r\n    response = f(*args, **kwargs)\r\n  File \"/app/modules/models/models.py\", line 692, in get_model\r\n    model.history = original_model.history\r\nAttributeError: 'NoneType' object has no attribute 'history'\n```\n\n\n### 运行环境\n\n- OS: SUSE12 \r\n- Docker version: 19.03\r\n- Gradio version: \r\n- Python version: 3.9\r\n\n\n### 补充说明\n\n无",
      "state": "closed",
      "author": "SunMacArenas",
      "author_type": "User",
      "created_at": "2023-09-22T02:01:48Z",
      "updated_at": "2023-10-19T14:28:13Z",
      "closed_at": "2023-10-19T14:28:12Z",
      "labels": [
        "question",
        "docker deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/895/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/895",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/895",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:37.668831",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "请升级到最新版，支持纯CPU推理～",
          "created_at": "2023-10-19T14:28:13Z"
        }
      ]
    },
    {
      "issue_number": 918,
      "title": "[本地部署]: openai API确定有额度 为啥还会一直提示 You exceeded your current quota, please check your plan and billing details",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\nopenai API确定有额度 为啥还会一直提示 You exceeded your current quota, please check your plan and billing details\n\n### 复现操作\n\n1.正常部署完\r\n2.尝试在对话框中提问\n\n### 错误日志\n\n```shell\nopenai.error.InvalidRequestError: The model `gpt-4` does not exist or you do not have access to it. Learn more: https://help.openai.com/en/articles/7102672-how-can-i-access-gpt-4.\r\n2023-10-16 13:23:04,085 [INFO] [base_model.py:490] 回答为：The model `gpt-4` does not exist or you do not have access to it. Learn more: https://help.openai.com/en/articles/7102672-how-can-i-access-gpt-4.\r\n2023-10-16 13:23:20,572 [INFO] [models.py:51] 正在加载OpenAI Instruct模型: gpt-3.5-turbo-instruct\r\n2023-10-16 13:23:20,577 [INFO] [models.py:121] 模型设置为了： gpt-3.5-turbo-instruct\r\n2023-10-16 13:23:28,603 [INFO] [base_model.py:424] 用户admin的输入为：java之父\r\n2023-10-16 13:23:28,605 [WARNING] [base_model.py:232] stream predict not implemented, using at once predict instead\r\n2023-10-16 13:23:31,068 [INFO] [util.py:67] error_code=insufficient_quota error_message='You exceeded your current quota, please check your plan and billing details.' error_param=None error_type=insufficient_quota message='OpenAI API error received' stream_error=False\r\nTraceback (most recent call last):\r\n  File \"/Users/wangxiao/www/GPT/ChuanhuChatGPT-main/modules/models/base_model.py\", line 473, in predict\r\n    for chatbot, status_text in iter:\r\n  File \"/Users/wangxiao/www/GPT/ChuanhuChatGPT-main/modules/models/base_model.py\", line 282, in stream_next_chatbot\r\n    for partial_text in stream_iter:\r\n  File \"/Users/wangxiao/www/GPT/ChuanhuChatGPT-main/modules/models/base_model.py\", line 234, in get_answer_stream_iter\r\n    response, _ = self.get_answer_at_once()\r\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/Users/wangxiao/www/GPT/ChuanhuChatGPT-main/modules/models/OpenAIInstruct.py\", line 19, in get_answer_at_once\r\n    response = openai.Completion.create(\r\n               ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/Users/wangxiao/www/GPT/ChuanhuChatGPT-main/venv/lib/python3.11/site-packages/openai/api_resources/completion.py\", line 25, in create\r\n    return super().create(*args, **kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/Users/wangxiao/www/GPT/ChuanhuChatGPT-main/venv/lib/python3.11/site-packages/openai/api_resources/abstract/engine_api_resource.py\", line 155, in create\r\n    response, _, api_key = requestor.request(\r\n                           ^^^^^^^^^^^^^^^^^^\r\n  File \"/Users/wangxiao/www/GPT/ChuanhuChatGPT-main/venv/lib/python3.11/site-packages/openai/api_requestor.py\", line 299, in request\r\n    resp, got_stream = self._interpret_response(result, stream)\r\n                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/Users/wangxiao/www/GPT/ChuanhuChatGPT-main/venv/lib/python3.11/site-packages/openai/api_requestor.py\", line 710, in _interpret_response\r\n    self._interpret_response_line(\r\n  File \"/Users/wangxiao/www/GPT/ChuanhuChatGPT-main/venv/lib/python3.11/site-packages/openai/api_requestor.py\", line 775, in _interpret_response_line\r\n    raise self.handle_error_response(\r\nopenai.error.RateLimitError: You exceeded your current quota, please check your plan and billing details.\n```\n\n\n### 运行环境\n\n```markdown\n- OS: macos\r\n- Browser: \r\n- Gradio version: \r\n- Python version:  3.11.6\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "yuwojiusi",
      "author_type": "User",
      "created_at": "2023-10-16T05:27:03Z",
      "updated_at": "2023-10-16T08:05:06Z",
      "closed_at": "2023-10-16T07:22:34Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 15,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/918/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/918",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/918",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:37.856526",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "可能是余额过期了？",
          "created_at": "2023-10-16T05:52:20Z"
        },
        {
          "author": "yuwojiusi",
          "body": "我今天刚买的账号，也充值了，在其他项目中可以正常使用这个key，gpt4和3.5都试过，郁闷了",
          "created_at": "2023-10-16T06:36:25Z"
        },
        {
          "author": "yuwojiusi",
          "body": "<img width=\"954\" alt=\"截屏2023-10-16 14 36 42\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/4416813/0ed93ab8-0395-41fe-a84d-d3bdc64d5c25\">\r\n",
          "created_at": "2023-10-16T06:37:22Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "GPT 3.5和 4 都也不行吗",
          "created_at": "2023-10-16T06:49:21Z"
        },
        {
          "author": "yuwojiusi",
          "body": "是的 都不行",
          "created_at": "2023-10-16T06:53:35Z"
        }
      ]
    },
    {
      "issue_number": 883,
      "title": "[Bug]: \"if filename.endswith(\".md\"):\" in utils.py, AttributeError: 'NoneType' object has no attribute 'endswith'",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\nLaunched as a localhost. After each prompt, AttributeError is raised.\r\n\r\n# Traceback\r\n```\r\nFile \"C:\\Users\\*****\\Documents\\git\\ChuanhuChatGPT\\modules\\models\\base_model.py\", line 512, in predict\r\n    self.auto_save(chatbot)\r\n  File \"C:\\Users\\*****\\Documents\\git\\ChuanhuChatGPT\\modules\\models\\base_model.py\", line 691, in auto_save\r\n    save_file(self.history_file_path, self.system_prompt,\r\n  File \"C:\\Users\\*****\\Documents\\git\\ChuanhuChatGPT\\modules\\utils.py\", line 338, in save_file\r\n    if filename.endswith(\".md\"):\r\n       ^^^^^^^^^^^^^^^^^\r\nAttributeError: 'NoneType' object has no attribute 'endswith'\r\n```\r\n\r\nThe function `auto_save` under `base_model.py` is first being called, which triggers `save_file` in `utils.py`.\r\nHowever in this case the `filename` object passed to `save_file` is set to `None`.\r\n\r\n# Suspected causing issue\r\n`filename` was passed from `self.history_file_path` under the `BaseLLMModel` class.\r\nWhere `self.history_file_path` is initialized as `self.history_file_path = get_first_history_name(user)`.\r\nLooking at the `get_first_history_name` function,\r\n```\r\ndef get_first_history_name(user_name=\"\"):\r\n    history_names = get_history_names(user_name)\r\n    return history_names[0] if history_names else None\r\n```\r\nthe returned value is None if `history_names` is not set.\r\nThis suggests that the None object used by the `save_file` function is caused by a false initialization of `self.history_file_path`.\r\n\r\n# A quick proof\r\nAfter changing the line\r\n```\r\nself.history_file_path = get_first_history_name(user)\r\n```\r\n\r\nto \r\n\r\n```\r\nself.history_file_path = \"test.md\"\r\n```\r\n\r\nThe error is gone. However this might damage the app logic so cannot be taken as a fix.\n\n### 复现操作\n\n1. Configured following the steps in the documentation.\r\n2. First time launch.\r\n3. Error triggers for every user prompt.\n\n### 错误日志\n\n```shell\nFile \"C:\\Users\\*****\\Documents\\git\\ChuanhuChatGPT\\modules\\models\\base_model.py\", line 512, in predict\r\n    self.auto_save(chatbot)\r\n  File \"C:\\Users\\*****\\Documents\\git\\ChuanhuChatGPT\\modules\\models\\base_model.py\", line 691, in auto_save\r\n    save_file(self.history_file_path, self.system_prompt,\r\n  File \"C:\\Users\\*****\\Documents\\git\\ChuanhuChatGPT\\modules\\utils.py\", line 338, in save_file\r\n    if filename.endswith(\".md\"):\r\n       ^^^^^^^^^^^^^^^^^\r\nAttributeError: 'NoneType' object has no attribute 'endswith'\n```\n\n\n### 运行环境\n\n- OS: Windows 11 Pro English\r\n- Browser: Chrome\r\n- Gradio version: 3.43.2\r\n- Python version: 3.11.4\r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "JohnZ03",
      "author_type": "User",
      "created_at": "2023-09-12T09:05:37Z",
      "updated_at": "2023-10-14T07:23:53Z",
      "closed_at": "2023-09-12T15:25:51Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 9,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/883/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 1,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/883",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/883",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:38.049616",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "It works alright on my machine... Let me try setting my PC's OS language to English🤧",
          "created_at": "2023-09-12T09:11:56Z"
        },
        {
          "author": "XiaolongYang-HZAU",
          "body": "遇到了相同的问题",
          "created_at": "2023-09-12T13:40:19Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "I pushed a fix, hopefully that resolves your issue. Let me know if there's still bugs sitting around.",
          "created_at": "2023-09-12T14:16:05Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "I'm confident to say that this issue is resolved now. Please pull the latest version. Let me know if there's still bugs sitting around.",
          "created_at": "2023-09-12T15:25:51Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "Now this bug is finally resolved... Sorry for the inconvenience!",
          "created_at": "2023-09-16T03:32:27Z"
        }
      ]
    },
    {
      "issue_number": 916,
      "title": "[远程部署]: 回复不完整，并且报错: data: [DONE]",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n我在更新到最新版本后，使用之前的对话进行提问，回复不完整，然后就报错，错误信息如下：\r\nTraceback (most recent call last):\r\n  File \"/home/ubuntu/ChuanhuChatGPT/modules/models/base_model.py\", line 473, in predict\r\n    for chatbot, status_text in iter:\r\n  File \"/home/ubuntu/ChuanhuChatGPT/modules/models/base_model.py\", line 282, in stream_next_chatbot\r\n    for partial_text in stream_iter:\r\n  File \"/home/ubuntu/ChuanhuChatGPT/modules/models/OpenAI.py\", line 44, in get_answer_stream_iter\r\n    for i in iter:\r\n  File \"/home/ubuntu/ChuanhuChatGPT/modules/models/OpenAI.py\", line 221, in _decode_chat_response\r\n    raise Exception(error_msg)\r\nException: data: [DONE]\r\n\n\n### 复现操作\n\n我之前部署的是老版本的，之后更新到了最新的版本，然后我在使用更新之前的对话进行提问，出现回复不完整的情况；\r\n还有一种情况，在我新建对话后，切换过其他对话，然后再回到新建的这个对话提问，也会出现报错，回复不完整，或者没有回复的情况\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: ubuntu 22.04 LTS\r\n- Gradio version: 3.43.2\r\n- Python version: 3.10.12\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "cooffer",
      "author_type": "User",
      "created_at": "2023-10-12T08:07:25Z",
      "updated_at": "2023-10-13T07:08:48Z",
      "closed_at": "2023-10-12T15:50:31Z",
      "labels": [
        "question",
        "server deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 13,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/916/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/916",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/916",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:38.263165",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "多久之前的旧版本呢",
          "created_at": "2023-10-12T08:09:56Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "你有在使用第三方API服务吗？",
          "created_at": "2023-10-12T08:20:00Z"
        },
        {
          "author": "cooffer",
          "body": "> 多久之前的旧版本呢\r\n\r\n我部署的版本应该是916的版本，现在上次更新到926的版本，也出现过相同的问题",
          "created_at": "2023-10-12T08:24:59Z"
        },
        {
          "author": "cooffer",
          "body": "> 你有在使用第三方API服务吗？\r\n\r\n没有使用第三方的API服务，只使用了OpenAI的API",
          "created_at": "2023-10-12T08:25:45Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "你在用什么模型呢？如果方便的话，可以给我提供一份有问题的历史记录文件（.json）吗？",
          "created_at": "2023-10-12T08:30:25Z"
        }
      ]
    },
    {
      "issue_number": 913,
      "title": "[本地部署]: OSError: [Errno 22] Invalid argument: 'history\\\\\"OpenAI\\'s AI Assistant Based on gpt-3.5-turbo Model\".json'",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n发生了一个不大不小的错误，部署完成之后可以正常对话，但是会弹出Error框，但是不影响继续对话。每次登陆历史记录都会消失，看错误似乎与历史记录有关。\r\n<img width=\"467\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/50229337/623c2acd-ba25-4671-85b8-deccda52f2b4\">\r\n\r\n\n\n### 复现操作\n\n正常完成部署，就会出现这种错误\n\n### 错误日志\n\n```shell\nTraceback (most recent call last):\r\n  File \"D:\\Anaconda\\lib\\site-packages\\gradio\\queueing.py\", line 388, in call_prediction\r\n    output = await route_utils.call_process_api(\r\n  File \"D:\\Anaconda\\lib\\site-packages\\gradio\\route_utils.py\", line 219, in call_process_api\r\n    output = await app.get_blocks().process_api(\r\n  File \"D:\\Anaconda\\lib\\site-packages\\gradio\\blocks.py\", line 1437, in process_api\r\n    result = await self.call_function(\r\n  File \"D:\\Anaconda\\lib\\site-packages\\gradio\\blocks.py\", line 1123, in call_function\r\n    prediction = await utils.async_iteration(iterator)\r\n  File \"D:\\Anaconda\\lib\\site-packages\\gradio\\utils.py\", line 503, in async_iteration\r\n    return await iterator.__anext__()\r\n  File \"D:\\Anaconda\\lib\\site-packages\\gradio\\utils.py\", line 496, in __anext__\r\n    return await anyio.to_thread.run_sync(\r\n  File \"D:\\Anaconda\\lib\\site-packages\\anyio\\to_thread.py\", line 31, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n  File \"D:\\Anaconda\\lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 937, in run_sync_in_worker_thread\r\n    return await future\r\n  File \"D:\\Anaconda\\lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 867, in run\r\n    result = context.run(func, *args)\r\n  File \"D:\\Anaconda\\lib\\site-packages\\gradio\\utils.py\", line 479, in run_sync_iterator_async\r\n    return next(iterator)\r\n  File \"D:\\Anaconda\\lib\\site-packages\\gradio\\utils.py\", line 629, in gen_wrapper\r\n    yield from f(*args, **kwargs)\r\n  File \"C:\\Users\\1\\Desktop\\ChengXu\\ChuanhuChatGPT-main\\ChuanhuChatGPT-main\\modules\\utils.py\", line 36, in predict\r\n    for i in iter:\r\n  File \"C:\\Users\\1\\Desktop\\ChengXu\\ChuanhuChatGPT-main\\ChuanhuChatGPT-main\\modules\\models\\base_model.py\", line 515, in predict\r\n    self.auto_save(chatbot)\r\n  File \"C:\\Users\\1\\Desktop\\ChengXu\\ChuanhuChatGPT-main\\ChuanhuChatGPT-main\\modules\\models\\base_model.py\", line 702, in auto_save\r\n    save_file(self.history_file_path, self.system_prompt,\r\n  File \"C:\\Users\\1\\Desktop\\ChengXu\\ChuanhuChatGPT-main\\ChuanhuChatGPT-main\\modules\\utils.py\", line 352, in save_file\r\n    with open(history_file_path, \"w\", encoding='utf-8') as f:\r\nOSError: [Errno 22] Invalid argument: 'history\\\\\"OpenAI\\'s AI Assistant Based on gpt-3.5-turbo Model\".json'\n```\n\n\n### 运行环境\n\n```markdown\n- OS:  Windows11 22H2\r\n- Browser: edge\r\n- Gradio version: \r\n- Python version: 3.8.5\n```\n\n\n### 补充说明\n\n暂无",
      "state": "closed",
      "author": "xiekangmin",
      "author_type": "User",
      "created_at": "2023-10-10T09:41:18Z",
      "updated_at": "2023-10-12T10:10:17Z",
      "closed_at": "2023-10-12T10:10:17Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/913/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/913",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/913",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:38.497036",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "我等会儿解决下",
          "created_at": "2023-10-10T09:43:02Z"
        },
        {
          "author": "xiekangmin",
          "body": "而且每次在GUI点击新对话就会覆盖原有的对话",
          "created_at": "2023-10-10T09:43:55Z"
        }
      ]
    },
    {
      "issue_number": 915,
      "title": "是否支持llama2系列及其衍生模型？",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 错误描述\n\n是否支持llama2系列及其衍生模型？\n\n### 复现操作\n\n是否支持llama2系列及其衍生模型？\n\n### 错误日志\n\n```shell\n是否支持llama2系列及其衍生模型？\n```\n\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n(或您的其他运行环境信息)\r\n\n\n### 补充说明\n\n是否支持llama2系列及其衍生模型？",
      "state": "closed",
      "author": "xxm1668",
      "author_type": "User",
      "created_at": "2023-10-12T07:02:48Z",
      "updated_at": "2023-10-12T07:03:46Z",
      "closed_at": "2023-10-12T07:03:45Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/915/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/915",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/915",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:38.683518",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "支持的",
          "created_at": "2023-10-12T07:03:45Z"
        }
      ]
    },
    {
      "issue_number": 912,
      "title": "[Bug]: 本地部署第三方API显示KeyError: 'finish_reason'",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n在载入GUI界面时有警告：\r\nfatal: not a git repository (or any of the parent directories): .git\r\n'TZ' 不是内部或外部命令，也不是可运行的程序\r\n或批处理文件。\r\nC:\\Users\\1\\Desktop\\ChengXu\\ChuanhuChatGPT-main\\ChuanhuChatGPT-main\\modules\\overwrites.py:89: GradioUnusedKwargWarning: You have unused kwarg parameters in JSON, please remove them: {'readonly': True}\r\n  res = original_IOComponent_init(self, *args, **kwargs)\r\nRunning on local URL:  http://127.0.0.1:7860\r\n\r\n在GUI界面输入任何文字都显示以下错误，第三方API的openai api base已经更改\r\nTo create a public link, set `share=True` in `launch()`.\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\1\\Desktop\\ChengXu\\ChuanhuChatGPT-main\\ChuanhuChatGPT-main\\modules\\models\\base_model.py\", line 466, in predict\r\n    for chatbot, status_text in iter:\r\n  File \"C:\\Users\\1\\Desktop\\ChengXu\\ChuanhuChatGPT-main\\ChuanhuChatGPT-main\\modules\\models\\base_model.py\", line 278, in stream_next_chatbot\r\n    for partial_text in stream_iter:\r\n  File \"C:\\Users\\1\\Desktop\\ChengXu\\ChuanhuChatGPT-main\\ChuanhuChatGPT-main\\modules\\models\\OpenAI.py\", line 44, in get_answer_stream_iter\r\n    for i in iter:\r\n  File \"C:\\Users\\1\\Desktop\\ChengXu\\ChuanhuChatGPT-main\\ChuanhuChatGPT-main\\modules\\models\\OpenAI.py\", line 205, in _decode_chat_response\r\n    if chunk[\"choices\"][0][\"finish_reason\"] == \"stop\":\r\nKeyError: 'finish_reason'\n\n### 复现操作\n\n部署未成功过\n\n### 错误日志\n\n```shell\nTo create a public link, set `share=True` in `launch()`.\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\1\\Desktop\\ChengXu\\ChuanhuChatGPT-main\\ChuanhuChatGPT-main\\modules\\models\\base_model.py\", line 466, in predict\r\n    for chatbot, status_text in iter:\r\n  File \"C:\\Users\\1\\Desktop\\ChengXu\\ChuanhuChatGPT-main\\ChuanhuChatGPT-main\\modules\\models\\base_model.py\", line 278, in stream_next_chatbot\r\n    for partial_text in stream_iter:\r\n  File \"C:\\Users\\1\\Desktop\\ChengXu\\ChuanhuChatGPT-main\\ChuanhuChatGPT-main\\modules\\models\\OpenAI.py\", line 44, in get_answer_stream_iter\r\n    for i in iter:\r\n  File \"C:\\Users\\1\\Desktop\\ChengXu\\ChuanhuChatGPT-main\\ChuanhuChatGPT-main\\modules\\models\\OpenAI.py\", line 205, in _decode_chat_response\r\n    if chunk[\"choices\"][0][\"finish_reason\"] == \"stop\":\r\nKeyError: 'finish_reason'\n```\n\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "xiekangmin",
      "author_type": "User",
      "created_at": "2023-10-10T04:29:05Z",
      "updated_at": "2023-10-10T05:45:55Z",
      "closed_at": "2023-10-10T05:45:55Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/912/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/912",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/912",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:38.833379",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "我测试一下",
          "created_at": "2023-10-10T04:31:14Z"
        },
        {
          "author": "xiekangmin",
          "body": "我的pythoh版本是3.8.5\r\n",
          "created_at": "2023-10-10T04:31:45Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "我测试是没问题的，检查下第三方API URL是否正确？应该是 `https://openai.something.com`这样的，不应该多或少东西",
          "created_at": "2023-10-10T04:46:31Z"
        },
        {
          "author": "xiekangmin",
          "body": "可是我在另一个GUI上面填写就能使用，我感到很困惑\r\n<img width=\"458\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/50229337/dc6ef851-63e2-46f4-ac29-f8ba579d55f2\">\r\n",
          "created_at": "2023-10-10T05:13:44Z"
        },
        {
          "author": "xiekangmin",
          "body": "请问大佬可以将我的API key和API url发你帮我测试一下么？\r\n",
          "created_at": "2023-10-10T05:21:01Z"
        }
      ]
    },
    {
      "issue_number": 906,
      "title": "[本地部署]: 选择 ChatGLM2-6b 模型后代码报错 AttributeError: 'ChatGLMTokenizer' object has no attribute 'tokenizer'",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n本地部署启动后，选择 ChatGLM2-6b 模型后代码报错，经过测试所有 ChatGLM 系列的模型都有类似错误，测试了 MOSS、Llama-2-7B-Chat、StableLM 可以正常使用。\r\n\r\n```shell\r\n(venv) abbish@ABBISH-ROG:~/Workspace/ai/ChuanhuChatGPT$ python ChuanhuChatbot.py \r\nWARNING:root:Language file for en_US:en does not exist. Using English instead.\r\nWARNING:root:Available languages: extract_loca, en_US, vi_VN, ja_JP, ru_RU, zh_CN, ko_KR, sv_SE\r\nWARNING:root:无法获取IP地址信息。\r\n{'error': True, 'reason': 'RateLimited', 'message': 'Visit https://ipapi.co/ratelimited/ for details'}\r\n/home/abbish/Workspace/ai/ChuanhuChatGPT/modules/overwrites.py:89: GradioUnusedKwargWarning: You have unused kwarg parameters in JSON, please remove them: {'readonly': True}\r\n  res = original_IOComponent_init(self, *args, **kwargs)\r\nRunning on local URL:  http://127.0.0.1:7861\r\n\r\nTo create a public link, set `share=True` in `launch()`.\r\nTraceback (most recent call last):\r\n  File \"/home/abbish/Workspace/ai/ChuanhuChatGPT/modules/models/models.py\", line 53, in get_model\r\n    model = ChatGLM_Client(model_name, user_name=user_name)\r\n  File \"/home/abbish/Workspace/ai/ChuanhuChatGPT/modules/models/ChatGLM.py\", line 32, in __init__\r\n    CHATGLM_TOKENIZER = AutoTokenizer.from_pretrained(\r\n  File \"/home/abbish/Workspace/ai/ChuanhuChatGPT/venv/lib/python3.10/site-packages/transformers/models/auto/tokenization_auto.py\", line 738, in from_pretrained\r\n    return tokenizer_class.from_pretrained(pretrained_model_name_or_path, *inputs, **kwargs)\r\n  File \"/home/abbish/Workspace/ai/ChuanhuChatGPT/venv/lib/python3.10/site-packages/transformers/tokenization_utils_base.py\", line 2045, in from_pretrained\r\n    return cls._from_pretrained(\r\n  File \"/home/abbish/Workspace/ai/ChuanhuChatGPT/venv/lib/python3.10/site-packages/transformers/tokenization_utils_base.py\", line 2256, in _from_pretrained\r\n    tokenizer = cls(*init_inputs, **init_kwargs)\r\n  File \"/home/abbish/.cache/huggingface/modules/transformers_modules/THUDM/chatglm2-6b/8fd7fba285f7171d3ae7ea3b35c53b6340501ed1/tokenization_chatglm.py\", line 69, in __init__\r\n    super().__init__(padding_side=padding_side, clean_up_tokenization_spaces=clean_up_tokenization_spaces, **kwargs)\r\n  File \"/home/abbish/Workspace/ai/ChuanhuChatGPT/venv/lib/python3.10/site-packages/transformers/tokenization_utils.py\", line 366, in __init__\r\n    self._add_tokens(self.all_special_tokens_extended, special_tokens=True)\r\n  File \"/home/abbish/Workspace/ai/ChuanhuChatGPT/venv/lib/python3.10/site-packages/transformers/tokenization_utils.py\", line 462, in _add_tokens\r\n    current_vocab = self.get_vocab().copy()\r\n  File \"/home/abbish/.cache/huggingface/modules/transformers_modules/THUDM/chatglm2-6b/8fd7fba285f7171d3ae7ea3b35c53b6340501ed1/tokenization_chatglm.py\", line 112, in get_vocab\r\n    vocab = {self._convert_id_to_token(i): i for i in range(self.vocab_size)}\r\n  File \"/home/abbish/.cache/huggingface/modules/transformers_modules/THUDM/chatglm2-6b/8fd7fba285f7171d3ae7ea3b35c53b6340501ed1/tokenization_chatglm.py\", line 108, in vocab_size\r\n    return self.tokenizer.n_words\r\nAttributeError: 'ChatGLMTokenizer' object has no attribute 'tokenizer'\r\n``` \n\n### 复现操作\n\n1. 正常完成本地部署\r\n2. 选择加载 ChatGLM2-6b 模型\n\n### 错误日志\n\n```shell\nTraceback (most recent call last):\r\n  File \"/home/abbish/Workspace/ai/ChuanhuChatGPT/modules/models/models.py\", line 53, in get_model\r\n    model = ChatGLM_Client(model_name, user_name=user_name)\r\n  File \"/home/abbish/Workspace/ai/ChuanhuChatGPT/modules/models/ChatGLM.py\", line 32, in __init__\r\n    CHATGLM_TOKENIZER = AutoTokenizer.from_pretrained(\r\n  File \"/home/abbish/Workspace/ai/ChuanhuChatGPT/venv/lib/python3.10/site-packages/transformers/models/auto/tokenization_auto.py\", line 738, in from_pretrained\r\n    return tokenizer_class.from_pretrained(pretrained_model_name_or_path, *inputs, **kwargs)\r\n  File \"/home/abbish/Workspace/ai/ChuanhuChatGPT/venv/lib/python3.10/site-packages/transformers/tokenization_utils_base.py\", line 2045, in from_pretrained\r\n    return cls._from_pretrained(\r\n  File \"/home/abbish/Workspace/ai/ChuanhuChatGPT/venv/lib/python3.10/site-packages/transformers/tokenization_utils_base.py\", line 2256, in _from_pretrained\r\n    tokenizer = cls(*init_inputs, **init_kwargs)\r\n  File \"/home/abbish/.cache/huggingface/modules/transformers_modules/THUDM/chatglm2-6b/8fd7fba285f7171d3ae7ea3b35c53b6340501ed1/tokenization_chatglm.py\", line 69, in __init__\r\n    super().__init__(padding_side=padding_side, clean_up_tokenization_spaces=clean_up_tokenization_spaces, **kwargs)\r\n  File \"/home/abbish/Workspace/ai/ChuanhuChatGPT/venv/lib/python3.10/site-packages/transformers/tokenization_utils.py\", line 366, in __init__\r\n    self._add_tokens(self.all_special_tokens_extended, special_tokens=True)\r\n  File \"/home/abbish/Workspace/ai/ChuanhuChatGPT/venv/lib/python3.10/site-packages/transformers/tokenization_utils.py\", line 462, in _add_tokens\r\n    current_vocab = self.get_vocab().copy()\r\n  File \"/home/abbish/.cache/huggingface/modules/transformers_modules/THUDM/chatglm2-6b/8fd7fba285f7171d3ae7ea3b35c53b6340501ed1/tokenization_chatglm.py\", line 112, in get_vocab\r\n    vocab = {self._convert_id_to_token(i): i for i in range(self.vocab_size)}\r\n  File \"/home/abbish/.cache/huggingface/modules/transformers_modules/THUDM/chatglm2-6b/8fd7fba285f7171d3ae7ea3b35c53b6340501ed1/tokenization_chatglm.py\", line 108, in vocab_size\r\n    return self.tokenizer.n_words\r\nAttributeError: 'ChatGLMTokenizer' object has no attribute 'tokenizer'\n```\n\n\n### 运行环境\n\n```markdown\n- OS: Ubuntu 22\r\n- Browser: Chrome\r\n- Gradio version: 3.43.2\r\n- Python version: 3.10.12\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "abbish",
      "author_type": "User",
      "created_at": "2023-10-04T12:19:41Z",
      "updated_at": "2023-10-10T05:30:12Z",
      "closed_at": "2023-10-10T05:30:12Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/906/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/906",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/906",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:39.016342",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "ChatGLM他们把推理代码搞坏了，在他们修复前，可以降级`transformers`来正常使用ChatGLM2：\r\n```\r\npip install transformers==4.33.0\r\n```",
          "created_at": "2023-10-10T05:30:06Z"
        }
      ]
    },
    {
      "issue_number": 907,
      "title": "[功能请求]: 在開啟新對話時, 希望可以保留\"System Prompt\"的內容不要消除掉",
      "body": "### 相关问题\n\nTo 川虎的developer大神, \r\n目前的川虎版本會在我們開啟新對話時順便消除掉System Prompt的內容(請參考下圖紅框處), 這樣對於我們使用者想要測試System Prompt會有點點不方便, 請問大神, 有沒有哪邊可以設定\"開啟新對話時可以保留System Prompt的內容\"?\r\n謝謝您的閱讀, 感恩。 ☺\r\n\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/137477635/dc374d40-7386-45f1-ae03-79b733ce447c)\r\n\n\n### 可能的解决办法\n\n有沒有哪邊可以設定\"開啟新對話時可以保留System Prompt的內容\"?\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "tomkuo1124",
      "author_type": "User",
      "created_at": "2023-10-05T02:18:16Z",
      "updated_at": "2023-10-10T05:28:53Z",
      "closed_at": "2023-10-10T05:28:53Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/907/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/907",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/907",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:39.212526",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "@MZhao-ouo 你怎么说，之前这个行为是你做的hhh",
          "created_at": "2023-10-05T02:49:10Z"
        },
        {
          "author": "tomkuo1124",
          "body": "wow, 是製作川虎app的大神! 感謝您們的付出與分享這麼棒的產品讓我們體驗AI的學習 (我只用川虎, 沒有在用其他有的沒的ChatGPT聊天app)",
          "created_at": "2023-10-05T03:42:14Z"
        },
        {
          "author": "Keldos-Li",
          "body": "<img width=\"314\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/23137268/2ced9e7b-089c-481d-8b85-411a19771f1b\">\r\n\r\n不过说起来，像openai那样加一个开关也问题不大……？",
          "created_at": "2023-10-05T04:05:48Z"
        },
        {
          "author": "MZhao-ouo",
          "body": "开关加上啦\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/70903329/b6f60f29-3e00-47a7-a733-339d30cdea41)\r\n",
          "created_at": "2023-10-05T09:19:48Z"
        },
        {
          "author": "tomkuo1124",
          "body": "感謝大神們!! ^^",
          "created_at": "2023-10-07T11:14:58Z"
        }
      ]
    },
    {
      "issue_number": 909,
      "title": "[功能请求]: 请求增加api服务商功能",
      "body": "### 相关问题\n\n现在有很多三方服务商提供私密api连接，希望可以增加带服务地址的私密api使用功能，详细可以参照gpt nextweb\n\n### 可能的解决办法\n\n增加带服务地址的私密api使用功能，详细可以参照gpt nextweb\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Radicolax",
      "author_type": "User",
      "created_at": "2023-10-07T07:52:20Z",
      "updated_at": "2023-10-10T05:28:39Z",
      "closed_at": "2023-10-10T05:28:39Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/909/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/909",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/909",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:39.387061",
      "comments": [
        {
          "author": "MZhao-ouo",
          "body": "有的，可以在`config.json`文件里面改。\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/70903329/1ebc9643-f7c1-48cc-a6a9-7450d2d35bd5)\r\n",
          "created_at": "2023-10-07T07:54:59Z"
        },
        {
          "author": "Radicolax",
          "body": "十分感谢🙏\r\n\r\n\r\n\r\nSent&nbsp;from&nbsp;my&nbsp;iPhone\r\n\r\n\r\n------------------ 原始邮件 ------------------\r\nFrom: MZhao ***@***.***&gt;\r\n发送时间: 10/07/2023, 15:55\r\nTo: GaiZhenbiao/ChuanhuChatGPT ***@***.***&gt;\r\n抄送: GeekHank ***@***.***&gt;, Author ***@***.***&gt;\r\nSubject: Re: [GaiZhenbiao/ChuanhuChatGPT] [功能请求",
          "created_at": "2023-10-07T08:17:51Z"
        }
      ]
    },
    {
      "issue_number": 862,
      "title": "ModuleNotFoundError: No module named 'lmflow'",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 错误描述\n\nI created new conda environment and install the requirements and advance requirements.\r\n\r\nWhen I run the app and select LLama-2-hf + Lora\r\n\r\nI receive error:\r\nModuleNotFoundError: No module named 'lmflow'\r\n\r\nI tried to install it but didn't work.\r\n\r\n\r\n\n\n### 复现操作\n\nInstall\r\n\r\nSelect LLama-2-hf\r\n\r\nPrompt\n\n### 错误日志\n\n```shell\nFile \"G:\\Users\\mazen\\OneDrive\\Desktop\\AI\\ChuanhuChatGPT\\modules\\models\\models.py\", line 312, in __init__\r\n    from lmflow.datasets.dataset import Dataset\r\nModuleNotFoundError: No module named 'lmflow'\n```\n\n\n### 运行环境\n\n- OS: Windows 11\r\n- Browser: Chrome & Edge\r\n- Gradio version: 3.36.1\r\n- Python version: 3.11.4\r\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "MSZ-MGS",
      "author_type": "User",
      "created_at": "2023-08-18T16:01:57Z",
      "updated_at": "2023-10-02T07:22:10Z",
      "closed_at": "2023-10-02T07:22:10Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/862/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/862",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/862",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:39.591623",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "你应该安装额外的依赖`requirements_advanced.txt`",
          "created_at": "2023-08-18T16:03:14Z"
        },
        {
          "author": "MSZ-MGS",
          "body": "Thanks for quick reply:\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/65172063/9751e047-2cc2-48d8-ae65-31f72e00fda3)\r\n",
          "created_at": "2023-08-18T16:05:50Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "It's not recommended to use Windows, many ML libraries doesn't work on Windows. Try use WSL.",
          "created_at": "2023-08-18T16:07:48Z"
        }
      ]
    },
    {
      "issue_number": 898,
      "title": "[本地部署]: 本地部署启动报错No module named 'colorama'",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n正常下载，双击 run_Windows.bat运行，出现报错：\r\nOpening ChuanhuChatGPT...\r\nvenv \"D:\\Downloads\\ChuanhuChatGPT-main\\\\ChuanhuChat\\Scripts\\Python.exe\"\r\nTraceback (most recent call last):\r\n  File \"D:\\Downloads\\ChuanhuChatGPT-main\\ChuanhuChatbot.py\", line 2, in <module>\r\n    from modules.models.models import get_model\r\n  File \"D:\\Downloads\\ChuanhuChatGPT-main\\modules\\models\\models.py\", line 6, in <module>\r\n    import colorama\r\nModuleNotFoundError: No module named 'colorama'\r\n请按任意键继续. . .\r\n\r\n**也尝试安装过依赖，执行pip install -r requirements.txt --upgrade\r\n安装依赖最后也有报错，如下：**\r\nPreparing metadata (setup.py) ... error\r\n  error: subprocess-exited-with-error\r\n\r\n  × python setup.py egg_info did not run successfully.\r\n  │ exit code: 1\r\n  ╰─> [11 lines of output]\r\n      Traceback (most recent call last):\r\n        File \"<string>\", line 2, in <module>\r\n        File \"<pip-setuptools-caller>\", line 14, in <module>\r\n        File \"C:\\Program Files\\Python\\Lib\\site-packages\\setuptools\\__init__.py\", line 16, in <module>\r\n          import setuptools.version\r\n        File \"C:\\Program Files\\Python\\Lib\\site-packages\\setuptools\\version.py\", line 1, in <module>\r\n          import pkg_resources\r\n        File \"C:\\Program Files\\Python\\Lib\\site-packages\\pkg_resources\\__init__.py\", line 2191, in <module>\r\n          register_finder(pkgutil.ImpImporter, find_on_path)\r\n                          ^^^^^^^^^^^^^^^^^^^\r\n      AttributeError: module 'pkgutil' has no attribute 'ImpImporter'. Did you mean: 'zipimporter'?\r\n      [end of output]\r\n\r\n  note: This error originates from a subprocess, and is likely not a problem with pip.\r\nerror: metadata-generation-failed\r\n\r\n× Encountered error while generating package metadata.\r\n╰─> See above for output.\r\n\r\nnote: This is an issue with the package mentioned above, not pip.\r\nhint: See above for details.\r\n\r\n尝试再次安装依赖，依旧报错：\r\n\n\n### 复现操作\n\n首次运行直接就是这个报错，未作其他操作，换了另外两台电脑都是同样问题\n\n### 错误日志\n\n```shell\nOpening ChuanhuChatGPT...\r\nvenv \"D:\\Downloads\\ChuanhuChatGPT-main\\\\ChuanhuChat\\Scripts\\Python.exe\"\r\nTraceback (most recent call last):\r\n  File \"D:\\Downloads\\ChuanhuChatGPT-main\\ChuanhuChatbot.py\", line 2, in <module>\r\n    from modules.models.models import get_model\r\n  File \"D:\\Downloads\\ChuanhuChatGPT-main\\modules\\models\\models.py\", line 6, in <module>\r\n    import colorama\r\nModuleNotFoundError: No module named 'colorama'\r\n请按任意键继续. . .\r\n\r\n**也尝试安装过依赖，执行pip install -r requirements.txt --upgrade\r\n安装依赖最后也有报错，如下：**\r\nPreparing metadata (setup.py) ... error\r\n  error: subprocess-exited-with-error\r\n\r\n  × python setup.py egg_info did not run successfully.\r\n  │ exit code: 1\r\n  ╰─> [11 lines of output]\r\n      Traceback (most recent call last):\r\n        File \"<string>\", line 2, in <module>\r\n        File \"<pip-setuptools-caller>\", line 14, in <module>\r\n        File \"C:\\Program Files\\Python\\Lib\\site-packages\\setuptools\\__init__.py\", line 16, in <module>\r\n          import setuptools.version\r\n        File \"C:\\Program Files\\Python\\Lib\\site-packages\\setuptools\\version.py\", line 1, in <module>\r\n          import pkg_resources\r\n        File \"C:\\Program Files\\Python\\Lib\\site-packages\\pkg_resources\\__init__.py\", line 2191, in <module>\r\n          register_finder(pkgutil.ImpImporter, find_on_path)\r\n                          ^^^^^^^^^^^^^^^^^^^\r\n      AttributeError: module 'pkgutil' has no attribute 'ImpImporter'. Did you mean: 'zipimporter'?\r\n      [end of output]\r\n\r\n  note: This error originates from a subprocess, and is likely not a problem with pip.\r\nerror: metadata-generation-failed\r\n\r\n× Encountered error while generating package metadata.\r\n╰─> See above for output.\r\n\r\nnote: This is an issue with the package mentioned above, not pip.\r\nhint: See above for details.\r\n\r\n尝试再次安装依赖，依旧报错：\r\n Using cached googlesearch-python-1.2.3.tar.gz (3.9 kB)\r\n  Preparing metadata (setup.py) ... error\r\n  error: subprocess-exited-with-error\r\n\r\n  × python setup.py egg_info did not run successfully.\r\n  │ exit code: 1\r\n  ╰─> [11 lines of output]\r\n      Traceback (most recent call last):\r\n        File \"<string>\", line 2, in <module>\r\n        File \"<pip-setuptools-caller>\", line 14, in <module>\r\n        File \"C:\\Program Files\\Python\\Lib\\site-packages\\setuptools\\__init__.py\", line 16, in <module>\r\n          import setuptools.version\r\n        File \"C:\\Program Files\\Python\\Lib\\site-packages\\setuptools\\version.py\", line 1, in <module>\r\n          import pkg_resources\r\n        File \"C:\\Program Files\\Python\\Lib\\site-packages\\pkg_resources\\__init__.py\", line 2191, in <module>\r\n          register_finder(pkgutil.ImpImporter, find_on_path)\r\n                          ^^^^^^^^^^^^^^^^^^^\r\n      AttributeError: module 'pkgutil' has no attribute 'ImpImporter'. Did you mean: 'zipimporter'?\r\n      [end of output]\r\n\r\n  note: This error originates from a subprocess, and is likely not a problem with pip.\r\nerror: metadata-generation-failed\r\n\r\n× Encountered error while generating package metadata.\r\n╰─> See above for output.\r\n\r\nnote: This is an issue with the package mentioned above, not pip.\r\nhint: See above for details.\n```\n\n\n### 运行环境\n\n```markdown\n- OS: Windows11 22H2\r\n- Browser: Edge\r\n- Gradio version: 3.43.2\r\n- Python version: 3.11\n```\n\n\n### 补充说明\n\n项目代码已经是最新的了",
      "state": "closed",
      "author": "fuzhengqu",
      "author_type": "User",
      "created_at": "2023-09-22T11:52:30Z",
      "updated_at": "2023-10-02T07:15:32Z",
      "closed_at": "2023-10-02T07:15:32Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/898/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/898",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/898",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:39.800407",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "这似乎是一个 [setuptools](https://github.com/pypa/setuptools) 的问题。请你尝试将pip更新到23.2及以上。\r\n- https://github.com/pypa/pip/issues/11501",
          "created_at": "2023-09-22T12:08:30Z"
        },
        {
          "author": "fuzhengqu",
          "body": "> 这似乎是一个 [setuptools](https://github.com/pypa/setuptools) 的问题。请你尝试将pip更新到23.2及以上。\r\n> \r\n> * [pip's vendored pkg_resources should stop using pkgutil.ImpImporter pypa/pip#11501](https://github.com/pypa/pip/issues/11501)\r\n\r\nRequirement already satisfied: pip in c:\\program files\\python\\lib\\site-packages ",
          "created_at": "2023-09-22T13:46:13Z"
        },
        {
          "author": "Keldos-Li",
          "body": "那这似乎不是我们能解决的问题……请你尝试自己检索一下解决办法……",
          "created_at": "2023-09-22T13:49:24Z"
        },
        {
          "author": "fuzhengqu",
          "body": "> 那这似乎不是我们能解决的问题……请你尝试自己检索一下解决办法……\r\n\r\n我自己解决了，之前安装的python是选择all users，所以是在C盘program files目录下的，这里面需要权限。我卸载后重新安装，不选择all users，默认会安装到当前用户默认目录，这样就不需要权限，重新运行就正常了，判断应该是权限引起的问题。另外双击bat运行，还会报最后的缺少ModuleNotFoundError: No module named 'colorama'。不过此报错并不影响执行chuanhuchatbot.py,没有报错，正常运行了。这是否说明是项目并未考虑到python安装到C:/",
          "created_at": "2023-09-22T15:02:42Z"
        }
      ]
    },
    {
      "issue_number": 903,
      "title": "[功能请求]: 能否支持DALL·E 2和whisper-1模型",
      "body": "### 相关问题\r\n\r\n_No response_\r\n\r\n### 可能的解决办法\r\n\r\n现在ChatGPT已经开放了`DALL·E 2`和`whisper-1`这两个模型了，嘎嘎好用，非常期待川虎GPT可以支持。由衷感谢！\r\n\r\n### 帮助开发\r\n\r\n- [ ] 我愿意协助开发！\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "open",
      "author": "LaoJiuYes",
      "author_type": "User",
      "created_at": "2023-09-28T09:26:53Z",
      "updated_at": "2023-09-28T09:29:42Z",
      "closed_at": null,
      "labels": [
        "feature request",
        "🤖 model"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/903/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/903",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/903",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:39.979499",
      "comments": []
    },
    {
      "issue_number": 902,
      "title": "[功能请求]: 可否添加一个知识库切换开关",
      "body": "### 相关问题\n\n如果公司和或者机构已经有了较为完整的Index, 比如PINECONE或者Fass, 可否通过一个开关接入, 尤其是如果数据库是部署在云端\n\n### 可能的解决办法\n\n如果选择数据库, 数据密钥, 可以接入现有的数据库\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "jomininini",
      "author_type": "User",
      "created_at": "2023-09-28T03:07:51Z",
      "updated_at": "2023-09-28T03:07:51Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/902/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/902",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/902",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:39.979521",
      "comments": []
    },
    {
      "issue_number": 89,
      "title": "网站设置登录账号密码后`Connection errored out`",
      "body": "海外服务器，不用账号密码部署是OK的。（下图红框里是OK的）\r\n如果设置了账号密码，访问服务器的时候会出现登录界面。但是提问时会报错。（下图蓝框里的写法都会报错）\r\n![微信截图_20230309114710](https://user-images.githubusercontent.com/16250376/223914404-2732b1e9-bb20-4313-b347-522b7195d27d.png)\r\n![微信截图_20230309114538](https://user-images.githubusercontent.com/16250376/223914431-d6c94bf6-8f92-4fd0-b235-5b9aee6c3176.png)\r\n想问一下这里改如何正确修改，\r\n",
      "state": "closed",
      "author": "peiyun1982",
      "author_type": "User",
      "created_at": "2023-03-09T04:11:38Z",
      "updated_at": "2023-09-22T11:58:12Z",
      "closed_at": "2023-03-10T13:12:10Z",
      "labels": [
        "👍 good",
        "question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 23,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/89/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/89",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/89",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:39.979530",
      "comments": []
    },
    {
      "issue_number": 892,
      "title": "[Bug]: 在使用chatglm模型在问答的时候，产生回答错误",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n![Uploading QQ图片20230919112652.png…]()\r\n![Uploading QQ图片20230919112640.png…]()\r\n\n\n### 复现操作\n\n正常使用，但是进行对话时产生错误\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: linux\r\n- Browser: Chrome \r\n- Gradio version: 3.44.3\r\n- Python version: 3.10.8\r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "xxWeiDG",
      "author_type": "User",
      "created_at": "2023-09-19T03:27:27Z",
      "updated_at": "2023-09-21T02:26:18Z",
      "closed_at": "2023-09-21T02:26:18Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/892/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/892",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/892",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:39.979584",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "图片没传上来👀另外请贴出错误日志以方便排查原因",
          "created_at": "2023-09-19T03:28:50Z"
        },
        {
          "author": "xxWeiDG",
          "body": "> 图片没传上来👀另外请贴出错误日志以方便排查原因\r\n\r\n![QQ图片20230919112640](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/140797957/6d7b800e-fc0f-45cc-8101-5475c4d3a959)\r\n![QQ图片20230919112652](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/140797957/be57e8d7-526e-4ecc-a636-63d2eb9fe5f9)\r\n",
          "created_at": "2023-09-19T03:29:45Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "<img width=\"719\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/51039745/7d7ab497-92a3-426b-88e1-5cc4abc384a0\">\r\n<img width=\"727\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/51039745/18088e60-613c-4d66-8f41-8215f1fb4900\">\r\n\r\n我测试了一下好像没问题。请检查依赖版本是否正确，主要",
          "created_at": "2023-09-19T03:57:06Z"
        }
      ]
    },
    {
      "issue_number": 893,
      "title": "[Bug]: 对话的历史记录没有隔离？不同电脑都能够看到相同的会话记录！！！",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n我在电脑A上与川虎对话，同事在电脑B上也能够看到，会话历史记录没有隔离，请问是我们部署配置问题导致吗？还是系统有bug？\n\n### 复现操作\n\n部署在本地服务器后\r\nA电脑通过局域网访问该服务器与AI正常对话\r\nB电脑通过局域网访问该服务器，可以看到A电脑的所有对话。\n\n### 错误日志\n\n```shell\n没有报错\n```\n\n\n### 运行环境\n\n- OS: windows\r\n- Browser: Chrome\r\n- Gradio version: \r\n- Python version: 3.10\r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "bigbigtooth",
      "author_type": "User",
      "created_at": "2023-09-19T05:36:21Z",
      "updated_at": "2023-09-20T02:48:48Z",
      "closed_at": "2023-09-19T06:50:33Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/893/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/893",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/893",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:40.211556",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "请参阅：\r\n- [设置用户登录密码](https://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B#%E8%AE%BE%E7%BD%AE%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%E5%AF%86%E7%A0%81)\r\n- [未登录时隐藏历史对话记录](https://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B#%E6%9C%AA%E7%",
          "created_at": "2023-09-19T05:48:16Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "1. 登录之后，不同用户的对话历史相互隔离\r\n2. 如果不想登录，可以在config中将`hide_history_when_not_logged_in`设置为true",
          "created_at": "2023-09-19T06:31:12Z"
        },
        {
          "author": "bigbigtooth",
          "body": "果然解决了。\r\n看来缺一个比较详细一点的config文件说明文档，我都没留意这个参数。",
          "created_at": "2023-09-19T17:50:34Z"
        },
        {
          "author": "Keldos-Li",
          "body": "> 果然解决了。\n> \n> 看来缺一个比较详细一点的config文件说明文档，我都没留意这个参数。\n\n还不详细吗？example里也给出了wiki链接，wiki里整张表列了所有config参数，也都有链接指向具体的说明，你想让我们详细到哪里去呢？",
          "created_at": "2023-09-20T02:48:48Z"
        }
      ]
    },
    {
      "issue_number": 894,
      "title": "[功能请求]: 更新对Azure Embedding的支持",
      "body": "### 相关问题\r\n\r\nopenai.error.InvalidRequestError: Too many inputs. The max number of inputs is 16.  We hope to increase the number of inputs per request soon. Please contact us through an Azure support request at: https://go.microsoft.com/fwlink/?linkid=2213926 for further questions.\r\n\r\n### 可能的解决办法\r\n\r\n给OpenAIEmbeddings增加参数chunk_size=16\r\n\r\n### 帮助开发\r\n\r\n- [ ] 我愿意协助开发！\r\n\r\n### 补充说明\r\nhttps://github.com/langchain-ai/langchain/issues/4575\r\n_No response_",
      "state": "open",
      "author": "alexxchen",
      "author_type": "User",
      "created_at": "2023-09-19T08:01:02Z",
      "updated_at": "2023-09-19T08:01:28Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/894/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/894",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/894",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:40.405394",
      "comments": []
    },
    {
      "issue_number": 865,
      "title": "[本地部署]: ☹️发生了错误：module ‘commentjson’ has no attribute ‘JSONDecodeError’",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n部署完成后填写cofig.json后，首次试用提示☹️发生了错误：module ‘commentjson’ has no attribute ‘JSONDecodeError’\n\n### 复现操作\n\n1、正常完成部署\r\n2、聊天框输入123\r\n3、返回空白，右上角提示☹️发生了错误：module ‘commentjson’ has no attribute ‘JSONDecodeError’\n\n### 错误日志\n\n```shell\n错误信息为\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\lark\\parsers\\lalr_parser.py\", line 62, in get_action\r\n    return states[state][token.type]\r\n           ~~~~~~~~~~~~~^^^^^^^^^^^^\r\nKeyError: '$END'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"E:\\gj\\ai\\ChuanhuChatGPT\\modules\\models\\models.py\", line 210, in _decode_chat_response\r\n    chunk = json.loads(chunk[6:])\r\n            ^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\commentjson\\commentjson.py\", line 180, in loads\r\n    parsed = _remove_trailing_commas(parser.parse(text))\r\n                                     ^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\lark\\lark.py\", line 311, in parse\r\n    return self.parser.parse(text, start=start)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\lark\\parser_frontends.py\", line 89, in parse\r\n    return self._parse(token_stream, start, *[sps] if sps is not NotImplemented else [])\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\lark\\parser_frontends.py\", line 54, in _parse\r\n    return self.parser.parse(input, start, *args)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\lark\\parsers\\lalr_parser.py\", line 36, in parse\r\n    return self.parser.parse(*args)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\lark\\parsers\\lalr_parser.py\", line 99, in parse\r\n    _action, arg = get_action(token)\r\n                   ^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\lark\\parsers\\lalr_parser.py\", line 65, in get_action\r\n    raise UnexpectedToken(token, expected, state=state)\r\nlark.exceptions.UnexpectedToken: Unexpected token Token($END, '') at line 1, column 1.\r\nExpected one of:\r\n        * LBRACE\r\n        * LSQB\r\n        * TRUE\r\n        * FALSE\r\n        * SIGNED_NUMBER\r\n        * ESCAPED_STRING\r\n        * NULL\r\n\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"E:\\gj\\ai\\ChuanhuChatGPT\\modules\\models\\base_model.py\", line 455, in predict\r\n    for chatbot, status_text in iter:\r\n  File \"E:\\gj\\ai\\ChuanhuChatGPT\\modules\\models\\base_model.py\", line 269, in stream_next_chatbot\r\n    for partial_text in stream_iter:\r\n  File \"E:\\gj\\ai\\ChuanhuChatGPT\\modules\\models\\models.py\", line 58, in get_answer_stream_iter\r\n    for i in iter:\r\n  File \"E:\\gj\\ai\\ChuanhuChatGPT\\modules\\models\\models.py\", line 211, in _decode_chat_response\r\n    except json.JSONDecodeError:\r\n           ^^^^^^^^^^^^^^^^^^^^\r\nAttributeError: module 'commentjson' has no attribute 'JSONDecodeError'\n```\n\n\n### 运行环境\n\n```markdown\n- OS: Windows11 22H2\r\n- Browser: edge\r\n- Gradio version: \r\n- Python version: v3.11.4:\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "mgclznr",
      "author_type": "User",
      "created_at": "2023-08-19T11:13:21Z",
      "updated_at": "2023-09-14T07:44:03Z",
      "closed_at": "2023-09-14T07:44:03Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/865/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/865",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/865",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:40.405416",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "尝试执行\r\n```\r\npip install commentjson --upgrade\r\n```\r\n?",
          "created_at": "2023-08-19T12:07:26Z"
        },
        {
          "author": "Keldos-Li",
          "body": "应该已经解决了",
          "created_at": "2023-09-14T07:44:03Z"
        }
      ]
    },
    {
      "issue_number": 885,
      "title": "[功能请求]: 能否支持text-generation-inference的api",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n仓库地址：https://github.com/huggingface/text-generation-inference\r\nAPI接口文档：https://huggingface.github.io/text-generation-inference/\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "Fuxinlper",
      "author_type": "User",
      "created_at": "2023-09-14T07:37:58Z",
      "updated_at": "2023-09-14T07:38:48Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/885/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/885",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/885",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:40.569699",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "可以有",
          "created_at": "2023-09-14T07:38:47Z"
        }
      ]
    },
    {
      "issue_number": 816,
      "title": "使用文档时出现AttributeError: 'NoneType' object has no attribute 'docstore'[Bug]: ",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n更新至最新版后，上传本地文件，不能使用，出现错误\n\n### 复现操作\n\n正常本地部署\r\n更新至最新版\n\n### 错误日志\n\n```shell\nTraceback (most recent call last):\r\n  File \"C:\\Users\\Think\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\gradio\\routes.py\", line 422, in run_predict\r\n    output = await app.get_blocks().process_api(\r\n  File \"C:\\Users\\Think\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\gradio\\blocks.py\", line 1323, in process_api\r\n    result = await self.call_function(\r\n  File \"C:\\Users\\Think\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\gradio\\blocks.py\", line 1051, in call_function\r\n    prediction = await anyio.to_thread.run_sync(\r\n  File \"C:\\Users\\Think\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\anyio\\to_thread.py\", line 31, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n  File \"C:\\Users\\Think\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 937, in run_sync_in_worker_thread\r\n    return await future\r\n  File \"C:\\Users\\Think\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 867, in run\r\n    result = context.run(func, *args)\r\n  File \"D:\\Users\\ChuanhuChatGPT\\modules\\utils.py\", line 119, in handle_summarize_index\r\n    return current_model.summarize_index(*args)\r\n  File \"D:\\Users\\ChuanhuChatGPT\\modules\\models\\base_model.py\", line 305, in summarize_index\r\n    summary = chain({\"input_documents\": list(index.docstore.__dict__[\"_dict\"].values())}, return_only_outputs=True)[\"output_text\"]\r\nAttributeError: 'NoneType' object has no attribute 'docstore'\n```\n\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "yxmnjxzx",
      "author_type": "User",
      "created_at": "2023-06-17T13:44:03Z",
      "updated_at": "2023-09-13T09:42:28Z",
      "closed_at": "2023-09-13T09:42:27Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 8,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/816/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/816",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/816",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:40.756733",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "你的 langchain 版本是什么？",
          "created_at": "2023-06-18T07:13:26Z"
        },
        {
          "author": "yxmnjxzx",
          "body": "> 你的 langchain 版本是什么？\n\n0.0.2",
          "created_at": "2023-06-18T14:54:11Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "你应该使用`0.0.173`版本的 langchain",
          "created_at": "2023-06-19T03:49:02Z"
        },
        {
          "author": "zernel",
          "body": "我用 0.0.173 版本的 langchain 也有遇到这个问题，直接在 huggingface 的 space 上传文档再点总结也会一样报错（https://huggingface.co/spaces/JohnSmith9982/ChuanhuChatGPT）",
          "created_at": "2023-06-19T04:31:51Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "唔，那你再看看 FAISS 的版本？`faiss-cpu`的版本应该是`1.7.4`",
          "created_at": "2023-06-19T04:39:28Z"
        }
      ]
    },
    {
      "issue_number": 795,
      "title": "[功能请求]: 1.可以将右侧菜单栏设置为悬浮 2.可以做到跟openai官网一样的多对话页",
      "body": "### 相关问题\n\n无\n\n### 可能的解决办法\n\n无\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n1.可以将右侧菜单栏设置为悬浮，鼠标移上去就弹出或者设置为可收起 \r\n2.可以做到跟openai官网一样，左侧有一个多对话页，并且默认保存对话历史记录么",
      "state": "closed",
      "author": "baifagg",
      "author_type": "User",
      "created_at": "2023-06-06T10:32:03Z",
      "updated_at": "2023-09-10T16:59:15Z",
      "closed_at": "2023-09-10T16:59:15Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/795/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/795",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/795",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:40.950420",
      "comments": []
    },
    {
      "issue_number": 791,
      "title": "[功能请求]: 能否增加会话框的方式，方便切换多个对话，像官方chatgpt一样",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n能否增加会话框的方式，方便切换多个对话，像官方chatgpt一样\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "ape6239",
      "author_type": "User",
      "created_at": "2023-06-02T06:10:29Z",
      "updated_at": "2023-09-10T16:59:15Z",
      "closed_at": "2023-09-10T16:59:15Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/791/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/791",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/791",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:40.950446",
      "comments": []
    },
    {
      "issue_number": 454,
      "title": "[功能请求]: 可交互和cache的聊天历史",
      "body": "### 相关问题\n\n不相关\n\n### 可能的解决办法\n\n像官网或https://github.com/Chanzhaoyu/chatgpt-web 一样保存一个可以交互的聊天历史栏, 并且不会因为刷新过期, 根据user session cache?\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "xingfanxia",
      "author_type": "User",
      "created_at": "2023-03-29T09:20:05Z",
      "updated_at": "2023-09-10T16:59:14Z",
      "closed_at": "2023-09-10T16:59:14Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/454/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/454",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/454",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:40.950453",
      "comments": [
        {
          "author": "Gary2018X",
          "body": "那个可能就要存localstorage了",
          "created_at": "2023-03-29T09:30:26Z"
        },
        {
          "author": "Gary2018X",
          "body": "gradio不知道好不好弄",
          "created_at": "2023-03-29T09:30:40Z"
        },
        {
          "author": "eefan000",
          "body": "不用存本地吧，不是有账号关联么，存服务器上",
          "created_at": "2023-04-06T08:01:17Z"
        }
      ]
    },
    {
      "issue_number": 282,
      "title": "[功能请求] 自动隐藏侧边栏",
      "body": "### 该功能请求是否与某个问题相关？\r\n> 描述你遇到的问题~\r\n\r\n昨天看评论区说UI不够成熟，感觉可能是因为第一眼不够简洁，还有就是说可能chatbot不是很方便使用。所以我想着可以自动隐藏侧边栏\r\n\r\n\r\n### 可能的解决办法\r\n> 如果可以，给出一个解决思路~\r\n\r\n在我的 [newUI](https://github.com/HaleyCH/ChuanhuChatGPT-hch/tree/newUI) branch里已经有了基础的实现。我不确定是否要提交pr。或许可以先看看。\r\n\r\n\r\n\r\n### 其他\r\n> 补充说明\r\n\r\n我目前写的版本十分简陋，也不方便后续添加固定侧边栏方案，如有好方法，请知会我。",
      "state": "closed",
      "author": "HaleyCH",
      "author_type": "User",
      "created_at": "2023-03-22T04:14:44Z",
      "updated_at": "2023-09-10T16:59:14Z",
      "closed_at": "2023-09-10T16:59:14Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 13,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/282/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/282",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/282",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:41.169819",
      "comments": [
        {
          "author": "HaleyCH",
          "body": "宽屏模式自动隐藏\r\n窄屏默认显示\r\n<img width=\"1541\" alt=\"截屏2023-03-22 12 19 00\" src=\"https://user-images.githubusercontent.com/29998135/226801268-873fcca7-01ee-44ec-9cd2-793839b0bad9.png\">\r\n<img width=\"1543\" alt=\"截屏2023-03-22 12 19 09\" src=\"https://user-images.githubusercontent.com/29998135/226801275-8d2aa93f-6dd9-",
          "created_at": "2023-03-22T04:20:31Z"
        },
        {
          "author": "Keldos-Li",
          "body": "我还在想应该特意限制聊天窗口宽度呢_(:з」∠)_（是的，gradio也特意对主内容的宽度做了限制。）\n过宽的聊天窗口的视觉体验是不利于用户接收信息的，也并不美观（这是个人观点）。\n\n至于配置内容要不要自动隐藏……这是另一个问题。我个人会觉得不隐藏也挺好。",
          "created_at": "2023-03-22T04:48:40Z"
        },
        {
          "author": "HaleyCH",
          "body": "对于限制聊天窗口宽度，我个人认为这是必要的。刚刚在看的时候也是感觉1000px左右maxWidth就够了。\r\n\r\n但是配置内容还是我认为除了`填写api key`和`System prompt`，其他的还是隐藏比较好。\r\n从开发者角度而言，肯定是一眼能看到越多有效信息越好。\r\n但是就用户而言或许第一眼见到的界面过于复杂会影响体验和心情。\r\n\r\n不过说到底，如果能找到一个在gradio里用js的好方法就没那么多事了（\r\n\r\n### 补充（1000px左右的界面）：\r\n<img width=\"1006\" alt=\"截屏2023-03-22 13 04 56\" src=\"https://user-i",
          "created_at": "2023-03-22T05:09:51Z"
        },
        {
          "author": "HaleyCH",
          "body": "加了固定任务栏选项，这下应该皆大欢喜了（（（\r\n\r\nhttps://github.com/HaleyCH/ChuanhuChatGPT-hch/blob/b11a6ae45e8b0123cb0d43930795ba84edaba8b3/ChuanhuChatbot.py#L175\r\n\r\n还有 是不是该开个js的branch做一下js文件加载支持。\r\n\r\n<img width=\"571\" alt=\"截屏2023-03-23 11 07 39\" src=\"https://user-images.githubusercontent.com/29998135/227090858-97d42724-ff",
          "created_at": "2023-03-23T03:08:33Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "> 加了固定任务栏选项，这下应该皆大欢喜了（（（\r\n> \r\n> https://github.com/HaleyCH/ChuanhuChatGPT-hch/blob/b11a6ae45e8b0123cb0d43930795ba84edaba8b3/ChuanhuChatbot.py#L175\r\n> \r\n> 还有 是不是该开个js的branch做一下js文件加载支持。\r\n> \r\n> <img alt=\"截屏2023-03-23 11 07 39\" width=\"571\" src=\"https://user-images.githubusercontent.com/29998135/2270908",
          "created_at": "2023-03-23T03:11:33Z"
        }
      ]
    },
    {
      "issue_number": 823,
      "title": "[功能请求]: 为啥不使用openai的库？",
      "body": "### 相关问题\n\n我看代码里都是请求的url，不是调用的openai库，为啥没用库呢？\n\n### 可能的解决办法\n\n使用库还能兼容 Azure\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "grimraider",
      "author_type": "User",
      "created_at": "2023-06-28T02:47:57Z",
      "updated_at": "2023-09-08T12:37:27Z",
      "closed_at": null,
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/823/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/823",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/823",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:41.346500",
      "comments": [
        {
          "author": "Huiyicc",
          "body": "使用库就没法换代理url了吧",
          "created_at": "2023-07-27T11:27:26Z"
        },
        {
          "author": "QAbot-zh",
          "body": "@Huiyicc 可以的呀，openai的库可以设置openai.api_base和openai.proxy的",
          "created_at": "2023-09-08T12:37:26Z"
        }
      ]
    },
    {
      "issue_number": 874,
      "title": "[功能请求]: 希望取得联系，并支持 InternLM",
      "body": "\r\n\r\n\r\n尊敬的 ChuanhuChatGPT 应用开发者，我是 InternLM 社区开发者&志愿者尖米, 大佬开源的工作对我的启发很大，希望可以探讨使用 InternLM 实现 ChuanhuChatGPT 的可能性和实现路径，我的微信是 mzm312，希望可以取得联系进行更深度的交流；\r\n\r\n\r\n",
      "state": "open",
      "author": "JimmyMa99",
      "author_type": "User",
      "created_at": "2023-08-28T06:47:43Z",
      "updated_at": "2023-09-06T18:10:28Z",
      "closed_at": null,
      "labels": [
        "feature request",
        "🤖 model"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/874/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/874",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/874",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:41.632731",
      "comments": []
    },
    {
      "issue_number": 861,
      "title": "如何在聊天机器人回复中添加喜欢和不喜欢按钮？",
      "body": "### 相关问题\n\n我想在聊天机器人的回复内容中自定义添加喜欢和不喜欢按钮，如图所示。 你能给我解决方案吗？ 谢谢\r\n\r\n![Untitled](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/63329565/d2951913-006f-434d-aae4-8c9f6a14768a)\r\n\n\n### 可能的解决办法\n\n我想在聊天机器人的回复内容中自定义添加喜欢和不喜欢按钮，如图所示。 你能给我解决方案吗？ 谢谢\r\n\r\n![Untitled](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/63329565/d2951913-006f-434d-aae4-8c9f6a14768a)\r\n\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "nguyenquocduongqnu",
      "author_type": "User",
      "created_at": "2023-08-17T07:16:32Z",
      "updated_at": "2023-09-06T18:09:31Z",
      "closed_at": "2023-09-06T18:09:15Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/861/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/861",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/861",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:41.632751",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "I'm glad to see that you used our program as prototype (and even opened the same issue in gradio-app/gradio#5250...) \r\n\r\nIn fact, this is feasible to some extent, for example, we have like and dislike buttons for the XMChat model. If you need to add it to the conversation message elements, you just ",
          "created_at": "2023-08-17T07:30:26Z"
        },
        {
          "author": "nguyenquocduongqnu",
          "body": "> \r\n\r\nWe want to create a feature to rate feedback.\r\n\r\nWe use mongo db to statistic like or dislike from user feedback. I want to display these 2 buttons in the response from chatbot, can you suggest me the direction. Thank you",
          "created_at": "2023-08-17T07:50:04Z"
        },
        {
          "author": "Keldos-Li",
          "body": "OK, I will explain this in short:\r\n\r\n1. Use gradio to add like and dislike buttons anywhere you like, and bind functions to them. If you want, set visible=False.\r\n2. Use javascript (with HTML and CSS) to create custom like and dislike buttons, and use mutation observer to add them to messages when p",
          "created_at": "2023-08-17T08:06:42Z"
        },
        {
          "author": "nguyenquocduongqnu",
          "body": "> OK, I will explain this in short:\r\n> \r\n> 1. Use gradio to add like and dislike buttons anywhere you like, and bind functions to them. If you want, set visible=False.\r\n> 2. Use javascript (with HTML and CSS) to create custom like and dislike buttons, and use mutation observer to add them to message",
          "created_at": "2023-08-17T08:29:16Z"
        },
        {
          "author": "Keldos-Li",
          "body": "The outcome is actually something like this：\r\n\r\n<img width=\"542\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/23137268/2ae84ddd-4942-4786-8cb5-ae01a77c0cd7\">\r\n\r\nI will close this issue for now.",
          "created_at": "2023-09-06T18:09:15Z"
        }
      ]
    },
    {
      "issue_number": 877,
      "title": "[功能请求]: 请求支持讯飞星火大模型2.0",
      "body": "### 相关问题\n\n否\n\n### 可能的解决办法\n\n讯飞星火大模型目前体验良好，回答十分符合中文语境，而且api申请很快就通过了，是否可以考虑支持接入？\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\nhttps://www.xfyun.cn/",
      "state": "closed",
      "author": "cnChenKai",
      "author_type": "User",
      "created_at": "2023-08-31T04:18:43Z",
      "updated_at": "2023-09-04T09:08:57Z",
      "closed_at": "2023-09-01T09:09:04Z",
      "labels": [
        "feature request",
        "🤖 model"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/877/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/877",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/877",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:41.815407",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "可以的",
          "created_at": "2023-08-31T04:19:31Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "<img width=\"700\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/51039745/04338678-6e6b-4d3d-b3b2-2ae0f1471dcd\">\r\n\r\n还没 push，再优化下就 push～",
          "created_at": "2023-09-01T08:15:27Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "Push 啦",
          "created_at": "2023-09-01T09:09:02Z"
        },
        {
          "author": "cnChenKai",
          "body": "> Push 啦\r\n\r\n感谢辛苦付出",
          "created_at": "2023-09-04T09:08:57Z"
        }
      ]
    },
    {
      "issue_number": 804,
      "title": "[feature request]: Adding txt2img models support 申请加入文生图功能",
      "body": "### 相关问题\n\nNone\n\n### 可能的解决办法\n\nI wish we could support txt2img functions, and I'm planning to support in following steps:\r\n1. Implement an API bridge to [midjourney-proxy](https://github.com/Licoy/ChatGPT-Midjourney) and achieve txt2img function\r\n2. Provide a ChatGPT2IMG switch. By enabling it, use a system prompt to generate image promts from user input, and then pass the image prompts to txt2img.\r\n3. Like current xmchat, provide img2img functions(also inpaint/outpaint)\r\n4. In the future, add support to stable-diffusion-webui sdapi, so users can deploy locally or just use existing service.\r\n\r\n希望能接入txt2img类功能，个人预计按照以下步骤实现：\r\n1. 接入midjourney-proxy接口，实现普通txt2img\r\n2. 提供ChatGPT2img开关，开启后先根据system prompt让gpt生成image prompt，再txt2img\r\n3. 可能再仿照xmchat，提供img2img（垫图/重绘/补画）功能\r\n4. 未来除了midjourney再接入开源stable-diffusion的sdapi（可远程也可本地部署）\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\nMidJourney的代理\r\nhttps://github.com/novicezk/midjourney-proxy\r\n\r\n另一个NodeJS的界面（也可能不是Node只是普通的TS？我不是很懂JS系列）\r\nhttps://github.com/Licoy/ChatGPT-Midjourney\r\n",
      "state": "closed",
      "author": "noahzark",
      "author_type": "User",
      "created_at": "2023-06-12T13:10:25Z",
      "updated_at": "2023-08-26T16:24:47Z",
      "closed_at": "2023-08-26T16:24:47Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/804/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/804",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/804",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:41.999539",
      "comments": []
    },
    {
      "issue_number": 740,
      "title": "[功能请求]: 添加对azure openai api的支持",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n请求添加对azure openai api的支持。azure的openai服务可以不用翻墙\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "debugAllTheTime",
      "author_type": "User",
      "created_at": "2023-05-09T07:03:19Z",
      "updated_at": "2023-08-26T15:01:02Z",
      "closed_at": "2023-07-27T13:46:48Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 9,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/740/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/740",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/740",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:44.009723",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "你可以自定义API Host为Azure的，应该就可以用了。",
          "created_at": "2023-05-12T11:59:40Z"
        },
        {
          "author": "baiyi-os",
          "body": "我这边自定义了API Host为Azure的(我将/modules/presets.py文件中的api.openai.com均改为了openai4kol.openai.azure.com)，并且key也改为了Azure的，请求时报错：\r\n2023-05-18 10:17:12,366 [ERROR] [models.py:91] 获取API使用情况失败:API request failed with status code 404: {\"error\":{\"code\":\"404\",\"message\": \"Resource not found\"}}\r\n",
          "created_at": "2023-05-18T02:19:03Z"
        },
        {
          "author": "baiyi-os",
          "body": "您好，后面会支持微软的openapi吗",
          "created_at": "2023-05-18T05:57:34Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "> 您好，后面会支持微软的openapi吗\r\n\r\n我没有微软API的使用权限，所以没法适配QAQ",
          "created_at": "2023-05-18T05:58:26Z"
        },
        {
          "author": "baiyi-os",
          "body": "嗯嗯，好的，如果后面支持了，辛苦也回复一下\r\n",
          "created_at": "2023-05-18T06:01:21Z"
        }
      ]
    },
    {
      "issue_number": 261,
      "title": "发送消息提示：Something went wrong Expecting value: line 1 column 1 (char 0)",
      "body": "最开始运行时，终端提示“module 'gradio' has no attribute 'themes' ”\r\n后续更新了gradio库，使用pip install --upgrade gradio来更新。\r\n再次运行时，可以运行成功，然后向GPT发送消息时提示如下：\r\n![image](https://user-images.githubusercontent.com/77671587/226641123-17e75a6d-0842-464b-943e-0d5ef591038f.png)\r\n",
      "state": "closed",
      "author": "WUXM5",
      "author_type": "User",
      "created_at": "2023-03-21T14:40:07Z",
      "updated_at": "2023-08-24T11:34:32Z",
      "closed_at": "2023-03-21T14:45:47Z",
      "labels": [
        "duplicate",
        "question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/261/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/261",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/261",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:44.213892",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "请提供终端报错信息。",
          "created_at": "2023-03-21T14:42:48Z"
        },
        {
          "author": "WUXM5",
          "body": "已查看到解决方案，抱歉，以为是更新gradio库导致，实际并不是；页面已有解决方案",
          "created_at": "2023-03-21T14:45:47Z"
        },
        {
          "author": "15237735357",
          "body": "怎么解决的啊",
          "created_at": "2023-03-26T08:32:36Z"
        },
        {
          "author": "grimraider",
          "body": "同问，怎么解决的？",
          "created_at": "2023-06-15T09:52:48Z"
        },
        {
          "author": "yannqi",
          "body": "关掉代理就行\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/9150",
          "created_at": "2023-08-24T11:34:32Z"
        }
      ]
    },
    {
      "issue_number": 251,
      "title": "[功能请求] 对话框中添加聊天头像",
      "body": "对话框中添加聊天头像\r\n",
      "state": "closed",
      "author": "sigmundchen",
      "author_type": "User",
      "created_at": "2023-03-21T07:16:18Z",
      "updated_at": "2023-08-23T15:02:34Z",
      "closed_at": "2023-08-23T14:58:36Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/251/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/251",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/251",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:44.401417",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "Hi @sigmundchen, that's accomplished, you try this feature by pulling our latest code on main branch.",
          "created_at": "2023-08-23T15:02:34Z"
        }
      ]
    },
    {
      "issue_number": 868,
      "title": "[Bug]: 上传文件之后，进行问答，没有上下文了",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n上传完文件之后，可以针对文件内容进行问答，但是没有上下文了，比如问完一个问题后我说：我刚才问的是啥，这时候会输出无法确定，但是把文件删除掉，又可以回答这样带上下文的问题了\n\n### 复现操作\n\n上传了一份平安的财报之后，进行问答：\r\n\r\n问:   平安的收入由哪些部分组成\r\n答：平安的收入由多个部分组成，根据提供的信息，可以得出以下结论：（正确答案）\r\n\r\n问：中国有多少民族\r\n答：根据所提供的上下文信息，无法确定文中提到的“中国”是指中华人民共和国还是其他含义。因此，无法回答关于中国有多少民族的问题。 要回答这个问题，请提供更多的信息或改变问题的表述。\r\n\r\n问：我刚才问的啥\r\n答：根据提供的信息，无法确定你刚才问的问题是什么。请提供更多细节或明确你的问题，以便我可以给出准确的回答。\r\n\r\n\r\n\r\n\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "FreeNet2023",
      "author_type": "User",
      "created_at": "2023-08-23T10:14:45Z",
      "updated_at": "2023-08-23T10:14:45Z",
      "closed_at": null,
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/868/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/868",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/868",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:44.577287",
      "comments": []
    },
    {
      "issue_number": 757,
      "title": "[其他]: ImportError: cannot import name 'TextIteratorStreamer' from 'transformers' ",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 错误描述\n\nTraceback (most recent call last):\r\n  File \"/home/hdw/ChuanhuChat/ChuanhuChatGPT/ChuanhuChatbot.py\", line 14, in &lt;module&gt;\r\n    from modules.models.models import get_model\r\n  File \"/home/hdw/ChuanhuChat/ChuanhuChatGPT/modules/models/models.py\", line 25, in &lt;module&gt;\r\n    from ChuanhuChatGPT.modules.models.StableLM import StableLM_Client\r\n  File \"/home/hdw/ChuanhuChat/ChuanhuChatGPT/modules/models/StableLM.py\", line 2, in &lt;module&gt;\r\n    from transformers import AutoModelForCausalLM, AutoTokenizer, pipeline, StoppingCriteria, StoppingCriteriaList, TextIteratorStreamer\r\nImportError: cannot import name 'TextIteratorStreamer' from 'transformers' (/home/hdw/anaconda3/envs/ChuanhuChat/lib/python3.10/site-packages/transformers/__init__.py)\n\n### 复现操作\n\n1.正常完成部署\r\n2.运行python ChuanhuChatbot.py时报错\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n(或您的其他运行环境信息)\r\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "gitctrlx",
      "author_type": "User",
      "created_at": "2023-05-17T01:02:40Z",
      "updated_at": "2023-08-23T06:39:50Z",
      "closed_at": "2023-05-17T01:07:25Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/757/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/757",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/757",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:44.577301",
      "comments": [
        {
          "author": "zhangavator",
          "body": "您好，请问这个报错怎么解决的呢",
          "created_at": "2023-08-23T06:39:50Z"
        }
      ]
    },
    {
      "issue_number": 863,
      "title": "[功能请求]: 怎样保留upload files",
      "body": "### 相关问题\n\n现在可以上传文件，并对文件中的内容进行chat，但是每次关掉浏览器后，下次重新打开界面，上传的文件消失了，怎么样才能保留自己的文件列表(knowledge)？避免重复上传？\n\n### 可能的解决办法\n\n引入workspace的概念？\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "jamsnrihk",
      "author_type": "User",
      "created_at": "2023-08-19T04:08:39Z",
      "updated_at": "2023-08-19T04:08:39Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/863/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/863",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/863",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:44.736633",
      "comments": []
    },
    {
      "issue_number": 852,
      "title": "[Docker]: validation error for SerpAPIWrapper root Could not import serpapi python package. Please install it with pip install google-search-results",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n错误：validation error for SerpAPIWrapper root Could not import serpapi python package. Please install it with pip install google-search-results\r\n之前有个issues类似，但是没有解决掉问题，我切换了python版本，重新安装，都没有办法解决该问题\n\n### 复现操作\n\n1.正常完成docker部署\r\n2.正常完成配置、api的填写\r\n3.执行pip install google-search-results\r\n4.还是报相同的错误\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Docker version: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "503611908",
      "author_type": "User",
      "created_at": "2023-07-31T02:52:37Z",
      "updated_at": "2023-08-18T13:44:35Z",
      "closed_at": null,
      "labels": [
        "question",
        "docker deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/852/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/852",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/852",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:44.736654",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "奇怪。我等会儿调查一下",
          "created_at": "2023-07-31T05:02:25Z"
        },
        {
          "author": "hkwz2023",
          "body": "同样的问题。求解",
          "created_at": "2023-08-04T12:13:22Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "虚拟环境是同一个吗？换句话说，安装 google-search-results 的 python 和启动川虎 Chat 的 python 是同一个 python 吗？另外，重新安装之后，应该重新启动川虎 Chat",
          "created_at": "2023-08-04T16:17:00Z"
        },
        {
          "author": "hkwz2023",
          "body": "docker安装，没有用虚拟环境。自带Python2.7，后来换成了3.7安装google-search-results，重启docker问题依旧。",
          "created_at": "2023-08-05T08:09:28Z"
        },
        {
          "author": "heavenkiller2018",
          "body": "I am confronting an identical predicament, earnestly anticipating a resolution. \r\n\r\n@GaiZhenbiao  ",
          "created_at": "2023-08-18T11:26:13Z"
        }
      ]
    },
    {
      "issue_number": 161,
      "title": "[其他] Something went wrong Connection errored out.",
      "body": "非常高兴可以进入《川虎ChatGPT 🚀》了，但是我在提出询问时遇到了 Something went wrong的问题\r\n![image](https://user-images.githubusercontent.com/24377958/225313346-04b1bad3-23c9-43ce-8091-57d2c28ddc83.png)\r\n然后我重新申请了一个新的apikey还是遇到了这个问题\r\n### 错误描述\r\n>Something went wrong\r\nConnection errored out.\r\n\r\n### 复现操作\r\n> 你之前干了什么，然后出现了错误呢？例如：\r\n> 1. 正常完成本地部署\r\n> 2. 在对话框中输入 “你好”，“地球”\r\n> 3. 显示ERROR，Something went wrong\r\nConnection errored out.\r\n\r\n### 错误截图\r\n> ![image](https://user-images.githubusercontent.com/24377958/225313832-95e3ad92-2a1a-4b02-a8ae-451d312542df.png)\r\n\r\n\r\n### 运行环境\r\n>腾讯云\r\n\r\n服务器操作系统：CentOS 7.6 64bit\r\n\r\n - OS: [e.g. Windows11 22H2]\r\n - Browser: [e.g. Chrome, safari]\r\n - Gradio version:\r\n - Python (或Python3) version:\r\n\r\n### 其他\r\n> 补充说明\r\n",
      "state": "closed",
      "author": "jiang54",
      "author_type": "User",
      "created_at": "2023-03-15T12:51:20Z",
      "updated_at": "2023-08-14T08:33:31Z",
      "closed_at": "2023-03-18T16:55:16Z",
      "labels": [
        "duplicate",
        "question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 9,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/161/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/161",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/161",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:49.950886",
      "comments": [
        {
          "author": "jiang54",
          "body": "#89  我看了，没太看懂，好像是说打开92和93端口？我不太理解，希望大佬解释一下。",
          "created_at": "2023-03-15T13:09:49Z"
        },
        {
          "author": "Keldos-Li",
          "body": "或许可以看看README的[这一部分](https://github.com/GaiZhenbiao/ChuanhuChatGPT#%E9%85%8D%E7%BD%AE-nginx-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86)？",
          "created_at": "2023-03-15T13:14:06Z"
        },
        {
          "author": "jiang54",
          "body": "> 或许可以看看README的[这一部分](https://github.com/GaiZhenbiao/ChuanhuChatGPT#%E9%85%8D%E7%BD%AE-nginx-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86)？\r\n\r\n“””网页提示错误 Something went wrong\r\nSomething went wrong\r\nExpecting value: 1ine 1 column 1 (char o)\r\n出现这个错误的原因是127.0.0.1被代理了，导致网页无法和后端通信。请设置代理软件，将127.0.0.1加入直连。\r\n“””\r\n你好",
          "created_at": "2023-03-15T13:20:24Z"
        },
        {
          "author": "Keldos-Li",
          "body": "> 或许可以看看README的[这一部分](https://github.com/GaiZhenbiao/ChuanhuChatGPT#%E9%85%8D%E7%BD%AE-nginx-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86)？\n\n抱歉，才发现summary中的链接会有问题。请看看 [远程部署](https://github.com/GaiZhenbiao/ChuanhuChatGPT#%E8%BF%9C%E7%A8%8B%E9%83%A8%E7%BD%B2) 中的 配置 Nginx 反向代理 部分。",
          "created_at": "2023-03-15T13:27:06Z"
        },
        {
          "author": "jiang54",
          "body": "> > 或许可以看看README的[这一部分](https://github.com/GaiZhenbiao/ChuanhuChatGPT#%E9%85%8D%E7%BD%AE-nginx-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86)？\r\n> \r\n> 抱歉，才发现summary中的链接会有问题。请看看 [远程部署](https://github.com/GaiZhenbiao/ChuanhuChatGPT#%E8%BF%9C%E7%A8%8B%E9%83%A8%E7%BD%B2) 中的 配置 Nginx 反向代理 部分。\r\n\r\n\"\"\"注意：配置反向代理不是必须的。",
          "created_at": "2023-03-15T13:32:34Z"
        }
      ]
    },
    {
      "issue_number": 829,
      "title": "[Bug]: 多api key负载均衡时，UI手动输入的key不能长期覆盖生效",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n在使用多apikey时，手动填入单条apikey，问答一次，再次问答时会跳回多apikey\n\n### 复现操作\n\n在使用多apikey时，手动填入单条apikey，问答一次，再次问答时会跳回多apikey\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "Pnut-GGG",
      "author_type": "User",
      "created_at": "2023-07-03T05:59:03Z",
      "updated_at": "2023-08-09T12:31:39Z",
      "closed_at": null,
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/829/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/829",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/829",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:50.141620",
      "comments": []
    },
    {
      "issue_number": 699,
      "title": "[功能请求]: 能不能加入whisper和TTS的支持，以便能够进行语音交流？",
      "body": "### 相关问题\n\n可以像一个私人口语教练一样陪你练口语，甚至可以和你一起说相声，感觉很nice\n\n### 可能的解决办法\n\n我线下使用过edge-tts和openai 的whisper分别做过语音合成和语音转文本感觉效果还可以，当然您有更好的方案那就更好了，非常期待～\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\nedge-tts:https://pypi.org/project/edge-tts/\r\nopenai whisper: https://github.com/openai/whisper\r\n或者whisper api都可以",
      "state": "open",
      "author": "Finley1991",
      "author_type": "User",
      "created_at": "2023-04-23T14:18:48Z",
      "updated_at": "2023-08-02T03:28:41Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/699/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/699",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/699",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:50.141642",
      "comments": [
        {
          "author": "alphaplato",
          "body": "我也正在调研这个，很有前景，从私教开始是最容易的切入口，逐步可以拓展到多角色和vr。留下方式，可以沟通下不",
          "created_at": "2023-08-02T03:28:40Z"
        }
      ]
    },
    {
      "issue_number": 853,
      "title": "[本地部署]: 安装依赖之后用 python ChuanhuChatbot.py或者 python3 ChuanhuChatbot.py都不能启动",
      "body": "### 是否已存在现有反馈与解答？\n\n- [x] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n本人小白，跟着教程一步步做的， 安装完依赖输入什么都不能启动，python版本是3.11，折腾了一下午，卡在最后一步了\r\n\n\n### 复现操作\n\n本人小白，跟着教程一步步做的， 安装完依赖输入什么都不能启动，python版本是3.11，折腾了一下午，卡在最后一步了\r\n\r\n\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n```markdown\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version:\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "2661780070",
      "author_type": "User",
      "created_at": "2023-08-01T10:48:25Z",
      "updated_at": "2023-08-01T12:53:02Z",
      "closed_at": "2023-08-01T12:53:02Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/853/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/853",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/853",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:50.311382",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "Hi，我能理解您烦躁的心情，但还是希望您能提供更多的信息，不然我们也没法帮到你。你是根据 [这个步骤](https://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B#%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2) 本地安装部署的嘛？有没有您具体每步操作的截图？在启动时终端有何报错与输出？",
          "created_at": "2023-08-01T10:58:36Z"
        },
        {
          "author": "2661780070",
          "body": "是的，我电脑截屏坏了，直接复制过来是\r\nRequirement already satisfied: mypy-extensions>=0.3.0 in c:\\users\\zhang'san\\appd\r\nata\\local\\programs\\python\\python311\\lib\\site-packages (from typing-inspect<1,>=0\r\n.4.0->dataclasses-json<0.6.0,>=0.5.7->langchain==0.0.173->-r requirements.txt (l\r\nine 10)) (1.0.0)\r\nRequirement alre",
          "created_at": "2023-08-01T11:12:06Z"
        },
        {
          "author": "Keldos-Li",
          "body": "可能要请您检查下是否正确配置与安装了Python，是否将python（python3）加入了环境变量。\r\n试着在终端中执行\r\n```\r\npython --version\r\n```\r\n或\r\n```\r\npython3 --version\r\n```\r\n看看能否提示python版本？",
          "created_at": "2023-08-01T11:57:38Z"
        },
        {
          "author": "MZhao-ouo",
          "body": "直接执行python呢",
          "created_at": "2023-08-01T11:57:50Z"
        },
        {
          "author": "2661780070",
          "body": "![Snipaste_2023-08-01_20-23-31](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/141136108/342c700d-3467-4253-b054-09be6e761935)\r\n![Snipaste_2023-08-01_20-20-11](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/141136108/ed85b126-c60b-41e3-b719-41b54454241a)\r\n",
          "created_at": "2023-08-01T12:46:24Z"
        }
      ]
    },
    {
      "issue_number": 841,
      "title": "Docker-助手p",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n\r\nError\r\n☹️发生了错误：: 1 validation error for SerpAPIWrapper root Could not import serpapi python package. Please install it with pip install google-search-results. (type=value_error)\n\n### 复现操作\n\n~# pip install google-search-results\r\nRequirement already satisfied: google-search-results in /usr/local/lib/python3.7/dist-packages (2.4.2)\r\nRequirement already satisfied: requests in /usr/lib/python3/dist-packages (from google-search-results) (2.21.0)\r\nWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\r\n\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\ndebian\r\n\n\n### 补充说明\n\n1",
      "state": "closed",
      "author": "guoguodada12321",
      "author_type": "User",
      "created_at": "2023-07-11T09:07:59Z",
      "updated_at": "2023-07-30T15:00:39Z",
      "closed_at": "2023-07-26T08:43:06Z",
      "labels": [
        "question",
        "docker deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/841/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/841",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/841",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:50.489513",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "你是在Linux系统中使用sudo pip install了吗……那确实会产生调用问题。不要用sudo……",
          "created_at": "2023-07-12T13:32:50Z"
        },
        {
          "author": "Keldos-Li",
          "body": "如果你仍有疑问，可以继续回复，先关闭了……",
          "created_at": "2023-07-26T08:43:06Z"
        },
        {
          "author": "503611908",
          "body": "请问是该怎么操作呢？我在ssh里执行了pip install google-search-results，但是还是会有相同的问题\r\n",
          "created_at": "2023-07-30T15:00:38Z"
        }
      ]
    },
    {
      "issue_number": 805,
      "title": "[Bug]: 配置api base后川虎助理和文档索引功能报错 Invalid URL (POST /chat/completions)",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n模型选择川虎助理时，提交问题报此错误。\r\n另外，文档上传，总结功能也报错，从日志看，也是这个错误。\n\n### 复现操作\n\n1、按照文档正常部署\r\n2、配置文件中填入了openai_api_key和openai_api_base\r\nopenai_api_base后面带\"/v1\"和不带都试过\r\n3、正常问答和prompt问答都没有问题。\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: ubuntu 20.0.4、Mac osx 11.7.7\r\n- Browser: Chrome\r\n- Gradio version:  3.34.0\r\n- Python version:  3.10.10\r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "coding-alt",
      "author_type": "User",
      "created_at": "2023-06-13T06:20:28Z",
      "updated_at": "2023-07-26T13:07:52Z",
      "closed_at": "2023-07-26T13:07:52Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/805/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/805",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/805",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:50.648447",
      "comments": [
        {
          "author": "shadowing",
          "body": "up, 同样的问题，川虎助理和 pro 都是如此，完全没法用的状态。",
          "created_at": "2023-06-22T02:08:47Z"
        },
        {
          "author": "Adoream",
          "body": "同样的问题，然后我临时的解决办法是把\r\nhttps://github.com/GaiZhenbiao/ChuanhuChatGPT/blob/578e8724f6171d3d84a4e1000b1ff11e0f743229/modules/shared.py#L28\r\n修改成\r\n```python\r\n os.environ[\"OPENAI_API_BASE\"] = api_host  + \"/v1\"\r\n```\r\n目前还没出什么问题（",
          "created_at": "2023-06-23T08:17:55Z"
        }
      ]
    },
    {
      "issue_number": 446,
      "title": "[其他]: 本地启动服务，无人使用情况下CPU单核100%，CPU温度90℃",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 错误描述\n\n本地启动服务，v2ray代理，直接python xxx.py运行，在无人访问的情况下，CPU单核占用100%，sensor温度显示90℃。\r\n\r\nMachine : NUC12\r\nCPU : i5-1240P\r\nMEM : 64G DDR4\r\nDISK : PCIE4.0 SSD\r\nOS : Ubuntu 22.04\n\n### 复现操作\n\n本地启动服务，v2ray代理，直接python xxx.py运行；\r\n\r\n无人访问服务；\r\n\r\n使用lm-sensors的工具sensors查看CPU温度。\n\n### 错误日志\n\n```shell\n###  服务运行时\r\nroot@NUC12:/opt/chatgpt# sensors\r\ncoretemp-isa-0000\r\nAdapter: ISA adapter\r\nPackage id 0:  +92.0°C  (high = +100.0°C, crit = +100.0°C)\r\nCore 0:        +64.0°C  (high = +100.0°C, crit = +100.0°C)\r\nCore 4:        +50.0°C  (high = +100.0°C, crit = +100.0°C)\r\nCore 8:        +92.0°C  (high = +100.0°C, crit = +100.0°C)\r\nCore 12:       +55.0°C  (high = +100.0°C, crit = +100.0°C)\r\nCore 16:       +54.0°C  (high = +100.0°C, crit = +100.0°C)\r\nCore 17:       +54.0°C  (high = +100.0°C, crit = +100.0°C)\r\nCore 18:       +54.0°C  (high = +100.0°C, crit = +100.0°C)\r\nCore 19:       +54.0°C  (high = +100.0°C, crit = +100.0°C)\r\nCore 20:       +50.0°C  (high = +100.0°C, crit = +100.0°C)\r\nCore 21:       +50.0°C  (high = +100.0°C, crit = +100.0°C)\r\nCore 22:       +50.0°C  (high = +100.0°C, crit = +100.0°C)\r\nCore 23:       +50.0°C  (high = +100.0°C, crit = +100.0°C)\r\n\r\nacpitz-acpi-0\r\nAdapter: ACPI interface\r\ntemp1:        +91.0°C  (crit = +105.0°C)\r\n\r\niwlwifi_1-virtual-0\r\nAdapter: Virtual device\r\ntemp1:        +38.0°C\r\n\r\nnvme-pci-0100\r\nAdapter: PCI adapter\r\nComposite:    +38.9°C  (low  = -273.1°C, high = +89.8°C)\r\n                       (crit = +94.8°C)\r\nSensor 1:     +38.9°C  (low  = -273.1°C, high = +65261.8°C)\r\nSensor 2:     +35.9°C  (low  = -273.1°C, high = +65261.8°C)\r\n\r\n### 服务关闭时\r\nroot@NUC12:/opt/chatgpt# sensors\r\ncoretemp-isa-0000\r\nAdapter: ISA adapter\r\nPackage id 0:  +45.0°C  (high = +100.0°C, crit = +100.0°C)\r\nCore 0:        +45.0°C  (high = +100.0°C, crit = +100.0°C)\r\nCore 4:        +43.0°C  (high = +100.0°C, crit = +100.0°C)\r\nCore 8:        +43.0°C  (high = +100.0°C, crit = +100.0°C)\r\nCore 12:       +45.0°C  (high = +100.0°C, crit = +100.0°C)\r\nCore 16:       +45.0°C  (high = +100.0°C, crit = +100.0°C)\r\nCore 17:       +45.0°C  (high = +100.0°C, crit = +100.0°C)\r\nCore 18:       +45.0°C  (high = +100.0°C, crit = +100.0°C)\r\nCore 19:       +45.0°C  (high = +100.0°C, crit = +100.0°C)\r\nCore 20:       +43.0°C  (high = +100.0°C, crit = +100.0°C)\r\nCore 21:       +43.0°C  (high = +100.0°C, crit = +100.0°C)\r\nCore 22:       +43.0°C  (high = +100.0°C, crit = +100.0°C)\r\nCore 23:       +43.0°C  (high = +100.0°C, crit = +100.0°C)\r\n\r\nacpitz-acpi-0\r\nAdapter: ACPI interface\r\ntemp1:        +47.0°C  (crit = +105.0°C)\r\n\r\niwlwifi_1-virtual-0\r\nAdapter: Virtual device\r\ntemp1:        +44.0°C\r\n\r\nnvme-pci-0100\r\nAdapter: PCI adapter\r\nComposite:    +38.9°C  (low  = -273.1°C, high = +89.8°C)\r\n                       (crit = +94.8°C)\r\nSensor 1:     +38.9°C  (low  = -273.1°C, high = +65261.8°C)\r\nSensor 2:      -0.1°C  (low  = -273.1°C, high = +65261.8°C)\n```\n\n\n### 运行环境\n\n```markdown\nMachine : NUC12\r\nCPU : i5-1240P\r\nMEM : 64G DDR4\r\nDISK : PCIE4.0 SSD\r\nOS : Ubuntu 22.04\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "zl875136491",
      "author_type": "User",
      "created_at": "2023-03-29T06:34:57Z",
      "updated_at": "2023-07-26T08:53:31Z",
      "closed_at": "2023-07-26T08:53:31Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/446/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/446",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/446",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:50.856268",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "应该是比较少见的情况……我们可能也无法排查什么……先关掉了QAQ",
          "created_at": "2023-07-26T08:53:31Z"
        }
      ]
    },
    {
      "issue_number": 625,
      "title": "[功能请求]: 支持调用AutoGPT",
      "body": "### 相关问题\n\nhttps://github.com/Torantulino/Auto-GPT\n\n### 可能的解决办法\n\nhttps://github.com/Torantulino/Auto-GPT\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\nhttps://github.com/Torantulino/Auto-GPT\r\n\r\n",
      "state": "closed",
      "author": "HsunGong",
      "author_type": "User",
      "created_at": "2023-04-13T06:13:36Z",
      "updated_at": "2023-07-26T08:48:13Z",
      "closed_at": "2023-07-26T08:48:13Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/625/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/625",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/625",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:51.032667",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "我觉得有川虎助理之后这个可以关掉了👀",
          "created_at": "2023-07-26T08:48:13Z"
        }
      ]
    },
    {
      "issue_number": 831,
      "title": "[本地部署]: error: unable to create file templates/adding_a_missing_tokenization_test/cookiecutter-template-{{cookiecutter.modelname}}/test_tokenization_{{cookiecutter.lowercase_modelname}}.py: Filename too long",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n```\r\nerror: unable to create file templates/adding_a_missing_tokenization_test/cookiecutter-template-{{cookiecutter.modelname}}/test_tokenization_{{cookiecutter.lowercase_modelname}}.py: Filename too long\r\n```\r\n我打算在本地跑ChatGLM，看到wiki上说需要运行`pip install -r requirements_advanced.txt`来安装必要组件，前面很多模组都成功安装了，但是随后就出现了这个报错\r\n看起来应该是说文件名过长导致的报错？那我该怎么调整呢\n\n### 复现操作\n\n1. 正常进行部署，安装了ChuanHuChat，安装了基本依赖`pip install -r requirements.txt`\r\n2. 看到了需要进一步安装依赖`pip install -r requirements_advanced.txt`，然后开始安装\r\n3. 出现上述报错\n\n### 错误日志\n\n```shell\nRunning command git clone --filter=blob:none --quiet https://github.com/huggingface/transformers 'C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-install-aj26u990\\transformers_4e284fdf89b94e53b12314393bf259a1'\r\n  error: unable to create file templates/adding_a_missing_tokenization_test/cookiecutter-template-{{cookiecutter.modelname}}/test_tokenization_{{cookiecutter.lowercase_modelname}}.py: Filename too long\r\n  fatal: unable to checkout working tree\r\n  warning: Clone succeeded, but checkout failed.\r\n  You can inspect what was checked out with 'git status'\r\n  and retry with 'git restore --source=HEAD :/'\r\n\r\n  error: subprocess-exited-with-error\r\n\r\n  × git clone --filter=blob:none --quiet https://github.com/huggingface/transformers 'C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-install-aj26u990\\transformers_4e284fdf89b94e53b12314393bf259a1' did not run successfully.\r\n  │ exit code: 128\r\n  ╰─> See above for output.\r\n\r\n  note: This error originates from a subprocess, and is likely not a problem with pip.\r\nerror: subprocess-exited-with-error\r\n\r\n× git clone --filter=blob:none --quiet https://github.com/huggingface/transformers 'C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-install-aj26u990\\transformers_4e284fdf89b94e53b12314393bf259a1' did not run successfully.\r\n│ exit code: 128\r\n╰─> See above for output.\r\n\r\nnote: This error originates from a subprocess, and is likely not a problem with pip.\n```\n\n\n### 运行环境\n\n```markdown\n- OS: Windows11\r\n- Browser: Edge\r\n- Python version: 3.10.9\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Lawrenceeeeeeee",
      "author_type": "User",
      "created_at": "2023-07-06T10:18:26Z",
      "updated_at": "2023-07-26T08:41:36Z",
      "closed_at": "2023-07-26T08:41:36Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/831/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/831",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/831",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:51.204886",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "Git无法在Windows系统上创建超长文件名，而在Linux系统上，默认情况下，文件名的长度限制是较高的，通常为255个字符。\r\n\r\n或许您可以根据我们的建议在WSL中安装川虎Chat，并使用大模型功能。真的。除了这个错误，在Windows上您可能还会遇到其他依赖模块的安装问题……还是用WSL吧。",
          "created_at": "2023-07-06T13:20:47Z"
        }
      ]
    },
    {
      "issue_number": 844,
      "title": "如何隐藏 Chatbot 对话框左上角的模型 Label？",
      "body": "### 相关问题\n\n如何像这样隐藏当前的 gpt 模型显示。 我想隐藏它，但还没有找到解决方案。\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/63329565/30d69e26-8b04-4cef-a032-a142c9ae73cc)\r\n\n\n### 可能的解决办法\n\n我想隐藏它，但还没有找到解决方案。 你能帮助我吗。\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "nguyenquocduongqnu",
      "author_type": "User",
      "created_at": "2023-07-18T04:12:46Z",
      "updated_at": "2023-07-26T08:39:52Z",
      "closed_at": "2023-07-26T08:39:52Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/844/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/844",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/844",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:51.370379",
      "comments": [
        {
          "author": "MZhao-ouo",
          "body": "在`ChuanhuChatbot.py`中给chatbot添加参数`show_label=False`\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/70903329/ac8254b9-ee72-4444-94b9-4c032e64133d)\r\n",
          "created_at": "2023-07-18T04:23:03Z"
        }
      ]
    },
    {
      "issue_number": 849,
      "title": "What is sensitive_id?",
      "body": "### 相关问题\n\nwhat is sensitive_id? where to find it\n\n### 可能的解决办法\n\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/20832275/a484d71d-7da5-4e20-a097-31313fe6fdbd)\r\n\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "cone387",
      "author_type": "User",
      "created_at": "2023-07-26T08:20:01Z",
      "updated_at": "2023-07-26T08:39:25Z",
      "closed_at": "2023-07-26T08:39:25Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/849/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/849",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/849",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:51.578349",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "Hi, you can check this out here: [使用教程#额度显示](https://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/使用教程#额度显示)",
          "created_at": "2023-07-26T08:28:36Z"
        }
      ]
    },
    {
      "issue_number": 843,
      "title": "[Bug]: “message”: “The model: gpt-4 does not exist”",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n安装方式：通过Git拉取，以Windows.bat安装\r\n已完成更新\r\n启动正常\r\nAPI正常，上网环境正常，openclash设置了专属chatGP与OpenAi的规则\r\n在选择模型之后，不论选择GPT那个模型\r\n都会出现以下错误：\r\n☹️发生了错误：{ “error”: { “message”: “The model: gpt-4 does not exist”, “type”: “invalid_request_error”, “param”: null, “code”: “model_not_found” }}\n\n### 复现操作\n\n1.正常完成部署\r\n2.选择chatGPT模型\r\n3.无法运作，出现☹️发生了错误：{ “error”: { “message”: “The model: gpt-4 does not exist”, “type”: “invalid_request_error”, “param”: null, “code”: “model_not_found” }}\n\n### 错误日志\n\n```shell\n☹️发生了错误：{ “error”: { “message”: “The model: gpt-4 does not exist”, “type”: “invalid_request_error”, “param”: null, “code”: “model_not_found” }}\n```\n\n\n### 运行环境\n\nVSCode版本: 1.80.1 (user setup)\r\nChromium: 108.0.5359.215\r\nNode.js: 16.17.1\r\nV8: 10.8.168.25-electron.0\r\nOS: Windows_NT x64 10.0.23493\r\nPython版本：3.11.4\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "alwang35",
      "author_type": "User",
      "created_at": "2023-07-17T14:45:47Z",
      "updated_at": "2023-07-26T08:37:12Z",
      "closed_at": "2023-07-26T08:37:12Z",
      "labels": [
        "duplicate",
        "question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/843/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/843",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/843",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:51.737934",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "不论选择 ChatGPT 的哪个模型（包括3.5-turbo），都报错“The model: **gpt-4** does not exist”吗？太奇怪了吧。\r\n\r\n如果选择了gpt4相关模型报这个错，那是因为你没有gpt-4 API的使用权限。",
          "created_at": "2023-07-17T15:04:34Z"
        },
        {
          "author": "alwang35",
          "body": "对不起，我没表达清楚，3.5是可以的。\r\n但是我是Plus会员\r\n同时也在Billing overview里面设定好了Payment methods\r\nAPI keys里面的KEY也有\r\n请问我是不是还有什么事情每做？\r\n谢谢大佬",
          "created_at": "2023-07-17T15:10:53Z"
        },
        {
          "author": "Keldos-Li",
          "body": "请看openai的这篇文章：\r\n- [How can I access GPT-4?](https://help.openai.com/en/articles/7102672-how-can-i-access-gpt-4)\r\n<img width=\"701\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/23137268/fba89991-d06c-47a9-8ae8-7f6d001c4b74\">\r\n",
          "created_at": "2023-07-17T15:15:06Z"
        },
        {
          "author": "alwang35",
          "body": "谢谢大佬的回复。\r\n我刚才看完这个回头就去用GPT3.5TURBO消耗了1095token\r\n请问是这样就会自动开通GPT4的权限了吗？\r\n还是我需要另外再申请？\r\n谢谢大佬耐心回复\r\n小白感激不尽",
          "created_at": "2023-07-17T15:35:35Z"
        },
        {
          "author": "MZhao-ouo",
          "body": "应该需要Pay as you go成功支付至少一次，才会开通gpt-4",
          "created_at": "2023-07-20T05:17:05Z"
        }
      ]
    },
    {
      "issue_number": 505,
      "title": "[Bug]: 官方改了free credit balance的api, 导致credit_grants请求失败",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n```\r\n2023-04-01 15:53:47,158 [ERROR] [openai_func.py:81] 获取API使用情况失败:API request failed with status code 403: {\r\n  \"error\": {\r\n    \"message\": \"Your request to GET /dashboard/billing/credit_grants must be made with a session key (that is, it can only be made from the browser). You made it with the following key type: secret.\",\r\n    \"type\": \"server_error\",\r\n    \"param\": null,\r\n    \"code\": null\r\n  }\r\n}\r\n```\n\n### 复现操作\n\n本地和服务端\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "xingfanxia",
      "author_type": "User",
      "created_at": "2023-04-01T22:55:55Z",
      "updated_at": "2023-07-26T04:12:21Z",
      "closed_at": "2023-04-05T08:36:23Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 23,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/505/reactions",
        "total_count": 2,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 2,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/505",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/505",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:51.901664",
      "comments": []
    },
    {
      "issue_number": 407,
      "title": "[Bug]: 提示No module named 'langchain.chat_models'",
      "body": "### 这个bug是否已存在现有issue了？\r\n\r\n- [X] 我确认没有已有issue。\r\n\r\n### 错误表现\r\n\r\nD:\\ChuanhuChatGPT\\ChuanhuChatGPT>python ChuanhuChatbot.py\r\nTraceback (most recent call last):\r\n  File \"ChuanhuChatbot.py\", line 10, in <module>\r\n    from modules.overwrites import *\r\n  File \"D:\\ChuanhuChatGPT\\ChuanhuChatGPT\\modules\\overwrites.py\", line 4, in <module>\r\n    from llama_index import Prompt\r\n  File \"D:\\Users\\user\\AppData\\Local\\Programs\\Python\\Python38\\lib\\site-packages\\llama_index\\__init__.py\", line 18, in <module>\r\n    from llama_index.indices.common.struct_store.base import SQLDocumentContextBuilder\r\n  File \"D:\\Users\\user\\AppData\\Local\\Programs\\Python\\Python38\\lib\\site-packages\\llama_index\\indices\\__init__.py\", line 4, in <module>\r\n    from llama_index.indices.keyword_table.base import GPTKeywordTableIndex\r\n  File \"D:\\Users\\user\\AppData\\Local\\Programs\\Python\\Python38\\lib\\site-packages\\llama_index\\indices\\keyword_table\\__init__.py\", line 4, in <module>\r\n    from llama_index.indices.keyword_table.base import GPTKeywordTableIndex\r\n  File \"D:\\Users\\user\\AppData\\Local\\Programs\\Python\\Python38\\lib\\site-packages\\llama_index\\indices\\keyword_table\\base.py\", line 16, in <module>\r\n    from llama_index.indices.base import DOCUMENTS_INPUT, BaseGPTIndex\r\n  File \"D:\\Users\\user\\AppData\\Local\\Programs\\Python\\Python38\\lib\\site-packages\\llama_index\\indices\\base.py\", line 23, in <module>\r\n    from llama_index.indices.prompt_helper import PromptHelper\r\n  File \"D:\\Users\\user\\AppData\\Local\\Programs\\Python\\Python38\\lib\\site-packages\\llama_index\\indices\\prompt_helper.py\", line 12, in <module>\r\n    from llama_index.langchain_helpers.chain_wrapper import LLMPredictor\r\n  File \"D:\\Users\\user\\AppData\\Local\\Programs\\Python\\Python38\\lib\\site-packages\\llama_index\\langchain_helpers\\chain_wrapper.py\", line 6, in <module>\r\n    from llama_index.llm_predictor.base import (  # noqa: F401\r\n  File \"D:\\Users\\user\\AppData\\Local\\Programs\\Python\\Python38\\lib\\site-packages\\llama_index\\llm_predictor\\__init__.py\", line 4, in <module>\r\n    from llama_index.llm_predictor.base import LLMPredictor\r\n  File \"D:\\Users\\user\\AppData\\Local\\Programs\\Python\\Python38\\lib\\site-packages\\llama_index\\llm_predictor\\base.py\", line 10, in <module>\r\n    from langchain.chat_models import ChatOpenAI\r\nModuleNotFoundError: No module named 'langchain.chat_models'\r\n\r\n### 复现操作\r\n\r\n正常本地部署执行\r\n\r\n### 错误日志\r\n\r\n_No response_\r\n\r\n### 运行环境\r\n\r\n```markdown\r\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version:\r\n```\r\n\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "closed",
      "author": "sheququan",
      "author_type": "User",
      "created_at": "2023-03-26T19:02:11Z",
      "updated_at": "2023-07-21T04:08:17Z",
      "closed_at": "2023-03-27T08:39:10Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 14,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/407/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/407",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/407",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:51.901686",
      "comments": [
        {
          "author": "KaiserLord",
          "body": "我也遇到了相同的问题，没有很好的解决，求助",
          "created_at": "2023-03-27T00:14:12Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "升级到最新版langchain就行了。\r\n\r\npip install langchain —upgrade ",
          "created_at": "2023-03-27T00:16:43Z"
        },
        {
          "author": "Keldos-Li",
          "body": "已在常见问题中更新",
          "created_at": "2023-03-27T01:00:05Z"
        },
        {
          "author": "TypicalSpider",
          "body": "> 升级到最新版langchain就行了。\r\n> \r\n> pip install langchain —upgrade\r\n\r\n更新过仍然不行：\r\n```shell\r\nlee@VM-0-3-ubuntu:~/gptDemo01/ChuanhuChatGPT$ pip3 install langchain --upgrade\r\nDefaulting to user installation because normal site-packages is not writeable\r\nRequirement already satisfied: langchain in /home/lee/.loc",
          "created_at": "2023-03-27T02:05:44Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "那再更新下llama_index？",
          "created_at": "2023-03-27T02:06:30Z"
        }
      ]
    },
    {
      "issue_number": 842,
      "title": "[其他]: 长传了文档后，一提问，马上就出错。后台一直显示的是构建索引失败。上传百十个字的文档也是这样。",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 错误描述\n\n长传了文档后，一提问，马上就出错。后台一直显示的是构建索引失败。上传百十个字的文档也是这样。\n\n### 复现操作\n\n启动网页\r\n填入密匙成功\r\n上传文档成功\r\n开始提问，会出错\n\n### 错误日志\n\n```shell\n2023-07-14 13:56:44,987 [ERROR] [index_func.py:139] 索引构建失败！cannot access local variable 'texts' where it is not associated with a value\n```\n\n\n### 运行环境\n\n- OS: \r\n- 谷歌浏览器\r\n\r\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "ddbj66",
      "author_type": "User",
      "created_at": "2023-07-14T06:13:07Z",
      "updated_at": "2023-07-14T09:27:34Z",
      "closed_at": "2023-07-14T09:27:34Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/842/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/842",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/842",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:52.131100",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "这是我们的一个 bug，现在已经修复了。请更新到最新版代码，应该就没这个问题了。如果仍然出错，请检查 langchain 的版本是否与 requirements.txt 中的一致。",
          "created_at": "2023-07-14T09:27:34Z"
        }
      ]
    },
    {
      "issue_number": 724,
      "title": "[功能请求]: 支持 RWKV 模型（目前已有 pip package & rwkv.cpp 等等）",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n您好，我是 RWKV 的作者，介绍见：https://zhuanlan.zhihu.com/p/626083366\r\n\r\n目前支持 RWKV 的中英文界面有：\r\n* 闻达：https://github.com/l15y/wenda\r\n* Gradio DEMO: https://huggingface.co/spaces/BlinkDL/Raven-RWKV-7B\r\n* ooba：https://github.com/oobabooga/text-generation-webui/issues/1401\r\n\r\n使用方法：\r\n* pip package: https://pypi.org/project/rwkv/\r\n* 问答DEMO代码：https://github.com/BlinkDL/ChatRWKV/blob/main/v2/benchmark_more.py\r\n* 聊天代码：https://github.com/BlinkDL/ChatRWKV\r\n* CPU INT4/8 量化运行: https://github.com/saharNooby/rwkv.cpp\r\n\r\n欢迎大家一起合作加入 RWKV 的支持 :)\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "BlinkDL",
      "author_type": "User",
      "created_at": "2023-05-01T20:24:53Z",
      "updated_at": "2023-07-12T13:39:47Z",
      "closed_at": null,
      "labels": [
        "feature request",
        "🤖 model"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/724/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/724",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/724",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:52.305001",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "好，我看看",
          "created_at": "2023-05-12T11:59:55Z"
        },
        {
          "author": "DoodleBears",
          "body": "支持加入 RWKV 模型",
          "created_at": "2023-07-12T13:39:47Z"
        }
      ]
    },
    {
      "issue_number": 826,
      "title": "[远程部署]: 对话气泡复制按钮错误",
      "body": "### 是否已存在现有反馈与解答？\r\n\r\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\r\n\r\n### 是否是一个代理配置相关的疑问？\r\n\r\n- [X] 我确认这不是一个代理配置相关的疑问。\r\n\r\n### 错误描述\r\n\r\n将项目部署到服务器本地后,通过内网穿透的方式远程访问服务端的网站,但在远程访问时,对话气泡的复制按钮失效,并报错\r\nUncaught TypeError: Cannot read properties of undefined (reading 'writeText')\r\n    at HTMLButtonElement.<anonymous> ((索引):459:14)\r\n    \r\n    索引对应的代码部分:\r\n    copyButton.addEventListener('click', ()=>{\r\n                const textToCopy = rawMessage.innerText;\r\n                navigator.clipboard.writeText(textToCopy).then(()=>{   //报错位置\r\n                    copyButton.innerHTML = copiedIcon;\r\n                    setTimeout(()=>{\r\n                        copyButton.innerHTML = copyIcon;\r\n                    }\r\n                    , 1500);\r\n                }\r\n                ).catch(()=>{\r\n                    console.error(\"copy failed\");\r\n                }\r\n                );\r\n            }\r\n\r\n但远程复制代码块的时候是正常的\r\n\r\n### 复现操作\r\n\r\n将项目部署到服务器本地后,通过内网穿透的方式远程访问服务端的网站,但在远程访问时,对话气泡的复制按钮失效\r\n在服务器端访问网站的话是可以正常复制的\r\n\r\n### 错误日志\r\n\r\n```shell\r\n终端未报错\r\n```\r\n\r\n\r\n### 运行环境\r\n\r\n- OS: Windows11 22H2\r\n- Server: WinServe\r\n- Gradio version: 3.33.1\r\n- Python version: 3.11.1\r\n\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "closed",
      "author": "LBEILC",
      "author_type": "User",
      "created_at": "2023-06-30T09:12:06Z",
      "updated_at": "2023-07-07T06:19:34Z",
      "closed_at": "2023-07-02T16:45:59Z",
      "labels": [
        "question",
        "server deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/826/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/826",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/826",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:52.453510",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "这个功能应该和远程或本地部署无关，复制仅是javascript在浏览器层面提供的功能。如果本地能用，不至于远程不能用。\n\n希望您能提供一些更具体的复现步骤，如使用了什么浏览器？远程使用的是什么对话、对话了什么导致复制失败？\n\n以及希望您做一些检查：切换markdown渲染显示是否正确？川虎Chat是否使用了最新版？\n\n另外，需要提醒您，更新新版本的川虎Chat之后，一些老版历史记录的读取可能会有兼容性问题。",
          "created_at": "2023-06-30T22:22:46Z"
        },
        {
          "author": "Kilig947",
          "body": "https://github.com/gradio-app/gradio/pull/4350/commits/c5577c67563b3fac8ae0554eeb59ff3d838b0440\r\n\r\nhttps://github.com/gradio-app/gradio/issues/4324\r\n\r\n这个问题导致的，当部署在内网，http访问时点击复制按钮，会报错",
          "created_at": "2023-07-02T09:38:56Z"
        },
        {
          "author": "Keldos-Li",
          "body": "> https://github.com/gradio-app/gradio/issues/4324\n> \n> \n> \n> 这个问题导致的，当部署在内网，http访问时点击复制按钮，会报错\n\n谢谢！",
          "created_at": "2023-07-02T09:41:54Z"
        },
        {
          "author": "Kilig947",
          "body": "> \r\n@Keldos-Li @LBEILC \r\n已解决，提交pr啦～\r\nhttps://github.com/GaiZhenbiao/ChuanhuChatGPT/pull/827\r\n",
          "created_at": "2023-07-02T09:47:42Z"
        },
        {
          "author": "LBEILC",
          "body": "> > \r\n> \r\n> @Keldos-Li @LBEILC 已解决，提交pr啦～ #827\r\n\r\n辛苦了",
          "created_at": "2023-07-07T06:19:34Z"
        }
      ]
    },
    {
      "issue_number": 830,
      "title": "[功能请求]: 前端判断输入框是否为空",
      "body": "### 相关问题\r\n\r\n输入框为空时，还可以进行请求\r\n\r\n### 可能的解决办法\r\n\r\n前端判断输入框是否为空\r\n\r\n### 帮助开发\r\n\r\n- [x] 我愿意协助开发！\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "closed",
      "author": "Pnut-GGG",
      "author_type": "User",
      "created_at": "2023-07-06T06:11:41Z",
      "updated_at": "2023-07-06T08:08:40Z",
      "closed_at": "2023-07-06T08:07:38Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/830/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/830",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/830",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:52.649408",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "感谢建议，现在可以拉取最新版测试一下~",
          "created_at": "2023-07-06T08:08:40Z"
        }
      ]
    },
    {
      "issue_number": 828,
      "title": "[功能请求]: 关于川虎助理能否增加支持gpt-3.5-turbo-16k",
      "body": "### 相关问题\n\n关于川虎助理PRO能否增加支持gpt-3.5-turbo-16k\n\n### 可能的解决办法\n\n川虎助理PRO使用gpt-3.5-turbo字数总是超出限制，而gpt-3.5-turbo-16k刚好就能解决这个问题。\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "LaoJiuYes",
      "author_type": "User",
      "created_at": "2023-07-02T10:11:21Z",
      "updated_at": "2023-07-03T06:59:29Z",
      "closed_at": "2023-07-03T04:41:58Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/828/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/828",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/828",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:52.829453",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "在 config 的 \"default_chuanhu_assistant_model\" 字段中填写 gpt-3.5-turbo-16k 即可",
          "created_at": "2023-07-03T04:41:58Z"
        },
        {
          "author": "LaoJiuYes",
          "body": "> 在 config 的 \"default_chuanhu_assistant_model\" 字段中填写 gpt-3.5-turbo-16k 即可\r\n\r\nOK，我说明后面只写了两个，我以为不支持呢，谢谢",
          "created_at": "2023-07-03T06:59:29Z"
        }
      ]
    },
    {
      "issue_number": 821,
      "title": "[功能请求]: ",
      "body": "### 相关问题\n\n是这样的，我部署在我的服务器上的，大家一起用，我发现聊天记录可以互相查看，这个怎么避免呢？可以后台设置不保存聊天记录吗？或者保存在浏览器缓存里？\n\n### 可能的解决办法\n\n实现：默认不保存聊天记录，或者实现保存在对方浏览器缓存中\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "tutianyu101",
      "author_type": "User",
      "created_at": "2023-06-26T15:04:39Z",
      "updated_at": "2023-06-27T14:03:53Z",
      "closed_at": "2023-06-27T14:03:53Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/821/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/821",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/821",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:53.009696",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "设置多个账号，每个账号的历史记录是独立的。",
          "created_at": "2023-06-26T15:24:16Z"
        },
        {
          "author": "Keldos-Li",
          "body": "刚才补了下wiki：[未登录时隐藏历史对话记录](https://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/使用教程#未登录时隐藏历史对话记录)\r\n\r\n- 另请参考：[设置用户登录密码](https://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/使用教程#设置用户登录密码)",
          "created_at": "2023-06-26T15:31:09Z"
        }
      ]
    },
    {
      "issue_number": 756,
      "title": "[功能请求]: 建议新增历史文件删除功能",
      "body": "### 相关问题\n\n用户似乎不能自己删除聊天历史文件，只能后台自己删history文件夹\n\n### 可能的解决办法\n\n除了保存和导入对话，建议新增个删除历史对话文件，\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "wxtt522",
      "author_type": "User",
      "created_at": "2023-05-16T14:12:33Z",
      "updated_at": "2023-06-26T08:23:07Z",
      "closed_at": "2023-06-18T07:00:59Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/756/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/756",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/756",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:53.171408",
      "comments": [
        {
          "author": "themis0009",
          "body": "同求这个功能，有些问题保留着确实不太好",
          "created_at": "2023-06-17T23:52:02Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "现在加入这个功能啦\r\n\r\n<img width=\"344\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/51039745/4d098651-e935-49a8-b124-0e91766a61d3\">\r\n",
          "created_at": "2023-06-18T07:00:59Z"
        }
      ]
    },
    {
      "issue_number": 568,
      "title": "[Bug]: 手机浏览器切至后台生成回复完成后会导致停止按钮恢复不成发送按钮，且之后每次生成完毕后都恢复不了",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [x] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n[Bug]: 手机浏览器切至后台生成回复完成后会导致停止按钮恢复不成发送按钮，且之后每次生成完毕后都恢复不了，一直没有发送按钮。\r\n       但可以用再生成按钮来进行对话，对话完后恢复成发送按钮，但再用发送按钮进行一次对话后，对话完，还是恢复不了。也就是对于发送按钮进行的问题，停止按钮永远无法恢复成发送\n\n### 复现操作\n\n发送问题让chatgpt回复，回复过程切换至其他应用，让chatgpt后台生成文字，生成完后切回浏览器，导致停止按钮不恢复成发送按钮\n\n### 错误日志\n\n```shell\n正常显示\n```\n\n\n### 运行环境\n\n- OS: 安卓\r\n- Browser: 手机自带浏览器\r\n- Gradio version: 最新\r\n- Python version: python10\r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n这个操作会使得gradio组件的then方法无法判断yield生成器是否完成，使得最后一个then函数无法执行，使用同一个生成器函数的then都无法再进行判断，所以按enter和发送方式的方法都无法恢复成发送按钮，但按生成的可以。具体原因不明，一个死马当活马医的方法就是在生成器的每个函数yield的时候都附带输出按钮的状态",
      "state": "closed",
      "author": "weixhishu",
      "author_type": "User",
      "created_at": "2023-04-07T16:25:02Z",
      "updated_at": "2023-06-22T06:13:45Z",
      "closed_at": "2023-06-22T06:13:45Z",
      "labels": [
        "bug",
        "🤷 no can do"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/568/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/568",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/568",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:53.349717",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "建议去gradio那边提交issue",
          "created_at": "2023-04-08T02:25:13Z"
        },
        {
          "author": "Keldos-Li",
          "body": "在新的 gradio3.33.1 中没有这个问题了（应该）。",
          "created_at": "2023-06-22T06:13:45Z"
        }
      ]
    },
    {
      "issue_number": 423,
      "title": "[Bug]: 多个空格开头的行被markdown转换为代码块导致显示错误 ",
      "body": "### 这个bug是否已存在现有issue了？\r\n\r\n- [X] 我确认没有已有issue。\r\n\r\n### 错误表现\r\n\r\nchatgpt回复的内容 经转换后 格式完全乱了\r\n\r\n请求 --->\r\n```\r\nMDCX_DOCKER_DIR=/mnt/4t/mdcx-docker\r\nmkdir -p $MDCX_DOCKER_DIR && cd $MDCX_DOCKER_DIR\r\n# 必须：相关数据或日志目录\r\nmkdir -p mdcx-config logs data\r\n# 必须：配置文件目录标记文件\r\necho \"/mdcx-config/config.ini\" > mdcx-config/MDCx.config\r\n\r\ndocker run -d --name mdcx \\\r\n  -p 3000:3000 `#Web访问端口` \\\r\n  -p 3389:3389 `#RDP访问端口` \\\r\n  -v $(pwd)/data:/config `#容器系统数据` \\\r\n  -v $(pwd)/mdcx-config:/mdcx-config `#配置文件目录` \\\r\n  -v $(pwd)/mdcx-config/MDCx.config:/app/MDCx.config `#配置文件目录标记文件` \\\r\n  -v $(pwd)/logs:/app/Log `#日志目录` \\\r\n  -v /volume2:/volume2 `#影片目录` \\\r\n  -e TZ=Asia/Shanghai \\\r\n  -e AUTO_LOGIN=false `#使用默认密码(abc)，且通过网页访问时，是否自动登录` \\\r\n  -e PUID=$(id -u) `#运行应用的用户ID` \\\r\n  -e PGID=$(id -g) `#运行应用的用户组ID` \\\r\n  --restart unless-stopped \\\r\n  stainless403/mdcx-builtin-webtop-base:latest  \r\n转为 dockercompose 配置\r\n```\r\n原始返回<----------------------\r\n```\r\n2023-03-28 02:34:09,865 [INFO] [chat_func.py:363] 回答为：version: \"3.9\"\r\n\u0002\r\n:\r\n  mdcx:\r\n    container_name: mdcx\r\n    image: stainless403/mdcx-builtin-webtop-base:latest\r\n    ports:\r\n      - \"3000:3000\"\r\n      - \"3389:3389\"\r\n\u0002\r\n    volumes:\r\n      - /mnt/4t/mdcx-docker/data:/config\r\n      - /mnt/4t/mdcx-docker/mdcx-config:/mdcx-config\r\n      - /mnt/4t/mdcx-docker/mdcx-config/MDCx.config:/app/MDCx.config\r\n      - /mnt/4t/mdcx-docker/logs:/app/Log\r\n      - /volume2:/volume2\r\n    environment:\r\n      - TZ=Asia/Shanghai\r\n      - AUTO_LOGIN=false\r\n      - PUID=$(id -u)\r\n      - PGID=$(id -g)\r\n    restart: unless-stopped\r\n```\r\n转换后返回\r\n\r\n<img width=\"843\" alt=\"1111\" src=\"https://user-images.githubusercontent.com/20358092/228112628-6b85b514-c15e-4f1a-83ce-770fd4640588.png\">\r\n\r\n### 复现操作\r\n\r\n如上请求\r\n\r\n### 错误日志\r\n\r\n_No response_\r\n\r\n### 运行环境\r\n\r\n```markdown\r\n- OS:  docker\r\n- Browser:  edge\r\n- Gradio version: \r\n- Python version:\r\n```\r\n\r\n\r\n### 补充说明\r\n\r\n容器对chatgpt的格式化返回不是特别兼容 经常出现格式错乱的情况",
      "state": "closed",
      "author": "yhweb",
      "author_type": "User",
      "created_at": "2023-03-28T02:36:59Z",
      "updated_at": "2023-06-22T06:02:50Z",
      "closed_at": "2023-06-22T06:02:50Z",
      "labels": [
        "invalid"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/423/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/423",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/423",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:53.576338",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "奇怪 麻烦把该段对话的json历史记录也提供一下 我们排查一下",
          "created_at": "2023-03-28T04:02:50Z"
        },
        {
          "author": "Keldos-Li",
          "body": "明白了。因为markdown语法的神奇性，多个空格起始的文段也会被理解为代码块并被格式化渲染。\r\n如\r\n\r\n      我没有写```只是加了空格\r\n\r\n建议暂时先要求gpt在代码块中给出转换结果，唉。\r\n",
          "created_at": "2023-03-28T15:06:49Z"
        }
      ]
    },
    {
      "issue_number": 801,
      "title": "[Bug]: 启用联网搜索后并未对context长度检查",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n以GPT 3.5 turbo为例，启用联网搜索，如果基于搜索结果拼接的context长度超过4096，导致该条回复日志提示报错。\r\n> This model's maximum context length is 4097 tokens. However, your messages resulted in 4176 tokens. Please reduce the length of the messages.\r\n\r\n虽然之后右上角会出现`为了防止token超限，模型忘记了早期的 X 轮对话`，但该条问题已经失去响应，可能会给使用者造成一定困惑。\r\n建议可在next_chatbot_at_once调用前，进行类似前置过滤/截断检查等措施。\r\n知识库搜索可能存在同样问题。\n\n### 复现操作\n\n1. 正常完成部署\r\n2. 联网搜索提问\r\n3. 上下文长度超过一定长度，可能导致运行出错，该条回复失去响应\r\n![err](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/9098597/1a53df91-6d51-4798-ae5b-b9765bc91f41)\r\n\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: CentOS 7\r\n- Browser: Chrome\r\n- Gradio version: 3.30.0\r\n- Python version: 3.10.11\r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "ioflows",
      "author_type": "User",
      "created_at": "2023-06-11T02:09:08Z",
      "updated_at": "2023-06-22T02:13:23Z",
      "closed_at": null,
      "labels": [
        "bug",
        "👍 good"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/801/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/801",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/801",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:53.749490",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "知道啦，我修一下",
          "created_at": "2023-06-11T05:59:08Z"
        },
        {
          "author": "shadowing",
          "body": "刚更新了最新版本，目前联网检索+gpt4 的问题是，第二论对话就没有上下文记忆了",
          "created_at": "2023-06-22T02:13:23Z"
        }
      ]
    },
    {
      "issue_number": 815,
      "title": "[Bug]: 索引构建失败",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/86949124/d1933a85-197e-4629-9b62-e1c763e35953)\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/86949124/3ba5f6fe-a3bf-47f5-9497-3d685bb1d37c)\r\n\n\n### 复现操作\n\n正常完成部署，在放入文件后出现这个错误，后续直接使用也无法获取索引。\n\n### 错误日志\n\n```shell\n2023-06-16 09:06:08,159 [INFO] [index_func.py:38] loading file: 2103.00020.pdf\r\n2023-06-16 09:06:08,340 [ERROR] [index_func.py:83] Error loading file: 2103.00020.pdf\r\nTraceback (most recent call last):\r\n  File \"J:\\bots\\chatGPT\\long2\\ChuanhuChatGPT\\modules\\index_func.py\", line 47, in get_documents\r\n    pdftext = parse_pdf(filepath, two_column).text\r\n  File \"J:\\bots\\chatGPT\\long2\\ChuanhuChatGPT\\modules\\pdf_func.py\", line 87, in parse_pdf\r\n    title, user_info, first_page = get_title_with_cropped_page(pdf.pages[0])\r\n  File \"J:\\bots\\chatGPT\\long2\\ChuanhuChatGPT\\modules\\pdf_func.py\", line 64, in get_title_with_cropped_page\r\n    user_info = [i[\"text\"] for i in extract_words(first_page.within_bbox((x0,title_bottom,x1,top)))]\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\pdfplumber\\page.py\", line 334, in within_bbox\r\n    return CroppedPage(\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\pdfplumber\\page.py\", line 464, in __init__\r\n    test_proposed_bbox(self.bbox, parent_page.bbox)\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\pdfplumber\\page.py\", line 428, in test_proposed_bbox\r\n    bbox_area = utils.calculate_area(bbox)\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\pdfplumber\\utils\\geometry.py\", line 70, in calculate_area\r\n    raise ValueError(f\"{bbox} has a negative width or height.\")\r\nValueError: (0, 544.46, 612, 187.7354368) has a negative width or height.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"J:\\bots\\chatGPT\\long2\\ChuanhuChatGPT\\modules\\index_func.py\", line 50, in get_documents\r\n    with open(filepath, \"rb\", encoding=\"utf-8\") as pdfFileObj:\r\nValueError: binary mode doesn't take an encoding argument\r\n2023-06-16 09:06:08,343 [ERROR] [index_func.py:139] 索引构建失败！local variable 'texts' referenced before assignment\r\nTraceback (most recent call last):\r\n  File \"J:\\bots\\chatGPT\\long2\\ChuanhuChatGPT\\modules\\index_func.py\", line 127, in construct_index\r\n    documents = get_documents(file_src)\r\n  File \"J:\\bots\\chatGPT\\long2\\ChuanhuChatGPT\\modules\\index_func.py\", line 86, in get_documents\r\n    texts = text_splitter.split_documents(texts)\r\nUnboundLocalError: local variable 'texts' referenced before assignment\n```\n\n\n### 运行环境\n\n- OS: Windows10 22H1\r\n- Browser: Chrome\r\n- Gradio version: \r\n- Python version: 3.9\r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "slideslide",
      "author_type": "User",
      "created_at": "2023-06-16T01:11:25Z",
      "updated_at": "2023-06-21T10:55:38Z",
      "closed_at": "2023-06-16T07:28:37Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/815/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/815",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/815",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:53.932448",
      "comments": [
        {
          "author": "isdkz",
          "body": "ChuanhuChatGPT\\modules\\index_func.py 第50行\r\n将 with open(filepath, \"rb\", encoding=\"utf-8\") as pdfFileObj:  改为  with open(filepath, \"rb\") as pdfFileObj:\r\n即 去掉 encoding=\"utf-8\"\r\n因为以二进制模式打开是不需要编码的",
          "created_at": "2023-06-16T02:15:36Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "请更新到最新版本，这个问题已经解决了",
          "created_at": "2023-06-16T07:28:37Z"
        },
        {
          "author": "2-3-5-7",
          "body": "@GaiZhenbiao 应该还有一处 Bug\r\nhttps://github.com/GaiZhenbiao/ChuanhuChatGPT/blob/ed82ab0f281d5d9ec7f9d03093c9e07066faa026/modules/index_func.py#L50",
          "created_at": "2023-06-17T08:57:45Z"
        },
        {
          "author": "slideslide",
          "body": "感谢",
          "created_at": "2023-06-21T10:55:38Z"
        }
      ]
    },
    {
      "issue_number": 803,
      "title": "[本地部署]: ModuleNotFoundError: No module named 'gradio'",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n 输入 python3 ChuanhuChatbot.py\n\n### 复现操作\n\n 输入 python3 ChuanhuChatbot.py\n\n### 错误日志\n\n```shell\nTraceback (most recent call last):\r\n  File \"/Users/apple/Desktop/ChuanhuChatGPT/ChuanhuChatbot.py\", line 6, in <module>\r\n    import gradio as gr\r\nModuleNotFoundError: No module named 'gradio'\n```\n\n\n### 运行环境\n\n```markdown\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version:\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Gx952743985",
      "author_type": "User",
      "created_at": "2023-06-12T06:26:43Z",
      "updated_at": "2023-06-21T08:59:50Z",
      "closed_at": "2023-06-21T08:59:50Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/803/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/803",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/803",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:54.133663",
      "comments": [
        {
          "author": "Gx952743985",
          "body": "Mac",
          "created_at": "2023-06-12T06:27:12Z"
        },
        {
          "author": "Keldos-Li",
          "body": "请参考：\r\nhttps://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/使用教程#本地部署\r\n<img width=\"890\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/23137268/c019f651-50c1-4069-948a-e2a417ac6aab\">\r\n",
          "created_at": "2023-06-14T06:07:11Z"
        }
      ]
    },
    {
      "issue_number": 819,
      "title": "[本地部署]: chatbot不渲染html",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n![2023-06-21_15-19](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/34766852/76e6bfcc-f718-4013-90f4-79ade1d530ce)\r\n如图\n\n### 复现操作\n\n初次部署\n\n### 错误日志\n\n```shell\n无\n```\n\n\n### 运行环境\n\n```markdown\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version:\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "kingdomad",
      "author_type": "User",
      "created_at": "2023-06-21T07:34:10Z",
      "updated_at": "2023-06-21T08:21:19Z",
      "closed_at": "2023-06-21T08:21:19Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/819/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/819",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/819",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:54.360034",
      "comments": [
        {
          "author": "kingdomad",
          "body": "升级gradio版本之后就可以渲染了",
          "created_at": "2023-06-21T08:21:19Z"
        }
      ]
    },
    {
      "issue_number": 678,
      "title": "[Bug]: 点击重新生成时，发送的是ChatGPT的回答而非我的提问",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n我的提问：发送给ChatGPT一段代码并要求优化\r\n![image](https://user-images.githubusercontent.com/67829622/232759848-a2eddf95-665b-415b-8ef3-5d8da1f7cd58.png)\r\n\r\n点击重新生成后，“我”发送的是ChatGPT的另一段回答\r\n![image](https://user-images.githubusercontent.com/67829622/232759924-c192422b-d631-46e3-8d71-cfef37802e6e.png)\r\n\r\n再次点击重新生成，两边都变成了各说各的回答\r\n![image](https://user-images.githubusercontent.com/67829622/232760619-200c058a-3686-443e-9798-bf14a0a15ef3.png)\r\n\n\n### 复现操作\n\n在此之前的对话正常\n\n### 错误日志\n\n```shell\n无错误日志\n```\n\n\n### 运行环境\n\n- OS:  Windows 11 Insider Preview\r\n- Browser: Microsoft Edge Dev\r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "Vinzelles",
      "author_type": "User",
      "created_at": "2023-04-18T11:19:13Z",
      "updated_at": "2023-06-21T06:29:52Z",
      "closed_at": null,
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/678/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/678",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/678",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:54.593141",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "能否提供具体细致的，稳定可复现的复现步骤？以及是否改过system prompt？",
          "created_at": "2023-04-23T17:19:30Z"
        },
        {
          "author": "Vinzelles",
          "body": "> 能否提供具体细致的，稳定可复现的复现步骤？以及是否改过system prompt？\r\n\r\n偶发性无法复现，使用的prompt为“担任高级前端开发人员”，其余参数均为默认",
          "created_at": "2023-05-04T01:50:08Z"
        },
        {
          "author": "dsjzazs",
          "body": "不用prompt也会，当输入消息后，后台出现异常，或者延时很久才回复的时候。点重新生成就会发送上一条收到的信息。\r\n\r\n一下日志只输入了123，后续点了两次重新生成\r\n\r\n日志：\r\n\r\n\r\n2023-06-21 14:23:21,796 [INFO] [base_model.py:377] 用户的输入为：123\r\n2023-06-21 14:23:22,120 [INFO] [base_model.py:441] 回答为：☹️发生了错误：获取对话时发生错误，请查看后台日志\r\n2023-06-21 14:23:26,547 [INFO] [base_model.py:377] 用户的输入为：12",
          "created_at": "2023-06-21T06:29:03Z"
        }
      ]
    },
    {
      "issue_number": 811,
      "title": "支持新模型",
      "body": "### 相关问题\n\n支持新模型\n\n### 可能的解决办法\n\n支持新模型\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\nopenai发布了新模型，gpt-3.5-turbo有了16k",
      "state": "closed",
      "author": "Passerby1011",
      "author_type": "User",
      "created_at": "2023-06-15T00:21:42Z",
      "updated_at": "2023-06-15T21:11:00Z",
      "closed_at": "2023-06-15T01:48:16Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/811/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/811",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/811",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:54.860767",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "Hi, 感谢您的提醒！如果您关注我们的项目更新，你会发现昨日我们已经在第一时间支持了相关新模型啦~\r\n\r\n您可以进一步参阅：\r\n- **[更新日志](https://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/更新日志#20230614)**\r\n- **[如何更新？](https://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/常见问题#故障排除)**\r\n\r\n\r\n",
          "created_at": "2023-06-15T01:48:16Z"
        },
        {
          "author": "Passerby1011",
          "body": "> Hi, 感谢您的提醒！如果您关注我们的项目更新，你会发现昨日我们已经在第一时间支持了相关新模型啦~\r\n> \r\n> 您可以进一步参阅：\r\n> \r\n> * **[更新日志](https://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/%E6%9B%B4%E6%96%B0%E6%97%A5%E5%BF%97#20230614)**\r\n> * **[如何更新？](https://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98#%E6%95%85%",
          "created_at": "2023-06-15T21:11:00Z"
        }
      ]
    },
    {
      "issue_number": 814,
      "title": "[功能请求]: 根据模型的最大上下文窗口动态决定引用原文的数量",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n可以根据模型自己的上下文窗口大小，或者用户手动设置的上下文Token数来决定要生成多少原文。目前每次固定生成六段原文，但对于需要更多信息来回答的问题会遗漏掉一些信息。\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n当用户选择GPT 3.5 16K的时候往往希望模型更大化利用上下文窗口来处理需要更多上下文才能回答的问题，在这类模型上可以适当增加原文的生成量",
      "state": "open",
      "author": "Microwave-WYB",
      "author_type": "User",
      "created_at": "2023-06-15T08:18:12Z",
      "updated_at": "2023-06-15T09:25:54Z",
      "closed_at": null,
      "labels": [
        "🚀 enhancement",
        "💭 exploration"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/814/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/814",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/814",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:55.089804",
      "comments": []
    },
    {
      "issue_number": 810,
      "title": "[Bug]: 上传pdf文件后ValueError: binary mode doesn't take an encoding argument",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n当前版本上传pdf文件后出现Error报错\n\n### 复现操作\n\n在https://huggingface.co/spaces/JohnSmith9982/ChuanhuChatGPT上传pdf文件后出现Error报错，复制到自己space后也同样报错\n\n### 错误日志\n\n```shell\n2023-06-14 17:18:28,494 [INFO] [models.py:562] 正在加载OpenAI模型: gpt-3.5-turbo\r\n2023-06-14 17:18:28,495 [INFO] [models.py:615] 模型设置为了： gpt-3.5-turbo\r\nTraceback (most recent call last):\r\n  File \"/home/user/.local/lib/python3.10/site-packages/gradio/routes.py\", line 427, in run_predict\r\n    output = await app.get_blocks().process_api(\r\n  File \"/home/user/.local/lib/python3.10/site-packages/gradio/blocks.py\", line 1323, in process_api\r\n    result = await self.call_function(\r\n  File \"/home/user/.local/lib/python3.10/site-packages/gradio/blocks.py\", line 1051, in call_function\r\n    prediction = await anyio.to_thread.run_sync(\r\n  File \"/home/user/.local/lib/python3.10/site-packages/anyio/to_thread.py\", line 33, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n  File \"/home/user/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py\", line 877, in run_sync_in_worker_thread\r\n    return await future\r\n  File \"/home/user/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py\", line 807, in run\r\n    result = context.run(func, *args)\r\n  File \"/home/user/app/modules/utils.py\", line 116, in handle_file_upload\r\n    return current_model.handle_file_upload(*args)\r\n  File \"/home/user/app/modules/models/base_model.py\", line 286, in handle_file_upload\r\n    index = construct_index(self.api_key, file_src=files)\r\n  File \"/home/user/app/modules/index_func.py\", line 114, in construct_index\r\n    index_name = get_index_name(file_src)\r\n  File \"/home/user/app/modules/index_func.py\", line 19, in get_index_name\r\n    with open(file_path, \"rb\", encoding=\"utf-8\") as f:\r\nValueError: binary mode doesn't take an encoding argument\n```\n\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "cwayer",
      "author_type": "User",
      "created_at": "2023-06-14T15:25:49Z",
      "updated_at": "2023-06-15T07:48:19Z",
      "closed_at": "2023-06-15T07:48:18Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/810/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/810",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/810",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:55.089824",
      "comments": [
        {
          "author": "Lao-Tz",
          "body": "俺也一样\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/93063057/69757be8-7923-4549-8527-c869b9ceb155)\r\n",
          "created_at": "2023-06-15T01:48:45Z"
        },
        {
          "author": "Keldos-Li",
          "body": "> 俺也一样\r\n\r\n@Lao-Tz 你的问题与本ISSUE无关。请参考 [常见问题](https://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/常见问题#something-went-wrong-expecting-value-line-1-column-1-char-0)",
          "created_at": "2023-06-15T02:02:56Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "已修复 https://github.com/GaiZhenbiao/ChuanhuChatGPT/commit/356ead395bcd0605cd21621c3ee5aad68e8cbb88",
          "created_at": "2023-06-15T07:48:18Z"
        }
      ]
    },
    {
      "issue_number": 808,
      "title": "[功能请求]: 能否添加gpt-3.5-turbo-16k模型呢？",
      "body": "### 相关问题\n\n近日，OpenAI提供了最新的模型（gpt-3.5-turbo-16k），能否添加到ChuanhuChatGPT中呢？并且希望能都在hugging face中同步，谢谢。\n\n### 可能的解决办法\n\n如题\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "RooobinYe",
      "author_type": "User",
      "created_at": "2023-06-14T07:36:25Z",
      "updated_at": "2023-06-14T08:22:13Z",
      "closed_at": "2023-06-14T08:22:13Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/808/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/808",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/808",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:55.292962",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/commit/cc3510282d4fe932b800970f238bb853e77c6297 已经加入了，HuggingFace 上也已经同步过去了。 \r\n\r\n<img width=\"308\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/51039745/1d210c13-cddd-4550-92a4-c21a0d007a3c\">\r\n",
          "created_at": "2023-06-14T08:22:06Z"
        }
      ]
    },
    {
      "issue_number": 369,
      "title": "编号列表1. 1. 1. …",
      "body": "如果编号列表项目中包含子选项，则编号列表中的编号不正确\r\n![numbered_list](https://user-images.githubusercontent.com/101241940/227535846-ebdbfd9d-3911-437c-9ee7-704d7f6b4a07.png)\r\n",
      "state": "closed",
      "author": "bentwnghk",
      "author_type": "User",
      "created_at": "2023-03-24T13:41:07Z",
      "updated_at": "2023-06-14T04:41:27Z",
      "closed_at": "2023-06-14T04:41:27Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/369/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/369",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/369",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:55.515755",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "能附一下json格式的对话历史记录吗",
          "created_at": "2023-03-24T13:48:11Z"
        },
        {
          "author": "bentwnghk",
          "body": "当然可以\r\n[vocab_quiz.json.txt](https://github.com/GaiZhenbiao/ChuanhuChatGPT/files/11062937/vocab_quiz.json.txt)\r\n",
          "created_at": "2023-03-24T14:03:34Z"
        },
        {
          "author": "Keldos-Li",
          "body": "神奇，应该是列表中穿插换行问题导致的 \\_(:з」∠)\\_\r\n<img width=\"1521\" alt=\"image\" src=\"https://user-images.githubusercontent.com/23137268/227545304-83869242-553d-46e1-8c09-454dad08ca5f.png\">\r\n\r\n这样确实会导致markdown认不出这是一个连续的列表。。。",
          "created_at": "2023-03-24T14:12:50Z"
        },
        {
          "author": "bentwnghk",
          "body": "有办法可以解决这个问题吗？",
          "created_at": "2023-03-24T14:54:29Z"
        },
        {
          "author": "Keldos-Li",
          "body": "目前几乎所有公开提供的markdown转html的 python 库都有各种各样的问题，川虎哥已经几乎完全手动重写了这部分的转换函数……\r\n额，反正就，也不好说。",
          "created_at": "2023-03-24T15:06:21Z"
        }
      ]
    },
    {
      "issue_number": 609,
      "title": "[Bug]: 列表内容没有保留缩进",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n## print出来的东西将indent给自动消除了，造成阅读障碍\r\n\r\n<img width=\"1140\" alt=\"image\" src=\"https://user-images.githubusercontent.com/32933986/231400502-8a39976f-8dc7-4589-9a33-95b4ef363694.png\">\r\n\r\n<img width=\"710\" alt=\"image\" src=\"https://user-images.githubusercontent.com/32933986/231400546-830910bd-315d-4e58-a4de-191a0522a513.png\">\r\n\n\n### 复现操作\n\n输入：分治法解决数组inversion问题，并给出伪代码\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "HsunGong",
      "author_type": "User",
      "created_at": "2023-04-12T08:34:24Z",
      "updated_at": "2023-06-14T04:35:47Z",
      "closed_at": "2023-06-14T04:35:46Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/609/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/609",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/609",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:55.724816",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "应该说，现在md转html的方式还存在一些问题……",
          "created_at": "2023-04-12T13:51:15Z"
        },
        {
          "author": "HsunGong",
          "body": "Good，期待有人提点意见如何解决",
          "created_at": "2023-04-14T05:41:47Z"
        },
        {
          "author": "Keldos-Li",
          "body": "Resolved via 8161b722712877e7648705f1d7c066493ed4a1c8.\r\n<img width=\"1483\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/23137268/23dae0d3-e753-4d4c-ab53-3957f0c9efd7\">\r\n",
          "created_at": "2023-06-14T04:35:46Z"
        }
      ]
    },
    {
      "issue_number": 784,
      "title": "[功能请求]: 换了google搜索后使用在线搜索功能报错",
      "body": "### 相关问题\r\n\r\n<img width=\"2109\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/31379908/f9c75c2d-c571-4da2-a3cc-a3fc15054ceb\">\r\n\r\n### 可能的解决办法\r\n\r\n### 帮助开发\r\n\r\n- [ ] 我愿意协助开发！\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "closed",
      "author": "Maddaxman",
      "author_type": "User",
      "created_at": "2023-05-26T08:37:46Z",
      "updated_at": "2023-06-10T16:46:29Z",
      "closed_at": "2023-06-10T16:46:29Z",
      "labels": [
        "bug",
        "🔌 dependency"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 14,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/784/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/784",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/784",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:55.909778",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "你可以正常访问google吗？奇怪，按理说之前用的ddg也需要代理的😂",
          "created_at": "2023-05-26T08:48:33Z"
        },
        {
          "author": "Maddaxman",
          "body": "> 你可以正常访问google吗？奇怪，按理说之前用的ddg也需要代理的😂\r\n\r\n可以的，我在海外服务器部署的",
          "created_at": "2023-05-26T08:55:27Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "始终会有这个错误吗？",
          "created_at": "2023-05-26T09:13:33Z"
        },
        {
          "author": "Maddaxman",
          "body": "> 始终会有这个错误吗？\r\n\r\n是的，重新运行了再试也有\r\n<img width=\"1584\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/31379908/ac1b1124-3893-426c-bc76-8d4f7ad32644\">\r\n",
          "created_at": "2023-05-26T09:15:19Z"
        },
        {
          "author": "LaoJiuYes",
          "body": "\r\n\r\n\r\n> 始终会有这个错误吗？\r\n\r\n川虎，我看这日志，感觉好像是触发了谷歌反爬机制了。大部分主流的搜索引擎都有反爬机制，建议在线搜索功能还是换成duckduckgo吧，借这位兄弟的楼反馈一个问题，用川虎助理pro，大部分问题都是显示tokens超限，我设置的模型是3.5-turbo，是不是应该用4才行？。",
          "created_at": "2023-05-26T12:36:40Z"
        }
      ]
    },
    {
      "issue_number": 800,
      "title": "[Bug]: git pull 最新代码后报错了 ",
      "body": "### 这个bug是否已存在现有issue了？\r\n\r\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\r\n\r\n### 错误表现\r\n\r\n<img width=\"1007\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/31379908/31acb394-1741-44be-a1f7-2bef83fa3289\">\r\n\r\n\r\n### 复现操作\r\n\r\n如图，已执行安装最新的依赖文件\r\n\r\n### 错误日志\r\n\r\n_No response_\r\n\r\n### 运行环境\r\n\r\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\r\n\r\n### 帮助解决\r\n\r\n- [ ] 我愿意协助解决！\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "closed",
      "author": "Maddaxman",
      "author_type": "User",
      "created_at": "2023-06-10T14:37:41Z",
      "updated_at": "2023-06-10T14:43:16Z",
      "closed_at": "2023-06-10T14:43:16Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/800/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/800",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/800",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:56.096925",
      "comments": [
        {
          "author": "Maddaxman",
          "body": "执行 pip install --upgrade duckduckgo_search 后可以运行了",
          "created_at": "2023-06-10T14:42:07Z"
        }
      ]
    },
    {
      "issue_number": 799,
      "title": "[本地部署]: ",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n设置川虎助理后，无法使用在线搜索，并且会报错1 validation error for DuckDuckGoSearchAPIWrapper root Could not import duckduckgo-search python package. Please install it with pip install duckduckgo-search. (type=value_error)  同时安装过 duckduckgo-search后也无法解决问题。\n\n### 复现操作\n\n1.正常的部署\r\n2.设置了川虎助理\r\n3.点开了在线搜索\r\n4.提问，出问题了\n\n### 错误日志\n\n```shell\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.10/dist-packages/gradio/routes.py\", line 414, in run_predict\r\n    output = await app.get_blocks().process_api(\r\n  File \"/usr/local/lib/python3.10/dist-packages/gradio/blocks.py\", line 1320, in process_api\r\n    result = await self.call_function(\r\n  File \"/usr/local/lib/python3.10/dist-packages/gradio/blocks.py\", line 1064, in call_function\r\n    prediction = await utils.async_iteration(iterator)\r\n  File \"/usr/local/lib/python3.10/dist-packages/gradio/utils.py\", line 514, in async_iteration\r\n    return await iterator.__anext__()\r\n  File \"/usr/local/lib/python3.10/dist-packages/gradio/utils.py\", line 507, in __anext__\r\n    return await anyio.to_thread.run_sync(\r\n  File \"/usr/local/lib/python3.10/dist-packages/anyio/to_thread.py\", line 33, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n  File \"/usr/local/lib/python3.10/dist-packages/anyio/_backends/_asyncio.py\", line 877, in run_sync_in_worker_thread\r\n    return await future\r\n  File \"/usr/local/lib/python3.10/dist-packages/anyio/_backends/_asyncio.py\", line 807, in run\r\n    result = context.run(func, *args)\r\n  File \"/usr/local/lib/python3.10/dist-packages/gradio/utils.py\", line 490, in run_sync_iterator_async\r\n    return next(iterator)\r\n  File \"/home/Chat/modules/utils.py\", line 59, in retry\r\n    for i in iter:\r\n  File \"/home/Chat/modules/models/base_model.py\", line 495, in retry\r\n    for x in iter:\r\n  File \"/home/Chat/modules/models/base_model.py\", line 381, in predict\r\n    limited_context, fake_inputs, display_append, inputs, chatbot = self.prepare_inputs(real_inputs=inputs, use_websearch=use_websearch, files=files, reply_language=reply_language, chatbot=chatbot)\r\n  File \"/home/Chat/modules/models/base_model.py\", line 339, in prepare_inputs\r\n    search_results = [i for i in search(real_inputs, advanced=True)]\r\n  File \"/home/Chat/modules/models/base_model.py\", line 339, in <listcomp>\r\n    search_results = [i for i in search(real_inputs, advanced=True)]\r\n  File \"/usr/local/lib/python3.10/dist-packages/googlesearch/__init__.py\", line 54, in search\r\n    resp = _req(escaped_term, num_results - start,\r\n  File \"/usr/local/lib/python3.10/dist-packages/googlesearch/__init__.py\", line 23, in _req\r\n    resp.raise_for_status()\r\n  File \"/usr/local/lib/python3.10/dist-packages/requests/models.py\", line 1021, in raise_for_status\r\n    raise HTTPError(http_error_msg, response=self)\r\nrequests.exceptions.HTTPError: 429 Client Error: Too Many Requests for url: https://www.google.com/sorry/index?continue=https://www.google.com/search%3Fq%3D%25E4%25BB%2580%25E4%25B9%2588%25E6%2598%25AF%25E6%2595%25B0%25E5%25AD%2597%25E5%25AD%25AA%25E7%2594%259F%26num%3D12%26hl%3Den%26start%3D0&hl=en&q=EhAgARnwAAUjglQABP_-dfw1GN-UjaQGIjCxgLMHmAI18WIbl6FVeud-TcAitUxwxe2DFXiavAcnZtHAhDG1va_teVteJ-FdDAcyAXJaAUM\n```\n\n\n### 运行环境\n\n```markdown\n- OS: ubutnu 22.04 \r\n- Browser: \r\n- Gradio version: \r\n- Python version: 3.10\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "scordl327",
      "author_type": "User",
      "created_at": "2023-06-09T15:58:05Z",
      "updated_at": "2023-06-10T09:32:20Z",
      "closed_at": "2023-06-10T09:32:12Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/799/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/799",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/799",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:56.277783",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "请尝试更新到新版本的 **ChuanhuChat**",
          "created_at": "2023-06-10T06:06:45Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "最新版本换成了duckduckgo搜索，去试试吧～",
          "created_at": "2023-06-10T09:32:12Z"
        }
      ]
    },
    {
      "issue_number": 787,
      "title": "可以上传自己编写的提示词",
      "body": "### 相关问题\n\n无\n\n### 可能的解决办法\n\n系统级提示词栏里编写提示词后可以编写提示词标题并上传到默认的json文件里 \n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "oldfishoh",
      "author_type": "User",
      "created_at": "2023-05-31T10:38:56Z",
      "updated_at": "2023-06-08T07:10:47Z",
      "closed_at": "2023-06-08T07:10:47Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/787/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/787",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/787",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:56.452719",
      "comments": []
    },
    {
      "issue_number": 540,
      "title": "[功能请求]: 同时上传不同文件夹的多个文件",
      "body": "### 相关问题\r\n\r\n目前只能从同一个文件夹上传多个文档，希望能同时上传不同来源的多个文档并对文档进行问答。\r\n\r\n### 可能的解决办法\r\n\r\n加上传缓存？\r\n\r\n### 帮助开发\r\n\r\n- [x] 我愿意协助开发！\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "open",
      "author": "junruxiong",
      "author_type": "User",
      "created_at": "2023-04-04T12:38:56Z",
      "updated_at": "2023-06-08T02:45:04Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/540/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/540",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/540",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:56.452739",
      "comments": [
        {
          "author": "Microwave-WYB",
          "body": "是否可以考虑应用langchain的PyPDFDirectoryLoader来实现？",
          "created_at": "2023-06-08T02:45:04Z"
        }
      ]
    },
    {
      "issue_number": 796,
      "title": "[功能请求]: 是否支持对外提供API接口",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n方便别的系统进行调用\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "hhxiaohei",
      "author_type": "User",
      "created_at": "2023-06-07T07:47:29Z",
      "updated_at": "2023-06-08T01:39:46Z",
      "closed_at": "2023-06-08T01:39:46Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/796/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/796",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/796",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:56.631534",
      "comments": []
    },
    {
      "issue_number": 789,
      "title": "[Bug]: 索引构建失败",
      "body": "### 这个bug是否已存在现有issue了？\r\n\r\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\r\n\r\n### 错误表现\r\n上传txt文本文件\r\n```\r\n[ERROR] [index_func.py:139] 索引构建失败！'list' object has no attribute 'page_content'\r\nTraceback (most recent call last):\r\n  File \"/data/repo/ChuanhuChatGPT/modules/index_func.py\", line 127, in construct_index\r\n    documents = get_documents(file_src)\r\n  File \"/data/repo/ChuanhuChatGPT/modules/index_func.py\", line 86, in get_documents\r\n    texts = text_splitter.split_documents([texts])\r\n  File \"/data/anaconda3/envs/llm/lib/python3.9/site-packages/langchain/text_splitter.py\", line 69, in split_documents\r\n    texts = [doc.page_content for doc in documents]\r\n  File \"/data/anaconda3/envs/llm/lib/python3.9/site-packages/langchain/text_splitter.py\", line 69, in <listcomp>\r\n    texts = [doc.page_content for doc in documents]\r\nAttributeError: 'list' object has no attribute 'page_content'\r\n```\r\n\r\n### 复现操作\r\n\r\n1. 正常完成本地部署\r\n2. 上传文件\r\n3. 提示`索引构建失败！'list' object has no attribute 'page_content'`\r\n\r\n### 错误日志\r\n\r\n_No response_\r\n\r\n### 运行环境\r\n\r\n- OS: CentOS 7\r\n- Browser: Chrome\r\n- Gradio version: 3.3.30\r\n- Python version: 3.9.16\r\n\r\n\r\n### 帮助解决\r\n\r\n- [X] 我愿意协助解决！\r\n\r\n### 补充说明\r\n\r\nlangchain库(v0.0.173)BaseLoader类的load方法返回的是List[Document]，\r\nTextSplitter类split_documents接收的是List[Document]，\r\n而ChuanhuChatGPT库modules/index_func.py中texts = text_splitter.split_documents([texts])\r\n意味着text_splitter实例实际接受的参数是[List[List[Document]]]\r\n可以统一将texts对象类型设置为为List[Document]，2点改动\r\n1. `texts = text_splitter.split_documents([texts])`改成`texts = text_splitter.split_documents(texts)`\r\n2. pdf文件，texts使用list封装一层，`texts = Document(page_content=pdftext, metadata={\"source\": filepath})`改成`texts = [Document(page_content=pdftext, metadata={\"source\": filepath})]`\r\n\r\n另外，xlsx文件的处理逻辑没看明白\r\n```python\r\nfor elem in text_list:\r\n    documents.append(Document(page_content=elem, metadata={\"source\": filepath}))\r\ncontinue\r\n```\r\n改成如下更合适?\r\n```python\r\nfor elem in text_list:\r\n    texts.append(Document(page_content=elem, metadata={\"source\": filepath}))\r\n```\r\n\r\n",
      "state": "closed",
      "author": "ioflows",
      "author_type": "User",
      "created_at": "2023-06-02T02:30:13Z",
      "updated_at": "2023-06-02T02:52:42Z",
      "closed_at": "2023-06-02T02:52:42Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/789/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/789",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/789",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:56.631554",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "感谢建议！修复啦",
          "created_at": "2023-06-02T02:52:39Z"
        }
      ]
    },
    {
      "issue_number": 583,
      "title": "[功能请求]: 请求不成功的消息能不能显示在列表里",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n请求不成功的消息能不能显示在列表里，这样就不会因为请求不成功导致，编辑好久的信息丢失！\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "g-wellsa",
      "author_type": "User",
      "created_at": "2023-04-10T13:58:22Z",
      "updated_at": "2023-06-01T06:19:26Z",
      "closed_at": "2023-06-01T06:19:26Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/583/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/583",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/583",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:56.788323",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "好！我修复下",
          "created_at": "2023-04-10T15:19:56Z"
        },
        {
          "author": "Keldos-Li",
          "body": "also \n- #321",
          "created_at": "2023-04-10T17:32:53Z"
        },
        {
          "author": "yiyuhao",
          "body": "很需要，谢谢",
          "created_at": "2023-04-11T09:13:09Z"
        },
        {
          "author": "Keldos-Li",
          "body": "在之前的某次更新中已修复。",
          "created_at": "2023-06-01T06:19:26Z"
        }
      ]
    },
    {
      "issue_number": 321,
      "title": "[功能请求] 保留发送失败的文本",
      "body": "### 该功能请求是否与某个问题相关？\r\n打开页面 发送问题文本 这时候如果返回error 发送的文本也不显示  刷新后 文本还要手动打一边 感觉有点傻乎乎的\r\n\r\n### 可能的解决办法\r\n能不能做成像qq那样 发送失败仍然显示发送的文本  这样就能复制 或者刷新后再次粘贴发送 不用在手动打一遍\r\n\r\n### 其他\r\n\r\n",
      "state": "closed",
      "author": "yhweb",
      "author_type": "User",
      "created_at": "2023-03-23T04:04:18Z",
      "updated_at": "2023-06-01T06:18:43Z",
      "closed_at": "2023-06-01T06:18:43Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/321/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/321",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/321",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:56.937836",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "应该大概好久之前就解决了👾",
          "created_at": "2023-06-01T06:18:43Z"
        }
      ]
    },
    {
      "issue_number": 776,
      "title": "[其他]: Edge 浏览器访问 报错，什么都干不了，谷歌浏览器访问正常",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 错误描述\n\n Edge 浏览器访问 报错：ncaught (in promise) DOMException: Failed to execute 'insertBefore' on 'Node': The node before which the new node is to be inserted is not a child of this node.  \r\n火箭图标那一直显示 getting user info… 获取用户信息..\r\n打字点发送什么的都没有反应。\r\n使用谷歌浏览器正常，用户也能正常获取到。\r\n\n\n### 复现操作\n\nEdge 浏览器访问 报错，什么都干不了，谷歌浏览器访问正常\n\n### 错误日志\n\n```shell\nindex.mjs:369 \r\n Uncaught (in promise) DOMException: Failed to execute 'insertBefore' on 'Node': The node before which the new node is to be inserted is not a child of this node.\r\n    at k (index-29e08d05.js:1:9235)\r\n    at Object.m (index-29e08d05.js:8:8313)\r\n    at Object.p (index-29e08d05.js:8:6371)\r\n    at Object.p (index-29e08d05.js:8:13530)\r\n    at Cr (index-29e08d05.js:4:1913)\r\n    at $t (index-29e08d05.js:4:1548)\r\nm\t@\tStatusTracker.svelte:218\r\np\t@\tStatusTracker.svelte:195\r\np\t@\tStatusTracker.svelte:301\r\nPromise.then(异步)\t\t\r\n(匿名)\t@\tBlocks.svelte:44\r\ni\t@\tstores.ts:110\r\n(匿名)\t@\tBlocks.svelte:250\r\n(匿名)\t@\tindex.js:134\r\nE\t@\tindex.js:134\r\nR.onmessage\t@\tindex.js:235\r\nShow 8 more frames\n```\n\n\n### 运行环境\n\n- OS: Windows 11 家庭中文版 22H2\r\n- Edge：版本 115.0.1851.0 (正式版本) dev (64 位) 和 版本 113.0.1774.50 (正式版本) (64 位) 都不行\r\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "melooy",
      "author_type": "User",
      "created_at": "2023-05-24T04:50:04Z",
      "updated_at": "2023-06-01T06:15:36Z",
      "closed_at": "2023-06-01T06:15:36Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/776/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/776",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/776",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:57.088962",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "看上去出错点在gradio框架的js……如果是这样可能得等gradio解决。\n你可以先试试清除缓存，退出edge再重新打开。",
          "created_at": "2023-05-24T05:55:45Z"
        }
      ]
    },
    {
      "issue_number": 777,
      "title": "一直在主界面显示加载中 Loading...",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n用chrome浏览器，会一直在主界面加载，console会报错\r\n\r\n\r\n\r\n\r\n\r\n\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/22911232/360fb9c1-413c-4caf-86e2-fa9c656025de)\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/22911232/b65f77d1-44bd-4e24-bf75-5044a3348741)\r\n\n\n### 复现操作\n\n已经正常完成部署\n\n### 错误日志\n\n```shell\n用chrome浏览器，会一直在主界面加载，console会报错\r\nFailed to load resource: net::ERR_CONNECTION_RESET\n```\n\n\n### 运行环境\n\n- OS: win\r\n- Server: linux\r\n- Gradio version: 3.28.0\r\n- Python version: 3\r\n\n\n### 补充说明\n\n无",
      "state": "closed",
      "author": "a6225301",
      "author_type": "User",
      "created_at": "2023-05-24T15:03:26Z",
      "updated_at": "2023-06-01T06:15:01Z",
      "closed_at": "2023-06-01T06:14:40Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/777/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/777",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/777",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:57.252442",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "如果其他浏览器可用而Chrome不可用，请尝试\r\n1. 使用无痕模式重试\r\n2. 清除浏览器所有缓存，完全退出浏览器，重新启动chuanhu chat再打开浏览器\r\n\r\n这是一个和gradio更相关的问题，由于国内对fonts.googleapi.com访问的特殊的网络环境，我们擦不了屁股……",
          "created_at": "2023-05-24T15:54:34Z"
        },
        {
          "author": "Keldos-Li",
          "body": "如果还是不行或有更多疑问，欢迎在此ISSUE下继续反馈~先关闭了",
          "created_at": "2023-06-01T06:14:40Z"
        }
      ]
    },
    {
      "issue_number": 779,
      "title": "[功能请求]: 环境变量希望加入OPENAI_API_BASE",
      "body": "### 相关问题\n\n国内转发这样就更加方便了\n\n### 可能的解决办法\n\n解决国内使用\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "xiangfeigao",
      "author_type": "User",
      "created_at": "2023-05-26T01:24:59Z",
      "updated_at": "2023-06-01T06:13:42Z",
      "closed_at": "2023-06-01T06:13:42Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/779/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/779",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/779",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:57.438150",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "刚push了一个更新，现在支持啦。如果有任何问题，欢迎反馈👏",
          "created_at": "2023-05-26T02:44:37Z"
        },
        {
          "author": "Keldos-Li",
          "body": "链接一下相关issue\n- #737",
          "created_at": "2023-05-26T02:57:52Z"
        }
      ]
    },
    {
      "issue_number": 755,
      "title": "代码块样式适配 gradio 3.28.3",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/20588811/955e746f-ea71-42d4-9a0a-b6c0d7e6a9d2)\r\n\n\n### 复现操作\n\n今天拉了最新的代码，跑了pip3 install -r requirements.txt  和   pip3 install gradio --upgrade --force-reinstall，重新启动项目后代码块的背景颜色就不对了\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "ChenziSC",
      "author_type": "User",
      "created_at": "2023-05-16T13:09:19Z",
      "updated_at": "2023-06-01T06:13:16Z",
      "closed_at": "2023-06-01T06:13:16Z",
      "labels": [
        "feature request",
        "🔌 dependency"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/755/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "Keldos-Li"
      ],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/755",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/755",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:57.604126",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "不要随便升级gradio的版本，requirements里指定了版本。",
          "created_at": "2023-05-16T13:11:10Z"
        },
        {
          "author": "ChenziSC",
          "body": "> 不要随便升级gradio的版本，requirements里指定了版本。\r\n\r\n可我是照着readme来操作的呀",
          "created_at": "2023-05-16T13:58:16Z"
        },
        {
          "author": "ChenziSC",
          "body": "> 不要随便升级gradio的版本，requirements里指定了版本。\r\n\r\n执行pip3 install -r requirements.txt --upgrade 后正常了，不过感觉白天模式的代码背景颜色稍微有点偏淡",
          "created_at": "2023-05-16T14:04:12Z"
        },
        {
          "author": "Keldos-Li",
          "body": "被你发现了！是的，亮色模式时的代码块背景色会比深色模式时的浅一些。是这么写的。",
          "created_at": "2023-05-16T14:55:40Z"
        },
        {
          "author": "Keldos-Li",
          "body": "我有空再做一下对新版本gradio的适配……有点点麻烦……",
          "created_at": "2023-05-16T18:44:39Z"
        }
      ]
    },
    {
      "issue_number": 657,
      "title": "[功能请求]: 希望加入更多的模型和类型的支持",
      "body": "### 相关问题\n\n[功能请求]: 希望加入更多的模型和类型的支持\n\n### 可能的解决办法\n\n语言模型：\r\n    Baize（https://github.com/project-baize/baize-chatbot）\r\n    BELLE（https://github.com/LianjiaTech/BELLE）\r\n    Vicuna（https://github.com/c121914yu/FastGPT）\r\n    OpenChatKit（https://github.com/togethercomputer/OpenChatKit）\r\n    Visual（https://github.com/microsoft/visual-chatgpt）\r\n代码模型：CodeGeeX（https://github.com/THUDM/CodeGeeX）\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "1353604736",
      "author_type": "User",
      "created_at": "2023-04-15T00:46:05Z",
      "updated_at": "2023-05-30T07:38:04Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/657/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/657",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/657",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:57.763905",
      "comments": [
        {
          "author": "HsunGong",
          "body": "@GaiZhenbiao 这也是我想说的，之后肯定会有各种各样的大模型，能不能只负责联系各种各样的API接口，而不是把模型放在当前的仓库里。\r\n\r\n可以看到chatglm这些其实都支持huggingface的api了，用request链接他们不失为一个好的选择。\r\n\r\n虽然感觉代码需要进行一些变动，但是我觉得对于长期发展是有利的。",
          "created_at": "2023-04-15T03:36:35Z"
        },
        {
          "author": "LeeKonyu",
          "body": "> @GaiZhenbiao 这也是我想说的，之后肯定会有各种各样的大模型，能不能只负责联系各种各样的API接口，而不是把模型放在当前的仓库里。\r\n> \r\n> 可以看到chatglm这些其实都支持huggingface的api了，用request链接他们不失为一个好的选择。\r\n> \r\n> 虽然感觉代码需要进行一些变动，但是我觉得对于长期发展是有利的。\r\n\r\n我是一名小白，请问一下。\r\n我在云上部署了chatglm，接下来如何接入chuanhu来搞一个图形界面呢？\r\n",
          "created_at": "2023-04-15T15:31:33Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "> @GaiZhenbiao 这也是我想说的，之后肯定会有各种各样的大模型，能不能只负责联系各种各样的API接口，而不是把模型放在当前的仓库里。\r\n> \r\n> 可以看到chatglm这些其实都支持huggingface的api了，用request链接他们不失为一个好的选择。\r\n> \r\n> 虽然感觉代码需要进行一些变动，但是我觉得对于长期发展是有利的。\r\n\r\n现在就是这样呀。我想的是做成SD-WebUI那样的形式。",
          "created_at": "2023-04-16T05:47:16Z"
        },
        {
          "author": "xusenlinzy",
          "body": "> > @GaiZhenbiao 这也是我想说的，之后肯定会有各种各样的大模型，能不能只负责联系各种各样的API接口，而不是把模型放在当前的仓库里。\r\n> > 可以看到chatglm这些其实都支持huggingface的api了，用request链接他们不失为一个好的选择。\r\n> > 虽然感觉代码需要进行一些变动，但是我觉得对于长期发展是有利的。\r\n> \r\n> 现在就是这样呀。我想的是做成SD-WebUI那样的形式。\r\n\r\n可以考虑把模型后端服务隔离开来，将开源模型的接口统一成openai的接口形式，这样每增加一个模型，只需要给对应的api_base就行，这样对后面的模型管理会比较友好，参考[",
          "created_at": "2023-05-26T13:18:11Z"
        }
      ]
    },
    {
      "issue_number": 630,
      "title": "[功能请求]: 如何不重启更新config?",
      "body": "### 相关问题\n\n如何不重启更新config?\n\n### 可能的解决办法\n\n提供命令行或后台\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "zhangchunsheng",
      "author_type": "User",
      "created_at": "2023-04-13T11:09:24Z",
      "updated_at": "2023-05-30T02:42:36Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/630/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/630",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/630",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:57.960172",
      "comments": [
        {
          "author": "MZhao-ouo",
          "body": " 请问为什么要这样做呢",
          "created_at": "2023-04-13T14:15:59Z"
        },
        {
          "author": "MSG-J",
          "body": "我也遇到这个问题，我这边是加用户，加了用户就得重启，重启了已登录的用户就得重新登录",
          "created_at": "2023-05-18T06:00:42Z"
        },
        {
          "author": "wxtt522",
          "body": "用户认证的功能似乎是gradio提供的，我也想知道怎么动态添加用户",
          "created_at": "2023-05-30T02:42:36Z"
        }
      ]
    },
    {
      "issue_number": 783,
      "title": "[功能请求]: 申请加入AZURE的GPT3.5的API支持",
      "body": "### 相关问题\r\n\r\n_No response_\r\n\r\n### 可能的解决办法\r\n\r\n希望加入AZURE的API支持，按官方说法AZURE的API与OPENAI的一致。\r\n\r\n### 帮助开发\r\n\r\n- [X] 我愿意协助开发！\r\n\r\n### 补充说明\r\n\r\nAZURE的API调用方式与OPENAI的方式一样\r\n但AZURE的API在实例化之前需要一些额外的AZURE独有的参数，比如：API地区，部署的模型昵称等",
      "state": "closed",
      "author": "LeXwDeX",
      "author_type": "User",
      "created_at": "2023-05-26T07:50:08Z",
      "updated_at": "2023-05-29T07:18:35Z",
      "closed_at": "2023-05-29T07:18:35Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/783/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/783",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/783",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:58.136249",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "感谢反馈，也希望您能在 #740 中继续说明~\r\n\r\n您勾选了“_我愿意协助开发！_”，如果您愿意之后帮忙引入并提交pr就太好啦",
          "created_at": "2023-05-26T08:03:55Z"
        }
      ]
    },
    {
      "issue_number": 671,
      "title": "[Docker]: 由于 Docker 不再使用环境变量，对应文档需要更新",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n根据 #601 ，Docker 镜像部署方式推荐使用配置文件方式。相应的 Wiki 页面需要更新。又因为 GitHub 自身限制，**Wiki 的改动不能提交 PR**，只能通过 Issue 方式提交。以下是我修改后的 Wiki：https://github.com/Nativu5/ChuanhuChatGPT/wiki\r\n\r\n关于如何合并 Wiki，供仓库管理者参考：https://gist.github.com/larrybotha/10650410#merging-changes\n\n### 复现操作\n\n#667 \n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n_No response_\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Nativu5",
      "author_type": "User",
      "created_at": "2023-04-16T10:07:27Z",
      "updated_at": "2023-05-28T06:32:07Z",
      "closed_at": "2023-04-16T11:30:31Z",
      "labels": [
        "documentation"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 13,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/671/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/671",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/671",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:58.329392",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "可以的！我待会儿回去给你merge～\n\n我们三个应该都不用docker……所以……嗯\n\n----\n\n再次感谢你，也欢迎你为wiki教程的其他部分也继续作出贡献！\n（最近太忙了天呐）",
          "created_at": "2023-04-16T10:28:25Z"
        },
        {
          "author": "Keldos-Li",
          "body": "wiki已更新。我也稍微再更改了点。",
          "created_at": "2023-04-16T11:30:31Z"
        },
        {
          "author": "noahzark",
          "body": "话说能请教一下fork的repo的wiki是怎么来的嘛？我fork出来好像是空的，所以也无法修改\r\nhttps://github.com/noahzark/ChuanhuChatGPT/wiki",
          "created_at": "2023-05-23T10:14:05Z"
        },
        {
          "author": "Nativu5",
          "body": "> 话说能请教一下fork的repo的wiki是怎么来的嘛？我fork出来好像是空的，所以也无法修改 https://github.com/noahzark/ChuanhuChatGPT/wiki\r\n\r\n参考 https://gist.github.com/larrybotha/10650410#contributing 这部分就可以了。",
          "created_at": "2023-05-23T10:20:33Z"
        },
        {
          "author": "noahzark",
          "body": "> > 话说能请教一下fork的repo的wiki是怎么来的嘛？我fork出来好像是空的，所以也无法修改 https://github.com/noahzark/ChuanhuChatGPT/wiki\r\n> \r\n> 参考 https://gist.github.com/larrybotha/10650410#contributing 这部分就可以了。\r\n\r\n噢，知道了，因为默认fork只会fork main branch，fork的时候要去掉那个选项",
          "created_at": "2023-05-23T10:23:34Z"
        }
      ]
    },
    {
      "issue_number": 785,
      "title": "[远程部署]: 构建索引时AttributeError: 'str' object has no attribute 'get'",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n服务器按流程正常部署，所有依赖按照requirement安装，langchain版本反复检查过，也重装过，但是依然上传pdf后报错\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/87698941/21353c08-872d-4f30-b1b7-b489a733e3c1)\r\n\n\n### 复现操作\n\n1. 正常完成服务器部署(之前的版本都没问题)\r\n2. pull了最新的代码！\r\n3. 上传pdf\r\n4. 创建索引报错\n\n### 错误日志\n\n```shell\n2023-05-27 10:34:00,596 [INFO] [base_model.py:319] 加载索引中……\r\n2023-05-27 10:34:00,600 [INFO] [index_func.py:38] loading file: Cisneros_Eleven.pdf\r\n2023-05-27 10:34:00,856 [ERROR] [models.py:90] 获取API使用情况失败:Expecting value: line 1 column 1 (char \r\n0)\r\n100%|███████████████████████████████████████████████████████████████████████| 4/4 [00:00<00:00, 11.43it/s]\r\n2023-05-27 10:34:01,330 [INFO] [index_func.py:128] 构建索引中……\r\n2023-05-27 10:34:01,910 [ERROR] [index_func.py:139] 索引构建失败！'str' object has no attribute 'get'\r\nTraceback (most recent call last):\r\n  File \"/root/chatgay/ChuanhuChatGPT/modules/index_func.py\", line 130, in construct_index\r\n    index = FAISS.from_documents(documents, embeddings)\r\n  File \"/usr/local/python310/lib/python3.10/site-packages/langchain/vectorstores/base.py\", line 296, in fr\r\nom_documents\r\n    return cls.from_texts(texts, embedding, metadatas=metadatas, **kwargs)\r\n  File \"/usr/local/python310/lib/python3.10/site-packages/langchain/vectorstores/faiss.py\", line 420, in f\r\nrom_texts\r\n    embeddings = embedding.embed_documents(texts)\r\n  File \"/usr/local/python310/lib/python3.10/site-packages/langchain/embeddings/openai.py\", line 289, in em\r\nbed_documents\r\n    return self._get_len_safe_embeddings(texts, engine=self.deployment)\r\n  File \"/usr/local/python310/lib/python3.10/site-packages/langchain/embeddings/openai.py\", line 216, in _g\r\net_len_safe_embeddings\r\n    response = embed_with_retry(\r\n  File \"/usr/local/python310/lib/python3.10/site-packages/langchain/embeddings/openai.py\", line 64, in emb\r\ned_with_retry\r\n    return _embed_with_retry(**kwargs)\r\n  File \"/usr/local/python310/lib/python3.10/site-packages/tenacity/__init__.py\", line 289, in wrapped_f\r\n    return self(f, *args, **kw)\r\n  File \"/usr/local/python310/lib/python3.10/site-packages/tenacity/__init__.py\", line 379, in __call__\r\n    do = self.iter(retry_state=retry_state)\r\n  File \"/usr/local/python310/lib/python3.10/site-packages/tenacity/__init__.py\", line 314, in iter\r\n    return fut.result()\r\n  File \"/usr/local/python310/lib/python3.10/concurrent/futures/_base.py\", line 438, in result\r\n    return self.__get_result()\r\n  File \"/usr/local/python310/lib/python3.10/concurrent/futures/_base.py\", line 390, in __get_result\r\n    raise self._exception\r\n  File \"/usr/local/python310/lib/python3.10/site-packages/tenacity/__init__.py\", line 382, in __call__\r\n    result = fn(*args, **kwargs)\r\n  File \"/usr/local/python310/lib/python3.10/site-packages/langchain/embeddings/openai.py\", line 62, in _em\r\nbed_with_retry\r\n    return embeddings.client.create(**kwargs)\r\n  File \"/usr/local/python310/lib/python3.10/site-packages/openai/api_resources/embedding.py\", line 33, in \r\ncreate\r\n    response = super().create(*args, **kwargs)\r\n  File \"/usr/local/python310/lib/python3.10/site-packages/openai/api_resources/abstract/engine_api_resourc\r\ne.py\", line 153, in create\r\n    response, _, api_key = requestor.request(\r\n  File \"/usr/local/python310/lib/python3.10/site-packages/openai/api_requestor.py\", line 230, in request\r\n    resp, got_stream = self._interpret_response(result, stream)\r\n  File \"/usr/local/python310/libt_response\r\n    self._interpret_response_line(\r\n  File \"/usr/local/python310/lib/python3.10/site-packages/openai/api_requestor.py\", line 687, in _interpr$t_response_line\r\n    raise self.handle_error_response(\r\n  File \"/usr/local/python310/lib/python3.10/site-packages/openai/api_requestor.py\", line 350, in handle_e$ror_response\r\n    error_code=error_data.get(\"code\"),\r\nAttributeError: 'str' object has no attribute 'get'\r\nTraceback (most recent call last):\r\n  File \"/usr/local/python310/lib/python3.10/site-packages/gradio/routes.py\", line 399, in run_predict\r\n    output = await app.get_blocks().process_api(\r\n  File \"/usr/local/python310/lib/python3.10/site-packages/gradio/blocks.py\", line 1299, in process_api\r\n    result = await self.call_function(\r\n  File \"/usr/local/python310/lib/python3.10/site-packages/gradio/blocks.py\", line 1036, in call_function\r\n    prediction = await anyio.to_thread.run_sync(\r\n  File \"/usr/local/python310/lib/python3.10/site-packages/anyio/to_thread.py\", line 31, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n  File \"/usr/local/python310/lib/python3.10/site-packages/anyio/_backends/_asyncio.py\", line 937, in run_s\r\nync_in_worker_thread\r\n    return await future\r\n  File \"/usr/local/python310/lib/python3.10/site-packages/anyio/_backends/_asyncio.py\", line 867, in run\r\n    result = context.run(func, *args)\r\n  File \"/usr/local/python310/lib/python3.10/site-packages/gradio/utils.py\", line 488, in async_iteration\r\n    return next(iterator)\r\n  File \"/root/chatgay/ChuanhuChatGPT/modules/utils.py\", line 39, in predict\r\n    for i in iter:\r\n  File \"/root/chatgay/ChuanhuChatGPT/modules/models/base_model.py\", line 381, in predict\r\n    limited_context, fake_inputs, display_append, inputs, chatbot = self.prepare_inputs(real_inputs=input$\r\n, use_websearch=use_websearch, files=files, reply_language=reply_language, chatbot=chatbot)\r\n  File \"/root/chatgay/ChuanhuChatGPT/modules/models/base_model.py\", line 321, in prepare_inputs\r\n    assert index is not None, \"获取索引失败\"\r\nAssertionError: 获取索引失败/python3.10/site-packages/openai/api_requestor.py\", line 624, in _interpre\n```\n\n\n### 运行环境\n\n- OS: Windows 10\r\n- Server:  CentOS 7\r\n- Gradio version: 3.28.0\r\n- Python version: 3.10.1\r\n\n\n### 补充说明\n\n特意再配置了一个虚拟环境，报错依旧一样",
      "state": "closed",
      "author": "realnoob007",
      "author_type": "User",
      "created_at": "2023-05-27T02:38:49Z",
      "updated_at": "2023-05-27T18:24:56Z",
      "closed_at": "2023-05-27T18:24:55Z",
      "labels": [
        "question",
        "server deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/785/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/785",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/785",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:58.527203",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "你使用的是最新版本的代码吗？我测试是没问题的",
          "created_at": "2023-05-27T02:44:39Z"
        },
        {
          "author": "realnoob007",
          "body": "感谢川虎的细心解答，现在全部问题已经解决。\r\n实际的问题是我自定义了base_url，然后那个转发平台不支持embedding，导致了pdf以及文件检索功能报错。\r\n大家选择转发平台的时候一定要看仔细支持的model，以免不必要的麻烦。",
          "created_at": "2023-05-27T18:24:55Z"
        }
      ]
    },
    {
      "issue_number": 708,
      "title": "docker 部署 使用在线搜索功能时出错 ",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n大佬们 我这 大概是代理问题 duckduckgo.com 访问不了  我用clash代理了一下 在浏览器可以访问了  可怎么让服务器能访问到啊\n\n### 复现操作\n\n部署之后 使用在线搜索功能\n\n### 错误日志\n\n```shell\nrequests.exceptions.ConnectTimeout: HTTPSConnectionPool(host='duckduckgo.com', port=443): Max retries exceeded with url: / (Caused by ConnectTimeoutError(<urllib3.connection.HTTPSConnection object at 0x7f071b7aeca0>, 'Connection to duckduckgo.com timed out. (connect timeout=10)')) 2023-04-25 09:08:46,133 [WARNING] [utils.py:59] keywords=你好. _get_vqd() is None. Refresh SESSION and retry... Traceback (most recent call last):   File \"/home/user/.local/lib/python3.8/site-packages/gradio/routes.py\", line 395, in run_predict     output = await app.get_blocks().process_api(   File \"/home/user/.local/lib/python3.8/site-packages/gradio/blocks.py\", line 1193, in process_api     result = await self.call_function(   File \"/home/user/.local/lib/python3.8/site-packages/gradio/blocks.py\", line 930, in call_function     prediction = await anyio.to_thread.run_sync(   File \"/home/user/.local/lib/python3.8/site-packages/anyio/to_thread.py\", line 31, in run_sync     return await get_asynclib().run_sync_in_worker_thread(   File \"/home/user/.local/lib/python3.8/site-packages/anyio/_backends/_asyncio.py\", line 937, in run_sync_in_worker_thread     return await future   File \"/home/user/.local/lib/python3.8/site-packages/anyio/_backends/_asyncio.py\", line 867, in run     result = context.run(func, *args)   File \"/home/user/.local/lib/python3.8/site-packages/gradio/utils.py\", line 491, in async_iteration     return next(iterator)   File \"/home/user/app/modules/utils.py\", line 39, in predict     for i in iter:   File \"/home/user/app/modules/base_model.py\", line 283, in predict     limited_context, fake_inputs, display_append, inputs, chatbot = self.prepare_inputs(real_inputs=inputs, use_websearch=use_websearch, files=files, reply_language=reply_language, chatbot=chatbot)   File \"/home/user/app/modules/base_model.py\", line 243, in prepare_inputs     for idx, result in enumerate(search_results): TypeError: 'NoneType' object is not iterable[Docker]:\n```\n\n\n### 运行环境\n\n- OS: \r\n- Docker version: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "sky-xx",
      "author_type": "User",
      "created_at": "2023-04-25T08:10:40Z",
      "updated_at": "2023-05-27T14:17:49Z",
      "closed_at": "2023-05-27T14:17:48Z",
      "labels": [
        "question",
        "🔌 dependency"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 21,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/708/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/708",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/708",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:58.695476",
      "comments": []
    },
    {
      "issue_number": 737,
      "title": "[本地部署]:在config.json中没有看到API host选项，安装说明中提到过",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n安装说明中提到过API host。但是本地json文件中没有看到，自己加入，docker重启，不知道为啥。\n\n### 复现操作\n\n正常\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n```markdown\ndocker\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "popoleaf",
      "author_type": "User",
      "created_at": "2023-05-08T06:44:28Z",
      "updated_at": "2023-05-26T06:15:06Z",
      "closed_at": "2023-05-10T08:49:06Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/737/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/737",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/737",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:58.695495",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "json_example里忘记加了，但确实可以在config里配置。形如：\n```jsonc\n    ...\n    \"api_host\": \"host.example.com\",\n    ...\n```\n\n请确保你写的json文件格式正确。",
          "created_at": "2023-05-08T07:12:17Z"
        },
        {
          "author": "popoleaf",
          "body": "搞定\r\n试过\"api-host\"\r\n试过“api host”\r\n就是没试过api_host\r\n\r\n\r\npopo\r\n***@***.***\r\n\r\n\r\n\r\n&nbsp;\r\n\r\n\r\n\r\n\r\n------------------&nbsp;原始邮件&nbsp;------------------\r\n发件人:                                                                                                                        \"GaiZhenbiao/ChuanhuChatGPT\"  ",
          "created_at": "2023-05-08T07:29:41Z"
        },
        {
          "author": "Keldos-Li",
          "body": "随着模型与api的增加，后续开发可能会考虑把`api_host`改成`openai_api_host`……请各位留意。",
          "created_at": "2023-05-10T08:49:06Z"
        },
        {
          "author": "maxage",
          "body": "我就试写的openai_api_host，报错。。。原来是api_host  emmmm",
          "created_at": "2023-05-10T14:15:43Z"
        },
        {
          "author": "Keldos-Li",
          "body": "……等我们之后改成openai_api_host我们再写进example吧……这样如果我们不能做到向前兼容，影响的人也应该少点……",
          "created_at": "2023-05-10T14:44:48Z"
        }
      ]
    },
    {
      "issue_number": 772,
      "title": "[Docker]:  最新版本docker部署开始报错.",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n正常运行每天的更新脚本. 上周五开始报错\r\n\r\n\n\n### 复现操作\n\n1.正常docker部署使用.\r\n2.写了一个脚本自动更新,\r\n3.上周五开始脚本更新完报错.\n\n### 错误日志\n\n```shell\ndocker logs -f chatgpt\r\nTraceback (most recent call last):\r\n  File \"/app/ChuanhuChatbot.py\", line 12, in <module>\r\n    from modules.overwrites import *\r\n  File \"/app/modules/overwrites.py\", line 4, in <module>\r\n    from llama_index import Prompt\r\n  File \"/root/.local/lib/python3.9/site-packages/llama_index/__init__.py\", line 14, in <module>\r\n    from llama_index.embeddings.langchain import LangchainEmbedding\r\n  File \"/root/.local/lib/python3.9/site-packages/llama_index/embeddings/langchain.py\", line 6, in <module>\r\n    from langchain.embeddings.base import Embeddings as LCEmbeddings\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/__init__.py\", line 6, in <module>\r\n    from langchain.agents import MRKLChain, ReActChain, SelfAskWithSearchChain\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/agents/__init__.py\", line 2, in <module>\r\n    from langchain.agents.agent import (\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/agents/agent.py\", line 17, in <module>\r\n    from langchain.chains.base import Chain\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/chains/__init__.py\", line 2, in <module>\r\n    from langchain.chains.api.base import APIChain\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/chains/api/base.py\", line 8, in <module>\r\n    from langchain.chains.api.prompt import API_RESPONSE_PROMPT, API_URL_PROMPT\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/chains/api/prompt.py\", line 2, in <module>\r\n    from langchain.prompts.prompt import PromptTemplate\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/prompts/__init__.py\", line 3, in <module>\r\n    from langchain.prompts.chat import (\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/prompts/chat.py\", line 10, in <module>\r\n    from langchain.memory.buffer import get_buffer_string\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/memory/__init__.py\", line 22, in <module>\r\n    from langchain.memory.vectorstore import VectorStoreRetrieverMemory\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/memory/vectorstore.py\", line 10, in <module>\r\n    from langchain.vectorstores.base import VectorStoreRetriever\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/vectorstores/__init__.py\", line 2, in <module>\r\n    from langchain.vectorstores.annoy import Annoy\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/vectorstores/annoy.py\", line 16, in <module>\r\n    from langchain.embeddings.base import Embeddings\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/embeddings/__init__.py\", line 18, in <module>\r\n    from langchain.embeddings.openai import OpenAIEmbeddings\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/embeddings/openai.py\", line 66, in <module>\r\n    class OpenAIEmbeddings(BaseModel, Embeddings):\r\n  File \"pydantic/main.py\", line 197, in pydantic.main.ModelMetaclass.__new__\r\n  File \"pydantic/fields.py\", line 506, in pydantic.fields.ModelField.infer\r\n  File \"pydantic/fields.py\", line 436, in pydantic.fields.ModelField.__init__\r\n  File \"pydantic/fields.py\", line 552, in pydantic.fields.ModelField.prepare\r\n  File \"pydantic/fields.py\", line 663, in pydantic.fields.ModelField._type_analysis\r\n  File \"pydantic/fields.py\", line 808, in pydantic.fields.ModelField._create_sub_type\r\n  File \"pydantic/fields.py\", line 436, in pydantic.fields.ModelField.__init__\r\n  File \"pydantic/fields.py\", line 552, in pydantic.fields.ModelField.prepare\r\n  File \"pydantic/fields.py\", line 668, in pydantic.fields.ModelField._type_analysis\r\n  File \"/usr/local/lib/python3.9/typing.py\", line 852, in __subclasscheck__\r\n    return issubclass(cls, self.__origin__)\r\nTypeError: issubclass() arg 1 must be a class\r\nTraceback (most recent call last):\r\n  File \"/app/ChuanhuChatbot.py\", line 12, in <module>\r\n    from modules.overwrites import *\r\n  File \"/app/modules/overwrites.py\", line 4, in <module>\r\n    from llama_index import Prompt\r\n  File \"/root/.local/lib/python3.9/site-packages/llama_index/__init__.py\", line 14, in <module>\r\n    from llama_index.embeddings.langchain import LangchainEmbedding\r\n  File \"/root/.local/lib/python3.9/site-packages/llama_index/embeddings/langchain.py\", line 6, in <module>\r\n    from langchain.embeddings.base import Embeddings as LCEmbeddings\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/__init__.py\", line 6, in <module>\r\n    from langchain.agents import MRKLChain, ReActChain, SelfAskWithSearchChain\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/agents/__init__.py\", line 2, in <module>\r\n    from langchain.agents.agent import (\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/agents/agent.py\", line 17, in <module>\r\n    from langchain.chains.base import Chain\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/chains/__init__.py\", line 2, in <module>\r\n    from langchain.chains.api.base import APIChain\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/chains/api/base.py\", line 8, in <module>\r\n    from langchain.chains.api.prompt import API_RESPONSE_PROMPT, API_URL_PROMPT\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/chains/api/prompt.py\", line 2, in <module>\r\n    from langchain.prompts.prompt import PromptTemplate\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/prompts/__init__.py\", line 3, in <module>\r\n    from langchain.prompts.chat import (\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/prompts/chat.py\", line 10, in <module>\r\n    from langchain.memory.buffer import get_buffer_string\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/memory/__init__.py\", line 22, in <module>\r\n    from langchain.memory.vectorstore import VectorStoreRetrieverMemory\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/memory/vectorstore.py\", line 10, in <module>\r\n    from langchain.vectorstores.base import VectorStoreRetriever\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/vectorstores/__init__.py\", line 2, in <module>\r\n    from langchain.vectorstores.annoy import Annoy\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/vectorstores/annoy.py\", line 16, in <module>\r\n    from langchain.embeddings.base import Embeddings\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/embeddings/__init__.py\", line 18, in <module>\r\n    from langchain.embeddings.openai import OpenAIEmbeddings\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/embeddings/openai.py\", line 66, in <module>\r\n    class OpenAIEmbeddings(BaseModel, Embeddings):\r\n  File \"pydantic/main.py\", line 197, in pydantic.main.ModelMetaclass.__new__\r\n  File \"pydantic/fields.py\", line 506, in pydantic.fields.ModelField.infer\r\n  File \"pydantic/fields.py\", line 436, in pydantic.fields.ModelField.__init__\r\n  File \"pydantic/fields.py\", line 552, in pydantic.fields.ModelField.prepare\r\n  File \"pydantic/fields.py\", line 663, in pydantic.fields.ModelField._type_analysis\r\n  File \"pydantic/fields.py\", line 808, in pydantic.fields.ModelField._create_sub_type\r\n  File \"pydantic/fields.py\", line 436, in pydantic.fields.ModelField.__init__\r\n  File \"pydantic/fields.py\", line 552, in pydantic.fields.ModelField.prepare\r\n  File \"pydantic/fields.py\", line 668, in pydantic.fields.ModelField._type_analysis\r\n  File \"/usr/local/lib/python3.9/typing.py\", line 852, in __subclasscheck__\r\n    return issubclass(cls, self.__origin__)\r\nTypeError: issubclass() arg 1 must be a class\r\nTraceback (most recent call last):\r\n  File \"/app/ChuanhuChatbot.py\", line 12, in <module>\r\n    from modules.overwrites import *\r\n  File \"/app/modules/overwrites.py\", line 4, in <module>\r\n    from llama_index import Prompt\r\n  File \"/root/.local/lib/python3.9/site-packages/llama_index/__init__.py\", line 14, in <module>\r\n    from llama_index.embeddings.langchain import LangchainEmbedding\r\n  File \"/root/.local/lib/python3.9/site-packages/llama_index/embeddings/langchain.py\", line 6, in <module>\r\n    from langchain.embeddings.base import Embeddings as LCEmbeddings\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/__init__.py\", line 6, in <module>\r\n    from langchain.agents import MRKLChain, ReActChain, SelfAskWithSearchChain\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/agents/__init__.py\", line 2, in <module>\r\n    from langchain.agents.agent import (\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/agents/agent.py\", line 17, in <module>\r\n    from langchain.chains.base import Chain\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/chains/__init__.py\", line 2, in <module>\r\n    from langchain.chains.api.base import APIChain\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/chains/api/base.py\", line 8, in <module>\r\n    from langchain.chains.api.prompt import API_RESPONSE_PROMPT, API_URL_PROMPT\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/chains/api/prompt.py\", line 2, in <module>\r\n    from langchain.prompts.prompt import PromptTemplate\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/prompts/__init__.py\", line 3, in <module>\r\n    from langchain.prompts.chat import (\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/prompts/chat.py\", line 10, in <module>\r\n    from langchain.memory.buffer import get_buffer_string\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/memory/__init__.py\", line 22, in <module>\r\n    from langchain.memory.vectorstore import VectorStoreRetrieverMemory\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/memory/vectorstore.py\", line 10, in <module>\r\n    from langchain.vectorstores.base import VectorStoreRetriever\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/vectorstores/__init__.py\", line 2, in <module>\r\n    from langchain.vectorstores.annoy import Annoy\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/vectorstores/annoy.py\", line 16, in <module>\r\n    from langchain.embeddings.base import Embeddings\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/embeddings/__init__.py\", line 18, in <module>\r\n    from langchain.embeddings.openai import OpenAIEmbeddings\r\n  File \"/root/.local/lib/python3.9/site-packages/langchain/embeddings/openai.py\", line 66, in <module>\r\n    class OpenAIEmbeddings(BaseModel, Embeddings):\r\n  File \"pydantic/main.py\", line 197, in pydantic.main.ModelMetaclass.__new__\r\n  File \"pydantic/fields.py\", line 506, in pydantic.fields.ModelField.infer\r\n  File \"pydantic/fields.py\", line 436, in pydantic.fields.ModelField.__init__\r\n  File \"pydantic/fields.py\", line 552, in pydantic.fields.ModelField.prepare\r\n  File \"pydantic/fields.py\", line 663, in pydantic.fields.ModelField._type_analysis\r\n  File \"pydantic/fields.py\", line 808, in pydantic.fields.ModelField._create_sub_type\r\n  File \"pydantic/fields.py\", line 436, in pydantic.fields.ModelField.__init__\r\n  File \"pydantic/fields.py\", line 552, in pydantic.fields.ModelField.prepare\r\n  File \"pydantic/fields.py\", line 668, in pydantic.fields.ModelField._type_analysis\r\n  File \"/usr/local/lib/python3.9/typing.py\", line 852, in __subclasscheck__\r\n    return issubclass(cls, self.__origin__)\r\nTypeError: issubclass() arg 1 must be a class\n```\n\n\n### 运行环境\n\n- OS: \r\n- Docker version: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "vshen009",
      "author_type": "User",
      "created_at": "2023-05-23T02:39:03Z",
      "updated_at": "2023-05-26T03:56:21Z",
      "closed_at": "2023-05-26T03:50:49Z",
      "labels": [
        "question",
        "docker deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 10,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/772/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/772",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/772",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:58.901254",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "Duplicate with \n- #766\n\n现在的最新版应该没问题吧",
          "created_at": "2023-05-23T02:42:29Z"
        },
        {
          "author": "GolovinElics",
          "body": "遇到同样的问题，docker和Hugging face都不行\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/34887710/6ada3b1d-4363-4d77-85bc-156341b546d3)\r\n\r\n![image](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/34887710/aedbf3ee-1430-42c6-a449-d49c97d75b33)\r\n",
          "created_at": "2023-05-23T15:43:54Z"
        },
        {
          "author": "Keldos-Li",
          "body": "docker 23.05.20版本不行吗？",
          "created_at": "2023-05-23T15:50:16Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "看上去是依赖版本的问题。重新装一下依赖试试？",
          "created_at": "2023-05-23T15:56:24Z"
        },
        {
          "author": "hallfay0",
          "body": "同样的错误",
          "created_at": "2023-05-24T03:13:02Z"
        }
      ]
    },
    {
      "issue_number": 781,
      "title": "[Docker]: 最新版本docker部署运行失败",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n最新代码使用docker部署后，运行的时候报错\n\n### 复现操作\n\nmkdir ~/ChuanhuChatGPT\r\nmkdir ~/ChuanhuChatGPT/history\r\ndocker run --rm tuchuanhuhuhu/chuanhuchatgpt:latest cat /app/config_example.json > ~/ChuanhuChatGPT/config.json\r\ndocker run -d --name ChuanhuChat \\\r\n\t-v ~/ChuanhuChatGPT/history:/app/history \\\r\n\t-v ~/ChuanhuChatGPT/config.json:/app/config.json \\\r\n\t-p 7860:7860 \\\r\n\ttuchuanhuhuhu/chuanhuchatgpt:latest\r\n\n\n### 错误日志\n\n```shell\nTraceback (most recent call last):\r\n  File \"/app/ChuanhuChatbot.py\", line 13, in <module>\r\n    from modules.models.models import get_model\r\n  File \"/app/modules/models/models.py\", line 18, in <module>\r\n    from duckduckgo_search import ddg\r\nModuleNotFoundError: No module named 'duckduckgo_search'\n```\n\n\n### 运行环境\n\n- OS: Linux\r\n- Docker version: 23.0.1\r\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "wanghuan6887",
      "author_type": "User",
      "created_at": "2023-05-26T03:47:00Z",
      "updated_at": "2023-05-26T03:51:20Z",
      "closed_at": "2023-05-26T03:48:47Z",
      "labels": [
        "question",
        "docker deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/781/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/781",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/781",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:59.144568",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "非常抱歉，依赖没有删除干净。现在已经修复！",
          "created_at": "2023-05-26T03:48:45Z"
        },
        {
          "author": "vshen009",
          "body": "我在requirements.txt 加入了 duckduckgo_search 重新构建了镜像就OK了. 申请duckduckgo_search加入requirements.txt ",
          "created_at": "2023-05-26T03:50:11Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "> 我在requirements.txt 加入了 duckduckgo_search 重新构建了镜像就OK了. 申请duckduckgo_search加入requirements.txt\r\n\r\nduckduckgo_search这个依赖工作不正常，我现在把它换成google_search了。依赖没有删除干净，非常抱歉！",
          "created_at": "2023-05-26T03:51:19Z"
        }
      ]
    },
    {
      "issue_number": 780,
      "title": "[Bug]: 用官方的Dockerfile构建后的容器报错",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\nModuleNotFoundError: No module named 'duckduckgo_search', 我看了依赖里面没有这个. \n\n### 复现操作\n\n1.docker build -t chatgpt /root/ChuanhuChatGPT,正常完成构建\r\n2.运行docker 命令拉起程序看到报错.\r\n3.docker logs chatgpt\n\n### 错误日志\n\n```shell\nTraceback (most recent call last):\r\n  File \"/app/ChuanhuChatbot.py\", line 13, in <module>\r\n    from modules.models.models import get_model\r\n  File \"/app/modules/models/models.py\", line 18, in <module>\r\n    from duckduckgo_search import ddg\r\nModuleNotFoundError: No module named 'duckduckgo_search'\r\n[root@tunnel01 ~]# docker logs chatgpt\r\nTraceback (most recent call last):\r\n  File \"/app/ChuanhuChatbot.py\", line 13, in <module>\r\n    from modules.models.models import get_model\r\n  File \"/app/modules/models/models.py\", line 18, in <module>\r\n    from duckduckgo_search import ddg\r\nModuleNotFoundError: No module named 'duckduckgo_search'\n```\n\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: 3.28\r\n- Python version: 3.9(来自Dockerfile里面定义的镜像)\r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "vshen009",
      "author_type": "User",
      "created_at": "2023-05-26T03:41:18Z",
      "updated_at": "2023-05-26T03:43:09Z",
      "closed_at": "2023-05-26T03:43:09Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/780/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/780",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/780",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:59.313764",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "感谢提醒，现在应该没问题了",
          "created_at": "2023-05-26T03:43:07Z"
        }
      ]
    },
    {
      "issue_number": 778,
      "title": "[Bug]: 一键复制部署到huggingface，复制弹框填写的API_KEY和在私有环境setting填写的API_KEY不会同步到主界面",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n不管是在复制时弹出的弹框填写还是在复制后的私有环境setting都不会生效，如果在主界面那个输入框填写的刷新就没了，也不是持久的。之前某个版本我复制之后在setting填写的key还是可以持久的\n\n### 复现操作\n\n1.从https://github.com/GaiZhenbiao/ChuanhuChatGPT点击一键部署\r\n2.复制空间填写XMCHAT_API_KEY:自己的API_KEY;\r\n3.部署成功发现主界面的api_key输入框是空的；\r\n4.到setting填写XMCHAT_API_KEY,回来刷新还是空的\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "T97-coffee",
      "author_type": "User",
      "created_at": "2023-05-25T04:43:09Z",
      "updated_at": "2023-05-25T06:30:42Z",
      "closed_at": "2023-05-25T06:17:55Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/778/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/778",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/778",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:59.466597",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "尽管输入框是空的，实际上是可以使用的。只是没有把API Key显示出来。",
          "created_at": "2023-05-25T04:44:28Z"
        },
        {
          "author": "T97-coffee",
          "body": "并没有啊，Error: { “error”: { “message”: “You didn’t provide an API key. You need to provide your API key in an Authorization header using Bearer auth (i.e. Authorization: Bearer YOUR_KEY), or as the password field (with blank username) if you’re accessing the API from your browser and are prompted for a",
          "created_at": "2023-05-25T06:04:49Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "XMCHAT_API_KEY 是用于 XMChat模型的，你想用GPT的话需要填写的是 OPENAI_API_KEY",
          "created_at": "2023-05-25T06:07:46Z"
        },
        {
          "author": "T97-coffee",
          "body": "ok，在settings新增Repository secrets 新增OPENAI_API_KEY已解决，误认为XMCHAT_API_KEY 是原来的OPENAI_API_KEY了。感谢感谢！！！",
          "created_at": "2023-05-25T06:17:42Z"
        }
      ]
    },
    {
      "issue_number": 697,
      "title": "[功能请求]: 是否考虑使用LangChain框架，让对话自动总结，提高AI对上下文处理能力",
      "body": "### 相关问题\n\n我想与您分享我的建议，以便改进这个优秀的项目。\r\n\r\n在之前初步浏览了这个项目的代码的时候，我发现你们设置了一个常量用于让gpt总结对话的一个问题。这使我想到，你们是否已经考虑过根据token使用自动总结对话以实现无限对话的功能呢？ 然而，在我今天进行一轮长对话之后，我下载并保存了该对话的内容，但似乎你们并没有实现这个功能。\r\n\r\n最近，我在bilibili上看到有人使用LangChain框架托管对话，它可以通过总结上下文的方式实现AI的记忆，这个功能可能对你们项目的AI上下文记忆功能有很大帮助。因此，我也进行了粗略的浏览和测试，发现LangChain能够完全支持gpt-3.5-turbo的对话代理。我觉得这个功能可能会有效改善对话体验。\r\n\r\n我还听说有将每句对话转换为词向量保存在本地的提高AI记忆能力的办法，我看到你们查找内容和导入文章的功能都应该用到了词向量，这也许对你们来说不困难吧，不过毕竟效果好不好确实没有人知道。\r\n\r\n还有，你们导入文章的功能能不能再优化点？我发现你们是把几个文件的内容合并到一起进行词向量化。但是这样就会导致无法单独移除或者添加一个文件，而且对于一组文件的每一个组合，都可能需要进行新的缓存。能否对于每个文件单独词向量化，这样添加或者删除文件，或者对于文件索引缓存都应该更有帮助吧。\r\n\r\n当然，如果您和您的团队已经尝试过这个功能并发现它并不可行或效果较差，就请无视的我的提议吧。我也没有太多的时间和精力进行实际测试。\r\n\r\n非常感谢您抽出时间了解我的想法和建议！\n\n### 可能的解决办法\n\n这是我看到的视频内容：\r\n【基于LangChain实现ChatGPT交互式聊天】 https://www.bilibili.com/video/BV1V24y1w74i/?share_source=copy_web&vd_source=d5c72ed3a90a0fd49b6b24bda32e4009\r\n\r\n我极其简单地翻阅了下LangChain的文档，其中：\r\n`langchain.chains.conversation.memory`中的`ConversationSummaryBufferMemory`类似乎可以支持自动根据已经使用的token值定期对对话内容进行总结，再用总结的内容加入新的对话之中。\r\n\r\n如果像这样做，记录对话，当token消耗达到一定程度的时候，就把之前的对话内容总结为一段话，也许可以更好地改善上下文记忆的功能吧。\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n【基于LangChain实现ChatGPT交互式聊天】 https://www.bilibili.com/video/BV1V24y1w74i/?share_source=copy_web&vd_source=d5c72ed3a90a0fd49b6b24bda32e4009\r\n\r\n参考文档\r\n\r\nConversationChain\r\nhttps://python.langchain.com/en/latest/reference/modules/chains.html?highlight=conversationchain#langchain.chains.ConversationChain\r\n\r\n视频里的源代码\r\nhttps://github.com/sugarforever/Langchain-Conversational-Chatbot",
      "state": "open",
      "author": "dkglds",
      "author_type": "User",
      "created_at": "2023-04-22T15:31:23Z",
      "updated_at": "2023-05-25T06:10:08Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/697/reactions",
        "total_count": 4,
        "+1": 4,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/697",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/697",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:59.674151",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "有道理，这两天我准备做一下👀",
          "created_at": "2023-04-25T01:10:23Z"
        },
        {
          "author": "zodostffaa",
          "body": "> 有道理，这两天我准备做一下👀\r\n\r\n可以结合pinecone或者chroma本地库，来长期记忆对话，还有本地索引文件可以换成数据库存储",
          "created_at": "2023-04-25T05:37:38Z"
        },
        {
          "author": "onewOne",
          "body": "对于这个问题，我也很感兴趣，我现在的做法是对所有聊天记录进行摘要，然后带上最近3-4条对话的记录+摘要来保持聊天上下文。\r\n这样做会导致消耗大量的token。还有方法优化吗",
          "created_at": "2023-04-25T08:18:49Z"
        },
        {
          "author": "onewOne",
          "body": "你们有开发群吗",
          "created_at": "2023-04-25T08:24:53Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "> 你们有开发群吗\r\n\r\n可以加readme里的TG群",
          "created_at": "2023-04-25T08:25:44Z"
        }
      ]
    },
    {
      "issue_number": 695,
      "title": "我部署了服务器但是按钮却都是英文啊？",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n我阅读代码发现理论上modules文件夹里是不是应该有个config.json啊，里面应该写了和i18n的语言信息吧，可是它似乎和项目主页面里的config.json一并被忽略了，可能是因为这个导致了我部署了服务器但是按钮却都是英文。\r\n\r\nwebui_locate.py中：\r\n5～20行：\r\n```\r\nclass I18nAuto:\r\n    def __init__(self):\r\n        if os.path.exists(\"config.json\"):\r\n            with open(\"config.json\", \"r\", encoding='utf-8') as f:\r\n                config = json.load(f)\r\n        else:\r\n            config = {}\r\n        lang_config = config.get(\"language\", \"auto\")\r\n        language = os.environ.get(\"LANGUAGE\", lang_config)\r\n        if language == \"auto\":\r\n            language = locale.getdefaultlocale()[0] # get the language code of the system (ex. zh_CN)\r\n        self.language_map = {}\r\n        self.file_is_exists = os.path.isfile(f\"./locale/{language}.json\")\r\n        if self.file_is_exists:\r\n            with open(f\"./locale/{language}.json\", \"r\", encoding=\"utf-8\") as f:\r\n                self.language_map.update(json.load(f))\r\n```\r\n其中有：\r\n`with open(\"config.json\", \"r\", encoding='utf-8') as f:`\r\n正常下载的代码文件这个目录下是没有这个config.json文件的，可能是因为：\r\n.gitignore中141行的：`config.json`\r\n导致忽略了项目中所有名为config.json的文件，正确的做法是不是应该仅仅忽略主目录下的config.json文件？\n\n### 复现操作\n\n1. 正确完成网站部署\r\n2. 运行成功确实能提问，但是UI全是英文，体验可能不太好。\r\n3. 检查了你们的在线体验网站，确实全是中文UI\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "dkglds",
      "author_type": "User",
      "created_at": "2023-04-22T03:03:35Z",
      "updated_at": "2023-05-25T02:34:55Z",
      "closed_at": "2023-04-22T04:02:39Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/695/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/695",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/695",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:43:59.904962",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "modules文件夹下没有config.json。\n\n您将项目主文件夹下的config.json中的language的键值改为\"zh_CN\"即可。",
          "created_at": "2023-04-22T03:19:16Z"
        },
        {
          "author": "dkglds",
          "body": "哦，好的，是我没注意这个地方",
          "created_at": "2023-04-22T03:36:29Z"
        },
        {
          "author": "xiangfeigao",
          "body": "我用docker部署的，发现没有中文包",
          "created_at": "2023-05-25T02:28:46Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "> 我用docker部署的，发现没有中文包\r\n\r\n在docker的环境变量里设置`LANGUAGE`的值为`zh_CN`就行了",
          "created_at": "2023-05-25T02:34:55Z"
        }
      ]
    },
    {
      "issue_number": 775,
      "title": "[功能请求]: 增加更多的模型支持",
      "body": "### 相关问题\n\nbloom系列模型有着较大的参数范围可以选择（从 396m 到 6b4）,显存占用可以有较宽泛的选择，且peft框架对其支持也较为不错（毕竟是hg自家的），可以考虑纳入：https://huggingface.co/YeungNLP\n\n### 可能的解决办法\n\n裁剪词库后的版本列表：https://huggingface.co/YeungNLP\r\n裁剪词库前的版本列表：https://huggingface.co/bigscience\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "wujohns",
      "author_type": "User",
      "created_at": "2023-05-24T04:42:31Z",
      "updated_at": "2023-05-24T04:42:31Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/775/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/775",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/775",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:00.087611",
      "comments": []
    },
    {
      "issue_number": 771,
      "title": "[Bug]:  对话消息中显示异常的html 渲染 代码",
      "body": "### 这个bug是否已存在现有issue了？\r\n\r\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\r\n\r\n### 错误表现\r\n\r\n![html_issue](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/19992475/e3cc62ca-eebb-474e-89d3-44cefb7e1ac2)\r\n如上图所示使用英文进行对话输入和回复的文本中包含了html代码\r\n请教相关熟悉的技术工程师如何恢复成正常渲染效果谢谢\r\n\r\n### 复现操作\r\n\r\n1. 下载最新的github clone 代码\r\n2. 通过 pip install gradio --upgrade --force-reinstall 重新安装过所有依赖\r\n3.  配置config文件后, 通过python ChuanhuChatbot.py  部署\r\n4. 打开url 后选择3.5或者3.5-0301的模型进行简单对话即可复现\r\n\r\n\r\n### 错误日志\r\n\r\n_No response_\r\n\r\n### 运行环境\r\n\r\n- OS:  ubuntu 18\r\n- Browser:  chrome  112.0.5615.165\r\n- Gradio version: 3.32.0\r\n- Python version:  3.8.5\r\n\r\n\r\n### 帮助解决\r\n\r\n- [ ] 我愿意协助解决！\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "closed",
      "author": "ztxjack",
      "author_type": "User",
      "created_at": "2023-05-22T12:45:44Z",
      "updated_at": "2023-05-23T09:04:00Z",
      "closed_at": "2023-05-23T08:31:52Z",
      "labels": [
        "bug",
        "🔌 dependency"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/771/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/771",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/771",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:00.087630",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "gradio版本太高了，请安装3.28.0版本的...新的还没适配",
          "created_at": "2023-05-22T13:02:46Z"
        },
        {
          "author": "ztxjack",
          "body": "@Keldos-Li , 重装这个版本的gradio可以了谢谢",
          "created_at": "2023-05-23T08:31:39Z"
        }
      ]
    },
    {
      "issue_number": 766,
      "title": "[Docker]: 最新版docker镜像启动失败",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n使用最新版docker镜像启动失败。切换为上一版镜像后运行成功\n\n### 复现操作\n\ndocker run -d --name ChuanhuChat \\\r\n\t-v ~/www/ChuanhuChatGPT/history:/app/history \\\r\n\t-v ~/www/ChuanhuChatGPT/config.json:/app/config.json \\\r\n\t-p 7860:7860 \\\r\n\ttuchuanhuhuhu/chuanhuchatgpt:latest\n\n### 错误日志\n\n```shell\n2023-05-19 07:57:06,888 [INFO] [models.py:562] 正在加载OpenAI模型: gpt-3.5-turbo\r\n2023-05-19 07:57:06,892 [INFO] [models.py:607] 模型设置为了： gpt-3.5-turbo\r\n2023-05-19 07:57:07,771 [INFO] [utils.py:407] 您的IP区域：United States。\r\nTraceback (most recent call last):\r\n  File \"/app/ChuanhuChatbot.py\", line 290, in <module>\r\n    autogpt_mode,\r\nNameError: name 'autogpt_mode' is not defined\n```\n\n\n### 运行环境\n\n- OS:  Centos7\r\n- Docker version: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "rlznfhkppf0281",
      "author_type": "User",
      "created_at": "2023-05-19T08:10:39Z",
      "updated_at": "2023-05-23T02:41:24Z",
      "closed_at": "2023-05-22T00:07:38Z",
      "labels": [
        "question",
        "docker deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/766/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/766",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/766",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:00.276367",
      "comments": [
        {
          "author": "AceLing",
          "body": "I'm in the same situation. :(",
          "created_at": "2023-05-19T09:14:05Z"
        },
        {
          "author": "Keldos-Li",
          "body": "刚重新push了一版docker，试试行不行？",
          "created_at": "2023-05-20T06:10:39Z"
        },
        {
          "author": "miaowmint",
          "body": "> 刚重新push了一版docker，试试行不行？\r\n\r\n可以正常运行了",
          "created_at": "2023-05-20T09:02:21Z"
        },
        {
          "author": "rlznfhkppf0281",
          "body": "此问题涉及的docker版本为：[23.05.18](https://hub.docker.com/layers/tuchuanhuhuhu/chuanhuchatgpt/23.05.18/images/sha256-8ed6a0cb77ec07827240389ebfda4362de1e6c8b1e730c72b6bb6201a515c6ac?context=explore)，现在关闭这个问题",
          "created_at": "2023-05-22T00:07:32Z"
        }
      ]
    },
    {
      "issue_number": 701,
      "title": "[本地部署]:  获取API使用情况失败:HTTPSConnectionPool(host='api.openai.com', port=443): Max retries exceeded with url: /dashboard/billing/usage?start_d ate=2023-04-01&end_date=2023-04-30 (Caused by ProxyError('Cannot connect to proxy.', OSError(0, 'Error')))",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n 获取API使用情况失败:HTTPSConnectionPool(host='api.openai.com', port=443): Max retries exceeded with url: /dashboard/billing/usage?start_d\r\nate=2023-04-01&end_date=2023-04-30 (Caused by ProxyError('Cannot connect to proxy.', OSError(0, 'Error')))\n\n### 复现操作\n\nopenai-key正确\r\n使用代理    \"http\":  \"socks5h://localhost:7890\",\r\n    \"https\": \"socks5h://localhost:7890\",\r\nClash代理\n\n### 错误日志\n\n```shell\n2023-04-24 10:29:51,140 [INFO] [base_model.py:281] 输入为：你好\r\n2023-04-24 10:29:51,172 [INFO] [base_model.py:345] 回答为：☹️发生了错误：获取对话时发生错误，请查看后台日志\r\n2023-04-24 10:29:52,393 [ERROR] [models.py:89] 获取API使用情况失败:HTTPSConnectionPool(host='api.openai.com', port=443): Max retries exceeded with url: /dashboard/billing/usage?start_d\r\nate=2023-04-01&end_date=2023-04-30 (Caused by ProxyError('Cannot connect to proxy.', OSError(0, 'Error')))\n```\n\n\n### 运行环境\n\n```markdown\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: 3.8.1\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "rickformorty",
      "author_type": "User",
      "created_at": "2023-04-24T02:33:29Z",
      "updated_at": "2023-05-20T12:34:01Z",
      "closed_at": "2023-05-01T14:23:13Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/701/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/701",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/701",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:00.473813",
      "comments": [
        {
          "author": "Qwerty4401",
          "body": "就是代理问题。。",
          "created_at": "2023-04-24T07:34:49Z"
        }
      ]
    },
    {
      "issue_number": 764,
      "title": "[Bug]: 川虎助理是什么模型，没响应",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n<img width=\"1563\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/31379908/3afd884b-4d43-49d2-ba91-ce67f0497d29\">\r\n\n\n### 复现操作\n\n如题\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Maddaxman",
      "author_type": "User",
      "created_at": "2023-05-18T16:02:02Z",
      "updated_at": "2023-05-18T16:19:24Z",
      "closed_at": "2023-05-18T16:11:03Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/764/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/764",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/764",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:02.788565",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "这是一个让GPT帮你上网搜索、计算公式、查询百科的模型，类似AutoGPT。这个模型默认使用GPT4，你看看终端里有没有报错？",
          "created_at": "2023-05-18T16:06:10Z"
        },
        {
          "author": "Maddaxman",
          "body": "> 这是一个让GPT帮你上网搜索、计算公式、查询百科的模型，类似AutoGPT。这个模型默认使用GPT4，你看看终端里有没有报错？\r\n\r\n知道了 改回3.5了",
          "created_at": "2023-05-18T16:10:59Z"
        }
      ]
    },
    {
      "issue_number": 763,
      "title": "[远程部署]: 更新最新版启动报错：ImportError: cannot import name 'BaseLanguageModel' from 'langchain.schema' (/usr/local/lib/python3.10/dist-packages/langchain/schema.py)",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n启动失败，提示ImportError\r\n```\r\n$ python3 ChuanhuChatbot.py\r\nTraceback (most recent call last):\r\n  File \"/root/ChuanhuChatGPT/ChuanhuChatbot.py\", line 12, in <module>\r\n    from modules.overwrites import *\r\n  File \"/root/ChuanhuChatGPT/modules/overwrites.py\", line 4, in <module>\r\n    from llama_index import Prompt\r\n  File \"/usr/local/lib/python3.10/dist-packages/llama_index/__init__.py\", line 18, in <module>\r\n    from llama_index.indices.common.struct_store.base import SQLDocumentContextBuilder\r\n  File \"/usr/local/lib/python3.10/dist-packages/llama_index/indices/__init__.py\", line 4, in <module>\r\n    from llama_index.indices.keyword_table.base import GPTKeywordTableIndex\r\n  File \"/usr/local/lib/python3.10/dist-packages/llama_index/indices/keyword_table/__init__.py\", line 4, in <module>\r\n    from llama_index.indices.keyword_table.base import GPTKeywordTableIndex\r\n  File \"/usr/local/lib/python3.10/dist-packages/llama_index/indices/keyword_table/base.py\", line 17, in <module>\r\n    from llama_index.indices.base import BaseGPTIndex, QueryMap\r\n  File \"/usr/local/lib/python3.10/dist-packages/llama_index/indices/base.py\", line 16, in <module>\r\n    from llama_index.indices.query.base import BaseGPTIndexQuery\r\n  File \"/usr/local/lib/python3.10/dist-packages/llama_index/indices/query/base.py\", line 18, in <module>\r\n    from llama_index.indices.postprocessor.node import (\r\n  File \"/usr/local/lib/python3.10/dist-packages/llama_index/indices/postprocessor/__init__.py\", line 5, in <module>\r\n    from llama_index.indices.postprocessor.node import (\r\n  File \"/usr/local/lib/python3.10/dist-packages/llama_index/indices/postprocessor/node.py\", line 11, in <module>\r\n    from llama_index.indices.response.type import ResponseMode\r\n  File \"/usr/local/lib/python3.10/dist-packages/llama_index/indices/response/__init__.py\", line 4, in <module>\r\n    from llama_index.indices.response.response_builder import (\r\n  File \"/usr/local/lib/python3.10/dist-packages/llama_index/indices/response/response_builder.py\", line 17, in <module>\r\n    from llama_index.indices.common_tree.base import GPTTreeIndexBuilder\r\n  File \"/usr/local/lib/python3.10/dist-packages/llama_index/indices/common_tree/base.py\", line 13, in <module>\r\n    from llama_index.indices.service_context import ServiceContext\r\n  File \"/usr/local/lib/python3.10/dist-packages/llama_index/indices/service_context.py\", line 6, in <module>\r\n    from llama_index.indices.prompt_helper import PromptHelper\r\n  File \"/usr/local/lib/python3.10/dist-packages/llama_index/indices/prompt_helper.py\", line 12, in <module>\r\n    from llama_index.langchain_helpers.chain_wrapper import LLMPredictor\r\n  File \"/usr/local/lib/python3.10/dist-packages/llama_index/langchain_helpers/chain_wrapper.py\", line 6, in <module>\r\n    from llama_index.llm_predictor.base import (  # noqa: F401\r\n  File \"/usr/local/lib/python3.10/dist-packages/llama_index/llm_predictor/__init__.py\", line 4, in <module>\r\n    from llama_index.llm_predictor.base import LLMPredictor\r\n  File \"/usr/local/lib/python3.10/dist-packages/llama_index/llm_predictor/base.py\", line 12, in <module>\r\n    from langchain.schema import BaseLanguageModel\r\nImportError: cannot import name 'BaseLanguageModel' from 'langchain.schema' (/usr/local/lib/python3.10/dist-packages/langchain/schema.py)\r\n```\n\n### 复现操作\n\n本来正常的，只是 `git pull` 到最新版，并且使用 `pip install -r requirements.txt` 更新了依赖，再启动就报错了。\n\n### 错误日志\n\n```shell\npython3 ChuanhuChatbot.py\r\nTraceback (most recent call last):\r\n  File \"/root/ChuanhuChatGPT/ChuanhuChatbot.py\", line 12, in <module>\r\n    from modules.overwrites import *\r\n  File \"/root/ChuanhuChatGPT/modules/overwrites.py\", line 4, in <module>\r\n    from llama_index import Prompt\r\n  File \"/usr/local/lib/python3.10/dist-packages/llama_index/__init__.py\", line 18, in <module>\r\n    from llama_index.indices.common.struct_store.base import SQLDocumentContextBuilder\r\n  File \"/usr/local/lib/python3.10/dist-packages/llama_index/indices/__init__.py\", line 4, in <module>\r\n    from llama_index.indices.keyword_table.base import GPTKeywordTableIndex\r\n  File \"/usr/local/lib/python3.10/dist-packages/llama_index/indices/keyword_table/__init__.py\", line 4, in <module>\r\n    from llama_index.indices.keyword_table.base import GPTKeywordTableIndex\r\n  File \"/usr/local/lib/python3.10/dist-packages/llama_index/indices/keyword_table/base.py\", line 17, in <module>\r\n    from llama_index.indices.base import BaseGPTIndex, QueryMap\r\n  File \"/usr/local/lib/python3.10/dist-packages/llama_index/indices/base.py\", line 16, in <module>\r\n    from llama_index.indices.query.base import BaseGPTIndexQuery\r\n  File \"/usr/local/lib/python3.10/dist-packages/llama_index/indices/query/base.py\", line 18, in <module>\r\n    from llama_index.indices.postprocessor.node import (\r\n  File \"/usr/local/lib/python3.10/dist-packages/llama_index/indices/postprocessor/__init__.py\", line 5, in <module>\r\n    from llama_index.indices.postprocessor.node import (\r\n  File \"/usr/local/lib/python3.10/dist-packages/llama_index/indices/postprocessor/node.py\", line 11, in <module>\r\n    from llama_index.indices.response.type import ResponseMode\r\n  File \"/usr/local/lib/python3.10/dist-packages/llama_index/indices/response/__init__.py\", line 4, in <module>\r\n    from llama_index.indices.response.response_builder import (\r\n  File \"/usr/local/lib/python3.10/dist-packages/llama_index/indices/response/response_builder.py\", line 17, in <module>\r\n    from llama_index.indices.common_tree.base import GPTTreeIndexBuilder\r\n  File \"/usr/local/lib/python3.10/dist-packages/llama_index/indices/common_tree/base.py\", line 13, in <module>\r\n    from llama_index.indices.service_context import ServiceContext\r\n  File \"/usr/local/lib/python3.10/dist-packages/llama_index/indices/service_context.py\", line 6, in <module>\r\n    from llama_index.indices.prompt_helper import PromptHelper\r\n  File \"/usr/local/lib/python3.10/dist-packages/llama_index/indices/prompt_helper.py\", line 12, in <module>\r\n    from llama_index.langchain_helpers.chain_wrapper import LLMPredictor\r\n  File \"/usr/local/lib/python3.10/dist-packages/llama_index/langchain_helpers/chain_wrapper.py\", line 6, in <module>\r\n    from llama_index.llm_predictor.base import (  # noqa: F401\r\n  File \"/usr/local/lib/python3.10/dist-packages/llama_index/llm_predictor/__init__.py\", line 4, in <module>\r\n    from llama_index.llm_predictor.base import LLMPredictor\r\n  File \"/usr/local/lib/python3.10/dist-packages/llama_index/llm_predictor/base.py\", line 12, in <module>\r\n    from langchain.schema import BaseLanguageModel\r\nImportError: cannot import name 'BaseLanguageModel' from 'langchain.schema' (/usr/local/lib/python3.10/dist-packages/langchain/schema.py)\n```\n\n\n### 运行环境\n\n- OS: ubuntu\r\n- Server: \r\n- Gradio version: \r\n- Python version: 3.10.6\r\n\n\n### 补充说明\n\npip's dependency resolver does not currently take into account all the packages that are installed. This behaviour is the source of the following dependency conflicts.\r\nllama-index 0.5.25 requires langchain==0.0.142, but you have langchain 0.0.170 which is incompatible.\r\n\r\n检查日志有这个问题，版本冲突，如果改0.0.142也不行~",
      "state": "closed",
      "author": "oiuv",
      "author_type": "User",
      "created_at": "2023-05-18T14:04:05Z",
      "updated_at": "2023-05-18T14:53:33Z",
      "closed_at": "2023-05-18T14:53:33Z",
      "labels": [
        "question",
        "server deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/763/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/763",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/763",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:02.958401",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "请使用最新版代码。我删除了llama index这个依赖。",
          "created_at": "2023-05-18T14:05:18Z"
        },
        {
          "author": "oiuv",
          "body": "> 请使用最新版代码。我删除了llama index这个依赖。\r\n\r\n我pull的就是最新版，你看看 `modules/overwrites.py` 这个文件中还有这个包呢，我试着把这个包注释了，可以启动，但会话又会报错。这个依赖没有处理干净。",
          "created_at": "2023-05-18T14:12:41Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "现在应该没问题了，我新创建了一个虚拟环境测试没问题。",
          "created_at": "2023-05-18T14:53:30Z"
        }
      ]
    },
    {
      "issue_number": 635,
      "title": "[功能请求]: 联接Wolfram|Alpha赋能GPT数学领域搜索能力",
      "body": "### 相关问题\r\n\r\n-\r\n\r\n### 可能的解决办法\r\n\r\nWolfram|Alpha的强大不必多说，利用其知识库可以有效赋能GPT，实现对数学领域问题更精确的回答，如函数性质、（不）等式图像、级数展开式（ChatGPT本身给出的答案很多时候是错的）等，建议增加此功能。\r\n已有人做出类似下图效果\r\n![image](https://user-images.githubusercontent.com/12162720/231829231-7bd9d2c5-38ef-456c-8df4-9ba76e848da5.png)\r\n\r\n![image](https://user-images.githubusercontent.com/12162720/231829361-7809c346-4c88-42d3-bdc5-9c2a42a0a0a4.png)\r\n\r\n\r\n### 帮助开发\r\n\r\n- [X] 我愿意协助开发！\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "closed",
      "author": "freebr",
      "author_type": "User",
      "created_at": "2023-04-13T16:47:29Z",
      "updated_at": "2023-05-18T13:31:08Z",
      "closed_at": "2023-05-18T13:31:07Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/635/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/635",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/635",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:03.154604",
      "comments": [
        {
          "author": "HsunGong",
          "body": "可以参考下面的执行code:\r\n\r\nhttps://github.com/zhayujie/chatgpt-on-wechat/tree/master/plugins/tool\r\n\r\n---\r\n\r\n但是这个感觉需要对现有仓库code大改，使得其能够支持插件模式。",
          "created_at": "2023-04-13T16:59:53Z"
        },
        {
          "author": "freebr",
          "body": "> 可以参考下面的执行code:\r\n> \r\n> https://github.com/zhayujie/chatgpt-on-wechat/tree/master/plugins/tool\r\n> \r\n> 但是这个感觉需要对现有仓库code大改，使得其能够支持插件模式。\r\n\r\n同感，支持插件生态是GPT对话系统的趋势",
          "created_at": "2023-04-13T17:56:22Z"
        },
        {
          "author": "InitialXKO",
          "body": "不如参考这个\r\nhttps://huggingface.co/spaces/JavaFXpert/Chat-GPT-LangChain\r\n其实只要from langchain.agents import load_tools就可以调用Wolfram|Alpha",
          "created_at": "2023-04-23T04:32:28Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "现在加入啦",
          "created_at": "2023-05-18T13:31:07Z"
        }
      ]
    },
    {
      "issue_number": 759,
      "title": "[功能请求]: 申请增加starcoder支持！",
      "body": "### 相关问题\n\n申请增加starcoder支持！\n\n### 可能的解决办法\n\n申请增加starcoder支持！\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "acbogeh",
      "author_type": "User",
      "created_at": "2023-05-17T10:33:33Z",
      "updated_at": "2023-05-17T10:53:06Z",
      "closed_at": null,
      "labels": [
        "feature request",
        "🤖 model"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/759/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/759",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/759",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:03.371651",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "好！",
          "created_at": "2023-05-17T10:34:13Z"
        },
        {
          "author": "Keldos-Li",
          "body": "model需求越来越多惹🫠",
          "created_at": "2023-05-17T10:53:06Z"
        }
      ]
    },
    {
      "issue_number": 748,
      "title": "[Bug]: 开启在线搜索后输入会报错",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n在开启在线搜索功能后再输入便会报错\n\n### 复现操作\n\n每次启动不开启在线搜索，输入可以正常回复，但开启后就开始报错\n\n### 错误日志\n\n```shell\n2023-05-12 15:05:05,245 [INFO] [base_model.py:286] 输入为：你好？\r\n2023-05-12 15:05:05,693 [ERROR] [utils.py:51]\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\hddpp\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\duckduckgo_search\\utils.py\", line 39, in _get_vqd\r\n    vqd_index_start = resp.content.index(b\"vqd='\") + 5\r\n                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nValueError: subsection not found\r\n2023-05-12 15:05:05,705 [WARNING] [utils.py:59] keywords=你好？. _get_vqd() is None. Refresh SESSION and retry...\r\n2023-05-12 15:05:06,346 [ERROR] [utils.py:51]\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\hddpp\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\duckduckgo_search\\utils.py\", line 39, in _get_vqd\r\n    vqd_index_start = resp.content.index(b\"vqd='\") + 5\r\n                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nValueError: subsection not found\r\n2023-05-12 15:05:06,349 [WARNING] [utils.py:59] keywords=你好？. _get_vqd() is None. Refresh SESSION and retry...\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\hddpp\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\gradio\\routes.py\", line 408, in run_predict\r\n    output = await app.get_blocks().process_api(\r\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\hddpp\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\gradio\\blocks.py\", line 1315, in process_api\r\n    result = await self.call_function(\r\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\hddpp\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\gradio\\blocks.py\", line 1059, in call_function\r\n    prediction = await utils.async_iteration(iterator)\r\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\hddpp\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\gradio\\utils.py\", line 514, in async_iteration\r\n    return await iterator.__anext__()\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\hddpp\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\gradio\\utils.py\", line 507, in __anext__\r\n    return await anyio.to_thread.run_sync(\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\hddpp\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\anyio\\to_thread.py\", line 31, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\hddpp\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 937, in run_sync_in_worker_thread\r\n    return await future\r\n           ^^^^^^^^^^^^\r\n  File \"C:\\Users\\hddpp\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 867, in run\r\n    result = context.run(func, *args)\r\n             ^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\hddpp\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\gradio\\utils.py\", line 490, in run_sync_iterator_async\r\n    return next(iterator)\r\n           ^^^^^^^^^^^^^^\r\n  File \"E:\\OneDrive\\ChatGPT\\ChuanhuChatGPT-main\\ChuanhuChatGPT\\modules\\utils.py\", line 39, in predict\r\n    for i in iter:\r\n  File \"E:\\OneDrive\\ChatGPT\\ChuanhuChatGPT-main\\ChuanhuChatGPT\\modules\\models\\base_model.py\", line 294, in predict\r\n    limited_context, fake_inputs, display_append, inputs, chatbot = self.prepare_inputs(real_inputs=inputs, use_websearch=use_websearch, files=files, reply_language=reply_language, chatbot=chatbot)\r\n                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"E:\\OneDrive\\ChatGPT\\ChuanhuChatGPT-main\\ChuanhuChatGPT\\modules\\models\\base_model.py\", line 254, in prepare_inputs\r\n    for idx, result in enumerate(search_results):\r\n                       ^^^^^^^^^^^^^^^^^^^^^^^^^\r\nTypeError: 'NoneType' object is not iterable\n```\n\n\n### 运行环境\n\n- OS:  Windows11\r\n- Browser: Chrome\r\n- Gradio version: 3.29.0\r\n- Python version: 3.11.3\r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Concinnity-P",
      "author_type": "User",
      "created_at": "2023-05-12T07:14:13Z",
      "updated_at": "2023-05-15T05:15:21Z",
      "closed_at": "2023-05-14T09:02:18Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/748/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/748",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/748",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:03.560648",
      "comments": [
        {
          "author": "oldfishoh",
          "body": "问了ai 说是Duckduckgo的api接口返回值为空  这个接口不能用了？",
          "created_at": "2023-05-13T03:09:37Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "确实存在问题！我修一下",
          "created_at": "2023-05-14T08:01:55Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "问题解决：升级`duckduckgo_search`的版本即可。\r\n\r\n```\r\npip install duckduckgo_search --upgrade\r\n```",
          "created_at": "2023-05-14T09:02:18Z"
        },
        {
          "author": "zodostffaa",
          "body": "duckduckgo_search 2.9.4版本现在又不能用了",
          "created_at": "2023-05-15T03:03:15Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "> duckduckgo_search 2.9.4版本现在又不能用了\r\n\r\n我测试并没有问题。升级到`2.9.5`版本试试？",
          "created_at": "2023-05-15T03:09:47Z"
        }
      ]
    },
    {
      "issue_number": 750,
      "title": "[本地部署]: Something went wrongExpecting value: line 1 column 1 (char 0)",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n![微信截图_20230512230006](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/87004536/f9a0874c-ecfe-470e-9022-b8669deb019e)\r\n![微信截图_20230512230026](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/87004536/42d9623d-1fbb-4431-9c1f-9c3672e81aed)\r\n\n\n### 复现操作\n\npip install -r requirements.txt\r\n\r\n![微信截图_20230512230942](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/87004536/b1787c31-dfae-425a-9e96-1a96a7a5f1e9)\r\n\r\npython ChuanhuChatbot.py\r\n\r\n\n\n### 错误日志\n\n```shell\nNo terminal reported an error\n```\n\n\n### 运行环境\n\n```markdown\n- OS: win10\r\n- Browser: chrome\r\n- Gradio version: 3.28.0\r\n- Python version: 3.9\n```\n\n\n### 补充说明\n\nno",
      "state": "closed",
      "author": "z-x-x136",
      "author_type": "User",
      "created_at": "2023-05-12T15:11:12Z",
      "updated_at": "2023-05-15T03:16:25Z",
      "closed_at": "2023-05-15T03:16:25Z",
      "labels": [
        "duplicate",
        "question",
        "localhost deployment"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/750/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/750",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/750",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:03.739159",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "<img width=\"1040\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/23137268/dd99c921-8212-43f3-8aa3-76b02b50d988\">\r\n\r\n-----\r\n\r\n🤧看在issue填写比较规范的份上，还是回复一下这个issue…… 一般来说这都是您的代理软件开启了系统代理导致的问题……请关闭系统代理。\r\n\r\n您可以尝试先关闭代理，然后启动程序，然后再开启代理，再与ChatGPT对话。如果按照这个流程没有出现问题，那确实就是您的代理配置问题。",
          "created_at": "2023-05-13T12:31:41Z"
        }
      ]
    },
    {
      "issue_number": 752,
      "title": "是否有api key泄露风险？",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n我是将api key写到config文件里的....然后部署在本地终端使用.....\r\n我是使用账号，账号里就5刀....\r\n原本一直每天的用量也就是0.05刀左右.....\r\n\r\n更新了0507版本之后，3天后，突然之间api用量爆炸，短短6个小时，使用额度全部被用完.....\r\n\r\n我不信邪，又注册了一个试用账户.....还是0507版本，还是3天，api用量爆炸，6个小时，全部额度被用完....\r\n\r\n建议检查一下是否有api key泄露风险.....\n\n### 复现操作\n\n我是将api key写到config文件里的....然后部署在本地终端使用.....\r\n我是使用账号，账号里就5刀....\r\n原本一直每天的用量也就是0.05刀左右.....\r\n\r\n更新了0507版本之后，3天后，突然之间api用量爆炸，短短6个小时，使用额度全部被用完.....\r\n\r\n我不信邪，又注册了一个试用账户.....还是0507版本，还是3天，api用量爆炸，6个小时，全部额度被用完....\r\n\r\n建议检查一下是否有api key泄露风险.....\n\n### 错误日志\n\n```shell\n/\n```\n\n\n### 运行环境\n\nOS: Windows11 22H2\r\nBrowser: Chrome\r\nGradio version: 3.22.1\r\nPython version: 3.11.1\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n/",
      "state": "closed",
      "author": "kiddog99",
      "author_type": "User",
      "created_at": "2023-05-13T13:45:55Z",
      "updated_at": "2023-05-14T13:25:19Z",
      "closed_at": "2023-05-13T14:40:27Z",
      "labels": [
        "invalid",
        "question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 13,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/752/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/752",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/752",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:03.913007",
      "comments": [
        {
          "author": "oldfishoh",
          "body": "检查下自己的代理？",
          "created_at": "2023-05-13T13:54:40Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "看一下OpenAI的API历史？看一下是什么原因导致的？",
          "created_at": "2023-05-13T14:02:53Z"
        },
        {
          "author": "kiddog99",
          "body": "> 看一下OpenAI的API历史？看一下是什么原因导致的？\r\n\r\n查看了，确实是大量的prompt和completion，消耗了大量的token~\r\n从每小时稳定的60~70requests，一直到每小时140requests....然后就消耗完了.....T.T",
          "created_at": "2023-05-13T14:10:23Z"
        },
        {
          "author": "kiddog99",
          "body": "> 检查下自己的代理？\r\n\r\n代理是自建的海外服务器，用V2RAY过去的",
          "created_at": "2023-05-13T14:10:53Z"
        },
        {
          "author": "kiddog99",
          "body": "现在注册一个号是真的难...T.T....伤心啊.....",
          "created_at": "2023-05-13T14:11:14Z"
        }
      ]
    },
    {
      "issue_number": 753,
      "title": "[Bug]: 在线搜索功能报错误",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n<img width=\"894\" alt=\"image\" src=\"https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/26393031/c9702976-fb5f-41fc-8997-877fc69792f2\">\r\n在使用在线搜索功能是报错，提示在文件\"ChuanhuChatGPT/modules/models/base_model.py\"的251行中，尝试对一个值为None的对象进行迭代，造成了类型错误。\n\n### 复现操作\n\n只要选择使用在线搜索就好报错\n\n### 错误日志\n\n```shell\n2023-05-14 12:51:30,364 [INFO] [base_model.py:283] 输入为：JS生成一个唯一ID\r\n2023-05-14 12:51:31,053 [ERROR] [utils.py:51] \r\nTraceback (most recent call last):\r\n  File \"/Users/acme/Desktop/ChuanhuChatGPT/venv/lib/python3.10/site-packages/duckduckgo_search/utils.py\", line 39, in _get_vqd\r\n    vqd_index_start = resp.content.index(b\"vqd='\") + 5\r\nValueError: subsection not found\r\n2023-05-14 12:51:31,056 [WARNING] [utils.py:59] keywords=JS生成一个唯一ID. _get_vqd() is None. Refresh SESSION and retry...\r\n2023-05-14 12:51:31,930 [ERROR] [utils.py:51] \r\nTraceback (most recent call last):\r\n  File \"/Users/acme/Desktop/ChuanhuChatGPT/venv/lib/python3.10/site-packages/duckduckgo_search/utils.py\", line 39, in _get_vqd\r\n    vqd_index_start = resp.content.index(b\"vqd='\") + 5\r\nValueError: subsection not found\r\n2023-05-14 12:51:31,934 [WARNING] [utils.py:59] keywords=JS生成一个唯一ID. _get_vqd() is None. Refresh SESSION and retry...\r\nTraceback (most recent call last):\r\n  File \"/Users/acme/Desktop/ChuanhuChatGPT/venv/lib/python3.10/site-packages/gradio/routes.py\", line 399, in run_predict\r\n    output = await app.get_blocks().process_api(\r\n  File \"/Users/acme/Desktop/ChuanhuChatGPT/venv/lib/python3.10/site-packages/gradio/blocks.py\", line 1299, in process_api\r\n    result = await self.call_function(\r\n  File \"/Users/acme/Desktop/ChuanhuChatGPT/venv/lib/python3.10/site-packages/gradio/blocks.py\", line 1036, in call_function\r\n    prediction = await anyio.to_thread.run_sync(\r\n  File \"/Users/acme/Desktop/ChuanhuChatGPT/venv/lib/python3.10/site-packages/anyio/to_thread.py\", line 31, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n  File \"/Users/acme/Desktop/ChuanhuChatGPT/venv/lib/python3.10/site-packages/anyio/_backends/_asyncio.py\", line 937, in run_sync_in_worker_thread\r\n    return await future\r\n  File \"/Users/acme/Desktop/ChuanhuChatGPT/venv/lib/python3.10/site-packages/anyio/_backends/_asyncio.py\", line 867, in run\r\n    result = context.run(func, *args)\r\n  File \"/Users/acme/Desktop/ChuanhuChatGPT/venv/lib/python3.10/site-packages/gradio/utils.py\", line 488, in async_iteration\r\n    return next(iterator)\r\n  File \"/Users/acme/Desktop/ChuanhuChatGPT/modules/utils.py\", line 39, in predict\r\n    for i in iter:\r\n  File \"/Users/acme/Desktop/ChuanhuChatGPT/modules/models/base_model.py\", line 291, in predict\r\n    limited_context, fake_inputs, display_append, inputs, chatbot = self.prepare_inputs(real_inputs=inputs, use_websearch=use_websearch, files=files, reply_language=reply_language, chatbot=chatbot)\r\n  File \"/Users/acme/Desktop/ChuanhuChatGPT/modules/models/base_model.py\", line 251, in prepare_inputs\r\n    for idx, result in enumerate(search_results):\r\nTypeError: 'NoneType' object is not iterable\n```\n\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "a327958099",
      "author_type": "User",
      "created_at": "2023-05-14T04:52:42Z",
      "updated_at": "2023-05-14T09:02:53Z",
      "closed_at": "2023-05-14T09:02:52Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/753/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/753",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/753",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:04.105016",
      "comments": [
        {
          "author": "oldfishoh",
          "body": "昨天有人提过了 #748  \n问了ai 说是Duckduckgo的api接口返回值为空 \n",
          "created_at": "2023-05-14T05:54:58Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/748#issuecomment-1546847212\r\n\r\n升级duckduckgo_search的版本就行了",
          "created_at": "2023-05-14T09:02:52Z"
        }
      ]
    },
    {
      "issue_number": 751,
      "title": "[Bug]: 已经解决 索引构建成功后提问时传入了一个未定义的参数",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\nTypeError: BaseGPTIndexQuery.__init__() got an unexpected keyword argument 'response_synthesizer'\r\n这个错误通常是因为您在调用 BaseGPTIndexQuery 的构造函数时，传入了一个名为 response_synthesizer 的参数，但是这个参数在 BaseGPTIndexQuery 的构造函数中并不存在。\r\n另外\n\n### 复现操作\n\n1.正常完成部署\r\n2.文件（docx）成功构建索引\r\n3.构建索引成功后提问报错\r\n![Snipaste_2023-05-13_11-16-43](https://github.com/GaiZhenbiao/ChuanhuChatGPT/assets/119662659/bd5db7bb-4487-49db-bed9-4d46eff0c902)\r\n\n\n### 错误日志\n\n```shell\nTraceback (most recent call last):\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\gradio\\routes.py\", line 399, in run_predict\r\n    output = await app.get_blocks().process_api(\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\gradio\\blocks.py\", line 1299, in process_api\r\n    result = await self.call_function(\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\gradio\\blocks.py\", line 1036, in call_function\r\n    prediction = await anyio.to_thread.run_sync(\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\anyio\\to_thread.py\", line 31, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 937, in run_sync_in_worker_thread\r\n    return await future\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 867, in run\r\n    result = context.run(func, *args)\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\gradio\\utils.py\", line 488, in async_iteration\r\n    return next(iterator)\r\n  File \"C:\\Users\\Administrator\\Desktop\\chat\\modules\\utils.py\", line 39, in predict\r\n    for i in iter:\r\n  File \"C:\\Users\\Administrator\\Desktop\\chat\\modules\\models\\base_model.py\", line 294, in predict\r\n    limited_context, fake_inputs, display_append, inputs, chatbot = self.prepare_inputs(real_inputs=inputs, use_websearch=use_websearch, files=files, reply_language=reply_language, chatbot=chatbot)\r\n  File \"C:\\Users\\Administrator\\Desktop\\chat\\modules\\models\\base_model.py\", line 230, in prepare_inputs\r\n    query_object = GPTVectorStoreIndexQuery(\r\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\llama_index\\indices\\vector_store\\base_query.py\", line 42, in __init__\r\n    super().__init__(\r\nTypeError: BaseGPTIndexQuery.__init__() got an unexpected keyword argument 'response_synthesizer'\n```\n\n\n### 运行环境\n\n- OS: windows server 2022, centos7.6\r\n- Browser: Edge\r\n- Gradio version: 3.28.0\r\n- Python version: 3.10.10\r\n- llama-index :0.5.13\r\n- langcha: 0.0.142\r\n\r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "oldfishoh",
      "author_type": "User",
      "created_at": "2023-05-13T03:28:51Z",
      "updated_at": "2023-05-14T08:49:09Z",
      "closed_at": "2023-05-14T08:49:09Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/751/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/751",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/751",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:04.293173",
      "comments": []
    },
    {
      "issue_number": 741,
      "title": "[本地部署]: 获取API使用情况失败",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n<img width=\"892\" alt=\"image\" src=\"https://user-images.githubusercontent.com/26393031/237019191-a728cdf1-eea7-4142-9386-b137af74037f.png\">\r\n\n\n### 复现操作\n\n只要多问几次对话就会出现这个报错\n\n### 错误日志\n\n```shell\n2023-05-09 14:58:59,415 [ERROR] [models.py:91] 获取API使用情况失败:HTTPSConnectionPool(host='api.openai.com', port=443): Max retries exceeded with url: /dashboard/billing/usage?start_date=2023-05-01&end_date=2023-05-31 (Caused by SSLError(SSLEOFError(8, 'EOF occurred in violation of protocol (_ssl.c:997)')))\r\n2023-05-09 14:58:59,478 [INFO] [base_model.py:347] 回答为：☹️发生了错误：获取对话时发生错误，请查看后台日志\r\n2023-05-09 14:59:15,354 [INFO] [base_model.py:283] 输入为：curl error 60 while downloading https://asset-packagist.org/packages.json:   \r\n  SSL certificate problem: certificate has expired   这个错误是什么原因\r\n2023-05-09 14:59:15,462 [ERROR] [models.py:91] 获取API使用情况失败:HTTPSConnectionPool(host='api.openai.com', port=443): Max retries exceeded with url: /dashboard/billing/usage?start_date=2023-05-01&end_date=2023-05-31 (Caused by SSLError(SSLEOFError(8, 'EOF occurred in violation of protocol (_ssl.c:997)')))\r\n2023-05-09 14:59:15,545 [INFO] [base_model.py:347] 回答为：☹️发生了错误：获取对话时发生错误，请查看后台日志\n```\n\n\n### 运行环境\n\n```markdown\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version:\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "a327958099",
      "author_type": "User",
      "created_at": "2023-05-09T07:04:56Z",
      "updated_at": "2023-05-14T04:59:06Z",
      "closed_at": "2023-05-14T04:59:06Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/741/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/741",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/741",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:04.293198",
      "comments": []
    },
    {
      "issue_number": 732,
      "title": "[功能请求]: 希望能增加一键复制回答的功能，官网现在都已经有这个功能了",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n就做成像官方的那样就行\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "sscc9",
      "author_type": "User",
      "created_at": "2023-05-04T08:55:27Z",
      "updated_at": "2023-05-13T13:11:14Z",
      "closed_at": "2023-05-04T08:56:50Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/732/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/732",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/732",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:04.293208",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "已经有了呀，更新到最新版吧。",
          "created_at": "2023-05-04T08:56:50Z"
        },
        {
          "author": "sscc9",
          "body": "> 已经有了呀，更新到最新版吧。\r\n\r\n嗯，我用了最新版，确实有了，不过感觉复制按钮是在顶上不太方便，能移到底下就好了",
          "created_at": "2023-05-04T13:30:56Z"
        },
        {
          "author": "Keldos-Li",
          "body": "笑死了，我一开始做的就是在底下，但是为了方便切换md渲染和源输出显示时不跳来跳去时改到顶上了。",
          "created_at": "2023-05-04T13:34:04Z"
        },
        {
          "author": "Keldos-Li",
          "body": "1. 我一开始说的 _跳来跳去_ 是指，切换渲染显示时对话气泡高度会不一样，如果放在底下按钮也会根据气泡高度逃走\\_(:з」∠)\\_\r\n2. 刚把这几个按钮又改回到底下了\r\n3. 我也想做对话生成完再显示按钮……但做不到QAQ，是我太菜了😢😢😢",
          "created_at": "2023-05-04T14:01:32Z"
        },
        {
          "author": "sscc9",
          "body": "> 1. 我一开始说的 _跳来跳去_ 是指，切换渲染显示时对话气泡高度会不一样，如果放在底下按钮也会根据气泡高度逃走_(:з」∠)_\r\n> 2. 刚把这几个按钮又改回到底下了\r\n> 3. 我也想做对话生成完再显示按钮……但做不到QAQ，是我太菜了😢😢😢\r\n\r\n你们已经很厉害了，川虎gpt很好用",
          "created_at": "2023-05-04T14:34:17Z"
        }
      ]
    },
    {
      "issue_number": 746,
      "title": "[其他]: Hugging Face 中复制空间报错",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 错误描述\n\nHugging Face 中复制空间报错\r\n\n\n### 复现操作\n\n点击“Duplicate this Space‘之后运行报错\n\n### 错误日志\n\n```shell\n===== Build Queued at 2023-05-12 04:41:02 / Commit SHA: 7616055 =====\r\n\r\n--> FROM docker.io/library/python:3.8.9@sha256:49d05fff9cb3b185b15ffd92d8e6bd61c20aa916133dca2e3dbe0215270faf53\r\nDONE 0.0s\r\n\r\n--> RUN pip install --no-cache-dir pip==22.3.1 &&     pip install --no-cache-dir         datasets         \"huggingface-hub>=0.12.1\" \"protobuf<4\" \"click<8.1\"\r\nCACHED\r\n\r\n--> RUN sed -i 's http://deb.debian.org http://cdn-aws.deb.debian.org g' /etc/apt/sources.list && sed -i 's http://archive.ubuntu.com http://us-east-1.ec2.archive.ubuntu.com g' /etc/apt/sources.list && sed -i '/security/d' /etc/apt/sources.list && apt-get update && apt-get install -y \tgit \tgit-lfs \tffmpeg \tlibsm6 \tlibxext6 \tcmake \tlibgl1-mesa-glx \t&& rm -rf /var/lib/apt/lists/* \t&& git lfs install\r\nCACHED\r\n\r\n--> RUN pip install --no-cache-dir         gradio==3.25.0\r\nCACHED\r\n\r\n--> RUN --mount=target=pre-requirements.txt,source=pre-requirements.txt \tpip install --no-cache-dir -r pre-requirements.txt\r\nCACHED\r\n\r\n--> COPY --link --chown=1000 ./ /home/user/app\r\nCACHED\r\n\r\n--> COPY --link --chown=1000 --from=lfs /app /home/user/app\r\nCACHED\r\n\r\n--> RUN --mount=target=requirements.txt,source=requirements.txt \tpip install --no-cache-dir -r requirements.txt\r\nCACHED\r\n\r\n--> WORKDIR /home/user/app\r\nCACHED\r\n\r\n--> RUN useradd -m -u 1000 user\r\nCACHED\r\n\r\n--> RUN --mount=target=/root/packages.txt,source=packages.txt \tsed -i 's http://deb.debian.org http://cdn-aws.deb.debian.org g' /etc/apt/sources.list && sed -i 's http://archive.ubuntu.com http://us-east-1.ec2.archive.ubuntu.com g' /etc/apt/sources.list && sed -i '/security/d' /etc/apt/sources.list && apt-get update &&     xargs -r -a /root/packages.txt apt-get install -y     && rm -rf /var/lib/apt/lists/*\r\nCACHED\r\n\r\n--> Pushing image\r\nDONE 1.0s\r\n\r\n--> Exporting cache\r\nDONE 1.1s\r\n\r\n\r\n\r\n===== Application Startup at 2023-05-12 04:41:12 =====\r\n\r\nTraceback (most recent call last):\r\n  File \"ChuanhuChatbot.py\", line 12, in <module>\r\n    from modules.overwrites import *\r\n  File \"/home/user/app/modules/overwrites.py\", line 4, in <module>\r\n    from llama_index import Prompt\r\n  File \"/home/user/.local/lib/python3.8/site-packages/llama_index/__init__.py\", line 18, in <module>\r\n    from llama_index.indices.common.struct_store.base import SQLDocumentContextBuilder\r\n  File \"/home/user/.local/lib/python3.8/site-packages/llama_index/indices/__init__.py\", line 4, in <module>\r\n    from llama_index.indices.keyword_table.base import GPTKeywordTableIndex\r\n  File \"/home/user/.local/lib/python3.8/site-packages/llama_index/indices/keyword_table/__init__.py\", line 4, in <module>\r\n    from llama_index.indices.keyword_table.base import GPTKeywordTableIndex\r\n  File \"/home/user/.local/lib/python3.8/site-packages/llama_index/indices/keyword_table/base.py\", line 17, in <module>\r\n    from llama_index.indices.base import BaseGPTIndex, QueryMap\r\n  File \"/home/user/.local/lib/python3.8/site-packages/llama_index/indices/base.py\", line 11, in <module>\r\n    from llama_index.indices.query.base import BaseGPTIndexQuery\r\n  File \"/home/user/.local/lib/python3.8/site-packages/llama_index/indices/query/base.py\", line 21, in <module>\r\n    from llama_index.indices.postprocessor.node import (\r\n  File \"/home/user/.local/lib/python3.8/site-packages/llama_index/indices/postprocessor/__init__.py\", line 5, in <module>\r\n    from llama_index.indices.postprocessor.node import (\r\n  File \"/home/user/.local/lib/python3.8/site-packages/llama_index/indices/postprocessor/node.py\", line 11, in <module>\r\n    from llama_index.indices.service_context import ServiceContext\r\n  File \"/home/user/.local/lib/python3.8/site-packages/llama_index/indices/service_context.py\", line 6, in <module>\r\n    from llama_index.indices.prompt_helper import PromptHelper\r\n  File \"/home/user/.local/lib/python3.8/site-packages/llama_index/indices/prompt_helper.py\", line 12, in <module>\r\n    from llama_index.langchain_helpers.chain_wrapper import LLMPredictor\r\n  File \"/home/user/.local/lib/python3.8/site-packages/llama_index/langchain_helpers/chain_wrapper.py\", line 6, in <module>\r\n    from llama_index.llm_predictor.base import (  # noqa: F401\r\n  File \"/home/user/.local/lib/python3.8/site-packages/llama_index/llm_predictor/__init__.py\", line 4, in <module>\r\n    from llama_index.llm_predictor.base import LLMPredictor\r\n  File \"/home/user/.local/lib/python3.8/site-packages/llama_index/llm_predictor/base.py\", line 12, in <module>\r\n    from langchain.schema import BaseLanguageModel\r\nImportError: cannot import name 'BaseLanguageModel' from 'langchain.schema' (/home/user/.local/lib/python3.8/site-packages/langchain/schema.py)\n```\n\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n(或您的其他运行环境信息)\r\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "mctds",
      "author_type": "User",
      "created_at": "2023-05-12T04:44:37Z",
      "updated_at": "2023-05-12T11:58:31Z",
      "closed_at": "2023-05-12T11:58:31Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/746/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/746",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/746",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:04.480486",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "问题已经解决。原因是新版langchain引入了一个breaking change。",
          "created_at": "2023-05-12T11:58:29Z"
        }
      ]
    },
    {
      "issue_number": 749,
      "title": "[功能请求]: 建议增加一个拖动组合提示词模块的功能",
      "body": "### 相关问题\n\n无关\n\n### 可能的解决办法\n\n实现的样子大概是：\r\n例如\r\n创建一个可拖拽的【角色】提示：你是xx\r\n创建一个可拖拽的【任务】提示：翻译\r\n创建一个可拖拽的【模板1】提示：根据【模板1】\r\n创建一个可拖拽的【内容】提示：【xxxxx】\r\n拖拽组合：\r\n【角色】，请【任务】【内容】，并以【模板1】的格式输出。\r\n点击发送。\r\n这将大大提高提示词组合使用的效率。\r\n\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n目前bing已经基本开放了提示词工程，经过测试，这种方式是可行的。",
      "state": "open",
      "author": "judgementc",
      "author_type": "User",
      "created_at": "2023-05-12T07:25:22Z",
      "updated_at": "2023-05-12T07:25:22Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/749/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/749",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/749",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:04.643435",
      "comments": []
    },
    {
      "issue_number": 747,
      "title": "[Bug]: 引用问题 ",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n引用错误\n\n### 复现操作\n\nchanhuchatbot.py 第13行 \r\n\r\nfrom modules.models.models import get_model\r\n应为\r\nfrom modules.models import get_model\r\n\n\n### 错误日志\n\n```shell\nTraceback (most recent call last):\r\n  File \"/Users/laoyu/Documents/chat/ChuanhuChatbot.py\", line 13, in <module>\r\n    from modules.models.models import get_model\r\nModuleNotFoundError: No module named 'modules.models.models'; 'modules.models' is not a package\n```\n\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "oldfishoh",
      "author_type": "User",
      "created_at": "2023-05-12T06:50:45Z",
      "updated_at": "2023-05-12T07:06:06Z",
      "closed_at": "2023-05-12T07:06:06Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/747/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/747",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/747",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:04.643456",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "参考 [常见问题这部分](https://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98#modulenotfounderror-no-module-named-modulesmodule-name-modules-is-not-a-package)，在modules/models/文件夹下新建__init__.py空文件。",
          "created_at": "2023-05-12T07:05:50Z"
        }
      ]
    },
    {
      "issue_number": 745,
      "title": "[本地部署]: 怎么自定义模型路径？",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n怎么自定义模型路径？\n\n### 复现操作\n\n1. 正常完成本地部署\r\n2. 怎么自定义模型路径？\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n```markdown\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version:\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "ReefJones",
      "author_type": "User",
      "created_at": "2023-05-12T03:34:03Z",
      "updated_at": "2023-05-12T05:51:39Z",
      "closed_at": "2023-05-12T05:51:39Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/745/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/745",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/745",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:09.808339",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "用软链接",
          "created_at": "2023-05-12T05:51:39Z"
        }
      ]
    },
    {
      "issue_number": 736,
      "title": "[功能请求]: 接入浪潮的源1.0 API",
      "body": "### 相关问题\n\n接入国产LLM源1.0 API\r\n\n\n### 可能的解决办法\n\n愿意协助开发并在准备PR\r\n1. 在API-KEY部分填入鉴权信息（用户名||手机号）\r\n2. 在模型选择中加入“yuan-1.0-base_10B/yuan-1.0-translate/yuan-1.0-dialog/yuan-1.0-rhythm_poems/”\r\n3. 将sys prompt作为example（few shot）提供给api\r\n4. 使用inputs作为上文记忆发送给api\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\nhttps://air.inspur.com\r\n\r\n源1.0是浪潮信息发布的人工智能巨量模型，单体模型参数量达到2457亿，超越美国OpenAI组织研发的GPT-3模型，成为全球最大规模的中文语料AI巨量模型。作为通用NLP预训练模型，源1.0能够适应多种类的AI任务需求，降低针对不同应用场景的语言模型适配难度，并提升小样本学习与零样本学习场景的模型泛化应用能力。\r\n\r\n开发者基于源1.0做出的有趣应用：\r\n1.【用B站评论训练出的AI和杀猪盘聊天，骗子竟给我转钱【图灵计划05】-哔哩哔哩】 https://b23.tv/dNm92h9\r\n2.剧本杀\r\nhttps://github.com/bigbrother666sh/shezhangbujianle",
      "state": "closed",
      "author": "noahzark",
      "author_type": "User",
      "created_at": "2023-05-08T02:59:19Z",
      "updated_at": "2023-05-11T14:17:59Z",
      "closed_at": "2023-05-11T14:17:59Z",
      "labels": [
        "feature request",
        "🤖 model"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/736/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/736",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/736",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:09.961106",
      "comments": []
    },
    {
      "issue_number": 744,
      "title": "[功能请求]: 用户登录持久化",
      "body": "### 相关问题\n\n配置了自动升级脚本，每天定时运行二次，每次运行后，已登录的用户就得重新登录\n\n### 可能的解决办法\n\n将token之类的存储到文件里，启动的时候读取文件，有内容就加载\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "MSG-J",
      "author_type": "User",
      "created_at": "2023-05-11T07:26:47Z",
      "updated_at": "2023-05-11T07:26:47Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/744/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/744",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/744",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:09.961128",
      "comments": []
    },
    {
      "issue_number": 503,
      "title": "[功能请求]: 有考虑加入socks5的代理支持吗?",
      "body": "### 相关问题\n\n目前只有http，与https的代理方式\n\n### 可能的解决办法\n\npip install PySocks\r\nimport socks\r\nimport socket\r\n\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "s7word",
      "author_type": "User",
      "created_at": "2023-04-01T15:18:41Z",
      "updated_at": "2023-05-10T09:42:20Z",
      "closed_at": "2023-05-10T09:42:20Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 9,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/503/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/503",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/503",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:09.961135",
      "comments": [
        {
          "author": "ZACKLZ",
          "body": "求教一下，docker如何添加代理配置",
          "created_at": "2023-04-04T11:12:38Z"
        },
        {
          "author": "s7word",
          "body": "我只知道，docker\r\n可以全局代理出去，也不知道，如何指定单个镜像走代理，该项目的Python环境没有socks5的支持，不然镜像内部就可以直接走代理，应该重新引入支持，再次封装就可以了。😊😊😊\r\n\r\n小刘忙 ***@***.***> 于2023年4月4日周二 19:12写道：\r\n\r\n> 求教一下，docker如何添加代理配置\r\n>\r\n> —\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/503#issuecomment-",
          "created_at": "2023-04-06T03:23:50Z"
        },
        {
          "author": "ZACKLZ",
          "body": "我一直在等待作者能够支持socks5 TAT",
          "created_at": "2023-04-06T03:41:20Z"
        },
        {
          "author": "weixhishu",
          "body": "是不是socket还是http不是看传输数据用的是什么协议么🧐api请求的就是http",
          "created_at": "2023-04-07T21:54:10Z"
        },
        {
          "author": "MZhao-ouo",
          "body": "> 我一直在等待作者能够支持socks5 TAT\r\n\r\n支持socks5有什么优点吗？一般代理软件都有提供socks/http/https代理的吧",
          "created_at": "2023-04-12T03:17:10Z"
        }
      ]
    },
    {
      "issue_number": 728,
      "title": "[功能请求]: 加入和Waifu对话的功能",
      "body": "### 相关问题\n\n- 加入waifu的PR：\r\nhttps://github.com/GaiZhenbiao/ChuanhuChatGPT/pull/727\r\n\r\n- 效果：\r\n![image](https://user-images.githubusercontent.com/96192199/235742282-2d982636-de05-41e6-9e74-14494410769c.png)\r\n\r\n- 更进一步的功能请求：\r\n有没有可能把对话通过waifu聊天框显示出来？\r\n\n\n### 可能的解决办法\n\n也许能通过调用一些javascript函数实现交互？\n\n### 帮助开发\n\n- [x] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "binary-husky",
      "author_type": "User",
      "created_at": "2023-05-02T17:38:43Z",
      "updated_at": "2023-05-10T09:35:43Z",
      "closed_at": "2023-05-10T09:35:42Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/728/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/728",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/728",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:10.245156",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "> 有没有可能把对话通过waifu聊天框显示出来？\r\n\r\n我大致想了一下，应该确实是可以的。\r\n\r\n但是我们不加live2d，这个也就不做了 :-)\r\n\r\n如果有空的话我给你们的学术版看一看。（天哪你们真的把整个库放进去了，真的……）",
          "created_at": "2023-05-10T09:35:42Z"
        }
      ]
    },
    {
      "issue_number": 731,
      "title": "[功能请求]: 提供服务相关的fastapi类似的",
      "body": "### 相关问题\n\n提供服务相关的fastapi类似的\n\n### 可能的解决办法\n\n用接口的方式获取返回的数据\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "kryst5l",
      "author_type": "User",
      "created_at": "2023-05-04T08:25:55Z",
      "updated_at": "2023-05-10T09:30:16Z",
      "closed_at": "2023-05-10T09:30:16Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/731/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/731",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/731",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:10.406294",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "- Duplicate with #696",
          "created_at": "2023-05-10T09:30:16Z"
        }
      ]
    },
    {
      "issue_number": 717,
      "title": "[功能请求]:请求对微软云openai能力原生支持 ",
      "body": "### 相关问题\n\n希望可以原生支持微软云提供的openai服务，这个国内可以不用翻墙就可以调用。我不太懂代码自己改了改，基本能用就是在线搜索用不了，尽力了。\r\n\n\n### 可能的解决办法\n\n希望作者可以原生支持下切换到微软云，gpt-3.5和embedding都有提供，万分感谢。\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "JayZhao315",
      "author_type": "User",
      "created_at": "2023-04-28T14:09:08Z",
      "updated_at": "2023-05-10T09:28:41Z",
      "closed_at": "2023-05-10T09:28:40Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/717/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/717",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/717",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:10.557260",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "原issue没看懂，现在懂了……如有需要请移步以下issue。\r\n\r\n- Duplicate with #740",
          "created_at": "2023-05-10T09:28:40Z"
        }
      ]
    },
    {
      "issue_number": 711,
      "title": "请问，在wsl ubuntu里部署并安装了Linux的cuda后，加载模型仍然是用的CPU处理，该如何解决",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n请问，在wsl ubuntu里部署并安装了Linux的cuda后，加载模型仍然是用的CPU处理，该如何解决\n\n### 复现操作\n\n请问，在wsl ubuntu里部署并安装了Linux的cuda后，加载模型仍然是用的CPU处理，该如何解决\n\n### 错误日志\n\n```shell\nTo create a public link, set `share=True` in `launch()`.\r\n2023-04-26 16:44:44,703 [INFO] [models.py:548] 正在加载OpenAI模型: gpt-3.5-turbo\r\n2023-04-26 16:44:44,703 [INFO] [models.py:588] Model is set to:  gpt-3.5-turbo\r\n2023-04-26 16:44:48,129 [INFO] [models.py:557] 正在加载ChatGLM模型: chatglm-6b-int8\r\nExplicitly passing a `revision` is encouraged when loading a model with custom code to ensure no malicious code has been contributed in a newer revision.\r\nExplicitly passing a `revision` is encouraged when loading a configuration with custom code to ensure no malicious code has been contributed in a newer revision.\r\nExplicitly passing a `revision` is encouraged when loading a model with custom code to ensure no malicious code has been contributed in a newer revision.\r\n--- Logging error ---\r\nTraceback (most recent call last):\r\n  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm-6b-int8/quantization.py\", line 18, in <module>\r\n    from cpm_kernels.kernels.base import LazyKernelCModule, KernelFunction, round_up\r\n  File \"/home/miniconda3/envs/ChuanhuChat3/lib/python3.10/site-packages/cpm_kernels/__init__.py\", line 2, in <module>\r\n    from .kernels import *\r\n  File \"/home/miniconda3/envs/ChuanhuChat3/lib/python3.10/site-packages/cpm_kernels/kernels/__init__.py\", line 1, in <module>\r\n    from .embedding import embedding_forward, embedding_backward_stage1, embedding_backward_stage2, embedding_step\r\n  File \"/home/miniconda3/envs/ChuanhuChat3/lib/python3.10/site-packages/cpm_kernels/kernels/embedding.py\", line 1, in <module>\r\n    from .base import Kernel, DevicePointer, CUDAStream, round_up\r\n  File \"/home/miniconda3/envs/ChuanhuChat3/lib/python3.10/site-packages/cpm_kernels/kernels/base.py\", line 5, in <module>\r\n    from ..device import Device\r\n  File \"/home/miniconda3/envs/ChuanhuChat3/lib/python3.10/site-packages/cpm_kernels/device/__init__.py\", line 126, in <module>\r\n    _Device(i) for i in range(cudart.cudaGetDeviceCount())\r\n  File \"/home/miniconda3/envs/ChuanhuChat3/lib/python3.10/site-packages/cpm_kernels/library/base.py\", line 94, in wrapper\r\n    return f(*args, **kwargs)\r\n  File \"/home/miniconda3/envs/ChuanhuChat3/lib/python3.10/site-packages/cpm_kernels/library/cudart.py\", line 351, in cudaGetDeviceCount\r\n    checkCUDAStatus(cuda.cudaGetDeviceCount(ctypes.byref(count)))\r\n  File \"/home/miniconda3/envs/ChuanhuChat3/lib/python3.10/site-packages/cpm_kernels/library/cudart.py\", line 327, in checkCUDAStatus\r\n    raise RuntimeError(\"CUDA Runtime Error: %s\" % cudaGetErrorString(error))\r\nRuntimeError: CUDA Runtime Error: CUDA driver version is insufficient for CUDA runtime version\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/miniconda3/envs/ChuanhuChat3/lib/python3.10/logging/__init__.py\", line 1100, in emit\r\n    msg = self.format(record)\r\n  File \"/home/miniconda3/envs/ChuanhuChat3/lib/python3.10/logging/__init__.py\", line 943, in format\r\n    return fmt.format(record)\r\n  File \"/home/miniconda3/envs/ChuanhuChat3/lib/python3.10/logging/__init__.py\", line 678, in format\r\n    record.message = record.getMessage()\r\n  File \"/home/miniconda3/envs/ChuanhuChat3/lib/python3.10/logging/__init__.py\", line 368, in getMessage\r\n    msg = msg % self.args\r\nTypeError: not all arguments converted during string formatting\r\nCall stack:\r\n  File \"/home/miniconda3/envs/ChuanhuChat3/lib/python3.10/threading.py\", line 973, in _bootstrap\r\n    self._bootstrap_inner()\r\n  File \"/home/miniconda3/envs/ChuanhuChat3/lib/python3.10/threading.py\", line 1016, in _bootstrap_inner\r\n    self.run()\r\n  File \"/home/miniconda3/envs/ChuanhuChat3/lib/python3.10/site-packages/anyio/_backends/_asyncio.py\", line 867, in run\r\n    result = context.run(func, *args)\r\n  File \"/home/maddax/ChuanhuChatGPT3/ChuanhuChatGPT/modules/models/models.py\", line 558, in get_model\r\n    model = ChatGLM_Client(model_name)\r\n  File \"/home/maddax/ChuanhuChatGPT3/ChuanhuChatGPT/modules/models/models.py\", line 241, in __init__\r\n    model = AutoModel.from_pretrained(\r\n  File \"/home/miniconda3/envs/ChuanhuChat3/lib/python3.10/site-packages/transformers/models/auto/auto_factory.py\", line 466, in from_pretrained\r\n    return model_class.from_pretrained(\r\n  File \"/home/miniconda3/envs/ChuanhuChat3/lib/python3.10/site-packages/transformers/modeling_utils.py\", line 2546, in from_pretrained\r\n    model = cls(config, *model_args, **model_kwargs)\r\n  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm-6b-int8/modeling_chatglm.py\", line 1062, in __init__\r\n    self.quantize(self.config.quantization_bit, self.config.quantization_embeddings, use_quantization_cache=True, empty_init=True)\r\n  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm-6b-int8/modeling_chatglm.py\", line 1425, in quantize\r\n    from .quantization import quantize, QuantizedEmbedding, QuantizedLinear, load_cpu_kernel\r\n  File \"<frozen importlib._bootstrap>\", line 1027, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 1006, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 688, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 883, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 241, in _call_with_frames_removed\r\n  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm-6b-int8/quantization.py\", line 43, in <module>\r\n    logger.warning(\"Failed to load cpm_kernels:\", exception)\r\nMessage: 'Failed to load cpm_kernels:'\r\nArguments: (RuntimeError('CUDA Runtime Error: CUDA driver version is insufficient for CUDA runtime version'),)\r\nNo compiled kernel found.\r\nCompiling kernels : /root/.cache/huggingface/modules/transformers_modules/chatglm-6b-int8/quantization_kernels_parallel.c\r\nCompiling gcc -O3 -fPIC -pthread -fopenmp -std=c99 /root/.cache/huggingface/modules/transformers_modules/chatglm-6b-int8/quantization_kernels_parallel.c -shared -o /root/.cache/huggingface/modules/transformers_modules/chatglm-6b-int8/quantization_kernels_parallel.so\r\nLoad kernel : /root/.cache/huggingface/modules/transformers_modules/chatglm-6b-int8/quantization_kernels_parallel.so\r\nSetting CPU quantization kernel threads to 3\r\nParallel kernel is not recommended when parallel num < 4.\r\nUsing quantization cache\r\nApplying quantization to glm layers\r\n2023-04-26 16:45:11,092 [INFO] [models.py:254] GPU is not available, using CPU\r\n2023-04-26 16:45:12,657 [INFO] [models.py:588] Model is set to:  chatglm-6b-int8\n```\n\n\n### 运行环境\n\n```markdown\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version:\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Maddaxman",
      "author_type": "User",
      "created_at": "2023-04-26T08:50:04Z",
      "updated_at": "2023-05-10T09:26:35Z",
      "closed_at": "2023-05-10T09:26:35Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/711/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/711",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/711",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:10.732854",
      "comments": [
        {
          "author": "oiuv",
          "body": "还是别用wsl吧，坑爹没好处，第一，容易出你遇到的不用cuda的问题，第二，wsl不能完全的利用内存，基本默认只用系统一本的内存，这样又不用cuda，又不能完全利用内存，用wsl就没必要了，直接用windows启用最方便。",
          "created_at": "2023-04-27T02:33:07Z"
        },
        {
          "author": "Keldos-Li",
          "body": "CUDA Runtime Error: CUDA driver version is insufficient for CUDA runtime version：\r\nCUDA Toolkit安装的版本太高了，和你的GPU驱动不匹配。百度一下应该能解决吧。\r\n\r\n-----\r\n\r\n关于用不用WSL……真的能直接在Windows上装上吗？应该pip install到DeepSpeed大概率就失败了。",
          "created_at": "2023-04-27T04:38:30Z"
        },
        {
          "author": "Keldos-Li",
          "body": "如有更多问题请移步Discussion提问",
          "created_at": "2023-05-10T09:26:35Z"
        }
      ]
    },
    {
      "issue_number": 538,
      "title": "[功能请求]: 能否针对多用户登录设置单个账户同一时间只允许登录一次，每个账户分别计算每月总使用的token总数？",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n无\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "qhdesnldop474",
      "author_type": "User",
      "created_at": "2023-04-04T04:51:03Z",
      "updated_at": "2023-05-10T09:22:07Z",
      "closed_at": "2023-05-10T09:22:07Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/538/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/538",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/538",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:10.912211",
      "comments": [
        {
          "author": "HsunGong",
          "body": "有兴趣研究不同用户分别统计token数量的问题。\r\n但是gradio的state需要使用global信息才行，在尝试。。",
          "created_at": "2023-04-08T12:31:33Z"
        },
        {
          "author": "Keldos-Li",
          "body": "> 能否针对多用户登录设置单个账户同一时间只允许登录一次\r\n\r\n没有必要，也不现实，我自己就经常多设备用。\r\n\r\n> 每个账户分别计算每月总使用的token总数？\r\n\r\n- Duplicate with #510\r\n\r\n不过也不是很现实……",
          "created_at": "2023-05-10T09:22:07Z"
        }
      ]
    },
    {
      "issue_number": 499,
      "title": "[Bug]: Docker中的空ENV my_api_key覆盖了config.json中的api key",
      "body": "### 这个bug是否已存在现有issue了？\r\n\r\n- [x] 我确认没有已有issue，且已阅读**常见问题**。\r\n\r\n### 错误表现\r\n\r\n我试图去构建不需要去每次填写api key的docker。由于使用需求不能暴露api key到命令行，我试图使用默认被gitignore的config.json来传递api key和proxy设定. 但是由于DockerFile中设置了默认ENV my_api_key empty, 因此在[modules/config.py#L36](https://github.com/GaiZhenbiao/ChuanhuChatGPT/blob/a2436f41a4a9d3f36d96b4ce5ec507d41970776e/modules/config.py#L36) 使用dict.get去获得默认值时，os.environ['my_api_key']为'empty', 覆盖了config.json中给出的值，导致无法正常使用\r\n\r\n### 复现操作\r\n\r\n1. 在根目录下添加config.json，其中填写openai_api_key字段\r\n2. `docker built -t custom_docker .` 构建docker\r\n3. 按照README中方式启动container, 假设其name为chatgpt\r\n4. `docker logs chatgpt`查看错误\r\n\r\n### 错误日志\r\n\r\n```shell\r\nERROR:root:Please give a api key\r\n```\r\n\r\n\r\n### 运行环境\r\n\r\n- OS: Ubuntu 18.04\r\n- Browser: Microsoft Edge\r\n- Gradio version: Docker default\r\n- Python version: Docker default Python 3.9\r\n\r\n\r\n### 帮助解决\r\n\r\n- [x] 我愿意协助解决！\r\n\r\n### 补充说明\r\n\r\n我目前的解决方案：直接将Dockerfile中的ENV my_api_key empty 去掉即可在我的需求下正常运行。但是我不清楚这样做会不会影响到其他使用方式的功能，所以我只在我fork的工程上这样改，没有提PR。\r\n其他方式：直接将[modules/config.py#L36](https://github.com/GaiZhenbiao/ChuanhuChatGPT/blob/a2436f41a4a9d3f36d96b4ce5ec507d41970776e/modules/config.py#L36)改为 \r\n```python\r\nmy_api_key = my_api_key if os.environ.get(\"my_api_key\", \"empty\") == \"empty\" else os.environ[\"my_api_key\"]\r\n```\r\n如果有哪种方式是比较合适的，我可以提交PR",
      "state": "closed",
      "author": "Eralien",
      "author_type": "User",
      "created_at": "2023-04-01T07:42:11Z",
      "updated_at": "2023-05-10T09:13:54Z",
      "closed_at": "2023-05-10T09:13:50Z",
      "labels": [
        "bug",
        "👍 good"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 8,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/499/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/499",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/499",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:11.112874",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "@HsunGong\r\n可能得麻烦您看一下",
          "created_at": "2023-04-01T11:33:30Z"
        },
        {
          "author": "Keldos-Li",
          "body": "突然想到现在那么多地方都设了相关设置，docker json txt的优先级到底该怎么排列QAQ 可能这个得先定下来……？🤔",
          "created_at": "2023-04-01T17:25:31Z"
        },
        {
          "author": "HsunGong",
          "body": "同意 https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/499#issuecomment-1493052055 这个说法\r\n\r\n之前的代码只是为了让config.json的优先级最低，使得版本兼容以前老的设置。\r\n\r\n另外，从常理上讲，环境变量的优先级的确应该比config.json里面更高？欢迎大家讨论。\r\n\r\n---\r\n\r\n当然，如果能去掉环境变量的设置，统统改成读取config.json文件是最好的。\r\n\r\n----\r\n\r\n至于 https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues",
          "created_at": "2023-04-13T17:09:25Z"
        },
        {
          "author": "HsunGong",
          "body": "根据上面的内容，我们应该在wiki里面推荐大家都在config里面设置api-key等相关参数，而不是使用环境变量覆盖。（因而dockerfile里也不必再给出ENV的layer）",
          "created_at": "2023-04-13T17:10:25Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "环境变量我认为有必要保留，在Docker部署和Hugging Face部署时都很有用。在Hugging Face上，只需要添加一个Repo Secret就行了。环境变量的优先级肯定是高于config.json的。",
          "created_at": "2023-04-14T04:20:52Z"
        }
      ]
    },
    {
      "issue_number": 512,
      "title": "[功能请求]: 请求添加支持Bing的模型 ",
      "body": "### 相关问题\n\n请求添加支持Bing的模型  \n\n### 可能的解决办法\n\n例如 在config下添加Token或者cookie  然后就支持选择模型是chatgpt还是bing \n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "yhweb",
      "author_type": "User",
      "created_at": "2023-04-02T14:48:21Z",
      "updated_at": "2023-05-10T08:57:34Z",
      "closed_at": null,
      "labels": [
        "feature request",
        "🤖 model"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/512/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/512",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/512",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:11.308735",
      "comments": [
        {
          "author": "zengbo",
          "body": "希望加上 Sydney 支持：\r\nhttps://github.com/waylaidwanderer/node-chatgpt-api/blob/main/src/BingAIClient.js#L243",
          "created_at": "2023-04-03T06:38:04Z"
        },
        {
          "author": "xingfanxia",
          "body": "> 希望加上 Sydney 支持： [waylaidwanderer/node-chatgpt-api@`main`/src/BingAIClient.js#L243](https://github.com/waylaidwanderer/node-chatgpt-api/blob/main/src/BingAIClient.js?rgh-link-date=2023-04-03T06%3A38%3A04Z#L243)\r\n\r\n这个我用过, sydney的jailbreak很强大",
          "created_at": "2023-04-03T08:00:45Z"
        },
        {
          "author": "BlackSharkJ",
          "body": "可以看看这个[BingLocalhost](https://github.com/gG8Fkpxq/BingLocalhost)",
          "created_at": "2023-04-06T09:28:27Z"
        }
      ]
    },
    {
      "issue_number": 533,
      "title": "[Bug]: API host 不支持 http 协议",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n设置 API host 后，不能正常生成内容，报错如下\r\n```bash\r\n获取API使用情况失败:HTTPSConnectionPool(host='http', port=443): Max retries exceeded with url: //<自定义链接>/v1/chat/completions/dashboard/billing/credit_grants (Caused by NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x133b79410>: Failed to establish a new connection: [Errno 8] nodename nor servname provided, or not known'))\r\n```\r\n\r\n如果去掉 `http://` 只写域名，则默认访问 https\n\n### 复现操作\n\n修改 API host 为 http 代理地址，输出空白，日志如下\r\n```bash\r\nTo create a public link, set `share=True` in `launch()`.\r\n2023-04-03 23:18:06,024 [INFO] [chat_func.py:277] 输入为：hello?\r\n2023-04-03 23:18:06,030 [INFO] [chat_func.py:353] 使用流式传输\r\n2023-04-03 23:18:06,030 [INFO] [chat_func.py:97] 实时回答模式\r\n2023-04-03 23:18:06,195 [INFO] [chat_func.py:120] 输入token计数: 20\r\n2023-04-03 23:18:06,197 [INFO] [chat_func.py:67] 使用自定义API URL: https://<代理url>/v1/chat/completions\r\n2023-04-03 23:18:16,211 [INFO] [chat_func.py:389] 传输完毕。当前token计数为[20]\r\n2023-04-03 23:18:16,211 [INFO] [chat_func.py:391] 回答为：\r\n```\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "RexWzh",
      "author_type": "User",
      "created_at": "2023-04-03T15:22:11Z",
      "updated_at": "2023-05-10T08:57:06Z",
      "closed_at": "2023-05-10T08:57:06Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/533/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/533",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/533",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:11.475549",
      "comments": [
        {
          "author": "doveppp",
          "body": "就是需要自定义的host支持https才行",
          "created_at": "2023-04-11T02:26:21Z"
        },
        {
          "author": "MZhao-ouo",
          "body": "你是自建的api转发吗，可以申请ssl证书搞个https，如果用cloudflare的话默认就是https。",
          "created_at": "2023-04-12T02:56:56Z"
        }
      ]
    },
    {
      "issue_number": 580,
      "title": "[Bug]: 两个小bug与解决方式",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n1.使用总结对话的时候会出现报错异常，报错为TypeError: object of type 'int' has no len()，原因是传入的tokens为数值类型，错误行为chat_func.py文件的247行。将total_token_count 修改为all_token_counts 就正常使用了\r\n\r\n2.IP地址检测，检测网站增加真人认证机制，因此我更换了IP检测源：https://ip.cn/api/index?ip=&type=0 然后空位切割取第一个字符就ok了\n\n### 复现操作\n\n1.使用总结对话的时候会出现报错异常，报错为TypeError: object of type 'int' has no len()，原因是传入的tokens为数值类型，错误行为chat_func.py文件的247行。将total_token_count 修改为all_token_counts 就正常使用了\r\n\r\n2.IP地址检测，检测网站增加真人认证机制，因此我更换了IP检测源：https://ip.cn/api/index?ip=&type=0 然后空位切割取第一个字符就ok了\n\n### 错误日志\n\n```shell\n1. 2023-04-10 16:30:31,020 [INFO] [chat_func.py:275] 输入为：你是谁？我们刚才聊了什么？\r\n2023-04-10 16:30:31,021 [INFO] [chat_func.py:373] 不使用流式传输\r\n2023-04-10 16:30:31,021 [INFO] [chat_func.py:203] 一次性回答模式\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.8/dist-packages/gradio/routes.py\", line 394, in run_predict\r\n    output = await app.get_blocks().process_api(\r\n  File \"/usr/local/lib/python3.8/dist-packages/gradio/blocks.py\", line 1075, in process_api\r\n    result = await self.call_function(\r\n  File \"/usr/local/lib/python3.8/dist-packages/gradio/blocks.py\", line 898, in call_function\r\n    prediction = await anyio.to_thread.run_sync(\r\n  File \"/usr/local/lib/python3.8/dist-packages/anyio/to_thread.py\", line 31, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n  File \"/usr/local/lib/python3.8/dist-packages/anyio/_backends/_asyncio.py\", line 937, in run_sync_in_worker_thread\r\n    return await future\r\n  File \"/usr/local/lib/python3.8/dist-packages/anyio/_backends/_asyncio.py\", line 867, in run\r\n    result = context.run(func, *args)\r\n  File \"/usr/local/lib/python3.8/dist-packages/gradio/utils.py\", line 549, in async_iteration\r\n    return next(iterator)\r\n  File \"/opt/ChuanhuChatGPT/modules/chat_func.py\", line 486, in reduce_token_size\r\n    for chatbot, history, status_text, previous_token_count in iter:\r\n  File \"/opt/ChuanhuChatGPT/modules/chat_func.py\", line 374, in predict\r\n    chatbot, history, status_text, all_token_counts = predict_all(\r\n  File \"/opt/ChuanhuChatGPT/modules/chat_func.py\", line 247, in predict_all\r\n    status_text = construct_token_message(total_token_count)\r\n  File \"/opt/ChuanhuChatGPT/modules/utils.py\", line 158, in construct_token_message\r\n    for i in range(len(tokens)):\r\nTypeError: object of type 'int' has no len()\r\n\r\n\r\n\r\n2. 2023-04-10 16:37:08,693 [WARNING] [utils.py:388] 无法获取IP地址信息。\r\n{'error': True, 'reason': 'RateLimited', 'message': 'Visit https://ipapi.co/ratelimited/ for details'}\n```\n\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "wpcaxys",
      "author_type": "User",
      "created_at": "2023-04-10T09:26:51Z",
      "updated_at": "2023-05-10T08:55:57Z",
      "closed_at": "2023-05-10T08:55:56Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/580/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/580",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/580",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:11.658972",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "感谢关注，抱歉这么久才回复。\r\n\r\n1. 在后来的更新中，总结对话功能已经被移除了；\r\n2. 关于IP检测，原有的方法并不影响使用。",
          "created_at": "2023-05-10T08:55:56Z"
        }
      ]
    },
    {
      "issue_number": 646,
      "title": "[本地部署]: too many values to unpack (expected 2)",
      "body": "### 是否已存在现有反馈与解答？\r\n\r\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\r\n\r\n### 是否是一个代理配置相关的疑问？\r\n\r\n- [X] 我确认这不是一个代理配置相关的疑问。\r\n\r\n### 错误描述\r\n\r\n![image](https://user-images.githubusercontent.com/126435040/231984439-05eadceb-6618-4685-8090-acc8a8914edf.png)\r\n![image](https://user-images.githubusercontent.com/126435040/231985302-f111ed72-e131-4eae-9758-b9072e657f36.png)\r\ntiktoken已经按照规范\r\n\r\n> pip uninstall tiktoken\r\n> pip install --upgrade tiktoken\r\n> 也尝试过pip install tiktoken -i https://pypi.org/simple\r\n\r\n**utils.py**文件夹下\r\n```\r\ndef count_token(message):\r\n    encoding = tiktoken.get_encoding(\"cl100k_base\")\r\n    input_str = f\"role: {message['role']}, content: {message['content']}\"\r\n    length = len(encoding.encode(input_str))\r\n    return length \r\n```\r\n\r\n\r\n\r\n\r\n### 复现操作\r\n\r\n1. 正常完成本地部署\r\n2. 可以查询token余额\r\n3. 使用python3.10和3.11环境均不行\r\n4. 在同事电脑上用同样的代码则可以正常运行\r\n5. 将base_module中的self.count_token(inputs)替换成len(inputs)则正常运行，只是无法计算token\r\n\r\n### 错误日志\r\n\r\n```shell\r\n**utils.py**文件夹下\r\n def count_token(message):\r\n    encoding = tiktoken.get_encoding(\"cl100k_base\")\r\n    input_str = f\"role: {message['role']}, content: {message['content']}\"\r\n    length = len(encoding.encode(input_str))\r\n    return length ```\r\n```\r\n\r\n\r\n### 运行环境\r\n\r\n```markdown\r\n- OS: windows10\r\n- Browser: Chrome\r\n- Gradio version: 3.26.0\r\n- Python version: Python 3.11.2\r\n- tiktoken version：0.3.3\r\n```\r\n\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "closed",
      "author": "Sylar-W",
      "author_type": "User",
      "created_at": "2023-04-14T08:22:36Z",
      "updated_at": "2023-05-10T08:45:22Z",
      "closed_at": "2023-05-10T08:45:21Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/646/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/646",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/646",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:11.845937",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "太奇怪了。你是如何使用的，仅仅询问了问题吗？我这边测试是没问题的。我的`tiktoken`版本也是0.3.3，gradio版本`3.26.0`，python版本也是`Python 3.11.2`，并没有任何问题。我用的是macOS，但应该和这个没关系。太怪异了。你可以试着新建一个python环境再试试。",
          "created_at": "2023-04-14T15:00:06Z"
        },
        {
          "author": "Sylar-W",
          "body": "@GaiZhenbiao 是的，我也很奇怪。。因为同样的环境下同事的就可以，我试着用3.10和3.11的python环境都不可以，我现在把这段代码注释掉了，使用len(inputs)进行token计算，暂时可以使用了，感谢回复",
          "created_at": "2023-04-17T01:48:36Z"
        },
        {
          "author": "Keldos-Li",
          "body": "比较奇怪的问题，先关掉了。",
          "created_at": "2023-05-10T08:45:21Z"
        }
      ]
    },
    {
      "issue_number": 690,
      "title": "[远程部署]: 远程服务器部署，访问页面一片空白，浏览器控制台报错JS文件404",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n远程服务器部署，访问页面一片空白，浏览器控制台报错JS文件404\r\n![image](https://user-images.githubusercontent.com/77908808/233533398-fde68c07-4e92-4214-9bbc-e78e54335da3.png)\r\n\n\n### 复现操作\n\n正常本地部署 无报错\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n_No response_\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "mctds",
      "author_type": "User",
      "created_at": "2023-04-21T03:22:38Z",
      "updated_at": "2023-05-10T08:44:02Z",
      "closed_at": "2023-05-10T08:44:02Z",
      "labels": [
        "question",
        "server deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/690/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/690",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/690",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:12.039471",
      "comments": [
        {
          "author": "Nativu5",
          "body": "感觉日志太少了，没法排查问题。建议补充信息。",
          "created_at": "2023-04-25T02:53:12Z"
        },
        {
          "author": "Keldos-Li",
          "body": "建议清楚一下浏览器缓存，并尝试调整网络环境重新加载。",
          "created_at": "2023-05-10T08:44:02Z"
        }
      ]
    },
    {
      "issue_number": 393,
      "title": "[功能请求]: 修改主题配置文件",
      "body": "### 相关问题\n\n就像#320 里提到， Gradio的主题有问题。\r\n而且，从 长远来看，目前这个主题里的`primary-hue`是乱的也不是什么好事。\r\n<img width=\"275\" alt=\"截屏2023-03-25 23 05 23\" src=\"https://user-images.githubusercontent.com/29998135/227725435-9ab7508e-3175-47e6-a5e9-bb945735b920.png\">\r\n\r\n理论上来讲，它的颜色透明度是和信息权重成正相关的才对，这样才方便后续更换配色等。 （因为在custom.css里要用var(--primary-***)这种强耦合的代码\n\n### 可能的解决办法\n\n重写，其实也不是很麻烦。\r\n\r\n还有就是，在setting里加一个切换主题。\r\n\r\n之前就想搞，但是不知道怎么动态刷新`demo`\n\n### 帮助开发\n\n- [X] 我愿意帮忙帮助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "HaleyCH",
      "author_type": "User",
      "created_at": "2023-03-25T15:08:23Z",
      "updated_at": "2023-05-06T06:31:56Z",
      "closed_at": "2023-05-06T06:31:56Z",
      "labels": [
        "feature request",
        "🖥️ UI&UX"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/393/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/393",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/393",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:12.291843",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "(突然发现我在issue模板里把「帮忙帮助」写重复了 SOS\r\n\r\n这个主题是乱的可能是因为……某人是这么写的（我先溜了\r\n\r\nhttps://github.com/GaiZhenbiao/ChuanhuChatGPT/blob/f1946717325cf65b9b443f38ec35fc367655015b/modules/presets.py#L107-L146\r\n",
          "created_at": "2023-03-25T15:59:49Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "我的锅，我承认我是乱写的🥹\r\n动态刷新demo可以参考一下 SD-webui，他们有这个功能",
          "created_at": "2023-03-25T16:16:46Z"
        }
      ]
    },
    {
      "issue_number": 718,
      "title": "[功能请求]: 我想用vue做一个自定义的前端页面，有没有接口或者好的思路方向可以解决",
      "body": "### 相关问题\r\n\r\n我想用vue做一个自定义的前端页面，有没有接口或者好的思路方向可以解决\r\n\r\n### 可能的解决办法\r\n\r\n接入vue前端项目，目前gradio的方式有很多想做自定义调整的很麻烦\r\n\r\n### 帮助开发\r\n\r\n- [X] 我愿意协助开发！\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "closed",
      "author": "120805481",
      "author_type": "User",
      "created_at": "2023-04-29T03:07:07Z",
      "updated_at": "2023-05-02T17:00:28Z",
      "closed_at": "2023-05-02T17:00:28Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/718/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/718",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/718",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:12.552185",
      "comments": [
        {
          "author": "yanyuxiyangzk",
          "body": "你可以用flask技术提供api接口，自定义前端页面，相当于重新开发了",
          "created_at": "2023-05-02T06:16:12Z"
        }
      ]
    },
    {
      "issue_number": 721,
      "title": "[功能请求]: 刷新页面默认显示对话记录时，将滚动条自动定位至最下方",
      "body": "### 相关问题\n\n目前在显示历史对话记录时，滚动条处于最上方，如果对话记录过多则整个页面看起来是白屏状态，会给用户带来很多的迷惑\r\n\r\n\n\n### 可能的解决办法\n\n刷新页面默认显示对话记录时，将滚动条自动定位至最下方\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "libukai",
      "author_type": "User",
      "created_at": "2023-05-01T12:15:12Z",
      "updated_at": "2023-05-02T09:24:05Z",
      "closed_at": "2023-05-02T05:13:21Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/721/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "Keldos-Li"
      ],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/721",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/721",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:12.799701",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "好，这个应该能做。",
          "created_at": "2023-05-01T18:02:47Z"
        },
        {
          "author": "libukai",
          "body": "- 不使用账号登录时，此功能已实现\r\n- 使用账号登录时，刷新当前页面的滚动条没有自动定位至最下方",
          "created_at": "2023-05-02T09:14:44Z"
        },
        {
          "author": "Keldos-Li",
          "body": "> * 使用账号登录时，刷新当前页面的滚动条没有自动定位至最下方\r\n\r\n这个目前可能做不了……🤔",
          "created_at": "2023-05-02T09:24:05Z"
        }
      ]
    },
    {
      "issue_number": 713,
      "title": "[功能请求]: 语音识别输入",
      "body": "### 相关问题\n\n可以增加语音识别输入，识别后转文字到提问的文本输入框。\n\n### 可能的解决办法\n\n可以使用whisper，或者调用speech_recognition\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "jarrywen",
      "author_type": "User",
      "created_at": "2023-04-27T10:38:18Z",
      "updated_at": "2023-05-02T05:29:04Z",
      "closed_at": "2023-05-02T05:29:03Z",
      "labels": [
        "duplicate",
        "feature request"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/713/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/713",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/713",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:12.974964",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "Duplicate with \r\n- #699",
          "created_at": "2023-05-02T05:29:03Z"
        }
      ]
    },
    {
      "issue_number": 698,
      "title": "[远程部署]: 使用XMChat模型时，网站上传图片时一直转圈圈直到超时",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n使用XMChat模型时，网站上传图片时一直转圈圈直到超时\r\n我申请了而有xmchat的api_key，已经配置好了，并且在xmchat下说“hi”也有回复。\r\n注意，只有xmchat模式时图片无法上传，在gpt3.5模型下图片文件均可上传到服务器。怀疑是xmchat单独的问题，服务器本身网络和文件系统都没问题。\r\n以下是报错内容：\r\n<img width=\"478\" alt=\"image\" src=\"https://user-images.githubusercontent.com/87698941/233842920-b0a9fb78-50f2-4fbd-9502-533e609708e3.png\">\r\n\n\n### 复现操作\n\n1. 正常完成服务器部署\r\n2. 成功在外部网络上访问\r\n3. 其他模块测试均无问题，只有xmchat无法上传图片\n\n### 错误日志\n\n```shell\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.9/site-packages/gradio/routes.py\", line 395, in run_predict\r\n    output = await app.get_blocks().process_api(\r\n  File \"/usr/local/lib/python3.9/site-packages/gradio/blocks.py\", line 1193, in process_api\r\n    result = await self.call_function(\r\n  File \"/usr/local/lib/python3.9/site-packages/gradio/blocks.py\", line 916, in call_function\r\n    prediction = await anyio.to_thread.run_sync(\r\n  File \"/usr/local/lib/python3.9/site-packages/anyio/to_thread.py\", line 31, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n  File \"/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py\", line 937, in run_sync_in_worker_thread\r\n    return await future\r\n  File \"/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py\", line 867, in run\r\n    result = context.run(func, *args)\r\n  File \"/root/ChuanhuChatGPT/modules/utils.py\", line 114, in handle_file_upload\r\n    return current_model.handle_file_upload(*args)\r\n  File \"/root/ChuanhuChatGPT/modules/models/models.py\", line 504, in handle_file_upload\r\n    response = json.loads(response.text)\r\n  File \"/usr/local/lib/python3.9/json/__init__.py\", line 346, in loads\r\n    return _default_decoder.decode(s)\r\n  File \"/usr/local/lib/python3.9/json/decoder.py\", line 337, in decode\r\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\r\n  File \"/usr/local/lib/python3.9/json/decoder.py\", line 355, in raw_decode\r\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\r\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n```\n\n\n### 运行环境\n\n- OS: Windows 10\r\n- Server: CentOS\r\n- Gradio version: 3.25.0\r\n- Python version: 3.9.0\r\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "realnoob007",
      "author_type": "User",
      "created_at": "2023-04-23T13:41:52Z",
      "updated_at": "2023-05-02T05:24:19Z",
      "closed_at": "2023-05-02T05:24:18Z",
      "labels": [
        "question",
        "server deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/698/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/698",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/698",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:13.160231",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "等待XMChat解决吧orz\r\n- https://github.com/MILVLG/xmchat/issues/3",
          "created_at": "2023-04-23T14:15:21Z"
        },
        {
          "author": "Keldos-Li",
          "body": "              This is caused by the unstable networking in our school occasionally...\r\n\r\n_Originally posted by @MIL-VLG in https://github.com/MILVLG/xmchat/issues/3#issuecomment-1520263490_\r\n            \r\n这里先关闭了……",
          "created_at": "2023-05-02T05:24:18Z"
        }
      ]
    },
    {
      "issue_number": 703,
      "title": "[本地部署]: 启动的时候提示python was not found; run without arguments to install...",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n启动的时候提示python was not found; run without arguments to install...\n\n### 复现操作\n\n未能成功本地部署\n\n### 错误日志\n\n```shell\nMicrosoft Windows [版本 10.0.22621.1555]\r\n(c) Microsoft Corporation。保留所有权利。\r\n\r\nD:\\ChuanhuChatGPT-main>python ChuanhuChatbot.py\r\nPython was not found; run without arguments to install from the Microsoft Store, or disable this shortcut from Settings > Manage App Execution Aliases.\n```\n\n\n### 运行环境\n\n```markdown\n- OS: Windows 11\r\n- Browser: Chrome\r\n- Gradio version: 不知道\r\n- Python version: 3.11.3\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "jimyoung23",
      "author_type": "User",
      "created_at": "2023-04-24T15:51:36Z",
      "updated_at": "2023-05-02T05:17:41Z",
      "closed_at": "2023-05-02T05:17:40Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/703/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/703",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/703",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:13.321966",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "请使用\n```\npython3 ChuanhuChatbot.py\n```",
          "created_at": "2023-04-25T04:15:12Z"
        }
      ]
    },
    {
      "issue_number": 545,
      "title": "[功能请求]: 复制对话历史到剪贴板/生成对话历史的jpg图片并复制到剪贴板",
      "body": "### 相关问题\r\n\r\n感觉现在的导出记录方式都比较繁琐, 最近加了markdown file导出方便了一些, 但我觉得可以加个复制内容到剪贴板的功能\r\n\r\n### 可能的解决办法\r\n\r\n- [ ] 复制raw markdown到剪贴板\r\n- [ ] 复制rendered jpg到剪贴板\r\n\r\n### 帮助开发\r\n\r\n- [X] 我愿意协助开发！\r\n\r\n### 补充说明\r\n\r\n可以用这个js lib 生成图片\r\nhttps://github.com/bubkoo/html-to-image\r\n\r\n_No response_",
      "state": "closed",
      "author": "xingfanxia",
      "author_type": "User",
      "created_at": "2023-04-05T04:47:08Z",
      "updated_at": "2023-05-02T05:16:30Z",
      "closed_at": "2023-05-02T05:16:30Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 11,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/545/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "Keldos-Li"
      ],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/545",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/545",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:13.524380",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "可以可以……如果生成图片可能是要保存整个用户+ai的对话记录长图？\n\n以前有尝试过\n![image](https://user-images.githubusercontent.com/23137268/229985652-01df92f3-9570-40ed-97d7-4f41a2eaeb0d.jpeg)",
          "created_at": "2023-04-05T05:04:06Z"
        },
        {
          "author": "xingfanxia",
          "body": "> 可以可以……虽然觉得生成图片可能意义不大？\r\n> \r\n> 以前有尝试过 ![image](https://user-images.githubusercontent.com/23137268/229985652-01df92f3-9570-40ed-97d7-4f41a2eaeb0d.jpeg)\r\n\r\n1. 分享给non technical的朋友/social media生成长对话图片比起一张张截图方便很多\r\n2. chatgpt给的table也是 markdown syntax, 应该可以export",
          "created_at": "2023-04-05T05:06:17Z"
        },
        {
          "author": "xingfanxia",
          "body": "btw, 有tg/discord群之类的交流吗",
          "created_at": "2023-04-05T05:11:29Z"
        },
        {
          "author": "Keldos-Li",
          "body": "这两天写了太多js，已经不想再碰js了（\n\n之后我再看看吧，应该能搞的。",
          "created_at": "2023-04-05T11:34:38Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "> btw, 有tg/discord群之类的交流吗\r\n\r\n现在Readme里加了tg群的链接",
          "created_at": "2023-04-05T11:36:04Z"
        }
      ]
    },
    {
      "issue_number": 691,
      "title": "[Docker]: ",
      "body": "### 是否已存在现有反馈与解答？\r\n\r\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\r\n\r\n### 是否是一个代理配置相关的疑问？\r\n\r\n- [X] 我确认这不是一个代理配置相关的疑问。\r\n\r\n### 错误描述\r\n\r\n1. 无论如何修改都会出现下面的错误，并且不知道去哪里找日志\r\n![image](https://user-images.githubusercontent.com/50211095/233594581-828d0a60-c1ae-4548-a563-575c3d071132.png)\r\n\r\n- 一直显示这个\r\n![image](https://user-images.githubusercontent.com/50211095/233596330-cafefb52-47e8-4feb-9bda-22cce60bb726.png)\r\n\r\n2. 每次刷新页面会增加一次加载模型的提示\r\n![image](https://user-images.githubusercontent.com/50211095/233595134-fdfbcb5a-79fa-42be-824a-10cfff22615a.png)\r\n\r\n\r\n### 复现操作\r\n\r\n1. 按照README中跳转的安装部署方式部署\r\n2. 转换成了 `docker-compose.yml`\r\n```\r\nversion: '3.3'\r\nservices:\r\n    chuanhuchatgpt:\r\n        container_name: chatgpt\r\n        volumes:\r\n            - './history:/app/history'\r\n            - './config.json:/app/config.json'\r\n        ports:\r\n            - '7860:7860'\r\n        image: 'tuchuanhuhuhu/chuanhuchatgpt:latest'\r\n```\r\n\r\n3. 启动容器\r\n\r\n### 错误日志\r\n\r\n```shell\r\n2023-04-21 09:01:20,059 [INFO] [models.py:548] 正在加载OpenAI模型: gpt-3.5-turbo\r\n2023-04-21 09:01:20,060 [INFO] [models.py:585] 模型设置为了： gpt-3.5-turbo\r\n2023-04-21 09:01:20,301 [INFO] [utils.py:398] 您的IP区域：United States。\r\n2023-04-21 09:01:20,629 [INFO] [ChuanhuChatbot.py:455] \r\n川虎的温馨提示：访问 http://localhost:7860 查看界面\r\nReloading javascript...\r\nRunning on local URL:  http://0.0.0.0:7860\r\n\r\nTo create a public link, set `share=True` in `launch()`.\r\n2023-04-21 09:01:30,380 [INFO] [models.py:548] 正在加载OpenAI模型: gpt-3.5-turbo\r\n2023-04-21 09:01:30,381 [INFO] [models.py:585] 模型设置为了： gpt-3.5-turbo\r\n2023-04-21 09:05:11,200 [INFO] [models.py:548] 正在加载OpenAI模型: gpt-3.5-turbo\r\n2023-04-21 09:05:11,205 [INFO] [models.py:585] 模型设置为了： gpt-3.5-turbo\r\n```\r\n\r\n\r\n\r\n### 运行环境\r\n\r\n- OS: Debain10\r\n- Docker version: 18.09.1, build 4c52b90\r\n- Gradio version: \r\n- Python version: \r\n\r\n\r\n### 补充说明\r\n\r\n尝试直接用docker run运行还是会在页面报错\r\n\r\n我刚刚试了一下本地部署，结果还是有同样的问题",
      "state": "closed",
      "author": "DavisYe",
      "author_type": "User",
      "created_at": "2023-04-21T09:10:26Z",
      "updated_at": "2023-05-02T05:15:35Z",
      "closed_at": "2023-05-02T05:15:35Z",
      "labels": [
        "duplicate",
        "question",
        "docker deployment"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/691/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/691",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/691",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:13.755928",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "参考：[常见问题](https://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/常见问题#something-went-wrong-connection-errored-out)\r\n……",
          "created_at": "2023-04-22T14:02:57Z"
        }
      ]
    },
    {
      "issue_number": 333,
      "title": "[BUG] Hugging Face中多轮对话后回复卡住，输入框无法输入，只能刷新页面",
      "body": "在Hugging Face下，复制到自己的space后，多对话几次就会出现ChatGPT不回答的情况。输入框无法输入，也无法正常结束。只能刷新页面重新开始\r\n![image](https://user-images.githubusercontent.com/45580569/227135662-89ff72ba-5b72-477b-a3f3-4f883230de66.png)",
      "state": "open",
      "author": "MossLark",
      "author_type": "User",
      "created_at": "2023-03-23T07:41:30Z",
      "updated_at": "2023-04-30T01:53:42Z",
      "closed_at": null,
      "labels": [
        "🤷 no can do"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 9,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/333/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/333",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/333",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:13.946709",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "huggingface里log怎么说？👀感觉不会是项目代码的问题",
          "created_at": "2023-03-23T10:40:43Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "确实，可以看看log",
          "created_at": "2023-03-23T12:02:55Z"
        },
        {
          "author": "greenlight2000",
          "body": "请问api-key那里填什么呀，这个代码哪里来的？是需要自己已有一个chatgpt pro账户吗",
          "created_at": "2023-03-23T13:19:55Z"
        },
        {
          "author": "MossLark",
          "body": "@greenlight2000 chatgpt账号就行，不用pro。每个账号都有一个api-key",
          "created_at": "2023-03-24T01:13:47Z"
        },
        {
          "author": "LinkedDestiny",
          "body": "这个问题我自己私有化服务器部署也有一样的问题，会直接卡住，页面显示回答生成中，后台日志没有任何错误，一直停留在前一条回答的日志。估计是跟ws长连接的异常有关，具体日志我会再尝试复现一下，不过可以关注一下这个点\r\n复现方式大概就是比较快速的提出问题\r\n",
          "created_at": "2023-03-27T07:00:21Z"
        }
      ]
    },
    {
      "issue_number": 714,
      "title": "[Bug]: 我的api key支持gpt4，但是我切换到4之后，显示使用的还是gpt-3的模型",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n我的api key支持gpt4，但是我切换到4之后，显示使用的还是gpt-3的模型\n\n### 复现操作\n\n我的api key支持gpt4，但是我切换到4之后，显示使用的还是gpt-3的模型\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "baiyi-os",
      "author_type": "User",
      "created_at": "2023-04-28T03:17:51Z",
      "updated_at": "2023-04-28T03:24:14Z",
      "closed_at": "2023-04-28T03:21:34Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/714/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/714",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/714",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:14.151465",
      "comments": [
        {
          "author": "baiyi-os",
          "body": "![image](https://user-images.githubusercontent.com/58473561/235046306-0cb44d71-13b5-4cd8-a707-3154a852f7b3.png)\r\n",
          "created_at": "2023-04-28T03:18:14Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "不用纠结这个，这只是因为GPT4不知道自己是GPT4. 实际上回答质量是有明显提升的（与此同时，回答速度也明显变慢了qwq）",
          "created_at": "2023-04-28T03:21:34Z"
        },
        {
          "author": "baiyi-os",
          "body": "好的，感谢\r\n",
          "created_at": "2023-04-28T03:24:01Z"
        }
      ]
    },
    {
      "issue_number": 712,
      "title": "[功能请求]: ",
      "body": "### 相关问题\n\n希望登录逻辑是调用的是自建mysql用户表来判断用户名密码是否正确，来判断登录逻辑。\r\n1、首页弹出登录注册弹出提示，输入用户名密码后，后台通过mysql查询用户表密码判断登录\r\n2、密码正确则弹出消失，显示用户昵称\r\n\r\n\n\n### 可能的解决办法\n\n1、config.py文件加载mysql数据库连接，进行初始化，查询用户表并讲结果返回给auth_list\r\n2、目前不知道登录弹窗如何实现，代码给哪里写，目前代码中的登录注册是在哪里实现的\r\n\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "yanyuxiyangzk",
      "author_type": "User",
      "created_at": "2023-04-27T10:20:43Z",
      "updated_at": "2023-04-27T11:12:34Z",
      "closed_at": "2023-04-27T11:11:03Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/712/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/712",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/712",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:14.348374",
      "comments": [
        {
          "author": "yanyuxiyangzk",
          "body": "import pymysql\r\n \r\nclass MysqlHelper(object):\r\n \r\n    def __init__(self,database,host=\"localhost\",port=3306,user=\"root\",password=\"123456\",charset=\"utf8\"):\r\n        \"\"\"\r\n        初始化Helper对象\r\n        :param database:数据库\r\n        :param host:连接主机\r\n        :param port:端口号\r\n        :param user:用户名\r\n     ",
          "created_at": "2023-04-27T10:30:32Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "why?",
          "created_at": "2023-04-27T10:41:00Z"
        },
        {
          "author": "yanyuxiyangzk",
          "body": "需要和外部其他系统调用，比如用户体系用外部业务系统的。",
          "created_at": "2023-04-27T11:04:30Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "暂时不考虑这种功能，因为这并不是一般用户需要的。如果你真的想要，我提供付费服务，你可以通过B站私信找到我：https://space.bilibili.com/29125536",
          "created_at": "2023-04-27T11:11:03Z"
        }
      ]
    },
    {
      "issue_number": 702,
      "title": "[功能请求]: 是否可以提供类似官方一样的浏览/保存历史对话功能",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n左侧是Tab栏可以切换，使用上更加方便。\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Yamhao",
      "author_type": "User",
      "created_at": "2023-04-24T03:30:30Z",
      "updated_at": "2023-04-27T09:38:36Z",
      "closed_at": "2023-04-27T07:42:37Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/702/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/702",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/702",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:14.519375",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "可以在保存/加载列表的对话下拉列表中选择，用起来差不多。现在川虎Chat也会自动保存每一轮对话了。\r\n\r\n<img width=\"354\" alt=\"image\" src=\"https://user-images.githubusercontent.com/51039745/234794180-4e956659-0771-4cfc-8537-ea0063edc149.png\">\r\n",
          "created_at": "2023-04-27T07:42:37Z"
        },
        {
          "author": "Yamhao",
          "body": "不是太直观，感觉",
          "created_at": "2023-04-27T09:09:20Z"
        },
        {
          "author": "Keldos-Li",
          "body": "您要求还挺高哈……",
          "created_at": "2023-04-27T09:38:35Z"
        }
      ]
    },
    {
      "issue_number": 705,
      "title": "[功能请求]: 优化对话历史记录提交的功能。",
      "body": "### 相关问题\n\n尊敬的开发团队：\r\n您好！\r\n我已经将你们网页部署到服务器了，在使用了几天我还是觉得在对话历史记录方面，你们可以进行一些针对远程部署的一些优化。\r\n在使用远程服务器的过程中，情况可能与个人本地部署有些不同。部署远程服务器后，往往将会是多人使用同一个服务器。这就会导致，如果历史记录不分用户存储，那么所有人共享同一个历史记录空间，而且没有删除历史记录的权限，只有添加和覆盖历史记录的权限。\r\n在没有设置完整的登录注册系统时，这会可能导致严重的隐私问题，因为用户进行的任何保存对话操作都会在服务器留下痕迹，而且其内容将和所以用户共享。而且我看到你们都在线体验页面里似乎可以在历史记录中找到很多记录。\r\n当然，也可能我自己使用不规范没有仔细考察你们是否在某个配置文件中设置了类似的功能避免这点，或者你们可能能想到更好的办法解决这个问题。不过，我作为一名普通的使用者，目的是搭建一个网站可小规模供同学使用，且省略登录这种麻烦的步骤。而至少仅通过config.json，我好像没有找到可以解决我提出问题的办法。\r\n如果你们其实没有考虑到这个问题，我建议尽快想办法解决它，它可能是个设计上的缺陷，如果短时间没有办法解决，至少在安装教程里声明一下这个问题，避免它被别人忽略。\n\n### 可能的解决办法\n\n我认为可以添加另一种读取对话模式。开关可以设置在config.json文件中。\r\n在这种新模式下，服务器不会长期保存任何历史对话记录，仅在用户点击保存对话的时候激活下载，在下载完成以后就删除此记录。而用户上传文件的时候，服务器在读取完成文件后立刻删除，避免记录被其他人读取。且服务器仅支持上传式读取记录而不支持读取本地记录，避免在服务器读取文件到删除过程中的短暂存留过程被读取到。\r\n\r\n当然，更好的解决方式其实是使用cookies，这样可以极度简化用户的操作，但是也必须考虑到cookies可能丢失，可以结合两种方法一起使用。\r\n\r\n不过我看你们主要还是倾向于设计个人客户端，而且程序已经在无cookies的情况下设计了很多部分了，如果这个时候才开始用cookies，可能会很棘手，我也只是提出下我的想法，请你们视实际情况处理。\r\n\r\n当然，你们可能有更好的办法，或者更简单的办法，但是我个人认为，至少要能支持本地对话上传。远程的对话还可以直接覆盖内容的方式删除，但是如果不支持本地上传对话记录，那么服务器上的内容一旦被覆盖了就丢失了，但是如果支持本地对话上传，虽然对用户会麻烦点，但至少不用担心对话记录丢失以及对话内容泄露。\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "dkglds",
      "author_type": "User",
      "created_at": "2023-04-25T02:06:47Z",
      "updated_at": "2023-04-27T07:40:52Z",
      "closed_at": "2023-04-27T07:40:42Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/705/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/705",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/705",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:14.706455",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "感谢您认真的说明！\r\n\r\n不过，一般来说，只要部署到远程了，就应该默认：\r\n```\r\n不登录 = 个人使用\r\n登录　 = 多人使用\r\n```\r\n哪有既要方便（不登录），又要隐私（区分用户记录）的道理……只要不登录就当在不同浏览器访问服务器使用的人都是你自己，所以不太可能又区分记录的。\r\n\r\nhuggingface如果直接用公开的空间，确实可能有点隐私问题。因此推荐复制到个人空间。\r\n\r\n至于有没有必要做你说的什么的服务器短期保留的什么的功能……改变对话历史记录的提交逻辑……看看老大有没有这个计划🤔\r\n\r\n不过我们确实正在做针对不登录用户，通过浏览器的存储保存当次对话记录的功能。但它可能和官方的",
          "created_at": "2023-04-27T01:37:37Z"
        },
        {
          "author": "dkglds",
          "body": "那至少能不能支持本地上传对话记录，我看到你们明明是可以上传对话记录到浏览器里，但是时候语言模型不会按照对话的方式去读取内容，只会按照读取文本的方式读，这正常你们既然提供了保存/加载对话，而且保存下来的对话也可以下载下来，是不是本来也应该支持上传对话让gpt就上传的上下文来回答呢？",
          "created_at": "2023-04-27T03:50:34Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "> 那至少能不能支持本地上传对话记录，我看到你们明明是可以上传对话记录到浏览器里，但是时候语言模型不会按照对话的方式去读取内容，只会按照读取文本的方式读，这正常你们既然提供了保存/加载对话，而且保存下来的对话也可以下载下来，是不是本来也应该支持上传对话让gpt就上传的上下文来回答呢？\r\n\r\n支持的呀，在保存/加载面板里上传历史记录就行了",
          "created_at": "2023-04-27T03:51:47Z"
        },
        {
          "author": "Keldos-Li",
          "body": "哦，另外，关于登录之后上传对话历史记录，这里是有一个bug：\r\n- #607 \r\n\r\n但是不登录时，上传历史记录是完全可用的：\r\n<img width=\"1034\" alt=\"image\" src=\"https://user-images.githubusercontent.com/23137268/234761001-e788f07b-a5e4-4a49-9392-15ba29052a9f.png\">\r\n",
          "created_at": "2023-04-27T04:32:44Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "感谢反馈！现在\r\n\r\n- 登录后可以自动保存、加载对话\r\n- 未登录时可以在浏览器本地保存历史记录（仅供查看）\r\n- 未设置账户密码系统时不再向用户展示历史记录列表\r\n\r\nhttps://github.com/GaiZhenbiao/ChuanhuChatGPT/commit/7dfecf76799f90985e26f76afd5dae31df573519",
          "created_at": "2023-04-27T07:40:42Z"
        }
      ]
    },
    {
      "issue_number": 607,
      "title": "[Bug]: 上传对话历史记录.json报错",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n上传对话历史记.json文件报错\r\n\r\n![image](https://user-images.githubusercontent.com/53057530/231393556-ee301c34-3696-4003-ba47-d15cba02e790.png)\r\n\n\n### 复现操作\n\n多账户模式下，添加了一个用户名admin\r\n上传之前下载的对话历史记录.json\n\n### 错误日志\n\n```shell\nFile \"/Users/zongheng/Documents/ChuanhuChatGPT/modules/base_model.py\", line 507, in load_chat_history\r\n    with open(os.path.join(HISTORY_DIR, user_name, filename), \"r\") as f:\r\nIsADirectoryError: [Errno 21] Is a directory: 'history/admin/'\n```\n\n\n### 运行环境\n\n- OS: Macos\r\n- Browser:  Chrome\r\n- Gradio version:  3.23.0\r\n- Python version: 3.9.16\r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "chucksylar",
      "author_type": "User",
      "created_at": "2023-04-12T08:07:16Z",
      "updated_at": "2023-04-27T07:25:31Z",
      "closed_at": "2023-04-27T07:25:31Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/607/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/607",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/607",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:14.870877",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "确实有问题。可以复现。\r\n\r\n**使用账号时无法读取上传的历史记录。**",
          "created_at": "2023-04-12T17:14:28Z"
        },
        {
          "author": "shengwubin",
          "body": "我创建了一个PR，虽然可以解决报错问题，但是没有修复无法加载上传的json记录问题 [https://github.com/GaiZhenbiao/ChuanhuChatGPT/pull/692](https://github.com/GaiZhenbiao/ChuanhuChatGPT/pull/692)\r\n\r\n[Update] 解决了问题，但是对界面元素有微小修改，如果最终没有被merge到主项目，可以用我的分支 [https://github.com/shengwubin/ChuanhuChatGPT](https://github.com/shengwubin/ChuanhuChatG",
          "created_at": "2023-04-21T20:51:43Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "现在解决了",
          "created_at": "2023-04-27T07:25:31Z"
        }
      ]
    },
    {
      "issue_number": 710,
      "title": "[本地部署]: No module named 'transformers_modules.models/chatglm-6b'",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n选模型时出现这个bug\n\n### 复现操作\n\n已经本地部署了\n\n### 错误日志\n\n```shell\n2023-04-25 21:24:39,621 [ERROR] [models.py:590] No module named 'transformers_modules.models/chatglm-6b'\n```\n\n\n### 运行环境\n\n```markdown\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version:\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "tiwwei",
      "author_type": "User",
      "created_at": "2023-04-25T13:28:57Z",
      "updated_at": "2023-04-25T15:30:25Z",
      "closed_at": "2023-04-25T15:30:24Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/710/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/710",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/710",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:15.033336",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "你没有安装运行本地model需要的依赖。请看：\r\nhttps://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/使用教程#安装本地模型所需的依赖",
          "created_at": "2023-04-25T15:30:24Z"
        }
      ]
    },
    {
      "issue_number": 461,
      "title": "[远程部署]: 服务器部署后, 打不开网页",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n境外服务器部署后, 在浏览器地址栏中输入服务器ip地址后网页未响应, 输入ip地址 + 服务器端口后网页未响应\n\n### 复现操作\n\n        demo.queue(concurrency_count=CONCURRENT_COUNT).launch(server_name=\"我的服务器地址\", server_port=我的服务器端口号(SSH Port), share=True) # 可自定义端口\r\n        # demo.queue(concurrency_count=CONCURRENT_COUNT).launch(server_name=\"0.0.0.0\", server_port=7860,auth=(\"在这里填写用户名\", \"在这里填写密码\")) # 可设置用户名与密码\r\n        # demo.queue(concurrency_count=CONCURRENT_COUNT).launch(auth=(\"在这里填写用户名\", \"在这里填写密码\")) # 适合Nginx反向代理\n\n### 错误日志\n\n```shell\nroot@localhost:~/ChuanhuChatGPT# python3 ChuanhuChatbot.py\r\n2023-03-29 10:23:46,056 [INFO] [utils.py:312] 获取模板文件名列表\r\n2023-03-29 10:23:46,057 [INFO] [utils.py:264] 获取文件名列表，目录为templates，文件类型为['.csv', 'json']，是否为纯文本列表True\r\n2023-03-29 10:23:46,058 [INFO] [utils.py:286] 加载模板文件1 中文Prompts.json，模式为2（0为返回字典和下拉菜单，1为返回下拉菜单，2为返回字典）\r\n2023-03-29 10:23:46,059 [INFO] [utils.py:288] Loading template...\r\n2023-03-29 10:23:46,274 [INFO] [utils.py:397] 您的IP区域：Netherlands。\r\n/usr/local/lib/python3.9/dist-packages/gradio/deprecation.py:43: UserWarning: You have unused kwarg parameters in Files, please remove them: {'multiple': True}\r\n  warnings.warn(\r\n2023-03-29 10:23:46,306 [INFO] [utils.py:312] 获取模板文件名列表\r\n2023-03-29 10:23:46,307 [INFO] [utils.py:264] 获取文件名列表，目录为templates，文件类型为['.csv', 'json']，是否为纯文本列表True\r\n2023-03-29 10:23:46,308 [INFO] [utils.py:312] 获取模板文件名列表\r\n2023-03-29 10:23:46,308 [INFO] [utils.py:264] 获取文件名列表，目录为templates，文件类型为['.csv', 'json']，是否为纯文本列表True\r\n2023-03-29 10:23:46,309 [INFO] [utils.py:312] 获取模板文件名列表\r\n2023-03-29 10:23:46,309 [INFO] [utils.py:264] 获取文件名列表，目录为templates，文件类型为['.csv', 'json']，是否为纯文本列表True\r\n2023-03-29 10:23:46,310 [INFO] [utils.py:286] 加载模板文件1 中文Prompts.json，模式为1（0为返回字典和下拉菜单，1为返回下拉菜单，2为返回字典）\r\n2023-03-29 10:23:46,310 [INFO] [utils.py:288] Loading template...\r\n2023-03-29 10:23:46,348 [INFO] [utils.py:312] 获取模板文件名列表\r\n2023-03-29 10:23:46,349 [INFO] [utils.py:264] 获取文件名列表，目录为templates，文件类型为['.csv', 'json']，是否为纯文本列表True\r\n2023-03-29 10:23:46,350 [INFO] [utils.py:286] 加载模板文件1 中文Prompts.json，模式为1（0为返回字典和下拉菜单，1为返回下拉菜单，2为返回字典）\r\n2023-03-29 10:23:46,350 [INFO] [utils.py:288] Loading template...\r\n2023-03-29 10:23:46,388 [INFO] [utils.py:281] 获取历史记录文件名列表\r\n2023-03-29 10:23:46,389 [INFO] [utils.py:264] 获取文件名列表，目录为history，文件类型为['.json']，是否为纯文本列表True\r\n2023-03-29 10:23:46,390 [INFO] [utils.py:281] 获取历史记录文件名列表\r\n2023-03-29 10:23:46,390 [INFO] [utils.py:264] 获取文件名列表，目录为history，文件类型为['.json']，是否为纯文本列表True\r\n2023-03-29 10:23:46,873 [INFO] [ChuanhuChatbot.py:415] \r\n川虎的温馨提示：访问 http://localhost:7860 查看界面\r\nReloading javascript...\r\nRunning on local URL:  http://127.0.0.1:7860\r\n\r\nTo create a public link, set `share=True` in `launch()`.\n```\n\n\n### 运行环境\n\n```markdown\n- OS: debian 11\r\n- Docker version: \r\n- Gradio version: \r\n- Python version: python 3.9\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Hukybo",
      "author_type": "User",
      "created_at": "2023-03-29T14:34:56Z",
      "updated_at": "2023-04-25T15:15:44Z",
      "closed_at": "2023-03-30T02:22:32Z",
      "labels": [
        "question",
        "server deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 12,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/461/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/461",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/461",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:15.210959",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "我开始怀疑是不是我真的没在 [常见问题](https://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98#%E9%83%A8%E7%BD%B2%E5%90%8E%E6%97%A0%E6%B3%95%E9%80%9A%E8%BF%87%E5%B1%80%E5%9F%9F%E7%BD%91ip%E8%AE%BF%E9%97%AE) 里写清楚了\n\n😫\n\n- #293\n- #77\n",
          "created_at": "2023-03-29T15:27:24Z"
        },
        {
          "author": "jimmy108",
          "body": "远程部署，采用在文件中设定用户名密码auth.json的方式，放置好后就不能远程访问了，删除后就可以了。怪了",
          "created_at": "2023-03-29T15:39:53Z"
        },
        {
          "author": "Keldos-Li",
          "body": "> 远程部署，采用在文件中设定用户名密码auth.json的方式，放置好后就不能远程访问了，删除后就可以了。怪了\n\n@jimmy108 常见问题里也写了！看\n- #89 ",
          "created_at": "2023-03-29T15:52:08Z"
        },
        {
          "author": "jimmy108",
          "body": "> > 远程部署，采用在文件中设定用户名密码auth.json的方式，放置好后就不能远程访问了，删除后就可以了。怪了\r\n> \r\n> @jimmy108 常见问题里也写了！看\r\n> \r\n> * [网站设置登录账号密码后`Connection errored out` #89](https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/89)\r\n\r\n不好意思没找到原因，当我不创建auth.json文件时，就是直接把用户名密码写入运行程序里，远程部署都是正常的。但当我生成账号密码文件auth.json时，远程部署就变成本地模式了。",
          "created_at": "2023-03-29T16:59:33Z"
        },
        {
          "author": "shuangleo",
          "body": "> 远程部署，采用在文件中设定用户名密码auth.json的方式，放置好后就不能远程访问了，删除后就可以了。怪了\r\n\r\n哈哈哈我也是😂",
          "created_at": "2023-03-29T18:19:04Z"
        }
      ]
    },
    {
      "issue_number": 709,
      "title": "please check your plan and billing details.”, “type”: “insufficient_quota”, “param”: null, “code”: null }",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\nError: { “error”: { “message”: “You exceeded your current quota, please check your plan and billing details.”, “type”: “insufficient_quota”, “param”: null, “code”: null }}\n\n### 复现操作\n\n美国服务器部署，请求时报错\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Server: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "zhiyuandian",
      "author_type": "User",
      "created_at": "2023-04-25T13:07:21Z",
      "updated_at": "2023-04-25T14:32:54Z",
      "closed_at": "2023-04-25T14:32:54Z",
      "labels": [
        "duplicate",
        "question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/709/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/709",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/709",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:15.415481",
      "comments": [
        {
          "author": "zhiyuandian",
          "body": "raceback (most recent call last):\r\n  File \"/home/work/ChuanhuChatGPT-main/modules/models/base_model.py\", line 328, in predict\r\n    for chatbot, status_text in iter:\r\n  File \"/home/work/ChuanhuChatGPT-main/modules/models/base_model.py\", line 145, in stream_next_chatbot\r\n    for partial_text in stream",
          "created_at": "2023-04-25T13:07:40Z"
        },
        {
          "author": "Keldos-Li",
          "body": "你翻译一下报错就知道了，你没有额度了。而且常见问题里都写了……",
          "created_at": "2023-04-25T14:32:31Z"
        }
      ]
    },
    {
      "issue_number": 430,
      "title": "[Bug]: 含$的回复内容可能因formula incomplete超出聊天框",
      "body": "### 这个bug是否已存在现有issue了？\r\n\r\n- [X] 我确认没有已有issue。\r\n\r\n### 错误表现\r\n\r\n![image](https://user-images.githubusercontent.com/58991169/228168262-93735875-10f0-4176-a283-17285f89eed3.png)\r\n\r\n\r\n### 复现操作\r\n\r\n当对话中出现⚠formula incomplete，上一行过长的文字就会超出对话框\r\n\r\n至于为什么会出现⚠formula incomplete 我其实也不太明白\r\ndocker里并没有错误日志，我怀疑是渲染的问题\r\n\r\n### 错误日志\r\n\r\n```shell\r\n2023-03-28 07:33:34,808 [INFO] [chat_func.py:270] 输入为：我运行    portuse=`/usr/sbin/lsof -i :8000|grep -v \"PID\" | awk '{print $2}'`出现了/usr/sbin/lsof: No such file or directory是为什么\r\n2023-03-28 07:33:34,812 [INFO] [chat_func.py:325] 使用流式传输\r\n2023-03-28 07:33:34,812 [INFO] [chat_func.py:113] 实时回答模式\r\n2023-03-28 07:33:34,813 [INFO] [chat_func.py:132] 输入token计数: 59\r\n466it [00:21, 21.76it/s]\r\n2023-03-28 07:33:57,159 [INFO] [chat_func.py:361] 传输完毕。当前token计数为[157, 164, 35, 80, 291]\r\n2023-03-28 07:33:57,159 [INFO] [chat_func.py:363] 回答为：这个错误提示是说没有找到\"/usr/sbin/lsof\"这个文件或目录，可能有以下几个原因：\r\n\r\n1. 没有安装\"lsof\"命令：这个命令需要在Linux系统上安装\"lsof\"软件包，你可以使用\"sudo apt-get install lsof\"（Debian/Ubuntu）或者\"yum install lsof\"（CentOS/RHEL）命令来安装。\r\n\r\n2. 没有执行这个命令的权限：这个命令需要在管理员权限下运行，你可以使用\"sudo\"来运行这个命令，例如：\"sudo /usr/sbin/lsof -i :8000|grep -v \"PID\" | awk '{print $2}'\"。\r\n\r\n3. 文件或目录不存：如果你确认已经安装了\"lsof\"命令，那么可能是因为\"/usr/sbin/lsof\"这个文件或目录不存在，你需要检查一下是否存在这个文件或目录。\r\n2023-03-28 07:35:01,932 [INFO] [chat_func.py:270] 输入为：shell里怎么检测命令运行出错俩\r\n2023-03-28 07:35:01,938 [INFO] [chat_func.py:325] 使用流式传输\r\n2023-03-28 07:35:01,938 [INFO] [chat_func.py:113] 实时回答模式\r\n2023-03-28 07:35:01,938 [INFO] [chat_func.py:132] 输入token计数: 23\r\n438it [00:20, 20.99it/s]\r\n2023-03-28 07:35:23,715 [INFO] [chat_func.py:361] 传输完毕。当前token计数为[157, 164, 35, 80, 291, 241]\r\n2023-03-28 07:35:23,715 [INFO] [chat_func.py:363] 回答为：要在Shell中检测命令是否运行出错，可以使用\"$?\"变量来获得上一个执行命令的退出状态码（exit status），通常，一个成功运行的命令的退出状态码为0，一个失败的命令则会返回一个非零值。\r\n\r\n例如，如果你执行一个找到的命令：\r\n\r\n\\```\r\ncommand_not_exists\r\n\\```\r\n\r\n然后可以检查\"$?\"变量，以确定是否发生了错误：\r\n\r\n\\```\r\necho $?\r\n\\```\r\n\r\n此时，你应该看到一个非零的值，通常是127，表示命令未找到或无法执行。\r\n\r\n在使用shell脚本时，我们可以根据返回码来判断命令是否成功执行，比如：\r\n\r\n\\```\r\ncommand_not_exists\r\nif [ $? -ne 0 ]; then\r\n    echo \"Command failed\"\r\nfi\r\n\\```\r\n\r\n这个代码会检查上一个命令的退出状态码，如果不为0，则输出\"Command failed\"。\r\n```\r\n\r\n\r\n### 运行环境\r\n\r\n```markdown\r\n- OS: Windows11 22H2\r\n- Browser: Chrome\r\n- Gradio version: \r\n- Python version:\r\n```\r\n\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "closed",
      "author": "miaowmint",
      "author_type": "User",
      "created_at": "2023-03-28T08:03:48Z",
      "updated_at": "2023-04-25T03:56:56Z",
      "closed_at": "2023-04-25T03:56:56Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/430/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/430",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/430",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:15.586734",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "这主要是LaTex语法与Shell脚本里的美元符冲突导致的，我想可以加个勾选框，默认不渲染LaTex",
          "created_at": "2023-03-28T08:05:26Z"
        },
        {
          "author": "Keldos-Li",
          "body": "我在想能不能换一种方式渲染LaTeX，引入mathjax或者katex的js什么的",
          "created_at": "2023-03-28T08:08:58Z"
        },
        {
          "author": "miaowmint",
          "body": "![image](https://user-images.githubusercontent.com/58991169/228172581-761f3ad3-3fe0-4fbc-b7be-bada3b3ca392.png)\r\nChatGPT好像提出了意见，又好像没有（",
          "created_at": "2023-03-28T08:14:47Z"
        },
        {
          "author": "Keldos-Li",
          "body": "我有了一个可能的引入mathjax的思路。有空我写写看",
          "created_at": "2023-03-28T17:37:38Z"
        },
        {
          "author": "Keldos-Li",
          "body": "现在换用了mathjax在前端渲染公式，同时提供了勾选框用来刷新页面是否渲染。\r\n一个`<p>`中单个的$现在不会被认为是公式。",
          "created_at": "2023-04-25T03:56:49Z"
        }
      ]
    },
    {
      "issue_number": 674,
      "title": "[Bug]: $符号导致渲染问题",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n通过 GPT-3.5-Tubro 和 GPT-4 返回的Markdown 表格格式的内容在对话框中无法正常解析\r\n\r\n<img width=\"1715\" alt=\"CleanShot 2023-04-17 at 15 30 51@2x\" src=\"https://user-images.githubusercontent.com/5654585/232415479-8486c900-bfee-40df-b901-be246ef65c04.png\">\r\n\r\n\r\n<img width=\"997\" alt=\"CleanShot 2023-04-17 at 15 31 11@2x\" src=\"https://user-images.githubusercontent.com/5654585/232415563-d51369a6-ecb4-4d4f-aa7f-30d9fdc851d9.png\">\r\n\r\n\n\n### 复现操作\n\n输入的 Prompt 如下\r\n\r\nIn a recent business report presentation, the CEO of Zana Corp. highlighted their remarkable growth in the past fiscal year. She shared that the company experienced a 15% increase in revenue, reaching $50 million, with a 12% profit margin ($6 million in net profit). The report also showcased a 20% growth in their customer base, now totaling 100,000 customers. Additionally, the company's operating expenses went up by 10%, amounting to $10 million, while the employee headcount increased by 25%, resulting in a current workforce of 500 employees. \r\n\r\nGenerate a table containing this information:\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: Mac 13.1\r\n- Browser: Edge  112.0.1722.46\r\n- Gradio version: 3.25.0\r\n- Python version:  3.9\r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "libukai",
      "author_type": "User",
      "created_at": "2023-04-17T07:33:34Z",
      "updated_at": "2023-04-25T03:51:57Z",
      "closed_at": "2023-04-23T15:51:39Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/674/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/674",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/674",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:15.767380",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "又是LaTex和美元符冲突……我想想怎么解决",
          "created_at": "2023-04-17T07:34:46Z"
        },
        {
          "author": "libukai",
          "body": "又测试了一下，不仅仅是表格中，是只要出现美元符号，就会导致显示不正常\r\n\r\n<img width=\"1168\" alt=\"CleanShot 2023-04-19 at 16 43 48@2x\" src=\"https://user-images.githubusercontent.com/5654585/233020136-808624ba-afe3-4cd6-b3e9-3562018c0a21.png\">\r\n",
          "created_at": "2023-04-19T08:44:06Z"
        },
        {
          "author": "Keldos-Li",
          "body": "emm，现已通过默认取消latex渲染的方式解决（",
          "created_at": "2023-04-23T15:51:39Z"
        },
        {
          "author": "libukai",
          "body": "> emm，现已通过默认取消latex渲染的方式解决（\r\n\r\n这倒是个釜底抽薪的解决方案，毕竟大多数普通人是用不着 Latex 的",
          "created_at": "2023-04-24T02:25:16Z"
        },
        {
          "author": "Keldos-Li",
          "body": "现在换用了mathjax在前端渲染公式，同时提供了勾选框用来刷新页面是否渲染。",
          "created_at": "2023-04-25T03:51:57Z"
        }
      ]
    },
    {
      "issue_number": 700,
      "title": "[Docker]: docker运行后log显示python文件UnicodeDecodeError错误",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\ndocker运行后log显示python文件UnicodeDecodeError错误，随后docker反复重启无法运行，我怀疑是语言环境变量的问题\r\nlinux版本Ubuntu20.04 arm64版本\n\n### 复现操作\n\n配置docker-composed文件如下:\r\nversion: \"3.0\"\r\nservices:\r\n  alist:\r\n    image: tuchuanhuhuhu/chuanhuchatgpt:latest\r\n    container_name: chatgpt\r\n    network_mode: bridge\r\n    volumes:\r\n      - \"/root/chatgpt/history:/app/history\"\r\n      - \"/root/chatgpt/config.json:/app/config.json\"\r\n    ports:\r\n      - 7860:7860 # HTTP port\r\n    restart: unless-stopped\r\n\r\n\r\n其中\n\n### 错误日志\n\n```shell\nTraceback (most recent call last):\r\n  File \"/root/.local/lib/python3.9/site-packages/commentjson/commentjson.py\", line 215, in load\r\n    return loads(fp.read(), **kwargs)\r\n  File \"/usr/local/lib/python3.9/codecs.py\", line 322, in decode\r\n    (result, consumed) = self._buffer_decode(data, self.errors, final)\r\nUnicodeDecodeError: 'utf-8' codec can't decode byte 0xc4 in position 10: invalid continuation byte\r\nDuring handling of the above exception, another exception occurred:\r\nTraceback (most recent call last):\r\n  File \"/app/ChuanhuChatbot.py\", line 8, in <module>\r\n    from modules import config\r\n  File \"/app/modules/config.py\", line 8, in <module>\r\n    from . import shared\r\n  File \"/app/modules/shared.py\", line 1, in <module>\r\n    from modules.presets import COMPLETION_URL, BALANCE_API_URL, USAGE_API_URL, API_HOST\r\n  File \"/app/modules/presets.py\", line 7, in <module>\r\n    i18n = I18nAuto()  # internationalization\r\n  File \"/app/modules/webui_locale.py\", line 9, in __init__\r\n    config = json.load(f)\r\n  File \"/root/.local/lib/python3.9/site-packages/commentjson/commentjson.py\", line 217, in load\r\n    raise JSONLibraryException(e)\r\ncommentjson.commentjson.JSONLibraryException: JSON Library Exception\r\nException thrown by library (json): 'utf-8' codec can't decode byte 0xc4 in position 10: invalid continuation byte\r\n    Traceback (most recent call last):\r\n      File \"/root/.local/lib/python3.9/site-packages/commentjson/commentjson.py\", line 215, in load\r\n        return loads(fp.read(), **kwargs)\r\n      File \"/usr/local/lib/python3.9/codecs.py\", line 322, in decode\r\n        (result, consumed) = self._buffer_decode(data, self.errors, final)\r\n    UnicodeDecodeError: 'utf-8' codec can't decode byte 0xc4 in position 10: invalid continuation byte\n```\n\n\n### 运行环境\n\n- OS: Ubuntu20.04 arm64\r\n- Docker version: version 20.10.22, build 3a2c30b\r\n- Gradio version: \r\n- Python version: Python 3.8.10\r\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "commandoccz",
      "author_type": "User",
      "created_at": "2023-04-23T17:22:18Z",
      "updated_at": "2023-04-24T03:14:51Z",
      "closed_at": "2023-04-24T03:14:51Z",
      "labels": [
        "question",
        "docker deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/700/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/700",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/700",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:15.935480",
      "comments": [
        {
          "author": "commandoccz",
          "body": "崩溃~~~~哈哈哈，我自己的问题，config.json文件我忘了切换成utf8，用的默认ansi~~~~已经OK了\r\n![image](https://user-images.githubusercontent.com/76011848/233890637-ec8059d7-90ce-4dff-953b-9dccacc586da.png)\r\n",
          "created_at": "2023-04-24T02:59:45Z"
        }
      ]
    },
    {
      "issue_number": 621,
      "title": "[Bug]: 开远程访问，在手机端使用时，safari浏览器，prompts设置了但不生效",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n开远程访问，在手机端使用时，safari浏览器，prompts设置了但不生效\n\n### 复现操作\n\n1、开远程访问\r\n2、在手机端使用safari浏览器\r\n3、prompts设置了但不生效\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "Maddaxman",
      "author_type": "User",
      "created_at": "2023-04-12T17:35:58Z",
      "updated_at": "2023-04-23T17:22:45Z",
      "closed_at": null,
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/621/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/621",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/621",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:16.086815",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "如何看出来不生效？在hugging face space中用同样的system prompt，问同样的问题呢？",
          "created_at": "2023-04-23T17:22:44Z"
        }
      ]
    },
    {
      "issue_number": 648,
      "title": "[Bug]: 我把中文论文一段话想润色一下，选择的语言也是中文，不知道为什么出来时英文",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n![image](https://user-images.githubusercontent.com/32314558/232067455-f61fe706-8f33-4aef-811f-808281147d0d.png)\r\n\n\n### 复现操作\n\nhuggingface在线部署，用中文提问润色论文\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "L-Block-C",
      "author_type": "User",
      "created_at": "2023-04-14T14:08:01Z",
      "updated_at": "2023-04-23T15:51:57Z",
      "closed_at": "2023-04-23T15:51:57Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/648/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/648",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/648",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:16.256899",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "在prompt中再加一句要求使用原语言吧……",
          "created_at": "2023-04-16T13:38:23Z"
        }
      ]
    },
    {
      "issue_number": 686,
      "title": "安装依赖时 Failed to connect to github.com port 443 after xxxx ms",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n Cloning https://github.com/huggingface/peft.git (to revision deff03f2c251534fffd2511fc2d440e84cc54b1b) to c:\\users\\52633\\appdata\\local\\temp\\pip-install-cz9j2k_s\\peft_7088e296c0874bb284087f41102426bc\r\n  Running command git clone --filter=blob:none --quiet https://github.com/huggingface/peft.git 'C:\\Users\\52633\\AppData\\Local\\Temp\\pip-install-cz9j2k_s\\peft_7088e296c0874bb284087f41102426bc'\r\n  fatal: unable to access 'https://github.com/huggingface/peft.git/': Failed to connect to github.com port 443 after 21075 ms: Couldn't connect to server\r\n  error: subprocess-exited-with-error\r\n\r\n  git clone --filter=blob:none --quiet https://github.com/huggingface/peft.git 'C:\\Users\\52633\\AppData\\Local\\Temp\\pip-install-cz9j2k_s\\peft_7088e296c0874bb284087f41102426bc' did not run successfully.\r\n  exit code: 128\r\n\r\n  See above for output.\r\n\r\n  note: This error originates from a subprocess, and is likely not a problem with pip.\r\nerror: subprocess-exited-with-error\r\n\r\ngit clone --filter=blob:none --quiet https://github.com/huggingface/peft.git 'C:\\Users\\52633\\AppData\\Local\\Temp\\pip-install-cz9j2k_s\\peft_7088e296c0874bb284087f41102426bc' did not run successfully.\r\nexit code: 128\r\n\r\nSee above for output.\r\n\r\nnote: This error originates from a subprocess, and is likely not a problem with pip.\r\n\n\n### 复现操作\n\n安装高级依赖的时候\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Maddaxman",
      "author_type": "User",
      "created_at": "2023-04-20T07:08:58Z",
      "updated_at": "2023-04-23T14:43:17Z",
      "closed_at": "2023-04-23T14:43:17Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/686/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/686",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/686",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:16.426536",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "是的，是网络原因。\n\n另外，就算网络能连上git了，也不建议直接在Windows上安装高级依赖，因为……你大概率装不上deepspeed。建议使用wsl。",
          "created_at": "2023-04-20T10:43:43Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "> 是的，是网络原因。\r\n> \r\n> 另外，就算网络能连上git了，也不建议直接在Windows上安装高级依赖，因为……你大概率装不上deepspeed。建议使用wsl。\r\n\r\nDeepSpeed就是微软开发的，但是微软不愿意支持自己的平台😂",
          "created_at": "2023-04-20T11:56:01Z"
        }
      ]
    },
    {
      "issue_number": 696,
      "title": "[功能请求]: 可以集成FASTAPI 作为服务，为其他语言提供标准swagger接口吗？",
      "body": "### 相关问题\n\n希望提供出API，便于其他语言开发者，前端人员或后端人员都可以调用这个项目的函数。 \n\n### 可能的解决办法\n\n集成fastapi，打通用户体系，提供/swagger文档，供其他语言随时调用。\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "haixinglps",
      "author_type": "User",
      "created_at": "2023-04-22T06:41:27Z",
      "updated_at": "2023-04-23T09:00:47Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/696/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/696",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/696",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:16.612728",
      "comments": [
        {
          "author": "zodostffaa",
          "body": "你可以尝试一下：https://www.gradio-staging.com/docs/main/#javascript-client",
          "created_at": "2023-04-23T06:50:12Z"
        },
        {
          "author": "lensli",
          "body": "我用python请求的时候 显示 keyerror\r\n",
          "created_at": "2023-04-23T09:00:47Z"
        }
      ]
    },
    {
      "issue_number": 564,
      "title": "[其他]: Hugging Face中ChuanhuChatGPT使用时☹️发生了错误：读取超时，无法获取对话。请检查网络连接，或者API-Key是否有效。",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 错误描述\n\n![image](https://user-images.githubusercontent.com/130142784/230590778-cf2176de-7095-464c-9c94-f8bf805f20a5.png)\r\n运行日志：gfm74 2023-04-07T09:47:11.459Z TypeError: object of type 'int' has no len()\r\ngfm74 2023-04-07T09:59:05.674Z 2023-04-07 11:59:05,674 [INFO] [chat_func.py:275] 输入为：婚礼布置\r\ngfm74 2023-04-07T09:59:05.680Z 2023-04-07 11:59:05,680 [INFO] [chat_func.py:351] 使用流式传输\r\ngfm74 2023-04-07T09:59:05.680Z 2023-04-07 11:59:05,680 [INFO] [chat_func.py:97] 实时回答模式\r\ngfm74 2023-04-07T09:59:05.680Z 2023-04-07 11:59:05,680 [INFO] [chat_func.py:120] 输入token计数: 25\r\ngfm74 2023-04-07T09:59:19.338Z \r\n\r\n但是回答内容是空白的\n\n### 复现操作\n\n1.正常打开Hugging Face \r\n2.在聊天框中输入：婚礼布置\r\n3.回答为空白，出现：☹️发生了错误：读取超时，无法获取对话。请检查网络连接，或者API-Key是否有效。\n\n### 错误日志\n\n```shell\ngfm74 2023-04-07T09:59:19.340Z Traceback (most recent call last):\r\ngfm74 2023-04-07T09:59:19.340Z   File \"/home/user/.local/lib/python3.8/site-packages/urllib3/response.py\", line 444, in _error_catcher\r\ngfm74 2023-04-07T09:59:19.340Z     yield\r\ngfm74 2023-04-07T09:59:19.340Z   File \"/home/user/.local/lib/python3.8/site-packages/urllib3/response.py\", line 828, in read_chunked\r\ngfm74 2023-04-07T09:59:19.340Z     self._update_chunk_length()\r\ngfm74 2023-04-07T09:59:19.340Z   File \"/home/user/.local/lib/python3.8/site-packages/urllib3/response.py\", line 758, in _update_chunk_length\r\ngfm74 2023-04-07T09:59:19.340Z     line = self._fp.fp.readline()\r\ngfm74 2023-04-07T09:59:19.340Z   File \"/usr/local/lib/python3.8/socket.py\", line 669, in readinto\r\ngfm74 2023-04-07T09:59:19.340Z     return self._sock.recv_into(b)\r\ngfm74 2023-04-07T09:59:19.340Z   File \"/usr/local/lib/python3.8/ssl.py\", line 1241, in recv_into\r\ngfm74 2023-04-07T09:59:19.340Z     return self.read(nbytes, buffer)\r\ngfm74 2023-04-07T09:59:19.340Z   File \"/usr/local/lib/python3.8/ssl.py\", line 1099, in read\r\ngfm74 2023-04-07T09:59:19.340Z     return self._sslobj.read(len, buffer)\r\ngfm74 2023-04-07T09:59:19.340Z socket.timeout: The read operation timed out\r\ngfm74 2023-04-07T09:59:19.340Z \r\ngfm74 2023-04-07T09:59:19.340Z During handling of the above exception, another exception occurred:\r\ngfm74 2023-04-07T09:59:19.340Z \r\ngfm74 2023-04-07T09:59:19.340Z Traceback (most recent call last):\r\ngfm74 2023-04-07T09:59:19.340Z   File \"/home/user/.local/lib/python3.8/site-packages/requests/models.py\", line 816, in generate\r\ngfm74 2023-04-07T09:59:19.340Z     yield from self.raw.stream(chunk_size, decode_content=True)\r\ngfm74 2023-04-07T09:59:19.340Z   File \"/home/user/.local/lib/python3.8/site-packages/urllib3/response.py\", line 624, in stream\r\ngfm74 2023-04-07T09:59:19.340Z     for line in self.read_chunked(amt, decode_content=decode_content):\r\ngfm74 2023-04-07T09:59:19.340Z   File \"/home/user/.local/lib/python3.8/site-packages/urllib3/response.py\", line 857, in read_chunked\r\ngfm74 2023-04-07T09:59:19.340Z     self._original_response.close()\r\ngfm74 2023-04-07T09:59:19.340Z   File \"/usr/local/lib/python3.8/contextlib.py\", line 131, in __exit__\r\ngfm74 2023-04-07T09:59:19.340Z     self.gen.throw(type, value, traceback)\r\ngfm74 2023-04-07T09:59:19.340Z   File \"/home/user/.local/lib/python3.8/site-packages/urllib3/response.py\", line 449, in _error_catcher\r\ngfm74 2023-04-07T09:59:19.340Z     raise ReadTimeoutError(self._pool, None, \"Read timed out.\")\r\ngfm74 2023-04-07T09:59:19.340Z urllib3.exceptions.ReadTimeoutError: HTTPSConnectionPool(host='api.openai.com', port=443): Read timed out.\r\ngfm74 2023-04-07T09:59:19.340Z \r\ngfm74 2023-04-07T09:59:19.340Z During handling of the above exception, another exception occurred:\r\ngfm74 2023-04-07T09:59:19.340Z \r\ngfm74 2023-04-07T09:59:19.340Z Traceback (most recent call last):\r\ngfm74 2023-04-07T09:59:19.340Z   File \"/home/user/.local/lib/python3.8/site-packages/gradio/routes.py\", line 393, in run_predict\r\ngfm74 2023-04-07T09:59:19.340Z     output = await app.get_blocks().process_api(\r\ngfm74 2023-04-07T09:59:19.340Z   File \"/home/user/.local/lib/python3.8/site-packages/gradio/blocks.py\", line 1108, in process_api\r\ngfm74 2023-04-07T09:59:19.340Z     result = await self.call_function(\r\ngfm74 2023-04-07T09:59:19.340Z   File \"/home/user/.local/lib/python3.8/site-packages/gradio/blocks.py\", line 929, in call_function\r\ngfm74 2023-04-07T09:59:19.340Z     prediction = await anyio.to_thread.run_sync(\r\ngfm74 2023-04-07T09:59:19.340Z   File \"/home/user/.local/lib/python3.8/site-packages/anyio/to_thread.py\", line 31, in run_sync\r\ngfm74 2023-04-07T09:59:19.340Z     return await get_asynclib().run_sync_in_worker_thread(\r\ngfm74 2023-04-07T09:59:19.340Z   File \"/home/user/.local/lib/python3.8/site-packages/anyio/_backends/_asyncio.py\", line 937, in run_sync_in_worker_thread\r\ngfm74 2023-04-07T09:59:19.340Z     return await future\r\ngfm74 2023-04-07T09:59:19.340Z   File \"/home/user/.local/lib/python3.8/site-packages/anyio/_backends/_asyncio.py\", line 867, in run\r\ngfm74 2023-04-07T09:59:19.340Z     result = context.run(func, *args)\r\ngfm74 2023-04-07T09:59:19.340Z   File \"/home/user/.local/lib/python3.8/site-packages/gradio/utils.py\", line 490, in async_iteration\r\ngfm74 2023-04-07T09:59:19.340Z     return next(iterator)\r\ngfm74 2023-04-07T09:59:19.340Z   File \"/home/user/app/modules/chat_func.py\", line 365, in predict\r\ngfm74 2023-04-07T09:59:19.340Z     for chatbot, history, status_text, all_token_counts in iter:\r\ngfm74 2023-04-07T09:59:19.340Z   File \"/home/user/app/modules/chat_func.py\", line 148, in stream_predict\r\ngfm74 2023-04-07T09:59:19.340Z     for chunk in tqdm(response.iter_lines()):\r\ngfm74 2023-04-07T09:59:19.340Z   File \"/home/user/.local/lib/python3.8/site-packages/tqdm/std.py\", line 1178, in __iter__\r\ngfm74 2023-04-07T09:59:19.340Z     for obj in iterable:\r\ngfm74 2023-04-07T09:59:19.340Z   File \"/home/user/.local/lib/python3.8/site-packages/requests/models.py\", line 865, in iter_lines\r\ngfm74 2023-04-07T09:59:19.340Z     for chunk in self.iter_content(\r\ngfm74 2023-04-07T09:59:19.340Z   File \"/home/user/.local/lib/python3.8/site-packages/requests/models.py\", line 822, in generate\r\ngfm74 2023-04-07T09:59:19.340Z     raise ConnectionError(e)\r\ngfm74 2023-04-07T09:59:19.340Z requests.exceptions.ConnectionError: HTTPSConnectionPool(host='api.openai.com', port=443): Read timed out.\n```\n\n\n### 运行环境\n\n- OS: \r\n- Browser: Chrome\r\n- Gradio version: \r\n- Python version: \r\n(或您的其他运行环境信息)\r\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "yignshi",
      "author_type": "User",
      "created_at": "2023-04-07T10:14:31Z",
      "updated_at": "2023-04-19T14:35:16Z",
      "closed_at": "2023-04-19T14:35:16Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 18,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/564/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/564",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/564",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:16.781354",
      "comments": [
        {
          "author": "lingyun66",
          "body": "我也是这样,今天无论怎么试都不行,还更新了下最新的项目版本",
          "created_at": "2023-04-07T10:28:14Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "在`modules/presets.py`里把\r\n```\r\ntimeout_streaming = 10  # 流式对话时的超时时间\r\n```\r\n这个超时时间调高试试",
          "created_at": "2023-04-07T10:29:47Z"
        },
        {
          "author": "lijiachang",
          "body": "\r\n我也是这样,今天无论怎么试都不行,还更新了下最新的项目版本\r\n\r\n",
          "created_at": "2023-04-07T10:37:33Z"
        },
        {
          "author": "yignshi",
          "body": "超时时间调高后可以使用聊天功能，但是其他功能还是不能使用\r\n",
          "created_at": "2023-04-07T10:40:13Z"
        },
        {
          "author": "yignshi",
          "body": "而且，大概率只能回答一次",
          "created_at": "2023-04-07T10:49:19Z"
        }
      ]
    },
    {
      "issue_number": 490,
      "title": "[Bug]: 構建索引有問題",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue。\n\n### 错误表现\n\n構建索引時出現error了, 我已經安裝了llama_index 0.5.3的最版本了\n\n### 复现操作\n\n構建索引時出現error了, 我已經安裝了llama_index 0.5.3的最版本了\n\n### 错误日志\n\n```shell\nC:\\Users\\wmcha\\.conda\\envs\\pythonProject\\lib\\site-packages\\langchain\\llms\\openai.py:608: UserWarning: You are trying to use a chat model. This way of initializing it is no longer supported. Instead, please use: `from langchain.chat_models import ChatOpenAI`\r\n  warnings.warn(\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\wmcha\\.conda\\envs\\pythonProject\\lib\\site-packages\\gradio\\routes.py\", line 393, in run_predict\r\n    output = await app.get_blocks().process_api(\r\n  File \"C:\\Users\\wmcha\\.conda\\envs\\pythonProject\\lib\\site-packages\\gradio\\blocks.py\", line 1108, in process_api\r\n    result = await self.call_function(\r\n  File \"C:\\Users\\wmcha\\.conda\\envs\\pythonProject\\lib\\site-packages\\gradio\\blocks.py\", line 929, in call_function\r\n    prediction = await anyio.to_thread.run_sync(\r\n  File \"C:\\Users\\wmcha\\.conda\\envs\\pythonProject\\lib\\site-packages\\anyio\\to_thread.py\", line 31, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n  File \"C:\\Users\\wmcha\\.conda\\envs\\pythonProject\\lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 937, in run_sync_in_worker_thread\r\n    return await future\r\n  File \"C:\\Users\\wmcha\\.conda\\envs\\pythonProject\\lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 867, in run\r\n    result = context.run(func, *args)\r\n  File \"C:\\Users\\wmcha\\.conda\\envs\\pythonProject\\lib\\site-packages\\gradio\\utils.py\", line 490, in async_iteration\r\n    return next(iterator)\r\n  File \"D:\\Users\\wmcha\\PycharmProjects\\pythonProject\\ChuanhuChatGPT-main\\modules\\chat_func.py\", line 296, in predict\r\n    service_context = ServiceContext.from_defaults(llm_predictor=llm_predictor, prompt_helper=prompt_helper)\r\nNameError: name 'ServiceContext' is not defined\n```\n\n\n### 运行环境\n\n```markdown\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version:\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "bloomin1",
      "author_type": "User",
      "created_at": "2023-03-31T18:13:15Z",
      "updated_at": "2023-04-19T14:28:14Z",
      "closed_at": "2023-04-19T14:28:14Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/490/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/490",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/490",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:16.990988",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "总之还是依赖安装的问题……可能得尝试自行解决一下。过去这么久更新一下试试或许就行了（？）",
          "created_at": "2023-04-19T14:28:14Z"
        }
      ]
    },
    {
      "issue_number": 472,
      "title": "[Docker]: 多用户的docker run要怎么写？",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n根据说明新建了api_key.txt和auth.json设置多用户的新功能，但按之前的做法无法生效，请问多用户的docker run要怎么写？\r\n另外，增加了多用户是不是可以进一步开发限制用户是否能选择模型等功能。\r\n谢谢大佬！\n\n### 复现操作\n\n1、正常git pull\r\n2、正常本地docker build\r\n3、正常docker run\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n_No response_\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "wubin2",
      "author_type": "User",
      "created_at": "2023-03-30T13:25:57Z",
      "updated_at": "2023-04-19T14:24:54Z",
      "closed_at": "2023-04-19T14:24:54Z",
      "labels": [
        "question",
        "docker deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/472/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/472",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/472",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:17.178340",
      "comments": [
        {
          "author": "Sligcm",
          "body": "同问。",
          "created_at": "2023-04-09T10:57:06Z"
        },
        {
          "author": "Keldos-Li",
          "body": "现在，请使用新的配置在config.json中的方式来运行。",
          "created_at": "2023-04-19T14:24:54Z"
        }
      ]
    },
    {
      "issue_number": 599,
      "title": "用docker部署方式部署了，myapikey也填了，就是api_host填啥都不行，填自己的IP吧，报连接池最大重试超限；填openai.com吧，报连接ipapi失败",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n我确认api-key都是能正常用的，且代理expressvpn也正常，特别验证了这两个方面，毋庸置疑。就是api_host不知道填啥。1.填宿主机IP，报“获取API使用情况失败:HTTPSConnectionPool(host='192.168.33.10', port=443): Max retries exceeded with url: /dashboard/billing/usage?start_date=2023-04-01&end_date=2023-04-30 (Caused by NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x7f2e755720d0>: Failed to establish a new connection: [Errno 111] Connection refused'))”，docker启动方式为：\r\ndocker run -d --name chatgpt \\\r\n\t-e my_api_key=\"sk-xxxxxxxxxxxxxxxxxxxxxxx\" \\\r\n\t-e api_host=\"192.168.33.10\" \\\r\n\t-v ~/chatGPThistory:/app/history \\\r\n\t-p 7860:7860 \\\r\n\ttuchuanhuhuhu/chuanhuchatgpt:latest\r\n，然后看到Issues里有在讨论代理的问题，我想是不是应该填openai.com或者api.openai.com，于是我删除容器，重新启动容器为：\r\ndocker run -d --name chatgpt \\\r\n\t-e my_api_key=\"sk-xxxxxxxxxxxxxxxxxxxxxxx\" \\\r\n\t-e api_host=\"openai.com\" \\\r\n\t-v ~/chatGPThistory:/app/history \\\r\n\t-p 7860:7860 \\\r\n\ttuchuanhuhuhu/chuanhuchatgpt:latest\r\n，提问后，后台就报：\r\n2023-04-12 01:51:19,327 [WARNING] [utils.py:297] 无法获取IP地址信息。\r\n{'error': True, 'reason': '连接ipapi失败'}\r\nReloading javascript...\r\n2023-04-12 01:51:19,435 [INFO] [ChuanhuChatbot.py:425] \r\n川虎的温馨提示：访问 http://localhost:7860 查看界面\r\nRunning on local URL:  http://0.0.0.0:7860\r\n\r\nTo create a public link, set `share=True` in `launch()`.\r\n2023-04-12 01:51:56,114 [INFO] [base_model.py:188] 输入为：who are you。\r\n请教一下，api_host我是该填啥呢？\n\n### 复现操作\n\n1.拉取docker镜像，镜像大小>6G\r\n2.按照大佬介绍方式摸索着启动容器，\r\n3.界面能看到“川虎”招牌，提问就无响应。\n\n### 错误日志\n\n```shell\n1.api_host填openai.com日志如下：\r\n2023-04-12 01:51:10,429 [INFO] [models.py:452] 正在加载OpenAI模型: gpt-3.5-turbo\r\n2023-04-12 01:51:10,429 [INFO] [models.py:481] 模型设置为了： gpt-3.5-turbo\r\n2023-04-12 01:51:19,327 [WARNING] [utils.py:297] 无法获取IP地址信息。\r\n{'error': True, 'reason': '连接ipapi失败'}\r\nReloading javascript...\r\n2023-04-12 01:51:19,435 [INFO] [ChuanhuChatbot.py:425] \r\n川虎的温馨提示：访问 http://localhost:7860 查看界面\r\nRunning on local URL:  http://0.0.0.0:7860\r\n\r\nTo create a public link, set `share=True` in `launch()`.\r\n2023-04-12 01:51:56,114 [INFO] [base_model.py:188] 输入为：who are you\r\n2.api_host填宿主机IP，日志如下：\r\n2023-04-12 01:11:43,388 [INFO] [models.py:452] 正在加载OpenAI模型: gpt-4\r\n2023-04-12 01:11:43,388 [INFO] [models.py:481] 模型设置为了： gpt-4\r\n2023-04-12 01:12:24,715 [ERROR] [models.py:84] 获取API使用情况失败:HTTPSConnectionPool(host='10.179.79.250', port=443): Max retries exceeded with url: /dashboard/billing/usage?start_date=2023-04-01&end_date=2023-04-30 (Caused by NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x7f2e765de8e0>: Failed to establish a new connection: [Errno 111] Connection refused'))\r\n2023-04-12 01:12:24,856 [INFO] [base_model.py:188] 输入为：  do you know chatgpt?\n```\n\n\n### 运行环境\n\n- OS: linux/amd64 \r\n- Docker version: 20.10.21\r\n- Gradio version: 无\r\n- Python version: 无\r\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "ahboer",
      "author_type": "User",
      "created_at": "2023-04-12T02:19:12Z",
      "updated_at": "2023-04-19T14:22:56Z",
      "closed_at": "2023-04-19T14:22:56Z",
      "labels": [
        "question",
        "docker deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/599/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/599",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/599",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:17.396758",
      "comments": [
        {
          "author": "Qwerty4401",
          "body": "不用设置api-host\r\n连接ipapi失败不影响用",
          "created_at": "2023-04-12T07:40:50Z"
        },
        {
          "author": "ahboer",
          "body": "> \r\n不设置api_host就是下面的错了。。。。。。。\r\n获取API使用情况失败:Invalid URL 'https:///dashboard/billing/usage?start_date=2023-04-01&end_date=2023-04-30': No host supplied",
          "created_at": "2023-04-12T08:13:00Z"
        },
        {
          "author": "Qwerty4401",
          "body": "不设置api-host需要删掉那一条命令。。你的异常里面的链接域名那里是空的。\r\n没删那一行命令相当于你还是加了值为空的api-host",
          "created_at": "2023-04-12T08:45:13Z"
        },
        {
          "author": "ahboer",
          "body": "不设置的确不报那个错了，但还是不能访问，估计跟网络有关，所以，我修改了docker的网络为host，就可以访问了。\r\ndocker run -d --name chatgpt  --net=host -e my_api_key=\"sk-XXXXXXXXXXX\"  --add-host=\"api.openai.com:104.18.7.192\" -v ~/chatGPThistory:/app/history tuchuanhuhuhu/chuanhuchatgpt:latest",
          "created_at": "2023-04-14T02:30:55Z"
        }
      ]
    },
    {
      "issue_number": 667,
      "title": "[Docker]: IsADirectoryError: [Errno 21] Is a directory: 'config.json'",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n\r\nTraceback (most recent call last):\r\n\r\n\r\n  File \"/app/ChuanhuChatbot.py\", line 8, in <module>\r\n\r\n\r\n    from modules import config\r\n\r\n\r\n  File \"/app/modules/config.py\", line 8, in <module>\r\n\r\n\r\n    from . import shared\r\n\r\n\r\n  File \"/app/modules/shared.py\", line 1, in <module>\r\n\r\n\r\n    from modules.presets import COMPLETION_URL, BALANCE_API_URL, USAGE_API_URL, API_HOST\r\n\r\n\r\n  File \"/app/modules/presets.py\", line 7, in <module>\r\n\r\n\r\n    i18n = I18nAuto()  # internationalization\r\n\r\n\r\n  File \"/app/modules/webui_locale.py\", line 8, in __init__\r\n\r\n\r\n    with open(\"config.json\", \"r\", encoding='utf-8') as f:\r\n\r\n\r\nIsADirectoryError: [Errno 21] Is a directory: 'config.json'\r\n\t\n\n### 复现操作\n\n\r\nTraceback (most recent call last):\r\n\r\n\r\n  File \"/app/ChuanhuChatbot.py\", line 8, in <module>\r\n\r\n\r\n    from modules import config\r\n\r\n\r\n  File \"/app/modules/config.py\", line 8, in <module>\r\n\r\n\r\n    from . import shared\r\n\r\n\r\n  File \"/app/modules/shared.py\", line 1, in <module>\r\n\r\n\r\n    from modules.presets import COMPLETION_URL, BALANCE_API_URL, USAGE_API_URL, API_HOST\r\n\r\n\r\n  File \"/app/modules/presets.py\", line 7, in <module>\r\n\r\n\r\n    i18n = I18nAuto()  # internationalization\r\n\r\n\r\n  File \"/app/modules/webui_locale.py\", line 8, in __init__\r\n\r\n\r\n    with open(\"config.json\", \"r\", encoding='utf-8') as f:\r\n\r\n\r\nIsADirectoryError: [Errno 21] Is a directory: 'config.json'\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Docker version: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "adu19922",
      "author_type": "User",
      "created_at": "2023-04-16T01:17:02Z",
      "updated_at": "2023-04-19T14:18:32Z",
      "closed_at": "2023-04-19T14:18:32Z",
      "labels": [
        "question",
        "docker deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/667/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/667",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/667",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:17.585310",
      "comments": [
        {
          "author": "plucury",
          "body": "使用的docker 运行命令是什么？提示config.json是一个目录而不是文件？",
          "created_at": "2023-04-16T03:07:12Z"
        },
        {
          "author": "NekoYu",
          "body": "> 使用的docker 运行命令是什么？提示config.json是一个目录而不是文件？\r\n\r\n我试了，默认用命令生成的那个是个文件夹，要进到命令建出来的/ChuanhuChatGPT目录里面把config.json这个自动生成的文件夹删掉，然后新建一个config.json的文件自己写好才行",
          "created_at": "2023-04-16T07:46:46Z"
        },
        {
          "author": "Nativu5",
          "body": "貌似最新的 Docker 镜像更新后，文档没有相应地更新。\r\nhttps://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B#%E5%85%A8%E7%A8%8B%E4%BD%BF%E7%94%A8docker-%E4%B8%BAchuanhuchatgpt-%E5%BC%80%E5%90%AFhttps",
          "created_at": "2023-04-16T08:34:37Z"
        }
      ]
    },
    {
      "issue_number": 675,
      "title": "[Bug]: 使用local_embedding时，索引加载不了",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n2023-04-17 17:36:57,668 [INFO] [models.py:512] 正在加载ChatGLM模型: chatglm-6b-int4\r\n2023-04-17 17:36:57,668 [INFO] [models.py:535] Model is set to:  chatglm-6b-int4\r\n2023-04-17 17:36:59,364 [INFO] [llama_func.py:131] 找到了缓存的索引文件，加载中……\r\n2023-04-17 17:37:00,676 [INFO] [llama_func.py:131] 找到了缓存的索引文件，加载中……\r\n2023-04-17 17:37:01,843 [INFO] [llama_func.py:131] 找到了缓存的索引文件，加载中……\r\n2023-04-17 17:37:02,835 [INFO] [llama_func.py:131] 找到了缓存的索引文件，加载中……\r\n2023-04-17 17:37:03,803 [INFO] [llama_func.py:131] 找到了缓存的索引文件，加载中……\r\n2023-04-17 17:37:04,770 [INFO] [llama_func.py:131] 找到了缓存的索引文件，加载中……\r\n2023-04-17 17:37:06,173 [INFO] [llama_func.py:131] 找到了缓存的索引文件，加载中……\r\n2023-04-17 17:37:07,855 [INFO] [llama_func.py:131] 找到了缓存的索引文件，加载中……\r\n2023-04-17 17:37:09,361 [INFO] [llama_func.py:131] 找到了缓存的索引文件，加载中……\n\n### 复现操作\n\nset  \"local_embedding\": true,\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "shibing624",
      "author_type": "User",
      "created_at": "2023-04-17T09:40:44Z",
      "updated_at": "2023-04-17T13:00:50Z",
      "closed_at": "2023-04-17T13:00:50Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/675/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/675",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/675",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:17.826053",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "这个bug昨天被修复了。请更新到最新版代码。",
          "created_at": "2023-04-17T13:00:50Z"
        }
      ]
    },
    {
      "issue_number": 613,
      "title": "[功能请求]:  保存高级设置中各类参数和代理设置",
      "body": "### 相关问题\n\n高级设置中各类参数和代理设置最好能保存，每次打开都要重新设置，比较麻烦\n\n### 可能的解决办法\n\n保存设置到本地onfig.json, 启动时加载\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "yinhui1984",
      "author_type": "User",
      "created_at": "2023-04-12T11:11:23Z",
      "updated_at": "2023-04-17T05:31:52Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/613/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/613",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/613",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:17.979012",
      "comments": [
        {
          "author": "HsunGong",
          "body": "你如果是自己开启服务，建议直接在config.json里面修改；如果你是跟别人一起用服务，这个涉及到多用户问题，需要code里支持对多用户数据的访问，感觉比较麻烦。",
          "created_at": "2023-04-13T17:01:17Z"
        }
      ]
    },
    {
      "issue_number": 294,
      "title": "[本地部署] 更改API地址后发生了错误：连接超时，终端无报错",
      "body": "### 错误描述\r\n更改API地址后，UI右上角显示：☹️发生了错误：连接超时，无法获取对话。请检查网络连接，或者API-Key是否有效。\r\n![image](https://user-images.githubusercontent.com/44390166/226844274-690b66a6-8000-4781-be47-308da774b750.png)\r\n不更改API地址时，使用代理工具时使用一切正常。\r\n\r\n### 复现操作\r\n你之前干了什么，然后出现了错误呢？例如：\r\n1. 正常完成本地部署\r\n2. 切换API地址并确定，具体可看下面终端输出\r\n3. ChatGPT 没有输出内容，UI右上角显示：☹️发生了错误：连接超时，无法获取对话。请检查网络连接，或者API-Key是否有效\r\n4. postman使用本API地址一切正常\r\n![image](https://user-images.githubusercontent.com/44390166/226846089-39b8d1e9-1e45-46f3-b0a6-8ea1dcecb181.png)\r\n\r\n\r\n### 错误截图\r\n![image](https://user-images.githubusercontent.com/44390166/226844274-690b66a6-8000-4781-be47-308da774b750.png)\r\n\r\n### 终端（控制台）中的错误报告\r\n![image](https://user-images.githubusercontent.com/44390166/226845552-2925c008-c700-4136-8f5b-04259a860798.png)\r\n\r\n\r\n```console\r\n川虎的温馨提示：访问 http://localhost:7860 查看界面\r\nRunning on local URL:  http://127.0.0.1:7860\r\n\r\nTo create a public link, set `share=True` in `launch()`.\r\nINFO:root:API地址更改为了https://*******.xyz/v1/chat/completions\r\nINFO:root:API密钥更改为了sk-P*******************************************a29B\r\nINFO:root:输入为：在\r\nINFO:root:使用流式传输\r\nINFO:root:实时回答模式\r\nINFO:root:输入token计数: 19\r\nINFO:root:传输完毕。当前token计数为[19]\r\nINFO:root:回答为：\r\nINFO:root:输入为：你好，你是谁？\r\nINFO:root:使用流式传输\r\nINFO:root:实时回答模式\r\nINFO:root:输入token计数: 15\r\nINFO:root:传输完毕。当前token计数为[19, 15]\r\nINFO:root:回答为：\r\nINFO:root:输入为：你是谁\r\nINFO:root:使用流式传输\r\nINFO:root:实时回答模式\r\nINFO:root:输入token计数: 11\r\nINFO:root:传输完毕。当前token计数为[19, 15, 11]\r\nINFO:root:回答为：\r\n```\r\n\r\n### 运行环境\r\n#### 桌面系统\r\n**请填写以下列表：**\r\n\r\n - OS: Windows10 LTSC\r\n - Browser: Chrome\r\n\r\n#### 运行依赖\r\n\r\n```shell\r\n> pip show gradio\r\nName: gradio\r\nVersion: 3.22.1\r\n> python --version\r\nPython 3.11.0\r\n ```",
      "state": "closed",
      "author": "Peins",
      "author_type": "User",
      "created_at": "2023-03-22T08:43:26Z",
      "updated_at": "2023-04-17T01:28:33Z",
      "closed_at": "2023-04-16T02:46:27Z",
      "labels": [
        "bug",
        "question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/294/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/294",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/294",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:18.247008",
      "comments": [
        {
          "author": "Peins",
          "body": "> 这个老问题了，之前也好多人遇到过（包括我），去看一下readme里的疑难杂症解决→常见问题→配置代理，基本就可以解决啦。\r\n\r\n我没有代理啊，只有cf woker或者云函数反代，只能用这个更改API地址，我qqbot用的这个API地址都是正常的。",
          "created_at": "2023-03-23T04:32:33Z"
        },
        {
          "author": "Peins",
          "body": "看来是bug，打了个日志，API地址并没有修改成功\r\n在源代码打日志的地方：chat_func.py:\r\n```ptyhon\r\n    # 如果有代理，使用代理发送请求，否则使用默认设置发送请求\r\n    if proxies:\r\n        response = requests.post(\r\n            API_URL,\r\n            headers=headers,\r\n            json=payload,\r\n            stream=True,\r\n            timeout=timeout,\r\n            pr",
          "created_at": "2023-03-23T06:20:13Z"
        },
        {
          "author": "Peins",
          "body": "可能是因为chat_func.py已经在导入presets.py模块并加载了它的API_URL值，所以即使在utils.py模块中修改了它，chat_func.py仍然使用之前加载的原始值。\r\n我在presets.py中加入了更新全局参数API_URL的函数，并在utils.py中def change_api_url(url):调用：\r\n```python\r\ndef update_api(url):\r\n    global API_URL\r\n    API_URL = url\r\n    print(\"presets更改API:\"+API_URL)\r\n```\r\n并将chat_func.py中的s",
          "created_at": "2023-03-23T09:20:15Z"
        },
        {
          "author": "Keldos-Li",
          "body": "最新的代码或许已经解决了该错误。请尝试更新一下看看。",
          "created_at": "2023-04-14T13:50:42Z"
        }
      ]
    },
    {
      "issue_number": 561,
      "title": "[本地部署]: 上传索引文件后，构建索引文件失败",
      "body": "### 是否已存在现有反馈与解答？\r\n\r\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\r\n\r\n### 是否是一个代理配置相关的疑问？\r\n\r\n- [X] 我确认这不是一个代理配置相关的疑问。\r\n\r\n### 错误描述\r\n\r\n![image](https://user-images.githubusercontent.com/107405350/230539433-9d4b8448-379d-470f-bab6-0a8b725b7da2.png)\r\n![image](https://user-images.githubusercontent.com/107405350/230539565-6f5826fe-e87c-4f20-b9d9-6c241e56d8a9.png)\r\n\r\n\r\n\r\n### 复现操作\r\n\r\n1.花了我一天的时间，终于学会了吧 requirements.txt 的llama_index==0.5.5删除，然后pip install 并所有upgrade 消除了llama_index常见问题中langchain的问题\r\n![image](https://user-images.githubusercontent.com/107405350/230539990-7ade8012-9a18-4832-a373-1c9779be7094.png)\r\n2.然后心满意足地在凌晨5点钟终于尝试开始睡觉，醒来后，第一时间想着打开新世界的大门然而并没有。\r\n\r\n\r\n### 错误日志\r\n\r\n```shell\r\n--- Logging error ---\r\nTraceback (most recent call last):\r\n  File \"F:\\ChuanhuChatGPT-main\\modules\\llama_func.py\", line 53, in get_documents\r\n    pdftext = parse_pdf(filepath, two_column).text\r\n  File \"F:\\ChuanhuChatGPT-main\\modules\\pdf_func.py\", line 87, in parse_pdf\r\n    title, user_info, first_page = get_title_with_cropped_page(pdf.pages[0])\r\n  File \"F:\\ChuanhuChatGPT-main\\modules\\pdf_func.py\", line 64, in get_title_with_cropped_page\r\n    user_info = [i[\"text\"] for i in extract_words(first_page.within_bbox((x0,title_bottom,x1,top)))]\r\n  File \"F:\\anaconda3\\envs\\chatgpt\\lib\\site-packages\\pdfplumber\\page.py\", line 334, in within_bbox\r\n    return CroppedPage(\r\n  File \"F:\\anaconda3\\envs\\chatgpt\\lib\\site-packages\\pdfplumber\\page.py\", line 464, in __init__\r\n    test_proposed_bbox(self.bbox, parent_page.bbox)\r\n  File \"F:\\anaconda3\\envs\\chatgpt\\lib\\site-packages\\pdfplumber\\page.py\", line 428, in test_proposed_bbox\r\n    bbox_area = utils.calculate_area(bbox)\r\n  File \"F:\\anaconda3\\envs\\chatgpt\\lib\\site-packages\\pdfplumber\\utils\\geometry.py\", line 70, in calculate_area\r\n    raise ValueError(f\"{bbox} has a negative width or height.\")\r\nValueError: (0, 719.41908, 595.276, 0) has a negative width or height.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"F:\\ChuanhuChatGPT-main\\modules\\llama_func.py\", line 117, in construct_index\r\n    documents = get_documents(file_src)\r\n  File \"F:\\ChuanhuChatGPT-main\\modules\\llama_func.py\", line 59, in get_documents\r\n    pdftext += page.extract_text()\r\n  File \"F:\\anaconda3\\envs\\chatgpt\\lib\\site-packages\\PyPDF2\\_page.py\", line 1851, in extract_text\r\n    return self._extract_text(\r\n  File \"F:\\anaconda3\\envs\\chatgpt\\lib\\site-packages\\PyPDF2\\_page.py\", line 1342, in _extract_text\r\n    cmaps[f] = build_char_map(f, space_width, obj)\r\n  File \"F:\\anaconda3\\envs\\chatgpt\\lib\\site-packages\\PyPDF2\\_cmap.py\", line 28, in build_char_map\r\n    map_dict, space_code, int_entry = parse_to_unicode(ft, space_code)\r\n  File \"F:\\anaconda3\\envs\\chatgpt\\lib\\site-packages\\PyPDF2\\_cmap.py\", line 194, in parse_to_unicode\r\n    cm = prepare_cm(ft)\r\n  File \"F:\\anaconda3\\envs\\chatgpt\\lib\\site-packages\\PyPDF2\\_cmap.py\", line 207, in prepare_cm\r\n    tu = ft[\"/ToUnicode\"]\r\n  File \"F:\\anaconda3\\envs\\chatgpt\\lib\\site-packages\\PyPDF2\\generic\\_data_structures.py\", line 266, in __getitem__\r\n    return dict.__getitem__(self, key).get_object()\r\n  File \"F:\\anaconda3\\envs\\chatgpt\\lib\\site-packages\\PyPDF2\\generic\\_base.py\", line 259, in get_object\r\n    obj = self.pdf.get_object(self)\r\n  File \"F:\\anaconda3\\envs\\chatgpt\\lib\\site-packages\\PyPDF2\\_reader.py\", line 1269, in get_object\r\n    retval = self._encryption.decrypt_object(\r\n  File \"F:\\anaconda3\\envs\\chatgpt\\lib\\site-packages\\PyPDF2\\_encryption.py\", line 761, in decrypt_object\r\n    return cf.decrypt_object(obj)\r\n  File \"F:\\anaconda3\\envs\\chatgpt\\lib\\site-packages\\PyPDF2\\_encryption.py\", line 185, in decrypt_object\r\n    obj._data = self.stmCrypt.decrypt(obj._data)\r\n  File \"F:\\anaconda3\\envs\\chatgpt\\lib\\site-packages\\PyPDF2\\_encryption.py\", line 147, in decrypt\r\n    raise DependencyError(\"PyCryptodome is required for AES algorithm\")\r\nPyPDF2.errors.DependencyError: PyCryptodome is required for AES algorithm\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"F:\\anaconda3\\envs\\chatgpt\\lib\\logging\\__init__.py\", line 1100, in emit\r\n    msg = self.format(record)\r\n  File \"F:\\anaconda3\\envs\\chatgpt\\lib\\logging\\__init__.py\", line 943, in format\r\n    return fmt.format(record)\r\n  File \"F:\\anaconda3\\envs\\chatgpt\\lib\\logging\\__init__.py\", line 678, in format\r\n    record.message = record.getMessage()\r\n  File \"F:\\anaconda3\\envs\\chatgpt\\lib\\logging\\__init__.py\", line 368, in getMessage\r\n    msg = msg % self.args\r\nTypeError: not all arguments converted during string formatting\r\nCall stack:\r\n  File \"F:\\anaconda3\\envs\\chatgpt\\lib\\threading.py\", line 973, in _bootstrap\r\n    self._bootstrap_inner()\r\n  File \"F:\\anaconda3\\envs\\chatgpt\\lib\\threading.py\", line 1016, in _bootstrap_inner\r\n    self.run()\r\n  File \"F:\\anaconda3\\envs\\chatgpt\\lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 867, in run\r\n    result = context.run(func, *args)\r\n  File \"F:\\anaconda3\\envs\\chatgpt\\lib\\site-packages\\gradio\\utils.py\", line 490, in async_iteration\r\n    return next(iterator)\r\n  File \"F:\\ChuanhuChatGPT-main\\modules\\chat_func.py\", line 289, in predict\r\n    index = construct_index(openai_api_key, file_src=files)\r\n  File \"F:\\ChuanhuChatGPT-main\\modules\\llama_func.py\", line 131, in construct_index\r\n    logging.error(\"索引构建失败！\", e)\r\nMessage: '索引构建失败！'\r\nArguments: (DependencyError('PyCryptodome is required for AES algorithm'),)\r\nPyCryptodome is required for AES algorithm\r\n2023-04-07 12:13:09,084 [INFO] [chat_func.py:291] 索引构建完成，获取回答中……\r\nF:\\anaconda3\\envs\\chatgpt\\lib\\site-packages\\langchain\\llms\\openai.py:608: UserWarning: You are trying to use a chat model. This way of initializing it is no longer supported. Instead, please use: `from langchain.chat_models import ChatOpenAI`\r\n  warnings.warn(\r\nTraceback (most recent call last):\r\n  File \"F:\\anaconda3\\envs\\chatgpt\\lib\\site-packages\\gradio\\routes.py\", line 393, in run_predict\r\n    output = await app.get_blocks().process_api(\r\n  File \"F:\\anaconda3\\envs\\chatgpt\\lib\\site-packages\\gradio\\blocks.py\", line 1108, in process_api\r\n    result = await self.call_function(\r\n  File \"F:\\anaconda3\\envs\\chatgpt\\lib\\site-packages\\gradio\\blocks.py\", line 929, in call_function\r\n    prediction = await anyio.to_thread.run_sync(\r\n  File \"F:\\anaconda3\\envs\\chatgpt\\lib\\site-packages\\anyio\\to_thread.py\", line 31, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n  File \"F:\\anaconda3\\envs\\chatgpt\\lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 937, in run_sync_in_worker_thread    return await future\r\n  File \"F:\\anaconda3\\envs\\chatgpt\\lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 867, in run\r\n    result = context.run(func, *args)\r\n  File \"F:\\anaconda3\\envs\\chatgpt\\lib\\site-packages\\gradio\\utils.py\", line 490, in async_iteration\r\n    return next(iterator)\r\n  File \"F:\\ChuanhuChatGPT-main\\modules\\chat_func.py\", line 298, in predict\r\n    query_object = GPTVectorStoreIndexQuery(index.index_struct, service_context=service_context, similarity_top_k=5, vector_store=index._vector_store, docstore=index._docstore)\r\nAttributeError: 'NoneType' object has no attribute 'index_struct'\r\n```\r\n\r\n\r\n### 运行环境\r\n\r\n```markdown\r\n- OS: windows11\r\n- Browser: firefox\r\n- Gradio version: 3.24.1\r\n- Python version: 3.10.10\r\n```\r\n\r\n\r\n### 补充说明\r\n具体的操作是：\r\n1.调用 python .\\ChuanhuChatbot.py\r\n2.复制黏贴 api-key\r\n3.上传索引文件\r\n4.输入“你好”\r\n\r\n",
      "state": "closed",
      "author": "GwendolynKoh",
      "author_type": "User",
      "created_at": "2023-04-07T04:21:20Z",
      "updated_at": "2023-04-16T03:37:32Z",
      "closed_at": "2023-04-10T12:33:13Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 13,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/561/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 1
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/561",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/561",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:18.503169",
      "comments": [
        {
          "author": "1205129045x",
          "body": "解决了吗 我现在提示这个\r\n```cmd\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\12051\\AppData\\Roaming\\Python\\Python38\\site-packages\\gradio\\routes.py\", line 393, in run_predict\r\n    output = await app.get_blocks().process_api(\r\n  File \"C:\\Users\\12051\\AppData\\Roaming\\Python\\Python38\\site-packages\\gradio\\bl",
          "created_at": "2023-04-07T12:53:06Z"
        },
        {
          "author": "GwendolynKoh",
          "body": "> 解决了吗 我现在提示这个\r\n> \r\n> ```batchfile\r\n> Traceback (most recent call last):\r\n>   File \"C:\\Users\\12051\\AppData\\Roaming\\Python\\Python38\\site-packages\\gradio\\routes.py\", line 393, in run_predict\r\n>     output = await app.get_blocks().process_api(\r\n>   File \"C:\\Users\\12051\\AppData\\Roaming\\Python\\Python38\\s",
          "created_at": "2023-04-07T13:25:45Z"
        },
        {
          "author": "GwendolynKoh",
          "body": "![image](https://user-images.githubusercontent.com/107405350/230618083-bdcbf516-d7e5-413c-a307-e815b0af75dc.png)\r\n上传图片的更是一片乱码，应该是上图这里出了问题？上传图片后就只能看到这么多东西了\r\nF:\\anaconda3\\envs\\chatgpt\\lib\\site-packages\\langchain\\llms\\openai.py:608: UserWarning: You are trying to use a chat model. This way of initializ",
          "created_at": "2023-04-07T13:38:10Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "你用的是最新版代码吗？你的这个报错应该是llama_index 0.5.5版本带来的，最新的代码已经做好了适配。",
          "created_at": "2023-04-07T15:15:29Z"
        },
        {
          "author": "GwendolynKoh",
          "body": "> 你用的是最新版代码吗？你的这个报错应该是llama_index 0.5.5版本带来的，最新的代码已经做好了适配。\r\n\r\n![image](https://user-images.githubusercontent.com/107405350/230643100-867fc302-49a1-48f5-80c4-2f7bbbd8d1f9.png)\r\n![image](https://user-images.githubusercontent.com/107405350/230643194-6d79f4a9-c2b1-404d-b075-8bd61fed4638.png)\r\n![image](h",
          "created_at": "2023-04-07T16:25:35Z"
        }
      ]
    },
    {
      "issue_number": 656,
      "title": "[Bug]: ",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\ndocker pull后运行错误\n\n### 复现操作\n\n![image](https://user-images.githubusercontent.com/126863247/232147620-ff5b1d12-0c0e-4740-a10a-52f9d717473f.png)\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "EscapeTo5D",
      "author_type": "User",
      "created_at": "2023-04-14T20:25:25Z",
      "updated_at": "2023-04-16T01:00:54Z",
      "closed_at": "2023-04-15T19:12:32Z",
      "labels": [
        "docker deployment"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/656/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/656",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/656",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:18.768229",
      "comments": [
        {
          "author": "MZhao-ouo",
          "body": "你把配置文件创建成一个目录了，删掉重建",
          "created_at": "2023-04-15T16:05:32Z"
        }
      ]
    },
    {
      "issue_number": 652,
      "title": "使用在线搜索给的链接是在默认当前标签打开，，返回后所有聊天都没了",
      "body": "### 相关问题\r\n\r\n使用在线搜索给的链接是在默认当前标签打开，，返回后所有聊天都没了\r\n\r\n### 可能的解决办法\r\n\r\n加一个新标签页打开\r\n\r\n### 帮助开发\r\n\r\n- [ ] 我愿意协助开发！\r\n\r\n### 补充说明\r\n\r\n使用在线搜索给的链接是在默认当前标签打开，，返回后所有聊天都没了",
      "state": "closed",
      "author": "1353604736",
      "author_type": "User",
      "created_at": "2023-04-14T16:09:33Z",
      "updated_at": "2023-04-15T04:10:40Z",
      "closed_at": "2023-04-15T00:39:59Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/652/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/652",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/652",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:18.947618",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "在做啦",
          "created_at": "2023-04-14T17:47:29Z"
        },
        {
          "author": "Keldos-Li",
          "body": "现在是最底下的引用网址在默认新标签页打开，回答中[1][2]的可能还是会在当前页打开，需要注意一下。",
          "created_at": "2023-04-15T04:10:12Z"
        }
      ]
    },
    {
      "issue_number": 655,
      "title": "[Bug]: 在WSL中运行环境，加载LLaMA+No LoRA，对话 Tokenizer class LLaMATokenizer does not exist or is not currently imported.",
      "body": "### 这个bug是否已存在现有issue了？\r\n\r\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\r\n\r\n### 错误表现\r\n\r\n报错\r\n`Tokenizer class LLaMATokenizer does not exist or is not currently imported.`\r\n\r\n\r\n\r\n### 复现操作\r\n\r\n1. 在WSL中完成部署\r\n2. 在网页中切换到llama-7b-hf + No LoRA\r\n3. 在对话框中输入`你好`\r\n\r\n### 错误日志\r\n\r\n```shell\r\n2023-04-14 10:55:12,728 [INFO] [models.py:524] 现在请为 llama-7b-hf 选择LoRA模型\r\n2023-04-14 10:55:12,731 [INFO] [models.py:543] 现在请为 llama-7b-hf 选择LoRA模型\r\n2023-04-14 10:55:14,844 [INFO] [models.py:531] 正在加载LLaMA模型: llama-7b-hf + No LoRA\r\n2023-04-14 10:55:16,772 [WARNING] [hf_decoder_model.py:192] llama does not support RAM optimized load. Automatically use original load instead.\r\nTraceback (most recent call last):\r\n  File \"/home/ygh/.local/lib/python3.10/site-packages/gradio/routes.py\", line 401, in run_predict\r\n    output = await app.get_blocks().process_api(\r\n  File \"/home/ygh/.local/lib/python3.10/site-packages/gradio/blocks.py\", line 1302, in process_api\r\n    result = await self.call_function(\r\n  File \"/home/ygh/.local/lib/python3.10/site-packages/gradio/blocks.py\", line 1025, in call_function\r\n    prediction = await anyio.to_thread.run_sync(\r\n  File \"/home/ygh/.local/lib/python3.10/site-packages/anyio/to_thread.py\", line 31, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n  File \"/home/ygh/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py\", line 937, in run_sync_in_worker_thread\r\n    return await future\r\n  File \"/home/ygh/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py\", line 867, in run\r\n    result = context.run(func, *args)\r\n  File \"/mnt/d/ChuanhuChatGPT/modules/utils.py\", line 43, in billing_info\r\n    return current_model.billing_info()\r\nAttributeError: 'NoneType' object has no attribute 'billing_info'\r\nTraceback (most recent call last):\r\n  File \"/home/ygh/.local/lib/python3.10/site-packages/gradio/routes.py\", line 401, in run_predict\r\n    output = await app.get_blocks().process_api(\r\n  File \"/home/ygh/.local/lib/python3.10/site-packages/gradio/blocks.py\", line 1302, in process_api\r\n    result = await self.call_function(\r\n  File \"/home/ygh/.local/lib/python3.10/site-packages/gradio/blocks.py\", line 1039, in call_function\r\n    prediction = await anyio.to_thread.run_sync(\r\n  File \"/home/ygh/.local/lib/python3.10/site-packages/anyio/to_thread.py\", line 31, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n  File \"/home/ygh/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py\", line 937, in run_sync_in_worker_thread\r\n    return await future\r\n  File \"/home/ygh/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py\", line 867, in run\r\n    result = context.run(func, *args)\r\n  File \"/home/ygh/.local/lib/python3.10/site-packages/gradio/utils.py\", line 491, in async_iteration\r\n    return next(iterator)\r\n  File \"/mnt/d/ChuanhuChatGPT/modules/utils.py\", line 38, in predict\r\n    iter = current_model.predict(*args)\r\nAttributeError: 'NoneType' object has no attribute 'predict'\r\nLoading checkpoint shards: 100%|████████████████████████████████████████████████████████| 33/33 [00:09<00:00,  3.51it/s]\r\n2023-04-14 10:55:54,471 [ERROR] [models.py:545] Tokenizer class LLaMATokenizer does not exist or is not currently imported.\r\n```\r\n\r\n\r\n### 运行环境\r\n\r\n- OS: Windows WSL Ubuntu-22.04\r\n- Browser: Chrome\r\n- Gradio version: 3.26.0\r\n- Python version: 3.10.6\r\n\r\n\r\n### 帮助解决\r\n\r\n- [X] 我愿意协助解决！\r\n\r\n### 补充说明\r\n\r\n感觉可能和这个[issue](https://github.com/huggingface/transformers/issues/22222)有关，尝试了`pip install git+https://github.com/huggingface/transformers`，但是问题仍然存在",
      "state": "closed",
      "author": "yinguohang",
      "author_type": "User",
      "created_at": "2023-04-14T18:00:49Z",
      "updated_at": "2023-04-14T18:39:24Z",
      "closed_at": "2023-04-14T18:08:27Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/655/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/655",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/655",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:19.123621",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "请查看`transformers`的这个issue：https://github.com/huggingface/transformers/issues/22222#issuecomment-1477171703\r\nhost llama模型的那个仓库的配置文件有点问题……",
          "created_at": "2023-04-14T18:08:24Z"
        },
        {
          "author": "yinguohang",
          "body": "搞定了！\r\n手动修改`~/.cache/huggingface/hub/models--decapoda-research--llama-7b-hf/snapshots/5f98eefcc80e437ef68d457ad7bf167c2c6/tokenizer_config.json`中的 LLaMATokenizer 到 LlamaTokenizer",
          "created_at": "2023-04-14T18:32:34Z"
        }
      ]
    },
    {
      "issue_number": 627,
      "title": "[Docker]: 使用llama出现错误",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n实用llama模型时，没有文件\n\n### 复现操作\n\n正常部署后，选择llama模型\n\n### 错误日志\n\n```shell\ndecapoda-research/llama-13b-hf-int4 does not appear to have a file named config.json. Checkout 'https://huggingface.co/decapoda-research/llama-13b-hf-int4/main' for available files.\"]\n```\n\n\n### 运行环境\n\n- OS: 乌班图18.04\r\n- Docker version: 最新\r\n- Gradio version: 3.25.0\r\n- Python version: 3.9.16\r\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "kkkk24juastin",
      "author_type": "User",
      "created_at": "2023-04-13T07:20:32Z",
      "updated_at": "2023-04-14T17:51:23Z",
      "closed_at": "2023-04-14T17:50:36Z",
      "labels": [
        "question",
        "docker deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/627/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/627",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/627",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:19.273954",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "正如报错所说。这是`decapoda-research `的问题。我把这玩意从模型列表中移除好了，他们还没搞定这东西。",
          "created_at": "2023-04-14T17:50:36Z"
        }
      ]
    },
    {
      "issue_number": 643,
      "title": "[其他]: 在Huggingface里复制到自己的空间后没有任何显示",
      "body": "### 是否已存在现有反馈与解答？\r\n\r\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\r\n\r\n### 错误描述\r\n\r\n点击Duplicate Space之后App显示running但是还是白板一片（如图）。\r\n\r\n已经尝试过Restart Space和Factory reboot，不知道是哪里出了问题。\r\n\r\n<img width=\"1440\" alt=\"截屏2023-04-14 14 13 18\" src=\"https://user-images.githubusercontent.com/62137704/231958535-3d523bbc-dc16-479b-b379-258b4dea0ea1.png\">\r\n\r\n### 复现操作\r\n\r\n点击Duplicate Space\r\n\r\n### 错误日志\r\n\r\n===== Application Startup at 2023-04-14 06:06:22 =====\r\n\r\n9xk86 2023-04-14T06:06:33.753Z 2023-04-14 08:06:33,752 [INFO] [utils.py:313] 获取模板文件名列表\r\n9xk86 2023-04-14T06:06:33.753Z 2023-04-14 08:06:33,752 [INFO] [utils.py:264] 获取文件名列表，目录为templates，文件类型为['.csv', 'json']，是否为纯文本列表True\r\n9xk86 2023-04-14T06:06:33.753Z 2023-04-14 08:06:33,753 [INFO] [utils.py:287] 加载模板文件1 中文提示词.json，模式为2（0为返回字典和下拉菜单，1为返回下拉菜单，2为返回字典）\r\n9xk86 2023-04-14T06:06:33.753Z 2023-04-14 08:06:33,753 [INFO] [utils.py:289] Loading template...\r\n9xk86 2023-04-14T06:06:33.875Z 2023-04-14 08:06:33,875 [WARNING] [utils.py:388] 无法获取IP地址信息。\r\n9xk86 2023-04-14T06:06:33.875Z {'error': True, 'reason': 'RateLimited', 'message': 'Visit https://ipapi.co/ratelimited/ for details'}\r\n9xk86 2023-04-14T06:06:33.886Z /home/user/.local/lib/python3.8/site-packages/gradio/deprecation.py:43: UserWarning: You have unused kwarg parameters in Files, please remove them: {'multiple': True}\r\n9xk86 2023-04-14T06:06:33.886Z   warnings.warn(\r\n9xk86 2023-04-14T06:06:33.886Z 2023-04-14 08:06:33,886 [INFO] [utils.py:313] 获取模板文件名列表\r\n9xk86 2023-04-14T06:06:33.886Z 2023-04-14 08:06:33,886 [INFO] [utils.py:264] 获取文件名列表，目录为templates，文件类型为['.csv', 'json']，是否为纯文本列表True\r\n9xk86 2023-04-14T06:06:33.887Z 2023-04-14 08:06:33,887 [INFO] [utils.py:313] 获取模板文件名列表\r\n9xk86 2023-04-14T06:06:33.887Z 2023-04-14 08:06:33,887 [INFO] [utils.py:264] 获取文件名列表，目录为templates，文件类型为['.csv', 'json']，是否为纯文本列表True\r\n9xk86 2023-04-14T06:06:33.887Z 2023-04-14 08:06:33,887 [INFO] [utils.py:313] 获取模板文件名列表\r\n9xk86 2023-04-14T06:06:33.887Z 2023-04-14 08:06:33,887 [INFO] [utils.py:264] 获取文件名列表，目录为templates，文件类型为['.csv', 'json']，是否为纯文本列表True\r\n9xk86 2023-04-14T06:06:33.887Z 2023-04-14 08:06:33,887 [INFO] [utils.py:287] 加载模板文件1 中文提示词.json，模式为1（0为返回字典和下拉菜单，1为返回下拉菜单，2为返回字典）\r\n9xk86 2023-04-14T06:06:33.887Z 2023-04-14 08:06:33,887 [INFO] [utils.py:289] Loading template...\r\n9xk86 2023-04-14T06:06:33.898Z 2023-04-14 08:06:33,898 [INFO] [utils.py:282] 从用户  中获取历史记录文件名列表\r\n9xk86 2023-04-14T06:06:33.898Z 2023-04-14 08:06:33,898 [INFO] [utils.py:264] 获取文件名列表，目录为history，文件类型为['.json']，是否为纯文本列表True\r\n9xk86 2023-04-14T06:06:33.899Z 2023-04-14 08:06:33,899 [INFO] [utils.py:282] 从用户  中获取历史记录文件名列表\r\n9xk86 2023-04-14T06:06:33.899Z 2023-04-14 08:06:33,899 [INFO] [utils.py:264] 获取文件名列表，目录为history，文件类型为['.json']，是否为纯文本列表True\r\n9xk86 2023-04-14T06:06:33.957Z 2023-04-14 08:06:33,957 [INFO] [ChuanhuChatbot.py:382] \r\n9xk86 2023-04-14T06:06:33.957Z 川虎的温馨提示：访问 http://localhost:7860 查看界面\r\n9xk86 2023-04-14T06:06:33.958Z Reloading javascript...\r\n9xk86 2023-04-14T06:06:34.032Z Running on local URL:  http://0.0.0.0:7860\r\n9xk86 2023-04-14T06:06:34.032Z \r\n9xk86 2023-04-14T06:06:34.032Z To create a public link, set `share=True` in `launch()`.\r\n\r\n### 运行环境\r\n\r\n- OS: Huggingface\r\n- Browser: Chrome\r\n- Gradio version: \r\n- Python version: \r\n(或您的其他运行环境信息)\r\n\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "closed",
      "author": "andykeppel",
      "author_type": "User",
      "created_at": "2023-04-14T06:18:54Z",
      "updated_at": "2023-04-14T17:48:04Z",
      "closed_at": "2023-04-14T17:48:04Z",
      "labels": [
        "question",
        "🤷 no can do"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/643/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/643",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/643",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:19.438927",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "我觉得是HuggingFace的问题……今天我试图更新一下HG上的川虎Chat的版本，也是不行",
          "created_at": "2023-04-14T06:23:20Z"
        }
      ]
    },
    {
      "issue_number": 644,
      "title": "[Bug]: 本地部署上传索引文件后页面一直在闪烁",
      "body": "### 这个bug是否已存在现有issue了？\r\n\r\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\r\n\r\n### 错误表现\r\n\r\n本地部署上传索引文件后页面一直在闪烁，且cpu占用突然升高，温度飙升\r\n\r\n<img width=\"1829\" alt=\"image\" src=\"https://user-images.githubusercontent.com/31379908/231964966-49962c3b-676d-4a23-aa1b-fd066c91c557.png\">\r\n<img width=\"1569\" alt=\"image\" src=\"https://user-images.githubusercontent.com/31379908/231966884-10141448-5589-4395-a6d0-53be5e62c03a.png\">\r\n<img width=\"810\" alt=\"image\" src=\"https://user-images.githubusercontent.com/31379908/231978039-8ae6a2a3-0acb-419a-9c3f-b3dfe11edb7b.png\">\r\n\r\n### 复现操作\r\n\r\n<img width=\"1829\" alt=\"image\" src=\"https://user-images.githubusercontent.com/31379908/231964966-49962c3b-676d-4a23-aa1b-fd066c91c557.png\">\r\n\r\n### 错误日志\r\n\r\n_No response_\r\n\r\n### 运行环境\r\n\r\n- OS: macos最新\r\n- Browser: chrome最新\r\n- Gradio version: \r\n- Python version: \r\n\r\n\r\n### 帮助解决\r\n\r\n- [ ] 我愿意协助解决！\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "closed",
      "author": "Maddaxman",
      "author_type": "User",
      "created_at": "2023-04-14T06:47:21Z",
      "updated_at": "2023-04-14T16:01:31Z",
      "closed_at": "2023-04-14T15:20:07Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/644/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/644",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/644",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:19.604502",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "确认是个bug，修复中",
          "created_at": "2023-04-14T15:04:50Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "不是我们的bug，而是我们使用的UI框架，gradio，的新版本（3.26.0）出bug了。请安装它的上一个版本，问题解决：\r\n```shell\r\npip install gradio==3.25.0\r\n```\r\n我们现在也在requirements中固定了gradio的版本，以后我们会在gradio新版本发布、并且我们测试无误之后，再升级gradio。gradio已经不是第一次出这种问题了🤧",
          "created_at": "2023-04-14T15:20:07Z"
        },
        {
          "author": "Maddaxman",
          "body": "OK",
          "created_at": "2023-04-14T16:01:31Z"
        }
      ]
    },
    {
      "issue_number": 582,
      "title": "Something went wrong",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n![image](https://user-images.githubusercontent.com/4343884/230912083-34791d1b-d17a-4f39-aad6-217c3233a87c.png)\r\n总是报这个!\n\n### 复现操作\n\n搞什么飞机，我按照已有的issue进行解决，但无论怎么弄，都不行，直到我自己写了个请求demo发现ok的，所以我强烈怀疑你们的代码除了bug，严重的bug！！！\n\n### 错误日志\n\n```shell\n不会输出任何错误日志\n```\n\n\n### 运行环境\n\nOS: Windows11 22H2\r\nBrowser: edge\r\nGradio version: 3.22.1\r\nPython version: 3.9.5\r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n无",
      "state": "closed",
      "author": "g-wellsa",
      "author_type": "User",
      "created_at": "2023-04-10T13:46:13Z",
      "updated_at": "2023-04-14T14:01:35Z",
      "closed_at": "2023-04-14T14:01:35Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/582/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/582",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/582",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:19.770100",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "兄弟 冷静……",
          "created_at": "2023-04-10T14:24:48Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "应该是代理了127.0.0.1导致的。请看readme。不要开全局代理。",
          "created_at": "2023-04-10T14:59:00Z"
        },
        {
          "author": "xingfanxia",
          "body": "为什么这么激动。。。这是个免费的开源项目有bug很正常",
          "created_at": "2023-04-10T22:15:42Z"
        },
        {
          "author": "Keldos-Li",
          "body": "希望你冷静下来了。。QAQ\r\n1. 正如开源协议所述，本程序作为自由软件，**没有品质担保**，确实可能存在问题。\r\n2. 但是这个问题确实不是我们的bug。如果您看过 [常见问题](https://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/常见问题#something-went-wrong-expecting-value-line-1-column-1-char-0)，或许您就更能理解了……我们这个和您自己写请求确实多走了一步，如果全局代理会导致127.0.0.0网页无法和后端python程序通讯。因此，不要开全局代理，也不要在如clash等的软件",
          "created_at": "2023-04-11T01:05:27Z"
        }
      ]
    },
    {
      "issue_number": 559,
      "title": "[其他]: 今天突然“读取超时，无法获取对话。请检查网络连接，或者API-Key是否有效。”",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 错误描述\n\n[其他]: 今天用起来出问题啊，为啥\n\n### 复现操作\n\n[其他]: 今天用起来出问题啊，为啥\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n(或您的其他运行环境信息)\r\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "cxx2002",
      "author_type": "User",
      "created_at": "2023-04-07T03:46:42Z",
      "updated_at": "2023-04-14T13:58:42Z",
      "closed_at": "2023-04-14T13:58:42Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 13,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/559/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/559",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/559",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:19.935123",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "啥问题？你就这么写我们就当没问题🫥",
          "created_at": "2023-04-07T04:16:21Z"
        },
        {
          "author": "LisnXy",
          "body": "确实有些问题，我是部署在了linux服务器上，可以正常获取API的额度，但是对话时显示\r\n`读取超时，无法获取对话。请检查网络连接，或者API-Key是否有效。`\r\n昨天还是好的，并且本地确认过API-Key可以正常使用，并且部署在同一个服务器上的gpt另一个项目也是可用的，非常奇怪。",
          "created_at": "2023-04-07T09:55:57Z"
        },
        {
          "author": "morestart",
          "body": "确实，看了后台日志应该是没有返回，验证过key是没问题的\r\n",
          "created_at": "2023-04-07T09:59:08Z"
        },
        {
          "author": "LisnXy",
          "body": "> 确实，看了后台日志应该是没有返回，验证过key是没问题的\r\n\r\n初步怀疑是今天openai的服务器返回有点慢，超过等待时长了，我去排查一下试试",
          "created_at": "2023-04-07T10:00:05Z"
        },
        {
          "author": "morestart",
          "body": "> \r\n\r\n是的 我调整超时时间到60就行了",
          "created_at": "2023-04-07T10:03:09Z"
        }
      ]
    },
    {
      "issue_number": 476,
      "title": "[功能请求]: 大佬建议添加默认实时保存聊天记录的功能，重新打开自动加载，不需要的聊天记录可以选择删除的那种",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n类似官方chatgpt，自动保存聊天记录，下次登录自动加载，不需要时可以选择删除，这样更自由\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "1353604736",
      "author_type": "User",
      "created_at": "2023-03-31T01:05:23Z",
      "updated_at": "2023-04-14T13:57:11Z",
      "closed_at": "2023-04-14T13:57:11Z",
      "labels": [
        "duplicate",
        "feature request"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/476/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/476",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/476",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:20.153639",
      "comments": [
        {
          "author": "xingfanxia",
          "body": "duplicate of https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/454",
          "created_at": "2023-04-05T04:45:05Z"
        },
        {
          "author": "Keldos-Li",
          "body": "因重复而关闭，如有需要请前往\n- #454",
          "created_at": "2023-04-14T13:57:06Z"
        }
      ]
    },
    {
      "issue_number": 417,
      "title": "[功能请求]: 后台log可否显示使用者的IP或者其他身份识别信息",
      "body": "### 相关问题\n\n后台log可否显示使用者的IP或者其他身份识别信息\n\n### 可能的解决办法\n\ngradio不会，俺也不知道。。。貌似用flask里面的request\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "OkamiFeng",
      "author_type": "User",
      "created_at": "2023-03-27T08:34:57Z",
      "updated_at": "2023-04-14T13:55:02Z",
      "closed_at": "2023-04-14T13:55:02Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/417/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/417",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/417",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:20.323787",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "现在可以显示设置的用户名",
          "created_at": "2023-04-05T03:16:03Z"
        }
      ]
    },
    {
      "issue_number": 380,
      "title": "huggingface部署之后对话保存到本地，重新加载没有用",
      "body": "### 该功能请求是否与某个问题相关？\r\n有保存对话到本地的功能和在线保存对话记录然后加载的功能，但是本地对话(.md)文件重新上传之后，不能继续当时的对话，而是每次在回答的时候重复一次上传对话的内容\r\n\r\n### 可能的解决办法\r\n上传本地对话记录之后用在线保存对话历史记录的方式加载\r\n\r\n### 其他\r\n补充说明\r\n",
      "state": "closed",
      "author": "hylic51891",
      "author_type": "User",
      "created_at": "2023-03-25T07:02:38Z",
      "updated_at": "2023-04-14T13:54:17Z",
      "closed_at": "2023-04-14T13:54:06Z",
      "labels": [
        "duplicate",
        "feature request"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/380/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/380",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/380",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:20.502413",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "如需继续讨论，请前往：\n- #454",
          "created_at": "2023-04-14T13:53:58Z"
        }
      ]
    },
    {
      "issue_number": 494,
      "title": "[Bug]: 显示C++代码块时出现异常",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [x] 我确认没有已有issue。\n\n### 错误表现\n\n每次显示C/C++代码块都会出现显示异常，如下图所示\r\n![image](https://user-images.githubusercontent.com/15260796/229266697-ad341a70-0b01-49a3-8ee5-147e3d5d8882.png)\r\n\n\n### 复现操作\n\n1. 在huggingface页面设置token\r\n2. 向ChatGPT提问：请帮我用域套接字写一个双向异步通讯的demo，要求c/c++, linux系统下运行\r\n3. 显示代码块出现异常\r\n\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n```markdown\n- OS: Windows10\r\n- Browser: Edge\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "githubchry",
      "author_type": "User",
      "created_at": "2023-04-01T05:09:21Z",
      "updated_at": "2023-04-14T13:46:30Z",
      "closed_at": "2023-04-14T13:46:30Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/494/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/494",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/494",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:20.684756",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "好吧，可能是我们的pygments并不认为```c++是一个标准语法……\r\n<img width=\"900\" alt=\"image\" src=\"https://user-images.githubusercontent.com/23137268/229286491-7c7a1d9a-93fa-414d-8f15-bc78cfe5dd7d.png\">\r\n",
          "created_at": "2023-04-01T11:38:58Z"
        },
        {
          "author": "Keldos-Li",
          "body": "先让ChatGPT把所有c++代码块前面都写成cpp吧。改高亮库的意义不是很大。",
          "created_at": "2023-04-14T13:46:25Z"
        }
      ]
    },
    {
      "issue_number": 536,
      "title": "[功能请求]:  不支持token登录嘛",
      "body": "### 相关问题\n\n不支持token登录嘛\n\n### 可能的解决办法\n\n不支持token登录嘛\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n不支持token登录嘛",
      "state": "closed",
      "author": "shuncon",
      "author_type": "User",
      "created_at": "2023-04-04T03:59:28Z",
      "updated_at": "2023-04-14T13:44:35Z",
      "closed_at": "2023-04-14T13:44:35Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/536/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/536",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/536",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:20.891571",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "并不理解。没有必要。技术路线也没考虑。\n\n而且如果先登录ChatGPT再返回使用我们的脚本是不是一种脱裤子放　的行为呢？",
          "created_at": "2023-04-14T13:44:32Z"
        }
      ]
    },
    {
      "issue_number": 603,
      "title": "[Bug]: chatGPT显示html标签会发生格式错误",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n\r\n![B(3B92XGQEVK0Q(CZVH5$A3](https://user-images.githubusercontent.com/86149525/231341377-b2a26eb7-f3f4-4d70-b27b-3bd976cd5fba.png)\r\n\r\n![image](https://user-images.githubusercontent.com/86149525/231341362-83eb3e0a-5634-493e-a622-95483956b8d3.png)\r\n\n\n### 复现操作\n\n本地部署\r\n向chatGPT发出如上问题\n\n### 错误日志\n\n```shell\n无错误日志\n```\n\n\n### 运行环境\n\n- OS: Windows10\r\n- Browser: Edge\r\n- Gradio version: 3.23.0\r\n- Python version: 3.9.13\r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "s3xysteak",
      "author_type": "User",
      "created_at": "2023-04-12T03:30:36Z",
      "updated_at": "2023-04-14T13:39:03Z",
      "closed_at": "2023-04-14T13:39:03Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/603/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/603",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/603",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:21.053959",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "请告诉gpt它的输出处于markdown格式渲染环境中，请将所有代码使用代码块或行内代码的形式。\r\n\r\n……如果是svg标签的话确实没法解决。",
          "created_at": "2023-04-12T13:47:52Z"
        }
      ]
    },
    {
      "issue_number": 632,
      "title": "[功能请求]: login user should not see other user's message",
      "body": "### 相关问题\n\nlogin user should not see other user's message\n\n### 可能的解决办法\n\nThe login user should have their own message list.\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "zhangchunsheng",
      "author_type": "User",
      "created_at": "2023-04-13T15:33:19Z",
      "updated_at": "2023-04-14T13:35:11Z",
      "closed_at": "2023-04-14T13:35:11Z",
      "labels": [
        "duplicate"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/632/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/632",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/632",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:21.211811",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "Duplicate with \n- #588\n\nAnd it should have been resolved.",
          "created_at": "2023-04-14T13:34:45Z"
        }
      ]
    },
    {
      "issue_number": 297,
      "title": "[功能请求] voice control for Chatgpt",
      "body": "### 该功能请求是否与某个问题相关？\r\n> 我在练习英语口语，chatgpt简直就是我完美的口语练习对象，希望能和gpt进行语音交流。\r\n\r\n### 可能的解决办法\r\n> 这想法来自谷歌拓展商店的Voice Control for ChatGPT，装上这个插件就可以在chatgpt网页版进行语音交流，但国内连接gpt的稳定性一言难尽，经常断开连接，要能集成进这个项目就好了。\r\n",
      "state": "open",
      "author": "narugakuru",
      "author_type": "User",
      "created_at": "2023-03-22T08:54:57Z",
      "updated_at": "2023-04-14T11:37:06Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/297/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/297",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/297",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:21.386923",
      "comments": [
        {
          "author": "yuntian123456",
          "body": "赞！！",
          "created_at": "2023-03-26T12:44:45Z"
        },
        {
          "author": "freebr",
          "body": "微信公号 广州欧讯服科技有限公司可以语音对话\r\n![image](https://user-images.githubusercontent.com/12162720/232033580-48b43359-202e-4afe-a954-ee745851ef9c.png)\r\n",
          "created_at": "2023-04-14T11:37:06Z"
        }
      ]
    },
    {
      "issue_number": 612,
      "title": "[Docker]: 为什么镜像变大了，还是特别大。",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n别乱搞啊，镜像那么大，我网络不好都要拉半个小时。之前镜像几秒钟搞定\n\n### 复现操作\n\n拉取慢\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Docker version: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "xiedingjie",
      "author_type": "User",
      "created_at": "2023-04-12T09:53:00Z",
      "updated_at": "2023-04-14T11:35:57Z",
      "closed_at": "2023-04-13T18:22:11Z",
      "labels": [
        "question",
        "docker deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/612/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/612",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/612",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:21.610772",
      "comments": [
        {
          "author": "kkkk24juastin",
          "body": "是的，镜像很大，5个多g",
          "created_at": "2023-04-12T12:27:22Z"
        },
        {
          "author": "sillyboy110",
          "body": "实测，vps占用超过10G都没能把镜像构建好，无奈只好终止构建镜像",
          "created_at": "2023-04-13T03:40:44Z"
        },
        {
          "author": "HsunGong",
          "body": "ChatGLM的问题",
          "created_at": "2023-04-13T06:13:06Z"
        },
        {
          "author": "libukai",
          "body": "最新的 Dockerfile 文件中注销了 # RUN pip install --user -r requirements_advanced.txt 之后就恢复正常了，目前大小 1.64G",
          "created_at": "2023-04-13T17:52:05Z"
        },
        {
          "author": "yinguohang",
          "body": "你好，请问是否可以在docker的使用文档中添加 需要手动安装`requirements_advanced.txt`的提示？",
          "created_at": "2023-04-14T08:30:26Z"
        }
      ]
    },
    {
      "issue_number": 647,
      "title": "[功能请求]: 跪求出个docker",
      "body": "### 相关问题\n\n如题\n\n### 可能的解决办法\n\n跪求出个docker的搭建方式\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "iiidcc",
      "author_type": "User",
      "created_at": "2023-04-14T11:28:14Z",
      "updated_at": "2023-04-14T11:28:51Z",
      "closed_at": "2023-04-14T11:28:51Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/647/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/647",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/647",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:21.841674",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "有的呀",
          "created_at": "2023-04-14T11:28:51Z"
        }
      ]
    },
    {
      "issue_number": 592,
      "title": "[Bug]: Docker 环境选择 chatglm 模型报错",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n选择 chatglm 模型报错\n\n### 复现操作\n\n1. 使用 docker 运行\r\n```bash\r\ndocker run -d --name chatgpt \\\r\n\t-e my_api_key=\"\" \\\r\n\t-p 7860:7860 \\\r\n\ttuchuanhuhuhu/chuanhuchatgpt:latest\r\n```\r\n2. 访问 http://localhost:7860\r\n3. 选择模型 `chatglm-6b-int4-qe`\r\n4. 右上角显示 “发生了错误：: No module named ‘transformers’”\n\n### 错误日志\n\n```shell\nReloading javascript...\r\nRunning on local URL:  http://0.0.0.0:7860\r\n\r\nTo create a public link, set `share=True` in `launch()`.\r\n2023-04-11 04:03:50,572 [INFO] [models.py:426] 正在加载ChatGLM模型: chatglm-6b-int4-qe\r\n2023-04-11 04:03:50,573 [ERROR] [models.py:448] No module named 'transformers'\r\n2023-04-11 04:06:49,294 [INFO] [models.py:426] 正在加载ChatGLM模型: chatglm-6b-int4\r\n2023-04-11 04:06:49,294 [ERROR] [models.py:448] No module named 'transformers'\n```\n\n\n### 运行环境\n\n- OS: MacOS\r\n- Browser:  Chrome\r\n- Gradio version:  3.24.1\r\n- Python version: 3.9.16\r\n- Commit: [968cb26](https://github.com/GaiZhenbiao/ChuanhuChatGPT/commit/968cb26)\r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "zengbo",
      "author_type": "User",
      "created_at": "2023-04-11T04:12:22Z",
      "updated_at": "2023-04-14T07:35:47Z",
      "closed_at": "2023-04-11T09:31:27Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/592/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/592",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/592",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:22.011907",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "现在应该没问题了",
          "created_at": "2023-04-11T09:31:27Z"
        },
        {
          "author": "yinguohang",
          "body": "你好 我也遇到了同样的问题\r\nChatGLM会提示没有transformers\r\n```\r\n2023-04-14 00:25:20 2023-04-14 07:25:20,064 [INFO] [models.py:520] 正在加载ChatGLM模型: chatglm-6b\r\n2023-04-14 00:25:20 2023-04-14 07:25:20,064 [ERROR] [models.py:545] No module named 'transformers'\r\n2023-04-14 00:26:55 2023-04-14 07:26:55,148 [INFO] [models.p",
          "created_at": "2023-04-14T07:33:34Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "这是因为docker镜像中没有包含本地模型所需的依赖。之前有过包含所有依赖的版本，但是那样的话，Docker镜像就变得太大了。请取消注释Dockerfile中的\r\n```\r\n# RUN pip install --user -r requirements_advanced.txt\r\n```\r\n这一行。然后自行打包。",
          "created_at": "2023-04-14T07:35:47Z"
        }
      ]
    },
    {
      "issue_number": 588,
      "title": "[Bug]: 多账号同时使用时system prompt会串台，而且有时候response也会发送到不对应的用户",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n多账号同时使用时system prompt会串台，比如有人改了system prompt, 那么所有人接下来的输出都会被影响，而且有时候response也会发送到不对应的用户。这个有时候也挺搞笑的哈哈哈\r\n<img width=\"487\" alt=\"b01cf9924c0ab29356d094c3dafdd35\" src=\"https://user-images.githubusercontent.com/87698941/230940466-e74c0f51-0b36-4f17-9a6a-5a765b12b5a3.png\">\r\n\n\n### 复现操作\n\n1. 正常完成部署\r\n2. 单用户在线时可以正常使用\r\n3. 多用户同时使用就会出现以上bug\n\n### 错误日志\n\n```shell\n没有报错，就是单纯的结构性bug\n```\n\n\n### 运行环境\n\n- OS:  CentOS 7\r\n- Browser: Chrome\r\n- Gradio version: 3.24.1\r\n- Python version: 3.9.7\r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "realnoob007",
      "author_type": "User",
      "created_at": "2023-04-10T15:57:05Z",
      "updated_at": "2023-04-14T06:07:18Z",
      "closed_at": "2023-04-14T06:07:18Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/588/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 1
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/588",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/588",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:24.310146",
      "comments": [
        {
          "author": "wpcaxys",
          "body": "我尝试多账户使用的时候，还出现速度很慢的问题，后来换回单账户才好点，看源码没看出异常点",
          "created_at": "2023-04-11T06:08:23Z"
        },
        {
          "author": "realnoob007",
          "body": "补充一下，后台是正常的，完整的response生成，但是网页上显示的就是前面一部分内容，后面的显示到其他用户那边了",
          "created_at": "2023-04-11T08:36:18Z"
        },
        {
          "author": "realnoob007",
          "body": "而且应该是3个以上用户同时在线使用的时候会出现这个问题",
          "created_at": "2023-04-11T08:36:47Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "🤔️这也太怪了。感觉像是gradio的问题。",
          "created_at": "2023-04-11T08:39:45Z"
        },
        {
          "author": "ChuangLee",
          "body": "我也发现了，目前提供给5人使用，感觉触发概率还是挺高的。\r\n用户在聊天过程中会突然显示其他用户的聊天会话内容。",
          "created_at": "2023-04-14T06:05:23Z"
        }
      ]
    },
    {
      "issue_number": 639,
      "title": "[本地部署]: xmbot的url问题，waitlist在哪里",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\nhttps//xmbot.net/web这个URL没办法访问了哦\r\n![image](https://user-images.githubusercontent.com/53057530/231918275-713c7aa4-7816-4421-be4c-1664c5552a55.png)\r\n\r\n但是https//xmbot.net没有问题\r\n\r\n当然这个问题好像和这个repo关系不大，但是我也找不到啥关于xmbot的信息。。。\n\n### 复现操作\n\n访问https//xmbot.net/web\n\n### 错误日志\n\n```shell\n抱歉您还不具备访问权限, 请在waitlist中申请API key。(Sorry, you don't have access permission. Please apply for API key in waitlist.)\n```\n\n\n### 运行环境\n\n```markdown\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version:\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "chucksylar",
      "author_type": "User",
      "created_at": "2023-04-14T01:35:14Z",
      "updated_at": "2023-04-14T03:41:50Z",
      "closed_at": "2023-04-14T03:41:40Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/639/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/639",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/639",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:24.578576",
      "comments": [
        {
          "author": "MZhao-ouo",
          "body": "后续我们会在huggingface上开放测试",
          "created_at": "2023-04-14T03:41:40Z"
        }
      ]
    },
    {
      "issue_number": 634,
      "title": "[功能请求]: 在线搜索接入快递查询功能",
      "body": "### 相关问题\n\n-\n\n### 可能的解决办法\n\n目前在线搜索貌似没有接入查询国内主流快递物流信息的功能，可以考虑增加快递100，菜鸟之类的搜索来源。\r\n已有人做出类似下图效果\r\n![微信截图_20230414002427](https://user-images.githubusercontent.com/12162720/231825703-90e5588f-c5ce-4fe1-9096-69c53cc14aab.png)\r\n\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "freebr",
      "author_type": "User",
      "created_at": "2023-04-13T16:33:51Z",
      "updated_at": "2023-04-14T02:20:00Z",
      "closed_at": "2023-04-14T02:20:00Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/634/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/634",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/634",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:24.788829",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "假设未来快递公司做了ChatGPT Plugin，我们也集成了plugins功能那还可以考虑，否则没有必要。快递等特定的信息还是去专门的地方查询吧。",
          "created_at": "2023-04-14T02:20:00Z"
        }
      ]
    },
    {
      "issue_number": 452,
      "title": "[其他]: Invalid URL (POST /v1/chat/completions)",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 错误描述\n\nJSON解析错误。请重置对话。收到的内容: “error”: { “message”: “Invalid URL (POST /v1/chat/completions)”, “type”: “invalid_request_error”, “param”: null, “code”: null }}\n\n### 复现操作\n\n示例也是错\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n```markdown\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n(或您的其他运行环境信息)\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "History63",
      "author_type": "User",
      "created_at": "2023-03-29T08:48:53Z",
      "updated_at": "2023-04-13T18:47:09Z",
      "closed_at": "2023-04-13T18:47:08Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/452/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/452",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/452",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:24.982309",
      "comments": [
        {
          "author": "MZhao-ouo",
          "body": "高级选项里恢复默认设置试试？",
          "created_at": "2023-03-30T09:35:31Z"
        },
        {
          "author": "Loss-of-time",
          "body": "+1",
          "created_at": "2023-03-30T12:47:13Z"
        },
        {
          "author": "HopeZZZ",
          "body": "我也出现了同样的问题：\r\n\r\n2023-03-30 22:58:01,540 [INFO] [chat_func.py:273] 输入为：你好\r\n2023-03-30 22:58:01,547 [INFO] [chat_func.py:347] 使用流式传输\r\n2023-03-30 22:58:01,547 [INFO] [chat_func.py:98] 实时回答模式\r\n2023-03-30 22:58:01,548 [INFO] [chat_func.py:121] 输入token计数: 21\r\n2023-03-30 22:58:01,554 [INFO] [utils.py:454] 使",
          "created_at": "2023-03-30T15:00:48Z"
        },
        {
          "author": "HopeZZZ",
          "body": "我已解决这个问题，属于账号问题，需要换一个账号。",
          "created_at": "2023-03-31T13:05:19Z"
        },
        {
          "author": "MZhao-ouo",
          "body": "无应答，closed",
          "created_at": "2023-04-13T18:47:08Z"
        }
      ]
    },
    {
      "issue_number": 332,
      "title": "[本地部署] SSL wrong version number应该怎么办",
      "body": "\r\n[本地部署] SSL wrong version nmber应该怎么办\r\n\r\n执行程序如下，已更新urllib及request库到指定版本，提示错误代码见下图\r\n\r\n### 错误截图\r\n![image](https://user-images.githubusercontent.com/111212705/227134286-13ec8da3-f918-4d3e-b895-7e4d3ec926bd.png)\r\n\r\n请问怎么调整ssl版本，应该对应什么版本号\r\n\r\n\r\n\r\n### 运行环境\r\n#### 桌面系统\r\n - OS: [Windows10]\r\n\r\n",
      "state": "closed",
      "author": "Justinyxj",
      "author_type": "User",
      "created_at": "2023-03-23T07:36:27Z",
      "updated_at": "2023-04-13T18:44:46Z",
      "closed_at": "2023-04-13T18:44:10Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/332/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/332",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/332",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:25.163810",
      "comments": [
        {
          "author": "qlhazy",
          "body": "同问",
          "created_at": "2023-03-24T07:48:19Z"
        },
        {
          "author": "MZhao-ouo",
          "body": "奇怪的问题，请移至Discussing",
          "created_at": "2023-04-13T18:44:10Z"
        }
      ]
    },
    {
      "issue_number": 410,
      "title": "[本地部署]: Something went wrong Server disconnected without sending a response.",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\nWindows 本地下部署， 启动成功之后，设置API-KEY :之后。\r\nps： 当前网络也是代理的， \r\n       直接访问 chatgpt ok，\r\n       直接访问： https://huggingface.co/spaces/JohnSmith9982/ChuanhuChatGPT ok。\r\n 页面提示：\r\nSomething went wrong\r\nServer disconnected without sending a response.\r\n\r\n请问如何解决？\n\n### 复现操作\n\n本地下载代码\r\n启动\r\n访问界面。\r\n无其他操作。\n\n### 错误日志\n\n```shell\n23-03-27 11:55:42,458 [INFO] [utils.py:295] 获取模板文件名列表\r\n2023-03-27 11:55:42,461 [INFO] [utils.py:247] 获取文件名列表，目录为templates，文件类型为['.csv', 'json']，是否为纯文本 列表True\r\n2023-03-27 11:55:42,463 [INFO] [utils.py:269] 加载模板文件1 中文Prompts.json，模式为2（0为返回字典和下拉菜单，1为返回下 拉菜单，2为返回字典）\r\n2023-03-27 11:55:42,464 [INFO] [utils.py:271] Loading template...\r\n2023-03-27 11:55:43,752 [INFO] [utils.py:386] 您的IP区域：United States。\r\nC:\\Programs\\Python\\Python311\\Lib\\site-packages\\gradio\\deprecation.py:43: UserWarning: You have unused kwarg parameters in Row, please remove them: {'scale': 1}\r\n  warnings.warn(\r\nC:\\Programs\\Python\\Python311\\Lib\\site-packages\\gradio\\deprecation.py:43: UserWarning: You have unused kwarg parameters in Files, please remove them: {'multiple': True}\r\n  warnings.warn(\r\n2023-03-27 11:55:44,595 [INFO] [utils.py:295] 获取模板文件名列表\r\n2023-03-27 11:55:44,596 [INFO] [utils.py:247] 获取文件名列表，目录为templates，文件类型为['.csv', 'json']，是否为纯文本 列表True\r\n2023-03-27 11:55:44,597 [INFO] [utils.py:295] 获取模板文件名列表\r\n2023-03-27 11:55:44,597 [INFO] [utils.py:247] 获取文件名列表，目录为templates，文件类型为['.csv', 'json']，是否为纯文本 列表True\r\n2023-03-27 11:55:44,598 [INFO] [utils.py:295] 获取模板文件名列表\r\n2023-03-27 11:55:44,599 [INFO] [utils.py:247] 获取文件名列表，目录为templates，文件类型为['.csv', 'json']，是否为纯文本 列表True\r\n2023-03-27 11:55:44,600 [INFO] [utils.py:269] 加载模板文件1 中文Prompts.json，模式为1（0为返回字典和下拉菜单，1为返回下 拉菜单，2为返回字典）\r\n2023-03-27 11:55:44,601 [INFO] [utils.py:271] Loading template...\r\n2023-03-27 11:55:44,623 [INFO] [utils.py:295] 获取模板文件名列表\r\n2023-03-27 11:55:44,623 [INFO] [utils.py:247] 获取文件名列表，目录为templates，文件类型为['.csv', 'json']，是否为纯文本 列表True\r\n2023-03-27 11:55:44,624 [INFO] [utils.py:269] 加载模板文件1 中文Prompts.json，模式为1（0为返回字典和下拉菜单，1为返回下 拉菜单，2为返回字典）\r\n2023-03-27 11:55:44,626 [INFO] [utils.py:271] Loading template...\r\n2023-03-27 11:55:44,650 [INFO] [utils.py:264] 获取历史记录文件名列表\r\n2023-03-27 11:55:44,650 [INFO] [utils.py:247] 获取文件名列表，目录为history，文件类型为['.json']，是否为纯文本列表True\r\n2023-03-27 11:55:44,651 [INFO] [utils.py:264] 获取历史记录文件名列表\r\n2023-03-27 11:55:44,651 [INFO] [utils.py:247] 获取文件名列表，目录为history，文件类型为['.json']，是否为纯文本列表True\r\n2023-03-27 11:55:44,691 [INFO] [ChuanhuChatbot.py:392]\r\n川虎的温馨提示：访问 http://localhost:7860 查看界面\r\nReloading javascript...\r\nRunning on local URL:  http://127.0.0.1:7860\r\n\r\nTo create a public link, set `share=True` in `launch()`.\n```\n\n\n### 运行环境\n\n```markdown\n- OS: windos\r\n- Browser: Chrome\r\n- Gradio version:  none\r\n- Python version:  3.11.2\n```\n\n\n### 补充说明\n\n暂无",
      "state": "closed",
      "author": "mojianpo",
      "author_type": "User",
      "created_at": "2023-03-27T04:42:03Z",
      "updated_at": "2023-04-13T18:34:51Z",
      "closed_at": "2023-04-13T18:34:51Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/410/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/410",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/410",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:25.345193",
      "comments": [
        {
          "author": "mojianpo",
          "body": "当前界面右上角显示：您的IP区域：United States。",
          "created_at": "2023-03-27T05:36:32Z"
        },
        {
          "author": "MZhao-ouo",
          "body": "看起来没问题，请用最新版尝试",
          "created_at": "2023-04-13T18:34:51Z"
        }
      ]
    },
    {
      "issue_number": 311,
      "title": "[BUG] 上传索引文件後，之後整個GUI都BUG了",
      "body": "> 感谢提交 issue! 请尽可能完整填写以下信息，帮助我们更好地定位问题~ \r\n> 如果您确信这是一个我们的 bug，而不是因为您的原因部署失败，欢迎提交该issue！如果您不能确定这是bug还是您的问题，请选择其他类型的issue模板。\r\n> 注意，请编辑issue标题栏“简短的错误描述”部分，也请替换我们的issue模板中的原文。\r\n\r\n### 错误描述\r\nERROR:asyncio:Task exception was never retrieved\r\nfuture: <Task finished name='jn9q6iairo_2' coro=<Queue.process_events() done, defined at C:\\Users\\asdzx\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\gradio\\queueing.py:343> exception=AttributeError(\"'AsyncRequest' object has no attribute '_json_response_data'\")>\r\n但終端還能輸出最後一次。\r\n再輸入一次就直接 遠端主機已強制關閉一個現存的連線。\r\n\r\n### 复现操作\r\n上传索引文件，並使用它\r\n\r\n### 错误截图\r\n![image](https://user-images.githubusercontent.com/74598580/226945920-96ff494b-7be8-437a-b31a-571cc8c86e67.png)\r\n![image](https://user-images.githubusercontent.com/74598580/226946396-4eca1a42-c149-4d1e-90fd-44bf24fb6ac3.png)\r\n![image](https://user-images.githubusercontent.com/74598580/226947170-ef17d7b8-3103-42a0-a88c-a4595d559cf9.png)\r\n\r\n\r\n### 终端（控制台）中的错误报告\r\n\r\n```console\r\nERROR:asyncio:Task exception was never retrieved\r\nfuture: <Task finished name='jn9q6iairo_2' coro=<Queue.process_events() done, defined at C:\\Users\\asdzx\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\gradio\\queueing.py:343> exception=AttributeError(\"'AsyncRequest' object has no attribute '_json_response_data'\")>\r\n```\r\n\r\n### 运行环境\r\n**请填写以下列表：**\r\n\r\n - OS: [e.g. Windows11 22H2]\r\n - Browser: [e.g. Chrome, safari]\r\n - Gradio version:\r\n - Python (或Python3) version:\r\n\r\n### 其他\r\n补充说明\r\n",
      "state": "closed",
      "author": "NitcanKen",
      "author_type": "User",
      "created_at": "2023-03-22T15:01:14Z",
      "updated_at": "2023-04-13T18:25:40Z",
      "closed_at": "2023-04-13T18:25:40Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/311/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/311",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/311",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:25.584795",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "尝试更新我们的脚本和所有依赖，尤其是gradio。",
          "created_at": "2023-03-31T13:24:20Z"
        }
      ]
    },
    {
      "issue_number": 296,
      "title": "[本地部署] 上传文件后未获得索引后的回答",
      "body": "上传文件后，要求bot输出文档主要内容，bot反馈:\r\n\"很抱歉，我无法获取你的本地文件或上传的文档。你需要提供文档的名称或者给出相关链接，我才能够帮助你了解它的内容。\"\r\n\r\n### 复现操作\r\n按照步骤部署的，\r\n然后在登录界面发现界面没有渲染且无法进入，查了issues之后使用 pip3 install gradio==3.21.0 命令后成功进入\r\n然后上传docx文档，要求bot总结文档主旨\r\n获得以上反馈\r\n\r\n",
      "state": "closed",
      "author": "tulk",
      "author_type": "User",
      "created_at": "2023-03-22T08:52:42Z",
      "updated_at": "2023-04-13T18:25:16Z",
      "closed_at": "2023-04-13T18:25:16Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/296/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/296",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/296",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:25.762518",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "再有人标题写“简短的错误描述”不改我真的要自闭了。模板里写的东西都不看的么。。。。\r\n\r\n请提供更多信息，看看终端中输出是什么。",
          "created_at": "2023-03-22T10:12:27Z"
        }
      ]
    },
    {
      "issue_number": 284,
      "title": "[本地部署] 上传pdf文件后，显示索引构建成功，但是返回None",
      "body": "### 错误描述\r\n> 在本地搭建好服务后，上传pdf文件，询问chatGPT\"这篇论文讲了什么内容\"，返回空值\r\n\r\n### 复现操作\r\n> 你之前干了什么，然后出现了错误呢？例如：\r\n> 1. 正常完成本地部署\r\n> 2. 在对话框中要求 ChatGPT 对文件的内容进行理解\r\n\r\n### 错误截图\r\n返回内容如下\r\n> ![image](https://user-images.githubusercontent.com/34154011/226806625-331b3d2f-aa11-484a-8f91-0321e0875611.png)\r\n\r\n### 终端（控制台）中的错误报告\r\n> 如果可以，请复制终端中的主要错误报告。\r\n\r\n```console\r\nlangchain\\llms\\openai.py:169: UserWarning: You are trying to use a chat model. This way of initializing it is no longer supported. Instead, please use: `from langchain.chat_models import ChatOpenAI`\r\n  warnings.warn(\r\n\r\nINFO:root:输入为：你可以理解这本书的内容吗\r\nINFO:root:构建索引中……（这可能需要比较久的时间）\r\nINFO:root:找到了缓存的索引文件，加载中……\r\nINFO:root:Question: 你可以理解这本书的内容吗\r\nINFO:llama_index.token_counter.token_counter:> [query] Total LLM token usage: 0 tokens\r\nINFO:llama_index.token_counter.token_counter:> [query] Total embedding token usage: 24 tokens\r\nINFO:root:Response: None\r\nINFO:root:Response: None\r\n```\r\n\r\n### 运行环境\r\n#### 桌面系统\r\n - OS: [e.g. Windows11 22H2]\r\n - Browser: Microsoft Edge 版本 111.0.1661.44 (正式版本) (64 位)\r\n\r\n#### 运行依赖\r\n- Gradio version: 3.23.0\r\n- Python (或Python3) version: 3.10.9\r\n\r\n",
      "state": "closed",
      "author": "Theseaway",
      "author_type": "User",
      "created_at": "2023-03-22T05:11:34Z",
      "updated_at": "2023-04-13T18:23:09Z",
      "closed_at": "2023-04-13T18:23:09Z",
      "labels": [
        "bug",
        "🔌 dependency"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/284/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/284",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/284",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:25.935283",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "某些PDF解析可能会出错。能提供一下PDF吗？",
          "created_at": "2023-03-22T07:03:25Z"
        },
        {
          "author": "MZhao-ouo",
          "body": "无进展，closed",
          "created_at": "2023-04-13T18:23:09Z"
        }
      ]
    },
    {
      "issue_number": 594,
      "title": "[功能请求]: 请问下api_host填什么格式，有示例么",
      "body": "### 相关问题\n\n请问下api_host填什么格式，有示例么\n\n### 可能的解决办法\n\n请问下api_host填什么格式，有示例么\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "ayamzh",
      "author_type": "User",
      "created_at": "2023-04-11T06:38:20Z",
      "updated_at": "2023-04-13T18:19:58Z",
      "closed_at": "2023-04-13T18:19:57Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/594/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/594",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/594",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:26.110811",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "如果你想问的是在config.py里怎么设置的话…………哎呀，这部分的代码还没写，是的，，确实，我当时以为很快 @MZhao-ouo 就能把这个加上，就先把这部分写进了README里，但事实上似乎并没有QAQ\r\n\r\n现在你暂时可以在这里设置url：\r\nhttps://github.com/GaiZhenbiao/ChuanhuChatGPT/blob/9bc06d3a38d945ea7aa8b43df5a0b48f389aa4df/modules/presets.py#L10-L12",
          "created_at": "2023-04-11T14:08:12Z"
        },
        {
          "author": "MZhao-ouo",
          "body": "config里设置确实还没有加入。在网页中的高级设置里填写的格式应该是纯主机名，例如`api.openai.com`",
          "created_at": "2023-04-12T02:31:30Z"
        },
        {
          "author": "zezagit",
          "body": "请问网页是指的huggingface的那个网页吗，我在那个网页中的高级设置没找到设置主机名啊\r\n![image](https://user-images.githubusercontent.com/78341434/231334167-ead7e829-fb97-4a72-9ebc-2ee00697a806.png)\r\n",
          "created_at": "2023-04-12T02:41:49Z"
        },
        {
          "author": "MZhao-ouo",
          "body": "> 请问网页是指的huggingface的那个网页吗，我在那个网页中的高级设置没找到设置主机名啊 ![image](https://user-images.githubusercontent.com/78341434/231334167-ead7e829-fb97-4a72-9ebc-2ee00697a806.png)\r\n\r\nHuggingFace版不需要设置api-host，毕竟hf上的机器本来就在海外",
          "created_at": "2023-04-12T02:48:25Z"
        }
      ]
    },
    {
      "issue_number": 600,
      "title": "[功能请求]: Docker 模式下允许使用multi_api_key",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n在检测的docker模式运行时，除了检查my_api_key是否为空，还需要检查multi_api_key是否开启。因为docker运行时可以通过`--volume` 的方式来设置`config.json`\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "plucury",
      "author_type": "User",
      "created_at": "2023-04-12T03:02:10Z",
      "updated_at": "2023-04-13T12:43:21Z",
      "closed_at": "2023-04-13T12:43:21Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/600/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/600",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/600",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:26.299436",
      "comments": []
    },
    {
      "issue_number": 605,
      "title": "[功能请求]: localize to English UI",
      "body": "### 相关问题\n\nDo you have any plan to localize it to English UI?\n\n### 可能的解决办法\n\nFor now, the easiest way to do it is to create another ChuanhuChatbot_en.py, and presets_en.py (perhaps)\r\n1. I have created a Chinese-to-English mapping function and dictionary. \r\n2. When launching the gradio app, it will translate it to English UI. \r\n3. As such, it will not disturb the ChuanhuChatbot.py (Chinese UI)\r\n4. I can also help to translate the wiki into English if necessary.\r\n* I think Chuanhu is the best clean and easy-to-use UI for chatGPT by far. I hope more people can use it if there is an English version. \n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "chinwh2019",
      "author_type": "User",
      "created_at": "2023-04-12T04:15:43Z",
      "updated_at": "2023-04-13T09:41:32Z",
      "closed_at": "2023-04-12T04:33:17Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 9,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/605/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/605",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/605",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:26.299461",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "🤔️gradio好像有在做本地化的功能，不过还没做完",
          "created_at": "2023-04-12T04:21:10Z"
        },
        {
          "author": "chinwh2019",
          "body": "Yes, I checked the gradio announcement, but not sure when it will release this function. Perhaps we can wait a little while, if you wish to pull request, please let me know anytime. ",
          "created_at": "2023-04-12T04:27:44Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "我觉得分离专门的英文版文件太麻烦了，我想等等gradio推出正儿八经的本地化功能，到时候再跟进。",
          "created_at": "2023-04-12T04:29:57Z"
        },
        {
          "author": "chinwh2019",
          "body": "Alright.. I will close this issue then :) ",
          "created_at": "2023-04-12T04:33:17Z"
        },
        {
          "author": "Keldos-Li",
          "body": "我觉得README和wiki确实可以翻译一个英文版出来先……~~（是我三个星期前打算做的事，嗯，我又没空做了）~~",
          "created_at": "2023-04-12T04:35:53Z"
        }
      ]
    },
    {
      "issue_number": 626,
      "title": "plugins integration suggestion",
      "body": "### 相关问题\n\nhej @GaiZhenbiao  love your chatgpt project!👏\r\nHow about integrating getitAI's open Plugin Store for easy plugin installs? (https://www.getit.ai/gpt-plugins) Let's chat for 15 mins: https://calendly.com/d/z4j-cb5-h2y/getitai-devs\n\n### 可能的解决办法\n\nsimple link integration\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "Lionardo",
      "author_type": "User",
      "created_at": "2023-04-13T07:11:08Z",
      "updated_at": "2023-04-13T07:11:08Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/626/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 1
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/626",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/626",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:26.501078",
      "comments": []
    },
    {
      "issue_number": 623,
      "title": "[功能请求]: 增加调用chatgpt plugin功能通过前端页面交互",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n通过langchain调用chatgpt-plugin\r\n\r\n\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n可以参考这个链接： https://python.langchain.com/en/latest/modules/agents/tools/examples/chatgpt_plugins.html",
      "state": "open",
      "author": "chucksylar",
      "author_type": "User",
      "created_at": "2023-04-13T00:50:59Z",
      "updated_at": "2023-04-13T00:50:59Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/623/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/623",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/623",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:26.501101",
      "comments": []
    },
    {
      "issue_number": 606,
      "title": "[Bug]: 切换gpt模型后报错",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n☹️发生了错误：{ “error”: { “message”: “Incorrect API key provided: sk-L*******************************************4HZ5. You can find your API key at https://platform.openai.com/account/api-keys.”, “type”: “invalid_request_error”, “param”: null, “code”: “invalid_api_key” }}\n\n### 复现操作\n\n1. 正常完成部署\r\n2. 部署后直接使用（默认为gpt-3.5-turbo），没有任何问题。\r\n3. 切换为gpt-4，使用时出现以上报错。（报错之后，在OpenAI Translator以及OpenAI后台检查过，我的key正常的并且是有权限使用gpt-4的）。\r\n4. 切换回gpt-3.5-turbo，仍然报错。\r\n5. 重启程序，gpt-3.5-turbo可以正常使用。一旦切换，就会一直出错。\r\n6. 修改传输延时不能解决问题。\n\n### 错误日志\n\n```shell\n☹️发生了错误：{ “error”: { “message”: “Incorrect API key provided: sk-L*******************************************4HZ5. You can find your API key at https://platform.openai.com/account/api-keys.”, “type”: “invalid_request_error”, “param”: null, “code”: “invalid_api_key” }}\n```\n\n\n### 运行环境\n\n- OS: Ubuntu 20.04\r\n- Browser: Edge\r\n- Gradio version: 3.25.0\r\n- Python version: 3.10.6\r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "jsbyysheng",
      "author_type": "User",
      "created_at": "2023-04-12T06:29:30Z",
      "updated_at": "2023-04-12T17:17:19Z",
      "closed_at": "2023-04-12T17:09:50Z",
      "labels": [
        "bug",
        "👍 good"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/606/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/606",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/606",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:26.501109",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "@MZhao-ouo 你要不测试下？",
          "created_at": "2023-04-12T06:30:30Z"
        },
        {
          "author": "MZhao-ouo",
          "body": "已查出问题，还是中间的字符被替换成*了，为什么这个bug又回来了🤔",
          "created_at": "2023-04-12T06:43:52Z"
        },
        {
          "author": "MZhao-ouo",
          "body": "已解决，请更新到最新版本",
          "created_at": "2023-04-12T17:09:50Z"
        }
      ]
    },
    {
      "issue_number": 615,
      "title": "[功能请求]: 大佬，求个DOCKER部署……",
      "body": "### 相关问题\n\n萌新求DOCKER的参数，连要映射哪个端口都没看明白=  =\r\n\n\n### 可能的解决办法\n\n求Docker的环境参数……environment那个~_~谢谢\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "themis0009",
      "author_type": "User",
      "created_at": "2023-04-12T12:16:12Z",
      "updated_at": "2023-04-12T17:03:34Z",
      "closed_at": "2023-04-12T17:03:34Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/615/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/615",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/615",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:26.687849",
      "comments": [
        {
          "author": "kkkk24juastin",
          "body": "docker run -d --name chatgpt \\\r\n\t-e my_api_key=\"sk------\" \\\r\n\t-v ~/chatGPThistory:/app/history \\\r\n\t-v ~/ChuanhuChatbot.py:/app/ChuanhuChatbot.py \\\r\n\t-p 7860:7860 \\\r\n\ttuchuanhuhuhu/chuanhuchatgpt:latest\r\n\r\n\r\n这是我的，映射了历史记录和配置文件",
          "created_at": "2023-04-12T12:25:15Z"
        },
        {
          "author": "themis0009",
          "body": "> docker run -d --name chatgpt -e my_api_key=\"sk------\" -v ~/chatGPThistory:/app/history -v ~/ChuanhuChatbot.py:/app/ChuanhuChatbot.py -p 7860:7860 tuchuanhuhuhu/chuanhuchatgpt:latest\r\n> \r\n> 这是我的，映射了历史记录和配置文件\r\n\r\n感谢大佬~\r\n请教，国内服务器部署的话，可以添加反代么？",
          "created_at": "2023-04-12T13:04:24Z"
        },
        {
          "author": "kkkk24juastin",
          "body": "你指nginx反代还是openai的api反代，前者的话，可以、后者不清楚，因为我的服务器在海外，不过应该可以更换api的endpoint\r\n、",
          "created_at": "2023-04-12T13:11:36Z"
        },
        {
          "author": "themis0009",
          "body": "> 你指nginx反代还是openai的api反代，前者的话，可以、后者不清楚，因为我的服务器在海外，不过应该可以更换api的endpoint 、\r\n\r\n谢谢大佬~是指openai的反代……\r\n要是大佬能为我指点nginx的反代就更感谢了\r\n",
          "created_at": "2023-04-12T13:18:28Z"
        },
        {
          "author": "kkkk24juastin",
          "body": "api反代应该是加上这个把    -e api_host=\"替换成自定义的api请求地址\"、后面的地址是你自己搭建的或者用的别人的，nginx的反向代理，如果是新手的话，建议使用nginxproxymanager的docker镜像或者安装1panel运维面板，操作非常简单",
          "created_at": "2023-04-12T13:23:55Z"
        }
      ]
    },
    {
      "issue_number": 616,
      "title": "[功能请求]: 加入chatbot的role",
      "body": "### 相关问题\n\n加入chatbot的role\r\n\r\n---\r\n\r\n参考：\r\n\r\nhttps://blog.meathill.com/ai/my-ai-learning-summary-chatgpt-api-improvements.html\r\n\r\nhttps://platform.openai.com/docs/guides/chat\n\n### 可能的解决办法\n\n加入chatbot的role\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n加入chatbot的role",
      "state": "closed",
      "author": "HsunGong",
      "author_type": "User",
      "created_at": "2023-04-12T14:13:10Z",
      "updated_at": "2023-04-12T14:24:17Z",
      "closed_at": "2023-04-12T14:24:17Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/616/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/616",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/616",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:26.872795",
      "comments": []
    },
    {
      "issue_number": 514,
      "title": "[Bug]: 添加users后 TypeError: z.stylesheets is not iterable",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n服务启动正常，但是添加users配置后，默认展示登录界面，页面加载时报错，查看控制台显示如下错误\r\n\r\nUncaught (in promise) TypeError: z.stylesheets is not iterable\r\n    at b (index.d6979a87.js:8:22067)\r\n    at index.d6979a87.js:8:23182\n\n### 复现操作\n\n服务启动正常，但是添加users配置后，默认展示登录界面，页面加载时报错\n\n### 错误日志\n\n```shell\nUncaught (in promise) TypeError: z.stylesheets is not iterable\r\n    at b (index.d6979a87.js:8:22067)\r\n    at index.d6979a87.js:8:23182\n```\n\n\n### 运行环境\n\n- OS: Windows\r\n- Browser: Chrome \r\n- Gradio version: unknown\r\n- Python version: 3.9\r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "pgkk",
      "author_type": "User",
      "created_at": "2023-04-02T17:05:06Z",
      "updated_at": "2023-04-12T05:34:53Z",
      "closed_at": "2023-04-12T05:34:53Z",
      "labels": [
        "duplicate",
        "question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/514/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/514",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/514",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:26.872818",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "Duplicate with \r\n- #437\r\n\r\n另外请给出更多相关信息与复现步骤，一般不应该有这样的问题……请尝试尝试升级gradio，或者干脆升级所有依赖项。\r\n\r\n另外gradio version怎么可能是unknown呢？\r\n<img width=\"229\" alt=\"image\" src=\"https://user-images.githubusercontent.com/23137268/229370699-dabf65e2-b109-43e8-b2cc-e94cdaa0611c.png\">\r\n",
          "created_at": "2023-04-02T18:01:56Z"
        },
        {
          "author": "Keldos-Li",
          "body": "太久没有回应。可以试着检查一下你的dns配置。",
          "created_at": "2023-04-12T05:34:53Z"
        }
      ]
    },
    {
      "issue_number": 602,
      "title": "[功能请求]: 建议增加API域名填写入口",
      "body": "### 相关问题\n\n官方的API域名为api.openai.com，因网络管制原因，不能访问，所以搭建了api.XXX.com的URL反向代理。希望可以增加设置框，填入代理的URL\n\n### 可能的解决办法\n\n以下是其他chatGPT应用的填入界面，仅供参考\r\n![image](https://user-images.githubusercontent.com/47035563/231339959-3933f36b-ec15-40af-9a1c-79a0589b3000.png)\r\n\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "MeditatorV",
      "author_type": "User",
      "created_at": "2023-04-12T03:19:28Z",
      "updated_at": "2023-04-12T05:28:43Z",
      "closed_at": "2023-04-12T05:28:43Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/602/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/602",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/602",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:27.046060",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "![image](https://user-images.githubusercontent.com/23137268/231359257-69399756-11ba-408f-9ae9-d849dfff807e.png)\r\n\r\n可以在这里填入主机名",
          "created_at": "2023-04-12T05:28:43Z"
        }
      ]
    },
    {
      "issue_number": 584,
      "title": "[本地部署]: ‘str’ object has no attribute ‘api_key’",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n本地部署多apikey的时候报错，‘str’ object has no attribute ‘api_key’， 一个apikey的时候使用正常\n\n### 复现操作\n\n1. 开启多账户apikey模式\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n```markdown\n- OS: mac\r\n- Browser: Chrome\r\n- Gradio version: 3.24.1\r\n- Python version: 3.9\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "chucksylar",
      "author_type": "User",
      "created_at": "2023-04-10T14:22:10Z",
      "updated_at": "2023-04-12T03:14:28Z",
      "closed_at": "2023-04-12T03:14:28Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/584/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/584",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/584",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:27.207147",
      "comments": [
        {
          "author": "realnoob007",
          "body": "我也出现了这个问题",
          "created_at": "2023-04-10T15:26:40Z"
        },
        {
          "author": "Pnut-GGG",
          "body": "是装饰器在返回的时候 将self赋值成了api_key 在modules.shared.State.switching_api_key",
          "created_at": "2023-04-10T17:42:06Z"
        },
        {
          "author": "Pnut-GGG",
          "body": "是一个bug",
          "created_at": "2023-04-10T17:43:01Z"
        }
      ]
    },
    {
      "issue_number": 598,
      "title": "[本地部署]: windows部署时无法安装deepspeed，这个好像不支持windows，但是不安装这个包就运行不了",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\nrequirements.txt中已全部安装但运行后出现\r\n![image](https://user-images.githubusercontent.com/54277494/231324934-bd69139c-32ba-4903-bdca-d18828819f41.png)\r\n继续安装requirements_advanced.txt后出现\r\n![image](https://user-images.githubusercontent.com/54277494/231325121-6e66008e-6bca-4baf-91d9-5fe41aeb4e01.png)\r\ndeepspeed好像不支持windows，但如何在不安装这个启动呢？\n\n### 复现操作\n\n安装requirements_advanced.txt\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n```markdown\n- OS: Windows10\r\n- Browser: Chrome\r\n- Gradio version: \r\n- Python version: 3.9.13\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "hebinglin1313",
      "author_type": "User",
      "created_at": "2023-04-12T01:42:59Z",
      "updated_at": "2023-04-12T03:01:06Z",
      "closed_at": "2023-04-12T03:01:05Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/598/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/598",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/598",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:27.382055",
      "comments": [
        {
          "author": "MZhao-ouo",
          "body": "新的requirements.txt已经移除deepspeed，只有在需要本地部署LLM时可以安装requirements_advanced.txt",
          "created_at": "2023-04-12T03:01:05Z"
        }
      ]
    },
    {
      "issue_number": 578,
      "title": "[功能请求]: 有没有和多文件chat的方法?",
      "body": "### 相关问题\n\n现在Index只能工作在一个文件上, 但是很多源码之类的东西都是多个文件的. 反正都是llama-index在后面用word2vec控制context, 原理上不妨碍一次index多个文件吧. 我如果git clone下来一个仓库, 那丢很多源码进去要求分析都是合理的不是. 还有就是网页形式的ref doc, 也是有这种多文件index需求的.\n\n### 可能的解决办法\n\n能够一次指定多个文件给word2vec处理, 通过上传的方式, 或者指定URL的方式.\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "ca1123",
      "author_type": "User",
      "created_at": "2023-04-09T20:06:48Z",
      "updated_at": "2023-04-12T02:51:23Z",
      "closed_at": "2023-04-12T02:51:03Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/578/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/578",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/578",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:27.560332",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "从一开始，你就**可以**上传多个文件啊，没有上限",
          "created_at": "2023-04-10T03:21:32Z"
        },
        {
          "author": "ca1123",
          "body": "> 从一开始，你就**可以**上传多个文件啊，没有上限\r\n\r\n我明白了, 得一下子传上去, 不能一个一个拖拽, 这倒不是大问题.",
          "created_at": "2023-04-10T03:25:30Z"
        },
        {
          "author": "ca1123",
          "body": "那我有办法处理文档网站么? 比如javadoc, 比如clj-doc",
          "created_at": "2023-04-10T14:26:04Z"
        },
        {
          "author": "xingfanxia",
          "body": "一直支持多文件",
          "created_at": "2023-04-10T22:13:46Z"
        },
        {
          "author": "xingfanxia",
          "body": "> 那我有办法处理文档网站么? 比如javadoc, 比如clj-doc\r\n\r\n弄成markdown上传就行",
          "created_at": "2023-04-10T22:14:00Z"
        }
      ]
    },
    {
      "issue_number": 597,
      "title": "[Bug]: chatglm在哪",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n1·1·1·1\n\n### 复现操作\n\n1·1·\n\n### 错误日志\n\n```shell\n1·\n```\n\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n11·1·1·1·1·",
      "state": "closed",
      "author": "yuanjie-ai",
      "author_type": "User",
      "created_at": "2023-04-12T01:02:36Z",
      "updated_at": "2023-04-12T02:36:22Z",
      "closed_at": "2023-04-12T02:36:21Z",
      "labels": [
        "bug",
        "👿 bad issue!"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/597/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/597",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/597",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:27.748247",
      "comments": [
        {
          "author": "MZhao-ouo",
          "body": "bad issue. 请参考#591",
          "created_at": "2023-04-12T02:36:21Z"
        }
      ]
    },
    {
      "issue_number": 596,
      "title": "[功能请求]: 能不能搞一下支持部署在vercel上",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n能不能搞一下支持部署在vercel上，vercel支持cdn加速，把域名配置一下就能访问，不用魔法，很方便，速度还很快\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Maddaxman",
      "author_type": "User",
      "created_at": "2023-04-11T10:40:45Z",
      "updated_at": "2023-04-11T12:30:27Z",
      "closed_at": "2023-04-11T12:30:27Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/596/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/596",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/596",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:27.939120",
      "comments": [
        {
          "author": "Maddaxman",
          "body": "还支持自动拉取新代码升级，很方便",
          "created_at": "2023-04-11T10:41:26Z"
        },
        {
          "author": "Keldos-Li",
          "body": "要vercel的话整个前后端技术都是不一样的。\n\n建议你看看其他本身就使用vercel搭建的项目，有很多。",
          "created_at": "2023-04-11T11:07:47Z"
        },
        {
          "author": "Maddaxman",
          "body": "> 要vercel的话整个前后端技术都是不一样的。\r\n> \r\n> 建议你看看其他本身就使用vercel搭建的项目，有很多。\r\n\r\n明白了，我在用着了，只是问一下能不能搞",
          "created_at": "2023-04-11T12:30:12Z"
        }
      ]
    },
    {
      "issue_number": 576,
      "title": "[Bug]: 上传pdf文件后第一个问题正常回复，之后都是失败的",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n：☹️发生了错误：读取超时，无法获取对话。请检查网络连接，或者API-Key是否有效。  Error\r\n![catsxp_screenshot](https://user-images.githubusercontent.com/12869582/230760058-bcf0e9d2-e6bd-4f36-a470-9edb2cf1a0dc.png)\r\n\n\n### 复现操作\n\n上传pdf对话第一个有回复，之后没响应\n\n### 错误日志\n\n```shell\ned: anyio<5.0,>=3.0 in f:\\chatgpt\\chuanhuchatgpt-main\\myenv\\lib\\site-packages (from httpcore<0.17.0,>=0.15.0->httpx->gradio->-r requirements.txt (line 1)) (3.6.2)\r\nRequirement already satisfied: pyrsistent!=0.17.0,!=0.17.1,!=0.17.2,>=0.14.0 in f:\\chatgpt\\chuanhuchatgpt-main\\myenv\\lib\\site-packages (from jsonschema>=3.0->altair>=4.2.0->gradio->-r requirements.txt (line 1)) (0.19.3)\r\nRequirement already satisfied: uc-micro-py in f:\\chatgpt\\chuanhuchatgpt-main\\myenv\\lib\\site-packages (from linkify-it-py<3,>=1->markdown-it-py[linkify]>=2.0.0->gradio->-r requirements.txt (line 1)) (1.0.1)\r\nRequirement already satisfied: mypy-extensions>=0.3.0 in f:\\chatgpt\\chuanhuchatgpt-main\\myenv\\lib\\site-packages (from typing-inspect>=0.4.0->dataclasses_json->llama_index==0.5.5->-r requirements.txt (line 10)) (1.0.0)\r\nRequirement already satisfied: pycparser in f:\\chatgpt\\chuanhuchatgpt-main\\myenv\\lib\\site-packages (from cffi>=1.12->cryptography>=36.0.0->pdfminer.six==20221105->pdfplumber->-r requirements.txt (line 14)) (2.21)\r\n(myenv) PS F:\\ChatGPT\\ChuanhuChatGPT-main> python ChuanhuChatbot.py\r\n2023-04-09 15:05:23,089 [INFO] [utils.py:313] 获取模板文件名列表\r\n2023-04-09 15:05:23,089 [INFO] [utils.py:264] 获取文件名列表，目录为templates，文件类型为['.csv', 'json']，是否为纯文本 列表True\r\n2023-04-09 15:05:23,090 [INFO] [utils.py:287] 加载模板文件1 中文提示词.json，模式为2（0为返回字典和下拉菜单，1为返回下拉菜单，2为返回字典）\r\n2023-04-09 15:05:23,090 [INFO] [utils.py:289] Loading template...\r\n2023-04-09 15:05:23,597 [WARNING] [utils.py:388] 无法获取IP地址信息。\r\n{'error': True, 'reason': 'RateLimited', 'message': 'Visit https://ipapi.co/ratelimited/ for details'}\r\nF:\\ChatGPT\\ChuanhuChatGPT-main\\myenv\\lib\\site-packages\\gradio\\deprecation.py:43: UserWarning: You have unused kwarg parameters in Files, please remove them: {'multiple': True}\r\n  warnings.warn(\r\n2023-04-09 15:05:23,609 [INFO] [utils.py:313] 获取模板文件名列表\r\n2023-04-09 15:05:23,609 [INFO] [utils.py:264] 获取文件名列表，目录为templates，文件类型为['.csv', 'json']，是否为纯文本 列表True\r\n2023-04-09 15:05:23,610 [INFO] [utils.py:313] 获取模板文件名列表\r\n2023-04-09 15:05:23,610 [INFO] [utils.py:264] 获取文件名列表，目录为templates，文件类型为['.csv', 'json']，是否为纯文本 列表True\r\n2023-04-09 15:05:23,610 [INFO] [utils.py:313] 获取模板文件名列表\r\n2023-04-09 15:05:23,611 [INFO] [utils.py:264] 获取文件名列表，目录为templates，文件类型为['.csv', 'json']，是否为纯文本 列表True\r\n2023-04-09 15:05:23,611 [INFO] [utils.py:287] 加载模板文件1 中文提示词.json，模式为1（0为返回字典和下拉菜单，1为返回下拉菜单，2为返回字典）\r\n2023-04-09 15:05:23,611 [INFO] [utils.py:289] Loading template...\r\n2023-04-09 15:05:23,620 [INFO] [utils.py:282] 从用户  中获取历史记录文件名列表\r\n2023-04-09 15:05:23,620 [INFO] [utils.py:264] 获取文件名列表，目录为history，文件类型为['.json']，是否为纯文本列表True\r\n2023-04-09 15:05:23,620 [INFO] [utils.py:282] 从用户  中获取历史记录文件名列表\r\n2023-04-09 15:05:23,621 [INFO] [utils.py:264] 获取文件名列表，目录为history，文件类型为['.json']，是否为纯文本列表True\r\n2023-04-09 15:05:24,121 [INFO] [ChuanhuChatbot.py:381]\r\n川虎的温馨提示：访问 http://localhost:7860 查看界面\r\nReloading javascript...\r\nRunning on local URL:  http://127.0.0.1:7860\r\n\r\nTo create a public link, set `share=True` in `launch()`.\r\n2023-04-09 15:06:59,903 [INFO] [chat_func.py:275] 输入为：MA5:MA(C,5); JDZ:=ABS(MA5-REF(MA5,1)); SHANG:=MA5>=REF(MA5,1); XIA:=MA5<=REF(MA5,1); 要求：麦语言在SHANG成立时，从0开始累加JDZ； 在XIA成立时，从0开始累加JDZ；，如何实现要求的后续代码，使用中文回复\r\n\r\n2023-04-09 15:06:59,909 [INFO] [chat_func.py:351] 使用流式传输\r\n2023-04-09 15:06:59,909 [INFO] [chat_func.py:97] 实时回答模式\r\n2023-04-09 15:07:03,130 [INFO] [chat_func.py:120] 输入token计数: 142\r\n422it [00:26, 16.06it/s]\r\n2023-04-09 15:07:31,093 [INFO] [chat_func.py:387] 传输完毕。当前token计数为[352]\r\n2023-04-09 15:07:31,093 [INFO] [chat_func.py:389] 回答为：可以使用累加函数SUM()来实现要求的后续代码。具体代码如下：\r\n\r\n累加SHANG成立时的JDZ：SUM(IF(SHANG, JDZ, 0), 0)\r\n\r\n累加XIA成立时的JDZ：SUM(IF(XIA, JDZ, 0), 0)\r\n\r\n解释一下：SUM()函数的第一个参数为累加的变量，第二个参数为初始累加值。\r\n\r\n对于第一个累加函数，IF(SHANG, JDZ, 0)表示如果SHANG成立，则返回JDZ的值，否则返回0。如果累加的初始值为0，那么就可以实现从0开始累加JDZ。\r\n\r\n同理，对于第二个累加函数，IF(XIA, JDZ, 0)表示如果XIA成立，则返回JDZ的值，否则返回0。\r\n\r\n希望能帮到你！\r\n2023-04-09 15:10:18,286 [INFO] [chat_func.py:275] 输入为：不是从最左边一次性累加，而是从SHANG成立开始从0累加JDZ到SHANG不成立结束，\r\n2023-04-09 15:10:18,297 [INFO] [chat_func.py:351] 使用流式传输\r\n2023-04-09 15:10:18,297 [INFO] [chat_func.py:97] 实时回答模式\r\n2023-04-09 15:10:18,298 [INFO] [chat_func.py:120] 输入token计数: 43\r\n768it [00:51, 14.88it/s]\r\n2023-04-09 15:11:11,337 [INFO] [chat_func.py:387] 传输完毕。当前token计数为[352, 426]\r\n2023-04-09 15:11:11,337 [INFO] [chat_func.py:389] 回答为：非常抱歉，我理解有误。根据你的需求，建议使用以下代码实现：\r\n\r\n// 计算当天是否满足SHANG条件\r\nSHANG_TODAY:=MA5>=REF(MA5,1);\r\n\r\n// 如果当天满足SHANG条件，且前一天未满足，则从0开始累加JDZ\r\nIF(SHANG_TODAY AND (REF(SHANG_TODAY,1)=0),\r\n   begin\r\n      SHANG_SUM:=JDZ;\r\n      SHANG_FLAG:=1;\r\n   end);\r\n\r\n// 如果当天满足SHANG条件，并且前一天也满足，则继续累加JDZ\r\nIF(SHANG_TODAY AND (REF(SHANG_TODAY,1)=1),\r\n   begin\r\n      IF(SHANG_FLAG=1, SHANG_SUM:=SHANG_SUM+JDZ, SHANG_SUM:=0);\r\n      SHANG_FLAG:=1;\r\n   end);\r\n\r\n// 如果当天不满足SHANG条件，则将累加JDZ的标志位置为0\r\nIF(NOT SHANG_TODAY, SHANG_FLAG:=0);\r\n\r\n// 输出当天累加的结果\r\nPRINT(\"SHANG累加结果：\", SHANG_SUM);\r\n\r\n类似地，也可以使用类似的代码实现XIA条件的累加。以上代码中，SHANG_SUM表示累加的结果，SHANG_FLAG表示是否在进行累加的标志位。如果当天满足SHANG条件且前一天未满足，则认为需要重新从0开始累加JDZ；如果当天满足SHANG条件且前一天也满足，则继续累加；如果当天不满足SHANG条件，则将累加标志置为0。\r\n2023-04-09 15:11:45,132 [INFO] [utils.py:318] 应用模板中，选择为作为 IT 专家，原始系统提示为你是文华财经麦语言的高级编程人员\r\n2023-04-09 15:12:08,503 [INFO] [config.py:148] 更新后的文件参数为：defaultdict(<function <lambda> at 0x00000178BDC953F0>, {'pdf': {'two_column': True, 'formula_ocr': True}})\r\n2023-04-09 15:12:57,460 [INFO] [chat_func.py:275] 输入为：T9全教程_2.pdf内容概括一下\r\n2023-04-09 15:12:57,470 [INFO] [chat_func.py:287] 加载索引中……（这可能需要几分钟）\r\n2023-04-09 15:13:02,377 [INFO] [llama_func.py:46] loading file: T9全教程_2.pdf\r\n100%|████████████████████████████████████████████████████████████████████████████████| 360/360 [00:06<00:00, 55.94it/s]\r\n2023-04-09 15:13:09,274 [INFO] [llama_func.py:118] 构建索引中……\r\n2023-04-09 15:14:57,369 [INFO] [token_counter.py:60] > [build_index_from_nodes] Total LLM token usage: 0 tokens\r\n2023-04-09 15:14:57,369 [INFO] [token_counter.py:63] > [build_index_from_nodes] Total embedding token usage: 663987 tokens\r\n2023-04-09 15:15:06,837 [INFO] [chat_func.py:291] 索引构建完成，获取回答中……\r\nF:\\ChatGPT\\ChuanhuChatGPT-main\\myenv\\lib\\site-packages\\langchain\\llms\\openai.py:608: UserWarning: You are trying to use a chat model. This way of initializing it is no longer supported. Instead, please use: `from langchain.chat_models import ChatOpenAI`\r\n  warnings.warn(\r\n2023-04-09 15:15:07,588 [INFO] [chat_func.py:351] 使用流式传输\r\n2023-04-09 15:15:07,588 [INFO] [chat_func.py:97] 实时回答模式\r\n2023-04-09 15:15:07,589 [INFO] [chat_func.py:120] 输入token计数: 22\r\n2023-04-09 15:15:18,173 [INFO] [chat_func.py:387] 传输完毕。当前token计数为[352, 426, 22]\r\n2023-04-09 15:15:18,173 [INFO] [chat_func.py:389] 回答为：\r\n2023-04-09 15:16:52,927 [ERROR] [base_events.py:1752] Exception in callback _ProactorBasePipeTransport._call_connection_lost(None)\r\nhandle: <Handle _ProactorBasePipeTransport._call_connection_lost(None)>\r\nTraceback (most recent call last):\r\n  File \"C:\\veighna_studio\\lib\\asyncio\\events.py\", line 80, in _run\r\n    self._context.run(self._callback, *self._args)\r\n  File \"C:\\veighna_studio\\lib\\asyncio\\proactor_events.py\", line 165, in _call_connection_lost\r\n    self._sock.shutdown(socket.SHUT_RDWR)\r\nConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。\r\n2023-04-09 15:17:47,220 [INFO] [chat_func.py:275] 输入为：概括此文件T9全教程_2.pdf\r\n2023-04-09 15:17:47,231 [INFO] [chat_func.py:287] 加载索引中……（这可能需要几分钟）\r\n2023-04-09 15:17:47,246 [INFO] [llama_func.py:113] 找到了缓存的索引文件，加载中……\r\n2023-04-09 15:17:49,177 [INFO] [chat_func.py:291] 索引构建完成，获取回答中……\r\n2023-04-09 15:17:50,483 [INFO] [chat_func.py:351] 使用流式传输\r\n2023-04-09 15:17:50,483 [INFO] [chat_func.py:97] 实时回答模式\r\n2023-04-09 15:17:50,483 [INFO] [chat_func.py:120] 输入token计数: 33\r\n374it [00:24, 14.97it/s]\r\n2023-04-09 15:18:17,021 [INFO] [chat_func.py:387] 传输完毕。当前token计数为[219]\r\n2023-04-09 15:18:17,021 [INFO] [chat_func.py:389] 回答为：此文件 \"T9订单流策略量化软件使用说明书\" 是一份关于T9算法交易和期货量化交易的全面教程。其中，第一部分介绍了算法交易的概念、与量化交易的关系以及滑点损失等主题；第二部分则详细阐述了期货量化交易的基本流程和价值；第三部分则针对T9编写和机制、公式编写和回测常见问题进行了详细解答。此外，此文件还介绍了可行性分析、盘口算法模型回测、参数优化以及运行模型自动交易等相关主题。[1][2][3][4][5]\r\n2023-04-09 15:19:31,085 [INFO] [chat_func.py:275] 输入为：此pdf里A_IsExchangeOpen函数如何使用，是什么意思\r\n2023-04-09 15:19:31,095 [INFO] [chat_func.py:287] 加载索引中……（这可能需要几分钟）\r\n2023-04-09 15:19:31,111 [INFO] [llama_func.py:113] 找到了缓存的索引文件，加载中……\r\n2023-04-09 15:19:33,004 [INFO] [chat_func.py:291] 索引构建完成，获取回答中……\r\n2023-04-09 15:19:34,333 [INFO] [chat_func.py:351] 使用流式传输\r\n2023-04-09 15:19:34,333 [INFO] [chat_func.py:97] 实时回答模式\r\n2023-04-09 15:19:34,335 [INFO] [chat_func.py:120] 输入token计数: 25\r\n2023-04-09 15:19:44,939 [INFO] [chat_func.py:387] 传输完毕。当前token计数为[219, 25]\r\n2023-04-09 15:19:44,939 [INFO] [chat_func.py:389] 回答为：\r\n2023-04-09 15:20:08,589 [INFO] [chat_func.py:275] 输入为：此文件里A_IsExchangeOpen函数如何使用，是什么意思\r\n2023-04-09 15:20:08,599 [INFO] [chat_func.py:287] 加载索引中……（这可能需要几分钟）\r\n2023-04-09 15:20:08,614 [INFO] [llama_func.py:113] 找到了缓存的索引文件，加载中……\r\n2023-04-09 15:20:10,519 [INFO] [chat_func.py:291] 索引构建完成，获取回答中……\r\n2023-04-09 15:20:11,842 [INFO] [chat_func.py:351] 使用流式传输\r\n2023-04-09 15:20:11,842 [INFO] [chat_func.py:97] 实时回答模式\r\n2023-04-09 15:20:11,845 [INFO] [chat_func.py:120] 输入token计数: 25\r\n2023-04-09 15:20:22,482 [INFO] [chat_func.py:387] 传输完毕。当前token计数为[219, 25, 25]\r\n2023-04-09 15:20:22,482 [INFO] [chat_func.py:389] 回答为：\r\n2023-04-09 15:20:33,813 [INFO] [chat_func.py:275] 输入为：此文件里A_IsExchangeOpen函数如何使用，是什么意思\r\n2023-04-09 15:20:33,824 [INFO] [chat_func.py:287] 加载索引中……（这可能需要几分钟）\r\n2023-04-09 15:20:33,839 [INFO] [llama_func.py:113] 找到了缓存的索引文件，加载中……\r\n2023-04-09 15:20:35,715 [INFO] [chat_func.py:291] 索引构建完成，获取回答中……\r\n2023-04-09 15:20:37,287 [INFO] [chat_func.py:351] 使用流式传输\r\n2023-04-09 15:20:37,287 [INFO] [chat_func.py:97] 实时回答模式\r\n2023-04-09 15:20:37,287 [INFO] [chat_func.py:120] 输入token计数: 25\r\n0it [00:00, ?it/s]2023-04-09 15:20:38,495 [INFO] [chat_func.py:160]   \"error\": {\r\n2023-04-09 15:20:38,515 [INFO] [chat_func.py:160]     \"message\": \"This model's maximum context length is 4097 tokens. However, your messages resulted in 4928 tokens. Please reduce the length of the messages.\",\r\n2023-04-09 15:20:38,525 [INFO] [chat_func.py:160]     \"type\": \"invalid_request_error\",\r\n2023-04-09 15:20:38,535 [INFO] [chat_func.py:160]     \"param\": \"messages\",\r\n2023-04-09 15:20:38,546 [INFO] [chat_func.py:160]     \"code\": \"context_length_exceeded\"\r\n2023-04-09 15:20:38,557 [INFO] [chat_func.py:160]   }\r\n2023-04-09 15:20:38,568 [INFO] [chat_func.py:160] }\r\n8it [00:00, 94.35it/s]\r\n2023-04-09 15:20:38,579 [INFO] [chat_func.py:387] 传输完毕。当前token计数为[25, 25, 25]\r\n2023-04-09 15:20:38,579 [INFO] [chat_func.py:389] 回答为：\r\n2023-04-09 15:21:33,615 [INFO] [chat_func.py:275] 输入为：此文件里A_IsExchangeOpen函数如何使用，是什么意思\r\n2023-04-09 15:21:33,626 [INFO] [chat_func.py:287] 加载索引中……（这可能需要几分钟）\r\n2023-04-09 15:21:33,642 [INFO] [llama_func.py:113] 找到了缓存的索引文件，加载中……\r\n2023-04-09 15:21:35,544 [INFO] [chat_func.py:291] 索引构建完成，获取回答中……\r\n2023-04-09 15:21:37,184 [INFO] [chat_func.py:351] 使用流式传输\r\n2023-04-09 15:21:37,184 [INFO] [chat_func.py:97] 实时回答模式\r\n2023-04-09 15:21:37,185 [INFO] [chat_func.py:120] 输入token计数: 25\r\n2023-04-09 15:21:47,846 [INFO] [chat_func.py:387] 传输完毕。当前token计数为[25, 25, 25]\r\n2023-04-09 15:21:47,846 [INFO] [chat_func.py:389] 回答为：\n```\n\n\n### 运行环境\n\n- OS: win11\r\n- Browser: 猫眼浏览器\r\n- Gradio version: 最新版\r\n- Python version: 3.11\r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "1353604736",
      "author_type": "User",
      "created_at": "2023-04-09T07:28:11Z",
      "updated_at": "2023-04-11T00:04:38Z",
      "closed_at": "2023-04-11T00:04:38Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/576/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/576",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/576",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:28.113872",
      "comments": [
        {
          "author": "xingfanxia",
          "body": "```\r\n0it [00:00, ?it/s]2023-04-09 15:20:38,495 [INFO] [chat_func.py:160]   \"error\": {\r\n2023-04-09 15:20:38,515 [INFO] [chat_func.py:160]     \"message\": \"This model's maximum context length is 4097 tokens. However, your messages resulted in 4928 tokens. Please reduce the length of the messages.\",\r\n20",
          "created_at": "2023-04-10T22:17:25Z"
        }
      ]
    },
    {
      "issue_number": 590,
      "title": "[功能请求]: Gradio stylesheets更换cdn源",
      "body": "### 相关问题\n\n这两个Gradio stylesheets能不能更换cdn源啊\r\n![image](https://user-images.githubusercontent.com/58359492/230972622-7faaa158-c11a-4bab-8b40-9b675112e2f3.png)\r\nhttps://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&display=swap\r\nhttps://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap\n\n### 可能的解决办法\n\nGradio stylesheets更换为cdn源\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Pnut-GGG",
      "author_type": "User",
      "created_at": "2023-04-10T18:54:34Z",
      "updated_at": "2023-04-10T19:44:30Z",
      "closed_at": "2023-04-10T19:43:32Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/590/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/590",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/590",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:28.327837",
      "comments": [
        {
          "author": "Pnut-GGG",
          "body": "dns的问题 导致google fonts解析错误",
          "created_at": "2023-04-10T19:44:30Z"
        }
      ]
    },
    {
      "issue_number": 587,
      "title": "[本地部署]: windows本地部署chatglm-6b-int4 报错",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n该chatglm-6b-int4模型以及python运行环境已经在原有chatglm-6b项目本地部署中验证过可以正常使用。\r\n\r\n在ChuanhuChatGPT项目中安装好环境依赖后，并在该项目根目录中新建了models文件夹并放置了模型，运行启动网页正常，\r\n在网页中手动选择模型为chatglm-6b-int4时会报错，错误信息为“ Unable to compare versions for numpy>=1.17: need=1.17 found=None. This is unusual. Consider reinstalling numpy.”\r\n\r\n我本地numpy版本为1.24.2\n\n### 复现操作\n\n1.本地部署\r\n2.选择chatglm-6b-int4模型\r\n3.出现报错\n\n### 错误日志\n\n```shell\n川虎的温馨提示：访问 http://localhost:7860 查看界面\r\nReloading javascript...\r\nRunning on local URL:  http://127.0.0.1:7860\r\n\r\nTo create a public link, set `share=True` in `launch()`.\r\n2023-04-10 22:44:57,025 [INFO] [models.py:426] 正在加载ChatGLM模型: chatglm-6b-int4\r\n2023-04-10 22:44:57,065 [ERROR] [models.py:448] Unable to compare versions for numpy>=1.17: need=1.17 found=None. This is unusual. Consider reinstalling numpy.\n```\n\n\n### 运行环境\n\n```markdown\n- OS: windows\r\n- Browser: edge\r\n- Gradio version: 3.24.1\r\n- Python version: 3.9\n```\n\n\n### 补充说明\n\n![UOJPZ@T79P09_)ISK CTPWI](https://user-images.githubusercontent.com/57593875/230924911-b726863e-aac8-496d-87dd-c70eaf49dd00.png)\r\n",
      "state": "closed",
      "author": "liuyunrui123",
      "author_type": "User",
      "created_at": "2023-04-10T14:46:54Z",
      "updated_at": "2023-04-10T17:20:31Z",
      "closed_at": "2023-04-10T16:38:52Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/587/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/587",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/587",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:28.532098",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "按它说的，重装numpy试试？",
          "created_at": "2023-04-10T15:09:03Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "另外，我非常不建议在Windows上进行本地模型部署（你会遇到各种各样的依赖问题！）。建议换用WSL，用Linux部署。",
          "created_at": "2023-04-10T15:13:25Z"
        },
        {
          "author": "liuyunrui123",
          "body": "抱歉，是我的问题，这个问题是由于chatglm环境遭到了破坏，这个报错是transformers导致。按照chatglm那边的issue， 重新配置了下python环境，升级transformers==4.27.1 ，且模型路径必须给绝对路径而不是相对路径，问题就解决了。这个项目中对应的加载chatglm模型后面也需要这样改动。",
          "created_at": "2023-04-10T16:38:42Z"
        },
        {
          "author": "Keldos-Li",
          "body": "我也好想在win上也装上依赖，哭了😭 ",
          "created_at": "2023-04-10T17:20:31Z"
        }
      ]
    },
    {
      "issue_number": 585,
      "title": "[Bug]: chatGLM_int4 加载失败",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n切换至chatGLM-6b-int4 或 chatGLM-6b-int4-qe 时会出现错误\r\n☹️发生了错误：expected scalar type Half but found Float\r\n![image](https://user-images.githubusercontent.com/49812095/230921876-c0044c78-d736-47b4-ad2b-7e71543c53e1.png)\r\n\r\n\n\n### 复现操作\n\n1. 正常完成本地部署\r\n2. ```pip install -r  requirements_advanced.txt```\r\n3. 在浏览器中切换模型为chatGLM-6b-int4\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: Windows10\r\n- Browser: Chrome\r\n- Gradio version:  3.24.1\r\n- Python version:  3.9.16  \r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "QingXuDw",
      "author_type": "User",
      "created_at": "2023-04-10T14:33:54Z",
      "updated_at": "2023-04-10T15:26:44Z",
      "closed_at": "2023-04-10T15:26:43Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/585/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/585",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/585",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:28.712615",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "终端有报错吗？",
          "created_at": "2023-04-10T15:00:08Z"
        },
        {
          "author": "QingXuDw",
          "body": "终端没有报错。\r\n![image](https://user-images.githubusercontent.com/49812095/230929800-db708a41-8a46-4d6e-acee-1bc44255a51b.png)\r\n\r\n抱歉，我更正一下复现操作：\r\n1. 正常完成本地部署\r\n2. ```pip install -r  requirements_advanced.txt```\r\n3. 在浏览器中切换模型为chatglm-6b-int4\r\n4. 发送任意对话内容",
          "created_at": "2023-04-10T15:11:55Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "Should be fixed in #586 ",
          "created_at": "2023-04-10T15:26:43Z"
        }
      ]
    },
    {
      "issue_number": 579,
      "title": "[功能请求]: 希望能够支持多账户注册使用",
      "body": "### 相关问题\n\n目前仅可默认配置的账户，希望可以支持多账户\n\n### 可能的解决办法\n\n支持前后端分离\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Chan084352",
      "author_type": "User",
      "created_at": "2023-04-10T04:32:53Z",
      "updated_at": "2023-04-10T06:36:06Z",
      "closed_at": "2023-04-10T05:27:14Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/579/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/579",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/579",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:28.884079",
      "comments": [
        {
          "author": "roboger",
          "body": "也可以 自定义 密码 访问 更方便",
          "created_at": "2023-04-10T05:26:19Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "支持的呀",
          "created_at": "2023-04-10T05:27:14Z"
        },
        {
          "author": "roboger",
          "body": "> 支持的呀\r\n\r\n只有填写key，没有填写 自定义 访问码的地方吧",
          "created_at": "2023-04-10T05:28:31Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "请详细阅读一下本项目的readme和wiki，支持多用户、多密码登陆的。",
          "created_at": "2023-04-10T06:36:06Z"
        }
      ]
    },
    {
      "issue_number": 530,
      "title": "[功能请求]: prompt支持订阅",
      "body": "### 相关问题\n\n无\n\n### 可能的解决办法\n\n对于已有的 从github下载保存到本地即可\r\n也可以支持订阅其他的prompt\r\n如果觉得是个不错的点 我可以最近开发一下\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "Gary2018X",
      "author_type": "User",
      "created_at": "2023-04-03T13:07:42Z",
      "updated_at": "2023-04-09T12:17:21Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/530/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/530",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/530",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:29.063824",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "确实！挺不错的。https://github.com/PlexPt/awesome-chatgpt-prompts-zh 这个repo更新还挺勤快的",
          "created_at": "2023-04-04T12:20:58Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "今天我更新了下自带的prompt库",
          "created_at": "2023-04-04T12:43:43Z"
        },
        {
          "author": "HsunGong",
          "body": "BTW，自定义prompt的json文件加进去之后没被gitignore忽略，之后可以把这个也优化一下",
          "created_at": "2023-04-09T12:17:21Z"
        }
      ]
    },
    {
      "issue_number": 563,
      "title": "[远程部署]: ",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n![image](https://user-images.githubusercontent.com/57060436/230588665-dbf88af3-aba5-4fb2-b651-aa35fd3aa9ca.png)\r\n提示：☹️发生了错误：读取超时，无法获取对话。请检查网络连接，或者API-Key是否有效。\r\n但是我的账号和api都是正常使用的因为我在用其他方法也部署了，api可以正常使用，至于网络部分我这个用的是北美的机器部署的docker，于是无法理解为什么出现这个问题。\n\n### 复现操作\n\n成功进入web页面，修改api成功获取使用额度信息，进行正常信息发送显示读取超时\n\n### 错误日志\n\n```shell\n2023-04-07 09:51:38,727 [INFO] [chat_func.py:351] 使用流式传输\r\n2023-04-07 09:51:38,728 [INFO] [chat_func.py:97] 实时回答模式\r\n2023-04-07 09:51:38,734 [INFO] [chat_func.py:120] 输入token计数: 159\r\n2023-04-07 09:51:48,797 [INFO] [chat_func.py:387] 传输完毕。当前token计数为[159]\r\n2023-04-07 09:51:48,798 [INFO] [chat_func.py:389] 回答为：\r\n2023-04-07 09:54:54,330 [INFO] [utils.py:371] API密钥更改为了sk-n*******************************************9BC\r\n2023-04-07 09:54:55,664 [INFO] [utils.py:371] API密钥更改为了sk-n**********************\r\n2023-04-07 09:54:55,708 [ERROR] [openai_func.py:47] 获取API使用情况失败:API request failed with status code 401: {\r\n  \"error\": {\r\n    \"message\": \"Incorrect API key provided: sk-n*******************************************9BC. You can find your API key at https://platform.openai.com/account/api-keys.\",\r\n    \"type\": \"invalid_request_error\",\r\n    \"param\": null,\r\n    \"code\": \"invalid_api_key\"\r\n  }\r\n}\r\n2023-04-07 09:54:58,047 [INFO] [utils.py:371] API密钥更改为了sk-A*******************************************Tk47\r\n2023-04-07 09:55:11,970 [INFO] [chat_func.py:275] 输入为：你好\r\n2023-04-07 09:55:11,981 [INFO] [chat_func.py:351] 使用流式传输\r\n2023-04-07 09:55:11,982 [INFO] [chat_func.py:97] 实时回答模式\r\n2023-04-07 09:55:11,983 [INFO] [chat_func.py:120] 输入token计数: 21\r\n2023-04-07 09:55:22,041 [INFO] [chat_func.py:387] 传输完毕。当前token计数为[21]\r\n2023-04-07 09:55:22,042 [INFO] [chat_func.py:389] 回答为：\n```\n\n\n### 运行环境\n\n- OS:NAME=\"Ubuntu\" VERSION=\"20.04.3 LTS (Focal Fossa)\"\r\n- Python version: Python 3.8.10\r\nDocker Engine - Community Version:           20.10.8\r\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Xxxiaodu",
      "author_type": "User",
      "created_at": "2023-04-07T10:04:42Z",
      "updated_at": "2023-04-08T16:04:35Z",
      "closed_at": "2023-04-08T16:04:35Z",
      "labels": [
        "question",
        "server deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/563/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/563",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/563",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:29.271863",
      "comments": [
        {
          "author": "chenchengzi",
          "body": "今天应该openAI服务器有问题，响应较慢，建议调整最大超时时间，多等一会就有回应了",
          "created_at": "2023-04-07T10:21:43Z"
        },
        {
          "author": "Keldos-Li",
          "body": "参考：\r\n- #559 \r\n- #565 \r\n\r\n----\r\n\r\nupdate：现在main分支已将超时时间增大为60秒，更新即可。",
          "created_at": "2023-04-07T11:22:00Z"
        }
      ]
    },
    {
      "issue_number": 573,
      "title": "[Bug]: ",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n报错如下\n\n### 复现操作\n\n对话内容：你是谁？我们刚才聊了什么？\n\n### 错误日志\n\n```shell\n2023-04-08 20:28:08,740 [INFO] [chat_func.py:275] 输入为：你是谁？我们刚才聊了什么？\r\n2023-04-08 20:28:08,740 [INFO] [chat_func.py:371] 不使用流式传输\r\n2023-04-08 20:28:08,740 [INFO] [chat_func.py:203] 一次性回答模式\r\nTraceback (most recent call last):\r\n  File \"/root/miniconda3/envs/chuanhu/lib/python3.9/site-packages/gradio/routes.py\", line 393, in run_predict\r\n    output = await app.get_blocks().process_api(\r\n  File \"/root/miniconda3/envs/chuanhu/lib/python3.9/site-packages/gradio/blocks.py\", line 1108, in process_api\r\n    result = await self.call_function(\r\n  File \"/root/miniconda3/envs/chuanhu/lib/python3.9/site-packages/gradio/blocks.py\", line 929, in call_function\r\n    prediction = await anyio.to_thread.run_sync(\r\n  File \"/root/miniconda3/envs/chuanhu/lib/python3.9/site-packages/anyio/to_thread.py\", line 31, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n  File \"/root/miniconda3/envs/chuanhu/lib/python3.9/site-packages/anyio/_backends/_asyncio.py\", line 937, in run_sync_in_worker_thread\r\n    return await future\r\n  File \"/root/miniconda3/envs/chuanhu/lib/python3.9/site-packages/anyio/_backends/_asyncio.py\", line 867, in run\r\n    result = context.run(func, *args)\r\n  File \"/root/miniconda3/envs/chuanhu/lib/python3.9/site-packages/gradio/utils.py\", line 490, in async_iteration\r\n    return next(iterator)\r\n  File \"/root/chatgpt/ChuanhuChatGPT/modules/chat_func.py\", line 484, in reduce_token_size\r\n    for chatbot, history, status_text, previous_token_count in iter:\r\n  File \"/root/chatgpt/ChuanhuChatGPT/modules/chat_func.py\", line 372, in predict\r\n    chatbot, history, status_text, all_token_counts = predict_all(\r\n  File \"/root/chatgpt/ChuanhuChatGPT/modules/chat_func.py\", line 247, in predict_all\r\n    status_text = construct_token_message(total_token_count)\r\n  File \"/root/chatgpt/ChuanhuChatGPT/modules/utils.py\", line 158, in construct_token_message\r\n    for i in range(len(tokens)):\r\nTypeError: object of type 'int' has no len()\n```\n\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "HsunGong",
      "author_type": "User",
      "created_at": "2023-04-08T12:30:24Z",
      "updated_at": "2023-04-08T16:04:00Z",
      "closed_at": "2023-04-08T16:02:40Z",
      "labels": [
        "bug",
        "duplicate"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/573/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/573",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/573",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:29.437371",
      "comments": [
        {
          "author": "weixhishu",
          "body": "#569",
          "created_at": "2023-04-08T12:59:12Z"
        },
        {
          "author": "Keldos-Li",
          "body": "Fixed via #574.",
          "created_at": "2023-04-08T16:02:40Z"
        }
      ]
    },
    {
      "issue_number": 569,
      "title": "[Bug]: TypeError: object of type 'int' has no len()",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n in construct_token_message\r\n    for i in range(len(tokens)):\r\n                   ^^^^^^^^^^^\r\nTypeError: object of type 'int' has no len()\r\n\n\n### 复现操作\n\n1. Install everything following instructions \r\n2. Error occurs when switching to deactivate real-time stream or press 'Summarize chat' \r\n\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: MacOS\r\n- Browser: Chrome\r\n- Gradio version: 3.24.1\r\n- Python version: 3.11\r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\nI  have fixed the issue and would like to pull the request if you are allowed. ",
      "state": "closed",
      "author": "chinwh2019",
      "author_type": "User",
      "created_at": "2023-04-08T03:12:10Z",
      "updated_at": "2023-04-08T16:03:17Z",
      "closed_at": "2023-04-08T16:03:17Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/569/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/569",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/569",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:29.717579",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "Yes, this is a known bug, but it seems that none of us planned to solve it before... I'm glad to hear that you have fixed it, and you are welcome to submit pull request.\r\n\r\n是的，这是一个已知问题，然而似乎之前我们没一个人打算解决它（可能大家都在忙）……很高兴听说你已经修复了它，我们欢迎您提交Pull Request.",
          "created_at": "2023-04-08T04:20:11Z"
        },
        {
          "author": "chenoh",
          "body": "这是来自QQ邮箱的假期自动回复邮件。\r\n \r\n您好，我最近正在休假中，无法亲自回复您的邮件。我将在假期结束后，尽快给您回复。",
          "created_at": "2023-04-08T04:20:31Z"
        },
        {
          "author": "chinwh2019",
          "body": "You guys have done a fantastic job! It's my pleasure to submit my pull request. Please let me know your rules for the pull request. I am ready for that.  ",
          "created_at": "2023-04-08T04:38:46Z"
        },
        {
          "author": "Keldos-Li",
          "body": "I have written a pull request template, and you will see our comment and suggestions when you open a new pull request.\r\n\r\nHere's our [contributing guide](https://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/贡献指南). I wrote it in Chinese, but hopefully you can read it.\r\n\r\nAnd... In fact, you can just su",
          "created_at": "2023-04-08T04:50:05Z"
        },
        {
          "author": "weixhishu",
          "body": "This is the vacation auto reply email from QQmail.\r\nHello, I am currently on vacation and cannot personally reply to your email. I will reply to you as soon as possible after the holiday ends.",
          "created_at": "2023-04-08T06:10:34Z"
        }
      ]
    },
    {
      "issue_number": 448,
      "title": "[功能请求]: 能否在启动py中添加配置项中指定深色/浅色模式",
      "body": "### 相关问题\n\n我在多个手机浏览器上访问测试，发现手机使用的深色模式，网页也自动变更为黑暗模式，但是很多字体颜色没有变更或配置错误，有些只有按钮颜色，没有文本，以及有些文本在黑色背景下看不见等，是否能指定使用浅色/深色的UI页面。\n\n### 可能的解决办法\n\n增加页面指定深色/浅色模式配置项\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "fm9333",
      "author_type": "User",
      "created_at": "2023-03-29T08:15:03Z",
      "updated_at": "2023-04-08T13:29:43Z",
      "closed_at": "2023-04-08T11:52:51Z",
      "labels": [
        "feature request",
        "question",
        "🖥️ UI&UX"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/448/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "Keldos-Li"
      ],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/448",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/448",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:29.937529",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "早前一版曾经存在问题，但很快修复了。请下载最新版。\n\n我们目前写的应该没有问题，如果还有问题，提供一下你是在哪里测试的？服务器部署或者本地部署在手机上用ip打开吗？还是huggingface？\n\n另外浏览器有打开暗色模式插件吗？有没有可能是冲突了？",
          "created_at": "2023-03-30T02:03:05Z"
        },
        {
          "author": "lijiachang",
          "body": "建议在页面中可选强制深色模式，白天用深色模式也很常见",
          "created_at": "2023-04-01T03:45:42Z"
        },
        {
          "author": "Keldos-Li",
          "body": "又重新研究了一下，gradio框架的深色模式实现方法和我们自己定义的类的深色模式实现方法有点点不一样……然后现在又是按系统亮暗色的……\r\n\r\n好吧，或许能做，但比较麻烦（不是很想加这个功能\r\n\r\n（或许可以试着白天切系统的亮暗色😢",
          "created_at": "2023-04-07T09:24:52Z"
        },
        {
          "author": "Keldos-Li",
          "body": "我知道怎么搞了。但别急。这个需求往后靠靠……",
          "created_at": "2023-04-08T02:21:03Z"
        },
        {
          "author": "Keldos-Li",
          "body": "现在高级设置中增加了亮暗色切换按钮。希望大家喜欢💕",
          "created_at": "2023-04-08T13:29:43Z"
        }
      ]
    },
    {
      "issue_number": 171,
      "title": "[Docker] 更新新版本后，再次出现something went wrong",
      "body": "### 错误描述\r\n之前的docker版本，安装后，除了不能反代（127.0.0.1直连不会设置，设置了也没用），用服务器的ip+端口访问是正常的。\r\n![image](https://user-images.githubusercontent.com/46274596/225518517-0821c732-32eb-43e5-8da8-a35c7b321f7c.png)\r\n\r\n\r\n### 复现操作\r\n删除docker和镜像，重新拉取和安装后，出现something went wrong，无法使用。\r\n\r\n如上图，加入直连，还是怎么弄，都是不能解决。更换vps，不同的系统，不同的ip，故障依旧。\r\n\r\n昨天用了一天的老版本，很好用，生产力工具。\r\n\r\n### 错误截图\r\n![image](https://user-images.githubusercontent.com/46274596/225518177-c8c1a484-c3f9-48c7-afe6-b95e088124be.png)\r\n\r\n### 终端（控制台）中的错误报告\r\n\r\n```console\r\n(请使用错误报告替换本行)\r\n```\r\n\r\n### 运行环境\r\n> **请填写以下列表：**\r\n\r\n- OS: [e.g. Linux Ubuntu]\r\n- Docker version:\r\n- Gradio version:\r\n- Python (或Python3) version:\r\n\r\n### 其他\r\n> 补充说明\r\n",
      "state": "closed",
      "author": "dadaoerv",
      "author_type": "User",
      "created_at": "2023-03-16T05:00:09Z",
      "updated_at": "2023-04-08T12:33:55Z",
      "closed_at": "2023-03-16T05:46:56Z",
      "labels": [
        "question",
        "docker deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/171/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/171",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/171",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:30.122766",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "我有时候也会碰到这种情况，刷新几下网页就好了……服务端看不到任何访问记录，我也不知道为啥🤧",
          "created_at": "2023-03-16T05:20:58Z"
        },
        {
          "author": "dadaoerv",
          "body": "刷新了我数次，并且我回退了所有docker的版本，安装了我原来能用的老版本（之前会删掉所有文件和镜像），安装了我原来能用的23.3.10版本，居然也是something went wrong，这在我更新前是彻底能用的啊、、、、、清空浏览器数据也不行。\r\n\r\n完全懵逼\r\n",
          "created_at": "2023-03-16T05:32:29Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "太怪了，这应该是Gradio的问题。我找到了几个相关的讨论：\r\nhttps://github.com/gradio-app/gradio/issues/2700\r\nhttps://discuss.huggingface.co/t/error-connection-errored-out-during-processing/23439/2\r\ngradio说这个问题已经在3.11版本中修复了。你可以看看你的gradio版本：\r\n```\r\npip list | grep gradio\r\n```\r\n然后试着升级一下它：\r\n```\r\npip install gradio --upgrade\r\npip i",
          "created_at": "2023-03-16T05:42:13Z"
        },
        {
          "author": "dadaoerv",
          "body": "已经解决，很简单，关闭用户名密码即可。\r\nby the way\r\n\r\ndocker run -d --name chatgpt \\\r\n\t-e my_api_key=\"sk-xxxxxxxxxxxxxxxxxxxxxxxxx\" \\\r\n\t--restart always \\\r\n\t-v ~/chatGPThistory:/app/history \\\r\n\t-p 7860:7860 \\\r\n\ttuchuanhuhuhu/chuanhuchatgpt:latest",
          "created_at": "2023-03-16T05:45:03Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "也还是很奇怪。我自己部署到服务器的时候设置了账号密码，并没有碰到什么问题。anyway，感觉不是我能解决的，这应该由`gradio`来解决。",
          "created_at": "2023-03-16T05:46:52Z"
        }
      ]
    },
    {
      "issue_number": 278,
      "title": "You exceeded your current quota, please check your plan and billing details",
      "body": "感谢提交 issue! 请尽可能完整填写以下信息，帮助我们更好地定位问题~ \r\n如果你不知道怎么填写，请先点击编辑框上方的“Preview”在预览中查看我们的说明，然后点击“Write”在空白行处填写信息~\r\n\r\n### 错误描述\r\n> 请简明描述该错误。\r\nJSON解析错误。请重置对话。收到的内容: \"error\": { \"message\": \"You exceeded your current quota, please check your plan and billing details.\", \"type\": \"insufficient_quota\", \"param\": null, \"code\": null }}\r\n\r\n\r\n\r\n### 复现操作\r\n> 你之前干了什么，然后出现了错误呢？例如：\r\n> 1. 正常完成本地部署\r\n> 2. 在对话框中要求 ChatGPT “以LaTeX格式输出三角函数”\r\n> 3. ChatGPT 输出部分内容后程序被自动终止\r\n\r\n### 错误截图\r\n> 如果可以，请提供错误的截图，如本地部署的网页截图与终端错误报告的截图。\r\n![image](https://user-images.githubusercontent.com/37701943/226792955-2ae0a87e-bd52-4177-9a2f-e0661a2ab651.png)\r\n### 终端（控制台）中的错误报告\r\n> 如果可以，请复制终端中的主要错误报告。\r\n\r\n```console\r\n(请使用错误报告替换本行)\r\n```\r\n\r\n### 运行环境\r\n> **请填写以下列表：**\r\n\r\n - OS: [e.g. Windows11 22H2]\r\n - Browser: [e.g. Chrome, safari]\r\n - Gradio version:\r\n - Python (或Python3) version:\r\n\r\n### 其他\r\n> 补充说明\r\n",
      "state": "closed",
      "author": "xuedue",
      "author_type": "User",
      "created_at": "2023-03-22T03:15:41Z",
      "updated_at": "2023-04-07T09:29:22Z",
      "closed_at": "2023-03-22T07:04:04Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/278/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/278",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/278",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:30.373723",
      "comments": [
        {
          "author": "MZhao-ouo",
          "body": "你是不是把配额用完了",
          "created_at": "2023-03-22T03:26:11Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "你的配额用完了。",
          "created_at": "2023-03-22T07:04:04Z"
        },
        {
          "author": "little-rookie-at-UJS",
          "body": "但是我没有用过啊\r\n\r\n",
          "created_at": "2023-04-07T09:25:42Z"
        },
        {
          "author": "Keldos-Li",
          "body": "> 但是我没有用过啊\r\n\r\n你可能把OpenAI提供的配额用完了（**或到期了**）。你可以在 https://platform.openai.com/account/usage 中查看您的用量和余额。\r\n\r\nhttps://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/常见问题#you-exceeded-your-current-quota-please-check-your-plan-and-billing-details",
          "created_at": "2023-04-07T09:29:21Z"
        }
      ]
    },
    {
      "issue_number": 552,
      "title": "[功能请求]: 夜间模式切换为白天模式后，字体无法看清",
      "body": "### 相关问题\n\n<img width=\"1274\" alt=\"Snipaste_2023-04-06_11-43-18\" src=\"https://user-images.githubusercontent.com/28041718/230266982-a5b11be6-ff3d-4f65-a37c-cca0e642dcf9.png\">\r\n\r\n到了夜晚浏览器会切换到夜间模式，到了第二天自动切换为白天模式后，字体无法看清\n\n### 可能的解决办法\n\n建议增加主题选项，手动调节\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "lijiachang",
      "author_type": "User",
      "created_at": "2023-04-06T03:45:55Z",
      "updated_at": "2023-04-07T09:16:08Z",
      "closed_at": "2023-04-07T09:16:08Z",
      "labels": [
        "feature request",
        "🖥️ UI&UX"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/552/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "Keldos-Li"
      ],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/552",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/552",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:30.670983",
      "comments": [
        {
          "author": "lijiachang",
          "body": "当然，刷新页面可以恢复。那聊天记录也就没了",
          "created_at": "2023-04-06T03:47:08Z"
        },
        {
          "author": "Keldos-Li",
          "body": "gradio有一个用于亮暗色显示的预设dark类，但切换机制我有点看不懂……我看看我能不能自己写js一个覆盖一下。",
          "created_at": "2023-04-07T02:54:09Z"
        }
      ]
    },
    {
      "issue_number": 554,
      "title": "[功能请求]: 添加终止按钮",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\n在使用过程中有时回答内容不符合自己的预期，这时希望能有一个终止按钮能终止当前回答，这样是否有节省tokens的功能？\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "a327958099",
      "author_type": "User",
      "created_at": "2023-04-06T09:20:10Z",
      "updated_at": "2023-04-06T12:54:54Z",
      "closed_at": "2023-04-06T12:54:54Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/554/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/554",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/554",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:30.917581",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "有的，早的版本写的“取消”，昨天改成了图标，可能太不清楚了，我现在改成了红色的图标（但按钮是灰色的）",
          "created_at": "2023-04-06T12:25:54Z"
        },
        {
          "author": "Keldos-Li",
          "body": "发送前：\r\n<img width=\"452\" alt=\"image\" src=\"https://user-images.githubusercontent.com/23137268/230384523-df944055-9035-41e8-830b-01d657738eb5.png\">\r\n\r\nGPT回答时：\r\n<img width=\"460\" alt=\"image\" src=\"https://user-images.githubusercontent.com/23137268/230384397-a36f8dbb-c3df-4975-8da7-853f2ae65032.png\">\r\n",
          "created_at": "2023-04-06T12:54:54Z"
        }
      ]
    },
    {
      "issue_number": 555,
      "title": "[Bug]: 请求过于频繁，请5s后再试。",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n在使用NSFW版本中，输入任意文字均会返回：请求过于频繁，请5s后再试。\n\n### 复现操作\n\n某一天突然复现，已经尝试了新生成的API依旧没有解决\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "wenzhenze",
      "author_type": "User",
      "created_at": "2023-04-06T09:29:07Z",
      "updated_at": "2023-04-06T09:52:03Z",
      "closed_at": "2023-04-06T09:52:03Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/555/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/555",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/555",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:31.128027",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "那个版本不是我们维护的。",
          "created_at": "2023-04-06T09:52:03Z"
        }
      ]
    },
    {
      "issue_number": 516,
      "title": "[功能请求]: 当屏幕小的时候（例如手机），输入框和发送按钮不在同一行，使得输入法打完字后，输入框会到最下面，需要下滑找到发送按钮，再发送，希望使发送按钮在最下面",
      "body": "### 相关问题\n\n[功能请求]: 当屏幕小的时候（例如手机），输入框和发送按钮不在同一行，使得输入法打完字后，输入框会到最下面，需要下滑找到发送按钮，再发送，希望使发送按钮在最下面\n\n### 可能的解决办法\n\n使用组件提供的api或修改底层代码，或者减少发送按钮的宽度限制\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "weixhishu",
      "author_type": "User",
      "created_at": "2023-04-02T18:20:12Z",
      "updated_at": "2023-04-05T11:32:00Z",
      "closed_at": "2023-04-05T11:32:00Z",
      "labels": [
        "feature request",
        "🖥️ UI&UX"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/516/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/516",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/516",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:31.287205",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "我明白了。我加了user显示之后没注意这个被挤下去了。我看看怎么修……\r\n\r\n好烦。gradio布局过于自动了。",
          "created_at": "2023-04-03T09:51:08Z"
        }
      ]
    },
    {
      "issue_number": 515,
      "title": "[功能请求]: gradio的chatbot组件，chatgpt那一方的信息体宽度太小了，尤其显示代码时，在手机上看到的代码宽度特别窄，希望chatgpt那一方的显示信息的主体的宽度和手机宽度差不多大，就像官方显示信息一样",
      "body": "### 相关问题\n\n[功能请求]: gradio的chatbot组件，chatgpt那一方的信息体宽度太小了，尤其显示代码时，在手机上看到的代码宽度特别窄，希望chatgpt那一方的显示信息的主体的宽度和手机宽度差不多大，就像官方显示信息一样\n\n### 可能的解决办法\n\n修改官方gradio的chatbot组件，或有隐藏api可用\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "weixhishu",
      "author_type": "User",
      "created_at": "2023-04-02T18:08:45Z",
      "updated_at": "2023-04-05T11:31:59Z",
      "closed_at": "2023-04-05T11:31:59Z",
      "labels": [
        "feature request",
        "🖥️ UI&UX"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/515/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "Keldos-Li"
      ],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/515",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/515",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:31.461272",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "这个好说。我回头改改。\r\n\r\n其实是，本来gradio的显示就是宽度撑满的，我给改小了。",
          "created_at": "2023-04-02T18:13:29Z"
        },
        {
          "author": "weixhishu",
          "body": "> 这个好说。我回头改改。\r\n> \r\n> 其实是，本来gradio的显示就是宽度撑满的，我给改小了。\r\n\r\n看到了，就在自定义css文件[data-testid = \"bot\"]这里",
          "created_at": "2023-04-02T18:52:15Z"
        },
        {
          "author": "weixhishu",
          "body": "还有个问题，也不算bug，我服务器使用的代理用的是rule模式，检测ip属地的时候检测的是本地地址，不是调用api的地址。\r\n还有个ui问题，设置界面使得手机使用的时候不太方便，希望使用隐藏式侧栏的方式显示设置，就像chatgpt官方一样",
          "created_at": "2023-04-02T19:02:22Z"
        }
      ]
    },
    {
      "issue_number": 526,
      "title": "[功能请求]: 放开 api key 长度要求限制",
      "body": "### 相关问题\n\n ☹发生了错误：API key长度不是51位，请检查是否输入正确。\n\n### 可能的解决办法\n\n去掉 API key 长度判断\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n我使用的是其他人做的 API proxy，使用了自己的 api key 认证，长度和官方的不一样",
      "state": "closed",
      "author": "zengbo",
      "author_type": "User",
      "created_at": "2023-04-03T09:09:39Z",
      "updated_at": "2023-04-05T11:29:24Z",
      "closed_at": "2023-04-05T11:29:24Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/526/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/526",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/526",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:31.660814",
      "comments": [
        {
          "author": "chawxj",
          "body": "同样请求增加这个功能，建议不变更现有逻辑，额外增加一个参数，用来定义第三方的api key",
          "created_at": "2023-04-03T16:49:23Z"
        },
        {
          "author": "Keldos-Li",
          "body": "Feature added within 18f19f4a4534ec52fe2dd034c976878aef9f6896 ([Chuan Hu](https://github.com/GaiZhenbiao)).",
          "created_at": "2023-04-04T15:05:21Z"
        }
      ]
    },
    {
      "issue_number": 436,
      "title": "[功能请求]: Hugging Face中适配黑夜模式",
      "body": "### 相关问题\n\n> 个人喜欢把浏览器调成暗色系 不过这导致我看不清 ChatGPT 说话的内容了\r\nChatGPT 回复的字颜色较浅 看着不明显 在哪部署都有不明显的情况\n\n### 可能的解决办法\n\n提供上传背景图片或者自己调色的功能 这是我的提议\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n![Yeah](https://user-images.githubusercontent.com/79508698/228245985-2af1c79a-e4b3-42db-aae6-863486e8e3ee.png)\r\n",
      "state": "closed",
      "author": "Yang-Kyle",
      "author_type": "User",
      "created_at": "2023-03-28T13:08:05Z",
      "updated_at": "2023-04-05T10:18:26Z",
      "closed_at": "2023-03-28T13:40:42Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 9,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/436/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/436",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/436",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:31.834826",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "emm……也许我不应该删除HG版的暗色模式样式……我改改",
          "created_at": "2023-03-28T13:19:28Z"
        },
        {
          "author": "Keldos-Li",
          "body": "? 我看抱抱脸自己也妹更新啊（……这是用插件手动给网页加了暗色模式吗QAQ",
          "created_at": "2023-03-28T13:29:40Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "我发现抱抱脸可以在设置中开启亮暗色模式跟随系统……",
          "created_at": "2023-03-28T13:31:53Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "现在去看看HG，应该没问题了\r\n<img width=\"959\" alt=\"image\" src=\"https://user-images.githubusercontent.com/51039745/228256703-efc51daa-e19e-461b-9a44-d6683ab75329.png\">\r\n",
          "created_at": "2023-03-28T13:40:42Z"
        },
        {
          "author": "Yang-Kyle",
          "body": "谢谢啦 这可太舒服了 (๑•̀ㅂ•́)و✧",
          "created_at": "2023-03-30T06:21:54Z"
        }
      ]
    },
    {
      "issue_number": 547,
      "title": "[其他]: Hugging Face Space Duplication Error",
      "body": "### 是否已存在现有反馈与解答？\r\n\r\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\r\n\r\n### 错误描述\r\n\r\nDuplicating into my own space but the process is stuck at `Building`. \r\n\r\n### 复现操作\r\n\r\nDuplicating space from https://huggingface.co/spaces/JohnSmith9982/ChuanhuChatGPT\r\n\r\n### 错误日志\r\n\r\nFollowing log is observed: \r\n\r\n![image](https://user-images.githubusercontent.com/39619599/230027283-c649bdfa-876d-43ab-a06c-bf4dff46179f.png)\r\n\r\n```\r\nv859n 2023-04-05T08:24:50.795Z Error while sending telemetry: HTTPSConnectionPool(host='api.gradio.app', port=443): Max retries exceeded with url: /gradio-launched-telemetry/ (Caused by NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x7f0b0a48e580>: Failed to establish a new connection: [Errno -3] Temporary failure in name resolution'))\r\n```\r\n\r\nFeels like this might be an error on HF side but I'm not very familiar with the platform - wondering if anyboddy can point me towards the right direction? Thanks! \r\n",
      "state": "closed",
      "author": "kayx23",
      "author_type": "User",
      "created_at": "2023-04-05T08:38:45Z",
      "updated_at": "2023-04-05T08:40:45Z",
      "closed_at": "2023-04-05T08:40:45Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/547/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/547",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/547",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:32.043433",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "多重启几次Space试试？尤其试试factory reboot",
          "created_at": "2023-04-05T08:40:30Z"
        }
      ]
    },
    {
      "issue_number": 546,
      "title": "[Bug]: huggingface的样式太费眼了",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n![image](https://user-images.githubusercontent.com/4970238/229997485-86ee26fd-2697-4eb5-b115-eaf34d15b560.png)\r\n直接打开就能看到\n\n### 复现操作\n\n打开 https://huggingface.co/spaces/JohnSmith9982/ChuanhuChatGPT\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [ ] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "w0330t",
      "author_type": "User",
      "created_at": "2023-04-05T06:21:54Z",
      "updated_at": "2023-04-05T08:33:47Z",
      "closed_at": "2023-04-05T08:33:47Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/546/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/546",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/546",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:32.247298",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "请在HuggingFace的设置中打开暗色模式跟随系统。\r\n\r\n见：https://huggingface.co/spaces/JohnSmith9982/ChuanhuChatGPT/discussions/40",
          "created_at": "2023-04-05T08:33:47Z"
        }
      ]
    },
    {
      "issue_number": 521,
      "title": "[远程部署]:  No module named 'llama_index.indices.query.vector_store'根据常见问题，所有方法都试过了，还是无法解决。",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n![image](https://user-images.githubusercontent.com/17491381/229395442-5c68944b-1610-485d-8d4c-3fd78d64e2ae.png)\r\n根据常见问题，所有方法都试过了，还是无法解决。请大神求解\n\n### 复现操作\n\n我这边按照部署脚本正常操作。但是一发送问题就报这个错误\n\n### 错误日志\n\n```shell\nTo create a public link, set `share=True` in `launch()`.\r\n2023-04-03 10:03:10,827 [INFO] [utils.py:367] API密钥更改为了sk-l*******************************************51vw\r\n2023-04-03 10:03:11,892 [ERROR] [openai_func.py:82] 获取API使用情况失败:API request failed with status code 403: {\r\n  \"error\": {\r\n    \"message\": \"Your request to GET /dashboard/billing/credit_grants must be made with a session key (that is, it can only be made from the browser). You made it with the following key type: secret.\",\r\n    \"type\": \"server_error\",\r\n    \"param\": null,\r\n    \"code\": null\r\n  }\r\n}\r\n\r\n2023-04-03 10:03:12,044 [ERROR] [openai_func.py:82] 获取API使用情况失败:API request failed with status code 403: {\r\n  \"error\": {\r\n    \"message\": \"Your request to GET /dashboard/billing/credit_grants must be made with a session key (that is, it can only be made from the browser). You made it with the following key type: secret.\",\r\n    \"type\": \"server_error\",\r\n    \"param\": null,\r\n    \"code\": null\r\n  }\r\n}\r\n\r\n2023-04-03 10:03:24,105 [ERROR] [openai_func.py:82] 获取API使用情况失败:API request failed with status code 403: {\r\n  \"error\": {\r\n    \"message\": \"Your request to GET /dashboard/billing/credit_grants must be made with a session key (that is, it can only be made from the browser). You made it with the following key type: secret.\",\r\n    \"type\": \"server_error\",\r\n    \"param\": null,\r\n    \"code\": null\r\n  }\r\n}\r\n\r\nTraceback (most recent call last):\r\n  File \"/www/wwwroot/chat.jxcloud.pro/ChuanhuChatGPT/chatgpt-env/lib/python3.9/site-packages/gradio/routes.py\", line 393, in run_predict\r\n    output = await app.get_blocks().process_api(\r\n  File \"/www/wwwroot/chat.jxcloud.pro/ChuanhuChatGPT/chatgpt-env/lib/python3.9/site-packages/gradio/blocks.py\", line 1108, in process_api\r\n    result = await self.call_function(\r\n  File \"/www/wwwroot/chat.jxcloud.pro/ChuanhuChatGPT/chatgpt-env/lib/python3.9/site-packages/gradio/blocks.py\", line 929, in call_function\r\n    prediction = await anyio.to_thread.run_sync(\r\n  File \"/www/wwwroot/chat.jxcloud.pro/ChuanhuChatGPT/chatgpt-env/lib/python3.9/site-packages/anyio/to_thread.py\", line 31, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n  File \"/www/wwwroot/chat.jxcloud.pro/ChuanhuChatGPT/chatgpt-env/lib/python3.9/site-packages/anyio/_backends/_asyncio.py\", line 937, in run_sync_in_worker_thread\r\n    return await future\r\n  File \"/www/wwwroot/chat.jxcloud.pro/ChuanhuChatGPT/chatgpt-env/lib/python3.9/site-packages/anyio/_backends/_asyncio.py\", line 867, in run\r\n    result = context.run(func, *args)\r\n  File \"/www/wwwroot/chat.jxcloud.pro/ChuanhuChatGPT/chatgpt-env/lib/python3.9/site-packages/gradio/utils.py\", line 490, in async_iteration\r\n    return next(iterator)\r\n  File \"/www/wwwroot/chat.jxcloud.pro/ChuanhuChatGPT/modules/chat_func.py\", line 272, in predict\r\n    from llama_index.indices.query.vector_store import GPTVectorStoreIndexQuery\r\nModuleNotFoundError: No module named 'llama_index.indices.query.vector_store'\n```\n\n\n### 运行环境\n\n- OS: centos\r\n- Server: \r\n- Gradio version: \r\n- Python version: 3.9 \r\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "fcmyoo",
      "author_type": "User",
      "created_at": "2023-04-03T02:09:43Z",
      "updated_at": "2023-04-04T14:57:59Z",
      "closed_at": "2023-04-03T02:45:01Z",
      "labels": [
        "question",
        "server deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/521/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/521",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/521",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:32.391709",
      "comments": [
        {
          "author": "MIKL2077",
          "body": "将llama_index.indices.query.vector_store替换成llama_index.indices.vector_store.base_query即可。\r\n原因：该方法GPTVectorStoreIndexQuery()不在llama_index.indices.query.vector_store之下了。\r\n详见：https://gpt-index.readthedocs.io/en/latest/reference/indices/vector_store_query.html#gpt_index.indices.vector_store.base_query.GP",
          "created_at": "2023-04-03T02:27:12Z"
        },
        {
          "author": "xingfanxia",
          "body": "我已经fix了",
          "created_at": "2023-04-03T02:28:17Z"
        },
        {
          "author": "xingfanxia",
          "body": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/517",
          "created_at": "2023-04-03T02:29:02Z"
        },
        {
          "author": "caoxiaogang96",
          "body": "获取API使用情况失败，这个问题您咋解决的呢\r\n",
          "created_at": "2023-04-03T09:24:41Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "> 获取API使用情况失败，这个问题您咋解决的呢\r\n\r\n因为OpenAI那边，用于获取使用情况的API挂掉了。现已修复。",
          "created_at": "2023-04-04T13:30:29Z"
        }
      ]
    },
    {
      "issue_number": 444,
      "title": "[Bug]: 提示精简token错误",
      "body": "### 这个bug是否已存在现有issue了？\r\n\r\n- [X] 我确认没有已有issue。\r\n\r\n### 错误表现\r\n\r\n聊天不超过20句，屏幕右上角提示 `Error` 错误。`精简token中[257, 216, 425, 1153, 1346, 1269]/3500`。\r\n\r\n### 复现操作\r\n\r\n1. 正常完成本地部署。\r\n2. 3月29日下午更新最新的版本。\r\n3. 用Clash开启代理，并添加规则，开启增强模式。选择美国代理。\r\n4. 正常在GPT询问，不超过20句就会提示这个问题。\r\n\r\n### 错误日志\r\n\r\n```shell\r\n<!-- ALREADY CONVERTED BY PARSER. -->'], ('<p style=\"white-space:pre-wrap;\">power query 中合并两列数据怎么写</p><!-- ALREADY CONVERTED BY PARSER. -->', '<!-- ALREADY CONVERTED BY PARSER. -->')]\r\n2023-03-29 13:12:47,366 [INFO] [chat_func.py:270] 输入为：你是谁？我们刚才聊了什么？\r\n2023-03-29 13:12:47,366 [INFO] [chat_func.py:346] 不使用流式传输\r\n2023-03-29 13:12:47,366 [INFO] [chat_func.py:215] 一次性回答模式\r\nTraceback (most recent call last):\r\n  File \"/Users/mingxin/miniconda3/envs/chuabhuChatGPT/lib/python3.9/site-packages/gradio/routes.py\", line 394, in run_predict\r\n    output = await app.get_blocks().process_api(\r\n  File \"/Users/mingxin/miniconda3/envs/chuabhuChatGPT/lib/python3.9/site-packages/gradio/blocks.py\", line 1075, in process_api\r\n    result = await self.call_function(\r\n  File \"/Users/mingxin/miniconda3/envs/chuabhuChatGPT/lib/python3.9/site-packages/gradio/blocks.py\", line 898, in call_function\r\n    prediction = await anyio.to_thread.run_sync(\r\n  File \"/Users/mingxin/miniconda3/envs/chuabhuChatGPT/lib/python3.9/site-packages/anyio/to_thread.py\", line 31, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n  File \"/Users/mingxin/miniconda3/envs/chuabhuChatGPT/lib/python3.9/site-packages/anyio/_backends/_asyncio.py\", line 937, in run_sync_in_worker_thread\r\n    return await future\r\n  File \"/Users/mingxin/miniconda3/envs/chuabhuChatGPT/lib/python3.9/site-packages/anyio/_backends/_asyncio.py\", line 867, in run\r\n    result = context.run(func, *args)\r\n  File \"/Users/mingxin/miniconda3/envs/chuabhuChatGPT/lib/python3.9/site-packages/gradio/utils.py\", line 549, in async_iteration\r\n    return next(iterator)\r\n  File \"/Users/mingxin/Desktop/ChuanhuChatGPT/modules/chat_func.py\", line 391, in predict\r\n    for chatbot, history, status_text, all_token_counts in iter:\r\n  File \"/Users/mingxin/Desktop/ChuanhuChatGPT/modules/chat_func.py\", line 462, in reduce_token_size\r\n    for chatbot, history, status_text, previous_token_count in iter:\r\n  File \"/Users/mingxin/Desktop/ChuanhuChatGPT/modules/chat_func.py\", line 347, in predict\r\n    chatbot, history, status_text, all_token_counts = predict_all(\r\n  File \"/Users/mingxin/Desktop/ChuanhuChatGPT/modules/chat_func.py\", line 245, in predict_all\r\n    content = response[\"choices\"][0][\"message\"][\"content\"]\r\nKeyError: 'choices'\r\n```\r\n\r\n\r\n### 运行环境\r\n\r\n```markdown\r\n- OS: macOS 13.2.1\r\n- Browser: \r\n- Gradio version: \r\n- Python version: 3.9\r\n```\r\n\r\n\r\n### 补充说明\r\n\r\n一是有这个报错，二是我根本没有输入我是谁这句话，为什么会在日志当中体现呢？",
      "state": "closed",
      "author": "BenjaminGao",
      "author_type": "User",
      "created_at": "2023-03-29T05:44:50Z",
      "updated_at": "2023-04-04T13:15:11Z",
      "closed_at": "2023-04-04T13:14:47Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/444/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/444",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/444",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:32.607468",
      "comments": [
        {
          "author": "BenjaminGao",
          "body": "![dg2wW0](http://cdn.mxmd.xyz/uPic/dg2wW0.png)",
          "created_at": "2023-03-29T05:46:19Z"
        },
        {
          "author": "yuri2078",
          "body": "一样的报错问题，至于这个你是谁应该是token上限了，他自己帮你总结之前的内容。",
          "created_at": "2023-03-29T10:40:40Z"
        },
        {
          "author": "morestart",
          "body": "content = response[\"choices\"][0][\"message\"][\"content\"]\r\nKeyError: 'choices'\r\n一样的error",
          "created_at": "2023-03-31T01:02:01Z"
        },
        {
          "author": "gghyoo",
          "body": "我也会报这个错误，最大的问题是，报错之后，就不回答了。",
          "created_at": "2023-03-31T01:23:28Z"
        },
        {
          "author": "morestart",
          "body": "似乎是由于上面[yuri2078](https://github.com/yuri2078)所说，达到了token的上限",
          "created_at": "2023-03-31T01:24:42Z"
        }
      ]
    },
    {
      "issue_number": 529,
      "title": "[Bug]: 用excel转成txt的文件，用上传索引文件功能，无法完整索引文件内所有内容",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\n\n### 错误表现\n\n比如这个excel文件原有100行记录，在转成txt格式文件后上传索引文件。我问ChatGPT这个文件内有多少条记录，ChatGPT回复只有25条。我让ChatGPT把这些记录以表格形式输出，输出来的内容确实是缺失的。\r\n这是为什么？如何解决这个问题\n\n### 复现操作\n\n1. 正常完成部署\r\n2. 将一个有100行记录的excel文件转成编码格式为utf-8的txt格式文件，上传索引文件\r\n3. 询问该文件有多少条记录，系统回答只有25条。\r\n4. 说明系统无法完整索引所有内容\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n\n\n### 帮助解决\n\n- [X] 我愿意协助解决！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "seasonstar",
      "author_type": "User",
      "created_at": "2023-04-03T12:11:34Z",
      "updated_at": "2023-04-04T12:56:34Z",
      "closed_at": "2023-04-04T12:56:34Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/529/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/529",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/529",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:32.870392",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "<img width=\"759\" alt=\"image\" src=\"https://user-images.githubusercontent.com/51039745/229798597-9be89150-3e40-4733-b530-35200a5e3b78.png\">\r\n\r\n现在支持Excel文件了",
          "created_at": "2023-04-04T12:56:34Z"
        }
      ]
    },
    {
      "issue_number": 528,
      "title": "[本地部署]: 无法正常使用",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n![image](https://user-images.githubusercontent.com/113335896/229502470-428a57ce-fbd0-4e87-8c4f-2c220399f4b8.png)\r\n\n\n### 复现操作\n\n1.正常部署\r\n2.弹出页面出现error\n\n### 错误日志\n\n```shell\nCould not create share link. Please check your internet connection or our status page: https://status.gradio.app\n```\n\n\n### 运行环境\n\n```markdown\n- OS: windows11\r\n- Browser: chrome\r\n- Gradio version:3.22.1 \r\n- Python version: 3.9.16\n```\n\n\n### 补充说明\n\n无",
      "state": "closed",
      "author": "niuniu857",
      "author_type": "User",
      "created_at": "2023-04-03T12:02:54Z",
      "updated_at": "2023-04-04T11:54:55Z",
      "closed_at": "2023-04-04T11:54:55Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/528/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/528",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/528",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:33.072217",
      "comments": [
        {
          "author": "Sk1pper953",
          "body": "我也出现了这样的情况",
          "created_at": "2023-04-03T12:26:43Z"
        },
        {
          "author": "Gary2018X",
          "body": "这个我是localhost没问题 服务器部署有问题",
          "created_at": "2023-04-03T12:41:12Z"
        },
        {
          "author": "onenov",
          "body": "同，服务器部署出现此问题",
          "created_at": "2023-04-03T19:22:07Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "看readme，配置一下Nginx反代",
          "created_at": "2023-04-04T11:54:37Z"
        }
      ]
    },
    {
      "issue_number": 483,
      "title": "[功能请求]: 在已有token计数的功能上，添加累积计费功能。并且可以手动清空",
      "body": "### 相关问题\n\n我和几个朋友一起使用，但是每个人使用强度不同，没法计算分摊费用。\r\n\r\n我希望可以累积token计数，转换为美元或者人民币费用，然后私下结算后，手动点击按钮清空。\n\n### 可能的解决办法\n\n每个用户的浏览器都有 特点，比如 cookie等。\r\n\r\n我希望添加一个按钮，开始计费，然后记住用户 cookie，开始累积token。比如token用了5美元了，私下支付后，手动清空。\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Ln-n",
      "author_type": "User",
      "created_at": "2023-03-31T11:22:42Z",
      "updated_at": "2023-04-04T11:54:46Z",
      "closed_at": "2023-04-04T11:54:46Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/483/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/483",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/483",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:33.248406",
      "comments": []
    },
    {
      "issue_number": 487,
      "title": "[功能请求]: 添加prompt搜索功能",
      "body": "### 相关问题\n\n现在选择prompt的方式是点击下拉框在里面挑选一个，但是下拉框太长以后很难快速选择到想要的prompt。\n\n### 可能的解决办法\n\n能否添加一个前端的功能，将下拉框改为可输入文字的，然后根据输入文字筛选下拉框中的内容？\r\n非常感谢！\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Olimiya",
      "author_type": "User",
      "created_at": "2023-03-31T16:36:16Z",
      "updated_at": "2023-04-04T11:47:57Z",
      "closed_at": "2023-04-04T11:47:57Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/487/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/487",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/487",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:33.248429",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "寄，我再也不说我会写前端了（（（\r\n\r\n虽然这个feature request很有道理，但gradio似乎没原生提供这个功能……（总不可能真让我写JavaScript吧QAQ",
          "created_at": "2023-03-31T16:45:15Z"
        },
        {
          "author": "Olimiya",
          "body": "> 寄，我再也不说我会写前端了（（（\r\n> \r\n> 虽然这个feature request很有道理，但gradio似乎没原生提供这个功能……（总不可能真让我写JavaScript吧QAQ\r\n\r\nhhh，看上去很简单的功能，还以为大佬就是咔咔就能更新的事情嘞，:)\r\n",
          "created_at": "2023-03-31T16:47:24Z"
        },
        {
          "author": "Gary2018X",
          "body": "> 寄，我再也不说我会写前端了（（（\r\n> \r\n> 虽然这个feature request很有道理，但gradio似乎没原生提供这个功能……（总不可能真让我写JavaScript吧QAQ\r\n\r\n可以给gradio提issues\r\n![%)RK8(`~{5PA(@43ARLWE_I](https://user-images.githubusercontent.com/56428019/229278078-22507930-ad0a-440b-93f6-18544d77d014.png)\r\n",
          "created_at": "2023-04-01T09:30:41Z"
        },
        {
          "author": "Gary2018X",
          "body": "发现其实是支持搜索的 把默认选项去掉后就可以输入搜索了",
          "created_at": "2023-04-04T00:34:03Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "加入这个功能啦",
          "created_at": "2023-04-04T11:47:57Z"
        }
      ]
    },
    {
      "issue_number": 532,
      "title": "[本地部署]: ",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n计算机积极拒绝连接和No such file or directory。\n\n### 复现操作\n\n本地部署，第四步之前正常，在启动命令哪里卡住，然后根据这篇文章https://blog.csdn.net/weixin_46900108/article/details/119773973 进行了设置，然后就打不开文件，再然后根据一个issue的回答，改成了实际路径，仍然不能解决\n\n### 错误日志\n\n```shell\nPS C:\\Users\\wuqi0\\Downloads\\ChuanhuChatGPT-main> python C:\\Users\\wuqi0\\Downloads\\ChuanhuChatGPT-main\\ChuanhuChatGPT-main\\\\ChuanhuChatbot.py\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\wuqi0\\Downloads\\ChuanhuChatGPT-main\\ChuanhuChatGPT-main\\\\ChuanhuChatbot.py\", line 12, in <module>\r\n    from modules.overwrites import *\r\n  File \"C:\\Users\\wuqi0\\Downloads\\ChuanhuChatGPT-main\\ChuanhuChatGPT-main\\modules\\overwrites.py\", line 41, in <module>\r\n    with open(\"./assets/custom.js\", \"r\", encoding=\"utf-8\") as f, open(\"./assets/Kelpy-Codos.js\", \"r\", encoding=\"utf-8\") as f2:\r\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nFileNotFoundError: [Errno 2] No such file or directory: './assets/custom.js'\r\nPS C:\\Users\\wuqi0\\Downloads\\ChuanhuChatGPT-main>\n```\n\n\n### 运行环境\n\n```markdown\n- OS: Windows11 Version 1023.322.4012.0\r\n- Browser: chrome\r\n- Gradio version: 3.22.1\r\n- Python version: 3.11.1\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "wuqi030624",
      "author_type": "User",
      "created_at": "2023-04-03T14:50:23Z",
      "updated_at": "2023-04-04T11:32:48Z",
      "closed_at": "2023-04-04T11:32:48Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/532/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/532",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/532",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:33.429481",
      "comments": [
        {
          "author": "Yike-Ye",
          "body": "运行python的时候要到那个文件夹下，因为这里搞了相对路径",
          "created_at": "2023-04-04T03:56:57Z"
        }
      ]
    },
    {
      "issue_number": 537,
      "title": "[功能请求]: 下载生成的索引文件",
      "body": "### 相关问题\n\n上传电子书后，由chatgptapi生成索引文件，这个文件能否下载到本地，而不是huggingfacespace。\n\n### 可能的解决办法\n\n添加下载索引文件的功能\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "open",
      "author": "lobird",
      "author_type": "User",
      "created_at": "2023-04-04T04:45:08Z",
      "updated_at": "2023-04-04T04:45:08Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/537/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/537",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/537",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:33.617785",
      "comments": []
    },
    {
      "issue_number": 129,
      "title": "[本地部署] SSLError",
      "body": "反应时间长，显示错误，无法对话。\r\n![image](https://user-images.githubusercontent.com/127377770/224525095-90778723-86ce-4942-ab78-ddd5e4ed5643.png)\r\n然后是运行的错误显示\r\nchat_counter - 0\r\npayload: {'model': 'gpt-3.5-turbo', 'messages': [{'role': 'system', 'content': 'You are a helpful assistant.'}, {'role': 'user', 'content': '你好'}], 'temperature': 1, 'top_p': 1, 'n': 1, 'stream': True, 'presence_penalty': 0, 'frequency_penalty': 0}\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\Lenovo\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\gradio\\routes.py\", line 384, in run_predict\r\n    output = await app.get_blocks().process_api(\r\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\Lenovo\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\gradio\\blocks.py\", line 1035, in process_api\r\n    data = self.postprocess_data(fn_index, result[\"prediction\"], state)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\Lenovo\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\gradio\\blocks.py\", line 972, in postprocess_data\r\n    prediction_value = block.postprocess(prediction_value)\r\n                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"D:\\特殊\\ChuanhuChatGPT-main\\ChuanhuChatGPT-main\\utils.py\", line 41, in postprocess\r\n    for i, (message, response) in enumerate(y):\r\n           ^^^^^^^^^^^^^^^^^^^\r\nValueError: not enough values to unpack (expected 2, got 0)\r\n图片\r\n![image](https://user-images.githubusercontent.com/127377770/224525184-88aef42d-1bd5-4230-a8df-701fd420c301.png)\r\n",
      "state": "closed",
      "author": "kia-423",
      "author_type": "User",
      "created_at": "2023-03-12T04:57:18Z",
      "updated_at": "2023-04-04T01:39:38Z",
      "closed_at": "2023-03-18T11:52:54Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 19,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/129/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/129",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/129",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:33.617809",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "用最新版脚本试试",
          "created_at": "2023-03-12T04:58:11Z"
        },
        {
          "author": "kia-423",
          "body": "还是错误\r\n![image](https://user-images.githubusercontent.com/127377770/224525888-ebbc7f5c-835b-4180-8019-133f95f02f49.png)\r\n![image](https://user-images.githubusercontent.com/127377770/224525900-7d159f7b-821f-4e50-bb64-dda62cfbf014.png)\r\n",
          "created_at": "2023-03-12T05:19:30Z"
        },
        {
          "author": "kia-423",
          "body": "大佬，我又研究了一下，发现了问题\r\n![image](https://user-images.githubusercontent.com/127377770/224527298-42a74ef6-6b69-4855-9e2f-22e0b888adde.png)\r\n这个要怎么解决\r\n",
          "created_at": "2023-03-12T06:02:23Z"
        },
        {
          "author": "kia-423",
          "body": "大佬，我按照之前老哥的做法试了一下，\r\n![image](https://user-images.githubusercontent.com/127377770/224528741-c9838929-9b28-487a-ba5d-d2bdc7ea1cff.png)\r\n![image](https://user-images.githubusercontent.com/127377770/224528747-97967400-8cf1-478c-b910-b29230bf4a07.png)\r\n![image](https://user-images.githubusercontent.com/1",
          "created_at": "2023-03-12T07:12:05Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "readme里的方法都试过了吗？",
          "created_at": "2023-03-12T08:26:09Z"
        }
      ]
    },
    {
      "issue_number": 527,
      "title": "[功能请求]: ip属地检测只在python程序启动后运行一次，不会随着刷新页面而重新检测，希望随着刷新页面重新检测ip属地",
      "body": "### 相关问题\n\n_No response_\n\n### 可能的解决办法\n\ngradio在程序启动后将检测ip的python函数的返回值传给文本标签，之后一直使用这个值。\r\n将IP检测函数绑定在button上，将button隐藏，并插入js脚本，使得页面加载后触发button事件函数\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "weixhishu",
      "author_type": "User",
      "created_at": "2023-04-03T10:16:40Z",
      "updated_at": "2023-04-03T16:53:44Z",
      "closed_at": "2023-04-03T16:53:44Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/527/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/527",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/527",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:33.862924",
      "comments": []
    },
    {
      "issue_number": 493,
      "title": "在设置IP地址及端口号不用默认的情况和使用用户名及密码后会有连接错误[Bug]: ",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue。\n\n### 错误表现\n\n在设置IP地址及端口号不用默认的情况和使用用户名及密码后会有连接错误\n\n### 复现操作\n\n设置端口号及IP地址 新建了用户及密码后 可以进入界面，与OpenAi进行交互时Connection errored out.错误\n\n### 错误日志\n\n```shell\n终端并未报错\n```\n\n\n### 运行环境\n\n```markdown\n- OS: Win11 22H2\r\n- Browser: Google Chrome\r\n- Gradio version: 3.22.1\r\n- Python version: 3.11.1\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "scordl327",
      "author_type": "User",
      "created_at": "2023-04-01T03:55:57Z",
      "updated_at": "2023-04-03T09:18:16Z",
      "closed_at": "2023-04-03T09:18:16Z",
      "labels": [
        "duplicate"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/493/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/493",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/493",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:33.862947",
      "comments": [
        {
          "author": "williamz",
          "body": "遇到了一样的问题",
          "created_at": "2023-04-01T05:55:47Z"
        },
        {
          "author": "Keldos-Li",
          "body": "- #89",
          "created_at": "2023-04-01T17:26:54Z"
        }
      ]
    },
    {
      "issue_number": 422,
      "title": "[本地部署]: 上传PDF后显示以下报错",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n上传文件后出现error\n\n### 复现操作\n\n上传文件，之后想chatgpt提问\n\n### 错误日志\n\n```shell\nFileNotFoundError: [Errno 2] No such file or directory: 'D:\\\\python\\\\Lib\\\\site-packages\\\\llama_index\\\\readers\\\\llamahub_modules/file/cjk_pdf/base.py'\n```\n\n\n### 运行环境\n\n```markdown\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version:\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "kklionxx",
      "author_type": "User",
      "created_at": "2023-03-27T16:23:40Z",
      "updated_at": "2023-04-03T09:17:41Z",
      "closed_at": "2023-04-03T09:17:41Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/422/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/422",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/422",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:34.021581",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "看上去PDF加载器没加载成功。请检查下网络",
          "created_at": "2023-03-28T12:22:12Z"
        },
        {
          "author": "Keldos-Li",
          "body": "过久未回复……看上去是网络问题，多试试应该就行。先关了。",
          "created_at": "2023-04-03T09:17:41Z"
        }
      ]
    },
    {
      "issue_number": 375,
      "title": "[功能请求] 希望加入保存配置",
      "body": "### 该功能请求是否与某个问题相关？\r\n每次重新启动的时候 不能够加载 API地址 以及 代理地址, 希望可以想保存api key 一样保存配置文件\r\n\r\n### 可能的解决办法\r\n希望可以想保存api key 一样保存配置文件\r\n\r\n",
      "state": "closed",
      "author": "ackness",
      "author_type": "User",
      "created_at": "2023-03-24T16:43:58Z",
      "updated_at": "2023-04-03T09:14:26Z",
      "closed_at": "2023-04-03T09:14:26Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/375/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/375",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/375",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:34.192922",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "api host的似乎还没加到config.json中，但是由于ISSUE基本解决，先关了QAQ\r\n\r\nResolve via #455 and #479",
          "created_at": "2023-04-03T09:14:25Z"
        }
      ]
    },
    {
      "issue_number": 517,
      "title": "[Bug]: llama 0.5.5 breaking change",
      "body": "### 这个bug是否已存在现有issue了？\r\n\r\n- [X] 我确认没有已有issue，且已阅读**常见问题**。\r\n\r\n### 错误表现\r\n\r\nsync了latest main之后 docker部署运行有如下错误 likely a breaking change in `llama-index 0.5.5`\r\n```\r\nTraceback (most recent call last):\r\nFile \"/root/.local/lib/python3.9/site-packages/gradio/routes.py\", line 393, in run_predict\r\noutput = await app.get_blocks().process_api(\r\nFile \"/root/.local/lib/python3.9/site-packages/gradio/blocks.py\", line 1108, in process_api\r\nresult = await self.call_function(\r\nFile \"/root/.local/lib/python3.9/site-packages/gradio/blocks.py\", line 929, in call_function\r\nprediction = await anyio.to_thread.run_sync(\r\nFile \"/root/.local/lib/python3.9/site-packages/anyio/to_thread.py\", line 31, in run_sync\r\nreturn await get_asynclib().run_sync_in_worker_thread(\r\nFile \"/root/.local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py\", line 937, in run_sync_in_worker_thread\r\nreturn await future\r\nFile \"/root/.local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py\", line 867, in run\r\nresult = context.run(func, *args)\r\nFile \"/root/.local/lib/python3.9/site-packages/gradio/utils.py\", line 490, in async_iteration\r\nreturn next(iterator)\r\nFile \"/app/modules/chat_func.py\", line 272, in predict\r\nfrom llama_index.indices.query.vector_store import GPTVectorStoreIndexQuery\r\nModuleNotFoundError: No module named 'llama_index.indices.query.vector_store'\r\n```\r\n\r\n### 复现操作\r\n\r\nDocker 部署 dependency 错误\r\n\r\n### 错误日志\r\n\r\n_No response_\r\n\r\n### 运行环境\r\n\r\n- OS:  docker\r\nPython: 3.9.16  •  Gradio: 3.24.1\r\n\r\n### 帮助解决\r\n\r\n- [X] 我愿意协助解决！\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "closed",
      "author": "xingfanxia",
      "author_type": "User",
      "created_at": "2023-04-03T00:43:09Z",
      "updated_at": "2023-04-03T02:28:42Z",
      "closed_at": "2023-04-03T02:28:41Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/517/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 1
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/517",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/517",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:34.361638",
      "comments": [
        {
          "author": "xingfanxia",
          "body": "Verified it's a breaking change in local env",
          "created_at": "2023-04-03T00:47:29Z"
        }
      ]
    },
    {
      "issue_number": 421,
      "title": "[功能请求]: 将log保存到文件，group by day, 且文件名为当天日期，代码已由GPT-4 写好",
      "body": "### 相关问题\r\n\r\n如题，可否将log保存到文件，且文件名为当天日期，代码我已让Azure GPT-4 API 写好\r\n\r\n### 可能的解决办法\r\n\r\nsystem: \r\n- Your are a python expert. You always explain step by step.\r\n \r\n\r\nuser: \r\n- I wrote a python project as my linux server. Currently all the logs are printed on terminal. I want to save the logs into log files in a directory named \"logs\". And I want the log files to group by day and the file name is the date.\r\n\r\nassistant: \r\n- To achieve this, you can use the `logging` library in Python. This library is a built-in package, so you don't need to install anything. We will configure the logging package to create log files in the 'logs' directory with the date in the filenames.\r\n\r\nHere's a step-by-step solution:\r\n\r\n1. Import required libraries:\r\n```python\r\nimport os\r\nimport logging\r\nfrom logging.handlers import TimedRotatingFileHandler\r\nfrom datetime import datetime\r\n```\r\n\r\n2. Create a directory named 'logs' if it doesn't exist:\r\n```python\r\nlog_dir = \"logs\"\r\nif not os.path.exists(log_dir):\r\n    os.makedirs(log_dir)\r\n```\r\n\r\n3. Set up a function to configure the logging mechanism:\r\n\r\n```python\r\ndef setup_logging():\r\n    # Create a custom logger\r\n    logger = logging.getLogger(\"my_logger\")\r\n    logger.setLevel(logging.DEBUG)\r\n\r\n    # Create a log file with the current date\r\n    current_date = datetime.now().strftime('%Y-%m-%d')\r\n    log_file = os.path.join(log_dir, f'{current_date}.log')\r\n\r\n    # Create a file handler that rotates the log file daily\r\n    file_handler = TimedRotatingFileHandler(log_file, when = \"midnight\", interval = 1, encoding='utf-8'))\r\n    file_handler.suffix = \"%Y-%m-%d.log\"\r\n    file_handler.setLevel(logging.DEBUG)\r\n\r\n    # Create a console handler\r\n    console_handler = logging.StreamHandler()\r\n    console_handler.setLevel(logging.DEBUG)\r\n\r\n    # Create a formatter\r\n    formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')\r\n    file_handler.setFormatter(formatter)\r\n    console_handler.setFormatter(formatter)\r\n\r\n    # Add the file handler and console handler to the logger\r\n    logger.addHandler(file_handler)\r\n    logger.addHandler(console_handler)\r\n\r\n    return logger\r\n```\r\n\r\n4. Now use the logger to log messages:\r\n\r\n```python\r\nlogger = setup_logging()\r\n\r\nlogger.debug(\"This is a debug message.\")\r\nlogger.info(\"This is an info message.\")\r\nlogger.warning(\"This is a warning message.\")\r\nlogger.error(\"This is an error message.\")\r\nlogger.critical(\"This is a critical message.\")\r\n```\r\n\r\nWhen you run the Python script, it will create log files with the current date as their names in the 'logs' directory. The log files will also display on the console.\r\n\r\nYou can also configure the logging format, level, and rotation settings as needed. \r\n\r\nuser: \r\n- If I have multiple python files in my project and I want the logic to take effect for all the python files, where shall I put the logic into? \r\n\r\nassistant: \r\n- You can create a separate Python file for the logging configuration, and then import and use the logger in each Python file you create, following the DRY (Don't Repeat Yourself) principle.\r\n\r\nFollow these steps:\r\n\r\n1. Create a new Python file called `logger_config.py` in your project's root directory.\r\n\r\n2. In `logger_config.py`, place the code for the logging configuration:\r\n\r\n```python\r\n#logger_config.py\r\n\r\nimport os\r\nimport logging\r\nfrom logging.handlers import TimedRotatingFileHandler\r\nfrom datetime import datetime\r\n\r\nlog_dir = \"logs\"\r\nif not os.path.exists(log_dir):\r\n    os.makedirs(log_dir)\r\n\r\ndef setup_logging():\r\n    logger = logging.getLogger(\"my_logger\")\r\n    logger.setLevel(logging.DEBUG)\r\n\r\n    current_date = datetime.now().strftime('%Y-%m-%d')\r\n    log_file = os.path.join(log_dir, f'{current_date}.log')\r\n\r\n    file_handler = TimedRotatingFileHandler(log_file, when=\"midnight\", interval=1, encoding='utf-8'))\r\n    file_handler.suffix = \"%Y-%m-%d.log\"\r\n    file_handler.setLevel(logging.DEBUG)\r\n\r\n    console_handler = logging.StreamHandler()\r\n    console_handler.setLevel(logging.DEBUG)\r\n\r\n    formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')\r\n    file_handler.setFormatter(formatter)\r\n    console_handler.setFormatter(formatter)\r\n\r\n    logger.addHandler(file_handler)\r\n    logger.addHandler(console_handler)\r\n\r\n    return logger\r\n```\r\n\r\n3. In each Python file where you need to use the logger, import the `setup_logging()` function from `logger_config.py` and create a logger instance:\r\n\r\n```python\r\n# main.py (or any_other_file.py)\r\n\r\nfrom logger_config import setup_logging\r\n\r\nlogger = setup_logging()\r\nlogger.debug(\"This is a debug message from main.py\")\r\n```\r\n\r\nThis way, you can use the same logging configuration across all your Python files by just importing and calling the `setup_logging()` function.\r\n\r\nIf you want to customize the logger name for each file, you can modify the `setup_logging` function to accept a name parameter:\r\n\r\n```python\r\ndef setup_logging(logger_name=\"my_logger\"):\r\n    ...\r\n    logger = logging.getLogger(logger_name)\r\n    ...\r\n```\r\n\r\nAnd then, when calling it in other modules, you can pass a custom name:\r\n\r\n```python\r\nlogger = setup_logging(logger_name=\"main\")\r\n``` \r\n\r\n\r\n### 帮助开发\r\n\r\n- [ ] 我愿意协助开发！\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "open",
      "author": "LanceLiMS",
      "author_type": "User",
      "created_at": "2023-03-27T15:07:05Z",
      "updated_at": "2023-04-03T00:33:36Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/421/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 1
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/421",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/421",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:34.527526",
      "comments": [
        {
          "author": "kbqncf",
          "body": "非常可以，GPT-4。想问下老哥，Azure要使用GPT的service是不是必须得用海外公司主体来申请的",
          "created_at": "2023-03-31T06:48:23Z"
        },
        {
          "author": "LanceLiMS",
          "body": "> 非常可以，GPT-4。想问下老哥，Azure要使用GPT的service是不是必须得用海外公司主体来申请的\r\n\r\n现在的申请流程是：\r\n\r\n1. 用公司邮箱，以公司名义申请azure openai 的access权限，现在是脚本审批，很快就能通过，个人账户都会被拒绝\r\nhttps://aka.ms/oai/1p/aoaionboarding\r\n2. access通过后只能用到gpt-35-turbo, gpt4要用上一步通过的application id再额外申请加waitlist\r\n[apply by filling out this form](https://aka.ms/oai/g",
          "created_at": "2023-04-03T00:33:36Z"
        }
      ]
    },
    {
      "issue_number": 481,
      "title": "[功能请求]: 能否支持多个api负载均衡",
      "body": "### 相关问题\n\n[功能请求]: 能否支持多个api负载均衡\n\n### 可能的解决办法\n\n可以参考https://github.com/lss233/chatgpt-mirai-qq-bot这个机器人项目\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "kkkk24juastin",
      "author_type": "User",
      "created_at": "2023-03-31T08:52:35Z",
      "updated_at": "2023-04-02T16:13:56Z",
      "closed_at": "2023-04-02T16:13:56Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/481/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/481",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/481",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:34.693184",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "Resolved via #513.",
          "created_at": "2023-04-02T16:13:47Z"
        }
      ]
    },
    {
      "issue_number": 437,
      "title": "[本地部署]: Uncaught (in promise) TypeError: z.stylesheets is not iterable",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n开启账号密码验证后，网页console出现这个错误（ Uncaught (in promise) TypeError: z.stylesheets is not iterable），并且登录不了，这是什么原因造成的\r\n![微信截图_20230328220340](https://user-images.githubusercontent.com/30788108/228263982-c63f3f20-2bdf-4414-a53c-b82a8d93c14a.png)\r\n\n\n### 复现操作\n\n1.正常部署，没有改过什么\n\n### 错误日志\n\n```shell\n进入网页\r\nindex.9d6b8df7.js:8 Uncaught (in promise) TypeError: z.stylesheets is not iterable\r\n    at b (index.9d6b8df7.js:8:22067)\r\n    at index.9d6b8df7.js:8:23182\r\n\r\n点击登陆\r\nLogin.svelte:20 Uncaught (in promise) TypeError: Failed to execute 'fetch' on 'Window': Failed to parse URL from http://192.168.1.4:7860undefined/login\r\n    at HTMLButtonElement.u (Login.svelte:20:24)\r\n    at index.9d6b8df7.js:4:1266\r\n    at Array.forEach (<anonymous>)\r\n    at HTMLButtonElement.zr (index.9d6b8df7.js:4:1253)\r\n    at HTMLButtonElement.c (Button.svelte:11:33)\n```\n\n\n### 运行环境\n\n```markdown\n- OS: Windows10\r\n- Browser: Chrome\r\n- Gradio version: Version: 3.22.1\r\n- Python version: 3.11.2\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "leileiandme",
      "author_type": "User",
      "created_at": "2023-03-28T14:10:17Z",
      "updated_at": "2023-04-02T07:49:41Z",
      "closed_at": "2023-03-29T06:27:50Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/437/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/437",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/437",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:34.850018",
      "comments": [
        {
          "author": "Ravanla",
          "body": "我也出现了同样的错误，请问大佬是怎么解决的？",
          "created_at": "2023-04-02T06:19:20Z"
        },
        {
          "author": "AnliComputer",
          "body": "我也遇到了同样问题，请问是怎么解决的？谢谢",
          "created_at": "2023-04-02T07:49:41Z"
        }
      ]
    },
    {
      "issue_number": 501,
      "title": "[本地部署]: ModuleNotFoundError: No module named 'modules.config'; 'modules' is not a package",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n\r\n![image](https://user-images.githubusercontent.com/55825205/229292899-29dc13db-5200-44c2-8b4b-abd9ba8898c6.png)\r\n\n\n### 复现操作\n\n拉取最新代码后，出现问题\n\n### 错误日志\n\n```shell\nTraceback (most recent call last):\r\n  File \"E:\\workspace\\ChuanhuChatGPT\\ChuanhuChatbot.py\", line 8, in <module>\r\n    from modules.config import *\r\nModuleNotFoundError: No module named 'modules.config'; 'modules' is not a package\r\nPS E:\\workspace\\ChuanhuChatGPT> pip install modules\r\nLooking in indexes: https://mirrors.aliyun.com/pypi/simple\r\nRequirement already satisfied: modules in c:\\users\\86158\\appdata\\local\\programs\\python\\python310\\lib\\site-packages (1.0.0)\n```\n\n\n### 运行环境\n\n```markdown\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version:\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Sk1pper953",
      "author_type": "User",
      "created_at": "2023-04-01T13:48:22Z",
      "updated_at": "2023-04-02T02:21:18Z",
      "closed_at": "2023-04-02T02:21:18Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/501/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/501",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/501",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:35.019943",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "看上去好像没获取全部的更新？您是使用git pull更新的吗？或许可以检查下项目文件夹里的modules文件夹里有没有config.py文件(´・ω・`)",
          "created_at": "2023-04-01T14:25:45Z"
        },
        {
          "author": "Keldos-Li",
          "body": "神奇，试着在`modules`文件夹内新建一个名为`__init__.py`的空文件？",
          "created_at": "2023-04-01T16:46:41Z"
        },
        {
          "author": "Sk1pper953",
          "body": "> 神奇，试着在`modules`文件夹内新建一个名为`__init__.py`的空文件？\r\n\r\n谢谢，可以了",
          "created_at": "2023-04-02T01:22:26Z"
        },
        {
          "author": "Keldos-Li",
          "body": "现已在 [常见问题](https://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/常见问题#modulenotfounderror-no-module-named-modulesmodule-name-modules-is-not-a-package) 中更新~",
          "created_at": "2023-04-02T02:21:18Z"
        }
      ]
    },
    {
      "issue_number": 447,
      "title": "[功能请求]: 聊天记录支持按照不同聊天id和不同用户分开",
      "body": "### 相关问题\n\n无\n\n### 可能的解决办法\n\nhistory改为多层嵌套的字典存储\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Gary2018X",
      "author_type": "User",
      "created_at": "2023-03-29T07:20:15Z",
      "updated_at": "2023-04-01T17:29:17Z",
      "closed_at": "2023-04-01T17:29:17Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/447/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/447",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/447",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:35.197895",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "Resolved with b9dc38bd4d6b1f0e3d372d9d3b36c7576ee38287.",
          "created_at": "2023-04-01T17:29:05Z"
        }
      ]
    },
    {
      "issue_number": 488,
      "title": "[Bug]: 从列表中加载对话下拉框首次打开时无法选择",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue。\n\n### 错误表现\n\n首次打开网站时，无法从列表中加载对话，点击下拉框不显示以保存的对话。但是在保存一个新的对话以后，就能正确显示历史保存的记录。\r\n![image](https://user-images.githubusercontent.com/35156329/229179396-03cb1222-e372-4221-9461-95ada89e25f1.png)\r\n![image](https://user-images.githubusercontent.com/35156329/229179716-54ccaa23-2ab3-43fc-90b9-aecc7ce4fc91.png)\r\n\n\n### 复现操作\n\n1.  通过一键部署，部署到huggingface\r\n2.  对话完毕后保存对话，此时一切正常\r\n3.  关闭网站，重新进入，选择从列表中加载对话，这时候看不到前面保存的对话。\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n```markdown\n- OS: Windows11 22H2\r\n- Browser: Edge\r\n- Gradio version: \r\n- Python version:\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Olimiya",
      "author_type": "User",
      "created_at": "2023-03-31T16:41:54Z",
      "updated_at": "2023-04-01T12:47:02Z",
      "closed_at": "2023-04-01T12:47:02Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/488/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/488",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/488",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:35.364480",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "所以提供了一个刷新按钮……",
          "created_at": "2023-04-01T11:46:35Z"
        },
        {
          "author": "Olimiya",
          "body": "Oh, Sorry~ 原来是这样用的，:D",
          "created_at": "2023-04-01T12:47:02Z"
        }
      ]
    },
    {
      "issue_number": 391,
      "title": "[功能请求] 可否实现madawei2699/myGPTReader中的功能",
      "body": "能否实现对于网页/rss内容的阅读和总结",
      "state": "closed",
      "author": "Diaoxiaozhang",
      "author_type": "User",
      "created_at": "2023-03-25T14:02:19Z",
      "updated_at": "2023-04-01T12:15:24Z",
      "closed_at": "2023-04-01T12:15:24Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/391/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/391",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/391",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:35.559983",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "\n可以考虑\n\n> 2023年3月25日 22:02，Diaoxiaozhang ***@***.***> 写道：\n> \n> \n> 能否实现对于网页/rss内容的阅读和总结\n> \n> —\n> Reply to this email directly, view it on GitHub <https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/391>, or unsubscribe <https://github.com/notifications/unsubscribe-auth/AMFM4APACNGGSLNH44BXV63W533HPAN",
          "created_at": "2023-03-25T14:49:23Z"
        }
      ]
    },
    {
      "issue_number": 497,
      "title": "[Bug]: Get Usage Bug when today is first day of the month",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue。\n\n### 错误表现\n\n```\r\n2023-04-01 06:51:59,285 [ERROR] [openai_func.py:58] 获取API使用情况失败:API request failed with status code 400: {\r\n\"error\": {\r\n\"message\": \"end_date must come after start_date\",\r\n\"type\": \"invalid_request_error\",\r\n\"param\": null,\r\n\"code\": null\r\n}\r\n```\n\n### 复现操作\n\n这个情况会在first-day == last_day -> True的时候出现\r\n刚测试出了这个issue\r\n\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n```markdown\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version:\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "xingfanxia",
      "author_type": "User",
      "created_at": "2023-04-01T06:54:38Z",
      "updated_at": "2023-04-01T07:13:18Z",
      "closed_at": "2023-04-01T07:13:18Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/497/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/497",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/497",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:35.718137",
      "comments": []
    },
    {
      "issue_number": 495,
      "title": "[Bug]: API 使用情况 division by zero bug",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue。\n\n### 错误表现\n\n`2023-04-01 06:25:32,516 [ERROR] [openai_func.py:47] API使用情况解析失败:division by zero`\r\n\r\nCaused by this line here\r\n```\r\n            usage_percent = round(total_used / (total_used+balance) * 100, 2)\r\n```\n\n### 复现操作\n\n如果没有free credit会出现这个bug\r\n\r\nrelated to https://github.com/GaiZhenbiao/ChuanhuChatGPT/commit/ec10bf7faa610cac1d8ff35a420426fd9f60d3b6\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n```markdown\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version:\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "xingfanxia",
      "author_type": "User",
      "created_at": "2023-04-01T06:30:02Z",
      "updated_at": "2023-04-01T06:47:08Z",
      "closed_at": "2023-04-01T06:47:08Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/495/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/495",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/495",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:35.718157",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "> <img width=\"495\" alt=\"image\" src=\"https://user-images.githubusercontent.com/23137268/229270252-1fdebf83-345f-47f0-87be-b021ff809cfe.png\">\r\n> \r\n> 我在ui分支刚推了一个改用进度条显示的usage的，有没有空看看你这个显示效果是啥，怕有bug🥺\r\n\r\n_Originally posted by @Keldos-Li in https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/449#issuecom",
          "created_at": "2023-04-01T06:43:46Z"
        }
      ]
    },
    {
      "issue_number": 475,
      "title": "[本地部署]: 部署完成后提示ImportError: cannot import name 'ServiceContext' from 'llama_index'",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n在本地部署完成，在运行的时候，出现以下报错：\r\nTraceback (most recent call last):\r\n  File \"C:\\ChuanhuChatGPT-main\\ChuanhuChatbot.py\", line 10, in <module>\r\n    from modules.overwrites import *\r\n  File \"C:\\ChuanhuChatGPT-main\\modules\\overwrites.py\", line 9, in <module>\r\n    from modules.llama_func import *\r\n  File \"C:\\ChuanhuChatGPT-main\\modules\\llama_func.py\", line 4, in <module>\r\n    from llama_index import GPTSimpleVectorIndex, ServiceContext\r\nImportError: cannot import name 'ServiceContext' from 'llama_index' (C:\\Users\\batman\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\llama_index\\__init__.py)\n\n### 复现操作\n\n无法正常部署，本地部署的最后一步出现错误。\n\n### 错误日志\n\n```shell\nTraceback (most recent call last):\r\n  File \"C:\\ChuanhuChatGPT-main\\ChuanhuChatbot.py\", line 10, in <module>\r\n    from modules.overwrites import *\r\n  File \"C:\\ChuanhuChatGPT-main\\modules\\overwrites.py\", line 9, in <module>\r\n    from modules.llama_func import *\r\n  File \"C:\\ChuanhuChatGPT-main\\modules\\llama_func.py\", line 4, in <module>\r\n    from llama_index import GPTSimpleVectorIndex, ServiceContext\r\nImportError: cannot import name 'ServiceContext' from 'llama_index' (C:\\Users\\batman\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\llama_index\\__init__.py)\n```\n\n\n### 运行环境\n\n```markdown\n- OS: win10\r\n- Browser: chrome\r\n- Gradio version: 3.22.1\r\n- Python version: Python 3.10.8\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "yolend88",
      "author_type": "User",
      "created_at": "2023-03-30T18:45:25Z",
      "updated_at": "2023-03-31T13:42:59Z",
      "closed_at": "2023-03-31T12:53:05Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 13,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/475/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/475",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/475",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:37.848260",
      "comments": [
        {
          "author": "vincentqin-sys",
          "body": "执行： pip install -r requirements.txt --upgrade",
          "created_at": "2023-03-31T01:01:23Z"
        },
        {
          "author": "iHomeSoft",
          "body": "pip install --upgrade llama_index，解决问题",
          "created_at": "2023-03-31T01:27:07Z"
        },
        {
          "author": "lance2016",
          "body": "我也遇到了这个问题，升级包也没用，当前包版本是llama-index  0.4.32",
          "created_at": "2023-03-31T03:47:44Z"
        },
        {
          "author": "HopeZZZ",
          "body": "我也遇到了这个问题，升级python pip 都试过了，无法解决",
          "created_at": "2023-03-31T03:54:36Z"
        },
        {
          "author": "iHomeSoft",
          "body": "Downloading llama_index-0.5.2.tar.gz (161 kB)，升级这个版本，实测解决问题！\r\n![image](https://user-images.githubusercontent.com/13914422/229021499-d4a106c3-8a15-4309-a5f1-01e1158ae171.png)\r\n新版本中定义了ServiceContext！",
          "created_at": "2023-03-31T04:18:28Z"
        }
      ]
    },
    {
      "issue_number": 326,
      "title": "索引文件后报错“API key长度不是51位”",
      "body": "### 复现操作\r\n1. 正常完成本地部署\r\n2. 正常对话没问题\r\n3. 索引文件，问答直接出问题，ERROR。无法使用，然后就开始出现API key错误\r\n### 运行环境\r\n#### openwrt docker\r\n\r\n\r\n### 终端（控制台）中的错误报告\r\n如果可以，请复制终端中的主要错误报告。\r\n\r\n```console\r\nstderr: ERROR:    Exception in ASGI application\r\nstderr: Traceback (most recent call last):\r\nstderr:   File \"/root/.local/lib/python3.9/site-packages/starlette/responses.py\", line 335, in __call__\r\nstderr:     stat_result = await anyio.to_thread.run_sync(os.stat, self.path)\r\nstderr:   File \"/root/.local/lib/python3.9/site-packages/anyio/to_thread.py\", line 31, in run_sync\r\nstderr:     return await get_asynclib().run_sync_in_worker_thread(\r\nstderr:   File \"/root/.local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py\", line 937, in run_sync_in_worker_thread\r\nstderr:     return await future\r\nstderr:   File \"/root/.local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py\", line 867, in run\r\nstderr:     result = context.run(func, *args)\r\nstderr: FileNotFoundError: [Errno 2] No such file or directory: './assets/favicon.png'\r\nstderr: \r\nstderr: During handling of the above exception, another exception occurred:\r\nstderr: \r\nstderr: Traceback (most recent call last):\r\nstderr:   File \"/root/.local/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py\", line 429, in run_asgi\r\nstderr:     result = await app(  # type: ignore[func-returns-value]\r\nstderr:   File \"/root/.local/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py\", line 78, in __call__\r\nstderr:     return await self.app(scope, receive, send)\r\nstderr:   File \"/root/.local/lib/python3.9/site-packages/fastapi/applications.py\", line 276, in __call__\r\nstderr:     await super().__call__(scope, receive, send)\r\nstderr:   File \"/root/.local/lib/python3.9/site-packages/starlette/applications.py\", line 122, in __call__\r\nstderr:     await self.middleware_stack(scope, receive, send)\r\nstderr:   File \"/root/.local/lib/python3.9/site-packages/starlette/middleware/errors.py\", line 184, in __call__\r\nstderr:     raise exc\r\nstderr:   File \"/root/.local/lib/python3.9/site-packages/starlette/middleware/errors.py\", line 162, in __call__\r\nstderr:     await self.app(scope, receive, _send)\r\nstderr:   File \"/root/.local/lib/python3.9/site-packages/starlette/middleware/cors.py\", line 84, in __call__\r\nstderr:     await self.app(scope, receive, send)\r\nstderr:   File \"/root/.local/lib/python3.9/site-packages/starlette/middleware/exceptions.py\", line 79, in __call__\r\nstderr:     raise exc\r\nstderr:   File \"/root/.local/lib/python3.9/site-packages/starlette/middleware/exceptions.py\", line 68, in __call__\r\nstderr:     await self.app(scope, receive, sender)\r\nstderr:   File \"/root/.local/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\", line 21, in __call__\r\nstderr:     raise e\r\nstderr:   File \"/root/.local/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\r\nstderr:     await self.app(scope, receive, send)\r\nstderr:   File \"/root/.local/lib/python3.9/site-packages/starlette/routing.py\", line 718, in __call__\r\nstderr:     await route.handle(scope, receive, send)\r\nstderr:   File \"/root/.local/lib/python3.9/site-packages/starlette/routing.py\", line 276, in handle\r\nstderr:     await self.app(scope, receive, send)\r\nstderr:   File \"/root/.local/lib/python3.9/site-packages/starlette/routing.py\", line 69, in app\r\nstderr:     await response(scope, receive, send)\r\nstderr:   File \"/root/.local/lib/python3.9/site-packages/starlette/responses.py\", line 338, in __call__\r\nstderr:     raise RuntimeError(f\"File at path {self.path} does not exist.\")\r\nstderr: RuntimeError: File at path ./assets/favicon.png does not exist.\r\nstderr: INFO:root:输入为：[34mhi[0m\r\nstderr: INFO:root:☹️发生了错误：API key长度不是51位，请检查是否输入正确。\r\n\r\n```\r\n",
      "state": "closed",
      "author": "hallfay",
      "author_type": "User",
      "created_at": "2023-03-23T06:40:36Z",
      "updated_at": "2023-03-31T13:20:23Z",
      "closed_at": "2023-03-31T13:20:23Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/326/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/326",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/326",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:38.049767",
      "comments": [
        {
          "author": "MZhao-ouo",
          "body": "现在试试还有问题吗",
          "created_at": "2023-03-24T12:57:46Z"
        },
        {
          "author": "KingDariaDu",
          "body": "复制的hugging face上的项目，也是同样的会报错，但是我不知道网页上如何下载log，在页面的右上角同样出现☹️发生了错误：API key长度不是51位，请检查是否输入正确。\r\n\r\n> 现在试试还有问题吗\r\n\r\n",
          "created_at": "2023-03-25T17:58:21Z"
        },
        {
          "author": "Keldos-Li",
          "body": "> 复制的hugging face上的项目，也是同样的会报错，但是我不知道网页上如何下载log，在页面的右上角同样出现☹️发生了错误：API key长度不是51位，请检查是否输入正确。\n\n@KingDariaDu 请在网页中填入自己的api key。",
          "created_at": "2023-03-26T00:54:09Z"
        },
        {
          "author": "Keldos-Li",
          "body": "我猜是当时/favicon.png的问题造成的……现在该没问题了……先关了……请尝试拉取我们脚本的更新。\r\n\r\n如果仍有问题请继续在该ISSUE下回复~",
          "created_at": "2023-03-31T13:20:23Z"
        }
      ]
    },
    {
      "issue_number": 485,
      "title": "[Bug]: Expecting value: line 1 column 1 (char 0)",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue。\n\n### 错误表现\n\nExpecting value: line 1 column 1 (char 0)\n\n### 复现操作\n\n无法输出\n\n### 错误日志\n\n```shell\nExpecting value: line 1 column 1 (char 0)\n```\n\n\n### 运行环境\n\n```markdown\nOS: Windows11 22H2\r\nBrowser: Chrome\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "fuxin123z",
      "author_type": "User",
      "created_at": "2023-03-31T13:00:50Z",
      "updated_at": "2023-03-31T13:06:49Z",
      "closed_at": "2023-03-31T13:05:49Z",
      "labels": [
        "duplicate"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/485/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/485",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/485",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:38.232422",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "<img width=\"1123\" alt=\"image\" src=\"https://user-images.githubusercontent.com/23137268/229127694-6c46df6d-002b-4fe3-899d-abeb04f56065.png\">\r\n\r\n好好看一看啊！https://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/常见问题#something-went-wrong-expecting-value-line-1-column-1-char-0\r\n\r\n而且明明有一堆重复的ISSUE！",
          "created_at": "2023-03-31T13:05:49Z"
        }
      ]
    },
    {
      "issue_number": 262,
      "title": "[本地部署] 上传索引文件报错",
      "body": "### 错误描述\r\n> 本地部署完成后，上传一个pdf文件，在上传索引文件的时候，代码报错，显示返回回来的Response为None. INFO:root:Response: None. \r\n\r\n### 错误截图\r\n> 如果可以，请提供错误的截图，如本地部署的网页截图与终端错误报告的截图。\r\n\r\n### 终端（控制台）中的错误报告\r\n> 如果可以，请复制终端中的主要错误报告。\r\n\r\n```console\r\nINFO:root:Response: None\r\nTraceback (most recent call last):\r\n  File \"/opt/homebrew/lib/python3.10/site-packages/gradio/routes.py\", line 394, in run_predict\r\n    output = await app.get_blocks().process_api(\r\n  File \"/opt/homebrew/lib/python3.10/site-packages/gradio/blocks.py\", line 1075, in process_api\r\n    result = await self.call_function(\r\n  File \"/opt/homebrew/lib/python3.10/site-packages/gradio/blocks.py\", line 898, in call_function\r\n    prediction = await anyio.to_thread.run_sync(\r\n  File \"/opt/homebrew/lib/python3.10/site-packages/anyio/to_thread.py\", line 31, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n  File \"/opt/homebrew/lib/python3.10/site-packages/anyio/_backends/_asyncio.py\", line 937, in run_sync_in_worker_thread\r\n    return await future\r\n  File \"/opt/homebrew/lib/python3.10/site-packages/anyio/_backends/_asyncio.py\", line 867, in run\r\n    result = context.run(func, *args)\r\n  File \"/opt/homebrew/lib/python3.10/site-packages/gradio/utils.py\", line 549, in async_iteration\r\n    return next(iterator)\r\n  File \"/Users/ren/Coding/ChuanhuChatGPT/chat_func.py\", line 275, in predict\r\n    history, chatbot, status_text = chat_ai(openai_api_key, index, inputs, history, chatbot)\r\n  File \"/Users/ren/Coding/ChuanhuChatGPT/llama_func.py\", line 110, in chat_ai\r\n    response, chatbot_display, status_text = ask_ai(\r\n  File \"/Users/ren/Coding/ChuanhuChatGPT/llama_func.py\", line 176, in ask_ai\r\n    new_response = ret_text + \"\\n----------\\n\" + \"\\n\\n\".join(nodes)\r\nTypeError: unsupported operand type(s) for +: 'NoneType' and 'str'\r\n```\r\n\r\n### 运行环境\r\n#### 桌面系统\r\n> **请填写以下列表：**\r\n\r\n - OS: Macos 13.2\r\n - Browser: Chrome\r\n\r\n#### 运行依赖\r\n\r\n- Gradio version: 3.23.0\r\n- Python (或Python3) version: 3.10.8\r\n\r\n### 其他\r\n> 哦对了，代码走到了langchain三方插件里openapi.py里的169行 \r\n```\r\n \"You are trying to use a chat model. This way of initializing it is \"\r\n                \"no longer supported. Instead, please use: \"\r\n                \"`from langchain.chat_models import ChatOpenAI`\"\r\n```\r\n> 于是我就顺便按照提示改了一下 返回了ChatOpenAI. 不搭噶，原先的代码也是这么报错的\r\n",
      "state": "closed",
      "author": "Elaoed",
      "author_type": "User",
      "created_at": "2023-03-21T16:22:50Z",
      "updated_at": "2023-03-31T13:03:00Z",
      "closed_at": "2023-03-31T13:03:00Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/262/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/262",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/262",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:38.417203",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "请更新所有依赖：\r\n```\r\npip install -r requirements.txt --upgrade\r\n```\r\n\r\n另外记得先换用官方源在执行pip install（如果之前使用别的镜像），更多问题可以参考[常见问题](https://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/常见问题)",
          "created_at": "2023-03-31T13:03:00Z"
        }
      ]
    },
    {
      "issue_number": 426,
      "title": "[远程部署]: ModuleNotFoundError: No module named '_ctypes'",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n使用python3 ChuanhuChatbot.py启动\r\n报\r\nModuleNotFoundError: No module named '_ctypes'\n\n### 复现操作\n\n按readme的教程一步一步安装\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n```markdown\n- OS: \r\n- Docker version: \r\n- Gradio version: \r\n- Python version:\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "hfzhanghfcool",
      "author_type": "User",
      "created_at": "2023-03-28T03:06:26Z",
      "updated_at": "2023-03-31T12:59:30Z",
      "closed_at": "2023-03-31T12:59:29Z",
      "labels": [
        "question",
        "server deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/426/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/426",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/426",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:38.632074",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "`_ctypes`为Python内置模块，通常情况下，Python的标准安装程序应该包括 '_ctypes' 模块。如果你使用的是自定义的Python安装或虚拟环境，则需要确保 '_ctypes' 模块已正确安装。\r\n\r\n请尝试重新安装Python或更改Python环境。",
          "created_at": "2023-03-31T12:59:29Z"
        }
      ]
    },
    {
      "issue_number": 484,
      "title": "pip install --upgrade llama_index，解决问题",
      "body": "              pip install --upgrade llama_index，解决问题\r\n\r\n_Originally posted by @iHomeSoft in https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/475#issuecomment-1491164903_\r\n            ",
      "state": "closed",
      "author": "scordl327",
      "author_type": "User",
      "created_at": "2023-03-31T12:20:17Z",
      "updated_at": "2023-03-31T12:26:25Z",
      "closed_at": "2023-03-31T12:26:16Z",
      "labels": [
        "duplicate"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/484/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/484",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/484",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:38.812179",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "我不知道您是指这样做“还有问题”还是希望为其他用户提供建议，如果是后者，感谢您的提出，但是抱歉，我们不接受重复的和解决的ISSUE。欢迎您继续提供有用的建议和其他贡献！\r\n\r\n- #475",
          "created_at": "2023-03-31T12:26:16Z"
        }
      ]
    },
    {
      "issue_number": 314,
      "title": "[本地部署] window环境下 启动报错 ImportError: cannot import name 'BaseOutputParser' from 'langchain.output_parsers'",
      "body": "> 感谢提交 issue! 请尽可能完整填写以下信息，帮助我们更好地定位问题~ \r\n> 请务必先查看 README 中是否已经对您的问题做出了解答。如果没有，请检索issue，查看有没有相同或类似的问题。如果您确信这是一个前人没有遇到的问题，欢迎提交该issue！注意，请编辑issue标题栏“简短的错误描述”部分，也请替换我们的issue模板中的原文。\r\n> 如果您想问的是 `Something went wrong Expecting value: line 1 column 1 (char 0)`，请再好好看一遍 README！！\r\n\r\n### 错误描述\r\nwindow环境下 启动报错\r\n\r\n### 复现操作\r\n双击chatgpt - windows.bat\r\n\r\n### 错误截图\r\n如果可以，请提供错误的截图，如本地部署的网页截图与终端错误报告的截图。\r\n\r\n### 终端（控制台）中的错误报告\r\n```console\r\nTraceback (most recent call last):\r\n  File \"L:\\AI\\chatgpt\\ChuanhuChatGPT\\ChuanhuChatbot.py\", line 10, in <module>\r\n    from overwrites import *\r\n  File \"L:\\AI\\chatgpt\\ChuanhuChatGPT\\overwrites.py\", line 4, in <module>\r\n    from llama_index import Prompt\r\n  File \"L:\\AI\\Python310\\lib\\site-packages\\llama_index\\__init__.py\", line 18, in <module>\r\n    from llama_index.indices.common.struct_store.base import SQLDocumentContextBuilder\r\n  File \"L:\\AI\\Python310\\lib\\site-packages\\llama_index\\indices\\__init__.py\", line 4, in <module>\r\n    from llama_index.indices.keyword_table.base import GPTKeywordTableIndex\r\n  File \"L:\\AI\\Python310\\lib\\site-packages\\llama_index\\indices\\keyword_table\\__init__.py\", line 4, in <module>\r\n    from llama_index.indices.keyword_table.base import GPTKeywordTableIndex\r\n  File \"L:\\AI\\Python310\\lib\\site-packages\\llama_index\\indices\\keyword_table\\base.py\", line 16, in <module>\r\n    from llama_index.indices.base import DOCUMENTS_INPUT, BaseGPTIndex\r\n  File \"L:\\AI\\Python310\\lib\\site-packages\\llama_index\\indices\\base.py\", line 23, in <module>\r\n    from llama_index.indices.prompt_helper import PromptHelper\r\n  File \"L:\\AI\\Python310\\lib\\site-packages\\llama_index\\indices\\prompt_helper.py\", line 12, in <module>\r\n    from llama_index.langchain_helpers.chain_wrapper import LLMPredictor\r\n  File \"L:\\AI\\Python310\\lib\\site-packages\\llama_index\\langchain_helpers\\chain_wrapper.py\", line 6, in <module>\r\n    from llama_index.llm_predictor.base import (  # noqa: F401\r\n  File \"L:\\AI\\Python310\\lib\\site-packages\\llama_index\\llm_predictor\\__init__.py\", line 4, in <module>\r\n    from llama_index.llm_predictor.base import LLMPredictor\r\n  File \"L:\\AI\\Python310\\lib\\site-packages\\llama_index\\llm_predictor\\base.py\", line 15, in <module>\r\n    from llama_index.prompts.base import Prompt\r\n  File \"L:\\AI\\Python310\\lib\\site-packages\\llama_index\\prompts\\__init__.py\", line 3, in <module>\r\n    from llama_index.prompts.base import Prompt\r\n  File \"L:\\AI\\Python310\\lib\\site-packages\\llama_index\\prompts\\base.py\", line 11, in <module>\r\n    from llama_index.output_parsers.base import BaseOutputParser\r\n  File \"L:\\AI\\Python310\\lib\\site-packages\\llama_index\\output_parsers\\__init__.py\", line 4, in <module>\r\n    from llama_index.output_parsers.langchain import LangchainOutputParser\r\n  File \"L:\\AI\\Python310\\lib\\site-packages\\llama_index\\output_parsers\\langchain.py\", line 6, in <module>\r\n    from langchain.output_parsers import BaseOutputParser as LCOutputParser\r\nImportError: cannot import name 'BaseOutputParser' from 'langchain.output_parsers' (L:\\AI\\Python310\\lib\\site-packages\\langchain\\output_parsers\\__init__.py)\r\n```\r\n\r\n### 运行环境\r\n#### 桌面系统\r\n**请填写以下列表：**\r\n\r\n - OS: Windows10\r\n - Browser: Chrome\r\n\r\n#### 运行依赖\r\n**请填写以下列表：**\r\n> 你可以在终端中依次输入以下指令以查看软件版本：\r\n> ```shell\r\n> pip show gradio\r\n>\r\n```\r\nName: gradio\r\nVersion: 3.22.1\r\nSummary: Python library for easily interacting with trained machine learning models\r\nHome-page:\r\nAuthor:\r\nAuthor-email: Abubakar Abid <team@gradio.app>, Ali Abid <team@gradio.app>, Ali Abdalla <team@gradio.app>, Dawood Khan <team@gradio.app>, Ahsen Khaliq <team@gradio.app>, Pete Allen <team@gradio.app>, Ömer Faruk Özdemir <team@gradio.app>\r\nLicense:\r\nLocation: l:\\ai\\python310\\lib\\site-packages\r\nRequires: aiofiles, aiohttp, altair, fastapi, ffmpy, fsspec, httpx, huggingface-hub, jinja2, markdown-it-py, markupsafe, matplotlib, mdit-py-plugins, numpy, orjson, pandas, pillow, pydantic, pydub, python-multipart, pyyaml, requests, typing-extensions, uvicorn, websockets\r\nRequired-by:\r\n```\r\n> python --version\r\n>\r\n```\r\nPython 3.10.10\r\n```\r\n> （如果你使用Python3，请将`pip`替换为`pip3`，`python`替换为`python3`）\r\n\r\n- Gradio version:\r\n- Python (或Python3) version:\r\n\r\n### 其他\r\n补充说明\r\n",
      "state": "closed",
      "author": "showyourlucky",
      "author_type": "User",
      "created_at": "2023-03-22T17:08:52Z",
      "updated_at": "2023-03-31T12:22:11Z",
      "closed_at": "2023-03-31T12:22:11Z",
      "labels": [
        "question",
        "🤷 no can do"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 14,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/314/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/314",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/314",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:39.003260",
      "comments": [
        {
          "author": "LibreJiayi",
          "body": "我也是这个问题",
          "created_at": "2023-03-22T17:29:45Z"
        },
        {
          "author": "cuifeiran",
          "body": "同上\r\n",
          "created_at": "2023-03-22T17:31:04Z"
        },
        {
          "author": "Keldos-Li",
          "body": "你们都知道同上了还发新issue🥲，还有一个不改issue标题的🥲\n",
          "created_at": "2023-03-22T17:34:30Z"
        },
        {
          "author": "elonzh",
          "body": "把 `requirements.txt` 中 `langchain` 改为 `langchain<0.0.119` 重新安装依赖即可。[新版 langchain](https://github.com/hwchase17/langchain/commit/ce5d97bcb3e263f6aa69da6c334e35e20bf4db11) 修改了包结构",
          "created_at": "2023-03-22T18:48:59Z"
        },
        {
          "author": "wolovejing",
          "body": "> 把 `requirements.txt` 中 `langchain` 改为 `langchain<0.0.119` 重新安装依赖即可。[新版 langchain](https://github.com/hwchase17/langchain/commit/ce5d97bcb3e263f6aa69da6c334e35e20bf4db11) 修改了包结构\r\n\r\n这个正确",
          "created_at": "2023-03-22T18:51:10Z"
        }
      ]
    },
    {
      "issue_number": 482,
      "title": "[本地部署]: 本地部署",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\ninstall requirements.txt之后，输入启动命令，出现，这个包有安装成功，但是就是提示cannot import name 'ServiceContext' from 'llama_index' \n\n### 复现操作\n\ninstall requirements.txt之后，输入启动命令，出现，这个包有安装成功，但是就是提示cannot import name 'ServiceContext' from 'llama_index' \n\n### 错误日志\n\n```shell\nPS E:\\Python_Code\\公司\\ChuanhuChatGPT-main> python ChuanhuChatbot.py\r\nTraceback (most recent call last):\r\n  File \"E:\\Python_Code\\公司\\ChuanhuChatGPT-main\\ChuanhuChatbot.py\", line 10, in <module>\r\n    from modules.overwrites import *\r\n  File \"E:\\Python_Code\\公司\\ChuanhuChatGPT-main\\modules\\overwrites.py\", line 9, in <module>\r\n    from modules.llama_func import *\r\n  File \"E:\\Python_Code\\公司\\ChuanhuChatGPT-main\\modules\\llama_func.py\", line 4, in <module>\r\n    from llama_index import GPTSimpleVectorIndex, ServiceContext\r\nImportError: cannot import name 'ServiceContext' from 'llama_index' (D:\\Program Files\\Python\\Python39\\lib\\site-packages\\llama_index\\__init__.py)\n```\n\n\n### 运行环境\n\n```markdown\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: 3.9\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Moster-R",
      "author_type": "User",
      "created_at": "2023-03-31T09:38:10Z",
      "updated_at": "2023-03-31T12:03:29Z",
      "closed_at": "2023-03-31T12:03:29Z",
      "labels": [
        "duplicate",
        "question",
        "localhost deployment"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/482/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/482",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/482",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:39.247536",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "尝试依次执行：\r\n```\r\npip install -r requirements.txt\r\npip install --upgrade llama_index\r\npip install --upgrade langchain\r\n```",
          "created_at": "2023-03-31T09:42:10Z"
        },
        {
          "author": "Keldos-Li",
          "body": "Duplicate with \n- #475",
          "created_at": "2023-03-31T12:03:16Z"
        }
      ]
    },
    {
      "issue_number": 238,
      "title": "[功能请求]使用索引文件时实时传输无效",
      "body": "能否给索引模式加上实时传输呢？使用索引文件时经常出现大段回复，实时传输相较一整段的回答要直观很多",
      "state": "closed",
      "author": "tonylai000",
      "author_type": "User",
      "created_at": "2023-03-20T18:27:33Z",
      "updated_at": "2023-03-31T08:13:45Z",
      "closed_at": "2023-03-31T08:13:33Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/238/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/238",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/238",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:39.423415",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "Resolved by c12b7248f8d50ce32374825fe264fd2eea4dc309 ([Chuan Hu](https://github.com/GaiZhenbiao)).",
          "created_at": "2023-03-31T08:13:33Z"
        }
      ]
    },
    {
      "issue_number": 460,
      "title": "[Bug]: 上传图片显示Error",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue。\n\n### 错误表现\n\n使用GPT-4模型，上传图片后提问显示“索引构建完成，获取回答中……”，左侧有红色Error\n\n### 复现操作\n\n1.服务器docker部署\r\n2.上传图片\r\n3.提问\n\n### 错误日志\n\n```shell\nTo create a public link, set `share=True` in `launch()`.\r\n2023-03-29 13:03:32,618 [INFO] [chat_func.py:252] 输入为：这张图片的笑点是什么\r\n2023-03-29 13:03:32,634 [INFO] [chat_func.py:259] 加载索引中……（这可能需要几分钟）\r\n/root/.local/lib/python3.9/site-packages/langchain/llms/openai.py:169: UserWarning: You are trying to use a chat model. This way of initializing it is no longer supported. Instead, please use: `from langchain.chat_models import ChatOpenAI`\r\n  warnings.warn(\r\n/root/.local/lib/python3.9/site-packages/langchain/llms/openai.py:608: UserWarning: You are trying to use a chat model. This way of initializing it is no longer supported. Instead, please use: `from langchain.chat_models import ChatOpenAI`\r\n  warnings.warn(\r\n2023-03-29 13:03:34,333 [INFO] [llama_func.py:37] loading file: /tmp/4b5a17e12de8512fab0624d0061dcc7e103ee0f1/F6F7A6DEAC97D66F5B4131B16475967F.png\r\n'utf-8' codec can't decode byte 0xff in position 0: invalid start byte\r\n2023-03-29 13:03:34,347 [INFO] [llama_func.py:119] Question: 这张图片的笑点是什么\r\nTraceback (most recent call last):\r\n  File \"/root/.local/lib/python3.9/site-packages/gradio/routes.py\", line 394, in run_predict\r\n    output = await app.get_blocks().process_api(\r\n  File \"/root/.local/lib/python3.9/site-packages/gradio/blocks.py\", line 1075, in process_api\r\n    result = await self.call_function(\r\n  File \"/root/.local/lib/python3.9/site-packages/gradio/blocks.py\", line 898, in call_function\r\n    prediction = await anyio.to_thread.run_sync(\r\n  File \"/root/.local/lib/python3.9/site-packages/anyio/to_thread.py\", line 31, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n  File \"/root/.local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py\", line 937, in run_sync_in_worker_thread\r\n    return await future\r\n  File \"/root/.local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py\", line 867, in run\r\n    result = context.run(func, *args)\r\n  File \"/root/.local/lib/python3.9/site-packages/gradio/utils.py\", line 549, in async_iteration\r\n    return next(iterator)\r\n  File \"/app/modules/chat_func.py\", line 264, in predict\r\n    history, chatbot, status_text = chat_ai(openai_api_key, index, inputs, history, chatbot, reply_language)\r\n  File \"/app/modules/llama_func.py\", line 121, in chat_ai\r\n    response, chatbot_display, status_text = ask_ai(\r\n  File \"/app/modules/llama_func.py\", line 171, in ask_ai\r\n    response = index.query(\r\nAttributeError: 'NoneType' object has no attribute 'query'\n```\n\n\n### 运行环境\n\n```markdown\n- OS: Ubuntu 18.04\r\n- Browser: Edge dev\r\n- Gradio version: 3.23.0 \r\n- Python version: 3.9.16\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "NekoYu",
      "author_type": "User",
      "created_at": "2023-03-29T13:11:29Z",
      "updated_at": "2023-03-30T09:31:28Z",
      "closed_at": "2023-03-30T09:29:41Z",
      "labels": [
        "invalid"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/460/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 1
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/460",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/460",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:39.623516",
      "comments": [
        {
          "author": "NekoYu",
          "body": "Commit: c8fd9d2",
          "created_at": "2023-03-29T13:24:06Z"
        },
        {
          "author": "MZhao-ouo",
          "body": "一、川虎ChatGPT目前不支持图片识别，也不支持上传图片\r\n二、目前能够测试的只有GPT-4 的8k文字版本，不支持多模态，等到拿到相应api后会马上跟进",
          "created_at": "2023-03-30T09:29:41Z"
        }
      ]
    },
    {
      "issue_number": 468,
      "title": "[功能请求]: 支援繁體中文輸出",
      "body": "### 相关问题\n\n目前介面中的下拉選單選擇中文後，左方輸入問題得到的機器人回答經常是簡體中文的，希望可以加入選項定義由繁體中文回答，謝謝。\n\n### 可能的解决办法\n\n右方的选择回复语言由\"中文\"改为\"简中\"与'繁中\"\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "den13501",
      "author_type": "User",
      "created_at": "2023-03-30T06:49:09Z",
      "updated_at": "2023-03-30T08:41:51Z",
      "closed_at": "2023-03-30T08:41:50Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/468/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/468",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/468",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:39.814920",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "<img width=\"263\" alt=\"image\" src=\"https://user-images.githubusercontent.com/51039745/228780220-b5eeaf90-c69e-4017-9fe8-6fb53394a945.png\">\r\n\r\n现在有啦",
          "created_at": "2023-03-30T08:41:50Z"
        }
      ]
    },
    {
      "issue_number": 450,
      "title": "[Bug]: 服务器端文件检索index None问题",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue。\n\n### 错误表现\n\n```\r\n2023-03-29 08:25:09,696 [INFO] [chat_func.py:252] 输入为：test\r\n2023-03-29 08:25:09,705 [INFO] [chat_func.py:259] 加载索引中……（这可能需要几分钟）\r\n/root/.local/lib/python3.9/site-packages/langchain/llms/openai.py:169: UserWarning: You are trying to use a chat model. This way of initializing it is no longer supported. Instead, please use: `from langchain.chat_models import ChatOpenAI`\r\nwarnings.warn(\r\n/root/.local/lib/python3.9/site-packages/langchain/llms/openai.py:608: UserWarning: You are trying to use a chat model. This way of initializing it is no longer supported. Instead, please use: `from langchain.chat_models import ChatOpenAI`\r\nwarnings.warn(\r\n2023-03-29 08:25:11,583 [INFO] [llama_func.py:37] loading file: /tmp/a44d3e46dc0c56ca318d7c9a08539fef04f8e6e4/是的NFT更像是一场骗局 9546ce7713244f059f470d94f1d9b1be.md\r\n__init__() got an unexpected keyword argument 'llm_predictor'\r\n2023-03-29 08:25:11,594 [INFO] [llama_func.py:119] Question: test\r\nTraceback (most recent call last):\r\nFile \"/root/.local/lib/python3.9/site-packages/gradio/routes.py\", line 394, in run_predict\r\noutput = await app.get_blocks().process_api(\r\nFile \"/root/.local/lib/python3.9/site-packages/gradio/blocks.py\", line 1075, in process_api\r\nresult = await self.call_function(\r\nFile \"/root/.local/lib/python3.9/site-packages/gradio/blocks.py\", line 898, in call_function\r\nprediction = await anyio.to_thread.run_sync(\r\nFile \"/root/.local/lib/python3.9/site-packages/anyio/to_thread.py\", line 31, in run_sync\r\nreturn await get_asynclib().run_sync_in_worker_thread(\r\nFile \"/root/.local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py\", line 937, in run_sync_in_worker_thread\r\nreturn await future\r\nFile \"/root/.local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py\", line 867, in run\r\nresult = context.run(func, *args)\r\nFile \"/root/.local/lib/python3.9/site-packages/gradio/utils.py\", line 549, in async_iteration\r\nreturn next(iterator)\r\nFile \"/app/modules/chat_func.py\", line 264, in predict\r\nhistory, chatbot, status_text = chat_ai(openai_api_key, index, inputs, history, chatbot, reply_language)\r\nFile \"/app/modules/llama_func.py\", line 121, in chat_ai\r\nresponse, chatbot_display, status_text = ask_ai(\r\nFile \"/app/modules/llama_func.py\", line 171, in ask_ai\r\nresponse = index.query(\r\nAttributeError: 'NoneType' object has no attribute 'query'\r\n```\r\n\r\n在Railway的docker部署后 上传文件后问问题 index是None\r\n没有对这个repo做任何改动, fresh from latest commit on main\r\n\r\n我怀疑是docker中安装的dependency版本可能不一样 \r\n\r\n`__init__() got an unexpected keyword argument 'llm_predictor'`\n\n### 复现操作\n\n在Railway的docker部署后 上传文件后问问题 index是None\r\n没有对这个repo做任何改动, fresh from latest commit on main\n\n### 错误日志\n\n```shell\n2023-03-29 08:25:09,696 [INFO] [chat_func.py:252] 输入为：test\r\n2023-03-29 08:25:09,705 [INFO] [chat_func.py:259] 加载索引中……（这可能需要几分钟）\r\n/root/.local/lib/python3.9/site-packages/langchain/llms/openai.py:169: UserWarning: You are trying to use a chat model. This way of initializing it is no longer supported. Instead, please use: `from langchain.chat_models import ChatOpenAI`\r\nwarnings.warn(\r\n/root/.local/lib/python3.9/site-packages/langchain/llms/openai.py:608: UserWarning: You are trying to use a chat model. This way of initializing it is no longer supported. Instead, please use: `from langchain.chat_models import ChatOpenAI`\r\nwarnings.warn(\r\n2023-03-29 08:25:11,583 [INFO] [llama_func.py:37] loading file: /tmp/a44d3e46dc0c56ca318d7c9a08539fef04f8e6e4/是的NFT更像是一场骗局 9546ce7713244f059f470d94f1d9b1be.md\r\n__init__() got an unexpected keyword argument 'llm_predictor'\r\n2023-03-29 08:25:11,594 [INFO] [llama_func.py:119] Question: test\r\nTraceback (most recent call last):\r\nFile \"/root/.local/lib/python3.9/site-packages/gradio/routes.py\", line 394, in run_predict\r\noutput = await app.get_blocks().process_api(\r\nFile \"/root/.local/lib/python3.9/site-packages/gradio/blocks.py\", line 1075, in process_api\r\nresult = await self.call_function(\r\nFile \"/root/.local/lib/python3.9/site-packages/gradio/blocks.py\", line 898, in call_function\r\nprediction = await anyio.to_thread.run_sync(\r\nFile \"/root/.local/lib/python3.9/site-packages/anyio/to_thread.py\", line 31, in run_sync\r\nreturn await get_asynclib().run_sync_in_worker_thread(\r\nFile \"/root/.local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py\", line 937, in run_sync_in_worker_thread\r\nreturn await future\r\nFile \"/root/.local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py\", line 867, in run\r\nresult = context.run(func, *args)\r\nFile \"/root/.local/lib/python3.9/site-packages/gradio/utils.py\", line 549, in async_iteration\r\nreturn next(iterator)\r\nFile \"/app/modules/chat_func.py\", line 264, in predict\r\nhistory, chatbot, status_text = chat_ai(openai_api_key, index, inputs, history, chatbot, reply_language)\r\nFile \"/app/modules/llama_func.py\", line 121, in chat_ai\r\nresponse, chatbot_display, status_text = ask_ai(\r\nFile \"/app/modules/llama_func.py\", line 171, in ask_ai\r\nresponse = index.query(\r\nAttributeError: 'NoneType' object has no attribute 'query'\r\n```\n\n\n### 运行环境\n\n```markdown\n- OS: Railway Docker\r\n- Browser: Chrome\r\n- Gradio version: \r\n- Python version: Python 3.9\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "xingfanxia",
      "author_type": "User",
      "created_at": "2023-03-29T08:29:35Z",
      "updated_at": "2023-03-30T08:28:42Z",
      "closed_at": "2023-03-30T08:28:42Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/450/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/450",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/450",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:39.976856",
      "comments": [
        {
          "author": "xingfanxia",
          "body": "-> https://github.com/jerryjliu/llama_index/releases 5.0似乎有一堆breaking changes",
          "created_at": "2023-03-29T08:31:46Z"
        },
        {
          "author": "xingfanxia",
          "body": "在本地的mac也成功复现了, 在升级0.5.0以后会报错",
          "created_at": "2023-03-29T08:33:46Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "暂时固定版本号到`0.4.40`，等会儿我为新版llama_index适配下",
          "created_at": "2023-03-29T08:34:58Z"
        },
        {
          "author": "xingfanxia",
          "body": "@GaiZhenbiao 好的, 基本上就是这个 \r\n> We now use a ServiceContext container to wrap all these common arguments of passing in custom LLM’s, embedding models, chunk sizes, prompt helpers.\r\n\r\n不过好像我改了这个还是有点问题, `query` 那还是会报错",
          "created_at": "2023-03-29T08:54:14Z"
        },
        {
          "author": "xingfanxia",
          "body": "修复了, 我提交一个PR",
          "created_at": "2023-03-29T09:08:28Z"
        }
      ]
    },
    {
      "issue_number": 462,
      "title": "[功能请求]: 支持自适应切换4.0和3.5的tokens数",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue。\n\n### 错误表现\n\n看官方文档上说4.0能够支持8196个tokens\r\n![image](https://user-images.githubusercontent.com/86949124/228606333-bd48df1f-6567-4156-bec5-f2d413a0e4c2.png)\r\n而网页依旧在调整为4.0后在3500tokens的时候自动续写\n\n### 复现操作\n\n在调整为4.0后，在3500tokens的时候自动续写\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n```markdown\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version:\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "slideslide",
      "author_type": "User",
      "created_at": "2023-03-29T16:31:51Z",
      "updated_at": "2023-03-30T05:34:35Z",
      "closed_at": "2023-03-30T04:00:07Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/462/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/462",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/462",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:40.169183",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "我改成feature request吧",
          "created_at": "2023-03-30T02:22:06Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "现在各个模型有分离的token软上限啦\r\n```\r\nMODEL_SOFT_TOKEN_LIMIT = {\r\n    \"gpt-3.5-turbo\": {\r\n        \"streaming\": 3500,\r\n        \"all\": 3500\r\n    },\r\n    \"gpt-3.5-turbo-0301\": {\r\n        \"streaming\": 3500,\r\n        \"all\": 3500\r\n    },\r\n    \"gpt-4\": {\r\n        \"streaming\": 7500,\r\n        \"all\": 7500\r\n    },\r\n    \"g",
          "created_at": "2023-03-30T03:59:58Z"
        },
        {
          "author": "slideslide",
          "body": "> 现在各个模型有分离的token软上限啦\r\n> \r\n> ```\r\n> MODEL_SOFT_TOKEN_LIMIT = {\r\n>     \"gpt-3.5-turbo\": {\r\n>         \"streaming\": 3500,\r\n>         \"all\": 3500\r\n>     },\r\n>     \"gpt-3.5-turbo-0301\": {\r\n>         \"streaming\": 3500,\r\n>         \"all\": 3500\r\n>     },\r\n>     \"gpt-4\": {\r\n>         \"streaming\": 7500,\r\n>    ",
          "created_at": "2023-03-30T05:34:35Z"
        }
      ]
    },
    {
      "issue_number": 309,
      "title": "[Docker] 部署docker后报错`Connection errored out`",
      "body": "使用如下命令构建docker容器\r\ndocker run -d --name chatgpt \\\r\n\t-e my_api_key=\"\" \\\r\n\t-e USERNAME=\"\" \\\r\n\t-e PASSWORD=\"\" \\\r\n\t-v ~/chatGPThistory:/app/history \\\r\n\t-p 7860:7860 \\\r\n\t--net=host tuchuanhuhuhu/chuanhuchatgpt:latest\r\nvps里面有全局代理部署所以使用--net=host参数部署docker容器部署之后成功访问页面\r\n![image](https://user-images.githubusercontent.com/115065774/226910900-36d3f0ed-ffa7-480c-9fe1-6302c81d866e.png)\r\n发送信息error\r\n![image](https://user-images.githubusercontent.com/115065774/226910525-052c391a-7d72-4924-b8a4-798545b64f67.png)\r\n",
      "state": "closed",
      "author": "nashor1",
      "author_type": "User",
      "created_at": "2023-03-22T12:55:55Z",
      "updated_at": "2023-03-30T02:40:11Z",
      "closed_at": "2023-03-30T02:40:11Z",
      "labels": [
        "question",
        "docker deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/309/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/309",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/309",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:40.346710",
      "comments": [
        {
          "author": "cmmchina",
          "body": "我也是这样，openwrt  docker部署，openwrt 上有clash，启动后也是相同情况提交问题后提示这个错误。",
          "created_at": "2023-03-22T15:50:19Z"
        },
        {
          "author": "Keldos-Li",
          "body": "请参考\r\n- #89\r\n\r\n和 #89 中可见 reference 的所有issue。",
          "created_at": "2023-03-23T00:38:51Z"
        },
        {
          "author": "Keldos-Li",
          "body": "久无回复。\r\n请尝试更新并看看其他ISSUE与Discussion。",
          "created_at": "2023-03-30T02:40:11Z"
        }
      ]
    },
    {
      "issue_number": 292,
      "title": "[Docker]如何在docker部署时设置代理？",
      "body": "> 感谢提交 issue! 请尽可能完整填写以下信息，帮助我们更好地定位问题~ \r\n> 请务必先查看 README 中是否已经对您的问题做出了解答。如果没有，请检索issue，查看有没有相同或类似的问题。如果您确信这是一个前人没有遇到的问题，欢迎提交该issue！注意，请编辑issue标题栏“简短的错误描述”部分，也请替换我们的issue模板中的原文。\r\n\r\n### 错误描述\r\n我在局域网里设置了一个http代理，不管是在宿主机，还是容器里，用cul -x http://192.168.50.40:10809 https://www.google.com 都能成功获取返回内容，但在页面上设置代理地址为http://192.168.50.40:10809就一直报错\r\n\r\n### 复现操作\r\n高级，设置代理地址：http://192.168.50.40:10809  报错\r\n\r\n### 错误截图\r\n如果可以，请提供错误的截图，如部署的网页截图与控制台错误报告的截图。\r\n\r\n### 终端（控制台）中的错误报告\r\n如果可以，请复制终端中的主要错误报告。\r\n\r\n```console\r\n(请使用错误报告替换本行)\r\n```\r\n\r\n### 运行环境\r\n**请填写以下列表：**\r\n\r\n- OS: [e.g. Linux Ubuntu]\r\n- Docker version:\r\n- Gradio version:\r\n- Python (或Python3) version:\r\n\r\n### 其他\r\n补充说明\r\n",
      "state": "closed",
      "author": "lersh",
      "author_type": "User",
      "created_at": "2023-03-22T07:57:11Z",
      "updated_at": "2023-03-30T02:35:50Z",
      "closed_at": "2023-03-30T02:35:50Z",
      "labels": [
        "question",
        "docker deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/292/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/292",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/292",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:40.530915",
      "comments": [
        {
          "author": "MZhao-ouo",
          "body": "请提供部署的主机和访问的主机之间的关系，这个代理只对部署的机器有效。",
          "created_at": "2023-03-23T17:32:53Z"
        },
        {
          "author": "yyihuan",
          "body": "需要配置docker容器的env\r\n ``` \r\n    - NO_PROXY=localhost\r\n    - HTTP_PROXY=http://你的代理地址\r\n    - HTTPS_PROXY=http://你的代理地址\r\n ```\r\n注意，第一个NO_PROXY必须配置，应该是gradio的一个bug\r\n\r\n下面是我自己的配置文件，不太安全的使用了host模式（因为这台服务器只提供clash和gpt服务）。在这里我的网络是这样的，首先在docker里运行了一个clash，并获取它在虚拟网络内的ip地址。然后gpt服务设置代理到它对应的ip:host\r\n ```\r\nversion: '",
          "created_at": "2023-03-24T23:06:37Z"
        }
      ]
    },
    {
      "issue_number": 335,
      "title": "[Docker] 2023-3-23 latest docker版本，docker内重启python ChuanghuChatbot.py出错",
      "body": "启动docker成功后，进入容器打算修改一下python内容和html内容，修改好后在容器内重新python3 ChuanhuChatBot.py\r\n出错\r\n显示7860端口占用\r\n\r\n在容器内尝试kill -9 1  也不行，杀不死docker进程\r\n\r\n\r\n请问通过docker启动修改完后想重启py该如何操作呢",
      "state": "closed",
      "author": "Alexzspace",
      "author_type": "User",
      "created_at": "2023-03-23T10:30:00Z",
      "updated_at": "2023-03-30T02:32:17Z",
      "closed_at": "2023-03-30T02:32:17Z",
      "labels": [
        "question",
        "docker deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/335/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/335",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/335",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:40.702657",
      "comments": [
        {
          "author": "xmlv",
          "body": "没有特别好的没办法，如果机器上没有太多其他重要进程的话，重启吧",
          "created_at": "2023-03-27T05:56:00Z"
        }
      ]
    },
    {
      "issue_number": 354,
      "title": " [远程部署] 使用Nginx Proxy Manager报错 Something went wrong Connection errored out",
      "body": "> 感谢提交 issue! 请尽可能完整填写以下信息，帮助我们更好地定位问题~ \r\n> 请务必先查看 README 中是否已经对您的问题做出了解答。如果没有，请检索issue，查看有没有相同或类似的问题。如果您确信这是一个前人没有遇到的问题，欢迎提交该issue！注意，请编辑issue标题栏“简短的错误描述”部分，也请替换我们的issue模板中的原文。\r\n\r\n### 错误描述\r\n在使用npm代理地址时候出现报错Something went wrong Connection errored out 服务端无报错。\r\n![image](https://user-images.githubusercontent.com/52027227/227441723-737323d8-6a45-4bc3-8271-360591cb37bb.png)\r\n\r\n\r\n### 复现操作\r\n修改源码最后一项都无法进行代理\r\n![image](https://user-images.githubusercontent.com/52027227/227441921-38c79bbd-ecc7-416f-bba7-c96c5d9f6f47.png)\r\n\r\n### 错误截图\r\n\r\n![image](https://user-images.githubusercontent.com/52027227/227441723-737323d8-6a45-4bc3-8271-360591cb37bb.png)\r\n### 终端（控制台）中的错误报告\r\n无任何报错。\r\n如果可以，请复制终端中的主要错误报告。\r\n\r\n```console\r\nindex.37b24c07.js:4 WebSocket connection to 'ws://chatgpt.codeyour.top/queue/join' failed: \r\n\r\n```\r\n![image](https://user-images.githubusercontent.com/52027227/227443551-49e336ac-a5a7-42fe-bc99-7950d5a4e5cc.png)\r\n\r\n\r\n### 运行环境\r\n**请填写以下列表：**\r\n\r\nOS:ubuntu\r\nPython 3.10.9\r\n\r\n### 其他\r\n补充说明\r\n公网IP就可以正常访问，代理后就无法访问。不清楚应该怎么设置，使用最后nginx代理也是不行。",
      "state": "closed",
      "author": "xianglongwei",
      "author_type": "User",
      "created_at": "2023-03-24T06:28:54Z",
      "updated_at": "2023-03-30T02:30:34Z",
      "closed_at": "2023-03-30T02:30:34Z",
      "labels": [
        "question",
        "server deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/354/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/354",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/354",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:40.859441",
      "comments": [
        {
          "author": "kayeah82",
          "body": "我出现同样的问题，可以正常登录。只是一对话就出现“Something went wrong Connection errored out ”",
          "created_at": "2023-03-24T10:37:34Z"
        },
        {
          "author": "kayeah82",
          "body": "> 我出现同样的问题，可以正常登录。只是一对话就出现“Something went wrong Connection errored out ”\r\n\r\n刚测试后，关闭认证就无此问题，开启认证就有。",
          "created_at": "2023-03-24T10:52:09Z"
        },
        {
          "author": "Garretqaq",
          "body": "我也有同样的问题，用分享链接就可以访问但是用ip端口就不能访问\r\n![1679716271090](https://user-images.githubusercontent.com/98604743/227690491-9527b7d2-e1ed-45f5-b848-b00ee6edb2e6.png)\r\n",
          "created_at": "2023-03-25T03:49:36Z"
        },
        {
          "author": "Keldos-Li",
          "body": "看 [这里的](https://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98#something-went-wrong-connection-errored-out) 参见",
          "created_at": "2023-03-25T04:46:51Z"
        },
        {
          "author": "Garretqaq",
          "body": "谢谢已解决，采用nginx按照配置代理成https，后端访问就解决该问题",
          "created_at": "2023-03-27T02:15:11Z"
        }
      ]
    },
    {
      "issue_number": 403,
      "title": "[Docker]: 设置USERNAME和password以后无法正确获得ip地址",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n如果我设置USERNAME和password以后，就无法正确获得我的ip地址。\r\n部署时不使用username和password就可以正常使用\n\n### 复现操作\n\n如同错误描述，\r\n在使用username和password以后，无法正确获得ip也就无法正常使用。\r\n如果去掉username和password就可以正常使用\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n```markdown\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version:\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Suiiiii",
      "author_type": "User",
      "created_at": "2023-03-26T09:55:57Z",
      "updated_at": "2023-03-30T02:29:34Z",
      "closed_at": "2023-03-30T02:29:34Z",
      "labels": [
        "duplicate",
        "question",
        "docker deployment"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/403/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/403",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/403",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:41.100065",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "- #89",
          "created_at": "2023-03-26T10:03:17Z"
        },
        {
          "author": "Keldos-Li",
          "body": "Duplicate and no response.",
          "created_at": "2023-03-30T02:29:34Z"
        }
      ]
    },
    {
      "issue_number": 442,
      "title": "[本地部署]: NAS上部署的docker自启动失败",
      "body": "### 是否已存在现有反馈与解答？\r\n\r\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\r\n\r\n### 是否是一个代理配置相关的疑问？\r\n\r\n- [X] 我确认这不是一个代理配置相关的疑问。\r\n\r\n### 错误描述\r\n\r\n我的unraid每天早上自动开机，自启动docker容器，最近更新几次后，chatGPT一直自启动失败，查看了下日志，如下：\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/root/.local/lib/python3.9/site-packages/requests/adapters.py\", line 489, in send\r\n    resp = conn.urlopen(\r\n  File \"/root/.local/lib/python3.9/site-packages/urllib3/connectionpool.py\", line 787, in urlopen\r\n    retries = retries.increment(\r\n  File \"/root/.local/lib/python3.9/site-packages/urllib3/util/retry.py\", line 592, in increment\r\n    raise MaxRetryError(_pool, url, error or ResponseError(cause))\r\nurllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='api.openai.com', port=443): Max retries exceeded with url: /dashboard/billing/credit_grants (Caused by NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x153e12f76310>: Failed to establish a new connection: [Errno 110] Connection timed out'))\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/app/ChuanhuChatbot.py\", line 105, in <module>\r\n    usageTxt = gr.Markdown(get_usage(my_api_key), elem_id=\"usage_display\")\r\n  File \"/app/modules/openai_func.py\", line 53, in get_usage\r\n    response=get_usage_response(openai_api_key=openai_api_key)\r\n  File \"/app/modules/openai_func.py\", line 44, in get_usage_response\r\n    response = requests.get(\r\n  File \"/root/.local/lib/python3.9/site-packages/requests/api.py\", line 73, in get\r\n    return request(\"get\", url, params=params, **kwargs)\r\n  File \"/root/.local/lib/python3.9/site-packages/requests/api.py\", line 59, in request\r\n    return session.request(method=method, url=url, **kwargs)\r\n  File \"/root/.local/lib/python3.9/site-packages/requests/sessions.py\", line 587, in request\r\n    resp = self.send(prep, **send_kwargs)\r\n  File \"/root/.local/lib/python3.9/site-packages/requests/sessions.py\", line 701, in send\r\n    r = adapter.send(request, **kwargs)\r\n  File \"/root/.local/lib/python3.9/site-packages/requests/adapters.py\", line 565, in send\r\n    raise ConnectionError(e, request=request)\r\nrequests.exceptions.ConnectionError: HTTPSConnectionPool(host='api.openai.com', port=443): Max retries exceeded with url: /dashboard/billing/credit_grants (Caused by NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x153e12f76310>: Failed to establish a new connection: [Errno 110] Connection timed out'))\r\n\r\n### 复现操作\r\n\r\n更新了该镜像\r\n\r\n### 错误日志\r\n\r\n```shell\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/root/.local/lib/python3.9/site-packages/requests/adapters.py\", line 489, in send\r\n    resp = conn.urlopen(\r\n  File \"/root/.local/lib/python3.9/site-packages/urllib3/connectionpool.py\", line 787, in urlopen\r\n    retries = retries.increment(\r\n  File \"/root/.local/lib/python3.9/site-packages/urllib3/util/retry.py\", line 592, in increment\r\n    raise MaxRetryError(_pool, url, error or ResponseError(cause))\r\nurllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='api.openai.com', port=443): Max retries exceeded with url: /dashboard/billing/credit_grants (Caused by NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x153e12f76310>: Failed to establish a new connection: [Errno 110] Connection timed out'))\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/app/ChuanhuChatbot.py\", line 105, in <module>\r\n    usageTxt = gr.Markdown(get_usage(my_api_key), elem_id=\"usage_display\")\r\n  File \"/app/modules/openai_func.py\", line 53, in get_usage\r\n    response=get_usage_response(openai_api_key=openai_api_key)\r\n  File \"/app/modules/openai_func.py\", line 44, in get_usage_response\r\n    response = requests.get(\r\n  File \"/root/.local/lib/python3.9/site-packages/requests/api.py\", line 73, in get\r\n    return request(\"get\", url, params=params, **kwargs)\r\n  File \"/root/.local/lib/python3.9/site-packages/requests/api.py\", line 59, in request\r\n    return session.request(method=method, url=url, **kwargs)\r\n  File \"/root/.local/lib/python3.9/site-packages/requests/sessions.py\", line 587, in request\r\n    resp = self.send(prep, **send_kwargs)\r\n  File \"/root/.local/lib/python3.9/site-packages/requests/sessions.py\", line 701, in send\r\n    r = adapter.send(request, **kwargs)\r\n  File \"/root/.local/lib/python3.9/site-packages/requests/adapters.py\", line 565, in send\r\n    raise ConnectionError(e, request=request)\r\nrequests.exceptions.ConnectionError: HTTPSConnectionPool(host='api.openai.com', port=443): Max retries exceeded with url: /dashboard/billing/credit_grants (Caused by NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x153e12f76310>: Failed to establish a new connection: [Errno 110] Connection timed out'))\r\n```\r\n\r\n\r\n### 运行环境\r\n\r\n```markdown\r\n- OS: Unraid Server\r\n- Browser: Docker\r\n- Gradio version: \r\n- Python version:\r\n```\r\n\r\n\r\n### 补充说明\r\n- 感觉还是跟代理有关系，因为我的代理也是通过docker的v2rayA启动后实现的，会不会是因为v2rayA还没启动，chatgpt先启动了导致的？\r\n_No response_",
      "state": "closed",
      "author": "q107580018",
      "author_type": "User",
      "created_at": "2023-03-29T01:50:23Z",
      "updated_at": "2023-03-30T02:25:41Z",
      "closed_at": "2023-03-30T02:25:29Z",
      "labels": [
        "question",
        "localhost deployment",
        "👽Proxy"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/442/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 1,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/442",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/442",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:41.259516",
      "comments": [
        {
          "author": "Qwerty4401",
          "body": "是代理的问题，我之前遇到过这样的异常。\r\n我是用路由器开的代理，设置域名api.openai.com和openai.com强制走代理，然后就没有问题了。",
          "created_at": "2023-03-30T02:22:18Z"
        },
        {
          "author": "Keldos-Li",
          "body": "请自行解决代理问题",
          "created_at": "2023-03-30T02:25:29Z"
        }
      ]
    },
    {
      "issue_number": 147,
      "title": "[功能请求] 把聊天记录导出为markdown格式的文件",
      "body": "### 该功能请求是否与某个问题相关？\r\n> 描述你遇到的问题~\r\n语雀上记录学习笔记，复制非常不方便，如果能导出markdown格式的文件，再倒入到语雀就很方便了。\r\n\r\n### 可能的解决办法\r\n> 增加一个按钮，除了保存为json，也可以保存为markdown格式\r\n> 或者每一个chatGPT回复内容右上角增加一个copy按钮，把markdown的内容保存到剪贴板。\r\n\r\n### 其他\r\n> 如果再复杂点，可以提供一个markdown编辑器，再编辑器里面可以向ai提问，回复后直接返回到鼠标位置，例如Notion AI功能",
      "state": "closed",
      "author": "jarrywen",
      "author_type": "User",
      "created_at": "2023-03-14T07:40:30Z",
      "updated_at": "2023-03-29T11:57:05Z",
      "closed_at": "2023-03-18T13:01:02Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 8,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/147/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/147",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/147",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:41.419845",
      "comments": [
        {
          "author": "jarrywen",
          "body": "或者有没有工具，可以把保存到json转为markdown文件",
          "created_at": "2023-03-14T07:43:18Z"
        },
        {
          "author": "tuteng0915",
          "body": "对于markdown格式具体有什么需求吗？以什么形式来区别ChatGPT和用户的内容？如果可以的话，可以手动编辑一条作为样例吗？",
          "created_at": "2023-03-14T08:35:12Z"
        },
        {
          "author": "jarrywen",
          "body": "就按川虎ChatGPT上的聊天记录展示的格式就可以",
          "created_at": "2023-03-14T09:57:25Z"
        },
        {
          "author": "tuteng0915",
          "body": "可是标准的markdown语法并不支持像gradio.chatbot那样以文字气泡的形式记录，亦无对于分栏、居右等格式的语法。因此，还是建议您给出一条您所期望的markdown形式。",
          "created_at": "2023-03-14T12:14:50Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "这确实可以做。@tuteng0915 我想他要的不是带着气泡一模一样的，而是用markdown标题“assistant”“user”这样分割就行了。",
          "created_at": "2023-03-15T00:55:33Z"
        }
      ]
    },
    {
      "issue_number": 458,
      "title": "[功能请求]: Robot text and Human text markdown rendering",
      "body": "### 相关问题\n\n目前的对话框没有支持markdown rendering, 只有代码的rendering, 希望加入full markdown 支持\n\n### 可能的解决办法\n\n对前端没有太多研究, 应该有渲染库?\n\n### 帮助开发\n\n- [X] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "xingfanxia",
      "author_type": "User",
      "created_at": "2023-03-29T11:40:02Z",
      "updated_at": "2023-03-29T11:55:03Z",
      "closed_at": "2023-03-29T11:52:51Z",
      "labels": [
        "feature request",
        "question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/458/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/458",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/458",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:41.667022",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "天，我们现在的一堆显示bug就是因为处于markdown渲染环境才导致的QAQ，还有啥不支持的markdown rendering吗\r\n\r\n另：用户发送的文本不经过markdown渲染，目前策略是只渲染gpt的文本。",
          "created_at": "2023-03-29T11:44:39Z"
        },
        {
          "author": "xingfanxia",
          "body": "> 天，我们现在的一堆显示bug就是因为处于markdown渲染环境才导致的QAQ，还有啥不支持的markdown rendering吗\r\n> \r\n> 另：用户发送的文本不经过markdown渲染，目前策略是只渲染gpt的文本。\r\n\r\n- 比如现在有numbering list但是没有相应的缩进\r\n- 用户文本有injection 风险? ",
          "created_at": "2023-03-29T11:50:51Z"
        },
        {
          "author": "xingfanxia",
          "body": "不好意思, 验证了一下是有style的. 就是不太明显lol",
          "created_at": "2023-03-29T11:54:12Z"
        },
        {
          "author": "Keldos-Li",
          "body": "其实是有缩进的。但需要gpt非常规范地给出列表：\r\n```\r\n1. xxx\r\n2. xxx\r\n   1. 111\r\n3. xxx\r\n```\r\n\r\n一旦gpt在列表之间给了空行，列表渲染就完蛋啦，这个库就会把空行后的当成新列表。\r\n\r\n或许之后可以试试手动在列表项目之间加`<p>`",
          "created_at": "2023-03-29T11:54:33Z"
        }
      ]
    },
    {
      "issue_number": 451,
      "title": "[其他]: 不支持GPT4-8k api",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 错误描述\n\n不支持GPT4-8k api\n\n### 复现操作\n\n不支持GPT4-8k api\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n```markdown\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n(或您的其他运行环境信息)\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "SlatitudeChou",
      "author_type": "User",
      "created_at": "2023-03-29T08:40:40Z",
      "updated_at": "2023-03-29T11:52:46Z",
      "closed_at": "2023-03-29T11:52:46Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/451/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/451",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/451",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:41.863268",
      "comments": [
        {
          "author": "MZhao-ouo",
          "body": "![image](https://user-images.githubusercontent.com/70903329/228526738-8d2bccb5-d8e3-4165-99f8-c09871a73998.png)\r\nGPT-4的模型就这四种，不带后缀的就是8k版本。而且已经通过测试，8k版本可以正常使用。请确保你有GPT-4 API的调用资格",
          "created_at": "2023-03-29T11:51:57Z"
        }
      ]
    },
    {
      "issue_number": 457,
      "title": "出现了Something went wrong",
      "body": "<img width=\"359\" alt=\"image\" src=\"https://user-images.githubusercontent.com/36721883/228521504-12c97578-4ac7-497a-862c-c3bd88dddeba.png\">\r\n",
      "state": "closed",
      "author": "HariLogicSeldon",
      "author_type": "User",
      "created_at": "2023-03-29T11:27:32Z",
      "updated_at": "2023-03-29T11:40:32Z",
      "closed_at": "2023-03-29T11:40:14Z",
      "labels": [
        "duplicate",
        "👿 bad issue!"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/457/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/457",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/457",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:42.025069",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "我从来没有这么无语过。。。\r\n\r\n我ISSUE template和 [常见问题](https://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98) 都白写了是吧。非要提交一个空白的ISSUE是吧\r\n<img width=\"1146\" alt=\"image\" src=\"https://user-images.githubusercontent.com/23137268/228524158-16a564d0-9365-4110-91b7-65a441e79232.png\">\r\n",
          "created_at": "2023-03-29T11:40:13Z"
        }
      ]
    },
    {
      "issue_number": 449,
      "title": "[Bug]: API余额无法显示",
      "body": "### 这个bug是否已存在现有issue了？\r\n\r\n- [X] 我确认没有已有issue。\r\n\r\n### 错误表现\r\n\r\n提交问题\r\n![Monosnap 胖猫🐱🐱🐱GPT 2023-03-29 01-22-01](https://user-images.githubusercontent.com/8936233/228472913-87fceef8-ea04-4ce5-8054-86201f1dd349.jpg)\r\n\r\nAPI使用情况（已用/余额）　0$ / 0$\r\n\r\n### 复现操作\r\n\r\n部署后无法显示余额\r\n\r\n### 错误日志\r\n\r\n```shell\r\nNo errors reported\r\n```\r\n\r\n\r\n### 运行环境\r\n\r\n```markdown\r\n- OS: Mac 13.2.1 (22D68) / Docker on Railway\r\n- Browser: Chrome\r\n- Gradio version: \r\n- Python version: 3.9\r\n```\r\n\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "closed",
      "author": "xingfanxia",
      "author_type": "User",
      "created_at": "2023-03-29T08:24:11Z",
      "updated_at": "2023-03-29T10:38:29Z",
      "closed_at": "2023-03-29T10:38:29Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 13,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/449/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/449",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/449",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:42.224223",
      "comments": [
        {
          "author": "Gary2018X",
          "body": "> \r\n\r\n可以看一下那个余额请求的输出",
          "created_at": "2023-03-29T09:19:39Z"
        },
        {
          "author": "xingfanxia",
          "body": "@Gary2018X 没有error, 但resp是空的\r\n```\r\n2023-03-29 02:22:44,148 [INFO] [openai_func.py:37] {'object': 'credit_summary', 'total_granted': 0.0, 'total_used': 0.0, 'total_available': 0.0, 'grants': {'object': 'list', 'data': []}}\r\n```",
          "created_at": "2023-03-29T09:23:12Z"
        },
        {
          "author": "xingfanxia",
          "body": "不过我可能不太理解这个usage的含义\r\n我是在用信用卡支付不是免费额度",
          "created_at": "2023-03-29T09:23:51Z"
        },
        {
          "author": "xingfanxia",
          "body": "看了下code这好像是免费额度的计算",
          "created_at": "2023-03-29T09:25:01Z"
        },
        {
          "author": "xingfanxia",
          "body": "More interested in Usage panel 里的 `Usage this month` 这个",
          "created_at": "2023-03-29T09:27:08Z"
        }
      ]
    },
    {
      "issue_number": 345,
      "title": "[本地部署] 出现ProxyError错误",
      "body": "### 错误描述\r\n运行报错\r\n\r\n### 复现操作\r\n1、git fetch 最新的代码后\r\n2、运行出现如下错误\r\n\r\n### 错误截图\r\n![image](https://user-images.githubusercontent.com/55825205/227414500-b1ab018e-42be-499d-8d3b-55de56a80276.png)\r\n\r\n\r\n### 终端（控制台）中的错误报告\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\86158\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\requests\\adapters.py\", line 489, in send\r\n    resp = conn.urlopen(\r\n  File \"C:\\Users\\86158\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\urllib3\\connectionpool.py\", line 787, in urlopen\r\n    retries = retries.increment(\r\n  File \"C:\\Users\\86158\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\urllib3\\util\\retry.py\", line 592, in increment\r\n    raise MaxRetryError(_pool, url, error or ResponseError(cause))\r\nurllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='ipapi.co', port=443): Max retries exceeded with url: /json/ (Caused by ProxyError('Cannot connect to proxy.', TimeoutError('_ssl.c:980: The handshake operation timed out')))\r\n\r\n    response = requests.get('https://ipapi.co/json/', timeout=5)\r\n  File \"C:\\Users\\86158\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\requests\\api.py\", line 73, in get\r\n    return request(\"get\", url, params=params, **kwargs)\r\n  File \"C:\\Users\\86158\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\requests\\api.py\", line 59, in request\r\n    return session.request(method=method, url=url, **kwargs)\r\n  File \"C:\\Users\\86158\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\requests\\sessions.py\", line 587, in request\r\n    resp = self.send(prep, **send_kwargs)\r\n  File \"C:\\Users\\86158\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\requests\\sessions.py\", line 701, in send\r\n    r = adapter.send(request, **kwargs)\r\n  File \"C:\\Users\\86158\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\requests\\adapters.py\", line 559, in send\r\n    raise ProxyError(e, request=request)\r\nrequests.exceptions.ProxyError: HTTPSConnectionPool(host='ipapi.co', port=443): Max retries exceeded with url: /json/ (Caused by ProxyError('Cannot connect to proxy.', TimeoutError('_ssl.c:980: The handshake operation timed out')))\r\n\r\n### 运行环境\r\n#### 桌面系统\r\n - OS: Windows11 \r\n - Browser: Chrome\r\n\r\n\r\n",
      "state": "closed",
      "author": "Sk1pper953",
      "author_type": "User",
      "created_at": "2023-03-24T03:12:49Z",
      "updated_at": "2023-03-29T07:08:51Z",
      "closed_at": "2023-03-24T06:07:24Z",
      "labels": [
        "question",
        "👽Proxy"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/345/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/345",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/345",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:42.481119",
      "comments": [
        {
          "author": "zodrie40879",
          "body": "我也遇到了",
          "created_at": "2023-03-29T03:10:52Z"
        },
        {
          "author": "zodrie40879",
          "body": "这个原因是在腾讯云上，再运行了vpn，再运行requests.get('https://ipapi.co/json/', timeout=5)这段代码报的错，但是浏览器是可以访问这个网址的，具体原因未知！",
          "created_at": "2023-03-29T07:08:50Z"
        }
      ]
    },
    {
      "issue_number": 433,
      "title": "[远程部署]:  主页theme.css 报404",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n服务器搭建的，用nginx反代到本地7890端口，然后有个theme.css的文件报404了，我看代码目录和assets目录没这个文件，是在Python某个包里面吗？\n\n### 复现操作\n\n直接部署就报该css文件404了\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n```markdown\n- OS: centos7\r\n- Docker version: \r\n- Gradio version: \r\n- Python version: 3.8\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "Qwenjin",
      "author_type": "User",
      "created_at": "2023-03-28T12:07:09Z",
      "updated_at": "2023-03-29T05:12:55Z",
      "closed_at": "2023-03-29T05:12:55Z",
      "labels": [
        "question",
        "server deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/433/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/433",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/433",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:42.723146",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "请附上更详细的错误报告，以及gradio版本。我建议你可以升级到python 3.9+，gradio 3.23.0试试还存不存在问题",
          "created_at": "2023-03-28T12:20:58Z"
        },
        {
          "author": "Qwenjin",
          "body": "> 请附上更详细的错误报告，以及gradio版本。我建议你可以升级到python 3.9+，gradio 3.23.0试试还存不存在问题\r\n\r\n已修复，nginx配置所有静态文件也走proxy_pass",
          "created_at": "2023-03-29T05:12:55Z"
        }
      ]
    },
    {
      "issue_number": 184,
      "title": "[功能请求] 希望能增加用户一键删除除开头的sys命名外前五条聊天记录，甚至进一步可以删除任意一条之前的聊天记录",
      "body": "### 该功能请求是否与某个问题相关？\r\n> 连续对话长度不够，总结对话比较鸡肋（可以试一下保留最近七对对话）\r\n\r\n### 可能的解决办法\r\n> 暂时先添加用户一键删除除开头的sys命名外前五对聊天记录的功能，之后可以考虑增加删除历史记录甚至修改历史记录的的图形化界面，在没有更好的智能解决token上限方法前让用户可以选择手动操作控制上报的信息。\r\n\r\n### 其他\r\n> 补充说明\r\n",
      "state": "closed",
      "author": "libiaoliang",
      "author_type": "User",
      "created_at": "2023-03-17T01:29:31Z",
      "updated_at": "2023-03-29T03:36:07Z",
      "closed_at": "2023-03-29T03:36:06Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/184/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/184",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/184",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:43.000999",
      "comments": [
        {
          "author": "tuteng0915",
          "body": "> 连续对话长度不够，总结对话比较鸡肋（可以试一下保留最近七对对话）\r\nrelated to #157 ",
          "created_at": "2023-03-17T05:41:58Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "现在加了一个这样的按钮",
          "created_at": "2023-03-29T03:36:06Z"
        }
      ]
    },
    {
      "issue_number": 435,
      "title": "[Bug]: 通过局域网ip访问时无法使用",
      "body": "### 这个bug是否已存在现有issue了？\r\n\r\n- [X] 我确认没有已有issue。\r\n\r\n### 错误表现\r\n\r\n\r\n通过局域网ip访问时（server_name=\"0.0.0.0\"），打开页面正常，但交互操作是页面出现错误：\r\nSomething went wrong\r\nConnection errored out.\r\n\r\n初步分析错误原因在于 WebSocket无法通过局域网ip访问，只能通过127.0.0.1访问导致\r\nindex.37b24c07.js:4 WebSocket connection to 'ws://192.168.31.100:7860/queue/join' failed: \r\n\r\n\r\n\r\n### 复现操作\r\n\r\n通过http://localhost:7860/ 或 http://127.0.0.1:7860/ 访问正常\r\n通过http://192.168.31.100:7860/访问无法交互使用\r\n\r\n### 错误日志\r\n\r\n_No response_\r\n\r\n### 运行环境\r\n\r\n```markdown\r\n- OS: windows2012、windows11\r\n- Browser: chrome\r\n- Gradio version: 3.23\r\n- Python version:3.8和3.9\r\n```\r\n\r\n\r\n### 补充说明\r\n\r\n_No response_",
      "state": "closed",
      "author": "flamingo333",
      "author_type": "User",
      "created_at": "2023-03-28T12:59:09Z",
      "updated_at": "2023-03-28T13:35:07Z",
      "closed_at": "2023-03-28T13:35:07Z",
      "labels": [
        "duplicate"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/435/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/435",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/435",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:43.197945",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "[常见问题](https://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/常见问题#something-went-wrong-connection-errored-out) 里哪里没有写清楚？？？告诉我，我去改！！！\r\n- #89 ",
          "created_at": "2023-03-28T13:04:25Z"
        },
        {
          "author": "flamingo333",
          "body": "常见问题：Something went wrong Connection errored out  这部分之前看过，确实没有get到点，因为我的代理和localhost访问都是正常的，没试过去掉账号密码访问，因为一开始就配置了账号密码。\r\n\r\n解决方法是：\r\n1、去掉账号密码\r\n或\r\n2、将 <你的python路径>/dist-packages/gradio/routes.py 中的 websocket.cookies.get(\"access-token\") 改为 websocket.cookies.get(\"access-token-unsecure\")\r\n\r\n感谢您的提示！\r\n",
          "created_at": "2023-03-28T13:34:57Z"
        }
      ]
    },
    {
      "issue_number": 400,
      "title": "[功能请求]: 连续对话中，给OpenAI提交的数据中，自动忽略最早的若干条问答，以提高连续对话的体验",
      "body": "### 相关问题\n\n连续对话场景，当token达到接近4096后就无法继续对话了，只能重新发起对话。\n\n### 可能的解决办法\n\n在token接近4096时（含system prompt），提交给openai的内容自动忽略最早的若干条问答（比如减少1000-2000token？），也可以在页面上增加一个选择框，让用户决定忽略最早的多少条历史对话。\n\n### 帮助开发\n\n- [ ] 我愿意协助开发！\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "ramblezhang",
      "author_type": "User",
      "created_at": "2023-03-26T04:21:59Z",
      "updated_at": "2023-03-28T13:06:43Z",
      "closed_at": "2023-03-28T13:06:43Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/400/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/400",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/400",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:43.386106",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "emm按理说会有自动总结对话的功能，看上去有点问题……",
          "created_at": "2023-03-26T04:23:01Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "现在应该没问题了",
          "created_at": "2023-03-28T13:06:43Z"
        }
      ]
    },
    {
      "issue_number": 415,
      "title": "[Bug]: 手机端UI对话内容可能超出聊天框",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue。\n\n### 错误表现\n\n我觉得是因为移动端UI适配没写好，在手机上聊天框会出现如图的问题\r\n![IMG_20230327_145651](https://user-images.githubusercontent.com/58991169/227865562-17ba490c-dc1f-4419-8ba9-5bd13bb15d5b.jpg)\r\n![Screenshot_2023-03-27-14-58-52-279_com microsoft emmx](https://user-images.githubusercontent.com/58991169/227865861-66560d14-d468-44c6-ada4-6d1717ee5ff7.jpg)\r\n![Screenshot_2023-03-27-14-58-54-447_com microsoft emmx](https://user-images.githubusercontent.com/58991169/227866015-5e5a6538-e18b-46eb-bd39-c7a75bbc66c9.jpg)\r\n![Screenshot_2023-03-27-14-58-56-377_com microsoft emmx](https://user-images.githubusercontent.com/58991169/227866131-46969b51-bcff-48cd-8213-77633840d98e.jpg)\r\n\n\n### 复现操作\n\n只要在手机上使用chatgpt，聊天长度超过了最外层的聊天框就会出现这种问题\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n```markdown\n- OS: MIUI\r\n- Browser: Edge\r\n- Gradio version: \r\n- Python version:\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "miaowmint",
      "author_type": "User",
      "created_at": "2023-03-27T07:19:29Z",
      "updated_at": "2023-03-28T08:21:08Z",
      "closed_at": "2023-03-28T08:21:08Z",
      "labels": [
        "bug",
        "🖥️ UI&UX"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/415/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/415",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/415",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:43.542031",
      "comments": [
        {
          "author": "1205129045x",
          "body": "手机端是怎么用的？是在手机端装`python`吗",
          "created_at": "2023-03-27T14:23:18Z"
        },
        {
          "author": "miaowmint",
          "body": "> 手机端是怎么用的？是在手机端装`python`吗\r\n\r\n为啥非要本地部署。。我是在云服务器用Docker搭建的，直接用手机访问就好了\r\n",
          "created_at": "2023-03-28T02:50:16Z"
        }
      ]
    },
    {
      "issue_number": 425,
      "title": "[Bug]: A single term is larger than the allowed chunk size",
      "body": "### 这个bug是否已存在现有issue了？\n\n- [X] 我确认没有已有issue。\n\n### 错误表现\n\n上传docx文件时也会出现\r\n'A single term is larger than the allowed chunk size.\r\nTerm size: 676\r\nChunk size: 600Effective chunk size: 600'\r\n定位可能是LLM问题，\r\n在这一步时候报错被Exception捕获异常\r\nlogging.debug(\"构建索引中……\")\r\n            index = GPTSimpleVectorIndex(\r\n                documents, llm_predictor=llm_predictor, prompt_helper=prompt_helper\r\n            )\r\n\r\n可能也需要应用add_space函数为其加上空格。\r\n\n\n### 复现操作\n\n正常操作上传了.docx的文件\n\n### 错误日志\n\n```shell\n'A single term is larger than the allowed chunk size.\r\nTerm size: 676\r\nChunk size: 600Effective chunk size: 600'\n```\n\n\n### 运行环境\n\n```markdown\n- OS: macos\r\n- Browser: chrome\r\n- Gradio version: 3.23.0\r\n- Python version: 3.9\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "xhongc",
      "author_type": "User",
      "created_at": "2023-03-28T02:57:11Z",
      "updated_at": "2023-03-28T04:21:57Z",
      "closed_at": "2023-03-28T04:21:57Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/425/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/425",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/425",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:43.713686",
      "comments": []
    },
    {
      "issue_number": 424,
      "title": "[本地部署]: ",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n![image](https://user-images.githubusercontent.com/28422636/228114416-9326b06c-3882-48bc-9e98-6acba5f7af2a.png)\r\n\n\n### 复现操作\n\n最近本地化部署出现访问api.openai.com 443超时的问题，这种添加代理的方式已经不行了吗？我尝试过添加openSSL包和urllib3降级，都没解决这个问题，太奇怪了，我自己使用脚本请求又是正常的。\n\n### 错误日志\n\n```shell\nTraceback (most recent call last):\r\n  File \"D:\\PycharmProjects\\ChuanhuChatGPT\\ChuanhuChatbot.py\", line 105, in <module>\r\n    usageTxt = gr.Markdown(get_usage(my_api_key), elem_id=\"usage_display\")\r\n  File \"D:\\PycharmProjects\\ChuanhuChatGPT\\modules\\openai_func.py\", line 53, in get_usage\r\n    response=get_usage_response(openai_api_key=openai_api_key)\r\n  File \"D:\\PycharmProjects\\ChuanhuChatGPT\\modules\\openai_func.py\", line 44, in get_usage_response\r\n    response = requests.get(\r\n  File \"D:\\Anaconda3\\envs\\ChuanhuChatGPT\\lib\\site-packages\\requests\\api.py\", line 73, in get\r\n    return request(\"get\", url, params=params, **kwargs)\r\n  File \"D:\\Anaconda3\\envs\\ChuanhuChatGPT\\lib\\site-packages\\requests\\api.py\", line 59, in request\r\n    return session.request(method=method, url=url, **kwargs)\r\n  File \"D:\\Anaconda3\\envs\\ChuanhuChatGPT\\lib\\site-packages\\requests\\sessions.py\", line 587, in request\r\n    resp = self.send(prep, **send_kwargs)\r\n  File \"D:\\Anaconda3\\envs\\ChuanhuChatGPT\\lib\\site-packages\\requests\\sessions.py\", line 701, in send\r\n    r = adapter.send(request, **kwargs)\r\n  File \"D:\\Anaconda3\\envs\\ChuanhuChatGPT\\lib\\site-packages\\requests\\adapters.py\", line 565, in send\r\n    raise ConnectionError(e, request=request)\r\nrequests.exceptions.ConnectionError: HTTPSConnectionPool(host='api.openai.com', port=443): Max retries exceeded with url: /dashboard/billing/credit_grants (Caused by NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x000001FEE4972CD0>: Failed to establish a new connection: [WinError 10060] 由于连接方在一段时间后没有正确答复或连接的主机没有反应，连接尝试失败。'))\n```\n\n\n### 运行环境\n\n```markdown\n- OS: win10\r\n- Browser: Chrome\r\n- Gradio version: 3.22.1\r\n- Python version: 3.8\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "wxtt522",
      "author_type": "User",
      "created_at": "2023-03-28T02:51:37Z",
      "updated_at": "2023-03-28T03:17:44Z",
      "closed_at": "2023-03-28T03:15:16Z",
      "labels": [
        "question",
        "localhost deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/424/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/424",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/424",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:43.713711",
      "comments": [
        {
          "author": "wxtt522",
          "body": "我配置系统代理是正常的，但在代码里出现这个异常，我怀疑是哪个最新的包也有https限制",
          "created_at": "2023-03-28T03:01:47Z"
        },
        {
          "author": "wxtt522",
          "body": "好吧，我找到问题所在了,func文件里单独指定了requests的proxy ...",
          "created_at": "2023-03-28T03:15:13Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "你那么设置按理应该也不会出问题🤔️request是获取系统代理的",
          "created_at": "2023-03-28T03:17:44Z"
        }
      ]
    },
    {
      "issue_number": 349,
      "title": "[功能请求] 添加多个本地验证用户",
      "body": "### 该功能请求是否与某个问题相关？\r\n> 是否可以添加多个本地验证的用户，并在history 目录创建以用户命名的子目录，保存各个用户的会话记录。每个用户只可以访问自己的会话记录。\r\n\r\n主要是解决局域网内其他用户的上网代理问题，ChatGPT账号问题。\r\n\r\n### 可能的解决办法\r\n> 如果可以，给出一个解决思路~\r\n\r\n### 其他\r\n> 补充说明\r\n",
      "state": "closed",
      "author": "wuchanghui5220",
      "author_type": "User",
      "created_at": "2023-03-24T05:18:20Z",
      "updated_at": "2023-03-28T01:44:53Z",
      "closed_at": "2023-03-24T06:25:36Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/349/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/349",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/349",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:43.910658",
      "comments": [
        {
          "author": "fredyj",
          "body": "貌似要开发用户系统，权限体系\r\n集成ldap\r\n并且用户数据存储，集成到sqlite里面",
          "created_at": "2023-03-24T05:51:04Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "暂无此方面的计划。",
          "created_at": "2023-03-24T06:25:23Z"
        },
        {
          "author": "sgpublic",
          "body": "同请求此功能，希望开发大大后续考虑一下 ❤️ ",
          "created_at": "2023-03-28T01:44:53Z"
        }
      ]
    },
    {
      "issue_number": 340,
      "title": "[BUG] 代码块中的__XXX__被错误地渲染为加粗",
      "body": "问题描述，Python代码输出__XXX__双下划线起止的代码(正文或代码块中)，都无法正确被解析为 字面量。而是被markdown渲染为加粗。",
      "state": "closed",
      "author": "wjcper2008",
      "author_type": "User",
      "created_at": "2023-03-23T15:13:46Z",
      "updated_at": "2023-03-27T12:04:37Z",
      "closed_at": "2023-03-27T12:04:36Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/340/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 1,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/340",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/340",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:44.106969",
      "comments": [
        {
          "author": "slideslide",
          "body": "> 问题描述，Python代码输出__XXX__双下划线起止的代码(正文或代码块中)，都无法正确被解析为 字面量。而是被markdown渲染为加粗。\r\n\r\n不仅如此，还有很多其他markdown和代码有冲突的部分",
          "created_at": "2023-03-23T18:51:19Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "最新版代码中应该已经解决了这个问题",
          "created_at": "2023-03-24T10:44:24Z"
        },
        {
          "author": "Keldos-Li",
          "body": "（应该解决了，，虽然我已经懒得翻是哪个commit解决的了",
          "created_at": "2023-03-27T12:04:36Z"
        }
      ]
    },
    {
      "issue_number": 414,
      "title": "[其他]: Hugging Face代码貌似不是最新的",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 错误描述\n\n[其他]: Hugging Face代码貌似不是最新的\n\n### 复现操作\n\nHugging Face代码貌似不是最新的。好多功能没有加上去\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n```markdown\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version: \r\n(或您的其他运行环境信息)\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "debugAllTheTime",
      "author_type": "User",
      "created_at": "2023-03-27T06:45:50Z",
      "updated_at": "2023-03-27T11:20:44Z",
      "closed_at": "2023-03-27T11:20:43Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/414/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/414",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/414",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:44.305822",
      "comments": [
        {
          "author": "MZhao-ouo",
          "body": "已经更新啦",
          "created_at": "2023-03-27T11:20:43Z"
        }
      ]
    },
    {
      "issue_number": 412,
      "title": "[Docker]: docker无法启动",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n![image](https://user-images.githubusercontent.com/17918635/227844048-0ac5818f-e1d7-4dc3-9efc-7c1afa6c9a40.png)\r\n\n\n### 复现操作\n\n重置容器后仍有此错误\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n```markdown\n- OS: \r\n- Browser: \r\n- Gradio version: \r\n- Python version:\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "liangliyu",
      "author_type": "User",
      "created_at": "2023-03-27T04:53:26Z",
      "updated_at": "2023-03-27T10:49:14Z",
      "closed_at": "2023-03-27T10:49:14Z",
      "labels": [
        "question",
        "docker deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/412/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/412",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/412",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:44.481243",
      "comments": [
        {
          "author": "CNAHYZ",
          "body": "这个警告不影响的，我的也有\r\n",
          "created_at": "2023-03-27T07:18:11Z"
        }
      ]
    },
    {
      "issue_number": 230,
      "title": "[功能请求] GPT Index使用教程和增加索引文件demo",
      "body": "### 该功能请求是否与某个问题相关？\r\n> 描述你遇到的问题~\r\n\r\nGPT Index使用教程和增加索引文件demo\r\n\r\n### 可能的解决办法\r\n> 如果可以，给出一个解决思路~\r\n\r\n- 增加【索引文件上传】的demo索引\r\n- 在README添加简要的GPT Index使用方法\r\n\r\n",
      "state": "closed",
      "author": "WangRongsheng",
      "author_type": "User",
      "created_at": "2023-03-20T13:44:36Z",
      "updated_at": "2023-03-27T09:54:02Z",
      "closed_at": "2023-03-22T16:10:54Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/230/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/230",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/230",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:44.660361",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "有道理，我觉得还需要在README中提示勾选“在线搜索”或使用本地索引会**大大耗费tokens**🥲（zhende",
          "created_at": "2023-03-20T13:51:54Z"
        },
        {
          "author": "WangRongsheng",
          "body": "> 有道理，我觉得还需要在README中提示勾选”在线搜索“或使用本地索引会**大大耗费tokens**🥲（zhende\r\n\r\ngood job",
          "created_at": "2023-03-20T14:00:16Z"
        },
        {
          "author": "Keldos-Li",
          "body": "*该回复与原ISSUE无关。（但我就这么做了，对不起）*\r\n\r\n@WangRongsheng 才发现您参与chatpaper诶，大佬，怪不得提了这个ISSUE。话说为什么你们没人问代理配置的问题吗，为什么我们这么多人问orz QAQ SOS",
          "created_at": "2023-03-27T09:54:01Z"
        }
      ]
    },
    {
      "issue_number": 394,
      "title": "[本地部署]: 当给出复杂数学公式时，会出现奇怪的东西",
      "body": "### 是否已存在现有反馈与解答？\n\n- [X] 我确认没有已有issue或discussion，且已阅读**常见问题**。\n\n### 是否是一个代理配置相关的疑问？\n\n- [X] 我确认这不是一个代理配置相关的疑问。\n\n### 错误描述\n\n<img width=\"1280\" alt=\"image\" src=\"https://user-images.githubusercontent.com/100983761/227732913-205a9d27-0c58-4b77-b5af-709a041e74bf.png\">\r\n<img width=\"516\" alt=\"image\" src=\"https://user-images.githubusercontent.com/100983761/227733378-cce57d07-a2da-4095-88a8-3d5d6030c2e1.png\">\r\n\n\n### 复现操作\n\n就是让他给我几个复杂的数学公式，验证输出的文字是否正确，但显然还是有问题的，但是用其他的却可以正常显示希望可以显示的完美些\n\n### 错误日志\n\n_No response_\n\n### 运行环境\n\n```markdown\n- OS: Win11\r\n- Browser: chrome\r\n- Gradio version: \r\n- Python version: 3.10\n```\n\n\n### 补充说明\n\n_No response_",
      "state": "closed",
      "author": "tumibloom",
      "author_type": "User",
      "created_at": "2023-03-25T17:50:47Z",
      "updated_at": "2023-03-27T07:39:13Z",
      "closed_at": "2023-03-27T07:39:13Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/394/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/394",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/394",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:44.840209",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "<img width=\"821\" alt=\"image\" src=\"https://user-images.githubusercontent.com/51039745/227735417-ede9316d-2019-4342-b290-70a2cb29c6af.png\">\r\n\r\n试着更新到最新版脚本",
          "created_at": "2023-03-25T18:37:14Z"
        },
        {
          "author": "tumibloom",
          "body": "> <img alt=\"image\" width=\"821\" src=\"https://user-images.githubusercontent.com/51039745/227735417-ede9316d-2019-4342-b290-70a2cb29c6af.png\">\r\n> \r\n> 试着更新到最新版脚本\r\n\r\n经过我测试，好像时浏览器的锅：\r\n**chrome：**\r\n<img width=\"819\" alt=\"image\" src=\"https://user-images.githubusercontent.com/100983761/227752231-e5e8cf3f-5b01",
          "created_at": "2023-03-26T02:41:18Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "你给的这几个截图看着都挺正常的。Chrome那个可能GPT没有以LaTex格式给出公式。",
          "created_at": "2023-03-26T04:16:50Z"
        },
        {
          "author": "tumibloom",
          "body": "> 你给的这几个截图看着都挺正常的。Chrome那个可能GPT没有以LaTex格式给出公式。\n\n对，在输出的过程中提示latex 的格式错误，一个黄色提示还有一个红色提示但是太快了，没截上图",
          "created_at": "2023-03-26T04:31:57Z"
        },
        {
          "author": "Keldos-Li",
          "body": "> 对，在输出的过程中提示latex 的格式错误，一个黄色提示还有一个红色提示但是太快了，没截上图\n\n系正常现象。某些latex语法需要包涵起始记号和结束记号，当结束记号未被输出时提示语法错误问题不大。",
          "created_at": "2023-03-26T21:05:32Z"
        }
      ]
    },
    {
      "issue_number": 390,
      "title": "[Docker] 国内环境部署时无法稳定运行",
      "body": "### 错误描述\r\n国内服务器配合代理运行时，受限于代理本身无法保证100%的稳定性，会出现大量 Read timed out 报错，会直接导致程序崩溃\r\n\r\n### 复现操作\r\n国内服务器或类似弱网环境部署可以稳定复现\r\n\r\n### 错误截图\r\n![image](https://user-images.githubusercontent.com/22370654/227721441-f5c69876-10d3-4b82-8ec3-4d2d50af2ee7.png)\r\n\r\n\r\n### 终端（控制台）中的错误报告\r\n如果可以，请复制终端中的主要错误报告。\r\n\r\n```console\r\n2023-03-25 13:51:41,828 [INFO] [utils.py:296] 获取模板文件名列表\r\n2023-03-25 13:51:41,829 [INFO] [utils.py:248] 获取文件名列表，目录为templates，文件类型为['.csv', 'json']，是否为纯文本列表True\r\n2023-03-25 13:51:41,830 [INFO] [utils.py:296] 获取模板文件名列表\r\n2023-03-25 13:51:41,830 [INFO] [utils.py:248] 获取文件名列表，目录为templates，文件类型为['.csv', 'json']，是否为纯文本列表True\r\n2023-03-25 13:51:41,832 [INFO] [utils.py:296] 获取模板文件名列表\r\n2023-03-25 13:51:41,832 [INFO] [utils.py:248] 获取文件名列表，目录为templates，文件类型为['.csv', 'json']，是否为纯文本列表True\r\n2023-03-25 13:51:41,833 [INFO] [utils.py:270] 加载模板文件1 中文Prompts.json，模式为1（0为返回字典和下拉菜单，1为返回下拉菜单，2为返回字典）\r\n2023-03-25 13:51:41,833 [INFO] [utils.py:272] Loading template...\r\n2023-03-25 13:51:41,880 [INFO] [utils.py:296] 获取模板文件名列表\r\n2023-03-25 13:51:41,881 [INFO] [utils.py:248] 获取文件名列表，目录为templates，文件类型为['.csv', 'json']，是否为纯文本列表True\r\n2023-03-25 13:51:41,881 [INFO] [utils.py:270] 加载模板文件1 中文Prompts.json，模式为1（0为返回字典和下拉菜单，1为返回下拉菜单，2为返回字典）\r\n2023-03-25 13:51:41,881 [INFO] [utils.py:272] Loading template...\r\n2023-03-25 13:51:41,910 [INFO] [utils.py:265] 获取历史记录文件名列表\r\n2023-03-25 13:51:41,911 [INFO] [utils.py:248] 获取文件名列表，目录为history，文件类型为['.json']，是否为纯文本列表True\r\n2023-03-25 13:51:41,911 [INFO] [utils.py:265] 获取历史记录文件名列表\r\n2023-03-25 13:51:41,911 [INFO] [utils.py:248] 获取文件名列表，目录为history，文件类型为['.json']，是否为纯文本列表True\r\n2023-03-25 13:51:41,962 [INFO] [ChuanhuChatbot.py:387] \r\n川虎的温馨提示：访问 http://localhost:7860 查看界面\r\nReloading javascript...\r\nTraceback (most recent call last):\r\n  File \"/root/.local/lib/python3.9/site-packages/urllib3/connectionpool.py\", line 449, in _make_request\r\n    six.raise_from(e, None)\r\n  File \"<string>\", line 3, in raise_from\r\n  File \"/root/.local/lib/python3.9/site-packages/urllib3/connectionpool.py\", line 444, in _make_request\r\n    httplib_response = conn.getresponse()\r\n  File \"/usr/local/lib/python3.9/http/client.py\", line 1377, in getresponse\r\n    response.begin()\r\n  File \"/usr/local/lib/python3.9/http/client.py\", line 320, in begin\r\n    version, status, reason = self._read_status()\r\n  File \"/usr/local/lib/python3.9/http/client.py\", line 281, in _read_status\r\n    line = str(self.fp.readline(_MAXLINE + 1), \"iso-8859-1\")\r\n  File \"/usr/local/lib/python3.9/socket.py\", line 704, in readinto\r\n    return self._sock.recv_into(b)\r\nsocket.timeout: timed out\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/root/.local/lib/python3.9/site-packages/requests/adapters.py\", line 489, in send\r\n    resp = conn.urlopen(\r\n  File \"/root/.local/lib/python3.9/site-packages/urllib3/connectionpool.py\", line 787, in urlopen\r\n    retries = retries.increment(\r\n  File \"/root/.local/lib/python3.9/site-packages/urllib3/util/retry.py\", line 550, in increment\r\n    raise six.reraise(type(error), error, _stacktrace)\r\n  File \"/root/.local/lib/python3.9/site-packages/urllib3/packages/six.py\", line 770, in reraise\r\n    raise value\r\n  File \"/root/.local/lib/python3.9/site-packages/urllib3/connectionpool.py\", line 703, in urlopen\r\n    httplib_response = self._make_request(\r\n  File \"/root/.local/lib/python3.9/site-packages/urllib3/connectionpool.py\", line 451, in _make_request\r\n    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)\r\n  File \"/root/.local/lib/python3.9/site-packages/urllib3/connectionpool.py\", line 340, in _raise_timeout\r\n    raise ReadTimeoutError(\r\nurllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='172.21.0.1', port=10809): Read timed out. (read timeout=3)\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/app/ChuanhuChatbot.py\", line 400, in <module>\r\n    demo.queue(concurrency_count=CONCURRENT_COUNT).launch(\r\n  File \"/root/.local/lib/python3.9/site-packages/gradio/blocks.py\", line 1513, in launch\r\n    if _frontend and (not networking.url_ok(self.local_url)) and (not self.share):\r\n  File \"/root/.local/lib/python3.9/site-packages/gradio/networking.py\", line 181, in url_ok\r\n    r = requests.head(url, timeout=3, verify=False)\r\n  File \"/root/.local/lib/python3.9/site-packages/requests/api.py\", line 100, in head\r\n    return request(\"head\", url, **kwargs)\r\n  File \"/root/.local/lib/python3.9/site-packages/requests/api.py\", line 59, in request\r\n    return session.request(method=method, url=url, **kwargs)\r\n  File \"/root/.local/lib/python3.9/site-packages/requests/sessions.py\", line 587, in request\r\n    resp = self.send(prep, **send_kwargs)\r\n  File \"/root/.local/lib/python3.9/site-packages/requests/sessions.py\", line 701, in send\r\n    r = adapter.send(request, **kwargs)\r\n  File \"/root/.local/lib/python3.9/site-packages/requests/adapters.py\", line 578, in send\r\n    raise ReadTimeout(e, request=request)\r\nrequests.exceptions.ReadTimeout: HTTPConnectionPool(host='172.21.0.1', port=10809): Read timed out. (read timeout=3)\r\n```\r\n\r\n### 运行环境\r\n本报错只与网络环境有关，与运行环境无关\r\n\r\n**请填写以下列表：**\r\n\r\n- OS: [e.g. Linux Ubuntu]\r\n- Docker version:\r\n- Gradio version:\r\n- Python version:\r\n\r\n### 其他\r\n希望增加相应容错机制\r\n",
      "state": "closed",
      "author": "TheresaQWQ",
      "author_type": "User",
      "created_at": "2023-03-25T13:55:26Z",
      "updated_at": "2023-03-27T05:12:45Z",
      "closed_at": "2023-03-27T05:12:45Z",
      "labels": [
        "question",
        "docker deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/390/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/390",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/390",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:45.020381",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "从错误信息看不出错误是哪里导致的。\r\n```\r\ndemo.queue(concurrency_count=CONCURRENT_COUNT).launch(\r\n```\r\n这一句出错，难道是Gradio的问题？好像不在本项目的能力范围内。",
          "created_at": "2023-03-25T13:59:10Z"
        },
        {
          "author": "TheresaQWQ",
          "body": "抱歉我的问题，Gradio启动之后貌似会访问自己检查一遍有没有开起来，这个检查产生的请求也走了代理，访问失败之后就崩了，关掉之后就正常了",
          "created_at": "2023-03-27T05:12:45Z"
        }
      ]
    },
    {
      "issue_number": 381,
      "title": "[本地部署] 运行python脚本没有反应",
      "body": "\r\n### 错误描述\r\n我按提示进行并无报错，但是打开localhost无法打开\r\n\r\n### 复现操作\r\n\r\n### 错误截图\r\n<img width=\"987\" alt=\"image\" src=\"https://user-images.githubusercontent.com/100983761/227704170-f099b6f6-7470-4dc0-bf52-a214a99da12a.png\">\r\n\r\n\r\n\r\n - OS: Windows11 22H2\r\n - Browser:Chrome\r\n\r\n\r\n\r\n",
      "state": "closed",
      "author": "tumibloom",
      "author_type": "User",
      "created_at": "2023-03-25T07:42:14Z",
      "updated_at": "2023-03-26T00:58:45Z",
      "closed_at": "2023-03-26T00:58:45Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 8,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/381/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/381",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/381",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:45.179694",
      "comments": [
        {
          "author": "AneonCode",
          "body": "> \r\n\r\n你的这个看起来并没有成功运行起来，按照README再配置一下试试，可能哪个地方出错了。\r\n另外，如果成功运行起来了的话，会一条访问`http://127.0.0.1:7860`的提示",
          "created_at": "2023-03-25T08:09:22Z"
        },
        {
          "author": "tumibloom",
          "body": "> > \r\n> \r\n> 你的这个看起来并没有成功运行起来，按照 README 再配置一下试试，可能哪个地方出错了。 另外，如果成功运行起来了的话，会一条访问`http://127.0.0.1:7860`的提示\r\n\r\n###这是我的重新配置\r\n![image](https://user-images.githubusercontent.com/100983761/227707927-15144ca5-9fcd-40e2-963a-c2d7bda83b4b.png)\r\n![image](https://user-images.githubusercontent.com/100983761/2277",
          "created_at": "2023-03-25T09:06:26Z"
        },
        {
          "author": "Keldos-Li",
          "body": "所以您终端的表现是，运行脚本\r\n```shell\r\npython3 ChuanhuChatbot.py\r\n```\r\n结果什么也没有发生吗？",
          "created_at": "2023-03-25T09:25:48Z"
        },
        {
          "author": "tumibloom",
          "body": "> 所以您终端的表现是，运行脚本\r\n> \r\n> ```shell\r\n> python3 ChuanhuChatbot.py\r\n> ```\r\n> \r\n> 结果什么也没有发生吗？\r\n\r\n对",
          "created_at": "2023-03-25T09:40:10Z"
        },
        {
          "author": "Keldos-Li",
          "body": "额，这也太怪了。。。。如果您已经确认脚本文件路径正确但是 PowerShell 没有响应，或许可以尝试以下几个方法：\r\n\r\n1. 确认您是否有打开多个 PowerShell 窗口，并确认您的脚本没有在其他窗口中运行。如果有，请关闭其他窗口并重新运行脚本。\r\n2. 尝试使用管理员权限打开 PowerShell 窗口。右键单击 PowerShell 快捷方式并选择“以管理员身份运行”，然后再次尝试运行脚本。\r\n3. 尝试重启 PowerShell 和计算机。这可以帮助清除任何可能导致 PowerShell 无响应的问题。",
          "created_at": "2023-03-25T09:51:26Z"
        }
      ]
    },
    {
      "issue_number": 286,
      "title": "[功能请求] docker部署的时候将代理地址和端口作为.env参数可以调整",
      "body": "[功能请求] docker部署的时候将代理地址和端口作为.env参数可以调整",
      "state": "closed",
      "author": "debugAllTheTime",
      "author_type": "User",
      "created_at": "2023-03-22T05:35:12Z",
      "updated_at": "2023-03-25T15:25:04Z",
      "closed_at": "2023-03-25T15:25:04Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/286/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/286",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/286",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:45.384760",
      "comments": [
        {
          "author": "herobrine19",
          "body": "强烈建议加一下这个功能，不然用户手动去高级设置里改很麻烦，而且如果忘了改，API很容易就被封了",
          "created_at": "2023-03-22T14:50:23Z"
        },
        {
          "author": "debugAllTheTime",
          "body": "奥本来就可以这样子设置。没事了",
          "created_at": "2023-03-25T15:25:04Z"
        }
      ]
    },
    {
      "issue_number": 339,
      "title": "[BUG] 使用 Docker Tag 23.03.23 带“认证参数”创建并启动容器，功能无法使用。",
      "body": "使用 Docker Tag 23.03.23，带“认证参数”创建并启动容器，能打开登录页面，能正常输入创建容器时设定的用户名及密码登录，登录后页面正常展示，但只要向ChatGPT提问，或者点击“新的话题”按钮，就会报错。\r\n报错提示：“Something went wrong Connection errored out.”\r\n\r\n如果创建容器时，不带“认证参数”，则功能正常。",
      "state": "closed",
      "author": "jackrao168",
      "author_type": "User",
      "created_at": "2023-03-23T15:09:26Z",
      "updated_at": "2023-03-25T13:25:22Z",
      "closed_at": "2023-03-25T02:01:58Z",
      "labels": [
        "duplicate",
        "docker deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/339/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/339",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/339",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:45.590093",
      "comments": [
        {
          "author": "Mcdull0921",
          "body": "同样的问题，即使不带认证参数，依然报这个错误。后台日志无任何异常显示，容器直接退出。",
          "created_at": "2023-03-23T15:13:40Z"
        },
        {
          "author": "debugAllTheTime",
          "body": "同样的问题+1",
          "created_at": "2023-03-24T14:40:00Z"
        },
        {
          "author": "Keldos-Li",
          "body": "- #89",
          "created_at": "2023-03-25T01:55:59Z"
        },
        {
          "author": "jackrao168",
          "body": "根据 #89 提供的方法问题已经解决。 ",
          "created_at": "2023-03-25T13:25:22Z"
        }
      ]
    },
    {
      "issue_number": 387,
      "title": "本地部署可以运行成功，但是一直报错",
      "body": "本地运行，挂了梯子，随便修改什么都报图形的错误\r\n![image](https://user-images.githubusercontent.com/1791283/227717462-f4592a07-3ba5-480f-a784-7464938c246d.png)\r\n",
      "state": "closed",
      "author": "zf617525633",
      "author_type": "User",
      "created_at": "2023-03-25T12:32:03Z",
      "updated_at": "2023-03-25T12:51:03Z",
      "closed_at": "2023-03-25T12:33:52Z",
      "labels": [
        "duplicate",
        "👿 bad issue!"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/387/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/387",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/387",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:45.778072",
      "comments": [
        {
          "author": "zf617525633",
          "body": "请帮忙看看是什么问题？",
          "created_at": "2023-03-25T12:32:26Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "Issue模板内容里都这么写了😫\r\n<img width=\"915\" alt=\"image\" src=\"https://user-images.githubusercontent.com/51039745/227717531-a15cefbe-3003-4ab0-94a0-d39e5e56b888.png\">\r\n",
          "created_at": "2023-03-25T12:33:52Z"
        },
        {
          "author": "Keldos-Li",
          "body": "可能我在bug模板里没写本地部署模板的这几行，但是我都这么写了😫\r\n![image](https://user-images.githubusercontent.com/23137268/227718232-2d24b5ee-f16e-4498-98eb-7297717d8a38.png)\r\n",
          "created_at": "2023-03-25T12:51:03Z"
        }
      ]
    },
    {
      "issue_number": 386,
      "title": "[Docker]  获取IP地理位置失败，因为达到了检测IP的速率限制。",
      "body": "### 错误描述\r\n获取IP地理位置失败，因为达到了检测IP的速率限制。聊天功能可能仍然可用，但请注意，如果您的IP地址在不受支持的地区，您可能会遇到问题。\r\n\r\n### 复现操作\r\n使用docker部署后打开网站右上角就会一直显示这个，虽然没有什么影响，但是强迫症看着难受，想问一下为什么会这样。\r\n\r\n### 错误截图\r\n如果可以，请提供错误的截图，如部署的网页截图与控制台错误报告的截图。\r\n\r\n### 终端（控制台）中的错误报告\r\n\r\n```console\r\n{'error': True, 'reason': 'RateLimited', 'message': 'Visit https://ipapi.co/ratelimited/ for details'}\r\n/root/.local/lib/python3.9/site-packages/gradio/deprecation.py:43: UserWarning: You have unused kwarg parameters in Row, please remove them: {'scale': 1}\r\n  warnings.warn(\r\n{'object': 'credit_summary', 'total_granted': 5.0, 'total_used': 0.24, 'total_available': 4.76, 'grants': {'object': 'list', 'data': [{'object': 'credit_grant', 'id': '1cd44091-bc7d-4226-b1aa-e7dd2ece744c', 'grant_amount': 5.0, 'used_amount': 0.24, 'effective_at': 1678838400.0, 'expires_at': 1688169600.0}]}}\r\n/root/.local/lib/python3.9/site-packages/gradio/deprecation.py:43: UserWarning: You have unused kwarg parameters in Files, please remove them: {'multiple': True}\r\n  warnings.warn(\r\n\r\n```\r\n\r\n### 运行环境\r\n\r\n- OS: Ubuntu 20.04.4 LTS x86_64\r\n- Docker version: 23.0.1\r\n- Gradio version: latest\r\n- Python version: 3.9.16\r\n\r\n",
      "state": "closed",
      "author": "Diaoxiaozhang",
      "author_type": "User",
      "created_at": "2023-03-25T11:52:23Z",
      "updated_at": "2023-03-25T11:56:30Z",
      "closed_at": "2023-03-25T11:55:14Z",
      "labels": [
        "question",
        "docker deployment"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/386/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/386",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/386",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:45.951908",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "就像这个错误描述的这样……这个检测是在服务区启动的时候进行的，检测IP区域的API表示速率限制。如果你不想看见这个提示，可以试着重启下服务器，这样会重新试着检测一次。如果检测成功，显示的类似：“您的IP区域：United States。”",
          "created_at": "2023-03-25T11:55:14Z"
        }
      ]
    },
    {
      "issue_number": 385,
      "title": "[其他] 本地部署的时候，pycharm填写了代理的地址和端口，但是启动后IP依然在中国，导致无法正常对话",
      "body": "> 感谢提交 issue! 请尽可能完整填写以下信息，帮助我们更好地定位问题~ \r\n> 在一切开始之前，请确保您已经阅读过 [常见问题](https://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/常见问题) 页面，查看它是否已经对您的问题做出了解答。如果没有，请检索issue与discussion，查看有没有相同或类似的问题。\r\n> 如果您确信这是一个前人没有遇到的问题，欢迎提交该issue！\r\n> 注意，请编辑issue标题栏“简短的错误描述”部分，也请替换我们的issue模板中的正文（但不要把所有内容都删完）。\r\n\r\n### 错误描述\r\nHi team, I ran into an issue of _\"本地部署的时候，pycharm填写了代理的地址和端口，但是启动后IP依然在中国，导致无法正常对话\"_\r\nI pulled the original code from git, meanwhile, I started the VPN on my laptop. It was supposed to be effected when I set the proxy settings in Pycharm, but actually NO.\r\nI have no idea what the problem is now.\r\n\r\n### 复现操作\r\n1. Turned off the firewall\r\n2. Set up the proxy in Pycharm, while checking the proxy settings from System Preferences -> Network -> Advanced\r\n3. Ran ChuanhuChatbot.py in Pycharm terminal, stocked \r\n\r\n\r\n### 错误截图\r\n<img width=\"629\" alt=\"image\" src=\"https://user-images.githubusercontent.com/12833690/227713421-5b9f2195-a2b4-49c9-ba56-401606032dda.png\">\r\n\r\n\r\n### 终端（控制台）中的错误报告\r\n\r\n\r\n```console\r\nTraceback (most recent call last):\r\n  File \"/Users/brhon/Library/Python/3.8/lib/python/site-packages/urllib3/connectionpool.py\", line 703, in urlopen\r\n    httplib_response = self._make_request(\r\n  File \"/Users/brhon/Library/Python/3.8/lib/python/site-packages/urllib3/connectionpool.py\", line 449, in _make_request\r\n    six.raise_from(e, None)\r\n  File \"<string>\", line 3, in raise_from\r\n  File \"/Users/brhon/Library/Python/3.8/lib/python/site-packages/urllib3/connectionpool.py\", line 444, in _make_request\r\n    httplib_response = conn.getresponse()\r\n  File \"/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.8/lib/python3.8/http/client.py\", line 1337, in getresponse\r\n    response.begin()\r\n  File \"/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.8/lib/python3.8/http/client.py\", line 307, in begin\r\n    version, status, reason = self._read_status()\r\n  File \"/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.8/lib/python3.8/http/client.py\", line 276, in _read_status\r\n    raise RemoteDisconnected(\"Remote end closed connection without\"\r\nhttp.client.RemoteDisconnected: Remote end closed connection without response\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/Users/brhon/Library/Python/3.8/lib/python/site-packages/requests/adapters.py\", line 489, in send\r\n    resp = conn.urlopen(\r\n  File \"/Users/brhon/Library/Python/3.8/lib/python/site-packages/urllib3/connectionpool.py\", line 787, in urlopen\r\n    retries = retries.increment(\r\n  File \"/Users/brhon/Library/Python/3.8/lib/python/site-packages/urllib3/util/retry.py\", line 592, in increment\r\n    raise MaxRetryError(_pool, url, error or ResponseError(cause))\r\nurllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=1080): Max retries exceeded with url: http://127.0.0.1:7860/startup-events (Caused by ProxyError('Cannot connect to proxy.', RemoteDisconnected('Remote end closed connection without response')))\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/Users/brhon/PycharmProjects/ChuanhuChatGPT/ChuanhuChatbot.py\", line 416, in <module>\r\n    demo.queue(concurrency_count=CONCURRENT_COUNT).launch(\r\n  File \"/Users/brhon/Library/Python/3.8/lib/python/site-packages/gradio/blocks.py\", line 1477, in launch\r\n    requests.get(f\"{self.local_url}startup-events\")\r\n  File \"/Users/brhon/Library/Python/3.8/lib/python/site-packages/requests/api.py\", line 73, in get\r\n    return request(\"get\", url, params=params, **kwargs)\r\n  File \"/Users/brhon/Library/Python/3.8/lib/python/site-packages/requests/api.py\", line 59, in request\r\n    return session.request(method=method, url=url, **kwargs)\r\n  File \"/Users/brhon/Library/Python/3.8/lib/python/site-packages/requests/sessions.py\", line 587, in request\r\n    resp = self.send(prep, **send_kwargs)\r\n  File \"/Users/brhon/Library/Python/3.8/lib/python/site-packages/requests/sessions.py\", line 701, in send\r\n    r = adapter.send(request, **kwargs)\r\n  File \"/Users/brhon/Library/Python/3.8/lib/python/site-packages/requests/adapters.py\", line 559, in send\r\n    raise ProxyError(e, request=request)\r\nrequests.exceptions.ProxyError: HTTPConnectionPool(host='127.0.0.1', port=1080): Max retries exceeded with url: http://127.0.0.1:7860/startup-events (Caused by ProxyError('Cannot connect to proxy.', RemoteDisconnected('Remote end closed connection without response')))\r\n\r\n```\r\n\r\n### 运行环境\r\n**请填写以下列表：**\r\n\r\n - OS: macOS Catalina\r\n - Browser: Chrome\r\n - Gradio version: V-3.22.1\r\n - Python (或Python3) version: python3.8\r\n - Pycharm: PyCharm 2019.2.2 (Professional Edition)\r\n\r\n\r\n### 其他\r\nNo\r\n",
      "state": "closed",
      "author": "CobeBriant",
      "author_type": "User",
      "created_at": "2023-03-25T11:06:05Z",
      "updated_at": "2023-03-25T11:10:42Z",
      "closed_at": "2023-03-25T11:10:42Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/385/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/385",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/385",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:46.102797",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "请自行解决代理问题。",
          "created_at": "2023-03-25T11:10:42Z"
        }
      ]
    },
    {
      "issue_number": 383,
      "title": "[功能请求] 加入用户自定义输入模板功能",
      "body": "### 该功能请求是否与某个问题相关？\r\n需求原因 ：经常使用一些提示词，很多输入已经固定了可以作为模板用，可以提高一些固定工作的效率\r\n比如：\r\n\r\n> 请按照豆瓣网站的短评风格，写一个`<Movie title>`的影评，包含标题、分数、评价详情\r\n> 要求列出`<count>`条取自豆瓣的真实评论\r\n> 输出格式为：\r\n> 1.评价标题\r\n> 2.分数\r\n> 3.评价详情\r\n\r\n用户可以自定义这样一个模板，读取后，输入框变成` <Movie title><count>`这两个变量的输入框\r\n然后发送给chatgpt\r\n\r\n感谢开发者的付出，希望能采纳。\r\n",
      "state": "open",
      "author": "lixibi",
      "author_type": "User",
      "created_at": "2023-03-25T09:16:42Z",
      "updated_at": "2023-03-25T09:37:11Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/383/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/383",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/383",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:46.264198",
      "comments": [
        {
          "author": "lixibi",
          "body": "感谢修正，这个应该属于自定义输入模版",
          "created_at": "2023-03-25T09:37:11Z"
        }
      ]
    },
    {
      "issue_number": 384,
      "title": "客户端",
      "body": "老板，能不能直接打个安装包出来，直接装就完了，这个还得下载Python，每次打开都得去点那个脚本。脚本关掉就没法用了，这用起来不方便啊",
      "state": "closed",
      "author": "Cagsirn",
      "author_type": "User",
      "created_at": "2023-03-25T09:22:27Z",
      "updated_at": "2023-03-25T09:23:42Z",
      "closed_at": "2023-03-25T09:23:42Z",
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/384/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/384",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/384",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:46.429593",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "嫌麻烦嫌麻烦建议去用Hugging Face版：https://huggingface.co/spaces/JohnSmith9982/ChuanhuChatGPT",
          "created_at": "2023-03-25T09:23:42Z"
        }
      ]
    },
    {
      "issue_number": 382,
      "title": "[本地部署] 简短的错误描述",
      "body": "> 感谢提交 issue! 请尽可能完整填写以下信息，帮助我们更好地定位问题~ \r\n> 在一切开始之前，请确保您已经阅读过 [常见问题](https://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/常见问题) 页面，查看它是否已经对您的问题做出了解答。如果没有，请检索issue与discussion，查看有没有相同或类似的问题。\r\n> 如果您确信这是一个前人没有遇到的问题，欢迎提交该issue！\r\n> 注意，请编辑issue标题栏“简短的错误描述”部分，也请替换我们的issue模板中的正文（但不要把所有内容都删完）。\r\n> 请不要再提交 `Something went wrong Expecting value: line 1 column 1 (char 0)` 和 代理配置 相关的问题，请再看一遍 常见问题 页，实在不行请前往discussion。\r\n\r\n### 错误描述\r\npython3 chuanhuchatgpt.py时出错，说没有llama_index\r\n\r\n### 复现操作\r\n你之前干了什么，然后出现了错误呢？例如：\r\n1. 正常完成本地部署\r\n2. 然后python3 ChuanhuChatGPT.py,然后报错\r\n\r\n\r\n### 错误截图\r\n\r\n'''\r\npython3 ChuanhuChatbot.py\r\nTraceback (most recent call last):\r\n  File \"/Users/apple/codework/ChuanhuChatGPT/ChuanhuChatbot.py\", line 10, in <module>\r\n    from modules.overwrites import *\r\n  File \"/Users/apple/codework/ChuanhuChatGPT/modules/overwrites.py\", line 4, in <module>\r\n    from llama_index import Prompt\r\nModuleNotFoundError: No module named 'llama_index'\r\n'''\r\n\r\n\r\n### 终端（控制台）中的错误报告\r\n如上\r\n\r\n### 运行环境\r\n#### 桌面系统\r\n**请填写以下列表：**\r\n\r\n - OS: [例如：macos]\r\n - Browser: [：Chrome,]\r\n\r\n#### 运行依赖\r\n**请填写以下列表：**\r\n> 你可以在终端中依次输入以下指令以查看软件版本：\r\n> ```shell\r\n> pip show gradio\r\n> python --version\r\n> ```\r\n\r\n- Gradio version:3.23.0\r\n- Python version:3.9.6\r\n\r\n### 其他\r\n补充说明:上周的某个版本是部署成功，填入key后不能正常使用，怀疑是网络拥堵，后来没继续测试。\r\n今天是最新版本，然后就出了这个报错\r\n",
      "state": "closed",
      "author": "tiwentichat",
      "author_type": "User",
      "created_at": "2023-03-25T08:53:58Z",
      "updated_at": "2023-03-25T08:55:23Z",
      "closed_at": "2023-03-25T08:55:23Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/382/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/382",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/382",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:46.598375",
      "comments": [
        {
          "author": "GaiZhenbiao",
          "body": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/wiki/常见问题#no-matching-distribution-found-for-package-如tiktoken",
          "created_at": "2023-03-25T08:55:20Z"
        }
      ]
    },
    {
      "issue_number": 374,
      "title": " 用户输入部分，不自然的换行 !",
      "body": "![Screenshot_20230324_234225_Chrome](https://user-images.githubusercontent.com/101241940/227573960-236b0f4a-49bb-40f2-94ae-9f1e4b554394.jpg)\r\n",
      "state": "closed",
      "author": "bentwnghk",
      "author_type": "User",
      "created_at": "2023-03-24T15:46:48Z",
      "updated_at": "2023-03-25T07:16:13Z",
      "closed_at": "2023-03-25T07:16:13Z",
      "labels": [
        "bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/374/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/374",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/374",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:46.792997",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "似乎是 6213fb0e76e2b04bc70bb884937b61f2675d0156 和 ead342edcea32964bc51b80c6f9d0a93b5eee6f2 引入的问题\r\n\r\n首次报告：\r\n- https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/367#issuecomment-1482809675",
          "created_at": "2023-03-24T16:05:00Z"
        }
      ]
    },
    {
      "issue_number": 377,
      "title": "[代码风格] vscode 默认配置flake8 一堆报错告警",
      "body": "\r\n### vscode 默认配置flake8 一堆报错告警\r\n\r\n### 复现操作\r\n系统：mac 13.2.1\r\n编辑器: vs code\r\n一堆报错，看着有点不爽，有什么方式可以取消告警吗？\r\n\r\n### 错误截图\r\n\r\n![image](https://user-images.githubusercontent.com/1489176/227668741-7d3b0874-d692-4df8-904d-1a899c0b7dba.png)\r\n\r\n",
      "state": "closed",
      "author": "kcloze",
      "author_type": "User",
      "created_at": "2023-03-25T00:46:08Z",
      "updated_at": "2023-03-25T02:40:05Z",
      "closed_at": "2023-03-25T02:39:35Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/377/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/377",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/377",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:46.955567",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "如果不爽，可以关掉flake8:\n\n在vs code的`settings.json`中更改以下值\n```\n\"python.linting.flake8Enabled\": false,\n```\n\n……",
          "created_at": "2023-03-25T01:45:28Z"
        },
        {
          "author": "MZhao-ouo",
          "body": "看起来都是一些在其他文件中定义的函数和变量，可能是vscode配置的问题，建议用搜索引擎或ChatGPT解决",
          "created_at": "2023-03-25T01:45:45Z"
        },
        {
          "author": "kcloze",
          "body": "加了一些参数可以忽略一些：\r\n--ignore=E402,F841,F401,E302,E305,D103,F405,F541,E722\r\n但这个项目跟其他项目比，告警还是蛮多的",
          "created_at": "2023-03-25T02:39:35Z"
        }
      ]
    },
    {
      "issue_number": 376,
      "title": "[Docker] 本地build的镜像报Something went wrong",
      "body": "![图片3](https://user-images.githubusercontent.com/106149875/227610058-bac35356-e488-4dda-8228-f5b56691976b.png)\r\n![图片2](https://user-images.githubusercontent.com/106149875/227610083-a09f1ebd-0e46-4578-931f-1e1947a4bae8.png)\r\n",
      "state": "closed",
      "author": "bh-ying",
      "author_type": "User",
      "created_at": "2023-03-24T18:30:00Z",
      "updated_at": "2023-03-25T02:03:36Z",
      "closed_at": "2023-03-25T02:01:25Z",
      "labels": [
        "duplicate",
        "question",
        "docker deployment"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/376/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/376",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/376",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:47.156314",
      "comments": [
        {
          "author": "Keldos-Li",
          "body": "图片太糊了……\n\n请参考同类issue，尤其是：\n- #89",
          "created_at": "2023-03-25T02:03:27Z"
        }
      ]
    },
    {
      "issue_number": 224,
      "title": "[功能请求] 改进在线搜索结果的排版效果",
      "body": "在线搜索的结果没有换行，能否把搜索结果排版一下，目前看起来很乱",
      "state": "closed",
      "author": "dannywen2",
      "author_type": "User",
      "created_at": "2023-03-20T09:12:40Z",
      "updated_at": "2023-03-24T17:25:05Z",
      "closed_at": "2023-03-24T17:25:05Z",
      "labels": [
        "bug",
        "feature request"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/224/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/224",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/224",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:47.365237",
      "comments": [
        {
          "author": "dannywen2",
          "body": "新版本的在线搜索结果显示位置有问题，应该在左边而不是右边",
          "created_at": "2023-03-20T09:42:13Z"
        },
        {
          "author": "Keldos-Li",
          "body": "确实哦，两个问题：\r\n1. 检索结果被错误地显示在用户气泡中；\r\n2. 检索结果未含条换行。\r\n\r\n<img width=\"915\" alt=\"image\" src=\"https://user-images.githubusercontent.com/23137268/226304485-3f04e38e-f59b-47d7-99ab-614751d57f69.png\">\r\n",
          "created_at": "2023-03-20T09:52:10Z"
        },
        {
          "author": "Keldos-Li",
          "body": "May be resolved by 079c7eb6a07dc01ce58d074017bb767ebef90bec ([Chuanhu](https://github.com/GaiZhenbiao)).\r\n\r\n-----\r\n\r\n（现在搜索结果不会被直接显示。当然之前直接显示url也不对。或许效果仍有改进空间？）",
          "created_at": "2023-03-20T13:38:15Z"
        },
        {
          "author": "GaiZhenbiao",
          "body": "按理说这部分代码会将所有搜索结果附在最后：\r\n```\r\n    if use_websearch:\r\n        response = history[-1]['content']\r\n        response += \"\\n\\n\" + \"\\n\".join(link_references)\r\n        logging.info(f\"Added link references.\")\r\n        logging.info(response)\r\n        chatbot[-1] = (parse_text(old_inputs), response)\r\n        yi",
          "created_at": "2023-03-20T13:40:03Z"
        },
        {
          "author": "Keldos-Li",
          "body": "（帮你把代码链接放出来（（\r\nhttps://github.com/GaiZhenbiao/ChuanhuChatGPT/blob/079c7eb6a07dc01ce58d074017bb767ebef90bec/chat_func.py#L348-L354\r\n",
          "created_at": "2023-03-20T13:49:05Z"
        }
      ]
    },
    {
      "issue_number": 362,
      "title": "[功能请求] 在索引文件后同时使用原始gpt对话",
      "body": "上传文件后获得索引后，回答的问题都是基于索引。如果遇到了索引没有的知识，表现反而不如不加索引的chatgpt。\r\n希望可以在索引内容和原本的chatgpt中做一个平衡。这样可以针对性的给chatgpt补充新的知识。\r\n",
      "state": "open",
      "author": "ZhangLi1984",
      "author_type": "User",
      "created_at": "2023-03-24T11:29:24Z",
      "updated_at": "2023-03-24T17:06:11Z",
      "closed_at": null,
      "labels": [
        "feature request"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/362/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/362",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/362",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:47.528069",
      "comments": [
        {
          "author": "shaocc1234",
          "body": "不能多个对话框吗",
          "created_at": "2023-03-24T13:19:41Z"
        }
      ]
    },
    {
      "issue_number": 373,
      "title": "[功能请求] 能否不经过网页ui直接传入数据并且获取回答，ui只作为设置索引等的一个界面",
      "body": "这只是我个人的一个需求，如果大佬能帮助我那就更好了\r\n我的想法是：我可以传入一个字符串，然后它就会和我们在ui中输入的数据一样被处理后返回另一个字符串\r\n我实在难以明白您的代码含义，又或者您可以直接告诉我应该把他加在什么地方或者修改什么\r\n感激不尽！\r\n",
      "state": "closed",
      "author": "Xiaoxiaosito",
      "author_type": "User",
      "created_at": "2023-03-24T15:03:42Z",
      "updated_at": "2023-03-24T17:04:34Z",
      "closed_at": "2023-03-24T17:04:34Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/373/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/GaiZhenbiao/ChuanhuChatGPT/issues/373",
      "api_url": "https://api.github.com/repos/GaiZhenbiao/ChuanhuChatGPT/issues/373",
      "repository": "GaiZhenbiao/ChuanhuChatGPT",
      "extraction_date": "2025-06-21T23:44:47.691765",
      "comments": []
    }
  ]
}