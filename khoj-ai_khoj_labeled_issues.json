{
  "repository": "khoj-ai/khoj",
  "repository_info": {
    "repo": "khoj-ai/khoj",
    "stars": 30381,
    "language": "Python",
    "description": "Your AI second brain. Self-hostable. Get answers from the web or your docs. Build custom agents, schedule automations, do deep research. Turn any online or local LLM into your personal, autonomous AI ",
    "url": "https://github.com/khoj-ai/khoj",
    "topics": [
      "agent",
      "ai",
      "assistant",
      "chat",
      "chatgpt",
      "emacs",
      "image-generation",
      "llama3",
      "llamacpp",
      "llm",
      "obsidian",
      "obsidian-md",
      "offline-llm",
      "productivity",
      "rag",
      "research",
      "self-hosted",
      "semantic-search",
      "stt",
      "whatsapp-ai"
    ],
    "created_at": "2021-08-16T01:48:44Z",
    "updated_at": "2025-06-21T21:49:59Z",
    "search_query": "local llm language:python stars:>2",
    "total_issues_estimate": 108,
    "labeled_issues_estimate": 89,
    "labeling_rate": 82.8,
    "sample_labeled": 24,
    "sample_total": 29,
    "has_issues": true,
    "repo_id": 396569538,
    "default_branch": "master",
    "size": 115378
  },
  "extraction_date": "2025-06-21T23:25:16.374625",
  "extraction_type": "LABELED_ISSUES_ONLY",
  "total_labeled_issues": 361,
  "issues": [
    {
      "issue_number": 1201,
      "title": "CSRF verification failed logging into the admin panel",
      "body": "### Server\n\n- [ ] Cloud (https://app.khoj.dev)\n- [x] Self-Hosted Docker\n- [ ] Self-Hosted Python package\n- [ ] Self-Hosted source code\n\n### Clients\n\n- [x] Web browser\n- [ ] Desktop/mobile app\n- [ ] Obsidian\n- [ ] Emacs\n- [ ] WhatsApp\n\n### OS\n\n- [x] Windows\n- [ ] macOS\n- [ ] Linux\n- [ ] Android\n- [ ] iOS\n\n### Khoj version\n\nlatest and pre (1.42.6.dev11)\n\n### Describe the bug\n\nI'm running into the CSRF when logging into the admin panel. I am self-hosting and reviewed the other reports of this issue and my issue is still not resolved.\n\nI have accessed the admin panel through localhost and my host ip and same issue. I have tried other browsers as well.\n\nI have tested this both on the latest and pre versions of KHOJ.\n\nThanks for your help!\n\n\n### Current Behavior\n\n![Image](https://github.com/user-attachments/assets/fc499441-8781-4e48-8dcb-739118989cb5)\n\n### Expected Behavior\n\nI expect the page to bring me to the admin page settings page upon successful login\n\n### Reproduction Steps\n\nI can reproduce this issue by simply trying to login the admin panel with the proper credentials.\n\n### Possible Workaround\n\n_No response_\n\n### Additional Information\n\nhere is my .yml i have set up:\n\n```services:\n  database:\n    image: docker.io/pgvector/pgvector:pg15\n    environment:\n      POSTGRES_USER: postgres\n      POSTGRES_PASSWORD: postgres\n      POSTGRES_DB: postgres\n    volumes:\n      - khoj_db:/var/lib/postgresql/data/\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U postgres\"]\n      interval: 30s\n      timeout: 10s\n      retries: 5\n  sandbox:\n    image: ghcr.io/khoj-ai/terrarium:latest\n    healthcheck:\n      test: [\"CMD-SHELL\", \"curl -f http://localhost:8080/health\"]\n      interval: 30s\n      timeout: 10s\n      retries: 2\n  search:\n    image: docker.io/searxng/searxng:latest\n    volumes:\n      - khoj_search:/etc/searxng\n    environment:\n      - SEARXNG_BASE_URL=http://localhost:8080/\n  # Creates Computer for Khoj to use.\n  # Set KHOJ_OPERATOR_ENABLED=True in the server service environment variable to enable.\n  computer:\n    container_name: khoj-computer\n    image: ghcr.io/khoj-ai/khoj-computer:latest\n    # build:\n    #   context: .\n    #   dockerfile: computer.Dockerfile\n    ports:\n      - \"5900:5900\"\n    volumes:\n      - khoj_computer:/home/operator\n  server:\n    depends_on:\n      database:\n        condition: service_healthy\n    # Use the following line to use the latest version of khoj. Otherwise, it will build from source. Set this to ghcr.io/khoj-ai/khoj-cloud:latest if you want to use the prod image.\n    image: ghcr.io/khoj-ai/khoj:pre\n    # Uncomment the following line to build from source. This will take a few minutes. Comment the next two lines out if you want to use the official image.\n    # build:\n      # context: .\n    ports:\n      # If changing the local port (left hand side), no other changes required.\n      # If changing the remote port (right hand side),\n      #   change the port in the args in the build section,\n      #   as well as the port in the command section to match\n      - \"42110:42110\"\n    extra_hosts:\n      - \"host.docker.internal:host-gateway\"\n    working_dir: /app\n    volumes:\n      - khoj_config:/root/.khoj/\n      - khoj_models:/root/.cache/torch/sentence_transformers\n      - khoj_models:/root/.cache/huggingface\n      # uncomment line below to mount docker socket to allow khoj to use its computer.\n      # - /var/run/docker.sock:/var/run/docker.sock\n    # Use 0.0.0.0 to explicitly set the host ip for the service on the container. https://pythonspeed.com/articles/docker-connection-refused/\n    environment:\n      - POSTGRES_DB=postgres\n      - POSTGRES_USER=postgres\n      - POSTGRES_PASSWORD=postgres\n      - POSTGRES_HOST=database\n      - POSTGRES_PORT=5432\n      - KHOJ_DJANGO_SECRET_KEY=***\n      - KHOJ_DEBUG=True\n      - KHOJ_ADMIN_EMAIL=***\n      - KHOJ_ADMIN_PASSWORD=***\n      # Default URL of Terrarium, the default Python sandbox used by Khoj to run code. Its container is specified above\n      - KHOJ_TERRARIUM_URL=http://sandbox:8080\n      # Uncomment line below to have Khoj run code in remote E2B code sandbox instead of the self-hosted Terrarium sandbox above. Get your E2B API key from https://e2b.dev/.\n      # - E2B_API_KEY=your_e2b_api_key\n      # Default URL of SearxNG, the default web search engine used by Khoj. Its container is specified above\n      - KHOJ_SEARXNG_URL=http://search:8080\n      # Uncomment line below to use with Ollama running on your local machine at localhost:11434.\n      # Change URL to use with other OpenAI API compatible providers like VLLM, LMStudio etc.\n      - OPENAI_BASE_URL=https://openrouter.ai/api/v1\n      #\n      # Uncomment appropriate lines below to use chat models by OpenAI, Anthropic, Google.\n      # Ensure you set your provider specific API keys.\n      # ---\n      - OPENAI_API_KEY=***\n      # - GEMINI_API_KEY=your_gemini_api_key\n      # - ANTHROPIC_API_KEY=your_anthropic_api_key\n      #\n      # Uncomment line below to enable Khoj to use its computer.\n      # - KHOJ_OPERATOR_ENABLED=True\n      # Uncomment appropriate lines below to enable web results with Khoj\n      # Ensure you set your provider specific API keys.\n      # ---\n      # Free, Slower API. Does both web search and webpage read. Get API key from https://jina.ai/\n      # - JINA_API_KEY=your_jina_api_key\n      # Paid, Fast API. Only does web search. Get API key from https://serper.dev/\n      # - SERPER_DEV_API_KEY=your_serper_dev_api_key\n      # Paid, Fast, Open API. Only does webpage read. Get API key from https://firecrawl.dev/\n      # - FIRECRAWL_API_KEY=your_firecrawl_api_key\n      # Paid, Fast, Higher Read Success API. Only does webpage read. Get API key from https://olostep.com/\n      # - OLOSTEP_API_KEY=your_olostep_api_key\n      #\n      # Uncomment the necessary lines below to make your instance publicly accessible.\n      # Proceed with caution, especially if you are using anonymous mode.\n      # ---\n      - KHOJ_NO_HTTPS=True\n      # Replace the KHOJ_DOMAIN with the server's externally accessible domain or I.P address from a remote machie (no http/https prefix).\n      # Ensure this is set correctly to avoid CSRF trusted origin or unset cookie issue when trying to access the admin panel.\n      - KHOJ_DOMAIN=***\n      - RESEND_API_KEY=***\n      - RESEND_EMAIL=***\n      # - KHOJ_DOMAIN=khoj.example.com\n      # Replace the KHOJ_ALLOWED_DOMAIN with the server's internally accessible domain or I.P address on the host machine (no http/https prefix).\n      # Only set if using a load balancer/reverse_proxy in front of your Khoj server. If unset, it defaults to KHOJ_DOMAIN.\n      # For example, if the load balancer service is added to the khoj docker network, set KHOJ_ALLOWED_DOMAIN to khoj's docker service name: `server'.\n      # - KHOJ_ALLOWED_DOMAIN=server\n      - KHOJ_ALLOWED_DOMAIN=192.168.12.176\n      # Uncomment the line below to disable telemetry.\n      # Telemetry helps us prioritize feature development and understand how people are using Khoj\n      # Read more at https://docs.khoj.dev/miscellaneous/telemetry\n      # - KHOJ_TELEMETRY_DISABLE=True\n    # Comment out this line when you're using the official ghcr.io/khoj-ai/khoj-cloud:latest prod image.\n    command: --host=\"0.0.0.0\" --port=42110 -vv --non-interactive\n\nvolumes:\n  khoj_config:\n  khoj_db:\n  khoj_models:\n  khoj_search:\n  khoj_computer:\n```\n\n### Link to Discord or Github discussion\n\n_No response_",
      "state": "open",
      "author": "ElectricCy",
      "author_type": "User",
      "created_at": "2025-06-20T16:17:13Z",
      "updated_at": "2025-06-20T16:20:21Z",
      "closed_at": null,
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1201/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1201",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1201",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:27.246375",
      "comments": []
    },
    {
      "issue_number": 1199,
      "title": "add AI/ML API as provider",
      "body": "### Describe the feature\n\nHi!\nI'm Sergey from the Integrations team at [AI/ML API](https://aimlapi.com/), a startup with 150K+ users that provides over 300 AI models in one place.\n\nWe've recently made a [PR](https://github.com/khoj-ai/khoj/pull/1197) and got redirected here by @debanjum to discuss the feature before implementing it. \n\nYour project looks dope, and we'd like to have a native integration with it. We already got integrations with Langflow, Agno, and AutoGPT - so our integrations team is pretty seasoned. \n\nWe'd love to do some marketing together too if you guys are interested in utilizing our combined reach\n\n### Use Case\n\nWe come in play when users need an option to switch between closed-source models (like Gemini, chatgpt etc.) and opensource models\n\nAlso whenever a new top model comes up - we have it on board within 2-3 days, so enterprise and startups like to have us as a first-line for testing models, or as backup for the existing ai api's`\n\n### Proposed Solution\n\n_No response_\n\n### Additional Information\n\n_No response_\n\n### Link to Discord or Github discussion\n\n_No response_",
      "state": "open",
      "author": "OctavianTheI",
      "author_type": "User",
      "created_at": "2025-06-18T11:07:03Z",
      "updated_at": "2025-06-18T11:07:03Z",
      "closed_at": null,
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1199/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1199",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1199",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:27.246398",
      "comments": []
    },
    {
      "issue_number": 1194,
      "title": "Handle Dependency Conflicts on Khoj Install on Windows",
      "body": "### Server\n\n- [ ] Cloud (https://app.khoj.dev)\n- [ ] Self-Hosted Docker\n- [x] Self-Hosted Python package\n- [ ] Self-Hosted source code\n\n### Clients\n\n- [x] Web browser\n- [ ] Desktop/mobile app\n- [ ] Obsidian\n- [ ] Emacs\n- [ ] WhatsApp\n\n### OS\n\n- [x] Windows\n- [ ] macOS\n- [ ] Linux\n- [ ] Android\n- [ ] iOS\n\n### Khoj version\n\nNO\n\n### Describe the bug\n\no follow you install becasue its not usual\nlike creat env with python or conda, activate, install requirements.txt and so one\nso it is NOT like this  so i follow your install \n1. $env:CMAKE_ARGS = \"-DGGML_CUDA=on\"\n2. py -m pip install 'khoj[local]'\n3. USE_EMBEDDED_DB=\"true\" khoj --anonymous-mode\nall in powershell as admin\nBTW the toml compiling need 30min MAYBE  you can write a hint that its need time\n\nall in LOG\ni have 5GHZ intel, 16core and RTX4060ti, and windwos 10\n\niv installed all STUF on github ALL\nobadooga, forge, swarm-ui, a1111, alltalk, facefusion, XTTS-RVC and all all are more or less easy and ready in 5min\n\n[log.txt](https://github.com/user-attachments/files/20611122/log.txt)\n\n### Current Behavior\n\ninstall fail\n\n### Expected Behavior\n\nrun\n\n### Reproduction Steps\n\n123\n\n### Possible Workaround\n\n_No response_\n\n### Additional Information\n\n_No response_\n\n### Link to Discord or Github discussion\n\n_No response_",
      "state": "closed",
      "author": "kalle07",
      "author_type": "User",
      "created_at": "2025-06-05T13:15:57Z",
      "updated_at": "2025-06-17T05:36:36Z",
      "closed_at": "2025-06-17T05:36:36Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1194/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1194",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1194",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:27.246405",
      "comments": [
        {
          "author": "LCBO",
          "body": "Yes, installing on win for dev is nightmare. ",
          "created_at": "2025-06-05T13:47:40Z"
        },
        {
          "author": "debanjum",
          "body": "Hey @kalle07, it's unfortunate you still aren't able to setup Khoj on your windows machine. The logs clearly show there are dependency version conflicts. You should use a virtual environment to avoid this.\n- Please use `python -m venv .venv && . venv/bin/activate && pip install \"khoj[local]\"` or `pi",
          "created_at": "2025-06-10T17:01:06Z"
        },
        {
          "author": "debanjum",
          "body": "Marking this as unplanned as nothing actionable to do",
          "created_at": "2025-06-17T05:36:36Z"
        }
      ]
    },
    {
      "issue_number": 1184,
      "title": "Allow Custom Arbitrary OAuth2 Multi-User authentication",
      "body": "### Describe the feature\n\nI would like Khoj to support authentication via arbitrary/custom OAuth2 providers, not just Google. This would allow users to configure Khoj to use any standards-compliant OAuth2 identity provider, such as Authentik, Auth0, Okta, or other self-hosted SSO solutions. The feature should allow administrators to specify the OAuth2 endpoints, client ID/secret, scopes, and user info mapping in the configuration.\n\n### Use Case\n\nMany organizations use their own identity providers for SSO, such as Authentik, Keycloak, Okta, or other OAuth2-compliant services, rather than Google. Supporting custom OAuth2 providers would allow:\n- Integration with internal or self-hosted SSO solutions (e.g., Authentik) for centralized user management and access control.\n- Compliance with organizational security policies that require use of internal authentication systems.\n- Easier onboarding and offboarding of users via existing SSO infrastructure.\n- Use in environments where Google accounts are not permitted or practical.\n\nFor example, in my case, I run an Authentik server as the central SSO for all my self-hosted services. I would like Khoj to authenticate users via Authentik, so that access is managed in one place and users have a seamless login experience.\n\n### Proposed Solution\n\nAdd support for configuring arbitrary OAuth2 providers in Khoj’s authentication settings. This could be implemented by:\n- Allowing the admin to specify OAuth2 endpoints (authorization, token, userinfo), client ID/secret, scopes, and user info mapping (e.g., which field is used for the username/email).\n- Providing a generic OAuth2 configuration section in the config file or admin UI.\n- Optionally, supporting OIDC (OpenID Connect) discovery for easier setup.\n- Ensuring that the login flow, user creation, and session management work with any standards-compliant OAuth2 provider.\n\nReference implementation ideas:\n\nMany open source projects (e.g., [Outline](https://github.com/outline/outline), [Gitea](https://docs.gitea.com), [Nextcloud](https://docs.nextcloud.com)) support generic OAuth2/OIDC providers in addition to Google, GitHub, etc.\n\n\n### Additional Information\n\n[Authentik OAuth2 Provider Documentation](https://docs.goauthentik.io/docs/add-secure-apps/providers/oauth2/)\n\n### Link to Discord or Github discussion\n\n_No response_",
      "state": "open",
      "author": "hexxone",
      "author_type": "User",
      "created_at": "2025-05-27T17:04:55Z",
      "updated_at": "2025-06-16T00:54:32Z",
      "closed_at": null,
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1184/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1184",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1184",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:27.424660",
      "comments": [
        {
          "author": "wywerne",
          "body": "+1 \nhttps://django-oauth-toolkit.readthedocs.io/en/latest/oidc.html, https://pypi.org/project/fastapi-oidc/, https://github.com/SAML-Toolkits/python-saml \n\n",
          "created_at": "2025-05-28T17:14:37Z"
        },
        {
          "author": "hexxone",
          "body": "I have taken a look at the code and think it should not be too much work because khoj's Google Auth already uses a \"generic\" OAuth library.\n\nIt should just be a matter of providing a customizable configuration for it, using some \"dynamic\" routing and rendering a different/custom button for it.\n\nE.g.",
          "created_at": "2025-05-29T10:10:25Z"
        },
        {
          "author": "justinbadal",
          "body": "Can this please be implemented?",
          "created_at": "2025-06-16T00:54:32Z"
        }
      ]
    },
    {
      "issue_number": 1097,
      "title": "[IDEA] Conversational memory to agents",
      "body": "## Description\nAre there any plans to add conversational memory to agents, which is backed up to a storage of some kind to be able to continue on past conversations with agents? This might be similar to a [chat store](https://docs.llamaindex.ai/en/stable/module_guides/storing/chat_stores/#simplechatstore)on Llama Index. Are there any obvious solutions to this on khoj that I haven't noticed yet?",
      "state": "open",
      "author": "lejinvarghese",
      "author_type": "User",
      "created_at": "2025-01-24T23:06:39Z",
      "updated_at": "2025-06-14T00:07:54Z",
      "closed_at": null,
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1097/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1097",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1097",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:27.607016",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hi @lejinvarghese, thanks for opening this issue. Khoj does not cross conversation memory yet. We plan to build this out soon. Once Khoj has per user memories, we can enable per user + per agent memories as well.\n\nCan you describe your specific use-case? Some examples to understand what you're looki",
          "created_at": "2025-01-30T11:38:36Z"
        },
        {
          "author": "lejinvarghese",
          "body": "For any applications that involve contextual memory about information of a user (imagine health history or personal preferences) would be to build up agent memories over time with subsequent conversations, ideally, short and long term memory storage. It would also be good to have the option of a glo",
          "created_at": "2025-02-01T22:43:11Z"
        },
        {
          "author": "T2WIN",
          "body": "Here is a usecase I have :\nI am working on a project for my company.\nI often use deep research to find documents or learn things about related topics.\nI also use it to develop plans for how I will do things.\nIt would be nice if there was a way to keep in memory the documents produced per project so ",
          "created_at": "2025-06-14T00:07:54Z"
        }
      ]
    },
    {
      "issue_number": 1173,
      "title": "[IDEA] Support Openrouter API Provider Routing",
      "body": "### Describe the feature\n\nPlease evaluate supporting Openrouter's [provider routing](https://openrouter.ai/docs/features/provider-routing) to allow user's more privacy-preserving model selection.\n\n\n### Use Case\n\nFot those who can't run a local model, but still want to have privacy, Openrouter keeps track of which providers retain data and/or train on user inputs, see [docs](https://openrouter.ai/docs/features/privacy-and-logging).\nUsing provider routing would be 1 way to configure private providers/models without having to have a GPU at home.\n\n### Proposed Solution\n\nIMO this is just static data that the user can enter via an interface before using the model.\n\n### Additional Information\n\n_No response_\n\n### Link to Discord or Github discussion\n\n_No response_",
      "state": "closed",
      "author": "tardigrde",
      "author_type": "User",
      "created_at": "2025-05-06T17:30:26Z",
      "updated_at": "2025-06-04T05:18:59Z",
      "closed_at": "2025-06-04T05:18:58Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1173/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1173",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1173",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:27.830733",
      "comments": [
        {
          "author": "JOduMonT",
          "body": "Yes OpenRouter is interesting and also OpenAI API Compliant; so technically for the 1st part (supporting OpenRouter) it would be easy.\nWhile I would suggest @khojDev; to do more something like enabling an option called OpenAI API Compatible where the user can add in URL and an API.\n\n*n8n did somethi",
          "created_at": "2025-05-28T15:28:17Z"
        },
        {
          "author": "debanjum",
          "body": "> While I would suggest @khojDev; to do more something like enabling an option called OpenAI API Compatible where the user can add in URL and an API.\n\nKhoj supports using OpenAI compatible API endpoints. You can add them from the admin panel. See the [docs](https://docs.khoj.dev/advanced/use-openai-",
          "created_at": "2025-05-30T19:16:20Z"
        },
        {
          "author": "tardigrde",
          "body": "Thanks got it!",
          "created_at": "2025-06-04T05:18:58Z"
        }
      ]
    },
    {
      "issue_number": 1178,
      "title": "how to use API with https://app.khoj.dev/ ??",
      "body": "### Describe the feature\n\nso;\nwhen I selfhost (only tested with docker)\n\nI can\n```\ncurl -X POST http://127.0.0.1:42110/api/chat \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"q\": \"Hi!\", \"agent\": \"Khoj\"}'\n\n```\n\nand remotely with an API key\n```\ncurl -X POST http://10.10.10.3:42110/api/chat \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Authorization: Bearer my khoj-API\" \\\n  -d '{\"q\": \"Hi.\", \"agent\": \"Khoj\"}'\n```\n\nit also works\n\n## but when I try\n```\ncurl -X POST https://app.khoj.dev/api/chat \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Authorization: Bearer my khoj.dev-API\" \\\n  -d '{\"q\": \"Hi.\", \"agent\": \"Khoj\"}'\n```\nor\n```\ncurl -X POST https://app.khoj.dev \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Authorization: Bearer my khoj-API\" \\\n  -d '{\"q\": \"Hi.\", \"agent\": \"Khoj\"}'\n```\n\nit does not\n\n\n### Use Case\nusing the API in **general** and/or via https://app.khoj.dev/\n\n\n### Proposed Solution\n- Swagger for the API or Offering more documentation on the API\n\n### Link to Discord or Github discussion\n- https://github.com/khoj-ai/khoj/discussions/612",
      "state": "closed",
      "author": "JOduMonT",
      "author_type": "User",
      "created_at": "2025-05-16T14:15:32Z",
      "updated_at": "2025-05-26T19:26:45Z",
      "closed_at": "2025-05-26T19:21:29Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1178/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1178",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1178",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:28.054707",
      "comments": [
        {
          "author": "debanjum",
          "body": "As mentioned in that discussion. You can see the API swagger docs on your self-hosted setup at http://localhost:42110/docs#/ and the redoc at khoj cloud at https://app.khoj.dev/redoc.\n\nYou can see an example usage in this [small ai wallpaper package](https://github.com/debanjum/ai-wallpaper) I'd mad",
          "created_at": "2025-05-26T19:21:26Z"
        },
        {
          "author": "debanjum",
          "body": "Note: You can use the Khoj cloud API for smaller, personal apps. But for high-volume usage of Khoj API using a self-hosted instance of Khoj is recommended. This will avoid being rate-limited. We want the cloud instance to remain available for normal Khoj traffic.",
          "created_at": "2025-05-26T19:25:53Z"
        }
      ]
    },
    {
      "issue_number": 1182,
      "title": "Show autocomplete suggestions for File Query Filters in Chat on Web App",
      "body": "### Describe the feature\n\nKhoj chat supports [query filters](https://docs.khoj.dev/miscellaneous/query-filters). These allow you to filter notes, documents to use by Khoj for its response (by filename, date range and words).\n\nShowing auto-complete suggestions for file filters should make it easy to direct Khoj to look at only the specified files in your knowledge base for context.\n\n\n### Use Case\n\nCurrently you need type the whole filepath manually in the file query filter. This is pointlessly annoying. Simplifying explicit context addition to chat queries should make it easy to direct Khoj and improve your response quality.\n\n\n### Proposed Solution\n\nWhen you type `file:` you should see list of all synced files to auto-complete. This list should be filtered down as you type more letters (e.g file:Task should only show tasks.org or TaskList.md from my documents) as auto-complete suggestions.\n\n### Additional Information\n\nRelated issues\n- #1025 \n\n### Link to Discord or Github discussion\n\n_No response_",
      "state": "open",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2025-05-26T19:08:03Z",
      "updated_at": "2025-05-26T19:15:07Z",
      "closed_at": null,
      "labels": [
        "upgrade",
        "good first issue"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1182/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1182",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1182",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:28.246613",
      "comments": []
    },
    {
      "issue_number": 1183,
      "title": "Show autocomplete suggestions for File Query Filters in Chat on Obsidian App",
      "body": "### Describe the feature\n\nKhoj chat supports [query filters](https://docs.khoj.dev/miscellaneous/query-filters). These allow you to filter notes, documents to use by Khoj for its response (by filename, date range and words).\n\nShowing auto-complete suggestions for file filters should make it easy to direct Khoj to look at only the specified files in your knowledge base for context.\n\n### Use Case\n\nCurrently you need type the whole filepath manually in the file query filter. This is pointlessly annoying. Simplifying explicit context addition to chat queries should make it easy to direct Khoj and improve your response quality.\n\n### Proposed Solution\n\nWhen you type `file:` you should see list of all synced files to auto-complete. This list should be filtered down as you type more letters (e.g `file:Task` should only show `tasks.org` or `TaskList.md` from my documents) as auto-complete suggestions.\n\n### Additional Information\n\nRelated issues: \n- #1025 \n- #1182 \n\n### Link to Discord or Github discussion\n\n_No response_",
      "state": "open",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2025-05-26T19:13:59Z",
      "updated_at": "2025-05-26T19:13:59Z",
      "closed_at": null,
      "labels": [
        "upgrade",
        "good first issue"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1183/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1183",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1183",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:28.246631",
      "comments": []
    },
    {
      "issue_number": 1025,
      "title": "Show autocomplete suggestions for File Query Filters in Search on Obsidian App",
      "body": "### Background\r\nKhoj chat supports [query filters](https://docs.khoj.dev/miscellaneous/query-filters). These allow you to filter notes, documents to use by Khoj for its response (by filename, date range and words). \r\n\r\nCurrently you need type the whole filepath manually in the file query filter. This is pointlessly annoying.\r\n\r\n### Feature\r\n\r\nWhen you type `file:` you should see list of all synced files to auto-complete. This list should be filtered down as you type more letters (e.g `file:Task` should only show `tasks.org` or `TaskList.md` from my documents) as auto-complete suggestions.",
      "state": "open",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2024-12-30T21:34:55Z",
      "updated_at": "2025-05-26T19:08:41Z",
      "closed_at": null,
      "labels": [
        "upgrade",
        "good first issue"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1025/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "samhoooo"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1025",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1025",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:28.246639",
      "comments": [
        {
          "author": "samhoooo",
          "body": "Hi @debanjum I can pick this up",
          "created_at": "2025-01-23T01:50:26Z"
        },
        {
          "author": "debanjum",
          "body": "Hey @samhoooo thanks for taking this up! I've assigned the issue to you. Let me know if you hit any blockers or need any clarifications",
          "created_at": "2025-01-23T08:26:30Z"
        },
        {
          "author": "samhoooo",
          "body": "Hey @debanjum,  please review my work on https://github.com/khoj-ai/khoj/pull/1128",
          "created_at": "2025-03-04T20:08:01Z"
        }
      ]
    },
    {
      "issue_number": 1180,
      "title": "Missing Models",
      "body": "### Server\n\n- [ ] Cloud (https://app.khoj.dev)\n- [x] Self-Hosted Docker\n- [ ] Self-Hosted Python package\n- [ ] Self-Hosted source code\n\n### Clients\n\n- [x] Web browser\n- [ ] Desktop/mobile app\n- [ ] Obsidian\n- [ ] Emacs\n- [ ] WhatsApp\n\n### OS\n\n- [ ] Windows\n- [ ] macOS\n- [x] Linux\n- [ ] Android\n- [ ] iOS\n\n### Khoj version\n\n1.41.0\n\n### Describe the bug\n\nSo I migrated my server lately (this week) and\nin my khoj\n## I tried\n- [x] with khoj-cloud and khoj\n- [x] by wiping my data but not my variables\n\nwith khoj-cloud I simply have **no agent and no model** available,\nwhile with khoj; I have the default agent khoj and only few models;\n\n![Image](https://github.com/user-attachments/assets/97b1f346-68fa-471d-8d31-c351f4b37745)\n\n#### in both if I use docker logs khoj (the name of my khoj container) I see one error:\n> /usr/local/lib/python3.10/dist-packages/django/db/models/fields/__init__.py:1665: RuntimeWarning: DateTimeField Conversation.updated_at received a naive datetime (2025-05-08 15:03:18.662590) while time zone support is active.\n  warnings.warn(\n\n### Current Behavior\n\n- missing agents and models\n\n### Expected Behavior\n\n- having agents and models\n\n### Reproduction Steps\n\n1. Download the Khoj docker-compose.yml file [from Github](https://github.com/khoj-ai/khoj/blob/master/docker-compose.yml)\n````\nmkdir ~/.khoj && cd ~/.khoj\nwget https://raw.githubusercontent.com/khoj-ai/khoj/master/docker-compose.yml\n````\n2. Configure the environment variables in the docker-compose.yml\n- Set `KHOJ_ADMIN_PASSWORD`, `KHOJ_DJANGO_SECRET_KEY` (and optionally the KHOJ_ADMIN_EMAIL) to something secure. This allows you to customize Khoj later via the admin panel.\n- Set `OPENAI_API_KEY`, ANTHROPIC_API_KEY, or GEMINI_API_KEY to your API key if you want to use OpenAI, Anthropic or Gemini commercial chat models respectively.\n\n3. Start Khoj by running the following command in the same directory as your docker-compose.yml file.\n````\ncd ~/.khoj\ndocker-compose up\n````\n\n### Possible Workaround\n\n_No response_\n\n### Additional Information\n\n_No response_\n\n### Link to Discord or Github discussion\n\n_No response_",
      "state": "open",
      "author": "JOduMonT",
      "author_type": "User",
      "created_at": "2025-05-22T15:35:20Z",
      "updated_at": "2025-05-26T11:26:18Z",
      "closed_at": null,
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1180/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1180",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1180",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:28.456357",
      "comments": [
        {
          "author": "JOduMonT",
          "body": "can; at least someone tell me if it's normal, ?\nkind of a limitation for whatever reason.",
          "created_at": "2025-05-25T07:11:36Z"
        },
        {
          "author": "debanjum",
          "body": "Hey, I thought I'd mentioned this issue in a commit. But I'm seeing the django datetime issue as well. I've pushed some potential mitigation for it to master a few hours ago. \n\nCan you try with the `pre` tagged khoj docker image to see if the issue resolves?",
          "created_at": "2025-05-26T06:21:45Z"
        },
        {
          "author": "JOduMonT",
          "body": "@debanjum saddly not :(\neven with :pre it still mssing chat model\nIE: from OpenAI I only have gpt-4o-mini and gpt-4.1\n\nFYI: I even moved temporary my data volumes; so it's like a new install. ",
          "created_at": "2025-05-26T11:26:17Z"
        }
      ]
    },
    {
      "issue_number": 1181,
      "title": "Unsupported config option for volumes: 'khoj_search' and Unsupported config option for services: 'sandbox'",
      "body": "### Server\n\n- [ ] Cloud (https://app.khoj.dev)\n- [x] Self-Hosted Docker\n- [ ] Self-Hosted Python package\n- [ ] Self-Hosted source code\n\n### Clients\n\n- [x] Web browser\n- [ ] Desktop/mobile app\n- [ ] Obsidian\n- [ ] Emacs\n- [ ] WhatsApp\n\n### OS\n\n- [ ] Windows\n- [ ] macOS\n- [x] Linux\n- [ ] Android\n- [ ] iOS\n\n### Khoj version\n\nLast\n\n### Describe the bug\n\nHi, \nFollowing the documentation, I download the docker-compose.yml and I launch: docker-compose up\nBy doing that, I have an error: \n`sudo docker-compose up\nERROR: The Compose file './docker-compose.yml' is invalid because:\nUnsupported config option for volumes: 'khoj_search'\nUnsupported config option for services: 'sandbox'`\n\n### Current Behavior\n\nThe docker container isn't launch\n\n### Expected Behavior\n\nLaunch of Khoj\n\n### Reproduction Steps\n\nOn my Debian 12, I follow the documentation:\n`mkdir ~/.khoj && cd ~/.khoj\nwget https://raw.githubusercontent.com/khoj-ai/khoj/master/docker-compose.yml`\n\nEven without updating KHOJ_ADMIN_PASSWORD, when I'm doing `docker-compose up` isn't working.\n\n### Possible Workaround\n\n_No response_\n\n### Additional Information\n\n_No response_\n\n### Link to Discord or Github discussion\n\n_No response_",
      "state": "open",
      "author": "icolab",
      "author_type": "User",
      "created_at": "2025-05-23T09:27:22Z",
      "updated_at": "2025-05-25T07:17:36Z",
      "closed_at": null,
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1181/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1181",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1181",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:28.648270",
      "comments": [
        {
          "author": "JOduMonT",
          "body": "Hey;\n\n> obviously Ubuntu is not Debian evil are in these subtilities\nbut let's assume that you use the latest version of docker and you did'nt change anything in your /etc/docker/daemon.json\n\nby using this [docker-compose](https://github.com/khoj-ai/khoj/blob/master/docker-compose.yml)\nit should wor",
          "created_at": "2025-05-25T07:17:35Z"
        }
      ]
    },
    {
      "issue_number": 1145,
      "title": "Image Processing Fails with Gemma3 Model via Ollama (Khoj 1.38.0)",
      "body": "### Server\n\n- [ ] Cloud (https://app.khoj.dev)\n- [x] Self-Hosted Docker\n- [ ] Self-Hosted Python package\n- [ ] Self-Hosted source code\n\n### Clients\n\n- [x] Web browser\n- [ ] Desktop/mobile app\n- [ ] Obsidian\n- [ ] Emacs\n- [ ] WhatsApp\n\n### OS\n\n- [ ] Windows\n- [ ] macOS\n- [x] Linux\n- [ ] Android\n- [ ] iOS\n\n### Khoj version\n\n1.38.0\n\n### Describe the bug\n\nWe encountered an issue when using the Khoj 1.38.0 version with the Gemma3 model via Ollama, with vision enabled.\n\n### Current Behavior\n\nWhen an image is submitted, the following errors appear in the logs:\n\nkhoj.routers.storage: AWS is not enabled. Skipping image upload\nkhoj.processor.conversation.openai.utils Error code: 400 -\n{'error': {'message': 'invalid image input', 'type': 'invalid_request_error', 'param': None, 'code': None}}\n\nBased on the following issue, this should have been fixed already:\nhttps://github.com/khoj-ai/khoj/issues/1112\n\nIs there any additional configuration required to properly handle image inputs with vision enabled? Or could this be a regression?\n\n### Expected Behavior\n\nImage inputs should be processed correctly when using the Gemma3 model via Ollama with vision enabled. The image should be accepted and analyzed without errors, and no AWS-related upload warnings should appear if cloud storage is not configured or required.\n\n### Reproduction Steps\n\nRun Khoj version 1.38.0.\nUse the Gemma3 model via Ollama with vision enabled.\nUpload an image in a conversation.\n\n### Possible Workaround\n\n_No response_\n\n### Additional Information\n\n_No response_\n\n### Link to Discord or Github discussion\n\n_No response_",
      "state": "open",
      "author": "consulitsk",
      "author_type": "User",
      "created_at": "2025-03-31T07:19:42Z",
      "updated_at": "2025-05-18T07:35:18Z",
      "closed_at": null,
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1145/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1145",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1145",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:28.855924",
      "comments": [
        {
          "author": "dflatline",
          "body": "I ran into this too. The AWS support log is unrelated to your error. Khoj will use base64 if that AWS call fails.\n\nBut: It turns out Khoj has hardcoded of lists of models that support vision in the source code, and gemma3 is not in there (also my gemma3 is called `gemma3:27b-it-q8_0` so I doubt such",
          "created_at": "2025-05-14T05:08:23Z"
        },
        {
          "author": "dflatline",
          "body": "Here's a patch that hacks that webp conversion to always convert to jpeg instead.  This allows gemma3 to work via ollama's openai endpoint, once you flip the \"Vision Enabled\" switch in the admin panel to actually make gemma3 be usable for vision.\n\nIt also dumps the whole jpeg base64 in the log, whic",
          "created_at": "2025-05-14T05:38:33Z"
        },
        {
          "author": "debanjum",
          "body": "Thanks for the detailed troubleshooting for this @dflatline .\n\n1. The standard way to mark a model as supporting vision is to tick the vision enabled checkmark for your chat model in the Khoj admin panel\n2. I've [a fix](https://github.com/khoj-ai/khoj/pull/1174/commits/022124391be4e52ac8785b972d6ddb",
          "created_at": "2025-05-15T04:11:21Z"
        },
        {
          "author": "dflatline",
          "body": "The `support-browser-operator` branch does seem to work with gemma3 and images!\n\nHowever, I pointed the [LGTM code review vscode addon](https://github.com/cpulvermacher/lgtm) at that branch with Gemini-2.5-pro and it has some complaints. I don't know much about the code base but I will comment the m",
          "created_at": "2025-05-18T07:35:17Z"
        }
      ]
    },
    {
      "issue_number": 1177,
      "title": "Import",
      "body": "### Describe the feature\n\nimport os\nimport openai\n\n# OPENAI API-SCHLÜSSEL HIER EINTRAGEN\nopenai.api_key = \"sk-...\"\n\n# Verzeichnis mit Audiodateien\naudio_verzeichnis = \"./audios\"\n\n# Unterstützte Audioformate\naudio_endungen = (\".m4a\", \".mp3\", \".wav\", \".aac\", \".ogg\", \".flac\", \".amr\", \".opus\")\n\n# Ausgabeordner für Transkripte\nos.makedirs(\"transkripte\", exist_ok=True)\n\nfor dateiname in os.listdir(audio_verzeichnis):\n    if dateiname.lower().endswith(audio_endungen):\n        dateipfad = os.path.join(audio_verzeichnis, dateiname)\n        with open(dateipfad, \"rb\") as f:\n            print(f\"Transkribiere: {dateiname}\")\n            ergebnis = openai.Audio.transcribe(\n                model=\"whisper-1\",\n                file=f,\n                response_format=\"text\"\n            )\n        ausgabe_pfad = os.path.join(\"transkripte\", f\"{dateiname}.txt\")\n        with open(ausgabe_pfad, \"w\", encoding=\"utf-8\") as out:\n            out.write(ergebnis)\n        print(f\"Gespeichert: {ausgabe_pfad}\")\n\n\n### Use Case\n\nimport os\nimport openai\n\n# OPENAI API-SCHLÜSSEL HIER EINTRAGEN\nopenai.api_key = \"sk-...\"\n\n# Verzeichnis mit Audiodateien\naudio_verzeichnis = \"./audios\"\n\n# Unterstützte Audioformate\naudio_endungen = (\".m4a\", \".mp3\", \".wav\", \".aac\", \".ogg\", \".flac\", \".amr\", \".opus\")\n\n# Ausgabeordner für Transkripte\nos.makedirs(\"transkripte\", exist_ok=True)\n\nfor dateiname in os.listdir(audio_verzeichnis):\n    if dateiname.lower().endswith(audio_endungen):\n        dateipfad = os.path.join(audio_verzeichnis, dateiname)\n        with open(dateipfad, \"rb\") as f:\n            print(f\"Transkribiere: {dateiname}\")\n            ergebnis = openai.Audio.transcribe(\n                model=\"whisper-1\",\n                file=f,\n                response_format=\"text\"\n            )\n        ausgabe_pfad = os.path.join(\"transkripte\", f\"{dateiname}.txt\")\n        with open(ausgabe_pfad, \"w\", encoding=\"utf-8\") as out:\n            out.write(ergebnis)\n        print(f\"Gespeichert: {ausgabe_pfad}\")\n\n\n### Proposed Solution\n\nimport os\nimport openai\n\n# OPENAI API-SCHLÜSSEL HIER EINTRAGEN\nopenai.api_key = \"sk-...\"\n\n# Verzeichnis mit Audiodateien\naudio_verzeichnis = \"./audios\"\n\n# Unterstützte Audioformate\naudio_endungen = (\".m4a\", \".mp3\", \".wav\", \".aac\", \".ogg\", \".flac\", \".amr\", \".opus\")\n\n# Ausgabeordner für Transkripte\nos.makedirs(\"transkripte\", exist_ok=True)\n\nfor dateiname in os.listdir(audio_verzeichnis):\n    if dateiname.lower().endswith(audio_endungen):\n        dateipfad = os.path.join(audio_verzeichnis, dateiname)\n        with open(dateipfad, \"rb\") as f:\n            print(f\"Transkribiere: {dateiname}\")\n            ergebnis = openai.Audio.transcribe(\n                model=\"whisper-1\",\n                file=f,\n                response_format=\"text\"\n            )\n        ausgabe_pfad = os.path.join(\"transkripte\", f\"{dateiname}.txt\")\n        with open(ausgabe_pfad, \"w\", encoding=\"utf-8\") as out:\n            out.write(ergebnis)\n        print(f\"Gespeichert: {ausgabe_pfad}\")\n\n\n### Additional Information\n\n_No response_\n\n### Link to Discord or Github discussion\n\n_No response_",
      "state": "closed",
      "author": "silje7",
      "author_type": "User",
      "created_at": "2025-05-13T09:40:15Z",
      "updated_at": "2025-05-13T14:53:51Z",
      "closed_at": "2025-05-13T14:53:51Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1177/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1177",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1177",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:29.054552",
      "comments": [
        {
          "author": "debanjum",
          "body": "Closing. The issue seems unrelated to Khoj. ",
          "created_at": "2025-05-13T14:53:34Z"
        }
      ]
    },
    {
      "issue_number": 1035,
      "title": "[FIX]Agents stop outputting \"Generating a well-informed response\"",
      "body": "## Describe the bug\r\nA clear and concise description of what the bug is. Please include what you were expecting to happen vs. what actually happened.\r\nI want to continue a conversation from some days ago. but agent doesn't actually output \"Generating a well-informed response\"\r\nI've tried: \r\n- reloading browser, \r\n- used another browser,\r\n- /notes please summarise last session \r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\nFind conversation in sidebar\r\ncontinue conversations (user)\r\nassistant *thinks', never outputs \"Generating a well-informed response\"\r\n\r\n## Screenshots\r\n<img width=\"896\" alt=\"Screenshot 2025-01-07 at 12 46 37\" src=\"https://github.com/user-attachments/assets/535401ea-9feb-468a-bcac-b761105dbf9b\" />\r\n\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [ ] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ x] Desktop app\r\n    - [ ] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ x] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\n\r\n## Additional context\r\nis there a way to explore logs of conversations?\r\nis there a way to see how many MB sync files are uploaded? - obsidian keeps notifying something like \"sync failed due to no more space\". Do not know if its related to the issue above.\r\n",
      "state": "open",
      "author": "MartinMayday",
      "author_type": "User",
      "created_at": "2025-01-07T11:52:05Z",
      "updated_at": "2025-05-12T19:16:39Z",
      "closed_at": null,
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 8,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1035/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1035",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1035",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:29.268381",
      "comments": [
        {
          "author": "ProjectMoon",
          "body": "I am seeing this happen with ollama due to a timeout on the Khoj side. ollama logs report connection aborted. But everything in the train of thought seems to work up until the last point. Maybe the prompt is so big and the client (Khoj) is not waiting long enough?",
          "created_at": "2025-01-07T14:29:42Z"
        },
        {
          "author": "ProjectMoon",
          "body": "I notice this issue went away immediately after I updated the model in ollama and the database to have a large context size, so it would stop truncating.\r\n\r\nEdit: still get some timeout issues though, on subsequent messages. Also some Body already consumed errors in the browser console.",
          "created_at": "2025-01-07T14:30:50Z"
        },
        {
          "author": "ProjectMoon",
          "body": "Also, for me, this seems to be specific to research mode enabled.\r\n\r\nEdit: after further testing, this also seems to often be connected to going over the ollama context limit. The Khoj logs say it's truncating to the max prompt limit, but then there's a timeout anyway.\r\n\r\nSo basically, Khoj doesn't ",
          "created_at": "2025-01-07T17:58:52Z"
        },
        {
          "author": "debanjum",
          "body": "Hey @ProjectMoon, thanks for sharing a detailed report. \n\nIt maybe a short timeout window or truncation issue on the Khoj side.\n\nLet me try reproduce this issue using Khoj with a small context model on Ollama. \n\nResearch mode does result in longer context requirements and hence being more likely to ",
          "created_at": "2025-01-10T11:00:31Z"
        },
        {
          "author": "ProjectMoon",
          "body": "I did try editing the code to increase the timeouts. That lead to other strange behavior, which I detailed in the other issue. I'm not sure if I did it right though. I increased the 20 to 200 in gpt.py.",
          "created_at": "2025-01-10T11:11:15Z"
        }
      ]
    },
    {
      "issue_number": 1127,
      "title": "[FIX] Failed to create llama_context",
      "body": "## Describe the bug\n- Successfully running khoj in Windows 11 via Anaconda (with CUDA 12.4)\n- Successfully download the gguf model\n\nUnfortunately, when using chat - there is no response, with python error in khoj cmd console `ValueError: Failed to create llama_context` \n\n\n\n## Error message\n```\n[14:50:11.903191] INFO     khoj.routers.helpers: Loading Offline Chat Model...                            helpers.py:140\nggml_backend_cpu_buffer_type_alloc_buffer: failed to allocate buffer of size 17179869216\nllama_kv_cache_init: failed to allocate buffer for kv cache\nllama_new_context_with_model: llama_kv_cache_init() failed for self-attention cache\nggml_backend_cpu_buffer_type_alloc_buffer: failed to allocate buffer of size 17179869216\nllama_kv_cache_init: failed to allocate buffer for kv cache\nllama_new_context_with_model: llama_kv_cache_init() failed for self-attention cache\n[14:50:16.302477] ERROR    khoj.utils.config: Error while loading offline chat model: Failed to create      config.py:80\n                           llama_context\n                           ╭───────────────────── Traceback (most recent call last) ──────────────────────╮\n                           │ e:\\anaconda\\envs\\khoj\\lib\\site-packages\\khoj\\processor\\conversation\\offline\\ │\n                           │ utils.py:34 in download_model                                                │\n                           │                                                                              │\n                           │   31 │   model_path = load_model_from_cache(repo_id, filename)               │\n                           │   32 │   chat_model = None                                                   │\n                           │   33 │   try:                                                                │\n                           │ ❱ 34 │   │   chat_model = load_model(model_path, repo_id, filename, kwargs)  │\n                           │   35 │   except:                                                             │\n                           │   36 │   │   # Load model on CPU if GPU is not available                     │\n                           │   37 │   │   kwargs[\"n_gpu_layers\"], device = 0, \"cpu\"                       │\n                           │                                                                              │\n                           │ e:\\anaconda\\envs\\khoj\\lib\\site-packages\\khoj\\processor\\conversation\\offline\\ │\n                           │ utils.py:56 in load_model                                                    │\n                           │                                                                              │\n                           │   53 │   from llama_cpp.llama import Llama                                   │\n                           │   54 │                                                                       │\n                           │   55 │   if model_path:                                                      │\n                           │ ❱ 56 │   │   return Llama(model_path, **kwargs)                              │\n                           │   57 │   else:                                                               │\n                           │   58 │   │   return Llama.from_pretrained(repo_id=repo_id, filename=filename │\n                           │   59                                                                         │\n                           │                                                                              │\n                           │ e:\\anaconda\\envs\\khoj\\lib\\site-packages\\llama_cpp\\llama.py:392 in __init__   │\n                           │                                                                              │\n                           │    389 │   │                                                                 │\n                           │    390 │   │   self._ctx = self._stack.enter_context(                        │\n                           │    391 │   │   │   contextlib.closing(                                       │\n                           │ ❱  392 │   │   │   │   _LlamaContext(                                        │\n                           │    393 │   │   │   │   │   model=self._model,                                │\n                           │    394 │   │   │   │   │   params=self.context_params,                       │\n                           │    395 │   │   │   │   │   verbose=self.verbose,                             │\n                           │                                                                              │\n                           │ e:\\anaconda\\envs\\khoj\\lib\\site-packages\\llama_cpp\\_internals.py:298 in       │\n                           │ __init__                                                                     │\n                           │                                                                              │\n                           │   295 │   │   self.ctx = llama_cpp.llama_new_context_with_model(self.model.m │\n                           │   296 │   │                                                                  │\n                           │   297 │   │   if self.ctx is None:                                           │\n                           │ ❱ 298 │   │   │   raise ValueError(\"Failed to create llama_context\")         │\n                           │   299 │   │                                                                  │\n                           │   300 │   │   def free_ctx():                                                │\n                           │   301 │   │   │   if self.ctx is None:                                       │\n                           ╰──────────────────────────────────────────────────────────────────────────────╯\n                           ValueError: Failed to create llama_context\n```\n## Platform\n- Server:\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\n    - [ ] Self-Hosted Docker\n    - [X] Self-Hosted Python package\n    - [ ] Self-Hosted source code\n- Client:\n    - [ ] Obsidian\n    - [ ] Emacs\n    - [ ] Desktop app\n    - [X] Web browser\n    - [ ] WhatsApp\n- OS:\n    - [X] Windows\n    - [ ] macOS\n    - [ ] Linux\n    - [ ] Android\n    - [ ] iOS\n\n### If self-hosted\n- Server Version [e.g. 1.0.1]: 1.23.3\n\n## Additional context\n-\n",
      "state": "open",
      "author": "andreiramani",
      "author_type": "User",
      "created_at": "2025-03-04T08:04:15Z",
      "updated_at": "2025-05-11T02:51:50Z",
      "closed_at": null,
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1127/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1127",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1127",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:29.512734",
      "comments": [
        {
          "author": "debanjum",
          "body": "That's unfortunate. Which offline / local chat model were you trying to use Khoj with?",
          "created_at": "2025-03-28T19:45:47Z"
        },
        {
          "author": "andreiramani",
          "body": "bartowski/meta-llama-3.1-8b-instruct-gguf",
          "created_at": "2025-05-11T02:20:21Z"
        },
        {
          "author": "andreiramani",
          "body": "is it possible using gguf/safetensor model directly in khoj without ollama?",
          "created_at": "2025-05-11T02:51:49Z"
        }
      ]
    },
    {
      "issue_number": 1152,
      "title": "Self-Hosted Docker can not login /server/admin",
      "body": "### Server\n\n- [ ] Cloud (https://app.khoj.dev)\n- [x] Self-Hosted Docker\n- [ ] Self-Hosted Python package\n- [ ] Self-Hosted source code\n\n### Clients\n\n- [x] Web browser\n- [ ] Desktop/mobile app\n- [ ] Obsidian\n- [ ] Emacs\n- [ ] WhatsApp\n\n### OS\n\n- [ ] Windows\n- [x] macOS\n- [ ] Linux\n- [ ] Android\n- [ ] iOS\n\n### Khoj version\n\n1.39.0\n\n### Describe the bug\n\ncan not login admin panel\n\n1. input email and password\n<img width=\"1510\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/642b3329-2cf5-4768-8766-e21c92ace128\" />\n\n2. press login button, and then display\n\n<img width=\"1508\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/69eabaa2-81f3-44de-9f5b-ef559ed957bc\" />\n\n### Current Behavior\n\nopen /server/admin, input email and password before set in docker-compose.yml, then login, but can not login\n\n\n\n### Expected Behavior\n\nlogin admin \n\n### Reproduction Steps\n\nlogin admin panel\n\n### Possible Workaround\n\n_No response_\n\n### Additional Information\n\nserver log\n\n[khoj_log.txt](https://github.com/user-attachments/files/19619671/khoj_log.txt)\n\n### Link to Discord or Github discussion\n\n_No response_",
      "state": "closed",
      "author": "lixianwa",
      "author_type": "User",
      "created_at": "2025-04-06T04:44:08Z",
      "updated_at": "2025-05-01T20:58:16Z",
      "closed_at": "2025-04-07T14:26:01Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1152/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1152",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1152",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:29.741232",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hey @lixianwa Please try the following to see if it fixes your issue to login to the admin panel:\n1. Delete your Khoj DB. (i.e delete the `khoj_db` docker volume via CLI or the Docker desktop app on your Mac)\n2. Set environment variable `KHOJ_DEBUG=True` in your `docker-compose.yml`\n3. Restart the K",
          "created_at": "2025-04-07T11:50:41Z"
        },
        {
          "author": "debanjum",
          "body": "I've pushed some [fixes](https://github.com/khoj-ai/khoj/commit/3fc1435cd102409e031392a446684a309f9eff26) that should (hopefully) resolve this issue by the next release. You can try the fixes now by using the pre-release tagged Khoj docker image (i.e change `image` to `ghcr.io/khoj-ai/khoj:pre` in y",
          "created_at": "2025-04-07T14:22:49Z"
        },
        {
          "author": "lixianwa",
          "body": "> Hey @lixianwa Please try the following to see if it fixes your issue to login to the admin panel:\n> 1. Delete your Khoj DB. (i.e delete the `khoj_db` docker volume via CLI or the Docker desktop app on your Mac)\n> 2. Set environment variable `KHOJ_DEBUG=True` in your `docker-compose.yml`\n> 3. Resta",
          "created_at": "2025-04-08T04:14:07Z"
        },
        {
          "author": "lixianwa",
          "body": "\n> I've pushed some [fixes](https://github.com/khoj-ai/khoj/commit/3fc1435cd102409e031392a446684a309f9eff26) that should (hopefully) resolve this issue by the next release. You can try the fixes now by using the pre-release tagged Khoj docker image (i.e change `image` to `ghcr.io/khoj-ai/khoj:pre` i",
          "created_at": "2025-04-08T04:41:55Z"
        },
        {
          "author": "debanjum",
          "body": "Glad the suggested mitigation worked for you!\n\n> I don't know why deleting db volume data didn't work before. This time, deleting db volume data and opening debug at the same time worked.\n\nIt didn't work because you needed to both delete your db volume and set `KHOJ_DEBUG=true`. The first is expecte",
          "created_at": "2025-04-08T12:45:52Z"
        }
      ]
    },
    {
      "issue_number": 1100,
      "title": "[FIX] Unable to connect to local Ollama using self-hosted Docker",
      "body": "## Describe the bug\nI'm trying to connect to my local ollama server but am getting the following [connection_exceptions](https://github.com/user-attachments/files/18634338/connection_errors.txt) (too large to fit inside the issue) after getting these DEBUG messages inside the server logs:\n```\nserver-1    | [22:43:54.017709] DEBUG    khoj.processor.conversation.openai before_sleep.py:65\nserver-1    |                            .utils: Retrying                                     \nserver-1    |                            khoj.processor.conversation.openai                   \nserver-1    |                            .utils.completion_with_backoff in                    \nserver-1    |                            0.6096594730061932 seconds as it                     \nserver-1    |                            raised APIConnectionError:                           \nserver-1    |                            Connection error..                                   \nserver-1    | [22:43:55.932440] DEBUG    khoj.processor.conversation.openai before_sleep.py:65\nserver-1    |                            .utils: Retrying                                     \nserver-1    |                            khoj.processor.conversation.openai                   \nserver-1    |                            .utils.completion_with_backoff in                    \nserver-1    |                            0.6813156899799166 seconds as it                     \nserver-1    |                            raised APIConnectionError:                           \nserver-1    |                            Connection error..                                   \nserver-1    | [22:43:58.039865] DEBUG    khoj.routers.helpers: Chat actor:      helpers.py:195\nserver-1    |                            Infer information sources to refer:                  \nserver-1    |                            5.843 seconds  \n```\n\nI've tried to setup the `OPENAI_API_BASE` variable to the two following values inside the docker-compose file:\n```yaml\n      - OPENAI_API_BASE=http://host.docker.internal:11434/v1/\n      - OPENAI_API_BASE=http://localhost:11434/v1/\n```\n(and set the same URLs for the AI model API later in the server admin panel).\n\n## To Reproduce\nSteps to reproduce the behavior:\n1) Install ollama\n2) Execute `ollama serve` than `ollama pull llama3.1`\n3) Launch `docker-compose up`, and configure the AI model API and Chat Model as stated in [the doc](https://docs.khoj.dev/advanced/ollama?type=update).\n4) Choose the model that has been configured, and try chatting.\n\n## Screenshots\n\nAPI config\n![Image](https://github.com/user-attachments/assets/cc99737c-8f1a-4d3b-852f-37aa848c8991)\n\nModels config\n![Image](https://github.com/user-attachments/assets/e4f2358f-c170-49f1-bbcc-c8ce23a59cf2)\n\nI tried with the names `8b` and `latest`, since the output of `ollama list` yields\n```\nNAME                ID              SIZE      MODIFIED    \nllama3.1:latest     46e0c10c039e    4.9 GB    2 hours ago \n```\n\n## Platform\n- Server:\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\n    - [X] Self-Hosted Docker\n    - [ ] Self-Hosted Python package\n    - [ ] Self-Hosted source code\n- Client:\n    - [ ] Obsidian\n    - [ ] Emacs\n    - [ ] Desktop app\n    - [X] Web browser\n    - [ ] WhatsApp\n- OS:\n    - [ ] Windows\n    - [ ] macOS\n    - [X] Linux\n    - [ ] Android\n    - [ ] iOS\n\n### If self-hosted\n- Server Version:  v1.36.0\n",
      "state": "open",
      "author": "raphaelventura",
      "author_type": "User",
      "created_at": "2025-02-02T22:38:35Z",
      "updated_at": "2025-04-30T17:23:11Z",
      "closed_at": null,
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 23,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1100/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1100",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1100",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:29.949985",
      "comments": []
    },
    {
      "issue_number": 1023,
      "title": "[IDEA] Evaluate Claude MCP with Khoj",
      "body": "Evaluate:\r\n- What are the concrete benefits of supporting Claude MCP in Khoj?\r\n- What is the work required to support Claude MCP in Khoj?\r\n\r\nSee the initial discussion in https://github.com/khoj-ai/khoj/discussions/1022 by @shlomitsur and @vlazic",
      "state": "open",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2024-12-30T20:39:51Z",
      "updated_at": "2025-04-30T09:33:02Z",
      "closed_at": null,
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1023/reactions",
        "total_count": 6,
        "+1": 6,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1023",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1023",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:29.950007",
      "comments": [
        {
          "author": "napter",
          "body": "This would be incredibly useful. I've been using MCP servers with librechat over the weekend and its incredible - it would immediately expand the agents capabilities to the entire ecosystem of mcp servers. \r\n\r\nI would recommend renaming research mode to autonomous mode (or creating a second mode) - ",
          "created_at": "2025-01-13T05:39:39Z"
        },
        {
          "author": "datascience279",
          "body": "MCP support would be great! Any update on this?",
          "created_at": "2025-04-28T06:57:32Z"
        },
        {
          "author": "datascience279",
          "body": "@debanjum @sabaimran Thank you for the awesome work! We would love to see the MCP support! Can you please update if there are any plans for integration?",
          "created_at": "2025-04-30T09:32:37Z"
        }
      ]
    },
    {
      "issue_number": 1044,
      "title": "[FIX] Response.json: Body has already been consumed",
      "body": "## Describe the bug\r\nSeems to be related to or caused by #1035. While working through a response, the web app will print out `Uncaught (in promise) TypeError: Response.json: Body has already been consumed.`. Then it just sits there, and nothing more happens. The spinner just keeps spinning, and the thought process does not advance, nor does it create a response.\r\n\r\n## To Reproduce\r\nIt seems to happen when reading pages via the free Jina API, and those pages taking a long time to be processed. The server logs are something like this (I've removed a bunch of info logs about page loads and context stuffing warnings):\r\n\r\n```\r\n[09:04:23.650689] DEBUG    khoj.processor.tools.online_search: Extracting relevant information from web page at 'https://arxiv.org/abs/2207.11823' took: 31.422 seconds                                 \r\n[09:04:23.653590] INFO     khoj.processor.tools.online_search: Reading web page with Jina at 'https://www.sciencetimes.com/articles/60200/20250107/plutos-largest-moon-formed-kiss-capture-colision-scientists-discover.htm' took: 32.110 seconds                                                           \r\n[09:05:09.848899] DEBUG    khoj.processor.tools.online_search: Extracting relevant information from web page at 'https://www.sciencetimes.com/articles/60200/20250107/plutos-largest-moon-formed-kiss-capture-collision-scientists-discover.htm' took: 46.194 seconds                  \r\n[09:05:31.629136] INFO     khoj.processor.tools.online_search: Reading web page with Jina at 'https://www.astronomy.com/science/astronomers-have-a-new-theory-for-why-uranus-spins-on-its-side/' took: 100.085 seconds                                              \r\n```\r\n\r\n## Screenshots\r\nThe UI:\r\n\r\n![image](https://github.com/user-attachments/assets/70e051b5-6a52-4820-8544-9bc8e2d45e73)\r\n\r\nBrowser console:\r\n\r\n![image](https://github.com/user-attachments/assets/3ef09364-6be0-4e79-a0e1-b08e1e940044)\r\n\r\n## Platform\r\n- Server: Self-Hosted Docker\r\n- Client: WebApp\r\n- OS: Linux\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]: 1.33.2\r\n- Anonymous Mode: Disabled\r\n- Search API: Searxng\r\n- Web scraper: Jina free (no API key set)\r\n\r\n## Additional context\r\nThis happens whether or not research mode is enabled. Other information:\r\n- Using ollama 0.5.4\r\n- Quinn 2.5 14b instruct with a 30k context size\r\n- AMD RX 6800 XT, with 96% of the model loaded into VRAM by ollama and 4% on the CPU.\r\n- It runs fine up until it starts extracting content from webpages with Jina, and then somewhere along the way the API call breaks down in the client.",
      "state": "open",
      "author": "ProjectMoon",
      "author_type": "User",
      "created_at": "2025-01-08T09:14:26Z",
      "updated_at": "2025-04-26T20:51:34Z",
      "closed_at": null,
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1044/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1044",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1044",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:30.168178",
      "comments": []
    },
    {
      "issue_number": 1169,
      "title": "[IDEA]Handle big data",
      "body": "### Describe the Feature\n\nIn my work, most APIs return very large datasets — for example, a fund's daily holdings over the past year.\n\nI would like the agent to be able to solve complex problems step by step, which requires retrieving data from multiple APIs at different stages.\n\nIn this scenario, the agent faces two main challenges:\n\n1. Sending the entire dataset to the LLM is often unnecessary. In many cases, the LLM only needs to understand what a human would look at in a Jupyter notebook — such as the first few rows and basic column descriptions. This summary can be referred to as the table schema or metadata.\n\n2. We shouldn’t let the LLM generate API calls that include the full dataset. It's slow and can be expensive.\n\n### Proposed Solution\n\nTo solve these issues, the agent should support a **memory** mechanism:\n\n- When the agent receives data from an API, it should store the full dataset in memory.\n- It then generates a summary (schema or metadata) and assigns a memory ID.\n- The LLM can refer to this memory ID in future steps to operate on the actual data without needing to reprocess or resend it.\n- The agent can then fetch the data from memory using the ID and pass it to the next API or execution step (e.g., a Python sandbox).\n\n### Use Case\n\nFor example, I want to calculate the standard deviation of a fund’s daily return rate over the past 10 years.\n\n- First, the agent retrieves the full dataset from an API.\n- Then, it stores the data in memory and passes only the metadata to the LLM.\n- The LLM generates the logic using the memory ID.\n- Finally, the agent uses the memory to fetch the actual data and perform the computation.\n\n### Additional Information\n\n_No response_\n\n### Link to Discord or GitHub Discussion\n\n_No response_\n\n---\n\nLet me know if you want to make the tone more formal, technical, or casual.",
      "state": "open",
      "author": "PaleNeutron",
      "author_type": "User",
      "created_at": "2025-04-25T03:16:46Z",
      "updated_at": "2025-04-25T03:28:21Z",
      "closed_at": null,
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1169/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1169",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1169",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:30.168192",
      "comments": []
    },
    {
      "issue_number": 1036,
      "title": "[FIX] adding agent results in a 500 error",
      "body": "## Describe the bug\r\nA clear and concise description of what the bug is. Please include what you were expecting to happen vs. what actually happened.\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [X] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [X] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [X] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n\r\nRequest URL:\r\nhttp://localhost:42110/api/agents\r\nRequest Method:\r\nPOST\r\nStatus Code:\r\n500 Internal Server Error\r\nRemote Address:\r\nlocalhost:42110\r\nReferrer Policy:\r\nstrict-origin-when-cross-origin\r\n\r\nPayload\r\n{\"name\":\"dsa\",\"persona\":\"das\",\"color\":\"cyan\",\"icon\":\"Code\",\"privacy_level\":\"private\",\"chat_model\":\"bartowski/gemma-2-2b-it-GGUF\",\"files\":[]}\r\n\r\n```bash\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpcore/_exceptions.py\", line 10, in map_exceptions\r\n    yield\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpcore/_backends/sync.py\", line 212, in connect_tcp\r\n    sock = socket.create_connection(\r\n  File \"/usr/lib/python3.10/socket.py\", line 824, in create_connection\r\n    for res in getaddrinfo(host, port, 0, SOCK_STREAM):\r\n  File \"/usr/lib/python3.10/socket.py\", line 955, in getaddrinfo\r\n    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):\r\nsocket.gaierror: [Errno -2] Name or service not known\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpx/_transports/default.py\", line 66, in map_httpcore_exceptions\r\n    yield\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpx/_transports/default.py\", line 228, in handle_request\r\n    resp = self._pool.handle_request(req)\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpcore/_sync/connection_pool.py\", line 262, in handle_request\r\n    raise exc\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpcore/_sync/connection_pool.py\", line 245, in handle_request\r\n    response = connection.handle_request(request)\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpcore/_sync/connection.py\", line 99, in handle_request\r\n    raise exc\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpcore/_sync/connection.py\", line 76, in handle_request\r\n    stream = self._connect(request)\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpcore/_sync/connection.py\", line 124, in _connect\r\n    stream = self._network_backend.connect_tcp(**kwargs)\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpcore/_backends/sync.py\", line 211, in connect_tcp\r\n    with map_exceptions(exc_map):\r\n  File \"/usr/lib/python3.10/contextlib.py\", line 153, in __exit__\r\n    self.gen.throw(typ, value, traceback)\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpcore/_exceptions.py\", line 14, in map_exceptions\r\n    raise to_exc(exc) from exc\r\nhttpcore.ConnectError: [Errno -2] Name or service not known\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.10/dist-packages/openai/_base_client.py\", line 993, in _request\r\n    response = self._client.send(\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpx/_client.py\", line 901, in send\r\n    response = self._send_handling_auth(\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpx/_client.py\", line 929, in _send_handling_auth\r\n    response = self._send_handling_redirects(\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpx/_client.py\", line 966, in _send_handling_redirects\r\n    response = self._send_single_request(request)\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpx/_client.py\", line 1002, in _send_single_request\r\n    response = transport.handle_request(request)\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpx/_transports/default.py\", line 227, in handle_request\r\n    with map_httpcore_exceptions():\r\n  File \"/usr/lib/python3.10/contextlib.py\", line 153, in __exit__\r\n    self.gen.throw(typ, value, traceback)\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpx/_transports/default.py\", line 83, in map_httpcore_exceptions\r\n    raise mapped_exc(message) from exc\r\nhttpx.ConnectError: [Errno -2] Name or service not known\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpcore/_exceptions.py\", line 10, in map_exceptions\r\n    yield\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpcore/_backends/sync.py\", line 212, in connect_tcp\r\n    sock = socket.create_connection(\r\n  File \"/usr/lib/python3.10/socket.py\", line 824, in create_connection\r\n    for res in getaddrinfo(host, port, 0, SOCK_STREAM):\r\n  File \"/usr/lib/python3.10/socket.py\", line 955, in getaddrinfo\r\n    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):\r\nsocket.gaierror: [Errno -2] Name or service not known\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpx/_transports/default.py\", line 66, in map_httpcore_exceptions\r\n    yield\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpx/_transports/default.py\", line 228, in handle_request\r\n    resp = self._pool.handle_request(req)\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpcore/_sync/connection_pool.py\", line 262, in handle_request\r\n    raise exc\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpcore/_sync/connection_pool.py\", line 245, in handle_request\r\n    response = connection.handle_request(request)\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpcore/_sync/connection.py\", line 99, in handle_request\r\n    raise exc\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpcore/_sync/connection.py\", line 76, in handle_request\r\n    stream = self._connect(request)\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpcore/_sync/connection.py\", line 124, in _connect\r\n    stream = self._network_backend.connect_tcp(**kwargs)\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpcore/_backends/sync.py\", line 211, in connect_tcp\r\n    with map_exceptions(exc_map):\r\n  File \"/usr/lib/python3.10/contextlib.py\", line 153, in __exit__\r\n    self.gen.throw(typ, value, traceback)\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpcore/_exceptions.py\", line 14, in map_exceptions\r\n    raise to_exc(exc) from exc\r\nhttpcore.ConnectError: [Errno -2] Name or service not known\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.10/dist-packages/openai/_base_client.py\", line 993, in _request\r\n    response = self._client.send(\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpx/_client.py\", line 901, in send\r\n    response = self._send_handling_auth(\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpx/_client.py\", line 929, in _send_handling_auth\r\n    response = self._send_handling_redirects(\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpx/_client.py\", line 966, in _send_handling_redirects\r\n    response = self._send_single_request(request)\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpx/_client.py\", line 1002, in _send_single_request\r\n    response = transport.handle_request(request)\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpx/_transports/default.py\", line 227, in handle_request\r\n    with map_httpcore_exceptions():\r\n  File \"/usr/lib/python3.10/contextlib.py\", line 153, in __exit__\r\n    self.gen.throw(typ, value, traceback)\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpx/_transports/default.py\", line 83, in map_httpcore_exceptions\r\n    raise mapped_exc(message) from exc\r\nhttpx.ConnectError: [Errno -2] Name or service not known\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpcore/_exceptions.py\", line 10, in map_exceptions\r\n    yield\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpcore/_backends/sync.py\", line 212, in connect_tcp\r\n    sock = socket.create_connection(\r\n  File \"/usr/lib/python3.10/socket.py\", line 824, in create_connection\r\n    for res in getaddrinfo(host, port, 0, SOCK_STREAM):\r\n  File \"/usr/lib/python3.10/socket.py\", line 955, in getaddrinfo\r\n    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):\r\nsocket.gaierror: [Errno -2] Name or service not known\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpx/_transports/default.py\", line 66, in map_httpcore_exceptions\r\n    yield\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpx/_transports/default.py\", line 228, in handle_request\r\n    resp = self._pool.handle_request(req)\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpcore/_sync/connection_pool.py\", line 262, in handle_request\r\n    raise exc\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpcore/_sync/connection_pool.py\", line 245, in handle_request\r\n    response = connection.handle_request(request)\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpcore/_sync/connection.py\", line 99, in handle_request\r\n    raise exc\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpcore/_sync/connection.py\", line 76, in handle_request\r\n    stream = self._connect(request)\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpcore/_sync/connection.py\", line 124, in _connect\r\n    stream = self._network_backend.connect_tcp(**kwargs)\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpcore/_backends/sync.py\", line 211, in connect_tcp\r\n    with map_exceptions(exc_map):\r\n  File \"/usr/lib/python3.10/contextlib.py\", line 153, in __exit__\r\n    self.gen.throw(typ, value, traceback)\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpcore/_exceptions.py\", line 14, in map_exceptions\r\n    raise to_exc(exc) from exc\r\nhttpcore.ConnectError: [Errno -2] Name or service not known\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.10/dist-packages/openai/_base_client.py\", line 993, in _request\r\n    response = self._client.send(\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpx/_client.py\", line 901, in send\r\n    response = self._send_handling_auth(\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpx/_client.py\", line 929, in _send_handling_auth\r\n    response = self._send_handling_redirects(\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpx/_client.py\", line 966, in _send_handling_redirects\r\n    response = self._send_single_request(request)\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpx/_client.py\", line 1002, in _send_single_request\r\n    response = transport.handle_request(request)\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpx/_transports/default.py\", line 227, in handle_request\r\n    with map_httpcore_exceptions():\r\n  File \"/usr/lib/python3.10/contextlib.py\", line 153, in __exit__\r\n    self.gen.throw(typ, value, traceback)\r\n  File \"/usr/local/lib/python3.10/dist-packages/httpx/_transports/default.py\", line 83, in map_httpcore_exceptions\r\n    raise mapped_exc(message) from exc\r\nhttpx.ConnectError: [Errno -2] Name or service not known\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/middleware/errors.py\", line 165, in __call__\r\n    await self.app(scope, receive, _send)\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/middleware/sessions.py\", line 85, in __call__\r\n    await self.app(scope, receive, send_wrapper)\r\n  File \"/app/src/khoj/configure.py\", line 351, in __call__\r\n    await self.app(scope, receive, send)\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/middleware/authentication.py\", line 48, in __call__\r\n    await self.app(scope, receive, send)\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/middleware/base.py\", line 187, in __call__\r\n    response = await self.dispatch_func(request, call_next)\r\n  File \"/app/src/khoj/configure.py\", line 84, in dispatch\r\n    response = await call_next(request)\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/middleware/base.py\", line 163, in call_next\r\n    raise app_exc\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/middleware/base.py\", line 149, in coro\r\n    await self.app(scope, receive_or_disconnect, send_no_error)\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/middleware/cors.py\", line 93, in __call__\r\n    await self.simple_response(scope, receive, send, request_headers=headers)\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/middleware/cors.py\", line 144, in simple_response\r\n    await self.app(scope, receive, send)\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/middleware/exceptions.py\", line 62, in __call__\r\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\r\n    raise exc\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\r\n    await app(scope, receive, sender)\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/routing.py\", line 715, in __call__\r\n    await self.middleware_stack(scope, receive, send)\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/routing.py\", line 735, in app\r\n    await route.handle(scope, receive, send)\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/routing.py\", line 288, in handle\r\n    await self.app(scope, receive, send)\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/routing.py\", line 76, in app\r\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\r\n    raise exc\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\r\n    await app(scope, receive, sender)\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/routing.py\", line 73, in app\r\n    response = await f(request)\r\n  File \"/usr/local/lib/python3.10/dist-packages/fastapi/routing.py\", line 301, in app\r\n    raw_response = await run_endpoint_function(\r\n  File \"/usr/local/lib/python3.10/dist-packages/fastapi/routing.py\", line 212, in run_endpoint_function\r\n    return await dependant.call(**values)\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/authentication.py\", line 75, in async_wrapper\r\n    return await func(*args, **kwargs)\r\n  File \"/app/src/khoj/routers/api_agents.py\", line 194, in create_agent\r\n    is_safe_prompt, reason = await acheck_if_safe_prompt(\r\n  File \"/app/src/khoj/routers/helpers.py\", line 324, in acheck_if_safe_prompt\r\n    response = await send_message_to_model_wrapper(safe_prompt_check, user=user)\r\n  File \"/app/src/khoj/routers/helpers.py\", line 1035, in send_message_to_model_wrapper\r\n    return send_message_to_model(\r\n  File \"/app/src/khoj/processor/conversation/openai/gpt.py\", line 129, in send_message_to_model\r\n    return completion_with_backoff(\r\n  File \"/usr/local/lib/python3.10/dist-packages/tenacity/__init__.py\", line 330, in wrapped_f\r\n    return self(f, *args, **kw)\r\n  File \"/usr/local/lib/python3.10/dist-packages/tenacity/__init__.py\", line 467, in __call__\r\n    do = self.iter(retry_state=retry_state)\r\n  File \"/usr/local/lib/python3.10/dist-packages/tenacity/__init__.py\", line 368, in iter\r\n    result = action(retry_state)\r\n  File \"/usr/local/lib/python3.10/dist-packages/tenacity/__init__.py\", line 410, in exc_check\r\n    raise retry_exc.reraise()\r\n  File \"/usr/local/lib/python3.10/dist-packages/tenacity/__init__.py\", line 183, in reraise\r\n    raise self.last_attempt.result()\r\n  File \"/usr/lib/python3.10/concurrent/futures/_base.py\", line 451, in result\r\n    return self.__get_result()\r\n  File \"/usr/lib/python3.10/concurrent/futures/_base.py\", line 403, in __get_result\r\n    raise self._exception\r\n  File \"/usr/local/lib/python3.10/dist-packages/tenacity/__init__.py\", line 470, in __call__\r\n    result = fn(*args, **kwargs)\r\n  File \"/app/src/khoj/processor/conversation/openai/utils.py\", line 77, in completion_with_backoff\r\n    chat: ChatCompletion | openai.Stream[ChatCompletionChunk] = client.chat.completions.create(\r\n  File \"/usr/local/lib/python3.10/dist-packages/openai/_utils/_utils.py\", line 275, in wrapper\r\n    return func(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.10/dist-packages/openai/resources/chat/completions.py\", line 859, in create\r\n    return self._post(\r\n  File \"/usr/local/lib/python3.10/dist-packages/openai/_base_client.py\", line 1280, in post\r\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\r\n  File \"/usr/local/lib/python3.10/dist-packages/openai/_base_client.py\", line 957, in request\r\n    return self._request(\r\n  File \"/usr/local/lib/python3.10/dist-packages/openai/_base_client.py\", line 1017, in _request\r\n    return self._retry_request(\r\n  File \"/usr/local/lib/python3.10/dist-packages/openai/_base_client.py\", line 1095, in _retry_request\r\n    return self._request(\r\n  File \"/usr/local/lib/python3.10/dist-packages/openai/_base_client.py\", line 1017, in _request\r\n    return self._retry_request(\r\n  File \"/usr/local/lib/python3.10/dist-packages/openai/_base_client.py\", line 1095, in _retry_request\r\n    return self._request(\r\n  File \"/usr/local/lib/python3.10/dist-packages/openai/_base_client.py\", line 1027, in _request\r\n    raise APIConnectionError(request=request) from err\r\nopenai.APIConnectionError: Connection error.\r\n\r\n```",
      "state": "closed",
      "author": "baditaflorin",
      "author_type": "User",
      "created_at": "2025-01-07T13:00:20Z",
      "updated_at": "2025-04-19T13:32:26Z",
      "closed_at": "2025-04-19T13:32:24Z",
      "labels": [
        "fix",
        "question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1036/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1036",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1036",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:30.168198",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Hi @baditaflorin , could you share details of how you've configured your Ai model configuration and chat model options? The error seems to be originating from the call to the LLM. ",
          "created_at": "2025-01-07T17:33:33Z"
        },
        {
          "author": "baditaflorin",
          "body": "I don't even know how to respond as I have tried every possible permutations that they are. \r\n\r\nI had put it in offline mode, in openai mode it never worked and the logs are useless \r\n\r\n<img width=\"1245\" alt=\"image\" src=\"https://github.com/user-attachments/assets/618d088b-7b5c-43bd-b917-fec5202feb02",
          "created_at": "2025-01-07T18:11:38Z"
        },
        {
          "author": "baditaflorin",
          "body": "To try to have everything in one place this is the setup that I needed to arrive just to be able to access the admin panel repeatably without the CORS errors and to try to have all things in one network so they can communicate between themselves \r\n\r\nentrypoint.sh\r\n```\r\n#!/bin/bash\r\nset -e\r\n\r\n# Path ",
          "created_at": "2025-01-07T18:18:43Z"
        },
        {
          "author": "chenyunlin00",
          "body": "I also encountered the same problem.",
          "created_at": "2025-01-08T01:43:54Z"
        },
        {
          "author": "debanjum",
          "body": "@baditaflorin that's a pretty intense setup. If I'm reading the config correctly, are you trying to run Khoj from the github.dev remote/cloud editor thing? I'm not familiar with the networking setup on github.dev to comment\r\n\r\n- Can you try with the latest `docker-compose.yml` in master to see if ch",
          "created_at": "2025-01-09T04:46:50Z"
        }
      ]
    },
    {
      "issue_number": 1047,
      "title": "[FIX] Chat with LMStudio Hosted Model via Khoj Docker on Windows",
      "body": "## Describe the bug\r\nCannot get chat to run and complete on any of my chat models, or api providers remotely or locally via LM Studio. \r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\nSelf host with docker.\r\nSetup as per docs for LM Studio config.\r\nRun chat locally after config of admin panel per docs.\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\n![image](https://github.com/user-attachments/assets/8a905e7a-ca77-46f0-b651-894481943d3a)\r\n![image](https://github.com/user-attachments/assets/46cc62f7-7ebc-4f7c-bf82-a7036582369e)\r\n![image](https://github.com/user-attachments/assets/1a3b162b-387f-43db-a35d-42ffa21384e5)\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [X] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [X] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [X] Windows OS: Windows 11 Pro Workstation 10.0.22631 Build 22631\r\n    - [ ] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\n1.33.2\r\nghcr.io/khoj-ai/khoj:latest sha256:56ea19cc86254e122eba855f3e932dc0d82da4f2e01675357613d2e65bd683b1\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n```\r\n$ cat docker-compose.yml\r\nservices:\r\n  database:\r\n    image: ankane/pgvector\r\n    ports:\r\n      - \"5432:5432\"\r\n    environment:\r\n      POSTGRES_USER: postgres\r\n      POSTGRES_PASSWORD: REDACTED\r\n      POSTGRES_DB: postgres\r\n    volumes:\r\n      - khoj_db:/var/lib/postgresql/data/\r\n    healthcheck:\r\n      test: [\"CMD-SHELL\", \"pg_isready -U postgres\"]\r\n      interval: 30s\r\n      timeout: 10s\r\n      retries: 5\r\n  sandbox:\r\n    image: ghcr.io/khoj-ai/terrarium:latest\r\n    ports:\r\n      - \"8080:8080\"\r\n  search:\r\n    image: docker.io/searxng/searxng:latest\r\n    ports:\r\n      - \"42113:8080\"\r\n    volumes:\r\n      - khoj_search:/etc/searxng\r\n    environment:\r\n      - SEARXNG_BASE_URL=http://localhost:42113/\r\n  server:\r\n    depends_on:\r\n      database:\r\n        condition: service_healthy\r\n    # Use the following line to use the latest version of khoj. Otherwise, it will build from source. Set this to ghcr.io/khoj-ai/khoj-cloud:latest if you want to use the prod image.\r\n    image: ghcr.io/khoj-ai/khoj:latest\r\n    # Uncomment the following line to build from source. This will take a few minutes. Comment the next two lines out if you want to use the official image.\r\n    # build:\r\n      # context: .\r\n    ports:\r\n      # If changing the local port (left hand side), no other changes required.\r\n      # If changing the remote port (right hand side),\r\n      #   change the port in the args in the build section,\r\n      #   as well as the port in the command section to match\r\n      - \"42110:42110\"\r\n    working_dir: /app\r\n    volumes:\r\n      - khoj_config:/root/.khoj/\r\n      - khoj_models:/root/.cache/torch/sentence_transformers\r\n      - khoj_models:/root/.cache/huggingface\r\n    # Use 0.0.0.0 to explicitly set the host ip for the service on the container. https://pythonspeed.com/articles/docker-connection-refused/\r\n    environment:\r\n      - POSTGRES_DB=postgres\r\n      - POSTGRES_USER=postgres\r\n      - POSTGRES_PASSWORD=REDACTED\r\n      - POSTGRES_HOST=database\r\n      - POSTGRES_PORT=5432\r\n      - KHOJ_DJANGO_SECRET_KEY=REDACTED\r\n      - KHOJ_DEBUG=False\r\n      - KHOJ_ADMIN_EMAIL=REDACTED\r\n      - KHOJ_ADMIN_PASSWORD=REDACTED\r\n      # Default URL of Terrarium, the Python sandbox used by Khoj to run code. Its container is specified above\r\n      - KHOJ_TERRARIUM_URL=http://host.docker.internal:8080\r\n      # Default URL of SearxNG, the default web search engine used by Khoj. Its container is specified above\r\n      - KHOJ_SEARXNG_URL=http://host.docker.internal:42113\r\n      # Uncomment line below to use with Ollama running on your local machine at localhost:11434.\r\n      # Change URL to use with other OpenAI API compatible providers like VLLM, LMStudio etc.\r\n      - OPENAI_API_BASE=http://host.docker.internal:1234/v1\r\n      #\r\n      # Uncomment appropriate lines below to use chat models by OpenAI, Anthropic, Google.\r\n      # Ensure you set your provider specific API keys.\r\n      # ---\r\n      # - OPENAI_API_KEY=your_openai_api_key\r\n      # - GEMINI_API_KEY=your_gemini_api_key\r\n      # - ANTHROPIC_API_KEY=your_anthropic_api_key\r\n      #\r\n      # Uncomment appropriate lines below to enable web results with Khoj\r\n      # Ensure you set your provider specific API keys.\r\n      # ---\r\n      # Free, Slower API. Does both web search and webpage read. Get API key from https://jina.ai/\r\n      - JINA_API_KEY=REDACTED\r\n      # Paid, Fast API. Only does web search. Get API key from https://serper.dev/\r\n      # - SERPER_DEV_API_KEY=your_serper_dev_api_key\r\n      # Paid, Fast, Open API. Only does webpage read. Get API key from https://firecrawl.dev/\r\n      # - FIRECRAWL_API_KEY=your_firecrawl_api_key\r\n      # Paid, Fast, Higher Read Success API. Only does webpage read. Get API key from https://olostep.com/\r\n      # - OLOSTEP_API_KEY=your_olostep_api_key\r\n      #\r\n      #EMAIL API\r\n      - RESEND_EMAIL=REDACTED\r\n      - RESEND_API_KEY=REDACTED\r\n      # Uncomment the necessary lines below to make your instance publicly accessible.\r\n      # Replace the KHOJ_DOMAIN with either your domain or IP address (no http/https prefix).\r\n      # Proceed with caution, especially if you are using anonymous mode.\r\n      # ---\r\n      - KHOJ_NO_HTTPS=True\r\n      - KHOJ_DOMAIN=localhost,host.docker.internal,REDACTED\r\n      #- KHOJ_DOMAIN=host.docker.internal\r\n      #- KHOJ_DOMAIN=REDACTED\r\n      # Uncomment the line below to disable telemetry.\r\n      # Telemetry helps us prioritize feature development and understand how people are using Khoj\r\n      # Read more at https://docs.khoj.dev/miscellaneous/telemetry\r\n      #- KHOJ_TELEMETRY_DISABLE=True\r\n    # Comment out this line when you're using the official ghcr.io/khoj-ai/khoj-cloud:latest prod image.\r\n    command: --host=\"0.0.0.0\" --port=42110 -vv --anonymous-mode #--non-interactive\r\n\r\n\r\nvolumes:\r\n  khoj_config:\r\n  khoj_db:\r\n  khoj_models:\r\n  khoj_search:\r\n```\r\n```\r\n$ docker ps\r\nCONTAINER ID   IMAGE                              COMMAND                  CREATED          STATUS                    PORTS                      NAMES\r\n32a8b004a13b   ghcr.io/khoj-ai/khoj:latest        \"python3 src/khoj/ma…\"   25 minutes ago   Up 24 minutes             0.0.0.0:42110->42110/tcp   khoj-server-1\r\n1a8004eaaf1d   ankane/pgvector                    \"docker-entrypoint.s…\"   25 minutes ago   Up 25 minutes (healthy)   0.0.0.0:5432->5432/tcp     khoj-database-1\r\nd5a2fa215c28   searxng/searxng:latest             \"/sbin/tini -- /usr/…\"   25 minutes ago   Up 25 minutes             0.0.0.0:42113->8080/tcp    khoj-search-1\r\n4a4be55a5e78   ghcr.io/khoj-ai/terrarium:latest   \"ts-node src/index.ts\"   25 minutes ago   Up 25 minutes (healthy)   0.0.0.0:8080->8080/tcp     khoj-sandbox-1\r\n```\r\n```$ docker image ls\r\nREPOSITORY                                    TAG                   IMAGE ID       CREATED         SIZE\r\nghcr.io/khoj-ai/khoj                          latest                56ea19cc8625   20 hours ago    4.51GB\r\nsearxng/searxng                               latest                a719598eedf2   2 days ago      283MB\r\nghcr.io/khoj-ai/terrarium                     latest                594f4386bb86   3 weeks ago     432MB```\r\n```\r\n\r\n`CONTAINER LOGS` [HERE](https://pastebin.com/cW1CBxYL): GH reached 65536 character limit. ",
      "state": "closed",
      "author": "RyzeNGrind",
      "author_type": "User",
      "created_at": "2025-01-08T19:46:53Z",
      "updated_at": "2025-04-19T13:26:43Z",
      "closed_at": "2025-04-19T13:26:41Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1047/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1047",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1047",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:30.374573",
      "comments": [
        {
          "author": "RyzeNGrind",
          "body": "_Container Logs_:\r\n`2025-01-08 14:30:11 server-1    | [19:30:11.047037] INFO     uvicorn.access: 172.24.0.1:55720 -    h11_impl.py:476\r\n2025-01-08 14:30:11 server-1    |                            \"GET /api/chat/sessions HTTP/1.1\" 200                \r\n2025-01-08 14:30:11 server-1    | [19:30:11.0489",
          "created_at": "2025-01-08T19:48:16Z"
        },
        {
          "author": "debanjum",
          "body": "LMStudio is not fully supported currently as their OpenAI compatible API does not support json mode, which Khoj uses extensively. I've put up a notice in the [Khoj docs about LMStudio](https://docs.khoj.dev/advanced/lmstudio/). You can try use local models via Ollama until support is re-enabled",
          "created_at": "2025-04-19T13:26:41Z"
        }
      ]
    },
    {
      "issue_number": 1137,
      "title": "Why I already set the KHOJ_ADMIN_PASSWORD, KHOJ_DJANGO_SECRET_KEY and KHOJ_ADMIN_EMAIL but I still can't see the Khoj Admin Panel",
      "body": "### Server\n\n- [ ] Cloud (https://app.khoj.dev)\n- [x] Self-Hosted Docker\n- [ ] Self-Hosted Python package\n- [ ] Self-Hosted source code\n\n### Clients\n\n- [ ] Web browser\n- [x] Desktop/mobile app\n- [ ] Obsidian\n- [ ] Emacs\n- [ ] WhatsApp\n\n### OS\n\n- [x] Windows\n- [ ] macOS\n- [ ] Linux\n- [ ] Android\n- [ ] iOS\n\n### Khoj version\n\n latest\n\n### Describe the bug\n\nI already set the KHOJ_ADMIN_PASSWORD, KHOJ_DJANGO_SECRET_KEY and KHOJ_ADMIN_EMAIL but I still can't see the Khoj Admin Panel\n\n### Current Behavior\n\ni can use the local model but can't use the online model\n\n### Expected Behavior\n\npls told ne how to fix\n\n### Reproduction Steps\n\njust followed the step in self host doc\n\n### Possible Workaround\n\n_No response_\n\n### Additional Information\n\n_No response_\n\n### Link to Discord or Github discussion\n\n_No response_",
      "state": "closed",
      "author": "wenwenshenqihailuo",
      "author_type": "User",
      "created_at": "2025-03-26T08:58:06Z",
      "updated_at": "2025-04-19T13:15:40Z",
      "closed_at": "2025-04-19T13:15:39Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1137/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1137",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1137",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:30.579285",
      "comments": [
        {
          "author": "debanjum",
          "body": "What error are you seeing when you try access you Khoj admin panel at http://localhost:42110/server/admin?",
          "created_at": "2025-03-28T19:27:52Z"
        },
        {
          "author": "wenwenshenqihailuo",
          "body": "![Image](https://github.com/user-attachments/assets/900d15da-6dcb-47b8-b4da-ce8f76912837)\n\n<img width=\"492\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/39cdabc2-76f1-4a6e-bfb5-c2f63b3e1c9c\" />\nsuch error, I can sure I enter the right password",
          "created_at": "2025-03-31T04:36:17Z"
        },
        {
          "author": "debanjum",
          "body": "Hey @wenwenshenqihailuo Please try the following to see if it fixes your issue to login to the admin panel:\n1. Delete your Khoj DB. (i.e delete the `khoj_db` docker volume via CLI or the Docker desktop app on your Mac)\n2. Set environment variable `KHOJ_DEBUG=True` in your `docker-compose.yml`\n3. Res",
          "created_at": "2025-04-07T12:00:49Z"
        },
        {
          "author": "debanjum",
          "body": "### Alternatives\nI'm listing some alternative mechanisms to setup online models without accessing the admin panel to unblock folks\n\n1. To use Khoj via Docker and setup online AI models by Google, Anthropic, OpenAI without logging into the admin panel. You can also just set the OPENAI_API_KEY, GEMINI",
          "created_at": "2025-04-07T12:06:16Z"
        },
        {
          "author": "debanjum",
          "body": "I'll mark this as resolved for now as the setup has been improved and a fix has been suggested. \nFeel free to open a new issue (and reference this one in it) if the problem persists for you",
          "created_at": "2025-04-19T13:15:38Z"
        }
      ]
    },
    {
      "issue_number": 1153,
      "title": "Can't get to the admin panel using pip-installed khoj",
      "body": "### Server\n\n- [ ] Cloud (https://app.khoj.dev)\n- [ ] Self-Hosted Docker\n- [x] Self-Hosted Python package\n- [ ] Self-Hosted source code\n\n### Clients\n\n- [x] Web browser\n- [ ] Desktop/mobile app\n- [ ] Obsidian\n- [ ] Emacs\n- [ ] WhatsApp\n\n### OS\n\n- [ ] Windows\n- [ ] macOS\n- [x] Linux\n- [ ] Android\n- [ ] iOS\n\n### Khoj version\n\n1.39.0\n\n### Describe the bug\n\nI'm trying to access the admin panel, but I get the CSRF bug mentioned in the [docs](https://docs.khoj.dev/get-started/setup?server=pip&os=linux), although I'm using localhost to access it.\n\nNote that:\n- I had tried to use the docker images at first so maybe there is still something messing with the python install?\n- I removed my firefox navigation data + cache just in case\n\nOpening a new issue since I can't reopen #1123 \n\n### Current Behavior\n\n> Forbidden (403)\n> \n> CSRF verification failed. Request aborted.\n\n### Expected Behavior\n\nAccess to the control panel\n\n### Reproduction Steps\n\n- Install python package self-hosted khoj with [these parameters](https://docs.khoj.dev/get-started/setup?server=pip&os=linux)\n- Launch using the embedded database: `USE_EMBEDDED_DB=\"true\" khoj --anonymous-mode`\n- Go to http://localhost:42110/server/admin/, input login and password used during the first launch setup.\n\n### Possible Workaround\n\n_No response_\n\n### Additional Information\n\n_No response_\n\n### Link to Discord or Github discussion\n\n_No response_",
      "state": "closed",
      "author": "raphaelventura",
      "author_type": "User",
      "created_at": "2025-04-07T14:52:49Z",
      "updated_at": "2025-04-11T12:14:50Z",
      "closed_at": "2025-04-11T12:14:49Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1153/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1153",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1153",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:30.785694",
      "comments": [
        {
          "author": "debanjum",
          "body": "> Opening a new issue since I can't reopen https://github.com/khoj-ai/khoj/issues/1123\n\nThanks for opening another issue to track this. I didn't realize the creator of an issue can't reopen it!\n\nUnfortunate that you're still hitting this issue. The two things to try next:\n- Does starting khoj in KHO",
          "created_at": "2025-04-11T01:46:39Z"
        },
        {
          "author": "debanjum",
          "body": "Also what version of khoj are you using? The fixes I'd made are still in pre-release. So you'd need to install khoj with `pip install --upgrade --pre khoj` to use them (until the next release).",
          "created_at": "2025-04-11T04:59:08Z"
        },
        {
          "author": "raphaelventura",
          "body": "> Also what version of khoj are you using? The fixes I'd made are still in pre-release. So you'd need to install khoj with `pip install --upgrade --pre khoj` to use them (until the next release).\n\nOh, sorry about not checking if this was yet integrated in the PyPI release. I can access the admin pan",
          "created_at": "2025-04-11T12:14:48Z"
        }
      ]
    },
    {
      "issue_number": 1154,
      "title": "Issue with the new PGVector image",
      "body": "### Server\n\n- [ ] Cloud (https://app.khoj.dev)\n- [x] Self-Hosted Docker\n- [ ] Self-Hosted Python package\n- [ ] Self-Hosted source code\n\n### Clients\n\n- [ ] Web browser\n- [ ] Desktop/mobile app\n- [ ] Obsidian\n- [ ] Emacs\n- [ ] WhatsApp\n\n### OS\n\n- [ ] Windows\n- [ ] macOS\n- [ ] Linux\n- [ ] Android\n- [ ] iOS\n\n### Khoj version\n\nlatest\n\n### Describe the bug\n\nThe [last commit of the docker-compose](https://github.com/khoj-ai/khoj/commit/353a4aa597799d82c43e6d601f4b4722342924a7) \nresult: ✘ pgvector Error manifest for pgvector/pgvector not found: manifest unknown: manifest unknown 1.4s\n\nwhile image: **ankane/pgvector** works fine\n\n\n\n### Current Behavior\n\nThe [last commit of the docker-compose](https://github.com/khoj-ai/khoj/commit/353a4aa597799d82c43e6d601f4b4722342924a7) \nresult: ✘ pgvector Error manifest for pgvector/pgvector not found: manifest unknown: manifest unknown 1.4s\n\nwhile image: **ankane/pgvector** works fine\n\n\n\n### Expected Behavior\n\n- pgvector need a tag\n\n### Reproduction Steps\n\ndocker compose up\n\n### Possible Workaround\n\nrevert The [last commit of the docker-compose](https://github.com/khoj-ai/khoj/commit/353a4aa597799d82c43e6d601f4b4722342924a7) \n\n### Additional Information\n\n_No response_\n\n### Link to Discord or Github discussion\n\n_No response_",
      "state": "closed",
      "author": "JOduMonT",
      "author_type": "User",
      "created_at": "2025-04-08T06:42:14Z",
      "updated_at": "2025-04-08T12:39:37Z",
      "closed_at": "2025-04-08T12:37:22Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1154/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1154",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1154",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:30.981875",
      "comments": [
        {
          "author": "debanjum",
          "body": "Thanks for quickly discovering the issue. Pushed a fix for it by specifying the relevant tag (`pg15`) to use with the official pgvector image from `pgvector/pgvector` (instead of the now unmaintained `ankane/pgvector` image)",
          "created_at": "2025-04-08T12:39:35Z"
        }
      ]
    },
    {
      "issue_number": 1123,
      "title": "[FIX] Can't get to the admin panel using pip-installed khoj",
      "body": "## Describe the bug\nI'm trying to access the admin panel, but I get the CSRF bug mentioned in the [docs](https://docs.khoj.dev/get-started/setup/?server=pip&os=linux&gpu=vulkan&client=emacs&chatmodel=offline#add-chat-models), although I'm using `localhost` to access it.\n\nNote that:\n- I deleted and re-created the pgsql database in order to go through the initial configuration again and ensure my login/password were set as expected.\n- Same behavior from chromium and firefox, although if I try using an empty firefox profile, I don't have this error, but instead I get a 302 code and I'm stuck on the login page!\n- I had tried to use the docker images at first so maybe there is still something messing with the python install?\n- I removed my firefox navigation data + cache just in case\n\n## To Reproduce\n- Install self-hosted khoj with [these parameters](https://docs.khoj.dev/get-started/setup/?server=pip&os=linux&gpu=vulkan&client=desktop&chatmodel=offline#add-chat-models)\n- Go to http://localhost:42110/server/admin/, input login and password used during the first launch setup.\n\n## Platform\n- Server:\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\n    - [ ] Self-Hosted Docker\n    - [X] Self-Hosted Python package\n    - [ ] Self-Hosted source code\n- Client:\n    - [ ] Obsidian\n    - [ ] Emacs\n    - [ ] Desktop app\n    - [X] Web browser\n    - [ ] WhatsApp\n- OS:\n    - [ ] Windows\n    - [ ] macOS\n    - [X] Linux\n    - [ ] Android\n    - [ ] iOS\n\n### If self-hosted\n- Server Version [e.g. 1.0.1]: 1.36.6",
      "state": "closed",
      "author": "raphaelventura",
      "author_type": "User",
      "created_at": "2025-02-19T23:33:47Z",
      "updated_at": "2025-04-07T14:45:46Z",
      "closed_at": "2025-04-07T14:14:41Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1123/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1123",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1123",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:31.144988",
      "comments": [
        {
          "author": "clickbrain",
          "body": "I am getting the CSRF error using the Docker install and I am using the localhost URL. Has anyone found any other fixes for this? ",
          "created_at": "2025-02-23T19:41:21Z"
        },
        {
          "author": "fivejjs",
          "body": "same here",
          "created_at": "2025-02-25T07:16:02Z"
        },
        {
          "author": "lumisoft",
          "body": "I was able to remove the CSFR error with a Docker install setting KHOJ_NO_HTTPS=false and KHOJ_DOMAIN and KHOJ_ALLOWED_DOMAIN with my local IP. However, I still can not log in, admin account always not valid even having changed KHOJ_ADMIN_EMAIL and KHOJ_ADMIN_PASSWORD in docker-compose.yml\n",
          "created_at": "2025-02-27T07:19:09Z"
        },
        {
          "author": "CHANTXU64",
          "body": "Same here with Docker. Fixed by deleting container and volumes, redeploying, and reconfiguring. Works now! ",
          "created_at": "2025-03-11T16:25:42Z"
        },
        {
          "author": "debanjum",
          "body": "Hi folks, this issue has turned into a mix of multiple issues. So I'm going to break it down.\n\n### Original Issue\nI found an issue in 5a3c7b1 that was (incorrectly) requiring folks to set `KHOJ_DOMAIN` or `KHOJ_DEBUG=True`. Otherwise the login to admin panel would fail with the CSRF issue. These env",
          "created_at": "2025-04-07T14:15:33Z"
        }
      ]
    },
    {
      "issue_number": 1143,
      "title": "[IDEA] Add more language support",
      "body": "## Add more language support\n\n![Screenshot_20250329_215230.jpg](https://github.com/user-attachments/assets/483d2f18-0849-42c9-81c5-b7d213a9328e)\n\nThe current Khoj product form is very perfect, but it is not very friendly to people who use certain languages (such as Chinese or other languages). Although AI can answer in other languages (as above, such as Chinese or other languages), the language of the overall interface does not support adjustment, and it is still not very user-friendly. I hope to add more languages and improve the user experience, thank you.",
      "state": "open",
      "author": "Moo1it",
      "author_type": "User",
      "created_at": "2025-03-29T13:55:06Z",
      "updated_at": "2025-04-04T15:04:49Z",
      "closed_at": null,
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1143/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1143",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1143",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:31.356939",
      "comments": [
        {
          "author": "ogg-34783",
          "body": "At this stage of development, this is not a priority, given that it would add complexity to programming. But you have the option to use similar browser extensions: [github/FilipePS/Traduzir-paginas-web](https://github.com/FilipePS/Traduzir-paginas-web) \n\nBut considering my active experience working ",
          "created_at": "2025-03-29T22:14:51Z"
        },
        {
          "author": "Moo1it",
          "body": "> At this stage of development, this is not a priority, given that it would add complexity to programming. But you have the option to use similar browser extensions: [github/FilipePS/Traduzir-paginas-web](https://github.com/FilipePS/Traduzir-paginas-web)\n> \n> But considering my active experience wor",
          "created_at": "2025-03-30T05:53:38Z"
        }
      ]
    },
    {
      "issue_number": 697,
      "title": "Improve rendering for code blocks in the web UI",
      "body": "Can we use a 3rd party library to show syntax highlighting for different languages?",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2024-04-12T07:02:58Z",
      "updated_at": "2025-04-01T02:59:57Z",
      "closed_at": "2024-06-08T09:47:10Z",
      "labels": [
        "good first issue"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/697/reactions",
        "total_count": 4,
        "+1": 3,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 1,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/697",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/697",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:31.605019",
      "comments": []
    },
    {
      "issue_number": 1146,
      "title": "[IDEA] SiYuan note integration",
      "body": "## Integration with SiYuan note API, similar to Notion\n\nHello! One important reason for me to use self-hosted AI agents is to keep all the data private. For the same reason, I prefer self-hosted note-taking apps that does not sync with third-party services. [SiYuan](https://github.com/siyuan-note/siyuan) is a notion alternative that is open source, self-hostable, and privacy focused. I would like to suggest a SiYuan integration in khoj, and I'm happy to contribute, if this idea is being considered.\n\nI've implemented a basic approach to use SiYuan notes in RAG myself, source code available at [here](https://github.com/Firefox2100/siyuan-ai-companion). The idea is, SiYuan exposes some REST API, including one endpoint that allows SQL-like query. Using this endpoint, one may get:\n\n- all blocks\n- blocks updated after a certain time\n- blocks belonging to a note\n- etc.\n\nSince each block also have a content (plaintext without formatting strings) and markdown (Markdown converted version of the original data) readily available, remaining is just to embed it, store it and use it for RAG. Again I'm happy to implement a prototype with khoj framework, if needed.\n\nThank you for your time and efforts!\n",
      "state": "open",
      "author": "Firefox2100",
      "author_type": "User",
      "created_at": "2025-03-31T08:16:42Z",
      "updated_at": "2025-03-31T08:16:42Z",
      "closed_at": null,
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1146/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1146",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1146",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:31.605040",
      "comments": []
    },
    {
      "issue_number": 1021,
      "title": "Add ability to copy message references from Web App",
      "body": "### Background\r\nKhoj currently supports ability to copy chat messages. But you cannot easily copy references used by Khoj to generate responses. \r\n\r\n### Feature\r\n- Add a copy references button to top of the references pane which opens when the \"View references\" link is clicked at the bottom of each Khoj chat response.\r\n- This should copy all the reference web page and file path links as a markdown bullet list. For example:\r\n   ```\r\n   - [2024 - Wikipedia](https://en.wikipedia.org/wiki/2024)\r\n   - [2023 - Wikipedia](https://en.wikipedia.org/wiki/2023)\r\n   ```",
      "state": "open",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2024-12-30T20:30:27Z",
      "updated_at": "2025-03-30T10:47:06Z",
      "closed_at": null,
      "labels": [
        "upgrade",
        "good first issue"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 10,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1021/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "kowshik24"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1021",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1021",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:31.605047",
      "comments": [
        {
          "author": "sanchitbansal10",
          "body": "hi @debanjum , I can take this up. Please assign. Thanks",
          "created_at": "2025-01-09T06:55:15Z"
        },
        {
          "author": "debanjum",
          "body": "Thanks for taking this up @sanchitbansal10 ! Let me know if you need any clarifications or have any questions",
          "created_at": "2025-01-09T07:37:13Z"
        },
        {
          "author": "adi790uu",
          "body": "Hey @debanjum would like to work on this, please assign me this issue!\n",
          "created_at": "2025-02-04T08:02:06Z"
        },
        {
          "author": "debanjum",
          "body": "Hey @adi790uu thanks for the interest! Let's wait a day for @sanchitbansal10 to respond/confirm?\n\n@sanchitbansal10 is it fine if @adi790uu takes up this work item or are you still planning to work on it?",
          "created_at": "2025-02-04T08:06:38Z"
        },
        {
          "author": "adi790uu",
          "body": "@debanjum I believe he is not active",
          "created_at": "2025-02-05T18:43:38Z"
        }
      ]
    },
    {
      "issue_number": 1142,
      "title": "Error when fetching agents – AttributeError: 'NoneType' object has no attribute 'slug'",
      "body": "### Server\n\n- [ ] Cloud (https://app.khoj.dev)\n- [x] Self-Hosted Docker\n- [ ] Self-Hosted Python package\n- [ ] Self-Hosted source code\n\n### Clients\n\n- [x] Web browser\n- [ ] Desktop/mobile app\n- [ ] Obsidian\n- [ ] Emacs\n- [ ] WhatsApp\n\n### OS\n\n- [ ] Windows\n- [ ] macOS\n- [x] Linux\n- [ ] Android\n- [ ] iOS\n\n### Khoj version\n\n1.37.2\n\n### Describe the bug\n\nWhen attempting to create a new agent using a local Ollama instance, the application crashes and returns a 500 Internal Server Error on GET /api/agents.\n\n\n\n\n### Current Behavior\n\nWhen attempting to create a new agent using a local Ollama instance, the application crashes and returns a 500 Internal Server Error on GET /api/agents.\n\nTraceback (relevant part):\nFile \"/app/src/khoj/routers/api_agents.py\", line 79, in all_agents\n    if agent.slug == default_agent_slug:\nAttributeError: 'NoneType' object has no attribute 'slug'\n\n### Expected Behavior\n\nThe /api/agents endpoint should return a valid list of agents without crashing.\n\n### Reproduction Steps\n\nSteps to Reproduce:\n\n1. Start the application with a working local Ollama instance.\n2. Attempt to create a new agent.\n3. A 500 error is returned.\n\n### Possible Workaround\n\n_No response_\n\n### Additional Information\n\n_No response_\n\n### Link to Discord or Github discussion\n\n_No response_",
      "state": "closed",
      "author": "consulitsk",
      "author_type": "User",
      "created_at": "2025-03-28T14:12:46Z",
      "updated_at": "2025-03-29T16:09:50Z",
      "closed_at": "2025-03-29T16:09:50Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1142/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1142",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1142",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:31.825952",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hi @consulitsk, thanks for the detailed issue. Does this issue occur on first run? Does restarting the Khoj server fix this error for you?",
          "created_at": "2025-03-28T16:24:41Z"
        },
        {
          "author": "consulitsk",
          "body": "> Hi [@consulitsk](https://github.com/consulitsk), thanks for the detailed issue. Does this issue occur on first run? Does restarting the Khoj server fix this error for you?\n\nHi @debanjum, it's working after restarting the Khoj server.",
          "created_at": "2025-03-29T11:31:27Z"
        },
        {
          "author": "debanjum",
          "body": "Thanks for confirming. Good to know. Closing this issue as this error on first run should also be fixed in the latest release (version 1.38.0) and commit 72986c905. ",
          "created_at": "2025-03-29T16:08:07Z"
        }
      ]
    },
    {
      "issue_number": 1136,
      "title": "password authentication failed for user \"postgres\"",
      "body": "### Server\n\n- [ ] Cloud (https://app.khoj.dev)\n- [ ] Self-Hosted Docker\n- [x] Self-Hosted Python package\n- [ ] Self-Hosted source code\n\n### Clients\n\n- [x] Web browser\n- [ ] Desktop/mobile app\n- [ ] Obsidian\n- [ ] Emacs\n- [ ] WhatsApp\n\n### OS\n\n- [ ] Windows\n- [ ] macOS\n- [x] Linux\n- [ ] Android\n- [ ] iOS\n\n### Khoj version\n\n1.37.2\n\n### Describe the bug\n\ndjango.db.utils.OperationalError: connection failed: connection to server at \"127.0.0.1\", port 5432 failed: FATAL:  password authentication failed for user \"postgres\"\nconnection to server at \"127.0.0.1\", port 5432 failed: FATAL:  password authentication failed for user \"postgres\"\n\n### Current Behavior\n\n`Traceback (most recent call last):\n  File \"/home/rodrigoandrigo/.local/lib/python3.10/site-packages/django/db/backends/base/base.py\", line 275, in ensure_connection\n    self.connect()\n  File \"/home/rodrigoandrigo/.local/lib/python3.10/site-packages/django/utils/asyncio.py\", line 26, in inner\n    return func(*args, **kwargs)\n  File \"/home/rodrigoandrigo/.local/lib/python3.10/site-packages/django/db/backends/base/base.py\", line 256, in connect\n    self.connection = self.get_new_connection(conn_params)\n  File \"/home/rodrigoandrigo/.local/lib/python3.10/site-packages/django/utils/asyncio.py\", line 26, in inner\n    return func(*args, **kwargs)\n  File \"/home/rodrigoandrigo/.local/lib/python3.10/site-packages/django/db/backends/postgresql/base.py\", line 277, in get_new_connection\n    connection = self.Database.connect(**conn_params)\n  File \"/home/rodrigoandrigo/.local/lib/python3.10/site-packages/psycopg/connection.py\", line 117, in connect\n    raise last_ex.with_traceback(None)\npsycopg.OperationalError: connection failed: connection to server at \"127.0.0.1\", port 5432 failed: FATAL:  password authentication failed for user \"postgres\"\nconnection to server at \"127.0.0.1\", port 5432 failed: FATAL:  password authentication failed for user \"postgres\"\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/rodrigoandrigo/.local/bin/khoj\", line 5, in <module>\n    from khoj.main import run\n  File \"/home/rodrigoandrigo/.local/lib/python3.10/site-packages/khoj/main.py\", line 52, in <module>\n    call_command(\"migrate\", \"--noinput\")\n  File \"/home/rodrigoandrigo/.local/lib/python3.10/site-packages/django/core/management/__init__.py\", line 194, in call_command\n    return command.execute(*args, **defaults)\n  File \"/home/rodrigoandrigo/.local/lib/python3.10/site-packages/django/core/management/base.py\", line 459, in execute\n    output = self.handle(*args, **options)\n  File \"/home/rodrigoandrigo/.local/lib/python3.10/site-packages/django/core/management/base.py\", line 107, in wrapper\n    res = handle_func(*args, **kwargs)\n  File \"/home/rodrigoandrigo/.local/lib/python3.10/site-packages/django/core/management/commands/migrate.py\", line 117, in handle\n    executor = MigrationExecutor(connection, self.migration_progress_callback)\n  File \"/home/rodrigoandrigo/.local/lib/python3.10/site-packages/django/db/migrations/executor.py\", line 18, in __init__\n    self.loader = MigrationLoader(self.connection)\n  File \"/home/rodrigoandrigo/.local/lib/python3.10/site-packages/django/db/migrations/loader.py\", line 58, in __init__\n    self.build_graph()\n  File \"/home/rodrigoandrigo/.local/lib/python3.10/site-packages/django/db/migrations/loader.py\", line 235, in build_graph\n    self.applied_migrations = recorder.applied_migrations()\n  File \"/home/rodrigoandrigo/.local/lib/python3.10/site-packages/django/db/migrations/recorder.py\", line 89, in applied_migrations\n    if self.has_table():\n  File \"/home/rodrigoandrigo/.local/lib/python3.10/site-packages/django/db/migrations/recorder.py\", line 63, in has_table\n    with self.connection.cursor() as cursor:\n  File \"/home/rodrigoandrigo/.local/lib/python3.10/site-packages/django/utils/asyncio.py\", line 26, in inner\n    return func(*args, **kwargs)\n  File \"/home/rodrigoandrigo/.local/lib/python3.10/site-packages/django/db/backends/base/base.py\", line 316, in cursor\n    return self._cursor()\n  File \"/home/rodrigoandrigo/.local/lib/python3.10/site-packages/django/db/backends/base/base.py\", line 292, in _cursor\n    self.ensure_connection()\n  File \"/home/rodrigoandrigo/.local/lib/python3.10/site-packages/django/utils/asyncio.py\", line 26, in inner\n    return func(*args, **kwargs)\n  File \"/home/rodrigoandrigo/.local/lib/python3.10/site-packages/django/db/backends/base/base.py\", line 274, in ensure_connection\n    with self.wrap_database_errors:\n  File \"/home/rodrigoandrigo/.local/lib/python3.10/site-packages/django/db/utils.py\", line 91, in __exit__\n    raise dj_exc_value.with_traceback(traceback) from exc_value\n  File \"/home/rodrigoandrigo/.local/lib/python3.10/site-packages/django/db/backends/base/base.py\", line 275, in ensure_connection\n    self.connect()\n  File \"/home/rodrigoandrigo/.local/lib/python3.10/site-packages/django/utils/asyncio.py\", line 26, in inner\n    return func(*args, **kwargs)\n  File \"/home/rodrigoandrigo/.local/lib/python3.10/site-packages/django/db/backends/base/base.py\", line 256, in connect\n    self.connection = self.get_new_connection(conn_params)\n  File \"/home/rodrigoandrigo/.local/lib/python3.10/site-packages/django/utils/asyncio.py\", line 26, in inner\n    return func(*args, **kwargs)\n  File \"/home/rodrigoandrigo/.local/lib/python3.10/site-packages/django/db/backends/postgresql/base.py\", line 277, in get_new_connection\n    connection = self.Database.connect(**conn_params)\n  File \"/home/rodrigoandrigo/.local/lib/python3.10/site-packages/psycopg/connection.py\", line 117, in connect\n    raise last_ex.with_traceback(None)\ndjango.db.utils.OperationalError: connection failed: connection to server at \"127.0.0.1\", port 5432 failed: FATAL:  password authentication failed for user \"postgres\"\nconnection to server at \"127.0.0.1\", port 5432 failed: FATAL:  password authentication failed for user \"postgres\"`\n\n### Expected Behavior\n\nRun khoj\n\n### Reproduction Steps\n\nkhoj --anonymous-mode\n\n### Possible Workaround\n\n_No response_\n\n### Additional Information\n\n_No response_\n\n### Link to Discord or Github discussion\n\n_No response_",
      "state": "closed",
      "author": "rodrigoandrigo",
      "author_type": "User",
      "created_at": "2025-03-25T22:25:17Z",
      "updated_at": "2025-03-28T23:26:56Z",
      "closed_at": "2025-03-28T23:26:56Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1136/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1136",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1136",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:32.038352",
      "comments": [
        {
          "author": "debanjum",
          "body": "Is postgres server installed and running on your machine? If you've installed Khoj via pip (i.e `pip install khoj`) you need to install postgres separately as well. \n\nAlso ensure `POSTGRES_USER=<your_postgres_user>` and `POSTGRES_PASSWORD=<your_postgres_user_password>` environment variables match if",
          "created_at": "2025-03-28T19:42:38Z"
        }
      ]
    },
    {
      "issue_number": 1012,
      "title": "[FIX]",
      "body": "## Describe the bug\r\nAs of today -- Dec 16th -- trying to pull the latest code and start the containers results in a near immedate crash by the database container, and errors in the server container.\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n\r\n1. Clone the git repo as of 9:24pm PT on December 16th.\r\n2. Edit docker-compose to add OpenAI, Anthropic, and Gemini API keys. Add Ollama endpoint.\r\n3. Use the cloud prod image -- `ghcr.io/khoj-ai/khoj-cloud:latest`\r\n4. `docker compose up -d` \r\n5. `docker logs -f khoj-server-1\r\n\r\n```\r\ndjango.db.utils.IntegrityError: duplicate key value violates unique constraint \"pg_class_relname_nsp_index\"\r\nDETAIL:  Key (relname, relnamespace)=(database_khojapiuser_id_seq, 2200) already exists.\r\n\r\n[2024-12-17 05:22:41 +0000] [6] [INFO] Worker exiting (pid: 6)\r\n[2024-12-17 05:22:41 +0000] [1] [ERROR] Worker (pid:6) exited with code 3\r\n[2024-12-17 05:22:41 +0000] [1] [ERROR] Worker (pid:7) was sent SIGTERM!\r\n[2024-12-17 05:22:41 +0000] [1] [ERROR] Shutting down: Master\r\n[2024-12-17 05:22:41 +0000] [1] [ERROR] Reason: Worker failed to boot.\r\n```\r\n\r\n6. `khoj-database-1`\r\n\r\n```\r\nPostgreSQL init process complete; ready for start up.\r\n\r\n2024-12-17 05:21:09.474 UTC [1] LOG:  starting PostgreSQL 15.4 (Debian 15.4-2.pgdg120+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit\r\n2024-12-17 05:21:09.476 UTC [1] LOG:  listening on IPv4 address \"0.0.0.0\", port 5432\r\n2024-12-17 05:21:09.476 UTC [1] LOG:  listening on IPv6 address \"::\", port 5432\r\n2024-12-17 05:21:09.477 UTC [1] LOG:  listening on Unix socket \"/var/run/postgresql/.s.PGSQL.5432\"\r\n2024-12-17 05:21:09.481 UTC [61] LOG:  database system was shut down at 2024-12-17 05:21:09 UTC\r\n2024-12-17 05:21:09.485 UTC [1] LOG:  database system is ready to accept connections\r\n2024-12-17 05:21:39.933 UTC [74] ERROR:  duplicate key value violates unique constraint \"pg_class_relname_nsp_index\"\r\n2024-12-17 05:21:39.933 UTC [74] DETAIL:  Key (relname, relnamespace)=(django_migrations_id_seq, 2200) already exists.\r\n2024-12-17 05:21:39.933 UTC [74] STATEMENT:  CREATE TABLE \"django_migrations\" (\"id\" bigint NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, \"app\" varchar(255) NOT NULL, \"name\" varchar(255) NOT NULL, \"applied\" timestamp with time zone NOT NULL)\r\n2024-12-17 05:22:41.186 UTC [91] ERROR:  duplicate key value violates unique constraint \"pg_class_relname_nsp_index\"\r\n2024-12-17 05:22:41.186 UTC [91] DETAIL:  Key (relname, relnamespace)=(database_khojapiuser_id_seq, 2200) already exists.\r\n2024-12-17 05:22:41.186 UTC [91] STATEMENT:  CREATE TABLE \"database_khojapiuser\" (\"id\" bigint NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, \"token\" varchar(50) NOT NULL UNIQUE, \"name\" varchar(50) NOT NULL, \"accessed_at\" timestamp with time zone NULL, \"user_id\" bigint NOT NULL)\r\n2024-12-17 05:22:41.531 UTC [92] LOG:  unexpected EOF on client connection with an open transaction\r\n2024-12-17 05:25:43.207 UTC [144] ERROR:  duplicate key value violates unique constraint \"pg_class_relname_nsp_index\"\r\n2024-12-17 05:25:43.207 UTC [144] DETAIL:  Key (relname, relnamespace)=(database_clientapplication_id_seq, 2200) already exists.\r\n2024-12-17 05:25:43.207 UTC [144] STATEMENT:  CREATE TABLE \"database_clientapplication\" (\"id\" bigint NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, \"created_at\" timestamp with time zone NOT NULL, \"updated_at\" timestamp with time zone NOT NULL, \"name\" varchar(200) NOT NULL, \"client_id\" varchar(200) NOT NULL, \"client_secret\" varchar(200) NOT NULL)\r\n2024-12-17 05:25:43.520 UTC [143] LOG:  could not receive data from client: Connection reset by peer\r\n2024-12-17 05:25:43.520 UTC [143] LOG:  unexpected EOF on client connection with an open transaction\r\n```\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [X] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [ ] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [X] Linux (Alpine)\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]: where do I find this? Looks like this is the lateast container image: https://github.com/khoj-ai/khoj/pkgs/container/khoj-cloud/320554390?tag=latest -- from \"6 days ago\" -- so roughly December 10th.\r\n",
      "state": "closed",
      "author": "xxdesmus",
      "author_type": "User",
      "created_at": "2024-12-17T05:31:16Z",
      "updated_at": "2025-03-28T18:13:38Z",
      "closed_at": "2024-12-17T21:59:14Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 10,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1012/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 1
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1012",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1012",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:32.263041",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Hello @xxdesmus 👋🏽\r\n\r\nIf you run `docker compose up` again, do you get the same error again? I believe this is due to the `khoj-cloud` image starting two gunicorn threads which are concurrently attempting to apply migrations. I'd think whichever thread started first would have completed successfully",
          "created_at": "2024-12-17T06:15:03Z"
        },
        {
          "author": "xxdesmus",
          "body": "Docker compose up again leads to the same error unfortunately. \n\n\"Remind me again, are you only using the khoj-cloud image because you wanted to integrate with resend?\"\n\nCorrect. ",
          "created_at": "2024-12-17T06:28:07Z"
        },
        {
          "author": "sabaimran",
          "body": "I've pulled `resend` into our default dependencies while I look into this further. This should mitigate some other issues as well with the self-hosted / cloud-hosted issues.\r\n\r\nRefer to commit: 3b050a33bb52d3db6010cd4adc3dfdeace760d21.\r\n\r\nThe docker build is done, so it might be worth giving it a go",
          "created_at": "2024-12-17T08:31:53Z"
        },
        {
          "author": "xxdesmus",
          "body": "I switched over to `ghcr.io/khoj-ai/khoj:dev` and ran docker compose up -- I get this now:\r\n\r\n```\r\n2024-12-17 16:34:07.881366240 [E:onnxruntime:Default, env.cc:234 ThreadMain] pthread_setaffinity_np failed for thread: 18, index: 4, mask: {5, 11, }, error code: 22 error msg: Invalid argument. Specify",
          "created_at": "2024-12-17T16:41:29Z"
        },
        {
          "author": "xxdesmus",
          "body": "I switched back to `ghcr.io/khoj-ai/khoj-cloud:latest` and did `docker compose up` again. Here are some additional logs:\r\n\r\n`docker logs -f khoj-server-1`\r\n```\r\n[2024-12-17 17:12:13 +0000] [1] [INFO] Starting gunicorn 22.0.0\r\n[2024-12-17 17:12:13 +0000] [1] [DEBUG] Arbiter booted\r\n[2024-12-17 17:12:",
          "created_at": "2024-12-17T17:24:53Z"
        }
      ]
    },
    {
      "issue_number": 1122,
      "title": "[FIX] clearing knowledge base does not delete file objects",
      "body": "## Describe the bug\nClearing the knowledge base in settings does not delete related file objects. Files are still visible in \"Search\" (and still in database_fileobject), but not searchable since related entries have been deleted.\nhttps://github.com/khoj-ai/khoj/blob/0ddb6a38b8a8ccb8ac3be52ae4e7306803239245/src/khoj/routers/api_content.py#L425\n\n\n## To Reproduce\nUpload some files. Go to \"Settings\" -> \"Knowledge base\" -> \"Clear all\". Files are still visible in \"Search\".\n\n## Screenshots\nIf applicable, add screenshots to help explain your problem.\n\n## Platform\n- Server:\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\n    - [x] Self-Hosted Docker\n    - [ ] Self-Hosted Python package\n    - [ ] Self-Hosted source code\n- Client:\n    - [ ] Obsidian\n    - [ ] Emacs\n    - [ ] Desktop app\n    - [ ] Web browser\n    - [ ] WhatsApp\n- OS:\n    - [ ] Windows\n    - [ ] macOS\n    - [ ] Linux\n    - [ ] Android\n    - [ ] iOS\n\n### If self-hosted\n- Server Version [e.g. 1.0.1]: 1.36.5\n",
      "state": "closed",
      "author": "King-of-Infinite-Space",
      "author_type": "User",
      "created_at": "2025-02-18T21:20:29Z",
      "updated_at": "2025-03-20T08:04:12Z",
      "closed_at": "2025-03-20T08:04:00Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1122/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1122",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1122",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:32.509170",
      "comments": [
        {
          "author": "debanjum",
          "body": "Thanks for opening this issue and sharing the repro steps. I was able to reproduce the problem on my end. It has been fixed in commit b692e690b of PR #1078. \n\nFeel free to reopen this issue if the problem persists after the next release.",
          "created_at": "2025-03-20T08:04:01Z"
        }
      ]
    },
    {
      "issue_number": 1112,
      "title": "[FIX] [self-hosted] image in chat not working",
      "body": "## Describe the bug\nHello,\n\nI have a self hosted version, using Gemini API and when I upload a image in the chat, the picture appear but the LLM cannot interact with it. I don't have a AWS S3 account, I don't known if it is the problem.\n\n## To Reproduce\n- Setup a Gemini as a vision model.\n- Send a picture in a chat and saying for example \"describe the image\"\n\n## Screenshots\n\n![Image](https://github.com/user-attachments/assets/f740528b-7f9d-42ba-8c97-80e7f11a7838)\n\n## Platform\n- Server:\n    - [X] Self-Hosted Docker\n- Client:\n    - [X] Web browser\n- OS:\n    - [X] Linux\n\n### If self-hosted\n- Server Version : 1.36.4\n\n## Additional context\n`                           /api/chat/sessions?client=web&agent_s                \n                           lug=khoj HTTP/1.1\" 200                               \n[17:30:31.279432] INFO     uvicorn.access: 172.18.0.100:36832 -  h11_impl.py:476\n                           \"GET                                                 \n                           /chat?conversationId=762e8554-a2e4-4a                \n                           be-92e7-c13091da3b5c HTTP/1.1\" 200                   \n[17:30:31.416034] INFO     uvicorn.access: 172.18.0.100:36836 -  h11_impl.py:476\n                           \"GET                                                 \n                           /static/_next/static/media/a6ecd16fa0                \n                           44d500-s.p.woff2 HTTP/1.1\" 200                       \n[17:30:31.608361] INFO     uvicorn.access: 172.18.0.100:54616 -  h11_impl.py:476\n                           \"GET /api/chat/options HTTP/1.1\" 200                 \n[17:30:31.615971] INFO     uvicorn.access: 172.18.0.100:54606 -  h11_impl.py:476\n                           \"GET /api/v1/user HTTP/1.1\" 200                      \n[17:30:31.718722] INFO     uvicorn.access: 172.18.0.100:54616 -  h11_impl.py:476\n                           \"GET /api/agents/options HTTP/1.1\"                   \n                           200                                                  \n[17:30:31.724130] INFO     uvicorn.access: 172.18.0.100:54630 -  h11_impl.py:476\n                           \"GET /api/content/computer HTTP/1.1\"                 \n                           200                                                  \n[17:30:31.738923] INFO     uvicorn.access: 172.18.0.100:54606 -  h11_impl.py:476\n                           \"GET                                                 \n                           /api/chat/conversation/file-filters/7                \n                           62e8554-a2e4-4abe-92e7-c13091da3b5c                  \n                           HTTP/1.1\" 200                                        \n[17:30:31.751615] INFO     uvicorn.access: 172.18.0.100:54634 -  h11_impl.py:476\n                           \"GET                                                 \n                           /api/agents/conversation?conversation                \n                           _id=762e8554-a2e4-4abe-92e7-c13091da3                \n                           b5c HTTP/1.1\" 200                                    \n[17:30:31.947593] INFO     uvicorn.access: 172.18.0.100:54634 -  h11_impl.py:476\n                           \"GET                                                 \n                           /api/chat/history?client=web&conversa                \n                           tion_id=762e8554-a2e4-4abe-92e7-c1309                \n                           1da3b5c&n=10 HTTP/1.1\" 200                           \n[17:30:32.069118] INFO     uvicorn.access: 172.18.0.100:54634 -  h11_impl.py:476\n                           \"GET /api/chat/sessions HTTP/1.1\" 200                \n[17:30:32.084099] INFO     uvicorn.access: 172.18.0.100:54606 -  h11_impl.py:476\n                           \"GET /api/settings?detailed=true                     \n                           HTTP/1.1\" 200                                        \n[17:30:32.723865] INFO     khoj.routers.storage: AWS is not        storage.py:44\n                           enabled. Skipping image upload                       \n[17:30:32.738683] INFO     uvicorn.access: 172.18.0.100:54606 -  h11_impl.py:476\n                           \"POST /api/chat?client=web HTTP/1.1\"                 \n                           200                                                  \n[17:30:33.115191] DEBUG    khoj.routers.helpers: Chat actor:      helpers.py:195\n                           Infer information sources to refer:                  \n                           0.358 seconds                                        \n[17:30:33.128236] DEBUG    khoj.routers.api: No documents in          api.py:389\n                           knowledge base. Use a Khoj client to sync            \n                           and chat with your docs.                             \n[17:30:33.133650] DEBUG    khoj.routers.helpers: Conversation    helpers.py:1397\n                           Types: [<ConversationCommand.Default:                \n                           'default'>,                                          \n                           <ConversationCommand.Text: 'text'>]                  \n[17:30:33.136795] INFO     uvicorn.access: 172.18.0.100:54634 -  h11_impl.py:476\n                           \"GET                                                 \n                           /chat.txt?conversationId=f5b74cbd-555                \n                           b-4fd5-ba0a-1267bc90fbc2&_rsc=1rc0u                  \n                           HTTP/1.1\" 404                                        \n[17:30:33.139894] INFO     uvicorn.access: 172.18.0.100:54630 -  h11_impl.py:476\n                           \"GET                                                 \n                           /chat.txt?conversationId=1f42ca3c-1a2                \n                           2-44f3-88d8-8f3976ec3b3a&_rsc=1rc0u                  \n                           HTTP/1.1\" 404                                        \n[17:30:33.149375] DEBUG    khoj.processor.conversation.google gemini_chat.py:240\n                           .gemini_chat: Conversation Context                   \n                           for Gemini: [\"Explain the                            \n                           significance of this image\"]...                      \n[17:30:33.596607] INFO     khoj.processor.conversation.utils: First utils.py:102\n                           response took: 0.445 seconds                         \n[17:30:33.723521] INFO     khoj.processor.conversation.utils: Chat   utils.py:91\n                           streaming took: 0.572 seconds                        \n[17:30:33.736441] INFO     khoj.processor.conversation.utils: Saved utils.py:315\n                           Conversation Turn                                    \n                           You (default): \"Explain the significance             \n                           of this image\"                                       \n                                                                                \n                           Khoj: \"I am sorry, but I do not have                 \n                           access to the image you are referring                \n                           to. Please upload the image or provide a             \n                           description of it so I can help you                  \n                           understand its significance.                         \n                           \"                                                    \n[17:30:33.739307] INFO     khoj.routers.api_chat: Chat response  api_chat.py:726\n                           time to first token: 0.961 seconds                   \n[17:30:33.740722] INFO     khoj.routers.api_chat: Chat response  api_chat.py:727\n                           total time: 1.547 seconds                            \n[17:30:33.742040] INFO     khoj.routers.api_chat: Chat response  api_chat.py:728\n                           cost: $0.00000                                       \n[17:30:33.745239] DEBUG    khoj.routers.api_chat: Finished      api_chat.py:1272\n                           streaming response                                   \n[17:30:34.265640] DEBUG    khoj.routers.helpers: Chat actor:      helpers.py:195\n                           Generate title from conversation                     \n                           history: 0.391 seconds                               \n[17:30:34.272573] INFO     uvicorn.access: 172.18.0.100:54606 -  h11_impl.py:476\n                           \"POST                                                \n                           /api/chat/title?conversation_id=762e8                \n                           554-a2e4-4abe-92e7-c13091da3b5c                      \n                           HTTP/1.1\" 200                                        `\n",
      "state": "closed",
      "author": "azertylr",
      "author_type": "User",
      "created_at": "2025-02-12T10:23:34Z",
      "updated_at": "2025-03-20T07:58:25Z",
      "closed_at": "2025-03-20T07:53:13Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1112/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1112",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1112",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:32.694050",
      "comments": [
        {
          "author": "Livvux",
          "body": "same issue here, even with aws it doesnt work",
          "created_at": "2025-02-22T15:16:30Z"
        },
        {
          "author": "sabaimran",
          "body": "1. Can you verify if your chat model settings in the admin panel whether you've set `vision_enabled` to `True`?\n2. Can you verify in the chat controls tab that you are chatting with the Gemini vision model?",
          "created_at": "2025-02-23T03:33:47Z"
        },
        {
          "author": "loorisr",
          "body": "Yes it is correct.\nI'm using version 1.36.6\n\n![Image](https://github.com/user-attachments/assets/f33e945a-67c3-495a-ad60-c57c02568013)\n\n![Image](https://github.com/user-attachments/assets/09c482f7-0233-478a-9525-a55122ffc6f4)",
          "created_at": "2025-02-23T14:43:13Z"
        },
        {
          "author": "debanjum",
          "body": "Hey folks, thanks for opening the bug and sharing details! I was able to reproduce and fix this issue for vision not working with inline images. You should now be able to use gemini and other vision models with inline images. \n\nFeel free to reopen this issue if you still see it after the next releas",
          "created_at": "2025-03-20T07:58:25Z"
        }
      ]
    },
    {
      "issue_number": 1130,
      "title": "[IDEA] Allowing Khoj Phone App (Android) while selfhosting",
      "body": "I would love to use the Android App with my selfhosted version of Khoj.",
      "state": "closed",
      "author": "JOduMonT",
      "author_type": "User",
      "created_at": "2025-03-17T13:08:31Z",
      "updated_at": "2025-03-18T18:54:46Z",
      "closed_at": "2025-03-18T18:54:28Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1130/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1130",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1130",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:32.915180",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hey @JOduMonT, Khoj is a [Progressive Web App (PWA)](https://en.wikipedia.org/wiki/Progressive_web_app). So you can install your selfhosted Khoj to your Android phone by following the instructions provided in the docs at https://docs.khoj.dev/clients/web/#install-on-phone.\n\nClosing this issue for no",
          "created_at": "2025-03-18T18:54:28Z"
        }
      ]
    },
    {
      "issue_number": 1105,
      "title": "[FIX] Unable to index local files",
      "body": "## Describe the bug\nThank you very much in advance for your help. I'm looking forward to having a client to interact with my notes once I have Khoj set up.\n\nI'm unable to sync my files into Khoj. I've managed to get Khoj running, offline, with Ollama. However, I'm unable to sync any files. My files are predominantly .org files.\n\n### Desktop\nWith the Desktop Application, I've selected a number of both files and folders. It says \"Connected to Server\". But when I hit \"force sync\", I'm unable to see anything changing in the docker-compose window output.\nDesktop Config:\n- Server URL: http://127.0.0.1:42110\n- API Key: \n\n### Emacs\nWith the Emacs client, I can run a force update, and I will get a series of output. However, it ends like this:\n```\nBatches:   0%|          | 0/3 [00:00<?, ?it/s]\n...\n\n...\nIdentify new entries: 100%|██████████| 22/22 [00:00<00:00, 1919.35it/s]\nserver-1    | [05:41:38.247971] DEBUG    khoj.processor.content.org_mode.org_to helpers.py:195\nserver-1    |                            _entries: Identified entries to add to\nserver-1    |                            database in: 0.012 seconds\nserver-1    |\nserver-1    |\nserver-1    | [05:41:38.235812] DEBUG    khoj.processor.content.org_mode.org_to helpers.py:195\nserver-1    |                            _entries: Cleared existing dataset for\nserver-1    |                            regeneration in: 0.005 seconds\nserver-1    | ntries:   7%|▋         | 2/30 [00:00<00:03,  7.85it/s]\nserver-1    | ntries:   0%|          | 0/22 [00:00<?, ?it/s]\nserver-1    |\nserver-1    |\nserver-1    |\nserver-1    |\nHashing Entries: 100%|██████████| 75/75 [00:00<00:00, 455242.84it/s]\nserver-1    | [05:41:39.717610] DEBUG    khoj.processor.content.org_mode.org_to helpers.py:195\nserver-1    |                            _entries: Constructed current entry\nserver-1    |                            hashes in: 0.001 seconds\nserver-1    | [05:41:39.718678] DEBUG    khoj.processor.content.org_mod text_to_entries.py:137\nserver-1    |                            e.org_to_entries: Deleting all\nserver-1    |                            entries for file type org\nserver-1    | [05:41:39.726209] DEBUG    khoj.processor.content.org_mode.org_to helpers.py:195\nserver-1    |                            _entries: Cleared existing dataset for\nserver-1    |                            regeneration in: 0.008 seconds\nIdentify new entries: 100%|██████████| 27/27 [00:00<00:00, 1150.81it/s]onds\nserver-1    | [05:41:39.751274] DEBUG    khoj.processor.content.org_mode.org_to helpers.py:195\nserver-1    |                            _entries: Identified entries to add to\nserver-1    |                            database in: 0.024 seconds\nserver-1    |           | 0/1 [00:00<?, ?it/s]\nserver-1    | s:   0%|          | 0/75 [00:00<?, ?it/s]\nserver-1    |\nserver-1    |\nserver-1    |\nserver-1    |\nserver-1    |\nserver-1    |\nserver-1    |\nserver-1    |\nserver-1    |\nserver-1    | ntries:   0%|          | 0/27 [00:00<?, ?it/s]\nserver-1    |\nserver-1    |\nserver-1    |\nserver-1    | [05:41:39.780873] INFO     khoj.routers.api_content: 📬       api_content.py:556\nserver-1    |                            Updating content index via API\nserver-1    |                            call by emacs client\nserver-1    | [05:41:40.413095] INFO     khoj.routers.api_content: 📬       api_content.py:556\nserver-1    |                            Updating content index via API\nserver-1    |                            call by emacs client\nserver-1    | [05:41:41.093741] INFO     khoj.routers.api_content: 📬       api_content.py:556\nserver-1    |                            Updating content index via API\nserver-1    |                            call by emacs client\nserver-1    | [05:41:42.037019] INFO     khoj.routers.api_content: 📬       api_content.py:556\nserver-1    |                            Updating content index via API\nserver-1    |                            call by emacs client\nserver-1    | [05:41:43.448485] INFO     khoj.routers.api_content: 📬       api_content.py:556\nserver-1    |                            Updating content index via API\nserver-1    |                            call by emacs client\nserver-1    | [05:41:44.063888] INFO     khoj.routers.api_content: 📬       api_content.py:556\nserver-1    |                            Updating content index via API\n```\n\nSo it runs to here: https://github.com/khoj-ai/khoj/blob/427ec061b46f62a0e600a1fd61055b8957fad858/src/khoj/routers/api_content.py#L556\nBut I never get the success log: https://github.com/khoj-ai/khoj/blob/427ec061b46f62a0e600a1fd61055b8957fad858/src/khoj/routers/api_content.py#L608\n\nEmacs config:\n```elisp\n(setq        khoj-server-url \"http://127.0.0.1:42110\"\n                 khoj-index-directories `(,org-directory \"~/logseq\")\n                 )\n```\n\n### Web client\nUnder the admin panel, the \"Entrys\" database is empty.\n\n## To Reproduce\nSteps to reproduce the behavior:\n\n## Screenshots\nIf applicable, add screenshots to help explain your problem.\n\n## Platform\n- Server:\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\n    - [X] Self-Hosted Docker\n    - [ ] Self-Hosted Python package\n    - [ ] Self-Hosted source code\n- Client:\n    - [ ] Obsidian\n    - [X] Emacs\n    - [X] Desktop app\n    - [ ] Web browser\n    - [ ] WhatsApp\n- OS:\n    - [ ] Windows\n    - [X] macOS\n    - [ ] Linux\n    - [ ] Android\n    - [ ] iOS\n\n### If self-hosted\n- Server Version [e.g. 1.0.1]: 1.36.3\n\n## Additional context\ndocker-compose.yml\n```yaml\nservices:\n  database:\n    image: ankane/pgvector\n    environment:\n      POSTGRES_DB: postgres\n      POSTGRES_USER: postgres\n      POSTGRES_PASSWORD: ...\n    volumes:\n      - khoj_db:/var/lib/postgresql/data/\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U postgres\"]\n      interval: 30s\n      timeout: 10s\n      retries: 5\n  sandbox:\n    image: ghcr.io/khoj-ai/terrarium:latest\n  search:\n    image: docker.io/searxng/searxng:latest\n    volumes:\n      - khoj_search:/etc/searxng\n    environment:\n      - SEARXNG_BASE_URL=http://localhost:8080/\n  server:\n    depends_on:\n      database:\n        condition: service_healthy\n    # Use the following line to use the latest version of khoj. Otherwise, it will build from source. Set this to ghcr.io/khoj-ai/khoj-cloud:latest if you want to use the prod image.\n    image: ghcr.io/khoj-ai/khoj:latest\n    ports:\n      - \"42110:42110\"\n    extra_hosts:\n      - \"host.docker.internal:host-gateway\"\n    working_dir: /app\n    volumes:\n      - khoj_config:/root/.khoj/\n      - khoj_models:/root/.cache/torch/sentence_transformers\n      - khoj_models:/root/.cache/huggingface\n    # Use 0.0.0.0 to explicitly set the host ip for the service on the container. https://pythonspeed.com/articles/docker-connection-refused/\n    environment:\n      - POSTGRES_DB=postgres\n      - POSTGRES_USER=postgres\n      - POSTGRES_PASSWORD=...\n      - POSTGRES_HOST=database\n      - POSTGRES_PORT=5432\n      - KHOJ_DJANGO_SECRET_KEY=...\n      - KHOJ_DEBUG=False\n      - KHOJ_ADMIN_EMAIL=...\n      - KHOJ_ADMIN_PASSWORD=...\n      # Default URL of Terrarium, the Python sandbox used by Khoj to run code. Its container is specified above\n      - KHOJ_TERRARIUM_URL=http://sandbox:8080\n      # Default URL of SearxNG, the default web search engine used by Khoj. Its container is specified above\n      - KHOJ_SEARXNG_URL=http://search:8080\n      # Uncomment line below to use with Ollama running on your local machine at localhost:11434.\n      # Change URL to use with other OpenAI API compatible providers like VLLM, LMStudio etc.\n      - OPENAI_BASE_URL=http://host.docker.internal:11434/v1/\n      - JINA_API_KEY=jina_...\n    # Comment out this line when you're using the official ghcr.io/khoj-ai/khoj-cloud:latest prod image.\n    command: --host=\"0.0.0.0\" --port=42110 -vv --anonymous-mode --non-interactive\n```\n",
      "state": "open",
      "author": "ashgillman",
      "author_type": "User",
      "created_at": "2025-02-10T06:13:13Z",
      "updated_at": "2025-03-15T03:59:33Z",
      "closed_at": null,
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1105/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1105",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1105",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:33.118767",
      "comments": [
        {
          "author": "ashgillman",
          "body": "I haven't been able to diagnose the issues with the Desktop App, but I found that the issues with the Emacs app were actually that my repostiory was perhaps too large. It seemed to run until killed by OOM then was restarting.\nThe Desktop app didn't strike any activity even choosing a small directory",
          "created_at": "2025-02-14T10:40:05Z"
        },
        {
          "author": "NoirJ0e",
          "body": "thx for the info, i encounter the exact same issue from Obsidian and indeed solved with the khoj-sync script",
          "created_at": "2025-03-15T03:59:31Z"
        }
      ]
    },
    {
      "issue_number": 1126,
      "title": "[IDEA] Does it support deepseek?",
      "body": "## Describe the feature you'd like\nA clear and concise description of what you want to happen. Include any relevant links or screenshots or inspiration.\n\n<img width=\"1228\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/3e6c92d4-39ff-4ae7-b17b-a7b2bd79dca8\" />\n\n<img width=\"1180\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/4ecce7fa-2d4a-41bf-a8d0-225533a88d8b\" />\n\n<img width=\"1114\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/2d1ee5ee-1d0c-48ce-8fb5-587a973cfc38\" />\n\nThe API model adds deepseek, but shows a connection error",
      "state": "closed",
      "author": "YJExpand",
      "author_type": "User",
      "created_at": "2025-02-27T09:50:54Z",
      "updated_at": "2025-03-11T07:55:27Z",
      "closed_at": "2025-03-11T07:55:27Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1126/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1126",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1126",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:34.318660",
      "comments": [
        {
          "author": "debanjum",
          "body": "Yes, Khoj supports Deepseek. Are you not able to get a respose using Deepseek via their API?\n\nAlso which version of Khoj server are you using? I'd removed that log line or made it less visible a month or so ago as it was confusing folks.\n\nThat log line isn't a problem, it's only a suggestion to opti",
          "created_at": "2025-02-27T11:01:45Z"
        },
        {
          "author": "YJExpand",
          "body": "> Yes, Khoj supports Deepseek. Are you not able to get a respose using Deepseek via their API?\n> \n> Also which version of Khoj server are you using? I'd removed that log line or made it less visible a month or so ago as it was confusing folks.\n> \n> That log line isn't a problem, it's only a suggesti",
          "created_at": "2025-02-28T08:49:20Z"
        }
      ]
    },
    {
      "issue_number": 1121,
      "title": "[IDEA] allow setting batch size for embedding model",
      "body": "## Describe the feature you'd like\n\nCurrently the embedding model sends up to 1000 entries to api each time. However, third-party embedding APIs may impose different maximum batch size (despite being OpenAI compatible). For better compatibility, I suggest adding a setting for embedding batch size either from the admin panel or as an environment variable.\n\nhttps://github.com/khoj-ai/khoj/blob/0ddb6a38b8a8ccb8ac3be52ae4e7306803239245/src/khoj/processor/embeddings.py#L96",
      "state": "open",
      "author": "King-of-Infinite-Space",
      "author_type": "User",
      "created_at": "2025-02-18T17:25:42Z",
      "updated_at": "2025-02-18T17:25:42Z",
      "closed_at": null,
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1121/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1121",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1121",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:39.510920",
      "comments": []
    },
    {
      "issue_number": 839,
      "title": "[FIX] Files/folders not uploading from Desktop app",
      "body": "## Describe the bug\r\nFiles and folders don't seem to be uploading from the desktop app.\r\n\r\n## To Reproduce\r\n1. Self-host Khoj\r\n2. Self-host llama 3 on different machine\r\n3. Download and run appimage desktop app\r\n4. Confirm can connect to server and process chats. Attempt to upload files. Click save.\r\n5. Wait a while?\r\n6. Querying for said data doesn't appear to retrieve anything, nothing shows in Files on the web server, and nothing shows in \"Entrys\" in the admin.\r\n\r\n\r\n## Screenshots\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [X] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [X] Desktop app\r\n    - [ ] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [X] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\nServer and desktop are running both 1.15 versions\r\n\r\n## Additional context\r\nNot really sure what to look for in the server logs or if I can get any sort of debug log from the appimage.\r\n",
      "state": "open",
      "author": "samteezy",
      "author_type": "User",
      "created_at": "2024-07-06T13:04:39Z",
      "updated_at": "2025-02-18T12:17:28Z",
      "closed_at": null,
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/839/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/839",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/839",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:39.510932",
      "comments": [
        {
          "author": "sabaimran",
          "body": "hey @samteezy. What are you seeing in the backend when you click save on the desktop application? You should typically see some log lines indicating that a new indexing job is started.\r\n\r\nPotentially there may be a rate limit being applied to your uploads. You can check the developer console on your",
          "created_at": "2024-09-03T20:18:42Z"
        },
        {
          "author": "saccohuo",
          "body": "Same problem, I am using pip to install khoj.\r\nWhen I add folder on Desktop version, the sever has no reaction.",
          "created_at": "2024-11-09T08:09:45Z"
        },
        {
          "author": "sabaimran",
          "body": "@saccohuo , which server URL are you using?",
          "created_at": "2024-11-09T10:34:09Z"
        },
        {
          "author": "saccohuo",
          "body": "> @saccohuo , which server URL are you using?@saccohuo，你正在使用哪个服务器网址？\r\n\r\nhttp://127.0.0.1:42110",
          "created_at": "2024-11-10T14:51:27Z"
        },
        {
          "author": "damiencorpataux",
          "body": "Same problem here on MacOS. The **desktop app v1.33.1** connects to the on http://localhost:42110, but the files are not uploaded to my self-hosted **server v1.36.5**. My server run in `--anonymous-mode` (and no API key is set on the desktop app).\n\n@sabaimran, here is the log of my docker compose co",
          "created_at": "2025-02-18T12:09:27Z"
        }
      ]
    },
    {
      "issue_number": 1114,
      "title": "[FIX] Unable to host on internal ip and access admin panel",
      "body": "## Describe the bug\nI am trying to host Khoj on an internal nas for personal use. I'm using container manager from Synology and using the compose file from the repo to run with a few minor tweaks to make it compatible with Container manager. Mostly just how volume mappings work. I have set the environment variable for the admin email and password. The site comes up with the default account which is for anonymous access, however access admin does not work. My username and password is accepted because it does throw an error if it's a bad pass, however the admin login page just displays again. It's like it get lost after successful auth and it just sends back to the login. I have the khoj_domain also set to 192.168.60.190 which is the ip to my nas the port is still the default 42110. Note: I did try to create a local domain of nas.local and I set the khoj_domain to this but I still was getting csrf errors from Django. \n\n## To Reproduce\nI don't know that the NAS is important here but try hosting on any local ip other than localhost and I'm assuming the login will do the same. Maybe it's just not possible to run this way. \n\n## Screenshots\nIf applicable, add screenshots to help explain your problem.\n\nIt's just the login screen again not sure screenshots are that useful. I can provide one if needed. \n\n## Platform\n- Server:\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\n    - [ X] Self-Hosted Docker\n    - [ ] Self-Hosted Python package\n    - [ ] Self-Hosted source code\n- Client:\n    - [ ] Obsidian\n    - [ ] Emacs\n    - [ ] Desktop app\n    - [ X] Web browser\n    - [ ] WhatsApp\n- OS:\n    - [ X] Windows - windows client(browser)\n    - [ ] macOS\n    - [ X] Linux - nas is linux\n    - [ ] Android\n    - [ ] iOS\n\n### If self-hosted\n- Server Version [e.g. 1.0.1]: Using the latest images. \n\n## Additional context\nAdd any other context about the problem here.\n\nFull docker compose:\n\n```yaml\nservices:\n  database:\n    image: ankane/pgvector\n    environment:\n      POSTGRES_USER: postgres\n      POSTGRES_PASSWORD: postgres\n      POSTGRES_DB: postgres\n    volumes:\n      - /volume1/docker/khoj/khoj_db/:/var/lib/postgresql/data/\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U postgres\"]\n      interval: 30s\n      timeout: 10s\n      retries: 5\n  sandbox:\n    image: ghcr.io/khoj-ai/terrarium:latest\n  server:\n    depends_on:\n      database:\n        condition: service_healthy\n    # Use the following line to use the latest version of khoj. Otherwise, it will build from source. Set this to ghcr.io/khoj-ai/khoj-cloud:latest if you want to use the prod image.\n    image: ghcr.io/khoj-ai/khoj:latest\n    # Uncomment the following line to build from source. This will take a few minutes. Comment the next two lines out if you want to use the official image.\n    # build:\n      # context: .\n    ports:\n      # If changing the local port (left hand side), no other changes required.\n      # If changing the remote port (right hand side),\n      #   change the port in the args in the build section,\n      #   as well as the port in the command section to match\n      - \"42110:42110\"\n    extra_hosts:\n      - \"host.containers.internal:host-gateway\"\n    working_dir: /app\n    volumes:\n      - /volume1/docker/khoj/khoj_config:/root/.khoj/\n      - /volume1/docker/khoj/khoj_models:/root/.cache/torch/sentence_transformers\n      - /volume1/docker/khoj/khoj_models:/root/.cache/huggingface\n    # Use 0.0.0.0 to explicitly set the host ip for the service on the container. https://pythonspeed.com/articles/docker-connection-refused/\n    environment:\n      - POSTGRES_DB=postgres\n      - POSTGRES_USER=postgres\n      - POSTGRES_PASSWORD=postgres\n      - POSTGRES_HOST=database\n      - POSTGRES_PORT=5432\n      - KHOJ_DJANGO_SECRET_KEY=secret\n      - KHOJ_DEBUG=True\n      - KHOJ_ADMIN_EMAIL=my.email@gmail.com\n      - KHOJ_ADMIN_PASSWORD=password\n      # Default URL of Terrarium, the Python sandbox used by Khoj to run code. Its container is specified above\n      - KHOJ_TERRARIUM_URL=http://sandbox:8080\n      # Default URL of SearxNG, the default web search engine used by Khoj. Its container is specified above\n      - KHOJ_SEARXNG_URL=http://192.168.60.190:8085\n      # Uncomment line below to use with Ollama running on your local machine at localhost:11434.\n      # Change URL to use with other OpenAI API compatible providers like VLLM, LMStudio etc.\n      - OPENAI_BASE_URL=http://192.168.60.40:11434/v1/\n      #\n      # Uncomment appropriate lines below to use chat models by OpenAI, Anthropic, Google.\n      # Ensure you set your provider specific API keys.\n      # ---\n      # - OPENAI_API_KEY=your_openai_api_key\n      # - GEMINI_API_KEY=your_gemini_api_key\n      # - ANTHROPIC_API_KEY=your_anthropic_api_key\n      #\n      # Uncomment appropriate lines below to enable web results with Khoj\n      # Ensure you set your provider specific API keys.\n      # ---\n      # Free, Slower API. Does both web search and webpage read. Get API key from https://jina.ai/\n      # - JINA_API_KEY=your_jina_api_key\n      # Paid, Fast API. Only does web search. Get API key from https://serper.dev/\n      # - SERPER_DEV_API_KEY=your_serper_dev_api_key\n      # Paid, Fast, Open API. Only does webpage read. Get API key from https://firecrawl.dev/\n      # - FIRECRAWL_API_KEY=your_firecrawl_api_key\n      # Paid, Fast, Higher Read Success API. Only does webpage read. Get API key from https://olostep.com/\n      # - OLOSTEP_API_KEY=your_olostep_api_key\n      #\n      # Uncomment the necessary lines below to make your instance publicly accessible.\n      # Replace the KHOJ_DOMAIN with either your domain or IP address (no http/https prefix).\n      # Proceed with caution, especially if you are using anonymous mode.\n      # ---\n      - KHOJ_NO_SSL=True\n      - KHOJ_NO_HTTPS=True\n      - KHOJ_DOMAIN=192.168.60.190\n      # - KHOJ_DOMAIN=khoj.example.com\n      # Uncomment the line below to disable telemetry.\n      # Telemetry helps us prioritize feature development and understand how people are using Khoj\n      # Read more at https://docs.khoj.dev/miscellaneous/telemetry\n      - KHOJ_TELEMETRY_DISABLE=True\n    # Comment out this line when you're using the official ghcr.io/khoj-ai/khoj-cloud:latest prod image.\n    command: --host=\"0.0.0.0\" --port=42110 -vvvvv --anonymous-mode\n```\n\nOnly changes really to note from original are the way volumes work for synology. I also removed the Searxng as I already had one running. Then just the ip/urls for the vars. ",
      "state": "closed",
      "author": "AndyG-0",
      "author_type": "User",
      "created_at": "2025-02-13T03:42:32Z",
      "updated_at": "2025-02-17T10:23:35Z",
      "closed_at": "2025-02-17T10:23:34Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1114/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1114",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1114",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:39.703270",
      "comments": []
    },
    {
      "issue_number": 1111,
      "title": "[FIX] Email based Log-in Issue on Khoj self hosted using Docker",
      "body": "## Describe the bug\nThe \"email log-in code\" button was stuck after clicking. No submission action and can not receive any code email.\n\n## To Reproduce\nAccess to http://localhost:42110\nLog-in screen pop-up\nSelect continue with email\nEnter the email address\nClick the \"send sign-in code\" button...\n\nNo repsponse\n\n## Screenshots\nIf applicable, add screenshots to help explain your problem.\n\n![Image](https://github.com/user-attachments/assets/169793d0-bbce-4b37-b92f-77c27fa3537a)\n\n## Platform\n- Server:\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\n    - [x] Self-Hosted Docker\n    - [ ] Self-Hosted Python package\n    - [ ] Self-Hosted source code\n- Client:\n    - [ ] Obsidian\n    - [ ] Emacs\n    - [ ] Desktop app\n    - [x] Web browser\n    - [ ] WhatsApp\n- OS:\n    - [ ] Windows\n    - [x] macOS\n    - [ ] Linux\n    - [ ] Android\n    - [ ] iOS\n\n### If self-hosted\n- Server Version [1.36.5]:\n\n## Additional context\nAdd any other context about the problem here.\n",
      "state": "closed",
      "author": "ses770227",
      "author_type": "User",
      "created_at": "2025-02-12T08:35:57Z",
      "updated_at": "2025-02-17T06:50:23Z",
      "closed_at": "2025-02-17T06:50:23Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1111/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1111",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1111",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:39.703290",
      "comments": [
        {
          "author": "debanjum",
          "body": "1. Khoj starts in anonymous mode by default with the khoj docker image. For a single user, local only setup login isn't required. Are you using the khoj cloud image or have you intentionally enabled authentication for your Khoj instance?\n2. To use Khoj with email based login enabled you need to set ",
          "created_at": "2025-02-13T12:19:46Z"
        },
        {
          "author": "ses770227",
          "body": "Worked under anonymous mode. Thx!",
          "created_at": "2025-02-17T04:32:15Z"
        }
      ]
    },
    {
      "issue_number": 1119,
      "title": "[FIX] ERR_INCOMPLETE_CHUNKED_ENCODING 200 (OK) and 404 (Not Found",
      "body": "## Describe the bug\nA clear and concise description of what the bug is. Please include what you were expecting to happen vs. what actually happened.\n\n## To Reproduce\nSteps to reproduce the behavior:\n\n## Screenshots\nIf applicable, add screenshots to help explain your problem.\n\n## Platform\n- Server:\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\n    - [✓] Self-Hosted Docker\n    - [ ] Self-Hosted Python package\n    - [ ] Self-Hosted source code\n- Client:\n    - [ ] Obsidian\n    - [ ] Emacs\n    - [ ] Desktop app\n    - [✓] Web browser\n    - [ ] WhatsApp\n- OS:\n    - [✓] Windows\n    - [ ] macOS\n    - [ ] Linux\n    - [ ] Android\n    - [ ] iOS\n\n### If self-hosted\n- Server Version [e.g. 1.0.1]:\n1.36.5\n\n\n## Additional context\nWhen I use docker-compose up and try to ask a question I am seeing these errors in web tool:\n\npage-3171ca8e84d308e3.js:1 \n            \n            \n```\n            POST http://localhost:42110/api/chat?client=web net::ERR_INCOMPLETE_CHUNKED_ENCODING 200 (OK)\nQ @ page-3171ca8e84d308e3.js:1\n(anonymous) @ page-3171ca8e84d308e3.js:1\naW @ fd9d1056-7454f5bbfcf5bd5b.js:1\n...\nnw @ fd9d1056-7454f5bbfcf5bd5b.js:1\n(anonymous) @ fd9d1056-7454f5bbfcf5bd5b.js:1\n2117-ce1f0a4598f5e4fe.js:1  {streamError: 'Error reading API error response stream. Expected JSON response.'}\npush.92304.window.console.error @ 2117-ce1f0a4598f5e4fe.js:1\nQ @ page-3171ca8e84d308e3.js:1\nawait in Q\n(anonymous) @ page-3171ca8e84d308e3.js:1\naW @ fd9d1056-7454f5bbfcf5bd5b.js:1\n...\n2117-ce1f0a4598f5e4fe.js:1 \n            \n            GET http://localhost:42110/chat.txt?conversationId=b01b9a21-a9fa-475d-951c-26fe703067ba&_rsc=15j27 404 (Not Found)\n```\n\nAlso, when I try to ask a question it runs for a while then gives me this message:\n\n`Umm, not sure what just happened but I lost my train of thought. Could you try again or ask my developers to look into this if the issue persists? They can be contacted at the Khoj Github, Discord or team@khoj.dev.`\n\nI have spent time studying the guide at https://docs.khoj.dev/get-started/setup/?os=windows and a lot of github issue posts but have not been able to get it running.  Does anyone have any suggestions?  TIA.\n\n",
      "state": "open",
      "author": "john1726",
      "author_type": "User",
      "created_at": "2025-02-15T20:25:40Z",
      "updated_at": "2025-02-15T20:25:40Z",
      "closed_at": null,
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1119/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1119",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1119",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:39.925170",
      "comments": []
    },
    {
      "issue_number": 1116,
      "title": "[FIX] Public Agents on self-hosted setup not visible to other users",
      "body": "## Describe the bug\nOn a self-hosted system running on docker, User 1 creates an agent set to public. User 2 logs in and can not see or use the agent. They can see and use their own agents. \n\n## To Reproduce\nsee above\n\n\n## Platform\n- Server:\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\n    - [X] Self-Hosted Docker\n    - [ ] Self-Hosted Python package\n    - [ ] Self-Hosted source code\n- Client:\n    - [ ] Obsidian\n    - [ ] Emacs\n    - [ ] Desktop app\n    - [X] Web browser\n    - [ ] WhatsApp\n- OS:\n    - [ ] Windows\n    - [ ] macOS\n    - [X] Linux\n    - [ ] Android\n    - [ ] iOS\n\n### If self-hosted\n- Server Version [e.g. 1.0.1]: 1.36.5\n\n## Additional context\nWhen I create an agent via the admin panel, it is visible to all users on the server, but I have not found a way to define a knowledge base for the agent through the admin portal\n",
      "state": "open",
      "author": "Lock19CFR",
      "author_type": "User",
      "created_at": "2025-02-14T14:53:02Z",
      "updated_at": "2025-02-14T14:53:02Z",
      "closed_at": null,
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1116/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1116",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1116",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:39.925190",
      "comments": []
    },
    {
      "issue_number": 1115,
      "title": "[FIX] All other interfaces are blocked and show a “pending” status when waiting for the model to generate output",
      "body": "## Describe the bug\nI encountered an issue: when one user is chatting and the model performs an online search, before the response is generated, other users cannot even load the page. Additionally, I noticed that as long as the message has not been output, any other API requests remain in a pending state. Only when the message starts to output do the API calls resume normal execution which feels like a single-threaded issue. What could be the reason for this?\n\n## To Reproduce\nWhen you ask the model a question—especially one that triggers an online search or another time-consuming operation—then try calling other APIs or opening a new page, you’ll notice that all requests and pages remain in a loading state. This makes it look like the APIs are being blocked.\n\n## Screenshots\n\n<img width=\"1338\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/9603392f-04a0-4b8d-bda0-28a4cdb9f192\" />\n\n## Platform\n- Server:\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\n    - [* ] Self-Hosted Docker\n    - [ ] Self-Hosted Python package\n    - [ ] Self-Hosted source code\n- Client:\n    - [ ] Obsidian\n    - [ ] Emacs\n    - [ ] Desktop app\n    - [* ] Web browser\n    - [ ] WhatsApp\n- OS:\n    - [ ] Windows\n    - [* ] macOS\n    - [*] Linux\n    - [ ] Android\n    - [ ] iOS\n\n### If self-hosted\n\n\n## Additional context\n\n",
      "state": "open",
      "author": "18758851174",
      "author_type": "User",
      "created_at": "2025-02-13T12:33:40Z",
      "updated_at": "2025-02-14T12:39:50Z",
      "closed_at": null,
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1115/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1115",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1115",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:39.925197",
      "comments": [
        {
          "author": "debanjum",
          "body": "Is Khoj on the same network as all the users? Are you deploying it on a local machine or on a cloud server? What's the use-case?\n\nThe default khoj self-hosting setup is not tuned for multi-user setups currently. The default setup uses a single worker. This is why you see it gets blocked on multiple ",
          "created_at": "2025-02-13T20:18:20Z"
        },
        {
          "author": "18758851174",
          "body": "> Is Khoj on the same network as all the users? Are you deploying it on a local machine or on a cloud server? What's the use-case?\n> \n> The default khoj self-hosting setup is not tuned for multi-user setups currently. The default setup uses a single worker. This is why you see it gets blocked on mul",
          "created_at": "2025-02-14T12:39:49Z"
        }
      ]
    },
    {
      "issue_number": 1108,
      "title": "[FIX] Doesn't work with self hosted Firecrawl",
      "body": "## Describe the bug\nHello,\n\nI have a self-hosted version of Firecrawl, available at http://192.168.10.120:3002. Running \n`curl -X POST http://192.168.10.120:3002/v1/scrape \\\n    -H 'Content-Type: application/json' \\\n    -d '{\n      \"url\": \"http://perdu.com\",\n      \"formats\" : [\"markdown\", \"html\"]\n    }'`\nfrom the Khoj server docker is working fine. But when I want to use it with Khoj, it doesn't make a request to the firecrawl instance.\n\n## To Reproduce\nSteps to reproduce the behavior:\n- Setup a firecrawl instance\n- Setup the API endpoint in Khoj\n- make a request that need access to the internet.\n\n## Screenshots\n    Web scrapers\n![Image](https://github.com/user-attachments/assets/1dc79673-3a56-4780-a843-1f84ec7ebf43)\n\nServer chat settings\n![Image](https://github.com/user-attachments/assets/4b67307b-69f3-4a49-a800-76c0b47d1d4f)\n\n## Platform\n- Server:\n    - [X ] Self-Hosted Docker\n- Client:\n    - [X ] Web browser\n- OS:\n    - [ X] Linux: Ubuntu 24.04\n\n### If self-hosted\n- Server Version : 1.36.4\n\n## Additional context\nAdd any other context about the problem here.\n",
      "state": "closed",
      "author": "azertylr",
      "author_type": "User",
      "created_at": "2025-02-10T17:10:11Z",
      "updated_at": "2025-02-13T15:16:49Z",
      "closed_at": "2025-02-13T12:32:49Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1108/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1108",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1108",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:40.138625",
      "comments": [
        {
          "author": "azertylr",
          "body": "I've restarted from scratch and it was working. I don't understand what happened\n\nI've also tried the env variable and it works great :\n\n```\n- FIRECRAWL_API_KEY=\n- FIRECRAWL_API_URL=\n```",
          "created_at": "2025-02-11T10:57:39Z"
        },
        {
          "author": "debanjum",
          "body": "Not sure. Setting up certain admin configs on Khoj requires service restarts. This maybe why your Firecrawl setup initially didn't get enabled? \n\nAnyway good to know that Khoj works with self-hosted Firecrawl as I hadn't tried that yet. \n\nClosing this issue for now. Feel free to re-open it if you fe",
          "created_at": "2025-02-13T12:32:49Z"
        },
        {
          "author": "azertylr",
          "body": "It may be because I first setup my self hosted firecrawl using the admin UI and didn't restart.\n\nIts good that using env var is working!",
          "created_at": "2025-02-13T15:16:48Z"
        }
      ]
    },
    {
      "issue_number": 508,
      "title": "Add a way to exit chat request early from the chat UI",
      "body": "The local llama chat response can take minutes sometimes. If you want to update the request and tweak it, then this can mean a lot of waiting in order to retry your request. Add some way to send an interrupt signal from the UI to cancel the request.\r\n\r\nSee [relevant discussion on Discord](https://discord.com/channels/1112065956647284756/1112066421577482262/1164406404971511839).",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-10-19T18:36:45Z",
      "updated_at": "2025-02-13T12:05:10Z",
      "closed_at": "2025-02-13T12:05:09Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/508/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/508",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/508",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:42.334707",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Mini-update. I looked into this today and found that gpt4all only supports shortcircuiting the model response after tokens have already started emitting. So, you can't stop it from 'thinking', so to speak, once it's already been given a query. To that end, I'll update the UI so that you can cancel t",
          "created_at": "2023-10-23T03:43:11Z"
        },
        {
          "author": "debanjum",
          "body": "Closing this issue as this is supported on the web app since 4a1b1e8. @sabaimran feel free to re-open the issue if I this is incorrect",
          "created_at": "2025-02-13T12:05:09Z"
        }
      ]
    },
    {
      "issue_number": 366,
      "title": "Allow to parse a public GitHub repo without needing a Personal Access Token",
      "body": "Currently a token is required.\r\n\r\nIt should not be needed for a public repository.",
      "state": "closed",
      "author": "leszekhanusz",
      "author_type": "User",
      "created_at": "2023-07-30T13:50:42Z",
      "updated_at": "2025-02-13T11:56:31Z",
      "closed_at": "2025-02-13T11:56:30Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/366/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/366",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/366",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:42.518962",
      "comments": [
        {
          "author": "debanjum",
          "body": "Agreed. Thanks for creating an issue to track this",
          "created_at": "2023-08-01T21:14:07Z"
        },
        {
          "author": "debanjum",
          "body": "While the Github repository indexing is unmaintained right now, this issue was fixed in 1eaa54b0",
          "created_at": "2025-02-13T11:56:30Z"
        }
      ]
    },
    {
      "issue_number": 1113,
      "title": "[FIX] Don't get documents from Obsidian client plugin",
      "body": "## Describe the bug\nSynchronization of Obsidian vault with Khoj server gets stuck during Force Sync operation. While the connection to the server is established successfully and the initial API calls are made, the synchronization process never completes. The \"Updating\" moon animation in the Obsidian plugin continues indefinitely without any progress.\n\nExpected behavior: The Force Sync operation should index all markdown files from the Obsidian vault into the Khoj knowledge base, as it successfully did during the previous setup with the same configuration.\n\nActual behavior: After initiating Force Sync, the server logs show initial connection and setup steps, but the indexing process appears to halt without any error messages or further progress. No documents appear in the knowledge base despite the sync appearing to run (spinning animation).\n\n## To Reproduce\nSteps to reproduce the behavior:\n1. Install Khoj server using Docker on Linux\n2. Configure Ollama with llama3.2-vision model as the AI backend\n3. Install and enable Khoj plugin in Obsidian\n4. Configure server connection in the plugin settings\n5. Verify successful connection (connection successful message appears)\n6. Click \"Force Sync\" button\n7. Observe that sync process initiates (logs show initial API calls) but never completes\n8. Wait several hours - no progress is made, no documents appear in knowledge base\n\n## Screenshots\nN/A\n\n## Platform\n- Server:\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\n    - [x] Self-Hosted Docker\n    - [ ] Self-Hosted Python package\n    - [ ] Self-Hosted source code\n- Client:\n    - [x] Obsidian\n    - [ ] Emacs\n    - [ ] Desktop app\n    - [ ] Web browser\n    - [ ] WhatsApp\n- OS:\n    - [ ] Windows\n    - [ ] macOS\n    - [x] Linux\n    - [ ] Android\n    - [ ] iOS\n\n### If self-hosted\n- Server Version: 1.36.4\n\n## Additional context\n- Chat functionality works correctly - both through Obsidian plugin and web client\n- Previous installation with similar configuration successfully indexed 800+ documents\n- Current installation was done after removing Docker volumes from previous setup\n- Server logs show successful initial setup and telemetry, but no indexing progress\n- No error messages are present in the logs\n- Using Ollama with llama3.2-vision model as LLM backend",
      "state": "open",
      "author": "beliashou",
      "author_type": "User",
      "created_at": "2025-02-12T17:46:47Z",
      "updated_at": "2025-02-12T17:46:47Z",
      "closed_at": null,
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1113/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1113",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1113",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:42.763388",
      "comments": []
    },
    {
      "issue_number": 1081,
      "title": "[FIX]I have imported llama3.1, but it still cannot be used",
      "body": "## Describe the bug\r\nAccording to the document https://docs.khoj.dev/advanced/ollama, follow the steps to execute the terminal command, but it still doesn't work\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n\r\n1. Download Ollama\r\n2. ollama pull llama3.1\r\n3. Uncomment OPENAI_API_BASE environment variable in your downloaded Khoj [docker-compose.yml](https://github.com/khoj-ai/khoj/blob/master/docker-compose.yml#:~:text=OPENAI_API_BASE)\r\n4. docker-compose up\r\n5. khoj: 🌖 Khoj is ready to use             main.py:220\r\n6. Enter text, but no reply\r\n\r\n\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [x] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [x] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [x] macOS 14.1.1  \r\n    - CPU 3 GHz Hexa-core Intel Core i5\r\n    - Radeon Pro 570X 4 GB\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]: khoj 1.33.2\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n<img width=\"1267\" alt=\"iShot_2025-01-13_10 42 57\" src=\"https://github.com/user-attachments/assets/b620f895-3822-454a-9aea-a06e3ae30041\" />\r\n<img width=\"1259\" alt=\"iShot_2025-01-13_10 43 37\" src=\"https://github.com/user-attachments/assets/1c348a76-81ab-4460-b47b-7d63fea6e3e0\" />\r\n<img width=\"936\" alt=\"iShot_2025-01-13_10 57 18\" src=\"https://github.com/user-attachments/assets/a27cc48b-6974-498a-bc4d-e4467a452189\" />\r\n<img width=\"935\" alt=\"iShot_2025-01-13_10 57 36\" src=\"https://github.com/user-attachments/assets/20fa4eda-9811-4eac-9709-ef583f4a6f95\" />\r\n<img width=\"838\" alt=\"iShot_2025-01-13_11 01 22\" src=\"https://github.com/user-attachments/assets/b070e0a4-5ae4-4174-b2b2-c840c9f8a537\" />\r\n\r\n",
      "state": "open",
      "author": "YJExpand",
      "author_type": "User",
      "created_at": "2025-01-13T03:01:56Z",
      "updated_at": "2025-02-08T06:18:00Z",
      "closed_at": null,
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1081/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1081",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1081",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:42.763409",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Hi @YJExpand ! Thank you for all the details. \r\n\r\nThis isn't super clear in the docs, but you will have to add a different chat model that's pulling from Ollama, rather than the defaults. For instance, see the instructions for setting up with Ollama and in the `Update` tab, step 4. \r\n\r\nOnce you've c",
          "created_at": "2025-01-13T03:07:46Z"
        },
        {
          "author": "YJExpand",
          "body": "> Hi @YJExpand ! Thank you for all the details.\r\n> \r\n> This isn't super clear in the docs, but you will have to add a different chat model that's pulling from Ollama, rather than the defaults. For instance, see the instructions for setting up with Ollama and in the `Update` tab, step 4.\r\n> \r\n> Once ",
          "created_at": "2025-01-13T03:54:42Z"
        },
        {
          "author": "sabaimran",
          "body": "Okay glad we got the first issue working! \n\nWhat kind of device do you have? Does it have a GPU, how much RAM? \n\nThere were some timeout-related limitations that we were going to expand that should help. We have fixed for those that should be in the next release. ",
          "created_at": "2025-01-14T16:39:43Z"
        },
        {
          "author": "YJExpand",
          "body": "> Okay glad we got the first issue working!\n> \n> What kind of device do you have? Does it have a GPU, how much RAM?\n> \n> There were some timeout-related limitations that we were going to expand that should help. We have fixed for those that should be in the next release.\n\niMac\nCPU: 3 GHz Hexa-core I",
          "created_at": "2025-01-17T02:15:53Z"
        }
      ]
    },
    {
      "issue_number": 1037,
      "title": "[Question] Github Integration on the cloud app, settings#github show nothing about github",
      "body": "## Describe the bug\r\nI don't know if it is a bug, sorry, but I can not found any information about it. \r\nIn the docs talks about the index repos from the github using github plugin with a PAT but on the URL ![settings#github](https://app.khoj.dev/settings#github) don't appear anything\r\n\r\n\r\n\r\n\r\n\r\n\r\n## To Reproduce\r\n- Connect with google account from the ![cloud site](https://app.khoj.dev)\r\n- go to ![settings](https://app.khoj.dev/settings#github)\r\n## Screenshots\r\n![image](https://github.com/user-attachments/assets/9b7993c7-6a51-4c4f-a264-5e0cd80a0713)\r\n\r\n## Platform\r\n- Server:\r\n    - [x ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [ ] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [x ] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [x ] Windows\r\n    - [ ] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n\r\n## Additional context\r\nI'm sorry if this not belog to this side and thank you\r\n",
      "state": "open",
      "author": "tsukitaro",
      "author_type": "User",
      "created_at": "2025-01-07T14:51:36Z",
      "updated_at": "2025-02-02T20:35:11Z",
      "closed_at": null,
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1037/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1037",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1037",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:42.991352",
      "comments": [
        {
          "author": "prestonvanloon",
          "body": "Same behavior in self-hosted. ",
          "created_at": "2025-01-08T19:43:27Z"
        },
        {
          "author": "prestonvanloon",
          "body": "The card seems hidden: https://github.com/khoj-ai/khoj/blob/7eb15bf0a9191f314503ee3daef8e0a05095d496/src/interface/web/app/settings/page.tsx#L1090\r\n\r\n/shrug",
          "created_at": "2025-01-08T19:47:33Z"
        },
        {
          "author": "sabaimran",
          "body": "Ah, hey guys, thanks for reporting this issue. We actually have been softly deprecating this integration for a few reasons:\n- Our indexing pipeline mainly caters to natural language indexing, while most people intend to index GitHub repos to chat with code. We didn't specifically want to build out a",
          "created_at": "2025-01-08T20:59:37Z"
        },
        {
          "author": "prestonvanloon",
          "body": "My use case is that I want to ingest docs repos as part of the knowledge base. These are mostly markdown with python for reference. ",
          "created_at": "2025-01-08T21:24:12Z"
        },
        {
          "author": "tsukitaro",
          "body": "I’ve been researching if it’s possible to create an agent that works with GitHub repositories, not as a code analyzer but as a GitHub assistant to make queries, etc. However, I’m still unsure if this is possible.",
          "created_at": "2025-01-08T21:27:20Z"
        }
      ]
    },
    {
      "issue_number": 1092,
      "title": "[IDEA] Password based Authentication is missing",
      "body": "## Describe the feature you'd like\nIt said that the installation locally/on-prem would be possible; using Local AI and others tools makes it nearly possible.\n\nBUT, ...\n\n... what about authentication?! A closed network for operation would mean, that there is no connection to Google or Resend (beside that, IMHO I would never use one of these).\n\nAdditionally, operated on prem, there is probably an appropriate directory, authentication mech, ... available!?\n\n\n1. I am able to manage users (with passwords and everything) within the `/server/admin` interface, but how could these users login then?\n\n\n2. (long term/the read Feature Request) connection to something like Key Cloak, ..., ... would be perfect for saying \"installable on prem\". ;))\n",
      "state": "open",
      "author": "nesretep-anp1",
      "author_type": "User",
      "created_at": "2025-01-20T13:26:05Z",
      "updated_at": "2025-01-24T15:45:48Z",
      "closed_at": null,
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1092/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1092",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1092",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:43.171111",
      "comments": [
        {
          "author": "nesretep-anp1",
          "body": "A JWT based redirect system would be good as well.",
          "created_at": "2025-01-20T13:35:58Z"
        },
        {
          "author": "nesretep-anp1",
          "body": "Beside that, each auth mech should be able to get enabled or disabled.\n\nE.g. disable Google Auth.\n\nAnd, ... \"Register\" should be able to get disabled too.\n",
          "created_at": "2025-01-22T09:26:50Z"
        }
      ]
    },
    {
      "issue_number": 1020,
      "title": "Add Delete chat message action to the Obsidian Plugin",
      "body": "The Khoj API supports deleting specific chat messages. The web app already uses that. But the Khoj Obsidian plugin doesn't use it yet.\r\n\r\nThis feature should \r\n- Add a Delete message button to each chat message footer in the Obsidian plugin's chat view\r\n- Clicking it should \r\n  1. Call the Khoj server API to delete the Khoj or user message\r\n  2. Refresh the Khoj Obsidian UI with the conversation turn (= Khoj + associated user message) deleted",
      "state": "closed",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2024-12-30T20:16:07Z",
      "updated_at": "2025-01-20T23:35:39Z",
      "closed_at": "2025-01-20T23:35:39Z",
      "labels": [
        "upgrade",
        "good first issue"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1020/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1020",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1020",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:43.344699",
      "comments": [
        {
          "author": "samhoooo",
          "body": "Hi @debanjum , if no one is working on it,  I can pick this up. Thanks",
          "created_at": "2025-01-11T17:00:05Z"
        }
      ]
    },
    {
      "issue_number": 1024,
      "title": "Show autocomplete suggestions for File Query Filters on Web App",
      "body": "### Background\r\nKhoj chat supports[ query filters](https://docs.khoj.dev/miscellaneous/query-filters). These allow you to filter notes, documents to use by Khoj for its response (by filename, date range and words). \r\n\r\nCurrently you need type the whole filepath manually in the file query filter. This is pointlessly annoying.\r\n\r\n### Feature\r\n\r\nWhen you type `file:` you should see list of all synced files to auto-complete. This list should be filtered down as you type more letters `e.g `file:Task` should only show `tasks.org` or `TaskList.md` from my documents as auto-complete suggestions.",
      "state": "closed",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2024-12-30T21:32:30Z",
      "updated_at": "2025-01-20T20:35:44Z",
      "closed_at": "2025-01-20T20:35:44Z",
      "labels": [
        "upgrade",
        "good first issue"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1024/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1024",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1024",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:43.533811",
      "comments": []
    },
    {
      "issue_number": 1093,
      "title": "[IDEA] Own/on prem SMTP server should be usable",
      "body": "## Describe the feature you'd like\nUsing an existent/local available SMTP gateway should be usable completely replacing the Resend implementation.\n\n[1092]\n",
      "state": "open",
      "author": "nesretep-anp1",
      "author_type": "User",
      "created_at": "2025-01-20T13:37:25Z",
      "updated_at": "2025-01-20T13:37:25Z",
      "closed_at": null,
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1093/reactions",
        "total_count": 3,
        "+1": 3,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1093",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1093",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:43.533830",
      "comments": []
    },
    {
      "issue_number": 1090,
      "title": "[FIX] Cannot register using an email containing a plus",
      "body": "## Describe the bug\nRegistering using an email containing a `+` character does not work\n\n## To Reproduce\n1. Have an email from Google (let's say `example@gmail.com`)\n2. Go to https://app.khoj.dev/ while logged out\n3. Press \"Log in with email\" (to register)\n4. Enter `example+unicorns@gmail.com` (see https://gmail.googleblog.com/2008/03/2-hidden-ways-to-get-more-from-your.html).\n\nthe website accepts the email.\n\n5. Receive the 6-digit code and enter it\n\nNothing happens, without any indication of an error\n\n## Platform\n- Server: Cloud-Hosted (https://app.khoj.dev)\n- Client: Web browser\n- OS: Linux\n\n## Additional context\nIf you open the devtools, you'll see this GET request that gets a 404 response:\n```\nhttps://app.khoj.dev/auth/magic?code=123456&email=example unicorns@gmail.com\n```\n\nThe problem is likely in this code:\nhttps://github.com/khoj-ai/khoj/blob/af9e906cb57caf80ba8a3e6ea35978dcee9d206a/src/khoj/routers/email.py#L31-L32\nInstead of sending the `+` character to the client in the quoted form (`%2B`), it is sent as is (`+`), so it's getting interpreted as a space character.\n\nIn general, URL parameters should not be formatted like this without escaping (see [CWE-99](https://cwe.mitre.org/data/definitions/99.html)). A good solution is probably using `urllib.parse` to escape the email and the code. ",
      "state": "closed",
      "author": "decorator-factory",
      "author_type": "User",
      "created_at": "2025-01-18T19:14:06Z",
      "updated_at": "2025-01-19T06:38:11Z",
      "closed_at": "2025-01-19T06:28:31Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1090/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 1,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1090",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1090",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:43.533836",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hey @decorator-factory thanks for the detailed bug report and suggested fix! \n\nI've pushed a fix for it to the main branch. The login with plus email address issue should be fixed on app.khoj.dev by the next release (likely in the next day or two).\n\nLogin flows validated as working after [the fix](h",
          "created_at": "2025-01-19T06:37:52Z"
        }
      ]
    },
    {
      "issue_number": 1067,
      "title": "Automation mail is not being sent on self hosted.",
      "body": "## Describe the bug\r\nI configured the Resend keys according to the documentation and also the google sign-in option too on my self hosted instance. I am trying to create an automation from the existing ones and trying to run it on-demand from the \"Run now\" button. Then it shows the toaster on bottom right that it will send the mail in a few minutes but nothing happens. I am sure the resend configuration works because I receive the login mail without any issues. I also tried anonymous and non anonymous mode both.\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\nSet up a self hosted instance and configure the resend and the google authentication based on the documentation.\r\nTry to create an automation and press \"Run Now\".\r\n\r\n## Screenshots\r\nNo SS but logs are here,\r\n[logs.txt](https://github.com/user-attachments/files/18375507/logs.txt)\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [x] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [ ] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version: 1.33.2 [khoj-ai/khoj:latest] \r\n- (also tried with the prod version since google authentication requires it.)\r\n\r\n## Additional context\r\nNo additional comments.\r\n",
      "state": "closed",
      "author": "tbelbek",
      "author_type": "User",
      "created_at": "2025-01-10T10:32:27Z",
      "updated_at": "2025-01-16T15:03:44Z",
      "closed_at": "2025-01-16T15:03:44Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1067/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1067",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1067",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:43.699859",
      "comments": [
        {
          "author": "tbelbek",
          "body": "And more logs,\r\n[logs2.txt](https://github.com/user-attachments/files/18375585/logs2.txt)\r\n",
          "created_at": "2025-01-10T10:37:21Z"
        },
        {
          "author": "sabaimran",
          "body": "Hi @tbelbek , thanks for the details. Do you mind pasting a partial stack trace directly in the issue? The file attachment doesn't seem to be loading. Any logs that you see (especially error logs) immediately after you click \"run now\" would be helpful. \n\nIt may also be helpful to see the next of you",
          "created_at": "2025-01-10T12:47:38Z"
        },
        {
          "author": "tbelbek",
          "body": "Of course, here it is;\r\n\r\n```\r\n[10:35:52.948117] INFO     uvicorn.access: 172.18.0.30:44478 -   h11_impl.py:476\r\n                           \"POST                                                \r\n                           /api/trigger/automation?automation_id                \r\n                       ",
          "created_at": "2025-01-10T13:01:27Z"
        },
        {
          "author": "debanjum",
          "body": "Hi @tbelbek, how had you setup the chat model for Khoj? We've fixed a few things in using the correct model for the automation flow. Can you verify that your Khoj is able to send automations with the latest `pre` tagged Khoj docker image? \r\n\r\nNote: *The `pre` tagged Khoj docker images are pre-releas",
          "created_at": "2025-01-16T02:09:09Z"
        },
        {
          "author": "tbelbek",
          "body": "Hello, @debanjum, I tried configuring with the api key option on the compose file and from the administration page both. But it did not work unfortunately.\r\n\r\nI also tried with the pre image but still not working. Should I try it with a clean install?\r\n\r\nThe logs looked same to me;\r\n\r\n```\r\n[09:04:45",
          "created_at": "2025-01-16T09:06:57Z"
        }
      ]
    },
    {
      "issue_number": 1057,
      "title": "[FIX] Add multiple domains to allowed list via KHOJ_DOMAIN",
      "body": "## Describe the bug\r\nHi, currently there's no way to have multiple URL's be trusted for both CORS & CSRF_TRUSTED_ORIGINS list (which breaks my setup and probably others' too).\r\n\r\nShould be a quick fix - CORS is already implemented by parsing KHOJ_DOMAIN (per #662), and still works.\r\n\r\nHowever, CSRF allowlist seems to not be correctly splitting the env variable on its commas (per below screenshot).\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n\r\nAdd a comma and a second URL to the KHOJ_DOMAINS env variable.\r\n\r\nI'm pretty sure the offending line(s) for a potential fix are:\r\nhttps://github.com/khoj-ai/khoj/blob/880368635e05173174eb51b962ebf5416ef24cef/src/khoj/app/settings.py#L31-L42\r\n\r\n<img width=\"1299\" alt=\"image\" src=\"https://github.com/user-attachments/assets/776d8fc9-4ee1-4c1b-8eb5-b2a683453ac5\" />\r\n\r\nIs someone with Django knowledge able to fix this? :pray: \r\n\r\n## Screenshots\r\n<img width=\"1265\" alt=\"image\" src=\"https://github.com/user-attachments/assets/e573020f-20eb-4150-b92b-7642d099cd7e\" />\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [x] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [x] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [x] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]: 1.33.2\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n",
      "state": "closed",
      "author": "zazer0",
      "author_type": "User",
      "created_at": "2025-01-09T07:49:36Z",
      "updated_at": "2025-01-16T02:03:15Z",
      "closed_at": "2025-01-16T02:03:15Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1057/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1057",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1057",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:43.901437",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hi @zazer0, can you describe why you need to allow multiple domains? Is setting `KHOJ_DOMAIN` to `khoj.zazers.domain` not good enough?\r\n\r\nThe ability to specify multiple `KHOJ_DOMAIN` via a comma separated list passed via an environment variable isn't supported. The `KHOJ_DOMAIN` is used to configur",
          "created_at": "2025-01-09T13:29:19Z"
        },
        {
          "author": "debanjum",
          "body": "Closing this issue as adding multiple domains to allow list via KHOJ_DOMAIN is unsupported. Let me know if you have a specific use-case that needs this",
          "created_at": "2025-01-16T02:03:15Z"
        }
      ]
    },
    {
      "issue_number": 1050,
      "title": "[FIX] searx timeout error + server crash and restart when attempting a first conversation on a new docker install",
      "body": "Hello there 😄 ! Thanks for the project, it looks absolutly amazing ! I was excited to try it, but had two errors that prevented me from using it on a new install :\r\n\r\n## Describe the bug\r\nOn a new self-hosted install of Khoj on Windows 10 through Docker, two problems pop up :\r\n\r\n1. When loading search-1, a timeout error happens on several functions.\r\n\r\n```shell\r\nsearch-1    | SearXNG version 2025.1.6+6dab7fe78\r\nsearch-1    | Use existing /etc/searxng/uwsgi.ini\r\nsearch-1    | Use existing /etc/searxng/settings.yml\r\nsearch-1    | Listen on 0.0.0.0:8080\r\nsearch-1    | [uWSGI] getting INI configuration from /etc/searxng/uwsgi.ini\r\nsearch-1    | [uwsgi-static] added mapping for /static => /usr/local/searxng/searx/static\r\nsearch-1    | *** Starting uWSGI 2.0.25.1 (64bit) on [Wed Jan  8 23:45:56 2025] ***\r\nsearch-1    | compiled with version: 13.2.1 20240309 on 17 May 2024 06:11:37\r\nsearch-1    | os: Linux-5.15.153.1-microsoft-standard-WSL2 #1 SMP Fri Mar 29 23:14:13 UTC 2024\r\nsearch-1    | nodename: 09a50607aee1\r\nsearch-1    | machine: x86_64\r\nsearch-1    | clock source: unix\r\nsearch-1    | pcre jit disabled\r\nsearch-1    | detected number of CPU cores: 16\r\nsearch-1    | current working directory: /usr/local/searxng\r\nsearch-1    | detected binary path: /usr/sbin/uwsgi\r\nsearch-1    | setgid() to 977\r\nsearch-1    | setuid() to 977\r\nsearch-1    | chdir() to /usr/local/searxng/searx/\r\nsearch-1    | your memory page size is 4096 bytes\r\nsearch-1    | detected max file descriptor number: 1048576\r\nsearch-1    | building mime-types dictionary from file /etc/mime.types...1390 entry found\r\nsearch-1    | lock engine: pthread robust mutexes\r\nsearch-1    | thunder lock: disabled (you can enable it with --thunder-lock)\r\nsearch-1    | uwsgi socket 0 bound to TCP address 0.0.0.0:8080 fd 3\r\nsearch-1    | Python version: 3.12.8 (main, Dec  7 2024, 00:01:15) [GCC 13.2.1 20240309]\r\nsearch-1    | Python main interpreter initialized at 0x7fbce82f1c30\r\nsearch-1    | python threads support enabled\r\nsearch-1    | your server socket listen backlog is limited to 100 connections\r\nsearch-1    | your mercy for graceful operations on workers is 60 seconds\r\nsearch-1    | mapped 2051424 bytes (2003 KB) for 64 cores\r\nsearch-1    | *** Operational MODE: preforking+threaded ***\r\nsearch-1    | added /usr/local/searxng/ to pythonpath.\r\nsearch-1    | spawned uWSGI master process (pid: 7)\r\nsearch-1    | spawned uWSGI worker 1 (pid: 10, cores: 4)\r\nsearch-1    | spawned uWSGI worker 2 (pid: 12, cores: 4)\r\nsearch-1    | spawned 4 offload threads for uWSGI worker 1\r\nsearch-1    | spawned uWSGI worker 3 (pid: 17, cores: 4)\r\nsearch-1    | spawned 4 offload threads for uWSGI worker 2\r\nsearch-1    | spawned uWSGI worker 4 (pid: 22, cores: 4)\r\nsearch-1    | spawned 4 offload threads for uWSGI worker 3\r\nsearch-1    | spawned uWSGI worker 5 (pid: 26, cores: 4)\r\nsearch-1    | spawned uWSGI worker 6 (pid: 29, cores: 4)\r\nsearch-1    | spawned 4 offload threads for uWSGI worker 5\r\nsearch-1    | spawned uWSGI worker 7 (pid: 34, cores: 4)\r\nsearch-1    | spawned 4 offload threads for uWSGI worker 6\r\nsearch-1    | spawned uWSGI worker 8 (pid: 39, cores: 4)\r\nsearch-1    | spawned 4 offload threads for uWSGI worker 7\r\nsearch-1    | spawned 4 offload threads for uWSGI worker 8\r\nsearch-1    | spawned uWSGI worker 9 (pid: 46, cores: 4)\r\nsearch-1    | spawned uWSGI worker 10 (pid: 50, cores: 4)\r\nsearch-1    | spawned 4 offload threads for uWSGI worker 9\r\nsearch-1    | spawned 4 offload threads for uWSGI worker 10\r\nsearch-1    | spawned uWSGI worker 11 (pid: 58, cores: 4)\r\nsearch-1    | spawned 4 offload threads for uWSGI worker 11\r\nsearch-1    | spawned uWSGI worker 12 (pid: 64, cores: 4)\r\nsearch-1    | spawned uWSGI worker 13 (pid: 65, cores: 4)\r\nsearch-1    | spawned 4 offload threads for uWSGI worker 12\r\nsearch-1    | spawned 4 offload threads for uWSGI worker 4\r\nsearch-1    | spawned 4 offload threads for uWSGI worker 13\r\nsearch-1    | spawned uWSGI worker 14 (pid: 75, cores: 4)\r\nsearch-1    | spawned 4 offload threads for uWSGI worker 14\r\nsearch-1    | spawned uWSGI worker 15 (pid: 80, cores: 4)\r\nsearch-1    | spawned uWSGI worker 16 (pid: 81, cores: 4)\r\nsearch-1    | spawned 4 offload threads for uWSGI worker 15\r\nsearch-1    | spawned 4 offload threads for uWSGI worker 16\r\nsearch-1    | 2025-01-08 23:45:58,412 WARNING:searx.botdetection.config: missing config file: /etc/searxng/limiter.toml\r\nsearch-1    | 2025-01-08 23:45:58,413 WARNING:searx.botdetection.config: missing config file: /etc/searxng/limiter.toml\r\nsearch-1    | WSGI app 0 (mountpoint='') ready in 2 seconds on interpreter 0x7fbce82f1c30 pid: 65 (default app)\r\nsearch-1    | 2025-01-08 23:45:58,421 WARNING:searx.botdetection.config: missing config file: /etc/searxng/limiter.toml\r\nsearch-1    | WSGI app 0 (mountpoint='') ready in 2 seconds on interpreter 0x7fbce82f1c30 pid: 81 (default app)\r\nsearch-1    | WSGI app 0 (mountpoint='') ready in 2 seconds on interpreter 0x7fbce82f1c30 pid: 29 (default app)\r\nsearch-1    | 2025-01-08 23:45:58,427 WARNING:searx.botdetection.config: missing config file: /etc/searxng/limiter.toml\r\nsearch-1    | 2025-01-08 23:45:58,429 WARNING:searx.botdetection.config: missing config file: /etc/searxng/limiter.toml\r\nsearch-1    | WSGI app 0 (mountpoint='') ready in 2 seconds on interpreter 0x7fbce82f1c30 pid: 75 (default app)\r\nsearch-1    | WSGI app 0 (mountpoint='') ready in 2 seconds on interpreter 0x7fbce82f1c30 pid: 22 (default app)\r\nsearch-1    | 2025-01-08 23:45:58,434 WARNING:searx.botdetection.config: missing config file: /etc/searxng/limiter.toml\r\nsearch-1    | WSGI app 0 (mountpoint='') ready in 2 seconds on interpreter 0x7fbce82f1c30 pid: 58 (default app)\r\nsearch-1    | 2025-01-08 23:45:58,445 WARNING:searx.botdetection.config: missing config file: /etc/searxng/limiter.toml\r\nsearch-1    | WSGI app 0 (mountpoint='') ready in 2 seconds on interpreter 0x7fbce82f1c30 pid: 26 (default app)\r\nsearch-1    | 2025-01-08 23:45:58,460 WARNING:searx.botdetection.config: missing config file: /etc/searxng/limiter.toml\r\nsearch-1    | WSGI app 0 (mountpoint='') ready in 2 seconds on interpreter 0x7fbce82f1c30 pid: 80 (default app)\r\nsearch-1    | 2025-01-08 23:45:58,470 WARNING:searx.botdetection.config: missing config file: /etc/searxng/limiter.toml\r\nsearch-1    | WSGI app 0 (mountpoint='') ready in 2 seconds on interpreter 0x7fbce82f1c30 pid: 34 (default app)\r\nsearch-1    | 2025-01-08 23:45:58,538 WARNING:searx.botdetection.config: missing config file: /etc/searxng/limiter.toml\r\nsearch-1    | WSGI app 0 (mountpoint='') ready in 2 seconds on interpreter 0x7fbce82f1c30 pid: 64 (default app)\r\nsearch-1    | 2025-01-08 23:45:58,555 WARNING:searx.botdetection.config: missing config file: /etc/searxng/limiter.toml\r\nsearch-1    | WSGI app 0 (mountpoint='') ready in 2 seconds on interpreter 0x7fbce82f1c30 pid: 50 (default app)\r\nsearch-1    | 2025-01-08 23:45:58,559 WARNING:searx.botdetection.config: missing config file: /etc/searxng/limiter.toml\r\nsearch-1    | WSGI app 0 (mountpoint='') ready in 2 seconds on interpreter 0x7fbce82f1c30 pid: 17 (default app)\r\nsearch-1    | 2025-01-08 23:45:58,564 WARNING:searx.botdetection.config: missing config file: /etc/searxng/limiter.toml\r\nsearch-1    | WSGI app 0 (mountpoint='') ready in 2 seconds on interpreter 0x7fbce82f1c30 pid: 46 (default app)\r\nsearch-1    | 2025-01-08 23:45:58,597 WARNING:searx.botdetection.config: missing config file: /etc/searxng/limiter.toml\r\nsearch-1    | WSGI app 0 (mountpoint='') ready in 2 seconds on interpreter 0x7fbce82f1c30 pid: 39 (default app)\r\nsearch-1    | 2025-01-08 23:45:58,630 WARNING:searx.botdetection.config: missing config file: /etc/searxng/limiter.toml\r\nsearch-1    | WSGI app 0 (mountpoint='') ready in 2 seconds on interpreter 0x7fbce82f1c30 pid: 12 (default app)\r\nsearch-1    | 2025-01-08 23:45:58,679 WARNING:searx.botdetection.config: missing config file: /etc/searxng/limiter.toml\r\nsearch-1    | WSGI app 0 (mountpoint='') ready in 2 seconds on interpreter 0x7fbce82f1c30 pid: 10 (default app)\r\nsandbox-1   | Preparing Pyodide environment\r\nsandbox-1   | Server is running on port 8080\r\nsandbox-1   | Loading Pyodide environment\r\nsandbox-1   | Loading numpy, matplotlib, cycler, six, fonttools, kiwisolver, packaging, pillow, pyparsing, python-dateutil, pytz, matplotlib-pyodide, pandas\r\nsearch-1    | 2025-01-08 23:46:01,602 ERROR:searx.engines.soundcloud: Fail to initialize\r\nsearch-1    | Traceback (most recent call last):\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 95, in request\r\nsearch-1    |     return future.result(timeout)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/lib/python3.12/concurrent/futures/_base.py\", line 458, in result\r\nsearch-1    |     raise TimeoutError()\r\nsearch-1    | TimeoutError\r\nsearch-1    |\r\nsearch-1    | The above exception was the direct cause of the following exception:\r\nsearch-1    |\r\nsearch-1    | Traceback (most recent call last):\r\nsearch-1    |   File \"/usr/local/searxng/searx/search/processors/abstract.py\", line 73, in initialize\r\nsearch-1    |     self.engine.init(get_engine_from_settings(self.engine_name))\r\nsearch-1    |   File \"/usr/local/searxng/searx/engines/soundcloud.py\", line 69, in init\r\nsearch-1    |     guest_client_id = get_client_id()\r\nsearch-1    |                       ^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/engines/soundcloud.py\", line 57, in get_client_id\r\nsearch-1    |     resp = http_get(app_js_url)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 164, in get\r\nsearch-1    |     return request('get', url, **kwargs)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 97, in request\r\nsearch-1    |     raise httpx.TimeoutException('Timeout', request=None) from e\r\nsearch-1    | httpx.TimeoutException: Timeout\r\nsearch-1    | 2025-01-08 23:46:01,603 ERROR:searx.engines.soundcloud: Fail to initialize\r\nsearch-1    | Traceback (most recent call last):\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 95, in request\r\nsearch-1    |     return future.result(timeout)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/lib/python3.12/concurrent/futures/_base.py\", line 458, in result\r\nsearch-1    |     raise TimeoutError()\r\nsearch-1    | TimeoutError\r\nsearch-1    |\r\nsearch-1    | The above exception was the direct cause of the following exception:\r\nsearch-1    |\r\nsearch-1    | Traceback (most recent call last):\r\nsearch-1    |   File \"/usr/local/searxng/searx/search/processors/abstract.py\", line 73, in initialize\r\nsearch-1    |     self.engine.init(get_engine_from_settings(self.engine_name))\r\nsearch-1    |   File \"/usr/local/searxng/searx/engines/soundcloud.py\", line 69, in init\r\nsearch-1    |     guest_client_id = get_client_id()\r\nsearch-1    |                       ^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/engines/soundcloud.py\", line 57, in get_client_id\r\nsearch-1    |     resp = http_get(app_js_url)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 164, in get\r\nsearch-1    |     return request('get', url, **kwargs)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 97, in request\r\nsearch-1    |     raise httpx.TimeoutException('Timeout', request=None) from e\r\nsearch-1    | httpx.TimeoutException: Timeout\r\nsearch-1    | 2025-01-08 23:46:01,604 ERROR:searx.engines.soundcloud: Fail to initialize\r\nsearch-1    | Traceback (most recent call last):\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 95, in request\r\nsearch-1    |     return future.result(timeout)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/lib/python3.12/concurrent/futures/_base.py\", line 458, in result\r\nsearch-1    |     raise TimeoutError()\r\nsearch-1    | TimeoutError\r\nsearch-1    |\r\nsearch-1    | The above exception was the direct cause of the following exception:\r\nsearch-1    |\r\nsearch-1    | Traceback (most recent call last):\r\nsearch-1    |   File \"/usr/local/searxng/searx/search/processors/abstract.py\", line 73, in initialize\r\nsearch-1    |     self.engine.init(get_engine_from_settings(self.engine_name))\r\nsearch-1    |   File \"/usr/local/searxng/searx/engines/soundcloud.py\", line 69, in init\r\nsearch-1    |     guest_client_id = get_client_id()\r\nsearch-1    |                       ^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/engines/soundcloud.py\", line 57, in get_client_id\r\nsearch-1    |     resp = http_get(app_js_url)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 164, in get\r\nsearch-1    |     return request('get', url, **kwargs)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 97, in request\r\nsearch-1    |     raise httpx.TimeoutException('Timeout', request=None) from e\r\nsearch-1    | httpx.TimeoutException: Timeout\r\nsearch-1    | 2025-01-08 23:46:01,612 ERROR:searx.engines.soundcloud: Fail to initialize\r\nsearch-1    | Traceback (most recent call last):\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 95, in request\r\nsearch-1    |     return future.result(timeout)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/lib/python3.12/concurrent/futures/_base.py\", line 458, in result\r\nsearch-1    |     raise TimeoutError()\r\nsearch-1    | TimeoutError\r\nsearch-1    |\r\nsearch-1    | The above exception was the direct cause of the following exception:\r\nsearch-1    |\r\nsearch-1    | Traceback (most recent call last):\r\nsearch-1    |   File \"/usr/local/searxng/searx/search/processors/abstract.py\", line 73, in initialize\r\nsearch-1    |     self.engine.init(get_engine_from_settings(self.engine_name))\r\nsearch-1    |   File \"/usr/local/searxng/searx/engines/soundcloud.py\", line 69, in init\r\nsearch-1    |     guest_client_id = get_client_id()\r\nsearch-1    |                       ^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/engines/soundcloud.py\", line 57, in get_client_id\r\nsearch-1    |     resp = http_get(app_js_url)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 164, in get\r\nsearch-1    |     return request('get', url, **kwargs)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 97, in request\r\nsearch-1    |     raise httpx.TimeoutException('Timeout', request=None) from e\r\nsearch-1    | httpx.TimeoutException: Timeout\r\nsearch-1    | 2025-01-08 23:46:01,612 ERROR:searx.engines.soundcloud: Fail to initialize\r\nsearch-1    | Traceback (most recent call last):\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 95, in request\r\nsearch-1    |     return future.result(timeout)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/lib/python3.12/concurrent/futures/_base.py\", line 458, in result\r\nsearch-1    |     raise TimeoutError()\r\nsearch-1    | TimeoutError\r\nsearch-1    |\r\nsearch-1    | The above exception was the direct cause of the following exception:\r\nsearch-1    |\r\nsearch-1    | Traceback (most recent call last):\r\nsearch-1    |   File \"/usr/local/searxng/searx/search/processors/abstract.py\", line 73, in initialize\r\nsearch-1    |     self.engine.init(get_engine_from_settings(self.engine_name))\r\nsearch-1    |   File \"/usr/local/searxng/searx/engines/soundcloud.py\", line 69, in init\r\nsearch-1    |     guest_client_id = get_client_id()\r\nsearch-1    |                       ^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/engines/soundcloud.py\", line 57, in get_client_id\r\nsearch-1    |     resp = http_get(app_js_url)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 164, in get\r\nsearch-1    |     return request('get', url, **kwargs)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 97, in request\r\nsearch-1    |     raise httpx.TimeoutException('Timeout', request=None) from e\r\nsearch-1    | httpx.TimeoutException: Timeout\r\nsearch-1    | 2025-01-08 23:46:01,628 ERROR:searx.engines.soundcloud: Fail to initialize\r\nsearch-1    | Traceback (most recent call last):\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 95, in request\r\nsearch-1    |     return future.result(timeout)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/lib/python3.12/concurrent/futures/_base.py\", line 458, in result\r\nsearch-1    |     raise TimeoutError()\r\nsearch-1    | TimeoutError\r\nsearch-1    |\r\nsearch-1    | The above exception was the direct cause of the following exception:\r\nsearch-1    |\r\nsearch-1    | Traceback (most recent call last):\r\nsearch-1    |   File \"/usr/local/searxng/searx/search/processors/abstract.py\", line 73, in initialize\r\nsearch-1    |     self.engine.init(get_engine_from_settings(self.engine_name))\r\nsearch-1    |   File \"/usr/local/searxng/searx/engines/soundcloud.py\", line 69, in init\r\nsearch-1    |     guest_client_id = get_client_id()\r\nsearch-1    |                       ^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/engines/soundcloud.py\", line 57, in get_client_id\r\nsearch-1    |     resp = http_get(app_js_url)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 164, in get\r\nsearch-1    |     return request('get', url, **kwargs)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 97, in request\r\nsearch-1    |     raise httpx.TimeoutException('Timeout', request=None) from e\r\nsearch-1    | httpx.TimeoutException: Timeout\r\nsearch-1    | 2025-01-08 23:46:01,641 ERROR:searx.engines.soundcloud: Fail to initialize\r\nsearch-1    | Traceback (most recent call last):\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 95, in request\r\nsearch-1    |     return future.result(timeout)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/lib/python3.12/concurrent/futures/_base.py\", line 458, in result\r\nsearch-1    |     raise TimeoutError()\r\nsearch-1    | TimeoutError\r\nsearch-1    |\r\nsearch-1    | The above exception was the direct cause of the following exception:\r\nsearch-1    |\r\nsearch-1    | Traceback (most recent call last):\r\nsearch-1    |   File \"/usr/local/searxng/searx/search/processors/abstract.py\", line 73, in initialize\r\nsearch-1    |     self.engine.init(get_engine_from_settings(self.engine_name))\r\nsearch-1    |   File \"/usr/local/searxng/searx/engines/soundcloud.py\", line 69, in init\r\nsearch-1    |     guest_client_id = get_client_id()\r\nsearch-1    |                       ^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/engines/soundcloud.py\", line 57, in get_client_id\r\nsearch-1    |     resp = http_get(app_js_url)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 164, in get\r\nsearch-1    |     return request('get', url, **kwargs)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 97, in request\r\nsearch-1    |     raise httpx.TimeoutException('Timeout', request=None) from e\r\nsearch-1    | httpx.TimeoutException: Timeout\r\nsearch-1    | 2025-01-08 23:46:01,653 ERROR:searx.engines.soundcloud: Fail to initialize\r\nsearch-1    | Traceback (most recent call last):\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 95, in request\r\nsearch-1    |     return future.result(timeout)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/lib/python3.12/concurrent/futures/_base.py\", line 458, in result\r\nsearch-1    |     raise TimeoutError()\r\nsearch-1    | TimeoutError\r\nsearch-1    |\r\nsearch-1    | The above exception was the direct cause of the following exception:\r\nsearch-1    |\r\nsearch-1    | Traceback (most recent call last):\r\nsearch-1    |   File \"/usr/local/searxng/searx/search/processors/abstract.py\", line 73, in initialize\r\nsearch-1    |     self.engine.init(get_engine_from_settings(self.engine_name))\r\nsearch-1    |   File \"/usr/local/searxng/searx/engines/soundcloud.py\", line 69, in init\r\nsearch-1    |     guest_client_id = get_client_id()\r\nsearch-1    |                       ^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/engines/soundcloud.py\", line 57, in get_client_id\r\nsearch-1    |     resp = http_get(app_js_url)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 164, in get\r\nsearch-1    |     return request('get', url, **kwargs)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 97, in request\r\nsearch-1    |     raise httpx.TimeoutException('Timeout', request=None) from e\r\nsearch-1    | httpx.TimeoutException: Timeout\r\nsearch-1    | 2025-01-08 23:46:01,667 ERROR:searx.engines.soundcloud: Fail to initialize\r\nsearch-1    | Traceback (most recent call last):\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 95, in request\r\nsearch-1    |     return future.result(timeout)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/lib/python3.12/concurrent/futures/_base.py\", line 458, in result\r\nsearch-1    |     raise TimeoutError()\r\nsearch-1    | TimeoutError\r\nsearch-1    |\r\nsearch-1    | The above exception was the direct cause of the following exception:\r\nsearch-1    |\r\nsearch-1    | Traceback (most recent call last):\r\nsearch-1    |   File \"/usr/local/searxng/searx/search/processors/abstract.py\", line 73, in initialize\r\nsearch-1    |     self.engine.init(get_engine_from_settings(self.engine_name))\r\nsearch-1    |   File \"/usr/local/searxng/searx/engines/soundcloud.py\", line 69, in init\r\nsearch-1    |     guest_client_id = get_client_id()\r\nsearch-1    |                       ^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/engines/soundcloud.py\", line 57, in get_client_id\r\nsearch-1    |     resp = http_get(app_js_url)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 164, in get\r\nsearch-1    |     return request('get', url, **kwargs)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 97, in request\r\nsearch-1    |     raise httpx.TimeoutException('Timeout', request=None) from e\r\nsearch-1    | httpx.TimeoutException: Timeout\r\nsearch-1    | 2025-01-08 23:46:01,734 ERROR:searx.engines.soundcloud: Fail to initialize\r\nsearch-1    | Traceback (most recent call last):\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 95, in request\r\nsearch-1    |     return future.result(timeout)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/lib/python3.12/concurrent/futures/_base.py\", line 458, in result\r\nsearch-1    |     raise TimeoutError()\r\nsearch-1    | TimeoutError\r\nsearch-1    |\r\nsearch-1    | The above exception was the direct cause of the following exception:\r\nsearch-1    |\r\nsearch-1    | Traceback (most recent call last):\r\nsearch-1    |   File \"/usr/local/searxng/searx/search/processors/abstract.py\", line 73, in initialize\r\nsearch-1    |     self.engine.init(get_engine_from_settings(self.engine_name))\r\nsearch-1    |   File \"/usr/local/searxng/searx/engines/soundcloud.py\", line 69, in init\r\nsearch-1    |     guest_client_id = get_client_id()\r\nsearch-1    |                       ^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/engines/soundcloud.py\", line 57, in get_client_id\r\nsearch-1    |     resp = http_get(app_js_url)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 164, in get\r\nsearch-1    |     return request('get', url, **kwargs)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 97, in request\r\nsearch-1    |     raise httpx.TimeoutException('Timeout', request=None) from e\r\nsearch-1    | httpx.TimeoutException: Timeout\r\nsearch-1    | 2025-01-08 23:46:01,739 ERROR:searx.engines.soundcloud: Fail to initialize\r\nsearch-1    | Traceback (most recent call last):\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 95, in request\r\nsearch-1    |     return future.result(timeout)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/lib/python3.12/concurrent/futures/_base.py\", line 458, in result\r\nsearch-1    |     raise TimeoutError()\r\nsearch-1    | TimeoutError\r\nsearch-1    |\r\nsearch-1    | The above exception was the direct cause of the following exception:\r\nsearch-1    |\r\nsearch-1    | Traceback (most recent call last):\r\nsearch-1    |   File \"/usr/local/searxng/searx/search/processors/abstract.py\", line 73, in initialize\r\nsearch-1    |     self.engine.init(get_engine_from_settings(self.engine_name))\r\nsearch-1    |   File \"/usr/local/searxng/searx/engines/soundcloud.py\", line 69, in init\r\nsearch-1    |     guest_client_id = get_client_id()\r\nsearch-1    |                       ^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/engines/soundcloud.py\", line 57, in get_client_id\r\nsearch-1    |     resp = http_get(app_js_url)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 164, in get\r\nsearch-1    |     return request('get', url, **kwargs)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 97, in request\r\nsearch-1    |     raise httpx.TimeoutException('Timeout', request=None) from e\r\nsearch-1    | httpx.TimeoutException: Timeout\r\nsearch-1    | 2025-01-08 23:46:01,745 ERROR:searx.engines.soundcloud: Fail to initialize\r\nsearch-1    | Traceback (most recent call last):\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 95, in request\r\nsearch-1    |     return future.result(timeout)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/lib/python3.12/concurrent/futures/_base.py\", line 458, in result\r\nsearch-1    |     raise TimeoutError()\r\nsearch-1    | TimeoutError\r\nsearch-1    |\r\nsearch-1    | The above exception was the direct cause of the following exception:\r\nsearch-1    |\r\nsearch-1    | Traceback (most recent call last):\r\nsearch-1    |   File \"/usr/local/searxng/searx/search/processors/abstract.py\", line 73, in initialize\r\nsearch-1    |     self.engine.init(get_engine_from_settings(self.engine_name))\r\nsearch-1    |   File \"/usr/local/searxng/searx/engines/soundcloud.py\", line 69, in init\r\nsearch-1    |     guest_client_id = get_client_id()\r\nsearch-1    |                       ^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/engines/soundcloud.py\", line 57, in get_client_id\r\nsearch-1    |     resp = http_get(app_js_url)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 164, in get\r\nsearch-1    |     return request('get', url, **kwargs)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 97, in request\r\nsearch-1    |     raise httpx.TimeoutException('Timeout', request=None) from e\r\nsearch-1    | httpx.TimeoutException: Timeout\r\nsearch-1    | 2025-01-08 23:46:01,748 ERROR:searx.engines.soundcloud: Fail to initialize\r\nsearch-1    | Traceback (most recent call last):\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 95, in request\r\nsearch-1    |     return future.result(timeout)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/lib/python3.12/concurrent/futures/_base.py\", line 458, in result\r\nsearch-1    |     raise TimeoutError()\r\nsearch-1    | TimeoutError\r\nsearch-1    |\r\nsearch-1    | The above exception was the direct cause of the following exception:\r\nsearch-1    |\r\nsearch-1    | Traceback (most recent call last):\r\nsearch-1    |   File \"/usr/local/searxng/searx/search/processors/abstract.py\", line 73, in initialize\r\nsearch-1    |     self.engine.init(get_engine_from_settings(self.engine_name))\r\nsearch-1    |   File \"/usr/local/searxng/searx/engines/soundcloud.py\", line 69, in init\r\nsearch-1    |     guest_client_id = get_client_id()\r\nsearch-1    |                       ^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/engines/soundcloud.py\", line 57, in get_client_id\r\nsearch-1    |     resp = http_get(app_js_url)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 164, in get\r\nsearch-1    |     return request('get', url, **kwargs)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 97, in request\r\nsearch-1    |     raise httpx.TimeoutException('Timeout', request=None) from e\r\nsearch-1    | httpx.TimeoutException: Timeout\r\nsearch-1    | 2025-01-08 23:46:01,794 ERROR:searx.engines.soundcloud: Fail to initialize\r\nsearch-1    | Traceback (most recent call last):\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 95, in request\r\nsearch-1    |     return future.result(timeout)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/lib/python3.12/concurrent/futures/_base.py\", line 458, in result\r\nsearch-1    |     raise TimeoutError()\r\nsearch-1    | TimeoutError\r\nsearch-1    |\r\nsearch-1    | The above exception was the direct cause of the following exception:\r\nsearch-1    |\r\nsearch-1    | Traceback (most recent call last):\r\nsearch-1    |   File \"/usr/local/searxng/searx/search/processors/abstract.py\", line 73, in initialize\r\nsearch-1    |     self.engine.init(get_engine_from_settings(self.engine_name))\r\nsearch-1    |   File \"/usr/local/searxng/searx/engines/soundcloud.py\", line 69, in init\r\nsearch-1    |     guest_client_id = get_client_id()\r\nsearch-1    |                       ^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/engines/soundcloud.py\", line 57, in get_client_id\r\nsearch-1    |     resp = http_get(app_js_url)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 164, in get\r\nsearch-1    |     return request('get', url, **kwargs)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 97, in request\r\nsearch-1    |     raise httpx.TimeoutException('Timeout', request=None) from e\r\nsearch-1    | httpx.TimeoutException: Timeout\r\nsearch-1    | 2025-01-08 23:46:01,827 ERROR:searx.engines.soundcloud: Fail to initialize\r\nsearch-1    | Traceback (most recent call last):\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 95, in request\r\nsearch-1    |     return future.result(timeout)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/lib/python3.12/concurrent/futures/_base.py\", line 458, in result\r\nsearch-1    |     raise TimeoutError()\r\nsearch-1    | TimeoutError\r\nsearch-1    |\r\nsearch-1    | The above exception was the direct cause of the following exception:\r\nsearch-1    |\r\nsearch-1    | Traceback (most recent call last):\r\nsearch-1    |   File \"/usr/local/searxng/searx/search/processors/abstract.py\", line 73, in initialize\r\nsearch-1    |     self.engine.init(get_engine_from_settings(self.engine_name))\r\nsearch-1    |   File \"/usr/local/searxng/searx/engines/soundcloud.py\", line 69, in init\r\nsearch-1    |     guest_client_id = get_client_id()\r\nsearch-1    |                       ^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/engines/soundcloud.py\", line 57, in get_client_id\r\nsearch-1    |     resp = http_get(app_js_url)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 164, in get\r\nsearch-1    |     return request('get', url, **kwargs)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 97, in request\r\nsearch-1    |     raise httpx.TimeoutException('Timeout', request=None) from e\r\nsearch-1    | httpx.TimeoutException: Timeout\r\nsearch-1    | 2025-01-08 23:46:01,876 ERROR:searx.engines.soundcloud: Fail to initialize\r\nsearch-1    | Traceback (most recent call last):\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 95, in request\r\nsearch-1    |     return future.result(timeout)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/lib/python3.12/concurrent/futures/_base.py\", line 458, in result\r\nsearch-1    |     raise TimeoutError()\r\nsearch-1    | TimeoutError\r\nsearch-1    |\r\nsearch-1    | The above exception was the direct cause of the following exception:\r\nsearch-1    |\r\nsearch-1    | Traceback (most recent call last):\r\nsearch-1    |   File \"/usr/local/searxng/searx/search/processors/abstract.py\", line 73, in initialize\r\nsearch-1    |     self.engine.init(get_engine_from_settings(self.engine_name))\r\nsearch-1    |   File \"/usr/local/searxng/searx/engines/soundcloud.py\", line 69, in init\r\nsearch-1    |     guest_client_id = get_client_id()\r\nsearch-1    |                       ^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/engines/soundcloud.py\", line 57, in get_client_id\r\nsearch-1    |     resp = http_get(app_js_url)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 164, in get\r\nsearch-1    |     return request('get', url, **kwargs)\r\nsearch-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nsearch-1    |   File \"/usr/local/searxng/searx/network/__init__.py\", line 97, in request\r\nsearch-1    |     raise httpx.TimeoutException('Timeout', request=None) from e\r\nsearch-1    | httpx.TimeoutException: Timeout\r\n```\r\n\r\n2. When attempting a conversation for the first time, the server loads the offline chat model for a while, and then crashes and restarts. This happens through repeated attempts with the same containers.\r\n\r\n```shell\r\nserver-1    | [23:46:55.819593] INFO     khoj.routers.helpers: Loading Offline  helpers.py:156\r\nserver-1    |                            Chat Model...\r\ndatabase-1  | 2025-01-08 23:50:56.510 UTC [27] LOG:  checkpoint starting: time\r\ndatabase-1  | 2025-01-08 23:50:57.623 UTC [27] LOG:  checkpoint complete: wrote 14 buffers (0.1%); 0 WAL file(s) added, 0 removed, 0 recycled; write=1.105 s, sync=0.004 s, total=1.114 s; sync files=9, longest=0.002 s, average=0.001 s; distance=8 kB, estimate=8 kB\r\nserver-1 exited with code 0\r\nserver-1    | [00:07:33.091427] WARNING  khoj.routers.email: RESEND_API_KEY not    email.py:22\r\nserver-1    |                            set - email sending disabled\r\nserver-1    | [00:07:33.147278] INFO     khoj: 🚒 Initializing Khoj v1.33.2        main.py:133\r\nserver-1    | [00:07:33.149516] INFO     khoj: 📦 Initializing DB:                 main.py:134\r\nserver-1    |                            Operations to perform:\r\nserver-1    |                              Apply all migrations: admin, auth,\r\nserver-1    |                            contenttypes, database,\r\nserver-1    |                            django_apscheduler, sessions\r\nserver-1    |                            Running migrations:\r\nserver-1    |                              No migrations to apply.\r\nserver-1    | [00:07:33.152753] DEBUG    khoj: 🌍 Initializing Web Client:         main.py:135\r\nserver-1    |                            Found another file with the destination\r\nserver-1    |                            path 'admin/js/inlines.js'. It will be\r\nserver-1    |                            ignored since only the first encountered\r\nserver-1    |                            file is collected. If this is not what\r\nserver-1    |                            you want, make sure every static file has\r\nserver-1    |                            a unique path.\r\nserver-1    |                            Found another file with the destination\r\nserver-1    |                            path\r\nserver-1    |                            'admin/js/admin/RelatedObjectLookups.js'.\r\nserver-1    |                            It will be ignored since only the first\r\nserver-1    |                            encountered file is collected. If this is\r\nserver-1    |                            not what you want, make sure every static\r\nserver-1    |                            file has a unique path.\r\nserver-1    |\r\nserver-1    |                            0 static files copied to\r\nserver-1    |                            '/app/src/khoj/static', 335 unmodified.\r\nserver-1    | [00:07:33.163432] INFO     khoj.utils.initialization: 🗣️    initialization.py:301\r\nserver-1    |                            Chat model configuration\r\nserver-1    |                            updated\r\nserver-1    | [00:07:33.164993] INFO     khoj: 🌘 Starting Khoj                    main.py:147\r\nserver-1    | [00:07:33.167964] INFO     khoj: 🔒 Schedule Leader is already       main.py:168\r\nserver-1    |                            running\r\nserver-1    | [00:07:33.169331] INFO     khoj: Started Background Scheduler        main.py:181\r\nserver-1    | [00:07:33.329240] INFO     khoj.configure: 🚨 Khoj is not       configure.py:231\r\nserver-1    |                            configured.\r\nserver-1    |                            Initializing it with a default\r\nserver-1    |                            config.\r\nserver-1    | [00:07:34.494098] DEBUG    khoj.processor.embeddings: Loaded      helpers.py:193\r\nserver-1    |                            embedding model thenlper/gte-small:\r\nserver-1    |                            1.161 seconds\r\nserver-1    | [00:07:35.212363] DEBUG    khoj.processor.embeddings: Loaded      helpers.py:193\r\nserver-1    |                            cross-encoder model\r\nserver-1    |                            mixedbread-ai/mxbai-rerank-xsmall-v1:\r\nserver-1    |                            0.716 seconds\r\nserver-1    | [00:07:35.221611] INFO     khoj.configure: 📡 Telemetry enabled configure.py:278\r\nserver-1    | [00:07:35.222730] INFO     khoj: 🌖 Khoj is ready to use\r\n```\r\n\r\n## To Reproduce\r\n\r\n- Install Docker Desktop on Windows 10\r\n- Copy `docker-compose.yml` in a folder\r\n- Add a `KHOJ_DJANGO_SECRET_KEY`, `KHOJ_ADMIN_EMAIL` and `KHOJ_ADMIN_PASSWORD` to `docker-compose.yml`\r\n- run `docker-compose up`\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [x] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [x] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [x] Windows\r\n    - [ ] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]: Khoj v1.33.2\r\n",
      "state": "closed",
      "author": "Klemet",
      "author_type": "User",
      "created_at": "2025-01-09T02:01:01Z",
      "updated_at": "2025-01-16T02:01:30Z",
      "closed_at": "2025-01-16T02:01:30Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 13,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1050/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1050",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1050",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:44.146903",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Thank you for the detailed debug logs!\r\n1. How long ago did you download the `docker-compose` file? Just wanted to check whether it's using the new yml file we merged earlier today (from [7 hours ago](https://github.com/khoj-ai/khoj/commit/ad5f0c7a0273cb68c155358bce86eb91c831eb90)). Do you have the ",
          "created_at": "2025-01-09T02:23:49Z"
        },
        {
          "author": "Klemet",
          "body": "Hey @sabaimran 😄 ! Thank you for the response.\r\n\r\n- I definitly downloaded the `docker-compose` file less than 7 hour ago.\r\n- I'm running the service locally, on my Windows 10 desktop computer.\r\n- The timeout error happens just after launching `docker compose up`, without even opening a browser wind",
          "created_at": "2025-01-09T02:26:02Z"
        },
        {
          "author": "Klemet",
          "body": "So, quick update :\r\n\r\n- I was able to install Ollama with llama 3.2 without any issues.\r\n- I had to completely wipe the previous containers of Khoj to make the change\r\n- The log is still chock-full of errors for searx, but I also noticed that there are an enormous amount of errors from `sandbox-1` a",
          "created_at": "2025-01-09T03:39:15Z"
        },
        {
          "author": "debanjum",
          "body": "Good to know it's working for you.\r\n\r\n> The log is still chock-full of errors for searx, but I also noticed that there are an enormous amount of errors from sandbox-1 about python packages.\r\n\r\nThat doesn't sound great. What kind of errors are these? Do you see them on chat or on startup or continuou",
          "created_at": "2025-01-09T14:23:21Z"
        },
        {
          "author": "Klemet",
          "body": "Thanks for taking a look at this, debanjum !\r\n\r\n> That doesn't sound great. What kind of errors are these? Do you see them on chat or on startup or continuously?\r\n\r\nI'm away from my main computer right now; but I'll post a full log of what's going on when launching `docker-compose`. I've tried on my",
          "created_at": "2025-01-09T14:35:29Z"
        }
      ]
    },
    {
      "issue_number": 1079,
      "title": "[FIXED] Error while installing python package: llama-cpp-python",
      "body": "## Describe the bug\r\nWhen I type this code into the terminal  \"pip install -e '.[dev]'\"  I get an error that fails . Now I will tell you how I solved this error.\r\n##  If you use Ubuntu 22.04 LTS\r\nThe error message suggests missing build dependencies for compiling the C++ part of llama-cpp-python. Luckily, Ubuntu provides a convenient package to install these:\r\n\r\n`sudo apt install build-essential`\r\n\r\nThis command will install gcc (C compiler), g++ (C++ compiler), and other necessary tools for building C/C++ projects.\r\n\r\nAfter this try this command again:\r\n\r\n`pip install llama-cpp-python`\r\n\r\n## If you use Windows\r\n\r\nI would like to share here the solution that I found on stackoverflow and tried on windows and it worked.\r\n\r\n> You need to install the desktop c++ block with visual studio to get cmake properly installed.Open the Visual Studio Installer and click Modify, then check Desktop development with C++ and click Modify to start the install. I also recommend the Windows 10 SDK. https://learn.microsoft.com/en-us/cpp/build/cmake-projects-in-visual-studio?view=msvc-170 https://developer.microsoft.com/en-us/windows/downloads/windows-sdk/ After that, !pip install llama-cpp-python should build just fine.\r\n\r\n## Note\r\nThe first issue I shared was how I solved the problem I encountered, I hope it helped.",
      "state": "closed",
      "author": "Fthkrks",
      "author_type": "User",
      "created_at": "2025-01-12T10:34:05Z",
      "updated_at": "2025-01-15T13:30:26Z",
      "closed_at": "2025-01-15T12:35:49Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1079/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1079",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1079",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:44.359675",
      "comments": [
        {
          "author": "debanjum",
          "body": "Thanks for sharing the problem, your fix and the reference you used for the fix. It should be helpful for folks looking to install llama-cpp-python with Khoj.\r\n\r\nI'll close this issue as no actionable items exist for this",
          "created_at": "2025-01-15T12:35:49Z"
        },
        {
          "author": "Fthkrks",
          "body": "Hello, first of all, thank you for your e-mail. This is my first issue and\r\nI have encountered this problem, so I may be a rookie, thank you for your\r\nunderstanding.\r\n\r\n15 Oca 2025 Çar 15:36 tarihinde Debanjum ***@***.***> şunu\r\nyazdı:\r\n\r\n> Thanks for sharing the problem, your fix and the reference ",
          "created_at": "2025-01-15T13:30:25Z"
        }
      ]
    },
    {
      "issue_number": 1082,
      "title": "[FIX] The image generated by the Replicate API has a src missing the prefix data:image/png;base64,.",
      "body": "## Describe the bug\r\nI use the Replicate API and the Flux model to generate images. However, the returned images are not displayed correctly. Upon investigation, I found that the issue is due to the result's image tag missing the prefix `data:image/png;base64`,. Without this prefix, the image is not rendered as a Base64 image but instead becomes an image with an image URL like localhost:42100/BASE64_CODE.\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n\r\n## Screenshots\r\n- The image not display on browser.\r\n![image](https://github.com/user-attachments/assets/b0f7d679-aaf6-436a-a3b5-2cc5569ea8a9)\r\n\r\n- F12 show that tag img's src missing `data:image/png;base64` to render as Base64 images.\r\n![image](https://github.com/user-attachments/assets/390c2ec4-e059-409b-bf57-83196843e1cf)\r\n\r\n\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [x] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [x] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [x] Linux\r\n    - [x] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]: 1.33.2\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n",
      "state": "closed",
      "author": "TongDucThanhNam",
      "author_type": "User",
      "created_at": "2025-01-13T18:32:59Z",
      "updated_at": "2025-01-15T12:26:57Z",
      "closed_at": "2025-01-15T12:22:42Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1082/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1082",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1082",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:44.600243",
      "comments": [
        {
          "author": "nesretep-anp1",
          "body": "This is the same for using OpenAI replacements like LocalAI.",
          "created_at": "2025-01-15T07:40:55Z"
        },
        {
          "author": "nesretep-anp1",
          "body": "IMHO there must be a check whether there is a handle or not into the following code:\r\n\r\n[chatMessage.tsx#L436](https://github.com/khoj-ai/khoj/blob/92a1ec7afcc6767ad3c9d9de5930c55497b4f495/src/interface/web/app/components/chatMessage/chatMessage.tsx#L436)\r\n\r\nWorkaround till update:\r\n\r\nCurrently I si",
          "created_at": "2025-01-15T09:29:29Z"
        },
        {
          "author": "debanjum",
          "body": "Thanks for the detailed issue @TongDucThanhNam and @nesretep-anp1! Helped me find and fix the issue faster. \r\n\r\nI've pushed a fix to master. So you should be able to see images generated via Replicate or OpenAI on the Khoj clients fine now even when self-hosting.\r\n\r\nYou can pull the latest `pre` tag",
          "created_at": "2025-01-15T12:26:56Z"
        }
      ]
    },
    {
      "issue_number": 1049,
      "title": "[BUG] AttributeError: 'str' object has no attribute 'iter_content'",
      "body": "## Describe the bug\r\nA clear and concise description of what the bug is. Please include what you were expecting to happen vs. what actually happened.\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [X] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [X] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [X] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\n- latest\r\n\r\n```bash\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.10/dist-packages/anyio/streams/memory.py\", line 98, in receive\r\n    return self.receive_nowait()\r\n  File \"/usr/local/lib/python3.10/dist-packages/anyio/streams/memory.py\", line 93, in receive_nowait\r\n    raise WouldBlock\r\nanyio.WouldBlock\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/middleware/base.py\", line 157, in call_next\r\n    message = await recv_stream.receive()\r\n  File \"/usr/local/lib/python3.10/dist-packages/anyio/streams/memory.py\", line 118, in receive\r\n    raise EndOfStream\r\nanyio.EndOfStream\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/middleware/errors.py\", line 165, in __call__\r\n    await self.app(scope, receive, _send)\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/middleware/sessions.py\", line 85, in __call__\r\n    await self.app(scope, receive, send_wrapper)\r\n  File \"/app/src/khoj/configure.py\", line 351, in __call__\r\n    await self.app(scope, receive, send)\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/middleware/authentication.py\", line 48, in __call__\r\n    await self.app(scope, receive, send)\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/middleware/base.py\", line 187, in __call__\r\n    response = await self.dispatch_func(request, call_next)\r\n  File \"/app/src/khoj/configure.py\", line 84, in dispatch\r\n    response = await call_next(request)\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/middleware/base.py\", line 163, in call_next\r\n    raise app_exc\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/middleware/base.py\", line 149, in coro\r\n    await self.app(scope, receive_or_disconnect, send_no_error)\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/middleware/cors.py\", line 93, in __call__\r\n    await self.simple_response(scope, receive, send, request_headers=headers)\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/middleware/cors.py\", line 144, in simple_response\r\n    await self.app(scope, receive, send)\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/middleware/exceptions.py\", line 62, in __call__\r\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\r\n    raise exc\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\r\n    await app(scope, receive, sender)\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/routing.py\", line 715, in __call__\r\n    await self.middleware_stack(scope, receive, send)\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/routing.py\", line 735, in app\r\n    await route.handle(scope, receive, send)\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/routing.py\", line 288, in handle\r\n    await self.app(scope, receive, send)\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/routing.py\", line 76, in app\r\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\r\n    raise exc\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\r\n    await app(scope, receive, sender)\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/routing.py\", line 73, in app\r\n    response = await f(request)\r\n  File \"/usr/local/lib/python3.10/dist-packages/fastapi/routing.py\", line 301, in app\r\n    raw_response = await run_endpoint_function(\r\n  File \"/usr/local/lib/python3.10/dist-packages/fastapi/routing.py\", line 212, in run_endpoint_function\r\n    return await dependant.call(**values)\r\n  File \"/usr/local/lib/python3.10/dist-packages/starlette/authentication.py\", line 75, in async_wrapper\r\n    return await func(*args, **kwargs)\r\n  File \"/app/src/khoj/routers/api_chat.py\", line 185, in text_to_speech\r\n    return StreamingResponse(speech_stream.iter_content(chunk_size=1024), media_type=\"audio/mpeg\")\r\nAttributeError: 'str' object has no attribute 'iter_content'\r\n\r\n```\r\n\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n",
      "state": "open",
      "author": "baditaflorin",
      "author_type": "User",
      "created_at": "2025-01-08T22:53:35Z",
      "updated_at": "2025-01-13T21:45:58Z",
      "closed_at": null,
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1049/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1049",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1049",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:44.820458",
      "comments": [
        {
          "author": "sabaimran",
          "body": "hi @baditaflorin ! this seems to be happening because we need to add handling if [ElevenLabs](https://elevenlabs.io/) is not configured on the server. we could use the local TTS api that works in the browser as a fallback when it's not enabled in the backend.",
          "created_at": "2025-01-13T21:45:57Z"
        }
      ]
    },
    {
      "issue_number": 1053,
      "title": "Development server for the web interface is stuck on a loading screen.",
      "body": "## Describe the bug\r\nWhen I try and run the development server, I am getting the error ECONNREFUSED. When I connect to localhost:3000, I am only met with a loading screen.\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n\r\nI ran \r\n```\r\nyarn install\r\nyarn dev\r\n```\r\n\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\n<img width=\"1512\" alt=\"Screenshot 2025-01-09 at 2 02 34 AM\" src=\"https://github.com/user-attachments/assets/8295cf6e-b493-413a-8b2c-647ae77f0050\" />\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [ ] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [ X] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ X] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\n\r\n## Additional context\r\nHere the erorr message in my terminal:\r\n\r\n\r\n(node:51389) [DEP0060] DeprecationWarning: The `util._extend` API is deprecated. Please use Object.assign() instead.\r\n(Use `node --trace-deprecation ...` to show where the warning was created)\r\nFailed to proxy http://localhost:42110/static/assets/icons/khoj_lantern.ico AggregateError [ECONNREFUSED]: \r\n    at internalConnectMultiple (node:net:1139:18)\r\n    at afterConnectMultiple (node:net:1712:7)\r\n    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n  code: 'ECONNREFUSED',\r\n  [errors]: [\r\n    Error: connect ECONNREFUSED ::1:42110\r\n        at createConnectionError (node:net:1675:14)\r\n        at afterConnectMultiple (node:net:1705:16)\r\n        at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n      errno: -61,\r\n      code: 'ECONNREFUSED',\r\n      syscall: 'connect',\r\n      address: '::1',\r\n      port: 42110\r\n    },\r\n    Error: connect ECONNREFUSED 127.0.0.1:42110\r\n        at createConnectionError (node:net:1675:14)\r\n        at afterConnectMultiple (node:net:1705:16)\r\n        at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n      errno: -61,\r\n      code: 'ECONNREFUSED',\r\n      syscall: 'connect',\r\n      address: '127.0.0.1',\r\n      port: 42110\r\n    }\r\n  ]\r\n}\r\nAggregateError [ECONNREFUSED]: \r\n    at internalConnectMultiple (node:net:1139:18)\r\n    at afterConnectMultiple (node:net:1712:7)\r\n    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n  code: 'ECONNREFUSED',\r\n  [errors]: [\r\n    Error: connect ECONNREFUSED ::1:42110\r\n        at createConnectionError (node:net:1675:14)\r\n        at afterConnectMultiple (node:net:1705:16)\r\n        at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n      errno: -61,\r\n      code: 'ECONNREFUSED',\r\n      syscall: 'connect',\r\n      address: '::1',\r\n      port: 42110\r\n    },\r\n    Error: connect ECONNREFUSED 127.0.0.1:42110\r\n        at createConnectionError (node:net:1675:14)\r\n        at afterConnectMultiple (node:net:1705:16)\r\n        at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n      errno: -61,\r\n      code: 'ECONNREFUSED',\r\n      syscall: 'connect',\r\n      address: '127.0.0.1',\r\n      port: 42110\r\n    }\r\n  ]\r\n}\r\nFailed to proxy http://localhost:42110/api/settings?detailed=true AggregateError [ECONNREFUSED]: \r\n    at internalConnectMultiple (node:net:1139:18)\r\n    at afterConnectMultiple (node:net:1712:7)\r\n    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n  code: 'ECONNREFUSED',\r\n  [errors]: [\r\n    Error: connect ECONNREFUSED ::1:42110\r\n        at createConnectionError (node:net:1675:14)\r\n        at afterConnectMultiple (node:net:1705:16)\r\n        at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n      errno: -61,\r\n      code: 'ECONNREFUSED',\r\n      syscall: 'connect',\r\n      address: '::1',\r\n      port: 42110\r\n    },\r\n    Error: connect ECONNREFUSED 127.0.0.1:42110\r\n        at createConnectionError (node:net:1675:14)\r\n        at afterConnectMultiple (node:net:1705:16)\r\n        at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n      errno: -61,\r\n      code: 'ECONNREFUSED',\r\n      syscall: 'connect',\r\n      address: '127.0.0.1',\r\n      port: 42110\r\n    }\r\n  ]\r\n}\r\nAggregateError [ECONNREFUSED]: \r\n    at internalConnectMultiple (node:net:1139:18)\r\n    at afterConnectMultiple (node:net:1712:7)\r\n    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n  code: 'ECONNREFUSED',\r\n  [errors]: [\r\n    Error: connect ECONNREFUSED ::1:42110\r\n        at createConnectionError (node:net:1675:14)\r\n        at afterConnectMultiple (node:net:1705:16)\r\n        at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n      errno: -61,\r\n      code: 'ECONNREFUSED',\r\n      syscall: 'connect',\r\n      address: '::1',\r\n      port: 42110\r\n    },\r\n    Error: connect ECONNREFUSED 127.0.0.1:42110\r\n        at createConnectionError (node:net:1675:14)\r\n        at afterConnectMultiple (node:net:1705:16)\r\n        at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n      errno: -61,\r\n      code: 'ECONNREFUSED',\r\n      syscall: 'connect',\r\n      address: '127.0.0.1',\r\n      port: 42110\r\n    }\r\n  ]\r\n}\r\nFailed to proxy http://localhost:42110/api/v1/user AggregateError [ECONNREFUSED]: \r\n    at internalConnectMultiple (node:net:1139:18)\r\n    at afterConnectMultiple (node:net:1712:7)\r\n    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n  code: 'ECONNREFUSED',\r\n  [errors]: [\r\n    Error: connect ECONNREFUSED ::1:42110\r\n        at createConnectionError (node:net:1675:14)\r\n        at afterConnectMultiple (node:net:1705:16)\r\n        at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n      errno: -61,\r\n      code: 'ECONNREFUSED',\r\n      syscall: 'connect',\r\n      address: '::1',\r\n      port: 42110\r\n    },\r\n    Error: connect ECONNREFUSED 127.0.0.1:42110\r\n        at createConnectionError (node:net:1675:14)\r\n        at afterConnectMultiple (node:net:1705:16)\r\n        at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n      errno: -61,\r\n      code: 'ECONNREFUSED',\r\n      syscall: 'connect',\r\n      address: '127.0.0.1',\r\n      port: 42110\r\n    }\r\n  ]\r\n}\r\nAggregateError [ECONNREFUSED]: \r\n    at internalConnectMultiple (node:net:1139:18)\r\n    at afterConnectMultiple (node:net:1712:7)\r\n    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n  code: 'ECONNREFUSED',\r\n  [errors]: [\r\n    Error: connect ECONNREFUSED ::1:42110\r\n        at createConnectionError (node:net:1675:14)\r\n        at afterConnectMultiple (node:net:1705:16)\r\n        at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n      errno: -61,\r\n      code: 'ECONNREFUSED',\r\n      syscall: 'connect',\r\n      address: '::1',\r\n      port: 42110\r\n    },\r\n    Error: connect ECONNREFUSED 127.0.0.1:42110\r\n        at createConnectionError (node:net:1675:14)\r\n        at afterConnectMultiple (node:net:1705:16)\r\n        at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n      errno: -61,\r\n      code: 'ECONNREFUSED',\r\n      syscall: 'connect',\r\n      address: '127.0.0.1',\r\n      port: 42110\r\n    }\r\n  ]\r\n}\r\nFailed to proxy http://localhost:42110/api/chat/options AggregateError [ECONNREFUSED]: \r\n    at internalConnectMultiple (node:net:1139:18)\r\n    at afterConnectMultiple (node:net:1712:7)\r\n    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n  code: 'ECONNREFUSED',\r\n  [errors]: [\r\n    Error: connect ECONNREFUSED ::1:42110\r\n        at createConnectionError (node:net:1675:14)\r\n        at afterConnectMultiple (node:net:1705:16)\r\n        at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n      errno: -61,\r\n      code: 'ECONNREFUSED',\r\n      syscall: 'connect',\r\n      address: '::1',\r\n      port: 42110\r\n    },\r\n    Error: connect ECONNREFUSED 127.0.0.1:42110\r\n        at createConnectionError (node:net:1675:14)\r\n        at afterConnectMultiple (node:net:1705:16)\r\n        at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n      errno: -61,\r\n      code: 'ECONNREFUSED',\r\n      syscall: 'connect',\r\n      address: '127.0.0.1',\r\n      port: 42110\r\n    }\r\n  ]\r\n}\r\nAggregateError [ECONNREFUSED]: \r\n    at internalConnectMultiple (node:net:1139:18)\r\n    at afterConnectMultiple (node:net:1712:7)\r\n    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n  code: 'ECONNREFUSED',\r\n  [errors]: [\r\n    Error: connect ECONNREFUSED ::1:42110\r\n        at createConnectionError (node:net:1675:14)\r\n        at afterConnectMultiple (node:net:1705:16)\r\n        at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n      errno: -61,\r\n      code: 'ECONNREFUSED',\r\n      syscall: 'connect',\r\n      address: '::1',\r\n      port: 42110\r\n    },\r\n    Error: connect ECONNREFUSED 127.0.0.1:42110\r\n        at createConnectionError (node:net:1675:14)\r\n        at afterConnectMultiple (node:net:1705:16)\r\n        at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n      errno: -61,\r\n      code: 'ECONNREFUSED',\r\n      syscall: 'connect',\r\n      address: '127.0.0.1',\r\n      port: 42110\r\n    }\r\n  ]\r\n}\r\nFailed to proxy http://localhost:42110/static/khoj.webmanifest AggregateError [ECONNREFUSED]: \r\n    at internalConnectMultiple (node:net:1139:18)\r\n    at afterConnectMultiple (node:net:1712:7)\r\n    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n  code: 'ECONNREFUSED',\r\n  [errors]: [\r\n    Error: connect ECONNREFUSED ::1:42110\r\n        at createConnectionError (node:net:1675:14)\r\n        at afterConnectMultiple (node:net:1705:16)\r\n        at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n      errno: -61,\r\n      code: 'ECONNREFUSED',\r\n      syscall: 'connect',\r\n      address: '::1',\r\n      port: 42110\r\n    },\r\n    Error: connect ECONNREFUSED 127.0.0.1:42110\r\n        at createConnectionError (node:net:1675:14)\r\n        at afterConnectMultiple (node:net:1705:16)\r\n        at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n      errno: -61,\r\n      code: 'ECONNREFUSED',\r\n      syscall: 'connect',\r\n      address: '127.0.0.1',\r\n      port: 42110\r\n    }\r\n  ]\r\n}\r\nAggregateError [ECONNREFUSED]: \r\n    at internalConnectMultiple (node:net:1139:18)\r\n    at afterConnectMultiple (node:net:1712:7)\r\n    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n  code: 'ECONNREFUSED',\r\n  [errors]: [\r\n    Error: connect ECONNREFUSED ::1:42110\r\n        at createConnectionError (node:net:1675:14)\r\n        at afterConnectMultiple (node:net:1705:16)\r\n        at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n      errno: -61,\r\n      code: 'ECONNREFUSED',\r\n      syscall: 'connect',\r\n      address: '::1',\r\n      port: 42110\r\n    },\r\n    Error: connect ECONNREFUSED 127.0.0.1:42110\r\n        at createConnectionError (node:net:1675:14)\r\n        at afterConnectMultiple (node:net:1705:16)\r\n        at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n      errno: -61,\r\n      code: 'ECONNREFUSED',\r\n      syscall: 'connect',\r\n      address: '127.0.0.1',\r\n      port: 42110\r\n    }\r\n  ]\r\n}\r\nFailed to proxy http://localhost:42110/api/chat/options AggregateError [ECONNREFUSED]: \r\n    at internalConnectMultiple (node:net:1139:18)\r\n    at afterConnectMultiple (node:net:1712:7)\r\n    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n  code: 'ECONNREFUSED',\r\n  [errors]: [\r\n    Error: connect ECONNREFUSED ::1:42110\r\n        at createConnectionError (node:net:1675:14)\r\n        at afterConnectMultiple (node:net:1705:16)\r\n        at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n      errno: -61,\r\n      code: 'ECONNREFUSED',\r\n      syscall: 'connect',\r\n      address: '::1',\r\n      port: 42110\r\n    },\r\n    Error: connect ECONNREFUSED 127.0.0.1:42110\r\n        at createConnectionError (node:net:1675:14)\r\n        at afterConnectMultiple (node:net:1705:16)\r\n        at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n      errno: -61,\r\n      code: 'ECONNREFUSED',\r\n      syscall: 'connect',\r\n      address: '127.0.0.1',\r\n      port: 42110\r\n    }\r\n  ]\r\n}\r\nAggregateError [ECONNREFUSED]: \r\n    at internalConnectMultiple (node:net:1139:18)\r\n    at afterConnectMultiple (node:net:1712:7)\r\n    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n  code: 'ECONNREFUSED',\r\n  [errors]: [\r\n    Error: connect ECONNREFUSED ::1:42110\r\n        at createConnectionError (node:net:1675:14)\r\n        at afterConnectMultiple (node:net:1705:16)\r\n        at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n      errno: -61,\r\n      code: 'ECONNREFUSED',\r\n      syscall: 'connect',\r\n      address: '::1',\r\n      port: 42110\r\n    },\r\n    Error: connect ECONNREFUSED 127.0.0.1:42110\r\n        at createConnectionError (node:net:1675:14)\r\n        at afterConnectMultiple (node:net:1705:16)\r\n        at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n      errno: -61,\r\n      code: 'ECONNREFUSED',\r\n      syscall: 'connect',\r\n      address: '127.0.0.1',\r\n      port: 42110\r\n    }\r\n  ]\r\n}\r\n ✓ Compiled /_error in 412ms (10186 modules)\r\nFailed to proxy http://localhost:42110/static/khoj.webmanifest AggregateError [ECONNREFUSED]: \r\n    at internalConnectMultiple (node:net:1139:18)\r\n    at afterConnectMultiple (node:net:1712:7)\r\n    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n  code: 'ECONNREFUSED',\r\n  [errors]: [\r\n    Error: connect ECONNREFUSED ::1:42110\r\n        at createConnectionError (node:net:1675:14)\r\n        at afterConnectMultiple (node:net:1705:16)\r\n        at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n      errno: -61,\r\n      code: 'ECONNREFUSED',\r\n      syscall: 'connect',\r\n      address: '::1',\r\n      port: 42110\r\n    },\r\n    Error: connect ECONNREFUSED 127.0.0.1:42110\r\n        at createConnectionError (node:net:1675:14)\r\n        at afterConnectMultiple (node:net:1705:16)\r\n        at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n      errno: -61,\r\n      code: 'ECONNREFUSED',\r\n      syscall: 'connect',\r\n      address: '127.0.0.1',\r\n      port: 42110\r\n    }\r\n  ]\r\n}\r\nAggregateError [ECONNREFUSED]: \r\n    at internalConnectMultiple (node:net:1139:18)\r\n    at afterConnectMultiple (node:net:1712:7)\r\n    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n  code: 'ECONNREFUSED',\r\n  [errors]: [\r\n    Error: connect ECONNREFUSED ::1:42110\r\n        at createConnectionError (node:net:1675:14)\r\n        at afterConnectMultiple (node:net:1705:16)\r\n        at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n      errno: -61,\r\n      code: 'ECONNREFUSED',\r\n      syscall: 'connect',\r\n      address: '::1',\r\n      port: 42110\r\n    },\r\n    Error: connect ECONNREFUSED 127.0.0.1:42110\r\n        at createConnectionError (node:net:1675:14)\r\n        at afterConnectMultiple (node:net:1705:16)\r\n        at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n      errno: -61,\r\n      code: 'ECONNREFUSED',\r\n      syscall: 'connect',\r\n      address: '127.0.0.1',\r\n      port: 42110\r\n    }\r\n  ]\r\n}\r\nFailed to proxy http://localhost:42110/static/assets/icons/khoj_lantern.ico AggregateError [ECONNREFUSED]: \r\n    at internalConnectMultiple (node:net:1139:18)\r\n    at afterConnectMultiple (node:net:1712:7)\r\n    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n  code: 'ECONNREFUSED',\r\n  [errors]: [\r\n    Error: connect ECONNREFUSED ::1:42110\r\n        at createConnectionError (node:net:1675:14)\r\n        at afterConnectMultiple (node:net:1705:16)\r\n        at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n      errno: -61,\r\n      code: 'ECONNREFUSED',\r\n      syscall: 'connect',\r\n      address: '::1',\r\n      port: 42110\r\n    },\r\n    Error: connect ECONNREFUSED 127.0.0.1:42110\r\n        at createConnectionError (node:net:1675:14)\r\n        at afterConnectMultiple (node:net:1705:16)\r\n        at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n      errno: -61,\r\n      code: 'ECONNREFUSED',\r\n      syscall: 'connect',\r\n      address: '127.0.0.1',\r\n      port: 42110\r\n    }\r\n  ]\r\n}\r\nAggregateError [ECONNREFUSED]: \r\n    at internalConnectMultiple (node:net:1139:18)\r\n    at afterConnectMultiple (node:net:1712:7)\r\n    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n  code: 'ECONNREFUSED',\r\n  [errors]: [\r\n    Error: connect ECONNREFUSED ::1:42110\r\n        at createConnectionError (node:net:1675:14)\r\n        at afterConnectMultiple (node:net:1705:16)\r\n        at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n      errno: -61,\r\n      code: 'ECONNREFUSED',\r\n      syscall: 'connect',\r\n      address: '::1',\r\n      port: 42110\r\n    },\r\n    Error: connect ECONNREFUSED 127.0.0.1:42110\r\n        at createConnectionError (node:net:1675:14)\r\n        at afterConnectMultiple (node:net:1705:16)\r\n        at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17) {\r\n      errno: -61,\r\n      code: 'ECONNREFUSED',\r\n      syscall: 'connect',\r\n      address: '127.0.0.1',\r\n      port: 42110\r\n    }\r\n  ]\r\n}\r\n",
      "state": "open",
      "author": "SunnyWan59",
      "author_type": "User",
      "created_at": "2025-01-09T07:03:26Z",
      "updated_at": "2025-01-13T10:54:00Z",
      "closed_at": null,
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1053/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1053",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1053",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:45.002934",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Hey @SunnyWan59 ! It looks like your front end node server is running, but you'll also have to start the backend khoj server to get it going end to end.\n\nSee the instructions here -- https://docs.khoj.dev/contributing/development/\n\nIf you're just making frontend changes, you can use Khoj on docker a",
          "created_at": "2025-01-09T07:08:39Z"
        },
        {
          "author": "LumenYoung",
          "body": "Same problem here when I'm trying to run the khoj's docker compose with either the cloud or the normal one. It seems I can get the following error from the console of the loading web:\r\n\r\n![image](https://github.com/user-attachments/assets/95676c9e-cbc5-4046-95da-a52fd6a98aa9)\r\n\r\nYou can check the pr",
          "created_at": "2025-01-09T07:19:02Z"
        },
        {
          "author": "SunnyWan59",
          "body": "> Hey @SunnyWan59 ! It looks like your front end node server is running, but you'll also have to start the backend khoj server to get it going end to end.\r\n> \r\n> See the instructions here -- https://docs.khoj.dev/contributing/development/\r\n> \r\n> If you're just making frontend changes, you can use Kh",
          "created_at": "2025-01-11T22:31:56Z"
        },
        {
          "author": "debanjum",
          "body": "Hey @LumenYoung, your issue maybe different from the original issue. Can you share more details of your setup? For example your (redacted) docker-compose.yml file. \r\n\r\nThe CSP error is due to security restrictions on where resources from where content can be loaded. You may not need to set `KHOJ_DOM",
          "created_at": "2025-01-13T10:53:58Z"
        }
      ]
    },
    {
      "issue_number": 970,
      "title": "[FIX] CORS issue",
      "body": "## Describe the bug\r\n>Access to fetch at 'https://app.khoj.dev/api/content?client=obsidian' from origin 'app://obsidian.md' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource. If an opaque response serves your needs, set the request's mode to 'no-cors' to fetch the resource with CORS disabled.\r\napp.khoj.dev/api/content?client=obsidian:1 \r\n>        \r\n>       Failed to load resource: net::ERR_FAILED\r\n>plugin:khoj:1437 \r\n>        \r\n>      Uncaught (in promise) TypeError: Failed to fetch\r\n>    at updateContentIndex (plugin:khoj:1091:28)\r\n>    at async eval (plugin:khoj:1432:39)\r\n\r\n## To Reproduce\r\ndo a manual sync\r\n\r\n## Screenshots\r\n![image](https://github.com/user-attachments/assets/723e0f97-a5d8-468c-bc3a-3dd771059bf9)\r\n## Platform\r\n\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [ ] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n    - [ x ] Not sure. I also have the khoj app but gave up on it because it doesn't seem to work well. but this bug is about obsidian, not the app version.\r\n- Client:\r\n    - [ x ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [ ] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ x ] Windows\r\n    - [ ] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n",
      "state": "open",
      "author": "huachuman",
      "author_type": "User",
      "created_at": "2024-11-10T02:27:23Z",
      "updated_at": "2025-01-12T21:30:48Z",
      "closed_at": null,
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 8,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/970/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/970",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/970",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:45.177502",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Hi @huachuman , where did you see the errors? Are they in the developer console, did you get a notification, or somewhere else? Can you also make sure you're on the latest obsidian plugin? To upgrade:\r\n```\r\n1. Open Community plugins tab in Obsidian settings\r\n2. Click the Check for updates button\r\n3.",
          "created_at": "2024-11-11T17:22:26Z"
        },
        {
          "author": "huachuman",
          "body": "So that error I get in the Obsidian console. \r\n\r\nI can confirm that I'm on the latest version of the plugin (updated 9 days ago)\r\n\r\nThe only things I see in the files on  https://app.khoj.dev/settings is a single PDF I uploaded a while ago for testing. I don't see anything in my obsidian vault there",
          "created_at": "2024-11-11T20:25:55Z"
        },
        {
          "author": "debanjum",
          "body": "So I was looking into this issue again. But I still can't reproduce the CORS issue you are facing. It'd be great if you can share the following details to investigate/reproduce the CORS issue you are facing:\r\n- **Obsidian Version**: What is the exact Obsidian version you are using?\r\n- **Network Deta",
          "created_at": "2024-12-16T20:48:11Z"
        },
        {
          "author": "Sly777",
          "body": "Hey @debanjum @sabaimran,\r\n\r\nI'm also getting CORS error on obsidian side. I'm using cloudflare for security. Everything else related to Khoj is working correctly but sync doesn't work at all.\r\n\r\n```\r\nKhoj: Updating Khoj content index...\r\nindex.html:1 Access to fetch at 'https://xx.SERVERNAME.com/ap",
          "created_at": "2025-01-05T19:51:19Z"
        },
        {
          "author": "huachuman",
          "body": "I'm working on a mobile hotspot if that's relevant. latest public obsidian release",
          "created_at": "2025-01-05T21:32:14Z"
        }
      ]
    },
    {
      "issue_number": 937,
      "title": "[FIX] GPU won't show up in UI settings",
      "body": "## Describe the bug\r\nThe settings usual show the GPU, also the lower-right-corner during processing showed GPU instead of CPU.\r\nIs the GPU not supported anymore in the desktop app? \r\nCould this has something todo with using different power settings; \r\nHybrid (NVIDIA + Internal Graphics Chip) vs. only NVIDIA?\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior: Setup GPT4ALL UI on a notebook / try running any gpu model and see if the lower right corner shows GPU. Also check the settings if the option GPU is available.\r\n\r\n## Screenshots\r\n![Screenshot from 2024-10-16 13-40-48](https://github.com/user-attachments/assets/10657aef-f9c4-47e4-aed6-e87ee397369f)\r\n\r\n- Client:\r\n    - [X] Desktop app / current version\r\n- OS:\r\n    - [X] Linux / Debian based + Wayland\r\n\r\n## Additional context\r\n\r\nSome time back this feature, using the GPU in UI, had been working - I successful tested it but I am not able to reproduce the same result now. Thank you for any input related to this issue.\r\n",
      "state": "closed",
      "author": "gree303",
      "author_type": "User",
      "created_at": "2024-10-16T11:44:01Z",
      "updated_at": "2025-01-11T10:58:15Z",
      "closed_at": "2025-01-11T10:58:15Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/937/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/937",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/937",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:45.367446",
      "comments": [
        {
          "author": "sabaimran",
          "body": "@gree303 , hi! I think this bug needs to go on https://github.com/nomic-ai/gpt4all, not Khoj :-) ",
          "created_at": "2024-11-11T17:23:21Z"
        }
      ]
    },
    {
      "issue_number": 1052,
      "title": "[FIX] Streaming Error on Chat with Document when Self-Host with Docker on Window",
      "body": "## Describe the bug\r\nA clear and concise description of what the bug is. Please include what you were expecting to happen vs. what actually happened.\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [X] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [X] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [X] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\nlatest \r\n## Additional context\r\nLoaded a 240k file and did this command /notes tell me the codebase structure, it started wirting a little and then Application error: a client-side exception has occurred (see the browser console for more information).\r\n```\r\n __  __     __  __     ______       __        _____      __/\\ \\/ /    /\\ \\_\\ \\   /\\  __ \\     /\\ \\      /\\  __ \\   /\\ \\\\ \\  _\"-.  \\ \\  __ \\  \\ \\ \\/\\ \\   _\\_\\ \\     \\ \\  __ \\  \\ \\ \\ \\ \\_\\ \\_\\  \\ \\_\\ \\_\\  \\ \\_____\\ /\\_____\\     \\ \\_\\ \\_\\  \\ \\_\\  \\/_/\\/_/   \\/_/\\/_/   \\/_____/ \\/_____/      \\/_/\\/_/   \\/_/Greetings traveller,I am ✨Khoj✨, your open-source, personal AI copilot.See my source code at https://github.com/khoj-ai/khojRead my operating manual at https://docs.khoj.dev\r\nfd9d1056-4482b99a36fd1673.js:1 Error: <svg> attribute height: Expected length, \"auto\".\r\neK @ fd9d1056-4482b99a36fd1673.js:1Understand this errorAI\r\n:42110/chat.txt?conversationId=6af37f38-a4c5-492d-82bf-1ce0fe897715&_rsc=v4t1u:1 \r\n        \r\n        \r\n       Failed to load resource: the server responded with a status of 404 (Not Found)Understand this errorAI\r\n:42110/chat.txt?conversationId=fc974f61-241d-47b5-8c97-8aaa7c5f8b17&_rsc=v4t1u:1 \r\n        \r\n        \r\n       Failed to load resource: the server responded with a status of 404 (Not Found)Understand this errorAI\r\n:42110/chat.txt?conversationId=28e37395-a7a6-484e-9979-af4694f95612&_rsc=v4t1u:1 \r\n        \r\n        \r\n       Failed to load resource: the server responded with a status of 404 (Not Found)Understand this errorAI\r\n:42110/chat.txt?conversationId=5c43dd7f-79aa-4788-b9dd-a80d77a28a36&_rsc=v4t1u:1 \r\n        \r\n        \r\n       Failed to load resource: the server responded with a status of 404 (Not Found)Understand this errorAI\r\n:42110/chat.txt?conversationId=8602bdf5-0438-42ea-b0c0-83ef0cdd6763&_rsc=v4t1u:1 \r\n        \r\n        \r\n       Failed to load resource: the server responded with a status of 404 (Not Found)Understand this errorAI\r\n:42110/chat.txt?conversationId=5bb154df-0861-4f89-8eec-5de21546226a&_rsc=v4t1u:1 \r\n        \r\n        \r\n       Failed to load resource: the server responded with a status of 404 (Not Found)Understand this errorAI\r\n:42110/chat.txt?conversationId=49f9da2a-ef58-4ee5-922e-8e8ffa0596ed&_rsc=v4t1u:1 \r\n        \r\n        \r\n       Failed to load resource: the server responded with a status of 404 (Not Found)Understand this errorAI\r\n4124-f5c857c57e5391d9.js:1 chunk type: metadata\r\n4124-f5c857c57e5391d9.js:1 chunk type: status\r\n4124-f5c857c57e5391d9.js:1 status: **Searching Documents for:** \r\n- Folders in current project\r\n- Repository structure\r\n- Files in current project\r\n4124-f5c857c57e5391d9.js:1 chunk type: status\r\n4124-f5c857c57e5391d9.js:1 status: **Found Relevant Notes**: \r\n- chatgpt.txt\r\n-  README.md\r\n4124-f5c857c57e5391d9.js:1 chunk type: references\r\n4124-f5c857c57e5391d9.js:1 chunk type: status\r\n4124-f5c857c57e5391d9.js:1 status: **Generating a well-informed response**\r\n4124-f5c857c57e5391d9.js:1 chunk type: start_llm_response\r\n4124-f5c857c57e5391d9.js:1 Started streaming: Thu Jan 09 2025 05:46:50 GMT+0100 (Central European Standard Time)\r\n2264124-f5c857c57e5391d9.js:1 chunk type: message\r\n2117-165ef4747a5b836b.js:1 Error: Minified React error #185; visit https://react.dev/errors/185 for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\r\n    at ik (fd9d1056-4482b99a36fd1673.js:1:110229)\r\n    at nf (fd9d1056-4482b99a36fd1673.js:1:26357)\r\n    at nu (fd9d1056-4482b99a36fd1673.js:1:25925)\r\n    at lc (fd9d1056-4482b99a36fd1673.js:1:48873)\r\n    at 3789-a09e37a819171a9d.js:1:15295\r\n    at aW (fd9d1056-4482b99a36fd1673.js:1:73244)\r\n    at oe (fd9d1056-4482b99a36fd1673.js:1:84685)\r\n    at ol (fd9d1056-4482b99a36fd1673.js:1:85323)\r\n    at or (fd9d1056-4482b99a36fd1673.js:1:85207)\r\n    at ol (fd9d1056-4482b99a36fd1673.js:1:86268)\r\nwindow.console.error @ 2117-165ef4747a5b836b.js:1Understand this errorAI\r\n84124-f5c857c57e5391d9.js:1 chunk type: message\r\n4124-f5c857c57e5391d9.js:1 chunk type: end_llm_response\r\n4124-f5c857c57e5391d9.js:1 Completed streaming: Thu Jan 09 2025 05:46:53 GMT+0100 (Central European Standard Time)\r\n4124-f5c857c57e5391d9.js:1 chunk type: usage\r\n4124-f5c857c57e5391d9.js:1 chunk type: end_response\r\n\r\n```\r\n",
      "state": "open",
      "author": "baditaflorin",
      "author_type": "User",
      "created_at": "2025-01-09T04:49:50Z",
      "updated_at": "2025-01-11T09:44:27Z",
      "closed_at": null,
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1052/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1052",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1052",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:45.569687",
      "comments": []
    },
    {
      "issue_number": 1074,
      "title": "[FIX] 🚫 WhatsApp Integration Not Working with Claude 3.5 Sonnet",
      "body": "## 🐛 Describe the bug\r\nWhatsApp messages are ignored when using Claude 3.5 Sonnet as default model instead of GPT-4o.\r\n\r\n## 🔄 To Reproduce\r\n1. Switch default model from GPT-4o to Claude 3.5 Sonnet\r\n2. Send message through WhatsApp\r\n3. Messages are ignored (no response)\r\n\r\n## 📱 Platform\r\n### Client\r\n- [x] WhatsApp\r\n\r\n### Server\r\n- [x] Cloud-Hosted (https://app.khoj.dev)\r\n\r\n## 🔍 Additional context\r\n- Issue occurs 100% of time with Claude 3.5 Sonnet\r\n- Only WhatsApp integration affected\r\n- Other chat interfaces work normally\r\n- Switching back to GPT-4o resolves the issue",
      "state": "open",
      "author": "hjamet",
      "author_type": "User",
      "created_at": "2025-01-11T09:12:40Z",
      "updated_at": "2025-01-11T09:12:40Z",
      "closed_at": null,
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1074/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 1
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1074",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1074",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:45.569706",
      "comments": []
    },
    {
      "issue_number": 1070,
      "title": "[FIX] API Key should be viewable in plain text",
      "body": "## Describe the bug\r\nI am selfhosting with a Multi-User setup.\r\n\r\nAs a user, I can generate an API key on the settings page. There is a button to copy the API key, but that fails everywhere I have tried. (It claims to succeed with a popup, but the key is not copied to my clipboard). I have tried on Linux Firefox/Chrome and iOS Firefox/Safari.\r\n\r\nIt doesn't really matter to me that the copy is failing, maybe my local setup is nonstandard, but the problem is that there is **no other way** to access the generated key.\r\n\r\nThere should be a fallback to view the key in plain text for scenarios when that copy fails.\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n\r\n1. Generate a Khoj API key in the User settings.\r\n2. Be on a platform where the copy command may fail or be inaccessible.\r\n3. Struggle to find out how to get the key, since it doesn't even seem to be available in the server/admin console.\r\n\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [x] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [x] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [x] Linux\r\n    - [ ] Android\r\n    - [x] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\n  - Built from 2069f571c8ab3f6d82e6c9483c0ac4cc39b28c43\r\n\r\n## Additional context\r\nI'm pretty sure this is some kind of accessibility issue as well.\r\n",
      "state": "closed",
      "author": "arcuru",
      "author_type": "User",
      "created_at": "2025-01-10T18:37:44Z",
      "updated_at": "2025-01-11T07:43:40Z",
      "closed_at": "2025-01-11T07:40:57Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1070/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1070",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1070",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:45.569712",
      "comments": [
        {
          "author": "debanjum",
          "body": "Fixed this by allowing the ability to toggle visibility of the api keys on the web app settings page api key card. This should allow manual copying of the text in self-hosting scenarios where clipboard copy is disabled",
          "created_at": "2025-01-11T07:43:39Z"
        }
      ]
    },
    {
      "issue_number": 1072,
      "title": "[IDEA]",
      "body": "## Describe the feature you'd like\nA clear and concise description of what you want to happen. Include any relevant links or screenshots or inspiration.\n",
      "state": "closed",
      "author": "Yash7409",
      "author_type": "User",
      "created_at": "2025-01-11T03:45:39Z",
      "updated_at": "2025-01-11T05:32:48Z",
      "closed_at": "2025-01-11T05:32:48Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1072/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1072",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1072",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:45.769515",
      "comments": []
    },
    {
      "issue_number": 1069,
      "title": "[FIX] Different email capitalization is recognized as different emails.",
      "body": "## Describe the bug\r\nI am self-hosting using Magic Links.\r\n\r\nI have an existing account under an email, \"myemail@mydomain.com\". When I logged in on my new device I entered \"MyEmail@MyDomain.com\" (phone autocapitalization). I got a magic link email and was able to login, but it had created a separate account with the capitalized email.\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n\r\n1. Create an account with your email.\r\n2. Create a new account with your email but with some capitalizations.\r\n\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [x] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [x] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\n  - built from 2069f571c8ab3f6d82e6c9483c0ac4cc39b28c43\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n",
      "state": "closed",
      "author": "arcuru",
      "author_type": "User",
      "created_at": "2025-01-10T18:22:21Z",
      "updated_at": "2025-01-11T05:30:29Z",
      "closed_at": "2025-01-11T05:30:29Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1069/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1069",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1069",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:45.769533",
      "comments": []
    },
    {
      "issue_number": 1071,
      "title": "[FIX] AttributeError: 'str' object has no attribute 'value' when giving a text file as an attachment in certain conditions in self-hosted Khoj with Ollama models",
      "body": "## Describe the bug\r\nWhen giving any text file as an attachment, and asking for a translation or a summary, in certain conditions (couldn't isolate why), the following error is produced in server-1 :\r\n\r\n```shell\r\n2025-01-10 13:34:34 [18:34:34.173791] ERROR    uvicorn.error: Exception in ASGI      h11_impl.py:411\r\n2025-01-10 13:34:34                            application                                          \r\n2025-01-10 13:34:34                                                                                 \r\n2025-01-10 13:34:34                            ╭─ Traceback (most recent call last─╮                \r\n2025-01-10 13:34:34                            │ /usr/local/lib/python3.10/dist-pa │                \r\n2025-01-10 13:34:34                            │ ckages/uvicorn/protocols/http/h11 │                \r\n2025-01-10 13:34:34                            │ _impl.py:406 in run_asgi          │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │   403 │   # ASGI exception wrappe │                \r\n2025-01-10 13:34:34                            │   404 │   async def run_asgi(self │                \r\n2025-01-10 13:34:34                            │   405 │   │   try:                │                \r\n2025-01-10 13:34:34                            │ ❱ 406 │   │   │   result = await  │                \r\n2025-01-10 13:34:34                            │   407 │   │   │   │   self.scope, │                \r\n2025-01-10 13:34:34                            │   408 │   │   │   )               │                \r\n2025-01-10 13:34:34                            │   409 │   │   except BaseExceptio │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │ /usr/local/lib/python3.10/dist-pa │                \r\n2025-01-10 13:34:34                            │ ckages/uvicorn/middleware/proxy_h │                \r\n2025-01-10 13:34:34                            │ eaders.py:70 in __call__          │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │   67 │   │   │   │   │   port = 0 │                \r\n2025-01-10 13:34:34                            │   68 │   │   │   │   │   scope[\"c │                \r\n2025-01-10 13:34:34                            │   69 │   │                        │                \r\n2025-01-10 13:34:34                            │ ❱ 70 │   │   return await self.ap │                \r\n2025-01-10 13:34:34                            │   71                              │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │ /usr/local/lib/python3.10/dist-pa │                \r\n2025-01-10 13:34:34                            │ ckages/fastapi/applications.py:10 │                \r\n2025-01-10 13:34:34                            │ 54 in __call__                    │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │   1051 │   async def __call__(sel │                \r\n2025-01-10 13:34:34                            │   1052 │   │   if self.root_path: │                \r\n2025-01-10 13:34:34                            │   1053 │   │   │   scope[\"root_pa │                \r\n2025-01-10 13:34:34                            │ ❱ 1054 │   │   await super().__ca │                \r\n2025-01-10 13:34:34                            │   1055 │                          │                \r\n2025-01-10 13:34:34                            │   1056 │   def add_api_route(     │                \r\n2025-01-10 13:34:34                            │   1057 │   │   self,              │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │ /usr/local/lib/python3.10/dist-pa │                \r\n2025-01-10 13:34:34                            │ ckages/starlette/applications.py: │                \r\n2025-01-10 13:34:34                            │ 113 in __call__                   │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │   110 │   │   scope[\"app\"] = self │                \r\n2025-01-10 13:34:34                            │   111 │   │   if self.middleware_ │                \r\n2025-01-10 13:34:34                            │   112 │   │   │   self.middleware │                \r\n2025-01-10 13:34:34                            │ ❱ 113 │   │   await self.middlewa │                \r\n2025-01-10 13:34:34                            │   114 │                           │                \r\n2025-01-10 13:34:34                            │   115 │   def on_event(self, even │                \r\n2025-01-10 13:34:34                            │   116 │   │   return self.router. │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │ /usr/local/lib/python3.10/dist-pa │                \r\n2025-01-10 13:34:34                            │ ckages/starlette/middleware/error │                \r\n2025-01-10 13:34:34                            │ s.py:187 in __call__              │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │   184 │   │   │   # We always con │                \r\n2025-01-10 13:34:34                            │   185 │   │   │   # This allows s │                \r\n2025-01-10 13:34:34                            │   186 │   │   │   # to optionally │                \r\n2025-01-10 13:34:34                            │ ❱ 187 │   │   │   raise exc       │                \r\n2025-01-10 13:34:34                            │   188 │                           │                \r\n2025-01-10 13:34:34                            │   189 │   def format_line(self, i │                \r\n2025-01-10 13:34:34                            │       str:                        │                \r\n2025-01-10 13:34:34                            │   190 │   │   values = {          │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │ /usr/local/lib/python3.10/dist-pa │                \r\n2025-01-10 13:34:34                            │ ckages/starlette/middleware/error │                \r\n2025-01-10 13:34:34                            │ s.py:165 in __call__              │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │   162 │   │   │   await send(mess │                \r\n2025-01-10 13:34:34                            │   163 │   │                       │                \r\n2025-01-10 13:34:34                            │   164 │   │   try:                │                \r\n2025-01-10 13:34:34                            │ ❱ 165 │   │   │   await self.app( │                \r\n2025-01-10 13:34:34                            │   166 │   │   except Exception as │                \r\n2025-01-10 13:34:34                            │   167 │   │   │   request = Reque │                \r\n2025-01-10 13:34:34                            │   168 │   │   │   if self.debug:  │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │ /usr/local/lib/python3.10/dist-pa │                \r\n2025-01-10 13:34:34                            │ ckages/starlette/middleware/sessi │                \r\n2025-01-10 13:34:34                            │ ons.py:85 in __call__             │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │   82 │   │   │   │   │   headers. │                \r\n2025-01-10 13:34:34                            │   83 │   │   │   await send(messa │                \r\n2025-01-10 13:34:34                            │   84 │   │                        │                \r\n2025-01-10 13:34:34                            │ ❱ 85 │   │   await self.app(scope │                \r\n2025-01-10 13:34:34                            │   86                              │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │ /app/src/khoj/configure.py:351 in │                \r\n2025-01-10 13:34:34                            │ __call__                          │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │   348 │   │   async def __call__( │                \r\n2025-01-10 13:34:34                            │   349 │   │   │   if scope[\"type\" │                \r\n2025-01-10 13:34:34                            │   350 │   │   │   │   scope[\"path │                \r\n2025-01-10 13:34:34                            │ ❱ 351 │   │   │   await self.app( │                \r\n2025-01-10 13:34:34                            │   352 │   │                       │                \r\n2025-01-10 13:34:34                            │   353 │   │   def __init__(self,  │                \r\n2025-01-10 13:34:34                            │   354 │   │   │   super().__init_ │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │ /usr/local/lib/python3.10/dist-pa │                \r\n2025-01-10 13:34:34                            │ ckages/starlette/middleware/authe │                \r\n2025-01-10 13:34:34                            │ ntication.py:48 in __call__       │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │   45 │   │   if auth_result is No │                \r\n2025-01-10 13:34:34                            │   46 │   │   │   auth_result = Au │                \r\n2025-01-10 13:34:34                            │   47 │   │   scope[\"auth\"], scope │                \r\n2025-01-10 13:34:34                            │ ❱ 48 │   │   await self.app(scope │                \r\n2025-01-10 13:34:34                            │   49 │                            │                \r\n2025-01-10 13:34:34                            │   50 │   @staticmethod            │                \r\n2025-01-10 13:34:34                            │   51 │   def default_on_error(con │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │ /usr/local/lib/python3.10/dist-pa │                \r\n2025-01-10 13:34:34                            │ ckages/starlette/middleware/base. │                \r\n2025-01-10 13:34:34                            │ py:188 in __call__                │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │   185 │   │   with collapse_excgr │                \r\n2025-01-10 13:34:34                            │   186 │   │   │   async with anyi │                \r\n2025-01-10 13:34:34                            │   187 │   │   │   │   response =  │                \r\n2025-01-10 13:34:34                            │ ❱ 188 │   │   │   │   await respo │                \r\n2025-01-10 13:34:34                            │   189 │   │   │   │   response_se │                \r\n2025-01-10 13:34:34                            │   190 │                           │                \r\n2025-01-10 13:34:34                            │   191 │   async def dispatch(self │                \r\n2025-01-10 13:34:34                            │       Response:                   │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │ /usr/local/lib/python3.10/dist-pa │                \r\n2025-01-10 13:34:34                            │ ckages/starlette/middleware/base. │                \r\n2025-01-10 13:34:34                            │ py:222 in __call__                │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │   219 │   │   │   }               │                \r\n2025-01-10 13:34:34                            │   220 │   │   )                   │                \r\n2025-01-10 13:34:34                            │   221 │   │                       │                \r\n2025-01-10 13:34:34                            │ ❱ 222 │   │   async for chunk in  │                \r\n2025-01-10 13:34:34                            │   223 │   │   │   await send({\"ty │                \r\n2025-01-10 13:34:34                            │   224 │   │                       │                \r\n2025-01-10 13:34:34                            │   225 │   │   await send({\"type\": │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │ /usr/local/lib/python3.10/dist-pa │                \r\n2025-01-10 13:34:34                            │ ckages/starlette/middleware/base. │                \r\n2025-01-10 13:34:34                            │ py:179 in body_stream             │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │   176 │   │   │   │   │   │   │   │                \r\n2025-01-10 13:34:34                            │   177 │   │   │   │               │                \r\n2025-01-10 13:34:34                            │   178 │   │   │   │   if app_exc  │                \r\n2025-01-10 13:34:34                            │ ❱ 179 │   │   │   │   │   raise a │                \r\n2025-01-10 13:34:34                            │   180 │   │   │                   │                \r\n2025-01-10 13:34:34                            │   181 │   │   │   response = _Str │                \r\n2025-01-10 13:34:34                            │       content=body_stream(), info │                \r\n2025-01-10 13:34:34                            │   182 │   │   │   response.raw_he │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │ /usr/local/lib/python3.10/dist-pa │                \r\n2025-01-10 13:34:34                            │ ckages/starlette/middleware/base. │                \r\n2025-01-10 13:34:34                            │ py:149 in coro                    │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │   146 │   │   │   │               │                \r\n2025-01-10 13:34:34                            │   147 │   │   │   │   async with  │                \r\n2025-01-10 13:34:34                            │   148 │   │   │   │   │   try:    │                \r\n2025-01-10 13:34:34                            │ ❱ 149 │   │   │   │   │   │   awa │                \r\n2025-01-10 13:34:34                            │   150 │   │   │   │   │   except  │                \r\n2025-01-10 13:34:34                            │   151 │   │   │   │   │   │   app │                \r\n2025-01-10 13:34:34                            │   152                             │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │ /usr/local/lib/python3.10/dist-pa │                \r\n2025-01-10 13:34:34                            │ ckages/starlette/middleware/cors. │                \r\n2025-01-10 13:34:34                            │ py:93 in __call__                 │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │    90 │   │   │   await response( │                \r\n2025-01-10 13:34:34                            │    91 │   │   │   return          │                \r\n2025-01-10 13:34:34                            │    92 │   │                       │                \r\n2025-01-10 13:34:34                            │ ❱  93 │   │   await self.simple_r │                \r\n2025-01-10 13:34:34                            │    94 │                           │                \r\n2025-01-10 13:34:34                            │    95 │   def is_allowed_origin(s │                \r\n2025-01-10 13:34:34                            │    96 │   │   if self.allow_all_o │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │ /usr/local/lib/python3.10/dist-pa │                \r\n2025-01-10 13:34:34                            │ ckages/starlette/middleware/cors. │                \r\n2025-01-10 13:34:34                            │ py:144 in simple_response         │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │   141 │                           │                \r\n2025-01-10 13:34:34                            │   142 │   async def simple_respon │                \r\n2025-01-10 13:34:34                            │       request_headers: Headers) - │                \r\n2025-01-10 13:34:34                            │   143 │   │   send = functools.pa │                \r\n2025-01-10 13:34:34                            │ ❱ 144 │   │   await self.app(scop │                \r\n2025-01-10 13:34:34                            │   145 │                           │                \r\n2025-01-10 13:34:34                            │   146 │   async def send(self, me │                \r\n2025-01-10 13:34:34                            │       None:                       │                \r\n2025-01-10 13:34:34                            │   147 │   │   if message[\"type\"]  │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │ /usr/local/lib/python3.10/dist-pa │                \r\n2025-01-10 13:34:34                            │ ckages/starlette/middleware/excep │                \r\n2025-01-10 13:34:34                            │ tions.py:62 in __call__           │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │   59 │   │   else:                │                \r\n2025-01-10 13:34:34                            │   60 │   │   │   conn = WebSocket │                \r\n2025-01-10 13:34:34                            │   61 │   │                        │                \r\n2025-01-10 13:34:34                            │ ❱ 62 │   │   await wrap_app_handl │                \r\n2025-01-10 13:34:34                            │   63 │                            │                \r\n2025-01-10 13:34:34                            │   64 │   def http_exception(self, │                \r\n2025-01-10 13:34:34                            │   65 │   │   assert isinstance(ex │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │ /usr/local/lib/python3.10/dist-pa │                \r\n2025-01-10 13:34:34                            │ ckages/starlette/_exception_handl │                \r\n2025-01-10 13:34:34                            │ er.py:53 in wrapped_app           │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │   50 │   │   │   │   handler = _l │                \r\n2025-01-10 13:34:34                            │   51 │   │   │                    │                \r\n2025-01-10 13:34:34                            │   52 │   │   │   if handler is No │                \r\n2025-01-10 13:34:34                            │ ❱ 53 │   │   │   │   raise exc    │                \r\n2025-01-10 13:34:34                            │   54 │   │   │                    │                \r\n2025-01-10 13:34:34                            │   55 │   │   │   if response_star │                \r\n2025-01-10 13:34:34                            │   56 │   │   │   │   raise Runtim │                \r\n2025-01-10 13:34:34                            │      started.\") from exc          │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │ /usr/local/lib/python3.10/dist-pa │                \r\n2025-01-10 13:34:34                            │ ckages/starlette/_exception_handl │                \r\n2025-01-10 13:34:34                            │ er.py:42 in wrapped_app           │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │   39 │   │   │   await send(messa │                \r\n2025-01-10 13:34:34                            │   40 │   │                        │                \r\n2025-01-10 13:34:34                            │   41 │   │   try:                 │                \r\n2025-01-10 13:34:34                            │ ❱ 42 │   │   │   await app(scope, │                \r\n2025-01-10 13:34:34                            │   43 │   │   except Exception as  │                \r\n2025-01-10 13:34:34                            │   44 │   │   │   handler = None   │                \r\n2025-01-10 13:34:34                            │   45                              │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │ /usr/local/lib/python3.10/dist-pa │                \r\n2025-01-10 13:34:34                            │ ckages/starlette/routing.py:715   │                \r\n2025-01-10 13:34:34                            │ in __call__                       │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │   712 │   │   \"\"\"                 │                \r\n2025-01-10 13:34:34                            │   713 │   │   The main entry poin │                \r\n2025-01-10 13:34:34                            │   714 │   │   \"\"\"                 │                \r\n2025-01-10 13:34:34                            │ ❱ 715 │   │   await self.middlewa │                \r\n2025-01-10 13:34:34                            │   716 │                           │                \r\n2025-01-10 13:34:34                            │   717 │   async def app(self, sco │                \r\n2025-01-10 13:34:34                            │   718 │   │   assert scope[\"type\" │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │ /usr/local/lib/python3.10/dist-pa │                \r\n2025-01-10 13:34:34                            │ ckages/starlette/routing.py:735   │                \r\n2025-01-10 13:34:34                            │ in app                            │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │   732 │   │   │   match, child_sc │                \r\n2025-01-10 13:34:34                            │   733 │   │   │   if match == Mat │                \r\n2025-01-10 13:34:34                            │   734 │   │   │   │   scope.updat │                \r\n2025-01-10 13:34:34                            │ ❱ 735 │   │   │   │   await route │                \r\n2025-01-10 13:34:34                            │   736 │   │   │   │   return      │                \r\n2025-01-10 13:34:34                            │   737 │   │   │   elif match == M │                \r\n2025-01-10 13:34:34                            │   738 │   │   │   │   partial = r │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │ /usr/local/lib/python3.10/dist-pa │                \r\n2025-01-10 13:34:34                            │ ckages/starlette/routing.py:288   │                \r\n2025-01-10 13:34:34                            │ in handle                         │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │   285 │   │   │   │   response =  │                \r\n2025-01-10 13:34:34                            │       headers=headers)            │                \r\n2025-01-10 13:34:34                            │   286 │   │   │   await response( │                \r\n2025-01-10 13:34:34                            │   287 │   │   else:               │                \r\n2025-01-10 13:34:34                            │ ❱ 288 │   │   │   await self.app( │                \r\n2025-01-10 13:34:34                            │   289 │                           │                \r\n2025-01-10 13:34:34                            │   290 │   def __eq__(self, other: │                \r\n2025-01-10 13:34:34                            │   291 │   │   return (            │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │ /usr/local/lib/python3.10/dist-pa │                \r\n2025-01-10 13:34:34                            │ ckages/starlette/routing.py:76 in │                \r\n2025-01-10 13:34:34                            │ app                               │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │    73 │   │   │   response = awai │                \r\n2025-01-10 13:34:34                            │    74 │   │   │   await response( │                \r\n2025-01-10 13:34:34                            │    75 │   │                       │                \r\n2025-01-10 13:34:34                            │ ❱  76 │   │   await wrap_app_hand │                \r\n2025-01-10 13:34:34                            │    77 │                           │                \r\n2025-01-10 13:34:34                            │    78 │   return app              │                \r\n2025-01-10 13:34:34                            │    79                             │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │ /usr/local/lib/python3.10/dist-pa │                \r\n2025-01-10 13:34:34                            │ ckages/starlette/_exception_handl │                \r\n2025-01-10 13:34:34                            │ er.py:53 in wrapped_app           │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │   50 │   │   │   │   handler = _l │                \r\n2025-01-10 13:34:34                            │   51 │   │   │                    │                \r\n2025-01-10 13:34:34                            │   52 │   │   │   if handler is No │                \r\n2025-01-10 13:34:34                            │ ❱ 53 │   │   │   │   raise exc    │                \r\n2025-01-10 13:34:34                            │   54 │   │   │                    │                \r\n2025-01-10 13:34:34                            │   55 │   │   │   if response_star │                \r\n2025-01-10 13:34:34                            │   56 │   │   │   │   raise Runtim │                \r\n2025-01-10 13:34:34                            │      started.\") from exc          │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │ /usr/local/lib/python3.10/dist-pa │                \r\n2025-01-10 13:34:34                            │ ckages/starlette/_exception_handl │                \r\n2025-01-10 13:34:34                            │ er.py:42 in wrapped_app           │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │   39 │   │   │   await send(messa │                \r\n2025-01-10 13:34:34                            │   40 │   │                        │                \r\n2025-01-10 13:34:34                            │   41 │   │   try:                 │                \r\n2025-01-10 13:34:34                            │ ❱ 42 │   │   │   await app(scope, │                \r\n2025-01-10 13:34:34                            │   43 │   │   except Exception as  │                \r\n2025-01-10 13:34:34                            │   44 │   │   │   handler = None   │                \r\n2025-01-10 13:34:34                            │   45                              │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │ /usr/local/lib/python3.10/dist-pa │                \r\n2025-01-10 13:34:34                            │ ckages/starlette/routing.py:74 in │                \r\n2025-01-10 13:34:34                            │ app                               │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │    71 │   │                       │                \r\n2025-01-10 13:34:34                            │    72 │   │   async def app(scope │                \r\n2025-01-10 13:34:34                            │    73 │   │   │   response = awai │                \r\n2025-01-10 13:34:34                            │ ❱  74 │   │   │   await response( │                \r\n2025-01-10 13:34:34                            │    75 │   │                       │                \r\n2025-01-10 13:34:34                            │    76 │   │   await wrap_app_hand │                \r\n2025-01-10 13:34:34                            │    77                             │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │ /usr/local/lib/python3.10/dist-pa │                \r\n2025-01-10 13:34:34                            │ ckages/starlette/responses.py:252 │                \r\n2025-01-10 13:34:34                            │  in __call__                      │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │   249 │   │   await send({\"type\": │                \r\n2025-01-10 13:34:34                            │   250 │                           │                \r\n2025-01-10 13:34:34                            │   251 │   async def __call__(self │                \r\n2025-01-10 13:34:34                            │ ❱ 252 │   │   async with anyio.cr │                \r\n2025-01-10 13:34:34                            │   253 │   │   │                   │                \r\n2025-01-10 13:34:34                            │   254 │   │   │   async def wrap( │                \r\n2025-01-10 13:34:34                            │   255 │   │   │   │   await func( │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │ /usr/local/lib/python3.10/dist-pa │                \r\n2025-01-10 13:34:34                            │ ckages/anyio/_backends/_asyncio.p │                \r\n2025-01-10 13:34:34                            │ y:597 in __aexit__                │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │    594 │   │   │   │   else:      │                \r\n2025-01-10 13:34:34                            │    595 │   │   │   │   │   raise  │                \r\n2025-01-10 13:34:34                            │    596 │   │   │   elif exception │                \r\n2025-01-10 13:34:34                            │ ❱  597 │   │   │   │   raise exce │                \r\n2025-01-10 13:34:34                            │    598 │   │   except BaseExcepti │                \r\n2025-01-10 13:34:34                            │    599 │   │   │   # Clear the co │                \r\n2025-01-10 13:34:34                            │    600 │   │   │   # If the conte │                \r\n2025-01-10 13:34:34                            │        #145).                     │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │ /usr/local/lib/python3.10/dist-pa │                \r\n2025-01-10 13:34:34                            │ ckages/starlette/responses.py:255 │                \r\n2025-01-10 13:34:34                            │  in wrap                          │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │   252 │   │   async with anyio.cr │                \r\n2025-01-10 13:34:34                            │   253 │   │   │                   │                \r\n2025-01-10 13:34:34                            │   254 │   │   │   async def wrap( │                \r\n2025-01-10 13:34:34                            │ ❱ 255 │   │   │   │   await func( │                \r\n2025-01-10 13:34:34                            │   256 │   │   │   │   task_group. │                \r\n2025-01-10 13:34:34                            │   257 │   │   │                   │                \r\n2025-01-10 13:34:34                            │   258 │   │   │   task_group.star │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │ /usr/local/lib/python3.10/dist-pa │                \r\n2025-01-10 13:34:34                            │ ckages/starlette/responses.py:244 │                \r\n2025-01-10 13:34:34                            │  in stream_response               │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │   241 │   │   │   │   \"headers\":  │                \r\n2025-01-10 13:34:34                            │   242 │   │   │   }               │                \r\n2025-01-10 13:34:34                            │   243 │   │   )                   │                \r\n2025-01-10 13:34:34                            │ ❱ 244 │   │   async for chunk in  │                \r\n2025-01-10 13:34:34                            │   245 │   │   │   if not isinstan │                \r\n2025-01-10 13:34:34                            │   246 │   │   │   │   chunk = chu │                \r\n2025-01-10 13:34:34                            │   247 │   │   │   await send({\"ty │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │ /app/src/khoj/routers/api_chat.py │                \r\n2025-01-10 13:34:34                            │ :804 in event_generator           │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │    801 │   │   │   if Conversatio │                \r\n2025-01-10 13:34:34                            │    802 │   │   │   │   conversati │                \r\n2025-01-10 13:34:34                            │    803 │   │   │                  │                \r\n2025-01-10 13:34:34                            │ ❱  804 │   │   │   conversation_c │                \r\n2025-01-10 13:34:34                            │        conversation_commands])    │                \r\n2025-01-10 13:34:34                            │    805 │   │   │   async for resu │                \r\n2025-01-10 13:34:34                            │        {conversation_commands_str │                \r\n2025-01-10 13:34:34                            │    806 │   │   │   │   yield resu │                \r\n2025-01-10 13:34:34                            │    807                            │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │ /app/src/khoj/routers/api_chat.py │                \r\n2025-01-10 13:34:34                            │ :804 in <listcomp>                │                \r\n2025-01-10 13:34:34                            │                                   │                \r\n2025-01-10 13:34:34                            │    801 │   │   │   if Conversatio │                \r\n2025-01-10 13:34:34                            │    802 │   │   │   │   conversati │                \r\n2025-01-10 13:34:34                            │    803 │   │   │                  │                \r\n2025-01-10 13:34:34                            │ ❱  804 │   │   │   conversation_c │                \r\n2025-01-10 13:34:34                            │        conversation_commands])    │                \r\n2025-01-10 13:34:34                            │    805 │   │   │   async for resu │                \r\n2025-01-10 13:34:34                            │        {conversation_commands_str │                \r\n2025-01-10 13:34:34                            │    806 │   │   │   │   yield resu │                \r\n2025-01-10 13:34:34                            │    807                            │                \r\n2025-01-10 13:34:34                            ╰───────────────────────────────────╯                \r\n2025-01-10 13:34:34                            AttributeError: 'str' object has no                  \r\n2025-01-10 13:34:34                            attribute 'value'\r\n```\r\n\r\nThis happens with different files of different length, with different models (Mistral or Qwen2.5 coding); but not with every agent. Some agents using the same models might not have the error. Here is the agent that gives me the error almost every time :\r\n\r\n> You are an artificial intelligence who is made to help the user write code that is commented, clear and effective. You love coding, and you're very excited about it.\r\n> You will never read the users' notes or files to inform your answers unless the user specifically asks you to do so.\r\n> You also never run or test any of users' code or code that he ask you to generate without them specifically asking you to do so.\r\n\r\nI tried Mistral and Qwen with this agent, small and long text files, but the problem remains.\r\n\r\n## To Reproduce\r\n- Install Ollama with Mistral and Qwen2.5\r\n- Install Khoj with Docker as self-hosted\r\n- Create custom agent as described above\r\n- Attach a file and ask for a summary or a translation\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [x] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [x] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [x] Windows\r\n    - [ ] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]: 1.33.2\r\n",
      "state": "open",
      "author": "Klemet",
      "author_type": "User",
      "created_at": "2025-01-10T18:42:21Z",
      "updated_at": "2025-01-10T18:43:14Z",
      "closed_at": null,
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1071/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1071",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1071",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:45.769539",
      "comments": []
    },
    {
      "issue_number": 1066,
      "title": "[FIX]",
      "body": "## Describe the bug\nA clear and concise description of what the bug is. Please include what you were expecting to happen vs. what actually happened.\n\n## To Reproduce\nSteps to reproduce the behavior:\n\n## Screenshots\nIf applicable, add screenshots to help explain your problem.\n\n## Platform\n- Server:\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\n    - [ ] Self-Hosted Docker\n    - [ ] Self-Hosted Python package\n    - [ ] Self-Hosted source code\n- Client:\n    - [ ] Obsidian\n    - [ ] Emacs\n    - [ ] Desktop app\n    - [ ] Web browser\n    - [ ] WhatsApp\n- OS:\n    - [ ] Windows\n    - [ ] macOS\n    - [ ] Linux\n    - [ ] Android\n    - [ ] iOS\n\n### If self-hosted\n- Server Version [e.g. 1.0.1]:\n\n## Additional context\nAdd any other context about the problem here.\n",
      "state": "closed",
      "author": "wenliu3",
      "author_type": "User",
      "created_at": "2025-01-10T08:31:33Z",
      "updated_at": "2025-01-10T10:49:20Z",
      "closed_at": "2025-01-10T10:49:20Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1066/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1066",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1066",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:45.769546",
      "comments": []
    },
    {
      "issue_number": 1019,
      "title": "[FIX] v1.33.0 can not chat in stream mode ",
      "body": "## Describe the bug\r\nA clear and concise description of what the bug is. Please include what you were expecting to happen vs. what actually happened.\r\n/khoj/src/khoj/processor/conversation/openai/utils.py:103 in             │                \r\n                           │ completion_with_backoff                                                   │                \r\n                           │                                                                           │                \r\n                           │   100 │   # Calculate cost of chat                                        │                \r\n                           │   101 │   input_tokens = chunk.usage.prompt_tokens if hasattr(chunk, \"usa │                \r\n                           │       else 0                                                              │                \r\n                           │   102 │   output_tokens = chunk.usage.completion_tokens if hasattr(chunk, │                \r\n                           │       chunk.usage else 0                                                  │                \r\n                           │ ❱ 103 │   cost = chunk.usage.model_extra.get(\"estimated_cost\") or 0  # Es │                \r\n                           │       returned by DeepInfra API                                           │                \r\n                           │   104 │   tracer[\"usage\"] = get_chat_usage_metrics(model_name, input_toke │                \r\n                           │       tracer.get(\"usage\"), cost)                                          │                \r\n                           │   105 │                                                                   │                \r\n                           │   106 │   # Save conversation trace                                       │                \r\n                           ╰───────────────────────────────────────────────────────────────────────────╯                \r\n                           AttributeError: 'NoneType' object has no attribute 'model_extra'        \r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n\r\nAfter model setting ,just chat no return \r\n\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [ ] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [ ] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n",
      "state": "closed",
      "author": "thinker007",
      "author_type": "User",
      "created_at": "2024-12-29T23:57:48Z",
      "updated_at": "2025-01-09T17:18:26Z",
      "closed_at": "2025-01-09T17:18:25Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1019/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1019",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1019",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:45.769552",
      "comments": [
        {
          "author": "thinker007",
          "body": "AttributeError: 'NoneType' object has no attribute 'model_extra'  still exist ",
          "created_at": "2025-01-01T15:22:25Z"
        },
        {
          "author": "debanjum",
          "body": "Hey @thinker007, can you share more details?\r\n- Which chat model are you seeing this issue with?\r\n- Which client (e.g Emacs, Obsidian, Web) are you using to chat?\r\n- What does your Khoj setup look like (OS, Self-hosting Setup method)?\r\n- Was the same chat model streaming responses before v1.33.0 or ",
          "created_at": "2025-01-01T15:37:01Z"
        },
        {
          "author": "thinker007",
          "body": "[15:21:31.254144] ERROR    khoj.processor.conversation.openai.utils: Error in llm_thread: 'NoneType' object has no attribute 'model_extra'         utils.py:227\r\n                           ╭───────────────────────────────────────── Traceback (most recent call last) ───────────────────────────────────",
          "created_at": "2025-01-02T00:55:01Z"
        },
        {
          "author": "thinker007",
          "body": "It seems \"cost = chunk.usage.model_extra.get(\"estimated_cost\") or 0  # Estimated costs returned by DeepInfra API\"\r\n\r\nthis is the key, after comment it out  fix this error",
          "created_at": "2025-01-02T01:00:24Z"
        },
        {
          "author": "thinker007",
          "body": "> Hey @thinker007, can you share more details?\r\n> \r\n> * Which chat model are you seeing this issue with?\r\n> * Which client (e.g Emacs, Obsidian, Web) are you using to chat?\r\n> * What does your Khoj setup look like (OS, Self-hosting Setup method)?\r\n> * Was the same chat model streaming responses befo",
          "created_at": "2025-01-02T15:49:40Z"
        }
      ]
    },
    {
      "issue_number": 1046,
      "title": "[FIX] the text color of the countries name is white in the dark mode.",
      "body": "## Describe the bug\r\nIn the dark mode the countries name in the dropdown has same color as background (i.e. white), it is visible but not in first sight.\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n- set dark mode\r\n- go to settings\r\n- whatsapp connect dropdown for selecting country\r\n\r\n## Screenshots\r\n![image](https://github.com/user-attachments/assets/eb2709bc-56ff-44bf-a5cd-e8a4261b63de)\r\n\r\n## Platform\r\n- Server:\r\n    - [x] Cloud-Hosted (https://app.khoj.dev)\r\n    - [ ] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [x] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [x] Windows\r\n    - [ ] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n## Additional context\r\nI am not able to find the specific css file for the dropdown and i added the css in the `settings.module.css` and the bug is resolved.\r\n",
      "state": "closed",
      "author": "yaggit",
      "author_type": "User",
      "created_at": "2025-01-08T15:29:43Z",
      "updated_at": "2025-01-09T17:16:03Z",
      "closed_at": "2025-01-09T17:14:31Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1046/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1046",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1046",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:45.976259",
      "comments": [
        {
          "author": "SunnyWan59",
          "body": "This can probably be solved by changing the intl-tel-input to dark mode. I can work on this if possible.",
          "created_at": "2025-01-09T06:47:43Z"
        },
        {
          "author": "debanjum",
          "body": "Hey @yaggit thanks for reporting the issue! I've pushed a fix for it in https://github.com/khoj-ai/khoj/commit/dd63bd8bcf2ca522d6122eb04629fb17b2f3c9b9. The issue should be resolved on app.khoj.dev by the next release (in a few days).",
          "created_at": "2025-01-09T17:16:01Z"
        }
      ]
    },
    {
      "issue_number": 1061,
      "title": "[IDEA] HOw could one change the python code runner to alllow internet access. ",
      "body": "## Describe the feature you'd like\r\nreading the documentation shows that \r\nNO network nor internet access (this is a current design choice and could be changed in the future)\r\n\r\nI would want to be able to use requests and get online data ",
      "state": "closed",
      "author": "baditaflorin",
      "author_type": "User",
      "created_at": "2025-01-09T12:53:09Z",
      "updated_at": "2025-01-09T16:08:02Z",
      "closed_at": "2025-01-09T16:08:02Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1061/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1061",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1061",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:46.162101",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hey @baditaflorin , can you describe in more detail what you want? Khoj is allowed internet access. You just need to configure it to use the appropriate online search and web scraping tools like Jina, Serper.dev, Olostep, Firecrawl or Direct.\r\n\r\nIf you want to specifically make Khoj use the requests",
          "created_at": "2025-01-09T13:38:20Z"
        },
        {
          "author": "debanjum",
          "body": "Converting this into a discussion for now",
          "created_at": "2025-01-09T16:07:51Z"
        }
      ]
    },
    {
      "issue_number": 1059,
      "title": "[FIX] documentation should explain that github integration is not available in self hosted version",
      "body": "## Describe the bug\r\nA clear and concise description of what the bug is. Please include what you were expecting to happen vs. what actually happened.\r\n\r\n## To Reproduce\r\nI read this and i want to apply this to my self hosted version\r\nhttps://docs.khoj.dev/data-sources/github_integration\r\n\r\nSteps to reproduce the behavior:\r\n\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [X] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [X] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [X] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\n- Latest\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n",
      "state": "closed",
      "author": "baditaflorin",
      "author_type": "User",
      "created_at": "2025-01-09T11:48:34Z",
      "updated_at": "2025-01-09T13:43:48Z",
      "closed_at": "2025-01-09T13:43:48Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1059/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1059",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1059",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:46.350697",
      "comments": [
        {
          "author": "baditaflorin",
          "body": "I also added the github config on self-hosted in the hopes that this will enable the github integration but nothing happened\r\n<img width=\"848\" alt=\"image\" src=\"https://github.com/user-attachments/assets/9cea99c4-4f75-4581-9527-273067edc22d\" />\r\n",
          "created_at": "2025-01-09T12:19:08Z"
        }
      ]
    },
    {
      "issue_number": 1060,
      "title": "[FIX] Clients API Keys is not available on self-hosted",
      "body": "## Describe the bug\r\nA clear and concise description of what the bug is. Please include what you were expecting to happen vs. what actually happened.\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n\r\nenter settings, expected to see Api Keys -> Generate\r\n\r\n## Screenshots\r\n<img width=\"1522\" alt=\"image\" src=\"https://github.com/user-attachments/assets/18d4afa9-4ac9-4ca8-b74e-920564fae19f\" />\r\n\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [X] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [X] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [X] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n",
      "state": "closed",
      "author": "baditaflorin",
      "author_type": "User",
      "created_at": "2025-01-09T12:17:06Z",
      "updated_at": "2025-01-09T13:40:03Z",
      "closed_at": "2025-01-09T13:40:03Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1060/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1060",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1060",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:46.546460",
      "comments": [
        {
          "author": "debanjum",
          "body": "Khoj started in `--anonymous-mode` doesn't need or show the API keys setting. \n\nIn `--anonymous-mode` you can just point your clients to the API url and it'll connect without authentication\n\nTo enable authentication, you should update your Khoj `docker-compose.yml` to enable authentication. See  htt",
          "created_at": "2025-01-09T12:22:07Z"
        },
        {
          "author": "debanjum",
          "body": "Marking this as closed for now. Feel free to re-open if your issue is still not addressed",
          "created_at": "2025-01-09T13:40:03Z"
        }
      ]
    },
    {
      "issue_number": 777,
      "title": "The local ollama cannot be connected",
      "body": "![微信截图_20240529094631](https://github.com/khoj-ai/khoj/assets/50644675/f1d3333a-2c1f-40df-90a0-983ff18d4288)\r\n![微信截图_20240529094546](https://github.com/khoj-ai/khoj/assets/50644675/3bb6c980-cc21-4629-934f-9a48114322d2)\r\nThe configuration is correct. The ollama container network communication is normal\r\n",
      "state": "closed",
      "author": "mingLvft",
      "author_type": "User",
      "created_at": "2024-05-29T01:46:05Z",
      "updated_at": "2025-01-09T13:32:16Z",
      "closed_at": "2024-09-16T21:02:33Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 18,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/777/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/777",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/777",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:46.733476",
      "comments": [
        {
          "author": "mingLvft",
          "body": "![微信截图_20240529094752](https://github.com/khoj-ai/khoj/assets/50644675/4454ca2b-04bb-47fe-aa85-94e30181d412)\r\n /api/chat?q=1&n=5&client=web&stream=true&conversation_id=8&region=null&city=null&country=null&timezone=null",
          "created_at": "2024-05-29T01:46:36Z"
        },
        {
          "author": "maciekpoplawski",
          "body": "Hi! \r\nPlease try adding /v1 at the end of Base URL\r\nExample: `http://host.docker.internal:11434/v1`\r\nv1 means OpenAI API compatible mode \r\nHope this helps! ❤️ ",
          "created_at": "2024-05-29T17:35:42Z"
        },
        {
          "author": "mingLvft",
          "body": "Thank you for your answer, but it doesn't work. What is the problem? Other applications can connect to my ollama",
          "created_at": "2024-05-30T02:08:20Z"
        },
        {
          "author": "mingLvft",
          "body": "Unable to respond to any action when asked\r\n",
          "created_at": "2024-05-30T02:09:08Z"
        },
        {
          "author": "maciekpoplawski",
          "body": "I've only got one last idea. Maybe the space in API key is breaking something? Put it like \"anystring\"",
          "created_at": "2024-05-30T05:37:32Z"
        }
      ]
    },
    {
      "issue_number": 1058,
      "title": "[IDEA] Incremental search supported",
      "body": "## Describe the feature you'd like\r\nA clear and concise description of what you want to happen. Include any relevant links or screenshots or inspiration.\r\n",
      "state": "closed",
      "author": "kartik4949",
      "author_type": "User",
      "created_at": "2025-01-09T09:39:00Z",
      "updated_at": "2025-01-09T12:51:21Z",
      "closed_at": "2025-01-09T12:51:20Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1058/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1058",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1058",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:46.977021",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hi, I'm unsure what is issue is about. Closing it for now",
          "created_at": "2025-01-09T12:51:20Z"
        }
      ]
    },
    {
      "issue_number": 662,
      "title": "DJANGO = ALLOWED HOSTS",
      "body": "i'm sure this is just a stupid setting but i thought its better to ask the experts \r\n when i launch the container with docker-compose up and try to add a model via the localhost/server/admin link it throws an error that i'm not on the allowed hosts list and i have no idea where i should set this up\r\n\r\n\r\n\r\n",
      "state": "closed",
      "author": "VinnyG9",
      "author_type": "User",
      "created_at": "2024-02-27T23:23:02Z",
      "updated_at": "2025-01-09T07:20:39Z",
      "closed_at": "2024-04-16T21:44:18Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 18,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/662/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "debanjum"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/662",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/662",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:47.163224",
      "comments": [
        {
          "author": "VinnyG9",
          "body": "also i keep getting this: \r\ndatabase-1  | 2024-02-27 23:25:14.701 UTC [51] FATAL:  role \"postgres\" does not exist\r\n",
          "created_at": "2024-02-27T23:25:40Z"
        },
        {
          "author": "sabaimran",
          "body": "@Fuckingnameless , what's the url you're using to host? You shouldn't get the localhost error if you're just accessing it over the default `http://localhost:42110/`, but you may run into issues if you're using your own custom domain. Let me know if you're still having trouble over localhost.\r\n\r\nFor ",
          "created_at": "2024-02-28T01:54:14Z"
        },
        {
          "author": "VinnyG9",
          "body": "> @Fuckingnameless , what's the url you're using to host? You shouldn't get the localhost error if you're just accessing it over the default `http://localhost:42110/`, but you may run into issues if you're using your own custom domain. Let me know if you're still having trouble over localhost.\r\n> \r\n",
          "created_at": "2024-02-28T15:27:26Z"
        },
        {
          "author": "sabaimran",
          "body": "Ahh, yeah you wouldn't be able to access it over the the internal IP as it stands. The current hosting settings _only_ allow it to be accessible over the same machine, unless a custom domain and cert are setup. Is it possible for you to connect directly to the server? You might try using [tailscale]",
          "created_at": "2024-02-28T16:37:12Z"
        },
        {
          "author": "VinnyG9",
          "body": "the server is headless \r\nyou say it can't be accessed over the same network but i did, just the model selection / admin panel is blocked ",
          "created_at": "2024-03-01T05:04:18Z"
        }
      ]
    },
    {
      "issue_number": 895,
      "title": "[IDEA] Any plan to add i18n support?",
      "body": "## Describe the feature you'd like\r\nA clear and concise description of what you want to happen. Include any relevant links or screenshots or inspiration.\r\n\r\nThis is a fantastic project, and it's not supposed not English only。\r\nSo any plan to add i18n ？\r\nfor example using\r\nhttps://github.com/i18next/next-i18next\r\nadd i18n \r\n",
      "state": "open",
      "author": "thinker007",
      "author_type": "User",
      "created_at": "2024-08-25T01:17:26Z",
      "updated_at": "2025-01-07T08:36:04Z",
      "closed_at": null,
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/895/reactions",
        "total_count": 3,
        "+1": 3,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/895",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/895",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:47.415884",
      "comments": [
        {
          "author": "sabaimran",
          "body": "This is pretty neat! I hadn't come across this before. I'll take a look at integration this (or another localization framework) in a few weeks. Let me know what language you need?",
          "created_at": "2024-09-17T17:41:03Z"
        },
        {
          "author": "thinker007",
          "body": "> This is pretty neat! I hadn't come across this before. I'll take a look at integration this (or another localization framework) in a few weeks. Let me know what language you need?\r\n\r\nChinese Japanese  Germanese France",
          "created_at": "2024-09-22T04:12:08Z"
        },
        {
          "author": "thinker007",
          "body": "https://autoi18n.dev/  any plan to integrate this project \r\nInternationalization tools for developers\r\nIntegrate i18n for your projects with one click and support continuous updates, translations, and more",
          "created_at": "2024-09-23T06:21:00Z"
        },
        {
          "author": "thinker007",
          "body": "> This is pretty neat! I hadn't come across this before. I'll take a look at integration this (or another localization framework) in a few weeks. Let me know what language you need?\r\n\r\na few weeks has passed, do we have any progress?\r\n\r\n@sabaimran ",
          "created_at": "2024-10-21T04:23:06Z"
        },
        {
          "author": "thinker007",
          "body": "> https://github.com/i18next/next-i18next\r\n\r\nnow we have https://github.com/midday-ai/languine a AI powered translate i18n tool\r\n\r\nso can you write some docs to tell us how to i18n this project？",
          "created_at": "2024-12-24T16:21:39Z"
        }
      ]
    },
    {
      "issue_number": 1031,
      "title": "[IDEA] Independent desktop client",
      "body": "‌Thank you very much for developing such a great productivity tool. I have installed ollama on my current Windows computer and downloaded the local models for chatting as well as embedding models. I hope that khoj will have an independent desktop client so that I can run khoj independently on my computer.",
      "state": "open",
      "author": "chllei",
      "author_type": "User",
      "created_at": "2025-01-06T06:00:36Z",
      "updated_at": "2025-01-06T06:01:58Z",
      "closed_at": null,
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1031/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1031",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1031",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:47.704984",
      "comments": [
        {
          "author": "chllei",
          "body": "‌‌The current desktop client still requires a server to run. Is it possible to develop a fully functional desktop client?",
          "created_at": "2025-01-06T06:01:57Z"
        }
      ]
    },
    {
      "issue_number": 1027,
      "title": "Typo in your security advisory",
      "body": "Hi all,\r\n\r\nWhile doing some advisory review, I noticed in your recent advisory\r\nhttps://github.com/khoj-ai/khoj/security/advisories/GHSA-hq4h-w933-jm6c\r\n\r\nYou have affected versions listed as `<1.29.10` and the patched version as `1.29.0`\r\n\r\nIt looks like the patch in question went into 1.29.0, an extra 1 snuck into the affected versions list",
      "state": "closed",
      "author": "joshbressers",
      "author_type": "User",
      "created_at": "2025-01-02T14:32:17Z",
      "updated_at": "2025-01-02T14:48:30Z",
      "closed_at": "2025-01-02T14:48:30Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1027/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 1,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1027",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1027",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:47.961514",
      "comments": [
        {
          "author": "debanjum",
          "body": "Oh, thanks a ton for finding that! I've updated the advisory to show affected versions as **<1.29.0** (and not <1.29.10) now",
          "created_at": "2025-01-02T14:48:04Z"
        }
      ]
    },
    {
      "issue_number": 1006,
      "title": "[IDEA] Can you explain what are khoj advantages over just using Claude MCP with its integration capabilities?",
      "body": "hi.\r\n\r\nI mean no offence I just want to know what is the added value of using Khoj.\r\nThanks!",
      "state": "closed",
      "author": "shlomitsur",
      "author_type": "User",
      "created_at": "2024-12-12T10:26:13Z",
      "updated_at": "2024-12-30T20:35:54Z",
      "closed_at": "2024-12-30T20:35:54Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1006/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1006",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1006",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:48.134914",
      "comments": [
        {
          "author": "vlazic",
          "body": "Good question!\r\n\r\nAs someone who has recently started experimenting locally with Khoj and MCP, I was just about to ask the development team if they are planning to integrate MCP. In the long term, it seems more worthwhile to rely on MCP rather than develop and support one's own solutions.\r\n\r\nI think",
          "created_at": "2024-12-13T09:19:55Z"
        },
        {
          "author": "debanjum",
          "body": "Good question indeed! How are you using MCP @shlomitsur, @vlazic? I haven't used it yet myself but it sounds super interesting.\r\n\r\nGiven MCP is an open protocol for interacting with content, support for it can be added to Khoj. At which point the advantages of Khoj remain the same; use with any AI m",
          "created_at": "2024-12-13T20:13:39Z"
        },
        {
          "author": "vlazic",
          "body": "> Good question indeed! How are you using MCP @shlomitsur, @vlazic? I haven't used it yet myself but it sounds super interesting.\r\n\r\nFew days ago [Cline](https://github.com/cline/cline) added MCP integration so I use it through that. Unfortunately, I'm not yet using it via Claude Desktop (Linux is n",
          "created_at": "2024-12-15T15:28:42Z"
        },
        {
          "author": "debanjum",
          "body": "I'll convert this issue into a discussion (as don't want to edit original title, question). But create a corresponding issue to evaluate Claude MCP integration with Khoj",
          "created_at": "2024-12-30T20:35:42Z"
        }
      ]
    },
    {
      "issue_number": 990,
      "title": "[FIX] Cannot use online search using Olostep + generate chart like example",
      "body": "## Describe the bug\r\nI've setup the API, and try to ask it some information from online source with default agent, but it cannot. The API works normally.\r\n\r\n## To Reproduce\r\nPrompt 1: Search for latest web framework news today.\r\nPrompt 2: create a chart comparing the number of people in each continent. use a bar chart.\r\n\r\n## Screenshots\r\n![image](https://github.com/user-attachments/assets/d1b73b92-a66f-4fc0-9057-1a9506e4ea3a)\r\n![image](https://github.com/user-attachments/assets/dc58f0a4-a8e8-42ca-b033-e5d907875ba7)\r\n\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [x] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [x] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [x] Windows\r\n    - [ ] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version: 1.30.7\r\n\r\n## Additional context\r\nNo.\r\n",
      "state": "closed",
      "author": "alaireselene",
      "author_type": "User",
      "created_at": "2024-11-27T02:26:36Z",
      "updated_at": "2024-12-17T02:59:11Z",
      "closed_at": "2024-12-17T02:59:10Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/990/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/990",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/990",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:48.351138",
      "comments": [
        {
          "author": "sabaimran",
          "body": "1. You'll also have to setup [Jina](https://jina.ai/) or [Serper](https://serper.dev/) for running the Google searches. Jina also has the benefit that you can use it for both web searching and scraping, though the speeds are a bit slow. Nevertheless, mostly good enough. \r\n2. Which model are you usin",
          "created_at": "2024-12-08T23:09:18Z"
        },
        {
          "author": "alaireselene",
          "body": "I just use OpenAPI 4o-mini. So I need to fill in all 3 searching APIs?\r\nBtw, AnythingLLM have an option to use Google Search API directly, you can consider about it.",
          "created_at": "2024-12-10T15:09:36Z"
        },
        {
          "author": "sabaimran",
          "body": "You don't have to use all three. I recommend using just https://serper.dev\n\nOlostep and Jina are not required. \n\nWill look into direct Google search!",
          "created_at": "2024-12-10T16:56:48Z"
        },
        {
          "author": "alaireselene",
          "body": "Yeah, I'll try that and see if it works.\r\nHere is [Google Custom Search API](https://developers.google.com/custom-search/v1/overview?hl=en), with 100 queries/user per day. Or [Bing Search API](https://www.microsoft.com/en-us/bing/apis/pricing), 3 queries/s, 1k queries/month. It is good enough to fin",
          "created_at": "2024-12-10T18:26:51Z"
        }
      ]
    },
    {
      "issue_number": 749,
      "title": "[IDEA] Incorporate Google Search API",
      "body": "## Describe the feature you'd like\r\nA clear and concise description of what you want to happen. Include any relevant links or screenshots or inspiration.\r\n\r\nThe project currently supports https://serper.dev/. It would be awesome for users with access to Google Cloud to be able to use the Google Search API by entering the key and search engine ID as a configuration, allowing internet searches through that mechanism.\r\n\r\n",
      "state": "closed",
      "author": "JC1738",
      "author_type": "User",
      "created_at": "2024-05-25T01:45:28Z",
      "updated_at": "2024-12-17T02:59:10Z",
      "closed_at": "2024-12-17T02:59:10Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/749/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/749",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/749",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:48.565285",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Hey @JC1738 ! Thanks for the suggestion. [Is this the API you're referring to](https://console.cloud.google.com/apis/library/customsearch.googleapis.com?project=khoj-396920)?\r\n\r\nI hear you in wanting to use standardized services you already have access to, but I don't think we'd be able to maintain ",
          "created_at": "2024-06-01T16:33:37Z"
        },
        {
          "author": "mdlmarkham",
          "body": "What about Searxng for local installs: https://github.com/searxng/searxng",
          "created_at": "2024-09-12T19:59:23Z"
        }
      ]
    },
    {
      "issue_number": 1004,
      "title": "[FIX] Use Resend custom domain to send automations and welcome email",
      "body": "Currently, the custom Resend domain is only used for sending the email sign in link. Update so that it's used for the other email functionalities as well. \r\n\r\nSee `send_task_email` and `send_welcome_email` for reference.",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2024-12-11T16:58:01Z",
      "updated_at": "2024-12-16T20:55:01Z",
      "closed_at": "2024-12-16T20:55:01Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1004/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1004",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1004",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:48.748105",
      "comments": []
    },
    {
      "issue_number": 986,
      "title": "[FIX]cannot log in to  django adminstration ",
      "body": "## Describe the bug\r\nThe latest Mac os with docker and docker-compose.yaml setup done. Run well but not login to the django admin. Try some usernames with the password set in yaml file.\r\n<img width=\"646\" alt=\"image\" src=\"https://github.com/user-attachments/assets/4c2ad910-b246-4cb0-b162-f808bf025235\">\r\n\r\n\r\n## To Reproduce\r\n\r\n\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [ ] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [ ] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n",
      "state": "closed",
      "author": "bookandlover",
      "author_type": "User",
      "created_at": "2024-11-23T22:31:37Z",
      "updated_at": "2024-12-15T20:25:30Z",
      "closed_at": "2024-12-02T02:14:00Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/986/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/986",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/986",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:48.748125",
      "comments": [
        {
          "author": "debanjum",
          "body": "Interesting. Just to double confirm \r\n1. You're the values of `KHOJ_ADMIN_EMAIL` and `KHOJ_ADMIN_PASSWORD` environment variables set in your `docker-compose.yml` to try login to the Khoj Admin Panel Django but it's still not letting you login?\r\n2. Did you change their values after running `docker-co",
          "created_at": "2024-11-26T10:18:28Z"
        },
        {
          "author": "bookandlover",
          "body": "Solved and thanks. Delete the old image and reinstall. Working now. Seems I edited the username and password after running khoj. The  project is the best one I have ever seen. ",
          "created_at": "2024-11-26T14:28:57Z"
        },
        {
          "author": "dariusbdockery",
          "body": "I am unfortunately having the same problem. \r\n\r\n# Steps Taken\r\n1. I installed using docker-compose and followed the steps in the documentation. \r\n2. I came to this ticket and then went back and deleted the containers and images and reinstalled with my credentials filled in from the start. I still co",
          "created_at": "2024-12-05T21:23:52Z"
        },
        {
          "author": "sabaimran",
          "body": "@dariusbdockery , what happens when you try to go to the `http://localhost:42110/server/admin` page? Are you also getting a login error, or something else?",
          "created_at": "2024-12-06T15:32:15Z"
        },
        {
          "author": "dariusbdockery",
          "body": "@sabaimran, Yes I get the same login error as `bookandlover` above--even with default variables in the docker-compose file:\r\n\r\n![image](https://github.com/user-attachments/assets/b02e8fc0-3b2a-4ffb-9b1b-60688b9a929f)\r\n",
          "created_at": "2024-12-10T14:15:01Z"
        }
      ]
    },
    {
      "issue_number": 1001,
      "title": "[FIX] Compose fails: free variable referenced before assignment",
      "body": "## Describe the bug\r\n\r\nTrying to start khoj on a linux server. Made minimal changes to the docker-compose.yml (including notably changing the external port for pgvector to avoid the host machine's postgres instance). Setup proceeds until during initialization.py something goes wrong setting up the admin user. The full logs are attached.\r\n[logs.txt](https://github.com/user-attachments/files/18084763/logs.txt)\r\n\r\n\r\n## To Reproduce\r\n\r\nHere's my docker-compose.yml:\r\n\r\n```\r\nservices:\r\n  database:\r\n    image: ankane/pgvector\r\n    ports:\r\n      - \"5433:5432\"\r\n    environment:\r\n      POSTGRES_USER: postgres\r\n      POSTGRES_PASSWORD: postgres\r\n      POSTGRES_DB: postgres\r\n    volumes:\r\n      - khoj_db:/var/lib/postgresql/data/\r\n    healthcheck:\r\n      test: [\"CMD-SHELL\", \"pg_isready -U postgres\"]\r\n      interval: 30s\r\n      timeout: 10s\r\n      retries: 5\r\n  sandbox:\r\n    image: ghcr.io/khoj-ai/terrarium:latest\r\n    ports:\r\n      - \"8080:8080\"\r\n  server:\r\n    depends_on:\r\n      database:\r\n        condition: service_healthy\r\n    # Use the following line to use the latest version of khoj. Otherwise, it will build from source. Set this to ghcr.io/khoj-ai/khoj-cloud if you want to use the prod image.\r\n    image: ghcr.io/khoj-ai/khoj:latest\r\n    # Uncomment the following line to build from source. This will take a few minutes. Comment the next two lines out if you want to use the offiicial image.\r\n    # build:\r\n      # context: .\r\n    ports:\r\n      # If changing the local port (left hand side), no other changes required.\r\n      # If changing the remote port (right hand side),\r\n      #   change the port in the args in the build section,\r\n      #   as well as the port in the command section to match\r\n      - \"42110:42110\"\r\n    working_dir: /app\r\n    volumes:\r\n      - khoj_config:/root/.khoj/\r\n      - khoj_models:/root/.cache/torch/sentence_transformers\r\n      - khoj_models:/root/.cache/huggingface\r\n    # Use 0.0.0.0 to explicitly set the host ip for the service on the container. https://pythonspeed.com/articles/docker-connection-refused/\r\n    environment:\r\n      - POSTGRES_DB=postgres\r\n      - POSTGRES_USER=postgres\r\n      - POSTGRES_PASSWORD=postgres\r\n      - POSTGRES_HOST=database\r\n      - POSTGRES_PORT=5432\r\n      - KHOJ_DJANGO_SECRET_KEY=secret\r\n      - KHOJ_DEBUG=True\r\n      - KHOJ_ADMIN_EMAIL=username@example.com\r\n      - KHOJ_ADMIN_PASSWORD=password\r\n      # Uncomment line below to use with Ollama running on your local machine at localhost:11434.\r\n      # Change URL to use with other OpenAI API compatible providers like VLLM, LMStudio etc.\r\n      - OPENAI_API_BASE=http://host.docker.internal:11434/v1/\r\n      #\r\n      # Uncomment appropriate lines below to use chat models by OpenAI, Anthropic, Google.\r\n      # Ensure you set your provider specific API keys.\r\n      # ---\r\n      # - OPENAI_API_KEY=your_openai_api_key\r\n      # - GEMINI_API_KEY=your_gemini_api_key\r\n      # - ANTHROPIC_API_KEY=your_anthropic_api_key\r\n      #\r\n      # Uncomment appropriate lines below to enable web results with Khoj\r\n      # Ensure you set your provider specific API keys.\r\n      # ---\r\n      # Free, Slower API. Does both web search and webpage read. Get API key from https://jina.ai/\r\n      # - JINA_API_KEY=you_jina_api_key\r\n      # Paid, Fast API. Only does web search. Get API key from https://serper.dev/\r\n      # - SERPER_DEV_API_KEY=your_serper_dev_api_key\r\n      # Paid, Fast, Open API. Only does webpage read. Get API key from https://firecrawl.dev/\r\n      # - FIRECRAWL_API_KEY=your_firecrawl_api_key\r\n      # Paid, Fast, Higher Read Success API. Only does webpage read. Get API key from https://olostep.com/\r\n      # - OLOSTEP_API_KEY=your_olostep_api_key\r\n      #\r\n      # Uncomment the necessary lines below to make your instance publicly accessible.\r\n      # Replace the KHOJ_DOMAIN with either your domain or IP address (no http/https prefix).\r\n      # Proceed with caution, especially if you are using anonymous mode.\r\n      # ---\r\n      - KHOJ_NO_HTTPS=True\r\n      - KHOJ_DOMAIN=my_domain # removed for this bug report\r\n      # - KHOJ_DOMAIN=khoj.example.com\r\n      # Uncomment the line below to disable telemetry.\r\n      # Telemetry helps us prioritize feature development and understand how people are using Khoj\r\n      # Read more at https://docs.khoj.dev/miscellaneous/telemetry\r\n      - KHOJ_TELEMETRY_DISABLE=True\r\n    # Comment out this line when you're using the official ghcr.io/khoj-ai/khoj-cloud prod image.\r\n    command: --host=\"0.0.0.0\" --port=42110 -vv --anonymous-mode --non-interactive\r\n\r\n\r\nvolumes:\r\n  khoj_config:\r\n  khoj_db:\r\n  khoj_models:\r\n```\r\n\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [ x] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [x ] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [ x] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]: 1.30.10\r\n\r\n## Additional context\r\n",
      "state": "closed",
      "author": "ljrobins",
      "author_type": "User",
      "created_at": "2024-12-10T19:19:46Z",
      "updated_at": "2024-12-11T17:51:10Z",
      "closed_at": "2024-12-11T03:54:21Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/1001/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 1
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/1001",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/1001",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:48.968006",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hey, thanks for the detailed logs. Found and fixed the undefined variable exception while handling the exception to create OpenAI models. Not sure why the OpenAI model creation failed initially for you though. But at least now the rest of the initialization sequence shouldn't fail anymore.\r\n\r\nCan yo",
          "created_at": "2024-12-11T03:58:13Z"
        },
        {
          "author": "ljrobins",
          "body": "Great! Tried the pre tagged images:\r\n\r\n```\r\n[+] Running 0/1\r\n ⠦ server Pulling                                                                                                                                                          0.7s \r\nno matching manifest for linux/amd64 in the manifest list ent",
          "created_at": "2024-12-11T04:05:00Z"
        },
        {
          "author": "debanjum",
          "body": "Ok, I needed to fix our docker build but you should be able to pull the docker amd64 build using the `pre` tag now. If that multi-platform build doesn't work, you an also try pull the `pre-amd64` tagged docker image to get unblocked.\r\n\r\nAnd yeah, let me know if the Ollama connection is still failing",
          "created_at": "2024-12-11T08:45:17Z"
        },
        {
          "author": "ljrobins",
          "body": "Thanks for fixing the image -- the pull and initialization went fine. [logs2.txt](https://github.com/user-attachments/files/18100021/logs2.txt) are attached, along with  \r\n[docker-compose.txt](https://github.com/user-attachments/files/18100057/docker-compose.txt).\r\n\r\n. Two remaining issues:\r\n\r\n- Sti",
          "created_at": "2024-12-11T17:48:37Z"
        }
      ]
    },
    {
      "issue_number": 988,
      "title": "[IDEA] Outline integration (getoutline.com)",
      "body": "## Overview\r\nI wanted to share an idea for integrating [Outline](https://www.getoutline.com/) as a knowledge base data source for Khoj. \r\nOutline’s focus on team collaboration and structured knowledge organization makes it a natural fit for Khoj’s mission to unify and enhance personal and team knowledge workflows.\r\n\r\n## Why Outline?\r\n- Popularity: Outline is widely adopted, with [28k+ GitHub stars](https://github.com/outline/outline) and a strong community.\r\n- Feature-rich: Real-time collaborative editing, Markdown support, and self-hosted/cloud-hosted options make it highly versatile.\r\n- API ready: Its RPC-style API, combined with a [comprehensive OpenAPI specification](https://www.getoutline.com/developers), enables robust programmatic interaction with its data.\r\n\r\n## Value Proposition\r\nIf Khoj were to integrate with Outline, it could:\r\n- Offer unified access and search capabilities across another widely used knowledge platform.\r\n- Attract new users from Outline’s substantial community.\r\n- Further extend Khoj’s role as a central hub for managing and retrieving knowledge.\r\n\r\n---\r\n\r\n<img width=\"1438\" alt=\"screenshot\" src=\"https://github.com/user-attachments/assets/f100ecb4-130f-4ea1-b594-e7f8e74fa3f5\">\r\n",
      "state": "open",
      "author": "fullstackdesign-xyz",
      "author_type": "User",
      "created_at": "2024-11-26T13:32:09Z",
      "updated_at": "2024-12-08T23:11:39Z",
      "closed_at": null,
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/988/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 1,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/988",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/988",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:49.167830",
      "comments": [
        {
          "author": "sabaimran",
          "body": "This is a really cool idea! I've been ideating over concepts for better documentation creation / management and this might be fun to experiment with in that regard. Thanks for the reference.",
          "created_at": "2024-12-08T23:11:37Z"
        }
      ]
    },
    {
      "issue_number": 995,
      "title": "[FIX] Server exits immediately when using khoj-cloud image",
      "body": "## Describe the bug\r\nIn order to use Resend, I modified my Docker compose file to use the cloud version (#905 & #961), but after starting the web application, it immediately stops and I get exit code 0.\r\nFirst I tried with previous Docker volumes, then I deleted them and tried to rebuild, but without success.\r\n\r\n## To Reproduce\r\n\r\n```yaml\r\nservices:\r\n  database:\r\n    container_name: khoj_database\r\n    image: ankane/pgvector\r\n    ports:\r\n      - \"5432:54329\"\r\n    environment:\r\n      POSTGRES_USER: postgres\r\n      POSTGRES_PASSWORD: REDACTED\r\n      POSTGRES_DB: postgres\r\n    volumes:\r\n      - ./data/postgres:/var/lib/postgresql/data/\r\n    healthcheck:\r\n      test: [\"CMD-SHELL\", \"pg_isready -U postgres\"]\r\n      interval: 30s\r\n      timeout: 10s\r\n      retries: 5\r\n  sandbox:\r\n    container_name: khoj_sandbox\r\n    image: ghcr.io/khoj-ai/terrarium:latest\r\n    ports:\r\n      - \"8080:18080\"\r\n  server:\r\n    container_name: khoj_server\r\n    depends_on:\r\n      database:\r\n        condition: service_healthy\r\n    # Use the following line to use the latest version of khoj. Otherwise, it will build from source.\r\n    # image: ghcr.io/khoj-ai/khoj:latest\r\n    image: ghcr.io/khoj-ai/khoj-cloud:latest\r\n    # Uncomment the following line to build from source. This will take a few minutes. Comment the next two lines out if you want to use the offiicial image.\r\n    # build:\r\n      # context: .\r\n    ports:\r\n      # If changing the local port (left hand side), no other changes required.\r\n      # If changing the remote port (right hand side),\r\n      #   change the port in the args in the build section,\r\n      #   as well as the port in the command section to match\r\n      - \"42110:42110\"\r\n    working_dir: /app\r\n    volumes:\r\n      - ./data/khoj_config:/root/.khoj/\r\n      - ./data/models/torch:/root/.cache/torch/sentence_transformers\r\n      - ./data/models/huggingface:/root/.cache/huggingface\r\n    # Use 0.0.0.0 to explicitly set the host ip for the service on the container. https://pythonspeed.com/articles/docker-connection-refused/\r\n    environment:\r\n      - POSTGRES_DB=postgres\r\n      - POSTGRES_USER=postgres\r\n      - POSTGRES_PASSWORD=REDACTED\r\n      - POSTGRES_HOST=database\r\n      - POSTGRES_PORT=5432\r\n      - KHOJ_DJANGO_SECRET_KEY=REDACTED\r\n      - KHOJ_DEBUG=False\r\n      - KHOJ_ADMIN_EMAIL=REDACTED\r\n      - KHOJ_ADMIN_PASSWORD=REDACTED\r\n      # Uncomment line below to use with Ollama running on your local machine at localhost:11434.\r\n      # Change URL to use with other OpenAI API compatible providers like VLLM, LMStudio etc.\r\n      # - OPENAI_API_BASE=http://host.docker.internal:11434/v1/\r\n      #\r\n      # Uncomment appropriate lines below to use chat models by OpenAI, Anthropic, Google.\r\n      # Ensure you set your provider specific API keys.\r\n      # ---\r\n      - OPENAI_API_KEY=REDACTED\r\n      # - GEMINI_API_KEY=your_gemini_api_key\r\n      - ANTHROPIC_API_KEY=REDACTED\r\n      #\r\n      # Uncomment appropriate lines below to enable web results with Khoj\r\n      # Ensure you set your provider specific API keys.\r\n      # ---\r\n      # Free, Slower API. Does both web search and webpage read. Get API key from https://jina.ai/\r\n      - JINA_API_KEY=REDACTED\r\n      # Paid, Fast API. Only does web search. Get API key from https://serper.dev/\r\n      - SERPER_DEV_API_KEY=REDACTED\r\n      # Paid, Fast, Open API. Only does webpage read. Get API key from https://firecrawl.dev/\r\n      - FIRECRAWL_API_KEY=REDACTED\r\n      # Paid, Fast, Higher Read Success API. Only does webpage read. Get API key from https://olostep.com/\r\n      # - OLOSTEP_API_KEY=your_olostep_api_key\r\n      #\r\n      # Uncomment the necessary lines below to make your instance publicly accessible.\r\n      # Replace the KHOJ_DOMAIN with either your domain or IP address (no http/https prefix).\r\n      # Proceed with caution, especially if you are using anonymous mode.\r\n      # ---\r\n      # - KHOJ_NO_HTTPS=True\r\n      # - KHOJ_DOMAIN=192.168.0.104\r\n      # - KHOJ_DOMAIN=khoj.example.com\r\n      # Uncomment the line below to disable telemetry.\r\n      # Telemetry helps us prioritize feature development and understand how people are using Khoj\r\n      # Read more at https://docs.khoj.dev/miscellaneous/telemetry\r\n      # - KHOJ_TELEMETRY_DISABLE=True\r\n\r\n      # text to speech settings\r\n      - ELEVEN_LABS_API_KEY=REDACTED\r\n\r\n      # Email settings\r\n      - RESEND_API_KEY=REDACTED\r\n    command: --host=\"0.0.0.0\" --port=42110 -vv --non-interactive\r\n```\r\n\r\n\r\n## Screenshots\r\n\r\n![image](https://github.com/user-attachments/assets/1c173610-3946-4489-abf4-c738826d38a8)\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [x] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [ ] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [x] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version: latest prod docker image\r\n",
      "state": "closed",
      "author": "vlazic",
      "author_type": "User",
      "created_at": "2024-12-03T04:20:20Z",
      "updated_at": "2024-12-07T00:16:06Z",
      "closed_at": "2024-12-07T00:16:06Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/995/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/995",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/995",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:49.352118",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Thanks for creating the issue, @vlazic . I've actually encountered this on my Mac as well recently, and need to investigate further. \n\nYou specifically wanted to use the prod image in order to use Resend for email sign in? Or something else? I'm wondering whether we should just package resend in the",
          "created_at": "2024-12-03T18:20:04Z"
        },
        {
          "author": "vlazic",
          "body": " Yes, I only needed the Resend dependency. Packaging it in the local image would be a good solution. \n\nIf there are any other dependencies that could cause similar issues for self-hosting users, it might be worth including those as well.",
          "created_at": "2024-12-03T18:50:33Z"
        },
        {
          "author": "sabaimran",
          "body": "Okay, good to know. Let me do some deeper digging. \r\n\r\nFor the most part, we've tried to keep the delineation of cloud/local dependencies to be based on whether it's assuming a multi-user setup or not. Moving the `resend` package would break that assumption slightly, so let me do some more investiga",
          "created_at": "2024-12-06T00:52:31Z"
        },
        {
          "author": "sabaimran",
          "body": "Ah, I uncovered the issue. In the `docker-compose.yml` that you're using for starting the containers, remove the `command` field.  Like this:\r\n\r\n```\r\n#     command: --host=\"0.0.0.0\" --port=42110 -vv --anonymous-mode --non-interactive\r\n```\r\n\r\nThis got it working for me. Let me know if that ends up fi",
          "created_at": "2024-12-06T02:14:01Z"
        },
        {
          "author": "vlazic",
          "body": "> Okay, good to know. Let me do some deeper digging.\r\n> \r\n> For the most part, we've tried to keep the delineation of cloud/local dependencies to be based on whether it's assuming a multi-user setup or not. Moving the `resend` package would break that assumption slightly, so let me do some more inve",
          "created_at": "2024-12-07T00:16:06Z"
        }
      ]
    },
    {
      "issue_number": 848,
      "title": "[FIX] LibGL Import Error on docker-compose up",
      "body": "## Describe the bug\r\nTried to follow the steps mentioned in [1A. Install Method 1: Docker](https://docs.khoj.dev/get-started/setup#1a-install-method-1-docker). Copied the [`docker-compose.yml` file from GitHub](https://github.com/khoj-ai/khoj/blob/02658ad4fd0cf3fe16b17f3402a34a117816c3f9/docker-compose.yml) & updated the `KHOJ_ADMIN_EMAIL` & `KHOJ_ADMIN_PASSWORD`, as mentioned & proceeded to perform `docker-compose up`.\r\n\r\nOn performing `docker-compose up`, the database container (`khoj-database-1`) starts & keeps running, however the server container (`khoj-server-1`) tries to starts & exits with the following error: `ImportError: libGL.so.1: cannot open shared object file: No such file or directory`\r\n\r\nHere is the stack trace:\r\n```console\r\nserver-1    | Traceback (most recent call last):\r\nserver-1    |   File \"/app/src/khoj/main.py\", line 93, in <module>\r\nserver-1    |     from khoj.configure import configure_routes, initialize_server, configure_middleware\r\nserver-1    |   File \"/app/src/khoj/configure.py\", line 40, in <module>\r\nserver-1    |     from khoj.routers.indexer import configure_content, configure_search\r\nserver-1    |   File \"/app/src/khoj/routers/indexer.py\", line 12, in <module>\r\nserver-1    |     from khoj.processor.content.images.image_to_entries import ImageToEntries\r\nserver-1    |   File \"/app/src/khoj/processor/content/images/image_to_entries.py\", line 7, in <module>\r\nserver-1    |     from rapidocr_onnxruntime import RapidOCR\r\nserver-1    |   File \"/usr/local/lib/python3.10/dist-packages/rapidocr_onnxruntime/__init__.py\", line 4, in <module>\r\nserver-1    |     from .main import RapidOCR\r\nserver-1    |   File \"/usr/local/lib/python3.10/dist-packages/rapidocr_onnxruntime/main.py\", line 8, in <module>\r\nserver-1    |     import cv2\r\nserver-1    |   File \"/usr/local/lib/python3.10/dist-packages/cv2/__init__.py\", line 181, in <module>\r\nserver-1    |     bootstrap()\r\nserver-1    |   File \"/usr/local/lib/python3.10/dist-packages/cv2/__init__.py\", line 153, in bootstrap\r\nserver-1    |     native_module = importlib.import_module(\"cv2\")\r\nserver-1    |   File \"/usr/lib/python3.10/importlib/__init__.py\", line 126, in import_module\r\nserver-1    |     return _bootstrap._gcd_import(name[level:], package, level)\r\nserver-1    | ImportError: libGL.so.1: cannot open shared object file: No such file or directory\r\nserver-1 exited with code 1\r\n```\r\n\r\nI do see this warning on entering `docker-compose up` though:\r\n```console\r\ntime=\"2024-07-12T07:07:06+05:30\" level=warning msg=\"C:\\\\Users\\\\tezan\\\\source\\\\khoj\\\\docker-compose.yml: `version` is obsolete\"`\r\n```\r\n\r\n## To Reproduce\r\nFollow the exact steps mentioned in \"1A. Install Method 1: Docker\" of the Khoj AI docs\r\n\r\n## Screenshots\r\n![image](https://github.com/user-attachments/assets/0dcf9475-c29a-4a45-957b-3a85969fe45b)\r\n\r\n![image](https://github.com/user-attachments/assets/4a88847c-2962-447a-a767-2a0d2a384911)\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [x] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [x] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [x] Windows\r\n    - [ ] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n",
      "state": "closed",
      "author": "tezansahu",
      "author_type": "User",
      "created_at": "2024-07-12T02:03:40Z",
      "updated_at": "2024-12-06T23:29:05Z",
      "closed_at": "2024-07-27T06:44:08Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/848/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/848",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/848",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:49.540501",
      "comments": [
        {
          "author": "AnkushMalaker",
          "body": "Warning is irrelevant.  \r\nSeems related to [this](https://stackoverflow.com/a/63377623).  Based on comment under linked answer I can assume cv2 requires this. Based on error message I'm assuming rapidOCR needed it.  \r\nPutting specified `RUN apt-get update && apt-get install ffmpeg libsm6 libxext6  -",
          "created_at": "2024-07-17T04:48:37Z"
        },
        {
          "author": "debanjum",
          "body": "Hey @tezansahu thanks for raising an issue for this. It was fixed in [this PR](https://github.com/khoj-ai/khoj/pull/842). You can build from source, like @AnkushMalaker mentioned or update the docker-compose.yml to use the [pre](https://github.com/khoj-ai/khoj/pkgs/container/khoj/242318022?tag=pre) ",
          "created_at": "2024-07-17T05:05:38Z"
        },
        {
          "author": "debanjum",
          "body": "Closing this issue as it should be fixed now in the latest release (0.17.0)",
          "created_at": "2024-07-27T06:44:08Z"
        },
        {
          "author": "okjed",
          "body": "I'm seeing this same issue still on the latest version on arm64.",
          "created_at": "2024-12-06T23:29:04Z"
        }
      ]
    },
    {
      "issue_number": 935,
      "title": "[FIX] Multibyte query support",
      "body": "## Describe the bug\r\nI get following error when I input multibyte character when querying.\r\n\r\n```\r\nerror in process sentinel: Multibyte text in HTTP request: POST /api/chat?client=emacs HTTP/1.1\r\nMIME-Version: 1.0\r\nConnection: keep-alive\r\nHost: 127.0.0.1:42110\r\nAccept-encoding: gzip\r\nAccept: */*\r\nUser-Agent: URL/Emacs Emacs/29.1 (Mac; aarch64-apple-darwin23.4.0)\r\nAuthorization: Bearer YOUR_KHOJ_CLOUD_API_KEY\r\nContent-Type: application/json\r\nContent-length: 23\r\n\r\n{\"q\":\"日本語いけますか?\",\"n\":8}\r\n```\r\n\r\n## To Reproduce\r\n- Input Multibyte Char(in my case Japanese) to Chat (Query) to Khoj\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [X] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [X] Emacs\r\n    - [ ] Desktop app\r\n    - [ ] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [X] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]: v1.24.1 \r\n\r\n## Additional context\r\nSearching around, I've found some issues seems to relate to this bug so I'll list it below.\r\n- https://github.com/karthink/gptel/issues/4\r\n- https://github.com/rksm/org-ai/issues/3\r\n- https://github.com/karthink/gptel/issues/2\r\n",
      "state": "closed",
      "author": "adamist521",
      "author_type": "User",
      "created_at": "2024-10-09T17:22:59Z",
      "updated_at": "2024-12-02T10:04:33Z",
      "closed_at": "2024-12-02T10:00:38Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/935/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/935",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/935",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:49.741899",
      "comments": [
        {
          "author": "debanjum",
          "body": "Thanks for the related bug references and a clear, reproducible bug report. This should be fixed now (encoded query param and api-token header as utf-8). \r\n\r\nDo let me know if you're still hitting the issue though?",
          "created_at": "2024-12-02T10:04:31Z"
        }
      ]
    },
    {
      "issue_number": 984,
      "title": "[FIX] Issue indexing from Obsidian on Windows ",
      "body": "See the full [report here](https://discord.com/channels/1112065956647284756/1112065956647284759/1306185988913233953). \r\n\r\nFull stack trace:\r\n[powershellOutput.txt](https://github.com/user-attachments/files/17820150/powershellOutput.txt)\r\n",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2024-11-19T19:11:32Z",
      "updated_at": "2024-12-02T09:02:59Z",
      "closed_at": "2024-12-02T09:02:59Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/984/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/984",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/984",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:49.907329",
      "comments": []
    },
    {
      "issue_number": 841,
      "title": "[IDEA] using function calling to integrate more tools",
      "body": "## Describe the feature you'd like\r\ngive agent ability add other tools rather than build search and web browser \r\n\r\nfor example integrade dify workflow and tools ",
      "state": "open",
      "author": "thinker007",
      "author_type": "User",
      "created_at": "2024-07-07T02:23:43Z",
      "updated_at": "2024-11-21T23:12:24Z",
      "closed_at": null,
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 9,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/841/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 1,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/841",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/841",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:49.907350",
      "comments": [
        {
          "author": "sabaimran",
          "body": "hey @thinker007 , could you describe more of what you're looking for? Do you want another tool similar to Dify? https://dify.ai/blog/dify-ai-workflow",
          "created_at": "2024-09-03T20:25:33Z"
        },
        {
          "author": "thinker007",
          "body": "> hey @thinker007 , could you describe more of what you're looking for? Do you want another tool similar to Dify? https://dify.ai/blog/dify-ai-workflow\r\n\r\nyes dify",
          "created_at": "2024-09-08T17:18:24Z"
        },
        {
          "author": "DavidLMS",
          "body": "I think it would be beneficial to allow agents to define custom actions in a more generic manner, similar to OpenAI's approach with function calling in GPTs. This would offer greater flexibility for integrating various workflows and tools, extending beyond the built-in options currently available.",
          "created_at": "2024-11-07T08:32:12Z"
        },
        {
          "author": "thinker007",
          "body": "> I think it would be beneficial to allow agents to define custom actions in a more generic manner, similar to OpenAI's approach with function calling in GPTs. This would offer greater flexibility for integrating various workflows and tools, extending beyond the built-in options currently available.",
          "created_at": "2024-11-08T09:38:21Z"
        },
        {
          "author": "thinker007",
          "body": "By the way  dify can turn tools into rest https api, if khoj can let devs integrate general http service it will be great!",
          "created_at": "2024-11-08T09:40:10Z"
        }
      ]
    },
    {
      "issue_number": 961,
      "title": "[FIX] Resend API key not found",
      "body": "## Describe the bug\r\nResend not found - same as issue 905, if I removed the anonymous flag and set the environment variable for resend to RESEND_API_KEY= \r\n\r\nThe docker doesn't start - I just want magic link for now not GCP\r\n\r\n## To Reproduce\r\nremove the anonymous flag - setup resend ENV variable\r\n\r\n## Screenshot\r\n![image](https://github.com/user-attachments/assets/53793bd7-4893-478d-b590-2dba9832751a)\r\n\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [X] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [X] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [X] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\n\r\n## Additional context\r\nResend not found previous issue - https://github.com/khoj-ai/khoj/issues/905 \r\n",
      "state": "closed",
      "author": "nexty5870",
      "author_type": "User",
      "created_at": "2024-11-07T13:38:28Z",
      "updated_at": "2024-11-19T23:50:36Z",
      "closed_at": "2024-11-19T23:50:35Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/961/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/961",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/961",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:50.105870",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Hi @nexty5870 , we don't include the resend package in the normal docker image. You'll want to use the prod docker image -- `ghcr.io/khoj-ai/khoj-cloud:latest`. \r\n\r\nAre you hosting it for a multi-user scenario? You mentioned you just wanted the magic link. You can also use the admin panel to retriev",
          "created_at": "2024-11-07T20:16:36Z"
        },
        {
          "author": "CamLamb",
          "body": "I'm also experiencing this issue. I have setup resend as per the documentation here:\r\nhttps://docs.khoj.dev/advanced/authentication/\r\n\r\nI have tried switching images by changing the image referenced in my `docker-compose.yml`.\r\nHowever, this doesn't seem to work and the only thing I can see in my lo",
          "created_at": "2024-11-19T22:22:16Z"
        },
        {
          "author": "sabaimran",
          "body": "Ahh @CamLamb , thanks for raising that point and the detailed logs. \r\n\r\nEDIT: There's an existing environment variable, `RESEND_EMAIL`, that you can use to configure your custom send domain.\r\n\r\nI'll update the documentation to reflect the environment variables you can set for a custom `from` address",
          "created_at": "2024-11-19T23:24:39Z"
        },
        {
          "author": "sabaimran",
          "body": "Docs have been updated! https://docs.khoj.dev/advanced/authentication/#using-magic-links",
          "created_at": "2024-11-19T23:47:52Z"
        },
        {
          "author": "sabaimran",
          "body": "I'm going to close this issue out as both the original and follow-up issues seem to be addressed with documentation, but feel free to follow-up in case there's further requests!",
          "created_at": "2024-11-19T23:50:35Z"
        }
      ]
    },
    {
      "issue_number": 983,
      "title": "[IDEA]",
      "body": "## Describe the feature you'd like\nA clear and concise description of what you want to happen. Include any relevant links or screenshots or inspiration.",
      "state": "closed",
      "author": "Absinthic-cloud",
      "author_type": "User",
      "created_at": "2024-11-19T15:48:07Z",
      "updated_at": "2024-11-19T15:48:22Z",
      "closed_at": "2024-11-19T15:48:22Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/983/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/983",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/983",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:51.998310",
      "comments": []
    },
    {
      "issue_number": 974,
      "title": "[FIX] InterfaceError: connection already   closed        ",
      "body": "After running for 9 days we got this error\r\n\r\nFrom the error stack trace, this is a PostgreSQL database connection issue. The main error is InterfaceError: connection already closed, indicating that the code is trying to use a database connection that has already been closed. The main possible causes are:\r\n\r\nDatabase connection timeout\r\nDatabase connection unexpectedly closed\r\nIncorrect connection pool configuration\r\nConnection management issues in asynchronous environments\r\n\r\n\r\nuvicorn.error: Exception in ASGI      h11_impl.py:411\r\n                           application                                          \r\n                                                                                \r\n                           ╭─ Traceback (most recent call last─╮                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/django/db/backends/base/ba │                \r\n                           │ se.py:294 in _cursor              │                \r\n                           │                                   │                \r\n                           │   291 │   │   self.close_if_healt │                \r\n                           │   292 │   │   self.ensure_connect │                \r\n                           │   293 │   │   with self.wrap_data │                \r\n                           │ ❱ 294 │   │   │   return self._pr │                \r\n                           │   295 │                           │                \r\n                           │   296 │   def _commit(self):      │                \r\n                           │   297 │   │   if self.connection  │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/django/utils/asyncio.py:26 │                \r\n                           │  in inner                         │                \r\n                           │                                   │                \r\n                           │   23 │   │   │   │   if not os.en │                \r\n                           │   24 │   │   │   │   │   raise Sy │                \r\n                           │   25 │   │   │   # Pass onward.   │                \r\n                           │ ❱ 26 │   │   │   return func(*arg │                \r\n                           │   27 │   │                        │                \r\n                           │   28 │   │   return inner         │                \r\n                           │   29                              │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/django/db/backends/postgre │                \r\n                           │ sql/base.py:332 in create_cursor  │                \r\n                           │                                   │                \r\n                           │   329 │   │   │   │   name, scrol │                \r\n                           │   330 │   │   │   )               │                \r\n                           │   331 │   │   else:               │                \r\n                           │ ❱ 332 │   │   │   cursor = self.c │                \r\n                           │   333 │   │                       │                \r\n                           │   334 │   │   if is_psycopg3:     │                \r\n                           │   335 │   │   │   # Register the  │                \r\n                           ╰───────────────────────────────────╯                \r\n                           InterfaceError: connection already                   \r\n                           closed                                               \r\n                                                                                \r\n                           The above exception was the direct                   \r\n                           cause of the following exception:                    \r\n                                                                                \r\n                           ╭─ Traceback (most recent call last─╮                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/uvicorn/protocols/http/h11 │                \r\n                           │ _impl.py:406 in run_asgi          │                \r\n                           │                                   │                \r\n                           │   403 │   # ASGI exception wrappe │                \r\n                           │   404 │   async def run_asgi(self │                \r\n                           │   405 │   │   try:                │                \r\n                           │ ❱ 406 │   │   │   result = await  │                \r\n                           │   407 │   │   │   │   self.scope, │                \r\n                           │   408 │   │   │   )               │                \r\n                           │   409 │   │   except BaseExceptio │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/uvicorn/middleware/proxy_h │                \r\n                           │ eaders.py:70 in __call__          │                \r\n                           │                                   │                \r\n                           │   67 │   │   │   │   │   port = 0 │                \r\n                           │   68 │   │   │   │   │   scope[\"c │                \r\n                           │   69 │   │                        │                \r\n                           │ ❱ 70 │   │   return await self.ap │                \r\n                           │   71                              │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/fastapi/applications.py:10 │                \r\n                           │ 54 in __call__                    │                \r\n                           │                                   │                \r\n                           │   1051 │   async def __call__(sel │                \r\n                           │   1052 │   │   if self.root_path: │                \r\n                           │   1053 │   │   │   scope[\"root_pa │                \r\n                           │ ❱ 1054 │   │   await super().__ca │                \r\n                           │   1055 │                          │                \r\n                           │   1056 │   def add_api_route(     │                \r\n                           │   1057 │   │   self,              │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/starlette/applications.py: │                \r\n                           │ 113 in __call__                   │                \r\n                           │                                   │                \r\n                           │   110 │   │   scope[\"app\"] = self │                \r\n                           │   111 │   │   if self.middleware_ │                \r\n                           │   112 │   │   │   self.middleware │                \r\n                           │ ❱ 113 │   │   await self.middlewa │                \r\n                           │   114 │                           │                \r\n                           │   115 │   def on_event(self, even │                \r\n                           │   116 │   │   return self.router. │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/starlette/middleware/error │                \r\n                           │ s.py:187 in __call__              │                \r\n                           │                                   │                \r\n                           │   184 │   │   │   # We always con │                \r\n                           │   185 │   │   │   # This allows s │                \r\n                           │   186 │   │   │   # to optionally │                \r\n                           │ ❱ 187 │   │   │   raise exc       │                \r\n                           │   188 │                           │                \r\n                           │   189 │   def format_line(self, i │                \r\n                           │       str:                        │                \r\n                           │   190 │   │   values = {          │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/starlette/middleware/error │                \r\n                           │ s.py:165 in __call__              │                \r\n                           │                                   │                \r\n                           │   162 │   │   │   await send(mess │                \r\n                           │   163 │   │                       │                \r\n                           │   164 │   │   try:                │                \r\n                           │ ❱ 165 │   │   │   await self.app( │                \r\n                           │   166 │   │   except Exception as │                \r\n                           │   167 │   │   │   request = Reque │                \r\n                           │   168 │   │   │   if self.debug:  │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/starlette/middleware/sessi │                \r\n                           │ ons.py:85 in __call__             │                \r\n                           │                                   │                \r\n                           │   82 │   │   │   │   │   headers. │                \r\n                           │   83 │   │   │   await send(messa │                \r\n                           │   84 │   │                        │                \r\n                           │ ❱ 85 │   │   await self.app(scope │                \r\n                           │   86                              │                \r\n                           │                                   │                \r\n                           │ /app/src/khoj/configure.py:372 in │                \r\n                           │ __call__                          │                \r\n                           │                                   │                \r\n                           │   369 │   │   async def __call__( │                \r\n                           │   370 │   │   │   if scope[\"type\" │                \r\n                           │   371 │   │   │   │   scope[\"path │                \r\n                           │ ❱ 372 │   │   │   await self.app( │                \r\n                           │   373 │   │                       │                \r\n                           │   374 │   │   def __init__(self,  │                \r\n                           │   375 │   │   │   super().__init_ │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/starlette/middleware/authe │                \r\n                           │ ntication.py:48 in __call__       │                \r\n                           │                                   │                \r\n                           │   45 │   │   if auth_result is No │                \r\n                           │   46 │   │   │   auth_result = Au │                \r\n                           │   47 │   │   scope[\"auth\"], scope │                \r\n                           │ ❱ 48 │   │   await self.app(scope │                \r\n                           │   49 │                            │                \r\n                           │   50 │   @staticmethod            │                \r\n                           │   51 │   def default_on_error(con │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/starlette/middleware/base. │                \r\n                           │ py:187 in __call__                │                \r\n                           │                                   │                \r\n                           │   184 │   │                       │                \r\n                           │   185 │   │   with collapse_excgr │                \r\n                           │   186 │   │   │   async with anyi │                \r\n                           │ ❱ 187 │   │   │   │   response =  │                \r\n                           │   188 │   │   │   │   await respo │                \r\n                           │   189 │   │   │   │   response_se │                \r\n                           │   190                             │                \r\n                           │                                   │                \r\n                           │ /app/src/khoj/configure.py:86 in  │                \r\n                           │ dispatch                          │                \r\n                           │                                   │                \r\n                           │    83 │   │   await run_in_thread │                \r\n                           │    84 │   │   await sync_to_async │                \r\n                           │    85 │   │   try:                │                \r\n                           │ ❱  86 │   │   │   response = awai │                \r\n                           │    87 │   │   finally:            │                \r\n                           │    88 │   │   │   # in tests, use │                \r\n                           │    89 │   │   │   if getattr(sett │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/starlette/middleware/base. │                \r\n                           │ py:163 in call_next               │                \r\n                           │                                   │                \r\n                           │   160 │   │   │   │   │   message │                \r\n                           │   161 │   │   │   except anyio.En │                \r\n                           │   162 │   │   │   │   if app_exc  │                \r\n                           │ ❱ 163 │   │   │   │   │   raise a │                \r\n                           │   164 │   │   │   │   raise Runti │                \r\n                           │   165 │   │   │                   │                \r\n                           │   166 │   │   │   assert message[ │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/starlette/middleware/base. │                \r\n                           │ py:149 in coro                    │                \r\n                           │                                   │                \r\n                           │   146 │   │   │   │               │                \r\n                           │   147 │   │   │   │   async with  │                \r\n                           │   148 │   │   │   │   │   try:    │                \r\n                           │ ❱ 149 │   │   │   │   │   │   awa │                \r\n                           │   150 │   │   │   │   │   except  │                \r\n                           │   151 │   │   │   │   │   │   app │                \r\n                           │   152                             │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/starlette/middleware/cors. │                \r\n                           │ py:85 in __call__                 │                \r\n                           │                                   │                \r\n                           │    82 │   │   origin = headers.ge │                \r\n                           │    83 │   │                       │                \r\n                           │    84 │   │   if origin is None:  │                \r\n                           │ ❱  85 │   │   │   await self.app( │                \r\n                           │    86 │   │   │   return          │                \r\n                           │    87 │   │                       │                \r\n                           │    88 │   │   if method == \"OPTIO │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/starlette/middleware/excep │                \r\n                           │ tions.py:62 in __call__           │                \r\n                           │                                   │                \r\n                           │   59 │   │   else:                │                \r\n                           │   60 │   │   │   conn = WebSocket │                \r\n                           │   61 │   │                        │                \r\n                           │ ❱ 62 │   │   await wrap_app_handl │                \r\n                           │   63 │                            │                \r\n                           │   64 │   def http_exception(self, │                \r\n                           │   65 │   │   assert isinstance(ex │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/starlette/_exception_handl │                \r\n                           │ er.py:53 in wrapped_app           │                \r\n                           │                                   │                \r\n                           │   50 │   │   │   │   handler = _l │                \r\n                           │   51 │   │   │                    │                \r\n                           │   52 │   │   │   if handler is No │                \r\n                           │ ❱ 53 │   │   │   │   raise exc    │                \r\n                           │   54 │   │   │                    │                \r\n                           │   55 │   │   │   if response_star │                \r\n                           │   56 │   │   │   │   raise Runtim │                \r\n                           │      started.\") from exc          │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/starlette/_exception_handl │                \r\n                           │ er.py:42 in wrapped_app           │                \r\n                           │                                   │                \r\n                           │   39 │   │   │   await send(messa │                \r\n                           │   40 │   │                        │                \r\n                           │   41 │   │   try:                 │                \r\n                           │ ❱ 42 │   │   │   await app(scope, │                \r\n                           │   43 │   │   except Exception as  │                \r\n                           │   44 │   │   │   handler = None   │                \r\n                           │   45                              │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/starlette/routing.py:715   │                \r\n                           │ in __call__                       │                \r\n                           │                                   │                \r\n                           │   712 │   │   \"\"\"                 │                \r\n                           │   713 │   │   The main entry poin │                \r\n                           │   714 │   │   \"\"\"                 │                \r\n                           │ ❱ 715 │   │   await self.middlewa │                \r\n                           │   716 │                           │                \r\n                           │   717 │   async def app(self, sco │                \r\n                           │   718 │   │   assert scope[\"type\" │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/starlette/routing.py:735   │                \r\n                           │ in app                            │                \r\n                           │                                   │                \r\n                           │   732 │   │   │   match, child_sc │                \r\n                           │   733 │   │   │   if match == Mat │                \r\n                           │   734 │   │   │   │   scope.updat │                \r\n                           │ ❱ 735 │   │   │   │   await route │                \r\n                           │   736 │   │   │   │   return      │                \r\n                           │   737 │   │   │   elif match == M │                \r\n                           │   738 │   │   │   │   partial = r │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/starlette/routing.py:288   │                \r\n                           │ in handle                         │                \r\n                           │                                   │                \r\n                           │   285 │   │   │   │   response =  │                \r\n                           │       headers=headers)            │                \r\n                           │   286 │   │   │   await response( │                \r\n                           │   287 │   │   else:               │                \r\n                           │ ❱ 288 │   │   │   await self.app( │                \r\n                           │   289 │                           │                \r\n                           │   290 │   def __eq__(self, other: │                \r\n                           │   291 │   │   return (            │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/starlette/routing.py:76 in │                \r\n                           │ app                               │                \r\n                           │                                   │                \r\n                           │    73 │   │   │   response = awai │                \r\n                           │    74 │   │   │   await response( │                \r\n                           │    75 │   │                       │                \r\n                           │ ❱  76 │   │   await wrap_app_hand │                \r\n                           │    77 │                           │                \r\n                           │    78 │   return app              │                \r\n                           │    79                             │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/starlette/_exception_handl │                \r\n                           │ er.py:53 in wrapped_app           │                \r\n                           │                                   │                \r\n                           │   50 │   │   │   │   handler = _l │                \r\n                           │   51 │   │   │                    │                \r\n                           │   52 │   │   │   if handler is No │                \r\n                           │ ❱ 53 │   │   │   │   raise exc    │                \r\n                           │   54 │   │   │                    │                \r\n                           │   55 │   │   │   if response_star │                \r\n                           │   56 │   │   │   │   raise Runtim │                \r\n                           │      started.\") from exc          │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/starlette/_exception_handl │                \r\n                           │ er.py:42 in wrapped_app           │                \r\n                           │                                   │                \r\n                           │   39 │   │   │   await send(messa │                \r\n                           │   40 │   │                        │                \r\n                           │   41 │   │   try:                 │                \r\n                           │ ❱ 42 │   │   │   await app(scope, │                \r\n                           │   43 │   │   except Exception as  │                \r\n                           │   44 │   │   │   handler = None   │                \r\n                           │   45                              │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/starlette/routing.py:73 in │                \r\n                           │ app                               │                \r\n                           │                                   │                \r\n                           │    70 │   │   request = Request(s │                \r\n                           │    71 │   │                       │                \r\n                           │    72 │   │   async def app(scope │                \r\n                           │ ❱  73 │   │   │   response = awai │                \r\n                           │    74 │   │   │   await response( │                \r\n                           │    75 │   │                       │                \r\n                           │    76 │   │   await wrap_app_hand │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/fastapi/routing.py:301 in  │                \r\n                           │ app                               │                \r\n                           │                                   │                \r\n                           │    298 │   │   │   │   )          │                \r\n                           │    299 │   │   │   │   errors = s │                \r\n                           │    300 │   │   │   │   if not err │                \r\n                           │ ❱  301 │   │   │   │   │   raw_re │                \r\n                           │    302 │   │   │   │   │   │   de │                \r\n                           │    303 │   │   │   │   │   │   va │                \r\n                           │    304 │   │   │   │   │   │   is │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/fastapi/routing.py:212 in  │                \r\n                           │ run_endpoint_function             │                \r\n                           │                                   │                \r\n                           │    209 │   assert dependant.call  │                \r\n                           │    210 │                          │                \r\n                           │    211 │   if is_coroutine:       │                \r\n                           │ ❱  212 │   │   return await depen │                \r\n                           │    213 │   else:                  │                \r\n                           │    214 │   │   return await run_i │                \r\n                           │    215                            │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/starlette/authentication.p │                \r\n                           │ y:75 in async_wrapper             │                \r\n                           │                                   │                \r\n                           │    72 │   │   │   │   │   │   nex │                \r\n                           │    73 │   │   │   │   │   │   ret │                \r\n                           │    74 │   │   │   │   │   raise H │                \r\n                           │ ❱  75 │   │   │   │   return awai │                \r\n                           │    76 │   │   │                   │                \r\n                           │    77 │   │   │   return async_wr │                \r\n                           │    78                             │                \r\n                           │                                   │                \r\n                           │ /app/src/khoj/routers/api_chat.py │                \r\n                           │ :1201 in chat                     │                \r\n                           │                                   │                \r\n                           │   1198 │   ## Non-Streaming Text  │                \r\n                           │   1199 │   else:                  │                \r\n                           │   1200 │   │   response_iterator  │                \r\n                           │ ❱ 1201 │   │   response_data = aw │                \r\n                           │   1202 │   │   return Response(co │                \r\n                           │        media_type=\"application/js │                \r\n                           │   1203                            │                \r\n                           │                                   │                \r\n                           │ /app/src/khoj/routers/helpers.py: │                \r\n                           │ 1763 in read_chat_stream          │                \r\n                           │                                   │                \r\n                           │   1760 │   event_delimiter = \"␃🔚 │                \r\n                           │   1761 │   buffer = \"\"            │                \r\n                           │   1762 │                          │                \r\n                           │ ❱ 1763 │   async for chunk in res │                \r\n                           │   1764 │   │   # Start buffering  │                \r\n                           │   1765 │   │   buffer += chunk    │                \r\n                           │   1766                            │                \r\n                           │                                   │                \r\n                           │ /app/src/khoj/routers/api_chat.py │                \r\n                           │ :1154 in event_generator          │                \r\n                           │                                   │                \r\n                           │   1151 │   │   ## Generate Text O │                \r\n                           │   1152 │   │   async for result i │                \r\n                           │        response**\"):              │                \r\n                           │   1153 │   │   │   yield result   │                \r\n                           │ ❱ 1154 │   │   llm_response, chat │                \r\n                           │   1155 │   │   │   defiltered_que │                \r\n                           │   1156 │   │   │   meta_log,      │                \r\n                           │   1157 │   │   │   conversation,  │                \r\n                           │                                   │                \r\n                           │ /app/src/khoj/routers/helpers.py: │                \r\n                           │ 249 in agenerate_chat_response    │                \r\n                           │                                   │                \r\n                           │    246                            │                \r\n                           │    247 async def agenerate_chat_r │                \r\n                           │    248 │   loop = asyncio.get_eve │                \r\n                           │ ❱  249 │   return await loop.run_ │                \r\n                           │    250                            │                \r\n                           │    251                            │                \r\n                           │    252 async def acreate_title_fr │                \r\n                           │                                   │                \r\n                           │ /usr/lib/python3.10/concurrent/fu │                \r\n                           │ tures/thread.py:58 in run         │                \r\n                           │                                   │                \r\n                           │    55 │   │   │   return          │                \r\n                           │    56 │   │                       │                \r\n                           │    57 │   │   try:                │                \r\n                           │ ❱  58 │   │   │   result = self.f │                \r\n                           │    59 │   │   except BaseExceptio │                \r\n                           │    60 │   │   │   self.future.set │                \r\n                           │    61 │   │   │   # Break a refer │                \r\n                           │                                   │                \r\n                           │ /app/src/khoj/routers/helpers.py: │                \r\n                           │ 1141 in generate_chat_response    │                \r\n                           │                                   │                \r\n                           │   1138 │   logger.debug(f\"Convers │                \r\n                           │   1139 │                          │                \r\n                           │   1140 │   metadata = {}          │                \r\n                           │ ❱ 1141 │   agent = AgentAdapters. │                \r\n                           │        conversation.agent else No │                \r\n                           │   1142 │   query_to_run = q       │                \r\n                           │   1143 │   if meta_research:      │                \r\n                           │   1144 │   │   query_to_run = f\"A │                \r\n                           │                                   │                \r\n                           │ /app/src/khoj/database/adapters/_ │                \r\n                           │ _init__.py:710 in                 │                \r\n                           │ get_conversation_agent_by_id      │                \r\n                           │                                   │                \r\n                           │    707 │                          │                \r\n                           │    708 │   @staticmethod          │                \r\n                           │    709 │   def get_conversation_a │                \r\n                           │ ❱  710 │   │   agent = Agent.obje │                \r\n                           │    711 │   │   if agent == AgentA │                \r\n                           │    712 │   │   │   # If the agent │                \r\n                           │        default application code b │                \r\n                           │    713 │   │   │   return None    │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/django/db/models/query.py: │                \r\n                           │ 1097 in first                     │                \r\n                           │                                   │                \r\n                           │   1094 │   │   else:              │                \r\n                           │   1095 │   │   │   self._check_or │                \r\n                           │   1096 │   │   │   queryset = sel │                \r\n                           │ ❱ 1097 │   │   for obj in queryse │                \r\n                           │   1098 │   │   │   return obj     │                \r\n                           │   1099 │                          │                \r\n                           │   1100 │   async def afirst(self) │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/django/db/models/query.py: │                \r\n                           │ 400 in __iter__                   │                \r\n                           │                                   │                \r\n                           │    397 │   │   │   3. self.iterat │                \r\n                           │    398 │   │   │      - Responsib │                \r\n                           │    399 │   │   \"\"\"                │                \r\n                           │ ❱  400 │   │   self._fetch_all()  │                \r\n                           │    401 │   │   return iter(self._ │                \r\n                           │    402 │                          │                \r\n                           │    403 │   def __aiter__(self):   │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/django/db/models/query.py: │                \r\n                           │ 1928 in _fetch_all                │                \r\n                           │                                   │                \r\n                           │   1925 │                          │                \r\n                           │   1926 │   def _fetch_all(self):  │                \r\n                           │   1927 │   │   if self._result_ca │                \r\n                           │ ❱ 1928 │   │   │   self._result_c │                \r\n                           │   1929 │   │   if self._prefetch_ │                \r\n                           │   1930 │   │   │   self._prefetch │                \r\n                           │   1931                            │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/django/db/models/query.py: │                \r\n                           │ 91 in __iter__                    │                \r\n                           │                                   │                \r\n                           │     88 │   │   compiler = queryse │                \r\n                           │     89 │   │   # Execute the quer │                \r\n                           │     90 │   │   # and annotations. │                \r\n                           │ ❱   91 │   │   results = compiler │                \r\n                           │     92 │   │   │   chunked_fetch= │                \r\n                           │     93 │   │   )                  │                \r\n                           │     94 │   │   select, klass_info │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/django/db/models/sql/compi │                \r\n                           │ ler.py:1560 in execute_sql        │                \r\n                           │                                   │                \r\n                           │   1557 │   │   if chunked_fetch:  │                \r\n                           │   1558 │   │   │   cursor = self. │                \r\n                           │   1559 │   │   else:              │                \r\n                           │ ❱ 1560 │   │   │   cursor = self. │                \r\n                           │   1561 │   │   try:               │                \r\n                           │   1562 │   │   │   cursor.execute │                \r\n                           │   1563 │   │   except Exception:  │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/django/utils/asyncio.py:26 │                \r\n                           │  in inner                         │                \r\n                           │                                   │                \r\n                           │   23 │   │   │   │   if not os.en │                \r\n                           │   24 │   │   │   │   │   raise Sy │                \r\n                           │   25 │   │   │   # Pass onward.   │                \r\n                           │ ❱ 26 │   │   │   return func(*arg │                \r\n                           │   27 │   │                        │                \r\n                           │   28 │   │   return inner         │                \r\n                           │   29                              │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/django/db/backends/base/ba │                \r\n                           │ se.py:316 in cursor               │                \r\n                           │                                   │                \r\n                           │   313 │   @async_unsafe           │                \r\n                           │   314 │   def cursor(self):       │                \r\n                           │   315 │   │   \"\"\"Create a cursor, │                \r\n                           │ ❱ 316 │   │   return self._cursor │                \r\n                           │   317 │                           │                \r\n                           │   318 │   @async_unsafe           │                \r\n                           │   319 │   def commit(self):       │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/django/db/backends/base/ba │                \r\n                           │ se.py:293 in _cursor              │                \r\n                           │                                   │                \r\n                           │   290 │   def _cursor(self, name= │                \r\n                           │   291 │   │   self.close_if_healt │                \r\n                           │   292 │   │   self.ensure_connect │                \r\n                           │ ❱ 293 │   │   with self.wrap_data │                \r\n                           │   294 │   │   │   return self._pr │                \r\n                           │   295 │                           │                \r\n                           │   296 │   def _commit(self):      │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/django/db/utils.py:91 in   │                \r\n                           │ __exit__                          │                \r\n                           │                                   │                \r\n                           │    88 │   │   │   │   # the conne │                \r\n                           │    89 │   │   │   │   if dj_exc_t │                \r\n                           │    90 │   │   │   │   │   self.wr │                \r\n                           │ ❱  91 │   │   │   │   raise dj_ex │                \r\n                           │    92 │                           │                \r\n                           │    93 │   def __call__(self, func │                \r\n                           │    94 │   │   # Note that we are  │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/django/db/backends/base/ba │                \r\n                           │ se.py:294 in _cursor              │                \r\n                           │                                   │                \r\n                           │   291 │   │   self.close_if_healt │                \r\n                           │   292 │   │   self.ensure_connect │                \r\n                           │   293 │   │   with self.wrap_data │                \r\n                           │ ❱ 294 │   │   │   return self._pr │                \r\n                           │   295 │                           │                \r\n                           │   296 │   def _commit(self):      │                \r\n                           │   297 │   │   if self.connection  │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/django/utils/asyncio.py:26 │                \r\n                           │  in inner                         │                \r\n                           │                                   │                \r\n                           │   23 │   │   │   │   if not os.en │                \r\n                           │   24 │   │   │   │   │   raise Sy │                \r\n                           │   25 │   │   │   # Pass onward.   │                \r\n                           │ ❱ 26 │   │   │   return func(*arg │                \r\n                           │   27 │   │                        │                \r\n                           │   28 │   │   return inner         │                \r\n                           │   29                              │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/django/db/backends/postgre │                \r\n                           │ sql/base.py:332 in create_cursor  │                \r\n                           │                                   │                \r\n                           │   329 │   │   │   │   name, scrol │                \r\n                           │   330 │   │   │   )               │                \r\n                           │   331 │   │   else:               │                \r\n                           │ ❱ 332 │   │   │   cursor = self.c │                \r\n                           │   333 │   │                       │                \r\n                           │   334 │   │   if is_psycopg3:     │                \r\n                           │   335 │   │   │   # Register the  │                \r\n                           ╰───────────────────────────────────╯                \r\n                           InterfaceError: connection already                   \r\n                           closed        ",
      "state": "open",
      "author": "thinker007",
      "author_type": "User",
      "created_at": "2024-11-12T02:37:53Z",
      "updated_at": "2024-11-19T04:02:52Z",
      "closed_at": null,
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/974/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/974",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/974",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:51.998334",
      "comments": [
        {
          "author": "thinker007",
          "body": "Has any one else bumped into this bug?",
          "created_at": "2024-11-14T09:11:08Z"
        },
        {
          "author": "sabaimran",
          "body": "Hi @thinker007 , do you mind sharing a bit about your hosting environment? I'm guessing your instance has been running for a while? Is it on your own machine, or in a separate cloud?\r\n\r\nUnfortunately, this is an issue we've been tracking for a while. It's going to require a bit of refactoring to add",
          "created_at": "2024-11-15T21:59:09Z"
        },
        {
          "author": "thinker007",
          "body": "on my own machine a docker container run on unraid server",
          "created_at": "2024-11-18T16:00:50Z"
        },
        {
          "author": "sabaimran",
          "body": "@thinker007 , your database is also in a Docker container? Have you been using the Automations feature at all in your local instance?",
          "created_at": "2024-11-18T16:50:58Z"
        },
        {
          "author": "thinker007",
          "body": "> @thinker007 , your database is also in a Docker container? Have you been using the Automations feature at all in your local instance?\r\n\r\nyes my database is also in a Docker container\r\n\r\nand I was not using the Automations feature at all \r\n\r\nSo the bug is very wield",
          "created_at": "2024-11-19T04:02:51Z"
        }
      ]
    },
    {
      "issue_number": 980,
      "title": "[FIX] Database Connections Not Properly Closed Leading to Connection Leakage",
      "body": "## Describe the bug\r\nWhen using Django ORM with FastAPI in the Khoj service, database connections are not properly closed. This results in a gradual increase in open database connections, eventually maxing out the database’s connection capacity.\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n1. Run the Khoj service using Django ORM with FastAPI.\r\n2. Add several automations and allow several runs.\r\n3. Monitor number of active connections: `SELECT sum(numbackends) FROM pg_stat_database`.\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [ ] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [x] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [x] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [x] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\n\r\n## Additional context\r\nIt looks like the `AsyncCloseConnectionsMiddleware` works well closing old connections, but the problem still relevant for scheduler.\r\n",
      "state": "closed",
      "author": "rznzippy",
      "author_type": "User",
      "created_at": "2024-11-17T18:12:50Z",
      "updated_at": "2024-11-18T05:01:07Z",
      "closed_at": "2024-11-18T05:01:07Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/980/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/980",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/980",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:52.236015",
      "comments": []
    },
    {
      "issue_number": 962,
      "title": "[FIX] Online Search Broken",
      "body": "## Describe the bug\r\nA clear and concise description of what the bug is. Please include what you were expecting to happen vs. what actually happened.\r\n\r\nWhenever Khoj tries to use online search, I get the following in my logs:\r\n\r\n[16:42:53.830754] INFO     khoj.processor.tools.online_searc online_search.py:81\r\n                           h: 🌐 Searching the Internet for                     \r\n                           ['2024 presidential election                         \r\n                           news', 'latest updates on 2024                       \r\n                           presidential candidates', '2024                      \r\n                           presidential election key issues                     \r\n                           and debates']                                        \r\n[16:42:54.098720] ERROR    khoj.processor.tools.online_sear online_search.py:328\r\n                           ch:                                                  \r\n                           {\"data\":null,\"code\":401,\"name\":\"                     \r\n                           AuthenticationRequiredError\",\"st                     \r\n                           atus\":40103,\"message\":\"Absence                       \r\n                           of bearer                                            \r\n                           token\",\"readableMessage\":\"Authen                     \r\n                           ticationRequiredError: Absence                       \r\n                           of bearer token\"}                                    \r\n[16:42:54.110862] ERROR    khoj.processor.tools.online_sear online_search.py:328\r\n                           ch:                                                  \r\n                           {\"data\":null,\"code\":401,\"name\":\"                     \r\n                           AuthenticationRequiredError\",\"st                     \r\n                           atus\":40103,\"message\":\"Absence                       \r\n                           of bearer                                            \r\n                           token\",\"readableMessage\":\"Authen                     \r\n                           ticationRequiredError: Absence                       \r\n                           of bearer token\"}                                    \r\n[16:42:54.349986] ERROR    khoj.processor.tools.online_sear online_search.py:328\r\n                           ch:                                                  \r\n                           {\"data\":null,\"code\":401,\"name\":\"                     \r\n                           AuthenticationRequiredError\",\"st                     \r\n                           atus\":40103,\"message\":\"Absence                       \r\n                           of bearer                                            \r\n                           token\",\"readableMessage\":\"Authen                     \r\n                           ticationRequiredError: Absence                       \r\n                           of bearer token\"}\r\n\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\nI do not know how, this just started happening for me after a week of working completely fine.\r\n\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [x] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [x] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [x] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]: 1.26.2\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n",
      "state": "closed",
      "author": "jakobd04",
      "author_type": "User",
      "created_at": "2024-11-07T16:53:15Z",
      "updated_at": "2024-11-17T23:41:18Z",
      "closed_at": "2024-11-17T23:41:18Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/962/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 1
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/962",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/962",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:52.236034",
      "comments": [
        {
          "author": "debanjum",
          "body": "That's strange. Just to confirm:\r\n1. Did you upgrade Khoj between when it was working and when it stopped working? \r\n2. Are you using the default setup for online search or did you setup SERPER_DEV_API_KEY or JINA_API_KEY to do online search?",
          "created_at": "2024-11-09T09:14:24Z"
        },
        {
          "author": "jakobd04",
          "body": "Didn't upgrade and I use the default online search it would",
          "created_at": "2024-11-09T09:52:51Z"
        },
        {
          "author": "debanjum",
          "body": "Found the issue. We use Jina's reader API for online search by default because they didn't require an API key, which made the self-hosting setup easy. But it seems like they've turned off the ability to do online search without an API key 🙈. \r\n\r\nThe two options to mitigate this issue and use online ",
          "created_at": "2024-11-09T23:20:33Z"
        },
        {
          "author": "jakobd04",
          "body": "Used the free Jina API Key and it works again now, thanks a lot for the fast help. This is such an amazing project!",
          "created_at": "2024-11-09T23:51:06Z"
        },
        {
          "author": "debanjum",
          "body": "Thanks for you kind words @jakobd04. \r\n\r\nI've updated the code to bypass using Jina for online search if no API key found for it in either environment variable `JINA_API_KEY` or the web scraper settings (set via Admin Panel > Web Scrapers). \r\n\r\nUnfortunately because of the Jina API update, online se",
          "created_at": "2024-11-17T23:41:18Z"
        }
      ]
    },
    {
      "issue_number": 978,
      "title": "[FIX] Jina AI requires authentication key. Read from DB for online search.",
      "body": "We used to be able to make queries with the Jina API without having to use a bearer token. Now that we needed a bearer token, update the `search_with_jina` function to read not just from the env variable, but also from DB if needed.",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2024-11-16T05:27:44Z",
      "updated_at": "2024-11-17T23:36:11Z",
      "closed_at": "2024-11-17T23:36:11Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/978/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/978",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/978",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:52.452832",
      "comments": []
    },
    {
      "issue_number": 462,
      "title": "Can't uninstall khoj",
      "body": "Downloaded khoj in powershell and I checked, runs in both command terminal and powershell. I try to uninstall with pip uninstall khoj-assistant but it says WARNING: Skipping khoj-assistant as it is not installed.",
      "state": "closed",
      "author": "BMiber",
      "author_type": "User",
      "created_at": "2023-08-25T15:51:01Z",
      "updated_at": "2024-11-15T06:46:07Z",
      "closed_at": "2023-10-06T18:39:20Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 14,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/462/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/462",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/462",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:52.452851",
      "comments": [
        {
          "author": "sabaimran",
          "body": "@BMiber , that sounds rather strange! I tried to reproduce it on my end, but was able to uninstall.\r\n```\r\n(.venv) si@redwood test-uninstall % pip uninstall khoj-assistant\r\nFound existing installation: khoj-assistant 0.11.1\r\nUninstalling khoj-assistant-0.11.1:\r\n  Would remove:\r\n    /Users/si/projects",
          "created_at": "2023-08-25T19:03:28Z"
        },
        {
          "author": "sabaimran",
          "body": "Closing this as it's been stale. Feel free to reopen if you're able to share more details.",
          "created_at": "2023-10-06T18:39:20Z"
        },
        {
          "author": "STORMFIRE007",
          "body": "i am facing the same issue: \r\ni am self hosting khoj and installed it using pip on windows\r\n\r\n```\r\nWindows PowerShell\r\nCopyright (C) Microsoft Corporation. All rights reserved.\r\n\r\nTry the new cross-platform PowerShell https://aka.ms/pscore6\r\n\r\nPS C:\\Windows\\system32> pip uninstall khoj\r\nWARNING: Ski",
          "created_at": "2024-11-11T12:58:00Z"
        },
        {
          "author": "sabaimran",
          "body": "Yup! All good. It has to be `pip uninstall khoj-assistant`. ",
          "created_at": "2024-11-11T14:49:10Z"
        },
        {
          "author": "STORMFIRE007",
          "body": "Sorry but now even the `pip uninstall khoj-assistant` isn't working anymore, it worked for the first time, but now when i tried uninstalling khoj again using the same command, it's not working\r\n```\r\nPS C:\\Windows\\system32> pip uninstall khoj\r\nWARNING: Skipping khoj as it is not installed.\r\nPS C:\\Win",
          "created_at": "2024-11-11T14:52:25Z"
        }
      ]
    },
    {
      "issue_number": 976,
      "title": "Cannot find templates folder",
      "body": "I've been running into this issue where the webpage doesn't load when running via python. Everything works fine running under docker.\r\n\r\nThe error message says that it can't find the index.html file because the templates folder is missing. Could I get some assistance with this issue?\r\n\r\n ```\r\n                                                                                                                                                                                                                                                   │ \r\n                           │ C:\\Development\\khoj\\.venv\\Lib\\site-packages\\starlette\\_exception_handler.py:53 in wrapped_app                                                                                                                                                                 │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │   50 │   │   │   │   handler = _lookup_exception_handler(exception_handlers, exc)                                                                                                                                                                             │ \r\n                           │   51 │   │   │                                                                                                                                                                                                                                                │ \r\n                           │   52 │   │   │   if handler is None:                                                                                                                                                                                                                          │ \r\n                           │ ❱ 53 │   │   │   │   raise exc                                                                                                                                                                                                                                │ \r\n                           │   54 │   │   │                                                                                                                                                                                                                                                │ \r\n                           │   55 │   │   │   if response_started:                                                                                                                                                                                                                         │ \r\n                           │   56 │   │   │   │   raise RuntimeError(\"Caught handled exception, but response already                                                                                                                                                                       │ \r\n                           │      started.\") from exc                                                                                                                                                                                                                                      │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │ C:\\Development\\khoj\\.venv\\Lib\\site-packages\\starlette\\_exception_handler.py:42 in wrapped_app                                                                                                                                                                 │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │   39 │   │   │   await send(message)                                                                                                                                                                                                                          │ \r\n                           │   40 │   │                                                                                                                                                                                                                                                    │ \r\n                           │   41 │   │   try:                                                                                                                                                                                                                                             │ \r\n                           │ ❱ 42 │   │   │   await app(scope, receive, sender)                                                                                                                                                                                                            │ \r\n                           │   43 │   │   except Exception as exc:                                                                                                                                                                                                                         │ \r\n                           │   44 │   │   │   handler = None                                                                                                                                                                                                                               │ \r\n                           │   45                                                                                                                                                                                                                                                          │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │ C:\\Development\\khoj\\.venv\\Lib\\site-packages\\starlette\\routing.py:715 in __call__                                                                                                                                                                              │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │   712 │   │   \"\"\"                                                                                                                                                                                                                                             │ \r\n                           │   713 │   │   The main entry point to the Router class.                                                                                                                                                                                                       │ \r\n                           │   714 │   │   \"\"\"                                                                                                                                                                                                                                             │ \r\n                           │ ❱ 715 │   │   await self.middleware_stack(scope, receive, send)                                                                                                                                                                                               │ \r\n                           │   716 │                                                                                                                                                                                                                                                       │ \r\n                           │   717 │   async def app(self, scope: Scope, receive: Receive, send: Send) -> None:                                                                                                                                                                            │ \r\n                           │   718 │   │   assert scope[\"type\"] in (\"http\", \"websocket\", \"lifespan\")                                                                                                                                                                                       │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │ C:\\Development\\khoj\\.venv\\Lib\\site-packages\\starlette\\routing.py:735 in app                                                                                                                                                                                   │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │   732 │   │   │   match, child_scope = route.matches(scope)                                                                                                                                                                                                   │ \r\n                           │   733 │   │   │   if match == Match.FULL:                                                                                                                                                                                                                     │ \r\n                           │   734 │   │   │   │   scope.update(child_scope)                                                                                                                                                                                                               │ \r\n                           │ ❱ 735 │   │   │   │   await route.handle(scope, receive, send)                                                                                                                                                                                                │ \r\n                           │   736 │   │   │   │   return                                                                                                                                                                                                                                  │ \r\n                           │   737 │   │   │   elif match == Match.PARTIAL and partial is None:                                                                                                                                                                                            │ \r\n                           │   738 │   │   │   │   partial = route                                                                                                                                                                                                                         │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │ C:\\Development\\khoj\\.venv\\Lib\\site-packages\\starlette\\routing.py:288 in handle                                                                                                                                                                                │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │   285 │   │   │   │   response = PlainTextResponse(\"Method Not Allowed\", status_code=405,                                                                                                                                                                     │ \r\n                           │       headers=headers)                                                                                                                                                                                                                                        │ \r\n                           │   286 │   │   │   await response(scope, receive, send)                                                                                                                                                                                                        │ \r\n                           │   287 │   │   else:                                                                                                                                                                                                                                           │ \r\n                           │ ❱ 288 │   │   │   await self.app(scope, receive, send)                                                                                                                                                                                                        │ \r\n                           │   289 │                                                                                                                                                                                                                                                       │ \r\n                           │   290 │   def __eq__(self, other: typing.Any) -> bool:                                                                                                                                                                                                        │ \r\n                           │   291 │   │   return (                                                                                                                                                                                                                                        │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │ C:\\Development\\khoj\\.venv\\Lib\\site-packages\\starlette\\routing.py:76 in app                                                                                                                                                                                    │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │    73 │   │   │   response = await f(request)                                                                                                                                                                                                                 │ \r\n                           │    74 │   │   │   await response(scope, receive, send)                                                                                                                                                                                                        │ \r\n                           │    75 │   │                                                                                                                                                                                                                                                   │ \r\n                           │ ❱  76 │   │   await wrap_app_handling_exceptions(app, request)(scope, receive, send)                                                                                                                                                                          │ \r\n                           │    77 │                                                                                                                                                                                                                                                       │ \r\n                           │    78 │   return app                                                                                                                                                                                                                                          │ \r\n                           │    79                                                                                                                                                                                                                                                         │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │ C:\\Development\\khoj\\.venv\\Lib\\site-packages\\starlette\\_exception_handler.py:53 in wrapped_app                                                                                                                                                                 │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │   50 │   │   │   │   handler = _lookup_exception_handler(exception_handlers, exc)                                                                                                                                                                             │ \r\n                           │   51 │   │   │                                                                                                                                                                                                                                                │ \r\n                           │   52 │   │   │   if handler is None:                                                                                                                                                                                                                          │ \r\n                           │ ❱ 53 │   │   │   │   raise exc                                                                                                                                                                                                                                │ \r\n                           │   54 │   │   │                                                                                                                                                                                                                                                │ \r\n                           │   55 │   │   │   if response_started:                                                                                                                                                                                                                         │ \r\n                           │   56 │   │   │   │   raise RuntimeError(\"Caught handled exception, but response already                                                                                                                                                                       │ \r\n                           │      started.\") from exc                                                                                                                                                                                                                                      │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │ C:\\Development\\khoj\\.venv\\Lib\\site-packages\\starlette\\_exception_handler.py:42 in wrapped_app                                                                                                                                                                 │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │   39 │   │   │   await send(message)                                                                                                                                                                                                                          │ \r\n                           │   40 │   │                                                                                                                                                                                                                                                    │ \r\n                           │   41 │   │   try:                                                                                                                                                                                                                                             │ \r\n                           │ ❱ 42 │   │   │   await app(scope, receive, sender)                                                                                                                                                                                                            │ \r\n                           │   43 │   │   except Exception as exc:                                                                                                                                                                                                                         │ \r\n                           │   44 │   │   │   handler = None                                                                                                                                                                                                                               │ \r\n                           │   45                                                                                                                                                                                                                                                          │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │ C:\\Development\\khoj\\.venv\\Lib\\site-packages\\starlette\\routing.py:73 in app                                                                                                                                                                                    │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │    70 │   │   request = Request(scope, receive, send)                                                                                                                                                                                                         │ \r\n                           │    71 │   │                                                                                                                                                                                                                                                   │ \r\n                           │    72 │   │   async def app(scope: Scope, receive: Receive, send: Send) -> None:                                                                                                                                                                              │ \r\n                           │ ❱  73 │   │   │   response = await f(request)                                                                                                                                                                                                                 │ \r\n                           │    74 │   │   │   await response(scope, receive, send)                                                                                                                                                                                                        │ \r\n                           │    75 │   │                                                                                                                                                                                                                                                   │ \r\n                           │    76 │   │   await wrap_app_handling_exceptions(app, request)(scope, receive, send)                                                                                                                                                                          │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │ C:\\Development\\khoj\\.venv\\Lib\\site-packages\\fastapi\\routing.py:301 in app                                                                                                                                                                                     │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │    298 │   │   │   │   )                                                                                                                                                                                                                                      │ \r\n                           │    299 │   │   │   │   errors = solved_result.errors                                                                                                                                                                                                          │ \r\n                           │    300 │   │   │   │   if not errors:                                                                                                                                                                                                                         │ \r\n                           │ ❱  301 │   │   │   │   │   raw_response = await run_endpoint_function(                                                                                                                                                                                        │ \r\n                           │    302 │   │   │   │   │   │   dependant=dependant,                                                                                                                                                                                                           │ \r\n                           │    303 │   │   │   │   │   │   values=solved_result.values,                                                                                                                                                                                                   │ \r\n                           │    304 │   │   │   │   │   │   is_coroutine=is_coroutine,                                                                                                                                                                                                     │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │ C:\\Development\\khoj\\.venv\\Lib\\site-packages\\fastapi\\routing.py:214 in run_endpoint_function                                                                                                                                                                   │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │    211 │   if is_coroutine:                                                                                                                                                                                                                                   │ \r\n                           │    212 │   │   return await dependant.call(**values)                                                                                                                                                                                                          │ \r\n                           │    213 │   else:                                                                                                                                                                                                                                              │ \r\n                           │ ❱  214 │   │   return await run_in_threadpool(dependant.call, **values)                                                                                                                                                                                       │ \r\n                           │    215                                                                                                                                                                                                                                                        │ \r\n                           │    216                                                                                                                                                                                                                                                        │ \r\n                           │    217 def get_request_handler(                                                                                                                                                                                                                               │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │ C:\\Development\\khoj\\.venv\\Lib\\site-packages\\starlette\\concurrency.py:39 in run_in_threadpool                                                                                                                                                                  │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │   36 │   if kwargs:  # pragma: no cover                                                                                                                                                                                                                       │ \r\n                           │   37 │   │   # run_sync doesn't accept 'kwargs', so bind them in here                                                                                                                                                                                         │ \r\n                           │   38 │   │   func = functools.partial(func, **kwargs)                                                                                                                                                                                                         │ \r\n                           │ ❱ 39 │   return await anyio.to_thread.run_sync(func, *args)                                                                                                                                                                                                   │ \r\n                           │   40                                                                                                                                                                                                                                                          │ \r\n                           │   41                                                                                                                                                                                                                                                          │ \r\n                           │   42 class _StopIteration(Exception):                                                                                                                                                                                                                         │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │ C:\\Development\\khoj\\.venv\\Lib\\site-packages\\anyio\\to_thread.py:33 in run_sync                                                                                                                                                                                 │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │   30 │   :return: an awaitable that yields the return value of the function.                                                                                                                                                                                  │ \r\n                           │   31 │                                                                                                                                                                                                                                                        │ \r\n                           │   32 │   \"\"\"                                                                                                                                                                                                                                                  │ \r\n                           │ ❱ 33 │   return await get_asynclib().run_sync_in_worker_thread(                                                                                                                                                                                               │ \r\n                           │   34 │   │   func, *args, cancellable=cancellable, limiter=limiter                                                                                                                                                                                            │ \r\n                           │   35 │   )                                                                                                                                                                                                                                                    │ \r\n                           │   36                                                                                                                                                                                                                                                          │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │ C:\\Development\\khoj\\.venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py:877 in run_sync_in_worker_thread                                                                                                                                                      │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │    874 │   │   │   context = copy_context()                                                                                                                                                                                                                   │ \r\n                           │    875 │   │   │   context.run(sniffio.current_async_library_cvar.set, None)                                                                                                                                                                                  │ \r\n                           │    876 │   │   │   worker.queue.put_nowait((context, func, args, future))                                                                                                                                                                                     │ \r\n                           │ ❱  877 │   │   │   return await future                                                                                                                                                                                                                        │ \r\n                           │    878                                                                                                                                                                                                                                                        │ \r\n                           │    879                                                                                                                                                                                                                                                        │ \r\n                           │    880 def run_sync_from_thread(                                                                                                                                                                                                                              │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │ C:\\Development\\khoj\\.venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py:807 in run                                                                                                                                                                            │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │    804 │   │   │   │   │   result = None                                                                                                                                                                                                                      │ \r\n                           │    805 │   │   │   │   │   exception: BaseException | None = None                                                                                                                                                                                             │ \r\n                           │    806 │   │   │   │   │   try:                                                                                                                                                                                                                               │ \r\n                           │ ❱  807 │   │   │   │   │   │   result = context.run(func, *args)                                                                                                                                                                                              │ \r\n                           │    808 │   │   │   │   │   except BaseException as exc:                                                                                                                                                                                                       │ \r\n                           │    809 │   │   │   │   │   │   exception = exc                                                                                                                                                                                                                │ \r\n                           │    810                                                                                                                                                                                                                                                        │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │ C:\\Development\\khoj\\src\\khoj\\routers\\web_client.py:23 in index                                                                                                                                                                                                │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │    20 # Create Routes                                                                                                                                                                                                                                         │ \r\n                           │    21 @web_client.get(\"/\", response_class=FileResponse)                                                                                                                                                                                                       │ \r\n                           │    22 def index(request: Request):                                                                                                                                                                                                                            │ \r\n                           │ ❱  23 │   return templates.TemplateResponse(\"index.html\", context={\"request\": request})                                                                                                                                                                       │ \r\n                           │    24                                                                                                                                                                                                                                                         │ \r\n                           │    25                                                                                                                                                                                                                                                         │ \r\n                           │    26 @web_client.post(\"/\", response_class=FileResponse)                                                                                                                                                                                                      │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │ C:\\Development\\khoj\\.venv\\Lib\\site-packages\\starlette\\templating.py:208 in TemplateResponse                                                                                                                                                                   │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │   205 │   │   for context_processor in self.context_processors:                                                                                                                                                                                               │ \r\n                           │   206 │   │   │   context.update(context_processor(request))                                                                                                                                                                                                  │ \r\n                           │   207 │   │                                                                                                                                                                                                                                                   │ \r\n                           │ ❱ 208 │   │   template = self.get_template(name)                                                                                                                                                                                                              │ \r\n                           │   209 │   │   return _TemplateResponse(                                                                                                                                                                                                                       │ \r\n                           │   210 │   │   │   template,                                                                                                                                                                                                                                   │ \r\n                           │   211 │   │   │   context,                                                                                                                                                                                                                                    │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │ C:\\Development\\khoj\\.venv\\Lib\\site-packages\\starlette\\templating.py:131 in get_template                                                                                                                                                                       │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │   128 │   │   env.globals.setdefault(\"url_for\", url_for)                                                                                                                                                                                                      │ \r\n                           │   129 │                                                                                                                                                                                                                                                       │ \r\n                           │   130 │   def get_template(self, name: str) -> jinja2.Template:                                                                                                                                                                                               │ \r\n                           │ ❱ 131 │   │   return self.env.get_template(name)                                                                                                                                                                                                              │ \r\n                           │   132 │                                                                                                                                                                                                                                                       │ \r\n                           │   133 │   @typing.overload                                                                                                                                                                                                                                    │ \r\n                           │   134 │   def TemplateResponse(                                                                                                                                                                                                                               │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │ C:\\Development\\khoj\\.venv\\Lib\\site-packages\\jinja2\\environment.py:1013 in get_template                                                                                                                                                                        │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │   1010 │   │   if parent is not None:                                                                                                                                                                                                                         │ \r\n                           │   1011 │   │   │   name = self.join_path(name, parent)                                                                                                                                                                                                        │ \r\n                           │   1012 │   │                                                                                                                                                                                                                                                  │ \r\n                           │ ❱ 1013 │   │   return self._load_template(name, globals)                                                                                                                                                                                                      │ \r\n                           │   1014 │                                                                                                                                                                                                                                                      │ \r\n                           │   1015 │   @internalcode                                                                                                                                                                                                                                      │ \r\n                           │   1016 │   def select_template(                                                                                                                                                                                                                               │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │ C:\\Development\\khoj\\.venv\\Lib\\site-packages\\jinja2\\environment.py:972 in _load_template                                                                                                                                                                       │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │    969 │   │   │   │                                                                                                                                                                                                                                          │ \r\n                           │    970 │   │   │   │   return template                                                                                                                                                                                                                        │ \r\n                           │    971 │   │                                                                                                                                                                                                                                                  │ \r\n                           │ ❱  972 │   │   template = self.loader.load(self, name, self.make_globals(globals))                                                                                                                                                                            │ \r\n                           │    973 │   │                                                                                                                                                                                                                                                  │ \r\n                           │    974 │   │   if self.cache is not None:                                                                                                                                                                                                                     │ \r\n                           │    975 │   │   │   self.cache[cache_key] = template                                                                                                                                                                                                           │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │ C:\\Development\\khoj\\.venv\\Lib\\site-packages\\jinja2\\loaders.py:126 in load                                                                                                                                                                                     │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │   123 │   │                                                                                                                                                                                                                                                   │ \r\n                           │   124 │   │   # first we try to get the source for this template together                                                                                                                                                                                     │ \r\n                           │   125 │   │   # with the filename and the uptodate function.                                                                                                                                                                                                  │ \r\n                           │ ❱ 126 │   │   source, filename, uptodate = self.get_source(environment, name)                                                                                                                                                                                 │ \r\n                           │   127 │   │                                                                                                                                                                                                                                                   │ \r\n                           │   128 │   │   # try to load the code from the bytecode cache if there is a                                                                                                                                                                                    │ \r\n                           │   129 │   │   # bytecode cache configured.                                                                                                                                                                                                                    │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │ C:\\Development\\khoj\\.venv\\Lib\\site-packages\\jinja2\\loaders.py:207 in get_source                                                                                                                                                                               │ \r\n                           │                                                                                                                                                                                                                                                               │ \r\n                           │   204 │   │   │   if os.path.isfile(filename):                                                                                                                                                                                                                │ \r\n                           │   205 │   │   │   │   break                                                                                                                                                                                                                                   │ \r\n                           │   206 │   │   else:                                                                                                                                                                                                                                           │ \r\n                           │ ❱ 207 │   │   │   raise TemplateNotFound(template)                                                                                                                                                                                                            │ \r\n                           │   208 │   │                                                                                                                                                                                                                                                   │ \r\n                           │   209 │   │   with open(filename, encoding=self.encoding) as f:                                                                                                                                                                                               │ \r\n                           │   210 │   │   │   contents = f.read()                                                                                                                                                                                                                         │ \r\n                           ╰───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ \r\n                           TemplateNotFound: index.html\r\n```\r\n",
      "state": "closed",
      "author": "Joey-Orduna",
      "author_type": "User",
      "created_at": "2024-11-14T04:15:54Z",
      "updated_at": "2024-11-15T00:47:23Z",
      "closed_at": "2024-11-15T00:47:22Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/976/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/976",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/976",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:52.631226",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Hi @Joey-Orduna , are you trying to build from source, or are you using the pip package?\r\n\r\nIf you're building from source, you'll want to follow the [README](https://github.com/khoj-ai/khoj/blob/master/src/interface/web/README.md) instructions for building the frontend.",
          "created_at": "2024-11-14T05:01:16Z"
        },
        {
          "author": "Joey-Orduna",
          "body": "I'm building from source. Thank you for pointing me in the right direction; I was able to get it working!\r\n\r\nThank you",
          "created_at": "2024-11-15T00:47:22Z"
        }
      ]
    },
    {
      "issue_number": 972,
      "title": "[FIX] que \n",
      "body": "## Describe the bug\nA clear and concise description of what the bug is. Please include what you were expecting to happen vs. what actually happened.\n\n## To Reproduce\nSteps to reproduce the behavior:\n\n## Screenshots\nIf applicable, add screenshots to help explain your problem.\n\n## Platform\n- Server:\n    - [x] Cloud-Hosted (https://app.khoj.dev)\n    - [ ] Self-Hosted Docker\n    - [ ] Self-Hosted Python package\n    - [ ] Self-Hosted source code\n- Client:\n    - [x] Obsidian\n    - [x] Emacs\n    - [ ] Desktop app\n    - [ ] Web browser\n    - [ ] WhatsApp\n- OS:\n    - [x] Windows\n    - [ ] macOS\n    - [ ] Linux\n    - [x] Android\n    - [ ] iOS\n\n### If self-hosted\n- Server Version [e.g. 1.0.1]:\n\n## Additional context\nAdd any other context about the problem here.\n",
      "state": "closed",
      "author": "Giusantoos",
      "author_type": "User",
      "created_at": "2024-11-11T07:22:42Z",
      "updated_at": "2024-11-11T08:53:57Z",
      "closed_at": "2024-11-11T08:53:39Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/972/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/972",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/972",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:52.840025",
      "comments": []
    },
    {
      "issue_number": 971,
      "title": "[FIX]",
      "body": null,
      "state": "closed",
      "author": "artemka15262",
      "author_type": "User",
      "created_at": "2024-11-11T02:56:23Z",
      "updated_at": "2024-11-11T02:57:00Z",
      "closed_at": "2024-11-11T02:56:35Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/971/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/971",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/971",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:52.840046",
      "comments": []
    },
    {
      "issue_number": 686,
      "title": "Роль, промт",
      "body": "Good afternoon:)\r\nCan you add the ability to add your own PROMT and Raleigh? Also add the ability to adjust the temperature as I would like to set 0.1-0.3.\r\nAlso tell me in the settings is specified model its context 128000 tokens but when sending to the chat long context 5000 tokens error comes out. \r\n<html> <head><title>414 Request-URI слишком большой</title></head> <body> <center><h1>414 Request-URI слишком большой</h1></center> </body> </html>\r\n![Screenshot_1](https://github.com/khoj-ai/khoj/assets/118296790/109bf057-de01-4245-927e-f90a258d11cc)\r\n\r\n\r\n\r\n ",
      "state": "closed",
      "author": "den47999",
      "author_type": "User",
      "created_at": "2024-04-01T14:33:11Z",
      "updated_at": "2024-11-10T00:37:09Z",
      "closed_at": "2024-11-10T00:37:09Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/686/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/686",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/686",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:52.840053",
      "comments": [
        {
          "author": "den47999",
          "body": "![Screenshot_1](https://github.com/khoj-ai/khoj/assets/118296790/f35ea0f1-7bc5-4914-a4a1-dff03c3b40b5)\r\nЕще подскажите в настройках указана модель ее контекст 128000 токенов но при отправке в чат длинный контекст 5000 токенов вылезает ошибка.",
          "created_at": "2024-04-01T14:33:47Z"
        },
        {
          "author": "sabaimran",
          "body": "Hi @den47999 ! We've limited the token limit used for this model. Thanks for pointing this out, I'll update it. \n\nYou'd like a custom prompt in the cloud instance? ",
          "created_at": "2024-04-15T19:49:40Z"
        },
        {
          "author": "den47999",
          "body": "I want the number of tokens to be 128000 as it helps me with writing code, as well as add temperature selection and promt roles",
          "created_at": "2024-04-15T21:38:20Z"
        },
        {
          "author": "debanjum",
          "body": "Hey @den47999 , are you self-hosting Khoj or using the Khoj cloud service at https://app.khoj.dev?\r\nOn the Khoj cloud service, we limit the context window to 60K tokens currently for subscribed users and 30K tokens for free tier users to manage service costs. If you're self-hosting you can set the m",
          "created_at": "2024-11-10T00:37:09Z"
        }
      ]
    },
    {
      "issue_number": 913,
      "title": "[FIX] obsidian vault is too big with all kinds of media. image and pdf exclude not enough",
      "body": "## Describe the bug\r\nI can't use khoj because my vault contains too many different kinds of files. not just media but .js, and all kinds of things from plugins that I don't need khoj to index either.\r\n\r\n- Client:\r\n    - [x] Obsidian\r\n    - [x] Windows\r\n\r\n## Additional context\r\nIt might be best to use \"include only .md files\" or give users a whitelist instead of allowing to remove only images and pdfs...\r\n",
      "state": "closed",
      "author": "huachuman",
      "author_type": "User",
      "created_at": "2024-09-13T22:29:49Z",
      "updated_at": "2024-11-10T00:23:01Z",
      "closed_at": "2024-11-10T00:23:00Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/913/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "debanjum"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/913",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/913",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:53.060373",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hey @huachuman, are you seeing non-markdown files being synced from you Obsidian vault after you've updated your Khoj Obsidian plugin to index only markdown files? The Khoj Obsidian plugin only syncs Markdown, PDF and Image files by default, not any other files types. So if this is happening it'd be",
          "created_at": "2024-09-23T04:44:27Z"
        },
        {
          "author": "huachuman",
          "body": "I keep getting these errors in console when i try to force sync\r\n\r\nindex.html:1 Access to fetch at 'https://app.khoj.dev/api/content?client=obsidian' from origin 'app://obsidian.md' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource. If an o",
          "created_at": "2024-09-23T12:25:29Z"
        },
        {
          "author": "debanjum",
          "body": "Oh, that's strange. Which version of the Khoj Obsidian plugin are you on? (It should be visible under Settings > Community Plugins > > Installed Plugins section).\r\n\r\nI am able to Force sync to `https://app.khoj.dev` using the latest Khoj Obsidian plugin (version **1.23.2**)",
          "created_at": "2024-09-23T15:52:09Z"
        },
        {
          "author": "huachuman",
          "body": "Thanks. I tried to update the plugin and am on 1.23.2 (was previously on 1.23.1) but still getting this:\r\n\r\nAccess to fetch at 'https://app.khoj.dev/api/content?client=obsidian' from origin 'app://obsidian.md' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the",
          "created_at": "2024-09-23T22:37:40Z"
        },
        {
          "author": "debanjum",
          "body": "Hi @huachuman , are you still seeing the CORS issue on trying to index your Obsidian vault with Khoj? If so, can you open a separate issue to track that and maybe share a screenshot of your Khoj obsidian plugin settings page. I'm unable to reproduce the CORS indexing issue on my end.\r\n\r\nThe original",
          "created_at": "2024-11-10T00:23:01Z"
        }
      ]
    },
    {
      "issue_number": 910,
      "title": "Trying to Self-Host on Ubuntu (using pip) - Can't Complete Install",
      "body": "I'm trying to self-host Khoj on a Ubuntu 22.04.05 environment running in a ProxMox LCX. This is a clean install of Ubuntu. I followed the Install Method 2, and get the very helpful message \"Killed\" directly after Collecting torch==2.2.2 as shown in the screenshot below:\r\n\r\n## Screenshots\r\n![image](https://github.com/user-attachments/assets/59408c88-ba8e-4a52-aeb4-75655f56092c)\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [ ] Self-Hosted Docker\r\n    - [X] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [ ] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n",
      "state": "closed",
      "author": "mdlmarkham",
      "author_type": "User",
      "created_at": "2024-09-12T20:25:05Z",
      "updated_at": "2024-11-10T00:15:19Z",
      "closed_at": "2024-11-10T00:15:19Z",
      "labels": [
        "fix",
        "question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/910/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/910",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/910",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:53.300129",
      "comments": [
        {
          "author": "debanjum",
          "body": "The \"Killed\" message is usually seen when the app/os runs out of available memory/RAM. How much RAM/memory does your Ubuntu machine have?",
          "created_at": "2024-09-21T22:34:52Z"
        },
        {
          "author": "debanjum",
          "body": "Closing this issue because of lack of actionable information",
          "created_at": "2024-11-10T00:15:19Z"
        }
      ]
    },
    {
      "issue_number": 905,
      "title": "[FIX] cannot set RESEND_API_KEY on the docker version",
      "body": "## Describe the bug\r\n\r\nSetting the RESEND_API_KEY on the docker environment return an error.\r\n\r\nTraceback (most recent call last):\r\n  File \"/app/src/khoj/main.py\", line 93, in <module>\r\n    from khoj.configure import configure_routes, initialize_server, configure_middleware\r\n  File \"/app/src/khoj/configure.py\", line 44, in <module>\r\n    from khoj.routers.api_content import configure_content, configure_search\r\n  File \"/app/src/khoj/routers/api_content.py\", line 37, in <module>\r\n    from khoj.routers.helpers import (\r\n  File \"/app/src/khoj/routers/helpers.py\", line 90, in <module>\r\n    from khoj.routers.email import is_resend_enabled, send_task_email\r\n  File \"/app/src/khoj/routers/email.py\", line 28, in <module>\r\n    resend.api_key = RESEND_API_KEY\r\nNameError: name 'resend' is not defined\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [x] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [ ] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n",
      "state": "closed",
      "author": "lethanhviet",
      "author_type": "User",
      "created_at": "2024-09-09T06:30:05Z",
      "updated_at": "2024-11-07T21:27:01Z",
      "closed_at": "2024-09-10T17:11:11Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/905/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/905",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/905",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:58.501243",
      "comments": [
        {
          "author": "sabaimran",
          "body": "hi @lethanhviet , sorry about this. this is because our prod docker image for khoj-cloud isn't made public. we'll go ahead and make that public, and then you'll have to use that.",
          "created_at": "2024-09-09T17:43:59Z"
        },
        {
          "author": "debanjum",
          "body": "Hey @lethanhviet, the [Khoj cloud docker image](https://github.com/khoj-ai/khoj/pkgs/container/khoj-cloud) has been made public. That has Resend and other production package installed. So you should be able to start that with your RESEND API KEY set as an environment variable. \r\n\r\nFeel free to reope",
          "created_at": "2024-09-10T17:11:11Z"
        },
        {
          "author": "nexty5870",
          "body": "Hello - I have the same, although I have setup the RESEND_API_KEY in my docker-compose file I have the same error\r\n\r\n`File \"/app/src/khoj/routers/email.py\", line 28, in\r\nresend.api_key = RESEND_API_KEY\r\nNameError: name 'resend' is not defined`",
          "created_at": "2024-11-07T13:35:19Z"
        },
        {
          "author": "debanjum",
          "body": "Hey @nexty5870 can you use the `khoj-cloud:latest` docker image? This should allow you to enable magic links based auth in your self-hosted Khoj with resend",
          "created_at": "2024-11-07T21:27:01Z"
        }
      ]
    },
    {
      "issue_number": 959,
      "title": "Can't work on self-host.",
      "body": "On my windows11 system.\r\n\r\nI use the model llama3.1:8b. Error messages are as follows.\r\n\r\n## Screenshots\r\n![image](https://github.com/user-attachments/assets/92220f30-c5c9-4202-8c43-14a664320238)\r\n\r\n\r\n## Platform\r\n- Server:\r\n    - [x] Self-Hosted source code\r\n- OS:\r\n    - [x] Windows\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]: 1.28.3\r\n\r\n",
      "state": "closed",
      "author": "YIRU69",
      "author_type": "User",
      "created_at": "2024-11-05T11:48:35Z",
      "updated_at": "2024-11-07T09:40:33Z",
      "closed_at": "2024-11-07T09:40:33Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/959/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/959",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/959",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:58.710659",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hey @YIRU69 , what is the format in which you've added the model name? And did you go through the first run experience where Khoj ask which chat models to use? It usually sets up llama3.x 8b as on one of the default models available, in which case you just have to select it on the settings page at h",
          "created_at": "2024-11-05T19:41:14Z"
        },
        {
          "author": "YIRU69",
          "body": "Thank you, I will try it later again. \r\nBut I add the model name. [bartowski/Meta-Llama-3.1-8B-Instruct-GGUF](https://huggingface.co/bartowski/Meta-Llama-3.1-8B-Instruct-GGUF) \r\nIt also can't work.\r\n",
          "created_at": "2024-11-06T00:28:42Z"
        },
        {
          "author": "YIRU69",
          "body": "Update: It should add the openai config.\r\n\r\nI try it again. But it also can't work. As follows.\r\n\r\n![image](https://github.com/user-attachments/assets/90d8f4c9-99de-4d40-a344-4d597e731b1d)\r\n\r\n![image](https://github.com/user-attachments/assets/7ace14c7-12ed-461a-8533-04d01f066d64)\r\n\r\n![image](https:",
          "created_at": "2024-11-06T10:07:01Z"
        },
        {
          "author": "debanjum",
          "body": "Ok, there's been some confusion. Let's clear it up. There are multiple ways to use local chat models with Khoj. Based on the discussion on Discord it seems you may have been trying to setup Khoj to use a local chat model with Ollama? If so see the docs to [setup Khoj with Ollama](https://docs.khoj.d",
          "created_at": "2024-11-06T19:20:10Z"
        },
        {
          "author": "debanjum",
          "body": "> ![image](https://github.com/user-attachments/assets/90d8f4c9-99de-4d40-a344-4d597e731b1d)\n\nSpecifically this config should either set chat model field to `llama3.1:8b` to use with your ollama setup or set model type to offline and unset openai config field to load the model directly in Khoj but **",
          "created_at": "2024-11-06T19:28:12Z"
        }
      ]
    },
    {
      "issue_number": 882,
      "title": "Pre-loaded configurations",
      "body": "The setup for the locally hosted Docker version is still complicated (it used to be way simpler in the earlier version of Khoj), and the instructions are not very clear on how to load various models, embedding engines, etc.\r\n\r\nConsider offering pre-loaded choices for LLMs and Embedding choices from a drop-down menu.\r\n\r\nFor example, a drop-down menu in the chat models where users can simply select the LLM provider, model, and input their API key.\r\nFor embeddings likewise: a list of all the various models users can use, from a simple drop-down menu rather than having to type it in.\r\n\r\nI keep trying this app here and there but I only ever managed to get the initial version to ever work.\r\n\r\nThanks.",
      "state": "closed",
      "author": "sm18lr88",
      "author_type": "User",
      "created_at": "2024-08-05T21:01:13Z",
      "updated_at": "2024-11-02T19:01:05Z",
      "closed_at": "2024-09-21T21:15:46Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/882/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/882",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/882",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:58.958646",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hey @sm18lr88, thanks for opening this issue and pointing out a good area for improvement! I made some changes to address this:\r\n1. Khoj now sets up a decent set of default chat models on first run. \r\n   Folks using Docker to setup Khoj can set their provider specific API keys in the [docker-compose",
          "created_at": "2024-09-21T22:19:50Z"
        },
        {
          "author": "JOduMonT",
          "body": "not sure if it is easier now\r\nbut when I try to run the docker-compose.yml\r\nI receive an unauthorized error:\r\n\r\n> [+] Running 3/3\r\n>  ✘ sandbox Error  Head \"https://ghcr.io/v2/khoj-ai/terrarium/manifests/latest\": unauthorized                                                                           ",
          "created_at": "2024-11-02T18:09:36Z"
        },
        {
          "author": "h4rsh-k",
          "body": "> not sure if it is easier now but when I try to run the docker-compose.yml I receive an unauthorized error:\r\n> \r\n> > [+] Running 3/3\r\n> > ✘ sandbox Error  Head \"https://ghcr.io/v2/khoj-ai/terrarium/manifests/latest\": unauthorized                                                                      ",
          "created_at": "2024-11-02T18:23:36Z"
        },
        {
          "author": "debanjum",
          "body": "Woops, thanks for the notice! Just made the newly released [code sandbox](https://github.com/khoj-ai/terrarium) docker image at ghcr.io/khoj-ai/terrarium public. So `docker-compose up` should work now.\n\nBackground:\nThe [newly released](https://github.com/khoj-ai/khoj/releases/1.28.0) code tool allow",
          "created_at": "2024-11-02T19:01:04Z"
        }
      ]
    },
    {
      "issue_number": 949,
      "title": "[IDEA] vercel compatibility",
      "body": "i think put option or button for deploy or implement in vercel is really nice",
      "state": "open",
      "author": "johnfelipe",
      "author_type": "User",
      "created_at": "2024-10-23T17:12:22Z",
      "updated_at": "2024-10-23T20:58:01Z",
      "closed_at": null,
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/949/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/949",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/949",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:59.236555",
      "comments": [
        {
          "author": "debanjum",
          "body": "Can you elaborate on your use-case?\n\nVercel deployment of Khoj would be hard as Khoj uses Postgres DB and has a python backend. But fly.io type deployments maybe easier using Khoj's docker image.",
          "created_at": "2024-10-23T20:58:00Z"
        }
      ]
    },
    {
      "issue_number": 941,
      "title": "Diagramming within the chat interface",
      "body": "              Hi, not sure if this should be in a separate issue, but I think these two programs would be very good candidates for extending a feature like this:\r\n-  [d2](https://d2lang.com/) would be a very good candidate for extending a feature like this. It's very \"clean\" (single `d2` binary that outputs svg, no complex dependencies).\r\n- [Kroki!](https://kroki.io/) is a single API for multiple text to diagram programs, including d2 and excalidraw.\r\n\r\n_Originally posted by @rehandaphedar in https://github.com/khoj-ai/khoj/issues/940#issuecomment-2421900770_\r\n\r\n------\r\n\r\nHey! Just continuing the discussion in an issue to make it easier to track.\r\n\r\nThese are awesome references! I like the simplicity of [d2](https://d2lang.com/). Unified diagramming API via [Kroki](https://kroki.io/) is interesting, but truthfully I'm not able to see why we might need that at the moment. \r\n\r\nThere are three reasons I prioritized Excalidraw over some other alternatives:\r\n1. It makes exporting/shareability super easy. It's just a click away in the hamburger menu.\r\n2. When the LLM messes up in declaring the organization of your diagram, it's easy for you to go in and fix it within the embedded component. \r\n3. The outputs just generally look quite nice? Which makes them more usable. \r\n            ",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2024-10-18T23:40:09Z",
      "updated_at": "2024-10-23T06:55:46Z",
      "closed_at": "2024-10-23T06:55:45Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/941/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/941",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/941",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:59.546877",
      "comments": [
        {
          "author": "adi790uu",
          "body": "Hey @sabaimran can you assign me this issue would like to work on this!",
          "created_at": "2024-10-19T09:20:46Z"
        },
        {
          "author": "sabaimran",
          "body": "Hey @adi790uu ! Sorry, it might have been unclear, but there's already a PR open for this one. I just wanted to document some of the related discussion. Feel free to look through the PR & test it out/give feedback! https://github.com/khoj-ai/khoj/pull/940",
          "created_at": "2024-10-19T15:06:33Z"
        },
        {
          "author": "debanjum",
          "body": "@sabaimran closing this since #940 got merged",
          "created_at": "2024-10-23T06:55:45Z"
        }
      ]
    },
    {
      "issue_number": 504,
      "title": "Index data in SQLite DB",
      "body": "Would love to see this be able to work on data stored in SQLite too. ",
      "state": "closed",
      "author": "Victor239",
      "author_type": "User",
      "created_at": "2023-10-17T05:57:33Z",
      "updated_at": "2024-10-23T05:53:07Z",
      "closed_at": "2024-10-23T05:53:07Z",
      "labels": [
        "coverage"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/504/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/504",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/504",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:59.788676",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Neat idea! @Victor239 , do you mind sharing more about your use case? What kind of data would you want to search on?",
          "created_at": "2023-10-17T18:22:06Z"
        },
        {
          "author": "Victor239",
          "body": "There are some smaller apps I'd like to use it with but mainly because Logseq (an app which has been mentioned elsewhere on this GitHub) is getting a [database](https://github.com/logseq/logseq/pull/9858) mode, so I'd love to use it with that. ",
          "created_at": "2023-10-17T19:34:47Z"
        },
        {
          "author": "sabaimran",
          "body": "Do you imagine you would want something that dynamically infers which (presumably text) columns to index? Or, would you want to be able to configure the column names that should be indexed?\r\n\r\nYou've also reminded me that I've been wanting to apply Khoj to my Signal sqlite database. Might be a fun p",
          "created_at": "2023-10-19T17:54:26Z"
        },
        {
          "author": "Victor239",
          "body": "Dynamically infers ideally, but I can imagine a later feature to add for advanced users would allow choosing which columns to utilise. ",
          "created_at": "2023-10-19T21:06:26Z"
        },
        {
          "author": "sabaimran",
          "body": "We don't have db integrations in scope right now. I'll close this as not planned for the moment, but definitely feel free to create a plugin integration that can be used to push data to the indexer endpoint?",
          "created_at": "2024-10-23T05:53:07Z"
        }
      ]
    },
    {
      "issue_number": 901,
      "title": "Add additional documentation for building khoj from source",
      "body": "With our new front-end configuration, we'll need to include instructions [in the development documentation](https://docs.khoj.dev/contributing/development/#2-postgres-installation--setup) about how to build the front-end files for running Khoj locally.",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2024-09-03T01:12:47Z",
      "updated_at": "2024-10-23T05:42:35Z",
      "closed_at": "2024-10-23T05:42:35Z",
      "labels": [
        "fix",
        "documentation"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/901/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/901",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/901",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:59.981956",
      "comments": []
    },
    {
      "issue_number": 921,
      "title": "[FIX] khoj vision mode do not support multiple images",
      "body": "## Describe the bug\r\nA clear and concise description of what the bug is. Please include what you were expecting to happen vs. what actually happened.\r\n\r\nsupport more than one image is needed\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n",
      "state": "closed",
      "author": "thinker007",
      "author_type": "User",
      "created_at": "2024-09-23T11:54:27Z",
      "updated_at": "2024-10-23T02:59:19Z",
      "closed_at": "2024-10-23T02:59:19Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/921/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/921",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/921",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:59.981976",
      "comments": []
    },
    {
      "issue_number": 716,
      "title": "Incorporate Gemini & Gemini Vision support",
      "body": "## Provide Chat Model support for Gemini\r\n\r\nWith the recent advances with Gemini and long context window features, I would like to add Gemini as a chat model available for administrator to include that as a choice of chat model.\r\n\r\nPotentially I would like this to be assigned to me since I'd like to use it also.\r\n",
      "state": "closed",
      "author": "supmo668",
      "author_type": "User",
      "created_at": "2024-04-21T01:42:11Z",
      "updated_at": "2024-10-23T02:59:19Z",
      "closed_at": "2024-10-23T02:59:19Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/716/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/716",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/716",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:23:59.981984",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Hey @supermomo668 ! First of all, agreed with your feature request, I want that too haha. Implementation-wise,  we've been thinking that the best approach for adding support for additional models will be through setting up instructions for using a proxy server like LiteLLM and allowing you to set a ",
          "created_at": "2024-04-23T02:56:43Z"
        },
        {
          "author": "sabaimran",
          "body": "Halfway there! Gemini chat is now supported with #902 . I'll look into the vision integration in a week or two.",
          "created_at": "2024-09-17T01:02:21Z"
        }
      ]
    },
    {
      "issue_number": 945,
      "title": "[IDEA] Integrate more ways to import bookmark url twitter account  content",
      "body": "## Describe the feature you'd like\r\nA clear and concise description of what you want to happen. Include any relevant links or screenshots or inspiration.\r\n\r\nhttps://github.com/supermemoryai/supermemory",
      "state": "open",
      "author": "thinker007",
      "author_type": "User",
      "created_at": "2024-10-21T05:25:22Z",
      "updated_at": "2024-10-21T05:26:24Z",
      "closed_at": null,
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/945/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/945",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/945",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:00.160621",
      "comments": [
        {
          "author": "thinker007",
          "body": "just like this project https://github.com/supermemoryai/supermemory\r\n\r\nai second brain for all your saved stuff. chat with your twitter bookmarks. \r\n",
          "created_at": "2024-10-21T05:26:24Z"
        }
      ]
    },
    {
      "issue_number": 906,
      "title": "[IDEA] any plan add quivr brain feature to khoj ",
      "body": "## Describe the feature you'd like\r\nA clear and concise description of what you want to happen. Include any relevant links or screenshots or inspiration.\r\n\r\nallow user upload a file to brain and search with in it\r\n\r\n\r\n",
      "state": "open",
      "author": "thinker007",
      "author_type": "User",
      "created_at": "2024-09-09T07:53:05Z",
      "updated_at": "2024-10-21T04:11:02Z",
      "closed_at": null,
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/906/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/906",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/906",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:00.375747",
      "comments": [
        {
          "author": "debanjum",
          "body": "Can you describe the feature in more detail? What's the use-case for this?\n\nIf you want to search in a single file you can use file filters in your search query. E.g `When did I start my swimming classes? file:\"/path/to/swimming.org\"`. See [Query Filter in Khoj Docs](https://docs.khoj.dev/miscellane",
          "created_at": "2024-09-09T15:22:30Z"
        },
        {
          "author": "sabaimran",
          "body": "Also, each conversation allows the capability of limiting which files and documents you're using for enriched context. \r\n\r\nIn the web UI, this is what the file filter looks like:\r\n\r\n![Screenshot 2024-09-09 at 11 39 26](https://github.com/user-attachments/assets/90734247-434d-40ac-829a-39fb6a899b3e)",
          "created_at": "2024-09-09T18:40:32Z"
        },
        {
          "author": "mdlmarkham",
          "body": "https://www.quivr.com/ perhaps?",
          "created_at": "2024-09-12T22:46:32Z"
        },
        {
          "author": "debanjum",
          "body": "> https://www.quivr.com/ perhaps?\r\n\r\nLooks neat! It's still unclear what's the brain feature in it? If it's about chatting with a subset of your synced documents (=brain), Khoj already supports that (via conversation level and query level file filters)",
          "created_at": "2024-09-13T03:17:22Z"
        },
        {
          "author": "thinker007",
          "body": "> > https://www.quivr.com/ perhaps?\r\n> \r\n> Looks neat! It's still unclear what's the brain feature in it? If it's about chatting with a subset of your synced documents (=brain), Khoj already supports that (via conversation level and query level file filters)\r\n\r\nExactly，the best part of quivr's brain",
          "created_at": "2024-09-17T15:57:32Z"
        }
      ]
    },
    {
      "issue_number": 939,
      "title": "[FIX] Gemini models return FINISH_REASON_UNSPECIFIED",
      "body": "## Describe the bug\r\nGemini chat models return the following string for all prompts:\r\n```\r\nI can’t talk further about that because of FINISH_REASON_UNSPECIFIED issue.\r\n```\r\n\r\n## To Reproduce\r\n- Follow the steps [in the docs](https://docs.khoj.dev/get-started/setup/?os=linux) for Linux + Docker.\r\n- In docker-compose.yaml, set `GEMINI_API_KEY`, `KHOJ_NO_HTTPS=true`, and `KHOJ_DOMAIN=localhost`.\r\n- Run the docker image, wait till the server is ready, then go to http://localhost:42110.\r\n- Send any message (eg. \"Hi\") in the homepage prompt.\r\n\r\n## Screenshots\r\n![image](https://github.com/user-attachments/assets/ed38c8b0-8b01-4ffd-bbe7-c6739ff48285)\r\n\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [X] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [X] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [X] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]: `1.25.0`\r\n\r\n## Additional context\r\n\r\nThe logs state this:\r\n```\r\nserver-1    | [12:46:05.520678] WARNING  khoj.processor.conversation.google.utils utils.py:131\r\nserver-1    |                            : LLM Response Prevented for                         \r\nserver-1    |                            gemini-1.5-flash:                                    \r\nserver-1    |                            I can't talk further about that because              \r\nserver-1    |                            of **FINISH_REASON_UNSPECIFIED issue.**.             \r\nserver-1    |                            Last Message by user: Query: Hi                      \r\n```\r\n\r\nI've been trying to get more information about the issue by editing `utils.py` in the running docker image to print relevant variables, like:\r\n\r\n- `chat_session`, `formatted_messages` after line 123\r\n- `candidates`, `prompt_feedback` after line 154\r\n\r\nBut, it doesn't seem to work.\r\n\r\nI also noticed that the first message sent will 404 a request to `/index.txt`, while subsequent messages will 404 to `/[message]`:\r\n![image](https://github.com/user-attachments/assets/1de3f7d6-3794-4d13-9b00-b91d8eabb0f3)\r\n![image](https://github.com/user-attachments/assets/922a1ac3-70d5-4a35-bf08-6f4ee741a8ae)\r\n\r\n",
      "state": "closed",
      "author": "rehandaphedar",
      "author_type": "User",
      "created_at": "2024-10-16T13:08:26Z",
      "updated_at": "2024-10-19T04:35:33Z",
      "closed_at": "2024-10-18T01:39:38Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/939/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/939",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/939",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:00.582757",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Hey @rehandaphedar , I just pushed a fix for this. Gemini made a small change in how they send response chunks. It'll be in the next release, which will hopefully be today. See relevant commit: https://github.com/khoj-ai/khoj/commit/07ab8ab9313bf6bc9be993658c81eb77a6ed53b2\r\n\r\nThank you for reporting",
          "created_at": "2024-10-17T16:01:46Z"
        },
        {
          "author": "debanjum",
          "body": "Hey @rehandaphedar , thanks for the detailed bug report and investigation!\r\n- The failing calls to `index.txt` aren't actual issues with Khoj (Next.js tries to do some pre-fetch for performance). Not sure why there were calls to `/[message]`. Actual chat message calls should just go to `/api/chat`.\r",
          "created_at": "2024-10-18T01:39:38Z"
        },
        {
          "author": "rehandaphedar",
          "body": "Thanks! Will try soon.",
          "created_at": "2024-10-18T08:52:58Z"
        },
        {
          "author": "sabaimran",
          "body": "Also, just saw this comment that you left -\r\n\r\n> I've been trying to get more information about the issue by editing utils.py in the running docker image to print relevant variables, like... But it doesn't seem to work.\r\n\r\nIf you're running the self-hosted setup with Docker, you'll need to rebuild t",
          "created_at": "2024-10-19T00:25:05Z"
        },
        {
          "author": "rehandaphedar",
          "body": "Noted, it's fixed for me after I pulled the new image.",
          "created_at": "2024-10-19T04:35:32Z"
        }
      ]
    },
    {
      "issue_number": 141,
      "title": "Would a Logseq plugin be possible?",
      "body": "https://logseq.com/ is very similar to Obsidian, the markdown files they use work in both tools at the same time.\r\n\r\nWondering if there are plans to create a Logseq plugin for this very interesting tool!",
      "state": "open",
      "author": "a-c-m",
      "author_type": "User",
      "created_at": "2023-02-06T17:17:29Z",
      "updated_at": "2024-10-18T05:03:22Z",
      "closed_at": null,
      "labels": [
        "plugin",
        "try"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 14,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/141/reactions",
        "total_count": 24,
        "+1": 24,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/141",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/141",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:00.769252",
      "comments": [
        {
          "author": "debanjum",
          "body": "If it's just markdown files than it totally would be! \r\n- Seems like logseq has an API and supports plugins. Will have to look into what it takes to create a plugin for logseq. \r\n- Until then, you can just use the khoj web interface to search through your markdown notes. Use these [setup](https://gi",
          "created_at": "2023-02-06T19:38:28Z"
        },
        {
          "author": "cnrpman",
          "body": "@debanjum Hello, thanks for your great project!\r\nLogseq supports both markdown & org-mode files (markdown has a bigger user base though)\r\n\r\nLogseq even has an out-of-box API for integrating search service - No UI drawing required:\r\nhttps://logseq.github.io/plugins/interfaces/IAppProxy.html#registerS",
          "created_at": "2023-02-07T15:35:28Z"
        },
        {
          "author": "debanjum",
          "body": "Hey @cnrpman, thanks for the kind words and info 🙂 \r\n\r\n> Logseq even has an out-of-box API for integrating search service - No UI drawing required:\r\n\r\nThat's good to know. The UI portion usually takes the most time when I'm creating plugins.\r\n\r\n> Feel free to ping me if any blocker for the integrati",
          "created_at": "2023-02-07T16:36:45Z"
        },
        {
          "author": "a-c-m",
          "body": "Following up (respectfully) in case progress was made.",
          "created_at": "2023-03-02T10:11:49Z"
        },
        {
          "author": "debanjum",
          "body": "Hi @a-c-m, thanks for your interest. Were you able to [setup and use Khoj](https://github.com/debanjum/khoj/issues/141#issuecomment-1419642652) from the web (or other) interfaces at all?\r\n\r\nTo give some rough estimates, I expect to be able to get to this ~**in 3 weeks**~ *7 months* 😬 ?\r\n(Apart from ",
          "created_at": "2023-03-02T17:41:22Z"
        }
      ]
    },
    {
      "issue_number": 377,
      "title": "Configure khoj to Index URIs.",
      "body": "I have documents on various URIs in the form of internal web URLs, smb uris. Can khoj be configure to recursively index them?",
      "state": "closed",
      "author": "jax79sg",
      "author_type": "User",
      "created_at": "2023-07-31T11:46:13Z",
      "updated_at": "2024-10-16T10:41:51Z",
      "closed_at": "2024-10-16T10:41:51Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/377/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/377",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/377",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:00.998740",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Hey @jax79sg , do you mind adding a bit more detail for this request? What kind of data is in the URI? Is it just HTML pages? Is the use case that you'd like to chat with a website, or does it have your personal documents?",
          "created_at": "2023-08-08T01:35:01Z"
        },
        {
          "author": "debanjum",
          "body": "Crawling (internal or external) websites from within Khoj isn't currently planned. You'll need to use a separate program to crawl documents on your internal network. You can then sync the crawled documents to your Khoj's knowledge base to chat with it. \r\n\r\nKhoj will be able to read (i.e scrape not c",
          "created_at": "2024-10-16T10:41:51Z"
        }
      ]
    },
    {
      "issue_number": 933,
      "title": "\"Aborted\" after Offline Model download",
      "body": "## Describe the bug\r\nWhen i add a new offline ,odel and start the chat with any input., i can see that khoj starts to download the model in the console. but after it finished downloading the model, khoj crashes with nothing more than \"Aborted (core dumped)\". I used the -vv as start-parameter but i dont get any more information.\r\n\r\n## To Reproduce\r\ni used 2 own offline models and the one that is preinstalled. Nothign worked.\r\n\r\n## Screenshots\r\n![image](https://github.com/user-attachments/assets/17959f19-59b2-4145-84fb-1532dde9cc59)\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [ ] Self-Hosted Docker\r\n    - [X] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [X] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [X] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [X] Linux (Ubuntu 24.04)\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]: Khoj v1.24.1\r\n\r\n## Additional context\r\nWhere can i get more information?\r\n",
      "state": "open",
      "author": "SchinkTasia",
      "author_type": "User",
      "created_at": "2024-10-08T22:13:40Z",
      "updated_at": "2024-10-09T10:23:35Z",
      "closed_at": null,
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/933/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/933",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/933",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:01.207771",
      "comments": [
        {
          "author": "debanjum",
          "body": "How much RAM/VRAM does your machine have? This seems like Khoj has run out of memory and crashed.\n\nCan you also try use one of the smaller (2B, 3B) default models like Gemma-2 2B to see if you can get a response from Khoj using them?\n\nYou would need to update your ServerChatSettings in the Khoj admi",
          "created_at": "2024-10-08T22:27:55Z"
        },
        {
          "author": "SchinkTasia",
          "body": "I tested the bartowski/gemma-2-2b-it-GGUF Model but with the same Abort message.\r\nThe machine have 12GB RAM in total.",
          "created_at": "2024-10-08T22:42:12Z"
        },
        {
          "author": "debanjum",
          "body": "I see, that does sound strange. 12Gb RAM should be enough for Khoj to work (though without GPU it'd be slow)\n\nDid you switch the chat model to Gemma 2 2B in both the Khoj Admin panel at http://localhost:42110/server/admin/database/serverchatsettings/ and your user settings at http://localhost:42110/",
          "created_at": "2024-10-08T23:01:39Z"
        },
        {
          "author": "SchinkTasia",
          "body": "Yeah, i changed the settings in both.\r\n\r\nIt is an GPU Installation for a AMD RX6900XT with 16GB VRAM.",
          "created_at": "2024-10-08T23:04:53Z"
        },
        {
          "author": "debanjum",
          "body": "I see, good to know. Not sure what's up. You have a decent sized GPU. What command did you use to install Khoj with GPU support? \n\n1. Can you check if you have the required pre-requisites to use GPU with llama.cpp python binding we use  [here](https://github.com/abetlen/llama-cpp-python?tab=readme-o",
          "created_at": "2024-10-09T00:47:29Z"
        }
      ]
    },
    {
      "issue_number": 932,
      "title": "[IDEA] Make the API-s available to build custom interfaces: List of API-s",
      "body": "It would be great if Khoj exposes the List of API-s so users can build custom flows / UI-s. That includes custom font-end, custom document upload & grouping, etc.\r\n\r\nThanks.",
      "state": "closed",
      "author": "stevennt",
      "author_type": "User",
      "created_at": "2024-10-04T17:56:50Z",
      "updated_at": "2024-10-09T07:35:42Z",
      "closed_at": "2024-10-09T07:35:42Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/932/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/932",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/932",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:01.390584",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Hey @stevennt ! You can see the API docs here: https://app.khoj.dev/redoc.\r\n\r\nYou'll need to use the user token from your settings page when you're making protected queries with an `Authorization: Bearer` header. If you do end up sharing something, please send it my way! Would love to check it out.",
          "created_at": "2024-10-04T19:22:16Z"
        },
        {
          "author": "debanjum",
          "body": "Closing this issue as Khoj APIs are already available for reference",
          "created_at": "2024-10-09T07:35:42Z"
        }
      ]
    },
    {
      "issue_number": 643,
      "title": "[IDEA] Add better ways to collect and store outputted data",
      "body": "## Describe the feature you'd like\r\nWe should support a first-party feature for pinning/bookmarking certain messages to look back at.\r\nThere should also be an easy way to export a given conversation.\r\n",
      "state": "open",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2024-02-10T04:45:10Z",
      "updated_at": "2024-10-02T20:02:05Z",
      "closed_at": null,
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/643/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/643",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/643",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:01.573796",
      "comments": [
        {
          "author": "shantanuSakpal",
          "body": "For the share feature, i was thinking about something like this:\r\n[Screencast from 2024-09-28 23-55-40.webm](https://github.com/user-attachments/assets/39daa3ba-5159-4478-af45-3b63510e335a)\r\nand also further , when user shares the message link, the reciever can view the message as well as enter the ",
          "created_at": "2024-09-28T18:27:12Z"
        },
        {
          "author": "debanjum",
          "body": "Hey @shantanuSakpal, thanks for creating a screencast of your idea! To clarify, is the idea to be able to share a subset of messages or just a single message? Because we already have a way to share a whole conversation and to copy a single messages. Being able to share a subset of messages could pot",
          "created_at": "2024-10-02T20:02:05Z"
        }
      ]
    },
    {
      "issue_number": 808,
      "title": "[IDEA] Request to Update Documentation and Enhance Local Setup Options for Emacs Client",
      "body": "Hello everyone,\r\n\r\nThank you for the excellent Khoj package, it's truly superb! However, I've encountered an issue while setting it up in Emacs. \r\n\r\nAccording to the current documentation available at https://docs.khoj.dev/clients/emacs#setup, an API key is required to use the client. I am interested in a fully local solution and would prefer not to use an API key.\r\nIn previous versions, it was possible to set up everything locally using the khoj-server-url variable to point to a localhost adress. This was very convenient because the khoj command would set up everything automatically, and I didn't have to do much to get it up and running.\r\n\r\nCould you please consider updating the documentation to include information on how to set up Khoj locally without needing an external server? Is there something that I missed ?\r\n\r\nThank you for your attention to this matter.",
      "state": "closed",
      "author": "Cletip",
      "author_type": "User",
      "created_at": "2024-06-10T11:46:21Z",
      "updated_at": "2024-09-29T20:58:45Z",
      "closed_at": "2024-09-29T20:58:44Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/808/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/808",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/808",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:01.790921",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hey @Cletip, glad you've been enjoying the Khoj Emacs package!\r\n\r\nIf you're self-hosting, you do not need an API key to use Khoj from Emacs. You just need to set the `khoj-server-url` to your Khoj server URL. E.g `setq khoj-server-url \"http://127.0.0.1:42110\"`. I've updated the [documentation](https",
          "created_at": "2024-09-29T20:55:30Z"
        }
      ]
    },
    {
      "issue_number": 759,
      "title": "[FIX] Force Sync never resolving",
      "body": "## Describe the bug\r\nseems like the first sync never ends?\r\n\r\n## Screenshots\r\n<img width=\"916\" alt=\"Screenshot 2024-05-25 at 4 57 53 PM\" src=\"https://github.com/khoj-ai/khoj/assets/37986506/e6f2217c-f486-4599-9933-0069f99e47de\">\r\n\r\n\r\n## Platform\r\n- Server:\r\n    - [x] Cloud-Hosted (https://app.khoj.dev)\r\n    - [ ] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [x] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [ ] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [x] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n",
      "state": "closed",
      "author": "ianjamesburke",
      "author_type": "User",
      "created_at": "2024-05-26T00:00:50Z",
      "updated_at": "2024-09-29T20:22:30Z",
      "closed_at": "2024-09-29T19:54:53Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/759/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/759",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/759",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:01.976515",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Hey @fostermusic , could you provide some details about how big your vault is and what kind of files it contains? I might ask you for some more info for debugging if need be as I'm still able to index from Obsidian. ",
          "created_at": "2024-06-01T16:27:43Z"
        },
        {
          "author": "debanjum",
          "body": "Hey @ianjamesburke, We've improved the sync experience on Obsidian. You'll see a notification when you exceed your max data upload limit and you have the ability to limit the file types to sync with Khoj from the Khoj obsidian plugin settings page (i.e You can choose to just sync your markdown files",
          "created_at": "2024-09-29T19:54:53Z"
        },
        {
          "author": "ianjamesburke",
          "body": "Awesome!! I’ll check it out, nice work.\r\n\r\nOn Sun, Sep 29, 2024 at 12:55 PM Debanjum ***@***.***> wrote:\r\n\r\n> Hey @ianjamesburke <https://github.com/ianjamesburke>, We've improved the\r\n> sync experience on Obsidian. You'll see a notification when you exceed your\r\n> max data upload limit and you have",
          "created_at": "2024-09-29T20:22:29Z"
        }
      ]
    },
    {
      "issue_number": 811,
      "title": "Integrate Langchain processor to include models from all model providers",
      "body": "For Anthropic and OpenAI there are separate classes of functions that use the 3P APIs individually. Using langchain will open up to loads of models with replicable code. \r\n\r\nWondering why this isn't available already?\r\n\r\nHappy to contribute",
      "state": "closed",
      "author": "ishan00",
      "author_type": "User",
      "created_at": "2024-06-10T17:47:04Z",
      "updated_at": "2024-09-29T19:50:23Z",
      "closed_at": "2024-09-29T19:50:23Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/811/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/811",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/811",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:02.138703",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Hey @ishan00 ! Our anthropic and openai integrations use the first party libraries. Generalizing to multiple providers is enabled via openai-api compatible proxies like litellm. We're not using langchain because it usually becomes quite constraining if you're using it beyond the basic usage. Thanks ",
          "created_at": "2024-06-11T03:01:20Z"
        }
      ]
    },
    {
      "issue_number": 927,
      "title": "[FIX] 'Configure' giving 404 response on https://khoj.dev/",
      "body": "# 404 Error response on https://khoj.dev/\r\n\r\n### Current Behavior:\r\nWhen I go to https://khoj.dev/ and scroll down to 'Your Research Copilot' section and 'Any Model' as I mentioned below and click on 'configure' it gives 404 response --> (https://app.khoj.dev/config), Can anyone explain why its giving an error response, or what it was supposed give?\r\n\r\n### Element where this is occurring:\r\n```html\r\n<div class=\"framer-m8e2nr-container\" style=\"opacity: 1; transform: perspective(1200px); transform-origin: 50% 50% 0px;\">\r\n\r\n    <a class=\"framer-rxHwW framer-qijx81 framer-v-qijx81 framer-1o383ss\" data-framer-name=\"Variant 1\" href=\"https://app.khoj.dev/config\" rel=\"noopener\" style=\"background-color: var(--token-a378a457-09c9-4e21-8971-31a4dc6ae8ea, rgb(17, 16, 17)); border-radius: 24px; transform: none; transform-origin: 50% 50% 0px;\">\r\n         <div class=\"framer-1dzv1qw\" data-framer-component-type=\"RichTextContainer\" style=\"outline: none; display: flex; flex-direction: column; justify-content: flex-start; flex-shrink: 0; --extracted-r6o4lv: rgb(255, 255, 255); --framer-paragraph-spacing: 16px; transform: none; transform-origin: 50% 50% 0px;\">\r\n                <p class=\"framer-text\" style=\"--font-selector: RlM7U2F0b3NoaS1tZWRpdW0=; --framer-font-family: &quot;Satoshi&quot;, &quot;Satoshi Placeholder&quot;, sans-serif; --framer-font-weight: 500; --framer-line-height: 24px; --framer-text-color: var(--extracted-r6o4lv, rgb(255, 255, 255));\">Configure</p>\r\n          </div>\r\n     </a>\r\n</div>\r\n```\r\n  ```javascript\r\n{\"detail\":\"Not Found\"}\r\n```\r\n![image](https://github.com/user-attachments/assets/224f39ba-ebc7-4417-8fd1-db72b77117bc)\r\n\r\n\r\n### Reproduce\r\n1. Open https://khoj.dev/\r\n2. scroll down to reach --> 'Your Research Copilot' section, See image below\r\n3. Click on 'Configure'\r\n4. Gives response\r\n  ```javascript\r\n{\"detail\":\"Not Found\"}\r\n```\r\n\r\n### Screenshots of the error:\r\n![image](https://github.com/user-attachments/assets/00af417f-61c3-44dc-9f08-3906edac4f48)\r\n![image](https://github.com/user-attachments/assets/13a01f6f-fa75-4bdd-942c-52b5b61e73ac)\r\n\r\n## Platform\r\n- Server:\r\n    - [x] Cloud-Hosted (https://khoj.dev/)\r\n\r\n- Client:\r\n    - [x] Web browser\r\n\r\n- OS:\r\n    - [x] Windows",
      "state": "closed",
      "author": "negativenagesh",
      "author_type": "User",
      "created_at": "2024-09-29T16:26:08Z",
      "updated_at": "2024-09-29T17:47:29Z",
      "closed_at": "2024-09-29T17:34:05Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/927/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/927",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/927",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:02.330855",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Thanks for reporting! This should be fixed now.",
          "created_at": "2024-09-29T17:34:05Z"
        },
        {
          "author": "negativenagesh",
          "body": "> Thanks for reporting! This should be fixed now.\r\n\r\n@sabaimran Thank you...\r\n## Its working completely fine now..\r\nI wonder no one noticed this, I spotted this like a week ago, and I studied a bit about @khoj-ai and wrote an issue today..\r\n\r\n![image](https://github.com/user-attachments/assets/0408d",
          "created_at": "2024-09-29T17:42:10Z"
        }
      ]
    },
    {
      "issue_number": 915,
      "title": "[FIX] The \"Create Agent\" button doesn't trigger anything",
      "body": "## Describe the bug\r\nThe \"Create Agent\" button doesn't trigger anything (apart from a GET request to /sessions, according to DevTools).\r\n\r\nNo error in the console. \r\n\r\n## To Reproduce\r\nClick on the button.\r\n\r\n## Platform\r\n- Server:\r\n    - [X] Cloud-Hosted (https://app.khoj.dev)\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [X] Web browser: Chrome latest\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [X] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n",
      "state": "closed",
      "author": "vibl",
      "author_type": "User",
      "created_at": "2024-09-16T11:14:30Z",
      "updated_at": "2024-09-29T06:01:41Z",
      "closed_at": "2024-09-29T06:01:41Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/915/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/915",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/915",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:02.510316",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Hey @vibl , There's actually supposed to be a `coming soon` notification that comes up there, but it's really finnicky. This feature is in progress atm. Feel free to share any info you wnat about what you're looking for here or what you'd want. \r\n\r\n![Screenshot 2024-09-16 at 13 51 21](https://github",
          "created_at": "2024-09-16T20:52:14Z"
        },
        {
          "author": "shantanuSakpal",
          "body": "yeah, its not working for me either, on ubuntu 24, brave, looking into it, should be something minor\r\n\r\n",
          "created_at": "2024-09-26T15:25:23Z"
        }
      ]
    },
    {
      "issue_number": 758,
      "title": "[IDEA] Live Scrolling with Scrolling Buffer",
      "body": "## Live Scrolling with Scrolling Buffer:\r\nScrolling Buffer: Implement a buffer that stores a certain number of previously generated lines. This allows users to scroll up and see the recently generated text without affecting the ongoing generation process.\r\nLive Scrolling: As the AI generates new lines, automatically update the displayed content within the buffer. This way, the user can scroll up and review the recent history without the page jumping or content disappearing.",
      "state": "closed",
      "author": "aymenssf",
      "author_type": "User",
      "created_at": "2024-05-25T21:41:35Z",
      "updated_at": "2024-09-29T05:54:35Z",
      "closed_at": "2024-09-29T05:54:35Z",
      "labels": [
        "upgrade",
        "good first issue"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 12,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/758/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/758",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/758",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:02.686454",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hey @aymenssf, can you describe the issue in more details? Is the problem that the user can't scroll-up when Khoj is writing out its response? What is the \"content disappearing\" bit you mentioned? Feel free to share screenshots or small videos if they'll help explaining the issue",
          "created_at": "2024-05-26T04:13:24Z"
        },
        {
          "author": "m00nbyt3",
          "body": "I have this problem, I can't scroll-up when Khoj is writing out its response",
          "created_at": "2024-05-30T10:18:28Z"
        },
        {
          "author": "aymenssf",
          "body": "\r\nhttps://github.com/khoj-ai/khoj/assets/79019644/4e450c75-08ca-47a1-972d-e9f993f3f021\r\nHello @debanjum , here is what I mean, thank you\r\n",
          "created_at": "2024-06-04T21:57:19Z"
        },
        {
          "author": "m00nbyt3",
          "body": "As a temporal solution, we can inject this code ( genereted by khoj btw :) ) in DevTools console:\r\n```\r\n\r\n// Selects the element\r\nvar chatBody = document.getElementById(\"chat-body\");\r\n\r\n// Saves the last scrollTop value\r\nvar originalScrollTop = chatBody.scrollTop;\r\n\r\n// Redefine scrollTop porperty\r\n",
          "created_at": "2024-06-20T08:16:24Z"
        },
        {
          "author": "shantanuSakpal",
          "body": "yep, this is an annoying bug. if the answer is going to be long, i would like to start reading it rather than waiting for the ai to finish the answer\r\n",
          "created_at": "2024-07-15T15:44:08Z"
        }
      ]
    },
    {
      "issue_number": 884,
      "title": "[IDEA] Chat with subset of Notes from within Obsidian",
      "body": "I would like to request a feature that allows users to send multiple notes directly into Obsidian. This feature would greatly enhance productivity and streamline the workflow for users who manage a large number of notes or frequently need to import batches of notes.\r\n",
      "state": "open",
      "author": "voltek62",
      "author_type": "User",
      "created_at": "2024-08-06T22:08:28Z",
      "updated_at": "2024-09-28T12:05:25Z",
      "closed_at": null,
      "labels": [
        "upgrade",
        "question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/884/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/884",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/884",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:02.937299",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hey @voltek62, thanks for raising an issue for this. Can you clarify what you mean by import/send multiple notes directly into Obsidian? \r\n\r\nDo you want to send a subset of notes from your Obsidian vault to sync with your Khoj? Or do you want to limit the notes you want Khoj to reference when respon",
          "created_at": "2024-08-11T10:27:41Z"
        },
        {
          "author": "voltek62",
          "body": "Yes, that's correct. I would like to send a specific subset of notes from my Obsidian vault to sync with Khoj. This would allow me to manage which notes are referenced when Khoj responds to my queries, ensuring that only the most relevant information is used. This selective synchronization would hel",
          "created_at": "2024-08-11T22:11:47Z"
        },
        {
          "author": "debanjum",
          "body": "Hey @voltek62, thanks for clarifying the use-case! We support file filters in Khoj which maybe satisfactory for your requirements. To organize conversations with a specific set of notes, you can create conversations and limit them to access only the specified set of notes using the file filter dropd",
          "created_at": "2024-09-03T21:18:18Z"
        }
      ]
    },
    {
      "issue_number": 807,
      "title": "[FIX] text doesn't generate after local inference completes request",
      "body": "## Describe the bug\r\nA clear and concise description of what the bug is. Please include what you were expecting to happen vs. what actually happened.\r\n\r\n## To Reproduce\r\nUsing docker\r\n\r\nlogged in on server (via xrdp) hosting the docker container\r\n\r\n## Screenshots\r\n![image](https://github.com/khoj-ai/khoj/assets/5154106/c6148761-88e5-4244-a864-dd181d3f0742)\r\n![image](https://github.com/khoj-ai/khoj/assets/5154106/fd71e3dc-02fd-48c9-8f73-e2a246931181)\r\n![image](https://github.com/khoj-ai/khoj/assets/5154106/17c56c2c-d332-4da0-9330-6936613402ee)\r\n![image](https://github.com/khoj-ai/khoj/assets/5154106/04b28f54-d2a4-4e16-a530-40bd0137c25d)\r\n\r\n\r\n## Platform\r\n- Server:\r\n    - [x] Self-Hosted Docker\r\n- Client:\r\ndirect\r\n- OS:\r\n    - [x] Linux\r\n\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\ncommit 8cdab5f31a78cc368b90b1a29f3289942d5ded2a\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n",
      "state": "closed",
      "author": "thistleknot",
      "author_type": "User",
      "created_at": "2024-06-08T13:22:50Z",
      "updated_at": "2024-09-28T12:04:16Z",
      "closed_at": "2024-09-28T12:04:15Z",
      "labels": [
        "fix",
        "question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/807/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/807",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/807",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:03.146619",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hey @thistleknot, can you share server logs as well when you see this behavior? It may contain the error thrown on the server side while processing the request, which will be helpful to debug the issue",
          "created_at": "2024-06-13T13:54:08Z"
        },
        {
          "author": "debanjum",
          "body": "Closing this issue as it's gone stale. Don't have enough context to reproduce the bug and Khoj has gone through quite a few changes since the issue was opened including improvements to the self-hosting experience and an upgraded UX",
          "created_at": "2024-09-28T12:04:15Z"
        }
      ]
    },
    {
      "issue_number": 924,
      "title": "[FIX] torch can not use GPU ",
      "body": "## Describe the bug\r\nI have successfully setup khoj using conda, postgresql 16, pytorch=2.1.0, torchvision=0.16.0, torchaudio=2.1.0, pytorch-cuda=12.1.\r\n\r\nHow to set torch.device to use my GPU?\r\n\r\n## Screenshots/Error message\r\nUserWarning: Failed to initialize NumPy: DLL load failed while importing _multiarray_umath: The specified module could not be found. (Triggered internally at C:\\cb\\pytorch_1000000000000\\work\\torch\\csrc\\utils\\tensor_numpy.cpp:84.)\r\n  device: torch.device = torch.device(torch._C._get_default_device()),  # torch.device('cpu'),\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Self-Hosted Python package\r\n- Client:\r\n    - [ ] Web browser\r\n- OS:\r\n    - [ ] Windows 11, RTX 3050, CUDA runtime 12.1",
      "state": "open",
      "author": "andreiramani",
      "author_type": "User",
      "created_at": "2024-09-26T11:18:31Z",
      "updated_at": "2024-09-26T11:37:24Z",
      "closed_at": null,
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/924/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/924",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/924",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:03.386551",
      "comments": [
        {
          "author": "andreiramani",
          "body": "Force upgrade to numpy 2.0.1 gave error start. So, I downgraded to numpy=1.26.4. Relaunch khoj successfully, but it still not detect the GPU.",
          "created_at": "2024-09-26T11:37:23Z"
        }
      ]
    },
    {
      "issue_number": 922,
      "title": "How to define non -standard postgresql port?",
      "body": "## Describe the bug\r\n\r\nI have non-standard postgresql port, how do we config custom port for khoj?\r\n\r\n--- error in python terminal ---\r\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\r\ndjango.db.utils.OperationalError: connection to server at \"localhost\" (::1), port 5432 failed: Connection refused (0x0000274D/10061)\r\n        Is the server running on that host and accepting TCP/IP connections?\r\nconnection to server at \"localhost\" (127.0.0.1), port 5432 failed: Connection refused (0x0000274D/10061)\r\n        Is the server running on that host and accepting TCP/IP connections?\r\n---\r\n\r\n\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Self-Hosted Python package\r\n\r\n- Client:\r\n    - [ ] Web browser\r\n\r\n- OS:\r\n    - [ ] Windows 11, RTX 3050\r\n\r\n",
      "state": "closed",
      "author": "andreiramani",
      "author_type": "User",
      "created_at": "2024-09-25T02:56:46Z",
      "updated_at": "2024-09-26T02:38:17Z",
      "closed_at": "2024-09-26T02:38:17Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/922/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/922",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/922",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:03.579153",
      "comments": [
        {
          "author": "debanjum",
          "body": "You'd need to set the `POSTGRES_PORT` environment variable to the port your Postgres DB is available on. You can also set `POSTGRES_HOST` if it's at a non-standard url. \n\nSee the Khoj `docker-compose.yml` to find configurable environment variables for reference",
          "created_at": "2024-09-25T04:37:12Z"
        }
      ]
    },
    {
      "issue_number": 829,
      "title": "[IDEA] Guide/process to build embeddings elsewhere and sync that to the server.",
      "body": "## Describe the feature you'd like\r\n\r\nProblem: Embedding on the server takes a lot of time, resource, and in many cases error prone, especially when GB-s of data need to be processed, and likely again and again.\r\n\r\nIf a script can be developed to allow users to run the embeddings elsewhere, then sync that up to the server / db, then it would be very convenient.\r\n\r\nThanks.\r\n\r\n",
      "state": "closed",
      "author": "stevennt",
      "author_type": "User",
      "created_at": "2024-06-20T06:13:28Z",
      "updated_at": "2024-09-23T02:35:03Z",
      "closed_at": "2024-09-23T02:35:03Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/829/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/829",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/829",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:03.786912",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hey @stevennt, could you share a bit more about your use-case? What's the expected scale of usage? \r\n- Khoj can be configured to compute embeddings using the [HuggingFace's serverless inference API](https://huggingface.co/docs/api-inference/quicktour). For production use-case you can use their [dedi",
          "created_at": "2024-07-07T21:29:08Z"
        },
        {
          "author": "stevennt",
          "body": "Hi @debanjum, my use-case is as follows: supposed you have a VIP user who you want to onboard. He has, say, 100GB of existing data in various places. Time is not a problem, he wants to start next week. But if he has to go through all the steps to index 100GB of data himself (the process which will c",
          "created_at": "2024-07-08T00:39:30Z"
        },
        {
          "author": "debanjum",
          "body": "Hi @stevennt, thanks for sharing the details of your use-case. I'm assuming you already have access to the data to be synced for this user? If so, the process would look like:\r\n1. Request the user to create and share with you a (temporary) API key from their account on your hosted Khoj instance\r\n2. ",
          "created_at": "2024-09-23T02:34:50Z"
        }
      ]
    },
    {
      "issue_number": 748,
      "title": "[FIX] Docker-compose up",
      "body": "## Describe the bug\r\nA clear and concise description of what the bug is. Please include what you were expecting to happen vs. what actually happened.\r\n\r\n![CleanShot 2024-05-24 at 14 47 25](https://github.com/khoj-ai/khoj/assets/3421783/0ca0e5ce-d8c6-4704-9f85-cdcbcf9896eb)\r\n\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n\r\nDownloaded the sample docker-compse.yml and updated the user/password and ran docker-compose up\r\n\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [ ] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [ ] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n",
      "state": "closed",
      "author": "JC1738",
      "author_type": "User",
      "created_at": "2024-05-24T21:48:23Z",
      "updated_at": "2024-09-23T01:43:41Z",
      "closed_at": "2024-09-23T01:43:41Z",
      "labels": [
        "fix",
        "docker"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 10,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/748/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/748",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/748",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:03.970850",
      "comments": [
        {
          "author": "JC1738",
          "body": "I tried two different ubuntu machines (pop and regular) running 22.04 and get the same error.  I was able to get it to work if I build the docker image.  So unblocked, bug still think there is something wrong.",
          "created_at": "2024-05-24T23:04:46Z"
        },
        {
          "author": "willlee1995",
          "body": "Same here for linux NAS. I have not tried building from scratch, I am able to work from my windows host, but not in a NAS linux server. Wondering why the log won't show anything in the docker container even I use --verbose=1 to hopefully get the logger show up some errors. No luck now. Still, not bl",
          "created_at": "2024-05-26T12:34:28Z"
        },
        {
          "author": "ssuukk",
          "body": "Same on Synology NAS. Just fails with `server-1 exited with code 132`, running it manually produces nothing:\r\n\r\n```\r\nroot@storage2:~/khoj# docker-compose run server /bin/bash\r\nWARN[0000] /root/khoj/docker-compose.yaml: `version` is obsolete\r\n[+] Creating 1/0\r\n ✔ Container khoj-database-1  Running   ",
          "created_at": "2024-05-30T09:22:06Z"
        },
        {
          "author": "GabrielLanghans",
          "body": "Same error here",
          "created_at": "2024-06-04T20:22:29Z"
        },
        {
          "author": "nmathey",
          "body": "Same here on Synology NAS: any workaround available yet? \r\nShould we try specific OS/Arch image https://github.com/khoj-ai/khoj/pkgs/container/khoj?\r\n\r\nFor now issue happen with release 1.13, 1.12.1 and 1.11.0",
          "created_at": "2024-06-09T00:07:27Z"
        }
      ]
    },
    {
      "issue_number": 745,
      "title": "[FIX] Bad Request (400) running in docker",
      "body": "## Describe the bug\r\nI'm running Khoj docker compose stack on a server on my local network, have all the env variables setup but visiting `/server/admin` route throws a 400 Bad Request error. The logs show the following error: \r\n```\r\n DisallowedHost: Invalid HTTP_HOST                    \r\n\r\n header: '10.0.0.197:42110'. You may                  \r\n\r\n need to add '10.0.0.197' to                          \r\n\r\n ALLOWED_HOSTS.\r\n```\r\n\r\n\r\n\r\n\r\nThere seems to be no way to add a environment variable for setting allowed hosts. \r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n- Run Khoj docker compose stack on a server on your network\r\n- Try to visit the admin route and see error\r\n\r\n## Screenshots\r\n<img width=\"524\" alt=\"image\" src=\"https://github.com/khoj-ai/khoj/assets/7658579/18608cc2-10c6-4399-b290-46e5cba35381\">\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [x] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [x] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [x] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]: 1.12\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n",
      "state": "closed",
      "author": "techieanant",
      "author_type": "User",
      "created_at": "2024-05-23T18:37:33Z",
      "updated_at": "2024-09-21T22:47:40Z",
      "closed_at": "2024-09-21T22:47:39Z",
      "labels": [
        "fix",
        "docker"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/745/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/745",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/745",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:04.162284",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Hey @techieanant , I'm assuming you can't access it over `localhost`?\r\n\r\nYou must have used the `docker-compose.yml` sample file to scaffold you Khoj instance. You can use that to set the environment variable KHOJ_DOMAIN. There are some notes about that here: https://docs.khoj.dev/get-started/setup/",
          "created_at": "2024-05-23T22:33:06Z"
        },
        {
          "author": "techieanant",
          "body": "Thank you that worked although I now see a different problem. \r\n\r\n<img width=\"1192\" alt=\"image\" src=\"https://github.com/khoj-ai/khoj/assets/7658579/6d9e07c4-808b-4580-a413-5ad42aade7b1\">\r\n\r\n\r\n",
          "created_at": "2024-05-29T16:12:45Z"
        },
        {
          "author": "debanjum",
          "body": "Hi folks, I was able to verify that the latest Khoj run via Docker does not hit the CSRF or the Bad Request (400) issue when accessing the admin panel. As previously mentioned you need to set the `KHOJ_DOMAIN` environment variable to resolve the Bad Request issue.\r\n\r\nI've also simplified the Docker ",
          "created_at": "2024-09-21T22:47:39Z"
        }
      ]
    },
    {
      "issue_number": 911,
      "title": "Trying to self host on Ubuntu using Docker - /server/admin returns bad request (400)",
      "body": "\r\n![image](https://github.com/user-attachments/assets/e643f652-7aa8-42af-94e3-26bb879a3532)\r\n\r\n",
      "state": "closed",
      "author": "mdlmarkham",
      "author_type": "User",
      "created_at": "2024-09-12T22:20:25Z",
      "updated_at": "2024-09-21T22:33:10Z",
      "closed_at": "2024-09-21T22:33:10Z",
      "labels": [
        "fix",
        "docker"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/911/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/911",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/911",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:04.419504",
      "comments": [
        {
          "author": "stevennt",
          "body": "Same problem. It worked before. Ps.: found out that KHOJ_DOMAIN needs to be set: https://docs.khoj.dev/get-started/setup/#setup-notes",
          "created_at": "2024-09-18T06:11:31Z"
        },
        {
          "author": "debanjum",
          "body": "Hey @mdlmarkham , @stevennt. I've simplified the Docker setup in #919. I was able to remotely access the Admin Panel on the self-hosted Khoj setup via Docker. The `KHOJ_DOMAIN` environment variable just needs to be set correctly.\r\n\r\nSee the updated [Self Hosting Docs](https://docs.khoj.dev/get-start",
          "created_at": "2024-09-21T22:33:10Z"
        }
      ]
    },
    {
      "issue_number": 881,
      "title": "[FIX] Docker version: Application error: a client-side exception has occurred (see the browser console for more information).",
      "body": "## Describe the bug\r\nOpen localhost:42110, after a flash of  some window, then get the blank page with error `Application error: a client-side exception has occurred (see the browser console for more information).` \r\n\r\nIn the console, shows `fd9d1056-2b978342deb60015.js:1 Error: <svg> attribute height: Expected length`.\r\n\r\n## Screenshots\r\n\r\n![image](https://github.com/user-attachments/assets/e321ba61-467e-45f9-8e60-d184eda08604)\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [x] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [x] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [x] Windows\r\n    - [ ] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]: I cannot get the version.\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n",
      "state": "closed",
      "author": "saccohuo",
      "author_type": "User",
      "created_at": "2024-08-05T16:02:15Z",
      "updated_at": "2024-09-21T22:22:49Z",
      "closed_at": "2024-09-21T21:37:18Z",
      "labels": [
        "fix",
        "docker"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 15,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/881/reactions",
        "total_count": 3,
        "+1": 3,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/881",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/881",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:04.607340",
      "comments": [
        {
          "author": "rogerc66",
          "body": "Same here\r\n\r\n`The error messages you provided indicate several issues related to JavaScript and possibly an associated framework that might not be named or described in your question. Here are some explanations for each of these errors:\r\n\r\nSVG Attribute Error:\r\n<svg> attribute height: Expected lengt",
          "created_at": "2024-08-06T17:57:49Z"
        },
        {
          "author": "ajikmr",
          "body": "Hello.\r\nI am also getting same error. A flash of correct screen, followed by error message being displayed.\r\n\r\nPasting console log below:\r\n\r\n<img width=\"1267\" alt=\"Screenshot 2024-08-08 at 5 52 24 PM\" src=\"https://github.com/user-attachments/assets/b55d6831-4909-4bd2-92c4-96d0a285803a\">\r\n\r\n\r\n/api/se",
          "created_at": "2024-08-08T12:25:02Z"
        },
        {
          "author": "PiyushDixit96",
          "body": "> ## Describe the bug\r\n> \r\n> Open localhost:42110, after a flash of some window, then get the blank page with error `Application error: a client-side exception has occurred (see the browser console for more information).`\r\n> \r\n> In the console, shows `fd9d1056-2b978342deb60015.js:1 Error: <svg> attr",
          "created_at": "2024-08-09T04:55:24Z"
        },
        {
          "author": "PiyushDixit96",
          "body": "issue fix update this value in docker-compose.yml\r\nKHOJ_DEBUG=True\r\nand upgrade the build\r\ndocker-compose up --build\r\n\r\nplease try this ",
          "created_at": "2024-08-09T05:00:04Z"
        },
        {
          "author": "rogerc66",
          "body": "> issue fix update this value in docker-compose.yml KHOJ_DEBUG=True and upgrade the build docker-compose up --build\r\n> \r\n> please try this\r\n\r\nNo luck, still get the same error after rebuild, after a quick flash of normal page, error page kicks in",
          "created_at": "2024-08-09T06:40:41Z"
        }
      ]
    },
    {
      "issue_number": 786,
      "title": "CSRF-Error with Docker Desktop",
      "body": "## Describe the bug\r\nHi, I currently use the docker-compose.yml which is linked in the self-host documentation with the Docker Desktop Windows Software. I can´t log into the Admin panel with the http://127.0.0.1:42110 adress, because i got the \"CSRF verification failed. Request aborted.\". I try to add my IP to the docker-compose as environment var and disable the SSL with \"KHOJ_NO_SSL=\"True\"\", and i tried \"KHOJ_NO_HTTPS=\"True\"\" because in the settings.py its searching for this.\r\n\r\nA few days ago it worked and than not anymore. i currently tried 2 different computer with the docker and non-docker installation, but each time i got the same result. When i try to connect with a custom domain from another pc i cant log in because \"my credentials are wrong\".\r\n\r\n## To Reproduce\r\nI really dont know, how to reproduce this issue.\r\n\r\n## Screenshots\r\n![image](https://github.com/khoj-ai/khoj/assets/35700301/25743f32-9fef-4062-a816-fffb3f27bc6c)\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [X] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [X] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [X] Windows\r\n    - [ ] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]: Khoj v1.12.1\r\n\r\n###  More information\r\nI set the environment variable KHOJ_DEBUG=True in the docker-compose.yml, but i only get one line as repsonse when i try to login which says, that someone connected. So this isn´t sadly usefully for me, currently.\r\n",
      "state": "closed",
      "author": "SchinkTasia",
      "author_type": "User",
      "created_at": "2024-05-31T13:02:05Z",
      "updated_at": "2024-09-21T22:21:56Z",
      "closed_at": "2024-09-21T21:22:09Z",
      "labels": [
        "fix",
        "docker"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 11,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/786/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/786",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/786",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:04.867977",
      "comments": [
        {
          "author": "debanjum",
          "body": "Can you check if you can access the admin panel from localhost:42110 address instead?",
          "created_at": "2024-06-01T13:18:07Z"
        },
        {
          "author": "SchinkTasia",
          "body": "> Can you check if you can access the admin panel from localhost:42110 address instead?\r\n\r\nHey,\r\nI Guess i tried that and it doesnt changed much. I will try that again today. Just to be Sure.",
          "created_at": "2024-06-01T13:38:44Z"
        },
        {
          "author": "sabaimran",
          "body": "Hey @SchinkTasia , do you mind sharing the `docker-compose.yml` you're using? And let me know what happens when you try accessing from http://localhost:42110. \r\n\r\nI made a small update here to the docker compose that would be worth trying: https://github.com/khoj-ai/khoj/commit/6d10f98498fe8ca4c4c6f",
          "created_at": "2024-06-01T16:20:32Z"
        },
        {
          "author": "SchinkTasia",
          "body": "> Hey @SchinkTasia , do you mind sharing the `docker-compose.yml` you're using? And let me know what happens when you try accessing from http://localhost:42110.\r\n> \r\n> I made a small update here to the docker compose that would be worth trying: [6d10f98](https://github.com/khoj-ai/khoj/commit/6d10f9",
          "created_at": "2024-06-02T00:53:22Z"
        },
        {
          "author": "SchinkTasia",
          "body": "**Update**\r\nI tried the docker container on a different laptop with an OpenSuse Tumbleweed OS.\r\nOn this plattform everythings works fine, but sadly i cant use it, because the CPU and GPU are not powerfull enough.\r\nAnd i cant change the OS of my current Windows 10 Computer.",
          "created_at": "2024-06-03T11:01:05Z"
        }
      ]
    },
    {
      "issue_number": 782,
      "title": "[FIX]The deployment was not successful, regardless of whether I used Ollama openai， All show uvicorn. error: connection closed",
      "body": "The deployment was not successful, regardless of whether I used Ollama openai， All show uvicorn. error: connection closed。\r\n\r\nserver-1    | [15:31:04.245190] DEBUG    uvicorn.error: = connection is       protocol.py:1227\r\nserver-1    |                            CLOSING\r\nserver-1    | [15:31:04.245975] DEBUG    uvicorn.error: > CLOSE 1000 (OK) [2  protocol.py:1178\r\nserver-1    |                            bytes]\r\nserver-1    | [15:31:04.246598] DEBUG    uvicorn.error: = connection is       protocol.py:1497\r\nserver-1    |                            CLOSED\r\nserver-1    | [15:31:04.247182] DEBUG    uvicorn.error: ! failing connection  protocol.py:1412\r\nserver-1    |                            with code 1006\r\nserver-1    | [15:31:04.247735] ERROR    uvicorn.error: closing handshake failed server.py:248\r\nserver-1    |                            ╭─ Traceback (most recent call last) ─╮\r\nserver-1    |                            │ /usr/local/lib/python3.10/dist-pack │\r\nserver-1    |                            │ ages/websockets/legacy/server.py:24 │\r\nserver-1    |                            │ 4 in handler                        │\r\nserver-1    |                            │                                     │\r\nserver-1    |                            │    241 │   │   │   │   raise        │\r\nserver-1    |                            │    242 │   │   │                    │\r\nserver-1    |                            │    243 │   │   │   try:             │\r\nserver-1    |                            │ ❱  244 │   │   │   │   await self.c │\r\nserver-1    |                            │    245 │   │   │   except Connectio │\r\nserver-1    |                            │    246 │   │   │   │   raise        │\r\nserver-1    |                            │    247 │   │   │   except Exception │\r\nserver-1    |                            │                                     │\r\nserver-1    |                            │ /usr/local/lib/python3.10/dist-pack │\r\nserver-1    |                            │ ages/websockets/legacy/protocol.py: │\r\nserver-1    |                            │ 770 in close                        │\r\nserver-1    |                            │                                     │\r\nserver-1    |                            │    767 │   │   \"\"\"                  │\r\nserver-1    |                            │    768 │   │   try:                 │\r\nserver-1    |                            │    769 │   │   │   async with async │\r\nserver-1    |                            │ ❱  770 │   │   │   │   await self.w │\r\nserver-1    |                            │    771 │   │   except asyncio.Timeo │\r\nserver-1    |                            │    772 │   │   │   # If the close f │\r\nserver-1    |                            │    773 │   │   │   # are full, the  │\r\nserver-1    |                            │                                     │\r\nserver-1    |                            │ /usr/local/lib/python3.10/dist-pack │\r\nserver-1    |                            │ ages/websockets/legacy/protocol.py: │\r\nserver-1    |                            │ 1236 in write_close_frame           │\r\nserver-1    |                            │                                     │\r\nserver-1    |                            │   1233 │   │   │   │   data = close │\r\nserver-1    |                            │   1234 │   │   │                    │\r\nserver-1    |                            │   1235 │   │   │   # 7.1.2. Start t │\r\nserver-1    |                            │ ❱ 1236 │   │   │   await self.write │\r\nserver-1    |                            │   1237 │                            │\r\nserver-1    |                            │   1238 │   async def keepalive_ping │\r\nserver-1    |                            │   1239 │   │   \"\"\"                  │\r\nserver-1    |                            │                                     │\r\nserver-1    |                            │ /usr/local/lib/python3.10/dist-pack │\r\nserver-1    |                            │ ages/websockets/legacy/protocol.py: │\r\nserver-1    |                            │ 1209 in write_frame                 │\r\nserver-1    |                            │                                     │\r\nserver-1    |                            │   1206 │   │   │   │   f\"Cannot wri │\r\nserver-1    |                            │   1207 │   │   │   )                │\r\nserver-1    |                            │   1208 │   │   self.write_frame_syn │\r\nserver-1    |                            │ ❱ 1209 │   │   await self.drain()   │\r\nserver-1    |                            │   1210 │                            │\r\nserver-1    |                            │   1211 │   async def write_close_fr │\r\nserver-1    |                            │   1212 │   │   self, close: Close,  │\r\nserver-1    |                            │                                     │\r\nserver-1    |                            │ /usr/local/lib/python3.10/dist-pack │\r\nserver-1    |                            │ ages/websockets/legacy/protocol.py: │\r\nserver-1    |                            │ 1198 in drain                       │\r\nserver-1    |                            │                                     │\r\nserver-1    |                            │   1195 │   │   │   self.fail_connec │\r\nserver-1    |                            │   1196 │   │   │   # Wait until the │\r\nserver-1    |                            │   1197 │   │   │   # with the corre │\r\nserver-1    |                            │ ❱ 1198 │   │   │   await self.ensur │\r\nserver-1    |                            │   1199 │                            │\r\nserver-1    |                            │   1200 │   async def write_frame(   │\r\nserver-1    |                            │   1201 │   │   self, fin: bool, opc │\r\nserver-1    |                            │                                     │\r\nserver-1    |                            │ /usr/local/lib/python3.10/dist-pack │\r\nserver-1    |                            │ ages/websockets/legacy/protocol.py: │\r\nserver-1    |                            │ 939 in ensure_open                  │\r\nserver-1    |                            │                                     │\r\nserver-1    |                            │    936 │   │   │   │   return       │\r\nserver-1    |                            │    937 │   │                        │\r\nserver-1    |                            │    938 │   │   if self.state is Sta │\r\nserver-1    |                            │ ❱  939 │   │   │   raise self.conne │\r\nserver-1    |                            │    940 │   │                        │\r\nserver-1    |                            │    941 │   │   if self.state is Sta │\r\nserver-1    |                            │    942 │   │   │   # If we started  │\r\nserver-1    |                            ╰─────────────────────────────────────╯\r\nserver-1    |                            ConnectionClosedError: sent 1000 (OK);\r\nserver-1    |                            no close frame received\r\nserver-1    | [15:31:04.365601] INFO     uvicorn.error: connection closed        server.py:264\r\nserver-1    | [15:31:04.366237] DEBUG    uvicorn.error: x half-closing TCP    protocol.py:1319\r\nserver-1    |                            connection\r\ndatabase-1  | 2024-05-30 15:32:28.902 UTC [27] LOG:  checkpoint starting: time\r\ndatabase-1  | 2024-05-30 15:32:30.232 UTC [27] LOG:  checkpoint complete: wrote 16 buffers (0.1%); 0 WAL file(s) added, 0 removed, 0 recycled; write=1.316 s, sync=0.006 s, total=1.331 s; sync files=15, longest=0.003 s, average=0.001 s; distance=18 kB, estimate=18 kB\r\nserver-1    | [15:32:43.029176] INFO     khoj.configure: 📡 Uploading         configure.py:345\r\nserver-1    |                            telemetry to\r\nserver-1    |                            https://khoj.beta.haletic.com/v1/tel\r\nserver-1    |                            emetry...\r\nserver-1    | [15:32:43.030050] DEBUG    khoj.configure: Telemetry state:     configure.py:346\r\nserver-1    |                            [{'telemetry_type': 'api',\r\nserver-1    |                            'server_version': '1.12.1', 'os':\r\nserver-1    |                            'Linux', 'timestamp': '2024-05-30\r\nserver-1    |                            15:28:15', 'client_host':\r\nserver-1    |                            '192.168.65.1', 'user_agent':\r\nserver-1    |                            'Mozilla/5.0 (Windows NT 10.0;\r\nserver-1    |                            Win64; x64) AppleWebKit/537.36\r\nserver-1    |                            (KHTML, like Gecko) Chrome/125.0.0.0\r\nserver-1    |                            Safari/537.36', 'referer':\r\nserver-1    |                            'http://localhost:42110/', 'host':\r\nserver-1    |                            'localhost:42110', 'server_id':\r\nserver-1    |                            '9fe7a503-fa45-40bd-9243-a43b4ab2006\r\nserver-1    |                            4', 'subscription_type': 'standard',\r\nserver-1    |                            'is_recurring': False, 'client_id':\r\nserver-1    |                            'default', 'api': 'chat_options'},\r\nserver-1    |                            {'telemetry_type': 'api',\r\nserver-1    |                            'server_version': '1.12.1', 'os':\r\nserver-1    |                            'Linux', 'timestamp': '2024-05-30\r\nserver-1    |                            15:28:15', 'client_host':\r\nserver-1    |                            '192.168.65.1', 'user_agent':\r\nserver-1    |                            'Mozilla/5.0 (Windows NT 10.0;\r\nserver-1    |                            Win64; x64) AppleWebKit/537.36\r\nserver-1    |                            (KHTML, like Gecko) Chrome/125.0.0.0\r\nserver-1    |                            Safari/537.36', 'referer':\r\nserver-1    |                            'http://localhost:42110/', 'host':\r\nserver-1    |                            'localhost:42110', 'server_id':\r\nserver-1    |                            '9fe7a503-fa45-40bd-9243-a43b4ab2006\r\nserver-1    |                            4', 'subscription_type': 'standard',\r\nserver-1    |                            'is_recurring': False, 'client_id':\r\nserver-1    |                            'default', 'api': 'chat_sessions'},\r\nserver-1    |                            {'telemetry_type': 'api',\r\nserver-1    |                            'server_version': '1.12.1', 'os':\r\nserver-1    |                            'Linux', 'timestamp': '2024-05-30\r\nserver-1    |                            15:28:15', 'client_host':\r\nserver-1    |                            '192.168.65.1', 'user_agent':\r\nserver-1    |                            'Mozilla/5.0 (Windows NT 10.0;\r\nserver-1    |                            Win64; x64) AppleWebKit/537.36\r\nserver-1    |                            (KHTML, like Gecko) Chrome/125.0.0.0\r\nserver-1    |                            Safari/537.36', 'referer':\r\nserver-1    |                            'http://localhost:42110/', 'host':\r\nserver-1    |                            'localhost:42110', 'server_id':\r\nserver-1    |                            '9fe7a503-fa45-40bd-9243-a43b4ab2006\r\nserver-1    |                            4', 'subscription_type': 'standard',\r\nserver-1    |                            'is_recurring': False, 'client_id':\r\nserver-1    |                            'default', 'api': 'chat_history',\r\nserver-1    |                            'client': 'web'}, {'telemetry_type':\r\nserver-1    |                            'api', 'server_version': '1.12.1',\r\nserver-1    |                            'os': 'Linux', 'timestamp':\r\nserver-1    |                            '2024-05-30 15:30:51',\r\nserver-1    |                            'client_host': '192.168.65.1',\r\nserver-1    |                            'user_agent': 'unknown', 'referer':\r\nserver-1    |                            'unknown', 'host': 'unknown',\r\nserver-1    |                            'server_id':\r\nserver-1    |                            '9fe7a503-fa45-40bd-9243-a43b4ab2006\r\nserver-1    |                            4', 'subscription_type': 'standard',\r\nserver-1    |                            'is_recurring': False, 'client_id':\r\nserver-1    |                            'default', 'api':\r\nserver-1    |                            'get_all_filenames'},\r\nserver-1    |                            {'telemetry_type': 'api',\r\nserver-1    |                            'server_version': '1.12.1', 'os':\r\nserver-1    |                            'Linux', 'timestamp': '2024-05-30\r\nserver-1    |                            15:30:51', 'client_host':\r\nserver-1    |                            '192.168.65.1', 'user_agent':\r\nserver-1    |                            'unknown', 'referer': 'unknown',\r\nserver-1    |                            'host': 'unknown', 'server_id':\r\nserver-1    |                            '9fe7a503-fa45-40bd-9243-a43b4ab2006\r\nserver-1    |                            4', 'subscription_type': 'standard',\r\nserver-1    |                            'is_recurring': False, 'client_id':\r\nserver-1    |                            'default', 'api':\r\nserver-1    |                            'get_all_filenames'},\r\nserver-1    |                            {'telemetry_type': 'api',\r\nserver-1    |                            'server_version': '1.12.1', 'os':\r\nserver-1    |                            'Linux', 'timestamp': '2024-05-30\r\nserver-1    |                            15:30:51', 'client_host':\r\nserver-1    |                            '192.168.65.1', 'user_agent':\r\nserver-1    |                            'unknown', 'referer': 'unknown',\r\nserver-1    |                            'host': 'unknown', 'server_id':\r\nserver-1    |                            '9fe7a503-fa45-40bd-9243-a43b4ab2006\r\nserver-1    |                            4', 'subscription_type': 'standard',\r\nserver-1    |                            'is_recurring': False, 'client_id':\r\nserver-1    |                            'default', 'api':\r\nserver-1    |                            'get_all_filenames'},\r\nserver-1    |                            {'telemetry_type': 'api',\r\nserver-1    |                            'server_version': '1.12.1', 'os':\r\nserver-1    |                            'Linux', 'timestamp': '2024-05-30\r\nserver-1    |                            15:30:51', 'client_host':\r\nserver-1    |                            '192.168.65.1', 'user_agent':\r\nserver-1    |                            'Mozilla/5.0 (Windows NT 10.0;\r\nserver-1    |                            Win64; x64) AppleWebKit/537.36\r\nserver-1    |                            (KHTML, like Gecko) Chrome/125.0.0.0\r\nserver-1    |                            Safari/537.36', 'referer':\r\nserver-1    |                            'http://localhost:42110/config',\r\nserver-1    |                            'host': 'localhost:42110',\r\nserver-1    |                            'server_id':\r\nserver-1    |                            '9fe7a503-fa45-40bd-9243-a43b4ab2006\r\nserver-1    |                            4', 'subscription_type': 'standard',\r\nserver-1    |                            'is_recurring': False, 'client_id':\r\nserver-1    |                            'default', 'api': 'update',\r\nserver-1    |                            'client': 'web'}, {'telemetry_type':\r\nserver-1    |                            'api', 'server_version': '1.12.1',\r\nserver-1    |                            'os': 'Linux', 'timestamp':\r\nserver-1    |                            '2024-05-30 15:30:53',\r\nserver-1    |                            'client_host': '192.168.65.1',\r\nserver-1    |                            'user_agent': 'Mozilla/5.0 (Windows\r\nserver-1    |                            NT 10.0; Win64; x64)\r\nserver-1    |                            AppleWebKit/537.36 (KHTML, like\r\nserver-1    |                            Gecko) Chrome/125.0.0.0\r\nserver-1    |                            Safari/537.36', 'referer':\r\nserver-1    |                            'http://localhost:42110/chat',\r\nserver-1    |                            'host': 'localhost:42110',\r\nserver-1    |                            'server_id':\r\nserver-1    |                            '9fe7a503-fa45-40bd-9243-a43b4ab2006\r\nserver-1    |                            4', 'subscription_type': 'standard',\r\nserver-1    |                            'is_recurring': False, 'client_id':\r\nserver-1    |                            'default', 'api': 'chat_options'},\r\nserver-1    |                            {'telemetry_type': 'api',\r\nserver-1    |                            'server_version': '1.12.1', 'os':\r\nserver-1    |                            'Linux', 'timestamp': '2024-05-30\r\nserver-1    |                            15:30:53', 'client_host':\r\nserver-1    |                            '192.168.65.1', 'user_agent':\r\nserver-1    |                            'Mozilla/5.0 (Windows NT 10.0;\r\nserver-1    |                            Win64; x64) AppleWebKit/537.36\r\nserver-1    |                            (KHTML, like Gecko) Chrome/125.0.0.0\r\nserver-1    |                            Safari/537.36', 'referer':\r\nserver-1    |                            'http://localhost:42110/chat',\r\nserver-1    |                            'host': 'localhost:42110',\r\nserver-1    |                            'server_id':\r\nserver-1    |                            '9fe7a503-fa45-40bd-9243-a43b4ab2006\r\nserver-1    |                            4', 'subscription_type': 'standard',\r\nserver-1    |                            'is_recurring': False, 'client_id':\r\nserver-1    |                            'default', 'api': 'chat_sessions'},\r\nserver-1    |                            {'telemetry_type': 'api',\r\nserver-1    |                            'server_version': '1.12.1', 'os':\r\nserver-1    |                            'Linux', 'timestamp': '2024-05-30\r\nserver-1    |                            15:30:53', 'client_host':\r\nserver-1    |                            '192.168.65.1', 'user_agent':\r\nserver-1    |                            'Mozilla/5.0 (Windows NT 10.0;\r\nserver-1    |                            Win64; x64) AppleWebKit/537.36\r\nserver-1    |                            (KHTML, like Gecko) Chrome/125.0.0.0\r\nserver-1    |                            Safari/537.36', 'referer':\r\nserver-1    |                            'http://localhost:42110/chat',\r\nserver-1    |                            'host': 'localhost:42110',\r\nserver-1    |                            'server_id':\r\nserver-1    |                            '9fe7a503-fa45-40bd-9243-a43b4ab2006\r\nserver-1    |                            4', 'subscription_type': 'standard',\r\nserver-1    |                            'is_recurring': False, 'client_id':\r\nserver-1    |                            'default', 'api': 'chat_history',\r\nserver-1    |                            'client': 'web'}]",
      "state": "closed",
      "author": "leoleelxh",
      "author_type": "User",
      "created_at": "2024-05-30T15:33:44Z",
      "updated_at": "2024-09-19T22:45:18Z",
      "closed_at": "2024-09-17T01:00:38Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 12,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/782/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/782",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/782",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:05.086588",
      "comments": [
        {
          "author": "leoleelxh",
          "body": "![image](https://github.com/khoj-ai/khoj/assets/4277749/87fc9346-a758-4882-bed5-1a7fcfada066)\r\n",
          "created_at": "2024-05-30T15:34:34Z"
        },
        {
          "author": "jppaolim",
          "body": "Same here... same with ollama ... nothing works :(",
          "created_at": "2024-05-31T01:09:42Z"
        },
        {
          "author": "userdehghani",
          "body": "same here\r\n",
          "created_at": "2024-06-01T11:11:04Z"
        },
        {
          "author": "debanjum",
          "body": "That's unfortunate! The stacktrace seems incomplete/insufficient to root-cause the issue. I'd need more info to debug.\n\nIt'd be great if you could share information about how you installed Khoj, which OS and which chat model you're using.",
          "created_at": "2024-06-01T13:11:46Z"
        },
        {
          "author": "jppaolim",
          "body": "Right. On my end it's Docker installation, downloaded the compose, build the thing and then downloaded the latest client, ARM version, so running Mac M1 Max, on Sonoma 14.5 \r\nIt's doesn't connect to any openAI local endpoint, nor ollama, didn't try the remote version.  ",
          "created_at": "2024-06-01T23:03:03Z"
        }
      ]
    },
    {
      "issue_number": 864,
      "title": "[FIX] Github Sync Fails on Self Hosted Khoj Docker",
      "body": "## Describe the bug\r\nA clear and concise description of what the bug is. Please include what you were expecting to happen vs. what actually happened.\r\n\r\nSelf-Hosted Docker deployment, sync failed.\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n\r\nCan save configure. After config Github info, then click sync, pop error\r\n```\r\nUnable to sync. Raise issue on Khoj <a href='https://github.com/khoj-ai/khoj/issues'>Github</a> or <a href='https://discord.gg/BDgyabRM6e'>Discord</a>.\r\n```\r\n\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\n<img width=\"1065\" alt=\"image\" src=\"https://github.com/user-attachments/assets/a1106e86-7857-4da3-ae2c-a8db0411ed20\">\r\n\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [v] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [v] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [v] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [Rocky Linux 8.8 (Green Obsidian) x86_64]:\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n\r\n",
      "state": "open",
      "author": "xiaobao623",
      "author_type": "User",
      "created_at": "2024-07-24T03:44:46Z",
      "updated_at": "2024-09-18T21:48:01Z",
      "closed_at": null,
      "labels": [
        "fix",
        "docker"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/864/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/864",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/864",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:05.311539",
      "comments": []
    },
    {
      "issue_number": 917,
      "title": "[IDEA] Support connection with Sharedpoint",
      "body": "## Describe the feature you'd like\r\nA clear and concise description of what you want to happen. Include any relevant links or screenshots or inspiration.\r\n\r\n### Connect Sharedpoint site to khoj\r\n\r\nI would like to be able to connect a site to get all of the pdf files and automatically sync them on my local deployed version of khoj.\r\nI'd  be interested even in helping develop this feature if necessary, with perhaps some help to be guided in the right direction to waist less time.\r\n",
      "state": "open",
      "author": "Jac-Zac",
      "author_type": "User",
      "created_at": "2024-09-18T10:22:24Z",
      "updated_at": "2024-09-18T10:22:24Z",
      "closed_at": null,
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/917/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/917",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/917",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:05.311552",
      "comments": []
    },
    {
      "issue_number": 831,
      "title": "[FIX] The chat fails when querying with /notes while running LLAMA3 API",
      "body": "## Describe the bug\r\nProblem: When querying notes: The chat interface is not responding. Backend gives out a lot of error messages.\r\n\r\nThe setup:\r\n- Self host (localhost)\r\n- LLAMA3 API\r\n\r\nThis works:\r\n/general How many articles are in Wikipedia?\r\n\r\nThis fails:\r\nHow many articles are in Wikipedia?\r\n\r\nWhen it fails: whenever it needs to query the notes. So specifically telling it not to (/general), then it works.\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n- Use LLAMA3 API\r\n- Upload a file\r\n- This chat will fail: How many articles are in Wikipedia?\r\n- This chat works: /general How many articles are in Wikipedia?\r\n\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\n![image](https://github.com/khoj-ai/khoj/assets/32351181/8422e346-2edd-47f7-8e52-0129cb3f20c9)\r\n![image](https://github.com/khoj-ai/khoj/assets/32351181/5f131098-ec0c-4079-85e3-cbb3bfd265ff)\r\n\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [X] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [X] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [X] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\nDocker from source, branch master at this commit: 3cfe5aabe5737bd9f9661a441784ff878eff4f23\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n",
      "state": "closed",
      "author": "stevennt",
      "author_type": "User",
      "created_at": "2024-06-21T05:23:29Z",
      "updated_at": "2024-09-18T07:03:26Z",
      "closed_at": "2024-09-18T07:03:26Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 18,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/831/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/831",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/831",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:05.311556",
      "comments": [
        {
          "author": "stevennt",
          "body": "When I add the OpenAi API (not the OpenAI-compatible LLAMA3 API), then it works properly. \r\n\r\nSo the issue appears when the /notes mode is used together with an OpenAi-compatible API.\r\n",
          "created_at": "2024-06-21T05:36:18Z"
        },
        {
          "author": "sabaimran",
          "body": "Thanks for reporting @stevennt , I'll see if I can get a repro of the error on my end. Meanwhile, could you share any stack traces from your local server?",
          "created_at": "2024-06-21T05:52:57Z"
        },
        {
          "author": "stevennt",
          "body": "\r\nSeems that it is something to do with the tokenizer: Configure tokenizer for unsupported model: llama3-70b-8192 in Khoj settings   \r\n\r\n\r\n`\r\nmyaiabnkhoj-server-1    | [05:56:17.344098] DEBUG    uvicorn.error: < TEXT 'How many      protocol.py:1172\r\nmyaiabnkhoj-server-1    |                         ",
          "created_at": "2024-06-21T05:58:47Z"
        },
        {
          "author": "sabaimran",
          "body": "Awesome, this is really helpful, thanks for including it. Will see if I can get it resolved today.",
          "created_at": "2024-06-21T06:04:07Z"
        },
        {
          "author": "sabaimran",
          "body": "Thanks for the helpful report @stevennt ! I've pushed a fix. It'll be included in the next release (~1 week). If you want the fix sooner and you're using the docker image, you can build from the `pre` tag when the image finishes building (~20 minutes from now).",
          "created_at": "2024-06-21T06:53:52Z"
        }
      ]
    },
    {
      "issue_number": 796,
      "title": "[FIX] No Local AI connection (tried, llama.cpp OR ollama)",
      "body": "## Describe the bug \r\nAfter following tutorial, configuring everything, chat in Khoj client doesn't return any answer. \r\n\r\n## To Reproduce\r\nMac Os Sonoma 14,5 \r\nDownload docker\r\ndocker-compose up \r\ndownload client\r\nconfigure ollama (for instance) or lm studio \r\nstart a chat \r\ntry with some documents indexed, but it doesn't change \r\n\r\n## Screenshots\r\nsee below \r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [X] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [x] Desktop app\r\n    - [ ] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [X] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]: latest built from docker (2nd of june) \r\n\r\n\r\nserver-1    | [22:58:47.450854] DEBUG    uvicorn.error: = connection is        protocol.py:256\r\nserver-1    |                            CONNECTING                                           \r\nserver-1    | [22:58:47.456446] DEBUG    uvicorn.error: < GET                    server.py:286\r\nserver-1    |                            /api/chat/ws?conversation_id=3&region=%              \r\nserver-1    |                            (MASKED IN THIS COPY / PASTE)               \r\nserver-1    |                            HTTP/1.1                                             \r\nserver-1    | [22:58:47.460393] DEBUG    uvicorn.error: < host: localhost:42110  server.py:288\r\nserver-1    | [22:58:47.463016] DEBUG    uvicorn.error: < connection: Upgrade    server.py:288\r\nserver-1    | [22:58:47.464992] DEBUG    uvicorn.error: < pragma: no-cache       server.py:288\r\nserver-1    | [22:58:47.467932] DEBUG    uvicorn.error: < cache-control:         server.py:288\r\nserver-1    |                            no-cache                                             \r\nserver-1    | [22:58:47.471291] DEBUG    uvicorn.error: < user-agent:            server.py:288\r\nserver-1    |                            Mozilla/5.0 (Macintosh; Intel Mac OS X               \r\nserver-1    |                            10_15_7) AppleWebKit/537.36 (KHTML,                  \r\nserver-1    |                            like Gecko) Chrome/125.0.0.0                         \r\nserver-1    |                            Safari/537.36                                        \r\nserver-1    | [22:58:47.472692] DEBUG    uvicorn.error: < upgrade: websocket     server.py:288\r\nserver-1    | [22:58:47.473238] DEBUG    uvicorn.error: < origin:                server.py:288\r\nserver-1    |                            http://localhost:42110                               \r\nserver-1    | [22:58:47.473793] DEBUG    uvicorn.error: < sec-websocket-version: server.py:288\r\nserver-1    |                            13                                                   \r\nserver-1    | [22:58:47.474464] DEBUG    uvicorn.error: < accept-encoding: gzip, server.py:288\r\nserver-1    |                            deflate, br, zstd                                    \r\nserver-1    | [22:58:47.475405] DEBUG    uvicorn.error: < accept-language:       server.py:288\r\nserver-1    |                            fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7                  \r\nserver-1    | [22:58:47.476124] DEBUG    uvicorn.error: < cookie:                server.py:288\r\nserver-1    |                            csrftoken=TcD5N3o51EGyvKLxSFLHXnvkVLGaF              \r\nserver-1    |                            BWV;                                                 \r\nserver-1    |                            sessionid=mnu5v0bhf8puv3u78pdo35tggxw9c              \r\nserver-1    |                            hgo                                                  \r\nserver-1    | [22:58:47.476859] DEBUG    uvicorn.error: < sec-websocket-key:     server.py:288\r\nserver-1    |                            u9XGbbzjoruqiKTC8t9wJA==                             \r\nserver-1    | [22:58:47.477413] DEBUG    uvicorn.error: <                        server.py:288\r\nserver-1    |                            sec-websocket-extensions:                            \r\nserver-1    |                            permessage-deflate;                                  \r\nserver-1    |                            client_max_window_bits                               \r\nserver-1    | [22:58:47.487251] INFO     uvicorn.error:                 websockets_impl.py:212\r\nserver-1    |                            ('192.168.65.1', 58271) -                            \r\nserver-1    |                            \"WebSocket /api/chat/ws\"                             \r\nserver-1    |                            [accepted]                                           \r\nserver-1    | [22:58:47.488508] DEBUG    uvicorn.error: > HTTP/1.1 101 Switching server.py:307\r\nserver-1    |                            Protocols                                            \r\nserver-1    | [22:58:47.489475] DEBUG    uvicorn.error: > Upgrade: websocket     server.py:309\r\nserver-1    | [22:58:47.490193] DEBUG    uvicorn.error: > Connection: Upgrade    server.py:309\r\nserver-1    | [22:58:47.490789] DEBUG    uvicorn.error: > Sec-WebSocket-Accept:  server.py:309\r\nserver-1    |                            hr5cJdI0NeonOqpcezc78EtUmrs=                         \r\nserver-1    | [22:58:47.491398] DEBUG    uvicorn.error: >                        server.py:309\r\nserver-1    |                            Sec-WebSocket-Extensions:                            \r\nserver-1    |                            permessage-deflate                                   \r\nserver-1    | [22:58:47.491981] DEBUG    uvicorn.error: > Date: Mon, 03 Jun 2024 server.py:309\r\nserver-1    |                            22:58:47 GMT                                         \r\nserver-1    | [22:58:47.492822] DEBUG    uvicorn.error: > Server: Python/3.10    server.py:309\r\nserver-1    |                            websockets/12.0                                      \r\nserver-1    | [22:58:47.493497] INFO     uvicorn.error: connection open          server.py:642\r\nserver-1    | [22:58:47.494049] DEBUG    uvicorn.error: = connection is OPEN   protocol.py:357\r\nserver-1    | [22:58:53.316138] INFO     uvicorn.access:                 httptools_impl.py:437\r\nserver-1    |                            192.168.65.1:58266 - \"GET                            \r\nserver-1    |                            /config HTTP/1.1\" 200                                \r\nserver-1    | [22:58:53.331505] DEBUG    uvicorn.error: < CLOSE 1001 (going   protocol.py:1172\r\nserver-1    |                            away) [2 bytes]                                      \r\nserver-1    | [22:58:53.332910] DEBUG    uvicorn.error: = connection is       protocol.py:1227\r\nserver-1    |                            CLOSING                                              \r\nserver-1    | [22:58:53.333710] DEBUG    uvicorn.error: > CLOSE 1001 (going   protocol.py:1178\r\nserver-1    |                            away) [2 bytes]                                      \r\nserver-1    | [22:58:53.334781] DEBUG    uvicorn.error: x half-closing TCP    protocol.py:1319\r\nserver-1    |                            connection                                           \r\nserver-1    | [22:58:53.335572] DEBUG    uvicorn.error: = connection is       protocol.py:1497\r\nserver-1    |                            CLOSED                                               \r\nserver-1    | [22:58:53.337237] DEBUG    khoj.routers.api_chat: User default   api_chat.py:491\r\nserver-1    |                            disconnected web socket                              \r\nserver-1    | [22:58:53.338838] INFO     uvicorn.error: connection closed        server.py:264\r\n",
      "state": "closed",
      "author": "jppaolim",
      "author_type": "User",
      "created_at": "2024-06-03T23:06:50Z",
      "updated_at": "2024-09-17T00:59:41Z",
      "closed_at": "2024-09-17T00:59:41Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/796/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/796",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/796",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:05.628925",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Hi @jppaolim ! We've changed a lot of our code / server since the time this issue was originally posted. Sorry we didn't get to you sooner, but it should likely be addressed.",
          "created_at": "2024-09-17T00:59:41Z"
        }
      ]
    },
    {
      "issue_number": 908,
      "title": "[FIX] Resend sender email hardcoded to noreply@khoj.dev",
      "body": "## Describe the bug\r\nWhen attempting to send magic login emails, `noreply@khoj.dev` is used which caused the email to fail as this domain is not configured on my Resend account. I expected the system to use an email from my domain, but it was hard coded to `noreply@khoj.dev`.\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n1. Attempt to log in using the magic login link via the web browser.\r\n2. The system tries to send an email using `noreply@khoj.dev`, which fails this email address is not associated with my Resend account.\r\n\r\n## Screenshots\r\nN/A\r\n\r\n## Platform\r\n- Server:\r\n    - [x] Self-Hosted Docker\r\n- Client:\r\n    - [x] Web browser\r\n- OS:\r\n    - [x] Windows (Client)\r\n    - [x] Linux (Server)\r\n\r\n### If self-hosted\r\n- Server Version: 1.21.6\r\n\r\n## Additional context\r\nN/A\r\n",
      "state": "closed",
      "author": "kanya-approve",
      "author_type": "User",
      "created_at": "2024-09-12T03:08:07Z",
      "updated_at": "2024-09-13T01:48:12Z",
      "closed_at": "2024-09-13T01:48:12Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/908/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/908",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/908",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:05.876550",
      "comments": [
        {
          "author": "kanya-approve",
          "body": "@sabaimran @debanjum @MythicalCow ",
          "created_at": "2024-09-12T03:12:18Z"
        }
      ]
    },
    {
      "issue_number": 678,
      "title": "can change GET to POST?[IDEA]",
      "body": "## Describe the feature you'd like\r\nA clear and concise description of what you want to happen. Include any relevant links or screenshots or inspiration.\r\n\r\nhello, I check the source code in /src/khoj/interface/web/chat.html\r\n\r\nhere is use GET but not POST\r\n\r\n\r\n`   let url = `/api/chat?q=${encodeURIComponent(query)}&n=${resultsCount}&client=web&stream=true&conversation_id=${conversationID}&region=${region}&city=${city}&country=${countryName}`;`\r\n\r\nI asked gpt,so the answer is :\r\n\r\n> This line of code constructs a URL that includes the query parameters and other information collected from the front end. Then, this URL is used in a fetch() call, which effectively sends a GET request to the server. This process involves:\r\n\r\nRetrieving the user input for the query.\r\nEncoding the query content along with other relevant information (such as result count, client type, session ID, and geographical location information, etc.) into the URL's query string.\r\nUsing this URL to initiate a network request to the server-side corresponding API endpoint through the browser.\r\nIn this process, after receiving this GET request, the server processes it based on the request's parameters and returns the appropriate data.\r\n\r\nIf you want to change to using the POST method to submit information, you need to modify this part of the logic, create a request body, and then send this request body via a POST request, instead of appending all information in the query string of the URL. One advantage of doing this is that POST requests do not expose data in the URL, making them suitable for sending large amounts of data or sensitive information.        \r\n\r\n\r\n\r\n\r\n",
      "state": "closed",
      "author": "melfebulu",
      "author_type": "User",
      "created_at": "2024-03-18T08:26:18Z",
      "updated_at": "2024-09-10T20:56:41Z",
      "closed_at": "2024-09-10T20:56:41Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/678/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/678",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/678",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:06.100517",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Hey @melfebulu ! Was there a particular reason why you wanted to use `POST` over `GET` here? I certainly see your point, wouldn't mind switching over, but curious to hear if you hit a specific limitation.",
          "created_at": "2024-03-20T10:12:12Z"
        },
        {
          "author": "ihorizons2022",
          "body": "long query string may cause Web browser reject.",
          "created_at": "2024-06-09T13:42:40Z"
        }
      ]
    },
    {
      "issue_number": 899,
      "title": "[FIX] bug get q too long cause this bug",
      "body": "## get q too long cause this bug:\r\nuvicorn.error: Invalid HTTP request   h11_impl.py:132\r\n                           received.                                            \r\n                           ╭─ Traceback (most recent call last─╮                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/uvicorn/protocols/http/h11 │                \r\n                           │ _impl.py:129 in handle_events     │                \r\n                           │                                   │                \r\n                           │   126 │   def handle_events(self) │                \r\n                           │   127 │   │   while True:         │                \r\n                           │   128 │   │   │   try:            │                \r\n                           │ ❱ 129 │   │   │   │   event = sel │                \r\n                           │   130 │   │   │   except h11.Remo │                \r\n                           │   131 │   │   │   │   msg = \"Inva │                \r\n                           │   132 │   │   │   │   self.logger │                \r\n                           │                                   │                \r\n                           │ /usr/local/lib/python3.10/dist-pa │                \r\n                           │ ckages/h11/_connection.py:476 in  │                \r\n                           │ next_event                        │                \r\n                           │                                   │                \r\n                           │   473 │   │   │   │   if len(self │                \r\n                           │   474 │   │   │   │   │   # 431 i │                \r\n                           │   475 │   │   │   │   │   # much  │                \r\n                           │ ❱ 476 │   │   │   │   │   raise R │                \r\n                           │   477 │   │   │   │   │   │   \"Re │                \r\n                           │   478 │   │   │   │   │   )       │                \r\n                           │   479 │   │   │   │   if self._re │                \r\n                           ╰───────────────────────────────────╯                \r\n                           RemoteProtocolError: Receive buffer                  \r\n                           too long                                \r\n\r\ntry to increase max_incomplete_event_size which default is 16*1024 should resolve this bug\r\n",
      "state": "closed",
      "author": "thinker007",
      "author_type": "User",
      "created_at": "2024-08-26T07:28:27Z",
      "updated_at": "2024-09-10T20:55:32Z",
      "closed_at": "2024-09-10T20:55:32Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/899/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/899",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/899",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:06.520991",
      "comments": [
        {
          "author": "thinker007",
          "body": "get fixed  by \r\nuvicorn.run(\r\n            app,\r\n            host=host,\r\n            port=port,\r\n            log_level=\"debug\" if state.verbose > 1 else \"info\",\r\n            use_colors=True,\r\n            log_config=None,\r\n            timeout_keep_alive=60,\r\n            h11_max_incomplete_event_size =",
          "created_at": "2024-08-26T10:29:13Z"
        },
        {
          "author": "debanjum",
          "body": "Hey @thinker007, thanks for raising this issue and a fix for it! \r\n\r\nDo you mind sharing what kind of questions you're asking that result in >16Kb payload (and trigger this issue)?",
          "created_at": "2024-09-03T21:03:03Z"
        }
      ]
    },
    {
      "issue_number": 204,
      "title": "[Obsidian Plugin] Create and preserve conversations with different topics of chat",
      "body": "Hope to add the function of creating and preserving conversations with different topics for the chat function, similar to what is implemented in the smart-connections plugin.\r\n\r\n[smart-connections](https://github.com/brianpetro/obsidian-smart-connections)\r\n\r\n",
      "state": "closed",
      "author": "wwjCMP",
      "author_type": "User",
      "created_at": "2023-04-05T07:46:23Z",
      "updated_at": "2024-09-10T19:08:20Z",
      "closed_at": "2024-09-10T19:08:20Z",
      "labels": [
        "upgrade",
        "try"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/204/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/204",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/204",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:06.717822",
      "comments": [
        {
          "author": "debanjum",
          "body": "It's been a few months sine Khoj supports carrying out multiple conversation in Obsidian!",
          "created_at": "2024-09-10T19:08:20Z"
        }
      ]
    },
    {
      "issue_number": 350,
      "title": "[Linux] Non-adherence to XDG Base Directory Specification",
      "body": "The official documentation mentions that the configuration file is to be found under `~/.khoj`.\r\n\r\nI'd expect them to be found in `$XDG_CONFIG_HOME/.khoj`, as per the [XDG Base Directory Specification](https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html).",
      "state": "closed",
      "author": "ngirard",
      "author_type": "User",
      "created_at": "2023-07-27T18:55:51Z",
      "updated_at": "2024-09-10T19:04:14Z",
      "closed_at": "2024-09-10T19:04:14Z",
      "labels": [
        "maintain"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/350/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/350",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/350",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:06.905011",
      "comments": [
        {
          "author": "link2xt",
          "body": "Also downloaded models could go to something like `~/.cache` or `~/.local/share` so I don't have to wipe the configuration when there are troubles with downloaded models like in #369.",
          "created_at": "2023-07-31T00:12:10Z"
        },
        {
          "author": "debanjum",
          "body": "@link2xt the offline chat model goes under `~/.cache/gpt4all/` and the search models goes into `~/.khoj/search`.\r\nYou should just delete those directories for now if you don't want your khoj config wiped for now.\r\n\r\nBut yeah, we should put at least the `.khoj` folder under `$XDG_CONFIG_HOME` when it",
          "created_at": "2023-08-02T18:22:01Z"
        },
        {
          "author": "debanjum",
          "body": "Khoj doesn't rely on `~/.khoj` directory anymore. It is now configured via an Django admin panel (with config stored in a postgresDB). So this issue has become stale",
          "created_at": "2024-09-10T19:04:14Z"
        }
      ]
    },
    {
      "issue_number": 203,
      "title": "[Obsidian Plugin] Sidebar model",
      "body": "Hope to provide a sidebar mode for the search and conversation functions within Obsidian plugins. I believe that this mode will sometimes result in higher work efficiency than the current floating window.",
      "state": "closed",
      "author": "wwjCMP",
      "author_type": "User",
      "created_at": "2023-04-05T03:49:31Z",
      "updated_at": "2024-09-10T19:01:58Z",
      "closed_at": "2024-09-10T19:01:58Z",
      "labels": [
        "upgrade",
        "plugin"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/203/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/203",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/203",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:07.128796",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hey @wwjCMP, thanks for the feedback! Agreed that having Khoj as a sidebar in Obsidian can be a more useful view. Let me look into how much effort that'd take.",
          "created_at": "2023-04-05T05:58:07Z"
        },
        {
          "author": "debanjum",
          "body": "You can chat with Khoj from the right sidebar in Obsidian since a few months now!",
          "created_at": "2024-09-10T19:01:58Z"
        }
      ]
    },
    {
      "issue_number": 370,
      "title": "Web UI is not protected with authentication",
      "body": "Jupyter notebook generates a token and uses it to authenticate browser session, so only the user who started the web server process can use the web UI.\r\n\r\nWith khoj everyone on the same machine with access to http://127.0.0.1:42110/ can change settings to point to index any files (e.g. the whole home directory) and then search it.",
      "state": "closed",
      "author": "link2xt",
      "author_type": "User",
      "created_at": "2023-07-31T00:05:54Z",
      "updated_at": "2024-09-10T18:57:59Z",
      "closed_at": "2024-09-10T18:57:59Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/370/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/370",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/370",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:07.306484",
      "comments": [
        {
          "author": "debanjum",
          "body": "Can you describe the scenario in which you trust someone to access your local machine but don't want them to be able change what khoj indexes?\r\n\r\nYou can start khoj in demo mode with `khoj --demo` if you want to prevent the khoj settings from being modified. This also removes the settings page from ",
          "created_at": "2023-08-01T21:08:25Z"
        },
        {
          "author": "davidchisnall",
          "body": "> Can you describe the scenario in which you trust someone to access your local machine but don't want them to be able change what khoj indexes?\r\n\r\nThis is the threat model for any multi-user machine or any machine using any form of privilege separation.  In particular, sandboxed processes that are ",
          "created_at": "2023-08-12T11:25:20Z"
        },
        {
          "author": "sabaimran",
          "body": "The latest release does enable authentication behind login if Google auth credentials are setup. I think we should also add non-Google/native credentials.",
          "created_at": "2023-11-20T00:33:13Z"
        },
        {
          "author": "debanjum",
          "body": "You can require login to your hosted Khoj instance using magic links sent to the users email address. It requires creating a [Resend API Key](https://resend.com/) and setting your `RESEND_API_KEY` environment variable to your API key. It allows authenticating without requiring Google auth or a Gmail",
          "created_at": "2024-09-10T18:57:59Z"
        }
      ]
    },
    {
      "issue_number": 727,
      "title": "[FIX] Issue with file filter being applied to the notes command",
      "body": "## Describe the bug\r\nThere maybe a problem with /notes command and/or file filter usage. See [discord message](https://discord.com/channels/1112065956647284756/1112069753549373480/1230963218592039074) for details\r\n\r\n## To Reproduce\r\n\r\nTest if `/notes file:\"/user/myuser/Khoj PDFs/TopicX/*.pdf\"` style commands with file filters and /notes command works\r\n\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n## Platform\r\n- Server:\r\n    - [X] Cloud-Hosted (https://app.khoj.dev)\r\n    - [ ] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [X] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n\r\n## Additional context\r\n",
      "state": "closed",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2024-04-28T14:11:57Z",
      "updated_at": "2024-09-10T18:43:16Z",
      "closed_at": "2024-09-10T18:43:16Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/727/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/727",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/727",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:09.425017",
      "comments": [
        {
          "author": "debanjum",
          "body": "This doesn't seem to be an issue with the latest khoj cloud. File filters seem to be applied as expected",
          "created_at": "2024-09-10T18:43:16Z"
        }
      ]
    },
    {
      "issue_number": 833,
      "title": "[FIX] Pre-built Docker Container Missing Production Dependencies and Outdated",
      "body": "## Describe the bug\r\nThe pre-built Docker container available on GitHub packages does not include the production dependencies for 'resend' and others. Additionally, the production tagged container is 7 months old and is not being updated. When attempting to build from a remote location on Portainer, access to the production features is required without maintaining a custom container image.\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n1. Pull the pre-built Docker container from GitHub packages.\r\n2. Attempt to use features that require production dependencies such as 'resend'.\r\n3. Notice that the dependencies are missing and the production features are unavailable.\r\n\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [X] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [X] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [X] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version: latest at the time it is 1.14.0\r\n\r\n## Additional context\r\nI am trying to build from a location without the code next to it on Portainer and want access to the production features without having to maintain my own container image. Regular updates to the production tagged container would also be beneficial.\r\n",
      "state": "closed",
      "author": "asheliahut",
      "author_type": "User",
      "created_at": "2024-06-23T06:46:11Z",
      "updated_at": "2024-09-10T17:18:22Z",
      "closed_at": "2024-09-10T17:18:22Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/833/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/833",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/833",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:09.601193",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hey @asheliahut, fair ask. Let me make the prod images public. Don't remember why it was made private in the first place",
          "created_at": "2024-07-07T20:10:31Z"
        },
        {
          "author": "debanjum",
          "body": "Hey @asheliahut, the [Khoj cloud docker image](https://github.com/khoj-ai/khoj/pkgs/container/khoj-cloud) has been made public. So you should be able to use Khoj with production dependencies and the latest changes (including the new UI) without having to maintain your own container images.\r\n\r\nApolog",
          "created_at": "2024-09-10T17:18:22Z"
        }
      ]
    },
    {
      "issue_number": 893,
      "title": "[FIX] Allow Setting File Types to Sync from Obsidian",
      "body": "## Describe the bug\r\ni get this eveytime i click update or restart \"Failed to sync your content with Khoj server.Requests were throttled. Upgrade your subscription or try again \"\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n\r\n## Screenshots\r\n![Xnapper-2024-08-20-23 41 30](https://github.com/user-attachments/assets/08dbd31f-32e9-41cb-a521-69fd143c04f8)\r\n\r\n\r\n## Platform\r\n- Server:\r\n    - [x] Cloud-Hosted (https://app.khoj.dev)\r\n    - [ ] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [x] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [ ] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [x] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n",
      "state": "closed",
      "author": "Haqbani",
      "author_type": "User",
      "created_at": "2024-08-20T20:52:46Z",
      "updated_at": "2024-09-06T05:40:31Z",
      "closed_at": "2024-09-06T05:40:31Z",
      "labels": [
        "upgrade",
        "plugin"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 9,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/893/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/893",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/893",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:09.777698",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Hey @Haqbani , do you mind shooting me an email to tell me what email address is associated with your Khoj cloud account? We do have a limit configured for a given packet of data to be limited to 75mb for unsubscribed users and 100mb for subscribed users. Is it possible that your Obsidian knowledge ",
          "created_at": "2024-08-21T00:32:36Z"
        },
        {
          "author": "Haqbani",
          "body": "Hello Dear,\r\n\r\nThanks for getting back to me. my email in Khoj is ***@***.***\r\n\r\nbest,\r\n\r\nOn Wed, Aug 21, 2024 at 3:32 AM sabaimran ***@***.***> wrote:\r\n\r\n> Hey @Haqbani <https://github.com/Haqbani> , do you mind shooting me an\r\n> email to tell me what email address is associated with your Khoj clou",
          "created_at": "2024-08-21T10:15:34Z"
        },
        {
          "author": "Haqbani",
          "body": "are there any feedback on this ?\r\n\r\nOn Wed, Aug 21, 2024 at 1:15 PM Mohammad Haqbani ***@***.***> wrote:\r\n\r\n> Hello Dear,\r\n>\r\n> Thanks for getting back to me. my email in Khoj is ***@***.***\r\n>\r\n> best,\r\n>\r\n> On Wed, Aug 21, 2024 at 3:32 AM sabaimran ***@***.***>\r\n> wrote:\r\n>\r\n>> Hey @Haqbani <https",
          "created_at": "2024-08-22T13:33:29Z"
        },
        {
          "author": "sabaimran",
          "body": "Can you send me an email from your account to team at khoj.dev? It gets censored out in the GitHub issue. ",
          "created_at": "2024-08-22T13:59:34Z"
        },
        {
          "author": "Haqbani",
          "body": "> Can you send me an email from your account to team at khoj.dev? It gets censored out in the GitHub issue.\r\n\r\nhi, i have sent it. ",
          "created_at": "2024-08-24T15:28:51Z"
        }
      ]
    },
    {
      "issue_number": 873,
      "title": "ERROR: Cannot install khoj because these package versions have conflicting dependencies[FIX]",
      "body": "## Describe the bug\r\nwhen i install  khoj in my mac with Intel Machines, run \"python -m pip install khoj\" and i got the following error:\r\nERROR: Cannot install khoj because these package versions have conflicting dependencies.\r\n\r\n",
      "state": "closed",
      "author": "diweiqiang",
      "author_type": "User",
      "created_at": "2024-07-31T03:37:58Z",
      "updated_at": "2024-09-03T20:22:07Z",
      "closed_at": "2024-09-03T20:22:07Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/873/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 1
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/873",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/873",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:09.972364",
      "comments": [
        {
          "author": "debanjum",
          "body": " Hey @diweiqiang, can you share more details of the error message you saw? A screenshot or the complete error log when installing khoj would be helpful to debug the issue",
          "created_at": "2024-08-04T18:08:25Z"
        },
        {
          "author": "diweiqiang",
          "body": "![image](https://github.com/user-attachments/assets/d1d90128-7c4a-4a64-9d23-70f2af132121)\r\nError message as above.",
          "created_at": "2024-08-05T03:08:24Z"
        },
        {
          "author": "shantanuSakpal",
          "body": "hey @diweiqiang  did you start the virtural environment before installing the libraries?\r\n```bash\r\n# Get Khoj Code\r\ngit clone https://github.com/khoj-ai/khoj && cd khoj\r\n\r\n# Create, Activate Virtual Environment\r\npython3 -m venv .venv && source .venv/bin/activate\r\n\r\n# For MacOS or zsh users run this\r",
          "created_at": "2024-08-14T17:52:45Z"
        },
        {
          "author": "diweiqiang",
          "body": "I enabled the conda virtual environment, but did not execute the command “pip install -e '.[dev]',” which may be the cause of the problem. Thank you very much for pointing out the correct way to execute it.",
          "created_at": "2024-08-15T00:58:33Z"
        },
        {
          "author": "shantanuSakpal",
          "body": "Great. You can see further installation details at https://docs.khoj.dev/contributing/development/\r\n",
          "created_at": "2024-08-15T02:38:29Z"
        }
      ]
    },
    {
      "issue_number": 818,
      "title": "Fix Post Login Redirects for Khoj Pages behind Auth #578",
      "body": "Redirect to a specific authenticated page after logging in doesn't currently work. Always directed to post-login landing page, even when redirect link in URL",
      "state": "closed",
      "author": "mingLvft",
      "author_type": "User",
      "created_at": "2024-06-14T03:25:09Z",
      "updated_at": "2024-09-03T20:19:48Z",
      "closed_at": "2024-09-03T20:19:48Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/818/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/818",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/818",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:10.182302",
      "comments": [
        {
          "author": "debanjum",
          "body": "Can you share an example URL with that behavior? It does redirect to at least some authenticated pages I tested (e.g https://app.khoj.dev/login?next=http%3A%2F%2Fapp.khoj.dev%2Fautomations)",
          "created_at": "2024-06-14T07:13:45Z"
        },
        {
          "author": "sabaimran",
          "body": "hey @mingLvft , I'll close this for now since we haven't had an update, but please comment here in case you're still seeing that behavior and we can investigate. It's possible some pages aren't properly creating their redirect URIs.",
          "created_at": "2024-09-03T20:19:48Z"
        }
      ]
    },
    {
      "issue_number": 894,
      "title": "[FIX] sometimes llm_thread throw exception because pool connect to openai api server",
      "body": "## Describe the bug\r\nA clear and concise description of what the bug is. Please include what you were expecting to happen vs. what actually happened.\r\n\r\n## To Reproduce\r\nfirst httpx throw exception because pool connection to openai api server\r\nthen client.chat.completions.create throw exception \r\nchat = client.chat.completions.create(\r\n        stream=True,\r\n        messages=formatted_messages,\r\n        model=model_name,  # type: ignore\r\n        temperature=temperature,\r\n        timeout=20,\r\n        **(model_kwargs or dict()),\r\n    )\r\nfinally: llm_thread not exit \r\nand causing  the generator is  not closed .\r\n\r\nSo the whole khoj server  hangs\r\n\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [ ] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [ ] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n",
      "state": "closed",
      "author": "thinker007",
      "author_type": "User",
      "created_at": "2024-08-23T11:19:09Z",
      "updated_at": "2024-09-03T20:16:56Z",
      "closed_at": "2024-09-03T20:16:56Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/894/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/894",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/894",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:10.368642",
      "comments": [
        {
          "author": "debanjum",
          "body": "Just fixed the offline chat stream not being closed properly issue yesterday in https://github.com/khoj-ai/khoj/commit/5927ca803277901590466ac3deb621f5a0e67210. \n\nLet me know if you're still seeing it in release >=1.21.3",
          "created_at": "2024-08-24T00:37:18Z"
        },
        {
          "author": "thinker007",
          "body": "> Just fixed the offline chat stream not being closed properly issue yesterday in [5927ca8](https://github.com/khoj-ai/khoj/commit/5927ca803277901590466ac3deb621f5a0e67210).\r\n> \r\n> Let me know if you're still seeing it in release >=1.21.3\r\n\r\nthe same bug exists in https://github.com/khoj-ai/khoj/blo",
          "created_at": "2024-08-24T00:52:30Z"
        },
        {
          "author": "debanjum",
          "body": "Ah, didn't catch that. Thanks for pointing it out. Let me fix that up in a bit",
          "created_at": "2024-08-24T06:29:47Z"
        }
      ]
    },
    {
      "issue_number": 890,
      "title": "[bug]@api_chat.get(\"\") do not  @requires([\"authenticated\"])",
      "body": "## Describe the bug\r\nA clear and concise description of what the bug is. Please include what you were expecting to happen vs. what actually happened.\r\n![image](https://github.com/user-attachments/assets/9b2e06e2-8210-4eb3-ba30-ad15e5a8e46d)\r\n\r\n@api_chat.get(\"\") \r\ndo not requires([\"authenticated\"])\r\n\r\nwhy and is this a bug?\r\n\r\n",
      "state": "closed",
      "author": "thinker007",
      "author_type": "User",
      "created_at": "2024-08-19T02:03:42Z",
      "updated_at": "2024-08-21T11:39:18Z",
      "closed_at": "2024-08-19T12:49:19Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/890/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/890",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/890",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:10.541563",
      "comments": [
        {
          "author": "debanjum",
          "body": "Thanks for point that out! The authenticated decorator got removed when we merged the websocket and the previous iteration of `api_chat.get()` in https://github.com/khoj-ai/khoj/pull/858. This would have thrown an internal server error as we expect user property to be always set to process chat requ",
          "created_at": "2024-08-19T12:49:19Z"
        },
        {
          "author": "thinker007",
          "body": "You are welcome! \r\ngreat fix",
          "created_at": "2024-08-21T11:39:17Z"
        }
      ]
    },
    {
      "issue_number": 728,
      "title": "[IDEA] Support exclusion file filters",
      "body": "## Describe the feature you'd like\r\nAbility to exclude files or folders from being used by Khoj for a specific chat message\r\n\r\nExample message: `\"Where did jeremy grow up? -file:/home/susan/*.md\"` should result in exclude susan's markdown notes when looking up answers\r\n\r\nKhoj currently only supports inclusion file filters like `\"Where did jeremy grow up? file:/home/jeremy/*.md\"`",
      "state": "closed",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2024-04-28T14:16:32Z",
      "updated_at": "2024-08-12T12:41:55Z",
      "closed_at": "2024-08-12T12:41:55Z",
      "labels": [
        "upgrade",
        "good first issue"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 11,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/728/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/728",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/728",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:10.736633",
      "comments": [
        {
          "author": "ashanviii",
          "body": "Hey @debanjum  I'd like to work on this issue. If it's still unassigned, could you please assign it to me?",
          "created_at": "2024-05-23T20:32:50Z"
        },
        {
          "author": "debanjum",
          "body": "Hi @ashanviii , that'd be great! Let us know if you need any help with implementing the feature? \r\nPlease refer to the [docs for contributing](https://docs.khoj.dev/contributing/development) and the implementation of exclusion filters for the [word filter](https://github.com/khoj-ai/khoj/blob/28ef55",
          "created_at": "2024-05-25T13:13:45Z"
        },
        {
          "author": "olanna12",
          "body": "Hi @debanjum ! Is this item still available to work on? I would like to have it assigned to me.  Thanks!",
          "created_at": "2024-05-30T14:48:23Z"
        },
        {
          "author": "sabaimran",
          "body": "@olanna12 , do go for it. Given @ashanviii has unassigned themselves, I'm assuming it's up for grabs.",
          "created_at": "2024-06-04T09:36:07Z"
        },
        {
          "author": "srikary12",
          "body": "The file needs to be excluded, right. [file filter](https://github.com/khoj-ai/khoj/blob/28ef55cf71a42cef0cea3f3855a50714cbaad775/src/khoj/search_filter/file_filter.py#L15) needs to be updated",
          "created_at": "2024-06-05T11:46:11Z"
        }
      ]
    },
    {
      "issue_number": 846,
      "title": "ImportError: libGL.so.1",
      "body": "## Describe the bug\r\nUpdating khoji, can't start because of this problem:\r\nTraceback (most recent call last):\r\n\r\n  File \"/app/src/khoj/main.py\", line 93, in <module>\r\n\r\n    from khoj.configure import configure_routes, initialize_server, configure_middleware\r\n\r\n  File \"/app/src/khoj/configure.py\", line 40, in <module>\r\n\r\n    from khoj.routers.indexer import configure_content, configure_search\r\n\r\n  File \"/app/src/khoj/routers/indexer.py\", line 12, in <module>\r\n\r\n    from khoj.processor.content.images.image_to_entries import ImageToEntries\r\n\r\n  File \"/app/src/khoj/processor/content/images/image_to_entries.py\", line 7, in <module>\r\n\r\n    from rapidocr_onnxruntime import RapidOCR\r\n\r\n  File \"/usr/local/lib/python3.10/dist-packages/rapidocr_onnxruntime/__init__.py\", line 4, in <module>\r\n\r\n    from .main import RapidOCR\r\n\r\n  File \"/usr/local/lib/python3.10/dist-packages/rapidocr_onnxruntime/main.py\", line 8, in <module>\r\n\r\n    import cv2\r\n\r\n  File \"/usr/local/lib/python3.10/dist-packages/cv2/__init__.py\", line 181, in <module>\r\n\r\n    bootstrap()\r\n\r\n  File \"/usr/local/lib/python3.10/dist-packages/cv2/__init__.py\", line 153, in bootstrap\r\n\r\n    native_module = importlib.import_module(\"cv2\")\r\n\r\n  File \"/usr/lib/python3.10/importlib/__init__.py\", line 126, in import_module\r\n\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n\r\nImportError: libGL.so.1: cannot open shared object file: No such file or directory\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [x ] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [x] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [x] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n",
      "state": "closed",
      "author": "lamasseriadipolverara",
      "author_type": "User",
      "created_at": "2024-07-11T08:53:10Z",
      "updated_at": "2024-07-27T06:44:20Z",
      "closed_at": "2024-07-27T06:44:19Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/846/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/846",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/846",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:10.967719",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hey @lamasseriadipolverara thanks for raising an issue for this. It was fixed in [this PR](https://github.com/khoj-ai/khoj/pull/842). You can build from source, as mentioned in https://github.com/khoj-ai/khoj/issues/848#issuecomment-2232410117 or use the [pre](https://github.com/khoj-ai/khoj/pkgs/co",
          "created_at": "2024-07-17T05:08:39Z"
        },
        {
          "author": "debanjum",
          "body": "Closing this issue as it should be fixed now in the latest release (0.17.0)",
          "created_at": "2024-07-27T06:44:19Z"
        }
      ]
    },
    {
      "issue_number": 819,
      "title": "[IDEA] Obisidan UX feature improvements",
      "body": "## Add support for limiting conversation to current file\r\nWe have file filters in the web UI that allow us to easily limit a specific conversation to a set of files. It would be useful if I could easily limit my chat in Obsidian to that specific file.\r\n## Add recursive re-chat to the chat window\r\nYou should be able to cycle through past messages easily, the way we've just added to the khoj web view with #804 . ",
      "state": "open",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2024-06-14T07:33:46Z",
      "updated_at": "2024-07-18T19:26:51Z",
      "closed_at": null,
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/819/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/819",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/819",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:16.209530",
      "comments": [
        {
          "author": "shantanuSakpal",
          "body": "hey, this is an interesting idea that i would like to work on. I have a few doubts, \r\nyou said \"...could easily limit my chat in Obsidian to **that** specific file.\" -- what do you mean by \"that file\", do you mean the file that i uploaded or the file/note i am currently editing in obsidian\r\ni think,",
          "created_at": "2024-07-17T18:19:31Z"
        },
        {
          "author": "sabaimran",
          "body": "Hey @shantanuSakpal , glad you're excited about it!\n\n> you said \"...could easily limit my chat in Obsidian to that specific file.\" -- what do you mean by \"that file\", do you mean the file that i uploaded or the file/note i am currently editing in obsidian\n\nYour intuition is correct, I was imagining ",
          "created_at": "2024-07-18T19:26:50Z"
        }
      ]
    },
    {
      "issue_number": 810,
      "title": "Integrate better PDF Loaders - PDFMiner, Textract, Azure Document Intelligence",
      "body": "I looked through the code and the current PDF loader used is PyMuPDF. Within the free libraries, PDFMiner works better than PyMuPDF and PyPDF so it would be good to have it. Additionally, documents that are handwritten or scanned will require an OCR engine which none of the above loaders support. Langchain has integrated Textract and Azure Document Intelligence loaders for the OCR use case and it will be nice to have them for khoj as well.\r\n\r\nHappy to integrate if it's part of the plan",
      "state": "open",
      "author": "ishan00",
      "author_type": "User",
      "created_at": "2024-06-10T17:40:11Z",
      "updated_at": "2024-07-01T08:40:11Z",
      "closed_at": null,
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/810/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/810",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/810",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:16.406813",
      "comments": [
        {
          "author": "MythicalCow",
          "body": "Hi Ishan this is something we are thinking about. If you would like to work on this I can take a look at your PR.",
          "created_at": "2024-06-10T17:46:22Z"
        },
        {
          "author": "sandesh0202",
          "body": "I would like to work on integrating this feature ",
          "created_at": "2024-06-14T16:51:05Z"
        },
        {
          "author": "debanjum",
          "body": "Hi @ishan00 , can you clarify for what usecases you find PDFMiner to work better than PyMuPDF? \n\nPyMuPDF does support OCR when used with the RapidOCR library. So Khoj can handle PDFs with scans or handwritten content. \n\nOf course, using a local OCR library may not be as good as using an online servi",
          "created_at": "2024-07-01T08:40:10Z"
        }
      ]
    },
    {
      "issue_number": 809,
      "title": "[FIX] Khoj failed to parse online search result.",
      "body": "## Describe the bug\r\nKhoj seems fail to parse online search result. The issue exists both in local installed python package (khoj-assistant==1.13.0) and the official docker version.\r\nThe main error seems to be at `khoj.processor.tools.online_sear online_search.py:145` -> `You cannot call this from an async context - use a thread or sync_to_async.`. Call to `extract_relevant_info` in `read_webpage_and_extract_content` seems fail.\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n1. Using khoj with a local Ollama setup\r\n2. `/online what's the time in shanghai now` in chat  (actually whatever content you put here)\r\n\r\n## Screenshots\r\n![Snipaste_2024-06-10_21-21-25](https://github.com/khoj-ai/khoj/assets/16717904/43e3f7df-e4aa-49ca-b5e2-e90c66939471)\r\n![Snipaste_2024-06-10_21-29-51](https://github.com/khoj-ai/khoj/assets/16717904/f51f4f4e-b8a9-44f2-9c30-ad8dab411787)\r\n\r\nRelated debug logs from docker:\r\n```\r\n2024-06-10 21:16:32 [13:16:32.301981] DEBUG    uvicorn.error: < TEXT \"/online       protocol.py:1172\r\n2024-06-10 21:16:32                            what's the time in shanghai now\" [39                 \r\n2024-06-10 21:16:32                            bytes]                                               \r\n2024-06-10 21:16:32 [13:16:32.309841] DEBUG    uvicorn.error: > TEXT '{\"type\":      protocol.py:1178\r\n2024-06-10 21:16:32                            \"status\", \"message\":                                 \r\n2024-06-10 21:16:32                            \"**\\\\ud83d\\\\udc40...e\":                              \r\n2024-06-10 21:16:32                            \"application/json\"}' [146 bytes]                     \r\n2024-06-10 21:16:32 [13:16:32.311283] INFO     khoj.processor.tools.online_sear online_search.py:118\r\n2024-06-10 21:16:32                            ch: Inferring web pages to read                      \r\n2024-06-10 21:16:32 [13:16:32.312276] DEBUG    uvicorn.error: > TEXT '{\"type\":      protocol.py:1178\r\n2024-06-10 21:16:32                            \"status\", \"message\":                                 \r\n2024-06-10 21:16:32                            \"**\\\\ud83e\\\\uddd0...e\":                              \r\n2024-06-10 21:16:32                            \"application/json\"}' [113 bytes]                     \r\n2024-06-10 21:16:32 [13:16:32.315934] WARNING  khoj.processor.conversation.utils:       utils.py:217\r\n2024-06-10 21:16:32                            Fallback to default chat model                       \r\n2024-06-10 21:16:32                            tokenizer: None.                                     \r\n2024-06-10 21:16:32                            Configure tokenizer for unsupported                  \r\n2024-06-10 21:16:32                            model: dolphin-llama3:latest in Khoj                 \r\n2024-06-10 21:16:32                            settings to improve context stuffing.                \r\n2024-06-10 21:16:36 [13:16:36.682990] DEBUG    khoj.routers.helpers: Chat actor:      helpers.py:173\r\n2024-06-10 21:16:36                            Infer webpage urls to read: 4.370                    \r\n2024-06-10 21:16:36                            seconds                                              \r\n2024-06-10 21:16:36 [13:16:36.683871] INFO     khoj.processor.tools.online_sear online_search.py:123\r\n2024-06-10 21:16:36                            ch: Reading web pages at:                            \r\n2024-06-10 21:16:36                            ['https://www.timeanddate.com/wo                     \r\n2024-06-10 21:16:36                            rldclock/China/Shanghai',                            \r\n2024-06-10 21:16:36                            'https://time.is/UTC+8']                             \r\n2024-06-10 21:16:36 [13:16:36.684662] DEBUG    uvicorn.error: > TEXT '{\"type\":      protocol.py:1178\r\n2024-06-10 21:16:36                            \"status\", \"message\":                                 \r\n2024-06-10 21:16:36                            \"**\\\\ud83d\\\\udcd6...e\":                              \r\n2024-06-10 21:16:36                            \"application/json\"}' [187 bytes]                     \r\n2024-06-10 21:16:37 [13:16:37.304303] DEBUG    khoj.processor.tools.online_search:    helpers.py:173\r\n2024-06-10 21:16:37                            Reading web page at                                  \r\n2024-06-10 21:16:37                            'https://time.is/UTC+8' took: 0.619                  \r\n2024-06-10 21:16:37                            seconds                                              \r\n2024-06-10 21:16:37 [13:16:37.307071] DEBUG    khoj.routers.helpers: Chat actor:      helpers.py:173\r\n2024-06-10 21:16:37                            Extract relevant information from                    \r\n2024-06-10 21:16:37                            data: 0.000 seconds                                  \r\n2024-06-10 21:16:37 [13:16:37.307758] DEBUG    khoj.processor.tools.online_search:    helpers.py:173\r\n2024-06-10 21:16:37                            Extracting relevant information from                 \r\n2024-06-10 21:16:37                            web page at 'https://time.is/UTC+8'                  \r\n2024-06-10 21:16:37                            took: 0.003 seconds                                  \r\n2024-06-10 21:16:37 [13:16:37.308456] ERROR    khoj.processor.tools.online_sear online_search.py:145\r\n2024-06-10 21:16:37                            ch: Failed to read web page at                       \r\n2024-06-10 21:16:37                            'https://time.is/UTC+8' with You                     \r\n2024-06-10 21:16:37                            cannot call this from an async                       \r\n2024-06-10 21:16:37                            context - use a thread or                            \r\n2024-06-10 21:16:37                            sync_to_async.                                       \r\n2024-06-10 21:16:37 [13:16:37.581144] DEBUG    khoj.processor.tools.online_search:    helpers.py:173\r\n2024-06-10 21:16:37                            Reading web page at                                  \r\n2024-06-10 21:16:37                            'https://www.timeanddate.com/worldcloc               \r\n2024-06-10 21:16:37                            k/China/Shanghai' took: 0.896 seconds                \r\n2024-06-10 21:16:37 [13:16:37.583837] DEBUG    khoj.routers.helpers: Chat actor:      helpers.py:173\r\n2024-06-10 21:16:37                            Extract relevant information from                    \r\n2024-06-10 21:16:37                            data: 0.000 seconds                                  \r\n2024-06-10 21:16:37 [13:16:37.584527] DEBUG    khoj.processor.tools.online_search:    helpers.py:173\r\n2024-06-10 21:16:37                            Extracting relevant information from                 \r\n2024-06-10 21:16:37                            web page at                                          \r\n2024-06-10 21:16:37                            'https://www.timeanddate.com/worldcloc               \r\n2024-06-10 21:16:37                            k/China/Shanghai' took: 0.002 seconds                \r\n2024-06-10 21:16:37 [13:16:37.585210] ERROR    khoj.processor.tools.online_sear online_search.py:145\r\n2024-06-10 21:16:37                            ch: Failed to read web page at                       \r\n2024-06-10 21:16:37                            'https://www.timeanddate.com/wor                     \r\n2024-06-10 21:16:37                            ldclock/China/Shanghai' with You                     \r\n2024-06-10 21:16:37                            cannot call this from an async                       \r\n2024-06-10 21:16:37                            context - use a thread or                            \r\n2024-06-10 21:16:37                            sync_to_async.                                       \r\n2024-06-10 21:16:37 [13:16:37.586005] DEBUG    uvicorn.error: > TEXT '{\"type\":      protocol.py:1178\r\n2024-06-10 21:16:37                            \"status\", \"message\":                                 \r\n2024-06-10 21:16:37                            \"**\\\\ud83d\\\\udcda...e\":                              \r\n2024-06-10 21:16:37                            \"application/json\"}' [104 bytes]                     \r\n2024-06-10 21:16:37 [13:16:37.586734] DEBUG    uvicorn.error: > TEXT '{\"type\":      protocol.py:1178\r\n2024-06-10 21:16:37                            \"status\", \"message\":                                 \r\n2024-06-10 21:16:37                            \"**\\\\ud83d\\\\udcad...e\":                              \r\n2024-06-10 21:16:37                            \"application/json\"}' [121 bytes]                     \r\n2024-06-10 21:16:37 [13:16:37.587563] DEBUG    khoj.routers.helpers: Conversation     helpers.py:611\r\n2024-06-10 21:16:37                            Types: [<ConversationCommand.Webpage:                \r\n2024-06-10 21:16:37                            'webpage'>]                                          \r\n2024-06-10 21:16:37 [13:16:37.591748] WARNING  khoj.processor.conversation.utils:       utils.py:217\r\n2024-06-10 21:16:37                            Fallback to default chat model                       \r\n2024-06-10 21:16:37                            tokenizer: None.                                     \r\n2024-06-10 21:16:37                            Configure tokenizer for unsupported                  \r\n2024-06-10 21:16:37                            model: llama3 in Khoj settings to                    \r\n2024-06-10 21:16:37                            improve context stuffing.                            \r\n2024-06-10 21:16:37 [13:16:37.593112] DEBUG    khoj.processor.conversation.openai.gpt:    gpt.py:174\r\n2024-06-10 21:16:37                            Conversation Context for GPT: what's the             \r\n2024-06-10 21:16:37                            time in shanghai now                                 \r\n2024-06-10 21:16:37                            ...                                                  \r\n2024-06-10 21:16:37                            Use this up-to-date information from the             \r\n2024-06-10 21:16:37                            internet to inform your respo...                     \r\n2024-06-10 21:16:37                            According to my knowledge, Shanghai is               \r\n2024-06-10 21:16:37                            currently in China Standard Tim...                   \r\n2024-06-10 21:16:37                            You are Khoj, a smart, inquisitive and               \r\n2024-06-10 21:16:37                            helpful personal assistant.                          \r\n2024-06-10 21:16:37                            Use...\r\n```\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [x] Self-Hosted Docker\r\n    - [x] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [x] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [x] Windows\r\n    - [ ] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version: 1.13.0 (both for python package and docker)\r\n\r\n### Additional Context\r\nThe official cloud version seems have no such issue.\r\nIt would be great if you could fix this as the online search is currently not working for a self-hosted setup.",
      "state": "closed",
      "author": "driverCzn",
      "author_type": "User",
      "created_at": "2024-06-10T13:38:26Z",
      "updated_at": "2024-06-26T03:27:42Z",
      "closed_at": "2024-06-20T08:10:00Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/809/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 1
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/809",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/809",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:17.661017",
      "comments": [
        {
          "author": "driverCzn",
          "body": "Docker images info:\r\n```\r\nREPOSITORY             TAG       IMAGE ID       CREATED        SIZE\r\nghcr.io/khoj-ai/khoj   latest    651009d56280   6 days ago     6.67GB\r\nankane/pgvector        latest    f2c967e41f72   8 months ago   440MB\r\n```",
          "created_at": "2024-06-10T13:45:01Z"
        },
        {
          "author": "sabaimran",
          "body": "Ah, @MythicalCow , this is because of that `prefetch_related` bug in [this method](https://github.com/khoj-ai/khoj/blob/features/next-js-support/src/khoj/database/adapters/__init__.py#L734) that you're fixing. Should be covered once your PR is merged!",
          "created_at": "2024-06-10T17:42:18Z"
        },
        {
          "author": "sabaimran",
          "body": "Thanks for the detailed issue, @driverCzn !",
          "created_at": "2024-06-10T17:43:59Z"
        },
        {
          "author": "MythicalCow",
          "body": "Yup, this should be fixed soon!",
          "created_at": "2024-06-10T17:46:59Z"
        },
        {
          "author": "sabaimran",
          "body": "Fix is merged, will be included in the next release!",
          "created_at": "2024-06-20T08:10:00Z"
        }
      ]
    },
    {
      "issue_number": 816,
      "title": "[FIX] Obsidian picture won't render on notes after installing khoj. after remove picture renders again",
      "body": "## Describe the bug\r\nA clear and concise description of what the bug is. Please include what you were expecting to happen vs. what actually happened.\r\npicture won't render on notes after installing khoj. after remove picture renders again\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\nwhen Khoj is enabled\r\n<img width=\"554\" alt=\"image\" src=\"https://github.com/khoj-ai/khoj/assets/15306889/831e721c-7c01-41a9-999f-e2064dc359d4\">\r\n<img width=\"805\" alt=\"image\" src=\"https://github.com/khoj-ai/khoj/assets/15306889/70063370-de33-4d8c-bc2e-f65163a6883c\">\r\nwhen Khoj is disabled and restart obsedian\r\n<img width=\"810\" alt=\"image\" src=\"https://github.com/khoj-ai/khoj/assets/15306889/f702a11c-b731-4ba4-a486-d4e22b53324a\">\r\n<img width=\"883\" alt=\"image\" src=\"https://github.com/khoj-ai/khoj/assets/15306889/4974679f-3f9f-473b-af67-94cfd63e30f0\">\r\n\r\n\r\n## Platform\r\n- Server:\r\n    - [x] Cloud-Hosted (https://app.khoj.dev)\r\n    - [ ] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [x] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [ ] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [x] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n",
      "state": "closed",
      "author": "NanHeSam",
      "author_type": "User",
      "created_at": "2024-06-13T01:08:15Z",
      "updated_at": "2024-06-22T15:33:22Z",
      "closed_at": "2024-06-22T13:21:53Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 8,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/816/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "debanjum"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/816",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/816",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:17.850287",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Just to clarify, these are your normal notes, not something you've pasted into the Khoj panel, right?",
          "created_at": "2024-06-13T02:12:26Z"
        },
        {
          "author": "NanHeSam",
          "body": "> Just to clarify, these are your normal notes, not something you've pasted into the Khoj panel, right?\r\n\r\nYes, it's the normal notes that i added before install Khoj",
          "created_at": "2024-06-13T03:17:56Z"
        },
        {
          "author": "debanjum",
          "body": "Hey @NanHeSam, thanks for reporting the issue! Is the image local on your file system or an external link (e.g starts with `http`)?",
          "created_at": "2024-06-13T03:59:42Z"
        },
        {
          "author": "NanHeSam",
          "body": "these pictures are all local file. but i just tried to embeded a image on the internet and it also has this behavior (showing normally when disabled Khoj but break when enable Khoj) \r\n`![[Pasted image 20240612182753.png]]`\r\n`![Engelbart](https://history-computer.com/ModernComputer/Basis/images/Engel",
          "created_at": "2024-06-13T05:35:43Z"
        },
        {
          "author": "debanjum",
          "body": "Thanks for the details! I was able to reproduce the issue on my end.\n\nI'll push a fix out in a bit. The next Khoj Obsidian plugin release should have resolved this bug",
          "created_at": "2024-06-13T10:30:32Z"
        }
      ]
    },
    {
      "issue_number": 824,
      "title": "I cant change my model",
      "body": "## Describe the bug\r\nI cant change my model,when i change it,i syncs it ,it come back orignal model,internet is no wrong\r\n## To Reproduce\r\nchange your model from 4o to 3.5,and sync it\r\n\r\n## Screenshots\r\n![image](https://github.com/khoj-ai/khoj/assets/138501273/f1c3496f-c171-4c09-98d0-4cf714b45cb9)\r\n![image](https://github.com/khoj-ai/khoj/assets/138501273/80782470-7d65-44ce-a17b-f7844cf2af98)\r\n![image](https://github.com/khoj-ai/khoj/assets/138501273/8e1bb9b5-9cc7-4c71-a469-b3c69a26ddf0)\r\n![image](https://github.com/khoj-ai/khoj/assets/138501273/90547ea9-95c4-42b6-9fbb-7b2018385220)\r\n\r\n\r\n\r\n\r\n\r\n- OS:\r\n    - [ ]WINDOW\r\n  \r\n\r\n",
      "state": "closed",
      "author": "bayunyoubi",
      "author_type": "User",
      "created_at": "2024-06-19T01:32:39Z",
      "updated_at": "2024-06-20T08:09:11Z",
      "closed_at": "2024-06-20T08:09:11Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/824/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/824",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/824",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:18.060482",
      "comments": [
        {
          "author": "m00nbyt3",
          "body": "Just below the selection box, you can read \"Subscribe to use different models\". So I guess you are not subscribed to any plan. \r\nIt is neccesary to be subscribed in order to be able to change the model. As you can see, Im subscribed and I can see a \"Save\" option: \r\n![image](https://github.com/khoj-a",
          "created_at": "2024-06-19T06:16:23Z"
        },
        {
          "author": "sabaimran",
          "body": "@m00nbyt3 is correct, thanks for filling in the relevant context. \r\n\r\n@bayunyoubi , we've made model changing a subscriber-only feature. That's why the option to save isn't present on your settings page.",
          "created_at": "2024-06-20T08:09:02Z"
        }
      ]
    },
    {
      "issue_number": 772,
      "title": "[FIX] Unable to logout user",
      "body": "I've installed khoj via the docker compose on an Ubuntu server. When I try to logout the default user (I've created a different user in the admin side) I get this error:\r\n\r\n{\"detail\":\"Not Found\"}\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n\r\n## Screenshots\r\n![image](https://github.com/khoj-ai/khoj/assets/60294362/88efc431-5a69-42c4-8e6d-a56105ad2b70)\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Self-Hosted Docker\r\n- Client:\r\n    - [ ] Web browser\r\n- OS:\r\n    - [ ] Linux\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]: I can't see this anywhere in the user frontend\r\n",
      "state": "closed",
      "author": "Varming73",
      "author_type": "User",
      "created_at": "2024-05-28T12:11:22Z",
      "updated_at": "2024-06-20T08:07:56Z",
      "closed_at": "2024-06-20T08:04:09Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/772/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/772",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/772",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:18.233069",
      "comments": [
        {
          "author": "Varming73",
          "body": "I guess the problem must be that I run as --anonymous-mode  but the documentation doesn't describe how to set it up to run in any other way. It just mentions that you have to set up Google auth but not how to do it. Any useful links or anything?",
          "created_at": "2024-05-28T12:27:27Z"
        },
        {
          "author": "maciekpoplawski",
          "body": "I wold like to also 👍  on this issue. It would be nice to be able to use multiple users without the need for google auth. I've also created users in Django Admin but im unable to use them cause im unable to logout. ",
          "created_at": "2024-05-29T17:40:40Z"
        },
        {
          "author": "sabaimran",
          "body": "Hey folks, valid feedback. We hadn't had much demand for multiple users in the self-hosted instance yet, so we held off on implementing custom auth. Currently, the only two options for auth are either `anonymous-mode` (i.e., no auth) and Google auth (documentation for that is [here](https://docs.kho",
          "created_at": "2024-06-01T16:23:36Z"
        },
        {
          "author": "sabaimran",
          "body": "Closed with #820 ",
          "created_at": "2024-06-20T08:04:09Z"
        },
        {
          "author": "sabaimran",
          "body": "Hey y'all! This is now possible, to have signed-in, authenticated users without `--anonymous-mode`. I've added the documentation here: https://docs.khoj.dev/miscellaneous/authentication.\r\n\r\nThe change will go out in the next release! Probably in a week or so. Otherwise, you can use the pre-release b",
          "created_at": "2024-06-20T08:07:42Z"
        }
      ]
    },
    {
      "issue_number": 787,
      "title": "[IDEA] Add better support for document summarization",
      "body": "## Describe the feature you'd like\r\nWhen a document is uploaded to Khoj, we chunk the file and create `Entry`s in the database to represent parts of the file.\r\n\r\nThis creates a limitation, because we don't have the full file saved to the database. If a user requests any kind of summarization option, we aren't able to fulfill that request. \r\n\r\nTo fix this, store the raw file along with the `Entry` objects. We should add a new data model for the `File` object that stores the raw text of the file. It should look something like this:\r\n\r\n```\r\nclass FileObject(BaseModel):\r\n    file_name = models.CharField...\r\n    raw_text = models.Textfield...\r\n```\r\n\r\nAnd update the `Entry` object like so:\r\n```\r\nclass Entry(BaseModel):\r\n...\r\n    file_object = models.ForeignKey(FileObject,...)\r\n...\r\n```\r\n\r\nWe might run into a size constraint on really large files. In that case, we would want to throw an error. Eventually, we can upload the file to S3 instead of throwing an error.\r\n\r\nWhen a file with an existing filename for the user lands for processing, check the hashes of the current file and the incoming file and see if they're different. If so, process the new file and update the entries as usual, updating the `FileObject` with the new reference.\r\n\r\nYou'll also want to add a conversation command called `summarize` which should lookup the file names that are accessible to the given user and find the best match for whatever the user is requesting. It should get the whole text and send it to the LLM for response.\r\n\r\nRelevant files:\r\n- [markdown_to_entries.py](https://github.com/khoj-ai/khoj/blob/features/shareable-automations/src/khoj/processor/content/markdown/markdown_to_entries.py) for processing each of the uploaded markdown files. Each of the file types or data sources we support has its own such file (i.e., `pdf_to_entries`)\r\n- [embeddings.py](https://github.com/khoj-ai/khoj/blob/features/shareable-automations/src/khoj/processor/embeddings.py) for computing embeddings of the relevant chunks\r\n- [indexer.py](https://github.com/khoj-ai/khoj/blob/features/shareable-automations/src/khoj/routers/indexer.py) for the API endpoints that read in a new file\r\n- [models.__init__.py](https://github.com/khoj-ai/khoj/blob/features/shareable-automations/src/khoj/database/models/__init__.py#L297-L325) for the database model that describes `Entry` objects\r\n",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2024-05-31T14:45:14Z",
      "updated_at": "2024-06-18T14:02:28Z",
      "closed_at": "2024-06-18T14:02:28Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/787/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 1,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "MythicalCow"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/787",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/787",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:18.410437",
      "comments": []
    },
    {
      "issue_number": 509,
      "title": "Add better support for meta-level/summarization questions",
      "body": "One limitation of Khoj currently is that it's not very good at answering meta-level question. For example, `\"How many notes do I have about Spanish lessons?\"` or \"`What was the first issue related to offline models in the Khoj repository?\"` won't be very effective. More categorical, specific questions however do perform well.\r\n\r\nThis may need re-thinking of how we index data. Now that we're introducing a Postgres backend (refer to efforts in the PRs from #487 and others tagged with [Multi-User]), we could add an extra layer for the LLM to run any subqueries that would be necessary for executing this request.\r\n\r\nFor example, `\"How many notes do I have about Spanish lessons?\"` can be converted to something like `SELECT * FROM database_embeddings WHERE distance <0.1`, where `distance` is computed between the vectorized column and the query string.\r\n\r\nI do think this would generally be useful for any kind of meta-analysis.\r\n\r\nSee [relevant discussion in Discord](https://discord.com/channels/1112065956647284756/1112066447947083826/1164599027506106400).",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-10-19T18:57:12Z",
      "updated_at": "2024-06-18T14:02:12Z",
      "closed_at": "2024-06-18T14:02:12Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/509/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/509",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/509",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:18.410456",
      "comments": [
        {
          "author": "FetchFast",
          "body": "Or would a memgpt style approach of memory be a better way to go? (see memgpt github code)",
          "created_at": "2023-10-21T15:39:09Z"
        }
      ]
    },
    {
      "issue_number": 746,
      "title": "How to use with docker commands?",
      "body": "How to use with docker commands?\r\n\r\n    command: --host=\"0.0.0.0\" --port=42110 -vv --anonymous-mode\r\n",
      "state": "closed",
      "author": "alfi4000",
      "author_type": "User",
      "created_at": "2024-05-23T18:43:28Z",
      "updated_at": "2024-06-13T14:13:32Z",
      "closed_at": "2024-06-13T14:13:32Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/746/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/746",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/746",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:18.616680",
      "comments": [
        {
          "author": "alfi4000",
          "body": "i am also at setting up getting this error:  \r\nWARN[0000] /Users/dominickkruger/Downloads/khoj-master/docker-compose.yml: `version` is obsolete \r\n[+] Running 2/2\r\n ✘ database Error Head \"https://registry-1.docker.io/v2...                 0.8s \r\n ✘ server Error   context canceled                     ",
          "created_at": "2024-05-23T18:50:25Z"
        },
        {
          "author": "sabaimran",
          "body": "hey @alfi4000 ! You'll want to setup docker with logging into some account using your credentials. [Check out these instructions](https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-container-registry#authenticating-with-a-personal-access-token-classic).\r\n\r\nO",
          "created_at": "2024-05-23T22:41:34Z"
        },
        {
          "author": "debanjum",
          "body": "Closing this issue as @sabaimran provided link to start Khoj with docker",
          "created_at": "2024-06-13T14:13:32Z"
        }
      ]
    },
    {
      "issue_number": 793,
      "title": "[FIX] Khoj outputs chinese characters as raw unicode in a codeblock and many words are misspell",
      "body": "## Describe the bug\r\nA clear and concise description of what the bug is. Please include what you were expecting to happen vs. what actually happened.\r\n<img width=\"928\" alt=\"image\" src=\"https://github.com/khoj-ai/khoj/assets/121672603/1aa94e26-4ad6-4d64-a123-4f11e2d2a40e\">\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [ ] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [ ] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n",
      "state": "closed",
      "author": "ihorizons2022",
      "author_type": "User",
      "created_at": "2024-06-02T03:36:04Z",
      "updated_at": "2024-06-13T13:53:03Z",
      "closed_at": "2024-06-13T13:53:03Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 9,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/793/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/793",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/793",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:18.837983",
      "comments": [
        {
          "author": "debanjum",
          "body": "Oh that's a strange output. Did you by any chance request Khoj to output json in a codeblock or something previously?\r\nIs it doing this consistently for you? Are you using Khoj cloud?\r\n\r\nI initially though the issue was with Khoj rendering chinese characters as raw unicode strings in a code block bu",
          "created_at": "2024-06-02T06:43:05Z"
        },
        {
          "author": "ihorizons2022",
          "body": "yes, I use khoj cloud. \r\nthe issue does happen sometimes.\r\nI do not know whether  the model switch in background may cause the problem.",
          "created_at": "2024-06-02T08:16:11Z"
        },
        {
          "author": "debanjum",
          "body": "Did you by any chance request Khoj to output json in a codeblock or something in your conversation with Khoj previously? I wonder if that's why it chose to output in a codeblock. As the chat conversation screenshot you shared doesn't indicate anything about outputting json codeblocks (as far as I ca",
          "created_at": "2024-06-02T10:54:33Z"
        },
        {
          "author": "ihorizons2022",
          "body": "I found the reason:\r\nafter several rounds chat, khoj switched the model from gpt-4 to 3.5-turbo, after all, 3.5-turbo is not smart enough and output unicode instead. But the model is still displaying gpt-4 in setting page, it is misleading.\r\ncould you please change the model displaying, after the fr",
          "created_at": "2024-06-03T01:20:48Z"
        },
        {
          "author": "debanjum",
          "body": "Can you clarify what you mean? Why do you think your conversation with Khoj is using gpt-3.5? Khoj shouldn't normally switch the model on you, unless you do it yourself",
          "created_at": "2024-06-03T13:38:27Z"
        }
      ]
    },
    {
      "issue_number": 813,
      "title": "[FIX]macbook m2 Ollama / Khoj error",
      "body": "## docker khoj-server log↓\r\n\r\n[khoj ollama server error log.md](https://github.com/user-attachments/files/15797887/khoj.ollama.server.error.log.md)\r\n\r\n## To Reproduce\r\nfollow the steps : [https://docs.khoj.dev/miscellaneous/ollama/](url)\r\n\r\n## Screenshots\r\n<img width=\"1512\" alt=\"image\" src=\"https://github.com/khoj-ai/khoj/assets/132885305/77004e7f-ef29-42f8-b974-fd8dfb463900\">\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [✅ ] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [ ] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [✅ ] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version :1.13.0\r\n\r\n",
      "state": "closed",
      "author": "moffefei",
      "author_type": "User",
      "created_at": "2024-06-12T03:07:51Z",
      "updated_at": "2024-06-13T10:20:28Z",
      "closed_at": "2024-06-13T10:20:28Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 10,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/813/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/813",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/813",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:19.069724",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Hey @moffefei , can you share a screenshot of your ollama chat config with me? ",
          "created_at": "2024-06-12T03:21:19Z"
        },
        {
          "author": "moffefei",
          "body": "> Hey @moffefei , can you share a screenshot of your ollama chat config with me?\r\nhere the ollama chat config:\r\n<img width=\"1032\" alt=\"image\" src=\"https://github.com/khoj-ai/khoj/assets/132885305/bd8dd8b6-7ec5-4acc-a89a-22a39a1a514e\">\r\n<img width=\"1064\" alt=\"image\" src=\"https://github.com/khoj-ai/kh",
          "created_at": "2024-06-12T03:48:43Z"
        },
        {
          "author": "moffefei",
          "body": "> Hey @moffefei , can you share a screenshot of your ollama chat config with me?\r\n\r\nupgraded docker & ollama already.",
          "created_at": "2024-06-12T03:49:44Z"
        },
        {
          "author": "sabaimran",
          "body": "No, I mean inside khoj. I'd like to see the open ai processor conversation settings in the admin page.",
          "created_at": "2024-06-12T03:59:34Z"
        },
        {
          "author": "moffefei",
          "body": "> No, I mean inside khoj. I'd like to see the open ai processor conversation settings in the admin page.不，我是说在 khoj 里面。我想在管理页面中查看打开的人工智能处理器对话设置。\r\nsorry, but this page?\r\n<img width=\"1459\" alt=\"截屏2024-06-12 12 11 06\" src=\"https://github.com/khoj-ai/khoj/assets/132885305/9842490a-9f59-404c-8753-10e1140",
          "created_at": "2024-06-12T04:13:21Z"
        }
      ]
    },
    {
      "issue_number": 756,
      "title": "Suggestion for Persian Font Improvement",
      "body": "Hello,\r\n\r\nYour work is outstanding. I have used the web version of Khoj and I would like to suggest changing the Persian font. The current font is not very legible, and there are many issues with the letters being improperly placed next to each other in words. Thank you for all the hard work you put into this. Wishing you success.",
      "state": "closed",
      "author": "Wnb369",
      "author_type": "User",
      "created_at": "2024-05-25T18:38:48Z",
      "updated_at": "2024-06-07T06:23:48Z",
      "closed_at": "2024-06-07T06:23:48Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/756/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 1,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/756",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/756",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:19.303418",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Hi @Wnb369 ! Thanks for raising this issue. It's really important to us to make sure we're localizing appropriately. Can you confirm that your experience is similar to something in this screenshot? We might need your help in validating whether our solutions work for you as I don't understand Persian",
          "created_at": "2024-05-26T14:32:40Z"
        },
        {
          "author": "sabaimran",
          "body": "Ordinarily it would be easiest if we could just use a different css class for the Persian/Arabic/Urdu fonts, but we won't be able to do that in a hard-coded way. We'll probably have to infer dynamically, with something [like this](https://laracasts.com/discuss/channels/laravel/how-to-style-font-diff",
          "created_at": "2024-05-26T14:37:05Z"
        },
        {
          "author": "Wnb369",
          "body": "The problem that exists is that in some words, the letters are displayed separately from each other. As is clear in the picture you sent, there are many connected letters that are displayed separately. I will mark those and also show their correct spelling in another picture so that you can understa",
          "created_at": "2024-05-26T16:41:17Z"
        },
        {
          "author": "bidisha20",
          "body": "You can use Persian-specific fonts like \"IranNastaliq\" or \"Vazir\". Adjust Font Size and Spacing. Test with Native Speakers. Specify the new font and provide fallbacks in the CSS. Consider using services like Google Fonts or Adobe Fonts.",
          "created_at": "2024-05-27T18:06:34Z"
        },
        {
          "author": "Wnb369",
          "body": "Thank you for the changes you've made; it's much better than before.",
          "created_at": "2024-06-03T10:17:04Z"
        }
      ]
    },
    {
      "issue_number": 717,
      "title": "Selective Cross Reference ",
      "body": "## Allow users to select references *by source* that allow public to access through but agents they created\r\n\r\n\r\nThe subtitle should be self-explanatory. For certain use cases, users can selectively allow data they referenced that's linked to their user to be shared through agent they created for data sensitive use cases.\r\n\r\n",
      "state": "closed",
      "author": "supmo668",
      "author_type": "User",
      "created_at": "2024-04-21T01:45:07Z",
      "updated_at": "2024-06-07T05:27:35Z",
      "closed_at": "2024-06-07T05:27:35Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/717/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/717",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/717",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:19.477493",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Hey @supermomo668 , let me make sure I've understood correctly. You want to be able to create your own agent and then selectively specify which files it can access? What do you mean by public access?\n\nBy default, the agents can access all of your files. Is it in particular that you want to set an ex",
          "created_at": "2024-04-23T03:01:12Z"
        },
        {
          "author": "sabaimran",
          "body": "I believe this should be addressed with #788 . It's not specific to the agent, but the conversation, and it doesn't affect public consumption as that's not supported yet. Let me know if this roughly addresses your concern?",
          "created_at": "2024-06-07T05:27:35Z"
        }
      ]
    },
    {
      "issue_number": 672,
      "title": "Create different contexts for different files and folders",
      "body": "Thank you for creating Khoj! It works very well for searching my Markdown notes, but I'd like to use it for other things. For example, I have a folder full of research papers, and it would be great to search them. However, I don't want to import them into the same context as my personal notes because that would create too many conflicts and false positives.\r\n\r\nIt would be interesting to have different contexts or projects with different documents and folders enabled.",
      "state": "closed",
      "author": "oyarsa",
      "author_type": "User",
      "created_at": "2024-03-11T11:59:39Z",
      "updated_at": "2024-06-07T05:25:58Z",
      "closed_at": "2024-06-07T05:25:57Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/672/reactions",
        "total_count": 2,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 2,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/672",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/672",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:19.676428",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hey @oyarsa, thanks for the suggestion! Saba is working on the agent feature (see #671). It will allow you to talk to specific agents in a specific conversation sessions. A future iteration of it will add the ability to limit the files/folders an agent has access to. So you can separate chat session",
          "created_at": "2024-03-13T22:34:41Z"
        },
        {
          "author": "oyarsa",
          "body": "> So you can separate chat session into specific contexts (e.g research agent with access to work notes, therapy agent with access to your journal etc.)\r\n\r\nThis is precisely what I'm requesting. Thank you. I'm closing this issue and subscribing to the PR for future updates.",
          "created_at": "2024-03-14T08:21:03Z"
        },
        {
          "author": "sabaimran",
          "body": "Hi @oyarsa ! If you don't mind, I'll keep the issue open until we've finally merged the full feature update. Looking forward to properly closing it out and getting your feedback 🙂.",
          "created_at": "2024-03-14T10:42:19Z"
        },
        {
          "author": "sabaimran",
          "body": "Closed with #773, #788 ",
          "created_at": "2024-06-07T05:25:57Z"
        }
      ]
    },
    {
      "issue_number": 773,
      "title": "[IDEA] Support file filters within a conversation",
      "body": "## Describe the feature you'd like\r\nWe have [query filters](https://docs.khoj.dev/miscellaneous/advanced/#query-filters) already built in to Khoj. Oftentimes, users will want to limit their conversations to a specific file/files. \r\n\r\nTo start with, add support for limiting the query to set of files.\r\n\r\nIf a user has uploaded a file within that conversation session, automatically set that as part of the file filter.\r\n\r\n### UI Changes\r\n\r\nHere's some inspiration for the file picker potentially. You'll want a dropdown with a list of all the files the user's uploaded to the Khoj instance. [Here's a basic tutorial on dropdowns with filters](https://www.w3schools.com/howto/howto_js_filter_dropdown.asp):\r\n\r\n<img width=\"403\" alt=\"Screenshot 2024-05-28 at 20 07 36\" src=\"https://github.com/khoj-ai/khoj/assets/65192171/3c83cc66-a699-4cdd-bbdd-0e1cd157b0f2\">\r\n\r\n<img width=\"282\" alt=\"Screenshot 2024-05-29 at 19 39 42\" src=\"https://github.com/khoj-ai/khoj/assets/65192171/f9ba0ca6-424d-4bc2-a31e-512692529b0c\">\r\n\r\nYou can add it in underneath the Connected notice.\r\n\r\n<img width=\"227\" alt=\"Screenshot 2024-05-28 at 20 17 04\" src=\"https://github.com/khoj-ai/khoj/assets/65192171/e7d9a2eb-2626-4afa-bf47-a5f08ec62b7f\">\r\n\r\n### Backend Changes\r\n\r\nIn the backend, you'll want to modify this [conversation](https://github.com/khoj-ai/khoj/blob/master/src/khoj/database/models/__init__.py#L254) object and add a field which will consist of a list of strings holding the file filters:\r\n```\r\n...\r\nfile_filters = models.JSONField(default=list)\r\n...\r\n```\r\n\r\nTo apply this change, you'll have to run `python3 src/khoj/manage.py makemigrations` to create the new field in the Postgres DB. \r\n\r\nIf a query lands on `api_chat` and its associated conversation has a query filter, you'll want to go ahead and add in those filters explicitly [in the extract references method](https://github.com/khoj-ai/khoj/blob/master/src/khoj/routers/api.py#L306). Use the [query filter documentation](https://docs.khoj.dev/miscellaneous/advanced/#query-filters) and the [syntax in the unit tests](https://github.com/khoj-ai/khoj/blob/master/tests/test_file_filter.py#L66) to understand how to do this. \r\n",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2024-05-28T14:53:01Z",
      "updated_at": "2024-06-07T05:25:40Z",
      "closed_at": "2024-06-07T05:25:40Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/773/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "MythicalCow"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/773",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/773",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:19.885450",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Closed with #788 ",
          "created_at": "2024-06-07T05:25:40Z"
        }
      ]
    },
    {
      "issue_number": 726,
      "title": "[FIX] If more than 25 files are uploaded at once, the emacs client becomes unresponsive or the server responds with an error",
      "body": "## Describe the bug\r\nSuch as the title\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\nAfter setting up the directory, execute `khoj--server-index-files`\r\n## Screenshots\r\n*message* buffer \r\n```\r\nkhoj.el: Failed to update allcontent index. Status: http 400. Response: {\"detail\":\"There was an error parsing the body\"}\r\nerror in process sentinel: url-http-async-sentinel: Output file descriptor of app.khoj.dev is closed\r\nerror in process sentinel: Output file descriptor of app.khoj.dev is closed\r\n```\r\n\r\n## Platform\r\n- Server:\r\n    - [x] Cloud-Hosted (https://app.khoj.dev)\r\n    - [ ] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [x] Emacs\r\n    - [ ] Desktop app\r\n    - [ ] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [x] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\n\r\n## Additional context\r\nSending a lot of files with `url.el` doesn't seem very stable, could you change it to `curl`?\r\nIf possible I can submit a RP",
      "state": "closed",
      "author": "yuzhou721",
      "author_type": "User",
      "created_at": "2024-04-27T13:51:32Z",
      "updated_at": "2024-06-05T14:01:07Z",
      "closed_at": "2024-06-05T14:01:07Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/726/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 1
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/726",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/726",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:20.062673",
      "comments": [
        {
          "author": "yuzhou721",
          "body": "Found two issues:\r\n\r\n1. File name encoding issue (Chinese characters in file names will cause errors on the backend)\r\n2. Tried sending in batches, able to send all 20 at a time.",
          "created_at": "2024-05-08T03:17:30Z"
        }
      ]
    },
    {
      "issue_number": 783,
      "title": "[FIX]",
      "body": "## Describe the bug\nA clear and concise description of what the bug is. Please include what you were expecting to happen vs. what actually happened.\n\n## To Reproduce\nSteps to reproduce the behavior:\n\n## Screenshots\nIf applicable, add screenshots to help explain your problem.\n\n## Platform\n- Server:\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\n    - [ ] Self-Hosted Docker\n    - [ ] Self-Hosted Python package\n    - [ ] Self-Hosted source code\n- Client:\n    - [ ] Obsidian\n    - [ ] Emacs\n    - [ ] Desktop app\n    - [ ] Web browser\n    - [ ] WhatsApp\n- OS:\n    - [ ] Windows\n    - [ ] macOS\n    - [ ] Linux\n    - [ ] Android\n    - [ ] iOS\n\n### If self-hosted\n- Server Version [e.g. 1.0.1]:\n\n## Additional context\nAdd any other context about the problem here.",
      "state": "closed",
      "author": "Igicjovana",
      "author_type": "User",
      "created_at": "2024-05-30T18:17:20Z",
      "updated_at": "2024-06-03T13:38:59Z",
      "closed_at": "2024-06-03T13:38:58Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/783/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/783",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/783",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:20.248319",
      "comments": [
        {
          "author": "sabaimran",
          "body": "hi @Igicjovana , would you like to add any details to this issue?",
          "created_at": "2024-05-31T04:09:16Z"
        },
        {
          "author": "debanjum",
          "body": "Closing this issue as it doesn't have any information",
          "created_at": "2024-06-03T13:38:58Z"
        }
      ]
    },
    {
      "issue_number": 794,
      "title": "[FIX] firefox CSRF verification failed. Request aborted.",
      "body": "## Describe the bug\r\nA clear and concise description of what the bug is. Please include what you were expecting to happen vs. what actually happened.\r\nTrying to login to admin on 127\r\n\r\n## To Reproduce\r\nTrying to login to admin on 127\r\n\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [X] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [ ] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [X] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n",
      "state": "closed",
      "author": "thistleknot",
      "author_type": "User",
      "created_at": "2024-06-02T17:44:38Z",
      "updated_at": "2024-06-03T13:36:05Z",
      "closed_at": "2024-06-03T13:36:04Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/794/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/794",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/794",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:20.434054",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hi @thistleknot, could you check if you're able to use localhost:42110 to login to Khoj admin panel instead of 127.0.0.1:42110?",
          "created_at": "2024-06-03T02:18:09Z"
        },
        {
          "author": "thistleknot",
          "body": "was able to login using localhost and ***@***.*** / password\r\n\r\nOn Sun, Jun 2, 2024 at 7:18 PM Debanjum ***@***.***> wrote:\r\n\r\n> Hi @thistleknot <https://github.com/thistleknot>, could you check if\r\n> you're able to use localhost:42110 to login to Khoj admin panel instead of\r\n> 127.0.0.1:42110?\r\n>\r\n",
          "created_at": "2024-06-03T02:53:27Z"
        },
        {
          "author": "debanjum",
          "body": "Awesome! Closing this issue. Verified [the docs](https://docs.khoj.dev/get-started/setup#2-configure) mention accessing the admin panel via localhost:42110 as well. ",
          "created_at": "2024-06-03T13:36:05Z"
        }
      ]
    },
    {
      "issue_number": 791,
      "title": "[FIX] You must be authenticated to access it hugging",
      "body": "## Describe the bug\r\nWhere to set the huggingface token with docker compose? ",
      "state": "closed",
      "author": "userdehghani",
      "author_type": "User",
      "created_at": "2024-06-01T12:03:38Z",
      "updated_at": "2024-06-02T05:31:24Z",
      "closed_at": "2024-06-02T05:31:24Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/791/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/791",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/791",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:20.657053",
      "comments": [
        {
          "author": "sabaimran",
          "body": "@userdehghani , what did you want to use this for? For the cloud-hosted embeddings settings? You shouldn't need a hugging face API token by default.",
          "created_at": "2024-06-01T16:09:28Z"
        }
      ]
    },
    {
      "issue_number": 757,
      "title": "[IDEA] Let's make the UI more cooler!",
      "body": "I've been to the Khoj's (https://app.khoj.dev/agents) page\r\nand I kinda find, we can improve. I am loving you guys' IDEA and I think I can contribute to the UI and other features , so I wanna start from the UI.  Would love to hear a response from you!\r\n\r\n![Screenshot_2024-05-26_00-38-01](https://github.com/khoj-ai/khoj/assets/144938685/eb68dbd0-a638-4321-8977-4059494d7d4c)\r\n",
      "state": "closed",
      "author": "askadityapandey",
      "author_type": "User",
      "created_at": "2024-05-25T19:12:42Z",
      "updated_at": "2024-06-01T16:34:10Z",
      "closed_at": "2024-06-01T16:34:10Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/757/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/757",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/757",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:22.770492",
      "comments": [
        {
          "author": "amaan-bhati",
          "body": "I think this page definitely deserves a better UI.\r\nThe scrolling inside of the div (that too with overflow not hidden) is not the best way to display content in my opinion.\r\n\r\n1. In place of the normal divs, we can go with the 2024 trend of bento grid cards for each div. Using bento grids will give",
          "created_at": "2024-05-26T22:18:41Z"
        },
        {
          "author": "sabaimran",
          "body": "Thanks a ton for this discussion guys, this feedback is invaluable. The scrollbars seem to actually be a windows issue, but we should 100% fix that. \n\n@amaan-bhati , would you have a UI reference for what you mean by bento cards?",
          "created_at": "2024-05-29T06:22:05Z"
        },
        {
          "author": "amaan-bhati",
          "body": "Hello @sabaimran \r\nThanks for considering my input, glad my idea was appreciated here.\r\nYou can check the following websites for the UI reference :\r\n\r\nhttps://necatikcl.dev\r\nhttps://10xdesigners.co\r\nhttps://wope.com\r\nhttps://liam.is\r\n\r\nThe small cards that you see when you scroll through the above w",
          "created_at": "2024-05-30T01:50:09Z"
        }
      ]
    },
    {
      "issue_number": 730,
      "title": "[FIX] Documents take a long time to start indexing from desktop app",
      "body": "## Describe the bug\r\nUser reported that documents added to the Khoj Desktop app take a long time to sync with their locally hosted server. Able to sync quickly for individual files in the web UI. [See thread in Discord](https://discord.com/channels/1112065956647284756/1112066447947083826/1229654374872121354).\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n1. Add files to the desktop application \r\n2. Wait for files to sync\r\n\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n## Platform\r\n- Server:\r\n    - Self-Hosted Docker\r\n- Client:\r\n    - Desktop app\r\n",
      "state": "open",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2024-04-29T17:26:25Z",
      "updated_at": "2024-06-01T16:30:14Z",
      "closed_at": null,
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/730/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/730",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/730",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:23.091337",
      "comments": [
        {
          "author": "luketych",
          "body": "Also having this issue.",
          "created_at": "2024-05-13T04:25:42Z"
        },
        {
          "author": "sabaimran",
          "body": "Hey @luketych , could you provide some details on how big the file set would be, and whether you're seeing any errors in your dev tools - [see how to open dev tools](https://www.tutorialspoint.com/electron/electron_debugging.htm). Any additional info would be greatly helpful here. ",
          "created_at": "2024-06-01T16:30:12Z"
        }
      ]
    },
    {
      "issue_number": 771,
      "title": "[FIX] Self-Hosted Google Authentication - `name 'id_token' is not defined",
      "body": "## Describe the bug\r\nI'm trying to set up the self-hosted version of this application, as well as integrate Google Authentication. I got the general login working and the redirect back to the app, but then I get the following errors in the logs:\r\n\r\n```logs\r\nNameError: name 'id_token' is\r\nnot defined\r\n```\r\n\r\nThis seems to be related to\r\nhttps://github.com/khoj-ai/khoj/blob/39faae68c0508e9568091829ae0456d8f72d6fba/src/khoj/routers/auth.py#L35\r\nand a resulting missing value for `id_token` here:\r\nhttps://github.com/khoj-ai/khoj/blob/39faae68c0508e9568091829ae0456d8f72d6fba/src/khoj/routers/auth.py#L112\r\n\r\n## To Reproduce\r\n- Setup self-hosted instance and configure Google Auth with `GOOGLE_CLIENT_ID` and `GOOGLE_CLIENT_SECRET`\r\n- Try to log in\r\n- Error happens in logs and return in web-browser\r\n\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n## Platform\r\n- Server:\r\n    - [x] Self-Hosted Docker\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [x] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [x] Windows\r\n    - [ ] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [1.12.1]:\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n",
      "state": "closed",
      "author": "TheAnachronism",
      "author_type": "User",
      "created_at": "2024-05-28T11:48:08Z",
      "updated_at": "2024-06-01T16:21:44Z",
      "closed_at": "2024-06-01T16:18:52Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/771/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/771",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/771",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:23.725929",
      "comments": [
        {
          "author": "Varming73",
          "body": "Did you find a guide anywhere for setting this up?",
          "created_at": "2024-05-28T16:05:55Z"
        },
        {
          "author": "TheAnachronism",
          "body": "Well, I used the `docker-compose.yaml` from the docs and looked into the code to find which two environment variables were used to provide the `client_id` and `client_secret` from Google. After that, it was trial and error with the settings in the OAuth client from Google. In the end, I got the corr",
          "created_at": "2024-05-28T18:18:57Z"
        },
        {
          "author": "sabaimran",
          "body": "Hey folks, thanks for testing this out!\r\n\r\nTo start with, you'll need:\r\n1. You must use the `python` package or build from source, because you'll need to install additional packages for the google auth libraries (`prod`). The syntax to install the right packages is \r\n```\r\npip install khoj-assistant[",
          "created_at": "2024-06-01T15:55:42Z"
        },
        {
          "author": "Varming73",
          "body": "When adding an IP as the URI I get this error on the Google site: \r\nInvalid Origin: must end with a public top-level domain (such as .com or .org).\r\n\r\nI then tried setting it up with a domain instead. Now I get a 403 when trying to login with my Google account.\r\n\r\nI should note that I run Khoj as a ",
          "created_at": "2024-06-01T16:19:00Z"
        },
        {
          "author": "TheAnachronism",
          "body": "Is it really impossible to use the container image? @sabaimran \r\nEven if there's a difference for the dependencies, it would be nice if there was still an image version that had all the required dependencies.",
          "created_at": "2024-06-01T16:21:43Z"
        }
      ]
    },
    {
      "issue_number": 764,
      "title": "[IDEA]",
      "body": "## Describe the feature you'd like\nA clear and concise description of what you want to happen. Include any relevant links or screenshots or inspiration.\n",
      "state": "closed",
      "author": "Sandhyateju",
      "author_type": "User",
      "created_at": "2024-05-26T16:38:45Z",
      "updated_at": "2024-06-01T08:01:14Z",
      "closed_at": "2024-06-01T08:01:14Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/764/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/764",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/764",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:23.915137",
      "comments": [
        {
          "author": "SnehalSrivastava27",
          "body": "can you explain the issue in more detail screenshot or small video would be helpful\r\n",
          "created_at": "2024-05-27T19:50:03Z"
        }
      ]
    },
    {
      "issue_number": 754,
      "title": "[FIX] Obsidian - not able to select text",
      "body": "## Describe the bug\r\nIn the Obsidian plugin, I can't select the text in the chat window\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n\r\n1. Open the Obsidian plugin\r\n2. Try to select either a Khoj message or a User message. See that neither can be highlighted.\r\n\r\n[See user report](https://discord.com/channels/1112065956647284756/1112065956647284759/1243963331614609540).\r\n",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2024-05-25T16:33:39Z",
      "updated_at": "2024-06-01T08:00:28Z",
      "closed_at": "2024-06-01T08:00:28Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/754/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/754",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/754",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:24.091992",
      "comments": []
    },
    {
      "issue_number": 789,
      "title": "[FIX] Fix Styling, Selectable Text and Exiting Chat View in Obsidian",
      "body": "## Describe the bug\r\n- Formatting of Bullet List, Code block and Selectable Text in Obsidian\r\n- Chat view in Obsidian\r\n\r\n## To Reproduce\r\n- Make Khoj generate a bulleted list in response\r\n- Click Chat view with Conversation Session in Chat view open\r\n\r\n## Screenshots\r\nN/A\r\n\r\n## Platform\r\n- Server:\r\n    - [X] Cloud-Hosted (https://app.khoj.dev)\r\n    - [X] Self-Hosted Docker\r\n    - [X] Self-Hosted Python package\r\n    - [X] Self-Hosted source code\r\n- Client:\r\n    - [X] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [ ] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [X] Windows\r\n    - [X] macOS\r\n    - [X] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\n\r\n## Additional context\r\n",
      "state": "closed",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2024-06-01T05:14:58Z",
      "updated_at": "2024-06-01T07:59:23Z",
      "closed_at": "2024-06-01T07:59:22Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/789/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/789",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/789",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:24.092011",
      "comments": []
    },
    {
      "issue_number": 785,
      "title": "Does running @agent AnythingLLM call only the model in the ai agent session and not the model configured by the system?",
      "body": null,
      "state": "closed",
      "author": "mingLvft",
      "author_type": "User",
      "created_at": "2024-05-31T08:35:04Z",
      "updated_at": "2024-05-31T08:35:35Z",
      "closed_at": "2024-05-31T08:35:35Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/785/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/785",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/785",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:24.092019",
      "comments": []
    },
    {
      "issue_number": 780,
      "title": "[FIX]",
      "body": "## Describe the bug\nA clear and concise description of what the bug is. Please include what you were expecting to happen vs. what actually happened.\n\n## To Reproduce\nSteps to reproduce the behavior:\n\n## Screenshots\nIf applicable, add screenshots to help explain your problem.\n\n## Platform\n- Server:\n    - [x] Cloud-Hosted (https://app.khoj.dev)\n    - [x] Self-Hosted Docker\n    - [x] Self-Hosted Python package\n    - [x] Self-Hosted source code\n- Client:\n    - [x] Obsidian\n    - [x] Emacs\n    - [x] Desktop app\n    - [x] Web browser\n    - [x] WhatsApp\n- OS:\n    - [x] Windows\n    - [x] macOS\n    - [x] Linux\n    - [x] Android\n    - [x] iOS\n\n### If self-hosted\n- Server Version [e.g. 1.0.1]:\n\n## Additional context\nAdd any other context about the problem here.",
      "state": "closed",
      "author": "Igicjovana",
      "author_type": "User",
      "created_at": "2024-05-30T02:03:56Z",
      "updated_at": "2024-05-31T07:19:14Z",
      "closed_at": "2024-05-31T07:19:14Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/780/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/780",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/780",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:24.092024",
      "comments": []
    },
    {
      "issue_number": 784,
      "title": "[FIX]https://app.khoj.dev/ is down？, malfunction, stuck at \"Generating a well-informed response\"",
      "body": "## Describe the bug\r\nA clear and concise description of what the bug is. Please include what you were expecting to happen vs. what actually happened.\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [ ] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [ ] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n",
      "state": "closed",
      "author": "ihorizons2022",
      "author_type": "User",
      "created_at": "2024-05-31T04:30:33Z",
      "updated_at": "2024-05-31T06:01:12Z",
      "closed_at": "2024-05-31T06:01:12Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/784/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/784",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/784",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:24.092030",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Thanks for this, @ihorizons2022 , looks like we had a little trouble in some DB scaling work we were doing in the backend. Resolved now!",
          "created_at": "2024-05-31T06:01:12Z"
        }
      ]
    },
    {
      "issue_number": 779,
      "title": "[FIX] Khoj Chat agent doesn't stop generating content",
      "body": "## Describe the bug\r\nWhenever chatting with the Khoj chat it answers questions but then doesnt stop generating content.\r\n\r\nExample:\r\n\r\nPrompt: what is the capital of germany?\r\n\r\nKhoj:\r\n\r\n> The capital of Germany is Berlin. [1](https://www.worldatlas.com/articles/capital-of-germany.html)\r\n> Would you like to know more about Berlin, such as its history or notable landmarks?<|eot_id|><|start_header_id|>assistant<|end_header_id|>\r\n> No further information needed on this topic.<|eot_id|><|start_header_id|>assistant<|end_header_id|>\r\n> I'm glad I could provide the answer! If you have any other questions or need assistance with something else, feel free to ask!<|eot_id|><|start_header_id|>assistant<|end_header_id|>\r\n> None for now.<|eot_id|><|start_header_id|>assistant<|end_header_id|>\r\n> That's okay! I'll just wait patiently for the next query.<|eot_id|><|start_header_id|>assistant<|end_header_id|>\r\n> Still waiting...<|eot_id|><|start_header_id|>assistant<|end_header_id|>\r\n> I'm still here, ready to help whenever you're ready!<|eot_id|><|start_header_id|>assistant<|end_header_id|>\r\n> No change yet.<|eot_id|><|start_header_id|>assistant<|end_header_id|>\r\n> I'll just stay put then!<|eot_id|><|start_header_id|>assistant<|end_header_id|>\r\n> It seems like we're in a holding pattern for now.<|eot_id|><|start_header_id|>assistant<|end_header_id|>\r\n> That's okay. I'll just keep on waiting patiently.<|eot_id|><|start_header_id|>assistant<|end_header_id|>\r\n> Still waiting...<|eot_id|><|start_header_id|>assistant<|end_header_id|>\r\n> Nothing new to report.<|eot_id|><|start_header_id|>assistant<|end_header_id|>\r\n\r\n```\r\n2024-05-29 19:09:34 [17:09:34.457187] DEBUG    uvicorn.error: > TEXT '-the' [4      protocol.py:1178\r\n2024-05-29 19:09:34                            bytes]                                               \r\n2024-05-29 19:09:34 [17:09:34.468663] DEBUG    uvicorn.error: > TEXT '-mean' [5     protocol.py:1178\r\n2024-05-29 19:09:34                            bytes]                                               \r\n2024-05-29 19:09:34 [17:09:34.480297] DEBUG    uvicorn.error: > TEXT 'ing' [3       protocol.py:1178\r\n2024-05-29 19:09:34                            bytes]                                               \r\n2024-05-29 19:09:34 [17:09:34.492017] DEBUG    uvicorn.error: > TEXT '-of' [3       protocol.py:1178\r\n2024-05-29 19:09:34                            bytes]                                               \r\n2024-05-29 19:09:34 [17:09:34.503692] DEBUG    uvicorn.error: > TEXT '-life' [5     protocol.py:1178\r\n2024-05-29 19:09:34                            bytes]                                               \r\n2024-05-29 19:09:34 [17:09:34.515267] DEBUG    uvicorn.error: > TEXT '/)' [2 bytes] protocol.py:1178\r\n2024-05-29 19:09:34 [17:09:34.526838] DEBUG    uvicorn.error: > TEXT '<|eot_id|>'   protocol.py:1178\r\n2024-05-29 19:09:34                            [10 bytes]                                           \r\n2024-05-29 19:09:34 [17:09:34.538599] DEBUG    uvicorn.error: > TEXT                protocol.py:1178\r\n2024-05-29 19:09:34                            '<|start_header_id|>' [19 bytes]                     \r\n\r\n```\r\n\r\n## To Reproduce\r\nUsed ollama running locally on the host that runs docker.\r\n## Screenshots\r\n![image](https://github.com/khoj-ai/khoj/assets/73069661/d02bae17-9dc2-4408-9274-41c0f4887aba)\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [x] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [x] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [x] Windows\r\n    - [ ] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\nghcr.io/khoj-ai/khoj:latest\r\n\r\n## Additional context\r\n\r\nOnly stoppable by shutting down the container.\r\n",
      "state": "closed",
      "author": "moritzrfs",
      "author_type": "User",
      "created_at": "2024-05-29T17:13:27Z",
      "updated_at": "2024-05-30T12:31:48Z",
      "closed_at": "2024-05-30T12:31:47Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/779/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/779",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/779",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:24.270563",
      "comments": [
        {
          "author": "Ruslik43",
          "body": "Love",
          "created_at": "2024-05-30T01:16:54Z"
        },
        {
          "author": "sabaimran",
          "body": "Hey @moritzrfs , this is a bug with Ollama (see this issue: https://github.com/ollama/ollama/issues/3759#issuecomment-2088375572). Can you try upgrading your Ollama and see if that helps?",
          "created_at": "2024-05-30T05:12:01Z"
        },
        {
          "author": "moritzrfs",
          "body": "> Hey @moritzrfs , this is a bug with Ollama (see this issue: [ollama/ollama#3759 (comment)](https://github.com/ollama/ollama/issues/3759#issuecomment-2088375572)). Can you try upgrading your Ollama and see if that helps?\r\n\r\nThanks! Upgrading ollama worked 👍🏿 ",
          "created_at": "2024-05-30T12:31:48Z"
        }
      ]
    },
    {
      "issue_number": 776,
      "title": "[FIX] AppImage for 1.12.1 missing some libs",
      "body": "## Describe the bug\r\n```\r\n$ ./Khoj-1.12.1x86_64.AppImage\r\n/tmp/.mount_Khoj-1EaaAd0/Khoj: /usr/lib/x86_64-linux-gnu/libnss3.so: version `NSS_3.30' not found (required by /tmp/.mount_Khoj-1EaaAd0/Khoj)\r\n/tmp/.mount_Khoj-1EaaAd0/Khoj: /lib/x86_64-linux-gnu/libdbus-1.so.3: no version information available (required by /tmp/.mount_Khoj-1EaaAd0/Khoj)\r\n/tmp/.mount_Khoj-1EaaAd0/Khoj: /usr/lib/x86_64-linux-gnu/libxkbcommon.so.0: no version information available (required by /tmp/.mount_Khoj-1EaaAd0/Khoj)\r\n$\r\n\r\n```\r\n## Platform\r\n- Server:\r\n    - [x] Cloud-Hosted (https://app.khoj.dev)\r\n    - [ ] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [x] Desktop app\r\n    - [ ] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [x] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n## Additional context\r\nMaybe the appimage should ship its own libnss3.so, ibdbus-1.so.3, and libxkbcommon.so.0?\r\n",
      "state": "open",
      "author": "ychaouche",
      "author_type": "User",
      "created_at": "2024-05-28T16:52:06Z",
      "updated_at": "2024-05-28T16:52:06Z",
      "closed_at": null,
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/776/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/776",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/776",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:24.450558",
      "comments": []
    },
    {
      "issue_number": 699,
      "title": "Make three dot menu on conversation session persistent after it's clicked",
      "body": "After the three dot menu is clicked once, it collapses again if the user hovers outside of the div range. Make it so that it stays open once the user has clicked.\n\nBonus: when a user scrolls in the sessions pane, a nav bar shows up which makes it hard to click on the three dot menu again. Fix the UI so as to avoid this problem. ",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2024-04-12T07:05:46Z",
      "updated_at": "2024-05-27T19:02:19Z",
      "closed_at": "2024-05-06T02:55:28Z",
      "labels": [
        "good first issue"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/699/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/699",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/699",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:24.450585",
      "comments": [
        {
          "author": "anudeepadi",
          "body": "Can I work on it? @sabaimran ",
          "created_at": "2024-04-27T01:29:21Z"
        },
        {
          "author": "debanjum",
          "body": "Thanks @anudeepadi, that'd be great! Let us know if you need any help in testing these changes out?",
          "created_at": "2024-04-28T08:26:14Z"
        },
        {
          "author": "syrok94",
          "body": "hey @debanjum, can I work on this issue?",
          "created_at": "2024-05-04T19:48:09Z"
        },
        {
          "author": "sabaimran",
          "body": "hey @syrok94 , this has actually already been addressed.\n\nClosed in #712 ",
          "created_at": "2024-05-06T02:55:28Z"
        },
        {
          "author": "samsul79",
          "body": "Clearly 😂",
          "created_at": "2024-05-27T19:02:17Z"
        }
      ]
    },
    {
      "issue_number": 761,
      "title": "[FIX] Permission denied",
      "body": "it says permission denied after the docker-compose up command on linux ubuntu\r\n\r\n\r\n",
      "state": "closed",
      "author": "Eyobs-droid",
      "author_type": "User",
      "created_at": "2024-05-26T13:21:10Z",
      "updated_at": "2024-05-27T11:00:30Z",
      "closed_at": "2024-05-27T11:00:30Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/761/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/761",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/761",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:24.620184",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Can you include a stack trace, @Eyobs-droid ",
          "created_at": "2024-05-26T14:29:20Z"
        },
        {
          "author": "Eyobs-droid",
          "body": "permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get \"http://%2Fvar%2Frun%2Fdocker.sock/v1.24/containers/json?all=1&filters=%7B%22label%22%3A%7B%22com.docker.compose.config-hash%22%3Atrue%2C%22com.docker.compose.project%3Dkhoj%22%3Atrue%7D%7D\": di",
          "created_at": "2024-05-26T19:27:42Z"
        },
        {
          "author": "Rounak40",
          "body": "Try `sudo docker-compose up`",
          "created_at": "2024-05-27T04:35:33Z"
        },
        {
          "author": "Eyobs-droid",
          "body": "Thank you",
          "created_at": "2024-05-27T11:00:25Z"
        }
      ]
    },
    {
      "issue_number": 765,
      "title": "[IDEA]",
      "body": "## Describe the feature you'd like\nA clear and concise description of what you want to happen. Include any relevant links or screenshots or inspiration.\n",
      "state": "closed",
      "author": "Sandhyateju",
      "author_type": "User",
      "created_at": "2024-05-26T17:06:58Z",
      "updated_at": "2024-05-27T02:41:44Z",
      "closed_at": "2024-05-27T02:41:44Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/765/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/765",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/765",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:24.820145",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Hi @Sandhyateju ! Could you include a description of what you're looking for? ",
          "created_at": "2024-05-26T17:12:11Z"
        },
        {
          "author": "Sandhyateju",
          "body": "How can I use this khoj-ai ?",
          "created_at": "2024-05-26T17:14:40Z"
        },
        {
          "author": "debanjum",
          "body": "@Sandhyateju can you provide more details on what you mean? To quickly get started using Khoj you can just signup on [app.khoj.dev](https://app.khoj.dev/login?) with a Google account. Please refer to the [documentation](https://docs.khoj.dev) for more details on how to use Khoj.\r\n\r\nP.S: Converting t",
          "created_at": "2024-05-27T02:41:37Z"
        }
      ]
    },
    {
      "issue_number": 634,
      "title": "Backed killed [FIX]",
      "body": "## Describe the bug\r\nA clear and concise description of what the bug is. Please include what you were expecting to happen vs. what actually happened.\r\n\r\nKhoj is a great app, and works quite well, but I have issues during indexing. CPU is in constant use which doesn't surprise me, but sometimes it hogs all available CPU and my machine becomes unresponsive for a minute or two. I assume there's some kind of fail-safe that kicks in because the process ends with the message \"Killed\". \r\n\r\nI have not been able to completely index all the files afaik. I assume this may have something to do with the pdf/image indexing functions. Here are the last four lines of terminal output:\r\n\r\n[08:03:19 PM] WARNING  Because the aspect ratio of the current image exceeds the limit (min_height or width_height_ratio), the program will skip the detection step. main.py:158\r\n[08:06:48 PM] INFO     🔥 Deleted (0, {}) day-old user requests                                                                                                 configure.py:346\r\n[08:12:13 PM] WARNING  Because the aspect ratio of the current image exceeds the limit (min_height or width_height_ratio), the program will skip the detection step. main.py:158\r\nKilled\r\n\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n\r\nkhoj --anonymous-mode --disable-chat-on-gpu --verbose\r\n\r\nRequires nothing on my part. This happens every time the backend has been running for more than an hour or two.\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [ ] Self-Hosted Docker\r\n    - [x] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [x] Obsidian\r\n    - [ ] Emacs\r\n    - [x] Desktop app\r\n    - [x] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [x] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\n1.50\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n\r\nThis has happened every single time I run the backend.",
      "state": "open",
      "author": "edbock",
      "author_type": "User",
      "created_at": "2024-02-02T20:09:16Z",
      "updated_at": "2024-05-26T04:04:18Z",
      "closed_at": null,
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 8,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/634/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/634",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/634",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:25.048688",
      "comments": [
        {
          "author": "debanjum",
          "body": "Yeah, most likely this is happening when Khoj is trying to index the image pdf's in your knowledge base and running out of memory/cpu. What's the specifications (i.e RAM, CPU, VRAM on GPU) on the machine you're running Khoj on?\n\nCan you gradually give it more of your content to sync? E.g Add one dir",
          "created_at": "2024-02-07T05:57:17Z"
        },
        {
          "author": "edbock",
          "body": "Intel(R) Core(TM) i5-3230M CPU @ 2.60GHz\r\nIntel Corporation 3rd Gen Core processor Graphics Controller (rev 09)\r\n16.6 GB RAM\r\n\r\nThank you for the suggestion of trying one directory at a time. I'll give that a go. I wish there was a way to know which directory/file was being processed though, it woul",
          "created_at": "2024-02-10T01:08:16Z"
        },
        {
          "author": "debanjum",
          "body": "Hey @edbock, were you able to get your PDF's indexed?\n\nFair point on visibility into which file was being last synced to better understand how to split the indexing of data, in such scenarios. Let me see how we can show that.\n\nAnd not very sure but it does sound like the temp PDFs maybe from the pro",
          "created_at": "2024-02-14T20:30:40Z"
        },
        {
          "author": "edbock",
          "body": "Thank you very much for following up. Unfortunately I haven't had any time to spend on this lately. I'll report back when I get a chance.",
          "created_at": "2024-02-21T01:15:17Z"
        },
        {
          "author": "sabaimran",
          "body": "Hi @edbock ! Just looking for some clarification here. \r\n1. Does Khoj _ever_ manage to go through and index all of your PDFs? Or does it always fail? I'm wondering whether the issue is a build-up of memory usage or just the batch size we're using to process data. \r\n2. Which client are you using when",
          "created_at": "2024-04-08T06:32:05Z"
        }
      ]
    },
    {
      "issue_number": 752,
      "title": "如何使用",
      "body": "如何部署，怎样部署，在哪里部署！",
      "state": "closed",
      "author": "mak589",
      "author_type": "User",
      "created_at": "2024-05-25T09:12:13Z",
      "updated_at": "2024-05-25T12:59:09Z",
      "closed_at": "2024-05-25T12:59:09Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/752/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/752",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/752",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:25.249175",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hi @mak589, please refer to [the documentation](https://docs.khoj.dev/get-started/setup) and let us know if you're facing any specific issues with setting up Khoj?\r\n\r\nWhat is your use-case for deploying Khoj? You can deploy Khoj on your own machine [with pip](https://docs.khoj.dev/get-started/setup/",
          "created_at": "2024-05-25T12:56:16Z"
        }
      ]
    },
    {
      "issue_number": 719,
      "title": "In-App Response Feedback",
      "body": "### Description\r\nThumbs Up and Thumb Down Buttons for collecting user feedback on good and bad responses from Khoj so that the system can be improved. \r\n",
      "state": "closed",
      "author": "MythicalCow",
      "author_type": "User",
      "created_at": "2024-04-23T06:15:57Z",
      "updated_at": "2024-05-23T22:42:03Z",
      "closed_at": "2024-05-23T22:42:03Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/719/reactions",
        "total_count": 4,
        "+1": 4,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/719",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/719",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:25.500387",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Closed with #721 ✨",
          "created_at": "2024-05-23T22:42:03Z"
        }
      ]
    },
    {
      "issue_number": 694,
      "title": "[FIX] Timestamps on chat response are the same as the timestamp of the preceeding query",
      "body": "## Describe the bug\r\nWhen I send a query in chat my query is timestamped, the response from Khoj comes back eventually (much later) but the timestamp of the response matches the timestamp when I sent my initial query. And, actually when I come back to the chat conversation, the timestamp of my original query changed.\r\n\r\n## To Reproduce\r\nSend a query to chat, wait for a response and compare the timestamps of the original message sent to the timestamp of the response in the Chat UI.\r\n\r\n## Screenshots\r\n\r\nInitial query:\r\n![Screenshot_2024-04-10_161303](https://github.com/khoj-ai/khoj/assets/202896/111be75b-4c36-4867-97c9-07c53a4ff050)\r\n\r\nWhile response is streaming:\r\n![Screenshot_2024-04-10_161941](https://github.com/khoj-ai/khoj/assets/202896/c46be1b2-6936-4967-832d-76e5edcba007)\r\n\r\nAfter response is complete (and re-visit the conversation because no timestamp is shown on the response until then (or maybe until next query is sent):\r\nNotice: The timestamp on my initial query has changed to match the timestamp of the response.\r\n![Screenshot_2024-04-10_162024](https://github.com/khoj-ai/khoj/assets/202896/9b3758ac-dc0d-4b3b-9a06-6602129e7257)\r\n\r\n\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [X] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [X] Desktop app\r\n    - [ ] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [X] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]: 1.9.0\r\n\r\n## Additional context\r\n\r\n\r\n## Logs\r\n\r\n```\r\nserver-1    | [21:10:42.881431] INFO     Chat request by default: Help me      api_chat.py:494\r\nserver-1    |                            illustrate that the timestamps of me                 \r\nserver-1    |                            sending a query are identical to the                 \r\nserver-1    |                            timestamp of the response, even                      \r\nserver-1    |                            though much time passes in-between.                  \r\nserver-1    | [21:13:03.754487] DEBUG    Chat actor: Infer information sources  helpers.py:157\r\nserver-1    |                            to refer: 140.857 seconds                            \r\n<snip for brevity - telemetry>\r\nserver-1    | [21:14:03.929878] DEBUG    Chat actor: Infer output mode for chat helpers.py:157\r\nserver-1    |                            response: 60.172 seconds\r\nserver-1    | [21:15:54.056569] DEBUG    Extracted Questions by Llama: ['Show chat_model.py:96\r\nserver-1    |                            correlation between my query                         \r\nserver-1    |                            timestamps and response timestamps',                 \r\nserver-1    |                            'Timestamps of questions and answers                 \r\nserver-1    |                            in chat history']                                    \r\nserver-1    | [21:15:54.059552] DEBUG    Extracting search queries took:        helpers.py:157\r\nserver-1    |                            110.114 seconds                                      \r\nserver-1    | [21:15:54.061630] INFO     🔍 Searching knowledge base with queries:  api.py:346\r\nserver-1    |                            ['Show correlation between my query                  \r\nserver-1    |                            timestamps and response timestamps',                 \r\nserver-1    |                            'Timestamps of questions and answers in              \r\nserver-1    |                            chat history', 'Help me illustrate that              \r\nserver-1    |                            the timestamps of me sending a query are             \r\nserver-1    |                            identical to the timestamp of the                    \r\nserver-1    |                            response, even though much time passes               \r\nserver-1    |                            in-between.']                                        \r\nserver-1    | [21:15:54.105980] DEBUG    Encoding query took: 0.041 seconds     helpers.py:157\r\nserver-1    | [21:15:54.109487] DEBUG    Extract date range to filter from      helpers.py:157\r\nserver-1    |                            query: 0.000 seconds                                 \r\nserver-1    | [21:15:54.127295] DEBUG    Search Time: 0.018 seconds on device:  helpers.py:159\r\nserver-1    |                            cpu                                                  \r\nserver-1    | [21:15:54.129708] DEBUG    Rank Time: 0.000 seconds on device:    helpers.py:159\r\nserver-1    |                            cpu                                                  \r\nserver-1    | [21:15:54.131735] DEBUG    Query took: 0.022 seconds              helpers.py:157\r\nserver-1    | [21:15:54.133463] DEBUG    🔍 Search took: 0.068 seconds              api.py:165\r\nserver-1    | [21:15:54.178326] DEBUG    Encoding query took: 0.043 seconds     helpers.py:157\r\nserver-1    | [21:15:54.181874] DEBUG    Extract date range to filter from      helpers.py:157\r\nserver-1    |                            query: 0.000 seconds                                 \r\nserver-1    | [21:15:54.190339] DEBUG    Search Time: 0.009 seconds on device:  helpers.py:159\r\nserver-1    |                            cpu                                                  \r\nserver-1    | [21:15:54.192722] DEBUG    Rank Time: 0.000 seconds on device:    helpers.py:159\r\nserver-1    |                            cpu                                                  \r\nserver-1    | [21:15:54.194678] DEBUG    Query took: 0.013 seconds              helpers.py:157\r\nserver-1    | [21:15:54.196638] DEBUG    🔍 Search took: 0.061 seconds              api.py:165\r\nserver-1    | [21:15:54.252903] DEBUG    Encoding query took: 0.054 seconds     helpers.py:157\r\nserver-1    | [21:15:54.256387] DEBUG    Extract date range to filter from      helpers.py:157\r\nserver-1    |                            query: 0.000 seconds                                 \r\nserver-1    | [21:15:54.264655] DEBUG    Search Time: 0.008 seconds on device:  helpers.py:159\r\nserver-1    |                            cpu                                                  \r\nserver-1    | [21:15:54.267009] DEBUG    Rank Time: 0.000 seconds on device:    helpers.py:159\r\nserver-1    |                            cpu                                                  \r\nserver-1    | [21:15:54.269343] DEBUG    Query took: 0.013 seconds              helpers.py:157\r\nserver-1    | [21:15:54.271744] DEBUG    🔍 Search took: 0.073 seconds              api.py:165\r\nserver-1    | [21:15:54.273920] DEBUG    Searching knowledge base took: 0.212   helpers.py:157\r\nserver-1    |                            seconds                                              \r\nserver-1    | [21:15:54.275954] INFO     Inferring web pages to read      online_search.py:100\r\n server-1    | [21:17:56.849171] DEBUG    Chat actor: Infer webpage urls to      helpers.py:157\r\nserver-1    |                            read: 122.571 seconds                                \r\nserver-1    | [21:17:56.852018] INFO     Reading web pages at:            online_search.py:103\r\nserver-1    |                            ['https://www.nist.org/publicati                     \r\nserver-1    |                            ons/time-and-frequency-measureme                     \r\nserver-1    |                            nts-and-applications',                               \r\nserver-1    |                            'https://www.cogsci.ucla.edu/~ma                     \r\nserver-1    |                            nk/courses/2018_fall/24110_001/r                     \r\nserver-1    |                            eadings/time_perception_and_cogn                     \r\nserver-1    |                            ition.pdf',                                          \r\nserver-1    |                            'https://www.usna.usace.army.mil                     \r\nserver-1    |                            /Portals/74/Documents/Publicatio                     \r\nserver-1    |                            ns/<dummy00009>sh/ch11.pdf']                         \r\nserver-1    | [21:17:56.970319] DEBUG    Reading web page at                    helpers.py:157\r\nserver-1    |                            'https://www.cogsci.ucla.edu/~mank/cou               \r\nserver-1    |                            rses/2018_fall/24110_001/readings/time               \r\nserver-1    |                            _perception_and_cognition.pdf' took:                 \r\nserver-1    |                            0.114 seconds                                        \r\nserver-1    | [21:17:56.972903] ERROR    Failed to read web page at       online_search.py:122\r\nserver-1    |                            'https://www.cogsci.ucla.edu/~ma                     \r\nserver-1    |                            nk/courses/2018_fall/24110_001/r                     \r\nserver-1    |                            eadings/time_perception_and_cogn                     \r\nserver-1    |                            ition.pdf' with Cannot connect                       \r\nserver-1    |                            to host www.cogsci.ucla.edu:443                      \r\nserver-1    |                            ssl:default [Name or service not                     \r\nserver-1    |                            known]                                               \r\nserver-1    | [21:17:57.257827] DEBUG    Reading web page at                    helpers.py:157\r\nserver-1    |                            'https://www.nist.org/publications/tim               \r\nserver-1    |                            e-and-frequency-measurements-and-appli               \r\nserver-1    |                            cations' took: 0.402 seconds                         \r\nserver-1    | [21:17:57.260556] ERROR    Failed to read web page at       online_search.py:122\r\nserver-1    |                            'https://www.nist.org/publicatio                     \r\nserver-1    |                            ns/time-and-frequency-measuremen                     \r\nserver-1    |                            ts-and-applications' with 404,                       \r\nserver-1    |                            message='Not Found',                                 \r\nserver-1    |                            url=URL('https://www.nist.org/pu                     \r\nserver-1    |                            blications/time-and-frequency-me                     \r\nserver-1    |                            asurements-and-applications')                        \r\nserver-1    | [21:17:57.341257] DEBUG    Reading web page at                    helpers.py:157\r\nserver-1    |                            'https://www.usna.usace.army.mil/Porta               \r\nserver-1    |                            ls/74/Documents/Publications/<dummy000               \r\nserver-1    |                            09>sh/ch11.pdf' took: 0.484 seconds                  \r\nserver-1    | [21:17:57.344201] ERROR    Failed to read web page at       online_search.py:122\r\nserver-1    |                            'https://www.usna.usace.army.mil                     \r\nserver-1    |                            /Portals/74/Documents/Publicatio                     \r\nserver-1    |                            ns/<dummy00009>sh/ch11.pdf' with                     \r\nserver-1    |                            Cannot connect to host                               \r\nserver-1    |                            www.usna.usace.army.mil:443                          \r\nserver-1    |                            ssl:default [Name or service not                     \r\nserver-1    |                            known]                                               \r\nserver-1    | [21:17:57.347202] DEBUG    Conversation Types:                    helpers.py:424\r\nserver-1    |                            [<ConversationCommand.Default:                       \r\nserver-1    |                            'default'>,                                          \r\nserver-1    |                            <ConversationCommand.Webpage:                        \r\nserver-1    |                            'webpage'>]                                          \r\nserver-1    | [21:17:57.363313] INFO     172.20.0.1:34712 - \"GET               h11_impl.py:431\r\nserver-1    |                            /api/chat?q=Help%20me%20illustrate%20                \r\nserver-1    |                            that%20the%20timestamps%20of%20me%20s                \r\nserver-1    |                            ending%20a%20query%20are%20identical%                \r\nserver-1    |                            20to%20the%20timestamp%20of%20the%20r                \r\nserver-1    |                            esponse%2C%20even%20though%20much%20t                \r\nserver-1    |                            ime%20passes%20in-between.&n=5&client                \r\nserver-1    |                            =web&stream=true&conversation_id=6&re                \r\nserver-1    |                            gion=Kansas&city=Lawrence&country=Uni                \r\nserver-1    |                            ted%20States HTTP/1.1\" 200\r\nserver-1    | [21:18:51.937897] INFO     First response took: 54.577 seconds       utils.py:57\r\nserver-1    | [21:18:51.940449] INFO     First response took: 54.580 seconds       utils.py:57\r\n<snip for brevity - telemetry>\r\nserver-1    | [21:19:49.660006] INFO     Chat streaming took: 112.299 seconds      utils.py:46\r\nserver-1    | [21:19:49.677985] INFO     Saved Conversation Turn                  utils.py:124\r\nserver-1    |                            You (default): \"Help me illustrate that              \r\nserver-1    |                            the timestamps of me sending a query are             \r\nserver-1    |                            identical to the timestamp of the                    \r\nserver-1    |                            response, even though much time passes               \r\nserver-1    |                            in-between.\"                                         \r\nserver-1    |                                                                                 \r\nserver-1    |                            Khoj: \"To illustrate that the timestamps             \r\nserver-1    |                            of your queries and responses have                   \r\nserver-1    |                            identical timestamps despite the time                \r\nserver-1    |                            that passes between them, we can follow              \r\nserver-1    |                            these steps:                                         \r\nserver-1    |                                                                                 \r\nserver-1    |                            1. Obtain the timestamp of your query:               \r\nserver-1    |                            2024-04-10 in UTC.                                   \r\nserver-1    |                            2. Simulate a long time passing between              \r\nserver-1    |                            the query and response. Let's assume                 \r\nserver-1    |                            that the response is generated after 1               \r\nserver-1    |                            year.                                                \r\nserver-1    |                            3. Obtain the timestamp of the response:             \r\nserver-1    |                            2025-04-10 in UTC.                                   \r\nserver-1    |                            4. Compare both timestamps to show their             \r\nserver-1    |                            equality.                                            \r\nserver-1    |                                                                                 \r\nserver-1    |                            Now, let's compare the timestamps:                   \r\nserver-1    |                                                                                 \r\nserver-1    |                            Query Timestamp: 2024-04-10 in UTC                   \r\nserver-1    |                            Response Timestamp: 2025-04-10 in UTC                \r\nserver-1    |                                                                                 \r\nserver-1    |                            As we can see, both timestamps have the              \r\nserver-1    |                            same date, but different years. This                 \r\nserver-1    |                            demonstrates that the timestamp of your              \r\nserver-1    |                            query and response have identical                    \r\nserver-1    |                            timestamps despite the time that passes              \r\nserver-1    |                            between them. This is due to the                     \r\nserver-1    |                            difference in local time zones and how               \r\nserver-1    |                            UTC (Coordinated Universal Time) is used             \r\nserver-1    |                            as a reference point for timekeeping.\"      \r\n```\r\n\r\n",
      "state": "closed",
      "author": "nickanderson",
      "author_type": "User",
      "created_at": "2024-04-10T21:25:52Z",
      "updated_at": "2024-05-01T10:16:11Z",
      "closed_at": "2024-05-01T10:16:11Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/694/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/694",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/694",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:25.740251",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Thanks for opening an issue on this, Nick! This is because we're storing the datetime of the message in UTC in the backend. We'll need to parse the DT in the client's time zone when rendering..",
          "created_at": "2024-04-15T19:46:39Z"
        },
        {
          "author": "nickanderson",
          "body": "Really, it's related to timezone?\r\n\r\nThe timestamp of the original query gets changed to the timestamp of the final response. You can see it was 16:10 in the first screenshot then in the last screenshot you can see that it had changed to match the timestamp of the last response (21:19).\r\n\r\nI guess t",
          "created_at": "2024-04-15T20:32:56Z"
        },
        {
          "author": "sabaimran",
          "body": "The difference is due to the way in which the message is rendering. When it's first rendered in the UI, it's using `new Date()`, which will automatically use the local time zone. When you refresh it and come back to the chat session, it's loading it from the database and using `new Date(chat_log.cre",
          "created_at": "2024-04-15T21:05:45Z"
        },
        {
          "author": "nickanderson",
          "body": "Ah I get it. Thanks.\r\n\r\nOn Mon, Apr 15, 2024, 4:06 PM sabaimran ***@***.***> wrote:\r\n\r\n> The difference is due to the way in which the message is rendering. When\r\n> it's first rendered in the UI, it's using new Date(), which will\r\n> automatically use the local time zone. When you refresh it and come",
          "created_at": "2024-04-16T01:21:23Z"
        }
      ]
    },
    {
      "issue_number": 700,
      "title": "In the config page, replace existing buttons with a single 'Sync' button",
      "body": "We currently have two buttons in the config, \"reinitialize\" and \"save all\". replace these so that we just have a single \"sync\" button that does the action of \"reinitialize\". Improve the icon used as well, should be a syncing icon which fits better with our look.\n\nhttps://app.khoj.dev/config",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2024-04-12T07:05:53Z",
      "updated_at": "2024-04-23T11:14:50Z",
      "closed_at": "2024-04-23T11:14:50Z",
      "labels": [
        "good first issue"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/700/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/700",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/700",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:25.954851",
      "comments": [
        {
          "author": "AjaySDwivedi1",
          "body": "I can work on this issue.",
          "created_at": "2024-04-12T21:56:31Z"
        }
      ]
    },
    {
      "issue_number": 505,
      "title": "Add a hint in the desktop client if the server is not up and running",
      "body": "There should be a basic health check in the client that tries to verify that the Khoj server that the user has configured is indeed running. It should help localize the problem for the user better.\n\nSee relevant [discussion in Discord](https://discord.com/channels/1112065956647284756/1112065956647284759/1163770010435604530).\n\nTo start the desktop service with your local code, clone the GitHub repository. Run `cd khoj/src/interface/desktop` and then follow the instructions to [run the Desktop app locally](https://github.com/khoj-ai/khoj/blob/76562f425002286c94b2dc2c7bba9e413e451471/src/interface/desktop/README.md#run-it-locally). When you make changes to the application code, you can kill it and start it again to refresh the app.",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-10-17T17:46:34Z",
      "updated_at": "2024-04-23T11:14:32Z",
      "closed_at": "2024-04-23T11:14:32Z",
      "labels": [
        "good first issue"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/505/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/505",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/505",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:26.154910",
      "comments": [
        {
          "author": "Sanket-Arekar",
          "body": "Hey @sabaimran I would like to work on this issue. Can you Please assign me this issue?",
          "created_at": "2023-11-27T02:07:46Z"
        }
      ]
    },
    {
      "issue_number": 708,
      "title": "[FIX]",
      "body": "## Describe the bug\r\nA clear and concise description of what the bug is. Please include what you were expecting to happen vs. what actually happened.\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [ ] Self-Hosted Docker\r\n    - [x] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- OS:\r\n    - [ ] Windows\r\n    - [x] macOS silicon\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]: Whatever latest is as of today, can't run `khoj --version` or any other command.\r\n\r\n```\r\nkhoj --anonymous-mode\r\nTraceback (most recent call last):\r\n  File \"/Users/local/.pyenv/versions/3.11.1/bin/khoj\", line 5, in <module>\r\n    from khoj.main import run\r\n  File \"/Users/local/.pyenv/versions/3.11.1/lib/python3.11/site-packages/khoj/main.py\", line 80, in <module>\r\n    from khoj.configure import configure_routes, initialize_server, configure_middleware\r\n  File \"/Users/local/.pyenv/versions/3.11.1/lib/python3.11/site-packages/khoj/configure.py\", line 23, in <module>\r\n    from khoj.database.adapters import (\r\n  File \"/Users/-local/.pyenv/versions/3.11.1/lib/python3.11/site-packages/khoj/database/adapters/__init__.py\", line 46, in <module>\r\n    from khoj.utils import state\r\n  File \"/Users/local/.pyenv/versions/3.11.1/lib/python3.11/site-packages/khoj/utils/state.py\", line 11, in <module>\r\n    from khoj.utils import config as utils_config\r\n  File \"/Users/local/.pyenv/versions/3.11.1/lib/python3.11/site-packages/khoj/utils/config.py\", line 11, in <module>\r\n    from khoj.processor.conversation.offline.utils import download_model\r\n  File \"/Users/local/.pyenv/versions/3.11.1/lib/python3.11/site-packages/khoj/processor/conversation/offline/utils.py\", line 5, in <module>\r\n    from huggingface_hub.constants import HF_HUB_CACHE\r\nImportError: cannot import name 'HF_HUB_CACHE' from 'huggingface_hub.constants' (/Users/local/.pyenv/versions/3.11.1/lib/python3.11/site-packages/huggingface_hub/constants.py)\r\n```\r\n",
      "state": "closed",
      "author": "alifemove",
      "author_type": "User",
      "created_at": "2024-04-16T19:09:24Z",
      "updated_at": "2024-04-16T19:42:33Z",
      "closed_at": "2024-04-16T19:39:41Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 10,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/708/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/708",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/708",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:26.350889",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Hey @alifemove , your issue description says you're using docker, but the stack trace implies you're using the python package. Can you confirm that this is just happening in the python package?",
          "created_at": "2024-04-16T19:13:58Z"
        },
        {
          "author": "alifemove",
          "body": "Oh sorry @sabaimran, I'm using the python package.",
          "created_at": "2024-04-16T19:16:37Z"
        },
        {
          "author": "sabaimran",
          "body": "Got it, let me investigate and see what's up. Is this a first-time install, or did you upgrade? (`pip install --upgrade khoj-assistant`)",
          "created_at": "2024-04-16T19:20:35Z"
        },
        {
          "author": "alifemove",
          "body": "Upgrade.\r\n\r\nLooked at huggingface_hub, the constant being used is definitely there... /shrug",
          "created_at": "2024-04-16T19:22:20Z"
        },
        {
          "author": "sabaimran",
          "body": "Hmm, might be the hugging face hub package also needs an upgrade. I'm not able to repro your error on a clean install of khoj `v1.10.2`. ",
          "created_at": "2024-04-16T19:33:00Z"
        }
      ]
    },
    {
      "issue_number": 275,
      "title": "Enable Sessions in Khoj Chat",
      "body": "Support splitting conversations with Khoj into separate sessions. This allows maintaining multiple separate conversation streams with Khoj",
      "state": "closed",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2023-07-04T00:32:38Z",
      "updated_at": "2024-04-16T15:50:25Z",
      "closed_at": "2024-04-16T15:50:25Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/275/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/275",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/275",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:26.578956",
      "comments": []
    },
    {
      "issue_number": 219,
      "title": "Create benchmarks for search",
      "body": "We need a consistent mechanism for evaluating search quality across different data sources over time for quality assessment.",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-06-04T07:50:16Z",
      "updated_at": "2024-04-15T19:43:53Z",
      "closed_at": "2024-04-15T19:43:53Z",
      "labels": [
        "maintain"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/219/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/219",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/219",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:26.578982",
      "comments": []
    },
    {
      "issue_number": 482,
      "title": "Add try-catch blocks when indexing GitHub data",
      "body": "GitHub data currently processes certain data in big batches. Instead of this, process files, issues iteratively and add more graceful failures. ",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-09-16T07:27:19Z",
      "updated_at": "2024-04-15T13:11:53Z",
      "closed_at": "2024-04-15T13:11:51Z",
      "labels": [
        "good first issue"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/482/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/482",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/482",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:26.578992",
      "comments": [
        {
          "author": "Sanket-Arekar",
          "body": "Hey @sabaimran I would like to work on this issue. Can you Please assign me this issue?",
          "created_at": "2023-11-27T02:08:12Z"
        },
        {
          "author": "sabaimran",
          "body": "This has been fixed with performance improvements via #692 .",
          "created_at": "2024-04-15T13:11:51Z"
        }
      ]
    },
    {
      "issue_number": 696,
      "title": "[FIX] Not all files in a folder are being indexed",
      "body": "## Describe the bug\r\nWhen adding a folder to the desktop application for indexing, only two files are indexed even though there are hundreds of markdown files in the folder.\r\n\r\n## To Reproduce\r\nAdd a folder with markdown files to Khoj desktop and click save. Then inspect the settings of the Khoj server webpage and click on \"update\" under files to view the incomplete list of files.\r\n\r\n## Screenshots\r\n![image](https://github.com/khoj-ai/khoj/assets/37039643/8ac28699-67be-4030-9edc-709d9c1a0669)\r\n\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [x] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [x] Desktop app\r\n    - [ ] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [x] Windows\r\n    - [ ] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]: 1.9.0\r\n\r\n## Additional context\r\n\r\n```\r\nPS C:\\Users\\beetle\\AppData\\Local\\Programs\\Khoj> .\\Khoj.exe --trace-warnings\r\nPS C:\\Users\\beetle\\AppData\\Local\\Programs\\Khoj>\r\nElectronStore {\r\n  _deserialize: [Function (anonymous)],\r\n  _serialize: [Function (anonymous)],\r\n  events: EventEmitter {\r\n    _events: [Object: null prototype] {},\r\n    _eventsCount: 0,\r\n    _maxListeners: undefined,\r\n    [Symbol(kCapture)]: false\r\n  },\r\n  path: 'C:\\\\Users\\\\beetle\\\\AppData\\\\Roaming\\\\Khoj\\\\config.json'\r\n}\r\nAdd %2220. Reducing waste of defects (Poka Yoke, Standard%22.md in C:\\Users\\beetle\\Documents\\knowLodge\\pages for indexing\r\nAdd %226. relationship agile, scrum, kaizen, lean to six%22.md in C:\\Users\\beetle\\Documents\\knowLodge\\pages for indexing\r\n(node:11300) ExperimentalWarning: buffer.File is an experimental feature and might change at any time\r\n    at emitExperimentalWarning (node:internal/util:238:11)\r\n    at new File (node:internal/file:40:5)\r\n    at makeEntry (node:internal/deps/undici/undici:4935:44)\r\n    at _FormData.append (node:internal/deps/undici/undici:4827:23)\r\n    at C:\\Users\\beetle\\AppData\\Local\\Programs\\Khoj\\resources\\app.asar\\main.js:201:55\r\n    at Array.forEach (<anonymous>)\r\n    at pushDataToKhoj (C:\\Users\\beetle\\AppData\\Local\\Programs\\Khoj\\resources\\app.asar\\main.js:201:24)\r\n    at Object.<anonymous> (C:\\Users\\beetle\\AppData\\Local\\Programs\\Khoj\\resources\\app.asar\\main.js:238:1)\r\n    at Module._compile (node:internal/modules/cjs/loader:1271:14)\r\n    at Module._extensions..js (node:internal/modules/cjs/loader:1326:10)\r\nAdd %2220. Reducing waste of defects (Poka Yoke, Standard%22.md in C:\\Users\\beetle\\Documents\\knowLodge\\pages for indexing\r\nAdd %226. relationship agile, scrum, kaizen, lean to six%22.md in C:\\Users\\beetle\\Documents\\knowLodge\\pages for indexing\r\nPushing data to Khoj at:  2024-04-11T14:45:14.260Z\r\nI:\\cloud\\GoogleDrive\\PDF\r\nI:\\cloud\\GoogleDrive\\PDF is a directory.\r\nAdd %2220. Reducing waste of defects (Poka Yoke, Standard%22.md in C:\\Users\\beetle\\Documents\\knowLodge\\pages for indexing\r\nAdd %226. relationship agile, scrum, kaizen, lean to six%22.md in C:\\Users\\beetle\\Documents\\knowLodge\\pages for indexing\r\n```\r\n\r\n``` Server log\r\nserver-1    | [14:45:51.051996] INFO     📬 Updating content index via API call  indexer.py:68\r\nserver-1    |                            by desktop client\r\nserver-1    | [14:45:51.053964] INFO     💎 Setting up search for markdown      indexer.py:210\r\nserver-1    |                            notes\r\nserver-1    | [14:45:51.055291] DEBUG    Converted 2 markdown       markdown_to_entries.py:127\r\nserver-1    |                            entries to dictionaries\r\nserver-1    | [14:45:51.056420] DEBUG    Parse entries from Markdown files into helpers.py:157\r\nserver-1    |                            dictionaries: 0.001 seconds\r\nserver-1    | [14:45:51.057441] DEBUG    Split entries by max token size        helpers.py:157\r\nserver-1    |                            supported by model: 0.000 seconds\r\nHashing Entries: 100%|██████████| 2/2 [00:00<00:00, 64527.75it/s]\r\nserver-1    | [14:45:51.058711] DEBUG    Constructed current entry hashes in:   helpers.py:157\r\nserver-1    |                            0.000 seconds\r\nserver-1    | [14:45:51.059680] DEBUG    Deleting all entries for file  text_to_entries.py:105\r\nserver-1    |                            type markdown\r\nserver-1    | [14:45:51.118946] DEBUG    Cleared existing dataset for           helpers.py:157\r\nserver-1    |                            regeneration in: 0.059 seconds\r\nIdentify new entries: 100%|██████████| 2/2 [00:00<00:00, 1040.00it/s]\r\nserver-1    | [14:45:51.122545] DEBUG    Identified entries to add to database  helpers.py:157\r\nserver-1    |                            in: 0.002 seconds\r\nBatches: 100%|██████████| 1/1 [00:00<00:00, 10.05it/s]\r\nserver-1    | [14:45:51.227608] DEBUG    Generated embeddings for entries to    helpers.py:157\r\nserver-1    |                            add to database in: 0.104 seconds\r\nAdd entries to database: 1it [00:00, 25.34it/s]\r\nserver-1    | [14:45:51.268867] DEBUG    Added 2 markdown entries to    text_to_entries.py:158\r\nserver-1    |                            database\r\nserver-1    | [14:45:51.270265] DEBUG    Added entries to database in: 0.041    helpers.py:157\r\nserver-1    |                            seconds\r\nserver-1    | [14:45:51.271363] DEBUG    Indexed 0 dates from added     text_to_entries.py:170\r\nserver-1    |                            markdown entries\r\nserver-1    | [14:45:51.272295] DEBUG    Indexed dates from added entries in:   helpers.py:157\r\nserver-1    |                            0.001 seconds\r\nserver-1    | [14:45:51.275642] DEBUG    Deleted entries identified by server   helpers.py:157\r\nserver-1    |                            from database in: 0.002 seconds\r\nserver-1    | [14:45:51.276720] DEBUG    Deleted entries requested by clients   helpers.py:157\r\nserver-1    |                            from database in: 0.000 seconds\r\nserver-1    | [14:45:51.277717] DEBUG    Identify new or updated entries: 0.219 helpers.py:157\r\nserver-1    |                            seconds\r\nserver-1    | [14:45:51.278926] INFO     Deleted 2 entries. Created 2 new   text_search.py:218\r\nserver-1    |                            entries for user default from\r\nserver-1    |                            files ['%2220. Reducing waste of\r\nserver-1    |                            defects (Poka Yoke,\r\nserver-1    |                            Standard%22.md', '%226.\r\nserver-1    |                            relationship agile, scrum, kaizen,\r\nserver-1    |                            lean to six%22.md'] ...\r\n```",
      "state": "closed",
      "author": "teun95",
      "author_type": "User",
      "created_at": "2024-04-11T14:54:57Z",
      "updated_at": "2024-04-12T16:59:40Z",
      "closed_at": "2024-04-12T16:59:39Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/696/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/696",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/696",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:26.768887",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Hi! We also realised this bug was popping up in the directory indexing flow. @debanjum has a fix on the way which we'll release either today or tomorrow. ",
          "created_at": "2024-04-11T18:33:03Z"
        },
        {
          "author": "debanjum",
          "body": "Thanks for raising an issue for this @teun95 , I've just pushed a new release with the fix for it in https://github.com/khoj-ai/khoj/commit/f040418cf1a795de5ed6929376c90009a45d429f. Please upgrade your Khoj desktop app to the latest version `1.10.x` and see if you can index all the markdown files in",
          "created_at": "2024-04-11T21:47:54Z"
        },
        {
          "author": "teun95",
          "body": "1.10.2 fixed the issue. Thanks!",
          "created_at": "2024-04-12T16:59:39Z"
        }
      ]
    },
    {
      "issue_number": 688,
      "title": "[IDEA] Improve support for GitHub integration",
      "body": "## Describe the feature you'd like\r\nGot a question and a suggestion for integrations in general I guess.\r\nCan we get a checkmark or something on the repos to indicate they were successfully indexed? The only way I know to tell is when running locally to look at the servers output so idk how to tell at all from the UI... I know it says save successful, but not sure if that means the index was a success or just if it saved the repo info successfully...\r\n\r\nAnd for the question, does the GH integration reindex when changes are made to the branch?\r\n\r\nAbility to add multiple PAT tokens would be nice as well... Maybe name them so it can be specified on the repo config which one to use.\r\n\r\nFrom this [Discord discussion](https://discord.com/channels/1112065956647284756/1224499993973493831/1224500040198918255).\r\n",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2024-04-03T08:09:32Z",
      "updated_at": "2024-04-12T04:40:44Z",
      "closed_at": "2024-04-12T04:40:44Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/688/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/688",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/688",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:26.986911",
      "comments": [
        {
          "author": "letto4135",
          "body": "Hey @sabaimran, continuing from discord.\r\n\r\n\r\nJust for context I'm running locally on an apple silicon Mac installed with pip.\r\n\r\n\r\nI'm surprised you said there isn't much usage of this integration, I wonder if most people just index the repos locally? I'm not entirely sure that the indexing local f",
          "created_at": "2024-04-03T11:57:41Z"
        },
        {
          "author": "sabaimran",
          "body": "@letto4135 what type of files are you trying to index? It's worth mentioning that currently, only plaintext files and PDFs are supported from the desktop application. So, you're `.txt`, `.md`, etc files should be picked up. \r\n\r\nCould you describe what sort of chatting/interactions you're hoping to d",
          "created_at": "2024-04-03T12:12:53Z"
        },
        {
          "author": "letto4135",
          "body": "I'm indexing the code instead of using the gh integration, the thought was if I couldn't get GH integration to work easily that I would index the folder where the code is instead, so for me I've got\r\n```\r\nls ~/gh\r\n- ~/gh/<repo1>\r\n- ~/gh/<repo2>\r\n- etc...\r\n```\r\nSo maybe it just doesn't index because ",
          "created_at": "2024-04-03T12:30:39Z"
        },
        {
          "author": "debanjum",
          "body": "Hey @letto4135, once #692 is merged, Khoj will be able to index all text files, including your code files. This should work both when indexing local folders or Github repositories.\r\n\r\n> So maybe it just doesn't index because it doesn't go into sub folders to look for things to index?\r\n\r\nThe desktop ",
          "created_at": "2024-04-09T06:59:03Z"
        },
        {
          "author": "letto4135",
          "body": "@debanjum Gorgeous! 🙇 ",
          "created_at": "2024-04-09T20:53:24Z"
        }
      ]
    },
    {
      "issue_number": 689,
      "title": "[FIX] fresh self-hosted instance won't let me connect to it",
      "body": "Trying again after my previous issue (https://github.com/khoj-ai/khoj/issues/684) -- now i encounter another problem. khoj starts up properly, but the container dies as soon as i try to connect to it\r\n\r\n```\r\n[02:35:54.938392] INFO     🚒 Initializing Khoj v1.9.0               main.py:108                                                                                                                  \r\n[02:35:54.940984] INFO     📦 Initializing DB:                       main.py:109                                                                                                                  \r\n                           Operations to perform:                                                                                                                                                 \r\n                             Apply all migrations: admin, auth,                                                                                                                                   \r\n                           contenttypes, database, sessions                                                                                                                                       \r\n                           Running migrations:                                                                                                                                                    \r\n                             No migrations to apply.                                                                                                                                              \r\n[02:35:54.942046] DEBUG    🌍 Initializing Web Client:               main.py:110                                                                                                                  \r\n                           180 static files copied to                                                                                                                                             \r\n                           '/app/src/khoj/static'.                                                                                                                                                \r\n[02:35:54.945645] INFO     🌘 Starting Khoj                          main.py:122                                                                                                                  \r\n[02:35:55.156044] INFO     🚨 Khoj is not configured.           configure.py:197                                                                                                                  \r\n                           Initializing it with a default                                                                                                                                         \r\n                           config.                                                                                                                                                                \r\n/usr/local/lib/python3.10/dist-packages/torch/_utils.py:776: UserWarning: TypedStorage is deprecated. It will be removed in the future and UntypedStorage will be the only storage class. This sho\r\n  return self.fget.__get__(instance, owner)()                                                                                                                                                     \r\n[02:36:11.434520] INFO     No default conversation config found, __init__.py:447                                                                                                                  \r\n                           skipping default agent creation                                                                                                                                        \r\n[02:36:11.435527] INFO     📬 No-op...                          configure.py:248                                                                                                                  \r\n[02:36:11.436281] INFO     🌖 Khoj is ready to use                   main.py:159                                                                                                                  \r\n[02:36:11.442940] INFO     Started server process [1]               server.py:75                                                                                                                  \r\n[02:36:11.443824] INFO     Waiting for application startup.             on.py:45                                                                                                                  \r\n[02:36:11.444724] INFO     Application startup complete.                on.py:59                                                                                                                  \r\n[02:36:11.446110] ERROR    [Errno -2] Name or service not known    server.py:156                                                                                                                  \r\n[02:36:11.446965] INFO     Waiting for application shutdown.            on.py:64                                                                                                                  \r\n[02:36:11.447742] INFO     Application shutdown complete.               on.py:75         \r\n\r\n```\r\n\r\n\r\ni'm running it in k8s with \r\n\r\nenv (part of it):\r\n```\r\n- name: KHOJ_DOMAIN\r\n  value: \"khoj.beagle-chickadee.ts.net\"\r\n```\r\n(though changing or removing this doesnt seem to make a difference)\r\n\r\nflags:\r\n```\r\n- --host=\"0.0.0.0\"\r\n- --port=42110\r\n- -v\r\n- --anonymous-mode\r\n```\r\n\r\nself-hosted, k8s, docker image, latest, linux x86-64",
      "state": "closed",
      "author": "asg0451",
      "author_type": "User",
      "created_at": "2024-04-06T02:38:23Z",
      "updated_at": "2024-04-11T21:54:42Z",
      "closed_at": "2024-04-11T21:54:41Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 12,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/689/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/689",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/689",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:27.209544",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Yay for getting past the previous error!\r\n\r\n@asg0451 , is the shutdown happening before you even connect, or only when you try pinging the server? If you're able to ssh into the host machine, are you able to ping it over localhost?\r\n\r\nDo you mind also sharing your machine specs?\r\n\r\nI haven't seen th",
          "created_at": "2024-04-07T13:08:39Z"
        },
        {
          "author": "sabaimran",
          "body": "Can you also ensure that the machine has access to the internet? By the error, it seems to be a DNS error, but I'm not sure what exactly it could be. \r\n\r\nAlso try using the env variable `KHOJ_DEBUG=True` to possibly get more verbose errors.",
          "created_at": "2024-04-07T13:12:08Z"
        },
        {
          "author": "asg0451",
          "body": "Thanks @sabaimran \r\n\r\nThe shutdown happens as soon as i connect to the machine, either via port forwarding to localhost and connecting as localhost:... or by connecting to its public-facing site (specified in khoj_domain env var above)\r\n\r\nThis is all on k8s so the pod definitely has access to dns, t",
          "created_at": "2024-04-07T15:59:55Z"
        },
        {
          "author": "asg0451",
          "body": "actually, it does seem like maybe the connecting thing was a coincidence. it's definitely just crashlooping on its own :/",
          "created_at": "2024-04-07T20:09:26Z"
        },
        {
          "author": "asg0451",
          "body": "One additional clue is that for the first crash only i saw in the logs: `Use offline chat model? (y/n):` and some other stuff. so maybe the fact that it was started in a non-interactive way (no stdin) created an invalid config for all future starts?",
          "created_at": "2024-04-07T20:12:49Z"
        }
      ]
    },
    {
      "issue_number": 620,
      "title": "[FIX] Splitting the entry into words solely by spaces results in the omission of content",
      "body": "## Describe the bug\r\n\r\nSplitting the entry into words solely by spaces and discarding long words can result in the omission of meaningful content from the corpus, especially when dealing with CJK languages.\r\n\r\n## To Reproduce\r\n\r\nCreate a text file, in every line, except for the first line, write a long word without any spaces. Repeat these lines to make the total length of the file longer than 500 characters.\r\n\r\n```\r\nFirst Line\r\ndog=5\r\ncat=10\r\napple=3\r\ncar=7\r\nbook=2\r\ntree=9\r\npen=4\r\nchair=8\r\nphone=6\r\nlamp=1\r\n...more_lines_without_space...\r\n```\r\n\r\nIndex this file, the `compiled` column contain only a single word \"First\".\r\n\r\n## Additional context\r\n\r\nIt's unusual to have such text in Latin languages, but it's possible in Chinese/Japanese where words are not separated by spaces. There is no space in the following text:\r\n\r\n```\r\nKhoj是一个开源的AI个人助手，通过索引你的个人文本或图像数据来工作。你可以自行托管Khoj，并开始搜索和与你的组织、Markdown、PDF笔记聊天。Khoj正在努力帮助你充分利用你的数据。\r\n\r\n需求人群：\r\n用于搜索和管理个人知识库，支持搜索和与你的组织、Markdown、PDF笔记聊天等功能\r\n\r\n产品特色：\r\n快速语义搜索；\r\n聊天功能；\r\n自定义扩展插件；\r\n```\r\n\r\nThe issue is caused by the code in [khoj/src/khoj/processor/content/text_to_entries.py](https://github.com/khoj-ai/khoj/blob/039ed78253f03b7c780b26a9712a84375e5c0726/src/khoj/processor/content/text_to_entries.py)\r\n```py\r\n            # Split entry into words\r\n            compiled_entry_words = [word for word in entry.compiled.split(\" \") if word != \"\"]\r\n\r\n            # Drop long words instead of having entry truncated to maintain quality of entry processed by models\r\n            compiled_entry_words = [word for word in compiled_entry_words if len(word) <= max_word_length]\r\n```\r\n\r\nA possible workaround could involve splitting the entry into words not only by spaces but also by new lines. A good solution for this could be using langchain's `RecursiveCharacterTextSplitter`.\r\n",
      "state": "closed",
      "author": "aleung",
      "author_type": "User",
      "created_at": "2024-01-19T06:55:47Z",
      "updated_at": "2024-04-08T08:26:39Z",
      "closed_at": "2024-04-08T08:26:39Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/620/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 1,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/620",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/620",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:27.432320",
      "comments": [
        {
          "author": "debanjum",
          "body": "Thanks for such a detailed & organized bug report! ❤️\n\nYour point makes sense. Let me try reproduce (and figure a fix for) the issue soon",
          "created_at": "2024-01-19T16:37:21Z"
        }
      ]
    },
    {
      "issue_number": 522,
      "title": "Incompatible with Python 3.12",
      "body": "Just to let you guys know that the pre-release/github version of `khoj-assistant` (hash https://github.com/khoj-ai/khoj/commit/9677eae79192aed2171a433f4ae4d9adff7afba1) is currently incompatible with Python 3.12 because of two issues:\r\n\r\n1. `pyproject.toml` requires `pyyaml==6.0`, which causes an `AttributeError: cython_sources` as described [here](https://github.com/yaml/pyyaml/issues/724). Updating the requirement to `pyyaml>=6.0` or using Python 3.11 without changing this requirement fixes this issue.\r\n2. `torch` requirement does not yet offer builds for Python 3.12, the latest supported version is Python 3.11. This issue cannot be fixed [currently](https://stackoverflow.com/questions/77225812/is-there-a-way-to-install-pytorch-on-python-3-12-0) (as of October 2023).\r\n\r\nSo there is nothing to do but wait, I am just reporting this issue in case others get the same error.",
      "state": "closed",
      "author": "lrq3000",
      "author_type": "User",
      "created_at": "2023-10-28T21:19:26Z",
      "updated_at": "2024-04-08T06:13:36Z",
      "closed_at": "2024-04-08T06:13:36Z",
      "labels": [
        "maintain"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/522/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "debanjum"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/522",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/522",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:27.657282",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Thank you for reporting, @lrq3000 ! Updating `pyyaml` should be trivial, but `torch` might be trickier. We'll watch out for this.",
          "created_at": "2023-11-03T19:26:18Z"
        },
        {
          "author": "ststudio907",
          "body": "I'm very new to python. Literally just got it to use khoj with obsidian. How do I update requirements, or downgrade to python 3.11?\r\n",
          "created_at": "2023-11-16T19:34:08Z"
        },
        {
          "author": "lrq3000",
          "body": "@ststudio907 As long as you can't see a \"cp312\" package [here](https://download.pytorch.org/whl/torch/), pytorch is not available for py3.12 and hence py<=3.11 is required.\r\n\r\nAn easy way to get py3.11 or any othes version is to install a miniconda distribution with python 3.11, or if you already ha",
          "created_at": "2023-11-17T13:11:13Z"
        },
        {
          "author": "debanjum",
          "body": "Thanks for the initial investigation @lrq3000. Khoj should support python 3.12 once PR #690 is merged. This got unblocked since Pytorch [added support for python 3.12](https://github.com/pytorch/pytorch/issues/110436) in [mainline version 2.2.2](https://download.pytorch.org/whl/torch/).",
          "created_at": "2024-04-07T05:53:12Z"
        },
        {
          "author": "lrq3000",
          "body": "That's great to hear, thank you for the heads up!",
          "created_at": "2024-04-07T13:40:50Z"
        }
      ]
    },
    {
      "issue_number": 684,
      "title": "[FIX] fresh self-hosted instance fails to start up in k8s",
      "body": "## Describe the bug\r\nA clear and concise description of what the bug is. Please include what you were expecting to happen vs. what actually happened.\r\n\r\nfresh instance of Khoj fails to start up for the first time with the following error\r\n\r\n```\r\n            │ ❱  80 │   │   return executor(sq │\r\n                           │    81 │                          │\r\n                           │    82 │   def _execute(self, sql │\r\n                           │    83 │   │   self.db.validate_n │\r\n                           │                                  │\r\n                           │ /usr/local/lib/python3.10/dist-p │\r\n                           │ ackages/django/db/backends/utils │\r\n                           │ .py:84 in _execute               │\r\n                           │                                  │\r\n                           │    81 │                          │\r\n                           │    82 │   def _execute(self, sql │\r\n                           │    83 │   │   self.db.validate_n │\r\n                           │ ❱  84 │   │   with self.db.wrap_ │\r\n                           │    85 │   │   │   if params is N │\r\n                           │    86 │   │   │   │   # params d │\r\n                           │    87 │   │   │   │   return sel │\r\n                           │                                  │\r\n                           │ /usr/local/lib/python3.10/dist-p │\r\n                           │ ackages/django/db/utils.py:91 in │\r\n                           │ __exit__                         │\r\n                           │                                  │\r\n                           │    88 │   │   │   │   # the conn │\r\n                           │    89 │   │   │   │   if dj_exc_ │\r\n                           │    90 │   │   │   │   │   self.w │\r\n                           │ ❱  91 │   │   │   │   raise dj_e │\r\n                           │    92 │                          │\r\n                           │    93 │   def __call__(self, fun │\r\n                           │    94 │   │   # Note that we are │\r\n                           │                                  │\r\n                           │ /usr/local/lib/python3.10/dist-p │\r\n                           │ ackages/django/db/backends/utils │\r\n                           │ .py:89 in _execute               │\r\n                           │                                  │\r\n                           │    86 │   │   │   │   # params d │\r\n                           │    87 │   │   │   │   return sel │\r\n                           │    88 │   │   │   else:          │\r\n                           │ ❱  89 │   │   │   │   return sel │\r\n                           │    90 │                          │\r\n                           │    91 │   def _executemany(self, │\r\n                           │    92 │   │   self.db.validate_n │\r\n                           ╰──────────────────────────────────╯\r\n                           IntegrityError: null value in column\r\n                           \"chat_model_id\" of relation\r\n                           \"database_agent\" violates not-null\r\n                           constraint\r\n                           DETAIL:  Failing row contains (1,\r\n                           2024-03-31 22:27:31.683039+00,\r\n                           2024-03-31 22:27:31.683052+00, Khoj,\r\n                           You are Khoj, a smart, inquisitive\r\n                           and helpful personal assistan...,\r\n                           https://khoj-web-bucket.s3.amazonaws\r\n                           .com/lamp-128.png, [\"*\"], t, t,\r\n                           khoj, null, null).\r\n```\r\n\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n\r\napply this k8s yaml\r\n```\r\napiVersion: v1\r\nkind: Namespace\r\nmetadata:\r\n  name: khoj\r\n\r\n---\r\napiVersion: apps/v1\r\nkind: StatefulSet\r\nmetadata:\r\n  name: database\r\n  namespace: khoj\r\nspec:\r\n  selector:\r\n    matchLabels:\r\n      app: database\r\n  serviceName: database\r\n  replicas: 1\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app: database\r\n    spec:\r\n      nodeSelector:\r\n        kubernetes.io/arch: amd64\r\n      containers:\r\n        - name: database\r\n          image: pgvector/pgvector:pg16\r\n          env:\r\n            - name: POSTGRES_USER\r\n              value: postgres\r\n            - name: POSTGRES_PASSWORD\r\n              value: postgres\r\n            - name: POSTGRES_DB\r\n              value: postgres\r\n          ports:\r\n            - containerPort: 5432\r\n              name: psql\r\n          volumeMounts:\r\n            - name: data\r\n              mountPath: /var/lib/postgresql/data/\r\n          resources:\r\n            requests:\r\n              memory: \"128Mi\"\r\n              cpu: \"500m\"\r\n            limits:\r\n              memory: \"2Gi\"\r\n              cpu: \"1\"\r\n          readinessProbe:\r\n            exec:\r\n              command:\r\n                - pg_isready\r\n                - -U\r\n                - postgres\r\n            initialDelaySeconds: 10\r\n            periodSeconds: 30\r\n            timeoutSeconds: 10\r\n            successThreshold: 1\r\n            failureThreshold: 3\r\n  volumeClaimTemplates:\r\n    - metadata:\r\n        name: data\r\n      spec:\r\n        accessModes: [\"ReadWriteOnce\"]\r\n        resources:\r\n          requests:\r\n            storage: 10Gi\r\n        storageClassName: local-path\r\n\r\n# headless svc\r\n---\r\napiVersion: v1\r\nkind: Service\r\nmetadata:\r\n  name: database\r\n  namespace: khoj\r\nspec:\r\n  clusterIP: None\r\n  selector:\r\n    app: database\r\n  ports:\r\n    - port: 5432\r\n      targetPort: 5432\r\n\r\n---\r\napiVersion: apps/v1\r\nkind: StatefulSet\r\nmetadata:\r\n  name: khoj\r\n  namespace: khoj\r\nspec:\r\n  selector:\r\n    matchLabels:\r\n      app: khoj\r\n  serviceName: khoj\r\n  replicas: 1\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app: khoj\r\n    spec:\r\n      nodeSelector:\r\n        kubernetes.io/arch: amd64\r\n      containers:\r\n        - name: khoj\r\n          image: ghcr.io/khoj-ai/khoj:latest\r\n          ports:\r\n            - containerPort: 42110\r\n              name: web\r\n          volumeMounts:\r\n            - name: config\r\n              mountPath: /root/.khoj\r\n            - name: models\r\n              mountPath: /root/.cache/torch/sentence_transformers\r\n          env:\r\n            - name: POSTGRES_DB\r\n              value: postgres\r\n            - name: POSTGRES_USER\r\n              value: postgres\r\n            - name: POSTGRES_PASSWORD\r\n              value: postgres\r\n            - name: POSTGRES_HOST\r\n              value: database-0.database.khoj.svc.cluster.local\r\n            - name: POSTGRES_PORT\r\n              value: \"5432\"\r\n            - name: KHOJ_DJANGO_SECRET_KEY\r\n              value: secret\r\n            - name: KHOJ_DEBUG\r\n              value: \"False\"\r\n            - name: KHOJ_ADMIN_EMAIL\r\n              value: miles.frankel@gmail.com\r\n            - name: KHOJ_ADMIN_PASSWORD\r\n              value: password\r\n          resources:\r\n            requests:\r\n              memory: \"1Gi\"\r\n              cpu: \"100m\"\r\n            limits:\r\n              memory: \"2Gi\"\r\n              cpu: \"1\"\r\n          args:\r\n            - --host=\"0.0.0.0\"\r\n            - --port=42110\r\n            - -v\r\n            - --anonymous-mode\r\n  volumeClaimTemplates:\r\n    - metadata:\r\n        name: models\r\n      spec:\r\n        accessModes: [\"ReadWriteOnce\"]\r\n        resources:\r\n          requests:\r\n            storage: 30Gi\r\n        storageClassName: local-path\r\n    - metadata:\r\n        name: config\r\n      spec:\r\n        accessModes: [\"ReadWriteOnce\"]\r\n        resources:\r\n          requests:\r\n            storage: 2Gi\r\n        storageClassName: local-path\r\n\r\n```\r\n\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [X] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [ ] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [X] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n",
      "state": "closed",
      "author": "asg0451",
      "author_type": "User",
      "created_at": "2024-03-31T22:30:52Z",
      "updated_at": "2024-04-03T17:16:25Z",
      "closed_at": "2024-04-03T11:51:26Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/684/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/684",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/684",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:27.852629",
      "comments": [
        {
          "author": "asg0451",
          "body": "FWIW i get the same error when running the provided docker compose (https://github.com/khoj-ai/khoj/blob/master/docker-compose.yml)\r\n\r\n```\r\n$ docker compose up\r\n...\r\nserver-1    | [05:34:06.355199] ERROR    🚨 Failed to configure server on app configure.py:185\r\nserver-1    |                          ",
          "created_at": "2024-04-02T05:36:08Z"
        },
        {
          "author": "sabaimran",
          "body": "Hey @asg0451 ! Sorry for the issue. Thanks for finding this problem -- it's indeed an issue with one of our DB migrations. Let me issue a fix for it. It'll be included in the next release.",
          "created_at": "2024-04-03T11:47:31Z"
        },
        {
          "author": "sabaimran",
          "body": "This should be addressed with https://github.com/khoj-ai/khoj/commit/6aa88761b81767be203f8bbb27d19938882b2f6c",
          "created_at": "2024-04-03T11:51:26Z"
        },
        {
          "author": "asg0451",
          "body": "thanks @sabaimran ! I'll try again when the next release goes out ",
          "created_at": "2024-04-03T17:16:25Z"
        }
      ]
    },
    {
      "issue_number": 674,
      "title": "[FIX] Can not generate an API key",
      "body": "## Describe the bug\r\n\r\nI can not figure out a way to generate an API key with Khoj 1.6.2.\r\n\r\nThe option is missing from `http://localhost:42110/config#clients`, and I'm not sure if this is the right API, but `\"GET /auth/token HTTP/1.1\"` is also returning 404 in the logs.\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior: run either the main branch, or the docker image, or the pip package for this version\r\n\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [X] Self-Hosted Docker\r\n    - [X] Self-Hosted Python package\r\n    - [X] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [ ] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [X] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]: 1.6.2\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n",
      "state": "closed",
      "author": "anku94",
      "author_type": "User",
      "created_at": "2024-03-13T20:01:33Z",
      "updated_at": "2024-03-23T05:12:15Z",
      "closed_at": "2024-03-19T02:22:23Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/674/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/674",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/674",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:28.073074",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hi @anku94, how did you start Khoj? You do not need to create Khoj API key if the Khoj server running in anonymous mode (i.e started `khoj`with `--anonymous-mode` flag). You can just point the client you want to use (e.g desktop, obsidian, emacs) to the Khoj server URL (usually at http://localhost:4",
          "created_at": "2024-03-13T22:24:21Z"
        },
        {
          "author": "anku94",
          "body": "Sorry for the delayed response.\r\n\r\nI looked up my Obsidian devtools console, and looks like my problem was being caused by a malformed url (`localhost:42110`, instead of `http://localhost:42110`, the former results in a network request to `app://obsidian.md/localhost:42110/api/...` - which is invali",
          "created_at": "2024-03-19T02:22:24Z"
        },
        {
          "author": "debanjum",
          "body": "Ah I see, glad you solved the issue and thanks for being understanding! ",
          "created_at": "2024-03-23T05:12:15Z"
        }
      ]
    },
    {
      "issue_number": 663,
      "title": "can not start server",
      "body": "cat pyvenv.cfg\r\nhome = /usr/bin\r\ninclude-system-site-packages = false\r\nversion = 3.9.2\r\n\r\n~/AI/khoj/env2$ **khoj --anonymous-mode**\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/dietpi/.local/lib/python3.9/site-packages/django/db/backends/base/base.py\", line 289, in ensure_connection\r\n    self.connect()\r\n  File \"/home/dietpi/.local/lib/python3.9/site-packages/django/utils/asyncio.py\", line 26, in inner\r\n    return func(*args, **kwargs)\r\n  File \"/home/dietpi/.local/lib/python3.9/site-packages/django/db/backends/base/base.py\", line 270, in connect\r\n    self.connection = self.get_new_connection(conn_params)\r\n  File \"/home/dietpi/.local/lib/python3.9/site-packages/django/utils/asyncio.py\", line 26, in inner\r\n    return func(*args, **kwargs)\r\n  File \"/home/dietpi/.local/lib/python3.9/site-packages/django/db/backends/postgresql/base.py\", line 275, in get_new_connection\r\n    connection = self.Database.connect(**conn_params)\r\n  File \"/home/dietpi/.local/lib/python3.9/site-packages/psycopg2/__init__.py\", line 122, in connect\r\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\r\npsycopg2.OperationalError: connection to server at \"localhost\" (::1), port 5432 failed: Connection refused\r\n\tIs the server running on that host and accepting TCP/IP connections?\r\nconnection to server at \"localhost\" (127.0.0.1), port 5432 failed: Connection refused\r\n\tIs the server running on that host and accepting TCP/IP connections?\r\n\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/khoj\", line 5, in <module>\r\n    from khoj.main import run\r\n  File \"/usr/local/lib/python3.9/dist-packages/khoj/main.py\", line 42, in <module>\r\n    call_command(\"migrate\", \"--noinput\")\r\n  File \"/home/dietpi/.local/lib/python3.9/site-packages/django/core/management/__init__.py\", line 194, in call_command\r\n    return command.execute(*args, **defaults)\r\n  File \"/home/dietpi/.local/lib/python3.9/site-packages/django/core/management/base.py\", line 458, in execute\r\n    output = self.handle(*args, **options)\r\n  File \"/home/dietpi/.local/lib/python3.9/site-packages/django/core/management/base.py\", line 106, in wrapper\r\n    res = handle_func(*args, **kwargs)\r\n  File \"/home/dietpi/.local/lib/python3.9/site-packages/django/core/management/commands/migrate.py\", line 117, in handle\r\n    executor = MigrationExecutor(connection, self.migration_progress_callback)\r\n  File \"/home/dietpi/.local/lib/python3.9/site-packages/django/db/migrations/executor.py\", line 18, in __init__\r\n    self.loader = MigrationLoader(self.connection)\r\n  File \"/home/dietpi/.local/lib/python3.9/site-packages/django/db/migrations/loader.py\", line 58, in __init__\r\n    self.build_graph()\r\n  File \"/home/dietpi/.local/lib/python3.9/site-packages/django/db/migrations/loader.py\", line 235, in build_graph\r\n    self.applied_migrations = recorder.applied_migrations()\r\n  File \"/home/dietpi/.local/lib/python3.9/site-packages/django/db/migrations/recorder.py\", line 81, in applied_migrations\r\n    if self.has_table():\r\n  File \"/home/dietpi/.local/lib/python3.9/site-packages/django/db/migrations/recorder.py\", line 57, in has_table\r\n    with self.connection.cursor() as cursor:\r\n  File \"/home/dietpi/.local/lib/python3.9/site-packages/django/utils/asyncio.py\", line 26, in inner\r\n    return func(*args, **kwargs)\r\n  File \"/home/dietpi/.local/lib/python3.9/site-packages/django/db/backends/base/base.py\", line 330, in cursor\r\n    return self._cursor()\r\n  File \"/home/dietpi/.local/lib/python3.9/site-packages/django/db/backends/base/base.py\", line 306, in _cursor\r\n    self.ensure_connection()\r\n  File \"/home/dietpi/.local/lib/python3.9/site-packages/django/utils/asyncio.py\", line 26, in inner\r\n    return func(*args, **kwargs)\r\n  File \"/home/dietpi/.local/lib/python3.9/site-packages/django/db/backends/base/base.py\", line 289, in ensure_connection\r\n    self.connect()\r\n  File \"/home/dietpi/.local/lib/python3.9/site-packages/django/db/utils.py\", line 91, in __exit__\r\n    raise dj_exc_value.with_traceback(traceback) from exc_value\r\n  File \"/home/dietpi/.local/lib/python3.9/site-packages/django/db/backends/base/base.py\", line 289, in ensure_connection\r\n    self.connect()\r\n  File \"/home/dietpi/.local/lib/python3.9/site-packages/django/utils/asyncio.py\", line 26, in inner\r\n    return func(*args, **kwargs)\r\n  File \"/home/dietpi/.local/lib/python3.9/site-packages/django/db/backends/base/base.py\", line 270, in connect\r\n    self.connection = self.get_new_connection(conn_params)\r\n  File \"/home/dietpi/.local/lib/python3.9/site-packages/django/utils/asyncio.py\", line 26, in inner\r\n    return func(*args, **kwargs)\r\n  File \"/home/dietpi/.local/lib/python3.9/site-packages/django/db/backends/postgresql/base.py\", line 275, in get_new_connection\r\n    connection = self.Database.connect(**conn_params)\r\n  File \"/home/dietpi/.local/lib/python3.9/site-packages/psycopg2/__init__.py\", line 122, in connect\r\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\r\ndjango.db.utils.OperationalError: connection to server at \"localhost\" (::1), port 5432 failed: Connection refused\r\n\tIs the server running on that host and accepting TCP/IP connections?\r\nconnection to server at \"localhost\" (127.0.0.1), port 5432 failed: Connection refused\r\n\tIs the server running on that host and accepting TCP/IP connections?\r\n",
      "state": "closed",
      "author": "VinnyG9",
      "author_type": "User",
      "created_at": "2024-02-28T02:21:44Z",
      "updated_at": "2024-03-15T08:04:07Z",
      "closed_at": "2024-03-15T07:28:15Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 8,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/663/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/663",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/663",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:28.274300",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Hi @Fuckingnameless , it looks like you're using the python package in this issue, rather than the docker file?\r\n\r\nIs it possible you have another postgres instance up and running? Would you be able to check and kill any active processes, as described [in this post](https://stackoverflow.com/questio",
          "created_at": "2024-02-28T16:47:10Z"
        },
        {
          "author": "VinnyG9",
          "body": "yes, when the docker version didn't work i went to the python one\r\n\r\n`lsof -n -i:5432 | grep LISTEN.`\r\ni think i did this already but will check tomorrow\r\n\r\nThanks for the fast response.\r\n",
          "created_at": "2024-03-01T04:57:54Z"
        },
        {
          "author": "sabaimran",
          "body": "Hey @Fuckingnameless , just wanted to check and see if you were able to debug any further. Let me know if you've run into any other issues.",
          "created_at": "2024-03-07T13:47:47Z"
        },
        {
          "author": "kalle07",
          "body": "same error on win10 like [Fuckingnameless](https://github.com/Fuckingnameless)\r\n\r\ncreate venv in powershell, all download and install fine without any error\r\n\r\nyour suggestion dont help me iam not that good in python  ;)\r\n\r\n\r\n\r\n.....\r\n(.venv) PS F:\\khoj> khoj\r\nTraceback (most recent call last):\r\n  F",
          "created_at": "2024-03-13T18:50:54Z"
        },
        {
          "author": "sabaimran",
          "body": "hey @kalle07 , if you're using the python package, you'll have to setup postgres in your backend as well. Have you gone through these setup instructions: https://docs.khoj.dev/get-started/setup#installation-option-2-local?",
          "created_at": "2024-03-15T07:20:11Z"
        }
      ]
    },
    {
      "issue_number": 602,
      "title": "khoj.el: Failed to force update all  content index. Status: http 400. Response: {\"detail\":\"There was an error parsing the body\"}",
      "body": "Met this error from (the latest) emacs client. Tried with self-hosted server, setup with docker.\r\n\r\nConfirmed that this persists also for khoj cloud server.\r\n",
      "state": "closed",
      "author": "HyunggyuJang",
      "author_type": "User",
      "created_at": "2024-01-07T05:57:15Z",
      "updated_at": "2024-03-09T22:19:41Z",
      "closed_at": "2024-03-09T22:19:40Z",
      "labels": [
        "fix",
        "question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/602/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/602",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/602",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:28.553044",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hey @HyunggyuJang, thanks for sharing the issue and clarifying that it persists across self-hosted with docker and khoj cloud.\r\n\r\nCan you share how you've configured Khoj in your emacs config (`init.el`)? \r\n\r\nFor reference, my khoj setup in emacs `init.el` look like below (using [straight.el](https:",
          "created_at": "2024-01-10T04:09:23Z"
        },
        {
          "author": "HyunggyuJang",
          "body": "Sure, here it is\r\n```elisp\r\n  (use-package khoj\r\n    :after org\r\n    :config (setq khoj-index-directories (list org-directory)\r\n                  khoj-index-files nil\r\n                  khoj-api-key <api-key>))\r\n```\r\nFor the khoj cloud usage, and\r\n```elisp\r\n  (use-package khoj\r\n    :after org\r\n    :",
          "created_at": "2024-01-12T00:56:53Z"
        },
        {
          "author": "debanjum",
          "body": "Hey @HyunggyuJang, could you check if the issue is resolved for you with the the latest `khoj.el`?  The indexing error should have been fixed in 392df40f361b76ef343f3653289f4d20085093c0. ",
          "created_at": "2024-02-21T07:38:34Z"
        },
        {
          "author": "HyunggyuJang",
          "body": "Thanks! I will check it.",
          "created_at": "2024-02-26T04:48:11Z"
        },
        {
          "author": "debanjum",
          "body": "Hey @HyunggyuJang I'll mark this issue as closed for now. Please feel free to reopen it if you are still hitting this issue",
          "created_at": "2024-03-09T22:19:40Z"
        }
      ]
    },
    {
      "issue_number": 661,
      "title": "[FIX] Lag in Loading Conversation History with Images",
      "body": "## Describe the bug\r\n\r\nKhoj plugin inside obsidian literally freezes the whole thing to the point that i have to get out. Desktop app is better, but still lags a lot. web version takes a lot of time to do responses. \r\n\r\nAlso either the sync is failing or something else, but try to test just a simple question about a note title, many times in the past days khoj literally writes about a 3th or less of the info of the specific note, and says it does not know any more info. Many times i check and the references are wrong.\r\n\r\n## To Reproduce\r\n\r\nIt started to do this after i generated many images with it. I dont know if this is the cause. \r\n\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n## Platform\r\n- Server:\r\n    - [x] Cloud-Hosted (https://app.khoj.dev)\r\n    - [ ] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [x] Obsidian\r\n    - [ ] Emacs\r\n    - [x] Desktop app\r\n    - [x] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [x] Windows\r\n    - [ ] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n\r\n## Additional context\r\nI did tried reinitialize , and still same, i cannot even check console when it happens inside obsidian.\r\n",
      "state": "closed",
      "author": "tichondrius808",
      "author_type": "User",
      "created_at": "2024-02-26T17:04:22Z",
      "updated_at": "2024-02-27T11:45:28Z",
      "closed_at": "2024-02-27T11:45:28Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/661/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/661",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/661",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:30.505243",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Hi @tichondrius808! I do think the lagging/perf degradation is because of image generation. It puts a lot of strain on the client and increases the size of your chat history.\r\n\r\nWe do plan to upload the generated images in S3 and serve them via URLs, which should improve the performance, but it migh",
          "created_at": "2024-02-26T18:36:13Z"
        },
        {
          "author": "tichondrius808",
          "body": "Yea it seems fix with new version^^ will keep trying.Its just for now is kind of dificult to manage the different conversations and what memory is using from each of them. But lag is gone with new version i didnt even had to delete some of older chats.",
          "created_at": "2024-02-27T11:45:28Z"
        }
      ]
    },
    {
      "issue_number": 276,
      "title": "Document using Virtualenv if Conflicting Dependencies",
      "body": "Trying to install I get the below error. Which means that for me to install khoj I had to use the command `python -m pip install khoj-assistant --break-system-packages` or create a virtual environment for it, which I don't think would work in this case?\r\n\r\nWould be nice if there was a package for it to be able to get around this because using `--break-system-packages` doesn't exactly feel safe haha.\r\n\r\n```\r\n⋊> ~ python -m pip install khoj-assistant                                                                                                                                                                 \r\nerror: externally-managed-environment\r\n\r\n× This environment is externally managed\r\n╰─> To install Python packages system-wide, try 'pacman -S\r\n    python-xyz', where xyz is the package you are trying to\r\n    install.\r\n\r\n    If you wish to install a non-Arch-packaged Python package,\r\n    create a virtual environment using 'python -m venv path/to/venv'.\r\n    Then use path/to/venv/bin/python and path/to/venv/bin/pip.\r\n\r\n    If you wish to install a non-Arch packaged Python application,\r\n    it may be easiest to use 'pipx install xyz', which will manage a\r\n    virtual environment for you. Make sure you have python-pipx\r\n    installed via pacman.\r\n\r\nnote: If you believe this is a mistake, please contact your Python installation or OS distribution provider. You can override this, at the risk of breaking your Python installation or OS, by passing --break-syst\r\nem-packages.\r\nhint: See PEP 668 for the detailed specification.\r\n```\r\n\r\nI am using Arch Linux which was updated earlier today with Python 3.11.3 and pip version 23.1.2",
      "state": "closed",
      "author": "chookity-pokk",
      "author_type": "User",
      "created_at": "2023-07-04T20:25:06Z",
      "updated_at": "2024-02-23T13:57:03Z",
      "closed_at": "2024-02-23T13:57:03Z",
      "labels": [
        "documentation"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/276/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/276",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/276",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:30.714606",
      "comments": [
        {
          "author": "debanjum",
          "body": "Oh yeah, having to use a `--break-system-packages` does not sound good!\r\n\r\nA virtualenv should totally work. You can use [pipx](https://pypa.github.io/pipx/) to simplify khoj setup with virtualenv (`pipx install khoj-assistant`), and start khoj as normal with `khoj`. \r\n\r\nIf you use python virtualenv",
          "created_at": "2023-07-05T16:12:13Z"
        },
        {
          "author": "chookity-pokk",
          "body": "If I were to use a virtual environment would I still be able to use it within Emacs?",
          "created_at": "2023-07-05T16:26:03Z"
        },
        {
          "author": "debanjum",
          "body": "Yeah, khoj follows a client server architecture. So the emacs package just needs to know the url where the khoj server is running (default at `http://localhost:8000`)\r\n\r\nThe khoj emacs package does try to install, start the khoj server (by calling `khoj`) if it doesn't find the server running at `kh",
          "created_at": "2023-07-05T16:36:26Z"
        },
        {
          "author": "sabaimran",
          "body": "Thanks for raising the issue, @chookity-pokk ! I hope no one is installing with `--break-system-packages`. When in doubt, always use virtual environments. We should update this in the docs.",
          "created_at": "2023-07-06T18:03:53Z"
        }
      ]
    },
    {
      "issue_number": 650,
      "title": "[FIX] Empty system message error for subqueries",
      "body": "## Describe the bug\r\n\r\n### Issue\r\nSee a link to the discussion [here](https://discord.com/channels/1112065956647284756/1112066447947083826/1209760194725412915). Text reproduced for ease:\r\n\r\n```\r\ni'm self hosting using lm studio and it was working fine but I recently updated my docker containers and now i'm getting this issue when calling the local openai api\r\n[2024-02-21 07:05:56.521] [ERROR] [Server Error] {\"title\":\"'messages' array must only contain objects with a 'content' field that is not empty\"}\r\n[2024-02-21 07:05:56.818] [INFO] [LM STUDIO SERVER] Processing queued request...\r\n[2024-02-21 07:05:56.818] [INFO] Received POST request to /v1/chat/completions with body: {\r\n  \"messages\": [\r\n    {\r\n      \"role\": \"system\",\r\n      \"content\": \"\"\r\n    },\r\n    {\r\n      \"role\": \"user\",\r\n      \"content\": \"You are Khoj,\r\nlooks like it doesnt like the system content being empty\r\nany ideas how I resolve this?\r\nlooks like before it had\r\n\"messages\": [\r\n    {\r\n      \"role\": \"assistant\",\r\n      \"content\":\r\nand it was working fine\r\n```\r\n\r\n### Resolution\r\n\r\nIn `generate_chatml_messages_with_context`, don't add a `message` to the list if the content is empty.\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]: 1.6.0\r\n",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2024-02-21T13:54:34Z",
      "updated_at": "2024-02-23T03:09:24Z",
      "closed_at": "2024-02-23T03:09:24Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/650/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/650",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/650",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:30.923056",
      "comments": []
    },
    {
      "issue_number": 651,
      "title": "[FIX] Gracefully handle error case when user-generated data is indexed with two different search models",
      "body": "## Describe the bug\r\n\r\nThe error in [this thread](https://discord.com/channels/1112065956647284756/1112066447947083826/1209844578027442176) was caused by the user having had data indexed with the multilingual model and the default model separately. \r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n\r\n1. Index some data with the default model.\r\n2. Change model in the settings page.\r\n3. Index some new data.\r\n\r\nOn any chat query, it should result in an internal server error.\r\n\r\n## Stack trace\r\n\r\n```\r\n[2024-02-21 14:13:31 +0000] [126371] [ERROR] Exception in ASGI application\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.10/dist-packages/django/db/backends/utils.py\", line 89, in _execute\r\n    return self.cursor.execute(sql, params)\r\npsycopg2.errors.DataException: different vector dimensions 384 and 768\r\n```\r\n\r\n## Potential Fixes\r\n1. Delete all indexed data when search model is changed.\r\n2. Maintain state of which search model was used to generate which embeddings. It will still be tricky to stitch together results across different models.\r\n\r\n## Platform\r\n- Server:\r\n    - [x] Cloud-Hosted (https://app.khoj.dev)\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]: 1.6.0\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2024-02-21T14:26:46Z",
      "updated_at": "2024-02-23T03:09:23Z",
      "closed_at": "2024-02-23T03:09:23Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/651/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/651",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/651",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:30.923075",
      "comments": []
    },
    {
      "issue_number": 653,
      "title": "[IDEA] Support other quantizations",
      "body": "Hi!\r\n\r\nMaybe I overlooked the documentation, but is there a way to:\r\n\r\n1. Use other quantizations other than Q4. I have the RAM and VRAM. I'd like to have better responses.\r\n2. Use custom endpoints like llama.cpp's server mode? I can see that GPT4All has just a few models, this ties in back with 1 above, since I don't have the limitation of choosing whatever GPT4All has in their repertoire.\r\n",
      "state": "closed",
      "author": "harish0201",
      "author_type": "User",
      "created_at": "2024-02-21T21:50:59Z",
      "updated_at": "2024-02-22T11:14:54Z",
      "closed_at": "2024-02-22T11:14:54Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/653/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/653",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/653",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:30.923081",
      "comments": [
        {
          "author": "harish0201",
          "body": "Nevermind, for the first one, I got it. \r\n\r\nI symlinked the files from my model folder and renamed: mistral-7b-instruct-v0.2.Q5_K_M.gguf to mistral-7b-instruct-v0.2.Q5_K_M.gguf3.gguf\r\n\r\nStill curious about the second one though!",
          "created_at": "2024-02-21T22:05:29Z"
        },
        {
          "author": "debanjum",
          "body": "> Nevermind, for the first one, I got it.\r\n>\r\n> I symlinked the files from my model folder and renamed: mistral-7b-instruct-v0.2.Q5_K_M.gguf to mistral-7b-instruct-v0.2.Q5_K_M.gguf3.gguf\r\n\r\nNice! The symlink was to allow mistral-7b-instruct-v0.2 with the Q5_K_M quantization to work? What's the respo",
          "created_at": "2024-02-22T11:14:19Z"
        }
      ]
    },
    {
      "issue_number": 637,
      "title": "[FIX] notion import not working",
      "body": "## Describe the bug\r\nA clear and concise description of what the bug is. Please include what you were expecting to happen vs. what actually happened.\r\n\r\nwhen i try to setup notion by adding my token, adding the connection to a page (i tried a demo page with basically no contents and no databases), then hitting reinitialize, the loading of the notion contents fails\r\n\r\nthe demo page has title \"Test\" and contents \"Testing!\"\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\ninstall the server on a mac with docker compose (using the 1.5.0, 1.4.0, or 1.1.0 backend version), then create notion integration, add notion connection to a page, save token to backend, and reinitialize\r\n\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [x] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [x] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [x] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]: 1.5.0 (also tried 1.4.0 and 1.1.0)\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n\r\nstack trace:\r\nkhoj-server-1    | [20:59:13] INFO     📬 Initializing content index...            configure.py:236\r\nkhoj-server-1    |            DEBUG    🚨 No Content configuration available.        indexer.py:338\r\nkhoj-server-1    |            INFO     🌖 Khoj is ready to use                          main.py:157\r\nkhoj-server-1    |            INFO     Started server process [1]                      server.py:75\r\nkhoj-server-1    |            INFO     Waiting for application startup.                    on.py:45\r\nkhoj-server-1    |            INFO     Application startup complete.                       on.py:59\r\nkhoj-server-1    |            INFO     Uvicorn running on http://0.0.0.0:42110 (Press server.py:206\r\nkhoj-server-1    |                     CTRL+C to quit)\r\nkhoj-server-1    | [21:00:27] INFO     192.168.65.1:49632 - \"GET                    h11_impl.py:431\r\nkhoj-server-1    |                     /config/content-source/notion HTTP/1.1\" 200\r\nkhoj-server-1    |            INFO     192.168.65.1:49632 - \"GET                    h11_impl.py:431\r\nkhoj-server-1    |                     /static/assets/pico.min.css HTTP/1.1\" 200\r\nkhoj-server-1    |            INFO     192.168.65.1:49633 - \"GET                    h11_impl.py:431\r\nkhoj-server-1    |                     /static/assets/khoj.css HTTP/1.1\" 200\r\nkhoj-server-1    |            INFO     192.168.65.1:49634 - \"GET                    h11_impl.py:431\r\nkhoj-server-1    |                     /static/assets/utils.js HTTP/1.1\" 200\r\nkhoj-server-1    |            INFO     192.168.65.1:49636 - \"GET                    h11_impl.py:431\r\nkhoj-server-1    |                     /static/assets/icons/khoj-logo-sideways-500.\r\nkhoj-server-1    |                     png HTTP/1.1\" 200\r\nkhoj-server-1    |            INFO     192.168.65.1:49635 - \"GET                    h11_impl.py:431\r\nkhoj-server-1    |                     /static/assets/icons/notion.svg HTTP/1.1\"\r\nkhoj-server-1    |                     200\r\nkhoj-server-1    |            INFO     192.168.65.1:49635 - \"GET                    h11_impl.py:431\r\nkhoj-server-1    |                     /static/assets/icons/favicon-128x128.png\r\nkhoj-server-1    |                     HTTP/1.1\" 200\r\nkhoj-server-1    | [21:00:30] INFO     192.168.65.1:49635 - \"POST                   h11_impl.py:431\r\nkhoj-server-1    |                     /api/config/data/content-source/notion\r\nkhoj-server-1    |                     HTTP/1.1\" 200\r\nkhoj-server-1    | [21:00:31] INFO     📬 Updating content index...                configure.py:239\r\nkhoj-server-1    |            INFO     🔌 Setting up search for notion               indexer.py:311\r\nkhoj-server-1    | [21:00:34] DEBUG    Getting all pages via search endpoint: 2.821  helpers.py:156\r\nkhoj-server-1    |                     seconds\r\nkhoj-server-1    | [21:00:36] DEBUG    Processing page                               helpers.py:156\r\nkhoj-server-1    |                     ae4b8b05-af30-4efb-9dfd-72723fc3ea9e: 1.668\r\nkhoj-server-1    |                     seconds\r\nkhoj-server-1    |            DEBUG    Processing response: 1.671 seconds            helpers.py:156\r\nHashing Entries: 100%|██████████| 1/1 [00:00<00:00, 11618.57it/s]\r\nkhoj-server-1    |            DEBUG    Constructed current entry hashes in: 0.006    helpers.py:156\r\nkhoj-server-1    |                     seconds\r\nIdentify new entries: 100%|██████████| 1/1 [00:00<00:00, 63.05it/s]\r\nkhoj-server-1    |            DEBUG    Identified entries to add to database in:     helpers.py:156\r\nkhoj-server-1    |                     0.016 seconds\r\nBatches: 100%|██████████| 1/1 [00:00<00:00,  2.06it/s]\r\nkhoj-server-1    |            DEBUG    Generated embeddings for entries to add to    helpers.py:156\r\nkhoj-server-1    |                     database in: 0.503 seconds\r\nAdd entries to database: 0it [00:00, ?it/s]\r\nkhoj-server-1    |            DEBUG    Added entries to database in: 0.001 seconds   helpers.py:156\r\nkhoj-server-1    |            DEBUG    Identify new or updated entries: 0.533        helpers.py:156\r\nkhoj-server-1    |                     seconds\r\nkhoj-server-1    |            ERROR    🚨 Failed to setup Notion: ['“None” is not a  indexer.py:322\r\nkhoj-server-1    |                     valid UUID.']\r\nkhoj-server-1    |                     ╭──── Traceback (most recent call last) ────╮\r\nkhoj-server-1    |                     │ /usr/local/lib/python3.10/dist-packages/d │\r\nkhoj-server-1    |                     │ jango/db/models/fields/__init__.py:2688   │\r\nkhoj-server-1    |                     │ in to_python                              │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │   2685 │   │   if value is not None and n │\r\nkhoj-server-1    |                     │   2686 │   │   │   input_form = \"int\" if  │\r\nkhoj-server-1    |                     │   2687 │   │   │   try:                   │\r\nkhoj-server-1    |                     │ ❱ 2688 │   │   │   │   return uuid.UUID(* │\r\nkhoj-server-1    |                     │   2689 │   │   │   except (AttributeError │\r\nkhoj-server-1    |                     │   2690 │   │   │   │   raise exceptions.V │\r\nkhoj-server-1    |                     │   2691 │   │   │   │   │   self.error_mes │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │ /usr/lib/python3.10/uuid.py:177 in        │\r\nkhoj-server-1    |                     │ __init__                                  │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │   174 │   │   │   hex = hex.replace('urn: │\r\nkhoj-server-1    |                     │   175 │   │   │   hex = hex.strip('{}').r │\r\nkhoj-server-1    |                     │   176 │   │   │   if len(hex) != 32:      │\r\nkhoj-server-1    |                     │ ❱ 177 │   │   │   │   raise ValueError('b │\r\nkhoj-server-1    |                     │   178 │   │   │   int = int_(hex, 16)     │\r\nkhoj-server-1    |                     │   179 │   │   if bytes_le is not None:    │\r\nkhoj-server-1    |                     │   180 │   │   │   if len(bytes_le) != 16: │\r\nkhoj-server-1    |                     ╰───────────────────────────────────────────╯\r\nkhoj-server-1    |                     ValueError: badly formed hexadecimal UUID\r\nkhoj-server-1    |                     string\r\nkhoj-server-1    |\r\nkhoj-server-1    |                     During handling of the above exception,\r\nkhoj-server-1    |                     another exception occurred:\r\nkhoj-server-1    |\r\nkhoj-server-1    |                     ╭──── Traceback (most recent call last) ────╮\r\nkhoj-server-1    |                     │ /app/src/khoj/routers/indexer.py:312 in   │\r\nkhoj-server-1    |                     │ configure_content                         │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │   309 │   │   │   search_type == state.Se │\r\nkhoj-server-1    |                     │       state.SearchType.Notion.value       │\r\nkhoj-server-1    |                     │   310 │   │   ) and notion_config:        │\r\nkhoj-server-1    |                     │   311 │   │   │   logger.info(\"🔌 Setting │\r\nkhoj-server-1    |                     │ ❱ 312 │   │   │   text_search.setup(      │\r\nkhoj-server-1    |                     │   313 │   │   │   │   NotionToEntries,    │\r\nkhoj-server-1    |                     │   314 │   │   │   │   None,               │\r\nkhoj-server-1    |                     │   315 │   │   │   │   regenerate=regenera │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │ /app/src/khoj/search_type/text_search.py: │\r\nkhoj-server-1    |                     │ 202 in setup                              │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │   199 │   config=None,                    │\r\nkhoj-server-1    |                     │   200 ) -> None:                          │\r\nkhoj-server-1    |                     │   201 │   if config:                      │\r\nkhoj-server-1    |                     │ ❱ 202 │   │   num_new_embeddings, num_del │\r\nkhoj-server-1    |                     │   203 │   │   │   files=files, full_corpu │\r\nkhoj-server-1    |                     │   204 │   │   )                           │\r\nkhoj-server-1    |                     │   205 │   else:                           │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │ /app/src/khoj/processor/content/notion/no │\r\nkhoj-server-1    |                     │ tion_to_entries.py:115 in process         │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │   112 │   │   │   │   │   │   │   page_en │\r\nkhoj-server-1    |                     │   113 │   │   │   │   │   │   │   current │\r\nkhoj-server-1    |                     │   114 │   │                               │\r\nkhoj-server-1    |                     │ ❱ 115 │   │   return self.update_entries_ │\r\nkhoj-server-1    |                     │   116 │                                   │\r\nkhoj-server-1    |                     │   117 │   def process_page(self, page):   │\r\nkhoj-server-1    |                     │   118 │   │   page_id = page[\"id\"]        │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │ /app/src/khoj/processor/content/notion/no │\r\nkhoj-server-1    |                     │ tion_to_entries.py:247 in                 │\r\nkhoj-server-1    |                     │ update_entries_with_ids                   │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │   244 │   def update_entries_with_ids(sel │\r\nkhoj-server-1    |                     │   245 │   │   # Identify, mark and merge  │\r\nkhoj-server-1    |                     │   246 │   │   with timer(\"Identify new or │\r\nkhoj-server-1    |                     │ ❱ 247 │   │   │   num_new_embeddings, num │\r\nkhoj-server-1    |                     │   248 │   │   │   │   current_entries,    │\r\nkhoj-server-1    |                     │   249 │   │   │   │   DbEntry.EntryType.N │\r\nkhoj-server-1    |                     │   250 │   │   │   │   DbEntry.EntrySource │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │ /app/src/khoj/processor/content/text_to_e │\r\nkhoj-server-1    |                     │ ntries.py:141 in update_embeddings        │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │   138 │   │   │   │   │   │   │   corpus_ │\r\nkhoj-server-1    |                     │   139 │   │   │   │   │   │   )           │\r\nkhoj-server-1    |                     │   140 │   │   │   │   │   )               │\r\nkhoj-server-1    |                     │ ❱ 141 │   │   │   │   added_entries += Db │\r\nkhoj-server-1    |                     │   142 │   │   │   logger.debug(f\"Added {l │\r\nkhoj-server-1    |                     │   143 │   │                               │\r\nkhoj-server-1    |                     │   144 │   │   new_dates = []              │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │ /usr/local/lib/python3.10/dist-packages/d │\r\nkhoj-server-1    |                     │ jango/db/models/manager.py:87 in          │\r\nkhoj-server-1    |                     │ manager_method                            │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │    84 │   │   def create_method(name, met │\r\nkhoj-server-1    |                     │    85 │   │   │   @wraps(method)          │\r\nkhoj-server-1    |                     │    86 │   │   │   def manager_method(self │\r\nkhoj-server-1    |                     │ ❱  87 │   │   │   │   return getattr(self │\r\nkhoj-server-1    |                     │    88 │   │   │                           │\r\nkhoj-server-1    |                     │    89 │   │   │   return manager_method   │\r\nkhoj-server-1    |                     │    90                                     │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │ /usr/local/lib/python3.10/dist-packages/d │\r\nkhoj-server-1    |                     │ jango/db/models/query.py:803 in           │\r\nkhoj-server-1    |                     │ bulk_create                               │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │    800 │   │   │   │   │   obj_with_pk._s │\r\nkhoj-server-1    |                     │    801 │   │   │   if objs_without_pk:    │\r\nkhoj-server-1    |                     │    802 │   │   │   │   fields = [f for f  │\r\nkhoj-server-1    |                     │ ❱  803 │   │   │   │   returned_columns = │\r\nkhoj-server-1    |                     │    804 │   │   │   │   │   objs_without_p │\r\nkhoj-server-1    |                     │    805 │   │   │   │   │   fields,        │\r\nkhoj-server-1    |                     │    806 │   │   │   │   │   batch_size,    │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │ /usr/local/lib/python3.10/dist-packages/d │\r\nkhoj-server-1    |                     │ jango/db/models/query.py:1831 in          │\r\nkhoj-server-1    |                     │ _batched_insert                           │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │   1828 │   │   for item in [objs[i : i +  │\r\nkhoj-server-1    |                     │   1829 │   │   │   if bulk_return and on_ │\r\nkhoj-server-1    |                     │   1830 │   │   │   │   inserted_rows.exte │\r\nkhoj-server-1    |                     │ ❱ 1831 │   │   │   │   │   self._insert(  │\r\nkhoj-server-1    |                     │   1832 │   │   │   │   │   │   item,      │\r\nkhoj-server-1    |                     │   1833 │   │   │   │   │   │   fields=fie │\r\nkhoj-server-1    |                     │   1834 │   │   │   │   │   │   using=self │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │ /usr/local/lib/python3.10/dist-packages/d │\r\nkhoj-server-1    |                     │ jango/db/models/query.py:1805 in _insert  │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │   1802 │   │   │   unique_fields=unique_f │\r\nkhoj-server-1    |                     │   1803 │   │   )                          │\r\nkhoj-server-1    |                     │   1804 │   │   query.insert_values(fields │\r\nkhoj-server-1    |                     │ ❱ 1805 │   │   return query.get_compiler( │\r\nkhoj-server-1    |                     │   1806 │                                  │\r\nkhoj-server-1    |                     │   1807 │   _insert.alters_data = True     │\r\nkhoj-server-1    |                     │   1808 │   _insert.queryset_only = False  │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │ /usr/local/lib/python3.10/dist-packages/d │\r\nkhoj-server-1    |                     │ jango/db/models/sql/compiler.py:1821 in   │\r\nkhoj-server-1    |                     │ execute_sql                               │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │   1818 │   │   opts = self.query.get_meta │\r\nkhoj-server-1    |                     │   1819 │   │   self.returning_fields = re │\r\nkhoj-server-1    |                     │   1820 │   │   with self.connection.curso │\r\nkhoj-server-1    |                     │ ❱ 1821 │   │   │   for sql, params in sel │\r\nkhoj-server-1    |                     │   1822 │   │   │   │   cursor.execute(sql │\r\nkhoj-server-1    |                     │   1823 │   │   │   if not self.returning_ │\r\nkhoj-server-1    |                     │   1824 │   │   │   │   return []          │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │ /usr/local/lib/python3.10/dist-packages/d │\r\nkhoj-server-1    |                     │ jango/db/models/sql/compiler.py:1745 in   │\r\nkhoj-server-1    |                     │ as_sql                                    │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │   1742 │   │   result.append(\"(%s)\" % \",  │\r\nkhoj-server-1    |                     │   1743 │   │                              │\r\nkhoj-server-1    |                     │   1744 │   │   if self.query.fields:      │\r\nkhoj-server-1    |                     │ ❱ 1745 │   │   │   value_rows = [         │\r\nkhoj-server-1    |                     │   1746 │   │   │   │   [                  │\r\nkhoj-server-1    |                     │   1747 │   │   │   │   │   self.prepare_v │\r\nkhoj-server-1    |                     │   1748 │   │   │   │   │   for field in f │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │ /usr/local/lib/python3.10/dist-packages/d │\r\nkhoj-server-1    |                     │ jango/db/models/sql/compiler.py:1746 in   │\r\nkhoj-server-1    |                     │ <listcomp>                                │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │   1743 │   │                              │\r\nkhoj-server-1    |                     │   1744 │   │   if self.query.fields:      │\r\nkhoj-server-1    |                     │   1745 │   │   │   value_rows = [         │\r\nkhoj-server-1    |                     │ ❱ 1746 │   │   │   │   [                  │\r\nkhoj-server-1    |                     │   1747 │   │   │   │   │   self.prepare_v │\r\nkhoj-server-1    |                     │   1748 │   │   │   │   │   for field in f │\r\nkhoj-server-1    |                     │   1749 │   │   │   │   ]                  │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │ /usr/local/lib/python3.10/dist-packages/d │\r\nkhoj-server-1    |                     │ jango/db/models/sql/compiler.py:1747 in   │\r\nkhoj-server-1    |                     │ <listcomp>                                │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │   1744 │   │   if self.query.fields:      │\r\nkhoj-server-1    |                     │   1745 │   │   │   value_rows = [         │\r\nkhoj-server-1    |                     │   1746 │   │   │   │   [                  │\r\nkhoj-server-1    |                     │ ❱ 1747 │   │   │   │   │   self.prepare_v │\r\nkhoj-server-1    |                     │   1748 │   │   │   │   │   for field in f │\r\nkhoj-server-1    |                     │   1749 │   │   │   │   ]                  │\r\nkhoj-server-1    |                     │   1750 │   │   │   │   for obj in self.qu │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │ /usr/local/lib/python3.10/dist-packages/d │\r\nkhoj-server-1    |                     │ jango/db/models/sql/compiler.py:1686 in   │\r\nkhoj-server-1    |                     │ prepare_value                             │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │   1683 │   │   │   │   │   \"Window expres │\r\nkhoj-server-1    |                     │   1684 │   │   │   │   │   % (field.name, │\r\nkhoj-server-1    |                     │   1685 │   │   │   │   )                  │\r\nkhoj-server-1    |                     │ ❱ 1686 │   │   return field.get_db_prep_s │\r\nkhoj-server-1    |                     │   1687 │                                  │\r\nkhoj-server-1    |                     │   1688 │   def pre_save_val(self, field,  │\r\nkhoj-server-1    |                     │   1689 │   │   \"\"\"                        │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │ /usr/local/lib/python3.10/dist-packages/d │\r\nkhoj-server-1    |                     │ jango/db/models/fields/__init__.py:954 in │\r\nkhoj-server-1    |                     │ get_db_prep_save                          │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │    951 │   │   \"\"\"Return field's value pr │\r\nkhoj-server-1    |                     │    952 │   │   if hasattr(value, \"as_sql\" │\r\nkhoj-server-1    |                     │    953 │   │   │   return value           │\r\nkhoj-server-1    |                     │ ❱  954 │   │   return self.get_db_prep_va │\r\nkhoj-server-1    |                     │    955 │                                  │\r\nkhoj-server-1    |                     │    956 │   def has_default(self):         │\r\nkhoj-server-1    |                     │    957 │   │   \"\"\"Return a boolean of whe │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │ /usr/local/lib/python3.10/dist-packages/d │\r\nkhoj-server-1    |                     │ jango/db/models/fields/__init__.py:2678   │\r\nkhoj-server-1    |                     │ in get_db_prep_value                      │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │   2675 │   │   if value is None:          │\r\nkhoj-server-1    |                     │   2676 │   │   │   return None            │\r\nkhoj-server-1    |                     │   2677 │   │   if not isinstance(value, u │\r\nkhoj-server-1    |                     │ ❱ 2678 │   │   │   value = self.to_python │\r\nkhoj-server-1    |                     │   2679 │   │                              │\r\nkhoj-server-1    |                     │   2680 │   │   if connection.features.has │\r\nkhoj-server-1    |                     │   2681 │   │   │   return value           │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │ /usr/local/lib/python3.10/dist-packages/d │\r\nkhoj-server-1    |                     │ jango/db/models/fields/__init__.py:2690   │\r\nkhoj-server-1    |                     │ in to_python                              │\r\nkhoj-server-1    |                     │                                           │\r\nkhoj-server-1    |                     │   2687 │   │   │   try:                   │\r\nkhoj-server-1    |                     │   2688 │   │   │   │   return uuid.UUID(* │\r\nkhoj-server-1    |                     │   2689 │   │   │   except (AttributeError │\r\nkhoj-server-1    |                     │ ❱ 2690 │   │   │   │   raise exceptions.V │\r\nkhoj-server-1    |                     │   2691 │   │   │   │   │   self.error_mes │\r\nkhoj-server-1    |                     │   2692 │   │   │   │   │   code=\"invalid\" │\r\nkhoj-server-1    |                     │   2693 │   │   │   │   │   params={\"value │\r\nkhoj-server-1    |                     ╰───────────────────────────────────────────╯\r\nkhoj-server-1    |                     ValidationError: ['“None” is not a valid\r\nkhoj-server-1    |                     UUID.']\r\nkhoj-server-1    | [21:00:37] ERROR    🚨 Failed to update server via API: Failed to     api.py:204\r\nkhoj-server-1    |                     update content index\r\nkhoj-server-1    |                     ╭────── Traceback (most recent call last) ──────╮\r\nkhoj-server-1    |                     │ /app/src/khoj/routers/api.py:201 in update    │\r\nkhoj-server-1    |                     │                                               │\r\nkhoj-server-1    |                     │   198 │   │   logger.warning(error_msg)       │\r\nkhoj-server-1    |                     │   199 │   │   raise HTTPException(status_code │\r\nkhoj-server-1    |                     │   200 │   try:                                │\r\nkhoj-server-1    |                     │ ❱ 201 │   │   configure_server(state.config,  │\r\nkhoj-server-1    |                     │   202 │   except Exception as e:              │\r\nkhoj-server-1    |                     │   203 │   │   error_msg = f\"🚨 Failed to upda │\r\nkhoj-server-1    |                     │   204 │   │   logger.error(error_msg, exc_inf │\r\nkhoj-server-1    |                     │                                               │\r\nkhoj-server-1    |                     │ /app/src/khoj/configure.py:228 in             │\r\nkhoj-server-1    |                     │ configure_server                              │\r\nkhoj-server-1    |                     │                                               │\r\nkhoj-server-1    |                     │   225 │   │   state.search_models = configure │\r\nkhoj-server-1    |                     │       state.config.search_type)               │\r\nkhoj-server-1    |                     │   226 │   │   initialize_content(regenerate,  │\r\nkhoj-server-1    |                     │   227 │   except Exception as e:              │\r\nkhoj-server-1    |                     │ ❱ 228 │   │   raise e                         │\r\nkhoj-server-1    |                     │   229                                         │\r\nkhoj-server-1    |                     │   230                                         │\r\nkhoj-server-1    |                     │   231 def initialize_content(regenerate: bool │\r\nkhoj-server-1    |                     │       init=False, user: KhojUser = None):     │\r\nkhoj-server-1    |                     │                                               │\r\nkhoj-server-1    |                     │ /app/src/khoj/configure.py:226 in             │\r\nkhoj-server-1    |                     │ configure_server                              │\r\nkhoj-server-1    |                     │                                               │\r\nkhoj-server-1    |                     │   223 │   │                                   │\r\nkhoj-server-1    |                     │   224 │   │   state.SearchType = configure_se │\r\nkhoj-server-1    |                     │   225 │   │   state.search_models = configure │\r\nkhoj-server-1    |                     │       state.config.search_type)               │\r\nkhoj-server-1    |                     │ ❱ 226 │   │   initialize_content(regenerate,  │\r\nkhoj-server-1    |                     │   227 │   except Exception as e:              │\r\nkhoj-server-1    |                     │   228 │   │   raise e                         │\r\nkhoj-server-1    |                     │   229                                         │\r\nkhoj-server-1    |                     │                                               │\r\nkhoj-server-1    |                     │ /app/src/khoj/configure.py:253 in             │\r\nkhoj-server-1    |                     │ initialize_content                            │\r\nkhoj-server-1    |                     │                                               │\r\nkhoj-server-1    |                     │   250 │   │   │   │   if not status:          │\r\nkhoj-server-1    |                     │   251 │   │   │   │   │   raise RuntimeError( │\r\nkhoj-server-1    |                     │   252 │   │   except Exception as e:          │\r\nkhoj-server-1    |                     │ ❱ 253 │   │   │   raise e                     │\r\nkhoj-server-1    |                     │   254                                         │\r\nkhoj-server-1    |                     │   255                                         │\r\nkhoj-server-1    |                     │   256 def configure_routes(app):              │\r\nkhoj-server-1    |                     │                                               │\r\nkhoj-server-1    |                     │ /app/src/khoj/configure.py:251 in             │\r\nkhoj-server-1    |                     │ initialize_content                            │\r\nkhoj-server-1    |                     │                                               │\r\nkhoj-server-1    |                     │   248 │   │   │   │   │   user=user,          │\r\nkhoj-server-1    |                     │   249 │   │   │   │   )                       │\r\nkhoj-server-1    |                     │   250 │   │   │   │   if not status:          │\r\nkhoj-server-1    |                     │ ❱ 251 │   │   │   │   │   raise RuntimeError( │\r\nkhoj-server-1    |                     │   252 │   │   except Exception as e:          │\r\nkhoj-server-1    |                     │   253 │   │   │   raise e                     │\r\nkhoj-server-1    |                     │   254                                         │\r\nkhoj-server-1    |                     ╰───────────────────────────────────────────────╯\r\nkhoj-server-1    |                     RuntimeError: Failed to update content index\r\nkhoj-server-1    | [21:00:38] INFO     192.168.65.1:49636 - \"GET                    h11_impl.py:431\r\n",
      "state": "closed",
      "author": "danrthompson",
      "author_type": "User",
      "created_at": "2024-02-05T21:56:15Z",
      "updated_at": "2024-02-20T21:46:58Z",
      "closed_at": "2024-02-20T21:46:57Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/637/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/637",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/637",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:31.121095",
      "comments": [
        {
          "author": "danrthompson",
          "body": "let me know if there is any additional info i should provide\r\n\r\ni gave the notion integration all permissions",
          "created_at": "2024-02-05T21:57:52Z"
        },
        {
          "author": "danrthompson",
          "body": "added a print statement here:\r\n```\r\n    def update_entries_with_ids(self, current_entries, user: KhojUser = None):\r\n        # Identify, mark and merge any new entries with previous entries\r\n        print(current_entries)\r\n        with timer(\"Identify new or updated entries\", logger):\r\n            nu",
          "created_at": "2024-02-09T03:04:30Z"
        }
      ]
    },
    {
      "issue_number": 642,
      "title": "[IDEA] Add document indexing support for ODT files",
      "body": "## Describe the feature you'd like\r\nIt would be useful for some users to have support for [ODT files](https://www.howtogeek.com/765461/what-is-an-odt-file-and-how-do-you-open-one/). [See discussion here](https://discord.com/channels/1112065956647284756/1203080895863590962/1203733691889623100). \r\n\r\nSee how much lift this is and whether we can support it.\r\n",
      "state": "open",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2024-02-10T04:34:04Z",
      "updated_at": "2024-02-10T04:34:04Z",
      "closed_at": null,
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/642/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/642",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/642",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:36.324088",
      "comments": []
    },
    {
      "issue_number": 640,
      "title": "Internal Server Error",
      "body": "Since the past month or so, if I wanted to chat with Khoj I'm just getting an error message. \"Internal Server Error\" \r\n\r\n\r\nSteps to reproduce the behavior: I dont think you can reproduce it yourself ... \r\n\r\n## Screenshots\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n## Platform\r\n- Server:\r\n    - [* ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [ ] Self-Hosted Docker\r\n    - [ ] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [ ] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [* ] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [* ] Windows\r\n    - [ ] macOS\r\n    - [ ] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]:\r\n\r\nI also tried to generate new API Keys but nothing worked.\r\n",
      "state": "closed",
      "author": "NoIdea147",
      "author_type": "User",
      "created_at": "2024-02-07T09:44:23Z",
      "updated_at": "2024-02-09T05:18:10Z",
      "closed_at": "2024-02-09T05:18:10Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/640/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/640",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/640",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:36.324105",
      "comments": [
        {
          "author": "sabaimran",
          "body": "@NoIdea147 could you shoot me an email with a link to this issue from the email address you use for your Khoj Cloud account at team@khoj.dev? I can try to debug some of these things for you with that.\r\n\r\nOtherwise, I think the issue you're running into *might* be due to your indexing model. Can you ",
          "created_at": "2024-02-07T10:05:43Z"
        },
        {
          "author": "NoIdea147",
          "body": "Thanks mate, this solved the problem :)\r\n\r\nsabaimran ***@***.***> schrieb am Mi., 7. Feb. 2024, 11:05:\r\n\r\n> @NoIdea147 <https://github.com/NoIdea147> could you shoot me an email\r\n> with a link to this issue from the email address you use for your Khoj\r\n> Cloud account at ***@***.***? I can try to de",
          "created_at": "2024-02-07T12:42:45Z"
        }
      ]
    },
    {
      "issue_number": 632,
      "title": "[FIX] chat",
      "body": "Sir, why is there no chat from today, when will the problem be solved?",
      "state": "closed",
      "author": "Anandsangat",
      "author_type": "User",
      "created_at": "2024-01-30T10:44:21Z",
      "updated_at": "2024-01-31T02:19:52Z",
      "closed_at": "2024-01-31T02:19:52Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/632/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/632",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/632",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:36.540304",
      "comments": []
    },
    {
      "issue_number": 625,
      "title": "[FIX] Online search results do not take into account conversation history",
      "body": "## Describe the bug\r\nConversation history should be included as part of the payload when deciding how to construction SERP queries.\r\n\r\n## To Reproduce\r\n`/online who is boris johnson`\r\n`/online what's the latest news about him`\r\n(response will not know, because \"him\" is not translating to \"boris johnson\"\r\n\r\n## Additional context\r\n\r\nThis issue also applies to the `/image` endpoint.\r\n\r\n- See [this file](https://github.com/khoj-ai/khoj/blob/17107a0337d4d47e2eb17450ee20a20446220e4a/src/khoj/processor/tools/online_search.py#L16)\r\n- See [this file](https://github.com/khoj-ai/khoj/blob/17107a0337d4d47e2eb17450ee20a20446220e4a/src/khoj/routers/helpers.py#L276)\r\n",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2024-01-23T12:26:46Z",
      "updated_at": "2024-01-26T12:11:44Z",
      "closed_at": "2024-01-26T12:11:44Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/625/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/625",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/625",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:36.540329",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Fixed with #626 ",
          "created_at": "2024-01-26T12:11:44Z"
        }
      ]
    },
    {
      "issue_number": 623,
      "title": "Can't access search in Obsidian [FIX]",
      "body": "## Describe the bug\r\nA clear and concise description of what the bug is. Please include what you were expecting to happen vs. what actually happened.\r\nThank you for the [Dataview fix](https://github.com/khoj-ai/khoj/commit/1a46734485ffe04c372c1857989d78c4081c6084). It's nice to have the chat window in Obsidian now. However, I no longer have access to the regular incremental search box.\r\n\r\nBefore: clicking the magnifying glass would bring up incremental search. Typing in the box would produce instant results.\r\nAfter: clicking the magnifying glass brings up the chat window. I can't find the search window option. \r\n\r\nI tried creating a hotkey for search, and it does bring up a window but without the text entry portion. I can only select from my previous search results.\r\n\r\n## Platform\r\n- Server:\r\n    - [ ] Cloud-Hosted (https://app.khoj.dev)\r\n    - [ ] Self-Hosted Docker\r\n    - [x] Self-Hosted Python package\r\n    - [ ] Self-Hosted source code\r\n- Client:\r\n    - [x] Obsidian\r\n    - [ ] Emacs\r\n    - [ ] Desktop app\r\n    - [ ] Web browser\r\n    - [ ] WhatsApp\r\n- OS:\r\n    - [ ] Windows\r\n    - [ ] macOS\r\n    - [x] Linux\r\n    - [ ] Android\r\n    - [ ] iOS\r\n\r\n### If self-hosted\r\n- Server Version [e.g. 1.0.1]: 1.2.1 \r\n",
      "state": "closed",
      "author": "edbock",
      "author_type": "User",
      "created_at": "2024-01-19T22:12:54Z",
      "updated_at": "2024-01-25T12:46:34Z",
      "closed_at": "2024-01-21T03:21:58Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/623/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/623",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/623",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:36.723776",
      "comments": [
        {
          "author": "debanjum",
          "body": "1. I'd removed Khoj search and replaced it with Khoj chat in the side ribbon. Just kept one Khoj command on the side ribbon to avoid clutter and felt folks chat more than search. I can add it back if required\r\n2. For now though you should be able to find `Khoj: Search` in your [Obsidian command pale",
          "created_at": "2024-01-20T16:56:33Z"
        },
        {
          "author": "edbock",
          "body": "Oops, my bad. I didn't look carefully enough at the hotkeys and indeed, that's what was happening. In fact, I'm very happy you pointed me back in that direction. The similar notes feature is fantastic, and is high on the list of features I would have requested.\r\n\r\nIf I hadn't been so focused on look",
          "created_at": "2024-01-21T03:21:58Z"
        },
        {
          "author": "debanjum",
          "body": "Glad we resolved the confusion and you found the similar notes feature useful! It is mentioned in the [docs](https://docs.khoj.dev/clients/obsidian/#find-similar-notes) but we should add more details/images explaining the available commands for sure!",
          "created_at": "2024-01-25T12:46:32Z"
        }
      ]
    },
    {
      "issue_number": 103,
      "title": "Add Khoj to top menu tray in Ubuntu",
      "body": "It would be amazing if we had a Khoj utility that showed up in the menu tray at the of the OS menu bar, like below screenshot (for Docker). Simple entrypoints like start/stop/configure would be useful.\r\n\r\n![image](https://user-images.githubusercontent.com/65192171/198710028-e5f8ae93-782f-4ef1-9604-77627b840ef6.png)\r\n",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2022-10-28T18:47:16Z",
      "updated_at": "2024-01-18T12:01:01Z",
      "closed_at": "2024-01-18T12:01:00Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/103/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/103",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/103",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:36.998424",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Menu tray is now there, but lacks the Icon for some reason.",
          "created_at": "2023-11-20T00:34:18Z"
        },
        {
          "author": "debanjum",
          "body": "Verified that the Khoj system tray icon now appears on Ubuntu just fine! 🥳 ",
          "created_at": "2024-01-18T12:01:01Z"
        }
      ]
    },
    {
      "issue_number": 527,
      "title": "Fit & finish: Multi-User Khoj application",
      "body": "- [x] Remove exposed API endpoints that should not be accessible in a cloud environment (for example, offline chat)\r\n- [x] Add clear onboarding instructions\r\n- [x] Add billing with a callback function to determine which users are subscribed\r\n- [x] Need a copy button by the API Key\r\n- [x] Remove trailing slash from the URL in the desktop application\r\n- [x] Update copy after you've saved a setting in the config page. (doesn't need to say go back to settings page)\r\n- [x] Prompt exceeded error with gpt4\r\n- [x] zoneinfo._common.ZoneInfoNotFoundError: 'tzlocal() does not support non-zoneinfo timezones like UTC. \\nPlease use a timezone in the form of Continent/City'\r\n- [x] Account icon on the config page\r\n- [x] Add ability to delete indexed data from the web app settings page\r\n- [x] Remove `@auth_router.post(\"/redirect\")` from `generate_token` API (overrides actual redirect login method)\r\n- [x] Remove `demo` backend code/configuration\r\n- [x] Ensure search results are same before vs after rearchitecture\r\n    - Search results are deterministic for a given model and dataset\r\n- [X] Rename Embeddings to Entries\r\n- [x] Improve Sign-In UX on Web App\r\n- [x] Add unit test to prevent cross-shard access \r\n   - Ensure access to DB from API controllers only via wrapper function that need user argument. Do not work directly with Django DB models\r\n- [x] Test Performance of Khoj at scale\r\n     - How much users * data can be ingested. It's effects on memory utilization and search, chat latency.\r\n- [x] Starting khoj with the `khoj` is broken. \r\n  Need it to call `run(should_start_server=True)` but it's doing `run(should_start_server=False)` in main.py final conditional. This is required for gunicorn. Using env variable to select between the two may be the fix for this\r\n- [x] Multiple API calls landing together maybe duplicate results duplicate. Keep per user write lock in DB to prevent this",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-10-31T00:13:12Z",
      "updated_at": "2024-01-18T05:11:34Z",
      "closed_at": "2024-01-18T05:11:34Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/527/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/527",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/527",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:37.223218",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Closed as main migration features to enable multi-user setup have been completed!",
          "created_at": "2024-01-18T05:11:34Z"
        }
      ]
    },
    {
      "issue_number": 319,
      "title": "Add a \"doctor\" endpoint which people can use to upload logs",
      "body": "It's oftentimes hard to diagnose what exactly is going on with users' machines. Add a `doctor` endpoint which a person can click to upload their `khoj.log` to some shared file storage, like in S3. This should be scrubbed of any potentially identifiable data, like filenames or queries.\r\n\r\nThis would be really helpful for debugging issues.",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-07-14T19:32:56Z",
      "updated_at": "2024-01-18T04:57:59Z",
      "closed_at": "2024-01-18T04:43:46Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/319/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/319",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/319",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:37.431026",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Closing as this hasn't been a pressing concern. Though clunky, debugging has been working well enough with error logs.",
          "created_at": "2024-01-18T04:43:46Z"
        }
      ]
    },
    {
      "issue_number": 597,
      "title": "Index PDF, Markdown and Plaintext files using the Emacs client",
      "body": null,
      "state": "closed",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2023-12-29T08:01:57Z",
      "updated_at": "2024-01-03T06:18:47Z",
      "closed_at": "2024-01-03T06:18:47Z",
      "labels": [
        "upgrade",
        "plugin"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/597/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/597",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/597",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:37.641622",
      "comments": []
    },
    {
      "issue_number": 582,
      "title": "gpt4all missing on docker image?",
      "body": "After running docker compose up it fails with the following error: \r\n\r\n<img width=\"641\" alt=\"Screenshot 2023-12-10 at 14 51 43\" src=\"https://github.com/khoj-ai/khoj/assets/317403/04e4383f-a07b-4c0f-8d81-ca32c3b09f73\">\r\n\r\n`No module named  'gpt4all'`",
      "state": "closed",
      "author": "bonzofenix",
      "author_type": "User",
      "created_at": "2023-12-10T13:55:23Z",
      "updated_at": "2023-12-31T06:05:33Z",
      "closed_at": "2023-12-31T06:05:33Z",
      "labels": [
        "documentation",
        "question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/582/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/582",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/582",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:37.641645",
      "comments": [
        {
          "author": "aswinmohanme",
          "body": "I have run into the same bug as well. Running on MacOS with the latest 1.1.0 release.",
          "created_at": "2023-12-17T06:19:37Z"
        },
        {
          "author": "debanjum",
          "body": "@bonzofenix are you also on Mac M1+ or a Linux ARM64 machine?\r\n\r\nKhoj Offline Chat on ARM64 via Docker is not currently supported because the gpt4all dependency doesn't have an ARM64 build. **You'll need to setup Khoj on your machine locally by [following these instructions](https://docs.khoj.dev/#/",
          "created_at": "2023-12-17T14:30:09Z"
        },
        {
          "author": "aswinmohanme",
          "body": "> @bonzofenix are you also on Mac M1+ or a Linux ARM64 machine?\r\n> \r\n> Khoj Offline Chat on ARM64 via Docker is not currently supported because the gpt4all dependency doesn't have an ARM64 build. **You'll need to setup Khoj on your machine locally by [following these instructions](https://docs.khoj.",
          "created_at": "2023-12-24T08:58:54Z"
        },
        {
          "author": "debanjum",
          "body": "No issues, thanks for confirming that. The only way around that for now is to install khoj directly on your machine, rather than via docker as mentioned above.",
          "created_at": "2023-12-31T06:05:09Z"
        }
      ]
    },
    {
      "issue_number": 570,
      "title": "Add a health check to Khoj",
      "body": "In `api.py`, add a simple `/health` endpoint that simply returns `200`.",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-11-26T04:50:17Z",
      "updated_at": "2023-12-23T08:41:30Z",
      "closed_at": "2023-12-23T08:35:16Z",
      "labels": [
        "good first issue"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/570/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "ayushjha119"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/570",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/570",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:37.840648",
      "comments": [
        {
          "author": "Sanket-Arekar",
          "body": "Hey @sabaimran I would like to work on this issue. Can you Please assign me this issue?",
          "created_at": "2023-11-26T22:49:33Z"
        },
        {
          "author": "sabaimran",
          "body": "Awesome! Thanks for volunteering, @Sanket-Arekar . Let me know if you need any guidance with the dev setup.\n\nI would recommend cloning the repository, creating a virtual environment, and then running `pip install -e '.[dev]` to get started. We also need to add better documentation for this.",
          "created_at": "2023-11-26T23:02:11Z"
        },
        {
          "author": "Sanket-Arekar",
          "body": "Okay. Thank You for assigning me this issue, I will start working on it.",
          "created_at": "2023-11-27T01:56:02Z"
        },
        {
          "author": "ayushjha119",
          "body": "@sabaimran please check this i have raised a PR for this issue",
          "created_at": "2023-12-20T13:25:51Z"
        },
        {
          "author": "ayushjha119",
          "body": "@sabaimran please check now, i have raised new PR according to your requirement",
          "created_at": "2023-12-21T10:08:32Z"
        }
      ]
    },
    {
      "issue_number": 258,
      "title": "Support Image Search in Khoj Obsidian",
      "body": "Support searching for images in Obsidian Vault using natural language with Khoj. \nKhoj already supports searching for images. \nBut the Obsidian plugin needs to be updated to \n1. Index images in vault\n2. Show images in the search modal (Rendering images is not currently fast enough for search as you type, so either make it fast enough or do image search separately)",
      "state": "closed",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2023-06-30T21:11:31Z",
      "updated_at": "2023-12-21T05:51:43Z",
      "closed_at": "2023-12-21T05:51:43Z",
      "labels": [
        "upgrade",
        "plugin"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/258/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/258",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/258",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:38.074819",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Closing for now as we aren't currently supporting/maintaining image search.",
          "created_at": "2023-12-21T05:51:43Z"
        }
      ]
    },
    {
      "issue_number": 565,
      "title": "Document recommended host URL for locally running Khoj",
      "body": "- Document recommended host URL for locally running Khoj should be http://127.0.0.1:42110\r\n- Using localhost doesn't resolve correctly in many instances, so the recommended configuration is to use the local IP. Refer also to [this Discord discussion](https://discord.com/channels/1112065956647284756/1176559531770265611/1176630095222423595).",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-11-21T21:12:08Z",
      "updated_at": "2023-11-23T01:46:45Z",
      "closed_at": "2023-11-23T01:46:45Z",
      "labels": [
        "documentation",
        "good first issue"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/565/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/565",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/565",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:38.271043",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Updated here: http://docs.khoj.dev/#/setup?id=setup-host-url",
          "created_at": "2023-11-23T01:46:41Z"
        }
      ]
    },
    {
      "issue_number": 85,
      "title": "Consider outline hierarchy when searching?",
      "body": "I am playing around with the search and comparing the results with my https://github.com/yantar92/org-ql/ setup.\r\n\r\nOne obvious point that is not handled by khoj is matching the outline path for nodes:\r\nConsider the following outline structure:\r\n\r\n* Topics\r\n** Emacs\r\n*** debanjum [Github] debanjum/khoj: Natural Language Search Engine for your Org-Mode and Markdown notes, Beancount transactions and Photos\r\n\r\nA natural way to search for the deepest node is \"emacs org search engine\", but khoj does not yield the match here. ",
      "state": "closed",
      "author": "yantar92",
      "author_type": "User",
      "created_at": "2022-09-10T09:36:27Z",
      "updated_at": "2023-11-19T21:18:20Z",
      "closed_at": "2023-11-19T21:18:20Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/85/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/85",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/85",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:40.301511",
      "comments": [
        {
          "author": "debanjum",
          "body": "Fair suggestion to improve results. It's in my mental backlog of improvements. Good that it's been explicitly added as an issue to track :)\r\n\r\nAdding outline data (e.g heading, tags) to a node seems like a good idea to improve search quality. Most org search tools like default org-mode search, `org-",
          "created_at": "2022-09-10T11:48:36Z"
        }
      ]
    },
    {
      "issue_number": 466,
      "title": "Add pg_vector to store embeddings in Khoj",
      "body": "For users doing self-setup, requires installation of the https://github.com/pgvector/pgvector extension",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-08-28T06:07:03Z",
      "updated_at": "2023-11-17T02:58:04Z",
      "closed_at": "2023-11-17T02:58:03Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/466/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/466",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/466",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:40.477752",
      "comments": [
        {
          "author": "debanjum",
          "body": "Resolved in PR #549",
          "created_at": "2023-11-17T02:58:03Z"
        }
      ]
    },
    {
      "issue_number": 280,
      "title": "Improve view of compiled references in the chat window",
      "body": "Currently, we render compiled references as a tooltip at the end of a message. You have to hover over it for the person to see what of their text matched the exact query.\r\n\r\nRather than that, we should make it so that the user can open up a separate pane that contains all the relevant references.\r\n\r\n[Link to relevant discussion in Discord](https://discord.com/channels/1112065956647284756/1126600081236308099).",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-07-06T20:01:08Z",
      "updated_at": "2023-11-16T19:48:05Z",
      "closed_at": "2023-11-16T19:48:04Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/280/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "sabaimran"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/280",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/280",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:40.693967",
      "comments": []
    },
    {
      "issue_number": 195,
      "title": "[Obsidian] Khoj first-run indexing runs out of RAM (MemoryError)",
      "body": "I'm on a windows machine with python version 3.10\r\n\r\n![image](https://user-images.githubusercontent.com/54596777/228474782-302fcd1d-b2f5-433c-8ca4-dcd746e56fe2.png)\r\n\r\n![image](https://user-images.githubusercontent.com/54596777/228474848-72f60e01-012d-49dd-a067-59de494b5684.png)\r\n\r\n",
      "state": "closed",
      "author": "Mahgozar",
      "author_type": "User",
      "created_at": "2023-03-29T08:33:03Z",
      "updated_at": "2023-11-16T19:48:04Z",
      "closed_at": "2023-11-16T19:48:04Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 19,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/195/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/195",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/195",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:40.693992",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hey @Mahgozar, it's unfortunate that you're hitting an issue during the auto-configuration of khoj\r\n\r\nCould you share more of the error logs you see? Ideally the errors from files like `api.py`, `main.py` and/or `configure.py`",
          "created_at": "2023-03-29T09:33:55Z"
        },
        {
          "author": "Mahgozar",
          "body": "can you tell me how can i get those logs? this is all that its showing to me ",
          "created_at": "2023-03-29T10:01:48Z"
        },
        {
          "author": "Mahgozar",
          "body": "In the same error message, I sent before these are specifically mentioning configure.py and api.py \r\n![image](https://user-images.githubusercontent.com/54596777/228500262-ad58059b-1564-4f6a-bbf6-5137895d6da3.png)\r\n",
          "created_at": "2023-03-29T10:04:36Z"
        },
        {
          "author": "debanjum",
          "body": "> In the same error message, I sent before these are specifically mentioning configure.py and api.py\r\n\r\nAh, yeah that's great. Can you also share more of the error after the configure.py as well?\r\n\r\nAlso did you try restart the khoj backend app and then re-enable the khoj obsidian plugin to see if t",
          "created_at": "2023-03-29T10:07:50Z"
        },
        {
          "author": "debanjum",
          "body": "> can you tell me how can i get those logs? this is all that its showing to me\r\n\r\nThe logs get added to the C:\\Users\\user\\.khoj\\khoj.log file too",
          "created_at": "2023-03-29T10:10:13Z"
        }
      ]
    },
    {
      "issue_number": 467,
      "title": "Add support for managing multiple users within Khoj",
      "body": "Of course, it can be used in a single user scenario, but also support the capability to:\n- Add a new user\n- Sign in with an existing user account\n- Partition data based on users\n- Delete all data associated with a given user",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-08-28T06:07:54Z",
      "updated_at": "2023-11-16T19:48:02Z",
      "closed_at": "2023-11-16T19:48:02Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/467/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/467",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/467",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:40.928126",
      "comments": []
    },
    {
      "issue_number": 286,
      "title": "Add image config to the settings UI",
      "body": "We haven't added image config to the settings 🤦🏾‍♀️. Test this out and add it in.\n\nhttps://discord.com/channels/1112065956647284756/1112065956647284759/1127287401782448148",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-07-08T18:39:16Z",
      "updated_at": "2023-11-16T17:56:32Z",
      "closed_at": "2023-11-16T17:56:32Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/286/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/286",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/286",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:40.928160",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Closing as we're going to re-design this feature at a later date.",
          "created_at": "2023-11-16T17:56:32Z"
        }
      ]
    },
    {
      "issue_number": 190,
      "title": "Periodic index corruption",
      "body": "I'm not sure about the exact characterization of when this happens, but it seems to be when I've been running the `khoj` server for a while. It seems like the index frequently becomes corrupted and requires a full regeneration. I would guess that this pertains to the temporal incremental indexing functionality.",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-03-20T23:16:46Z",
      "updated_at": "2023-11-11T05:02:56Z",
      "closed_at": "2023-07-17T21:51:11Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/190/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "debanjum"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/190",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/190",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:41.113894",
      "comments": [
        {
          "author": "debanjum",
          "body": "Thanks for opening an issue to track this! This is [a known issue](https://github.com/debanjum/khoj#search-starts-giving-wonky-results). But I haven't been able to get to debugging this yet. \r\n\r\nWe have a reference test set from #186. Just need to stress test khoj using that (by running search/chat ",
          "created_at": "2023-03-20T23:41:36Z"
        },
        {
          "author": "jh0274",
          "body": "hi! so i ran into a corruption of the .gz markdown embeddings file, here are the logs:\r\n\r\n` 📩 Saved current chat session to conversation logs                              \r\nconfigure.py:229[11:44:53] INFO     📬 Updating content index via Scheduler                                         configure.py",
          "created_at": "2023-11-09T13:58:02Z"
        },
        {
          "author": "debanjum",
          "body": "Hi @jh0274, thanks for the investigation and sharing your logs. This corruption during index save is a separate but valid issue from the original.  It should be fixed once we merge the recent [rearchitecture changes](https://github.com/khoj-ai/khoj/compare/master...features/multi-user-support-khoj),",
          "created_at": "2023-11-11T05:02:56Z"
        }
      ]
    },
    {
      "issue_number": 517,
      "title": "Create an easy way for users to share statistics and execution environment",
      "body": "From: https://discord.com/channels/1112065956647284756/1112066421577482262/1166885403798798427\r\n\r\nI would like to have a way that made it easy to provide feedback about the performance of local llm responses.\r\n\r\nI think it could be useful for both the developers and users to be able to easily see information about the performance and quality of the local llm in use.\r\n\r\nInformation that come to mind:\r\n- OS & version\r\n- Relevant hardware info\r\n  - CPU\r\n    - cores\r\n    - model\r\n  - Memory\r\n  - GPU model\r\n  - Vram\r\n    - available\r\n    - in use by khoj\r\n    - free\r\n- chat streaming response time\r\n- quality of response (if user rated, i think there is another issue that is specifically this)\r\n- Time to do RAG\r\n- Time to decode user input\r\n- Time to emit output to user (I think chat streaming time logged currently is combination of input decode time and output, not sure if possible to get separate timeing",
      "state": "open",
      "author": "nickanderson",
      "author_type": "User",
      "created_at": "2023-10-26T16:03:43Z",
      "updated_at": "2023-11-03T19:30:26Z",
      "closed_at": null,
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/517/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/517",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/517",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:41.322045",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Interesting note! These are definitely relevant performance metrics, and thank you for collating this information. We have the `/help` endpoint in chat which would output some of this, but could definitely be more detailed.",
          "created_at": "2023-11-03T19:30:10Z"
        }
      ]
    },
    {
      "issue_number": 497,
      "title": "Include filename, page of PDF results in Emacs for better context",
      "body": "I primarily use Khoj from Emacs. It appears that when searching using \"Content Type = all\", the 'Khoj Search' buffer gets populated with excerpts from PDF sources. However, it does not specify the file, page, or location these excerpts are drawn from. When searching only in PDF files the search results do not indicate the page and location either, but at least the filename is present. When you search mixing the content type, the results are somewhat not very useful.",
      "state": "open",
      "author": "agzam",
      "author_type": "User",
      "created_at": "2023-10-10T23:17:04Z",
      "updated_at": "2023-11-02T17:39:09Z",
      "closed_at": null,
      "labels": [
        "upgrade",
        "plugin"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/497/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 1
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/497",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/497",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:41.579150",
      "comments": [
        {
          "author": "debanjum",
          "body": "Thanks for pointing that out. We haven't tested the PDF rendering in Emacs extensively but not being able to see the context of the PDF results (like filename, page number etc.) isn't great. Let us look into fixing that soon",
          "created_at": "2023-11-02T17:36:51Z"
        }
      ]
    },
    {
      "issue_number": 387,
      "title": "Allow khoj start without re-indexing",
      "body": "Similar to #320 , we need a way to start Khoj even if there are some bad files (or too many) in the user's config. Maybe we can add a command that allows the users to start with `--no-reindex` and bypass reindexing. This can allow them to disable any content types they don't want to persist and start from over without having to nuke their entire configuration or go into their `khoj.yml`.",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-07-31T18:47:05Z",
      "updated_at": "2023-11-02T02:03:58Z",
      "closed_at": "2023-11-02T02:03:58Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/387/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/387",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/387",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:41.830474",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Captured in #457, data will not immediately start re-indexing. ",
          "created_at": "2023-08-23T22:37:00Z"
        }
      ]
    },
    {
      "issue_number": 368,
      "title": "Unnecessary dependencies are installed by `pip install khoj-assistant`",
      "body": "I do not even have an NVIDIA card, but various `nvidia-cuda` dependencies were installed. Would be nice to have these dependencies optional.",
      "state": "open",
      "author": "link2xt",
      "author_type": "User",
      "created_at": "2023-07-30T23:52:54Z",
      "updated_at": "2023-10-31T11:52:16Z",
      "closed_at": null,
      "labels": [
        "maintain"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/368/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/368",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/368",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:42.034607",
      "comments": [
        {
          "author": "debanjum",
          "body": "Yeah, this is unnecessary and annoying. A khoj dependency pulls in nvidia-cuda dependencies but only on linux machines for some reason. What can be done to fix that needs to be investigated",
          "created_at": "2023-08-01T21:11:37Z"
        },
        {
          "author": "lumpsoid",
          "body": "As I understand it, it is related to torch dependency, because if you use `pip install torch`, you will get a version of torch for a system with CUDA \r\n![image](https://github.com/khoj-ai/khoj/assets/79290581/8e9a3325-3d97-45d6-a20b-460a92b3eca5)\r\n\r\nand to install torch **without** CUDA you should u",
          "created_at": "2023-10-31T11:30:40Z"
        }
      ]
    },
    {
      "issue_number": 390,
      "title": "AMD GPU/APU acceleration (CLBLAS), Nvidia GPU acceleration (CUBLAS)",
      "body": "It would be awesome if Khoj worked with AMD GPU / APU acceleration given how popular Ryzen CPU/APUs are these days.\r\n\r\nFor reference - LocalAI does this with CLBLAS so it should be possible - https://localai.io/basics/build/#clblas\r\n\r\n---\r\n\r\n_Somewhat related to https://github.com/khoj-ai/khoj/issues/388_",
      "state": "closed",
      "author": "sammcj",
      "author_type": "User",
      "created_at": "2023-07-31T22:21:02Z",
      "updated_at": "2023-10-26T01:13:25Z",
      "closed_at": "2023-10-26T01:13:25Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/390/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/390",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/390",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:42.233111",
      "comments": [
        {
          "author": "sammcj",
          "body": "I just tried the project out with an Nvidia card - it doesn't seem to use CUDA/CUBLAS with nvidia cards either - perhaps a config option is missing somewhere to enable this?",
          "created_at": "2023-08-10T00:49:34Z"
        },
        {
          "author": "debanjum",
          "body": "For Khoj Chat, #494 has added support for running on [Vulcan supported GPU+OS](https://vulkan.gpuinfo.org/). I don't have access to such a device myself but if your Machine is Vulcan supported, give Khoj a try and report back if it still doesn't engage your AMD, Nvidia GPU",
          "created_at": "2023-10-17T01:07:44Z"
        },
        {
          "author": "debanjum",
          "body": "Marking this issue as completed for now as Khoj now supports at least some Nvidia, AMD GPUs with Vulkan support added to GPT4All (our upstream dependency). But feel free to reopen the issue if it doesn't work for you",
          "created_at": "2023-10-26T01:13:25Z"
        }
      ]
    },
    {
      "issue_number": 434,
      "title": "Support customizing Q&A use cases",
      "body": "I can think of three use cases for now: chatting with own documents; continuous conversations with documents; and general chatting. For me, I am more interested in Q&A with own documents, which are the first two cases.",
      "state": "closed",
      "author": "wenlzhang",
      "author_type": "User",
      "created_at": "2023-08-10T08:11:32Z",
      "updated_at": "2023-10-17T03:11:06Z",
      "closed_at": "2023-10-17T03:11:05Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/434/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/434",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/434",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:42.419646",
      "comments": [
        {
          "author": "debanjum",
          "body": "Thanks for opening an issue to track this. We can add a command to limit Khoj to answer from your documents only. See the [discussion on discord](https://discord.com/channels/1112065956647284756/1112069753549373480/1138990372110991480)",
          "created_at": "2023-08-10T08:24:42Z"
        },
        {
          "author": "debanjum",
          "body": "This was resolved in #463. Using `/notes` prefix in your messages should limit Khoj to only respond using your documents as reference. See [docs](https://docs.khoj.dev/#/chat?id=commands) for reference",
          "created_at": "2023-10-17T03:11:05Z"
        }
      ]
    },
    {
      "issue_number": 375,
      "title": "Document recommend system requirements",
      "body": "Reading through the setup for the backend it doesn't detail what resources I should allocate?\r\nFor example,\r\n- recommended number of threads\r\n- recommended core clock speed\r\n- recommended ram\r\n- recommended storage\r\n- recommended gpu (if any)",
      "state": "closed",
      "author": "Player505",
      "author_type": "User",
      "created_at": "2023-07-31T07:17:15Z",
      "updated_at": "2023-10-17T02:40:16Z",
      "closed_at": "2023-10-17T02:40:16Z",
      "labels": [
        "documentation"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/375/reactions",
        "total_count": 5,
        "+1": 5,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/375",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/375",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:42.639607",
      "comments": []
    },
    {
      "issue_number": 378,
      "title": "does not work on ubuntu: version `GLIBC_2.35' not found",
      "body": "After installation using the latest debian package `khoj_0.10.0_amd64.deb`:\r\n\r\n```\r\n/opt/Khoj \r\n[39318] SPLASH: Failed to load Tcl/Tk libraries!\r\n[39326] Error loading Python lib '/tmp/_MEIJcR2vd/libpython3.9.so.1.0': dlopen: /lib/x86_64-linux-gnu/libm.so.6: version `GLIBC_2.35' not found (required by /tmp/_MEIJcR2vd/libpython3.9.so.1.0)\r\n```\r\n\r\n```\r\nuname -a\r\nLinux valhalla 5.19.17-051917-generic #202210240939 SMP PREEMPT_DYNAMIC Mon Oct 24 09:43:01 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\nlsb_release -a\r\nNo LSB modules are available.\r\nDistributor ID:\tUbuntu\r\nDescription:\tUbuntu 20.04.6 LTS\r\nRelease:\t20.04\r\nCodename:\tfocal\r\n\r\n▶ dpkg -l | grep \"Python language\"\r\nii  libpython2.7-minimal:amd64                                  2.7.18-1~20.04.3                           amd64        Minimal subset of the Python language (version 2.7)\r\nii  libpython3.5-minimal:amd64                                  3.5.2-2ubuntu0~16.04.4                     amd64        Minimal subset of the Python language (version 3.5)\r\nrc  libpython3.6-minimal:amd64                                  3.6.9-1~18.04                              amd64        Minimal subset of the Python language (version 3.6)\r\nrc  libpython3.7-minimal:amd64                                  3.7.5-2~19.10ubuntu1                       amd64        Minimal subset of the Python language (version 3.7)\r\nii  libpython3.8-minimal:amd64                                  3.8.10-0ubuntu1~20.04.7                    amd64        Minimal subset of the Python language (version 3.8)\r\nii  python2.7-minimal                                           2.7.18-1~20.04.3                           amd64        Minimal subset of the Python language (version 2.7)\r\nii  python3-minimal                                             3.8.2-0ubuntu2                             amd64        minimal subset of the Python language (default python3 version)\r\nii  python3.5-minimal                                           3.5.2-2ubuntu0~16.04.4                     amd64        Minimal subset of the Python language (version 3.5)\r\nrc  python3.6-minimal                                           3.6.9-1~18.04                              amd64        Minimal subset of the Python language (version 3.6)\r\nrc  python3.7-minimal                                           3.7.5-2~19.10ubuntu1                       amd64        Minimal subset of the Python language (version 3.7)\r\nii  python3.8-minimal                                           3.8.10-0ubuntu1~20.04.7                    amd64        Minimal subset of the Python language (version 3.8)\r\n```\r\n",
      "state": "closed",
      "author": "kforner",
      "author_type": "User",
      "created_at": "2023-07-31T12:30:53Z",
      "updated_at": "2023-10-17T01:01:18Z",
      "closed_at": "2023-10-17T01:01:17Z",
      "labels": [
        "fix",
        "question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 10,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/378/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/378",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/378",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:42.639628",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Thanks for raising the issue (with relevant details!) and sorry for the installation roadblocks. As it turns out, `GLIBC_2.35` isn't available on Ubuntu 20.04 -- as showing in [this](https://askubuntu.com/questions/1408049/how-can-i-get-glibc-2-35-on-ubuntu-20-04) and [this](https://fluka-forum.web.",
          "created_at": "2023-08-02T17:47:05Z"
        },
        {
          "author": "sabaimran",
          "body": "You could go through the task of updating your `glibc` version, but I don't recommend this as it's a system package and can lead to other issues in your OS.",
          "created_at": "2023-08-02T17:53:50Z"
        },
        {
          "author": "kforner",
          "body": "> You should still be able to use the application via the python package\r\n\r\nno. cf https://github.com/khoj-ai/khoj/issues/391",
          "created_at": "2023-08-03T07:05:25Z"
        },
        {
          "author": "kforner",
          "body": "> For now, I think glibc 2.35 is just going to be a system requirement. I'll document that some place.\r\n\r\nubuntu 20.04 is a LTS, meaning lots of people and enterprises still use it.\r\n\r\nThanks for your help.",
          "created_at": "2023-08-03T07:07:05Z"
        },
        {
          "author": "debanjum",
          "body": "Hey @kforner, I was able to finally reproduce this issue on an Ubuntu 20.04.\r\n\r\nCan you verify that using the latest khoj debian package [here](https://github.com/khoj-ai/khoj/actions/runs/5781741914) fixes the issue for you?",
          "created_at": "2023-08-07T06:45:14Z"
        }
      ]
    },
    {
      "issue_number": 435,
      "title": "Installation of khoj Backend under Big Sur as its launch results in the same error message",
      "body": "macOS 11.7.9, MacBook Intel, Python 3.11 (python.org). Trying to install then lauch Backend to use with Obsidian plugin.\r\nInstallation and lauch end with :\r\nOSError: dlopen(/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/gpt4all/llmodel_DO_NOT_MODIFY/build/libllmodel.dylib, 6): Symbol not found: __ZNSt3__113basic_filebufIcNS_11char_traitsIcEEE4openEPKcj\r\n  Referenced from: /Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/gpt4all/llmodel_DO_NOT_MODIFY/build/libllmodel.dylib (which was built for Mac OS X 12.6)\r\n  Expected in: /usr/lib/libc++.1.dylib",
      "state": "closed",
      "author": "fdarnel",
      "author_type": "User",
      "created_at": "2023-08-10T17:25:06Z",
      "updated_at": "2023-10-17T00:51:00Z",
      "closed_at": "2023-10-17T00:51:00Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/435/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/435",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/435",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:42.872209",
      "comments": [
        {
          "author": "debanjum",
          "body": "That's unfortunate. Seems like the package is expecting c++ installed in a specific place (`/usr/lib/libc++.1.dylib`). Can you confirm:\r\n* Which pytorch version do you have installed on your system? It should be >= 1.6.0 based on [this comment](https://github.com/pytorch/pytorch/issues/36941#issueco",
          "created_at": "2023-08-14T23:17:40Z"
        },
        {
          "author": "debanjum",
          "body": "Closing issue due to lack of details to reproduce bug and issue having gone stale",
          "created_at": "2023-10-17T00:51:00Z"
        }
      ]
    },
    {
      "issue_number": 433,
      "title": "Support Query Filters in Chat",
      "body": "Search already supports (file, date and word) query filters but Chat doesn't allow using these yet.\n\nSupporting this will allow limiting Chat to respond using only entries that satisfy those query filters",
      "state": "closed",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2023-08-09T16:15:27Z",
      "updated_at": "2023-10-14T04:11:25Z",
      "closed_at": "2023-10-14T04:11:25Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/433/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/433",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/433",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:43.049106",
      "comments": [
        {
          "author": "sabaimran",
          "body": "This was added with https://github.com/khoj-ai/khoj/commit/01b310635e190cce0d04c92a21e2b8973216a302. I'm adding a couple of bug fixes to close it out.",
          "created_at": "2023-10-14T03:18:14Z"
        }
      ]
    },
    {
      "issue_number": 455,
      "title": "core dumping",
      "body": "I'm running on my laptop from the deb package I just downloaded.  I go to the menu, click the khoj icon, a lantern icon appears momentarily for abou 30-45 seconds, core dump happens and it's all over with nothing reallyh to show for it.  Hope this helps.\r\n\r\nAug 21 14:48:38 sumomo systemd-coredump[20753]: Process 20719 (Khoj) of user 1000 dumped core.#012#012Found module /tmp/_MEI6CwCPv/PySide6/QtPrintSupport.abi3.so without build-id.#012Found module /tmp/_MEI6CwCPv/PySide6/QtWebEngineCore.abi3.so without buil\r\nd-id.#012Found module /tmp/_MEI6CwCPv/PySide6/QtNetwork.abi3.so without build-id.#012Found module /tmp/_MEI6CwCPv/libxshmfence.so.1 with build-id: 2f059343453436272930d81557a2f5d7db5fb4cb#012Found module /tmp/_MEI6CwCPv/libk5crypto.so.3 with build-id: f77b9cc59d0814c9cc6e47c83c9995a102702d8b#012Found module /tmp/_MEI6CwCPv/libkrb5.so.3 with build-id: 61b74ac570e86bf5e85f095823d891d5c3bc7cfd#012Found module /tmp/_MEI6CwCPv/libgssapi_krb5.so.2 with build-id: ea18178b08e8b7e057a08a199c8a63ce1dc7b991#012Found module /tmp/_MEI6CwCPv/libxkbfile.so.1 with build-id: 01781f63144a19db82d59fc88c8e61fda45c166a#012Found module /tmp/_MEI6CwCPv/libXtst.so.6 with build-id: f5b91f39bffeba7770712f5876e162593784d92c#012Found module /tmp/_MEI6CwCPv/libasound.so.2 with build-id: 592833f648d7ba3b745ecf114986ee2029094986#012Found module /tmp/_MEI6CwCPv/libnspr4.so with build-id: 3a3f31d4d3edfcbcb6356a36a92bb55c98eb121f#012Found module /tmp/_MEI6CwCPv/libnssutil3.so with build-id: 04303308175b1a4d5b3425a7543d10e2a322c01e#012Found module /tmp/_MEI6CwCPv/libnss3.so with build-id: 53f5a8a185db3abf260b77ea560179a395b892e0#012Found module /tmp/_MEI6CwCPv/libsmime3.so with build-id: 1a2d8891f02cdb22aee9b1ceaef4a6d32ca083df#012Found module /tmp/_MEI6CwCPv/libQt6Positioning.so.6 with build-id: 39e8ab1700c96ba1453baa10b7e396d9a93771af#012Found module /tmp/_MEI6CwCPv/libQt6OpenGL.so.6 with build-id: 8c9c9e774288379cf7b1c733d455ddf7a0ade592#012Found module /tmp/_MEI6CwCPv/libQt6Network.so.6 with build-id: a168fb598a92ff23fca4413c681e2113ed9c1495#012Found module /tmp/_MEI6CwCPv/libQt6Qml.so.6 with build-id: 21748cdbb16c96e87ea1e693fdba424f15b5be52#012Found module /tmp/_MEI6CwCPv/libQt6QmlModels.so.6 with build-id: 4d993f30a0f89aa126c38979204db8c8de0275bf#012Found module /tmp/_MEI6CwCPv/libQt6Quick.so.6 with build-id: c90876969bca820e9d477b8bd43da910a698b9fe#012Found module /tmp/_MEI6CwCPv/libQt6WebChannel.so.6 with build-id: f3be287abbdb23cc32ef6dcdc91b14f0cff82168#012Found module /tmp/_MEI6CwCPv/libQt6WebEngineCore.so.6 with build-id: 2428600178dd028ade4b7938a2eeab87211c4cfc#012Found module /tmp/_MEI6CwCPv/libQt6PrintSupport.so.6 with build-id: 6db5bfbbfb48ada93a3c0de3237266386db70484#012Found module /tmp/_MEI6CwCPv/PySide6/QtCore.abi3.so without build-id.#012Found module /tmp/_MEI6CwCPv/PySide6/QtGui.abi3.so without build-id.#012Found module /tmp/_MEI6CwCPv/libgcrypt.so.20 with build-id: b48501d59ed1a1c1ff29d3e68aecd831b613a23c#012Found module /tmp/_MEI6CwCPv/libicudata.so.56 with build-id: 34aac32bb4d3c0f44e72e57cf253a871240a1154#012Found module /tmp/_MEI6CwCPv/libicuuc.so.56 with build-id: 80916a3578c4abf8d9433986b7ca87ee58797eb5#012Found module /tmp/_MEI6CwCPv/libicui18n.so.56 with build-id: ea6a2369dae8e186543b5e0fa413cb7ee7058c84#012Found module /tmp/_MEI6CwCPv/libQt6Core.so.6 with build-id: 098b975371758029c26c24fc2a3b216b1a01b019#012Found module /tmp/_MEI6CwCPv/libQt6Gui.so.6 with build-id: e466b4257c5c66f38d8306cd56a7870ed3fa2ac3#012Found module /tmp/_MEI6CwCPv/libQt6Widgets.so.6 with build-id: 94d6936a9006809d00fd2ef3a6f028bf98bd18b1#012Found module /tmp/_MEI6CwCPv/PySide6/QtWidgets.abi3.so without build-id.#012Found module /tmp/_MEI6CwCPv/libXau-154567c4.so.6.0.0 without build-id.#012Found module /tmp/_MEI6CwCPv/libQt6WebEngineWidgets.so.6 with build-id: f23463388f2f37d5a2c2a3786e596648d560b5f1#012Found module /tmp/_MEI6CwCPv/libsystemd.so.0 with build-id: f949edcd5da116ad1f264107c520c6c5fbf97397#012Found module /tmp/_MEI6CwCPv/libdbus-1.so.3 with build-id: fbbb3cfb1351ae4879456a851397ef94be8339a7#012Found module /tmp/_MEI6CwCPv/libpcre-9513aab5.so.1.2.0 without build-id.#012Found module /tmp/_MEI6CwCPv/PySide6/QtWebChannel.abi3.so with build-id: 7cf4fc2fd747a3a39206fbb29148be77cb0dc8da#012Found module /tmp/_MEI6CwCPv/libQt6DBus.so.6 with build-id: 667c50bee75c463f4228f38ae0f526ce2ea631e6#012Found module /tmp/_MEI6CwCPv/libselinux-0922c95c.so.1 without build-id.#012Found module /tmp/_MEI6CwCPv/PySide6/QtWebEngineWidgets.abi3.so without build-id.#012Found module /tmp/_MEI6CwCPv/libpcre.so.3 with build-id: cef782225a118af34a28083235a6da2aa59b7e82#012Found module /tmp/_MEI6CwCPv/libglib-2.0.so.0 with build-id: 5fdb313daf182a33a858ba2cc945211b11d34561#012Found module /tmp/_MEI6CwCPv/libkeyutils-dfe70bd6.so.1.5 without build-id.#012Found module /tmp/_MEI6CwCPv/libxkbcommon.so.0 with build-id: 09844610cc38154fd3610e18dcccec67e5bbebf1#012Found module /tmp/_MEI6CwCPv/libpyside6.abi3.so.6.5 without build-id.#012Found module /tmp/_MEI6CwCPv/libshiboken6.abi3.so.6.5 without build-id.#012Found module /tmp/_MEI6CwCPv/libkrb5support-d0bcff84.so.0.1 without build-id.#012Found module /tmp/_MEI6CwCPv/libgpg-error.so.0 with build-id: 8d5a01acc26f61ca3aa6aa4ec14ec9712234d153#012Found module /tmp/_MEI6CwCPv/libk5crypto-b1f99d5c.so.3.1 without build-id.#012Found module /tmp/_MEI6CwCPv/libcom_err-2abe824b.so.2.1 without build-id.#012Found module /tmp/_MEI6CwCPv/libkrb5-fcafa220.so.3.3 without build-id.#012Found module /tmp/_MEI6CwCPv/libXi.so.6 with build-id: 589c42ad0b0e40a25e44f26f0f9eb88ea6760c5e#012Found module /tmp/_MEI6CwCPv/liblzma-c1d09604.so.5.2.7 without build-id.#012Found module /tmp/_MEI6CwCPv/libgssapi_krb5-497db0c6.so.2.2 without build-id.#012Found module /tmp/_MEI6CwCPv/libkrb5support.so.0 with build-id: bdbcaa139843b1b8f4091faa67ee3f1d1c22fec3#012Found module /tmp/_MEI6CwCPv/libXrandr.so.2 with build-id: f6537f24d2b40458410cba6e27aca22160f67865#012Found module /tmp/_MEI6CwCPv/libxcb-07618c2c.so.1.1.0 without build-id.#012Found module /tmp/_MEI6CwCPv/libtiff-e8d4c6df.so.5.8.0 without build-id.#012Found module /tmp/_MEI6CwCPv/libjpeg-1678c144.so.62.3.0 without build-id.#012Found module /tmp/_MEI6CwCPv/libcrypto-d3570994.so.1.0.2k without build-id.#012Found module /tmp/_MEI6CwCPv/libkeyutils.so.1 with build-id: 92bfbdffd7504f6bc931733e214e475e3f71ce3a#012Found module /tmp/_MEI6CwCPv/libopenjp2-8fa4ced9.so.2.5.0 without build-id.#012Found module /tmp/_MEI6CwCPv/PIL/_imaging.cpython-39-x86_64-linux-gnu.so with build-id: 0abadcccbf59d6c9b39f742812523a1d938d3125#012Found module /tmp/_MEI6CwCPv/libssl-cd1d6220.so.1.0.2k without build-id.#012Found module /tmp/_MEI6CwCPv/liblz4.so.1 with build-id: f64a53f0f288938d86782cc5547c0ed71063ba3f#012Found module /tmp/_MEI6CwCPv/tokenizers/tokenizers.cpython-39-x86_64-linux-gnu.so without build-id.#012Found module /tmp/_MEI6CwCPv/numexpr/interpreter.cpython-39-x86_64-linux-gnu.so with build-id: d95db658fff2ca713c36533e6590f8d95b4d4b5c#012Found module /tmp/_MEI6CwCPv/greenlet/_greenlet.cpython-39-x86_64-linux-gnu.so with build-id: bd5034220f36cf9f35f51ed59cac6945832599cb#012Found module /tmp/_MEI6CwCPv/sqlalchemy/cyextension/collections.cpython-39-x86_64-linux-gnu.so with build-id: 0e82ea1565bd135ceedd9400a2766cccd7da210a#012Found module /tmp/_MEI6CwCPv/aiohttp/_http_parser.cpython-39-x86_64-linux-gnu.so with build-id: 0968502acb4effcedd5f44ee637efff619c4f567#012Found module /tmp/_MEI6CwCPv/nvfuser/_C.cpython-39-x86_64-linux-gnu.so with build-id: a9bcb07999a1c57141df7a5beaf5c6b49577409f#012Found module /tmp/_MEI6CwCPv/libnvrtc.so.11.2 without build-id.#012Found module /tmp/_MEI6CwCPv/libQt6QuickWidgets.so.6 with build-id: be1dbb5e955788e037b9edc623f88c88d2de3e96#012Found module /tmp/_MEI6CwCPv/libnvfuser_codegen.so without build-id.#012Found module /tmp/_MEI6CwCPv/libnccl.so.2 with build-id: 613aeb0629dd2e28e0f6ca8581c2b6cb7e49b466#012Found module /tmp/_MEI6CwCPv/libcom_err.so.2 with build-id: bb8645b8abf4a687b3c5ec868fbd72583985b0b5#012Found module /tmp/_MEI6CwCPv/libcusparse.so.11 with build-id: 4434e9c0e77f706bda143c3cfd45247c30cdf770#012Found module /tmp/_MEI6CwCPv/libXfixes.so.3 with build-id: 38eecbcccea120c9ed550279c14d458aa2cfee3b#012Found module /tmp/_MEI6CwCPv/libcupti.so.11.7 without build-id.#012Found module /tmp/_MEI6CwCPv/libcudnn.so.8 with build-id: 31fa9c90290cd2f4ee20087fb78\r\nAug 21 14:48:38 sumomo systemd[1]: systemd-coredump@2-20752-0.service: Deactivated successfully.\r\nAug 21 14:48:38 sumomo systemd[1]: systemd-coredump@2-20752-0.service: Consumed 7.008s CPU time.\r\nAug 21 14:48:39 sumomo systemd[1]: Started Process Core Dump (PID 20824/UID 0).\r\nAug 21 14:48:39 sumomo systemd-coredump[20825]: Process 20703 (Khoj) of user 1000 dumped core.#012#012Found module linux-vdso.so.1 with build-id: 94f2c4c5b8fcb5a63866a943b8a321ac1458b921#012Found module libgcc_s.so.1 with build-id: e3a44e0da9c6e835d293ed8fd2882b4c4a87130c#012Found module ld-linux-x86-64.so.2 with build-id: 61ef896a699bb1c2e4e231642b2e1688b2f1a61e#012Found module libc.so.6 with build-id: 69389d485a9793dbe873f0ea2c93e02efaa9aa3d#012Found module libpthread.so.0 with build-id: e62798b68557abb4bc5548aba2640cd5ab948f36#012Found module libz.so.1 with build-id: 30840b79ac329ecbf1dec0bb60180eed256d319f#012Found module libdl.so.2 with build-id: 952123c3bdce7c3370553717942b4878d1fad797#012Found module Khoj with build-id: 0230dd29d2f5ba42b3274ff7981105c752577832#012Stack trace of thread 20703:#012#0  0x00007fb26889ba7c __pthread_kill_implementation (libc.so.6 + 0x96a7c)#012#1  0x00007fb268847476 __GI_raise (libc.so.6 + 0x42476)#012#2  0x000000000040414a n/a (Khoj + 0x414a)#012#3  0x00007fb26882ed90 __libc_start_call_main (libc.so.6 + 0x29d90)#012#4  0x00007fb26882ee40 __libc_start_main_impl (libc.so.6 + 0x29e40)#012#5  0x000000000040256e n/a (Khoj + 0x256e)\r\nAug 21 14:48:39 sumomo systemd[1]: systemd-coredump@3-20824-0.service: Deactivated successfully.",
      "state": "closed",
      "author": "digitalw00t",
      "author_type": "User",
      "created_at": "2023-08-21T19:52:43Z",
      "updated_at": "2023-10-14T02:05:09Z",
      "closed_at": "2023-10-14T02:05:09Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/455/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/455",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/455",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:43.226629",
      "comments": [
        {
          "author": "debanjum",
          "body": "Ouch. Which version of the Khoj desktop app did you try install? [Khoj 0.11.0](https://github.com/khoj-ai/khoj/releases/tag/0.11.1) removed it's dependency on PyQtWebEngine. But the below error suggests Khoj is crashing because it's missing PyQtWebEngine dependencies.\r\n\r\n> Found module /tmp/_MEI6CwC",
          "created_at": "2023-08-21T21:39:15Z"
        },
        {
          "author": "digitalw00t",
          "body": "I pulled the deb from the website 2 days ago.. so version 0.11.0\r\n\r\n```\r\nii  khoj                                       0.11.0                                     amd64        no description given\r\n```\r\n",
          "created_at": "2023-08-23T19:29:50Z"
        },
        {
          "author": "debanjum",
          "body": "I see. Strange that the stacktrace still mentions PtQtWebEngine. \n\nCan you share details of the OS you're running Khoj on? I'll try and reproduce the issue on my end. ",
          "created_at": "2023-08-23T19:37:06Z"
        },
        {
          "author": "digitalw00t",
          "body": "OS: Linux Mint 21.1 x86_64 \r\nHost: Latitude 7410 \r\nKernel: 5.15.0-79-generic \r\nUptime: 18 hours, 11 mins \r\nPackages: 2906 (dpkg), 16 (flatpak), 10 (snap) \r\nShell: bash 5.1.16 \r\nResolution: 1920x1080 \r\nDE: Cinnamon 5.6.8 \r\nWM: Mutter (Muffin) \r\nWM Theme: Mint-Y-Dark-Aqua (Mint-Y) \r\nTheme: Mint-Y-Aqua",
          "created_at": "2023-08-24T14:33:07Z"
        },
        {
          "author": "debanjum",
          "body": "This issue is stale now. We've deprecated the old Khoj desktop app and moved from QT to Electron in [Release 0.12.2](https://github.com/khoj-ai/khoj/releases/tag/0.12.2)",
          "created_at": "2023-10-14T02:05:09Z"
        }
      ]
    },
    {
      "issue_number": 266,
      "title": "Failed to chat after configuring the OpenAI API keys",
      "body": "I got the following errors when trying to chat. Searching works as desired.\r\n\r\n```\r\nWARNING  WARNING! stop is not default parameter.         openai.py:211\r\n                                        stop was transferred to\r\n                    model_kwargs.\r\n                                        Please confirm that stop is\r\n                    what you intended.\r\n           WARNING  WARNING! api_key is not default parameter.      openai.py:211\r\n                                        api_key was transferred to\r\n                    model_kwargs.\r\n                                        Please confirm that api_key\r\n                    is what you intended.\r\nWARNING  GPT returned invalid JSON. Falling back to using   gpt.py:116\r\n                    user message as search query.\r\n```",
      "state": "closed",
      "author": "wenlzhang",
      "author_type": "User",
      "created_at": "2023-07-02T20:19:57Z",
      "updated_at": "2023-10-13T21:12:08Z",
      "closed_at": "2023-10-13T21:12:07Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/266/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "sabaimran"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/266",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/266",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:43.405497",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Hey @wenlzhang , could you try another chat query? These are just warnings and I also see them from time to time, but I'm able to chat. Chat API requests to OpenAI might fail, but we can't do much about that for now, sadly.",
          "created_at": "2023-07-02T20:24:13Z"
        },
        {
          "author": "wenlzhang",
          "body": "> Chat API requests to OpenAI might fail, but we can't do much about that for now, sadly.\r\n\r\nI tried four queries, but only one worked for me. For the other three queries, I got the following reply as the message:\r\n```\r\nRequest timed out: HTTPSConnectionPool(host='api.openai.com', port=443): Read ti",
          "created_at": "2023-07-02T20:37:03Z"
        },
        {
          "author": "sabaimran",
          "body": "Hmm, good to know. I think we may need to increase our timeout range for queries. Thanks for the helpful context for debugging. Let me address this. I think we should also be able to use chat streaming to help mitigate some of the timeout errors.\r\n\r\nRegarding the token usage, that may be because the",
          "created_at": "2023-07-02T21:11:32Z"
        },
        {
          "author": "debanjum",
          "body": "> For now, I only have two files in the Obsidian vault, one PDF research article and one Markdown note extracted from a PDF research article.\r\n\r\n> Even though the queries failed, they still used a lot of gpt-3.5-turbo-0613 tokens, more than 100,000 for each query. Is this normal?\r\n\r\nYeah, it is not ",
          "created_at": "2023-07-02T21:32:00Z"
        },
        {
          "author": "wenlzhang",
          "body": "> Yeah, it is not normal to use 100K tokens for each query. I'd suspect you're hitting this issue because the Markdown note extracted from the PDF research article would have no markdown sections (i.e `#` separated headings) ?\r\n\r\nSorry, I had a typo. It should be 10K tokens instead of 100K tokens. O",
          "created_at": "2023-07-03T07:52:13Z"
        }
      ]
    },
    {
      "issue_number": 451,
      "title": "Add unified indexing configuration -- detect file type based on mime type/extension",
      "body": "We have several \"types\" of data that we index, but it's not necessary to force the user to specify which directories to look in for which files. Rather, we may just want to ask the user which directories they're interested in indexing, and in the back-end take care of indexing the relevant data.",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-08-20T06:10:41Z",
      "updated_at": "2023-10-13T21:07:42Z",
      "closed_at": "2023-10-13T21:07:42Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/451/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/451",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/451",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:43.614744",
      "comments": [
        {
          "author": "sabaimran",
          "body": "With the new desktop client + Khoj server changes, it's now possible to simply select a folder and let the backend handle the process of determine how to parse it. Hence, I'm marking this as closed as another option exists. \r\n\r\nHere are the instructions for installing the Desktop app: https://docs.k",
          "created_at": "2023-10-13T21:07:39Z"
        }
      ]
    },
    {
      "issue_number": 489,
      "title": "Debian installation for Desktop client does not work",
      "body": "It starts for a second, and then the screen becomes white and fails dies. [This Discord discussion](https://discord.com/channels/1112065956647284756/1112066447947083826/1156943682444984360) contains additional details. \r\n\r\nI've isolated the issue to be related to https://github.com/electron/electron/issues/39515, but requires further testing.",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-10-01T17:02:26Z",
      "updated_at": "2023-10-03T18:43:21Z",
      "closed_at": "2023-10-03T18:43:20Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/489/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/489",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/489",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:43.796221",
      "comments": []
    },
    {
      "issue_number": 403,
      "title": "Khoj fails to start because no Qt platform plugin could be initialized",
      "body": "[07:27:48] INFO     🌘 Starting Khoj                                                                                                                          main.py:66\r\nqt.qpa.plugin: Could not load the Qt platform plugin \"xcb\" in \"\" even though it was found.\r\nThis application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem.\r\n\r\nAvailable platform plugins are: linuxfb, wayland-egl, wayland, minimalegl, xcb, eglfs, vnc, offscreen, vkkhrdisplay, minimal.\r\n\r\nAborted (core dumped)\r\n\r\nThis was installed with a venv using python -m pip install khoj-assistant.  This is running on a Linux Mint 21 machine (ubuntu 22).",
      "state": "closed",
      "author": "digitalw00t",
      "author_type": "User",
      "created_at": "2023-08-02T12:38:27Z",
      "updated_at": "2023-10-01T16:57:49Z",
      "closed_at": "2023-10-01T16:57:49Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/403/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/403",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/403",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:43.796241",
      "comments": [
        {
          "author": "debanjum",
          "body": "Are you able to start khoj without the `--gui` flag set?",
          "created_at": "2023-08-02T15:39:55Z"
        },
        {
          "author": "sabaimran",
          "body": "@digitalw00t , are you on a Linux machine? Could you try running `sudo apt update && sudo apt install libegl1 libxcb-xinerama0 -y`? This installs some of the relevant gui dependencies.",
          "created_at": "2023-08-02T16:13:12Z"
        },
        {
          "author": "digitalw00t",
          "body": "Yes I can run it without the --gui and it operates.  I executed sudo apt update && sudo apt install libegl1 libxcb-xinerama0 -y with no issues.  Same results from the --gui.  I'm not complaining, just trying to help with the debugging process.  And all packages were already installed, so there was n",
          "created_at": "2023-08-03T00:25:13Z"
        },
        {
          "author": "debanjum",
          "body": "I was able to reproduce this issue on a standard `Ubuntu 22.04 Server` as well. This happened when trying to install the Khoj debian package. To fix that error, I just set `export QT_QPA_PLATFORM=offscreen` and restarted the khoj application.\r\n\r\n@digitalw00t: \r\n1. Does setting `export QT_QPA_PLATFOR",
          "created_at": "2023-08-07T02:18:22Z"
        },
        {
          "author": "sabaimran",
          "body": "I'm closing this out as Khoj no longer uses the Qt platform.",
          "created_at": "2023-10-01T16:57:49Z"
        }
      ]
    },
    {
      "issue_number": 478,
      "title": "Add instructions for running using Docker",
      "body": "Add instructions for setting up Khoj locally using docker, including any platform-specific recommendations.\r\n\r\nThis would be best served on the setup page: https://docs.khoj.dev/#/setup",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-09-08T20:19:00Z",
      "updated_at": "2023-10-01T14:41:21Z",
      "closed_at": "2023-10-01T14:41:21Z",
      "labels": [
        "documentation"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/478/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/478",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/478",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:44.007864",
      "comments": []
    },
    {
      "issue_number": 373,
      "title": "Multi-Account Support Per Content Plugin",
      "body": "I have multiple notion accounts (used across different business/life areas) and would like to sync multiple boards. I could see this also being applied to some of the other integrations.",
      "state": "open",
      "author": "wstewarttennes",
      "author_type": "User",
      "created_at": "2023-07-31T02:36:46Z",
      "updated_at": "2023-08-23T19:27:47Z",
      "closed_at": null,
      "labels": [
        "plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/373/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/373",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/373",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:45.816479",
      "comments": [
        {
          "author": "debanjum",
          "body": "Thanks for raising an issue to track this. We don't have multi-account support for Github or Notion but that'll be required for folks to work across their work and personal life accounts on cloud services for sure",
          "created_at": "2023-08-23T19:26:39Z"
        }
      ]
    },
    {
      "issue_number": 440,
      "title": "Sign DMG packages for Mac App",
      "body": "You can sign a DMG package using the codesign command in the Terminal. Here's an example command:\r\n```\r\ncodesign --deep --force --verbose --sign \"Developer ID Application: Your Name (ABC123DEF456)\" /path/to/your/package.dmg\r\n```\r\n\r\nReplace \"Developer ID Application: Your Name (ABC123DEF456)\" with your own signing identity. You can find your signing identity in the Apple Developer portal.\r\n\r\nReplace /path/to/your/package.dmg with the path to your DMG package.\r\n\r\nHere's what each option in the codesign command does:\r\n\r\n--deep: Sign all nested code within the package.\r\n--force: Replace any existing signature.\r\n--verbose: Print verbose output.\r\n--sign: Specify the signing identity.\r\nAfter running the codesign command, you can verify the signature using the spctl command:\r\n\r\nThis command should print accepted if the signature is valid.\r\n```\r\nspctl -a -vv /path/to/your/package.dmg\r\n```\r\n\r\nNote that you need to have a valid signing identity and a Developer ID certificate from Apple to sign your DMG package.",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-08-15T17:04:56Z",
      "updated_at": "2023-08-17T02:36:12Z",
      "closed_at": "2023-08-17T02:36:12Z",
      "labels": [
        "maintain"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/440/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/440",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/440",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:45.987120",
      "comments": [
        {
          "author": "sabaimran",
          "body": "To replace \"Developer ID Installer: Your Name (ABC123DEF456)\" with the name and identifier of your developer ID installer certificate, you need to know the name and ID of the certificate.\r\n\r\nIf you have a certificate signing request (CSR) file, you can use it to generate a developer ID installer cer",
          "created_at": "2023-08-16T22:56:59Z"
        }
      ]
    },
    {
      "issue_number": 443,
      "title": "Improve Multi-threading in GUI/Desktop App",
      "body": "The Khoj server should be made to run multi-threaded in the background even in GUI mode. Currently the server thread is spun-off into just a single QThread to separate it's functioning from the GUI running in a foreground QThread.\r\n\r\nThis negatively impacts the performance of Khoj in GUI, Desktop mode. \r\n\r\nWe could use a QThreadpool for the khoj server running in the background to improve the performance",
      "state": "closed",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2023-08-16T04:46:23Z",
      "updated_at": "2023-08-17T02:36:11Z",
      "closed_at": "2023-08-17T02:36:11Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/443/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/443",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/443",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:46.180089",
      "comments": []
    },
    {
      "issue_number": 442,
      "title": "Khoj GUI Crashes on Quit with QThread Killed Error",
      "body": "Kill signal crashes app because Qthread is not gracefully closed before app shutdown. This does not have functional consequences but is a bad user experience",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-08-16T04:14:17Z",
      "updated_at": "2023-08-17T02:36:11Z",
      "closed_at": "2023-08-17T02:36:11Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/442/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/442",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/442",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:46.180108",
      "comments": []
    },
    {
      "issue_number": 332,
      "title": "Skip indexing bad text chunks and show texts that failed to index during configuration",
      "body": "I was able to install khoj on mac and open the GUI. I configure the org directories and files but when I try to configure I get\r\n```\r\n[00:01:41] ERROR    🚨 Failed to setup search: unconverted data configure.py:252\r\n                    remains: 9                                                  \r\n                    ╭─── Traceback (most recent call last) ───╮                 \r\n                    │ /opt/homebrew/lib/python3.11/site-packa │                 \r\n                    │ ges/khoj/configure.py:176 in            │                 \r\n                    │ configure_content                       │                 \r\n                    │                                         │                 \r\n                    │   173 │   │   if (t == state.SearchType │                 \r\n                    │       search_models.text_search:        │                 \r\n                    │   174 │   │   │   logger.info(\"🦄 Setti │                 \r\n                    │   175 │   │   │   # Extract Entries, Ge │                 \r\n                    │ ❱ 176 │   │   │   content_index.org = t │                 \r\n                    │   177 │   │   │   │   OrgToJsonl,       │                 \r\n                    │   178 │   │   │   │   content_config.or │                 \r\n                    │   179 │   │   │   │   search_models.tex │                 \r\n                    │                                         │                 \r\n                    │ /opt/homebrew/lib/python3.11/site-packa │                 \r\n                    │ ges/khoj/search_type/text_search.py:188 │                 \r\n                    │  in setup                               │                 \r\n                    │                                         │                 \r\n                    │   185 │   previous_entries = []         │                 \r\n                    │   186 │   if config.compressed_jsonl.ex │                 \r\n                    │   187 │   │   previous_entries = extrac │                 \r\n                    │ ❱ 188 │   entries_with_indices = text_t │                 \r\n                    │   189 │                                 │                 \r\n                    │   190 │   # Extract Updated Entries     │                 \r\n                    │   191 │   entries = extract_entries(con │                 \r\n                    │                                         │                 \r\n                    │ /opt/homebrew/lib/python3.11/site-packa │                 \r\n                    │ ges/khoj/processor/org_mode/org_to_json │                 \r\n                    │ l.py:45 in process                      │                 \r\n                    │                                         │                 \r\n                    │    42 │   │                             │                 \r\n                    │    43 │   │   # Extract Entries from sp │                 \r\n                    │    44 │   │   with timer(\"Parse entries │                 \r\n                    │ ❱  45 │   │   │   entry_nodes, file_to_ │                 \r\n                    │    46 │   │                             │                 \r\n                    │    47 │   │   with timer(\"Convert OrgNo │                 \r\n                    │    48 │   │   │   current_entries = sel │                 \r\n                    │       file_to_entries, index_heading_en │                 \r\n                    │                                         │                 \r\n                    │ /opt/homebrew/lib/python3.11/site-packa │                 \r\n                    │ ges/khoj/processor/org_mode/org_to_json │                 \r\n                    │ l.py:98 in extract_org_entries          │                 \r\n                    │                                         │                 \r\n                    │    95 │   │   entries = []              │                 \r\n                    │    96 │   │   entry_to_file_map = []    │                 \r\n                    │    97 │   │   for org_file in org_files │                 \r\n                    │ ❱  98 │   │   │   org_file_entries = or │                 \r\n                    │    99 │   │   │   entry_to_file_map +=  │                 \r\n                    │       len(org_file_entries))            │                 \r\n                    │   100 │   │   │   entries.extend(org_fi │                 \r\n                    │   101                                   │                 \r\n                    │                                         │                 \r\n                    │ /opt/homebrew/lib/python3.11/site-packa │                 \r\n                    │ ges/khoj/processor/org_mode/orgnode.py: │                 \r\n                    │ 58 in makelist_with_filepath            │                 \r\n                    │                                         │                 \r\n                    │    55                                   │                 \r\n                    │    56 def makelist_with_filepath(filena │                 \r\n                    │    57 │   f = open(filename, \"r\")       │                 \r\n                    │ ❱  58 │   return makelist(f, filename)  │                 \r\n                    │    59                                   │                 \r\n                    │    60                                   │                 \r\n                    │    61 def makelist(file, filename):     │                 \r\n                    │                                         │                 \r\n                    │ /opt/homebrew/lib/python3.11/site-packa │                 \r\n                    │ ges/khoj/processor/org_mode/orgnode.py: │                 \r\n                    │ 166 in makelist                         │                 \r\n                    │                                         │                 \r\n                    │   163 │   │   │   if clocked_re:        │                 \r\n                    │   164 │   │   │   │   # convert clock i │                 \r\n                    │   165 │   │   │   │   clocked_in = date │                 \r\n                    │       %a %H:%M\")                        │                 \r\n                    │ ❱ 166 │   │   │   │   clocked_out = dat │                 \r\n                    │       %a %H:%M\")                        │                 \r\n                    │   167 │   │   │   │   # add clocked tim │                 \r\n                    │   168 │   │   │   │   logbook += [(cloc │                 \r\n                    │   169 │   │   │   │   line = \"\"         │                 \r\n                    │                                         │                 \r\n                    │ /opt/homebrew/Cellar/python@3.11/3.11.2 │                 \r\n                    │ _1/Frameworks/Python.framework/Versions │                 \r\n                    │ /3.11/lib/python3.11/_strptime.py:568   │                 \r\n                    │ in _strptime_datetime                   │                 \r\n                    │                                         │                 \r\n                    │   565 def _strptime_datetime(cls, data_ │                 \r\n                    │   566 │   \"\"\"Return a class cls instanc │                 \r\n                    │   567 │   format string.\"\"\"             │                 \r\n                    │ ❱ 568 │   tt, fraction, gmtoff_fraction │                 \r\n                    │   569 │   tzname, gmtoff = tt[-2:]      │                 \r\n                    │   570 │   args = tt[:6] + (fraction,)   │                 \r\n                    │   571 │   if gmtoff is not None:        │                 \r\n                    │                                         │                 \r\n                    │ /opt/homebrew/Cellar/python@3.11/3.11.2 │                 \r\n                    │ _1/Frameworks/Python.framework/Versions │                 \r\n                    │ /3.11/lib/python3.11/_strptime.py:352   │                 \r\n                    │ in _strptime                            │                 \r\n                    │                                         │                 \r\n                    │   349 │   │   raise ValueError(\"time da │                 \r\n                    │   350 │   │   │   │   │   │    (data_st │                 \r\n                    │   351 │   if len(data_string) != found. │                 \r\n                    │ ❱ 352 │   │   raise ValueError(\"unconve │                 \r\n                    │   353 │   │   │   │   │   │     data_st │                 \r\n                    │   354 │                                 │                 \r\n                    │   355 │   iso_year = year = None        │                 \r\n                    ╰─────────────────────────────────────────╯                 \r\n                    ValueError: unconverted data remains: 9                     \r\n\r\n```",
      "state": "closed",
      "author": "fkgruber",
      "author_type": "User",
      "created_at": "2023-07-21T04:08:47Z",
      "updated_at": "2023-08-14T14:56:35Z",
      "closed_at": "2023-08-14T14:56:35Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/332/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/332",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/332",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:46.180117",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Hey @fkgruber , sorry for the setup issues. Look like it's failing when it's trying to parse one of the clocked out times in your org file. What kind of datetime format are you using? Would you mind sharing an example of one of your clock-in/clock-out logs?",
          "created_at": "2023-07-21T04:26:27Z"
        },
        {
          "author": "fkgruber",
          "body": "Hi\r\nI spent some time creating a minimal example that give me the error.  I don't understand what is wrong with this clock. Seems fine to me. Here it is:\r\n```\r\n#+TITLE:Error org filename\r\n#+PROPERTY: header-args :tangle yes\r\n#+PROPERTY: header-args:R :session *R* :results value :exports both :eval n",
          "created_at": "2023-07-21T04:48:28Z"
        },
        {
          "author": "debanjum",
          "body": "Hey @fkgruber, thanks a ton for creating a minimal example to reproduce the issue 👌🏾\r\n\r\n1. Khoj by default doesn't index entries with no body. So in this minimal example, this entry wouldn't get indexed unless you add some body text to it or set `index-heading-entries: true` in your `~/.khoj/khoj.ym",
          "created_at": "2023-07-21T05:09:24Z"
        },
        {
          "author": "fkgruber",
          "body": "Hi\r\nin org-mode you can specify the name of the drawer by setting the variable org-clock-into-drawer so that is not the issue.\r\nThe problem is the 99 in the clock. Not sure how it got there. Anyways should it really crash because of it? I got lucky that it was only one file but it could be difficult",
          "created_at": "2023-07-21T12:05:01Z"
        },
        {
          "author": "sabaimran",
          "body": "We're using [this module](https://members.optusnet.com.au/~charles57/GTD/orgnode.html) to manage the org note parsing, and I don't think it's in scope for us to fork it and build out customized features parsing for the moment.\r\n\r\nGiven that, would you want indexing to fail for just that particular f",
          "created_at": "2023-07-21T15:00:49Z"
        }
      ]
    },
    {
      "issue_number": 348,
      "title": "Missing instructions for the precompiled deb artifacts",
      "body": "I couldn't find any instructions on how to install / configure / use the precompiled debian packages.\r\n\r\nCheers ! !",
      "state": "closed",
      "author": "ngirard",
      "author_type": "User",
      "created_at": "2023-07-27T18:49:07Z",
      "updated_at": "2023-08-03T07:49:05Z",
      "closed_at": "2023-08-03T04:36:41Z",
      "labels": [
        "documentation"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/348/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/348",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/348",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:46.398332",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Very fair point. Once we have desktop images for our target architectures for the next release (target end of week), we should also add instructions in [the installation docs](https://docs.khoj.dev/#/setup) to explain how to use them.",
          "created_at": "2023-07-27T19:05:13Z"
        },
        {
          "author": "sabaimran",
          "body": "Added instructions [here](https://docs.khoj.dev/#/desktop_installation?id=linux)",
          "created_at": "2023-08-03T04:36:41Z"
        },
        {
          "author": "ngirard",
          "body": "Great, thanks ! I'll give it a try as soon as I can",
          "created_at": "2023-08-03T07:49:05Z"
        }
      ]
    },
    {
      "issue_number": 369,
      "title": "Initialization fails after running out of disk space",
      "body": "I have configured some folder with org files for search and khoj process started to download models from huggingface.\r\nNow this partially downloaded model causes error messages:\r\n```\r\n                    OSError: .../.khoj/search/image/sentence-transformers_clip-ViT-B-32 does not appear to have a file named config.json.\r\n```\r\n\r\nWeb UI says \"Unable to reinitialize. Raise issue on Khoj Github or Discord.\".\r\n\r\nI will remove .khoj and restart from scratch.",
      "state": "closed",
      "author": "link2xt",
      "author_type": "User",
      "created_at": "2023-07-31T00:02:08Z",
      "updated_at": "2023-08-02T19:53:48Z",
      "closed_at": "2023-08-02T19:53:48Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/369/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/369",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/369",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:46.617674",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Interesting -- were you unblocked if you cleared some of your disk space?\r\n\r\nAgreed that's not a pleasant experience. Ideally it would rollback partial writes if it failed in the middle, but this might be difficult if it just ends up hanging in the middle.",
          "created_at": "2023-07-31T02:18:28Z"
        },
        {
          "author": "link2xt",
          "body": "Yes, it works after removing `.khoj` and reconfiguring from scratch.\r\n\r\n> Agreed that's not a pleasant experience. Ideally it would rollback partial writes if it failed in the middle, but this might be difficult if it just ends up hanging in the middle.\r\n\r\nI think the correct way to do this is to do",
          "created_at": "2023-07-31T02:21:38Z"
        },
        {
          "author": "sabaimran",
          "body": "That's a wonderful suggestion. That will definitely be helpful for our codepath that downloads llamav2 as well -- it's a massive 3.6GB file with some propensity to failure.",
          "created_at": "2023-07-31T02:40:57Z"
        },
        {
          "author": "debanjum",
          "body": "This was resolved in #393 ",
          "created_at": "2023-08-02T19:53:47Z"
        }
      ]
    },
    {
      "issue_number": 365,
      "title": "AttributeError: 'NoneType' object has no attribute 'org'",
      "body": "Using khoj-assistant version 0.10.0\r\nAfter trying to enable the Llama2 model, then trying to ask a question in the chat, I have the following error:\r\n\r\n```\r\n...\r\n[14:48:06] INFO     📩 Saved sentence-transformers/clip-ViT-B-32 model to disk                                                                                        helpers.py:85\r\n           WARNING  🚨 No Content configuration available.                                                                                                         configure.py:165\r\n           INFO     📬 Search models, Conversation processor updated via API                                                                                             api.py:600\r\n[14:48:13] INFO     127.0.0.1:60178 - \"GET /chat HTTP/1.1\" 200                                                                                                      h11_impl.py:431\r\n           INFO     127.0.0.1:60178 - \"GET /assets/khoj.css HTTP/1.1\" 304                                                                                           h11_impl.py:431\r\n           INFO     127.0.0.1:60178 - \"GET /assets/icons/khoj-logo-sideways.svg HTTP/1.1\" 304                                                                       h11_impl.py:431\r\n           INFO     127.0.0.1:60178 - \"GET /api/chat/history?client=web HTTP/1.1\" 200                                                                               h11_impl.py:431\r\n[14:48:43] INFO     127.0.0.1:54996 - \"GET /api/chat?q=How%20to%20add%20an%20item%20to%20a%20list%20in%20Python%3F&n=5&client=web&stream=true HTTP/1.1\" 500         h11_impl.py:431\r\n           ERROR    Exception in ASGI application                                                                                                                   h11_impl.py:369\r\n                                                                                                                                                                                   \r\n                    ╭───────────────────────────────────────────────────── Traceback (most recent call last) ─────────────────────────────────────────────────────╮                \r\n                    │ /mnt/tera/miniconda3/envs/textgen/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py:366 in run_asgi                           │                \r\n                    │                                                                                                                                             │                \r\n                    │   363 │   # ASGI exception wrapper                                                                                                          │                \r\n                    │   364 │   async def run_asgi(self, app):                                                                                                    │                \r\n                    │   365 │   │   try:                                                                                                                          │                \r\n                    │ ❱ 366 │   │   │   result = await app(self.scope, self.receive, self.send)                                                                   │                \r\n                    │   367 │   │   except BaseException as exc:                                                                                                  │                \r\n                    │   368 │   │   │   msg = \"Exception in ASGI application\\n\"                                                                                   │                \r\n                    │   369 │   │   │   self.logger.error(msg, exc_info=exc)                                                                                      │                \r\n                    │                                                                                                                                             │                \r\n                    │ /mnt/tera/miniconda3/envs/textgen/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py:75 in __call__                           │                \r\n                    │                                                                                                                                             │                \r\n                    │   72 │   │   │   │   │   port = 0                                                                                                           │                \r\n                    │   73 │   │   │   │   │   scope[\"client\"] = (host, port)  # type: ignore[index]                                                              │                \r\n                    │   74 │   │                                                                                                                                  │                \r\n                    │ ❱ 75 │   │   return await self.app(scope, receive, send)                                                                                    │                \r\n                    │   76                                                                                                                                        │                \r\n                    │                                                                                                                                             │                \r\n                    │ /mnt/tera/miniconda3/envs/textgen/lib/python3.10/site-packages/fastapi/applications.py:269 in __call__                                      │                \r\n                    │                                                                                                                                             │                \r\n                    │   266 │   async def __call__(self, scope: Scope, receive: Receive, send: Send) -> None:                                                     │                \r\n                    │   267 │   │   if self.root_path:                                                                                                            │                \r\n                    │   268 │   │   │   scope[\"root_path\"] = self.root_path                                                                                       │                \r\n                    │ ❱ 269 │   │   await super().__call__(scope, receive, send)                                                                                  │                \r\n                    │   270 │                                                                                                                                     │                \r\n                    │   271 │   def add_api_route(                                                                                                                │                \r\n                    │   272 │   │   self,                                                                                                                         │                \r\n                    │                                                                                                                                             │                \r\n                    │ /mnt/tera/miniconda3/envs/textgen/lib/python3.10/site-packages/starlette/applications.py:124 in __call__                                    │                \r\n                    │                                                                                                                                             │                \r\n                    │   121 │                                                                                                                                     │                \r\n                    │   122 │   async def __call__(self, scope: Scope, receive: Receive, send: Send) -> None:                                                     │                \r\n                    │   123 │   │   scope[\"app\"] = self                                                                                                           │                \r\n                    │ ❱ 124 │   │   await self.middleware_stack(scope, receive, send)                                                                             │                \r\n                    │   125 │                                                                                                                                     │                \r\n                    │   126 │   # The following usages are now discouraged in favour of configuration                                                             │                \r\n                    │   127 │   # during Starlette.__init__(...)                                                                                                  │                \r\n                    │                                                                                                                                             │                \r\n                    │ /mnt/tera/miniconda3/envs/textgen/lib/python3.10/site-packages/starlette/middleware/errors.py:184 in __call__                               │                \r\n                    │                                                                                                                                             │                \r\n                    │   181 │   │   │   # We always continue to raise the exception.                                                                              │                \r\n                    │   182 │   │   │   # This allows servers to log the error, or allows test clients                                                            │                \r\n                    │   183 │   │   │   # to optionally raise the error within the test case.                                                                     │                \r\n                    │ ❱ 184 │   │   │   raise exc                                                                                                                 │                \r\n                    │   185 │                                                                                                                                     │                \r\n                    │   186 │   def format_line(                                                                                                                  │                \r\n                    │   187 │   │   self, index: int, line: str, frame_lineno: int, frame_index: int                                                              │                \r\n                    │                                                                                                                                             │                \r\n                    │ /mnt/tera/miniconda3/envs/textgen/lib/python3.10/site-packages/starlette/middleware/errors.py:162 in __call__                               │                \r\n                    │                                                                                                                                             │                \r\n                    │   159 │   │   │   await send(message)                                                                                                       │                \r\n                    │   160 │   │                                                                                                                                 │                \r\n                    │   161 │   │   try:                                                                                                                          │                \r\n                    │ ❱ 162 │   │   │   await self.app(scope, receive, _send)                                                                                     │                \r\n                    │   163 │   │   except Exception as exc:                                                                                                      │                \r\n                    │   164 │   │   │   request = Request(scope)                                                                                                  │                \r\n                    │   165 │   │   │   if self.debug:                                                                                                            │                \r\n                    │                                                                                                                                             │                \r\n                    │ /mnt/tera/miniconda3/envs/textgen/lib/python3.10/site-packages/starlette/exceptions.py:93 in __call__                                       │                \r\n                    │                                                                                                                                             │                \r\n                    │    90 │   │   │   │   handler = self._lookup_exception_handler(exc)                                                                         │                \r\n                    │    91 │   │   │                                                                                                                             │                \r\n                    │    92 │   │   │   if handler is None:                                                                                                       │                \r\n                    │ ❱  93 │   │   │   │   raise exc                                                                                                             │                \r\n                    │    94 │   │   │                                                                                                                             │                \r\n                    │    95 │   │   │   if response_started:                                                                                                      │                \r\n                    │    96 │   │   │   │   msg = \"Caught handled exception, but response already started.\"                                                       │                \r\n                    │                                                                                                                                             │                \r\n                    │ /mnt/tera/miniconda3/envs/textgen/lib/python3.10/site-packages/starlette/exceptions.py:82 in __call__                                       │                \r\n                    │                                                                                                                                             │                \r\n                    │    79 │   │   │   await send(message)                                                                                                       │                \r\n                    │    80 │   │                                                                                                                                 │                \r\n                    │    81 │   │   try:                                                                                                                          │                \r\n                    │ ❱  82 │   │   │   await self.app(scope, receive, sender)                                                                                    │                \r\n                    │    83 │   │   except Exception as exc:                                                                                                      │                \r\n                    │    84 │   │   │   handler = None                                                                                                            │                \r\n                    │    85                                                                                                                                       │                \r\n                    │                                                                                                                                             │                \r\n                    │ /mnt/tera/miniconda3/envs/textgen/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py:21 in __call__                          │                \r\n                    │                                                                                                                                             │                \r\n                    │   18 │   │   │   │   │   await self.app(scope, receive, send)                                                                               │                \r\n                    │   19 │   │   │   │   except Exception as e:                                                                                                 │                \r\n                    │   20 │   │   │   │   │   dependency_exception = e                                                                                           │                \r\n                    │ ❱ 21 │   │   │   │   │   raise e                                                                                                            │                \r\n                    │   22 │   │   │   if dependency_exception:                                                                                                   │                \r\n                    │   23 │   │   │   │   # This exception was possibly handled by the dependency but it should                                                  │                \r\n                    │   24 │   │   │   │   # still bubble up so that the ServerErrorMiddleware can return a 500                                                   │                \r\n                    │                                                                                                                                             │                \r\n                    │ /mnt/tera/miniconda3/envs/textgen/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py:18 in __call__                          │                \r\n                    │                                                                                                                                             │                \r\n                    │   15 │   │   │   async with AsyncExitStack() as stack:                                                                                      │                \r\n                    │   16 │   │   │   │   scope[self.context_name] = stack                                                                                       │                \r\n                    │   17 │   │   │   │   try:                                                                                                                   │                \r\n                    │ ❱ 18 │   │   │   │   │   await self.app(scope, receive, send)                                                                               │                \r\n                    │   19 │   │   │   │   except Exception as e:                                                                                                 │                \r\n                    │   20 │   │   │   │   │   dependency_exception = e                                                                                           │                \r\n                    │   21 │   │   │   │   │   raise e                                                                                                            │                \r\n                    │                                                                                                                                             │                \r\n                    │ /mnt/tera/miniconda3/envs/textgen/lib/python3.10/site-packages/starlette/routing.py:670 in __call__                                         │                \r\n                    │                                                                                                                                             │                \r\n                    │   667 │   │   │   match, child_scope = route.matches(scope)                                                                                 │                \r\n                    │   668 │   │   │   if match == Match.FULL:                                                                                                   │                \r\n                    │   669 │   │   │   │   scope.update(child_scope)                                                                                             │                \r\n                    │ ❱ 670 │   │   │   │   await route.handle(scope, receive, send)                                                                              │                \r\n                    │   671 │   │   │   │   return                                                                                                                │                \r\n                    │   672 │   │   │   elif match == Match.PARTIAL and partial is None:                                                                          │                \r\n                    │   673 │   │   │   │   partial = route                                                                                                       │                \r\n                    │                                                                                                                                             │                \r\n                    │ /mnt/tera/miniconda3/envs/textgen/lib/python3.10/site-packages/starlette/routing.py:266 in handle                                           │                \r\n                    │                                                                                                                                             │                \r\n                    │   263 │   │   │   │   )                                                                                                                     │                \r\n                    │   264 │   │   │   await response(scope, receive, send)                                                                                      │                \r\n                    │   265 │   │   else:                                                                                                                         │                \r\n                    │ ❱ 266 │   │   │   await self.app(scope, receive, send)                                                                                      │                \r\n                    │   267 │                                                                                                                                     │                \r\n                    │   268 │   def __eq__(self, other: typing.Any) -> bool:                                                                                      │                \r\n                    │   269 │   │   return (                                                                                                                      │                \r\n                    │                                                                                                                                             │                \r\n                    │ /mnt/tera/miniconda3/envs/textgen/lib/python3.10/site-packages/starlette/routing.py:65 in app                                               │                \r\n                    │                                                                                                                                             │                \r\n                    │    62 │   async def app(scope: Scope, receive: Receive, send: Send) -> None:                                                                │                \r\n                    │    63 │   │   request = Request(scope, receive=receive, send=send)                                                                          │                \r\n                    │    64 │   │   if is_coroutine:                                                                                                              │                \r\n                    │ ❱  65 │   │   │   response = await func(request)                                                                                            │                \r\n                    │    66 │   │   else:                                                                                                                         │                \r\n                    │    67 │   │   │   response = await run_in_threadpool(func, request)                                                                         │                \r\n                    │    68 │   │   await response(scope, receive, send)                                                                                          │                \r\n                    │                                                                                                                                             │                \r\n                    │ /mnt/tera/miniconda3/envs/textgen/lib/python3.10/site-packages/fastapi/routing.py:227 in app                                                │                \r\n                    │                                                                                                                                             │                \r\n                    │    224 │   │   if errors:                                                                                                                   │                \r\n                    │    225 │   │   │   raise RequestValidationError(errors, body=body)                                                                          │                \r\n                    │    226 │   │   else:                                                                                                                        │                \r\n                    │ ❱  227 │   │   │   raw_response = await run_endpoint_function(                                                                              │                \r\n                    │    228 │   │   │   │   dependant=dependant, values=values, is_coroutine=is_coroutine                                                        │                \r\n                    │    229 │   │   │   )                                                                                                                        │                \r\n                    │    230                                                                                                                                      │                \r\n                    │                                                                                                                                             │                \r\n                    │ /mnt/tera/miniconda3/envs/textgen/lib/python3.10/site-packages/fastapi/routing.py:160 in run_endpoint_function                              │                \r\n                    │                                                                                                                                             │                \r\n                    │    157 │   assert dependant.call is not None, \"dependant.call must be a function\"                                                           │                \r\n                    │    158 │                                                                                                                                    │                \r\n                    │    159 │   if is_coroutine:                                                                                                                 │                \r\n                    │ ❱  160 │   │   return await dependant.call(**values)                                                                                        │                \r\n                    │    161 │   else:                                                                                                                            │                \r\n                    │    162 │   │   return await run_in_threadpool(dependant.call, **values)                                                                     │                \r\n                    │    163                                                                                                                                      │                \r\n                    │                                                                                                                                             │                \r\n                    │ /mnt/tera/miniconda3/envs/textgen/lib/python3.10/site-packages/khoj/routers/api.py:655 in chat                                              │                \r\n                    │                                                                                                                                             │                \r\n                    │   652 │   host: Optional[str] = Header(None),                                                                                               │                \r\n                    │   653 ) -> Response:                                                                                                                        │                \r\n                    │   654 │   perform_chat_checks()                                                                                                             │                \r\n                    │ ❱ 655 │   compiled_references, inferred_queries = await                                                                                     │                \r\n                    │       extract_references_and_questions(request, q, (n or 5))                                                                                │                \r\n                    │   656 │                                                                                                                                     │                \r\n                    │   657 │   # Get the (streamed) chat response from the LLM of choice.                                                                        │                \r\n                    │   658 │   llm_response = generate_chat_response(                                                                                            │                \r\n                    │                                                                                                                                             │                \r\n                    │ /mnt/tera/miniconda3/envs/textgen/lib/python3.10/site-packages/khoj/routers/api.py:729 in extract_references_and_questions                  │                \r\n                    │                                                                                                                                             │                \r\n                    │   726 │   │   │   for query in inferred_queries:                                                                                            │                \r\n                    │   727 │   │   │   │   n_items = min(n, 3) if                                                                                                │                \r\n                    │       state.processor_config.conversation.enable_offline_chat else n                                                                        │                \r\n                    │   728 │   │   │   │   result_list.extend(                                                                                                   │                \r\n                    │ ❱ 729 │   │   │   │   │   await search(query, request=request, n=n_items, r=True,                                                           │                \r\n                    │       score_threshold=-5.0, dedupe=False)                                                                                                   │                \r\n                    │   730 │   │   │   │   )                                                                                                                     │                \r\n                    │   731 │   │   │   compiled_references = [item.additional[\"compiled\"] for item in result_list]                                               │                \r\n                    │   732                                                                                                                                       │                \r\n                    │                                                                                                                                             │                \r\n                    │ /mnt/tera/miniconda3/envs/textgen/lib/python3.10/site-packages/khoj/routers/api.py:402 in search                                            │                \r\n                    │                                                                                                                                             │                \r\n                    │   399 │   │   │   │   )                                                                                                                     │                \r\n                    │   400 │                                                                                                                                     │                \r\n                    │   401 │   with concurrent.futures.ThreadPoolExecutor() as executor:                                                                         │                \r\n                    │ ❱ 402 │   │   if (t == SearchType.Org or t == SearchType.All) and state.content_index.org and                                               │                \r\n                    │       state.search_models.text_search:                                                                                                      │                \r\n                    │   403 │   │   │   # query org-mode notes                                                                                                    │                \r\n                    │   404 │   │   │   search_futures += [                                                                                                       │                \r\n                    │   405 │   │   │   │   executor.submit(                                                                                                      │                \r\n                    ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯                \r\n                    AttributeError: 'NoneType' object has no attribute 'org'\r\n\r\n```",
      "state": "closed",
      "author": "leszekhanusz",
      "author_type": "User",
      "created_at": "2023-07-30T12:54:46Z",
      "updated_at": "2023-08-02T17:38:48Z",
      "closed_at": "2023-08-02T17:38:47Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 8,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/365/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/365",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/365",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:46.850544",
      "comments": [
        {
          "author": "leszekhanusz",
          "body": "The error disappears once I configure khoj to parse some pdf files.",
          "created_at": "2023-07-30T13:07:45Z"
        },
        {
          "author": "sabaimran",
          "body": "@leszekhanusz Hmm, that's quite strange. Could you walk me through how you did the setup? Did you first configure your file paths in the Org settings in the web UI, and then go to the chat endpoint? Did you click the `Configure` button in between?\r\n\r\nWe do need to do better null checking here for th",
          "created_at": "2023-07-31T00:59:00Z"
        },
        {
          "author": "leszekhanusz",
          "body": "How to reproduce:\r\n\r\n - move your existing khoj config\r\n`mv ./.khoj ./khoj.bak`\r\n - start khoj\r\n - Click `Settings` on the web page\r\n - Click `Enable` in the `Offline Chat` box\r\n - Click `Configure`\r\n - Click on the `Chat` tab\r\n - Ask a question on the Chat textbox",
          "created_at": "2023-07-31T10:21:44Z"
        },
        {
          "author": "Ellen7ions",
          "body": "I also got this error.",
          "created_at": "2023-07-31T14:34:12Z"
        },
        {
          "author": "Ellen7ions",
          "body": "The above NoneType error occurs when I start the server without adding any files such as pdf or md. After adding a md file, the error was resolved.",
          "created_at": "2023-07-31T14:42:13Z"
        }
      ]
    },
    {
      "issue_number": 388,
      "title": "Investigate whether we can use GPU with LlamaV2",
      "body": "We decided to use the gpt4all library for ease of use and modularity with support for our first offline LLM, but the library does not yet support GPU usage. There's a [PR Open](https://github.com/nomic-ai/gpt4all/pull/746) to add support for some GPUs, but it hasn't yet merged.\r\n\r\nWe can look into going lower in the stack and experimenting using the [ctransformers](https://github.com/marella/ctransformers/) library directly to run llama v2 with GPUs.",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-07-31T18:50:53Z",
      "updated_at": "2023-08-02T16:15:59Z",
      "closed_at": "2023-08-02T16:15:58Z",
      "labels": [
        "try"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/388/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 1,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/388",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/388",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:47.051391",
      "comments": [
        {
          "author": "sabaimran",
          "body": "This should be addressed with #363! Closing.",
          "created_at": "2023-08-02T16:15:58Z"
        }
      ]
    },
    {
      "issue_number": 398,
      "title": "Llama 2 generates fake dialogue continuations",
      "body": "Khoj offline chat with Llama 2 sometimes start generating fake dialogue using it's internal prompt patterns of `<s>`, `[INST]` tokens in response.  The `<s>` gets interpreted by the HTML renderers on the Khoj Web and Obsidian UI as a strikethrough.",
      "state": "closed",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2023-08-02T03:47:12Z",
      "updated_at": "2023-08-02T05:07:30Z",
      "closed_at": "2023-08-02T05:07:30Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/398/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/398",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/398",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:47.278037",
      "comments": []
    },
    {
      "issue_number": 386,
      "title": "Prompt context window exceeded: The prompt is <n > 2048> tokens and the context window is 2048",
      "body": "We should use the LlamaTokenizer in our truncation logic for better accuracy. I was using a proxy tokenizer to estimate context length, but this is a bad UX. ",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-07-31T18:33:44Z",
      "updated_at": "2023-08-02T05:07:28Z",
      "closed_at": "2023-08-02T05:07:28Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/386/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/386",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/386",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:47.278058",
      "comments": [
        {
          "author": "wenlzhang",
          "body": "Not sure if related, the following article explains a way of extending the token length of LLama 2:\r\nhttps://together.ai/blog/llama-2-7b-32k",
          "created_at": "2023-08-01T08:21:56Z"
        }
      ]
    },
    {
      "issue_number": 360,
      "title": "Add installation instructions for all the desktop images in our docs",
      "body": "This should go in our Khoj docs -- https://docs.khoj.dev.",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-07-28T22:56:28Z",
      "updated_at": "2023-08-01T21:16:17Z",
      "closed_at": "2023-08-01T21:16:17Z",
      "labels": [
        "documentation"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/360/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/360",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/360",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:47.457125",
      "comments": [
        {
          "author": "debanjum",
          "body": "This was completed in 7eabf8ab0f4e64b74d3785bbfce57280c7455d55",
          "created_at": "2023-08-01T21:16:17Z"
        }
      ]
    },
    {
      "issue_number": 385,
      "title": "There appear to be 1 leaked semaphore objects to clean up at shutdown",
      "body": "We've gotten a lot of reports with this stack trace:\r\n```\r\n[1]    10561 segmentation fault  khoj\r\n/Users/…/.pyenv/versions/3.10.11/lib/python3.10/multiprocessing/resource_tracker.py:224: UserWarning: resource_tracker: There appear to be 1 leaked semaphore objects to clean up at shutdown\r\n  warnings.warn('resource_tracker: There appear to be %d '\r\n```\r\n\r\nWhen this happens, the user is unable to chat. Look into why this might be happening. It seems to happen only with using the offline model.",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-07-31T18:30:25Z",
      "updated_at": "2023-08-01T06:54:17Z",
      "closed_at": "2023-08-01T06:54:17Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/385/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/385",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/385",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:47.713903",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Closed as duplicate of https://github.com/khoj-ai/khoj/issues/367",
          "created_at": "2023-08-01T06:54:17Z"
        }
      ]
    },
    {
      "issue_number": 353,
      "title": "Remove references to localhost:8000",
      "body": "Default port was switched to localhost:42110 a while back, so some old references in documentation need to be updated.",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-07-28T03:30:14Z",
      "updated_at": "2023-07-28T18:00:14Z",
      "closed_at": "2023-07-28T18:00:13Z",
      "labels": [
        "documentation",
        "good first issue"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/353/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/353",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/353",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:47.961034",
      "comments": []
    },
    {
      "issue_number": 347,
      "title": "Use llamav2 instead of falcon as open source model for Khoj",
      "body": "With some adjustment as described in https://github.com/nomic-ai/gpt4all/issues/1227, it shouldn't be too hard to get [llamav2](https://about.fb.com/news/2023/07/llama-2/) up and working in place of Falcon as the first-party OS model supported by Khoj.\n\nThis should be a much better first addition as the quality and performance is much better with llamav2.",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-07-27T17:01:27Z",
      "updated_at": "2023-07-28T03:51:21Z",
      "closed_at": "2023-07-28T03:51:21Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/347/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/347",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/347",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:47.961057",
      "comments": []
    },
    {
      "issue_number": 201,
      "title": "Support for Offline Chat Models",
      "body": "Hello! Could you provide support for a way to replace openai llm with locally hosted custom model calls? This would be great! (we just need a way to provide string with a response to your plugin)\r\n\r\nCheers!",
      "state": "closed",
      "author": "FrankCold",
      "author_type": "User",
      "created_at": "2023-03-31T14:24:27Z",
      "updated_at": "2023-07-26T23:27:10Z",
      "closed_at": "2023-07-26T23:27:10Z",
      "labels": [
        "try"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 8,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/201/reactions",
        "total_count": 5,
        "+1": 5,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "sabaimran"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/201",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/201",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:47.961068",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hey @FrankCold, do you have specific custom models you want to try use? I plan to test out quality of Khoj Chat using Alpaca/Llama. And if it's not too bad, to provide it as a configurable option for folks who want completely local chat. Would that suffice for your use-case?\r\n\r\nLet me also think if ",
          "created_at": "2023-04-05T06:07:28Z"
        },
        {
          "author": "FrankCold",
          "body": "I was referring exactly to Alpaca/Llama! But I would also like to test other combinations. Providing a configurable option would definitely allow me to do what I plan to do!\r\n\r\nI, too, think that llms are developing so fast that Khoj could be compatible with them all the time if it allowed models to",
          "created_at": "2023-04-06T00:21:13Z"
        },
        {
          "author": "whatSocks",
          "body": "Perhaps as an intermediate step it could use a model hosted on huggingface?\r\n\r\n I'm using the https://text-gen.com/ plugin and it would be nice to have something similar",
          "created_at": "2023-04-06T02:20:53Z"
        },
        {
          "author": "replete",
          "body": "I've been looking around this obsidian local llm problem space, and stumbling on this issue I wanted to mention [obsidian-local-llm](https://github.com/zatevakhin/obsidian-local-llm) which uses [llama-cpp-python](https://github.com/abetlen/llama-cpp-python) with support for langchain and exposes an ",
          "created_at": "2023-06-13T13:28:35Z"
        },
        {
          "author": "debanjum",
          "body": "Hi @replete,\r\n\r\nThanks for the references! Did you try Khoj chat? And what did you find lacking in it?\r\n\r\nI was looking into integrating offline chat models into Khoj earlier. The 2 main issues I currently see are:\r\n1. The current set of prompts used by Khoj are meant for the OpenAI GPT LLMs. I do n",
          "created_at": "2023-06-18T12:35:12Z"
        }
      ]
    },
    {
      "issue_number": 306,
      "title": "Test Windows install on amd machine",
      "body": "I verified in #294 that I could install Windows in an arm64-based machine, but I still need to get additional verification for amd. Steps would included:\r\n1. Download the .exe file from a [Github action](https://github.com/khoj-ai/khoj/actions).\r\n2. Install it on your machine. Set it up to index some data and run a search.\r\n3. Report any bugs.",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-07-13T17:12:45Z",
      "updated_at": "2023-07-23T19:23:31Z",
      "closed_at": "2023-07-23T19:23:31Z",
      "labels": [
        "help wanted"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/306/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "sabaimran"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/306",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/306",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:49.845248",
      "comments": []
    },
    {
      "issue_number": 285,
      "title": "Auto update is reindexing previously indexed files on Windows",
      "body": "It seems there is an issue with Khoj reindexing previously indexed files on Windows.\r\nThis occurs during startup and the auto-update hourly job on the khoj server.",
      "state": "closed",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2023-07-08T03:09:38Z",
      "updated_at": "2023-07-17T22:54:50Z",
      "closed_at": "2023-07-17T22:54:49Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/285/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/285",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/285",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:49.845282",
      "comments": [
        {
          "author": "debanjum",
          "body": "I believe #325 should have fixed this issue.",
          "created_at": "2023-07-17T22:54:49Z"
        }
      ]
    },
    {
      "issue_number": 314,
      "title": "Add setup instructions to Notion, Github plugins in the web UI",
      "body": "It's not immediately clear how to setup the Github, Notion integrations right away from the settings UI. Add links to instructions in the web UI as well as READMEs.",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-07-13T22:11:11Z",
      "updated_at": "2023-07-14T17:14:09Z",
      "closed_at": "2023-07-14T17:14:09Z",
      "labels": [
        "documentation",
        "maintain"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/314/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/314",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/314",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:50.052776",
      "comments": [
        {
          "author": "debanjum",
          "body": "Added setup instruction to [Notion](https://github.com/khoj-ai/khoj/wiki/Setup-Notion-Integration), [Github](https://github.com/khoj-ai/khoj/wiki/Setup-Github-integration) plugin to the (newly created) Khoj wiki on Github",
          "created_at": "2023-07-14T05:20:03Z"
        }
      ]
    },
    {
      "issue_number": 30,
      "title": "Docker run environment can't deep link to original file",
      "body": "The way we are mounting volumes in the Docker container means that it doesn't have access to the original file location in the user's filesystem. Due to this, deep linking (in org notes) will fail, as it will try to generate the link based on the mounted volume's name.\r\n\r\nTo reproduce the behavior in the Docker environment:\r\n1. Run a query against your org notes\r\n2. Investigate the `PROPERTIES` bag\r\n3. Look at the link associated with the `LINE` and `SOURCE` fields; they should be referencing a filepath based on the mounted volume, rather than the local directory\r\n\r\nThere are some different ways we could work around this, ranging from more to less messy. We could expose a mapping somewhere outside of the `docker-compose.yml` file that specifies the local directory for the given mounted volume. We could have the mounted volumes follow the same naming convention as the local directory, and provide a standardized mapping in the `config.yml`.",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2022-07-08T14:14:40Z",
      "updated_at": "2023-07-13T05:58:06Z",
      "closed_at": "2023-07-13T05:58:06Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/30/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/30",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/30",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:50.288762",
      "comments": [
        {
          "author": "debanjum",
          "body": "Note (to self?): Will mounting volumes at same path in docker container as it was in the users filesystem solve this issue?\r\nThis can be simplified if we generate the docker and khoj config files via a script for this use-case",
          "created_at": "2022-10-25T16:45:45Z"
        },
        {
          "author": "sabaimran",
          "body": "Closing this as unactionable for now. We won't support this use case.",
          "created_at": "2023-07-13T05:58:06Z"
        }
      ]
    },
    {
      "issue_number": 295,
      "title": "Use a more random number for the default port for Khoj",
      "body": "A lot of people will already have something running on port `8000`. We should use a more random port ID by default in order to unblock usage of that port, especially since it's not easily changeable without restarting the application.\n\n[Link to relevant discussion in Discord](https://discord.com/channels/1112065956647284756/1127954017666998322).",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-07-10T18:20:37Z",
      "updated_at": "2023-07-11T04:31:00Z",
      "closed_at": "2023-07-11T04:31:00Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/295/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "debanjum"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/295",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/295",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:50.472057",
      "comments": []
    },
    {
      "issue_number": 291,
      "title": "Required PDF files when indexing on start",
      "body": "The script to index files with Khoj, is trying to find some PDF files on the specific folder.\r\n\r\nWhat is the problem? I don't have any PDF, so it's breaking the `configure.py` on this [line](https://github.com/khoj-ai/khoj/blob/master/src/khoj/configure.py#L131).\r\n\r\nIf I add some random PDF inside the folder, the `khoj` starts.",
      "state": "closed",
      "author": "noghartt",
      "author_type": "User",
      "created_at": "2023-07-09T23:33:06Z",
      "updated_at": "2023-07-10T17:42:21Z",
      "closed_at": "2023-07-10T17:33:07Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/291/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "sabaimran"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/291",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/291",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:50.472077",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Hi @noghartt! Sorry for the setup issues. Could you tell me which OS you're using + which interface? Are you using Obsidian, Emacs, or just Web?",
          "created_at": "2023-07-10T16:34:20Z"
        },
        {
          "author": "noghartt",
          "body": "> Hi @noghartt! Sorry for the setup issues. Could you tell me which OS you're using + which interface? Are you using Obsidian, Emacs, or just Web?\r\n\r\nOS: macOS Ventura 13.4.0\r\n\r\nI'm using Obsidian interface. But I think that it's happening with all interfaces. ",
          "created_at": "2023-07-10T16:36:53Z"
        },
        {
          "author": "sabaimran",
          "body": "Ah, got it. I think this is specific to the way Obsidian modifies the configuration on startup. If you go to the Web UI and disable the existing PDF configuration, it should work correctly. Let me test & patch the issue on the Obsidian interface. ",
          "created_at": "2023-07-10T16:55:01Z"
        },
        {
          "author": "sabaimran",
          "body": "@noghartt I'm going to include this in the next release today, but you can use this command if you want it sooner:\r\n```shell\r\n# Maps to the latest commit on the master branch\r\npip install --upgrade --pre khoj-assistant\r\n```",
          "created_at": "2023-07-10T17:34:34Z"
        },
        {
          "author": "noghartt",
          "body": "> @noghartt I'm going to include this in the next release today, but you can use this command if you want it sooner:\r\n> \r\n> ```shell\r\n> # Maps to the latest commit on the master branch\r\n> pip install --upgrade --pre khoj-assistant\r\n> ```\r\n\r\nCool! Thank you so much!",
          "created_at": "2023-07-10T17:42:21Z"
        }
      ]
    },
    {
      "issue_number": 272,
      "title": "Add a one-click regenerate button to the Khoj web search UI",
      "body": "To help mitigate issues from #190 , add a single click way to regenerate results from the search UI in Khoj web.",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-07-03T17:43:17Z",
      "updated_at": "2023-07-08T03:36:24Z",
      "closed_at": "2023-07-08T03:36:24Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/272/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "sabaimran"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/272",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/272",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:50.679985",
      "comments": []
    },
    {
      "issue_number": 33,
      "title": "Add a demo for semantic search using Harry Potter data",
      "body": "Idea, riffing and open to modification!\n\nWe could host a standalone demo for Semantic Search using Harry Potter as the input data to generate embeddings. \nWe could use a platform like Streamlit to quickly deploy a simple, nice UI that simply calls into a service hosting a model trained on that data in the backend. \n\nUsers could make detailed queries like, \"Where did Harry first catch a snitch?\" Or \"What was Aunt Petunia's favorite desert?\" Or equivalent. ",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2022-07-13T14:27:41Z",
      "updated_at": "2023-07-06T03:53:40Z",
      "closed_at": "2023-07-06T03:53:40Z",
      "labels": [
        "try"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/33/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/33",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/33",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:50.680010",
      "comments": [
        {
          "author": "sabaimran",
          "body": "[Screencast from 05-29-2023 02:08:01 PM.webm](https://github.com/debanjum/khoj/assets/65192171/d6362e7c-05d9-4502-b70b-cfe0d6b5aa2a)\r\n",
          "created_at": "2023-05-29T21:12:16Z"
        },
        {
          "author": "sabaimran",
          "body": "[Screencast from 05-29-2023 02:23:29 PM.webm](https://github.com/debanjum/khoj/assets/65192171/7daa38d3-cfbb-4604-954f-e489f36e48c1)\r\n",
          "created_at": "2023-05-29T21:25:09Z"
        },
        {
          "author": "debanjum",
          "body": "I think we can close this as we've created video demos like above indexing Paul Graham essays and live demos for Khoj at https://faq.khoj.dev indexing the Khoj github repository to find relevant commits, issues etc",
          "created_at": "2023-07-06T03:53:40Z"
        }
      ]
    },
    {
      "issue_number": 149,
      "title": "Allow populating corpus via json or other format.",
      "body": "Though a file-based corpus is easy for personal, local-machine knowledge-bases, this can be extended to arbitrary knowledge-bases if new entries can be added to the corpus via an API endpoint or using a more generalized text format.\r\n\r\nFor example, static-site search engines are often building their index using a single file that is easy for a static site generator to render.\r\n\r\n**Example**:\r\nI have a hugo site with ~600 markdown files. Some are in the local filesystem, others are pulled using hugo from the internet or other repositories. In the end, they all pass through hugo's renderer, and can be rendered to HTML or JSON or any other file format that I have an created a go template for.\r\n\r\nThis single-file \"dump\" is then ingested by a search indexer, like [stork](https://stork-search.net/) or [lunr](https://lunrjs.com/) or [blevesearch](https://blevesearch.com/). Each of these indexers/search-engines can process content in any format either using their library functions or APIs.\r\n\r\nThis would help to supply content to the model(s) when not necessarily all of it is available on the filesystem or in markdown.",
      "state": "closed",
      "author": "khayyamsaleem",
      "author_type": "User",
      "created_at": "2023-02-10T00:36:52Z",
      "updated_at": "2023-07-06T03:09:47Z",
      "closed_at": "2023-07-06T03:09:47Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/149/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/149",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/149",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:50.865034",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hey @khayyamsaleem, thanks for providing a use-case and detailed reasoning for the feature request! 🫶🏽\r\n1. Khoj stores the text content indices in a standardized intermediate format as jsonl files\r\n    - For implementation details: See the [architecture diagram](https://github.com/debanjum/khoj#Arch",
          "created_at": "2023-02-23T20:25:38Z"
        },
        {
          "author": "debanjum",
          "body": "Closing this issue as it's gone stale and the issue ask seems to have been answered",
          "created_at": "2023-07-06T03:09:47Z"
        }
      ]
    },
    {
      "issue_number": 267,
      "title": "What is \"model\" in the configuration for?",
      "body": "In the configuration file, there are the following settings:\r\n`chat-model: gpt-3.5-turbo`\r\n`model: text-davinci-003`\r\n\r\nI tried to use `gpt-3.5-turbo` for `model` but got some warning messages in the terminal. Now I am using `text-embedding-ada-002`, and I am not getting any errors.\r\n\r\nTherefore, I am wondering what is this for? How to set this parameter to reduce costs?",
      "state": "closed",
      "author": "wenlzhang",
      "author_type": "User",
      "created_at": "2023-07-02T20:24:20Z",
      "updated_at": "2023-07-06T03:03:36Z",
      "closed_at": "2023-07-06T03:03:35Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/267/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/267",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/267",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:51.034102",
      "comments": [
        {
          "author": "sabaimran",
          "body": "~Hey @wenlzhang , could you specify which warnings you were getting? `gpt-3.5-turbo` should certainly work same as the others. The warning is most likely nothing to be worried about.~\r\n\r\nSorry, I misunderstood the original question. `gpt-3.5-turbo` cannot be used in the `model` field, as that's a ch",
          "created_at": "2023-07-02T20:39:11Z"
        },
        {
          "author": "wenlzhang",
          "body": "I am getting the following warning messages when using `gpt-3.5-turbo` for `model`:\r\n```\r\n/Users/.../.pyenv/versions/3.10.11/envs/khoj/lib/python3.10/site-packages/langchain/llms/openai.py:189: UserWarning: You are trying to use a chat model. This way of initializing it is no longer supported. Inste",
          "created_at": "2023-07-02T20:45:44Z"
        },
        {
          "author": "debanjum",
          "body": "> In the configuration file, there are the following settings: `chat-model: gpt-3.5-turbo` `model: text-davinci-003`\r\n> \r\n> I tried to use `gpt-3.5-turbo` for `model` but got some warning messages in the terminal. Now I am using `text-embedding-ada-002`, and I am not getting any errors.\r\n> \r\n> There",
          "created_at": "2023-07-02T21:23:04Z"
        },
        {
          "author": "wenlzhang",
          "body": "> In place of `text-davinci-003` you could use any of the [GPT3 instruct](https://platform.openai.com/docs/models/gpt-3) models. The `text-ada-001` would be the cheapest of the options. The `text-babbage-001` or `text-curie-001` would be the other cheaper than `text-davinci-003` to try.\r\n\r\nWould the",
          "created_at": "2023-07-03T07:54:36Z"
        },
        {
          "author": "debanjum",
          "body": "Yes, theoretically it should. Practically I'm not sure, as I haven't tried it myself. Maybe try play around with Davinci, Ada, Curie and Babbage to see if you feel any difference in quality between them? If you can report back the results of these experiments, it will useful for others as well 🙏🏾\n\nI",
          "created_at": "2023-07-04T08:28:23Z"
        }
      ]
    },
    {
      "issue_number": 257,
      "title": "Stream Chat results from OpenAI to Khoj UIs",
      "body": "Streaming Khoj chat response should improve responsiveness of conversing with Khoj. This should improve user experience (and hopefully reduce OpenAI API call failure rates as well)",
      "state": "closed",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2023-06-30T02:55:30Z",
      "updated_at": "2023-07-06T03:02:13Z",
      "closed_at": "2023-07-06T03:02:13Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/257/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "sabaimran"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/257",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/257",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:56.240969",
      "comments": [
        {
          "author": "sabaimran",
          "body": "[This seems like a helpful issue](https://github.com/hwchase17/langchain/issues/2428) on langchain's end that explains some possible solutions to the streaming question.",
          "created_at": "2023-07-04T06:25:19Z"
        }
      ]
    },
    {
      "issue_number": 206,
      "title": "[Obsidian Plugin] The content of chat can be processed as text",
      "body": "Now the output of the dialog is like a picture, and the text in it cannot be selected and copied. ",
      "state": "closed",
      "author": "wwjCMP",
      "author_type": "User",
      "created_at": "2023-04-05T08:42:30Z",
      "updated_at": "2023-07-04T06:24:11Z",
      "closed_at": "2023-07-04T06:24:11Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/206/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/206",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/206",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:56.418454",
      "comments": []
    },
    {
      "issue_number": 231,
      "title": "Config UI should allow user to remove content type/processor",
      "body": "Right now, it's possible to update settings if you already have a content type configured or want to configure it. However, it's not possible to remove one altogether. This should be quite simple.",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-06-20T01:13:36Z",
      "updated_at": "2023-07-03T07:16:53Z",
      "closed_at": "2023-07-03T07:16:53Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/231/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "sabaimran"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/231",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/231",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:56.418478",
      "comments": []
    },
    {
      "issue_number": 252,
      "title": "Remove input fields for output file paths in the /config page",
      "body": "As title, remove the fields for Compressed JSONL and Embeddings File output fields in the settings pages\n\n\n\n![Image](https://github.com/khoj-ai/khoj/assets/65192171/354833a1-26bb-46f6-a5da-c647919a4e17)\n\n",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-06-28T16:43:44Z",
      "updated_at": "2023-07-03T07:16:52Z",
      "closed_at": "2023-07-03T07:16:52Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/252/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "sabaimran"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/252",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/252",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:56.418484",
      "comments": []
    },
    {
      "issue_number": 262,
      "title": "Change default behavior of Khoj to be no gui",
      "body": "Update the default behavior of Khoj to be bypassing the PyQT GUI. There was an [error reported](https://discord.com/channels/1112065956647284756/1112066447947083826/1124867250294370304) in the Discord related to the default behavior. Given we have a nicer web-based UI now, we can just direct users there.",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-07-02T01:24:41Z",
      "updated_at": "2023-07-02T04:37:12Z",
      "closed_at": "2023-07-02T04:37:12Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/262/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "sabaimran"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/262",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/262",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:56.418494",
      "comments": []
    },
    {
      "issue_number": 249,
      "title": "Support ability to remove a configuration completely from the settings UI",
      "body": "This should allow the user to effectively set the object to `None` in their config.",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-06-27T19:43:33Z",
      "updated_at": "2023-07-01T07:56:38Z",
      "closed_at": "2023-07-01T07:56:38Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/249/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "sabaimran"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/249",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/249",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:56.418499",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Duplicate of #231 ",
          "created_at": "2023-07-01T07:56:38Z"
        }
      ]
    },
    {
      "issue_number": 247,
      "title": "Github markdown links aren't always right",
      "body": "Some of the Github results rendered in the web interface are incorrectly relative paths rather than absolute paths. For example: https://lantern.khoj.dev/github.com/khoj-ai/khoj/blob/master/README.md",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-06-26T20:47:25Z",
      "updated_at": "2023-07-01T07:25:51Z",
      "closed_at": "2023-07-01T07:25:51Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/247/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/247",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/247",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:56.598981",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Closed with d01afb3",
          "created_at": "2023-07-01T07:25:51Z"
        }
      ]
    },
    {
      "issue_number": 248,
      "title": "Index Github Issues in Github Plugin for Khoj",
      "body": "Update github plugin for Khoj to index Issues from Github repository with Khoj",
      "state": "closed",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2023-06-27T03:06:06Z",
      "updated_at": "2023-06-29T23:02:48Z",
      "closed_at": "2023-06-29T23:02:48Z",
      "labels": [
        "coverage"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/248/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "sabaimran"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/248",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/248",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:56.815087",
      "comments": [
        {
          "author": "sabaimran",
          "body": "See [API Documentation](https://docs.github.com/en/rest/issues/issues?apiVersion=2022-11-28#list-repository-issues).",
          "created_at": "2023-06-27T22:36:16Z"
        }
      ]
    },
    {
      "issue_number": 223,
      "title": "Prompt exceeding max prompt size returns validation error",
      "body": "When I have a result from my notes passed to Open AI that exceeds the size of the maximum prompt length, I get the following error:\r\n```\r\n1 validation error for ChatMessage\r\ncontent\r\n  str type expected (type=type_error.str)\r\n```",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-06-05T02:35:31Z",
      "updated_at": "2023-06-21T22:23:28Z",
      "closed_at": "2023-06-09T00:32:55Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/223/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "sabaimran"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/223",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/223",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:57.029477",
      "comments": [
        {
          "author": "krrishdholakia",
          "body": "@sabaimran \r\n\r\nwould recommend using a library like `reliableGPT` to help handle this. \r\n\r\nIt switches models in case of context window issues (e.g. to `gpt-3.5-turbo-16k` or `gpt-4`). \r\n\r\nIntegration code is 1 line: \r\n\r\n```\r\nfrom reliablegpt import reliableGPT\r\nopenai.ChatCompletion.create = reliab",
          "created_at": "2023-06-21T22:23:28Z"
        }
      ]
    },
    {
      "issue_number": 233,
      "title": "Index PDF Documents",
      "body": null,
      "state": "closed",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2023-06-21T20:42:14Z",
      "updated_at": "2023-06-21T20:43:20Z",
      "closed_at": "2023-06-21T20:43:10Z",
      "labels": [
        "coverage"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/233/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/233",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/233",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:57.206967",
      "comments": []
    },
    {
      "issue_number": 222,
      "title": "Investigate PDF indexing use case in conjunction with chat",
      "body": "I find that the search endpoint returns good enough results with my indexed PDFs without re-ranking. With re-ranking, it removes the results. Is this a concern based on the types of PDFs I'm indexing? Or is this generally an issue with PDF data, as some (especially forms) are tabular data? Should chat with the PDF endpoint skip re-ranking?",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-06-04T08:03:58Z",
      "updated_at": "2023-06-20T18:56:19Z",
      "closed_at": "2023-06-20T18:56:19Z",
      "labels": [
        "try"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/222/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "sabaimran"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/222",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/222",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:57.206987",
      "comments": [
        {
          "author": "sabaimran",
          "body": "When using more formal research-style papers (which would evidently be using natural language), the chat functionality works in the way that it's expected. In fact, the user experience for chat is remarkably better than search for PDFs in particular because the data formatting after translation can ",
          "created_at": "2023-06-05T02:41:24Z"
        },
        {
          "author": "debanjum",
          "body": "Does disabling rerank for search on PDF files seem to affect the quality of the chat or search results when working with these research paper PDFs?",
          "created_at": "2023-06-05T05:07:12Z"
        },
        {
          "author": "debanjum",
          "body": "@sabaimran, can this issue be closed if the investigation is complete?",
          "created_at": "2023-06-18T12:15:11Z"
        },
        {
          "author": "sabaimran",
          "body": "Right, this seems like a sufficient exploration. Looks like the use case is better for PDFs that have textual data; not as capable at handling tabular information. For example, it might not be too good at processing your W2, but it can read a research paper fairly well.",
          "created_at": "2023-06-20T18:56:19Z"
        }
      ]
    },
    {
      "issue_number": 230,
      "title": "Chat (web) interface refreshes history on each run",
      "body": "Previously, the chat UI on web would maintain history of past conversations. This is generally useful because it allows the user to refresh state of what they were previously discussing with Khoj.\r\n\r\nI checked my logs in the `~/.khoj` folder, and I still have all of history there. This is probably an issue with the way the interface is rendering the data.\r\n\r\nExpected: Conversation history should be maintained whenever I open the `/chat` web interface\r\nActual: On each time I open the `/chat` view, there's a brand new session",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-06-20T01:01:14Z",
      "updated_at": "2023-06-20T02:59:30Z",
      "closed_at": "2023-06-20T02:59:30Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/230/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "debanjum"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/230",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/230",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:57.449877",
      "comments": []
    },
    {
      "issue_number": 210,
      "title": "Interactive configurer for non-technical users",
      "body": "I'm sure some Obsidian users would be more comfortable selecting a model from the UI and launching the daemon from an interactive configuration utility, rather than manually editing the khoj.yml and running commands.",
      "state": "closed",
      "author": "khayyamsaleem",
      "author_type": "User",
      "created_at": "2023-04-11T22:43:01Z",
      "updated_at": "2023-06-20T01:11:37Z",
      "closed_at": "2023-06-20T01:11:37Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/210/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/210",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/210",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:57.449895",
      "comments": [
        {
          "author": "debanjum",
          "body": "I agree! Can you clarify what you specifically find lacking in the current (set of) UIs? \r\nKnowing concrete pain points will help guide simplifying setup of khoj for non-technical users.\r\n\r\nI've listed some options currently available and some planned improvements I was thinking of working on below:",
          "created_at": "2023-04-17T10:52:44Z"
        },
        {
          "author": "debanjum",
          "body": "#228 should provide a more comfortable UI for configuring khoj (rather than manually editing khoj.yml).\r\nOpen to suggestions for improving usability if this feels insufficient.",
          "created_at": "2023-06-18T12:10:44Z"
        }
      ]
    },
    {
      "issue_number": 217,
      "title": "Backend install stuck on - Preparing wheel metadata",
      "body": "python3 -m pip install khoj-assistant && khoj --no-gui\r\nCollecting khoj-assistant\r\n  Using cached https://files.pythonhosted.org/packages/e6/dd/90e159b3fad424fbbc52c48dca1be61bb5971d6bea80b140b91f114bdb50/khoj_assistant-0.6.2-py3-none-any.whl\r\nCollecting aiohttp==3.8.4 (from khoj-assistant)\r\n  Using cached https://files.pythonhosted.org/packages/0f/30/f00e6c3dd65087ad402e1d5e94ddd54758803b88fc3902a8ad14ac970efa/aiohttp-3.8.4-cp38-cp38-macosx_10_9_x86_64.whl\r\nCollecting pyqt6==6.3.1 (from khoj-assistant)\r\n  Using cached https://files.pythonhosted.org/packages/a3/ab/c5989de70eceed91abf5f828d99817462ff75f41558e9f5a6f5213f0932c/PyQt6-6.3.1.tar.gz\r\n  Installing build dependencies ... done\r\n  Getting requirements to build wheel ... done\r\n    Preparing wheel metadata ... -",
      "state": "closed",
      "author": "ritual84",
      "author_type": "User",
      "created_at": "2023-05-26T07:20:01Z",
      "updated_at": "2023-06-18T12:04:03Z",
      "closed_at": "2023-06-18T12:04:02Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/217/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/217",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/217",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:57.645066",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hey @ritual84, it looks like you got stuck while installing the PyQT khoj backend dependencies. \r\n- How long did it get stuck at that step to build the PyQT wheel? It can sometimes take a while to build wheels of bigger dependencies like PyQT. So waiting for a bit to see if the step completes (or er",
          "created_at": "2023-05-28T05:07:57Z"
        },
        {
          "author": "debanjum",
          "body": "Closing this issue for now. @ritual84, Feel free to re-open it if you were able to try above steps and couldn't still get it to work",
          "created_at": "2023-06-18T12:04:02Z"
        }
      ]
    },
    {
      "issue_number": 3,
      "title": "Support indexing git history",
      "body": null,
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2021-11-27T13:16:38Z",
      "updated_at": "2023-06-18T12:01:42Z",
      "closed_at": "2023-06-18T12:01:42Z",
      "labels": [
        "upgrade",
        "coverage"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/3/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/3",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/3",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:57.828543",
      "comments": [
        {
          "author": "debanjum",
          "body": "Added support for indexing git commit history of Github repositories in #227 and #226.\r\n\r\nFeel free to reply here if folks find this solution insufficient (and why?)",
          "created_at": "2023-06-18T12:01:41Z"
        }
      ]
    },
    {
      "issue_number": 207,
      "title": "help text on improve search results",
      "body": "what are some strategies for improving search results? For some more popular concepts, it seems like the search results are good - but very frequently if I use the search for the title of a note it doesn't find it, or any notes related to it",
      "state": "closed",
      "author": "whatSocks",
      "author_type": "User",
      "created_at": "2023-04-06T02:50:25Z",
      "updated_at": "2023-06-18T11:54:06Z",
      "closed_at": "2023-06-18T11:54:06Z",
      "labels": [
        "upgrade",
        "good first issue"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/207/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/207",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/207",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:58.033889",
      "comments": [
        {
          "author": "debanjum",
          "body": "Umm, I recently updated khoj to index the title/filename of markdown note in https://github.com/debanjum/khoj/commit/a2ab68a7a2f0d7e0397051a54b5fd67a4052d907. Can you share which version of khoj you are on (i.e execute `khoj --version` in terminal) ? Are using khoj with markdown/obsidian?",
          "created_at": "2023-04-06T09:17:36Z"
        },
        {
          "author": "debanjum",
          "body": "To improve search quality you can try: \r\n 1. Use natural language queries that are longer than the usual keyword based search queries . E.g *\"visited national park, saw animals\"* vs *\"national park cheetah\"*\r\n 2. Rerank the results after you've entered your query in the Khoj Search Modal on Obsidian",
          "created_at": "2023-04-06T09:31:01Z"
        },
        {
          "author": "whatSocks",
          "body": "@debanjum turns out i had to re-index, I hadn't gotten to the \"results are wonky\" part of the readme. Would it be possible to add that suggestion to the search results as a help text? If I hadn't been checking out the repo at the same time as searching I would have given up",
          "created_at": "2023-04-06T13:18:12Z"
        },
        {
          "author": "debanjum",
          "body": "Ah, good to know re-indexing your Vault fixed the issue. There is some intermittent index corruption issue, which I've not been able to reproduce and hence fix yet. Seems like it may have affected you.\r\n\r\nGood idea on finding a more direct way of notifying users. Can you expand on what you mean by a",
          "created_at": "2023-04-07T11:15:22Z"
        },
        {
          "author": "whatSocks",
          "body": "<img width=\"716\" alt=\"Screenshot 2023-04-08 at 12 52 04 PM\" src=\"https://user-images.githubusercontent.com/2731744/230733343-a04d25f4-1bf7-4d5b-be7d-485914b3a2c0.png\">\r\n\r\nMaybe here under the search bar put\r\n\r\n_results not what you expected? Try re-indexing your vault._\"",
          "created_at": "2023-04-08T16:52:45Z"
        }
      ]
    },
    {
      "issue_number": 220,
      "title": "Khoj chat not using api key correctly",
      "body": "There's a mismatch in expectation regarding the keyword argument being used to pass the OpenAI API key to GPT.",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2023-06-04T07:55:59Z",
      "updated_at": "2023-06-04T09:35:36Z",
      "closed_at": "2023-06-04T09:35:36Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/220/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "sabaimran"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/220",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/220",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:58.241772",
      "comments": []
    },
    {
      "issue_number": 216,
      "title": "Error when switching to open AI embeddings",
      "body": "**Config:** \r\n```\r\nprocessor:\r\n  conversation:\r\n    conversation-logfile: ~/.khoj/processor/conversation/conversation.json\r\n    model: \"text-davinci-003\"\r\n    openai-api-key: omitted\r\nsearch-type:\r\n  asymmetric:\r\n    encoder: text-embedding-ada-002\r\n    encoder-type: khoj.utils.models.OpenAI\r\n    cross-encoder: cross-encoder/ms-marco-MiniLM-L-6-v2\r\n    model-directory: null\r\n  image:\r\n    encoder: sentence-transformers/clip-ViT-B-32\r\n    encoder-type: null\r\n    model-directory: ~/.khoj/search/image\r\n  symmetric:\r\n    cross-encoder: cross-encoder/ms-marco-MiniLM-L-6-v2\r\n    encoder: sentence-transformers/all-MiniLM-L6-v2\r\n    encoder-type: null\r\n    model-directory: ~/.khoj/search/symmetric\r\n```\r\n\r\nError:\r\n\r\n  File \"/Users/ryanmulligan/.pyenv/versions/3.10.11/bin/khoj\", line 8, in <module>\r\n    sys.exit(run())\r\n  File \"/Users/ryanmulligan/.pyenv/versions/3.10.11/lib/python3.10/site-packages/khoj/main.py\", line 88, in run\r\n    configure_server(args, required=False)\r\n  File \"/Users/ryanmulligan/.pyenv/versions/3.10.11/lib/python3.10/site-packages/khoj/configure.py\", line 49, in configure_server\r\n    state.model = configure_search(state.model, state.config, args.regenerate)\r\n  File \"/Users/ryanmulligan/.pyenv/versions/3.10.11/lib/python3.10/site-packages/khoj/configure.py\", line 90, in configure_search\r\n    model.orgmode_search = text_search.setup(\r\n  File \"/Users/ryanmulligan/.pyenv/versions/3.10.11/lib/python3.10/site-packages/khoj/search_type/text_search.py\", line 173, in setup\r\n    bi_encoder, cross_encoder, top_k = initialize_model(search_config)\r\n  File \"/Users/ryanmulligan/.pyenv/versions/3.10.11/lib/python3.10/site-packages/khoj/search_type/text_search.py\", line 40, in initialize_model\r\n    bi_encoder = load_model(\r\n  File \"/Users/ryanmulligan/.pyenv/versions/3.10.11/lib/python3.10/site-packages/khoj/utils/helpers.py\", line 72, in load_model\r\n    model = model_type_class(model_name, device=device)\r\n  File \"/Users/ryanmulligan/.pyenv/versions/3.10.11/lib/python3.10/site-packages/khoj/utils/models.py\", line 33, in __init__\r\n    f\"Set OpenAI API key under processor-config > conversation > openai-api-key in config file: {config_file}\"\r\nException: Set OpenAI API key under processor-config > conversation > openai-api-key in config file: None",
      "state": "closed",
      "author": "rmulligan",
      "author_type": "User",
      "created_at": "2023-05-25T21:11:37Z",
      "updated_at": "2023-05-30T07:55:32Z",
      "closed_at": "2023-05-28T05:13:29Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/216/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/216",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/216",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:24:58.241790",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hey @rmulligan, thanks for raising this issue! I can reproduce it on my end as well. \r\nLet me investigate and (hopefully) push a fix for it soon",
          "created_at": "2023-05-28T04:27:21Z"
        },
        {
          "author": "debanjum",
          "body": "Fixed the issue with using OpenAI embeddings with Khoj. Let me know if you're still hitting the issue once you've updated your khoj backend to the latest pre-release version with `python3 -m pip install --upgrade --pre khoj-assistant`",
          "created_at": "2023-05-28T05:39:17Z"
        },
        {
          "author": "rmulligan",
          "body": "They did the trick. Thanks!",
          "created_at": "2023-05-30T07:55:32Z"
        }
      ]
    },
    {
      "issue_number": 175,
      "title": "Error \"'utf-8' codec can't decode byte 0xaf\"",
      "body": "Excited to try this out, but I am getting following errors:\r\n\r\n```bash\r\n└─> khoj --no-gui\r\n[00:10:19] WARNING  Khoj is not configured.                                                                                                      configure.py:32\r\n                    Configure it via khoj GUI, plugins or by editing /Users/allee/.khoj/khoj.yml.\r\n[00:10:20] INFO     Started server process [17775]                                                                                                  server.py:75\r\n           INFO     Waiting for application startup.                                                                                                    on.py:45\r\n           INFO     Application startup complete.                                                                                                       on.py:59\r\n           INFO     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)                                                                server.py:206\r\n[00:10:47] INFO     127.0.0.1:57519 - \"GET / HTTP/1.1\" 200                                                                                       h11_impl.py:431\r\n           INFO     127.0.0.1:57519 - \"GET /assets/org.min.js HTTP/1.1\" 200                                                                      h11_impl.py:431\r\n           INFO     127.0.0.1:57520 - \"GET /assets/markdown-it.min.js HTTP/1.1\" 200                                                              h11_impl.py:431\r\n           INFO     127.0.0.1:57520 - \"GET /api/config/data HTTP/1.1\" 200                                                                        h11_impl.py:431\r\n           INFO     127.0.0.1:57522 - \"GET /khoj.webmanifest HTTP/1.1\" 200                                                                       h11_impl.py:431\r\n           INFO     127.0.0.1:57520 - \"GET /assets/icons/favicon-144x144.png HTTP/1.1\" 200                                                       h11_impl.py:431\r\n[00:10:51] INFO     127.0.0.1:57520 - \"GET /api/update?t= HTTP/1.1\" 422                                                                          h11_impl.py:431\r\n[00:10:58] INFO     127.0.0.1:57523 - \"GET /api/update?t= HTTP/1.1\" 422                                                                          h11_impl.py:431\r\n[00:10:59] INFO     127.0.0.1:57523 - \"GET /api/update?t= HTTP/1.1\" 422                                                                          h11_impl.py:431\r\n[00:11:09] INFO     127.0.0.1:57525 - \"GET /api/config/data HTTP/1.1\" 200                                                                        h11_impl.py:431\r\n           INFO     127.0.0.1:57525 - \"GET /api/config/data/default HTTP/1.1\" 200                                                                h11_impl.py:431\r\n           INFO     127.0.0.1:57525 - \"GET /api/config/data/default HTTP/1.1\" 200                                                                h11_impl.py:431\r\n           INFO     127.0.0.1:57525 - \"POST /api/config/data HTTP/1.1\" 200                                                                       h11_impl.py:431\r\nDownloading: 100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████| 737/737 [███████████████████████████████████████████████████████████| 116/116 [0\r\n[00:12:14] ERROR    'utf-8' codec can't decode byte 0xaf in position 14: invalid start byte  \r\n```\r\n\r\n```bash\r\n└─> khoj --no-gui\r\nTraceback (most recent call last):\r\n  File \"/Users/grepinsight/miniconda3/envs/jupyter/bin/khoj\", line 8, in <module>\r\n    sys.exit(run())\r\n  File \"/Users/grepinsight/miniconda3/envs/jupyter/lib/python3.9/site-packages/khoj/main.py\", line 80, in run\r\n    configure_server(args, required=False)\r\n  File \"/Users/grepinsight/miniconda3/envs/jupyter/lib/python3.9/site-packages/khoj/configure.py\", line 44, in configure_server\r\n    state.model = configure_search(state.model, state.config, args.regenerate)\r\n  File \"/Users/grepinsight/miniconda3/envs/jupyter/lib/python3.9/site-packages/khoj/configure.py\", line 82, in configure_search\r\n    model.markdown_search = text_search.setup(\r\n  File \"/Users/grepinsight/miniconda3/envs/jupyter/lib/python3.9/site-packages/khoj/search_type/text_search.py\", line 170, in setup\r\n    entries_with_indices = text_to_jsonl(config).process(previous_entries)\r\n  File \"/Users/grepinsight/miniconda3/envs/jupyter/lib/python3.9/site-packages/khoj/processor/markdown/markdown_to_jsonl.py\", line 40, in process\r\n    *MarkdownToJsonl.extract_markdown_entries(markdown_files)\r\n  File \"/Users/grepinsight/miniconda3/envs/jupyter/lib/python3.9/site-packages/khoj/processor/markdown/markdown_to_jsonl.py\", line 110, in extract_markdown_entries\r\n    markdown_content = f.read()\r\n  File \"/Users/grepinsight/miniconda3/envs/jupyter/lib/python3.9/codecs.py\", line 322, in decode\r\n    (result, consumed) = self._buffer_decode(data, self.errors, final)\r\nUnicodeDecodeError: 'utf-8' codec can't decode byte 0xaf in position 14: invalid start byte\r\n```",
      "state": "closed",
      "author": "grepinsight",
      "author_type": "User",
      "created_at": "2023-02-28T15:19:43Z",
      "updated_at": "2023-05-03T07:23:57Z",
      "closed_at": "2023-05-03T07:23:10Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/175/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/175",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/175",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:00.226598",
      "comments": [
        {
          "author": "debanjum",
          "body": "I'd fixed some file encoding related bugs in https://github.com/debanjum/khoj/issues/89. But seems like we still haven't cleared all of them up. \r\n\r\n- Are you trying to use Khoj with Obsidian?\r\n- What is the file encoding of your markdown files?\r\n\r\nThis is unexpected if you are using Obsidian. As ba",
          "created_at": "2023-03-01T07:43:46Z"
        },
        {
          "author": "debanjum",
          "body": "I'll close this issue as we don't have enough data to reproduce the issue and the issue may have already been fixed. For example in: https://github.com/debanjum/khoj/commit/d90df966a9fd2e62250dbbc922210707b486c796.\r\n\r\nFeel free to reopen this issue if the issue persists and more data can be provided",
          "created_at": "2023-05-03T07:23:10Z"
        }
      ]
    },
    {
      "issue_number": 185,
      "title": "Parent directory error",
      "body": "Hi, thanks a lot for creating this awesome tool. The installation was no problem after installing the correct python version on Windows. \r\n\r\nI am using Khoj with obsidian and used the automatic configuration from the obsidian plugin. My vault is located in the directory `C:\\Users\\joste\\Documents\\_Persönlich\\Obsidian\\2nd Brain`. After start up and completing the batches, I got the following error and couldn't find a solution yet after doing some research.\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\joste\\AppData\\Local\\Programs\\Python\\Python310\\lib\\runpy.py\", line 196, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"C:\\Users\\joste\\AppData\\Local\\Programs\\Python\\Python310\\lib\\runpy.py\", line 86, in _run_code\r\n    exec(code, run_globals)\r\n  File \"C:\\Users\\joste\\AppData\\Local\\Programs\\Python\\Python310\\Scripts\\khoj.exe\\__main__.py\", line 7, in <module>\r\n  File \"C:\\Users\\joste\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\khoj\\main.py\", line 88, in run\r\n    configure_server(args, required=False)\r\n  File \"C:\\Users\\joste\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\khoj\\configure.py\", line 48, in configure_server\r\n    state.model = configure_search(state.model, state.config, args.regenerate)\r\n  File \"C:\\Users\\joste\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\khoj\\configure.py\", line 113, in configure_search\r\n    model.markdown_search = text_search.setup(\r\n  File \"C:\\Users\\joste\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\khoj\\search_type\\text_search.py\", line 179, in setup\r\n    corpus_embeddings = compute_embeddings(\r\n  File \"C:\\Users\\joste\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\khoj\\search_type\\text_search.py\", line 96, in compute_embeddings\r\n    torch.save(corpus_embeddings, embeddings_file)\r\n  File \"C:\\Users\\joste\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\torch\\serialization.py\", line 422, in save\r\n    with _open_zipfile_writer(f) as opened_zipfile:\r\n  File \"C:\\Users\\joste\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\torch\\serialization.py\", line 309, in _open_zipfile_writer\r\n    return container(name_or_buffer)\r\n  File \"C:\\Users\\joste\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\torch\\serialization.py\", line 287, in __init__\r\n    super(_open_zipfile_writer_file, self).__init__(torch._C.PyTorchFileWriter(str(name)))\r\nRuntimeError: Parent directory C:\\Users\\joste\\Users\\joste\\Documents\\_Persönlich\\Obsidian does not exist.\r\n```\r\n\r\nSomehow the path ended up wrong. Do you have any idea if there is some possible configuration issue or a problem with the path I am using for my vault?\r\n\r\nHere is part of the configuration that has been created, which seems fine to me:\r\n\r\n```\r\ncontent-type:\r\n  image: null\r\n  ledger: null\r\n  markdown:\r\n    compressed-jsonl: \"~\\\\.khoj\\\\content\\\\markdown\\\\C:\\\\Users\\\\joste\\\\Documents\\\\\\\r\n      _Pers\\xF6nlich\\\\Obsidian\\\\2nd_Brain.jsonl.gz\"\r\n    embeddings-file: \"~\\\\.khoj\\\\content\\\\markdown\\\\C:\\\\Users\\\\joste\\\\Documents\\\\_Pers\\xF6\\\r\n      nlich\\\\Obsidian\\\\2nd_Brain.pt\"\r\n    index-heading-entries: false\r\n    input-files: null\r\n    input-filter:\r\n    - \"C:\\\\Users\\\\joste\\\\Documents\\\\_Pers\\xF6nlich\\\\Obsidian\\\\2nd Brain/**/*.md\"\r\n  music: null\r\n  org: null\r\n  plugins: null\r\n```\r\n\r\nI'd be grateful for some help to get Khoj running.",
      "state": "closed",
      "author": "jk-oster",
      "author_type": "User",
      "created_at": "2023-03-12T18:28:28Z",
      "updated_at": "2023-04-17T10:10:12Z",
      "closed_at": "2023-04-17T09:55:45Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/185/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/185",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/185",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:00.391956",
      "comments": [
        {
          "author": "debanjum",
          "body": "> I am using Khoj with obsidian and used the automatic configuration from the obsidian plugin. My vault is located in the directory C:\\Users\\joste\\Documents\\_Persönlich\\Obsidian\\2nd Brain.\r\n\r\nHey @jk-oster, thanks for providing some context (like khoj.yml and your actual vault directory path) to deb",
          "created_at": "2023-03-12T22:37:42Z"
        },
        {
          "author": "debanjum",
          "body": "Hey @jk-oster,\r\n\r\nI was able to reproduce the issue you were facing in using Khoj with Obsidian on Windows.\r\nI've pushed a fix for it to the main branch. I'll create a minor release for it in a day or two. \r\n\r\nAt that point, if you upgrade your khoj server and obsidian plugin you should (hopefully) ",
          "created_at": "2023-04-17T10:10:12Z"
        }
      ]
    },
    {
      "issue_number": 199,
      "title": "khoj not working with Obsidian/Windows",
      "body": "I'm running Python 3.10.9, pip 23.0.1, Windows 10, and have tried this on both git bash and cmd.\r\n\r\nSTR:\r\n1. `$ pip install khoj-assistant`\r\n2. Install the Khoj community plugin from Obsidian\r\n3. `$ khoj --no-gui`\r\n4. Enable the Khoj plugin in Obsidian\r\n\r\nExpected:\r\nOnce the configuration step is done, I expect to use the search icon in the sidebar to get some sort of result.\r\n\r\nActual:\r\nNo results are displayed and logs will throw errors. Additional, if I stop and restart khoj, I get a new error.\r\n\r\n[Here is one of my logs which shows the initial configuration and failure to show any results in Obsidian](https://github.com/debanjum/khoj/files/11113576/log.log)\r\n\r\n[Another log which shows the new error (EOFError) when trying to run khoj --no-gui after the initial configuration.](https://github.com/debanjum/khoj/files/11113578/log2.log)\r\n\r\nCould be something to do with spaces in my user name (wish I didn't set up this account name with a space in the username but Windows was cool with that like 6 years ago lol), could be something with Windows, not entirely sure. It does seem similar to #195 but not entirely the same. Maybe this will just be a dupe, who knows.\r\n\r\nLet me know if you need additional logs or anything, seems I can reproduce consistently. [Here is my config log (khoj.log)](https://github.com/debanjum/khoj/files/11113625/khoj.log).\r\n\r\n\r\n",
      "state": "closed",
      "author": "TGiles",
      "author_type": "User",
      "created_at": "2023-03-30T16:11:52Z",
      "updated_at": "2023-04-17T10:04:28Z",
      "closed_at": "2023-04-17T10:04:27Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 11,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/199/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/199",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/199",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:00.545031",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hey @TGiles, thanks for the detailed bug report!\r\nDo you mind sharing the errors logs as pasted text or screenshots to this issue? It'll be easier for me to debug (do not have consistent access to my laptop currently).\r\n\r\n> Could be something to do with spaces in my user name\r\n\r\nI'd hope this is not",
          "created_at": "2023-03-31T05:17:44Z"
        },
        {
          "author": "CharlieDickens",
          "body": "Hi @debanjum, I have a similar EOFError. Hope these error logs help. Python version 3.9.5, PIP version 23.0.1.\r\n\r\n```\r\n--- Logging error ---\r\nTraceback (most recent call last):\r\n  File \"c:\\users\\user\\appdata\\local\\programs\\python\\python39\\lib\\logging\\__init__.py\", line 1086, in emit\r\n    stream.writ",
          "created_at": "2023-04-01T18:49:54Z"
        },
        {
          "author": "TGiles",
          "body": "Of course 🙂 Here is the log that shows the initial configuration and failure to show any results in Obsidian.\r\n```\r\n--- Logging error ---\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\Tim Giles\\AppData\\Local\\Programs\\Python\\Python310\\lib\\logging\\__init__.py\", line 1103, in emit\r\n    stream.w",
          "created_at": "2023-04-03T15:24:03Z"
        },
        {
          "author": "debanjum",
          "body": "Thanks @TGiles, @CharlieDickens for sharing your khoj logs. You do seem to be facing similar issues. It seems like the khoj index file is/gets corrupted. So you see a different error on first-run when it is writing the index file and a different error on second run, when it tries to read from the in",
          "created_at": "2023-04-05T07:23:59Z"
        },
        {
          "author": "TGiles",
          "body": "Here's the output of `ls -lhR ~/.khoj/search/asymmetric/`:\r\n\r\n```\r\n$ ls -lhR asymmetric/\r\nasymmetric/:\r\ntotal 8.0K\r\ndrwxr-xr-x 1 Tim Giles 197609 0 Mar 30 12:09 cross-encoder_ms-marco-MiniLM-L-6-v2/\r\ndrwxr-xr-x 1 Tim Giles 197609 0 Mar 30 12:09 sentence-transformers_multi-qa-MiniLM-L6-cos-v1/\r\n\r\nasy",
          "created_at": "2023-04-05T15:25:09Z"
        }
      ]
    },
    {
      "issue_number": 133,
      "title": "[Feature Request] [Obsidian] Option to create new note in Obsidian",
      "body": "Would it possible to add an option to create a new note on pressing `shift + enter`, an implementation similar to the one present in the Omnisearch plugin modal?\r\n\r\nThanks for creating this awesome plugin!",
      "state": "closed",
      "author": "sohanglal",
      "author_type": "User",
      "created_at": "2023-02-05T04:45:22Z",
      "updated_at": "2023-03-30T07:15:27Z",
      "closed_at": "2023-03-30T07:15:27Z",
      "labels": [
        "upgrade",
        "plugin"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/133/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/133",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/133",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:00.767511",
      "comments": [
        {
          "author": "sohanglal",
          "body": "P.S. I started a discussion regarding Khoj in Omnisearch. You can find it [here](https://github.com/scambier/obsidian-omnisearch/discussions/192)",
          "created_at": "2023-02-05T05:11:11Z"
        },
        {
          "author": "debanjum",
          "body": "Hi @sohanglal,\r\n\r\n> Would it possible to add an option to create a new note on pressing `shift + enter`, an implementation similar to the one present in the Omnisearch plugin modal?\r\n\r\nCan you elaborate on the use case there is for creating a new note from the khoj search modal?",
          "created_at": "2023-02-06T21:16:57Z"
        },
        {
          "author": "sohanglal",
          "body": "Let's say I am looking for a note and I don't find it, pressing `shift + enter` would create a new note with the same filename/title as the search term.\r\nDoes this answer your query?\r\n",
          "created_at": "2023-02-07T04:20:10Z"
        },
        {
          "author": "debanjum",
          "body": "> Let's say I am looking for a note and I don't find it, pressing `shift + enter` would create a new note with the same filename/title as the search term. \r\n\r\nI see, interesting idea, seems useful to incorporate for sure",
          "created_at": "2023-02-07T04:31:35Z"
        },
        {
          "author": "DeutscheGabanna",
          "body": "Just to add context - this basically replicates the behaviour of the usual search window in Obsidian. Shift + Enter does just that if you feel no search results are relevant for your query.",
          "created_at": "2023-02-15T21:18:13Z"
        }
      ]
    },
    {
      "issue_number": 134,
      "title": "[Feature Request] [Obsidian] Show name of the note in the search modal",
      "body": "Would it be possible to show the name of the note in the seach modal?",
      "state": "closed",
      "author": "sohanglal",
      "author_type": "User",
      "created_at": "2023-02-05T04:54:26Z",
      "updated_at": "2023-03-30T07:15:26Z",
      "closed_at": "2023-03-30T07:15:26Z",
      "labels": [
        "plugin"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/134/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/134",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/134",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:00.948208",
      "comments": []
    },
    {
      "issue_number": 181,
      "title": "PIP error",
      "body": "Any idea how to fix this?\r\n\r\n  Using cached khoj_assistant-0.1.2-py3-none-any.whl (142 kB)\r\n  Using cached khoj_assistant-0.1.0-py3-none-any.whl (51 kB)\r\nERROR: Cannot install khoj-assistant==0.1.0, khoj-assistant==0.1.10, khoj-assistant==0.1.2, khoj-assistant==0.1.3, khoj-assistant==0.1.4, khoj-assistant==0.1.5, khoj-assistant==0.1.6, khoj-assistant==0.1.7, khoj-assistant==0.1.8, khoj-assistant==0.1.9, khoj-assistant==0.2.0, khoj-assistant==0.2.1 and khoj-assistant==0.2.5 because these package versions have conflicting dependencies.\r\n\r\nThe conflict is caused by:\r\n    khoj-assistant 0.2.5 depends on torch==1.13.1\r\n    khoj-assistant 0.2.1 depends on torch==1.12.1\r\n    khoj-assistant 0.2.0 depends on torch==1.12.1\r\n    khoj-assistant 0.1.10 depends on torch==1.12.1\r\n    khoj-assistant 0.1.9 depends on torch==1.12.1\r\n    khoj-assistant 0.1.8 depends on torch==1.12.1\r\n    khoj-assistant 0.1.7 depends on torch==1.12.1\r\n    khoj-assistant 0.1.6 depends on torch==1.11.0\r\n    khoj-assistant 0.1.5 depends on torch==1.11.0\r\n    khoj-assistant 0.1.4 depends on torch==1.11.0\r\n    khoj-assistant 0.1.3 depends on torch==1.11.0\r\n    khoj-assistant 0.1.2 depends on torch==1.11.0\r\n    khoj-assistant 0.1.0 depends on torch==1.11.0\r\n\r\nTo fix this you could try to:\r\n1. loosen the range of package versions you've specified\r\n2. remove package versions to allow pip attempt to solve the dependency conflict\r\n\r\nERROR: ResolutionImpossible: for help visit https://pip.pypa.io/en/latest/topics/dependency-resolution/#dealing-with-dependency-conflicts\r\n",
      "state": "closed",
      "author": "Cossackx",
      "author_type": "User",
      "created_at": "2023-03-09T03:05:58Z",
      "updated_at": "2023-03-27T21:22:23Z",
      "closed_at": "2023-03-27T21:22:23Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/181/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/181",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/181",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:00.948271",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hey @Cossackx, what is your python version? (You can check that with `python -V`). \n\nThis could be because the python version you're using isn't supported by Khoj. \n\nKhoj currently work with python 3.8 to 3.10. (As python 3.11 isn't supported by pytorch, a dependency for Khoj)",
          "created_at": "2023-03-09T04:44:31Z"
        },
        {
          "author": "Cossackx",
          "body": "@debanjum That's it! I'm on 3.11. Thanks for the sanity check!",
          "created_at": "2023-03-09T12:32:22Z"
        },
        {
          "author": "Cossackx",
          "body": "@debanjum, maybe you can assist again...\r\n\r\nWhen I do this step...\r\n1. Setup Backend\r\nOpen terminal/cmd and run below command to install and start the khoj backend\r\n\r\npip install khoj-assistant && khoj --no-gui\r\n\r\nI get...\r\n10\\site-packages (from anyio<5,>=3.4.0->starlette==0.19.1->fastapi==0.77.1->",
          "created_at": "2023-03-09T15:21:21Z"
        },
        {
          "author": "debanjum",
          "body": "I'm guessing this is because the Python scripts directory is not added to your [PATH](https://www.wikihow.com/Change-the-PATH-Environment-Variable-on-Windows) (where installed scripts/commands are searched for)\r\n\r\nAssuming you're using python 3.10 (and on windows), to run the khoj script from its in",
          "created_at": "2023-03-10T16:09:40Z"
        }
      ]
    },
    {
      "issue_number": 137,
      "title": "Chat Summarize Not Returning Information from Notes",
      "body": "Hello, great work on this! \r\n\r\n## **Use:**\r\nI'm using the Obsidian plugin and the search works excellently. I'd like to also use the web interface ie: http://localhost:8000/chat?type=summarize to chat about my notes from Obsidian. \r\n\r\nI have followed the steps to configure the chat by editing khoj.yml with the following under `processor:`\r\n\r\n```\r\n  conversation:\r\n    conversation-logfile: /Users/name/.khoj/processor/conversation/conversation_logs.json\r\n    model: text-davinci-003\r\n    openai-api-key: sk-aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\r\n```\r\n\r\nI can verify that requests are being sent to OpenAI when I use the chat web interface, and I have restarted khoj and updated the index before chatting.\r\n\r\n## **Expectation:**\r\nI expected that when I typed chat queries about my notes, that I would receive a contextual response using data from my notes in Obsidian. I used the \"summarize\" type in chat. \r\n\r\n## **Result:**\r\nThe chat responded with information that had no context about my notes, despite trying many ways of phrasing questions. Is the summarize type prone to hallucination, or is it supposed to specifically use the context of embedded documents?",
      "state": "closed",
      "author": "Velora",
      "author_type": "User",
      "created_at": "2023-02-05T20:09:21Z",
      "updated_at": "2023-03-11T07:06:37Z",
      "closed_at": "2023-02-07T13:35:51Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/137/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/137",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/137",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:01.177389",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hi @Velora,\r\n\r\nThanks for raising such a well organized issue description 👌🏾\r\n\r\n> I'd like to also use the web interface ie: http://localhost:8000/chat?type=summarize to chat about my notes from Obsidian.\r\n\r\nThere was a typo in the [readme](https://github.com/debanjum/khoj#use-1) that I've [now fixe",
          "created_at": "2023-02-07T03:38:40Z"
        },
        {
          "author": "Velora",
          "body": "Thanks for the response @debanjum. \r\n\r\nI tried with the corrected URL and experienced the same issue. I am not using OpenAi for search, only for the chat. Would that cause this issue? When I did try using it for search as the README described, I received an error about needing to add the openai-api-",
          "created_at": "2023-02-07T04:59:08Z"
        },
        {
          "author": "debanjum",
          "body": "Ok, just looked at the code and remembered *I'd only enabled the Chat with notes to work with org-mode notes*! 🙈\r\nThis would be why the chat bot was hallucinating for you even in summarize mode!. I've fixed that in https://github.com/debanjum/khoj/commit/a26ab31d2087d1a01dfaaaf822560ea9c8ec2835\r\nCan",
          "created_at": "2023-02-07T05:40:50Z"
        },
        {
          "author": "Velora",
          "body": "Yes, I was using markdown from obsidian. Works on the pre-release! Thank you!\r\n\r\nFor my use at least, I will experiment with the prompt because the summarize type tends to produce similar responses to different questions about a particular note, since it is attempting to summarize the full note with",
          "created_at": "2023-02-07T13:35:51Z"
        },
        {
          "author": "debanjum",
          "body": "Thanks for providing detailed reasoning for why the summarize type may not satisfy certain (super useful) use-cases. Let me experiment with better prompts for that.",
          "created_at": "2023-02-09T00:17:18Z"
        }
      ]
    },
    {
      "issue_number": 177,
      "title": "Obsidian Plugin link and dataview errors",
      "body": "I've finally got the server running and linked with Obsidian. Search seems to work, but I can't navigate to any of the results. The console logs the following errors 6 times (one for each result) when typing one character:\r\n![image](https://user-images.githubusercontent.com/101308963/222319197-72c36902-c016-4b6e-9f78-918cf005fa7a.png)\r\n**Windows 10\r\nObsidian 1.1.15\r\nKhoj 0.3.0**",
      "state": "closed",
      "author": "ggstrader",
      "author_type": "User",
      "created_at": "2023-03-02T02:57:08Z",
      "updated_at": "2023-03-06T08:07:21Z",
      "closed_at": "2023-03-06T08:01:56Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/177/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/177",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/177",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:01.380343",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hey @ggstrader, thanks for opening a bug (with error from console log) for this. Just wanted to clarify:\r\n- When you say that search seems to work, do you mean you see some results in your Khoj search modal?\r\n- Is the issue that you cannot navigate to the results within the search modal (e.g with th",
          "created_at": "2023-03-02T17:29:26Z"
        },
        {
          "author": "ggstrader",
          "body": "The results show up, but clicking or hitting enter does nothing",
          "created_at": "2023-03-02T18:51:58Z"
        },
        {
          "author": "debanjum",
          "body": "Thanks for clarifying that. A few other users (on windows) have also reported this issue. Let me investigate why its happening",
          "created_at": "2023-03-02T19:16:46Z"
        },
        {
          "author": "debanjum",
          "body": "Hey @ggstrader, I've fixed the issue with jumping to the note corresponding to the khoj search result in https://github.com/debanjum/khoj/commit/4fb628975c41cd1a38f2eb1a53993d4368d7b2f6.\r\n\r\nThis fix should become available as an update to the Khoj Obsidian plugin when I make the next Khoj release (w",
          "created_at": "2023-03-06T08:07:20Z"
        }
      ]
    },
    {
      "issue_number": 163,
      "title": "Hey, I was trying to use this plugin with obsidian but  I am getting these errors when doing pip install",
      "body": "backround - I have never used python so it might be that I am doing something wrong. so give me some leeway for it.\r\nhere is the command I used and and the result.\r\n![image](https://user-images.githubusercontent.com/28823508/219878292-b95bba77-38f8-4e40-9208-8e38f6a4c8f5.png)\r\n\r\n![image](https://user-images.githubusercontent.com/28823508/219878263-ea1a7f77-14e6-4442-889e-b699420569f9.png)\r\n\r\n\r\n",
      "state": "closed",
      "author": "Uchiha1391",
      "author_type": "User",
      "created_at": "2023-02-18T16:57:53Z",
      "updated_at": "2023-03-02T22:01:05Z",
      "closed_at": "2023-03-02T22:01:05Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/163/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/163",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/163",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:01.568195",
      "comments": [
        {
          "author": "debanjum",
          "body": "> I have never used python so it might be that I am doing something wrong. so give me some leeway for it\r\n\r\nHey @Uchiha1391, don't worry about it! And thanks for sharing screenshots of the issue (and your python version)\r\n\r\nKhoj doesn't work with python 3.11 (yet). So to install the khoj server/back",
          "created_at": "2023-02-18T20:00:39Z"
        },
        {
          "author": "debanjum",
          "body": "Converting this into a discussion as this seems to be an issue with using an unsupported version of python (version 3.11)  to install Khoj. We can always open an issue if any concrete bugs are found with Khoj from this discussion",
          "created_at": "2023-03-02T22:00:57Z"
        }
      ]
    },
    {
      "issue_number": 166,
      "title": "Numpy not being detected",
      "body": "![Screenshot 2023-02-21 at 3 25 43 AM](https://user-images.githubusercontent.com/56708171/220289061-8499e27b-c03b-40bd-a095-efc82024169e.jpg)\r\nAs you can see in the image here, I get an error when trying to run khoj to be used as Obsidian plugin, but it doesn't detect my numpy install. I even tried installing numpy 1.17 and it didn't work either. Suggestions to fix?",
      "state": "closed",
      "author": "dghjunior",
      "author_type": "User",
      "created_at": "2023-02-21T08:27:24Z",
      "updated_at": "2023-03-02T21:57:04Z",
      "closed_at": "2023-03-02T21:57:04Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/166/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/166",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/166",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:01.752220",
      "comments": [
        {
          "author": "debanjum",
          "body": "Strange 🤔. Maybe an issue with different python, pip or package install directory being used to install `numpy` vs `khoj`?\r\n- Could you share logs/screenshots of you installing `khoj` with `pip install khoj-assistant` and numpy with `pip install numpy`? It would be good to see the `numpy` install di",
          "created_at": "2023-02-21T22:03:50Z"
        },
        {
          "author": "debanjum",
          "body": "Converting this into a discussion until any concrete issues in khoj are identified due to this investigation",
          "created_at": "2023-03-02T21:56:55Z"
        }
      ]
    },
    {
      "issue_number": 9,
      "title": "Add unit tests for new CLI/config base model code",
      "body": null,
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2021-11-28T19:27:40Z",
      "updated_at": "2023-03-02T21:42:47Z",
      "closed_at": "2023-03-02T21:42:47Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/9/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/9",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/9",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:01.956201",
      "comments": [
        {
          "author": "sabaimran",
          "body": "After #7 is completed.",
          "created_at": "2021-11-28T19:45:03Z"
        }
      ]
    },
    {
      "issue_number": 165,
      "title": "[org-roam/org] khoj don't detect information under the title when the file contains a heading",
      "body": "Hi!\r\nI noticed that if the file contains a heading, then what is between the \"#+title:\" and the first heading is simply... untraceable. Impossible to find this information in khoj. On the other hand, if the file does not contain any heading (and thus, only #+title: and text), then the information is retrievable. For example, for this :\r\n\r\n```\r\n#+title: A nice title\r\n\r\nAn information here : A\r\n\r\n* Title one here\r\n\r\nAnother information here : B\r\n```\r\n\r\nKhoj will never find information A.\r\n\r\nThanks you in advance for your futur answer.",
      "state": "closed",
      "author": "Cletip",
      "author_type": "User",
      "created_at": "2023-02-19T20:44:33Z",
      "updated_at": "2023-03-02T19:18:39Z",
      "closed_at": "2023-03-01T18:23:59Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/165/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/165",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/165",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:02.135841",
      "comments": [
        {
          "author": "debanjum",
          "body": "Thanks for opening an issue for this! This seems like a bug. Let me try reproduce the issue on my end.",
          "created_at": "2023-02-20T00:13:25Z"
        },
        {
          "author": "debanjum",
          "body": "Hi @Cletip, I've pushed a fix for this issue you found in https://github.com/debanjum/khoj/commit/fe03ba3dcee9cefbc4bba076009ba1a711f68880. \r\nKhoj should index intro text before headings in org files too now.\r\nLet me know if the issue is resolved for you with the latest pre-release khoj. \r\nYou can u",
          "created_at": "2023-03-01T18:31:21Z"
        },
        {
          "author": "Cletip",
          "body": "Hi @debanjum \r\n\r\nThank you very much for the changes !\r\nI did the update command, and I get the following error when I want to start khoj: \r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/utilisateur/.local/bin/khoj\", line 8, in <module>\r\n    sys.exit(run())\r\n  File \"/home/utilisateur/.local",
          "created_at": "2023-03-01T20:18:39Z"
        },
        {
          "author": "debanjum",
          "body": "Interesting, looks like a bug. \r\n- Did you manually edit your khoj.yml file or did you use the GUI to configure khoj?\r\n- Can you share how your `khoj.yml` file looks? It should be located at `~/.khoj/khoj.yml`\r\n- Also can you share the khoj version you have installed with `khoj -V`?",
          "created_at": "2023-03-02T17:02:31Z"
        },
        {
          "author": "debanjum",
          "body": "Never mind, thanks to the error logs you already shared I was able to reproduce the bug you hit on my end.\r\nIt occurs when content-type > ledger (or any other expected content-type section) isn't defined in `khoj.yml`\r\n\r\n I've just pushed a fix for the issue. It'd be great if you can update you khoj",
          "created_at": "2023-03-02T17:21:38Z"
        }
      ]
    },
    {
      "issue_number": 172,
      "title": "Bug: Invalid Argument from something date related",
      "body": "Sorry I don't have much time to investigate this at the moment, just looking for some aid to get up and running.\r\nI'm on Windows 10, \r\nI've run:\r\n```powershell\r\npython3 -m venv env\r\ncd .\\env\\\r\n.\\Scripts\\activate\r\npython --version # Python 3.9.13\r\npipenv install khoj-assistant # Installation was successful\r\nkhoj --no-gui # error after running\r\n```\r\n\r\n The error:\r\n```\r\nkhoj --no-gui\r\nBatches: 100%|████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 101/101 [06:37<00:00,  3.93s/it]\r\nTraceback (most recent call last):\r\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0\\lib\\runpy.py\", line 197, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0\\lib\\runpy.py\", line 87, in _run_code\r\n    exec(code, run_globals)\r\n  File \"E:\\env\\Scripts\\khoj.exe\\__main__.py\", line 7, in <module>\r\n  File \"E:\\env\\lib\\site-packages\\khoj\\main.py\", line 80, in run\r\n    configure_server(args, required=False)\r\n  File \"E:\\env\\lib\\site-packages\\khoj\\configure.py\", line 44, in configure_server\r\n    state.model = configure_search(state.model, state.config, args.regenerate)\r\n  File \"E:\\env\\lib\\site-packages\\khoj\\configure.py\", line 82, in configure_search\r\n    model.markdown_search = text_search.setup(\r\n  File \"E:\\env\\lib\\site-packages\\khoj\\search_type\\text_search.py\", line 185, in setup\r\n    filter.load(entries, regenerate=regenerate)\r\n  File \"E:\\env\\lib\\site-packages\\khoj\\search_filter\\date_filter.py\", line 41, in load\r\n    date_in_entry = datetime.strptime(date_in_entry_string, \"%Y-%m-%d\").timestamp()\r\nOSError: [Errno 22] Invalid argument\r\n```",
      "state": "closed",
      "author": "ggstrader",
      "author_type": "User",
      "created_at": "2023-02-25T06:14:07Z",
      "updated_at": "2023-03-02T02:44:17Z",
      "closed_at": "2023-03-02T02:44:17Z",
      "labels": [
        "fix",
        "question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/172/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/172",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/172",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:02.371012",
      "comments": [
        {
          "author": "debanjum",
          "body": "Sounds like a bug. I'll push a fix for it soon.",
          "created_at": "2023-02-26T05:33:37Z"
        },
        {
          "author": "debanjum",
          "body": "Hey @ggstrader, I pushed a mitigation for the issue you were facing with the date filters. Let me know if the issue still persists after upgrade khoj with `pip install --upgrade --pre khoj-assistant` (or the equivalent command for `pipenv`)",
          "created_at": "2023-03-01T07:30:30Z"
        },
        {
          "author": "ggstrader",
          "body": "It runs now, and I can visit it at http://127.0.0.1:8000/ and see it working!\r\nHowever the obsidian plugin got a 404",
          "created_at": "2023-03-02T02:20:22Z"
        },
        {
          "author": "ggstrader",
          "body": "Oh, it was two things:\r\n1. I had something else running on that port\r\n2. when switching ports, I needed to remove the trailing slash from the URL",
          "created_at": "2023-03-02T02:44:16Z"
        }
      ]
    },
    {
      "issue_number": 167,
      "title": "Null Reference Error on starting Khoj with GUI on First Run",
      "body": "![KHOJ bug](https://user-images.githubusercontent.com/121588624/220403560-8feef3b6-2edb-4587-94db-4abe6bd08634.png)\r\n\r\n\r\nAttributeError: 'NoneType' object has no attribute 'get'",
      "state": "closed",
      "author": "CrackheadoooObsidianUserooo",
      "author_type": "User",
      "created_at": "2023-02-21T16:24:23Z",
      "updated_at": "2023-03-01T07:27:42Z",
      "closed_at": "2023-03-01T07:27:42Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/167/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/167",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/167",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:02.658500",
      "comments": [
        {
          "author": "debanjum",
          "body": "It's unfortunate  that Khoj doesn't start for you after first run. I'll need a little more information to debug the issue: \r\n1. Did you install/reload the Khoj obsidian plugin after you started Khoj the first time? \r\n2. Did search using Khoj (from Obsidian or otherwise) work for you at any point?\r\n\r",
          "created_at": "2023-02-21T22:13:15Z"
        },
        {
          "author": "thomclae33",
          "body": "I had the same issue, but was able to get things working again without the gui. Works like a charm  🙌",
          "created_at": "2023-02-23T18:28:27Z"
        }
      ]
    },
    {
      "issue_number": 171,
      "title": "Support Content Plugins in Khoj",
      "body": "Khoj currently supports a limited set of core content types. \r\nSupport external content plugins to search across a wider range of content types. \r\nThis provides multiple benefits:\r\n1. Gives folks a wider view into their private data\r\n2. Speeds up development by decoupling the core platform from plugin development\r\n3. Spreads development and maintenance of plugins across multiple developers\r\n",
      "state": "closed",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2023-02-23T19:50:32Z",
      "updated_at": "2023-03-01T04:23:26Z",
      "closed_at": "2023-03-01T04:23:26Z",
      "labels": [
        "upgrade",
        "coverage"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/171/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "debanjum"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/171",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/171",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:02.849439",
      "comments": []
    },
    {
      "issue_number": 176,
      "title": "AttributeError: 'NoneType' object has no attribute 'get'",
      "body": "```\r\n[useruser@archlinux ~]$ khoj\r\nTraceback (most recent call last):\r\n  File \"/home/useruser/.local/bin/khoj\", line 8, in <module>\r\n    sys.exit(run())\r\n  File \"/home/useruser/.local/lib/python3.10/site-packages/khoj/main.py\", line 85, in run\r\n    main_window = MainWindow(args.config_file)\r\n  File \"/home/useruser/.local/lib/python3.10/site-packages/khoj/interface/desktop/main_window.py\", line 62, in __init__\r\n    self.search_settings_panels += [self.add_settings_panel(current_content_config, search_type)]\r\n  File \"/home/useruser/.local/lib/python3.10/site-packages/khoj/interface/desktop/main_window.py\", line 87, in add_settings_panel\r\n    current_content_files = current_content_config.get(\"input-files\", [])\r\nAttributeError: 'NoneType' object has no attribute 'get'\r\n```\r\nHi, I've gotten another error, this time when trying to start khoj for the second time using the command `khoj`. I'm using: `Python 3.10.9`. I searched for similar issues but couldn't find this exact error in any other open or closed issues, so I'm sorry if this is a duplicate.",
      "state": "closed",
      "author": "onekum",
      "author_type": "User",
      "created_at": "2023-02-28T20:26:27Z",
      "updated_at": "2023-02-28T22:29:08Z",
      "closed_at": "2023-02-28T22:28:30Z",
      "labels": [
        "duplicate"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/176/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/176",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/176",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:02.849461",
      "comments": [
        {
          "author": "debanjum",
          "body": "Ugh, yeah there is a null reference bug when you start khoj in gui mode on first run.\r\nTo avoid this, start khoj with `khoj --no-gui` instead. Then install/enable your Khoj obsidian plugin.\r\n\r\nStarting khoj in no-gui mode should bypass the above issue. I'll push a fix for it in a day or two",
          "created_at": "2023-02-28T22:24:36Z"
        },
        {
          "author": "debanjum",
          "body": "I'll mark this as duplicate and use #167 to track this bug instead",
          "created_at": "2023-02-28T22:27:03Z"
        }
      ]
    },
    {
      "issue_number": 51,
      "title": "Investigate simplenote support",
      "body": "- [simplenote](https://simplenote.com/) is a note-taking app that supports generic .txt files as well as markdown .md files. See if there's anything in particular required for using this.\r\n\r\nLonger term:\r\n- See if there's a way to give deeper search support for Simplenote, perhaps in application? The code is [open source](https://simplenote.com/developers/). Could we add a Khoj extension?",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2022-08-07T12:41:19Z",
      "updated_at": "2023-02-21T07:42:25Z",
      "closed_at": "2023-02-21T07:42:25Z",
      "labels": [
        "plugin",
        "try"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/51/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/51",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/51",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:03.054760",
      "comments": [
        {
          "author": "debanjum",
          "body": "Indexing markdown files (from SimpleNote or otherwise) and searching over them using the Khoj Web UI has been possible for a while.\r\nBut it would not be possible to use Khoj from within the SimpleNote app as SimpleNote does not currently support third party plugins and it's API is deprecated[^1]\r\n\r\n",
          "created_at": "2023-02-21T07:42:25Z"
        }
      ]
    },
    {
      "issue_number": 136,
      "title": "Upon initial installation in Obsidian: Error if (t == SearchType.Markdown or t == None) and config.content_type.markdown: AttributeError: 'NoneType' object has no attribute 'content_type'",
      "body": "Following the obsidian README, including installing the community plugin as well as running khoj-assistant back-end, led to the following error:\r\n\r\n```python \r\nif (t == SearchType.Markdown or t == None) and config.content_type.markdown:\r\n  AttributeError: 'NoneType' object has no attribute 'content_type'\r\n```\r\n\r\nSolved by restarting obsidian markdown session after having installed the plugin.",
      "state": "closed",
      "author": "tleers",
      "author_type": "User",
      "created_at": "2023-02-05T18:14:09Z",
      "updated_at": "2023-02-21T06:20:02Z",
      "closed_at": "2023-02-21T06:20:02Z",
      "labels": [
        "question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/136/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/136",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/136",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:03.239706",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hi @tleers, thanks for reporting this issue!\r\n\r\nDid you install the khoj obsidian community plugin before starting the `khoj-assistant` backend?\r\n\r\nI think that would both trigger the issue you saw and have it resolve on restarting obsidian. \r\nThis is because the plugin configures the khoj backend w",
          "created_at": "2023-02-06T02:17:03Z"
        },
        {
          "author": "debanjum",
          "body": "Hey @tleers,\r\nI've updated [the setup instructions](https://github.com/debanjum/khoj/tree/master/src/interface/obsidian#Setup) to mention following the installation steps in order. \r\nClosing this issue for now as I don't have any other actionable items to follow-up on this issue. \r\nOf course feel fr",
          "created_at": "2023-02-21T06:20:02Z"
        }
      ]
    },
    {
      "issue_number": 89,
      "title": "UnicodeDecodeError: 'utf-8' codec can't decode byte 0xa2: invalid start byte for some org files",
      "body": "khoj fails to index a directory of org files, producing error:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/slade/.local/bin/khoj\", line 8, in <module>\r\n    sys.exit(run())\r\n  File \"/home/slade/.local/lib/python3.10/site-packages/src/main.py\", line 112, in run\r\n    configure_server(args, required=False)\r\n  File \"/home/slade/.local/lib/python3.10/site-packages/src/configure.py\", line 36, in configure_server\r\n    state.model = configure_search(state.model, state.config, args.regenerate)\r\n  File \"/home/slade/.local/lib/python3.10/site-packages/src/configure.py\", line 46, in configure_search\r\n    model.orgmode_search = text_search.setup(\r\n  File \"/home/slade/.local/lib/python3.10/site-packages/src/search_type/text_search.py\", line 173, in setup\r\n    text_to_jsonl(config.input_files, config.input_filter, config.compressed_jsonl)\r\n  File \"/home/slade/.local/lib/python3.10/site-packages/src/processor/org_mode/org_to_jsonl.py\", line 32, in org_to_jsonl\r\n    entries, file_to_entries = extract_org_entries(org_files)\r\n  File \"/home/slade/.local/lib/python3.10/site-packages/src/processor/org_mode/org_to_jsonl.py\", line 72, in extract_org_entries\r\n    org_file_entries = orgnode.makelist(str(org_file))\r\n  File \"/home/slade/.local/lib/python3.10/site-packages/src/processor/org_mode/orgnode.py\", line 83, in makelist\r\n    for line in f:\r\n  File \"/usr/lib/python3.10/codecs.py\", line 322, in decode\r\n    (result, consumed) = self._buffer_decode(data, self.errors, final)\r\nUnicodeDecodeError: 'utf-8' codec can't decode byte 0xa2 in position 676: invalid start byte\r\n```\r\n\r\nI'm not sure which files are triggering this error, but will experiment.",
      "state": "closed",
      "author": "emacsomancer",
      "author_type": "User",
      "created_at": "2022-09-11T00:45:11Z",
      "updated_at": "2023-02-17T22:44:24Z",
      "closed_at": "2023-02-17T22:44:24Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 8,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/89/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/89",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/89",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:03.453586",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hey @emacsomancer, some pointers below to find, fix the issue you're facing:\r\n1. Run `grep -axv '.*' /path/to/notes/*.org` to find files with invalid utf-8 characters\r\n   Refer: [StackOverflow](https://stackoverflow.com/a/41741313/19720296) answer for details on above command\r\n2. Try install, run th",
          "created_at": "2022-09-11T14:24:56Z"
        },
        {
          "author": "emacsomancer",
          "body": "I was able to locate the files that had invalid utf-8 characters in them. but the development version of khoj still produced the same errors as long as the characters were in the files.",
          "created_at": "2022-09-11T22:27:23Z"
        },
        {
          "author": "debanjum",
          "body": "I see. Have you been able to get `khoj` to work for you yet? If you can share the portion of the file with the invalid utf-8 characters it'll help resolve the issue faster",
          "created_at": "2022-09-12T12:58:53Z"
        },
        {
          "author": "debanjum",
          "body": "Closing this as the issue has become stale. Suggested fix for the decoding error could not be validated. Feel free to reopen if anyone faces the same issue",
          "created_at": "2022-10-13T21:02:18Z"
        },
        {
          "author": "tleers",
          "body": "I ran into this same issue, but with markdown files when trying to use Khoj with Obsidian Markdown. \r\n\r\nChanging the following line in `processor/markdown/markdown_to_jsonl.py` fixed the issue for me.\r\n\r\n```python\r\nfor markdown_file in markdown_files:\r\n    with open(markdown_file) as f:\r\n        mar",
          "created_at": "2023-02-05T18:11:33Z"
        }
      ]
    },
    {
      "issue_number": 161,
      "title": "[Feature Request] [Obsidian] Chunk-level search results",
      "body": "Thanks for your excellent work on this! I'm interested in making this work better for longer notes, i.e. pages for book highlight exports from Readwise that are huge. I notice you chunk up the text to size appropriately for the model and am curious if that chunking can be made more obvious in the item rank view. (chunk-level rather than document level results)",
      "state": "open",
      "author": "jshph",
      "author_type": "User",
      "created_at": "2023-02-17T01:00:12Z",
      "updated_at": "2023-02-17T19:48:43Z",
      "closed_at": null,
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/161/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/161",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/161",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:03.674937",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hi @jshph, thanks for opening an issue for this! \r\n\r\nYeah, working with longer notes isn't great. But as you noticed, the backend indexer chunks items at a more granular level (due to model max token limits). If we can expose this in the UI(s), it'll improve the search experience for sure.\r\n\r\nI had ",
          "created_at": "2023-02-17T19:48:42Z"
        }
      ]
    },
    {
      "issue_number": 139,
      "title": "Error: Exception in ASGI Application",
      "body": "entered the below string in Terminal. Then opened khoj in Obsidian\r\npip install khoj-assistant && khoj --no-gui\r\n\r\nTerminal downloaded a bunch files and got to special_tokens_map.json: 100%\r\n\r\nThen got this error message:\r\n\r\n\"GET /api/update?t=markdown HTTP/1.1\" 500 Internal Server Error\r\nERROR:    Exception in ASGI application\r\n\r\nAny ideas here? Thanks",
      "state": "closed",
      "author": "daxmonson",
      "author_type": "User",
      "created_at": "2023-02-06T01:21:54Z",
      "updated_at": "2023-02-15T21:34:55Z",
      "closed_at": "2023-02-15T21:34:55Z",
      "labels": [
        "fix",
        "question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/139/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/139",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/139",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:03.851635",
      "comments": [
        {
          "author": "debanjum",
          "body": "Thanks for reporting this!\r\n\r\n> Then got this error message:\r\n>\r\n> \"GET /api/update?t=markdown HTTP/1.1\" 500 Internal Server Error\r\nERROR: Exception in ASGI application\r\n\r\nI'll need more details to debug what the potential issue could be:\r\n- Can you share a screenshot (or more details) of what the t",
          "created_at": "2023-02-06T02:01:53Z"
        },
        {
          "author": "daxmonson",
          "body": "I tried running the install again:  pip install khoj-assistant && khoj --no-gui\r\n\r\nThis time the ASGI errror didn't come up, but got this: \r\n<img width=\"1066\" alt=\"Screen Shot 2023-02-05 at 6 30 22 PM\" src=\"https://user-images.githubusercontent.com/5855930/216869788-9f11085f-49d2-4ad6-9970-53ef0179f",
          "created_at": "2023-02-06T02:31:05Z"
        },
        {
          "author": "debanjum",
          "body": "Thanks for sharing a screenshot of the new issue you're seeing. It seems like the gzipped jsonl files khoj creates to index your markdown notes is corrupted. \r\n\r\nCan you \r\n1. Delete your `~/.khoj` directory. It should be at `/Users/<your-username>/.khoj`\r\n2. Restart khoj by running the `khoj --no-gu",
          "created_at": "2023-02-06T03:27:52Z"
        },
        {
          "author": "daxmonson",
          "body": "Hello, \r\nDeleted and restarted with the command. Then left Obsidian/Terminal open overnight. Still not able to search and get results in khoj. Is there an indexing that would be as long as overnight? Think I'll wait a few days and see if you can get it installed with the latest Python and see if tha",
          "created_at": "2023-02-06T18:04:07Z"
        },
        {
          "author": "debanjum",
          "body": "Hi,\r\n\r\nI'll need more details to debug your issue. Can you start the khoj backend in verbose mode with `khoj -vv` and share what you see in the terminal before/after you try searching?\r\n\r\n> Is there an indexing that would be as long as overnight?\r\n\r\nNo, the indexing shouldn't take more than a few mi",
          "created_at": "2023-02-06T19:22:15Z"
        }
      ]
    },
    {
      "issue_number": 145,
      "title": "Fail to install khoj due to PyQt error",
      "body": "_Originally posted by @DeutscheGabanna in https://github.com/debanjum/khoj/issues/131#issuecomment-1419871641_\r\n\r\nI was getting similar problems as mentioned in the #128, and downgraded to python 3.9 from 3.11 something.\r\nNow I'm getting this error:\r\n\r\n```\r\nInstalling build dependencies ... done\r\n  Getting requirements to build wheel ... done\r\n  Preparing metadata (pyproject.toml) ... error\r\n  error: subprocess-exited-with-error\r\n\r\n  × Preparing metadata (pyproject.toml) did not run successfully.\r\n  │ exit code: 1\r\n  ╰─> [22 lines of output]\r\n      Traceback (most recent call last):\r\n        File \"C:\\Users\\Paul\\AppData\\Local\\Programs\\Python\\Python39-32\\lib\\site-packages\\pip\\_vendor\\pyproject_hooks\\_in_process\\_in_process.py\", line 353, in <module>\r\n          main()\r\n        File \"C:\\Users\\Paul\\AppData\\Local\\Programs\\Python\\Python39-32\\lib\\site-packages\\pip\\_vendor\\pyproject_hooks\\_in_process\\_in_process.py\", line 335, in main\r\n          json_out['return_val'] = hook(**hook_input['kwargs'])\r\n        File \"C:\\Users\\Paul\\AppData\\Local\\Programs\\Python\\Python39-32\\lib\\site-packages\\pip\\_vendor\\pyproject_hooks\\_in_process\\_in_process.py\", line 152, in prepare_metadata_for_build_wheel\r\n          whl_basename = backend.build_wheel(metadata_directory, config_settings)\r\n        File \"C:\\Users\\Paul\\AppData\\Local\\Temp\\pip-build-env-9iau_fe6\\overlay\\Lib\\site-packages\\sipbuild\\api.py\", line 46, in build_wheel\r\n          project = AbstractProject.bootstrap('wheel',\r\n        File \"C:\\Users\\Paul\\AppData\\Local\\Temp\\pip-build-env-9iau_fe6\\overlay\\Lib\\site-packages\\sipbuild\\abstract_project.py\", line 87, in bootstrap\r\n          project.setup(pyproject, tool, tool_description)\r\n        File \"C:\\Users\\Paul\\AppData\\Local\\Temp\\pip-build-env-9iau_fe6\\overlay\\Lib\\site-packages\\sipbuild\\project.py\", line 585, in setup\r\n          self.apply_user_defaults(tool)\r\n        File \"project.py\", line 67, in apply_user_defaults\r\n          super().apply_user_defaults(tool)\r\n        File \"C:\\Users\\Paul\\AppData\\Local\\Temp\\pip-build-env-9iau_fe6\\overlay\\Lib\\site-packages\\pyqtbuild\\project.py\", line 70, in apply_user_defaults\r\n          super().apply_user_defaults(tool)\r\n        File \"C:\\Users\\Paul\\AppData\\Local\\Temp\\pip-build-env-9iau_fe6\\overlay\\Lib\\site-packages\\sipbuild\\project.py\", line 236, in apply_user_defaults\r\n          self.builder.apply_user_defaults(tool)\r\n        File \"C:\\Users\\Paul\\AppData\\Local\\Temp\\pip-build-env-9iau_fe6\\overlay\\Lib\\site-packages\\pyqtbuild\\builder.py\", line 69, in apply_user_defaults\r\n          raise PyProjectOptionException('qmake',\r\n      sipbuild.pyproject.PyProjectOptionException\r\n      [end of output]\r\n```\r\n",
      "state": "closed",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2023-02-07T07:08:31Z",
      "updated_at": "2023-02-15T21:31:38Z",
      "closed_at": "2023-02-15T21:31:38Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 15,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/145/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/145",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/145",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:04.051174",
      "comments": [
        {
          "author": "DeutscheGabanna",
          "body": "Leaving this as suggested by you:\r\n```\r\npython -m pip install khoj-assistant==0.2.6\r\nCollecting khoj-assistant==0.2.6\r\n  Downloading khoj_assistant-0.2.6-py3-none-any.whl (1.0 MB)\r\n     ---------------------------------------- 1.0/1.0 MB 16.4 MB/s eta 0:00:00\r\nCollecting pydantic==1.9.1\r\n  Using cac",
          "created_at": "2023-02-09T20:23:22Z"
        },
        {
          "author": "DeutscheGabanna",
          "body": "sorry for the duplicate",
          "created_at": "2023-02-09T20:23:33Z"
        },
        {
          "author": "debanjum",
          "body": "No issues! Thanks for adding your investigation here. I'll try get to this by next week",
          "created_at": "2023-02-10T02:49:59Z"
        },
        {
          "author": "DeutscheGabanna",
          "body": "OH MY GOD! I FIXED IT!\r\nI ran so many commands that it may be hard to pin-point which one worked in which order, but I'll try. Maybe it'll help you investigate the issue further.\r\n\r\nThe \"success\" route is something like this:\r\n\r\n- install python 3.9-x86-64 version (the 64-bit version, not 32-bit one",
          "created_at": "2023-02-10T18:40:00Z"
        },
        {
          "author": "DeutscheGabanna",
          "body": "I got the server running. I do not know if this is the kind of error that stops the entire program from running, but I've seen this in the backend log:\r\n```\r\nc:\\users\\paul\\appdata\\local\\programs\\python\\python39\\lib\\site-packages\\huggingface_hub\\file_download.py:560: FutureWarning: `cached_download` ",
          "created_at": "2023-02-10T18:43:38Z"
        }
      ]
    },
    {
      "issue_number": 147,
      "title": "Make indexing frequency configurable",
      "body": "Right now, the indexer runs on an hourly schedule. It would be nice if this parameter were configurable via the config file.",
      "state": "open",
      "author": "khayyamsaleem",
      "author_type": "User",
      "created_at": "2023-02-09T23:43:06Z",
      "updated_at": "2023-02-14T02:49:01Z",
      "closed_at": null,
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/147/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/147",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/147",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:04.266696",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hey @khayyamsaleem, thanks for pointing this out. Will make the indexing interval configurable soon.",
          "created_at": "2023-02-14T02:49:00Z"
        }
      ]
    },
    {
      "issue_number": 129,
      "title": "Show a progress bar when re-indexing vault in Obsidian",
      "body": "Currently there is no indication what the software is doing, any aproximate time, if its stuck or not...\r\nPlease add some kind of progress bar, so its better visible what is going on.",
      "state": "closed",
      "author": "abhuva",
      "author_type": "User",
      "created_at": "2023-02-04T17:42:30Z",
      "updated_at": "2023-02-14T02:42:27Z",
      "closed_at": "2023-02-14T02:18:11Z",
      "labels": [
        "fix",
        "good first issue",
        "plugin"
      ],
      "label_count": 3,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/129/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/129",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/129",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:04.454767",
      "comments": [
        {
          "author": "debanjum",
          "body": "Added indicator to show indexing is actively in progress. @abhuva (or others), feel free to reopen this issue if the fix is unsatisfactory. The changes will be visible in the khoj obsidian plugin once a new release is published. Hopefully by the end of this week.\r\n\r\nhttps://user-images.githubusercon",
          "created_at": "2023-02-14T02:42:27Z"
        }
      ]
    },
    {
      "issue_number": 146,
      "title": "Still failing at PyQt6 in 0.2.6 and Python 3.9",
      "body": "```\r\npython -m pip install khoj-assistant==0.2.6\r\nCollecting khoj-assistant==0.2.6\r\n  Downloading khoj_assistant-0.2.6-py3-none-any.whl (1.0 MB)\r\n     ---------------------------------------- 1.0/1.0 MB 16.4 MB/s eta 0:00:00\r\nCollecting pydantic==1.9.1\r\n  Using cached pydantic-1.9.1-py3-none-any.whl (142 kB)\r\nCollecting pillow==9.3.0\r\n  Using cached Pillow-9.3.0-cp39-cp39-win32.whl (2.2 MB)\r\nCollecting transformers==4.21.0\r\n  Using cached transformers-4.21.0-py3-none-any.whl (4.7 MB)\r\nCollecting schedule==1.1.0\r\n  Using cached schedule-1.1.0-py2.py3-none-any.whl (10 kB)\r\nCollecting fastapi==0.77.1\r\n  Using cached fastapi-0.77.1-py3-none-any.whl (54 kB)\r\nCollecting defusedxml==0.7.1\r\n  Using cached defusedxml-0.7.1-py2.py3-none-any.whl (25 kB)\r\nCollecting numpy==1.22.4\r\n  Using cached numpy-1.22.4-cp39-cp39-win32.whl (12.2 MB)\r\nCollecting openai==0.20.0\r\n  Using cached openai-0.20.0.tar.gz (42 kB)\r\n  Installing build dependencies ... done\r\n  Getting requirements to build wheel ... done\r\n  Preparing metadata (pyproject.toml) ... done\r\nCollecting pyqt6==6.3.1\r\n  Using cached PyQt6-6.3.1.tar.gz (1.0 MB)\r\n  Installing build dependencies ... done\r\n  Getting requirements to build wheel ... done\r\n  Preparing metadata (pyproject.toml) ... error\r\n  error: subprocess-exited-with-error\r\n\r\n  × Preparing metadata (pyproject.toml) did not run successfully.\r\n  │ exit code: 1\r\n  ╰─> [22 lines of output]\r\n      Traceback (most recent call last):\r\n        File \"C:\\Users\\Paul\\AppData\\Local\\Programs\\Python\\Python39-32\\lib\\site-packages\\pip\\_vendor\\pyproject_hooks\\_in_process\\_in_process.py\", line 353, in <module>\r\n          main()\r\n        File \"C:\\Users\\Paul\\AppData\\Local\\Programs\\Python\\Python39-32\\lib\\site-packages\\pip\\_vendor\\pyproject_hooks\\_in_process\\_in_process.py\", line 335, in main\r\n          json_out['return_val'] = hook(**hook_input['kwargs'])\r\n        File \"C:\\Users\\Paul\\AppData\\Local\\Programs\\Python\\Python39-32\\lib\\site-packages\\pip\\_vendor\\pyproject_hooks\\_in_process\\_in_process.py\", line 152, in prepare_metadata_for_build_wheel\r\n          whl_basename = backend.build_wheel(metadata_directory, config_settings)\r\n        File \"C:\\Users\\Paul\\AppData\\Local\\Temp\\pip-build-env-pwi35v7h\\overlay\\Lib\\site-packages\\sipbuild\\api.py\", line 46, in build_wheel\r\n          project = AbstractProject.bootstrap('wheel',\r\n        File \"C:\\Users\\Paul\\AppData\\Local\\Temp\\pip-build-env-pwi35v7h\\overlay\\Lib\\site-packages\\sipbuild\\abstract_project.py\", line 87, in bootstrap\r\n          project.setup(pyproject, tool, tool_description)\r\n        File \"C:\\Users\\Paul\\AppData\\Local\\Temp\\pip-build-env-pwi35v7h\\overlay\\Lib\\site-packages\\sipbuild\\project.py\", line 585, in setup\r\n          self.apply_user_defaults(tool)\r\n        File \"project.py\", line 67, in apply_user_defaults\r\n          super().apply_user_defaults(tool)\r\n        File \"C:\\Users\\Paul\\AppData\\Local\\Temp\\pip-build-env-pwi35v7h\\overlay\\Lib\\site-packages\\pyqtbuild\\project.py\", line 70, in apply_user_defaults\r\n          super().apply_user_defaults(tool)\r\n        File \"C:\\Users\\Paul\\AppData\\Local\\Temp\\pip-build-env-pwi35v7h\\overlay\\Lib\\site-packages\\sipbuild\\project.py\", line 236, in apply_user_defaults\r\n          self.builder.apply_user_defaults(tool)\r\n        File \"C:\\Users\\Paul\\AppData\\Local\\Temp\\pip-build-env-pwi35v7h\\overlay\\Lib\\site-packages\\pyqtbuild\\builder.py\", line 69, in apply_user_defaults\r\n          raise PyProjectOptionException('qmake',\r\n      sipbuild.pyproject.PyProjectOptionException\r\n      [end of output]\r\n\r\n  note: This error originates from a subprocess, and is likely not a problem with pip.\r\nerror: metadata-generation-failed\r\n\r\n× Encountered error while generating package metadata.\r\n╰─> See above for output.\r\n\r\nnote: This is an issue with the package mentioned above, not pip.\r\nhint: See above for details.\r\n\r\nC:\\Users\\Paul>where python\r\nC:\\Users\\Paul\\AppData\\Local\\Programs\\Python\\Python39-32\\python.exe\r\n\r\nC:\\Users\\Paul>\r\n```\r\n\r\nI followed all the advice I could get from both this repository as well as PyQt6 help channels.\r\n\r\n- I ran `python -m pip install` instead just `pip install` to make sure I invoke the correct Python version\r\n- I only have python 3.9 so whatever, actually, but I was told 3.9 is the version where khoji actually works\r\n- I ran `where python` to also make sure I launch from python 3.9\r\n- I used the latest version of khoji==0.2.6",
      "state": "closed",
      "author": "DeutscheGabanna",
      "author_type": "User",
      "created_at": "2023-02-09T17:53:49Z",
      "updated_at": "2023-02-09T20:22:49Z",
      "closed_at": "2023-02-09T20:22:49Z",
      "labels": [
        "duplicate"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/146/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/146",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/146",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:04.703888",
      "comments": [
        {
          "author": "DeutscheGabanna",
          "body": "So it seems that the #145 error has not been fixed yet.",
          "created_at": "2023-02-09T19:42:22Z"
        },
        {
          "author": "debanjum",
          "body": "Hi @DeutscheGabanna, thanks for looking into this. As you noticed, the PyQT issue has not been fixed as of release 0.2.6. Issue #145 is meant to track the PyQT investigation and fix. \n\nIt'd be great if you can put your investigation notes in #145 and close this issue. This will avoid duplicate issue",
          "created_at": "2023-02-09T20:12:56Z"
        }
      ]
    },
    {
      "issue_number": 144,
      "title": "Unable to start with Python 3.9.13",
      "body": "```python\r\nC:\\Users\\bruh>python --version\r\nPython 3.9.13\r\n\r\nC:\\Users\\bruh>pip install khoj-assistant && khoj --no-gui\r\nRequirement already satisfied: khoj-assistant in c:\\users\\bruh\\appdata\\local\\programs\\python\\python39\\lib\\site-packages (0.2.5)\r\nRequirement already satisfied: schedule==1.1.0 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (1.1.0)\r\nRequirement already satisfied: huggingface-hub==0.8.1 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (0.8.1)\r\nRequirement already satisfied: jinja2==3.1.2 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (3.1.2)\r\nRequirement already satisfied: openai==0.20.0 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (0.20.0)\r\nRequirement already satisfied: pillow==9.3.0 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (9.3.0)\r\nRequirement already satisfied: pydantic==1.9.1 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (1.9.1)\r\nRequirement already satisfied: torchvision==0.14.1 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (0.14.1)\r\nRequirement already satisfied: fastapi==0.77.1 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (0.77.1)\r\nRequirement already satisfied: uvicorn==0.17.6 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (0.17.6)\r\nRequirement already satisfied: torch==1.13.1 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (1.13.1)\r\nRequirement already satisfied: aiofiles==0.8.0 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (0.8.0)\r\nRequirement already satisfied: transformers==4.21.0 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (4.21.0)\r\nRequirement already satisfied: numpy==1.22.4 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (1.22.4)\r\nRequirement already satisfied: pyyaml==6.0 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (6.0)\r\nRequirement already satisfied: pyqt6==6.3.1 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (6.3.1)\r\nRequirement already satisfied: defusedxml==0.7.1 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (0.7.1)\r\nRequirement already satisfied: sentence-transformers==2.1.0 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (2.1.0)\r\nRequirement already satisfied: dateparser==1.1.1 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (1.1.1)\r\nRequirement already satisfied: pytest==7.1.2 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (7.1.2)\r\nRequirement already satisfied: python-dateutil in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from dateparser==1.1.1->khoj-assistant) (2.8.2)\r\nRequirement already satisfied: pytz in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from dateparser==1.1.1->khoj-assistant) (2022.7.1)\r\nRequirement already satisfied: tzlocal in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from dateparser==1.1.1->khoj-assistant) (4.2)\r\nRequirement already satisfied: regex!=2019.02.19,!=2021.8.27,<2022.3.15 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from dateparser==1.1.1->khoj-assistant) (2022.3.2)\r\nRequirement already satisfied: starlette==0.19.1 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from fastapi==0.77.1->khoj-assistant) (0.19.1)\r\nRequirement already satisfied: typing-extensions>=3.7.4.3 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from huggingface-hub==0.8.1->khoj-assistant) (4.4.0)\r\nRequirement already satisfied: tqdm in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from huggingface-hub==0.8.1->khoj-assistant) (4.64.1)\r\nRequirement already satisfied: filelock in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from huggingface-hub==0.8.1->khoj-assistant) (3.9.0)\r\nRequirement already satisfied: packaging>=20.9 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from huggingface-hub==0.8.1->khoj-assistant) (23.0)\r\nRequirement already satisfied: requests in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from huggingface-hub==0.8.1->khoj-assistant) (2.28.2)\r\nRequirement already satisfied: MarkupSafe>=2.0 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from jinja2==3.1.2->khoj-assistant) (2.1.2)\r\nRequirement already satisfied: openpyxl>=3.0.7 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from openai==0.20.0->khoj-assistant) (3.1.0)\r\nRequirement already satisfied: pandas-stubs>=1.1.0.11 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from openai==0.20.0->khoj-assistant) (1.5.3.230203)\r\nRequirement already satisfied: pandas>=1.2.3 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from openai==0.20.0->khoj-assistant) (1.5.3)\r\nRequirement already satisfied: PyQt6-Qt6>=6.3.0 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from pyqt6==6.3.1->khoj-assistant) (6.4.2)\r\nRequirement already satisfied: PyQt6-sip<14,>=13.4 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from pyqt6==6.3.1->khoj-assistant) (13.4.1)\r\nRequirement already satisfied: py>=1.8.2 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from pytest==7.1.2->khoj-assistant) (1.11.0)\r\nRequirement already satisfied: iniconfig in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from pytest==7.1.2->khoj-assistant) (2.0.0)\r\nRequirement already satisfied: colorama in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from pytest==7.1.2->khoj-assistant) (0.4.6)\r\nRequirement already satisfied: atomicwrites>=1.0 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from pytest==7.1.2->khoj-assistant) (1.4.1)\r\nRequirement already satisfied: attrs>=19.2.0 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from pytest==7.1.2->khoj-assistant) (22.2.0)\r\nRequirement already satisfied: tomli>=1.0.0 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from pytest==7.1.2->khoj-assistant) (2.0.1)\r\nRequirement already satisfied: pluggy<2.0,>=0.12 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from pytest==7.1.2->khoj-assistant) (1.0.0)\r\nRequirement already satisfied: tokenizers>=0.10.3 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from sentence-transformers==2.1.0->khoj-assistant) (0.12.1)\r\nRequirement already satisfied: scikit-learn in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from sentence-transformers==2.1.0->khoj-assistant) (1.2.1)\r\nRequirement already satisfied: scipy in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from sentence-transformers==2.1.0->khoj-assistant) (1.10.0)\r\nRequirement already satisfied: nltk in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from sentence-transformers==2.1.0->khoj-assistant) (3.8.1)\r\nRequirement already satisfied: sentencepiece in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from sentence-transformers==2.1.0->khoj-assistant) (0.1.97)\r\nRequirement already satisfied: asgiref>=3.4.0 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from uvicorn==0.17.6->khoj-assistant) (3.6.0)\r\nRequirement already satisfied: click>=7.0 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from uvicorn==0.17.6->khoj-assistant) (8.1.3)\r\nRequirement already satisfied: h11>=0.8 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from uvicorn==0.17.6->khoj-assistant) (0.14.0)\r\nRequirement already satisfied: anyio<5,>=3.4.0 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from starlette==0.19.1->fastapi==0.77.1->khoj-assistant) (3.6.2)\r\nRequirement already satisfied: et-xmlfile in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from openpyxl>=3.0.7->openai==0.20.0->khoj-assistant) (1.1.0)\r\nRequirement already satisfied: types-pytz>=2022.1.1 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from pandas-stubs>=1.1.0.11->openai==0.20.0->khoj-assistant) (2022.7.1.0)\r\nRequirement already satisfied: six>=1.5 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from python-dateutil->dateparser==1.1.1->khoj-assistant) (1.16.0)\r\nRequirement already satisfied: charset-normalizer<4,>=2 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from requests->huggingface-hub==0.8.1->khoj-assistant) (3.0.1)\r\nRequirement already satisfied: urllib3<1.27,>=1.21.1 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from requests->huggingface-hub==0.8.1->khoj-assistant) (1.26.14)\r\nRequirement already satisfied: idna<4,>=2.5 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from requests->huggingface-hub==0.8.1->khoj-assistant) (3.4)\r\nRequirement already satisfied: certifi>=2017.4.17 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from requests->huggingface-hub==0.8.1->khoj-assistant) (2022.12.7)\r\nRequirement already satisfied: joblib in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from nltk->sentence-transformers==2.1.0->khoj-assistant) (1.2.0)\r\nRequirement already satisfied: threadpoolctl>=2.0.0 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from scikit-learn->sentence-transformers==2.1.0->khoj-assistant) (3.1.0)\r\nRequirement already satisfied: tzdata in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from tzlocal->dateparser==1.1.1->khoj-assistant) (2022.7)\r\nRequirement already satisfied: pytz-deprecation-shim in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from tzlocal->dateparser==1.1.1->khoj-assistant) (0.1.0.post0)\r\nRequirement already satisfied: sniffio>=1.1 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from anyio<5,>=3.4.0->starlette==0.19.1->fastapi==0.77.1->khoj-assistant) (1.3.0)\r\nWARNING: You are using pip version 22.0.4; however, version 23.0 is available.\r\nYou should consider upgrading via the 'C:\\Users\\bruh\\AppData\\Local\\Programs\\Python\\Python39\\python.exe -m pip install --upgrade pip' command.\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\bruh\\AppData\\Local\\Programs\\Python\\Python39\\lib\\runpy.py\", line 197, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"C:\\Users\\bruh\\AppData\\Local\\Programs\\Python\\Python39\\lib\\runpy.py\", line 87, in _run_code\r\n    exec(code, run_globals)\r\n  File \"C:\\Users\\bruh\\AppData\\Local\\Programs\\Python\\Python39\\Scripts\\khoj.exe\\__main__.py\", line 7, in <module>\r\n  File \"C:\\Users\\bruh\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\src\\main.py\", line 80, in run\r\n    configure_server(args, required=False)\r\n  File \"C:\\Users\\bruh\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\src\\configure.py\", line 42, in configure_server\r\n    state.model = configure_search(state.model, state.config, args.regenerate)\r\n  File \"C:\\Users\\bruh\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\src\\configure.py\", line 78, in configure_search\r\n    model.markdown_search = text_search.setup(\r\n  File \"C:\\Users\\bruh\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\src\\search_type\\text_search.py\", line 151, in setup\r\n    entries_with_indices = text_to_jsonl(config).process(previous_entries)\r\n  File \"C:\\Users\\bruh\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\src\\processor\\markdown\\markdown_to_jsonl.py\", line 34, in process\r\n    current_entries = MarkdownToJsonl.convert_markdown_entries_to_maps(*MarkdownToJsonl.extract_markdown_entries(markdown_files))\r\n  File \"C:\\Users\\bruh\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\src\\processor\\markdown\\markdown_to_jsonl.py\", line 100, in extract_markdown_entries\r\n    markdown_content = f.read()\r\n  File \"C:\\Users\\bruh\\AppData\\Local\\Programs\\Python\\Python39\\lib\\encodings\\cp1252.py\", line 23, in decode\r\n    return codecs.charmap_decode(input,self.errors,decoding_table)[0]\r\nUnicodeDecodeError: 'charmap' codec can't decode byte 0x9d in position 32655: character maps to <undefined>\r\n\r\nC:\\Users\\bruh>pip install --upgrade --pre khoj-assistant\r\nRequirement already satisfied: khoj-assistant in c:\\users\\bruh\\appdata\\local\\programs\\python\\python39\\lib\\site-packages (0.2.5)\r\nCollecting khoj-assistant\r\n  Downloading khoj_assistant-0.2.6a1675728796-py3-none-any.whl (1.0 MB)\r\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.0/1.0 MB 13.2 MB/s eta 0:00:00\r\nRequirement already satisfied: defusedxml==0.7.1 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (0.7.1)\r\nRequirement already satisfied: pyqt6==6.3.1 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (6.3.1)\r\nRequirement already satisfied: torchvision==0.14.1 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (0.14.1)\r\nRequirement already satisfied: numpy==1.22.4 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (1.22.4)\r\nRequirement already satisfied: dateparser==1.1.1 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (1.1.1)\r\nRequirement already satisfied: openai==0.20.0 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (0.20.0)\r\nRequirement already satisfied: uvicorn==0.17.6 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (0.17.6)\r\nRequirement already satisfied: pillow==9.3.0 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (9.3.0)\r\nRequirement already satisfied: transformers==4.21.0 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (4.21.0)\r\nRequirement already satisfied: pyyaml==6.0 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (6.0)\r\nRequirement already satisfied: sentence-transformers==2.1.0 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (2.1.0)\r\nRequirement already satisfied: pydantic==1.9.1 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (1.9.1)\r\nRequirement already satisfied: torch==1.13.1 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (1.13.1)\r\nRequirement already satisfied: jinja2==3.1.2 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (3.1.2)\r\nRequirement already satisfied: aiofiles==0.8.0 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (0.8.0)\r\nRequirement already satisfied: fastapi==0.77.1 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (0.77.1)\r\nRequirement already satisfied: pytest==7.1.2 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (7.1.2)\r\nRequirement already satisfied: huggingface-hub==0.8.1 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (0.8.1)\r\nRequirement already satisfied: schedule==1.1.0 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from khoj-assistant) (1.1.0)\r\nRequirement already satisfied: pytz in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from dateparser==1.1.1->khoj-assistant) (2022.7.1)\r\nRequirement already satisfied: python-dateutil in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from dateparser==1.1.1->khoj-assistant) (2.8.2)\r\nRequirement already satisfied: regex!=2019.02.19,!=2021.8.27,<2022.3.15 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from dateparser==1.1.1->khoj-assistant) (2022.3.2)\r\nRequirement already satisfied: tzlocal in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from dateparser==1.1.1->khoj-assistant) (4.2)\r\nRequirement already satisfied: starlette==0.19.1 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from fastapi==0.77.1->khoj-assistant) (0.19.1)\r\nRequirement already satisfied: tqdm in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from huggingface-hub==0.8.1->khoj-assistant) (4.64.1)\r\nRequirement already satisfied: filelock in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from huggingface-hub==0.8.1->khoj-assistant) (3.9.0)\r\nRequirement already satisfied: requests in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from huggingface-hub==0.8.1->khoj-assistant) (2.28.2)\r\nRequirement already satisfied: typing-extensions>=3.7.4.3 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from huggingface-hub==0.8.1->khoj-assistant) (4.4.0)\r\nRequirement already satisfied: packaging>=20.9 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from huggingface-hub==0.8.1->khoj-assistant) (23.0)\r\nRequirement already satisfied: MarkupSafe>=2.0 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from jinja2==3.1.2->khoj-assistant) (2.1.2)\r\nRequirement already satisfied: pandas-stubs>=1.1.0.11 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from openai==0.20.0->khoj-assistant) (1.5.3.230203)\r\nRequirement already satisfied: pandas>=1.2.3 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from openai==0.20.0->khoj-assistant) (1.5.3)\r\nRequirement already satisfied: openpyxl>=3.0.7 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from openai==0.20.0->khoj-assistant) (3.1.0)\r\nRequirement already satisfied: PyQt6-sip<14,>=13.4 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from pyqt6==6.3.1->khoj-assistant) (13.4.1)\r\nRequirement already satisfied: PyQt6-Qt6>=6.3.0 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from pyqt6==6.3.1->khoj-assistant) (6.4.2)\r\nRequirement already satisfied: atomicwrites>=1.0 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from pytest==7.1.2->khoj-assistant) (1.4.1)\r\nRequirement already satisfied: colorama in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from pytest==7.1.2->khoj-assistant) (0.4.6)\r\nRequirement already satisfied: tomli>=1.0.0 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from pytest==7.1.2->khoj-assistant) (2.0.1)\r\nRequirement already satisfied: pluggy<2.0,>=0.12 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from pytest==7.1.2->khoj-assistant) (1.0.0)\r\nRequirement already satisfied: iniconfig in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from pytest==7.1.2->khoj-assistant) (2.0.0)\r\nRequirement already satisfied: py>=1.8.2 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from pytest==7.1.2->khoj-assistant) (1.11.0)\r\nRequirement already satisfied: attrs>=19.2.0 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from pytest==7.1.2->khoj-assistant) (22.2.0)\r\nRequirement already satisfied: tokenizers>=0.10.3 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from sentence-transformers==2.1.0->khoj-assistant) (0.12.1)\r\nRequirement already satisfied: scikit-learn in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from sentence-transformers==2.1.0->khoj-assistant) (1.2.1)\r\nRequirement already satisfied: scipy in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from sentence-transformers==2.1.0->khoj-assistant) (1.10.0)\r\nRequirement already satisfied: nltk in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from sentence-transformers==2.1.0->khoj-assistant) (3.8.1)\r\nRequirement already satisfied: sentencepiece in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from sentence-transformers==2.1.0->khoj-assistant) (0.1.97)\r\nRequirement already satisfied: click>=7.0 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from uvicorn==0.17.6->khoj-assistant) (8.1.3)\r\nRequirement already satisfied: asgiref>=3.4.0 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from uvicorn==0.17.6->khoj-assistant) (3.6.0)\r\nRequirement already satisfied: h11>=0.8 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from uvicorn==0.17.6->khoj-assistant) (0.14.0)\r\nRequirement already satisfied: anyio<5,>=3.4.0 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from starlette==0.19.1->fastapi==0.77.1->khoj-assistant) (3.6.2)\r\nRequirement already satisfied: et-xmlfile in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from openpyxl>=3.0.7->openai==0.20.0->khoj-assistant) (1.1.0)\r\nRequirement already satisfied: types-pytz>=2022.1.1 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from pandas-stubs>=1.1.0.11->openai==0.20.0->khoj-assistant) (2022.7.1.0)\r\nRequirement already satisfied: six>=1.5 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from python-dateutil->dateparser==1.1.1->khoj-assistant) (1.16.0)\r\nRequirement already satisfied: urllib3<1.27,>=1.21.1 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from requests->huggingface-hub==0.8.1->khoj-assistant) (1.26.14)\r\nRequirement already satisfied: certifi>=2017.4.17 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from requests->huggingface-hub==0.8.1->khoj-assistant) (2022.12.7)\r\nRequirement already satisfied: charset-normalizer<4,>=2 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from requests->huggingface-hub==0.8.1->khoj-assistant) (3.0.1)\r\nRequirement already satisfied: idna<4,>=2.5 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from requests->huggingface-hub==0.8.1->khoj-assistant) (3.4)\r\nRequirement already satisfied: joblib in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from nltk->sentence-transformers==2.1.0->khoj-assistant) (1.2.0)\r\nRequirement already satisfied: threadpoolctl>=2.0.0 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from scikit-learn->sentence-transformers==2.1.0->khoj-assistant) (3.1.0)\r\nRequirement already satisfied: pytz-deprecation-shim in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from tzlocal->dateparser==1.1.1->khoj-assistant) (0.1.0.post0)\r\nRequirement already satisfied: tzdata in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from tzlocal->dateparser==1.1.1->khoj-assistant) (2022.7)\r\nRequirement already satisfied: sniffio>=1.1 in c:\\users\\bruh\\appdata\\roaming\\python\\python39\\site-packages (from anyio<5,>=3.4.0->starlette==0.19.1->fastapi==0.77.1->khoj-assistant) (1.3.0)\r\nInstalling collected packages: khoj-assistant\r\n  Attempting uninstall: khoj-assistant\r\n    Found existing installation: khoj-assistant 0.2.5\r\n    Uninstalling khoj-assistant-0.2.5:\r\n      Successfully uninstalled khoj-assistant-0.2.5\r\nSuccessfully installed khoj-assistant-0.2.6a1675728796\r\nWARNING: You are using pip version 22.0.4; however, version 23.0 is available.\r\nYou should consider upgrading via the 'C:\\Users\\bruh\\AppData\\Local\\Programs\\Python\\Python39\\python.exe -m pip install --upgrade pip' command.\r\n\r\nC:\\Users\\bruh>khoj --no-gui\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\bruh\\AppData\\Local\\Programs\\Python\\Python39\\lib\\runpy.py\", line 197, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"C:\\Users\\bruh\\AppData\\Local\\Programs\\Python\\Python39\\lib\\runpy.py\", line 87, in _run_code\r\n    exec(code, run_globals)\r\n  File \"C:\\Users\\bruh\\AppData\\Local\\Programs\\Python\\Python39\\Scripts\\khoj.exe\\__main__.py\", line 7, in <module>\r\n  File \"C:\\Users\\bruh\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\src\\main.py\", line 80, in run\r\n    configure_server(args, required=False)\r\n  File \"C:\\Users\\bruh\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\src\\configure.py\", line 42, in configure_server\r\n    state.model = configure_search(state.model, state.config, args.regenerate)\r\n  File \"C:\\Users\\bruh\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\src\\configure.py\", line 78, in configure_search\r\n    model.markdown_search = text_search.setup(\r\n  File \"C:\\Users\\bruh\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\src\\search_type\\text_search.py\", line 151, in setup\r\n    entries_with_indices = text_to_jsonl(config).process(previous_entries)\r\n  File \"C:\\Users\\bruh\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\src\\processor\\markdown\\markdown_to_jsonl.py\", line 35, in process\r\n    current_entries = MarkdownToJsonl.convert_markdown_entries_to_maps(*MarkdownToJsonl.extract_markdown_entries(markdown_files))\r\n  File \"C:\\Users\\bruh\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\src\\processor\\markdown\\markdown_to_jsonl.py\", line 101, in extract_markdown_entries\r\n    markdown_content = f.read()\r\n  File \"C:\\Users\\bruh\\AppData\\Local\\Programs\\Python\\Python39\\lib\\encodings\\cp1252.py\", line 23, in decode\r\n    return codecs.charmap_decode(input,self.errors,decoding_table)[0]\r\nUnicodeDecodeError: 'charmap' codec can't decode byte 0x9d in position 32655: character maps to <undefined>```\r\n\r\n\r\nI tried installing the pre-release version in #140 but also didn't seem to start.\r\nI originally had 3.10 but downgraded to 3.9.13.\r\nHope this log is somewhat useful.",
      "state": "closed",
      "author": "Yanderuri",
      "author_type": "User",
      "created_at": "2023-02-07T00:19:02Z",
      "updated_at": "2023-02-07T17:02:11Z",
      "closed_at": "2023-02-07T17:02:11Z",
      "labels": [
        "fix",
        "question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 9,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/144/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/144",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/144",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:04.905383",
      "comments": [
        {
          "author": "debanjum",
          "body": "Hi @Yanderuri, a few other folks seem to be facing the same issue. I've created [a PR](https://github.com/debanjum/khoj/pull/143) with a potential fix for the `UnicodeDecodeError` you are facing.\r\n\r\nCan you try install khoj with `pip install -i https://test.pypi.org/simple/ khoj-assistant==0.2.6.dev",
          "created_at": "2023-02-07T01:34:55Z"
        },
        {
          "author": "Yanderuri",
          "body": "```python\r\nC:\\Users\\bruh>khoj --no-gui\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\bruh\\AppData\\Local\\Programs\\Python\\Python39\\lib\\runpy.py\", line 197, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"C:\\Users\\bruh\\AppData\\Local\\Programs\\Python\\Python39\\lib\\r",
          "created_at": "2023-02-07T01:46:49Z"
        },
        {
          "author": "debanjum",
          "body": "Thanks for trying this out the development version of khoj from that PR. \r\nGo worry about your exams, this can of course wait! 😁\r\n\r\nBut seems like we're back to https://github.com/debanjum/khoj/issues/89 based on ☹️:\r\n> UnicodeDecodeError: 'utf-8' codec can't decode byte 0x96 in position 5013: inval",
          "created_at": "2023-02-07T01:55:11Z"
        },
        {
          "author": "debanjum",
          "body": "Actually when you get time after your exams. Can you try the following:\r\n1. Delete your  khoj config directory at `C:\\Users\\bruh\\.khoj`\r\n2. Install the pre-release khoj with: `pip install --upgrade --pre khoj-assistant` (as I've merged [this PR](https://github.com/debanjum/khoj/pull/143))\r\n3. Start ",
          "created_at": "2023-02-07T04:56:04Z"
        },
        {
          "author": "Yanderuri",
          "body": "```python\r\nC:\\Users\\bruh>khoj --no-gui -vv\r\nINFO: 2023-02-07 00:17:03,799: src | Starting Khoj...\r\nWARNING: 2023-02-07 00:17:03,800: src.configure | Khoj is not configured.\r\nConfigure it via khoj GUI, plugins or by editing C:\\Users\\bruh\\.khoj\\khoj.yml.\r\nINFO:     Started server process [34244]\r\nINFO",
          "created_at": "2023-02-07T05:21:47Z"
        }
      ]
    },
    {
      "issue_number": 5,
      "title": "FAQ as a service",
      "body": "Productionize deployment of semantic search services on top of notes.",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2021-11-27T13:22:13Z",
      "updated_at": "2023-02-07T14:34:43Z",
      "closed_at": "2023-02-07T14:34:43Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/5/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/5",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/5",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:05.128222",
      "comments": [
        {
          "author": "debanjum",
          "body": "Closing this for now. As this is not planned to be worked on anytime soon",
          "created_at": "2023-02-07T14:34:43Z"
        }
      ]
    },
    {
      "issue_number": 140,
      "title": "Error when installing khoj",
      "body": "I have macOS Venture 13.1\r\nWhen I run the command \"pip install khoj-assistant && khoj --no-gui\" in the terminal\r\nI get the following error:\r\n![Screenshot 2023-02-06 at 13 00 40](https://user-images.githubusercontent.com/70570280/216942307-7d23e290-9cde-4543-937c-526b3b8f954b.png)\r\n\r\n`(.khoj_venv) (base) MacBook-Pro-Maksim:~ maksimsmirnov$ pip install khoj-assistant && khoj --no-gui\r\nRequirement already satisfied: khoj-assistant in ./.khoj_venv/lib/python3.8/site-packages (0.2.5)\r\nRequirement already satisfied: fastapi==0.77.1 in ./.khoj_venv/lib/python3.8/site-packages (from khoj-assistant) (0.77.1)\r\nRequirement already satisfied: openai==0.20.0 in ./.khoj_venv/lib/python3.8/site-packages (from khoj-assistant) (0.20.0)\r\nRequirement already satisfied: huggingface-hub==0.8.1 in ./.khoj_venv/lib/python3.8/site-packages (from khoj-assistant) (0.8.1)\r\nRequirement already satisfied: uvicorn==0.17.6 in ./.khoj_venv/lib/python3.8/site-packages (from khoj-assistant) (0.17.6)\r\nRequirement already satisfied: pyqt6==6.3.1 in ./.khoj_venv/lib/python3.8/site-packages (from khoj-assistant) (6.3.1)\r\nRequirement already satisfied: torch==1.13.1 in ./.khoj_venv/lib/python3.8/site-packages (from khoj-assistant) (1.13.1)\r\nRequirement already satisfied: aiofiles==0.8.0 in ./.khoj_venv/lib/python3.8/site-packages (from khoj-assistant) (0.8.0)\r\nRequirement already satisfied: pillow==9.3.0 in ./.khoj_venv/lib/python3.8/site-packages (from khoj-assistant) (9.3.0)\r\nRequirement already satisfied: numpy==1.22.4 in ./.khoj_venv/lib/python3.8/site-packages (from khoj-assistant) (1.22.4)\r\nRequirement already satisfied: pydantic==1.9.1 in ./.khoj_venv/lib/python3.8/site-packages (from khoj-assistant) (1.9.1)\r\nRequirement already satisfied: transformers==4.21.0 in ./.khoj_venv/lib/python3.8/site-packages (from khoj-assistant) (4.21.0)\r\nRequirement already satisfied: schedule==1.1.0 in ./.khoj_venv/lib/python3.8/site-packages (from khoj-assistant) (1.1.0)\r\nRequirement already satisfied: dateparser==1.1.1 in ./.khoj_venv/lib/python3.8/site-packages (from khoj-assistant) (1.1.1)\r\nRequirement already satisfied: torchvision==0.14.1 in ./.khoj_venv/lib/python3.8/site-packages (from khoj-assistant) (0.14.1)\r\nRequirement already satisfied: defusedxml==0.7.1 in ./.khoj_venv/lib/python3.8/site-packages (from khoj-assistant) (0.7.1)\r\nRequirement already satisfied: sentence-transformers==2.1.0 in ./.khoj_venv/lib/python3.8/site-packages (from khoj-assistant) (2.1.0)\r\nRequirement already satisfied: jinja2==3.1.2 in ./.khoj_venv/lib/python3.8/site-packages (from khoj-assistant) (3.1.2)\r\nRequirement already satisfied: pyyaml==6.0 in ./.khoj_venv/lib/python3.8/site-packages (from khoj-assistant) (6.0)\r\nRequirement already satisfied: pytest==7.1.2 in ./.khoj_venv/lib/python3.8/site-packages (from khoj-assistant) (7.1.2)\r\nRequirement already satisfied: python-dateutil in ./.khoj_venv/lib/python3.8/site-packages (from dateparser==1.1.1->khoj-assistant) (2.8.2)\r\nRequirement already satisfied: tzlocal in ./.khoj_venv/lib/python3.8/site-packages (from dateparser==1.1.1->khoj-assistant) (4.2)\r\nRequirement already satisfied: regex!=2019.02.19,!=2021.8.27,<2022.3.15 in ./.khoj_venv/lib/python3.8/site-packages (from dateparser==1.1.1->khoj-assistant) (2022.3.2)\r\nRequirement already satisfied: pytz in ./.khoj_venv/lib/python3.8/site-packages (from dateparser==1.1.1->khoj-assistant) (2022.7.1)\r\nRequirement already satisfied: starlette==0.19.1 in ./.khoj_venv/lib/python3.8/site-packages (from fastapi==0.77.1->khoj-assistant) (0.19.1)\r\nRequirement already satisfied: tqdm in ./.khoj_venv/lib/python3.8/site-packages (from huggingface-hub==0.8.1->khoj-assistant) (4.64.1)\r\nRequirement already satisfied: packaging>=20.9 in ./.khoj_venv/lib/python3.8/site-packages (from huggingface-hub==0.8.1->khoj-assistant) (23.0)\r\nRequirement already satisfied: filelock in ./.khoj_venv/lib/python3.8/site-packages (from huggingface-hub==0.8.1->khoj-assistant) (3.9.0)\r\nRequirement already satisfied: requests in ./.khoj_venv/lib/python3.8/site-packages (from huggingface-hub==0.8.1->khoj-assistant) (2.28.2)\r\nRequirement already satisfied: typing-extensions>=3.7.4.3 in ./.khoj_venv/lib/python3.8/site-packages (from huggingface-hub==0.8.1->khoj-assistant) (4.4.0)\r\nRequirement already satisfied: MarkupSafe>=2.0 in ./.khoj_venv/lib/python3.8/site-packages (from jinja2==3.1.2->khoj-assistant) (2.1.2)\r\nRequirement already satisfied: pandas>=1.2.3 in ./.khoj_venv/lib/python3.8/site-packages (from openai==0.20.0->khoj-assistant) (1.5.3)\r\nRequirement already satisfied: pandas-stubs>=1.1.0.11 in ./.khoj_venv/lib/python3.8/site-packages (from openai==0.20.0->khoj-assistant) (1.5.3.230203)\r\nRequirement already satisfied: openpyxl>=3.0.7 in ./.khoj_venv/lib/python3.8/site-packages (from openai==0.20.0->khoj-assistant) (3.1.0)\r\nRequirement already satisfied: PyQt6-sip<14,>=13.4 in ./.khoj_venv/lib/python3.8/site-packages (from pyqt6==6.3.1->khoj-assistant) (13.4.1)\r\nRequirement already satisfied: PyQt6-Qt6>=6.3.0 in ./.khoj_venv/lib/python3.8/site-packages (from pyqt6==6.3.1->khoj-assistant) (6.4.2)\r\nRequirement already satisfied: tomli>=1.0.0 in ./.khoj_venv/lib/python3.8/site-packages (from pytest==7.1.2->khoj-assistant) (2.0.1)\r\nRequirement already satisfied: pluggy<2.0,>=0.12 in ./.khoj_venv/lib/python3.8/site-packages (from pytest==7.1.2->khoj-assistant) (1.0.0)\r\nRequirement already satisfied: iniconfig in ./.khoj_venv/lib/python3.8/site-packages (from pytest==7.1.2->khoj-assistant) (2.0.0)\r\nRequirement already satisfied: py>=1.8.2 in ./.khoj_venv/lib/python3.8/site-packages (from pytest==7.1.2->khoj-assistant) (1.11.0)\r\nRequirement already satisfied: attrs>=19.2.0 in ./.khoj_venv/lib/python3.8/site-packages (from pytest==7.1.2->khoj-assistant) (22.2.0)\r\nRequirement already satisfied: tokenizers>=0.10.3 in ./.khoj_venv/lib/python3.8/site-packages (from sentence-transformers==2.1.0->khoj-assistant) (0.12.1)\r\nRequirement already satisfied: scikit-learn in ./.khoj_venv/lib/python3.8/site-packages (from sentence-transformers==2.1.0->khoj-assistant) (1.2.1)\r\nRequirement already satisfied: scipy in ./.khoj_venv/lib/python3.8/site-packages (from sentence-transformers==2.1.0->khoj-assistant) (1.10.0)\r\nRequirement already satisfied: nltk in ./.khoj_venv/lib/python3.8/site-packages (from sentence-transformers==2.1.0->khoj-assistant) (3.8.1)\r\nRequirement already satisfied: sentencepiece in ./.khoj_venv/lib/python3.8/site-packages (from sentence-transformers==2.1.0->khoj-assistant) (0.1.97)\r\nRequirement already satisfied: click>=7.0 in ./.khoj_venv/lib/python3.8/site-packages (from uvicorn==0.17.6->khoj-assistant) (8.1.3)\r\nRequirement already satisfied: asgiref>=3.4.0 in ./.khoj_venv/lib/python3.8/site-packages (from uvicorn==0.17.6->khoj-assistant) (3.6.0)\r\nRequirement already satisfied: h11>=0.8 in ./.khoj_venv/lib/python3.8/site-packages (from uvicorn==0.17.6->khoj-assistant) (0.14.0)\r\nRequirement already satisfied: anyio<5,>=3.4.0 in ./.khoj_venv/lib/python3.8/site-packages (from starlette==0.19.1->fastapi==0.77.1->khoj-assistant) (3.6.2)\r\nRequirement already satisfied: et-xmlfile in ./.khoj_venv/lib/python3.8/site-packages (from openpyxl>=3.0.7->openai==0.20.0->khoj-assistant) (1.1.0)\r\nRequirement already satisfied: types-pytz>=2022.1.1 in ./.khoj_venv/lib/python3.8/site-packages (from pandas-stubs>=1.1.0.11->openai==0.20.0->khoj-assistant) (2022.7.1.0)\r\nRequirement already satisfied: six>=1.5 in ./.khoj_venv/lib/python3.8/site-packages (from python-dateutil->dateparser==1.1.1->khoj-assistant) (1.16.0)\r\nRequirement already satisfied: charset-normalizer<4,>=2 in ./.khoj_venv/lib/python3.8/site-packages (from requests->huggingface-hub==0.8.1->khoj-assistant) (3.0.1)\r\nRequirement already satisfied: certifi>=2017.4.17 in ./.khoj_venv/lib/python3.8/site-packages (from requests->huggingface-hub==0.8.1->khoj-assistant) (2022.12.7)\r\nRequirement already satisfied: urllib3<1.27,>=1.21.1 in ./.khoj_venv/lib/python3.8/site-packages (from requests->huggingface-hub==0.8.1->khoj-assistant) (1.26.14)\r\nRequirement already satisfied: idna<4,>=2.5 in ./.khoj_venv/lib/python3.8/site-packages (from requests->huggingface-hub==0.8.1->khoj-assistant) (3.4)\r\nRequirement already satisfied: joblib in ./.khoj_venv/lib/python3.8/site-packages (from nltk->sentence-transformers==2.1.0->khoj-assistant) (1.2.0)\r\nRequirement already satisfied: threadpoolctl>=2.0.0 in ./.khoj_venv/lib/python3.8/site-packages (from scikit-learn->sentence-transformers==2.1.0->khoj-assistant) (3.1.0)\r\nRequirement already satisfied: backports.zoneinfo in ./.khoj_venv/lib/python3.8/site-packages (from tzlocal->dateparser==1.1.1->khoj-assistant) (0.2.1)\r\nRequirement already satisfied: pytz-deprecation-shim in ./.khoj_venv/lib/python3.8/site-packages (from tzlocal->dateparser==1.1.1->khoj-assistant) (0.1.0.post0)\r\nRequirement already satisfied: sniffio>=1.1 in ./.khoj_venv/lib/python3.8/site-packages (from anyio<5,>=3.4.0->starlette==0.19.1->fastapi==0.77.1->khoj-assistant) (1.3.0)\r\nRequirement already satisfied: tzdata in ./.khoj_venv/lib/python3.8/site-packages (from pytz-deprecation-shim->tzlocal->dateparser==1.1.1->khoj-assistant) (2022.7)\r\nTraceback (most recent call last):\r\n  File \"/Users/maksimsmirnov/.khoj_venv/bin/khoj\", line 5, in <module>\r\n    from src.main import run\r\n  File \"/Users/maksimsmirnov/.khoj_venv/lib/python3.8/site-packages/src/main.py\", line 23, in <module>\r\n    from src.configure import configure_server\r\n  File \"/Users/maksimsmirnov/.khoj_venv/lib/python3.8/site-packages/src/configure.py\", line 10, in <module>\r\n    from src.processor.ledger.beancount_to_jsonl import BeancountToJsonl\r\n  File \"/Users/maksimsmirnov/.khoj_venv/lib/python3.8/site-packages/src/processor/ledger/beancount_to_jsonl.py\", line 8, in <module>\r\n    from src.processor.text_to_jsonl import TextToJsonl\r\n  File \"/Users/maksimsmirnov/.khoj_venv/lib/python3.8/site-packages/src/processor/text_to_jsonl.py\", line 16, in <module>\r\n    class TextToJsonl(ABC):\r\n  File \"/Users/maksimsmirnov/.khoj_venv/lib/python3.8/site-packages/src/processor/text_to_jsonl.py\", line 21, in TextToJsonl\r\n    def process(self, previous_entries: list[Entry]=None) -> list[tuple[int, Entry]]: ...\r\nTypeError: 'type' object is not subscriptable\r\n(.khoj_venv) (base) MacBook-Pro-Maksim:~ maksimsmirnov$ \r\n  [Restored Feb 6, 2023 at 12:55:03]\r\nLast login: Mon Feb  6 12:40:52 on ttys000\r\n\r\nThe default interactive shell is now zsh.\r\nTo update your account to use zsh, please run `chsh -s /bin/zsh`.\r\nFor more details, please visit https://support.apple.com/kb/HT208050.\r\n(base) MacBook-Pro-Maksim:~ maksimsmirnov$ pip install khoj-assistant && khoj --no-gui\r\nCollecting khoj-assistant\r\n  Using cached khoj_assistant-0.2.5-py3-none-any.whl (1.0 MB)\r\nCollecting uvicorn==0.17.6\r\n  Using cached uvicorn-0.17.6-py3-none-any.whl (53 kB)\r\nCollecting pydantic==1.9.1\r\n  Using cached pydantic-1.9.1-cp38-cp38-macosx_10_9_x86_64.whl (2.9 MB)\r\nCollecting aiofiles==0.8.0\r\n  Using cached aiofiles-0.8.0-py3-none-any.whl (13 kB)\r\nCollecting schedule==1.1.0\r\n  Using cached schedule-1.1.0-py2.py3-none-any.whl (10 kB)\r\nCollecting pyqt6==6.3.1\r\n  Using cached PyQt6-6.3.1.tar.gz (1.0 MB)\r\n  Installing build dependencies ... done\r\n  Getting requirements to build wheel ... done\r\n    Preparing wheel metadata ... error\r\n    ERROR: Command errored out with exit status 1:\r\n     command: /Users/maksimsmirnov/opt/anaconda3/bin/python /Users/maksimsmirnov/opt/anaconda3/lib/python3.8/site-packages/pip/_vendor/pep517/_in_process.py prepare_metadata_for_build_wheel /var/folders/0b/x8_x9vqs1577tyyxjjw1dpg40000gn/T/tmpxagvmfau\r\n         cwd: /private/var/folders/0b/x8_x9vqs1577tyyxjjw1dpg40000gn/T/pip-install-3j3cycbz/pyqt6\r\n    Complete output (25 lines):\r\n    Querying qmake about your Qt installation...\r\n    Traceback (most recent call last):\r\n      File \"/Users/maksimsmirnov/opt/anaconda3/lib/python3.8/site-packages/pip/_vendor/pep517/_in_process.py\", line 126, in prepare_metadata_for_build_wheel\r\n        hook = backend.prepare_metadata_for_build_wheel\r\n    AttributeError: module 'sipbuild.api' has no attribute 'prepare_metadata_for_build_wheel'\r\n    \r\n    During handling of the above exception, another exception occurred:\r\n    \r\n    Traceback (most recent call last):\r\n      File \"/Users/maksimsmirnov/opt/anaconda3/lib/python3.8/site-packages/pip/_vendor/pep517/_in_process.py\", line 280, in <module>\r\n        main()\r\n      File \"/Users/maksimsmirnov/opt/anaconda3/lib/python3.8/site-packages/pip/_vendor/pep517/_in_process.py\", line 263, in main\r\n        json_out['return_val'] = hook(**hook_input['kwargs'])\r\n      File \"/Users/maksimsmirnov/opt/anaconda3/lib/python3.8/site-packages/pip/_vendor/pep517/_in_process.py\", line 130, in prepare_metadata_for_build_wheel\r\n        return _get_wheel_metadata_from_wheel(backend, metadata_directory,\r\n      File \"/Users/maksimsmirnov/opt/anaconda3/lib/python3.8/site-packages/pip/_vendor/pep517/_in_process.py\", line 159, in _get_wheel_metadata_from_wheel\r\n        whl_basename = backend.build_wheel(metadata_directory, config_settings)\r\n      File \"/private/var/folders/0b/x8_x9vqs1577tyyxjjw1dpg40000gn/T/pip-build-env-5m9c3u6g/overlay/lib/python3.8/site-packages/sipbuild/api.py\", line 46, in build_wheel\r\n        project = AbstractProject.bootstrap('wheel',\r\n      File \"/private/var/folders/0b/x8_x9vqs1577tyyxjjw1dpg40000gn/T/pip-build-env-5m9c3u6g/overlay/lib/python3.8/site-packages/sipbuild/abstract_project.py\", line 87, in bootstrap\r\n        project.setup(pyproject, tool, tool_description)\r\n      File \"/private/var/folders/0b/x8_x9vqs1577tyyxjjw1dpg40000gn/T/pip-build-env-5m9c3u6g/overlay/lib/python3.8/site-packages/sipbuild/project.py\", line 601, in setup\r\n        self.update(tool)\r\n      File \"project.py\", line 164, in update\r\n    sipbuild.exceptions.UserException\r\n    ----------------------------------------\r\nERROR: Command errored out with exit status 1: /Users/maksimsmirnov/opt/anaconda3/bin/python /Users/maksimsmirnov/opt/anaconda3/lib/python3.8/site-packages/pip/_vendor/pep517/_in_process.py prepare_metadata_for_build_wheel /var/folders/0b/x8_x9vqs1577tyyxjjw1dpg40000gn/T/tmpxagvmfau Check the logs for full command output.`",
      "state": "closed",
      "author": "smirnovmaksim91",
      "author_type": "User",
      "created_at": "2023-02-06T10:01:10Z",
      "updated_at": "2023-02-07T12:18:46Z",
      "closed_at": "2023-02-07T12:18:46Z",
      "labels": [
        "fix",
        "question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/140/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/140",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/140",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:05.375345",
      "comments": [
        {
          "author": "debanjum",
          "body": "@smirnovmaksim91, there seem to be 2 different errors I see in the logs you shared\r\n\r\n1. Running khoj failed with python 3.8 \r\n    > File \"/Users/maksimsmirnov/.khoj_venv/lib/python3.8/site-packages/src/processor/text_to_jsonl.py\", line 21, in TextToJsonl\r\ndef process(self, previous_entries: list[En",
          "created_at": "2023-02-06T15:49:31Z"
        },
        {
          "author": "smirnovmaksim91",
          "body": "Thank you very much for your help. Everything is working!",
          "created_at": "2023-02-07T12:18:09Z"
        }
      ]
    },
    {
      "issue_number": 106,
      "title": "Automate Index Update",
      "body": "### After\nAutomated indexing of content. Search results are fresh and up-to-date with the latest notes\n\n### Before\nUpdate the index by either:\n- Manually calling the khoj /update API endpoint\n- Scheduling a ~cronjob to call the khoj /update API endpoint\n",
      "state": "closed",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2022-12-26T15:01:09Z",
      "updated_at": "2023-01-02T00:38:01Z",
      "closed_at": "2023-01-02T00:38:00Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/106/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "debanjum"
      ],
      "milestone": "Release 0.3.0",
      "html_url": "https://github.com/khoj-ai/khoj/issues/106",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/106",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:05.745141",
      "comments": []
    },
    {
      "issue_number": 107,
      "title": "Document Filter Usage in Readme",
      "body": null,
      "state": "closed",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2022-12-26T15:01:41Z",
      "updated_at": "2022-12-26T19:57:32Z",
      "closed_at": "2022-12-26T19:57:32Z",
      "labels": [
        "documentation"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/107/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "debanjum"
      ],
      "milestone": "Release 0.3.0",
      "html_url": "https://github.com/khoj-ai/khoj/issues/107",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/107",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:05.745163",
      "comments": [
        {
          "author": "debanjum",
          "body": "Completed in a58c243",
          "created_at": "2022-12-26T19:57:32Z"
        }
      ]
    },
    {
      "issue_number": 35,
      "title": "Support Notes in Markdown Format",
      "body": "Allow natural search on markdown based notes, documentation, websites etc\n",
      "state": "closed",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2022-07-21T18:06:47Z",
      "updated_at": "2022-12-26T15:04:12Z",
      "closed_at": "2022-07-21T18:09:49Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/35/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "debanjum"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/35",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/35",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:06.005271",
      "comments": []
    },
    {
      "issue_number": 104,
      "title": "Submit Khoj.el to MELPA",
      "body": "### Why\r\n  - Simplifies installing the Emacs interface to Khoj\r\n  - Simplifies upgrading to only (git) tagged versions of khoj.el via MELPA stable\r\n  - Currently users need to install `khoj.el` manually or by using involved package managers like `straight` or `quelpa`\r\n ### Trigger\r\n- https://github.com/debanjum/khoj/pull/102#issuecomment-1308995896",
      "state": "closed",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2022-12-15T02:24:26Z",
      "updated_at": "2022-12-26T15:00:59Z",
      "closed_at": "2022-12-20T13:50:01Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/104/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "debanjum"
      ],
      "milestone": "Release 0.3.0",
      "html_url": "https://github.com/khoj-ai/khoj/issues/104",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/104",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:06.005308",
      "comments": [
        {
          "author": "debanjum",
          "body": "[PR](https://github.com/melpa/melpa/pull/8321) to add khoj.el to MELPA merged",
          "created_at": "2022-12-20T13:50:01Z"
        }
      ]
    },
    {
      "issue_number": 4,
      "title": "Add semantic search to Panchayat",
      "body": "See: https://gitlab.com/haletic/panchayat.\r\nSome indexing is being done on Google for public pages, but private pages are un-indexed.",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2021-11-27T13:17:57Z",
      "updated_at": "2022-12-03T14:55:14Z",
      "closed_at": "2022-12-03T14:54:02Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/4/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/4",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/4",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:06.166992",
      "comments": [
        {
          "author": "sabaimran",
          "body": "Got an initial version of search working for Panchayat, but found that the solution for supporting it is actually quite bespoke. Deserializing the Yaml file requires knowledge (and object implementation) of the underlying types, and extraction of entries requires parsing of the specific `Post` objec",
          "created_at": "2022-08-10T16:48:16Z"
        },
        {
          "author": "sabaimran",
          "body": "One open question around the plugin model is how dependency-management of plugins should be handled. For example, the plugin being used may need some package x, which is not included in khoj. This is fine if it is a standalone service, but these plugins wouldn't be. I'm imagining khoj would directly",
          "created_at": "2022-08-10T21:55:54Z"
        },
        {
          "author": "sabaimran",
          "body": "A bespoke solution in this branch -- https://github.com/debanjum/khoj/tree/saba/yaml-support",
          "created_at": "2022-08-27T14:45:53Z"
        },
        {
          "author": "sabaimran",
          "body": "Refer instead to branch https://github.com/debanjum/khoj/tree/panchayat",
          "created_at": "2022-09-15T17:40:34Z"
        },
        {
          "author": "debanjum",
          "body": "The initial version integrating Khoj into Panchayat is completed in [Panchayat MR #95](https://gitlab.com/haletic/panchayat/-/merge_requests/95) . The branch for this on Khoj will remain separate from main branch (for now)",
          "created_at": "2022-12-03T14:54:02Z"
        }
      ]
    },
    {
      "issue_number": 13,
      "title": "Add BaseModel for global config state",
      "body": "Add a config model to store the overall application state",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2021-12-07T01:17:32Z",
      "updated_at": "2022-12-03T14:51:02Z",
      "closed_at": "2022-12-03T14:51:01Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/13/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/13",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/13",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:06.340600",
      "comments": [
        {
          "author": "debanjum",
          "body": "Closing this issue as Content and Search configs already inherit from a base config class in `RawConfig.py`. And all text search models use a single config",
          "created_at": "2022-12-03T14:51:01Z"
        }
      ]
    },
    {
      "issue_number": 84,
      "title": "Support Multiple Input Filters",
      "body": "`input-filter` field in `khoj.yml` only accepts a single glob string currently. Allow passing a list of glob strings to `input-filter` for filtering\r\n\r\nCurrent:\r\n```yml\r\ncontent-type:\r\n  org: \r\n    input-filter: \"~/notes/*.org\"\r\n```\r\nExpected:\r\n```yml\r\ncontent-type:\r\n  org: \r\n    input-filter: \r\n      - \"~/notes/*.org\"\r\n      - \"~/documents/*.org\"\r\n```",
      "state": "closed",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2022-09-10T06:30:52Z",
      "updated_at": "2022-09-12T08:19:53Z",
      "closed_at": "2022-09-12T08:19:53Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/84/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/84",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/84",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:06.574388",
      "comments": []
    },
    {
      "issue_number": 87,
      "title": "Add Configuration Flag to Index Entries with Empty Body",
      "body": "- Currently entries with only headings and no body are not indexed\r\n- Once we do start to index entries with no body, a filter to exclude such entries would be preferable\r\n- This will increase the flexibility of `khoj` to work for more use-cases\r\n\r\nSee the discussion on #83 for more details",
      "state": "closed",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2022-09-10T14:17:52Z",
      "updated_at": "2022-09-11T14:01:26Z",
      "closed_at": "2022-09-11T13:46:12Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/87/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/87",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/87",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:06.574407",
      "comments": [
        {
          "author": "emacsomancer",
          "body": "This seems to work, but the ability to index these entries is highly desirable.",
          "created_at": "2022-09-10T16:50:24Z"
        },
        {
          "author": "debanjum",
          "body": "Updating issue to use a configuration flag to set via `khoj.yml` to allow indexing entries with empty bodies. This seems like a cleaner solution than using a query time filter which would require user input on every query and needlessly increase indexing load",
          "created_at": "2022-09-11T13:45:27Z"
        },
        {
          "author": "debanjum",
          "body": "@emacsomancer you should now be able to index entries with an empty body. You'll need to set `index_heading_entries` field to `true` in your `~/.khoj/khoj yml`. Sample screenshot shared below for reference. Let me know if it doesn't work for you\r\n<img width=\"227\" alt=\"Set index_heading_entries field",
          "created_at": "2022-09-11T14:01:12Z"
        }
      ]
    },
    {
      "issue_number": 23,
      "title": "Do not fail if user provides config for a search type but does not have data",
      "body": "Currently, the initialize_search method will end up failing if user has specified attributes in the config for a search type but does not have data present for it in the designated location. Do not fail when this happens. Rather, warn. ﻿\n",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2022-01-29T04:15:46Z",
      "updated_at": "2022-09-10T22:02:02Z",
      "closed_at": "2022-09-10T22:02:02Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/23/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/23",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/23",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:06.760436",
      "comments": [
        {
          "author": "debanjum",
          "body": "Do not remember the complete context for this issue. But if the input files/filter/directory has no data, we should fail with a clear, actionable error message IMO\r\n- The issue of failing with an unclear error message on empty file was fixed in 372dcd2dbc8871833cb11fc53ada033064cb673d\r\n- We already ",
          "created_at": "2022-09-10T22:02:02Z"
        }
      ]
    },
    {
      "issue_number": 36,
      "title": "Allow Incremental Embedding Updates",
      "body": null,
      "state": "closed",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2022-07-21T18:35:02Z",
      "updated_at": "2022-09-10T21:38:06Z",
      "closed_at": "2022-09-10T21:38:06Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/36/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "debanjum"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/36",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/36",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:08.564612",
      "comments": []
    },
    {
      "issue_number": 83,
      "title": "errors with org files containing certain types of structures",
      "body": "With a khoj.yml file containing:\r\n\r\n```\r\ncontent-type:\r\n  org:\r\n    compressed-jsonl: ~/.khoj/content/org/org.jsonl.gz\r\n    embeddings-file: ~/.khoj/content/org/org_embeddings.pt\r\n    input-files: null\r\n    input-filter: \"/home/slade/Documents/Org/*.org\"\r\nprocessor: {}\r\nsearch-type:\r\n  asymmetric:\r\n    cross-encoder: cross-encoder/ms-marco-MiniLM-L-6-v2\r\n    encoder: sentence-transformers/multi-qa-MiniLM-L6-cos-v1\r\n    model_directory: ~/.khoj/search/asymmetric/\r\n  image:\r\n    encoder: sentence-transformers/clip-ViT-B-32\r\n    model_directory: ~/.khoj/search/image/\r\n  symmetric:\r\n    cross-encoder: cross-encoder/ms-marco-MiniLM-L-6-v2\r\n    encoder: sentence-transformers/all-MiniLM-L6-v2\r\n    model_directory: ~/.khoj/search/symmetric/\r\n```\r\n\r\nrunning `khoj --regenerate` produces an error:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/slade/.local/bin/khoj\", line 8, in <module>\r\n    sys.exit(run())\r\n  File \"/home/slade/.local/lib/python3.10/site-packages/src/main.py\", line 108, in run\r\n    configure_server(args, required=False)\r\n  File \"/home/slade/.local/lib/python3.10/site-packages/src/configure.py\", line 36, in configure_server\r\n    state.model = configure_search(state.model, state.config, args.regenerate)\r\n  File \"/home/slade/.local/lib/python3.10/site-packages/src/configure.py\", line 46, in configure_search\r\n    model.orgmode_search = text_search.setup(\r\n  File \"/home/slade/.local/lib/python3.10/site-packages/src/search_type/text_search.py\", line 173, in setup\r\n    text_to_jsonl(config.input_files, config.input_filter, config.compressed_jsonl)\r\n  File \"/home/slade/.local/lib/python3.10/site-packages/src/processor/org_mode/org_to_jsonl.py\", line 32, in org_to_jsonl\r\n    entries, file_to_entries = extract_org_entries(org_files)\r\n  File \"/home/slade/.local/lib/python3.10/site-packages/src/processor/org_mode/org_to_jsonl.py\", line 72, in extract_org_entries\r\n    org_file_entries = orgnode.makelist(str(org_file))\r\n  File \"/home/slade/.local/lib/python3.10/site-packages/src/processor/org_mode/orgnode.py\", line 170, in makelist\r\n    thisNode = Orgnode(level, heading, bodytext, tags)\r\n  File \"/home/slade/.local/lib/python3.10/site-packages/src/processor/org_mode/orgnode.py\", line 217, in __init__\r\n    self.level = len(level)\r\nTypeError: object of type 'int' has no len()\r\n```\r\n",
      "state": "closed",
      "author": "emacsomancer",
      "author_type": "User",
      "created_at": "2022-09-09T15:57:42Z",
      "updated_at": "2022-09-10T19:03:27Z",
      "closed_at": "2022-09-10T12:42:08Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 21,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/83/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/83",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/83",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:08.564638",
      "comments": []
    },
    {
      "issue_number": 79,
      "title": "khoj-assistant errors on Arch Linux",
      "body": "On Arch Linux, if install khoj-assistant via pip and then run `khoj`, I get the following error:\r\n\r\n```\r\nRuntimeError: module compiled against API version 0x10 but this version of numpy is 0xf\r\nRuntimeError: module compiled against API version 0x10 but this version of numpy is 0xf\r\nRuntimeError: module compiled against API version 0x10 but this version of numpy is 0xf\r\nRuntimeError: module compiled against API version 0x10 but this version of numpy is 0xf\r\nRuntimeError: module compiled against API version 0x10 but this version of numpy is 0xf\r\nTraceback (most recent call last):\r\n  File \"/home/slade/.local/bin/khoj\", line 5, in <module>\r\n    from src.main import run\r\n  File \"/home/slade/.local/lib/python3.10/site-packages/src/main.py\", line 16, in <module>\r\n    from src.configure import configure_server\r\n  File \"/home/slade/.local/lib/python3.10/site-packages/src/configure.py\", line 12, in <module>\r\n    from src.search_type import image_search, text_search\r\n  File \"/home/slade/.local/lib/python3.10/site-packages/src/search_type/image_search.py\", line 11, in <module>\r\n    from sentence_transformers import SentenceTransformer, util\r\n  File \"/home/slade/.local/lib/python3.10/site-packages/sentence_transformers/__init__.py\", line 3, in <module>\r\n    from .datasets import SentencesDataset, ParallelSentencesDataset\r\n  File \"/home/slade/.local/lib/python3.10/site-packages/sentence_transformers/datasets/__init__.py\", line 3, in <module>\r\n    from .ParallelSentencesDataset import ParallelSentencesDataset\r\n  File \"/home/slade/.local/lib/python3.10/site-packages/sentence_transformers/datasets/ParallelSentencesDataset.py\", line 4, in <module>\r\n    from .. import SentenceTransformer\r\n  File \"/home/slade/.local/lib/python3.10/site-packages/sentence_transformers/SentenceTransformer.py\", line 25, in <module>\r\n    from .evaluation import SentenceEvaluator\r\n  File \"/home/slade/.local/lib/python3.10/site-packages/sentence_transformers/evaluation/__init__.py\", line 3, in <module>\r\n    from .BinaryClassificationEvaluator import BinaryClassificationEvaluator\r\n  File \"/home/slade/.local/lib/python3.10/site-packages/sentence_transformers/evaluation/BinaryClassificationEvaluator.py\", line 5, in <module>\r\n    from sklearn.metrics.pairwise import paired_cosine_distances, paired_euclidean_distances, paired_manhattan_distances\r\n  File \"/home/slade/.local/lib/python3.10/site-packages/sklearn/__init__.py\", line 82, in <module>\r\n    from .base import clone\r\n  File \"/home/slade/.local/lib/python3.10/site-packages/sklearn/base.py\", line 17, in <module>\r\n    from .utils import _IS_32BIT\r\n  File \"/home/slade/.local/lib/python3.10/site-packages/sklearn/utils/__init__.py\", line 22, in <module>\r\n    from scipy.sparse import issparse\r\n  File \"/usr/lib/python3.10/site-packages/scipy/sparse/__init__.py\", line 267, in <module>\r\n    from ._csr import *\r\n  File \"/usr/lib/python3.10/site-packages/scipy/sparse/_csr.py\", line 10, in <module>\r\n    from ._sparsetools import (csr_tocsc, csr_tobsr, csr_count_blocks,\r\nImportError: numpy.core.multiarray failed to import\r\n```\r\n\r\nIf I then force update `numpy` (via `pip install numpy --upgrade`, and create `~/.khoj` and `touch `~/.khoj/khoj.log`), then I get the error:\r\n\r\n```\r\n/home/slade/.local/lib/python3.10/site-packages/huggingface_hub/snapshot_download.py:6: FutureWarning: snapshot_download.py has been made private and will no longer be available from version 0.11. Please use `from huggingface_hub import snapshot_download` to import the only public function in this module. Other members of the file may be changed without a deprecation notice.\r\n  warnings.warn(\r\nTraceback (most recent call last):\r\n  File \"/home/slade/.local/bin/khoj\", line 8, in <module>\r\n    sys.exit(run())\r\n  File \"/home/slade/.local/lib/python3.10/site-packages/src/main.py\", line 93, in run\r\n    main_window = MainWindow(args.config_file)\r\n  File \"/home/slade/.local/lib/python3.10/site-packages/src/interface/desktop/main_window.py\", line 62, in __init__\r\n    self.search_settings_panels += [self.add_settings_panel(current_content_config, search_type)]\r\n  File \"/home/slade/.local/lib/python3.10/site-packages/src/interface/desktop/main_window.py\", line 95, in add_settings_panel\r\n    input_files = FileBrowser(file_input_text, search_type, current_content_files)\r\n  File \"/home/slade/.local/lib/python3.10/site-packages/src/interface/desktop/file_browser.py\", line 28, in __init__\r\n    self.setFiles(default_files)\r\n  File \"/home/slade/.local/lib/python3.10/site-packages/src/interface/desktop/file_browser.py\", line 62, in setFiles\r\n    self.filepaths = [path for path in paths if not is_none_or_empty(path)]\r\nTypeError: 'NoneType' object is not iterable\r\n```\r\n\r\nEdit: And if I try installing via conda, I end up with the same second error (the `huggingface` one); given other issues on other platforms (e.g. https://github.com/debanjum/khoj/issues/78 ) I suspect this is not an Arch-specific issue (or probably a Python 3.10 specific issue either).",
      "state": "closed",
      "author": "emacsomancer",
      "author_type": "User",
      "created_at": "2022-09-08T16:34:18Z",
      "updated_at": "2022-09-09T05:15:31Z",
      "closed_at": "2022-09-09T04:40:24Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/79/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "debanjum"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/79",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/79",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:08.564648",
      "comments": [
        {
          "author": "debanjum",
          "body": "Thanks for the bug report, @emacsomancer! \r\n\r\nPR #81 fixed the two (main?) issues below:\r\n1. You shouldn't need to manually create the app directory anymore\r\n2. The unexpected NoneType issues should be fixed\r\n\r\nFor the other two issues you mention:\r\n  - I don't see the huggingface issue in the logs ",
          "created_at": "2022-09-09T05:11:24Z"
        }
      ]
    },
    {
      "issue_number": 78,
      "title": "Error on startup",
      "body": "Was interested in trying this out after the Reddit post.  However after pip install khoj-assistant && khoj I get this error and khoj dies\r\n\r\n`❯ khoj\r\n/usr/local/lib/python3.9/site-packages/huggingface_hub/snapshot_download.py:6: FutureWarning: snapshot_download.py has been made private and will no longer be available from version 0.11. Please use `from huggingface_hub import snapshot_download` to import the only public function in this module. Other members of the file may be changed without a deprecation notice.\r\n  warnings.warn(\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/khoj\", line 8, in <module>\r\n    sys.exit(run())\r\n  File \"/usr/local/lib/python3.9/site-packages/src/main.py\", line 93, in run\r\n    main_window = MainWindow(args.config_file)\r\n  File \"/usr/local/lib/python3.9/site-packages/src/interface/desktop/main_window.py\", line 62, in __init__\r\n    self.search_settings_panels += [self.add_settings_panel(current_content_config, search_type)]\r\n  File \"/usr/local/lib/python3.9/site-packages/src/interface/desktop/main_window.py\", line 95, in add_settings_panel\r\n    input_files = FileBrowser(file_input_text, search_type, current_content_files)\r\n  File \"/usr/local/lib/python3.9/site-packages/src/interface/desktop/file_browser.py\", line 28, in __init__\r\n    self.setFiles(default_files)\r\n  File \"/usr/local/lib/python3.9/site-packages/src/interface/desktop/file_browser.py\", line 62, in setFiles\r\n    self.filepaths = [path for path in paths if not is_none_or_empty(path)]\r\nTypeError: 'NoneType' object is not iterable`\r\n\r\ncould be local python setup .  This is on MacOS Monterey",
      "state": "closed",
      "author": "AriT93",
      "author_type": "User",
      "created_at": "2022-09-08T16:29:59Z",
      "updated_at": "2022-09-09T05:15:04Z",
      "closed_at": "2022-09-09T04:40:23Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/78/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "debanjum"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/78",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/78",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:08.761028",
      "comments": [
        {
          "author": "debanjum",
          "body": "Thanks for the bug report @AriT93! The issue should be fixed in PR #81.\r\nYou can upgrade and run Khoj with `pip install --upgrade khoj-assistant && khoj`.\r\nLet me know if you still face any issues.",
          "created_at": "2022-09-09T04:56:05Z"
        }
      ]
    },
    {
      "issue_number": 80,
      "title": "Error installing on Manjaro",
      "body": "After using pip to install khoj, I get the following error when running khoj:\r\n\r\n```\r\n/home/alan/.local/lib/python3.10/site-packages/huggingface_hub/snapshot_download.py:6: FutureWarning: snapshot_download.py has been made private and will no longer be available from version 0.11. Please use `from huggingface_hub import snapshot_download` to import the only public function in this module. Other members of the file may be changed without a deprecation notice.\r\n  warnings.warn(\r\nTraceback (most recent call last):\r\n  File \"/home/alan/.local/bin/khoj\", line 8, in <module>\r\n    sys.exit(run())\r\n  File \"/home/alan/.local/lib/python3.10/site-packages/src/main.py\", line 80, in run\r\n    fh = logging.FileHandler(state.config_file.parent / 'khoj.log')\r\n  File \"/usr/lib/python3.10/logging/__init__.py\", line 1169, in __init__\r\n    StreamHandler.__init__(self, self._open())\r\n  File \"/usr/lib/python3.10/logging/__init__.py\", line 1201, in _open\r\n    return open_func(self.baseFilename, self.mode,\r\nFileNotFoundError: [Errno 2] No such file or directory: '/home/alan/.khoj/khoj.log'\r\n```\r\n\r\nIf I manually create the .khoj folder and an empty khoj.log file, I get this error:\r\n```\r\n/home/alan/.local/lib/python3.10/site-packages/huggingface_hub/snapshot_download.py:6: FutureWarning: snapshot_download.py has been made private and will no longer be available from version 0.11. Please use `from huggingface_hub import snapshot_download` to import the only public function in this module. Other members of the file may be changed without a deprecation notice.\r\n  warnings.warn(\r\nTraceback (most recent call last):\r\n  File \"/home/alan/.local/bin/khoj\", line 8, in <module>\r\n    sys.exit(run())\r\n  File \"/home/alan/.local/lib/python3.10/site-packages/src/main.py\", line 93, in run\r\n    main_window = MainWindow(args.config_file)\r\n  File \"/home/alan/.local/lib/python3.10/site-packages/src/interface/desktop/main_window.py\", line 62, in __init__\r\n    self.search_settings_panels += [self.add_settings_panel(current_content_config, search_type)]\r\n  File \"/home/alan/.local/lib/python3.10/site-packages/src/interface/desktop/main_window.py\", line 95, in add_settings_panel\r\n    input_files = FileBrowser(file_input_text, search_type, current_content_files)\r\n  File \"/home/alan/.local/lib/python3.10/site-packages/src/interface/desktop/file_browser.py\", line 28, in __init__\r\n    self.setFiles(default_files)\r\n  File \"/home/alan/.local/lib/python3.10/site-packages/src/interface/desktop/file_browser.py\", line 62, in setFiles\r\n    self.filepaths = [path for path in paths if not is_none_or_empty(path)]\r\nTypeError: 'NoneType' object is not iterable\r\n```",
      "state": "closed",
      "author": "arozbiz",
      "author_type": "User",
      "created_at": "2022-09-08T20:13:35Z",
      "updated_at": "2022-09-09T05:14:25Z",
      "closed_at": "2022-09-09T04:40:24Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/80/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "debanjum"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/80",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/80",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:09.075055",
      "comments": [
        {
          "author": "debanjum",
          "body": "Thanks for the bug report, @arozbiz! The issue you saw is the same as #78. It's been resolved in PR #81.\r\nYou can upgrade and run Khoj with `pip install --upgrade khoj-assistant && khoj`.\r\nLet me know if you still face any issues.",
          "created_at": "2022-09-09T05:14:02Z"
        }
      ]
    },
    {
      "issue_number": 76,
      "title": "\"ImportError: libGL.so.1\" when launched with docker-compose ",
      "body": "My environment is Ubuntu 22.04.1 LTS. I tried `docker-compose up -d` and `docker-compose logs` and the latter says:\r\n```\r\nAttaching to khoj_server_1\r\nserver_1  | Traceback (most recent call last):\r\nserver_1  |   File \"/usr/local/bin/khoj\", line 5, in <module>\r\nserver_1  |     from src.main import run\r\nserver_1  |   File \"/usr/local/lib/python3.10/site-packages/src/main.py\", line 12, in <module>\r\nserver_1  |     from PyQt6 import QtWidgets\r\nserver_1  | ImportError: libGL.so.1: cannot open shared object file: No such file or directory\r\n\r\n```\r\n\r\nhttp://0.0.0.0:8000/ is not accessible.",
      "state": "closed",
      "author": "whym",
      "author_type": "User",
      "created_at": "2022-09-08T03:31:40Z",
      "updated_at": "2022-09-08T07:55:07Z",
      "closed_at": "2022-09-08T07:55:07Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/76/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "debanjum"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/76",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/76",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:09.254044",
      "comments": [
        {
          "author": "debanjum",
          "body": "Thanks for the bug report! I was able to reproduce the issue.\r\n@whym let me know if you aren't still able to run Khoj using docker once the PR #77 is merged.",
          "created_at": "2022-09-08T07:52:23Z"
        }
      ]
    },
    {
      "issue_number": 24,
      "title": "Use better logging",
      "body": "Rather than using print statements, use a logging framework to log warnings/errors/information.﻿\n",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2022-01-29T04:16:25Z",
      "updated_at": "2022-09-04T13:57:22Z",
      "closed_at": "2022-09-04T13:57:22Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/24/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/24",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/24",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:09.476023",
      "comments": [
        {
          "author": "debanjum",
          "body": "Resolved in 094bd18",
          "created_at": "2022-09-04T13:57:22Z"
        }
      ]
    },
    {
      "issue_number": 68,
      "title": "Khoj Fails on Desktop App Startup with RuntimeError: Failed to import transformers.models.clip.processing_clip",
      "body": "**Reproduction**\r\n1. Install Khoj from debian file\r\n    `dpkg -i khoj_master_amd64.deb`\r\n2. Create `khoj.yml` with image search enabled and populated. Fork from `khoj_sample.yml`\r\n    ```bash\r\n    cp config/khoj_sample.yml ~/.khoj.yml\r\n    # now set `input-files` in `content-type > image` section of file. Delete rest of the `content-type` sections\r\n    ```\r\n3. Run Khoj\r\n    `/opt/Khoj -c=~/.khoj.yml --no-gui -vv`\r\n4. This should fail with below error\r\n    ```bash\r\n    RuntimeError: Failed to import transformers.models.clip.processing_clip because of the following error (look up to see its traceback):\r\n    [Errno 2] No such file or directory: '/tmp/_MEIDcQvKV/transformers/__init__.py'\r\n    ```\r\n\r\n**Mitigation**: Disable image search\r\nOr equivalently, remove the image_search subsection from the ~/.khoj.yml. Rest of the subsections can be added.\r\nApp should now start and work just fine",
      "state": "closed",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2022-08-16T20:09:10Z",
      "updated_at": "2022-08-19T17:37:11Z",
      "closed_at": "2022-08-19T17:37:11Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/68/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/68",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/68",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:09.687475",
      "comments": []
    },
    {
      "issue_number": 65,
      "title": "Create Desktop App for Windows",
      "body": null,
      "state": "closed",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2022-08-14T02:50:29Z",
      "updated_at": "2022-08-14T15:50:33Z",
      "closed_at": "2022-08-14T15:50:32Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/65/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": "Release Desktop App",
      "html_url": "https://github.com/khoj-ai/khoj/issues/65",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/65",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:09.687496",
      "comments": []
    },
    {
      "issue_number": 59,
      "title": "Create System Tray GUI for Desktop App",
      "body": null,
      "state": "closed",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2022-08-12T00:37:01Z",
      "updated_at": "2022-08-12T00:44:38Z",
      "closed_at": "2022-08-12T00:43:48Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/59/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "debanjum"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/59",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/59",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:09.687508",
      "comments": [
        {
          "author": "debanjum",
          "body": "Resolved in PR #55",
          "created_at": "2022-08-12T00:43:48Z"
        }
      ]
    },
    {
      "issue_number": 58,
      "title": "Create Config Page for Desktop App",
      "body": null,
      "state": "closed",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2022-08-12T00:36:57Z",
      "updated_at": "2022-08-12T00:44:12Z",
      "closed_at": "2022-08-12T00:43:02Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/58/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "debanjum"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/58",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/58",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:09.882466",
      "comments": [
        {
          "author": "debanjum",
          "body": "Resolved in PR #55 ",
          "created_at": "2022-08-12T00:43:02Z"
        }
      ]
    },
    {
      "issue_number": 53,
      "title": "Only Search on Enabled Content Types from Emacs Interface",
      "body": "- Currently Emacs Interface allows searching all supported content types, even if they've not actually been enabled by the user\n- This creates unnecessary options, confusion and visual clutter\n- As more content types are added this issue will become more annoying",
      "state": "closed",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2022-08-07T16:05:43Z",
      "updated_at": "2022-08-07T16:16:57Z",
      "closed_at": "2022-08-07T16:16:57Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/53/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/53",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/53",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:15.053341",
      "comments": []
    },
    {
      "issue_number": 12,
      "title": "Update Config BaseModels to reflect which fields are genuinely required",
      "body": "Update the base models to reflect which fields are required. For example, a processor conversation model should require open_api_key. This will require some refactoring of the logic of resolving defaults\n",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2021-12-07T01:06:24Z",
      "updated_at": "2022-08-05T17:50:24Z",
      "closed_at": "2022-08-05T17:40:57Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/12/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/12",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/12",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:15.053361",
      "comments": [
        {
          "author": "debanjum",
          "body": "Resolved in 1374065092d668e1419f34871204ceb66091f42e. Made possible since only use the YAML file for configuration after f78d6ae754c44d6bed67aa7ca68d95fe8c17b827",
          "created_at": "2022-08-05T17:40:57Z"
        }
      ]
    },
    {
      "issue_number": 8,
      "title": "Use Pydantic Validators to add more input validation for the Config base model",
      "body": "- Refer to the [Pydantic Validators](https://pydantic-docs.helpmanual.io/usage/validators/) documentation.",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2021-11-28T19:26:47Z",
      "updated_at": "2022-08-05T17:45:11Z",
      "closed_at": "2022-08-05T17:42:47Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/8/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/8",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/8",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:15.229380",
      "comments": [
        {
          "author": "sabaimran",
          "body": "After #7 is completed.",
          "created_at": "2021-11-28T19:44:54Z"
        },
        {
          "author": "debanjum",
          "body": "Resolved in 1374065092d668e1419f34871204ceb66091f42e. Throw validation error if neither `input_filter` nor `input_files` fields are set in `content_type.<text_search>`",
          "created_at": "2022-08-05T17:42:46Z"
        }
      ]
    },
    {
      "issue_number": 37,
      "title": "Support Incremental Search",
      "body": "Support incremental search for an instantaneous, search-as-you-type experiences in Khoj",
      "state": "closed",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2022-07-27T03:19:13Z",
      "updated_at": "2022-07-28T16:10:51Z",
      "closed_at": "2022-07-28T16:10:51Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/37/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "debanjum"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/37",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/37",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:15.403095",
      "comments": []
    },
    {
      "issue_number": 6,
      "title": "Create a service for all indexable files",
      "body": null,
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2021-11-27T13:38:38Z",
      "updated_at": "2022-07-22T09:41:08Z",
      "closed_at": "2022-07-22T09:41:07Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/6/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/6",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/6",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:15.403135",
      "comments": [
        {
          "author": "debanjum",
          "body": "Closing this issue, as issue is too generic and out of the current scope of the application. The application cannot scale to index all (indexable) files on the filesystem in it's current form. The query times will blow up.",
          "created_at": "2022-07-22T09:41:07Z"
        }
      ]
    },
    {
      "issue_number": 2,
      "title": "Support Markdown",
      "body": null,
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2021-11-27T13:16:05Z",
      "updated_at": "2022-07-22T09:30:42Z",
      "closed_at": "2022-07-22T09:30:42Z",
      "labels": [
        "upgrade",
        "coverage"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/2/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/2",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/2",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:15.565248",
      "comments": [
        {
          "author": "debanjum",
          "body": "Issue duplicated in #35. Work completed in https://github.com/debanjum/khoj/commit/d4d7dbaca60d10c9e8dcde0c290d83320f6cf7b7",
          "created_at": "2022-07-22T09:30:42Z"
        }
      ]
    },
    {
      "issue_number": 28,
      "title": "Docker Build out of memory error",
      "body": "During the step to build the conda environment, the machine is running out of available memory to build the image. Why is this happening? It's reproducible locally as well. Now we have builds failing, such as [shown here](https://github.com/debanjum/semantic-search/runs/7120942780?check_suite_focus=true).\r\n\r\nhttps://github.community/t/test-in-docker-container-fails-with-error-137-indicating-a-probable-memory-leak/136048/2",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2022-07-04T17:11:03Z",
      "updated_at": "2022-07-07T01:33:15Z",
      "closed_at": "2022-07-07T01:33:15Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/28/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/28",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/28",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:15.759048",
      "comments": [
        {
          "author": "sabaimran",
          "body": "For some reason, this error started after commit 85fbe1c42bfd96c12603e7e847dac99daffbff3c. Unclear why, as this didn't make any substantive changes to the Conda environment, and the build is now failing during environment creation. It hits an OOM error (code 137).",
          "created_at": "2022-07-04T18:04:48Z"
        }
      ]
    },
    {
      "issue_number": 26,
      "title": " forbidden path outside the build context",
      "body": "docker-compose up -d / docker-compose build --no-cache:l\r\n```\r\nSetting up libunicode-linebreak-perl (0.0.20190101-1+b3) ...\r\nProcessing triggers for libc-bin (2.31-13+deb11u2) ...\r\nRemoving intermediate container 8b84aaae34f7\r\n ---> dec05fd1d293\r\nStep 3/8 : ADD .. /app\r\n1 error occurred:\r\n        * Status: ADD failed: forbidden path outside the build context: .. (), Code: 1\r\n",
      "state": "closed",
      "author": "RidaAyed",
      "author_type": "User",
      "created_at": "2022-03-26T09:29:23Z",
      "updated_at": "2022-07-07T01:33:05Z",
      "closed_at": "2022-07-07T01:33:05Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/26/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/26",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/26",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:15.996028",
      "comments": [
        {
          "author": "debanjum",
          "body": "Could you share more details to allow reproducing the issue? Are you running the docker-compose command from project root? Which OS are you using?",
          "created_at": "2022-04-15T01:38:53Z"
        }
      ]
    },
    {
      "issue_number": 22,
      "title": "Config expects str for use_xmp_metadata, rather than bool",
      "body": null,
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2022-01-25T02:58:26Z",
      "updated_at": "2022-01-29T04:27:40Z",
      "closed_at": "2022-01-29T04:27:40Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/22/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/22",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/22",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:16.174056",
      "comments": []
    },
    {
      "issue_number": 20,
      "title": "Dockerize the application",
      "body": "This should make setup and deployment more straightforward.",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2022-01-23T19:03:00Z",
      "updated_at": "2022-01-29T04:27:40Z",
      "closed_at": "2022-01-29T04:27:40Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/20/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/20",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/20",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:16.174081",
      "comments": []
    },
    {
      "issue_number": 11,
      "title": "Fix failing cloud tests",
      "body": "The Github Actions pipeline is failing because the pipeline is not able to find the sbert `model_name` for CLIP\r\n\r\n![image](https://user-images.githubusercontent.com/6413477/144698802-c7c7fcfd-cbf8-45a5-bffd-4423832decb3.png)\r\n\r\n",
      "state": "closed",
      "author": "debanjum",
      "author_type": "User",
      "created_at": "2021-12-05T07:31:51Z",
      "updated_at": "2021-12-12T10:29:06Z",
      "closed_at": "2021-12-12T10:29:06Z",
      "labels": [
        "fix"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/11/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "sabaimran"
      ],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/11",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/11",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:16.174094",
      "comments": [
        {
          "author": "sabaimran",
          "body": "After fixing `model_name` issue, see this issue for dev setup using `exiftool`:\r\n`ERROR tests/test_image_search.py::test_image_search_setup - FileNotFoundError: [Errno 2] No such file or directory: 'exiftool'`\r\n\r\n```\r\nsrc/search_type/image_search.py:167: in setup\r\n    image_embeddings, image_metadat",
          "created_at": "2021-12-11T17:27:50Z"
        },
        {
          "author": "sabaimran",
          "body": "Now just seeing one issue:\r\n`FAILED tests/test_client.py::test_image_search - AssertionError: assert PosixPath('.../tests/data/kitten_park.jpg') == PosixPath('.../tests/data/guineapig_grass.jpg/)`\r\n\r\nNot sure what to do about this one 🥲 .",
          "created_at": "2021-12-11T19:21:05Z"
        },
        {
          "author": "debanjum",
          "body": "Skipping the flaky client test for image search for now to allow cloud build to pass",
          "created_at": "2021-12-12T10:29:06Z"
        }
      ]
    },
    {
      "issue_number": 7,
      "title": "Create a config UI",
      "body": "- Add a UI layer for manipulating the config",
      "state": "closed",
      "author": "sabaimran",
      "author_type": "User",
      "created_at": "2021-11-27T13:42:43Z",
      "updated_at": "2021-12-11T03:10:49Z",
      "closed_at": "2021-12-11T03:10:49Z",
      "labels": [
        "upgrade"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/khoj-ai/khoj/issues/7/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/khoj-ai/khoj/issues/7",
      "api_url": "https://api.github.com/repos/khoj-ai/khoj/issues/7",
      "repository": "khoj-ai/khoj",
      "extraction_date": "2025-06-21T23:25:16.373815",
      "comments": []
    }
  ]
}