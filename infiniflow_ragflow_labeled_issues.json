{
  "repository": "infiniflow/ragflow",
  "repository_info": {
    "repo": "infiniflow/ragflow",
    "stars": 57360,
    "language": "Python",
    "description": "RAGFlow is an open-source RAG (Retrieval-Augmented Generation) engine based on deep document understanding.",
    "url": "https://github.com/infiniflow/ragflow",
    "topics": [
      "agent",
      "agents",
      "ai",
      "ai-search",
      "chatbot",
      "chatgpt",
      "deep-learning",
      "deepseek",
      "deepseek-r1",
      "document-parser",
      "document-understanding",
      "graphrag",
      "llm",
      "nlp",
      "ollama",
      "pdf-to-text",
      "rag",
      "retrieval-augmented-generation",
      "table-structure-recognition",
      "text2sql"
    ],
    "created_at": "2023-12-12T06:13:13Z",
    "updated_at": "2025-06-22T02:15:46Z",
    "search_query": "RAG retrieval augmented language:python stars:>3",
    "total_issues_estimate": 106,
    "labeled_issues_estimate": 106,
    "labeling_rate": 100.0,
    "sample_labeled": 38,
    "sample_total": 38,
    "has_issues": true,
    "repo_id": 730534580,
    "default_branch": "main",
    "size": 78659
  },
  "extraction_date": "2025-06-21T22:46:44.215763",
  "extraction_type": "LABELED_ISSUES_ONLY",
  "total_labeled_issues": 416,
  "issues": [
    {
      "issue_number": 7797,
      "title": "[Question]: How to adjust the output description of picture parser?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nHere is a log of my picture parsing task:\n`2025-05-22 17:13:21,367 INFO     2570836 handle_task begin for task {\"id\": \"0039916a36ed11f0933b8dfa7b97ec01\", \"doc_id\": \"b442508c36e511f0933b8dfa7b97ec01\", \"from_page\": 0, \"to_page\": 100000000, \"retry_count\": 0, \"kb_id\": \"026bed2c2b1011f0b66a0242ac150006\", \"parser_id\": \"picture\", \"parser_config\": {\"pages\": [[1, 1000000]], \"field_map\": {\"2025_nian_du_sheng_ji_ji_guan_kao_lu_zhi_wei_jian_jie_biao_tks\": \"2025\\u5e74\\u5ea6\\u7701\\u7ea7\\u673a\\u5173\\u8003\\u5f55\\u804c\\u4f4d\\u7b80\\u4ecb\\u8868\", \"unnamed: 1_long\": \"Unnamed: 1\", \"unnamed: 2_tks\": \"Unnamed: 2\", \"unnamed: 3_long\": \"Unnamed: 3\", \"unnamed: 4_tks\": \"Unnamed: 4\", \"unnamed: 5_long\": \"Unnamed: 5\", \"unnamed: 6_tks\": \"Unnamed: 6\", \"unnamed: 7_tks\": \"Unnamed: 7\", \"unnamed: 8_tks\": \"Unnamed: 8\", \"unnamed: 9_long\": \"Unnamed: 9\", \"unnamed: 10_long\": \"Unnamed: 10\", \"unnamed: 11_tks\": \"Unnamed: 11\", \"unnamed: 12_tks\": \"Unnamed: 12\", \"unnamed: 13_tks\": \"Unnamed: 13\", \"li_shu_  _guan_xi_tks\": \"\\u96b6\\u5c5e  \\u5173\\u7cfb\", \"di_qu_  _dai_ma_long\": \"\\u5730\\u533a  \\u4ee3\\u7801\", \"di_qu_  _ming_cheng_tks\": \"\\u5730\\u533a  \\u540d\\u79f0\", \"dan_wei_dai_ma_long\": \"\\u5355\\u4f4d\\u4ee3\\u7801\", \"dan_wei_ming_cheng_tks\": \"\\u5355\\u4f4d\\u540d\\u79f0\", \"zhi_wei_dai_ma_long\": \"\\u804c\\u4f4d\\u4ee3\\u7801\", \"zhi_wei_ming_cheng_tks\": \"\\u804c\\u4f4d\\u540d\\u79f0\", \"zhi_wei_jian_jie_tks\": \"\\u804c\\u4f4d\\u7b80\\u4ecb\", \"kao_shi_lei_bie_tks\": \"\\u8003\\u8bd5\\u7c7b\\u522b\", \"kai_kao_bi_li_long\": \"\\u5f00\\u8003\\u6bd4\\u4f8b\", \"zhao_kao_ren_shu_long\": \"\\u62db\\u8003\\u4eba\\u6570\", \"xue_\\u3000_li_tks\": \"\\u5b66\\u3000\\u5386\", \"zhuan_\\u3000_ye_tks\": \"\\u4e13\\u3000\\u4e1a\", \"qi_\\u3000_ta_tks\": \"\\u5176\\u3000\\u5b83\"}}, \"name\": \"image.png\", \"type\": \"visual\", \"location\": \"image.png\", \"size\": 10596985, \"tenant_id\": \"b92086da2b0c11f0bfe90242ac150006\", \"language\": \"English\", \"embd_id\": \"BAAI/bge-large-zh-v1.5@BAAI\", \"pagerank\": 0, \"kb_parser_config\": {\"pages\": [[1, 1000000]], \"field_map\": {\"2025_nian_du_sheng_ji_ji_guan_kao_lu_zhi_wei_jian_jie_biao_tks\": \"2025\\u5e74\\u5ea6\\u7701\\u7ea7\\u673a\\u5173\\u8003\\u5f55\\u804c\\u4f4d\\u7b80\\u4ecb\\u8868\", \"unnamed: 1_long\": \"Unnamed: 1\", \"unnamed: 2_tks\": \"Unnamed: 2\", \"unnamed: 3_long\": \"Unnamed: 3\", \"unnamed: 4_tks\": \"Unnamed: 4\", \"unnamed: 5_long\": \"Unnamed: 5\", \"unnamed: 6_tks\": \"Unnamed: 6\", \"unnamed: 7_tks\": \"Unnamed: 7\", \"unnamed: 8_tks\": \"Unnamed: 8\", \"unnamed: 9_long\": \"Unnamed: 9\", \"unnamed: 10_long\": \"Unnamed: 10\", \"unnamed: 11_tks\": \"Unnamed: 11\", \"unnamed: 12_tks\": \"Unnamed: 12\", \"unnamed: 13_tks\": \"Unnamed: 13\", \"li_shu_  _guan_xi_tks\": \"\\u96b6\\u5c5e  \\u5173\\u7cfb\", \"di_qu_  _dai_ma_long\": \"\\u5730\\u533a  \\u4ee3\\u7801\", \"di_qu_  _ming_cheng_tks\": \"\\u5730\\u533a  \\u540d\\u79f0\", \"dan_wei_dai_ma_long\": \"\\u5355\\u4f4d\\u4ee3\\u7801\", \"dan_wei_ming_cheng_tks\": \"\\u5355\\u4f4d\\u540d\\u79f0\", \"zhi_wei_dai_ma_long\": \"\\u804c\\u4f4d\\u4ee3\\u7801\", \"zhi_wei_ming_cheng_tks\": \"\\u804c\\u4f4d\\u540d\\u79f0\", \"zhi_wei_jian_jie_tks\": \"\\u804c\\u4f4d\\u7b80\\u4ecb\", \"kao_shi_lei_bie_tks\": \"\\u8003\\u8bd5\\u7c7b\\u522b\", \"kai_kao_bi_li_long\": \"\\u5f00\\u8003\\u6bd4\\u4f8b\", \"zhao_kao_ren_shu_long\": \"\\u62db\\u8003\\u4eba\\u6570\", \"xue_\\u3000_li_tks\": \"\\u5b66\\u3000\\u5386\", \"zhuan_\\u3000_ye_tks\": \"\\u4e13\\u3000\\u4e1a\", \"qi_\\u3000_ta_tks\": \"\\u5176\\u3000\\u5b83\"}}, \"img2txt_id\": \"qwen-vl-plus@Tongyi-Qianwen\", \"asr_id\": \"\", \"llm_id\": \"qwen-max@Tongyi-Qianwen\", \"update_time\": 1747905199217, \"task_type\": \"\"}`\nI notice that there's a :\n\n> \"language\": \"English\"\n\nin the log.\n\nI wonder whether this will affect the language choice of vision LLMs if I need them to describe the picture? (Now the descriptions are written in english)\nHow can I set this option? \nAnd also, I want to modify the prompt of picture parser, where can I find the prompt, I see some in rag/prompts.py, but I'm not sure which one works.",
      "state": "open",
      "author": "YAETHeryk",
      "author_type": "User",
      "created_at": "2025-05-22T09:41:17Z",
      "updated_at": "2025-06-21T17:03:24Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7797/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7797",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7797",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:45.716349",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nTo adjust the output description of the picture parser in RAGFlow, here’s what you need to know:\n\n### 1. Language Setting and Vision LLM Output\n\nThe `\"language\"` field in your task log (e.g., `\"language\": \"English\"`) does affect how the picture parser chooses and interacts with visio",
          "created_at": "2025-05-22T09:45:47Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Please refer to **[this](https://github.com/infiniflow/ragflow/blob/main/rag/prompts.py#L462)**",
          "created_at": "2025-05-26T02:50:06Z"
        },
        {
          "author": "YAETHeryk",
          "body": "> Please refer to **[this](https://github.com/infiniflow/ragflow/blob/main/rag/prompts.py#L462)**\n\nThank you for your response, according to my tests, these prompts only work on pictures in pdf. For a picture file, `rag/app/picure.py` should use prompts [here](https://github.com/infiniflow/ragflow/b",
          "created_at": "2025-05-26T06:27:54Z"
        },
        {
          "author": "qiyuelim",
          "body": "`api/db/services/task_service.py#L73` get_task方法获取Knowledgebase的language，而根据`api/db/db_models.py#L590`语言取值是获取的环境变量`LANG`是否包含`zh_CN`。\n所以在构建镜像时在Dockerfile或者在`entrypoint.sh`里面加上环境变量就可以了，新增的知识库就会是中文的，旧的知识库可以自己在mysql里面改一下`ragflow.knowledge`这张表对应知识库的language字段。",
          "created_at": "2025-06-21T17:03:24Z"
        }
      ]
    },
    {
      "issue_number": 7230,
      "title": "[Question]: ragflow is still running on CPU even use the command \"docker compose -f docker-compose-gpu.yml up -d\"",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI have use the command \"docker compose -f docker-compose-gpu.yml up -d\" to start ragflow server and setup the knowledge base on the web successfully. But when I start the query in the chat and I monitor the CPU and GPU resource occupation and found only CPU and system memory was called out and GPU is idle. Why?",
      "state": "open",
      "author": "Bob123Yang",
      "author_type": "User",
      "created_at": "2025-04-23T04:15:18Z",
      "updated_at": "2025-06-21T15:08:50Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7230/reactions",
        "total_count": 3,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 1
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7230",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7230",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:45.966567",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nI found a similar open issue where users experienced RagFlow running on the CPU instead of the GPU when using the `docker-compose-gpu.yml` file. The document parsing in RagFlow is designed to use the CPU, as the maintainers recommend using GPUs only for embedding servers due to bette",
          "created_at": "2025-04-23T04:17:50Z"
        },
        {
          "author": "shawn-maxiao",
          "body": "我这也有类似问题，在 nvidia 4090多卡机器上启动 docker-compose-gpu.yml, deepdoc的模型没有使用GPU:\n\n2025-04-24 09:50:01,317 INFO 32 load_model /ragflow/rag/res/deepdoc/det.onnx reuses cached model\n2025-04-24 09:50:01,329 INFO 32 load_model /ragflow/rag/res/deepdoc/rec.onnx reuses cached model\n2025-04-24 09:50:01,595 INFO 32 ",
          "created_at": "2025-04-24T02:16:09Z"
        },
        {
          "author": "annian101",
          "body": "> 我这也有类似的问题，在nvidia 4090多卡机器上启动docker-compose-gpu.yml，deepdoc的模型没有使用GPU：\n> \n> 2025-04-24 09:50:01,317 INFO 32 load_model /ragflow/rag/res/deepdoc/det.onnx 重用缓存模型 2025-04-24 09:50:01,329 INFO 32 load_model /ragflow/rag/res/deepdoc/rec.onnx 重用缓存模型 2025-04-24 09:50:01,595 INFO 32 load_model /ragflow/ra",
          "created_at": "2025-06-19T01:32:01Z"
        },
        {
          "author": "yangtianyu92",
          "body": "它这个GPU镜像问题非常大，太挑机子了。应该用Pytorch官方镜像，那个才是最优解。不知道官方是怎么弄出来的。有点像我学长，靠自己能力硬搞搞通，但是从开始就不对，有更简单的方法。",
          "created_at": "2025-06-21T15:08:50Z"
        }
      ]
    },
    {
      "issue_number": 8406,
      "title": "[Question]: Will doc_aggs aggregation be skipped when aggs=True and chunks reach page_size?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nHi, I came across this part of the code in the `retrieval` method:\n\n```python\nfor i in idx:\n    if sim[i] < similarity_threshold:\n        break\n    if len(ranks[\"chunks\"]) >= page_size:\n        if aggs:\n            continue\n        break\n    id = sres.ids[i]\n    chunk = sres.field[id]\n    dnm = chunk.get(\"docnm_kwd\", \"\")\n    ...\n```\nWhen `aggs=True` and the number of collected chunks reaches `page_size`, the code executes `continue`, which skips the rest of the current loop iteration — including the logic for updating `doc_aggs`.\n\nSince this condition remains true for all following iterations, the loop continues without breaking, effectively entering a kind of infinite loop (though it will eventually terminate due to the fixed size of `idx`).\n\nThis leads me to the following questions:\n\nIs this intended behavior, where only the documents of the displayed chunks should be included in the `doc_aggs`?\n\nOr is this a potential oversight, where relevant documents beyond the current page are unintentionally excluded from aggregation?\n\nFrom the current implementation, it seems like document-level aggregation might be incomplete in some cases. However, I might have misunderstood the intended design.\n\nWould appreciate your insights on this — thanks so much!",
      "state": "open",
      "author": "lvv0",
      "author_type": "User",
      "created_at": "2025-06-21T10:00:30Z",
      "updated_at": "2025-06-21T10:02:41Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8406/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8406",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8406",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:46.158434",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @lvv0! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nYes, with the current implementation, when aggs=True and the number of collected chunks reaches page_size, the code skips updating doc_aggs for any further results—so doc_aggs will ",
          "created_at": "2025-06-21T10:02:40Z"
        }
      ]
    },
    {
      "issue_number": 8273,
      "title": "[Feature Request]: References / Citations missing when using RagFlow OpenAI endpoint",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\nEnvironment\nRagFlow server\tinfiniflow/ragflow:v0.19.0 (public “full” image)\nragflow-sdk\t0.19.0 (also tested main)\n\nProblem\nChat completions work, but citations never appear when using RagFlow OpenAI endpoint\n(raw text shows {{source:n}}, no blue ℹ️ hover).\n\nDirect HTTP curl to /api/v1/openai/chat/completions with\nwith_reference=true returns:\n\njson\nCopy\nEdit\n{\"code\":100,\"data\":null,\"message\":\"<NotFound '404: Not Found'>\"}\n→ the reference block is missing.\n\nInside Python, SDK v0.19.0 likewise gives ans.reference == []\nunless show_quote=True, and even then streaming calls drop\nreference.\n\nRoot cause (per #8269 discussion)\nBackend – the streaming handler in\nragflow/api/db/services/dialog_service.py never copies kbinfos\n(quote context) into the final chunk, so the REST payload the SDK\nparses lacks reference.\n\nSDK – older 0.19.0 wheel sets show_quote=False by default and\ndoesn’t copy backend reference into its own response object.\n```\n\n### Describe the feature you'd like\n\nCould the maintainers merge an official fix that always includes reference (a.k.a. kbinfos) in the final streaming chunk, and surfaces that field in the Python SDK response (both stream and non-stream)?\n\nAlternatively, document the correct env/flag combination for public images so OpenAI + Context API works out-of-the-box.\n\nThanks!\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "vanalexgr",
      "author_type": "User",
      "created_at": "2025-06-14T16:05:29Z",
      "updated_at": "2025-06-21T09:47:27Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8273/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8273",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8273",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:46.406384",
      "comments": [
        {
          "author": "ZhenhangTung",
          "body": "@yongtenglei for review",
          "created_at": "2025-06-16T06:52:22Z"
        },
        {
          "author": "kowyo",
          "body": "I am having the same issue.",
          "created_at": "2025-06-21T09:47:27Z"
        }
      ]
    },
    {
      "issue_number": 8369,
      "title": "[Bug]: HTTP API Converse with agent: references is empty",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n6ca1aef\n\n### RAGFlow image version\n\n infiniflow/ragflow:v0.19.0-slim\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nWhen calling the API /api/v1/agents/{agentId}/completions, the reference field in the response is empty, even though:\n\nThe Agent workflow is correctly configured:\n\nThe Start Component sets a knowledge base (kb) parameter.\n\nThe Knowledge Retrieval Component uses this kb variable.\n\nWhen running the same Agent via the RAGFlow UI, the response includes valid references (as expected).\n\n\n\n\n\n### Expected behavior\n\nThe API response should return non-empty reference values, consistent with the UI behavior.\n\n### Steps to reproduce\n\n```Markdown\n1. In the agent workflow, set the kb parameter in the start component， and use the knowledge base variable in the retrieval component.\n![Image](https://github.com/user-attachments/assets/91e69c13-7445-4559-84ef-79e116c86a5b)\n\n2. Run the Agent in the RAGFlow UI → Observe that reference is populated.\n\n3. Calling the interface /api/v1/agents/{agentId}/completions, the returned reference is empty.\n![Image](https://github.com/user-attachments/assets/9d558f41-b3a8-4c18-9386-cba67de0192d)\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "chengtm",
      "author_type": "User",
      "created_at": "2025-06-19T07:30:42Z",
      "updated_at": "2025-06-21T09:35:08Z",
      "closed_at": "2025-06-20T07:48:04Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8369/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8369",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8369",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:46.600390",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @chengtm! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThis issue is likely caused by a difference in how the API and UI propagate knowledge base and quote parameters through the agent workflow. The backend logic for constructing the",
          "created_at": "2025-06-19T07:39:42Z"
        },
        {
          "author": "KevinZhu333",
          "body": "When I first used the sdk, i was able to get the references for the responses. But just now, I also had an issue with the reference being empty when I called API in the ragflow_sdk on a session that I wanted to evaluate. I didn't know why, so I searched here but  as I was searching, my computer star",
          "created_at": "2025-06-19T08:32:50Z"
        },
        {
          "author": "chengtm",
          "body": "Can I see a screenshot of your workflow? Is the knowledge base variable configured in the start component?\n\n> When I first used the sdk, i was able to get the references for the responses. But just now, I also had an issue with the reference being empty when I called API in the ragflow_sdk on a sess",
          "created_at": "2025-06-19T08:39:49Z"
        },
        {
          "author": "KevinZhu333",
          "body": "My bad, I don't think we have the same issue. I thought you meant you had problem retrieving the reference when using ragflow_sdk. Like retrieving into VSCode or PyCharm or wtv IDE. What you meant was the canvas on the webpage. Sorry for the misunderstanding.",
          "created_at": "2025-06-19T09:49:01Z"
        },
        {
          "author": "chengtm",
          "body": "Solved! Change the parameter type in the START component from kb to line.",
          "created_at": "2025-06-20T07:48:04Z"
        }
      ]
    },
    {
      "issue_number": 8405,
      "title": "[Question]: Parse documents 接口 解析一个文件时，能指定切片方法吗",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [ ] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [ ] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\n![Image](https://github.com/user-attachments/assets/44d2fe87-4af1-4d90-9a6a-b22de82fa2c6)",
      "state": "open",
      "author": "xujiwei9898",
      "author_type": "User",
      "created_at": "2025-06-21T07:45:07Z",
      "updated_at": "2025-06-21T07:47:30Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8405/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8405",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8405",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:46.792922",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYou can't specify the slicing (chunking) method directly in the Parse documents API call itself. Instead, RAGFlow uses the chunking method (like `naive`, `manual`, `qa`, `general`, `paper`, `book`, `law`) and related parameters (`chunk_token_num`, `delimiter`, etc.) from the dataset ",
          "created_at": "2025-06-21T07:47:30Z"
        }
      ]
    },
    {
      "issue_number": 8404,
      "title": "[Question]: Create dataset  接口中，filename_embd_weight 参数没有体现",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [ ] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [ ] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\n![Image](https://github.com/user-attachments/assets/2fa4d226-1a03-4bf3-8e9b-4d2a70a498bb)\n\n![Image](https://github.com/user-attachments/assets/e5ce2c91-5da2-416a-a205-780394d29dc4)",
      "state": "open",
      "author": "xujiwei9898",
      "author_type": "User",
      "created_at": "2025-06-21T06:25:12Z",
      "updated_at": "2025-06-21T06:27:11Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8404/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8404",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8404",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:47.013212",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe filename_embd_weight parameter is supported, but it must be set explicitly inside the parser_config object when using the Create dataset API. If you omit it or set it to null/None, you will get a TypeError like float() argument must be a string or a real number, not 'NoneType' du",
          "created_at": "2025-06-21T06:27:11Z"
        }
      ]
    },
    {
      "issue_number": 8403,
      "title": "[Question]: load_model /ragflow/rag/res/deepdoc/det.onnx uses GPU，but  warning",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\n![Image](https://github.com/user-attachments/assets/f8575d39-f7e9-4bca-b0c9-4e4f2d0c5a31)",
      "state": "open",
      "author": "xujiwei9898",
      "author_type": "User",
      "created_at": "2025-06-21T05:52:09Z",
      "updated_at": "2025-06-21T05:54:25Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8403/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8403",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8403",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:47.214460",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe warning you’re seeing when loading /ragflow/rag/res/deepdoc/det.onnx with GPU is common in RAGFlow and ONNX Runtime. It usually means some operations in the model aren’t supported on GPU and are being run on CPU instead, which can impact performance but doesn’t necessarily indica",
          "created_at": "2025-06-21T05:54:25Z"
        }
      ]
    },
    {
      "issue_number": 8402,
      "title": "[Question]: 同一个用户在不同的终端登录，会被强制退出登录，怎么样能去掉这个限制",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [ ] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [ ] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\n同一个用在A电脑登录后，再在B电脑登录，这时A电脑的页面就是退出登录。",
      "state": "open",
      "author": "xujiwei9898",
      "author_type": "User",
      "created_at": "2025-06-21T03:28:14Z",
      "updated_at": "2025-06-21T03:32:14Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8402/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8402",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8402",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:47.439697",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @xujiwei9898! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nRAGFlow 目前确实只允许同一用户单一会话：每次新登录都会生成新的 access token，覆盖之前的 token，导致其他终端被强制下线。这是系统默认的安全策略，当前没有配置项可以直接关闭或调整这一限制（详见[相关讨论](https://github.com/infiniflow/ragflow/issues/8040)）。\n\n要实现多终",
          "created_at": "2025-06-21T03:32:14Z"
        }
      ]
    },
    {
      "issue_number": 3811,
      "title": "[Bug]: Use infinity access parse block error infinity.com mon. InfinityException: (< ErrorCode. CLIENT_CLOSE: 6003 >, 'unexpected exception)",
      "body": "### Is there an existing issue for the same bug?\n\n- [X] I have checked the existing issues.\n\n### RAGFlow workspace code commit ID\n\nv0.14.1\n\n### RAGFlow image version\n\nv0.14.1\n\n### Other environment information\n\n_No response_\n\n### Actual behavior\n\nUse infinity access parse block error infinity.com mon. InfinityException: (< ErrorCode. CLIENT_CLOSE: 6003 >, 'unexpected exception)\r\nMultiple accesses to the parse block occasionally display 10, but still report this error, and then quickly re-enter again, will report the 2008 error\r\n\r\n\r\n![image](https://github.com/user-attachments/assets/20135302-e5a0-4ebf-9a33-308e26f18fa4)\r\n![image](https://github.com/user-attachments/assets/2b0f05c3-ed6b-4a80-93db-9535d70d74fa)\r\n![image](https://github.com/user-attachments/assets/7f1f0909-5f3c-4bd1-b249-62499d7df0a5)\r\n\r\n```python\r\n2024-12-02 20:32:23,311 ERROR    1380570 unexpected exception\r\nTraceback (most recent call last):\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/infinity/remote_thrift/client.py\", line 111, in wrapper\r\n    ret = func(self, *args, **kwargs)\r\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/infinity/remote_thrift/client.py\", line 263, in select\r\n    return self.client.Select(SelectRequest(session_id=self.session_id,\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/infinity/remote_thrift/infinity_thrift_rpc/InfinityService.py\", line 621, in Select\r\n    return self.recv_Select()\r\n           ^^^^^^^^^^^^^^^^^^\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/infinity/remote_thrift/infinity_thrift_rpc/InfinityService.py\", line 633, in recv_Select\r\n    (fname, mtype, rseqid) = iprot.readMessageBegin()\r\n                             ^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/thrift/protocol/TBinaryProtocol.py\", line 134, in readMessageBegin\r\n    sz = self.readI32()\r\n         ^^^^^^^^^^^^^^\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/thrift/protocol/TBinaryProtocol.py\", line 217, in readI32\r\n    buff = self.trans.readAll(4)\r\n           ^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/thrift/transport/TTransport.py\", line 62, in readAll\r\n    chunk = self.read(sz - have)\r\n            ^^^^^^^^^^^^^^^^^^^^\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/thrift/transport/TTransport.py\", line 164, in read\r\n    self.__rbuf = BufferIO(self.__trans.read(max(sz, self.__rbuf_size)))\r\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/thrift/transport/TSocket.py\", line 169, in read\r\n    raise TTransportException(type=TTransportException.END_OF_FILE,\r\nthrift.transport.TTransport.TTransportException: TSocket read 0 bytes\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/thrift/transport/TSocket.py\", line 153, in read\r\n    buff = self.handle.recv(sz)\r\n           ^^^^^^^^^^^^^^^^^^^^\r\nConnectionResetError: [Errno 104] Connection reset by peer\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/flask/app.py\", line 880, in full_dispatch_request\r\n    rv = self.dispatch_request()\r\n         ^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/flask/app.py\", line 865, in dispatch_request\r\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/flask_login/utils.py\", line 290, in decorated_view\r\n    return current_app.ensure_sync(func)(*args, **kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/opt/PythonProjects/szzz-llm-rag/api/apps/chunk_app.py\", line 315, in knowledge_graph\r\n    sres = settings.retrievaler.search(req, search.index_name(tenant_id), kb_ids)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/opt/PythonProjects/szzz-llm-rag/rag/nlp/search.py\", line 88, in search\r\n    res = self.dataStore.search(src, [], filters, [], orderBy, offset, limit, idx_names, kb_ids)\r\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/opt/PythonProjects/szzz-llm-rag/rag/utils/infinity_conn.py\", line 295, in search\r\n    kb_res = builder.to_pl()\r\n             ^^^^^^^^^^^^^^^\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/infinity/remote_thrift/table.py\", line 414, in to_pl\r\n    return self.query_builder.to_pl()\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/infinity/remote_thrift/query_builder.py\", line 462, in to_pl\r\n    return pl.from_pandas(self.to_df())\r\n                          ^^^^^^^^^^^^\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/infinity/remote_thrift/query_builder.py\", line 455, in to_df\r\n    data_dict, data_type_dict = self.to_result()\r\n                                ^^^^^^^^^^^^^^^^\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/infinity/remote_thrift/query_builder.py\", line 451, in to_result\r\n    return self._table._execute_query(query)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/infinity/remote_thrift/table.py\", line 444, in _execute_query\r\n    res = self._conn.select(db_name=self._db_name,\r\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/infinity/remote_thrift/client.py\", line 116, in wrapper\r\n    self._reconnect()\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/infinity/remote_thrift/client.py\", line 99, in _reconnect\r\n    res = self.client.Connect(ConnectRequest(client_version=26))  # 0.5.0.dev5\r\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/infinity/remote_thrift/infinity_thrift_rpc/InfinityService.py\", line 333, in Connect\r\n    return self.recv_Connect()\r\n           ^^^^^^^^^^^^^^^^^^^\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/infinity/remote_thrift/infinity_thrift_rpc/InfinityService.py\", line 345, in recv_Connect\r\n    (fname, mtype, rseqid) = iprot.readMessageBegin()\r\n                             ^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/thrift/protocol/TBinaryProtocol.py\", line 134, in readMessageBegin\r\n    sz = self.readI32()\r\n         ^^^^^^^^^^^^^^\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/thrift/protocol/TBinaryProtocol.py\", line 217, in readI32\r\n    buff = self.trans.readAll(4)\r\n           ^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/thrift/transport/TTransport.py\", line 62, in readAll\r\n    chunk = self.read(sz - have)\r\n            ^^^^^^^^^^^^^^^^^^^^\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/thrift/transport/TTransport.py\", line 164, in read\r\n    self.__rbuf = BufferIO(self.__trans.read(max(sz, self.__rbuf_size)))\r\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/thrift/transport/TSocket.py\", line 167, in read\r\n    raise TTransportException(message=\"unexpected exception\", inner=e)\r\nthrift.transport.TTransport.TTransportException: unexpected exception\r\nException ignored in: <function RemoteThriftInfinityConnection.__del__ at 0x7fce1e810540>\r\nTraceback (most recent call last):\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/infinity/remote_thrift/infinity.py\", line 36, in __del__\r\n    self.disconnect()\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/infinity/remote_thrift/infinity.py\", line 138, in disconnect\r\n    raise InfinityException(res.error_code, res.error_msg)\r\ninfinity.common.InfinityException: (<ErrorCode.CLIENT_CLOSE: 6003>, 'unexpected exception')\r\n2024-12-02 20:32:23,333 INFO     1380570 127.0.0.1 - - [02/Dec/2024 20:32:23] \"GET /v1/chunk/knowledge_graph?doc_id=34720d52b09e11efb583d47c44d5570d HTTP/1.1\" 200 -\r\n2024-12-02 20:32:23,394 INFO     1380570 127.0.0.1 - - [02/Dec/2024 20:32:23] \"POST /v1/chunk/list HTTP/1.1\" 200 -\r\n```\r\n\r\n```python\r\n2024-12-02 20:33:01,778 - Thread-67 (process_request_thread) - DEBUG - Tried 0 times, session_id: 1, session_i: 2, exception: unexpected exception\r\n2024-12-02 20:33:01,781 ERROR    1380570 (2008, 'Infinity is initing')\r\nTraceback (most recent call last):\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/flask/app.py\", line 880, in full_dispatch_request\r\n    rv = self.dispatch_request()\r\n         ^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/flask/app.py\", line 865, in dispatch_request\r\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/flask_login/utils.py\", line 290, in decorated_view\r\n    return current_app.ensure_sync(func)(*args, **kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/opt/PythonProjects/szzz-llm-rag/api/apps/chunk_app.py\", line 315, in knowledge_graph\r\n    sres = settings.retrievaler.search(req, search.index_name(tenant_id), kb_ids)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/opt/PythonProjects/szzz-llm-rag/rag/nlp/search.py\", line 88, in search\r\n    res = self.dataStore.search(src, [], filters, [], orderBy, offset, limit, idx_names, kb_ids)\r\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/opt/PythonProjects/szzz-llm-rag/rag/utils/infinity_conn.py\", line 212, in search\r\n    db_instance = inf_conn.get_database(self.dbName)\r\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/infinity/remote_thrift/utils.py\", line 377, in wrapper\r\n    return func(*args, **kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/infinity/remote_thrift/infinity.py\", line 93, in get_database\r\n    raise InfinityException(res.error_code, res.error_msg)\r\ninfinity.common.InfinityException: (2008, 'Infinity is initing')\r\n2024-12-02 20:33:01,784 ERROR    1380570 (2008, 'Infinity is initing')\r\nTraceback (most recent call last):\r\n  File \"/opt/PythonProjects/szzz-llm-rag/api/apps/chunk_app.py\", line 60, in list_chunk\r\n    sres = settings.retrievaler.search(query, search.index_name(tenant_id), kb_ids, highlight=True)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/opt/PythonProjects/szzz-llm-rag/rag/nlp/search.py\", line 88, in search\r\n    res = self.dataStore.search(src, [], filters, [], orderBy, offset, limit, idx_names, kb_ids)\r\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/opt/PythonProjects/szzz-llm-rag/rag/utils/infinity_conn.py\", line 212, in search\r\n    db_instance = inf_conn.get_database(self.dbName)\r\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/infinity/remote_thrift/utils.py\", line 377, in wrapper\r\n    return func(*args, **kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/media/user/data_one/miniconda3/envs/szzz-llm-rag/lib/python3.11/site-packages/infinity/remote_thrift/infinity.py\", line 93, in get_database\r\n    raise InfinityException(res.error_code, res.error_msg)\r\ninfinity.common.InfinityException: (2008, 'Infinity is initing')\r\n2024-12-02 20:33:01,797 INFO     1380570 127.0.0.1 - - [02/Dec/2024 20:33:01] \"POST /v1/chunk/list HTTP/1.1\" 200 -\r\n2024-12-02 20:33:01,800 INFO     1380570 127.0.0.1 - - [02/Dec/2024 20:33:01] \"GET /v1/chunk/knowledge_graph?doc_id=34720d52b09e11efb583d47c44d5570d HTTP/1.1\" 200 -\r\n```\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nNone\n```\n\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "1006076811",
      "author_type": "User",
      "created_at": "2024-12-02T12:36:08Z",
      "updated_at": "2025-06-20T19:06:56Z",
      "closed_at": "2024-12-17T09:50:42Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 22,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/3811/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "yuzhichang"
      ],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/3811",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/3811",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:47.682580",
      "comments": []
    },
    {
      "issue_number": 8317,
      "title": "[Feature Request]: \"Clear chat history\" button",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\nI have a bunch of chat histories, and I cannot remove them unless delete them one by one or remove the assiatant.\n```\n\n### Describe the feature you'd like\n\nAdd a \"clear chat history\" button.\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "nkh0472",
      "author_type": "User",
      "created_at": "2025-06-17T06:29:59Z",
      "updated_at": "2025-06-20T11:48:13Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8317/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8317",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8317",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:47.682595",
      "comments": [
        {
          "author": "ZhenhangTung",
          "body": "@nkh0472 Hi, why do you want to clear them? Could you explain more? Do they distract LLM's response or just feel too much if not deleting them?",
          "created_at": "2025-06-18T05:50:48Z"
        },
        {
          "author": "nkh0472",
          "body": "> Hi, why do you want to clear them? Could you explain more? Do they distract LLM's response or just feel too much if not deleting them?\n\njust feel too much, I create hundreds of chat records. \narchive or temporary-chat is kind of alternative solution",
          "created_at": "2025-06-20T05:45:53Z"
        },
        {
          "author": "ZhenhangTung",
          "body": "> > Hi, why do you want to clear them? Could you explain more? Do they distract LLM's response or just feel too much if not deleting them?\n> \n> just feel too much, I create hundreds of chat records. archive or temporary-chat is kind of alternative solution\n\nGot it. Will consider it when we designing",
          "created_at": "2025-06-20T11:48:13Z"
        }
      ]
    },
    {
      "issue_number": 8355,
      "title": "[Bug]: can not use api to delete or update doc  but can use api to list docs info",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n6ca1aef\n\n### RAGFlow image version\n\n6ca1aef（v0.19.0）\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\n连接错误详情: ConnectionError\n错误消息: ('Connection aborted.', ConnectionResetError(10054, '远程主机强迫关闭了一个现有的连接。', None, 10054, None))\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nurl = f\"http://{address}/api/v1/datasets/{dataset_id}/documents\"\n\nresponse = requests.delete(\n        url,\n        headers=headers,\n        data=json.dumps(payload),  # 使用json参数自动序列化为JSON并设置Content-Type\n        timeout=300  # 设置超时时间\n    )\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "alien365",
      "author_type": "User",
      "created_at": "2025-06-18T11:59:55Z",
      "updated_at": "2025-06-20T11:34:09Z",
      "closed_at": "2025-06-20T11:34:09Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8355/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8355",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8355",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:47.836425",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @alien365! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThe ConnectionResetError you’re seeing when deleting or updating documents is likely caused by an uncaught exception or a network/proxy misconfiguration, rather than an applicat",
          "created_at": "2025-06-18T12:07:58Z"
        },
        {
          "author": "alien365",
          "body": "i changed the code,like this:\n\n```\n# 设置请求体数据\npayload` = {\"ids\": [\"4c8c26f44caf11f09d990242ac140006\"]}\ntry:\n    # 发送DELETE请求\n    response = requests.delete(\n        url,\n        headers=headers,\n        data=payload,  # 使用json参数自动序列化为JSON并设置Content-Type\n        timeout=300  # 设置超时时间\n    )\n```\nbut the",
          "created_at": "2025-06-19T02:21:38Z"
        },
        {
          "author": "xinzhuang",
          "body": "> i changed the code,like this:\n> \n> ```\n> # 设置请求体数据\n> payload` = {\"ids\": [\"4c8c26f44caf11f09d990242ac140006\"]}\n> try:\n>     # 发送DELETE请求\n>     response = requests.delete(\n>         url,\n>         headers=headers,\n>         data=payload,  # 使用json参数自动序列化为JSON并设置Content-Type\n>         timeout=300  # ",
          "created_at": "2025-06-20T09:26:17Z"
        },
        {
          "author": "alien365",
          "body": "@xinzhuang yes,that is my new question ,thanks very much \nby the way,the reason of this problem is my local environment  maybe firewall or encryption software\nin linux server delete api can works",
          "created_at": "2025-06-20T11:26:09Z"
        },
        {
          "author": "alien365",
          "body": "the reason of this problem is local environment maybe firewall or encryption software",
          "created_at": "2025-06-20T11:34:09Z"
        }
      ]
    },
    {
      "issue_number": 8396,
      "title": "[Question]: Why the Python API can not specify chunk size when creating a dataset",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nWhen using the Python API for development, I cannot specify chunk_token_num.\n\n![Image](https://github.com/user-attachments/assets/c0d5ccdc-3d82-4f6c-931e-29407043040f)\n\n![Image](https://github.com/user-attachments/assets/58f1015e-6760-42d5-b07e-8db90aafb137)",
      "state": "open",
      "author": "Jialiang123",
      "author_type": "User",
      "created_at": "2025-06-20T09:56:10Z",
      "updated_at": "2025-06-20T11:20:05Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question",
        "💞 feature"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8396/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8396",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8396",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:48.022898",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe reason you can't specify `chunk_token_num` (chunk size) when creating a dataset via the Python API is that the SDK doesn't expose this parameter directly. While the backend API does support `chunk_token_num` as part of the `parser_config` (for example, when using the `naive` chun",
          "created_at": "2025-06-20T09:58:33Z"
        },
        {
          "author": "Jialiang123",
          "body": "I specified \"chunk_token_num= 512\" in the code, created the dataset and uploaded the file. From the front-end page, I see that I succeeded in creating the dataset, but couldn't parse it by the time it was parsed, with the following error:\nTypeError(\"'NoneType' object cannot be interpreted as an inte",
          "created_at": "2025-06-20T11:12:47Z"
        }
      ]
    },
    {
      "issue_number": 8397,
      "title": "[Question]: The priority of the information used",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nWhen “RAGFlow” is running, the LLM used receives three blocks of information as a prompt:\n1. System prompt.\n2. User query.\n3. Chunks retrieved from the knowledge base.\n\nWhich of these parts has a higher priority or all these three parts have the same priority?",
      "state": "open",
      "author": "YustasDev",
      "author_type": "User",
      "created_at": "2025-06-20T10:15:08Z",
      "updated_at": "2025-06-20T10:17:54Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8397/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8397",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8397",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:48.280813",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nIn RAGFlow, the system prompt, user query, and retrieved knowledge base chunks are all included in the prompt sent to the LLM. There is no explicit dynamic weighting or prioritization in the code—priority is determined by their order: the system prompt (which often includes the knowl",
          "created_at": "2025-06-20T10:17:54Z"
        }
      ]
    },
    {
      "issue_number": 8352,
      "title": "[Question]: How to get the progress bar",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nWhen I use the Python API to upload files and parse files, I don't see the situation of uploading and parsing files. I can only go to the front end to check from time to time whether the uploaded files have been parsed, how can I add the progress bar to see the progress of the document parsing",
      "state": "open",
      "author": "Jialiang123",
      "author_type": "User",
      "created_at": "2025-06-18T08:10:35Z",
      "updated_at": "2025-06-20T09:51:15Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question",
        "💞 feature"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8352/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8352",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8352",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:48.513008",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nRAGFlow's Python API and backend don't provide real-time progress updates for file uploads or parsing. Instead, the frontend shows progress by polling the backend for status updates. To add a progress bar in your Python workflow, you can implement a polling loop that periodically que",
          "created_at": "2025-06-18T08:12:37Z"
        },
        {
          "author": "ZhenhangTung",
          "body": "@Jialiang123 Through API?",
          "created_at": "2025-06-20T02:10:57Z"
        },
        {
          "author": "xinzhuang",
          "body": "@Jialiang123 \nAs @dosubot mentioned, this is a proper way to implement it.\n \nAccording to the documentation, when you list documents in the dataset,there are some fields related to progress:\n```\nprogress: float The current processing progress as a percentage. Defaults to 0.0.\nprogress_msg: str A mes",
          "created_at": "2025-06-20T09:43:20Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYes, that's correct—the fields you listed (progress, progress_msg, process_begin_at, process_duration, run, status) are the ones you should use to track document parsing progress via the Python API. The standard approach is to poll the API for these fields and update your progress ba",
          "created_at": "2025-06-20T09:46:03Z"
        }
      ]
    },
    {
      "issue_number": 8343,
      "title": "[Question]: parsing in stuck when apply",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\n\nI deployed an embedding model locally and connected it to ragflow through OpenAI-API-Compatible, but the parsing stuck consistently, as shown in the figure\n\n![Image](https://github.com/user-attachments/assets/7bda9e25-9cea-494d-b0e5-dccae6dc4b40)\n\nand the logs:\n\n![Image](https://github.com/user-attachments/assets/4b2f53c9-0be4-4138-b71e-9bde0310418c)\n\nThe embedding service did not receive a request, and the only log was when it was added through OpenAI-API-Compatible;\n\n![Image](https://github.com/user-attachments/assets/1367ee09-e73c-4fd8-952b-4306d5dd36f0)",
      "state": "open",
      "author": "Jwpap",
      "author_type": "User",
      "created_at": "2025-06-18T06:12:17Z",
      "updated_at": "2025-06-20T09:27:39Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 11,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8343/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8343",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8343",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:48.727041",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @Jwpap! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nParsing getting stuck with a local OpenAI-API-Compatible embedding model is often due to configuration or registration issues. Here are the most likely causes and what you can chec",
          "created_at": "2025-06-18T06:15:08Z"
        },
        {
          "author": "Jwpap",
          "body": "![Image](https://github.com/user-attachments/assets/b52166a9-2670-472e-a789-b56cb845e60f) \nafter annotating the code marked in red, it can be parsed normally。 the entrypoint.sh is used for what?",
          "created_at": "2025-06-19T02:37:55Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe entrypoint.sh script is the main startup script for the RAGFlow Docker container—it configures and launches all the core services inside the container, like the web server, task executor, and (optionally) the MCP server. It also processes environment variables and command-line ar",
          "created_at": "2025-06-19T02:40:46Z"
        },
        {
          "author": "Jwpap",
          "body": "@dosu another question, I am currently using the official image. If I modify the local code and want to start the service with the local code, what should I do",
          "created_at": "2025-06-19T02:48:10Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYou have two main options:\n\n1. If you want to quickly test code changes, you can exec into the running container, modify the code (for example, with `docker exec -it ragflow-server bash` and editing files), then restart the container to apply the changes. This works for small tweaks ",
          "created_at": "2025-06-19T02:49:46Z"
        }
      ]
    },
    {
      "issue_number": 8350,
      "title": "[Question]: Error on startup of the ragflow-mysql container",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nWhen I did docker-compose --file docker-compose.yml up -d，container ragflow-mysql report an Error. I use docker logs -f ragflow-server to check the log, find the following error:\n\n2025-06-18 15:46:52+08:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 8.0.39-1.el9 started.\n2025-06-18 15:46:52+08:00 [Note] [Entrypoint]: Switching to dedicated user 'mysql'\n2025-06-18 15:46:52+08:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 8.0.39-1.el9 started.\n2025-06-18 15:46:52+08:00 [Warn] [Entrypoint]: MYSQL_PASSWORD specified, but missing MYSQL_USER; MYSQL_PASSWORD will be ignored\nls: cannot access '/docker-entrypoint-initdb.d/': Operation not permitted\n\nOS：\nNAME=\"CentOS Linux\"\nVERSION=\"7 (Core)\"\nID=\"centos\"\nID_LIKE=\"rhel fedora\"\nVERSION_ID=\"7\"\nPRETTY_NAME=\"CentOS Linux 7 (Core)\"\nANSI_COLOR=\"0;31\"\nCPE_NAME=\"cpe:/o:centos:centos:7\"\nHOME_URL=\"https://www.centos.org/\"\nBUG_REPORT_URL=\"https://bugs.centos.org/\"\n\nCENTOS_MANTISBT_PROJECT=\"CentOS-7\"\nCENTOS_MANTISBT_PROJECT_VERSION=\"7\"\nREDHAT_SUPPORT_PRODUCT=\"centos\"\nREDHAT_SUPPORT_PRODUCT_VERSION=\"7\"\n\nI pull images to docker,so I change something in docker-compose-base.yml and ./.env\n\ndocker-compose-base.yml \n1、 image: elasticsearch:8.17.6\n    pull_policy: never\n2、 image: mysql:8.0.39\n3、image: quay.io/minio/minio:RELEASE.2025-04-08T15-41-24Z\n4、image: valkey/valkey:8.0.3\n\n./.env\nRAGFLOW_IMAGE=infiniflow/ragflow:v0.19.0\n\n\nthen ",
      "state": "open",
      "author": "123hzx",
      "author_type": "User",
      "created_at": "2025-06-18T08:01:12Z",
      "updated_at": "2025-06-20T09:20:19Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8350/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8350",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8350",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:48.959022",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @123hzx! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nYour error is caused by two main issues:\n\n1. The warning `MYSQL_PASSWORD specified, but missing MYSQL_USER; MYSQL_PASSWORD will be ignored` means you need to add `MYSQL_USER=root`",
          "created_at": "2025-06-18T08:05:30Z"
        },
        {
          "author": "123hzx",
          "body": "I try to use your way, it still has same  error\n\nI download new file from the web on this morning, so I don't change the password.\n\n",
          "created_at": "2025-06-18T08:24:17Z"
        },
        {
          "author": "123hzx",
          "body": "I reboot the OS and restart docker, this error still has",
          "created_at": "2025-06-18T08:27:16Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Try mariaDB.",
          "created_at": "2025-06-20T03:32:46Z"
        },
        {
          "author": "123hzx",
          "body": "OK，now I try to change MYSQL_PASSWORD in ./.env to MYSQL_ROOT_PASSWORD,this error doen't have 2025-06-18 15:46:52+08:00 [Warn] [Entrypoint]: MYSQL_PASSWORD specified, but missing MYSQL_USER; MYSQL_PASSWORD will be ignored",
          "created_at": "2025-06-20T09:20:19Z"
        }
      ]
    },
    {
      "issue_number": 8394,
      "title": "[Question]: CPU does not support x86-64-v2",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nmysql 报错 Fatal glibc error: CPU does not support x86-64-v2\ndocker volume rm ragflow_mysql_data\n\n修改 \ndocker-compose-base.yml\n\nmysql:8.0.39-debian \nmysql:8.4.0-oraclelinux8\n\nminio 也会遇到问题\nRELEASE.2023-04-28T18-11-17Z\n\ndocker volume rm ragflow_minio_data",
      "state": "open",
      "author": "chenzhiweiok",
      "author_type": "User",
      "created_at": "2025-06-20T09:15:30Z",
      "updated_at": "2025-06-20T09:17:41Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8394/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8394",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8394",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:49.166800",
      "comments": []
    },
    {
      "issue_number": 8219,
      "title": "[Question]: How to get references with OpenAI-Compatible API?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nHow to get references with OpenAI-Compatible API `/api/v1/chats_openai/{chat_id}/chat/completions`? \n\nI see I could get them from `/api/v1/chats/{chat_id}/completions`:\n\n```jsonc\ndata:{\n    \"code\": 0,\n    \"message\": \"\",\n    \"data\": {\n        \"answer\": \"Hi! I'm your assistant, what can I do for you?\",\n        \"reference\": {},           // the reference\n        \"audio_binary\": null,\n        \"id\": null,\n        \"session_id\": \"b01eed84b85611efa0e90242ac120005\"\n    }\n}\ndata:{\n    \"code\": 0,\n    \"message\": \"\",\n    \"data\": true\n}\n\n```",
      "state": "closed",
      "author": "sharkAndshark",
      "author_type": "User",
      "created_at": "2025-06-12T07:45:06Z",
      "updated_at": "2025-06-20T09:00:59Z",
      "closed_at": "2025-06-17T07:13:49Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8219/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8219",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8219",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:49.166813",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @sharkAndshark! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nTo get references with the OpenAI-Compatible API (`/api/v1/chats_openai/{chat_id}/chat/completions`), you need to explicitly request them, as they are not included by defau",
          "created_at": "2025-06-12T07:47:50Z"
        },
        {
          "author": "chengtm",
          "body": "Is your problem solved? I encountered the same problem as yours. The interface I used is /api/v1/agents/{agent_id}/completions",
          "created_at": "2025-06-20T03:25:29Z"
        },
        {
          "author": "sharkAndshark",
          "body": "@chengtm Sadly no.  Update the source code in docker defintelly is a bad idea. I decided to switch to `/api/v1/chats/{chat_id}/completions`",
          "created_at": "2025-06-20T09:00:59Z"
        }
      ]
    },
    {
      "issue_number": 7835,
      "title": "[Question]: After upgrading to 0.19, when building the knowledge base, there has been no progress update for a long time after reaching \"create task raptor\".",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nAfter upgrading to 0.19, when building the knowledge base, there has been no progress update for a long time after reaching \"create task raptor\".\n\n![Image](https://github.com/user-attachments/assets/7238b277-b425-462a-aac9-951f3335984f)\n\n![Image](https://github.com/user-attachments/assets/67b75dd7-47c3-4f1c-a1d2-7e9fb822e670)",
      "state": "open",
      "author": "vickyyd",
      "author_type": "User",
      "created_at": "2025-05-25T04:17:28Z",
      "updated_at": "2025-06-20T08:44:50Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7835/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7835",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7835",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:49.379407",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nAfter reviewing the codebase and available documentation, here’s what I found regarding the lack of progress updates after \"create task raptor\" in version 0.19:\n\n- The \"create task raptor\" step involves creating a task with specific attributes and queuing it in Redis. If Redis is not",
          "created_at": "2025-05-25T04:22:28Z"
        },
        {
          "author": "vickyyd",
          "body": "We checked that Redis is running correctly. Compared to tasks that run correctly on 0.18, the \"Task has been received.\" message, which normally appears immediately after \"created task raptor\", is missing. It seems to be stuck at this step. @dosu-bot.",
          "created_at": "2025-05-25T04:32:14Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nBased on what I found, the missing \"Task has been received.\" message after \"created task raptor\" in version 0.19 suggests that the task is not being picked up or acknowledged by the task executor after being queued. In version 0.18, this message appeared immediately, indicating that ",
          "created_at": "2025-05-25T04:40:27Z"
        },
        {
          "author": "vickyyd",
          "body": "We have reproduced the issue. After upgrading to 0.19, if multiple documents are parsed simultaneously and the raptor enhancement strategy is enabled, all documents will be sent to raptor simultaneously after their embeddings are completed. In contrast, the strategy adopted by 0.18 was to send one d",
          "created_at": "2025-05-25T17:07:02Z"
        },
        {
          "author": "vickyyd",
          "body": "This led to past problem-solving methods becoming ineffective, such as https://github.com/infiniflow/ragflow/issues/7442 and https://github.com/infiniflow/ragflow/issues/5942. For example, if MAX_CONCURRENT_CHATS=2, then the actual number of CHATS is raptor number * MAX_CONCURRENT_CHATS = 2 * raptor",
          "created_at": "2025-05-25T17:23:51Z"
        }
      ]
    },
    {
      "issue_number": 8391,
      "title": "[Bug]: Document parse via API will alot problen",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n972fd91\n\n### RAGFlow image version\n\nv0.19.x-147-g99725444 slim\n\n### Other environment information\n\n```Markdown\nx\n```\n\n### Actual behavior\n\n1. When creating datasets, the filename_embd_weight field is required, but the API documentation does not mention it. You need to correct the description of the document or modify the code.\n2. In the case of chunk_method='naive', The parsing action will be performed three times, but the final report is failed. In fact, it succeeded the first time.\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\n1. In the case of chunk_method='naive', upload a txt document and call the [HTTP API](https://ragflow.io/docs/dev/http_api_reference#parse-documents) for document parsing. The parsing action will be performed three times, but the final report is failed. In fact, it succeeded the first time.\n2. Similarly, if you upload a document without calling the parsing API and manually parse it in the management backend, three attempts will fail.\n3. After three failed attempts, the parsing will return a successful status\n```\n\n### Additional information\n\n\n```Info\n2025-06-20 14:42:11,517 INFO     33 handle_task begin for task {\"id\": \"b0bfd6644da111f094f30242ac140006\", \"doc_id\": \"a8767ed64da111f0a5d00242ac140006\", \"from_page\": 100000000, \"to_page\": 100000000, \"retry_count\": 2, \"kb_id\": \"a74753284da111f08c1f0242ac140006\", \"parser_id\": \"naive\", \"parser_config\": {\"auto_keywords\": 5, \"auto_questions\": 3, \"chunk_token_num\": 128, \"delimiter\": \"\\n\", \"graphrag\": {\"use_graphrag\": true, \"entity_types\": [\"organization\", \"person\", \"geo\", \"event\", \"category\"], \"method\": \"light\", \"community\": true, \"resolution\": true}, \"html4excel\": false, \"layout_recognize\": \"Plain Text\", \"raptor\": {\"use_raptor\": false, \"prompt\": \"Please summarize the following paragraphs. Be careful with the numbers, do not make things up. Paragraphs as following:\\n      {cluster_content}\\nThe above is the content you need to summarize.\", \"max_token\": 256, \"threshold\": 0.1, \"max_cluster\": 64, \"random_seed\": 0}, \"tag_kb_ids\": [], \"topn_tags\": 1, \"filename_embd_weight\": 0.1, \"task_page_size\": 1, \"pages\": null}, \"name\": \"\\u6e05\\u70ed\\u836f_\\u6e05\\u70ed\\u6cfb\\u706b\\u836f_\\u4ee3\\u8868\\u836f\\u54c1_\\u6de1\\u7af9\\u53f6.txt\", \"type\": \"doc\", \"location\": \"\\u6e05\\u70ed\\u836f_\\u6e05\\u70ed\\u6cfb\\u706b\\u836f_\\u4ee3\\u8868\\u836f\\u54c1_\\u6de1\\u7af9\\u53f6.txt\", \"size\": 717, \"tenant_id\": \"4d488cc2316b11f0a6eb0242ac140006\", \"language\": \"English\", \"embd_id\": \"dengcao/Qwen3-Embedding-4B:Q5_K_M@Ollama\", \"pagerank\": 0, \"kb_parser_config\": {\"auto_keywords\": 5, \"auto_questions\": 3, \"chunk_token_num\": 128, \"delimiter\": \"\\n\", \"graphrag\": {\"use_graphrag\": true, \"entity_types\": [\"organization\", \"person\", \"geo\", \"event\", \"category\"], \"method\": \"light\", \"community\": true, \"resolution\": true}, \"html4excel\": false, \"layout_recognize\": \"Plain Text\", \"raptor\": {\"use_raptor\": false, \"prompt\": \"Please summarize the following paragraphs. Be careful with the numbers, do not make things up. Paragraphs as following:\\n      {cluster_content}\\nThe above is the content you need to summarize.\", \"max_token\": 256, \"threshold\": 0.1, \"max_cluster\": 64, \"random_seed\": 0}, \"tag_kb_ids\": [], \"topn_tags\": 1, \"filename_embd_weight\": 0.1, \"task_page_size\": 1, \"pages\": null}, \"img2txt_id\": \"gpt-4o-mini@OpenAI\", \"asr_id\": \"whisper-1@OpenAI\", \"llm_id\": \"gpt-4o-mini@OpenAI\", \"update_time\": 1750401730736, \"task_type\": \"graphrag\"}\n```\n\nNoneType ERROR:\n\n```\n2025-06-20 13:44:25,229 ERROR    33 handle_task got exception for task {\"id\": \"9b0b85e64d9911f082970242ac140006\", \"doc_id\": \"a2ea16024d9311f0bc320242ac140006\", \"from_page\": 0, \"to_page\": 100000000, \"retry_count\": 1, \"kb_id\": \"a1c432bc4d9311f08b0e0242ac140006\", \"parser_id\": \"naive\", \"parser_config\": {\"auto_keywords\": 5, \"auto_questions\": 3, \"chunk_token_num\": 1024, \"delimiter\": \"\\n\", \"graphrag\": {\"use_graphrag\": false, \"entity_types\": [\"organization\", \"person\", \"geo\", \"event\", \"category\"], \"method\": \"light\", \"community\": true, \"resolution\": true}, \"html4excel\": false, \"layout_recognize\": \"Naive\", \"raptor\": {\"use_raptor\": false, \"prompt\": \"Please summarize the following paragraphs. Be careful with the numbers, do not make things up. Paragraphs as following:\\n      {cluster_content}\\nThe above is the content you need to summarize.\", \"max_token\": 256, \"threshold\": 0.1, \"max_cluster\": 64, \"random_seed\": 0}, \"tag_kb_ids\": [], \"topn_tags\": 1, \"filename_embd_weight\": null, \"task_page_size\": 12, \"pages\": null}, \"name\": \"\\u6e05\\u70ed\\u836f.txt\", \"type\": \"doc\", \"location\": \"\\u6e05\\u70ed\\u836f.txt\", \"size\": 2256, \"tenant_id\": \"4d488cc2316b11f0a6eb0242ac140006\", \"language\": \"English\", \"embd_id\": \"dengcao/Qwen3-Embedding-4B:Q5_K_M@Ollama\", \"pagerank\": 0, \"kb_parser_config\": {\"layout_recognize\": \"Naive\", \"chunk_token_num\": 1024, \"delimiter\": \"\\n\", \"auto_keywords\": 5, \"auto_questions\": 3, \"html4excel\": false, \"tag_kb_ids\": [], \"raptor\": {\"use_raptor\": false}, \"graphrag\": {\"use_graphrag\": true, \"entity_types\": [\"organization\", \"person\", \"geo\", \"event\", \"category\"], \"method\": \"light\", \"resolution\": true, \"community\": true}}, \"img2txt_id\": \"gpt-4o-mini@OpenAI\", \"asr_id\": \"whisper-1@OpenAI\", \"llm_id\": \"gpt-4o-mini@OpenAI\", \"update_time\": 1750398261920, \"task_type\": \"\"}\nTraceback (most recent call last):\n  File \"/ragflow/rag/svr/task_executor.py\", line 670, in handle_task\n    await do_handle_task(task)\n  File \"/ragflow/rag/svr/task_executor.py\", line 597, in do_handle_task\n    token_count, vector_size = await embedding(chunks, embedding_model, task_parser_config, progress_callback)\n  File \"/ragflow/rag/svr/task_executor.py\", line 466, in embedding\n    title_w = float(parser_config.get(\"filename_embd_weight\", 0.1))\nTypeError: float() argument must be a string or a real number, not 'NoneType'\n```\n\nset_progress -1 ERROR:\n\n```ERR\n2025-06-20 14:42:22,209 ERROR    33 set_progress(b0bfd6644da111f094f30242ac140006), progress: -1, progress_msg: 14:42:22 Entities extraction of chunk 0 1/2 done, 12 nodes, 1 edges, 5607 tokens. [Canceled], got exception\nTraceback (most recent call last):\n  File \"/ragflow/rag/svr/task_executor.py\", line 181, in set_progress\n    raise TaskCanceledException(msg)\nTaskCanceledException: 14:42:22 Entities extraction of chunk 0 1/2 done, 12 nodes, 1 edges, 5607 tokens. [Canceled]\n```\n\n",
      "state": "open",
      "author": "yiguui",
      "author_type": "User",
      "created_at": "2025-06-20T07:45:06Z",
      "updated_at": "2025-06-20T08:19:18Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "📖 documentation"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8391/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8391",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8391",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:49.612537",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe NoneType error with filename_embd_weight happens because the API allows this field to be omitted or set to null, but the backend expects a float and fails if it gets None. To avoid this, always set filename_embd_weight to a valid float (like 0.1) in your parser_config when making",
          "created_at": "2025-06-20T07:48:29Z"
        },
        {
          "author": "yiguui",
          "body": "@dosubot \nThe embedded parsing error problem is very strange and uncontrollable, and needs to be solved by modifying the code. Because when we see that the data of slicing and parsing are normal, the progress is still defined as -1, and this result can already be indexed and searched.\n",
          "created_at": "2025-06-20T08:16:22Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYou're right—this is a code-level issue. The root cause is that if any exception or cancellation happens after the main data (chunks, index) is written but before the progress is updated to \"done\", the progress gets stuck at -1. This blocks all future parsing attempts, even though th",
          "created_at": "2025-06-20T08:19:18Z"
        }
      ]
    },
    {
      "issue_number": 8392,
      "title": "[Bug]: The tag content will overflow the container",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nef5e7d8c448a5c8a22efce0a8e98cd1502641571\n\n### RAGFlow image version\n\nv0.19.0\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nThe tag content will overflow the container\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nThe tag content will overflow the container\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "cike8899",
      "author_type": "User",
      "created_at": "2025-06-20T08:08:21Z",
      "updated_at": "2025-06-20T08:08:44Z",
      "closed_at": "2025-06-20T08:08:44Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8392/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8392",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8392",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:49.808686",
      "comments": []
    },
    {
      "issue_number": 8367,
      "title": "[Question]: Local thinking models and agents",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nHow can I disable the output of thoughts for local thinking models, for example, qwen3:32b for ollama?\nThe model's thoughts are contained between the <think> and </think> tags.",
      "state": "open",
      "author": "vab072",
      "author_type": "User",
      "created_at": "2025-06-19T07:03:39Z",
      "updated_at": "2025-06-20T08:01:37Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8367/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8367",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8367",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:49.808708",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThere isn’t a built-in config or environment variable in RAGFlow to disable the output of thoughts (the content between `<think>` and `</think>` tags) for local models like qwen3:32b in Ollama. The filtering is handled in the code itself, typically in the LLMBundle class via the `_re",
          "created_at": "2025-06-19T07:07:32Z"
        },
        {
          "author": "vab072",
          "body": "I see this as a useful feature. It should be possible to include or exclude the thought text for each agent block that uses LLM.",
          "created_at": "2025-06-19T07:27:26Z"
        },
        {
          "author": "vab072",
          "body": "@dosu, I see the ability to control reasoning in chat Assistant, but these settings do not affect to agents.",
          "created_at": "2025-06-19T08:04:00Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYou're right—currently, the reasoning control (like toggling thought output) available in chat Assistant does not apply to agents. There isn't a built-in per-agent or per-block setting to include or exclude thoughts for LLM agent blocks. The agent flow uses components like Generate, ",
          "created_at": "2025-06-19T08:08:53Z"
        },
        {
          "author": "laoxie001",
          "body": "@dosu, hi :).  i can not find the `</think>` label in local qwen3 model's outputs when i use the OpenAI-Compatible API(/api/v1/chats_openai/{chat_id}/chat/completions), but i can find it when i use this api(/api/v1/chats/{chat_id}/completions).\n`<think>` label can be found in both",
          "created_at": "2025-06-20T03:30:50Z"
        }
      ]
    },
    {
      "issue_number": 8384,
      "title": "[Question]: versoin 0.18.0 upgrade to version 0.19.0 ,Do documents that have already been sliced in the knowledge base need to be re sliced ？",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nversoin 0.18.0 upgrade to 0.19.0 ,Do documents that have already been sliced in the knowledge base need to be re sliced ？",
      "state": "closed",
      "author": "arnoCao",
      "author_type": "User",
      "created_at": "2025-06-20T02:29:09Z",
      "updated_at": "2025-06-20T07:52:37Z",
      "closed_at": "2025-06-20T07:52:37Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8384/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8384",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8384",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:50.010397",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nBased on the available information, there are no explicit changes in the document slicing logic between version 0.18.0 and 0.19.0 that require you to re-slice documents already in your knowledge base. However, there was a known issue in 0.19.0 where the delimiter setting for DOCX, PD",
          "created_at": "2025-06-20T02:31:34Z"
        },
        {
          "author": "KevinHuSh",
          "body": "The files need not to be parsed again.",
          "created_at": "2025-06-20T02:43:05Z"
        },
        {
          "author": "arnoCao",
          "body": "tks",
          "created_at": "2025-06-20T07:52:37Z"
        }
      ]
    },
    {
      "issue_number": 8353,
      "title": "[Question]: what knowledge graph database is ragflow using?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nWhat kowledge graph database is ragflow using? Are we able to see which chunk the entity was extracted from?",
      "state": "open",
      "author": "eluyutao",
      "author_type": "User",
      "created_at": "2025-06-18T08:41:08Z",
      "updated_at": "2025-06-20T06:58:31Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 18,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8353/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8353",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8353",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:50.276688",
      "comments": [
        {
          "author": "eluyutao",
          "body": "@dosu",
          "created_at": "2025-06-18T08:43:36Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nRAGFlow doesn't use a traditional graph database like Neo4j. Instead, it stores knowledge graph data in document stores such as Elasticsearch, OpenSearch, or Infinity, depending on your setup. The graph structure itself is managed in memory using NetworkX, and then serialized and sto",
          "created_at": "2025-06-18T08:46:06Z"
        },
        {
          "author": "eluyutao",
          "body": "In our pipeline, we managed to chunk documents beforehand, and then we use the Python API to upload an empty document and then add chunks to the documents. By doing this, I think the knowledge graph is not constructed even thought I've set knowledge graph settings in knowledge base configuration. Ho",
          "created_at": "2025-06-18T10:01:42Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nKnowledge graph construction in RAGFlow is only triggered by the document parsing pipeline—not by uploading chunks directly, even if your knowledge base config enables the knowledge graph. To build the knowledge graph, you need to either upload documents with parsing enabled or expli",
          "created_at": "2025-06-18T10:04:41Z"
        },
        {
          "author": "eluyutao",
          "body": "Okay. I tried the following process:\n1. I created a knowledge base from UI, with Document parse = Naive, Chunk method = One (because I've chunked the documents myself), and enabled knowledge graph.\n2. add an empty document --> This worked\n3. add multiple chunks to that document --> This worked. And ",
          "created_at": "2025-06-18T10:29:35Z"
        }
      ]
    },
    {
      "issue_number": 8388,
      "title": "[Question]: Consumers stop executing their consumption halfway through",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\n![Image](https://github.com/user-attachments/assets/2f1a08c4-090f-44c7-b742-99ca0fb8554a)The consumer stopped executing halfway through the consumption process, and there were no errors found in the corresponding log for the consumer, but it just stopped executing\n\n![Image](https://github.com/user-attachments/assets/209d6c39-9ed4-456b-9dd0-25317cf01409)",
      "state": "open",
      "author": "shentingming",
      "author_type": "User",
      "created_at": "2025-06-20T06:16:35Z",
      "updated_at": "2025-06-20T06:38:56Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8388/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8388",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8388",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:50.483540",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThere are a few common reasons why a consumer in RAGFlow might stop processing halfway with no errors in the logs. The most likely causes are issues with Redis connectivity or configuration, resource exhaustion (like running out of available containers or memory), or a rare deadlock ",
          "created_at": "2025-06-20T06:19:13Z"
        },
        {
          "author": "shentingming",
          "body": "No errors were reported in the logs, and there were no errors in the consumer logs, so the service inexplicably stopped\n\n![Image](https://github.com/user-attachments/assets/7ee9f6c6-0d31-48f9-afbb-4654121260c7)",
          "created_at": "2025-06-20T06:38:56Z"
        }
      ]
    },
    {
      "issue_number": 8297,
      "title": "[Question]: Setup Ollama with \"KeyError('base_url')\" error",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nHello,\n\nI launched Ragflow nightly version by docker in M2 ultra machine. The \"KeyError('base_url')\" error  reported when I tried add LLM with Ollam.\n\n![Image](https://github.com/user-attachments/assets/e9bf1ede-4e8d-4d72-9bef-4aa61890d390)\n\n\nThe Ollama is accessible, please refer to following screenshot.\n![Image](https://github.com/user-attachments/assets/e88c35c8-fe84-4bf2-88ca-4027ffa702fd)\n\nCould you please provide the solution? Thanks.",
      "state": "closed",
      "author": "mobguang",
      "author_type": "User",
      "created_at": "2025-06-16T08:17:07Z",
      "updated_at": "2025-06-20T04:31:01Z",
      "closed_at": "2025-06-20T04:31:01Z",
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 8,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8297/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8297",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8297",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:50.654635",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe \"KeyError('base_url')\" happens when the Ollama LLM config in Ragflow is missing the required base_url field. Even if you fill in the base URL in the UI, this error can occur if the API-Key field is left blank due to a known bug. The quick fix is to enter any value (even a random ",
          "created_at": "2025-06-16T08:19:33Z"
        },
        {
          "author": "mobguang",
          "body": "@dosu,\n\nI entered the random string in API-Key input field, but it not work. The console output as following:\n\n2025-06-16 16:29:30,667 INFO     32 172.18.0.6 - - [16/Jun/2025 16:29:30] \"GET /v1/user/info HTTP/1.1\" 200 -\n2025-06-16 16:29:30,671 INFO     32 172.18.0.6 - - [16/Jun/2025 16:29:30] \"GET /",
          "created_at": "2025-06-16T08:31:25Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe persistent KeyError('base_url') is due to a mismatch between the config keys: Ragflow expects api_base everywhere in the backend and UI, but the error occurs if base_url is missing or not mapped to api_base internally. This is a known schema inconsistency—there’s no fallback or a",
          "created_at": "2025-06-16T08:39:43Z"
        },
        {
          "author": "vab072",
          "body": "I confirm exactly the same problem, the suggested workaround does not help. The error persists. The latest nightly release v0.19.x-161-gf7074037 full and ollama:0.9.0\n",
          "created_at": "2025-06-16T15:22:29Z"
        },
        {
          "author": "Promethean-Pty-Ltd",
          "body": "I did a reinstall. That fixed this issue.",
          "created_at": "2025-06-17T00:25:26Z"
        }
      ]
    },
    {
      "issue_number": 5711,
      "title": "[Question]: How to improve document parsing speed through GPU",
      "body": "### Describe your problem\n\nI know there is a memory leak issue with onnxruntime. Is there any other way to improve document parsing speed through GPU? Deepdoc consumes too much CPU resources, and I can already parse one file with 128 cores at almost 100%",
      "state": "open",
      "author": "said-what-sakula",
      "author_type": "User",
      "created_at": "2025-03-06T08:22:53Z",
      "updated_at": "2025-06-20T04:29:55Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 12,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/5711/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/5711",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/5711",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:50.887014",
      "comments": [
        {
          "author": "charmmy-workstation",
          "body": "You can refer to the similar question that has been Close.\n[4460](https://github.com/infiniflow/ragflow/issues/4460)",
          "created_at": "2025-03-06T08:42:15Z"
        },
        {
          "author": "said-what-sakula",
          "body": "> You can refer to the similar question that has been Close.您可以参考已关闭的类似问题。 [4460](https://github.com/infiniflow/ragflow/issues/4460)\n\nI have set the WS to 32, but the key issue is that the CPU usage in the OCR step is too high and the required time is too long",
          "created_at": "2025-03-06T08:46:31Z"
        },
        {
          "author": "said-what-sakula",
          "body": "> > You can refer to the similar question that has been Close.您可以参考已关闭的类似问题。 [4460](https://github.com/infiniflow/ragflow/issues/4460)\n> \n> I have set the WS to 32, but the key issue is that the CPU usage in the OCR step is too high and the required time is too long\n\n![Image](https://github.com/user",
          "created_at": "2025-03-06T08:49:11Z"
        },
        {
          "author": "KevinHuSh",
          "body": "What about starting multiple task executors?",
          "created_at": "2025-03-07T04:31:37Z"
        },
        {
          "author": "said-what-sakula",
          "body": "> What about starting multiple task executors?关于启动多个任务执行器怎么样？\n\n![Image](https://github.com/user-attachments/assets/b8bcae6b-e532-46f1-9ea9-329f7f141aeb)我调整了WS到32，问题是当docker-compose-gpu.yml启动执行deepdoc就会oom",
          "created_at": "2025-03-07T05:41:04Z"
        }
      ]
    },
    {
      "issue_number": 8332,
      "title": "[Bug]: Reversed text order in captions",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n0.19\n\n### RAGFlow image version\n\n0.19\n\n### Other environment information\n\n```Markdown\nLinux, Docker\n\nUsed DeepDoc\n```\n\n### Actual behavior\n\nThe chunks based on captions in Paper parsing mode have the reversed line order.\nThe order is reversed line-wise. The first words in the chunk are the ones from the last line in the caption, and so on.\nThe line content is not reversed. \n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nRun the parsing in paper mode\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "090Gamer",
      "author_type": "User",
      "created_at": "2025-06-17T16:10:48Z",
      "updated_at": "2025-06-20T04:24:07Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8332/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "yongtenglei"
      ],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8332",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8332",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:51.109195",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "Do you have sample file or screenshots?",
          "created_at": "2025-06-18T02:27:59Z"
        },
        {
          "author": "090Gamer",
          "body": "Here you go @KevinHuSh \n\nOriginal file:\n<img width=\"309\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/38386f05-5aab-4d7d-a047-5c419510e054\" />\nParsed:\n<img width=\"416\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/171401ae-b17c-4e7f-b534-e59019eb0b6e\" />\nSettings:\n<img w",
          "created_at": "2025-06-18T12:23:16Z"
        },
        {
          "author": "090Gamer",
          "body": "And a sample file:\nhttps://arxiv.org/abs/2409.04163\n\n[2409.04163v1.pdf](https://github.com/user-attachments/files/20798983/2409.04163v1.pdf)",
          "created_at": "2025-06-18T14:50:24Z"
        }
      ]
    },
    {
      "issue_number": 8387,
      "title": "[Question]: How can I get the same correct results in the API as in the console?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\n![Image](https://github.com/user-attachments/assets/463c84e8-2189-483c-8134-d155fcdd401c)",
      "state": "open",
      "author": "GanziPo",
      "author_type": "User",
      "created_at": "2025-06-20T03:52:54Z",
      "updated_at": "2025-06-20T03:57:19Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8387/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8387",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8387",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:51.295124",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nDiscrepancies between API and console results in RAGFlow are often caused by differences in configuration, parameter defaults, or version mismatches. Both the API and console ultimately use the same backend logic, so you should check that you are using the same parameters (like simil",
          "created_at": "2025-06-20T03:57:19Z"
        }
      ]
    },
    {
      "issue_number": 8337,
      "title": "[Question]: The added model name does not match the name saved in the database",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI couldn't specify a custom embedding model when I called the Python API to create the dataset until I noticed that the model name added by the front-end page didn't match the name actually stored in the MySQL tenant table, change the model name to match the model name in the database\n\n![Image](https://github.com/user-attachments/assets/fbe37662-d3c1-47bf-8d23-9fd53ac49ede)\n\n![Image](https://github.com/user-attachments/assets/9d24c5db-2f32-4ae0-b5b1-26b093e21592)",
      "state": "open",
      "author": "Jialiang123",
      "author_type": "User",
      "created_at": "2025-06-18T02:46:44Z",
      "updated_at": "2025-06-20T03:56:45Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8337/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8337",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8337",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:51.490874",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe model name mismatch happens because RAGFlow expects the embedding model identifier (embd_id) to use the format `<model_name>@<provider>` (for example, `bge-m3@VLLM` or `Qwen3-Embedding-4B@Qwen`). The front-end displays a user-friendly label, but the value saved to the database an",
          "created_at": "2025-06-18T02:49:38Z"
        },
        {
          "author": "KevinHuSh",
          "body": "What front-end shows is not the same as in the database, data from which will be processed.",
          "created_at": "2025-06-20T03:56:26Z"
        }
      ]
    },
    {
      "issue_number": 8373,
      "title": "[Question]: getting error when parsing document in knowledge base with tag enabled",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI'm getting below error when parsing a document in a knowledge base that's linked to a tag knowledge base.\n```bash\nProgress:\n16:48:52 Task has been received.\n16:48:52 Page(1~100000001): Start to parse.\n16:48:52 Page(1~100000001): Finish parsing.\n16:48:52 Page(1~100000001): Start to tag for every chunk ...\n16:48:52 [ERROR][Exception]: BadRequestError(400, 'search_phase_execution_exception', 'Fielddata is disabled on [tag_kwd] in [ragflow_b42a36561ff111f0b485621449caa4ba]. Text fields are not optimised for operations that require per-document field data like aggregations and sorting, so these operations are disabled by default. Please use a keyword field instead. Alternatively, set fielddata=true on [tag_kwd] in order to load field data by uninverting the inverted index. Note that this can use significant memory.')\n```\nwhat could've gone wrong?",
      "state": "open",
      "author": "eluyutao",
      "author_type": "User",
      "created_at": "2025-06-19T09:46:41Z",
      "updated_at": "2025-06-20T03:51:54Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8373/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8373",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8373",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:51.721992",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThis error happens because the `tag_kwd` field in your Elasticsearch index is mapped as a `text` field, but RAGFlow expects it to be a `keyword` field for tagging operations. This usually affects indices created before the current mapping templates were introduced, and Elasticsearch ",
          "created_at": "2025-06-19T09:52:37Z"
        },
        {
          "author": "KevinHuSh",
          "body": "I guess this index in ES had not been created by the provided `mapping.json`.",
          "created_at": "2025-06-20T03:01:02Z"
        },
        {
          "author": "eluyutao",
          "body": "> I guess this index in ES had not been created by the provided `mapping.json`.\n\nI found this block that's related in `mapping.json`:\n```json\n        \"kwd\": {\n          \"match_pattern\": \"regex\",\n          \"match\": \"^(.*_(kwd|id|ids|uid|uids)|uid)$\",\n          \"mapping\": {\n            \"type\": \"keywor",
          "created_at": "2025-06-20T03:51:54Z"
        }
      ]
    },
    {
      "issue_number": 8342,
      "title": "RAGflow Fails to Connect to Redis, Causing Indefinite File Processing",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nmain\n\n### RAGFlow image version\n\ninfiniflow/ragflow:v0.19.0-slim\n\n### Other environment information\n\n```Markdown\nOS: macOS Sequoia\nBrowser: Chrome\n```\n\n### Actual behavior\n\nWhen uploading files to a knowledge base, the files get stuck in a \"pending\" state indefinitely and are never processed. The `ragflow-worker` container logs show repeated `redis.exceptions.ConnectionError: Error 111 connecting to redis:6379. Connection refused.` errors.\n\n### Expected behavior\n\nFiles uploaded to a knowledge base should be processed successfully without getting stuck in a \"pending\" state.\n\n### Steps to reproduce\n\n```Markdown\n1. Start RAGflow using the standard `docker-compose.yml` from the main branch.\n2. Log in to the RAGflow UI.\n3. Create a new knowledge base.\n4. Upload a file to the knowledge base.\n```\n\n### Additional information\n\n```\n[2024-06-18 05:10:20,833: ERROR/ForkPoolWorker-2] Task RAGFlow.tasks.task_file_upload[d1b3f4e9-0b3a-4c1e-8a8a-3e3e3e3e3e3e] raised unexpected: ConnectionError(111, 'Connection refused')\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.10/dist-packages/redis/connection.py\", line 619, in connect\n    sock.connect(self.host_port)\nConnectionRefusedError: [Errno 111] Connection refused\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.10/dist-packages/celery/app/trace.py\", line 451, in trace_task\n    R = retval = fun(*args, **kwargs)\n  File \"/usr/local/lib/python3.10/dist-packages/celery/app/trace.py\", line 732, in __protected_call__\n    return self.run(*args, **kwargs)\n  File \"/ragflow/RAGFlow/tasks.py\", line 49, in task_file_upload\n    kv_service = KVSession(self.request.id)\n  File \"/ragflow/RAGFlow/kb_service.py\", line 41, in __init__\n    self.conn = redis.Redis(host=REDIS_HOST, port=REDIS_PORT, db=1, password=REDIS_PASSWORD, decode_responses=True)\n  File \"/usr/local/lib/python3.10/dist-packages/redis/client.py\", line 586, in __init__\n    self.connection_pool = ConnectionPool(**kwargs)\n  File \"/usr/local/lib/python3.10/dist-packages/redis/connection.py\", line 1333, in __init__\n    self.connection_class(**self.connection_kwargs).connect()\n  File \"/usr/local/lib/python3.10/dist-packages/redis/connection.py\", line 625, in connect\n    raise ConnectionError(self._error_message(e))\nredis.exceptions.ConnectionError: Error 111 connecting to redis:6379. Connection refused.\n```\n\n\"Attached are the docker-compose.yml and .env files for this issue, as they contain the relevant configuration details.\"\n\n[docker-compose copy.yml.txt](https://github.com/user-attachments/files/20789417/docker-compose.copy.yml.txt)\n[env-copy.txt](https://github.com/user-attachments/files/20789418/env-copy.txt)",
      "state": "open",
      "author": "Promethean-Pty-Ltd",
      "author_type": "User",
      "created_at": "2025-06-18T05:24:25Z",
      "updated_at": "2025-06-20T03:40:43Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8342/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8342",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8342",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:51.972145",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe \"Connection refused\" error to Redis usually means the Redis service isn't running, isn't reachable from your containers, or the configuration is mismatched. Here are the most relevant troubleshooting steps:\n\n1. Double-check that the Redis service is defined and running in your `d",
          "created_at": "2025-06-18T05:26:15Z"
        },
        {
          "author": "Promethean-Pty-Ltd",
          "body": "I have followed all the troubleshooting steps recommended by the bot, and the evidence suggests an application-level issue with how RAGflow is parsing Redis connection settings.\n\nHere is a summary of the steps taken and their results:\n\nRedis Service: I have confirmed that the Redis service is define",
          "created_at": "2025-06-18T06:07:40Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Check the redis part in conf/service_conf.yaml in RAGFlow container.\nThe `host` might be wrong.",
          "created_at": "2025-06-20T03:40:43Z"
        }
      ]
    },
    {
      "issue_number": 8316,
      "title": "[Question]: 0.19.0 template component unable to handle input.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\n0.19.0 version template component doesn't have key value\n![Image](https://github.com/user-attachments/assets/96f967ab-7f3b-4e2e-9c3f-408b1af4afce)\n0.16.0 version can use jinja to edit output\n\n![Image](https://github.com/user-attachments/assets/cd84742a-870c-4607-9ab1-a7cb2a7c73b3)",
      "state": "closed",
      "author": "KB4EVER",
      "author_type": "User",
      "created_at": "2025-06-17T05:59:11Z",
      "updated_at": "2025-06-20T03:39:34Z",
      "closed_at": "2025-06-20T03:39:34Z",
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 8,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8316/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "yongtenglei"
      ],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8316",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8316",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:52.286608",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @KB4EVER! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThe template component in 0.19.0 still supports Jinja and variable input, but the UI for picking variables (key values) is now more context-sensitive to your workflow graph. If t",
          "created_at": "2025-06-17T06:02:01Z"
        },
        {
          "author": "KB4EVER",
          "body": "[@dosu](https://go.dosu.dev/dosubot) Can you show me how to use this component?\n\nThe output of the invoke component is \n{\ncontent: {\n0: \"\"{\\\"isFail\\\": 0, \\\"innerwideip\\\": \\\"pgastore04.dccnet.com.cn\\\"}\"\"\n}\n}\n\n![Image](https://github.com/user-attachments/assets/e619169e-3b7a-4f82-8435-c9170b7564ba)\n\n!",
          "created_at": "2025-06-17T06:18:39Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYou can extract the innerwideip value directly in the Template component using Jinja2 like this:\n\n```\n{{ Invoke_0.innerwideip }}\n```\n\nHere, `Invoke_0` is the ID of your invoke component. The Template component automatically parses the upstream JSON output and exposes its fields as va",
          "created_at": "2025-06-17T06:27:39Z"
        },
        {
          "author": "KB4EVER",
          "body": "[@dosu](https://go.dosu.dev/dosubot).according to your suggestion, {{ Invoke_0.innerwideip }} still doesn't work out, the output of template component is \n{\ncontent: {\n0: \"\"\n}\n}\n![Image](https://github.com/user-attachments/assets/8a4b9562-3e21-4c94-a0ca-3b587398913f)",
          "created_at": "2025-06-17T08:58:26Z"
        },
        {
          "author": "KB4EVER",
          "body": "@yongtenglei @KevinHuSh new code still doesn't work out\n\n![Image](https://github.com/user-attachments/assets/a912c0d8-ad50-479a-ae04-c727c15c1cba)\n\n![Image](https://github.com/user-attachments/assets/2a7b6405-d054-42b7-a9cb-bec26082d920)",
          "created_at": "2025-06-19T06:49:40Z"
        }
      ]
    },
    {
      "issue_number": 8346,
      "title": "[Question]: When using the agent, I choose the LLM component, which allows me to set the model to responsive_format={'type ':'json object'}",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI am currently using the LLM component in the agent, and I need to ask the big model to help me generate JSON structured data through prompt words. However, the current generation is not accurate. I see that the big model has a parameter that can boot JSON data support:\nresponse_format={\n'type': 'json_object'\n}\nHow can I make it add or modify parameters when the agent calls the large model",
      "state": "open",
      "author": "wuqilei-code",
      "author_type": "User",
      "created_at": "2025-06-18T06:45:13Z",
      "updated_at": "2025-06-20T03:34:34Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8346/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8346",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8346",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:52.511499",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nTo enable the LLM component to generate accurate JSON-structured data using the response_format parameter, you’ll need to update the code so that this parameter is included in the configuration passed to the LLM. Currently, the GenerateParam class and its gen_conf method only support",
          "created_at": "2025-06-18T06:48:55Z"
        },
        {
          "author": "KevinHuSh",
          "body": "We're working on that.",
          "created_at": "2025-06-20T03:34:34Z"
        }
      ]
    },
    {
      "issue_number": 8359,
      "title": "[Question]: What suggestions do you have for knowledge base statistics?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\n例如知识库里有十几个文件，然后问“知识库中有些什么人”，“有些什么事件”之类的问题。",
      "state": "open",
      "author": "czhcc",
      "author_type": "User",
      "created_at": "2025-06-19T01:57:59Z",
      "updated_at": "2025-06-20T03:25:38Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8359/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8359",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8359",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:52.712118",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "Enable knowledge graph. Give it a try.",
          "created_at": "2025-06-20T03:25:38Z"
        }
      ]
    },
    {
      "issue_number": 8360,
      "title": "[Bug]: embedding_model  class SILICONFLOWEmbed(Base)Function reusing json",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nc8b1790\n\n### RAGFlow image version\n\nc8b1790\n\n### Other environment information\n\n```Markdown\ndef encode_queries(self, text):\n        payload = {\n            \"model\": self.model_name,\n            \"input\": text,\n            \"encoding_format\": \"float\",\n        }\n        response = requests.post(self.base_url, json=payload, headers=self.headers).json()\n        try:\n            res = response.json()\n            return np.array(res[\"data\"][0][\"embedding\"]), self.total_token_count(res)\n        except Exception as _e:\n            log_exception(_e, response)\n```\n\n### Actual behavior\n\ndef encode_queries(self, text):\n        payload = {\n            \"model\": self.model_name,\n            \"input\": text,\n            \"encoding_format\": \"float\",\n        }\n        response = requests.post(self.base_url, json=payload, headers=self.headers)\n        try:\n            res = response.json()\n            return np.array(res[\"data\"][0][\"embedding\"]), self.total_token_count(res)\n        except Exception as _e:\n            log_exception(_e, response)\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\ndef encode_queries(self, text):\n        payload = {\n            \"model\": self.model_name,\n            \"input\": text,\n            \"encoding_format\": \"float\",\n        }\n        response = requests.post(self.base_url, json=payload, headers=self.headers).json()\n        try:\n            res = response.json()\n            return np.array(res[\"data\"][0][\"embedding\"]), self.total_token_count(res)\n        except Exception as _e:\n            log_exception(_e, response)\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "sunsunrise",
      "author_type": "User",
      "created_at": "2025-06-19T02:12:35Z",
      "updated_at": "2025-06-20T03:24:28Z",
      "closed_at": "2025-06-20T03:24:28Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8360/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8360",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8360",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:52.919806",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @sunsunrise! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThis is a known bug: the encode_queries function in SILICONFLOWEmbed calls .json() on a dictionary, which causes an AttributeError because dicts do not have a .json() method. ",
          "created_at": "2025-06-19T02:18:48Z"
        },
        {
          "author": "asiroliu",
          "body": "import from #8162",
          "created_at": "2025-06-20T03:06:29Z"
        }
      ]
    },
    {
      "issue_number": 8361,
      "title": "[Bug]: Can't inference the where the component input is. Please identify whose output is this component's input",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n26d3480\n\n### RAGFlow image version\n\nV0.19\n\n### Other environment information\n\n```Markdown\n分类节点报错：Can't inference the where the component input is. Please identify whose output is this component's input\n```\n\n### Actual behavior\n\n分类节点报错：Can't inference the where the component input is. Please identify whose output is this component's input\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\n分类节点报错：Can't inference the where the component input is. Please identify whose output is this component's input\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "dukun1224",
      "author_type": "User",
      "created_at": "2025-06-19T02:15:56Z",
      "updated_at": "2025-06-20T03:21:33Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8361/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8361",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8361",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:53.122572",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "You need to full-fill this.\n\n![Image](https://github.com/user-attachments/assets/40bbdbfe-1137-4daf-8750-3f6e13b248a5)",
          "created_at": "2025-06-20T03:20:20Z"
        }
      ]
    },
    {
      "issue_number": 8301,
      "title": "[Question]: Metadata filtering via metadata_condition does not work when using RAGFlow as external knowledge base in Dify",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI’m integrating RAGFlow (v0.19.0) as an external knowledge base into Dify (v1.4.2) following the official documentation:\n\n🔗 [External Knowledge API Documentation - Dify](https://docs.dify.ai/zh-hans/guides/knowledge-base/api-documentation/external-knowledge-api-documentation)\n\nI have configured a metadata field called brand_name in RAGFlow documents and am trying to filter results using the metadata_condition parameter during retrieval.\n\nRequest Payload\n\n{\n  \"knowledge_id\": \"xxxxxxx\",\n  \"query\": \"xxxxxxxxx\",\n  \"retrieval_setting\": {\n    \"top_k\": 30,\n    \"score_threshold\": 0.2\n  },\n  \"metadata_condition\": {\n    \"logical_operator\": \"and\",\n    \"conditions\": [\n      {\n        \"name\": [\"brand_name\"],\n        \"comparison_operator\": \"is\",\n        \"value\": \"Pampers\"\n      }\n    ]\n  }\n}\n\nExpected Behavior\nThe API should return only documents where the brand_name metadata equals \"Pampers\".\n\nActual Behavior\nThe API ignores the metadata_condition parameter entirely and returns all matching documents regardless of the brand_name value.\n\nQuestion\nDoes RAGFlow currently support metadata-based filtering that is compatible with Dify’s metadata_condition structure?\nIf not, are there any plans to implement metadata filtering capabilities in RAGFlow’s native API?",
      "state": "open",
      "author": "1099446868",
      "author_type": "User",
      "created_at": "2025-06-16T09:33:23Z",
      "updated_at": "2025-06-20T02:58:56Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8301/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8301",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8301",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:53.334465",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nRAGFlow does not currently support metadata-based filtering compatible with Dify’s metadata_condition structure. The retrieval API in RAGFlow ignores the metadata_condition parameter and does not filter documents based on metadata fields—metadata is only attached to results for infor",
          "created_at": "2025-06-16T09:35:45Z"
        },
        {
          "author": "KevinHuSh",
          "body": "> Does RAGFlow currently support metadata-based filtering that is compatible with Dify’s metadata_condition structure?\nNo. I don't think so. And it's our plan to filter with meta data.",
          "created_at": "2025-06-18T03:21:20Z"
        },
        {
          "author": "1099446868",
          "body": "> > Does RAGFlow currently support metadata-based filtering that is compatible with Dify’s metadata_condition structure?\n> > No. I don't think so. And it's our plan to filter with meta data.\n\n\nOh,！I'm glad to hear this exciting news. It's an anticipated achievement",
          "created_at": "2025-06-20T02:58:56Z"
        }
      ]
    },
    {
      "issue_number": 6791,
      "title": "[Question]: Can document parsing support Mineru backend?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nCan document parsing support Mineru backend?",
      "state": "open",
      "author": "wanyuks",
      "author_type": "User",
      "created_at": "2025-04-03T07:40:13Z",
      "updated_at": "2025-06-20T02:54:55Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question",
        "💞 feature"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 15,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/6791/reactions",
        "total_count": 5,
        "+1": 5,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/6791",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/6791",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:53.542977",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHello @wanyuks! 👋 I'm here to help you with any bugs, questions, or contributions while we wait for a human maintainer. I'm Dosu, a bot designed to assist you.\n\n<!-- Answer -->\nI wasn't able to find any information in the RAGFlow repository regarding support for the Mineru backend ",
          "created_at": "2025-04-03T07:42:03Z"
        },
        {
          "author": "Yiminger",
          "body": "+1 ",
          "created_at": "2025-04-06T12:47:38Z"
        },
        {
          "author": "whq0923",
          "body": "+1",
          "created_at": "2025-04-14T03:37:02Z"
        },
        {
          "author": "snoopy7713",
          "body": "+1",
          "created_at": "2025-04-15T06:00:22Z"
        },
        {
          "author": "snoopy7713",
          "body": "QQ 162200780\nRAGFlow 使用MinerU的请留言 ragflow 升级 deepdoc讨论。",
          "created_at": "2025-04-15T06:01:04Z"
        }
      ]
    },
    {
      "issue_number": 8375,
      "title": "How to provide interfaces for others to call and use after local deployment?",
      "body": "I have already deployed it locally. How can I expose the interface for others to call? Currently, I don't know how to test it on Postman?",
      "state": "open",
      "author": "xzyblithe",
      "author_type": "User",
      "created_at": "2025-06-19T09:54:59Z",
      "updated_at": "2025-06-20T02:54:46Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8375/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8375",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8375",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:53.778445",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @xzyblithe! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nTo let others access your locally deployed RAGFlow service, set the HOST_IP to 0.0.0.0 in your configuration (instead of the default 127.0.0.1), and make sure your firewall all",
          "created_at": "2025-06-19T09:57:23Z"
        },
        {
          "author": "xzyblithe",
          "body": "Thank you for your answer. I am a beginner in large models. If you have other questions, please feel free to give me your advice.",
          "created_at": "2025-06-19T13:00:04Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Please refer to [this](https://ragflow.io/docs/dev/http_api_reference).",
          "created_at": "2025-06-20T02:54:46Z"
        }
      ]
    },
    {
      "issue_number": 8379,
      "title": "[Question]: broken data stream when writing image file",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\n![Image](https://github.com/user-attachments/assets/80b06712-cded-4466-b9cf-e0601bfcec69)\nAs the screenshot shows, I cannot locate the source of the error. Can anyone refer me a solution? thx",
      "state": "open",
      "author": "wanghaohao994",
      "author_type": "User",
      "created_at": "2025-06-20T01:26:27Z",
      "updated_at": "2025-06-20T02:53:50Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8379/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8379",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8379",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:54.003648",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe \"broken data stream when writing image file\" error in RAGFlow is most likely related to issues with file paths, permissions, or corrupted input data. The image writing logic in the codebase (such as in `save_results` and `init_in_out`) uses standard PIL methods and creates output",
          "created_at": "2025-06-20T01:29:37Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Do you have back-end error logs?",
          "created_at": "2025-06-20T02:53:50Z"
        }
      ]
    },
    {
      "issue_number": 8380,
      "title": "[Question]:",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nWhen parsing knowledge base documents, the front-end displays \"Task Completed\", but the back-end docker logs show that it is still executing, which causes my subsequent document parsing tasks to be blocked.\n\nYou may check out the details in the down below pic, with underscore marked.\n\n![Image](https://github.com/user-attachments/assets/bf1f7e72-483c-4234-a9a2-f2036e58318a)\n",
      "state": "open",
      "author": "wanghaohao994",
      "author_type": "User",
      "created_at": "2025-06-20T01:38:06Z",
      "updated_at": "2025-06-20T02:52:22Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8380/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8380",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8380",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:54.217441",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThis issue has been reported by others—it's often caused by a mismatch between the backend's actual progress and what the frontend displays. The backend updates progress asynchronously every few seconds using a Redis lock, and the frontend polls for status, so short-lived mismatches ",
          "created_at": "2025-06-20T01:41:40Z"
        },
        {
          "author": "KevinHuSh",
          "body": "The logs show did not show the parsing is still going on.\nIt's jammed maybe with other reasons.",
          "created_at": "2025-06-20T02:52:22Z"
        }
      ]
    },
    {
      "issue_number": 8381,
      "title": "[Question]: An issue discovered in version v0.19.0 is memory leakage, resulting in significantly high memory usage.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nAn issue discovered in version v0.19.0 is memory leakage, resulting in significantly high memory usage.\n\nIt has been observed that the service has been occupying 49GB of memory for an extended period. I'm not sure if this is a bug. Why is it consuming such a large amount of memory, and when can this issue be resolved?",
      "state": "open",
      "author": "OneKe",
      "author_type": "User",
      "created_at": "2025-06-20T02:17:19Z",
      "updated_at": "2025-06-20T02:48:07Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8381/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8381",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8381",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:54.421373",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "We're working on it.",
          "created_at": "2025-06-20T02:48:07Z"
        }
      ]
    },
    {
      "issue_number": 8382,
      "title": "[Question]: When there are too many output requirements for the large model in the question, it will not be retrieved",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nWhen there are too many output requirements for a large model in a question, the actual content to be retrieved is very small, and when there are many documents, it will not be retrieved. Those output requirements will affect the search results.\n例如：找出张三的关联信息，用关联图表示",
      "state": "open",
      "author": "czhcc",
      "author_type": "User",
      "created_at": "2025-06-20T02:18:20Z",
      "updated_at": "2025-06-20T02:46:59Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8382/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8382",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8382",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:54.626391",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThis is a known limitation in RAGFlow: when your prompt contains many output requirements or instructions (like \"show as a graph\"), these phrases are included in the retrieval query, which can dilute the actual information need and cause retrieval to fail or return irrelevant results",
          "created_at": "2025-06-20T02:22:11Z"
        },
        {
          "author": "KevinHuSh",
          "body": "What about adjusting these parameters?\n\n![Image](https://github.com/user-attachments/assets/96940bb0-0947-43c1-a533-72821d23e866)",
          "created_at": "2025-06-20T02:46:59Z"
        }
      ]
    },
    {
      "issue_number": 8104,
      "title": "[Question]: My document context language is Chinese, but generated question is English or mixed. why? and how to configure it ? thanks",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nmy test doc\n检测项目报价.md\n1 FIB电镜检测 1.1 价格: 800， 单位：人民币 1.2 周期：5, 单位：天\n\n切片方法: General\n自动问题提取: 4\n使用召回增强RAPTOR策略: no\n\nquestion_kwd: \n[\n    \"What is the price for FIB电镜检测?\",\n    \"How many days does it take to complete a FIB电镜检测?\",\n    \"Is the price listed in the text inclusive of all additional costs?\",\n    \"Does the cycle time include preparation steps before detection?\"\n]\n",
      "state": "open",
      "author": "openersoft",
      "author_type": "User",
      "created_at": "2025-06-06T07:53:57Z",
      "updated_at": "2025-06-20T02:27:54Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8104/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8104",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8104",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:54.831560",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @openersoft! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nRAGFlow determines the language for question generation based on your environment and the content itself. By default, it uses the server's `LANG` environment variable—if it's ",
          "created_at": "2025-06-06T07:57:59Z"
        },
        {
          "author": "KevinHuSh",
          "body": "What the LLM did you utilize? Maybe, switch to another larger one.",
          "created_at": "2025-06-06T08:06:30Z"
        },
        {
          "author": "openersoft",
          "body": "> What the LLM did you utilize? Maybe, switch to another larger one.\n\nTongyi-Qianwen\ntext-embedding-v3",
          "created_at": "2025-06-06T08:11:24Z"
        },
        {
          "author": "openersoft",
          "body": "anyone help? thanks",
          "created_at": "2025-06-20T02:27:54Z"
        }
      ]
    },
    {
      "issue_number": 8363,
      "title": "[Feature Request]: MinerU",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\n\n```\n\n### Describe the feature you'd like\n\n什么时候添加MinerU解析\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "yuenoble",
      "author_type": "User",
      "created_at": "2025-06-19T05:17:47Z",
      "updated_at": "2025-06-20T02:12:05Z",
      "closed_at": "2025-06-20T02:12:05Z",
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8363/reactions",
        "total_count": 3,
        "+1": 3,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8363",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8363",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:55.040095",
      "comments": []
    },
    {
      "issue_number": 8368,
      "title": "[Feature Request]: 提取知识图谱使用的模型可以自定义吗",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\n\n```\n\n### Describe the feature you'd like\n\n提取知识图谱使用的模型可以自定义吗\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "yuenoble",
      "author_type": "User",
      "created_at": "2025-06-19T07:03:43Z",
      "updated_at": "2025-06-20T02:05:22Z",
      "closed_at": "2025-06-20T02:05:22Z",
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8368/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8368",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8368",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:55.040118",
      "comments": [
        {
          "author": "ZhenhangTung",
          "body": "@yuenoble Hi, in our self checks, there is one:\n\"Non-english title submitions will be closed directly\"\nPls change your title and feature request description into English. ",
          "created_at": "2025-06-20T02:03:24Z"
        },
        {
          "author": "ZhenhangTung",
          "body": "And it's not a feature request. To answer your question, pls check: https://ragflow.io/docs/dev/construct_knowledge_graph#prerequisites",
          "created_at": "2025-06-20T02:05:01Z"
        }
      ]
    },
    {
      "issue_number": 4855,
      "title": "[Question]: Ollama base_url configuration: what am I doing wrong?",
      "body": "### Describe your problem\n\nI am trying to add a LLM, and as you can see in the following screenshot, the address I set as  base_url is truncated when saving. \n\nSpecifically, the `/ollama` part is ignored, and by consequence as I push the 'OK' button I get the error:\n\n``` Fail to access model(granite3.1-dense:8b).**ERROR**: 404 page not found ```\n\nWhere should I put it?\n\n![Image](https://github.com/user-attachments/assets/3dd6d4ef-55bb-42bb-99c6-1b44bbb2b819)\n\nThank you",
      "state": "open",
      "author": "vlavorini",
      "author_type": "User",
      "created_at": "2025-02-10T10:14:08Z",
      "updated_at": "2025-06-20T01:13:23Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/4855/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/4855",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/4855",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:55.245117",
      "comments": [
        {
          "author": "fanhuafeng",
          "body": "me,too. Ollama base_url can't add url path.",
          "created_at": "2025-06-20T01:13:22Z"
        }
      ]
    },
    {
      "issue_number": 7464,
      "title": "[Question]: HEAD http://localhost:1200/ragflow_bd8362ad287f11f09a8728c5d23000bb [status:404 duration:0.007s]",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nwant a help. i setup the local environment by readme. mysql on 5445 port, es on 1200, redis on 6379, minio on 9000, all of them run successfully in docker. but when i parse the document i uploaded, it will raise an log in the terminal. i don't know why.",
      "state": "closed",
      "author": "qtencent7",
      "author_type": "User",
      "created_at": "2025-05-05T05:44:58Z",
      "updated_at": "2025-06-19T12:49:21Z",
      "closed_at": "2025-06-19T12:49:21Z",
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7464/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7464",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7464",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:55.495122",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHello @qtencent7! I'm here to assist you with any bugs or questions you have while you wait for a human maintainer. Feel free to share what you need help with!\n\n<!-- Answer -->\nThe 404 status error you're encountering might be due to an incorrect IP address or port number. Ensure t",
          "created_at": "2025-05-05T05:46:54Z"
        },
        {
          "author": "KevinHuSh",
          "body": "This means ES can't find the index you built previously.",
          "created_at": "2025-05-06T02:19:23Z"
        },
        {
          "author": "Lycnkd",
          "body": "@qtencent7 Hi! Have you solved the problem? I have encountered the same one.",
          "created_at": "2025-06-08T13:57:17Z"
        },
        {
          "author": "qtencent7",
          "body": "i just do some research on that repo, follow my interest at that time. now, i don't continue to research that. sorry",
          "created_at": "2025-06-08T14:28:07Z"
        },
        {
          "author": "wj7927",
          "body": "Launch the RAGFlow backend service\nhttps://ragflow.io/docs/dev/launch_ragflow_from_source\n\nhave tow backend service,  you only run one backend service :\n\none :\npython api/ragflow_server.py;\n\ntwo :\nJEMALLOC_PATH=$(pkg-config --variable=libdir jemalloc)/libjemalloc.so;\nLD_PRELOAD=$JEMALLOC_PATH python",
          "created_at": "2025-06-17T05:30:05Z"
        }
      ]
    },
    {
      "issue_number": 8243,
      "title": "[Question]: how to change mysql host 、username、password to 阿里云 mysql",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\ni wanna ragflow to connect to 阿里云 Mysql \nWhat should I do?\ndeploy type: docker compose -f docker-compose.yml up -d\n\nhost :aliyun.com\nname:ragflow\nport:3306\npassword:12345\ndatabase:rag_flow",
      "state": "closed",
      "author": "DJ-RunTu",
      "author_type": "User",
      "created_at": "2025-06-13T03:14:30Z",
      "updated_at": "2025-06-19T08:57:01Z",
      "closed_at": "2025-06-19T08:57:01Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8243/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8243",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8243",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:55.772483",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nTo connect RAGFlow to your Alibaba Cloud MySQL, update the MySQL connection environment variables in your docker-compose.yml or .env file. Set MYSQL_HOST to your Alibaba Cloud MySQL host (e.g., aliyun.com), MYSQL_USER to your username (ragflow), MYSQL_PASSWORD to your password (12345",
          "created_at": "2025-06-13T03:16:24Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Alteration of `conf/service_conf.yaml.template` is necessary.",
          "created_at": "2025-06-13T06:10:45Z"
        }
      ]
    },
    {
      "issue_number": 8371,
      "title": "[Question]: Why do the results obtained by accessing the agent through the api are different from those obtained by accessing the console",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\n![Image](https://github.com/user-attachments/assets/6d5ab4af-fb91-493b-9df0-745c4547c030)",
      "state": "open",
      "author": "GanziPo",
      "author_type": "User",
      "created_at": "2025-06-19T08:40:24Z",
      "updated_at": "2025-06-19T08:42:53Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8371/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8371",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8371",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:55.974289",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe difference in results between accessing the agent via the API and the console is usually due to differences in configuration, environment, or how requests are handled in each pathway. Some known causes include: the API and console may use different authentication methods, user/te",
          "created_at": "2025-06-19T08:42:53Z"
        }
      ]
    },
    {
      "issue_number": 8328,
      "title": "[Question]:",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nWhen I use the txt_parser parser for text chunking, I set the maximum chunk_token_num=512, why is the size of some of the chunks generated still more than 512, and do I need to make changes elsewhere?",
      "state": "open",
      "author": "rookieCun",
      "author_type": "User",
      "created_at": "2025-06-17T10:09:45Z",
      "updated_at": "2025-06-19T02:37:48Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8328/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8328",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8328",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:56.172486",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @rookieCun! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThe chunk_token_num in txt_parser acts as a soft upper bound—if a segment between delimiters is longer than 512 tokens, the resulting chunk can exceed your limit. This happens ",
          "created_at": "2025-06-17T10:12:03Z"
        },
        {
          "author": "rookieCun",
          "body": "[@dosu](https://go.dosu.dev/dosubot)The default value is 512, why are some of the chunks generated more than 1000, and what criteria is chunk_token_num set to in ragflow?",
          "created_at": "2025-06-17T10:18:15Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe chunk_token_num in RAGFlow's txt_parser is a soft upper bound, not a strict limit. If a single section of text between delimiters is longer than 512 tokens, that entire section becomes a chunk—even if it exceeds 1000 tokens. This is why you see oversized chunks: the parser accumu",
          "created_at": "2025-06-17T10:20:42Z"
        },
        {
          "author": "KevinHuSh",
          "body": "The text has been sliced based on both chunk token size and delimitors. RAGFlow does not split text between delimitors just due to chunk size since it will break the semantic integrity much.",
          "created_at": "2025-06-18T02:31:51Z"
        },
        {
          "author": "rookieCun",
          "body": "This I know, in the text parser I changed the separator to use the special separator added during document preprocessing, and also changed the desired chunk size. But the final rendered result only meets the separator requirement, and does not achieve the required fixed chunk size.",
          "created_at": "2025-06-18T02:41:01Z"
        }
      ]
    },
    {
      "issue_number": 8286,
      "title": "[Bug]: Passing Status Stuck in \"Task is queued...\"",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nf707403\n\n### RAGFlow image version\n\nv0.19.0\n\n### Other environment information\n\n```Markdown\nArchitecture:            x86_64\n  CPU op-mode(s):        32-bit, 64-bit\n  Address sizes:         45 bits physical, 48 bits virtual\n  Byte Order:            Little Endian\n\nPRETTY_NAME=\"Ubuntu 22.04 LTS\"\nNAME=\"Ubuntu\"\nVERSION_ID=\"22.04\"\nVERSION=\"22.04 (Jammy Jellyfish)\"\nVERSION_CODENAME=jammy\nID=ubuntu\nID_LIKE=debian\nHOME_URL=\"https://www.ubuntu.com/\"\nSUPPORT_URL=\"https://help.ubuntu.com/\"\nBUG_REPORT_URL=\"https://bugs.launchpad.net/ubuntu/\"\nPRIVACY_POLICY_URL=\"https://www.ubuntu.com/legal/terms-and-policies/privacy-policy\"\nUBUNTU_CODENAME=jammy\n```\n\n### Actual behavior\n\n2025-06-16 13:48:27,050 ERROR    1091129 fetch task exception\nTraceback (most recent call last):\n  File \"/home/xwu/projects/ragflow-main/api/db/services/document_service.py\", line 519, in update_progress\n    info[\"progress_msg\"] = \"%d tasks are ahead in the queue...\"%get_queue_length(priority)\n  File \"/home/xwu/projects/ragflow-main/api/db/services/document_service.py\", line 570, in get_queue_length\n    return int(group_info.get(\"lag\", 0))\nAttributeError: 'NoneType' object has no attribute 'get'\n\n\n\n                priority = 0\n                for t in tsks:\n                    if 0 <= t.progress < 1:\n                        finished = False\n                    if t.progress == -1:\n                        bad += 1\n                    prg += t.progress if t.progress >= 0 else 0\n                    if t.progress_msg.strip():\n                        msg.append(t.progress_msg)\n                    if t.task_type == \"raptor\":\n                        has_raptor = True\n                    elif t.task_type == \"graphrag\":\n                        has_graphrag = True\n                    priority = max(priority, t.priority)\n                prg /= len(tsks)\n                if finished and bad:\n                    prg = -1\n                    status = TaskStatus.FAIL.value\n                elif finished:\n                    if d[\"parser_config\"].get(\"raptor\", {}).get(\"use_raptor\") and not has_raptor:\n                        queue_raptor_o_graphrag_tasks(d, \"raptor\", priority)\n                        prg = 0.98 * len(tsks) / (len(tsks) + 1)\n                    elif d[\"parser_config\"].get(\"graphrag\", {}).get(\"use_graphrag\") and not has_graphrag:\n                        queue_raptor_o_graphrag_tasks(d, \"graphrag\", priority)\n                        prg = 0.98 * len(tsks) / (len(tsks) + 1)\n                    else:\n                        status = TaskStatus.DONE.value\n\n                msg = \"\\n\".join(sorted(msg))\n                info = {\n                    \"process_duation\": datetime.timestamp(\n                        datetime.now()) -\n                    d[\"process_begin_at\"].timestamp(),\n                    \"run\": status}\n                if prg != 0:\n                    info[\"progress\"] = prg\n                if msg:\n                    info[\"progress_msg\"] = msg\n                else:\n                    info[\"progress_msg\"] = \"%d tasks are ahead in the queue...\"%get_queue_length(priority)\n\nThis priority variable is \"priority = 0\" so that get_queue_length(0) return error\n\nIn \"api/db/services/document_service.py\"\n```\ndef get_queue_length(priority):\n    group_info = REDIS_CONN.queue_info(get_svr_queue_name(priority), SVR_CONSUMER_GROUP_NAME)\n    return int(group_info.get(\"lag\", 0))\n```\n\n\nprint(get_svr_queue_name(priority), SVR_CONSUMER_GROUP_NAME)\noutput: ('rag_flow_svr_queue', 'rag_flow_svr_task_broker')\n\nSince the \"REDIS_CONN.queue_info(get_svr_queue_name(priority), SVR_CONSUMER_GROUP_NAME)\" return None, so get  AttributeError: 'NoneType' object has no attribute 'get'\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nhttps://ragflow.io/docs/v0.19.0/launch_ragflow_from_source\n\nFollow the guide and upload any files to process in a new created Knowledge Base\n\n(ragflow) xwu@vm01:~/projects/ragflow-main$ sudo docker compose -f docker/docker-compose-base.yml up\n(ragflow) xwu@vm01:~/projects/ragflow-main$ python -m api.ragflow_server\n(ragflow) xwu@vm01:~/projects/ragflow-main/web$ npm run dev\n```\n\n### Additional information\n.env:\n```\n# The type of doc engine to use.\n# Available options:\n# - `elasticsearch` (default)\n# - `infinity` (https://github.com/infiniflow/infinity)\n# - `opensearch` (https://github.com/opensearch-project/OpenSearch)\nDOC_ENGINE=${DOC_ENGINE:-elasticsearch}\n\n# ------------------------------\n# docker env var for specifying vector db type at startup\n# (based on the vector db type, the corresponding docker\n# compose profile will be used)\n# ------------------------------\nCOMPOSE_PROFILES=${DOC_ENGINE}\n\n# The version of Elasticsearch.\nSTACK_VERSION=8.11.3\n\n# The hostname where the Elasticsearch service is exposed\nES_HOST=es01\n\n# The port used to expose the Elasticsearch service to the host machine,\n# allowing EXTERNAL access to the service running inside the Docker container.\nES_PORT=1200\n\n# The password for Elasticsearch.\nELASTIC_PASSWORD=infini_rag_flow\n\n# the hostname where OpenSearch service is exposed, set it not the same as elasticsearch\nOS_PORT=1201\n\n# The hostname where the OpenSearch service is exposed\nOS_HOST=opensearch01\n\n# The password for OpenSearch.\n# At least one uppercase letter, one lowercase letter, one digit, and one special character\nOPENSEARCH_PASSWORD=infini_rag_flow_OS_01\n\n# The port used to expose the Kibana service to the host machine,\n# allowing EXTERNAL access to the service running inside the Docker container.\nKIBANA_PORT=6601\nKIBANA_USER=rag_flow\nKIBANA_PASSWORD=infini_rag_flow\n\n# The maximum amount of the memory, in bytes, that a specific Docker container can use while running.\n# Update it according to the available memory in the host machine.\nMEM_LIMIT=8073741824\n\n# The hostname where the Infinity service is exposed\nINFINITY_HOST=infinity\n\n# Port to expose Infinity API to the host\nINFINITY_THRIFT_PORT=23817\nINFINITY_HTTP_PORT=23820\nINFINITY_PSQL_PORT=5432\n\n# The password for MySQL.\nMYSQL_PASSWORD=infini_rag_flow\n# The hostname where the MySQL service is exposed\nMYSQL_HOST=mysql\n# The database of the MySQL service to use\nMYSQL_DBNAME=rag_flow\n# The port used to expose the MySQL service to the host machine,\n# allowing EXTERNAL access to the MySQL database running inside the Docker container.\nMYSQL_PORT=5455\n\n# The hostname where the MinIO service is exposed\nMINIO_HOST=minio\n# The port used to expose the MinIO console interface to the host machine,\n# allowing EXTERNAL access to the web-based console running inside the Docker container.\nMINIO_CONSOLE_PORT=9001\n# The port used to expose the MinIO API service to the host machine,\n# allowing EXTERNAL access to the MinIO object storage service running inside the Docker container.\nMINIO_PORT=9000\n# The username for MinIO.\n# When updated, you must revise the `minio.user` entry in service_conf.yaml accordingly.\nMINIO_USER=rag_flow\n# The password for MinIO.\n# When updated, you must revise the `minio.password` entry in service_conf.yaml accordingly.\nMINIO_PASSWORD=infini_rag_flow\n\n# The hostname where the Redis service is exposed\nREDIS_HOST=redis\n# The port used to expose the Redis service to the host machine,\n# allowing EXTERNAL access to the Redis service running inside the Docker container.\nREDIS_PORT=6379\n# The password for Redis.\nREDIS_PASSWORD=infini_rag_flow\n\n# The port used to expose RAGFlow's HTTP API service to the host machine,\n# allowing EXTERNAL access to the service running inside the Docker container.\nSVR_HTTP_PORT=9380\n\n\n# The local time zone.\nTIMEZONE='Asia/Shanghai'\n\n\nREGISTER_ENABLED=1\n```\n\ndocker/service_conf.yaml.template:\n```\nragflow:\n  host: ${RAGFLOW_HOST:-0.0.0.0}\n  http_port: 9380\nmysql:\n  name: '${MYSQL_DBNAME:-rag_flow}'\n  user: '${MYSQL_USER:-root}'\n  password: '${MYSQL_PASSWORD:-infini_rag_flow}'\n  host: '${MYSQL_HOST:-mysql}'\n  port: ${MYSQL_PORT:-5455}\n  max_connections: 900\n  stale_timeout: 300\nminio:\n  user: '${MINIO_USER:-rag_flow}'\n  password: '${MINIO_PASSWORD:-infini_rag_flow}'\n  host: '${MINIO_HOST:-minio}:9000'\nes:\n  hosts: 'http://${ES_HOST:-es01}:${ES_PORT:-1200}'\n  username: '${ES_USER:-elastic}'\n  password: '${ELASTIC_PASSWORD:-infini_rag_flow}'\nos:\n  hosts: 'http://${OS_HOST:-opensearch01}:9201'\n  username: '${OS_USER:-admin}'\n  password: '${OPENSEARCHH_PASSWORD:-infini_rag_flow_OS_01}'\ninfinity:\n  uri: '${INFINITY_HOST:-infinity}:23817'\n  db_name: 'default_db'\nredis:\n  db: 1\n  password: '${REDIS_PASSWORD:-infini_rag_flow}'\n  host: '${REDIS_HOST:-redis}:6379'\n\n\n```\n\n_No response_",
      "state": "closed",
      "author": "wuxuehai01",
      "author_type": "User",
      "created_at": "2025-06-16T06:05:06Z",
      "updated_at": "2025-06-19T02:33:39Z",
      "closed_at": "2025-06-19T02:33:39Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8286/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8286",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8286",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:56.368003",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThis issue is caused by the get_queue_length function in document_service.py, which tries to access group_info.get(\"lag\", 0) without checking if group_info is None. This happens when the queue info lookup fails, often due to missing or uninitialized queue state, leading to the Attrib",
          "created_at": "2025-06-16T06:07:21Z"
        },
        {
          "author": "Woody-Hu",
          "body": "should be your queue (redis) meet some exceptions\n`    def queue_info(self, queue, group_name) -> dict | None:\n        try:\n            groups = self.REDIS.xinfo_groups(queue)\n            for group in groups:\n                if group[\"name\"] == group_name:\n                    return group\n        ex",
          "created_at": "2025-06-16T08:34:44Z"
        },
        {
          "author": "wuxuehai01",
          "body": "> should be your queue (redis) meet some exceptions ` def queue_info(self, queue, group_name) -> dict | None: try: groups = self.REDIS.xinfo_groups(queue) for group in groups: if group[\"name\"] == group_name: return group except Exception as e: logging.warning( \"RedisDB.queue_info \" + str(queue) + \" ",
          "created_at": "2025-06-16T08:39:52Z"
        },
        {
          "author": "wuxuehai01",
          "body": "Did not run the task executor:\n```\n\nJEMALLOC_PATH=$(pkg-config --variable=libdir jemalloc)/libjemalloc.so;\nLD_PRELOAD=$JEMALLOC_PATH python rag/svr/task_executor.py 1;\n```",
          "created_at": "2025-06-19T02:33:38Z"
        }
      ]
    },
    {
      "issue_number": 8323,
      "title": "[Question]: query and filter in knn, which parameter is actually used?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nIn ESConnection there is code like below:\n\n```python\ns = s.knn(m.vector_column_name,\n          m.topn,\n          m.topn * 2,\n          query_vector=list(m.embedding_data),\n          filter=bqry.to_dict(),\n          similarity=similarity,\n          )\n\nif bqry:\n    s = s.query(bqry)\n```\n\nThe full-text search and term filter conditions exist in both `query` and `knn.filter`. Is this as expected?  According to the doc [Combine approximate kNN with other features](https://www.elastic.co/docs/solutions/search/vector/knn#_combine_approximate_knn_with_other_features), I think only `query` is needed here. I am not familiar with elasticsearch, can some expert explain this implementation for me?",
      "state": "closed",
      "author": "whhe",
      "author_type": "User",
      "created_at": "2025-06-17T08:24:15Z",
      "updated_at": "2025-06-18T13:52:17Z",
      "closed_at": "2025-06-18T13:52:17Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8323/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8323",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8323",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:56.611487",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "The filters in KNN could save a lot of unnecessary computations.",
          "created_at": "2025-06-18T03:10:16Z"
        },
        {
          "author": "whhe",
          "body": "> The filters in KNN could save a lot of unnecessary computations.\n\nSo the knn filter is used for pre-filtering, and the query is used for ranking? If so, can the boost in knn filter still work?",
          "created_at": "2025-06-18T03:54:40Z"
        },
        {
          "author": "KevinHuSh",
          "body": "In the KNN filter, boost score takes no effects.",
          "created_at": "2025-06-18T06:54:12Z"
        }
      ]
    },
    {
      "issue_number": 6899,
      "title": "[Bug]:  In version 0.17.2, there will be additional keyword generation and generation issues",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n0.17.2\n\n### RAGFlow image version\n\n0.17.2\n\n### Other environment information\n\n```Markdown\n[Bug]:  In version 0.17.2, there will be additional keyword generation and generation issues\n```\n\n### Actual behavior\n\n<img width=\"391\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/48a3043c-eaa1-44b9-b177-fc7ebdf1a6bf\" />\n\n### Expected behavior\n\n[Bug]:  In version 0.17.2, there will be additional keyword generation and generation issues\n\n### Steps to reproduce\n\n```Markdown\n[Bug]:  In version 0.17.2, there will be additional keyword generation and generation issues\n```\n\n### Additional information\n\n[Bug]:  In version 0.17.2, there will be additional keyword generation and generation issues",
      "state": "open",
      "author": "userlang",
      "author_type": "User",
      "created_at": "2025-04-09T07:41:41Z",
      "updated_at": "2025-06-18T12:54:56Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/6899/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/6899",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/6899",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:56.822467",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\n你好 @userlang！我是一个可以帮助你解决bug、回答问题并成为贡献者的机器人。很高兴为你提供帮助，同时等待人类维护者的回复！🚀\n\n<!-- Answer -->\nIn RAGFlow version 0.17.2, there is a known issue where enabling the reasoning feature can lead to repeated text entries with '<think>' tags. This is a bug in that version. To address this issue, i",
          "created_at": "2025-04-09T07:49:44Z"
        },
        {
          "author": "semiBorn",
          "body": "我这是明明开启了关键词和问题生成，出来的块却没有",
          "created_at": "2025-04-12T01:10:38Z"
        },
        {
          "author": "chentong456",
          "body": "> 我这是明明开启了关键词和问题生成，出来的块却没有\n\n我印象中0.17.2这个版本，界面的确不显示。但你用api接口[List chunks]调用，即可显示",
          "created_at": "2025-06-18T12:54:56Z"
        }
      ]
    },
    {
      "issue_number": 7058,
      "title": "how to deploy the web server on http://mydomain.com/ragflow",
      "body": "I tried to modify nginx conf like that:\n```code\nlocation /ragflow/ {\n\nproxy_pass http://127.0.0.1:8000/\n\nproxy_set_header Host $host;\nproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\nproxy_set_header X-Forwarded-Proto $scheme;\nproxy_http_version 1.1;\nproxy_set_header Connection \"\";\nproxy_buffering off;\nproxy_read_timeout 3600s;\nproxy_send_timeout 3600s;\n\n}\n```\nBut, the browser displayed an empty page with errors:\n```bash\nhttp://mydomain.com/umi.51e26180.css 404 not found\nhttp://mydomain.com/umi.01611ea0.js 404 not found\n```\n\nexcept that, everything is ok if I disable nginx, and I can view `http://mydomain.com/` and it redirected to `http://mydomain.com/login`.\n\nI want to use `http://mydomain.com/ragflow` , because i have another service `http://mydomain.com/default` opened up on the port 80, and I need both applications work under mydomain.\n\nany help?\n",
      "state": "open",
      "author": "pamdla",
      "author_type": "User",
      "created_at": "2025-04-16T03:22:07Z",
      "updated_at": "2025-06-18T09:26:49Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7058/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7058",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7058",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:57.048935",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nI found a similar open issue that might be relevant to your problem: [[Question]: build nginx proxy](https://github.com/infiniflow/ragflow/issues/6115) <sup>[[1]](https://github.com/infiniflow/ragflow/issues/6115)</sup>. However, it doesn't have any comments or solutions yet.\n\nTo res",
          "created_at": "2025-04-16T03:23:33Z"
        },
        {
          "author": "pamdla",
          "body": "not work",
          "created_at": "2025-04-16T03:46:29Z"
        },
        {
          "author": "robben009",
          "body": "I also have the same problem, I use http:// a: 80/login can access the interface, but if I configure nginx on another service and want to proxy a, there will be a problem. I want to access http:// b: 17001/my-rag-v1/login can proxy access to http:// a:80/login， But I found that umi.83fcea4e.js autom",
          "created_at": "2025-04-16T06:32:22Z"
        },
        {
          "author": "robben009",
          "body": "I found that umi.83fcea4e.js dynamically generates some js file names, and then loads these generated js files. nginx cannot proxy these dynamically generated js files because they do not use relative paths",
          "created_at": "2025-04-16T06:52:44Z"
        },
        {
          "author": "pamdla",
          "body": "yeah, but Idid not find a way out... kinda complicated if modifying frontend codes...",
          "created_at": "2025-04-17T03:38:43Z"
        }
      ]
    },
    {
      "issue_number": 7993,
      "title": "[Bug]: WORD files could not be viewed in inference column.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nN/A\n\n### RAGFlow image version\n\n0.19.X\n\n### Other environment information\n\n```Markdown\nWIN11+Docker desktop+lm studio.\n```\n\n### Actual behavior\n\nI am using the ragflow knowledge-based Q&A system and have noticed an issue. For documents in the knowledge base that are in PDF format, the cited references in the Q&A responses can be directly opened by clicking with the mouse. I can scroll through the pages using the mouse wheel to browse the entire document. However, for Word documents, I can only zoom in or out on the page, and I cannot use the mouse wheel to scroll through the pages. This results in the text being too small to read, making it impossible to achieve the purpose of viewing the document.\n我在使用ragflow基于知识库的问答系统，发现一个问题，即对于知识库中的文档是PDF的，则在问答回复结果中的引用文献，可以直接鼠标点击打开，通过鼠标滚轮上下翻页，可浏览全文；如果是WORD文档，则只能通过缩放页面方式，无法用滚轮实现上下翻页，导致文档文字过小，无法实现查看的目的。\n\n![Image](https://github.com/user-attachments/assets/36b59ef4-7040-4a78-b32f-54105d0c8ace)\n![Image](https://github.com/user-attachments/assets/b862e2c8-80f5-4ab6-b838-4c20b95296a5)\n![Image](https://github.com/user-attachments/assets/1171cd46-f990-4deb-b339-4f7d5018831e)\n![Image](https://github.com/user-attachments/assets/eab7b5f4-ac56-4b81-ab0d-f24b56effff8)\n\n### Expected behavior\n\nI can view  WORD files as PDF files.\n\n### Steps to reproduce\n\n```Markdown\nupload PDF and WORD files, use chat to let llm answer question baseed on the files, click the infernce column.\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "Simonqujian78",
      "author_type": "User",
      "created_at": "2025-05-31T06:08:21Z",
      "updated_at": "2025-06-18T09:14:04Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7993/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "cike8899"
      ],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7993",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7993",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:57.306461",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYour experience matches the current limitations of RAGFlow: only PDF files and images support full preview and scrolling in the inference column. Word documents (.docx) are converted to HTML for display using the \"mammoth\" library, but this approach does not provide the same scrollin",
          "created_at": "2025-05-31T06:10:21Z"
        },
        {
          "author": "Simonqujian78",
          "body": "> Your experience matches the current limitations of RAGFlow: only PDF files and images support full preview and scrolling in the inference column. Word documents (.docx) are converted to HTML for display using the \"mammoth\" library, but this approach does not provide the same scrolling or page navi",
          "created_at": "2025-05-31T06:29:26Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nHere’s technical advice and possible implementation approaches for improving Word document viewing in RAGFlow:\n\nCurrently, RAGFlow uses the \"mammoth\" library to convert Word (.docx) files to HTML, then renders the entire document as a single HTML block inside a scrollable container. ",
          "created_at": "2025-05-31T06:35:45Z"
        },
        {
          "author": "Simonqujian78",
          "body": "Thanks for your reply. I jsut try to use dify, it can show all type of files, so I hope you can improve the software.",
          "created_at": "2025-06-01T12:41:22Z"
        },
        {
          "author": "Murray132",
          "body": "> Your experience matches the current limitations of RAGFlow: only PDF files and images support full preview and scrolling in the inference column. Word documents (.docx) are converted to HTML for display using the \"mammoth\" library, but this approach does not provide the same scrolling or page navi",
          "created_at": "2025-06-18T09:13:49Z"
        }
      ]
    },
    {
      "issue_number": 8275,
      "title": "[Question]: `KeyError: 'base_url'` when submitting llama3.2 Chat Model",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nWhen submitting LLM models via the GUI, I am unable to submit:\n\nModel Type: chat\nModel Name: llama3.2\nBase URL: http://host.docker.internal:11434/v1\n\nIt shows the error: `KeyError: 'base_url'`.\n\nHowever, I was able to submit bge-m3 with the same base URL:\n\nModel Type: embedding\nModel Name: bge-m3\nBase URL: http://host.docker.internal:11434/v1\n\nwithout any error.\n\nWhy?\n",
      "state": "closed",
      "author": "Promethean-Pty-Ltd",
      "author_type": "User",
      "created_at": "2025-06-15T13:34:39Z",
      "updated_at": "2025-06-18T08:04:46Z",
      "closed_at": "2025-06-18T08:04:46Z",
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8275/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8275",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8275",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:57.522416",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @Promethean-Pty-Ltd! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThe `KeyError: 'base_url'` happens for chat models like llama3.2 because of how the backend and model classes handle the `base_url` parameter. For chat models, the cod",
          "created_at": "2025-06-15T13:38:07Z"
        },
        {
          "author": "Woody-Hu",
          "body": "Intersting I can not reproduce at my local, can you show how you config at your UI? Thanks\n",
          "created_at": "2025-06-16T02:23:34Z"
        },
        {
          "author": "asiroliu",
          "body": "@Promethean-Pty-Ltd \nTry removing the **v1** suffix.\n```\nhttp://host.docker.internal:11434/\n```",
          "created_at": "2025-06-16T09:36:49Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Pull the `nightly` version of docker image again or apply the latest code.",
          "created_at": "2025-06-18T03:52:15Z"
        },
        {
          "author": "Promethean-Pty-Ltd",
          "body": "FYI: A clean reinstall resolved this.",
          "created_at": "2025-06-18T06:11:40Z"
        }
      ]
    },
    {
      "issue_number": 7995,
      "title": "[Bug]: Memory leak ? after updating to v0.19.0",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n6ca1aef\n\n### RAGFlow image version\n\nv0.19.0 slim\n\n### Other environment information\n\n```Markdown\nGCP VM\nn2-highmem-2 (2 vCPU, 16 Gb memory)\nIntel Cascade Lake\n```\n\n### Actual behavior\n\n![Image](https://github.com/user-attachments/assets/493f9b17-0000-4b95-b44f-1b36bed9e397)\nThe memory usage is slowly increasing to 100% then crashing / being unusuably slow \nI have to restart docker to reset the memory usage but it still keep increasing slowly\nThis is a production deployment where I use the API for the agents, I am not parsing / processing any knowledge base, but just using the agents with the API. Even when there is no usage of my API at night the memory usage is still increasing (even without doing anything)\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nV0.19.0-slim\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "CeritAli",
      "author_type": "User",
      "created_at": "2025-05-31T12:06:25Z",
      "updated_at": "2025-06-18T08:01:43Z",
      "closed_at": "2025-06-08T18:54:43Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 16,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7995/reactions",
        "total_count": 5,
        "+1": 5,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7995",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7995",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:59.318890",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThere are no existing issues or discussions specifically about memory leaks in RAGFlow v0.19.0, but there is a related report of high memory usage by the task executor even when not parsing files. In that case, the maintainer suggested using the \"slim\" Docker image to reduce memory u",
          "created_at": "2025-05-31T12:09:35Z"
        },
        {
          "author": "CeritAli",
          "body": "I have looked at my docker stats and interestingly it is mini IO that keeps increasing its usage even when no usage of agents via API",
          "created_at": "2025-05-31T13:38:30Z"
        },
        {
          "author": "sinopec",
          "body": "I found the same problem , but my main problem is task_executor program, when thousands of task with grparhrag is being  executed,the memory is memory usage is continuously increasing. \nI start 4 task_executor ,each takes about 11G~14G physicla mem, and is still increasing without ending.",
          "created_at": "2025-05-31T14:04:57Z"
        },
        {
          "author": "sinopec",
          "body": "> I found the same problem , but my main problem is task_executor program, when thousands of task with grparhrag is being executed,the memory is memory usage is continuously increasing. I start 4 task_executor ,each takes about 11G~14G physicla mem, and is still increasing without ending.\n\nEven with",
          "created_at": "2025-06-01T01:54:58Z"
        },
        {
          "author": "LCHONE",
          "body": "I also found the same problem. May I ask if there was no memory leak problem in the previous version?",
          "created_at": "2025-06-01T16:07:06Z"
        }
      ]
    },
    {
      "issue_number": 8156,
      "title": "[Feature Request]: The Qwen3-Reranker-8B model deployed by vllm cannot be added.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\n提示 : 102\nFail to access model(Qwen/Qwen3-Reranker-8B).'NoneType' object is not iterable\n\nThe vllm deployment has been completed. The above is the error message for the connection. The current version is 0.19.\n```\n\n### Describe the feature you'd like\n\nSupport Qwen3-Reranker-8B as soon as possible\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "kou1584423647",
      "author_type": "User",
      "created_at": "2025-06-10T07:39:40Z",
      "updated_at": "2025-06-18T05:58:59Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8156/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8156",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8156",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:59.519437",
      "comments": [
        {
          "author": "ZhenhangTung",
          "body": "@kou1584423647 Noted.",
          "created_at": "2025-06-11T03:54:43Z"
        },
        {
          "author": "yingfeng",
          "body": "RAGFlow does not care what kind of reranker model is used when reranker is deployed behind vllm. You can just choose cohere API which provided by vllm such that Qwen3-reranker can be accessed through RAGFlow ",
          "created_at": "2025-06-11T04:04:21Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Could you please paste the back-end error log stack here?",
          "created_at": "2025-06-11T04:29:22Z"
        },
        {
          "author": "crown-hg-h",
          "body": "2025-06-11 15:52:03,586 INFO     20 192.168.0.6 - - [11/Jun/2025 15:52:03] \"POST /v1/llm/add_llm HTTP/1.1\" 200 -\n2025-06-11 15:52:07,310 INFO     20 HTTP Request: POST http://192.168.23.247:2026/rerank \"HTTP/1.1 200 OK\"\n2025-06-11 15:52:07,311 ERROR    20 \nFail to access model(Qwen/Qwen3-Reranker-0.",
          "created_at": "2025-06-11T07:59:05Z"
        },
        {
          "author": "SendDreams",
          "body": "How can I add a large model I built with vllm in ragflow",
          "created_at": "2025-06-16T08:27:14Z"
        }
      ]
    },
    {
      "issue_number": 8307,
      "title": "Sandbox standalone errors",
      "body": "Could not install 'sandbox' without fixing :\n\nhttps://github.com/infiniflow/ragflow/blob/main/sandbox/executor_manager/Dockerfile#L18\nfixed to : \nCOPY . .\n\nhttps://github.com/infiniflow/ragflow/blob/main/sandbox/docker-compose.yml#L21C1-L21C92\nfixed to : \n      - SANDBOX_BASE_PYTHON_IMAGE=${SANDBOX_BASE_PYTHON_IMAGE-sandbox-base-python:latest}\n\nhttps://github.com/infiniflow/ragflow/blob/main/sandbox/docker-compose.yml#L22C1-L22C92\nfixed to:\n      - SANDBOX_BASE_NODEJS_IMAGE=${SANDBOX_BASE_NODEJS_IMAGE-sandbox-base-nodejs:latest}\n\nJust need to include this on the README.md on the \"Running Standalone\" section",
      "state": "closed",
      "author": "RafaelFFAumo",
      "author_type": "User",
      "created_at": "2025-06-16T20:45:32Z",
      "updated_at": "2025-06-18T05:33:55Z",
      "closed_at": "2025-06-18T05:33:55Z",
      "labels": [
        "📖 documentation"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8307/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8307",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8307",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:59.730922",
      "comments": [
        {
          "author": "yongtenglei",
          "body": "Hi @RafaelFFAumo,\n\nThank you for reporting this issue, it has been fixed by #8340.\n\nCheers!",
          "created_at": "2025-06-18T03:49:38Z"
        }
      ]
    },
    {
      "issue_number": 5157,
      "title": "Not able to add bge-m3 as the embedding model.",
      "body": "### Is there an existing issue for the same bug?\n\n- [x] I have checked the existing issues.\n\n### RAGFlow workspace code commit ID\n\n0\n\n### RAGFlow image version\n\nv0.16.0\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nEven if bge-m3 is visible in the ollama model list. I am not able to add it as the embedding model. I was able to add llama3.2 as chat model. I am using the full version (v0.16.0) of RAGflow.\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nCreate a ollama environment in docker and pull llama3.2 and bge-m3 models in it.\nCompose the full version of RAGflow (v0.16.0) (by editing the Docker/.env file) in docker.\nLogin into RAGflow and add a ollama model with llama3.2 as the chat model. It worked for me.\nNow when I try to add bge-m3 as the embeddiong model, it says,\"Not able to find bge-m3. Try pulling it first.\"\nAlthough in this video, the person was able to add it. (https://www.youtube.com/watch?v=kAuVcCwqgwQ)\nI dont know what wrong I am doing.\n```\n\n### Additional information\n\n![Image](https://github.com/user-attachments/assets/01aa2658-2d03-462d-8b48-dc8541fb6afe)",
      "state": "closed",
      "author": "Sagaljyotsingh",
      "author_type": "User",
      "created_at": "2025-02-19T22:04:34Z",
      "updated_at": "2025-06-18T05:23:37Z",
      "closed_at": "2025-02-26T06:10:01Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 10,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/5157/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/5157",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/5157",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:44:59.921499",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "Could you paste screen shot of error message here?",
          "created_at": "2025-02-20T04:48:32Z"
        },
        {
          "author": "Sagaljyotsingh",
          "body": "> Could you paste screen shot of error message here?\n\nHi, I just pasted a screenshot.",
          "created_at": "2025-02-20T13:09:32Z"
        },
        {
          "author": "KevinHuSh",
          "body": "What about pulling it again?\nThe error message is from Ollama.\n```\nollama pull bge-m3\n```",
          "created_at": "2025-02-21T06:28:24Z"
        },
        {
          "author": "Sagaljyotsingh",
          "body": "> What about pulling it again?\n> The error message is from Ollama.\n> ```\n> ollama pull bge-m3\n> ```\n\nI have tried pulling again. I can see the model's name in the ollama list of models. I have 2 models (llama3.2 and bge-m3) in the list. RAGflow is able to find llama3.2 but not bge-m3.\n",
          "created_at": "2025-02-21T15:30:02Z"
        },
        {
          "author": "mukul-s-saini",
          "body": "The error logged on ragflow server:\n`2025-02-22 00:49:37 2025-02-22 03:19:37,666 INFO     18 HTTP Request: POST http://host.docker.internal:11434/api/embeddings \"**HTTP/1.1 404 Not Found**\"\n2025-02-22 00:49:37 2025-02-22 03:19:37,667 ERROR    18 \n2025-02-22 00:49:37 Fail to access embedding model(bg",
          "created_at": "2025-02-21T19:29:47Z"
        }
      ]
    },
    {
      "issue_number": 6978,
      "title": "[Question]: How do I allow multiple people to log in to the same account at the same time?Thx.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI did not find the corresponding configuration item in the configuration document.\n\n",
      "state": "open",
      "author": "axdwss",
      "author_type": "User",
      "created_at": "2025-04-11T12:49:47Z",
      "updated_at": "2025-06-18T05:06:35Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/6978/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/6978",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/6978",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:00.106591",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHello @axdwss! 👋 I'm [Dosu](https://dosu.dev), a bot here to help you solve bugs, answer questions, and assist you in becoming a contributor. I'm here while you wait for a human maintainer. How can I assist you today?\n\n<!-- Answer -->\nThe RAGFlow codebase supports concurrent logins",
          "created_at": "2025-04-11T12:51:18Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Not supported yet.",
          "created_at": "2025-04-14T08:16:04Z"
        },
        {
          "author": "zlt999",
          "body": "> Not supported yet.\n\n@KevinHuSh I'd like to stay logged in across multiple devices simultaneously. However, it seems that logging in on a new device logs out my other active sessions, forcing me to sign in again manually.\n\nI suppose it is essentially the same feature as the question. Not sure if it",
          "created_at": "2025-06-18T03:03:39Z"
        }
      ]
    },
    {
      "issue_number": 8256,
      "title": "[Bug]: Why do the HTTP API and RAGFlow interface return different results? Are there any solutions?​",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n23d\n\n### RAGFlow image version\n\nv0.9\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nWhy do the HTTP API and RAGFlow interface return different results? Are there any solutions?​\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nWhy do the HTTP API and RAGFlow interface return different results? Are there any solutions?​\n```\n\n### Additional information\n\nWhy do the HTTP API and RAGFlow interface return different results? Are there any solutions?​",
      "state": "open",
      "author": "Lxhnnn",
      "author_type": "User",
      "created_at": "2025-06-13T08:57:50Z",
      "updated_at": "2025-06-18T04:33:35Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8256/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8256",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8256",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:00.305959",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe HTTP API and the RAGFlow interface can return different results because they don't always use the same endpoints or context. The Python SDK (RAGFlow interface) expects RESTful endpoints like `/chats/{chat_id}/completions` and `/agents/{agent_id}/completions`, but the backend actu",
          "created_at": "2025-06-13T09:00:56Z"
        },
        {
          "author": "asiroliu",
          "body": "@Lxhnnn \nCould you provide specific examples that illustrate the differences between the HTTP API and RAGFlow interface responses?",
          "created_at": "2025-06-16T09:35:17Z"
        },
        {
          "author": "Lxhnnn",
          "body": "> [@Lxhnnn](https://github.com/Lxhnnn) Could you provide specific examples that illustrate the differences between the HTTP API and RAGFlow interface responses?\n\n**user RAGFlow interface：**\n**question: pm2.5和pm10倒挂原因**\n\nPM2.5 和 PM10 倒挂是指在某些情况下，细颗粒物（PM2.5）的浓度反而低于可吸入颗粒物（PM10）的浓度。这种现象通常与气象条件、污染源特征、监测误差",
          "created_at": "2025-06-18T01:19:45Z"
        },
        {
          "author": "asiroliu",
          "body": "Could you please provide the parameters for your HTTP API and SDK?",
          "created_at": "2025-06-18T02:11:12Z"
        },
        {
          "author": "Lxhnnn",
          "body": "agent python SDK\n```\nfrom ragflow_sdk import RAGFlow, Agent\ninput_session_id = \"abv123\"\nsession_dict = {}\nrag_object = RAGFlow(api_key=\"ragflow-Y2OTFiM\"**, base_url=\"http://10.0.**\")\nAGENT_id = \"97612ef1**\"\nagent = rag_object.list_agents(id = AGENT_id)[0]\nif session_dict.get(input_session_id, None) ",
          "created_at": "2025-06-18T02:18:16Z"
        }
      ]
    },
    {
      "issue_number": 8257,
      "title": "[Bug][question]: The speed of slicing new documents into the graph database is very slow. The nodes and edges of the sliced graph are displayed, but it will eventually fail.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n6ca1aef\n\n### RAGFlow image version\n\n6ca1aef(v0.19.0)\n\n### Other environment information\n\n```Markdown\nOS: ubuntu & macOS\n```\n\n### Actual behavior\n\nThe use of generating knowledge graphs in the knowledge base, such as custom entities, entity normalization, and community report generation, is relatively slow. It can be seen from the log of the task that the entities and relationships of the knowledge graph have been generated, but ultimately the knowledge graph cannot be saved.\n在知识库中使用生成知识图谱【自定义实体、实体归一化、社区报告生成】，速度较慢。在任务的log中可以看出来已经生成了知识图谱的实体和关系，但是最终无法保存知识图谱。\n\nIt has been checked that it is not an issue with the Alibaba Cloud API. However, none of the files could be cut out into a knowledge graph, but one file was successful yesterday.\n已经检查了不是阿里云API的问题。但是文件都不能剪切出来知识图谱，但昨天有一个文件成功。\n\n--- log into\n开始于:\nFri, 13 Jun 2025 15:05:33 GMT\n持续时间:\n1574.94 s\n进度:\n15:05:48 Task has been received.\n15:14:26 Page(1~6): Start to parse.\n15:15:38 Page(1~6): Finish parsing.\n15:15:38 Page(1~6): Generate 5 chunks\n15:15:39 Page(1~6): Embedding chunks (1.20s)\n15:15:39 Page(1~6): Indexing done (0.09s). Task done (590.00s)\n15:15:40 created task graphrag\n15:15:40 Task has been received.\n15:29:05 Entities extraction of chunk 4 1/5 done, 10 nodes, 12 edges, 13578 tokens.\n15:29:05 Entities extraction of chunk 3 2/5 done, 34 nodes, 10 edges, 21912 tokens.\n15:29:05 Entities extraction of chunk 1 3/5 done, 28 nodes, 12 edges, 16776 tokens.\n15:29:05 Entities extraction of chunk 0 4/5 done, 34 nodes, 3 edges, 18183 tokens.\n15:30:48 Entities extraction of chunk 2 5/5 done, 87 nodes, 27 edges, 31412 tokens.\n15:30:48 Entities and relationships extraction done, 188 nodes, 64 edges, 101861 tokens, 906.54s.\n15:30:48 Entities merging done, 0.02s.\n15:30:48 Relationships merging done, 0.01s.\n15:30:48 ignored 15 relations due to missing entities.\n15:30:48 generated subgraph for doc 55741360480111f0b86cf6e5811846e6 in 906.73 seconds.\n15:31:42 run_graphrag 55741360480111f0b86cf6e5811846e6 graphrag_task_lock acquired\n15:31:43 set_graph removed 0 nodes and 0 edges from index in 0.01s.\n15:31:46 [ERROR][Exception]: Exceptions from Trio nursery (1 sub-exception) -- Account abnormal. Please ensure it's on good standing to use QWen's text-embedding-v2\n--- log out\n\n### Expected behavior\n\nStable and rapid generation of knowledge graphs\n\n### Steps to reproduce\n\n```Markdown\n1. Enter the knowledge base and select Generate Knowledge Graph (Custom Entity, Entity Normalization, Generate Community Report)\n1. 进入知识库，选择生成知识图谱（自定义实体、实体归一化、生成社区报告）\n\n2. Upload the document in this knowledge base and parse it, then wait for the result to be reproduced\n2. 在该知识库中上传文档并解析，等待结果复现\n```\n\n### Additional information\n\n![Image](https://github.com/user-attachments/assets/a1a079fa-f0a6-496c-8276-dc05994e4516)",
      "state": "open",
      "author": "NorthSeven-02",
      "author_type": "User",
      "created_at": "2025-06-13T09:02:27Z",
      "updated_at": "2025-06-18T04:06:23Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8257/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8257",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8257",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:00.514526",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @NorthSeven-02! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nYour logs show that entity extraction and graph generation are extremely slow, and the final failure is due to an \"Account abnormal\" error with QWen's text-embedding-v2. Th",
          "created_at": "2025-06-13T09:04:21Z"
        },
        {
          "author": "KevinHuSh",
          "body": "For the error message screenshot, please setup a valid embedding provider.",
          "created_at": "2025-06-18T04:06:23Z"
        }
      ]
    },
    {
      "issue_number": 8274,
      "title": "[Question]: When will OCR be upgraded?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nPPOCRV5 has been announced, when will the OCR model of PPOCRV5 version be used",
      "state": "open",
      "author": "youde2000",
      "author_type": "User",
      "created_at": "2025-06-15T08:27:15Z",
      "updated_at": "2025-06-18T04:03:45Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8274/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8274",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8274",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:00.736899",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "Let's schedule that.",
          "created_at": "2025-06-18T04:03:45Z"
        }
      ]
    },
    {
      "issue_number": 8285,
      "title": "[Bug]: Okta login would return \"invalid_state\" while started multiple dev instances",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nv0.19.0\n\n### RAGFlow image version\n\nv0.19.0\n\n### Other environment information\n\n```Markdown\nNginx ingress controller -> ragflow in k8s deployment\n```\n\n### Actual behavior\n\nWhile I try to login, it would return error \"invalid_state\" and sometimes the backend would see the error logs (not 100% for each time):\n\n```\n2025-06-15 18:54:12,446 WARNING  18 load_user got exception Signature b'lZ5WvNd2qbLE-aYKVspXFiM_2HE' does not match\n2025-06-15 18:54:12,447 ERROR    18 401 Unauthorized: The server could not verify that you are authorized to access the URL requested. You either supplied the wrong credentials (e.g. a bad password), or your browser doesn't understand how to supply the credentials required.\nTraceback (most recent call last):\n  File \"/ragflow/.venv/lib/python3.10/site-packages/flask/app.py\", line 880, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"/ragflow/.venv/lib/python3.10/site-packages/flask/app.py\", line 865, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n  File \"/ragflow/.venv/lib/python3.10/site-packages/flask_login/utils.py\", line 285, in decorated_view\n    return current_app.login_manager.unauthorized()\n  File \"/ragflow/.venv/lib/python3.10/site-packages/flask_login/login_manager.py\", line 178, in unauthorized\n    abort(401)\n  File \"/ragflow/.venv/lib/python3.10/site-packages/flask/helpers.py\", line 272, in abort\n    current_app.aborter(code, *args, **kwargs)\n  File \"/ragflow/.venv/lib/python3.10/site-packages/werkzeug/exceptions.py\", line 863, in __call__\n    raise self.mapping[code](*args, **kwargs)\nwerkzeug.exceptions.Unauthorized: 401 Unauthorized: The server could not verify that you are authorized to access the URL requested. You either supplied the wrong credentials (e.g. a bad password), or your browser doesn't understand how to supply the credentials required.\n\n```\n\nAnd when I scaled in ragflow instances from 2 -> 1, the issue resolved and I could login as normal.\n\n\n### Expected behavior\n\nCould login even though we started multiple instances\n\n### Steps to reproduce\n\n```Markdown\n1. start multiple instances and ragflow integrated with okta sso;\n2. try to login\n```\n\n### Additional information\n\nI've asked ChatGPT and it said this issue was caused by the state stored in a temp session per ragflow instance, see [code](https://github.com/infiniflow/ragflow/blob/de89b84/api/apps/user_app.py#L164) .",
      "state": "open",
      "author": "Colstuwjx",
      "author_type": "User",
      "created_at": "2025-06-16T05:28:25Z",
      "updated_at": "2025-06-18T04:02:26Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8285/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8285",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8285",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:00.944006",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThis happens because RAGFlow stores OAuth state in the Flask session, which by default uses a local filesystem backend. In a multi-instance setup (like Kubernetes), each instance has its own session storage, so the OAuth state from the login request may not be available on the instan",
          "created_at": "2025-06-16T05:32:01Z"
        },
        {
          "author": "KevinHuSh",
          "body": "The different instances should have same `SECRET_KEY`.",
          "created_at": "2025-06-18T04:02:25Z"
        }
      ]
    },
    {
      "issue_number": 8298,
      "title": "[Question]: How can I add a large model I built with vllm in ragflow",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nHow can I add a large model I built with vllm in ragflow",
      "state": "open",
      "author": "SendDreams",
      "author_type": "User",
      "created_at": "2025-06-16T08:23:42Z",
      "updated_at": "2025-06-18T03:47:27Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8298/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8298",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8298",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:01.131105",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @SendDreams! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nYou can add a large model built with vllm to RAGFlow as long as your vllm deployment exposes an OpenAI-compatible API endpoint (for example, by running vllm with `python -m vl",
          "created_at": "2025-06-16T08:27:06Z"
        },
        {
          "author": "SendDreams",
          "body": "> Hi [@SendDreams](https://github.com/SendDreams)! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n> \n> You can add a large model built with vllm to RAGFlow as long as your vllm deployment exposes an OpenAI-compatible API endpoint (for example, by running vllm with `python ",
          "created_at": "2025-06-16T08:38:13Z"
        },
        {
          "author": "SendDreams",
          "body": "> Hi [@SendDreams](https://github.com/SendDreams)! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n> \n> You can add a large model built with vllm to RAGFlow as long as your vllm deployment exposes an OpenAI-compatible API endpoint (for example, by running vllm with `python ",
          "created_at": "2025-06-16T08:48:20Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Is that feasible?\n\n![Image](https://github.com/user-attachments/assets/f864b2aa-476f-44b7-b553-2aef83b449e2)",
          "created_at": "2025-06-18T03:47:27Z"
        }
      ]
    },
    {
      "issue_number": 8311,
      "title": "[Question]: Text2SQL agent running with error: \"the JSON object must be str, bytes or bytearray, not float\"",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nHello,\n\nI launched RagFlow nightly version by docker. And I followed the instruction (https://ragflow.io/docs/v0.19.0/text2sql_agent) to build the text2SQL agent demo.\n\nMy system configuration information as following:\n1. Machine is M2 Mac\n2. The chat LLM is deepseek-r1 API\n3. Embedding model is BAAI/bge-large-zh-v1.5\n\nThe error \"the JSON object must be str, bytes or bytearray, not float\" was reported when I run the agent. Please refer to the following screenshot. Please kind provide solution to solve it. Thanks.\n\n![Image](https://github.com/user-attachments/assets/e007f1ec-a312-41cd-a17e-e1e1b304d1bd)",
      "state": "open",
      "author": "mobguang",
      "author_type": "User",
      "created_at": "2025-06-17T03:26:55Z",
      "updated_at": "2025-06-18T03:18:05Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8311/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8311",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8311",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:01.330057",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe error \"the JSON object must be str, bytes or bytearray, not float\" happens when a float value is passed to a JSON function expecting a string. In the Text2SQL agent, this usually means that somewhere in the pipeline, a float (or other non-string type) is ending up in a field—ofte",
          "created_at": "2025-06-17T03:30:33Z"
        },
        {
          "author": "mobguang",
          "body": "@dosu,\n\nI just executed a simple query: \"售价最高的是哪个商品\", but the same error still existed.\n\n![Image](https://github.com/user-attachments/assets/9260c1aa-7c87-461e-acfb-bd67a8e48540)\n\n**The console output as following:**\n2025-06-17 11:32:10,054 INFO     29 172.18.0.6 - - [17/Jun/2025 11:32:10] \"POST /v1",
          "created_at": "2025-06-17T03:37:11Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Noted. We're refining and refactoring this part.",
          "created_at": "2025-06-18T03:18:05Z"
        }
      ]
    },
    {
      "issue_number": 8233,
      "title": "[Bug]:   \"embedding_model\": \"bge-m3@OpenAI-API-Compatible\" is not support with dataset creation .",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n6ca1aef\n\n### RAGFlow image version\n\nV0.19\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\n via api for create a dataset with the parmenter:        \"embedding_model\": \"bge-m3@OpenAI-API-Compatible\",\nit will return :\n{\n    \"code\": 101,\n    \"message\": \"Unsupported model: <bge-reranker-v2-m3@GPUStack>\"\n}\n\nbut it is normal when we use other @factorys., such as \"embedding_model\": \"bge-m3@Jina\"\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\ncurl --location --request POST 'http://172.16.180.217/api/v1/datasets' \\\n--header 'Authorization: Bearer ragflow-IzMjZmMDJlNDVlZDExZjBhNGEyMDI0Mm' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{\n          \"name\": \"test_KB_Doc1111\",\n          \"embedding_model\": \"bge-m3@Jina\",\n          \"chunk_method\": \"naive\",\n          \"parser_config\": {\n              \"chunk_token_num\": 128,\n              \"delimiter\": \"\\\\n\",\n              \"layout_recognize\": \"DeepDOC\",\n              \"html4excel\": false,\n              \"raptor\": {\"use_raptor\": false},\n              \"graphrag\": {\"use_graphrag\": false}\n          },\n          \"permission\": \"team\",\n          \"pagerank\": 0\n     }'\n\n{\n    \"code\": 101,\n    \"message\": \"Unsupported model: <bge-reranker-v2-m3@GPUStack>\"\n}\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "tangwenhuatommy",
      "author_type": "User",
      "created_at": "2025-06-12T11:50:54Z",
      "updated_at": "2025-06-18T03:15:29Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 9,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8233/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8233",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8233",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:01.569732",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @tangwenhuatommy! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThe model identifier \"bge-m3@OpenAI-API-Compatible\" isn't supported for dataset creation in your RAGFlow setup because it's not registered as a valid embedding model in t",
          "created_at": "2025-06-12T11:54:11Z"
        },
        {
          "author": "asiroliu",
          "body": "We sincerely apologize that this issue was introduced in #7451 and has now been fixed in #8069.\n\nCurrently, only version v0.19.0 is affected. You have two options to resolve this:\n\n1. Manually modify the corresponding code in docker and restart your Docker container\n2. Use the nightly Docker image i",
          "created_at": "2025-06-13T06:24:35Z"
        },
        {
          "author": "yiguui",
          "body": "@asiroliu Is it recommended to use the nightly Docker image for production environments?",
          "created_at": "2025-06-13T07:56:59Z"
        },
        {
          "author": "asiroliu",
          "body": "For production environments, we recommend directly modifying the code instead of using the nightly build, as it hasn't undergone comprehensive testing.\n\n\n1. modify code\n```\n$ docker exec -it ragflow-server bash\n$ vi api/utils/api_utils.py \n```\n\n - refer to #8069:\n<img width=\"2394\" alt=\"Image\" src=\"h",
          "created_at": "2025-06-13T09:08:15Z"
        },
        {
          "author": "Jialiang123",
          "body": "I tried to modify the code as above, but specifying the custom model still gave an error\n\n![Image](https://github.com/user-attachments/assets/f9e40800-653b-44b0-a447-8036c5e19bb8)",
          "created_at": "2025-06-17T08:34:12Z"
        }
      ]
    },
    {
      "issue_number": 8319,
      "title": "[Question]:",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nWhen I used the HTTP API of RagFlow to create a knowledge base, I specified the embedding model in the format \"Qwen3-Emedding-4B@VLLM,\" but it displayed the error: {'code': 101, 'message': 'Unsupported model: <Qwen3-Emedding-4B@VLLM>'}.",
      "state": "open",
      "author": "Jialiang123",
      "author_type": "User",
      "created_at": "2025-06-17T07:02:46Z",
      "updated_at": "2025-06-18T03:14:38Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8319/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8319",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8319",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:01.750756",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @Jialiang123! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThe error happens because \"Qwen3-Emedding-4B@VLLM\" isn't registered as a supported embedding model in RagFlow's configuration. Only models explicitly listed in the config (li",
          "created_at": "2025-06-17T07:05:40Z"
        },
        {
          "author": "KevinHuSh",
          "body": "I guess you need to add that LLM provider firstly via web UI.",
          "created_at": "2025-06-18T03:14:37Z"
        }
      ]
    },
    {
      "issue_number": 8008,
      "title": "[Question]: How to import and export the data for ragflow system",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI want to move the ragflow system from old PC to new one, I don't know how to export the data from the old PC and import them into the new PC, could you help to provide the guidelines for it ?\nInclude the following:\n1. what kind of data should I export and import ?\n2. How to do for each part ?\n3. Is there a function or script to do this easily ?\n\n",
      "state": "open",
      "author": "XiaodeZhuang",
      "author_type": "User",
      "created_at": "2025-06-03T02:05:55Z",
      "updated_at": "2025-06-18T03:10:39Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8008/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8008",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8008",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:01.933474",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nTo move your RAGFlow system from one PC to another, you need to export and import data from three main components: MinIO (file storage), MySQL (database), and Elasticsearch (knowledge graph chunks). Here’s how to handle each part:\n\n**1. What kind of data should you export/import?**  ",
          "created_at": "2025-06-03T02:11:30Z"
        },
        {
          "author": "XiaodeZhuang",
          "body": "elasticdump --input=http://elastic:infini_rag_flow@localhost:1200/ragflow_<your index name> --output=./es-analyzer.json --type=analyzer\nelasticdump --input=http://elastic:infini_rag_flow@localhost:1200/ragflow_<your index name> --output=./es-mapping.json --type=mapping\nelasticdump --input=http://ela",
          "created_at": "2025-06-04T02:41:59Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nIn RAGFlow, Elasticsearch index names follow the pattern ragflow_<unique_id>. The unique_id is typically related to your tenant or knowledge base. To find the actual index names in your Elasticsearch instance, you can list all indices using the Elasticsearch API:\n\n```bash\ncurl -u ela",
          "created_at": "2025-06-04T02:44:22Z"
        },
        {
          "author": "XiaodeZhuang",
          "body": "I am using docker based deployment for ragflow, so if I backup all the mapping folders , I could backup the whole system and restore to another PC ?",
          "created_at": "2025-06-18T03:08:42Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nBacking up only the \"mapping folders\" is not enough to fully back up and restore your RAGFlow system on Docker. RAGFlow stores its data across several components: MinIO (file storage), MySQL (database), and Elasticsearch (search/index data), each using separate Docker volumes or dire",
          "created_at": "2025-06-18T03:10:39Z"
        }
      ]
    },
    {
      "issue_number": 8122,
      "title": "[Bug]: EXTREME HIGH  CPU while using OLLAMA after upgrating ragflow to 0.19",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nno\n\n### RAGFlow image version\n\n0.19.0\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nEXTREME HIGH  CPU while using OLLAMA after upgrating ragflow to 0.19.\nIt seems that the ragflow not using GPU but CPU while running the ollama.\nThere was no such problem when the version of ragflow is 0.17.0.\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nusing ollama in ragflow0.19.0\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "RNGMARTIN",
      "author_type": "User",
      "created_at": "2025-06-09T00:23:27Z",
      "updated_at": "2025-06-18T00:48:05Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 9,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8122/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8122",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8122",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:07.121005",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nHigh GPU usage with Ollama in RAGFlow 0.19.0 is a known issue and has been discussed in several threads. The main causes are often related to how RAGFlow configures Ollama model options like context size, batch size, and memory mapping, which can significantly increase VRAM/GPU usage",
          "created_at": "2025-06-09T00:26:08Z"
        },
        {
          "author": "RNGMARTIN",
          "body": "@KevinHuSh  It's quite urgent. I want to use the function of 0.19 but I cannot use it with this problem exist.",
          "created_at": "2025-06-09T00:28:44Z"
        },
        {
          "author": "KevinHuSh",
          "body": "```\nOLLAMA_KEEP_ALIVE=-1 ollama serve\n```\nOR,\n```\nollama run llama3.1:70b --keepalive=-1m\n```\nOR,\nalter the code back from https://github.com/infiniflow/ragflow/commit/5b626870d05167026049c6ccf122494971459ee5",
          "created_at": "2025-06-09T02:22:02Z"
        },
        {
          "author": "RNGMARTIN",
          "body": "> ```\n> OLLAMA_KEEP_ALIVE=-1 ollama serve\n> ```\n> \n> OR,\n> \n> ```\n> ollama run llama3.1:70b --keepalive=-1m\n> ```\n> \n> OR, alter the code back from [5b62687](https://github.com/infiniflow/ragflow/commit/5b626870d05167026049c6ccf122494971459ee5)\n\nthanks. I will take a try.",
          "created_at": "2025-06-09T02:24:22Z"
        },
        {
          "author": "RNGMARTIN",
          "body": "@KevinHuSh I have tried all three ways you had given, none of them works. The problem still exist. I wonder why such problem would exist? For version0.17.0 it was completely OK.",
          "created_at": "2025-06-09T09:58:59Z"
        }
      ]
    },
    {
      "issue_number": 8324,
      "title": "Raptor: [Bug]: **ERROR**: Unknown field for GenerationConfig: max_tokens",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\ndunno\n\n### RAGFlow image version\n\nv0.19.0 slim\n\n### Other environment information\n\n```Markdown\nAMD Ryzen 7700 / 96GB RAM\nProxmox VM - Debian 12\n```\n\n### Actual behavior\n\nError, see below\n\n### Expected behavior\n\nParse the File\n\n### Steps to reproduce\n\n```Markdown\n- Install v0.19.0 slim\n- Assign Embedding / Chat Model\n- Create Knowledge Base\n- Turn on Raptor\n- Upload PDF & Parse\n```\n\n### Additional information\n\nFresh install, just used Ollama with nomic-embed-text:latest for embedding and Google Gemini Pro 2.5 for chat. Ceated a Knowledge Base, turned on Raptor to chek it out. Uploaded my first PDF and hit the \"play\" button to start parsing. Its creating Chunks and fails starting raptor - raptor turned off = working (on a different Knowledge Base, once i turned on Raptor and tried, i get the same error even if i turn raptor off again...).\n\n\nBegin at:\nTue, 17 Jun 2025 10:26:18 GMT\nDuration:\n33.27 s\nProgress:\n10:26:44 Page(1~6): Finish parsing.\n10:26:44 Page(1~6): Generate 4 chunks\n10:26:44 Page(1~6): Embedding chunks (0.27s)\n10:26:44 Page(1~6): Indexing done (0.03s). Task done (23.53s)\n10:26:45 created task raptor\n10:26:46 Task has been received.\n10:26:47 [ERROR][Exception]: Exceptions from Trio nursery (3 sub-exceptions) -- **ERROR**: Unknown field for GenerationConfig: max_tokens",
      "state": "open",
      "author": "Drasek",
      "author_type": "User",
      "created_at": "2025-06-17T08:31:09Z",
      "updated_at": "2025-06-17T09:12:36Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8324/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8324",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8324",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:07.385003",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @Drasek! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThe error happens because the max_tokens field was removed from RAGFlow’s GenerationConfig starting in v0.17.2, and this change is present in v0.19.0 slim as well. The current cod",
          "created_at": "2025-06-17T08:33:42Z"
        },
        {
          "author": "Drasek",
          "body": "Hey @dosu, i am lost - this is a _fresh_ install, only thing i added was 2 ollama models (and connect Google Gemini) and i _need_ to put in \"Max Tokens\" in the UI to add a model with ollama, its a mandatory field. I am not using Hugging Face (directly). Please point me where i need to change the con",
          "created_at": "2025-06-17T08:44:46Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe \"Max Tokens\" field is required for Ollama models in the UI because RAGFlow uses it to set the num_predict parameter for the Ollama API—it’s not optional for Ollama integration and is handled correctly there. The error you’re seeing happens when this max_tokens config leaks into o",
          "created_at": "2025-06-17T08:47:28Z"
        },
        {
          "author": "Drasek",
          "body": "@dosu Switching to Qwen3:32b on ollama solved it thank you. I need a multi language embedding model (for german), thats why i use nomic-embed-text - which platform can i use, which does not require the Max Tokens field to setup to host the embedding model locally, so i am free to choose a big llm fo",
          "created_at": "2025-06-17T09:10:36Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYou can use vLLM to host your multi-language embedding model (like nomic-embed-text) locally—vLLM integration in RAGFlow does not require the \"Max Tokens\" field for embedding models, so you won’t hit the same config issue as with Ollama. This setup lets you run your embedding model l",
          "created_at": "2025-06-17T09:12:36Z"
        }
      ]
    },
    {
      "issue_number": 3685,
      "title": "[Question]: The stream interface of converse with chat assistant returned the full data, how to achieve incremental SSE?",
      "body": "### Describe your problem\n\nI need to get the answer in the streaming data and render it on the page, because the answer returned every time is full, so I need to replace the rendered answer content to achieve incremental update.\r\n\r\nThe problem is that the first half of the returned content is not exactly the same, so I can't replace it. Can you return only incremental data each time, just like the ChatGPT interface? It does not return what has already been returned.",
      "state": "open",
      "author": "tilince",
      "author_type": "User",
      "created_at": "2024-11-27T06:15:13Z",
      "updated_at": "2025-06-17T09:06:06Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/3685/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/3685",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/3685",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:07.614805",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "It needs a lot of alteration both in backend and front-end code.",
          "created_at": "2024-11-28T03:36:21Z"
        },
        {
          "author": "tilince",
          "body": "> It needs a lot of alteration both in backend and front-end code.\r\n\r\nHow does your chat ui work, by overwriting the old content with new content each time？",
          "created_at": "2024-11-28T09:24:46Z"
        },
        {
          "author": "cike8899",
          "body": "> > It needs a lot of alteration both in backend and front-end code.\r\n> \r\n> How does your chat ui work, by overwriting the old content with new content each time？\r\n\r\n![image](https://github.com/user-attachments/assets/a2f69f8d-d358-4c47-a205-05ccb1fc1478)\r\n",
          "created_at": "2024-11-29T07:55:57Z"
        },
        {
          "author": "tilince",
          "body": "> > > It needs a lot of alteration both in backend and front-end code.\r\n> > \r\n> > \r\n> > How does your chat ui work, by overwriting the old content with new content each time？\r\n> \r\n> ![image](https://private-user-images.githubusercontent.com/8089971/391007221-a2f69f8d-d358-4c47-a205-05ccb1fc1478.png?",
          "created_at": "2024-12-02T02:55:58Z"
        },
        {
          "author": "hoharald",
          "body": "Here some snippet doing it the angular way:\n\n```typescript\n\nconst request: CompletionRequest = {\n      question: <your-question>,\n      stream: true,\n      session_id: sessionId\n    };\n\nconst url = `https://<ragflow-host>/api/v1/agents/<your-agent-id>/completions`;\n\nreturn new Observable<CompletionR",
          "created_at": "2025-02-17T09:34:34Z"
        }
      ]
    },
    {
      "issue_number": 8322,
      "title": "[Question]: How to debug ragflow_server.py?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI would like to make some small changes in http API for my own purposes. I would like to run the server in debug mode in vscode or in the container. Please point to me to some documentation or give brief explanation.\n\nThank you.",
      "state": "open",
      "author": "ahmedavid",
      "author_type": "User",
      "created_at": "2025-06-17T07:43:48Z",
      "updated_at": "2025-06-17T07:46:43Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8322/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8322",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8322",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:07.814719",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @ahmedavid! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nTo debug ragflow_server.py, you have two main options: use the built-in debug mode or attach a debugger like VSCode/debugpy.\n\n**1. Run in Debug Mode (Werkzeug Debugger):**\nStar",
          "created_at": "2025-06-17T07:46:43Z"
        }
      ]
    },
    {
      "issue_number": 8248,
      "title": "[Question]: Why cant i connect to MySQL",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI try to connect to MySQL by Python and it works, but I cant connect to MySQL by RAGFlow. RAGFlow is v0.19.0 slim and I use docker to start RAGFlow.\n![Image](https://github.com/user-attachments/assets/88d783e5-52a9-473b-b3b0-418c56f4b8df)",
      "state": "open",
      "author": "JBY-Faith",
      "author_type": "User",
      "created_at": "2025-06-13T06:15:21Z",
      "updated_at": "2025-06-17T07:11:10Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8248/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8248",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8248",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:07.984963",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe most common reason RAGFlow in Docker can't connect to MySQL is a configuration mismatch—specifically, the MySQL host setting. In Docker, the host should be set to the service name (usually `mysql`), not `localhost`. If you use `localhost`, RAGFlow will try to connect to a MySQL s",
          "created_at": "2025-06-13T06:17:37Z"
        },
        {
          "author": "cheny0928",
          "body": "1. Check the MySQL port mapping of the Docker host and confirm the port of MySQL on the host.\n2. You can try the user name \"root\".",
          "created_at": "2025-06-17T07:11:10Z"
        }
      ]
    },
    {
      "issue_number": 7954,
      "title": "[Bug]: Why do the results obtained from HTTP API queries differ from those obtained from Ragflow's web queries",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n26d3480e\n\n### RAGFlow image version\n\nv0.17.2\n\n### Other environment information\n\n```Markdown\nRAGFlow version: v0.17.2-151-gb2b7ed89 full\n```\n\n### Actual behavior\n\nWhen I was calling the HTTP API, I found that the document data that came out was inconsistent with the document data displayed on the web platform.  They both have the same chat assistant ID and session ID\n\n\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\n**web :**\n![Image](https://github.com/user-attachments/assets/c0177d11-d335-4ccd-aac9-07ff8c78fb1f)\n\n**postman :** \n![Image](https://github.com/user-attachments/assets/f9fcb110-4044-4a58-8aaf-74f2cb60499a)\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "dbcomers",
      "author_type": "User",
      "created_at": "2025-05-29T10:46:20Z",
      "updated_at": "2025-06-17T06:54:32Z",
      "closed_at": "2025-05-30T03:28:18Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7954/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7954",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7954",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:08.188197",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @dbcomers! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThe discrepancy between results from HTTP API queries and web queries in RAGFlow can be caused by several factors:\n\n1. There are known limitations with concurrent session handli",
          "created_at": "2025-05-29T10:48:07Z"
        },
        {
          "author": "dbcomers",
          "body": "**web**\n\n![Image](https://github.com/user-attachments/assets/ae707e60-370b-4a2f-8109-d7ab77ef15b6)\n\n**postman**\n\n![Image](https://github.com/user-attachments/assets/e91a693a-af8b-402c-9f4b-b85e4933d90c)\n\n",
          "created_at": "2025-05-29T10:51:43Z"
        },
        {
          "author": "dbcomers",
          "body": "Finally, I filtered and displayed the document by matching the ##{\\d}$$ in the res \"content\" through the web",
          "created_at": "2025-05-30T03:28:18Z"
        },
        {
          "author": "Lxhnnn",
          "body": "Why do the HTTP API and RAGFlow interface return different results? Are there any solutions?​",
          "created_at": "2025-06-13T08:56:48Z"
        },
        {
          "author": "lian88jian",
          "body": "> Why do the HTTP API and RAGFlow interface return different results? Are there any solutions?​\n\nhello, do u resolve this problem?",
          "created_at": "2025-06-17T06:54:32Z"
        }
      ]
    },
    {
      "issue_number": 5148,
      "title": "[Question]: Error on Macmini M4 ",
      "body": "### Describe your problem\n\n```\n => [base 14/15] RUN --mount=type=bind,from=infiniflow/ragflow_deps:latest,source=/chromedriver-linux64-121-0-6167-85,target=/chromedriver-linux  0.2s \n => ERROR [base 15/15] RUN --mount=type=bind,from=infiniflow/ragflow_deps:latest,source=/,target=/deps     if [ \"$(uname -m)\" = \"x86_64\" ]; then  0.2s \n------                                                                                                                                                 \n > [base 15/15] RUN --mount=type=bind,from=infiniflow/ragflow_deps:latest,source=/,target=/deps     if [ \"$(uname -m)\" = \"x86_64\" ]; then         dpkg -i /deps/libssl1.1_1.1.1f-1ubuntu2_amd64.deb;     elif [ \"$(uname -m)\" = \"aarch64\" ]; then         dpkg -i /deps/libssl1.1_1.1.1f-1ubuntu2_arm64.deb;     fi:\n0.147 Selecting previously unselected package libssl1.1:arm64.\n0.159 (Reading database ... 50516 files and directories currently installed.)\n0.159 Preparing to unpack .../libssl1.1_1.1.1f-1ubuntu2_arm64.deb ...\n0.162 Unpacking libssl1.1:arm64 (1.1.1f-1ubuntu2) ...\n0.186 dpkg-deb (subprocess): cannot copy archive member from '/deps/libssl1.1_1.1.1f-1ubuntu2_arm64.deb' to decompressor pipe: unexpected end of file or stream\n0.189 dpkg-deb (subprocess): decompressing archive '/deps/libssl1.1_1.1.1f-1ubuntu2_arm64.deb' (size=672566) member 'data.tar': lzma error: unexpected end of input\n0.189 dpkg-deb: error: <decompress> subprocess returned error exit status 2\n0.189 dpkg: error processing archive /deps/libssl1.1_1.1.1f-1ubuntu2_arm64.deb (--install):\n0.189  cannot copy extracted data for './usr/lib/aarch64-linux-gnu/libcrypto.so.1.1' to '/usr/lib/aarch64-linux-gnu/libcrypto.so.1.1.dpkg-new': unexpected end of file or stream\n0.191 Processing triggers for libc-bin (2.35-0ubuntu3.8) ...\n0.204 Errors were encountered while processing:\n0.204  /deps/libssl1.1_1.1.1f-1ubuntu2_arm64.deb\n------\nDockerfile:132\n--------------------\n 131 |     # aspose-slides on linux/arm64 is unavailable\n 132 | >>> RUN --mount=type=bind,from=infiniflow/ragflow_deps:latest,source=/,target=/deps \\\n 133 | >>>     if [ \"$(uname -m)\" = \"x86_64\" ]; then \\\n 134 | >>>         dpkg -i /deps/libssl1.1_1.1.1f-1ubuntu2_amd64.deb; \\\n 135 | >>>     elif [ \"$(uname -m)\" = \"aarch64\" ]; then \\\n 136 | >>>         dpkg -i /deps/libssl1.1_1.1.1f-1ubuntu2_arm64.deb; \\\n 137 | >>>     fi\n 138 |     \n--------------------\nERROR: failed to solve: process \"/bin/bash -c if [ \\\"$(uname -m)\\\" = \\\"x86_64\\\" ]; then         dpkg -i /deps/libssl1.1_1.1.1f-1ubuntu2_amd64.deb;     elif [ \\\"$(uname -m)\\\" = \\\"aarch64\\\" ]; then         dpkg -i /deps/libssl1.1_1.1.1f-1ubuntu2_arm64.deb;     fi\" did not complete successfully: exit code: 1\n```\n具体步骤如下\n```\ngit clone <https://github.com/infiniflow/ragflow.git>\ncd ragflow/\npip3 install huggingface_hub nltk\npython3 download_deps.py\ndocker build -f Dockerfile.deps -t infiniflow/ragflow_deps .\ndocker build -f Dockerfile -t infiniflow/ragflow:nightly .\n```\n执行这条构建镜像的最后一步出错了,大佬们应该如何处理啊docker build -f Dockerfile -t infiniflow/ragflow:nightly .\n",
      "state": "open",
      "author": "weigeloveu",
      "author_type": "User",
      "created_at": "2025-02-19T13:28:08Z",
      "updated_at": "2025-06-17T06:37:16Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/5148/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/5148",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/5148",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:08.402210",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "What about this:\n```\ndocker build --build-arg ARCH=arm64 -f Dockerfile -t infiniflow/ragflow:nightly .\n```",
          "created_at": "2025-02-20T04:24:57Z"
        },
        {
          "author": "weigeloveu",
          "body": "> What about this:\n> \n> ```\n> docker build --build-arg ARCH=arm64 -f Dockerfile -t infiniflow/ragflow:nightly .\n> ```\n\nthx,i tried but still cant build\n```\n => ERROR [base 15/15] RUN --mount=type=bind,from=infiniflow/ragflow_deps:latest,source=/,target=/deps     if [ \"$(uname -m)\" = \"x86_64\" ]; then",
          "created_at": "2025-02-23T12:19:25Z"
        },
        {
          "author": "laurenlong",
          "body": "Same！Have you solved it?",
          "created_at": "2025-06-17T06:37:16Z"
        }
      ]
    },
    {
      "issue_number": 8295,
      "title": "[Feature Request]:Make user be able to use filed map or not when use table knowledge base for asking",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\nIt's not more correct than the situation that don't use the field map when chat with assistant which contains the table knowledge base.\n```\n\n### Describe the feature you'd like\n\nWhen ask the assistant which contains the table knowledge base , we can make choice to use field map or not!\n\n### Describe implementation you've considered\n\n![Image](https://github.com/user-attachments/assets/a58e203e-10d2-496e-993e-d0402dd94212)\nThe code that the image shows is too absolute for table knowledge base.But I am lazy to add button or something that can make choice to use field map on frontend, therefore i just note these codes.\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "Rama-19",
      "author_type": "User",
      "created_at": "2025-06-16T07:45:11Z",
      "updated_at": "2025-06-17T02:34:38Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8295/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8295",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8295",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:08.604352",
      "comments": [
        {
          "author": "ZhenhangTung",
          "body": "Sorry, didn't fully get your idea. And pls update your feature request title to explain your idea in one short sentence. ",
          "created_at": "2025-06-17T02:22:12Z"
        }
      ]
    },
    {
      "issue_number": 7908,
      "title": "[Bug]: The “code” component is not available",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n6ca1aef5\n\n### RAGFlow image version\n\n6ca1aef5（0.19）\n\n### Other environment information\n\n```Markdown\nubuntu22.04,\nx86_64*16core, 32GB memory, 500GB disk\n```\n\n### Actual behavior\n\n![Image](https://github.com/user-attachments/assets/d2db1795-c7a0-4bc4-b08a-3d1e39313198)\n\n![Image](https://github.com/user-attachments/assets/ea5ee8e7-46d2-40c6-9f4d-d3613d5a405d)\nAs shown above, even when executing with the default demo example, an error will still occur.\nThe log of the container is shown in the following figure:\n\n![Image](https:github.com/user-attachments/assets/ded3fc08-8236-4b48-881b-9c06259d9320)\n\nIf this is not a bug, you should describe how to use it in the README\n\n### Expected behavior\n\nHere is an example of code enhancement after knowledge retrieval, looking forward to receiving the content after ‘Answer’:  \n`import re\n\ndef main(arg1: str) -> str:\n    # Regularly match the content after Answer\n    pattern = r\"Answer:\\s*(.*?)(?=\\nID:|\\Z)\"\n    answer_text = re.search(pattern, arg1, re.DOTALL)\n    \n    if answer_text:\n        answer_content = answer_text.group(1).strip()\n        # Unified semicolon symbol (full/half width)\n        answer_content = answer_content.replace(\";\", \"；\")\n        steps = re.findall(r\"\\d+\\.\\s*[^\\n;]+\", answer_content)\n        # Merge into a string and return\n        return \"\\n\".join(steps) \n    else:\n        return \"I haven't learned your question yet! Or would you try to rephrase it?\"`\n\n### Steps to reproduce\n\n```Markdown\nIt will definitely appear\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "Anthonychen1994",
      "author_type": "User",
      "created_at": "2025-05-28T06:36:07Z",
      "updated_at": "2025-06-17T01:34:34Z",
      "closed_at": "2025-06-17T01:34:14Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7908/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7908",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7908",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:08.780310",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @Anthonychen1994! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nBased on your description and the available sources, the error you are encountering—an AttributeError related to a missing 'output' attribute in a 'RetrievalParam' object",
          "created_at": "2025-05-28T06:50:27Z"
        },
        {
          "author": "Anthonychen1994",
          "body": "> Hi [@Anthonychen1994](https://github.com/Anthonychen1994)! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n> \n> Based on your description and the available sources, the error you are encountering—an AttributeError related to a missing 'output' attribute in a 'RetrievalPar",
          "created_at": "2025-05-28T10:21:37Z"
        },
        {
          "author": "staann",
          "body": "i am with the same problem, and dont know how to solve it",
          "created_at": "2025-06-05T00:36:38Z"
        },
        {
          "author": "staann",
          "body": "@Anthonychen1994 hi anthony, did you solved the problem? i am with the same issue",
          "created_at": "2025-06-05T20:59:14Z"
        },
        {
          "author": "yongtenglei",
          "body": "Hi, @staann \n\nDid you apply #7949?",
          "created_at": "2025-06-10T07:48:13Z"
        }
      ]
    },
    {
      "issue_number": 8291,
      "title": "[Question]: how to set the max output tokens?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI noticed that, for some reason Ragflow removed the setting entry for the maximum tokens of model output in a previous update. I’m not sure how this will affect the output length of the LLM, but now I have to suspect that my LLM output is capped at 512 tokens. Even though the retrieval function correctly recalled multiple documents, the LLM’s responses to my questions remain overly brief, resulting in significant loss of detail. So, I’d like to ask if there’s any way I can increase the maximum output tokens for the LLM?  \n\nAdditional details:  \nI’m using the DeepSeek official API as the LLM and a locally deployed BGE-M3 as the embedding model.\n\nthanks for your help.",
      "state": "closed",
      "author": "JJ-BlackLoong",
      "author_type": "User",
      "created_at": "2025-06-16T07:20:54Z",
      "updated_at": "2025-06-17T01:30:30Z",
      "closed_at": "2025-06-17T01:30:30Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8291/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8291",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8291",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:08.988213",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @JJ-BlackLoong! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nCurrently, RAGFlow does not support setting the maximum output tokens for DeepSeek models through any user-accessible configuration, either in the frontend or backend. The ",
          "created_at": "2025-06-16T07:23:24Z"
        }
      ]
    },
    {
      "issue_number": 8306,
      "title": "[Bug]:  Cannot Add Variables to LLM Prompt – \"Add\" Button Missing",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nN/A\n\n### RAGFlow image version\n\n v0.19.0 full\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nIn the AI Agent section, the \"Generate\" block is missing the \"Add\" button to include variables for the prompt. I tested this across multiple browsers and also checked the demo all of which, missing this feature. \n\n\nHowever, the documentation (although outdated) still shows this feature. \n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nOpen RAGFlow and navigate to the AI Agent section.\n\nAdd and edit a \"Generate\" block.\n\nObserve that there is no \"Add\" button or option to insert variables into the prompt.\n\nGiven that the demo also has the same \"issue\" it most likely happens no matter what.\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "bryantpollardii",
      "author_type": "User",
      "created_at": "2025-06-16T18:31:52Z",
      "updated_at": "2025-06-16T22:04:18Z",
      "closed_at": "2025-06-16T22:04:18Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8306/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8306",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8306",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:09.220262",
      "comments": []
    },
    {
      "issue_number": 8227,
      "title": "[Bug]: An error occurred while adding the Novita AI model",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n6ca1aef52e86003804d329e44d26d21cf14025f7\n\n### RAGFlow image version\n\n6ca1aef52e86003804d329e44d26d21cf14025f7\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nAs the title, an error occurred while adding the Novita AI model\n![Image](https://github.com/user-attachments/assets/eb47fdf2-f74a-4e99-8538-b5aa2f14e826)\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\n1. Login and open the page \"https://demo.ragflow.io/user-setting/model\".\n2. Choose \"NovitaAI\" and click \"Add the model\" button.\n3. Input API key in the dialog and click \"OK\" button\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "neal-davis",
      "author_type": "User",
      "created_at": "2025-06-12T09:59:32Z",
      "updated_at": "2025-06-16T14:02:47Z",
      "closed_at": "2025-06-13T07:42:18Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8227/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8227",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8227",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:09.220281",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe error occurs because NovitaAI embedding models are not currently supported in RAGFlow—this is a known limitation, and the development team has indicated that the NovitaAI option will be removed from the Model Providers settings rather than adding support for it. There isn't a dir",
          "created_at": "2025-06-12T10:02:26Z"
        },
        {
          "author": "neal-davis",
          "body": "@KevinHuSh When will this PR be released, so I can use it normally in the production system in the page \"https://demo.ragflow.io/user-setting/model\".?",
          "created_at": "2025-06-16T14:02:46Z"
        }
      ]
    },
    {
      "issue_number": 7150,
      "title": "[Bug]: API of list chunks retuned chunks less than in knowledge base",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nddd\n\n### RAGFlow image version\n\ndddd\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nIt says there are 3130 chunks but when list chunks with API it returned 3018\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nhttp://{ip}/datasets/{dataset_id}/documents/{document_id}/chunks?page_size=verybignumberenough\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "Dyson-Ido",
      "author_type": "User",
      "created_at": "2025-04-20T08:50:56Z",
      "updated_at": "2025-06-16T12:16:41Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 8,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7150/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "asiroliu"
      ],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7150",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7150",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:09.409286",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHello @Dyson-Ido! I'm [Dosu](https://dosu.dev), your friendly bot here to assist with bugs, answer questions, and help you on your journey as a contributor. I'm here to support you while you wait for a human maintainer. How can I help you today?\n\n<!-- Answer -->\nThe discrepancy in ",
          "created_at": "2025-04-20T08:52:37Z"
        },
        {
          "author": "asiroliu",
          "body": "@Dyson-Ido \nI've tested with version e9e85d72b1b7(infiniflow/ragflow:nightly) using a list of 3000 chunks but was unable to reproduce the reported issue. Could you please provide additional details to help me investigate further?",
          "created_at": "2025-04-25T04:42:19Z"
        },
        {
          "author": "Dyson-Ido",
          "body": "> [@Dyson-Ido](https://github.com/Dyson-Ido) I've tested with version e9e85d72b1b7(infiniflow/ragflow:nightly) using a list of 3000 chunks but was unable to reproduce the reported issue. Could you please provide additional details to help me investigate further?\n\n@asiroliu  please try with more than",
          "created_at": "2025-04-28T11:15:38Z"
        },
        {
          "author": "asiroliu",
          "body": "@Dyson-Ido \nI tested with 4,000 chunks but still couldn't reproduce the issue.",
          "created_at": "2025-04-30T04:53:48Z"
        },
        {
          "author": "Colstuwjx",
          "body": "Hi @asiroliu ,I think I've reproduced this issue with the version 09f8dfe456a13849cfde06d0982e37c18a808c5b , and what I've seen is:\n\nthe chunk number displayed is 505157:\n<img width=\"1365\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/a9602861-ad78-41bd-9c8f-b2a836d007e0\" />\n\nhowever, ",
          "created_at": "2025-06-12T10:04:17Z"
        }
      ]
    },
    {
      "issue_number": 7233,
      "title": "[Question]: How to show quotes while using API (Openai API)",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nHi All\nDo anyone know how to show quotes like below while using API?\nI cannot find doc mention it\n\n",
      "state": "open",
      "author": "mcwongaagpt",
      "author_type": "User",
      "created_at": "2025-04-23T07:02:25Z",
      "updated_at": "2025-06-16T11:12:22Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7233/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7233",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7233",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:09.615111",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nTo display quotes while using the OpenAI API, you can use the `parser_txt` method in the `RAGFlowTxtParser` class. This method utilizes regular expressions to identify and process text segments enclosed in quotes, such as backticks, and formats them accordingly <sup>[[1]](https://git",
          "created_at": "2025-04-23T07:03:49Z"
        },
        {
          "author": "mcwongaagpt",
          "body": "@dosu \nThank you for your help\nYou mentioned the method of parse the text\nWhen I look at the response from the API, I cannot find the info related to quotes that chatbot found in database , where should I look at it",
          "created_at": "2025-04-23T07:40:05Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYou can find information related to quotes identified by the chatbot in the database by checking the section of the code where `self._param.symbols_datatype == \"quotes\"`. This section processes the API response for quotes and maps various fields such as 'Selling Price', 'Buying Price",
          "created_at": "2025-04-23T07:41:19Z"
        },
        {
          "author": "rookie-python",
          "body": "@mcwongaagpt \n\n在 ragflow\\api\\db\\services\\dialog_service.py   的chat  中 kbinfos\n\n\n你需要在    ragflow\\api\\apps\\sdk\\session.py 中的  api  /chats_openai/<chat_id>/chat/completions  \nyield 前添加 \nreference = ans.get(\"reference\")\nresponse['reference'] = reference\n\n![Image](https://github.com/user-attachments/asse",
          "created_at": "2025-04-29T07:41:49Z"
        },
        {
          "author": "vanalexgr",
          "body": "> [@mcwongaagpt](https://github.com/mcwongaagpt)\n> \n> 在 ragflow\\api\\db\\services\\dialog_service.py 的chat 中 kbinfos\n> \n> 你需要在 ragflow\\api\\apps\\sdk\\session.py 中的 api /chats_openai/<chat_id>/chat/completions yield 前添加 reference = ans.get(\"reference\") response['reference'] = reference\n> \n> ![Image](https",
          "created_at": "2025-06-16T11:12:22Z"
        }
      ]
    },
    {
      "issue_number": 8294,
      "title": "[Question]: Failed to add Tongyi-Qianwen's API-Key, returned code 102.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nFailed to add Tongyi-Qianwen's API-Key, returned code 102.\nDetails:\n{\n    \"code\": 102,\n    \"message\": \"\\nFail to access model(deepseek-r1) using this api key.**ERROR**: CONNECTION_ERROR - Connection error.\\nFail to access model(deepseek-r1-distill-llama-70b) using this api key.**ERROR**: CONNECTION_ERROR - Connection error.\\nFail to access model(deepseek-r1-distill-llama-8b) using this api key.**ERROR**: CONNECTION_ERROR - Connection error.\\nFail to access model(deepseek-r1-distill-qwen-1.5b) using this api key.**ERROR**: CONNECTION_ERROR - Connection error.\\nFail to access model(deepseek-r1-distill-qwen-14b) using this api key.**ERROR**: CONNECTION_ERROR - Connection error.\\nFail to access model(deepseek-r1-distill-qwen-32b) using this api key.**ERROR**: CONNECTION_ERROR - Connection error.\\nFail to access model(deepseek-r1-distill-qwen-7b) using this api key.**ERROR**: CONNECTION_ERROR - Connection error.\\nFail to access model(deepseek-v3) using this api key.**ERROR**: CONNECTION_ERROR - Connection error.\\nFail to access model(gte-rerank) using this api key.HTTPSConnectionPool(host='dashscope.aliyuncs.com', port=443): Max retries exceeded with url: /api/v1/services/rerank/text-rerank/text-rerank (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1007)')))\\nFail to access model(qwen-long) using this api key.**ERROR**: \\n**ERROR**: HTTPSConnectionPool(host='dashscope.aliyuncs.com', port=443): Max retries exceeded with url: /api/v1/services/aigc/text-generation/generation (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1007)')))\\nFail to access model(qwen-max) using this api key.**ERROR**: \\n**ERROR**: HTTPSConnectionPool(host='dashscope.aliyuncs.com', port=443): Max retries exceeded with url: /api/v1/services/aigc/text-generation/generation (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1007)')))\\nFail to access model(qwen-plus) using this api key.**ERROR**: \\n**ERROR**: HTTPSConnectionPool(host='dashscope.aliyuncs.com', port=443): Max retries exceeded with url: /api/v1/services/aigc/text-generation/generation (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1007)')))\\nFail to access model(qwen-plus-latest) using this api key.**ERROR**: \\n**ERROR**: HTTPSConnectionPool(host='dashscope.aliyuncs.com', port=443): Max retries exceeded with url: /api/v1/services/aigc/text-generation/generation (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1007)')))\\nFail to access model(qwen-turbo) using this api key.**ERROR**: \\n**ERROR**: HTTPSConnectionPool(host='dashscope.aliyuncs.com', port=443): Max retries exceeded with url: /api/v1/services/aigc/text-generation/generation (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1007)')))\\nFail to access model(qwq-32b) using this api key.**ERROR**: CONNECTION_ERROR - Connection error.\\nFail to access model(qwq-plus) using this api key.**ERROR**: CONNECTION_ERROR - Connection error.\\nFail to access model(qwq-plus-latest) using this api key.**ERROR**: CONNECTION_ERROR - Connection error.\\nFail to access embedding model(text-embedding-v2) using this api key.Account abnormal. Please ensure it's on good standing to use QWen's text-embedding-v2\\nFail to access embedding model(text-embedding-v3) using this api key.Account abnormal. Please ensure it's on good standing to use QWen's text-embedding-v3\"\n}\n\nAs shown in the following figure\n\n<img width=\"942\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/4f080284-8c1c-4153-9738-6554093302a6\" />\n\n<img width=\"959\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/2629eb64-2e61-42f2-a803-fdd19e8ea55a\" />\n",
      "state": "closed",
      "author": "2731557667",
      "author_type": "User",
      "created_at": "2025-06-16T07:42:01Z",
      "updated_at": "2025-06-16T08:56:03Z",
      "closed_at": "2025-06-16T08:52:37Z",
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8294/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8294",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8294",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:09.832450",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nError code 102 in RAGFlow means a data error during API key validation. Your logs show connection and SSL errors when trying to access multiple models with the Tongyi-Qianwen API key. This can happen if the API key is invalid, the account is not in good standing, or there are network",
          "created_at": "2025-06-16T07:45:44Z"
        },
        {
          "author": "yongtenglei",
          "body": "Hi, @2731557667 \n\nCheck if your key is correct.",
          "created_at": "2025-06-16T07:55:53Z"
        },
        {
          "author": "2731557667",
          "body": "> RAGFlow 中的错误代码 102 表示 API 密钥验证期间出现数据错误。您的日志显示，在尝试使用 Tongyi-Qianwen API 密钥访问多个模型时，会出现连接和 SSL 错误。如果 API 密钥无效、账户信誉不佳或您的服务器与模型提供商之间存在网络/SSL 问题，则可能会发生这种情况。\n> \n> 可以尝试以下几项作：\n> \n> * 确保您的 API 密钥正确无误，并且该账户对于所有必需的模型都处于活动状态。嵌入模型的错误“Account abnormal”表明可能存在帐户或权限问题。\n> * 一些用户通过在模型添加过程中在 API key 字段中填写任意值，然后在添加模型后更",
          "created_at": "2025-06-16T08:40:43Z"
        },
        {
          "author": "2731557667",
          "body": "> 你好\n> \n> 检查您的密钥是否正确。\n\nI found that the key was leaked, so I modified it. The test result showed that the key was usable on the surface",
          "created_at": "2025-06-16T08:41:34Z"
        },
        {
          "author": "yongtenglei",
          "body": "That is it!",
          "created_at": "2025-06-16T08:52:35Z"
        }
      ]
    },
    {
      "issue_number": 7927,
      "title": "[Question]: i upgrade ragflow-server image to 0.19, both chat and retrieval test can not show image.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\n[Question]: i upgrade ragflow-server image to 0.19, both chat and retrieval test can not show image.",
      "state": "open",
      "author": "HaoGuo98",
      "author_type": "User",
      "created_at": "2025-05-29T02:07:00Z",
      "updated_at": "2025-06-16T08:45:39Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7927/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7927",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7927",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:10.007189",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nAfter reviewing available information, I did not find any existing issues or discussions specifically about images not displaying in chat or retrieval tests after upgrading to ragflow-server 0.19.\n\nVersion 0.19 introduced enhanced image display, where images in Chat and Search should",
          "created_at": "2025-05-29T02:11:41Z"
        },
        {
          "author": "kowyo",
          "body": "I have the same issue after a refresh installation. But I noticed that in the chunking section, there are images rendered directly, although they are not shown in the chat section. I wonder weather this is related to system prompt.",
          "created_at": "2025-05-29T06:05:48Z"
        },
        {
          "author": "kowyo",
          "body": "Yes, this is related to your prompt:\n\n|  Inproper Prompt    |   Proper Prompt   |\n| ---- | ---- |\n|   <img width=\"1159\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/75797dff-10f0-451b-ba74-6e6a24dc6036\" />   |  <img width=\"1180\" alt=\"Image\" src=\"https://github.com/user-attachments/ass",
          "created_at": "2025-05-29T06:11:40Z"
        },
        {
          "author": "xinzhuang",
          "body": "> Yes, this is related to your prompt:\n> \n> Inproper Prompt\tProper Prompt\n> <img alt=\"Image\" width=\"1159\" src=\"https://private-user-images.githubusercontent.com/110339237/448704375-75797dff-10f0-451b-ba74-6e6a24dc6036.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoic",
          "created_at": "2025-06-16T08:45:39Z"
        }
      ]
    },
    {
      "issue_number": 8278,
      "title": "[Feature Request]: Change the \"Flow\" to using LangFlow",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\n\n```\n\n### Describe the feature you'd like\n\nShould we change the drag and drop \"Flow\" by switching the platform to LangFlow? This platform is now open source and has MIT License\nhttps://github.com/langflow-ai/langflow\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "dataa2",
      "author_type": "User",
      "created_at": "2025-06-16T01:49:44Z",
      "updated_at": "2025-06-16T08:34:23Z",
      "closed_at": "2025-06-16T08:34:23Z",
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8278/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8278",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8278",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:10.212794",
      "comments": [
        {
          "author": "ZhenhangTung",
          "body": "@dataa2 Why do you have this idea? I would love to hear more. And in short answer: **no**. Just wait for our v0.20 release. ",
          "created_at": "2025-06-16T06:49:43Z"
        }
      ]
    },
    {
      "issue_number": 8279,
      "title": "[Bug]: The request to retrieve chunks via /api/v1/retrieval takes 6 minutes to return results. How can we optimize its performance?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nv0.19.0 slim\n\n### RAGFlow image version\n\nv0.19.0 slim\n\n### Other environment information\n\n```Markdown\nMachine configuration: 8 cores, 32GB RAM, no GPU.\n```\n\n### Actual behavior\n\nThere are 17,600 documents in the knowledge base. The query via /api/v1/retrieval takes 6 minutes to complete. How can we optimize its performance?\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nNone\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "gongshaojie12",
      "author_type": "User",
      "created_at": "2025-06-16T02:24:52Z",
      "updated_at": "2025-06-16T07:50:18Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8279/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8279",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8279",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:10.400925",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe slow performance of /api/v1/retrieval is likely due to a combination of factors: the size of your knowledge base, CPU-only hardware, and enabled features that are resource-intensive. Here are some targeted steps to optimize performance:\n\n- Disable the reranker feature if enabled;",
          "created_at": "2025-06-16T02:28:21Z"
        },
        {
          "author": "gongshaojie12",
          "body": "- Disable the reranker feature--->Where should the settings be made?\n- Turn off \"Auto-keyword\" and \"Auto-question\" features---->It seems that these two options are not available in the knowledge base configuration. How should I set them up?\n- Do you have any specific optimization suggestions for Ela",
          "created_at": "2025-06-16T06:57:21Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nTo disable the reranker, make sure the rerank_id parameter is not included in your /retrieval API request payload. If you’re configuring at the dataset level, set enable_rerank to false in the dataset’s options/configuration—this is typically managed via the API or UI, not a global c",
          "created_at": "2025-06-16T06:59:48Z"
        },
        {
          "author": "gongshaojie12",
          "body": "For \"Auto-keyword\" and \"Auto-question\". I still haven't been able to locate where the settings are. Could you please provide the specific steps?\n\nI ran `export LOG_LEVEL=DEBUG` in the Linux terminal before executing the `docker compose up -d` command, but it didn't take effect.\nThen I also set `LOG_",
          "created_at": "2025-06-16T07:47:56Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYou can find the \"Auto-keyword\" and \"Auto-question\" settings in the RAGFlow web UI: go to your Dataset Settings, look for the \"Chunk Method\" or parser configuration section, and you’ll see sliders labeled \"Auto-keyword\" and \"Auto-question\". Set both sliders to 0 to fully disable thes",
          "created_at": "2025-06-16T07:50:18Z"
        }
      ]
    },
    {
      "issue_number": 8196,
      "title": "[Question]:  v0.19.0 Code component：Container pool is busy",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\n代码 节点输出返回：Container pool is busy，请问如何解决\n\n![Image](https://github.com/user-attachments/assets/3941b24b-8a22-4846-95f8-7c06c2ae7f6e)",
      "state": "closed",
      "author": "dukun1224",
      "author_type": "User",
      "created_at": "2025-06-11T10:57:37Z",
      "updated_at": "2025-06-16T04:52:28Z",
      "closed_at": "2025-06-16T04:52:28Z",
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8196/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8196",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8196",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:10.642549",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe \"Container pool is busy\" message means all available containers in the pool are currently in use and none could be allocated within the timeout period. By default, the pool size is set by the SANDBOX_EXECUTOR_MANAGER_POOL_SIZE environment variable (default is 1). To resolve this,",
          "created_at": "2025-06-11T11:25:33Z"
        },
        {
          "author": "yongtenglei",
          "body": "Hi @dukun1224 \n\nIt means all runners are busy, running code. Either wait and try it later or increase pool size in the config, for a better chance to alleviate this issue.",
          "created_at": "2025-06-12T05:11:41Z"
        }
      ]
    },
    {
      "issue_number": 8226,
      "title": "[Bug]: Error: Internal error in sanbox: HTTPConnectionPool(host='none', port=9385): Max retries exceeded with url: /run (Caused by NameResolutionError(\"<urllib3.connection.HTTPConnection object at 0x705618cfffd0>",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\ne5e96302468d11f0928886273e5eed0c\n\n### RAGFlow image version\n\nv0.19.0 slim\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nError: Internal error in sanbox: HTTPConnectionPool(host='none', port=9385): Max retries exceeded with url: /run (Caused by NameResolutionError(\"<urllib3.connection.HTTPConnection object at 0x705618cfe4d0>: Failed to resolve 'none' ([Errno -3] Temporary failure in name resolution)\"))\n\n\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nError: Internal error in sanbox: HTTPConnectionPool(host='none', port=9385): Max retries exceeded with url: /run (Caused by NameResolutionError(\"<urllib3.connection.HTTPConnection object at 0x705618cfe4d0>: Failed to resolve 'none' ([Errno -3] Temporary failure in name resolution)\"))\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "zbbwss",
      "author_type": "User",
      "created_at": "2025-06-12T09:43:35Z",
      "updated_at": "2025-06-16T04:52:17Z",
      "closed_at": "2025-06-16T04:52:17Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8226/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8226",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8226",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:10.836569",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @zbbwss! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nYour error is caused by a DNS resolution problem: the sandbox is trying to connect to host 'none', which means a required service hostname or environment variable is missing or mi",
          "created_at": "2025-06-12T09:46:14Z"
        },
        {
          "author": "yongtenglei",
          "body": "Hi, @zbbwss \n \n1. Add the following line to /etc/hosts to resolve all hosts specified in docker/.env to 127.0.0.1 to solve your problem:\n\n```bash\n127.0.0.1       es01 infinity mysql minio redis sandbox-executor-manager\n```\nTo make sandbox run properly:\n\n2. Make sure you have gVisor installed, so tha",
          "created_at": "2025-06-13T08:15:56Z"
        }
      ]
    },
    {
      "issue_number": 7973,
      "title": "[Bug]: code compoent return error",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nv0.19.x\n\n### RAGFlow image version\n\nv0.19.x\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nI add a code component and run agent , the code component step return a error,so what's run about it, I ran the code in python ide , it was return correct .\n\n![Image](https://github.com/user-attachments/assets/3c9f2b19-fc8d-49ea-b8ac-2c37b466cf20)\nmy code is:\nimport oracledb \n\ndef query_patient_id_rows(patient_id: int) -> int: \n    connection = None\n    cursor = None\n    try: \n        connection = oracledb.connect( \n            user=\"xxxx\", \n            password=\"xxxx\", \n            dsn=\"111.111.111.111:1521/lisorcl\" \n        ) \n\n        cursor = connection.cursor() \n\n        query = f\"SELECT salary FROM tab1 WHERE PARTIENT_ID = :patient_id\" \n\n        cursor.execute(query, patient_id=patient_id) \n\n        result = cursor.fetchone() \n\n        return result[0] if result else 0 \n\n    except oracledb.Error as e: \n        print(f\"数据库查询出错: {e}\") \n        return 0 \n    finally:\n        if cursor:\n            cursor.close()\n        if connection:\n            connection.close()\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nno\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "kimking1979",
      "author_type": "User",
      "created_at": "2025-05-30T07:03:42Z",
      "updated_at": "2025-06-16T04:52:00Z",
      "closed_at": "2025-06-16T04:52:00Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7973/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7973",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7973",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:11.018410",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYour code works in your Python IDE but fails as a code component in RAGFlow because RAGFlow does not natively support OracleDB connections. The RAGFlow environment is designed to work with MySQL and Postgres, and there is no built-in support or configuration for OracleDB drivers or c",
          "created_at": "2025-05-30T07:08:59Z"
        },
        {
          "author": "kimking1979",
          "body": "I had install oracledb using pip \n\n![Image](https://github.com/user-attachments/assets/be9ca061-4cc0-45b5-ad5c-7a401c335a0c)",
          "created_at": "2025-05-30T07:15:38Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Set `SANDBOX_ENABLED=1` in `docker/.env`.",
          "created_at": "2025-05-30T07:21:30Z"
        },
        {
          "author": "kimking1979",
          "body": "ok! I'll try it.",
          "created_at": "2025-05-30T07:56:55Z"
        },
        {
          "author": "SpongeKim666",
          "body": "> Set `SANDBOX_ENABLED=1` in `docker/.env`.\n\nI have try this, but the connection error still occur.\n\n<img width=\"453\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/25b4e182-7421-4fb4-9fad-d3897e1e0cbe\" />",
          "created_at": "2025-06-04T07:01:26Z"
        }
      ]
    },
    {
      "issue_number": 8282,
      "title": "[Feature Request]: Reconfigure the parameters of the large model template.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\nReconfigure the parameters of the large model template.\n```\n\n### Describe the feature you'd like\n\nReconfigure the parameters of the large model template.\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "cike8899",
      "author_type": "User",
      "created_at": "2025-06-16T04:00:00Z",
      "updated_at": "2025-06-16T04:00:16Z",
      "closed_at": "2025-06-16T04:00:16Z",
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8282/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8282",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8282",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:11.218978",
      "comments": []
    },
    {
      "issue_number": 7537,
      "title": "Multiple task executors do not seem to improve ingestion performance",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nToday we tested parsing 10 multi-page image PDF files using both 2 and 4 threads. The process took 7 minutes, which was two minutes longer than using a single thread (which took 5 minutes). This suggests that 5 minutes is currently the minimum time to parse these 10 PDFs with a single thread. And the large excel took 8 minutes with multiple threads, same as single thread.\nAs we observed, whether using two or four threads, the OCR process of image pdf files seemed to execute only one at a time, with the other threads waiting.\n\nAre we missing out anything here? \n\nRegards\n",
      "state": "open",
      "author": "howardtangck",
      "author_type": "User",
      "created_at": "2025-05-08T12:40:42Z",
      "updated_at": "2025-06-16T03:19:19Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 20,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7537/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7537",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7537",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:11.219002",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHello @howardtangck! I'm [Dosu](https://dosu.dev), your friendly bot here to help you solve bugs, answer questions, and navigate contributions. I'm here to assist you while you wait for a human maintainer. Let's tackle that issue together!\n\n<!-- Answer -->\nThe issue you're experien",
          "created_at": "2025-05-08T12:41:59Z"
        },
        {
          "author": "howardtangck",
          "body": "We are currently using Oracle Cloud compute E5 24 OCPUs and 64GB RAM. Would GPU make any difference here? So how can we change our configuration so that task can run concurrently and not sequentially across multiple task executors? We have a major concern here because our application allows our cust",
          "created_at": "2025-05-08T13:04:59Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nUsing a GPU can significantly improve the performance of tasks like OCR, especially when dealing with large volumes of data or complex models, as GPUs are optimized for parallel processing. However, to fully utilize the GPU, you need to ensure that your configuration allows for concu",
          "created_at": "2025-05-08T13:06:19Z"
        },
        {
          "author": "howardtangck",
          "body": "which file is this modification made for CPU and GPU? @dosu",
          "created_at": "2025-05-08T13:08:37Z"
        },
        {
          "author": "howardtangck",
          "body": "so @dosu, do I do this?        \n\n\n[opc@ragflow vision]$ pwd\n/home/opc/ragflow/deepdoc/vision\n[opc@ragflow vision]$ ls -la ocr.py\n-rw-rw-r--. 1 opc opc 24351 Apr  9 12:00 **ocr.py**\n[opc@ragflow vision]$ \n\noptions.enable_cpu_mem_arena = **True**\noptions.execution_mode = **ort.ExecutionMode.ORT_PARALL",
          "created_at": "2025-05-08T13:52:33Z"
        }
      ]
    },
    {
      "issue_number": 7758,
      "title": "[Bug]: Error after chunking doucment: Inifinity is initing",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nv0.18.0\n\n### RAGFlow image version\n\nv0.18.0-slim\n\n### Other environment information\n\n```Markdown\nOS: ubuntu24.04\nEmbedding Model: nomic-text-embed-v1.5\n```\n\n### Actual behavior\n\nAfter i have chunked a PDF (non-searchable, text inside images) with Law chunking method, i cannot view chunks and it return error:\n![Image](https://github.com/user-attachments/assets/155c1d7d-024f-4efa-af9b-e8c6fb86c6f1)\n\nand I checked the inifinity doc engine status:\n![Image](https://github.com/user-attachments/assets/ea59ea9b-e893-4f40-b729-f179372080d1)\n\nError log in infinity docker:\n```\n[03:52:58.712] [212] [info] Index text_idx_source_id segment 0 is optimizing, skip optimize.\n[03:53:04.341] [264] [critical] Txn ID: 1, Text: ForceCheckpointTask, Begin TS: 156071, Commit TS: 156072, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156070.json\nmax commit ts: 156070\nis full checkpoint: 1\n\nForceCheckpointTask\n\n[03:53:04.341] [264] [critical] Txn ID: 20, Text: Full or delta checkpoint, Begin TS: 156073, Commit TS: 156074, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156072.json\nmax commit ts: 156072\nis full checkpoint: 1\n\n\n[03:53:04.341] [264] [critical] Txn ID: 30, Text: Full or delta checkpoint, Begin TS: 156075, Commit TS: 156076, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156074.json\nmax commit ts: 156074\nis full checkpoint: 1\n\n\n[03:53:04.341] [264] [critical] Txn ID: 38, Text: Full or delta checkpoint, Begin TS: 156077, Commit TS: 156078, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156076.json\nmax commit ts: 156076\nis full checkpoint: 1\n\n\n[03:53:04.341] [264] [critical] Txn ID: 71, Text: Full or delta checkpoint, Begin TS: 156079, Commit TS: 156080, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156078.json\nmax commit ts: 156078\nis full checkpoint: 1\n\n\n[03:53:04.341] [264] [critical] Txn ID: 79, Text: Full or delta checkpoint, Begin TS: 156081, Commit TS: 156082, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156080.json\nmax commit ts: 156080\nis full checkpoint: 1\n\n\n[03:53:04.341] [264] [critical] Txn ID: 88, Text: Full or delta checkpoint, Begin TS: 156083, Commit TS: 156084, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156082.json\nmax commit ts: 156082\nis full checkpoint: 1\n\n\n[03:53:04.341] [264] [critical] Txn ID: 97, Text: Full or delta checkpoint, Begin TS: 156085, Commit TS: 156086, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156084.json\nmax commit ts: 156084\nis full checkpoint: 1\n\n\n[03:53:04.341] [264] [critical] Txn ID: 106, Text: Full or delta checkpoint, Begin TS: 156087, Commit TS: 156088, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156086.json\nmax commit ts: 156086\nis full checkpoint: 1\n\n\n[03:53:04.341] [264] [critical] Txn ID: 138, Text: Full or delta checkpoint, Begin TS: 156089, Commit TS: 156090, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156088.json\nmax commit ts: 156088\nis full checkpoint: 1\n\n\n[03:53:04.341] [264] [critical] Txn ID: 147, Text: Full or delta checkpoint, Begin TS: 156091, Commit TS: 156092, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156090.json\nmax commit ts: 156090\nis full checkpoint: 1\n\n\n[03:53:04.341] [264] [critical] Txn ID: 156, Text: Full or delta checkpoint, Begin TS: 156093, Commit TS: 156094, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156092.json\nmax commit ts: 156092\nis full checkpoint: 1\n\n\n[03:53:04.341] [264] [critical] Txn ID: 165, Text: Full or delta checkpoint, Begin TS: 156095, Commit TS: 156096, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156094.json\nmax commit ts: 156094\nis full checkpoint: 1\n\n\n[03:53:04.341] [264] [critical] Txn ID: 207, Text: Select Statement, Begin TS: 156097, Commit TS: 0, State: Started\n\n[03:53:04.341] [264] [critical] Txn ID: 13, Text: Select Statement, Begin TS: 156073, Commit TS: 0, State: Started\n\n[03:53:04.342] [264] [critical] Error: This task should not be scheduled if the source queue is empty@src/executor/operator_state.cpp:50\n[03:53:04.342] [264] [critical] 0, /usr/bin/infinity(+0x4e0629) [0x5d3139408629]\n[03:53:04.342] [264] [critical] 1, /usr/bin/infinity(+0x4e1474) [0x5d3139409474]\n[03:53:04.342] [264] [critical] 2, /usr/bin/infinity(+0x13b3e6c) [0x5d313a2dbe6c]\n[03:53:04.342] [264] [critical] 3, /usr/bin/infinity(+0x60ad70) [0x5d3139532d70]\n[03:53:04.342] [264] [critical] 4, /usr/bin/infinity(+0x2be8f8) [0x5d31391e68f8]\n[03:53:04.342] [264] [critical] 5, /usr/bin/infinity(+0x2c1e63) [0x5d31391e9e63]\n[03:53:04.342] [264] [critical] 6, /lib/x86_64-linux-gnu/libc.so.6(+0x94ac3) [0x76c3daaa3ac3]\n[03:53:04.342] [264] [critical] 7, /lib/x86_64-linux-gnu/libc.so.6(clone+0x44) [0x76c3dab34a04]\n[03:53:04.342] [264] [critical] Txn ID: 1, Text: ForceCheckpointTask, Begin TS: 156071, Commit TS: 156072, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156070.json\nmax commit ts: 156070\nis full checkpoint: 1\n\nForceCheckpointTask\n\n[03:53:04.342] [264] [critical] Txn ID: 20, Text: Full or delta checkpoint, Begin TS: 156073, Commit TS: 156074, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156072.json\nmax commit ts: 156072\nis full checkpoint: 1\n\n\n[03:53:04.342] [264] [critical] Txn ID: 30, Text: Full or delta checkpoint, Begin TS: 156075, Commit TS: 156076, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156074.json\nmax commit ts: 156074\nis full checkpoint: 1\n\n\n[03:53:04.342] [264] [critical] Txn ID: 38, Text: Full or delta checkpoint, Begin TS: 156077, Commit TS: 156078, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156076.json\nmax commit ts: 156076\nis full checkpoint: 1\n\n\n[03:53:04.342] [264] [critical] Txn ID: 71, Text: Full or delta checkpoint, Begin TS: 156079, Commit TS: 156080, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156078.json\nmax commit ts: 156078\nis full checkpoint: 1\n\n\n[03:53:04.342] [264] [critical] Txn ID: 79, Text: Full or delta checkpoint, Begin TS: 156081, Commit TS: 156082, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156080.json\nmax commit ts: 156080\nis full checkpoint: 1\n\n\n[03:53:04.342] [264] [critical] Txn ID: 88, Text: Full or delta checkpoint, Begin TS: 156083, Commit TS: 156084, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156082.json\nmax commit ts: 156082\nis full checkpoint: 1\n\n\n[03:53:04.342] [264] [critical] Txn ID: 97, Text: Full or delta checkpoint, Begin TS: 156085, Commit TS: 156086, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156084.json\nmax commit ts: 156084\nis full checkpoint: 1\n\n\n[03:53:04.342] [264] [critical] Txn ID: 106, Text: Full or delta checkpoint, Begin TS: 156087, Commit TS: 156088, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156086.json\nmax commit ts: 156086\nis full checkpoint: 1\n\n\n[03:53:04.342] [264] [critical] Txn ID: 138, Text: Full or delta checkpoint, Begin TS: 156089, Commit TS: 156090, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156088.json\nmax commit ts: 156088\nis full checkpoint: 1\n\n\n[03:53:04.342] [264] [critical] Txn ID: 147, Text: Full or delta checkpoint, Begin TS: 156091, Commit TS: 156092, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156090.json\nmax commit ts: 156090\nis full checkpoint: 1\n\n\n[03:53:04.342] [264] [critical] Txn ID: 156, Text: Full or delta checkpoint, Begin TS: 156093, Commit TS: 156094, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156092.json\nmax commit ts: 156092\nis full checkpoint: 1\n\n\n[03:53:04.342] [264] [critical] Txn ID: 165, Text: Full or delta checkpoint, Begin TS: 156095, Commit TS: 156096, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156094.json\nmax commit ts: 156094\nis full checkpoint: 1\n\n\n[03:53:04.342] [264] [critical] Txn ID: 207, Text: Select Statement, Begin TS: 156097, Commit TS: 0, State: Started\n\n[03:53:04.342] [264] [critical] Txn ID: 13, Text: Select Statement, Begin TS: 156073, Commit TS: 0, State: Started\n\n[03:53:04.342] [264] [critical] Error: TerminateHandler: Unhandled Exception: This task should not be scheduled if the source queue is empty@src/executor/operator_state.cpp:50\n[03:53:04.342] [264] [critical] 0, /usr/bin/infinity(+0x4e0629) [0x5d3139408629]\n[03:53:04.342] [264] [critical] 1, /usr/bin/infinity(+0x22fcf5) [0x5d3139157cf5]\n[03:53:04.342] [264] [critical] 2, /usr/bin/infinity(+0x1e0d383) [0x5d313ad35383]\n[03:53:04.342] [264] [critical] 3, /usr/bin/infinity(+0x1e0f7e6) [0x5d313ad377e6]\n[03:53:04.342] [264] [critical] 4, /usr/bin/infinity(+0x1e0f7d0) [0x5d313ad377d0]\n[03:53:04.342] [264] [critical] 5, /usr/bin/infinity(+0x4e1500) [0x5d3139409500]\n[03:53:04.342] [264] [critical] 6, /usr/bin/infinity(+0x13b3e6c) [0x5d313a2dbe6c]\n[03:53:04.342] [264] [critical] 7, /usr/bin/infinity(+0x60ad70) [0x5d3139532d70]\n[03:53:04.342] [264] [critical] 8, /usr/bin/infinity(+0x2be8f8) [0x5d31391e68f8]\n[03:53:04.342] [264] [critical] 9, /usr/bin/infinity(+0x2c1e63) [0x5d31391e9e63]\n[03:53:04.342] [264] [critical] 10, /lib/x86_64-linux-gnu/libc.so.6(+0x94ac3) [0x76c3daaa3ac3]\n[03:53:04.342] [264] [critical] 11, /lib/x86_64-linux-gnu/libc.so.6(clone+0x44) [0x76c3dab34a04]\n[03:53:04.342] [264] [critical] Txn ID: 1, Text: ForceCheckpointTask, Begin TS: 156071, Commit TS: 156072, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156070.json\nmax commit ts: 156070\nis full checkpoint: 1\n\nForceCheckpointTask\n\n[03:53:04.342] [264] [critical] Txn ID: 20, Text: Full or delta checkpoint, Begin TS: 156073, Commit TS: 156074, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156072.json\nmax commit ts: 156072\nis full checkpoint: 1\n\n\n[03:53:04.342] [264] [critical] Txn ID: 30, Text: Full or delta checkpoint, Begin TS: 156075, Commit TS: 156076, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156074.json\nmax commit ts: 156074\nis full checkpoint: 1\n\n\n[03:53:04.342] [264] [critical] Txn ID: 38, Text: Full or delta checkpoint, Begin TS: 156077, Commit TS: 156078, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156076.json\nmax commit ts: 156076\nis full checkpoint: 1\n\n\n[03:53:04.342] [264] [critical] Txn ID: 71, Text: Full or delta checkpoint, Begin TS: 156079, Commit TS: 156080, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156078.json\nmax commit ts: 156078\nis full checkpoint: 1\n\n\n[03:53:04.342] [264] [critical] Txn ID: 79, Text: Full or delta checkpoint, Begin TS: 156081, Commit TS: 156082, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156080.json\nmax commit ts: 156080\nis full checkpoint: 1\n\n\n[03:53:04.342] [264] [critical] Txn ID: 88, Text: Full or delta checkpoint, Begin TS: 156083, Commit TS: 156084, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156082.json\nmax commit ts: 156082\nis full checkpoint: 1\n\n\n[03:53:04.342] [264] [critical] Txn ID: 97, Text: Full or delta checkpoint, Begin TS: 156085, Commit TS: 156086, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156084.json\nmax commit ts: 156084\nis full checkpoint: 1\n\n\n[03:53:04.342] [264] [critical] Txn ID: 106, Text: Full or delta checkpoint, Begin TS: 156087, Commit TS: 156088, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156086.json\nmax commit ts: 156086\nis full checkpoint: 1\n\n\n[03:53:04.342] [264] [critical] Txn ID: 138, Text: Full or delta checkpoint, Begin TS: 156089, Commit TS: 156090, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156088.json\nmax commit ts: 156088\nis full checkpoint: 1\n\n\n[03:53:04.342] [264] [critical] Txn ID: 147, Text: Full or delta checkpoint, Begin TS: 156091, Commit TS: 156092, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156090.json\nmax commit ts: 156090\nis full checkpoint: 1\n\n\n[03:53:04.342] [264] [critical] Txn ID: 156, Text: Full or delta checkpoint, Begin TS: 156093, Commit TS: 156094, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156092.json\nmax commit ts: 156092\nis full checkpoint: 1\n\n\n[03:53:04.342] [264] [critical] Txn ID: 165, Text: Full or delta checkpoint, Begin TS: 156095, Commit TS: 156096, State: Committed\nCheckpoint:\ncatalog path: catalog/FULL.156094.json\nmax commit ts: 156094\nis full checkpoint: 1\n\n\n[03:53:04.342] [264] [critical] Txn ID: 207, Text: Select Statement, Begin TS: 156097, Commit TS: 0, State: Started\n\n[03:53:04.342] [264] [critical] Txn ID: 13, Text: Select Statement, Begin TS: 156073, Commit TS: 0, State: Started\n\n[03:53:04.342] [264] [critical] Error: SEGMENT FAULTS\n[03:53:04.342] [264] [critical] 0, /usr/bin/infinity(+0x4e0629) [0x5d3139408629]\n[03:53:04.342] [264] [critical] 1, /usr/bin/infinity(+0x22fdfb) [0x5d3139157dfb]\n[03:53:04.342] [264] [critical] 2, /lib/x86_64-linux-gnu/libc.so.6(+0x42520) [0x76c3daa51520]\n[03:53:04.342] [264] [critical] 3, /lib/x86_64-linux-gnu/libc.so.6(abort+0x178) [0x76c3daa37898]\n[03:53:04.342] [264] [critical] 4, /usr/bin/infinity(+0x22fcfa) [0x5d3139157cfa]\n[03:53:04.342] [264] [critical] 5, /usr/bin/infinity(+0x1e0d383) [0x5d313ad35383]\n[03:53:04.342] [264] [critical] 6, /usr/bin/infinity(+0x1e0f7e6) [0x5d313ad377e6]\n[03:53:04.342] [264] [critical] 7, /usr/bin/infinity(+0x1e0f7d0) [0x5d313ad377d0]\n[03:53:04.342] [264] [critical] 8, /usr/bin/infinity(+0x4e1500) [0x5d3139409500]\n[03:53:04.342] [264] [critical] 9, /usr/bin/infinity(+0x13b3e6c) [0x5d313a2dbe6c]\n[03:53:04.342] [264] [critical] 10, /usr/bin/infinity(+0x60ad70) [0x5d3139532d70]\n[03:53:04.342] [264] [critical] 11, /usr/bin/infinity(+0x2be8f8) [0x5d31391e68f8]\n[03:53:04.342] [264] [critical] 12, /usr/bin/infinity(+0x2c1e63) [0x5d31391e9e63]\n[03:53:04.342] [264] [critical] 13, /lib/x86_64-linux-gnu/libc.so.6(+0x94ac3) [0x76c3daaa3ac3]\n[03:53:04.342] [264] [critical] 14, /lib/x86_64-linux-gnu/libc.so.6(clone+0x44) [0x76c3dab34a04]\n[03:53:04.348] [264] [info] Periodic trigger stop ...\n```\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\n1. Upload a PDF with no searchable text\n2. Perform Law chunking\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "lamhktommy",
      "author_type": "User",
      "created_at": "2025-05-21T05:09:51Z",
      "updated_at": "2025-06-16T02:08:22Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 10,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7758/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7758",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7758",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:11.451561",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe error code 2008 with the message \"Infinity is initing\" indicates a known bug in the Infinity engine when handling a large number of files, which causes the engine to crash when opening the knowledge base. This issue is expected to be fixed in the next release of the Infinity engi",
          "created_at": "2025-05-21T05:12:53Z"
        },
        {
          "author": "lamhktommy",
          "body": "@dosu is this issue resolved in v0.19.0?",
          "created_at": "2025-06-03T03:22:46Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nBased on the available release notes and codebase for RAGFlow v0.19.0, there is no indication that the \"Infinity is initing\" issue has been resolved in this version. The release notes do not mention any fixes related to this error, and there are no references to it in the code or doc",
          "created_at": "2025-06-03T03:26:25Z"
        },
        {
          "author": "99RRR",
          "body": "@dosubot @KevinHuSh  @lamhktommy Has it been solved, please?",
          "created_at": "2025-06-12T02:08:24Z"
        },
        {
          "author": "lamhktommy",
          "body": "> @dosubot [@KevinHuSh](https://github.com/KevinHuSh) [@lamhktommy](https://github.com/lamhktommy) Has it been solved, please?\n\nseems no",
          "created_at": "2025-06-16T01:46:40Z"
        }
      ]
    },
    {
      "issue_number": 7488,
      "title": "[Bug]: Persist layers hierarchy in RAPTOR",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n94181a990b957ed302952b4de17583d2b44f3099\n\n### RAGFlow image version\n\nv0.18.0\n\n### Other environment information\n\n```Markdown\nProblem Statement\n* In rag/raptor.py, the code initializes and appends to a local layers list to record each abstraction layer’s start/end indices.\n* However, this layers list is never returned, stored on the instance, or exposed to downstream processes.\n* RAGFlow instead flattens all summaries and original chunks into a single list—discarding any notion of tree structure\n\nImpact\nWithout persisting layers, RAGFlow cannot:\n* Reconstruct or traverse the abstraction tree at query time, negating RAPTOR’s tree‑organized retrieval mechanism.\n* Debug or visualize which layer produced a given summary, severely limiting interpretability and troubleshooting\n```\n\n### Actual behavior\n\n- In `rag/raptor.py`, the local `layers `list is initialized and appended to during each clustering step, but it is never attached to the instance or returned by the `__call__` method \n\n- The method concludes with `return chunks`, so only the flattened list of original and summary chunks is exposed; the hierarchical `(start, end)` indices in `layers `are discarded \n\n- Consequently, downstream code and the retrieval pipeline have no access to the abstraction tree, making true tree-organized retrieval impossible.\n\n### Expected behavior\n\n`return chunks, layers`\n\nBy preserving the full `layers `hierarchy, RAGFlow would unlock the core benefits of tree‑organized retrieval—enabling precise, multi‑level reasoning over long documents as envisioned by the RAPTOR authors.\n\n### Steps to reproduce\n\n```Markdown\ncall await RAPTOR().__call__(chunks, random_state) on any non‐trivial list of chunks—note it returns only the flattened chunks list \nAttempt to access raptor_instance.layers and observe an AttributeError (no layers persisted)\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "vishal-zetta",
      "author_type": "User",
      "created_at": "2025-05-06T10:24:10Z",
      "updated_at": "2025-06-15T19:48:48Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7488/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7488",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7488",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:11.668629",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHello @vishal-zetta! I'm [Dosu](https://dosu.dev), your friendly bot here to help you with bugs, answer questions, and assist you on your journey as a contributor. I'm here while you wait for a human maintainer. Let's tackle this issue together!\n\n<!-- Answer -->\nTo address the issu",
          "created_at": "2025-05-06T10:25:41Z"
        },
        {
          "author": "manoj-kumar-tg",
          "body": "Hi @KevinHuSh, any idea ?",
          "created_at": "2025-05-06T12:20:08Z"
        },
        {
          "author": "KevinHuSh",
          "body": "If the tree structure needs to be retrieved, we need to add fields in ES to demonstrate the connections between chunks.\nPlus, we need to alter the search procedure to utilize the structure information of chunks.",
          "created_at": "2025-05-07T10:05:20Z"
        },
        {
          "author": "kkvalsvik",
          "body": "Hi, I was just about to submit the same issue. Is updating this on the roadmap?",
          "created_at": "2025-06-15T19:48:48Z"
        }
      ]
    },
    {
      "issue_number": 5253,
      "title": "[Question]: I would like to ask what methods Ragflow has to support the integration of Oracle database in the text2sql workflow?",
      "body": "### Describe your problem\n\nI found the DB Assistant workflow in the AGENT tool, which currently only supports database types (currently supporting MySQL, PostgresDB, and MariaDB). I would like to ask what methods are available to support the integration of Oracle database. I look forward to your reply.\n\n![Image](https://github.com/user-attachments/assets/e1ac7f49-6439-4d93-8ce9-2cb3ed6b470d)",
      "state": "open",
      "author": "LULU-LULULA",
      "author_type": "User",
      "created_at": "2025-02-22T11:36:18Z",
      "updated_at": "2025-06-15T19:24:47Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question",
        "💞 feature"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/5253/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/5253",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/5253",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:11.899166",
      "comments": [
        {
          "author": "KEVINEAST333",
          "body": "i need also",
          "created_at": "2025-05-06T03:38:20Z"
        },
        {
          "author": "BadwomanCraZY",
          "body": "@LULU-LULULA  @KEVINEAST333  Apologies for the delayed response, and thank you so much for your valuable suggestion! 🙏\n\nSupporting Oracle Database is indeed a powerful feature that would greatly enhance our product’s capabilities. We’ll be reviewing this request in our upcoming feature evaluation. I",
          "created_at": "2025-05-19T02:30:51Z"
        },
        {
          "author": "fleed141",
          "body": "+1 on this",
          "created_at": "2025-06-15T19:24:47Z"
        }
      ]
    },
    {
      "issue_number": 8205,
      "title": "[Bug]: The problem still exists. werkzeug.exceptions.MethodNotAllowed: 405 Method Not Allowed: The method is not allowed for the requested URL.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nv0.19.0 slim\n\n### RAGFlow image version\n\nv0.19.0 slim\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nAfter I upgraded RAGFlow to v0.19.0 slim, the following error occurred:\n\n```\n2025-06-12 09:36:11,843 INFO     19 172.21.0.6 - - [12/Jun/2025 09:36:11] \"GET /v1/user/info HTTP/1.1\" 200 -\n2025-06-12 09:36:12,080 ERROR    19 405 Method Not Allowed: The method is not allowed for the requested URL.\nTraceback (most recent call last):\n  File \"/ragflow/.venv/lib/python3.10/site-packages/flask/app.py\", line 880, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"/ragflow/.venv/lib/python3.10/site-packages/flask/app.py\", line 854, in dispatch_request\n    self.raise_routing_exception(req)\n  File \"/ragflow/.venv/lib/python3.10/site-packages/flask/app.py\", line 463, in raise_routing_exception\n    raise request.routing_exception  # type: ignore[misc]\n  File \"/ragflow/.venv/lib/python3.10/site-packages/flask/ctx.py\", line 362, in match_request\n    result = self.url_adapter.match(return_rule=True)  # type: ignore\n  File \"/ragflow/.venv/lib/python3.10/site-packages/werkzeug/routing/map.py\", line 624, in match\n    raise MethodNotAllowed(valid_methods=list(e.have_match_for)) from None\nwerkzeug.exceptions.MethodNotAllowed: 405 Method Not Allowed: The method is not allowed for the requested URL.\n```\n\nHow can I resolve this issue?\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nThis issue occurs when accessing the RAGFlow homepage(http://ip/knowledge).\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "gongshaojie12",
      "author_type": "User",
      "created_at": "2025-06-12T01:53:30Z",
      "updated_at": "2025-06-14T23:28:00Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8205/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8205",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8205",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:12.120172",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThis error is often caused by a mismatch between the frontend and backend code after an upgrade. The /v1/user/info endpoint only allows the GET method, so if the frontend or browser cache is outdated, it might send a different method or hit a stale route, triggering a 405 error.\n\nTry",
          "created_at": "2025-06-12T01:55:31Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Do a hard refresh of your browser (Ctrl + F5 or Shift + F5) to clear any cached frontend code.",
          "created_at": "2025-06-12T04:28:50Z"
        },
        {
          "author": "HuitingLiu",
          "body": "> Do a hard refresh of your browser (Ctrl + F5 or Shift + F5) to clear any cached frontend code.\n\nThis doesn't work.  It happens for the kb/list as well: \n```\nMethod: GET, URL: http://127.0.0.1:9380/v1/kb/list?page=1&page_size=30&keywords=\n```",
          "created_at": "2025-06-14T23:23:09Z"
        }
      ]
    },
    {
      "issue_number": 8272,
      "title": "[Question]: Error on startup of the ragflow-mysql container",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI am using a linux based machine (amd64).\nDuring installation mysql enters this loop. All the files are used as default (v0.19). Am I missing something? \n\n> 2025-06-14 23:06:14+08:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 8.0.39-1.el9 started.\n2025-06-14 23:06:14+08:00 [Note] [Entrypoint]: Switching to dedicated user 'mysql'\n2025-06-14 23:06:14+08:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 8.0.39-1.el9 started.\n'/var/lib/mysql/mysql.sock' -> '/var/run/mysqld/mysqld.sock'\n2025-06-14T15:06:15.448410Z 0 [Warning] [MY-011068] [Server] The syntax '--skip-host-cache' is deprecated and will be removed in a future release. Please use SET GLOBAL host_cache_size=0 instead.\n2025-06-14T15:06:15.450381Z 0 [Warning] [MY-010918] [Server] 'default_authentication_plugin' is deprecated and will be removed in a future release. Please use authentication_policy instead.\n2025-06-14T15:06:15.450406Z 0 [System] [MY-010116] [Server] /usr/sbin/mysqld (mysqld 8.0.39) starting as process 1\n2025-06-14T15:06:15.458029Z 1 [System] [MY-013576] [InnoDB] InnoDB initialization has started.\n2025-06-14T15:06:15.644380Z 1 [System] [MY-013577] [InnoDB] InnoDB initialization has ended.\nmysqld: Table 'mysql.plugin' doesn't exist\n2025-06-14T15:06:15.760513Z 0 [ERROR] [MY-010735] [Server] Could not open the mysql.plugin table. Please perform the MySQL upgrade procedure.\n2025-06-14T15:06:15.760743Z 0 [Warning] [MY-010441] [Server] Failed to open optimizer cost constant tables\n2025-06-14T15:06:15.760886Z 0 [Warning] [MY-010441] [Server] Failed to open optimizer cost constant tables\n2025-06-14T15:06:15.761028Z 0 [Warning] [MY-010441] [Server] Failed to open optimizer cost constant tables\n2025-06-14T15:06:15.761267Z 0 [Warning] [MY-010441] [Server] Failed to open optimizer cost constant tables\n2025-06-14T15:06:15.761387Z 0 [Warning] [MY-010441] [Server] Failed to open optimizer cost constant tables\n2025-06-14T15:06:15.761510Z 0 [Warning] [MY-010441] [Server] Failed to open optimizer cost constant tables\n2025-06-14T15:06:15.761632Z 0 [Warning] [MY-010441] [Server] Failed to open optimizer cost constant tables\n2025-06-14T15:06:15.800339Z 0 [Warning] [MY-010015] [Repl] Gtid table is not ready to be used. Table 'mysql.gtid_executed' cannot be opened.\n2025-06-14T15:06:15.877672Z 0 [Warning] [MY-010015] [Repl] Gtid table is not ready to be used. Table 'mysql.gtid_executed' cannot be opened.\n2025-06-14T15:06:15.896499Z 0 [Warning] [MY-010068] [Server] CA certificate ca.pem is self signed.\n2025-06-14T15:06:15.896563Z 0 [System] [MY-013602] [Server] Channel mysql_main configured to support TLS. Encrypted connections are now supported for this channel.\n2025-06-14T15:06:15.905080Z 0 [Warning] [MY-011810] [Server] Insecure configuration for --pid-file: Location '/var/run/mysqld' in the path is accessible to all OS users. Consider choosing a different directory.\n2025-06-14T15:06:15.907612Z 0 [Warning] [MY-010441] [Server] Failed to open optimizer cost constant tables\n2025-06-14T15:06:15.907855Z 0 [ERROR] [MY-013129] [Server] A message intended for a client cannot be sent there as no client-session is attached. Therefore, we're sending the information to the error-log instead: MY-001146 - Table 'mysql.component' doesn't exist\n2025-06-14T15:06:15.907882Z 0 [Warning] [MY-013129] [Server] A message intended for a client cannot be sent there as no client-session is attached. Therefore, we're sending the information to the error-log instead: MY-003543 - The mysql.component table is missing or has an incorrect definition.\n2025-06-14T15:06:15.908507Z 0 [ERROR] [MY-010326] [Server] Fatal error: Can't open and lock privilege tables: Table 'mysql.user' doesn't exist\n2025-06-14T15:06:15.908566Z 0 [ERROR] [MY-010952] [Server] The privilege system failed to initialize correctly. For complete instructions on how to upgrade MySQL to a new version please see the 'Upgrading MySQL' section from the MySQL manual.\n2025-06-14T15:06:15.908775Z 0 [ERROR] [MY-010119] [Server] Aborting\n2025-06-14T15:06:17.502513Z 0 [System] [MY-010910] [Server] /usr/sbin/mysqld: Shutdown complete (mysqld 8.0.39)  MySQL Community Server - GPL.\n",
      "state": "closed",
      "author": "090Gamer",
      "author_type": "User",
      "created_at": "2025-06-14T15:13:00Z",
      "updated_at": "2025-06-14T21:31:42Z",
      "closed_at": "2025-06-14T21:31:42Z",
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8272/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8272",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8272",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:12.373640",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @090Gamer! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThis error is usually caused by a corrupted or incomplete MySQL data directory, often due to a leftover volume from a previous run or a permissions issue with the mounted data d",
          "created_at": "2025-06-14T15:15:17Z"
        },
        {
          "author": "090Gamer",
          "body": "Removing the data doesn't make a difference.\nRemoving all volumes with \n> docker compose down -v\n\nalso doesn't work.\n\nI am pulling latest from git, then making a checkout to 0.19 version\nAny other suggestions?",
          "created_at": "2025-06-14T15:29:01Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThere are a few things you can try that have resolved similar MySQL startup issues in RAGFlow:\n\n- Try switching from MySQL to MariaDB—this has worked for others with persistent MySQL table errors, especially on Linux and macOS environments. You can do this by changing the image in yo",
          "created_at": "2025-06-14T15:31:07Z"
        },
        {
          "author": "090Gamer",
          "body": "I have used the second  approach of changing the docke-compose.base.yml\n\nthis is the new error:\n> 2025-06-15 00:55:27+08:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 8.0.39-1.el9 started.\n2025-06-15 00:55:28+08:00 [Note] [Entrypoint]: Switching to dedicated user 'mysql'\n2025-06-15 00:5",
          "created_at": "2025-06-14T17:07:03Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe \"MYSQL_PASSWORD specified, but missing MYSQL_USER; MYSQL_PASSWORD will be ignored\" warning happens because the docker-compose config sets MYSQL_PASSWORD but not MYSQL_USER. To fix this, add MYSQL_USER=root to your .env file or the environment section of your MySQL service in dock",
          "created_at": "2025-06-14T17:10:57Z"
        }
      ]
    },
    {
      "issue_number": 8271,
      "title": "[Bug]: Numeric value (1.8446744073709552e+19) out of range of long (-9223372036854775808 - 9223372036854775807)",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nf707403\n\n### RAGFlow image version\n\nf707403\n\n### Other environment information\n\n```Markdown\nUbuntu 20.04\nAMD CPU\n```\n\n### Actual behavior\n\nError: Numeric value (1.8446744073709552e+19) out of range of long (-9223372036854775808 - 9223372036854775807) raised during chunking \n\n### Expected behavior\n\nThe value is out of range of long type, so I think the parsing type may be changed to string or other suitable types.\n\n### Steps to reproduce\n\n```Markdown\n1. parsing excel file\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "HaiyangPeng",
      "author_type": "User",
      "created_at": "2025-06-14T12:24:09Z",
      "updated_at": "2025-06-14T12:24:09Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8271/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8271",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8271",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:12.608432",
      "comments": []
    },
    {
      "issue_number": 8270,
      "title": "[Bug]: 'dict' object has no attribute 'json' error for SiliconFlow and VolcEngine",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nf7074037efe7bee90de7e5a933499a484c92ea99\n\n### RAGFlow image version\n\nv0.19.x-161-gf7074037 full\n\n### Other environment information\n\n```Markdown\nLInux aarch64\n```\n\n### Actual behavior\n\nRagflow works well with deepseek and openai. But when I switch to siliconflow or volcEngine, there will be the following error: \n```shell\nTraceback (most recent call last):\n  File \"/ragflow/api/apps/conversation_app.py\", line 232, in stream\n    for ans in chat(dia, msg, True, **req):\n  File \"/ragflow/api/db/services/dialog_service.py\", line 283, in chat\n    kbinfos = retriever.retrieval(\n  File \"<@beartype(rag.nlp.search.Dealer.retrieval) at 0xfffec2275bd0>\", line 35, in retrieval\n  File \"/ragflow/rag/nlp/search.py\", line 369, in retrieval\n    sres = self.search(req, [index_name(tid) for tid in tenant_ids],\n  File \"<@beartype(rag.nlp.search.Dealer.search) at 0xfffec22757e0>\", line 95, in search\n  File \"/ragflow/rag/nlp/search.py\", line 110, in search\n    matchDense = self.get_vector(qst, emb_mdl, topk, req.get(\"similarity\", 0.1))\n  File \"/ragflow/rag/nlp/search.py\", line 49, in get_vector\n    qv, _ = emb_mdl.encode_queries(txt)\n  File \"<@beartype(api.db.services.llm_service.LLMBundle.encode_queries) at 0xfffeb9ae1ab0>\", line 31, in encode_queries\n  File \"/ragflow/api/db/services/llm_service.py\", line 250, in encode_queries\n    emd, used_tokens = self.mdl.encode_queries(query)\n  File \"/ragflow/rag/llm/embedding_model.py\", line 770, in encode_queries\n    log_exception(_e, response)\n  File \"/ragflow/api/utils/log_utils.py\", line 87, in log_exception\n    raise e\n  File \"/ragflow/rag/llm/embedding_model.py\", line 767, in encode_queries\n    res = response.json()\nAttributeError: 'dict' object has no attribute 'json'\n```\n\nAlso for google gemini model, please add an option for safety level tuning.\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nAll the models in SiliconFlow and VolcEngine are not available. I haven't tried other model suppliers yet.\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "zhanghanduo",
      "author_type": "User",
      "created_at": "2025-06-14T11:20:48Z",
      "updated_at": "2025-06-14T12:00:35Z",
      "closed_at": "2025-06-14T12:00:35Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8270/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8270",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8270",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:12.608455",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @zhanghanduo! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThe error happens because the encode_queries method in the SiliconFlow embedding model tries to call .json() on a dict, not a requests.Response object. This is a type mismatc",
          "created_at": "2025-06-14T11:22:31Z"
        },
        {
          "author": "zhanghanduo",
          "body": "I got the issue. If I want to use the model supported by a thirdparty inference platform, I also need to make sure the knowledge base is indexed with the embedding model by that platform. Otherwise there will be format issue. I created a new knowledge base and use doubao embedding model instead of t",
          "created_at": "2025-06-14T12:00:35Z"
        }
      ]
    },
    {
      "issue_number": 8269,
      "title": "[Bug]: When using the Python SDK to converse with the AI assistant in ragflow, I found that the reference value is empty, but curl(http api) is ok.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n6ca1aef5\n\n### RAGFlow image version\n\nv0.19.0 full\n\n### Other environment information\n\n```Markdown\nOS type:\nragflow is deployed using Docker, deployed on an Ubuntu Server 24.04 system.\nragflow Python SDK running on Windows 11 24H2 system,python version is 3.13.1\n```\n\n### Actual behavior\n\nWhen using the Python SDK to converse with the AI assistant in ragflow, I found that the reference value is empty（whether stream or not）. but curl(http api) is ok.\nbelow is my source code:\n```python\n# Import RAGFlow SDK\nfrom ragflow_sdk import RAGFlow\nfrom chainlit.oauth_providers import OAuthProvider\nimport chainlit as cl\n\nimport httpx\nfrom fastapi import HTTPException\nfrom chainlit.user import User\n# Initialize RAGFlow object\n# api_key: Authentication API key\n# base_url: Base URL of RAGFlow service\nrag_object = RAGFlow(\n    api_key=\"ragflow-c3NmJlODE4NDc2NTExZjBiNGQ0MDY0Mz\", \n    base_url=\"http://10.65.37.238\"\n)\n\n# Get specific assistant by name\nassistant = rag_object.list_chats(name=\"AI-assist\")[0]\n\n# List all available assistants (for debugging)\nfor assistant in rag_object.list_chats():\n    print(assistant)\n\n# Create new chat session\nsession = assistant.create_session()\n\n# Print welcome message\nprint(\"\\n==================== test-AI-assist =====================\\n\")\nprint(\"Hello. What can I do for you?\")\n\n# 在创建会话时设置stream=False\n\"\"\" user_question = \"如何重置OA密码？\"\nchat_assisitant_output = session.ask(question=user_question, stream=False)\nprint(chat_assisitant_output) \"\"\"\n# Main conversation loop\nwhile True:\n    # Get user input\n    # question = input(\"\\nPlease question：\\n> \")\n    question = \"how to reset OA password?\"\n    print(f\"user question: {question}\")\n    # Stream assistant's response\n    # 初始化变量存储完整响应\n    full_response = \"\"\n    cont = \"\"\n    print(\"\\n==================== test-AI-assist =====================\\n\")\n    try:\n        # 处理流式响应\n        for ans in session.ask(question=question, stream=False):\n            # 检查是否为有效的Message对象且包含content\n            if hasattr(ans, 'content') and ans.content:\n                # 计算新增内容\n                new_content = ans.content[len(full_response):]\n                # 打印新增内容\n                print(new_content, end='', flush=True)\n                print()\n                print(f\"reference: {ans.reference}\")\n                # 更新完整响应\n                full_response = ans.content\n            # 检查是否为结束消息\n            elif isinstance(ans, dict) and ans.get('code') == 0 and ans.get('data') is True:\n                break\n        print()  # 添加换行\n    except KeyError as e:\n        # 忽略chunk_id相关的KeyError，不输出错误信息\n        if 'chunk_id' not in str(e):\n            print(f\"\\nUnexpected error: {e}\")\n    except Exception as e:\n        print(f\"\\nUnexpected error: {e}\")\n    finally:\n        print(\"\\n\\n==================== test-AI-assist =====================\\n\")\n\n```\nAs shown in the figure, the list reference is empty:\n\n![Image](https://github.com/user-attachments/assets/d163aa2c-77bb-4959-b475-0b4375a23719)\nshow_quote value is True:\n![Image](https://github.com/user-attachments/assets/3abbf52d-0dff-4fec-aff5-1a3463449cae)\n\nbut use curl,reference ok\n```shell\ncurl --request POST --url http://10.65.37.238/api/v1/chats/fe86873c476411f0a91d0643452f6426/completions --header 'Content-Type: application/json' --header 'Authorization: Bearer ragflow-c3NmJlODE4NDc2NTExZjBiNGQ0MDY0Mz' --data-binary '\n     {\n          \"question\": \"如何重置OA密码？\",\n          \"stream\": false,\n          \"session_id\":\"8ed83c14483111f0bf330643452f6426\"\n     }' | jq .\n```\n![Image](https://github.com/user-attachments/assets/54443d99-b504-4754-b13d-f502faf3144c)\n\n### Expected behavior\n\nI hope the Python SDK can also return referenced document information\n\n### Steps to reproduce\n\n```Markdown\nuse vs code to debug the python script,You will find that the list reference is empty(please replace question)\n\n# Import RAGFlow SDK\nfrom ragflow_sdk import RAGFlow\nfrom chainlit.oauth_providers import OAuthProvider\nimport chainlit as cl\n\nimport httpx\nfrom fastapi import HTTPException\nfrom chainlit.user import User\n# Initialize RAGFlow object\n# api_key: Authentication API key\n# base_url: Base URL of RAGFlow service\nrag_object = RAGFlow(\n    api_key=\"ragflow-c3NmJlODE4NDc2NTExZjBiNGQ0MDY0Mz\", \n    base_url=\"http://10.65.37.238\"\n)\n\n# Get specific assistant by name\nassistant = rag_object.list_chats(name=\"AI-assist\")[0]\n\n# List all available assistants (for debugging)\nfor assistant in rag_object.list_chats():\n    print(assistant)\n\n# Create new chat session\nsession = assistant.create_session()\n\n# Print welcome message\nprint(\"\\n==================== test-AI-assist =====================\\n\")\nprint(\"Hello. What can I do for you?\")\n\n# 在创建会话时设置stream=False\n\"\"\" user_question = \"如何重置OA密码？\"\nchat_assisitant_output = session.ask(question=user_question, stream=False)\nprint(chat_assisitant_output) \"\"\"\n# Main conversation loop\nwhile True:\n    # Get user input\n    # question = input(\"\\nPlease question：\\n> \")\n    question = \"how to reset OA password?\"\n    print(f\"user question: {question}\")\n    # Stream assistant's response\n    # 初始化变量存储完整响应\n    full_response = \"\"\n    cont = \"\"\n    print(\"\\n==================== test-AI-assist =====================\\n\")\n    try:\n        # 处理流式响应\n        for ans in session.ask(question=question, stream=False):\n            # 检查是否为有效的Message对象且包含content\n            if hasattr(ans, 'content') and ans.content:\n                # 计算新增内容\n                new_content = ans.content[len(full_response):]\n                # 打印新增内容\n                print(new_content, end='', flush=True)\n                print()\n                print(f\"reference: {ans.reference}\")\n                # 更新完整响应\n                full_response = ans.content\n            # 检查是否为结束消息\n            elif isinstance(ans, dict) and ans.get('code') == 0 and ans.get('data') is True:\n                break\n        print()  # 添加换行\n    except KeyError as e:\n        # 忽略chunk_id相关的KeyError，不输出错误信息\n        if 'chunk_id' not in str(e):\n            print(f\"\\nUnexpected error: {e}\")\n    except Exception as e:\n        print(f\"\\nUnexpected error: {e}\")\n    finally:\n        print(\"\\n\\n==================== test-AI-assist =====================\\n\")\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "iamtornado",
      "author_type": "User",
      "created_at": "2025-06-14T09:56:07Z",
      "updated_at": "2025-06-14T10:08:03Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8269/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8269",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8269",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:12.790893",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @iamtornado! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThis is a known issue caused by a mismatch between how the Python SDK and the backend API handle reference information. The HTTP API (as seen with curl) includes references, b",
          "created_at": "2025-06-14T10:01:12Z"
        },
        {
          "author": "iamtornado",
          "body": "> Hi [@iamtornado](https://github.com/iamtornado)! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n> \n> This is a known issue caused by a mismatch between how the Python SDK and the backend API handle reference information. The HTTP API (as seen with curl) includes referenc",
          "created_at": "2025-06-14T10:08:03Z"
        }
      ]
    },
    {
      "issue_number": 5403,
      "title": "[Bug]: No similarity score returns when calling HTTP/Python API of [Converse with chat assistant]",
      "body": "### Is there an existing issue for the same bug?\n\n- [x] I have checked the existing issues.\n\n### RAGFlow workspace code commit ID\n\nmain\n\n### RAGFlow image version\n\nmain\n\n### Other environment information\n\n```Markdown\ndocker with win11\n```\n\n### Actual behavior\n\nI just flow the steps to build a RAG chat assistant ,but it never output the similarity score, a lot of issues about this bug remains. Other parts of chunks are all okay , I searched a lot about this issue ,but I can not find out why . Whether I use a rerank or not , the test of knowledge base is always with similarity scores , but when calling API , no similarity.\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\njust call the chat assistant with a knowledge base\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "valkryhx",
      "author_type": "User",
      "created_at": "2025-02-26T12:54:11Z",
      "updated_at": "2025-06-14T08:56:11Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/5403/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/5403",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/5403",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:12.998057",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "Could you paste some of your test code and the corresponding response here?",
          "created_at": "2025-02-27T02:33:26Z"
        },
        {
          "author": "ams-idk",
          "body": "Hello @KevinHuSh , I am facing the same issue. Version 0.17.0-slim. Here is the code:\n```python\n# questions: List[str], session: <ragflow_sdk.modules.session.Session>\nchat_config = {\nname = name, dataset_ids = dataset_ids, llm=Chat.LLM(rag=True, res_dict={\"model_name\":chat, temperature\": 0.1, \"top_p",
          "created_at": "2025-03-03T15:32:48Z"
        },
        {
          "author": "iamtornado",
          "body": "> Hello [@KevinHuSh](https://github.com/KevinHuSh) , I am facing the same issue. Version 0.17.0-slim. Here is the code:\n> \n> # questions: List[str], session: <ragflow_sdk.modules.session.Session>\n> chat_config = {\n> name = name, dataset_ids = dataset_ids, llm=Chat.LLM(rag=True, res_dict={\"model_name",
          "created_at": "2025-06-14T08:56:11Z"
        }
      ]
    },
    {
      "issue_number": 7956,
      "title": "[Question]: How to send requests to an MCP Server via HTTP？",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nHow to send requests to an MCP Server via HTTP? The documentation doesn't clearly state this. It only shows how to call the MCP Server through Python code, but I'm using Java. I want to simulate an MCP Client calling the MCP Server by understanding the raw HTTP protocol.",
      "state": "closed",
      "author": "earlBell",
      "author_type": "User",
      "created_at": "2025-05-29T11:38:41Z",
      "updated_at": "2025-06-14T08:21:36Z",
      "closed_at": "2025-06-10T03:56:47Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 10,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7956/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7956",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7956",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:13.180594",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @earlBell! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThe MCP Server in RAGFlow is a component that exposes HTTP endpoints (notably /sse and /messages/) and requires an API key for authentication in most configurations. It communic",
          "created_at": "2025-05-29T11:40:17Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Please refer to [this](https://ragflow.io/docs/dev/mcp_client).",
          "created_at": "2025-05-30T07:25:23Z"
        },
        {
          "author": "earlBell",
          "body": "#The following is my HTTP simulated MCP request, but no data is returned. \n```\ncurl --location --request GET 'http://192.168.2.132:9382/sse' --header 'api_key: ragflow-M4NDY1ZWVjM2FlMjExZjBiMzY0YmEzOT' --header 'Accept: text/event-stream' --header 'Content-Type: application/json' --header 'Host: 192",
          "created_at": "2025-06-05T03:46:06Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYour curl request connects to the /sse endpoint and receives only ping events because /sse is designed to establish a Server-Sent Events (SSE) stream, but it does not process or respond to a data payload sent in the GET request body. The correct workflow is:\n\n1. First, connect to /ss",
          "created_at": "2025-06-05T03:55:43Z"
        },
        {
          "author": "earlBell",
          "body": "\n\n\n\n> 您的 curl 请求连接到 /sse 终端节点并仅接收 ping 事件，因为 /sse 旨在建立服务器发送的事件 （SSE） 流，但它不会处理或响应 GET 请求正文中发送的数据负载。正确的工作流程是：\n> \n> 1. 首先，使用所需的 api_key 标头连接到 /sse （GET） 以建立 SSE 流。请勿在此请求中发送数据负载。\n> 2. 收到带有 /messages/？session_id=...endpoint 中，将您的实际问题和有效负载作为 POST 请求发送到 /messages/？session_id=...（不是 /sse）。此 POST 应包含您的 JSON ",
          "created_at": "2025-06-05T06:45:20Z"
        }
      ]
    },
    {
      "issue_number": 7984,
      "title": "[Question]: Is there a way to configure how particular extension should be parsed?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nAt current moment supported file extensions out of the box are listed  [file_utils.py](https://github.com/infiniflow/ragflow/blob/main/api/utils/file_utils.py) and extension must be handled by a parser.\nIs there a batter way to extend list of parsable file extensions other than manually write it inside the python code and rebuild the docker image?\nI think this should be configurable rather then exhaustive list of every file extension possible. \nExamples of missing extensions: .bat (windows cmd), .ps1 (powershell), .pas (pascal/delphi), hpp (c++ header), .el (emacs lisp), ",
      "state": "open",
      "author": "MakaAlb",
      "author_type": "User",
      "created_at": "2025-05-30T10:14:47Z",
      "updated_at": "2025-06-13T18:04:12Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question",
        "💞 feature"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7984/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7984",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7984",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:13.482564",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @MakaAlb! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nCurrently, RAGFlow does not provide a way to configure how particular file extensions are parsed without modifying the Python code and rebuilding the Docker image. The supported ",
          "created_at": "2025-05-30T10:16:52Z"
        },
        {
          "author": "ZhenhangTung",
          "body": "@MakaAlb Any use cases for these file extensions? ",
          "created_at": "2025-06-03T12:59:18Z"
        },
        {
          "author": "MakaAlb",
          "body": "Our organization heavily uses Delphi (based on Pascal) and depends on powershell and bat files for automation. Since it is not feasible to cover every file extension that could be used by different organizations. I think it should be configurable.",
          "created_at": "2025-06-03T18:57:13Z"
        },
        {
          "author": "ZhenhangTung",
          "body": "@MakaAlb Got it. Will do some investigations to see if we can provide any solution to it. ",
          "created_at": "2025-06-04T09:54:15Z"
        },
        {
          "author": "ZhenhangTung",
          "body": "@zephyershen also encountered this challenge, like Vue files, etc. I'm curious are you building a coding copilot upon RAGFlow for your org or just an assistant answering questions about your codebase? @MakaAlb ",
          "created_at": "2025-06-12T05:57:03Z"
        }
      ]
    },
    {
      "issue_number": 8235,
      "title": "[Question]: Parsing .txt file stuck",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nHello,\n\nI uploaded a .txt file that contains some DDL for some DB tables, but ragflow parsed it stucked. I tried all the suggestions from the other related question, but it still not works.\n\nCould you please kindly help with solving it.\n\nMy environment information as following:\nM2 ultra\nLaunched RagFlow 0.19.0 from source code.\n\nThanks in advance.\n\n\nMy .txt file attached. [ddl_content.txt](https://github.com/user-attachments/files/20708512/ddl_content.txt)\n\n![Image](https://github.com/user-attachments/assets/1c97f315-daf4-400b-b0c3-74f805cd80b1)",
      "state": "closed",
      "author": "mobguang",
      "author_type": "User",
      "created_at": "2025-06-12T11:59:45Z",
      "updated_at": "2025-06-13T15:36:54Z",
      "closed_at": "2025-06-13T15:36:54Z",
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 13,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8235/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8235",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8235",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:13.755270",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThere are a few common reasons why parsing a .txt file with DDL content might get stuck in RagFlow. First, for DDL files, it's recommended to set the delimiter to `;` and leave the chunk token number as default—this helps the parser split statements correctly and avoid issues with la",
          "created_at": "2025-06-12T12:02:57Z"
        },
        {
          "author": "Woody-Hu",
          "body": "works fine on my local\n\n![Image](https://github.com/user-attachments/assets/f58291dd-eab9-4187-8422-440748eedd16)\nas I know the queue status means not start parse, so may not related to this file, maybe some queue related issue, log may can hint something.",
          "created_at": "2025-06-13T00:37:28Z"
        },
        {
          "author": "mobguang",
          "body": "@dosu, @Woody-Hu ,\n\nThanks for your reply.\n\nI followed the instructions, but it still now work.\n1. My machine's memory is 192GB that is enough for the parsing task. \n2. The delimiter is also set to ';'. \n\nI attached the log. [ragflow_server.log](https://github.com/user-attachments/files/20718911/rag",
          "created_at": "2025-06-13T03:07:26Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nBased on the code and logging structure, any critical error or failure during .txt file parsing (including encoding issues, file corruption, or parser bugs) would be clearly logged in `ragflow_server.log` with `[ERROR]`, `exception`, or similar messages. If your log does not show any",
          "created_at": "2025-06-13T03:16:41Z"
        },
        {
          "author": "mobguang",
          "body": "@dosu,\n\nCould you please tell me how to check task executor is running?  Thanks.",
          "created_at": "2025-06-13T06:10:01Z"
        }
      ]
    },
    {
      "issue_number": 8214,
      "title": "[Feature Request]: i want to use steaming protocol in django,but have some problem",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\nI want to use the streaming protocol in the AI SDK, but my backend is Django instead of the FastAPI provided in the sample. After testing, I found that when using Django's streamHttpResponse to return data, the front-end sample cannot obtain the streaming data in real time. Instead, it waits for all the data to be transmitted completely before displaying them all together on the interface. What should I do?\n```\n\n### Describe the feature you'd like\n\nI want to use the streaming protocol in the AI SDK, but my backend is Django instead of the FastAPI provided in the sample. After testing, I found that when using Django's streamHttpResponse to return data, the front-end sample cannot obtain the streaming data in real time. Instead, it waits for all the data to be transmitted completely before displaying them all together on the interface. What should I do?\n\n### Describe implementation you've considered\n\n\n@api_view(['GET'])\ndef test_get1(request):\n    def event_stream():\n        for i in range(10):\n            # yield  '{{\"data\":{text}}}\\n\\n'.format(text=json.dumps(i))\n            yield 'data:'+json.dumps(i) + '\\n\\n'\n            sleep(1)\n    response = StreamingHttpResponse(event_stream(),content_type='text/event-stream')\n    response.headers['x-vercel-ai-data-stream'] = 'v1'\n    return response\n\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "Ufodar",
      "author_type": "User",
      "created_at": "2025-06-12T05:54:16Z",
      "updated_at": "2025-06-13T09:23:32Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8214/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8214",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8214",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:13.981949",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @Ufodar! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nDjango's StreamingHttpResponse can support real-time streaming, but some setups (especially with certain WSGI servers, reverse proxies, or browser buffering) may cause the client ",
          "created_at": "2025-06-12T06:01:34Z"
        },
        {
          "author": "ZhenhangTung",
          "body": "@asiroliu ",
          "created_at": "2025-06-13T02:39:06Z"
        },
        {
          "author": "asiroliu",
          "body": "@Ufodar \n1. Please format the code you've provided. Currently, I cannot properly review your demonstration code.\n2. You mentioned 'FastAPI provided in the sample' in your issue - where was this referenced?\n3. For streaming functionality, you typically need to explicitly set stream=True in the reques",
          "created_at": "2025-06-13T09:23:32Z"
        }
      ]
    },
    {
      "issue_number": 8129,
      "title": "[Question]: Is the API currently provided the same as the one accessed by the RAGFlow front end?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nIs the API currently provided the same as the one accessed by the RAGFlow front end?\n当前系统提供的api 和 ragflow 前端程序访问的接口是否是同一个？\n",
      "state": "open",
      "author": "WKRZY",
      "author_type": "User",
      "created_at": "2025-06-09T03:11:21Z",
      "updated_at": "2025-06-13T08:59:36Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8129/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8129",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8129",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:14.217013",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYes, the API currently provided is the same as the one accessed by the RAGFlow front end. The endpoints used by the front end for user management, tenant operations, LLM models, knowledge bases, documents, chat, file management, system info, and flow operations all have matching defi",
          "created_at": "2025-06-09T03:14:52Z"
        },
        {
          "author": "KevinHuSh",
          "body": "No, there're different.",
          "created_at": "2025-06-10T03:36:15Z"
        },
        {
          "author": "Lxhnnn",
          "body": "> 不，它们是不同的。\n\nWhy do the HTTP API and RAGFlow interface return different results? Are there any solutions?​",
          "created_at": "2025-06-13T08:59:35Z"
        }
      ]
    },
    {
      "issue_number": 8255,
      "title": "[Question]: How can I see this effect in the enhanced image display?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nNow it is version 0.19.0, and I see the feature of \"enhanced image display\". I have built a knowledge base using PDF with images. How can I display images during chat when answering questions?",
      "state": "open",
      "author": "czhcc",
      "author_type": "User",
      "created_at": "2025-06-13T08:53:43Z",
      "updated_at": "2025-06-13T08:57:54Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question",
        "💞 feature"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8255/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8255",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8255",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:14.467928",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nTo see the enhanced image display effect in RAGFlow 0.19.0, make sure your knowledge base is built from PDFs that contain images. When you ask questions in chat that retrieve content referencing those images, RAGFlow will render the images directly in the chat response, not just as l",
          "created_at": "2025-06-13T08:57:54Z"
        }
      ]
    },
    {
      "issue_number": 7679,
      "title": "[Question]: why my RAPTOR always use the wrong embedding model?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\n2025-05-16 10:30:48,008 INFO     39 set_progress(a98ed6ac31fd11f0ab800242ac120006), progress: -1, progress_msg: 10:30:47 [ERROR][Exception]: Exceptions from Trio nursery (1 sub-exception) -- SILICONFLOWEmbed.encode got invalid response from https://api.siliconflow.cn/v1/embeddings,text_batch:['**总结：**\\n\\n该段落详细介绍了泰国会计和税务服务的内容及优势，主要包括以下要点：\\n\\n1. **服务内容与费用说明**  \\n   - **补充说明**：若客户文件遗漏或滞后需现场提交税表，将收取交通费；年度财务报表及税表（如PND.50、PND.51）准备服务费用明确，但不含审计服务费。  \\n   - **会计服务范围**（每月）：  \\n     - 根据泰国会计制度进行核算（审核凭证、编制记账凭证）；  \\n     - 提供财务报告并提交企业所得税（PND.51/50）、增值税（Phor.30/36）、预扣税（PND.1/3/53/54）等税表；  \\n     - 代理社保登记及月度社保申报、固定资产明细及折旧表编制；  \\n     - 免费线上税务账户申请及常见税务咨询（差旅费需报销）。  \\n   - **阶梯价服务**：针对线上/线下零售业务提供定制方案；审计服务费单独说明。  \\n\\n2. **服务优势**  \\n   - **专业资质**：团队由泰国大型机构背景的会计师、税务师及律师组成，熟悉中泰会计准则差异。  \\n   - **保障性**：政府审批、及时准确申报、责任明确可追溯，避免人员变动风险。  \\n   - **成本与效率**：节省专职会计成本（无需承担社保等费用），团队协作避免技能单一问题。  \\n   - **保密与沟通**：严守商业秘密，中泰双语顾问减少沟通误差，提升服务精准度。  \\n\\n3. **附加服务**  \\n   - 免费代理社保登记、税务账户申请及基础咨询（部分需报销差旅费）。  \\n\\n**核心价值**：通过专业团队提供合规、高效、低成本的中泰跨境财税服务，满足企业多样化需求。'],res:{'code': 20042, 'message': 'input must have less than 512 tokens', 'data': None}\n2025-05-16 10:30:48,009 ERROR    39 handle_task got exception for task {\"id\": \"a98ed6ac31fd11f0ab800242ac120006\", \"doc_id\": \"a272377431fd11f0b5970242ac120006\", \"from_page\": 100000000, \"to_page\": 100000000, \"retry_count\": 0, \"kb_id\": \"2f41263e31fd11f0a96d0242ac120006\", \"parser_id\": \"naive\", \"parser_config\": {\"layout_recognize\": \"DeepDOC\", \"chunk_token_num\": 512, \"delimiter\": \"\\n\", \"auto_keywords\": 0, \"auto_questions\": 0, \"html4excel\": false, \"raptor\": {\"use_raptor\": true, \"prompt\": \"\\u8bf7\\u603b\\u7ed3\\u4ee5\\u4e0b\\u6bb5\\u843d\\u3002 \\u5c0f\\u5fc3\\u6570\\u5b57\\uff0c\\u4e0d\\u8981\\u7f16\\u9020\\u3002 \\u6bb5\\u843d\\u5982\\u4e0b\\uff1a\\n      {cluster_content}\\n\\u4ee5\\u4e0a\\u5c31\\u662f\\u4f60\\u9700\\u8981\\u603b\\u7ed3\\u7684\\u5185\\u5bb9\\u3002\", \"max_token\": 256, \"threshold\": 0.1, \"max_cluster\": 64, \"random_seed\": 0}, \"graphrag\": {\"use_graphrag\": false}}, \"name\": \"\\u6d32\\u8baf\\u6cf0\\u56fd\\u8d22\\u7a0e\\u4ee3\\u7406\\u670d\\u52a1\\u5185\\u5bb9\\u53ca\\u62a5\\u4ef7.pdf\", \"type\": \"pdf\", \"location\": \"\\u6d32\\u8baf\\u6cf0\\u56fd\\u8d22\\u7a0e\\u4ee3\\u7406\\u670d\\u52a1\\u5185\\u5bb9\\u53ca\\u62a5\\u4ef7.pdf\", \"size\": 225729, \"tenant_id\": \"30adf26030a211f0b4db0242ac120006\", \"language\": \"English\", \"embd_id\": \"BAAI/bge-large-zh-v1.5@BAAI\", \"pagerank\": 0, \"kb_parser_config\": {\"layout_recognize\": \"DeepDOC\", \"chunk_token_num\": 512, \"delimiter\": \"\\n\", \"auto_keywords\": 0, \"auto_questions\": 0, \"html4excel\": false, \"raptor\": {\"use_raptor\": true, \"prompt\": \"\\u8bf7\\u603b\\u7ed3\\u4ee5\\u4e0b\\u6bb5\\u843d\\u3002 \\u5c0f\\u5fc3\\u6570\\u5b57\\uff0c\\u4e0d\\u8981\\u7f16\\u9020\\u3002 \\u6bb5\\u843d\\u5982\\u4e0b\\uff1a\\n      {cluster_content}\\n\\u4ee5\\u4e0a\\u5c31\\u662f\\u4f60\\u9700\\u8981\\u603b\\u7ed3\\u7684\\u5185\\u5bb9\\u3002\", \"max_token\": 256, \"threshold\": 0.1, \"max_cluster\": 64, \"random_seed\": 0}, \"graphrag\": {\"use_graphrag\": false}}, \"img2txt_id\": \"\", \"asr_id\": \"\", \"llm_id\": \"Qwen/Qwen3-32B@SILICONFLOW\", \"update_time\": 1747362598971, \"task_type\": \"raptor\"}\n\nthis is my log, I set the BAAI/bge-large-zh-v1 as my default embedding model，the default chat model is siliconflow/qwen3 model。but when i use the raptor，it always try to use the siliconflow's embedding api for the raptor task，and then will give me a  'input must have less than 512 tokens' error.",
      "state": "open",
      "author": "20070951",
      "author_type": "User",
      "created_at": "2025-05-16T02:46:24Z",
      "updated_at": "2025-06-13T07:29:19Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7679/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7679",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7679",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:14.651395",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHello @20070951! I'm here to help you with any bugs or questions you might have while you wait for a human maintainer. If you're looking to troubleshoot or become a contributor, feel free to ask!\n\n<!-- Answer -->\nTo address the issue of Raptor using the wrong embedding model, you c",
          "created_at": "2025-05-16T02:49:42Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Embedding models for RAPTOR follows knowledge base's.",
          "created_at": "2025-05-16T05:05:24Z"
        },
        {
          "author": "20070951",
          "body": "> Embedding models for RAPTOR follows knowledge base's.\n\n\"tenant_id\": \"30adf26030a211f0b4db0242ac120006\", \"language\": \"English\", \"embd_id\": \"BAAI/bge-large-zh-v1.5@BAAI\", \"pagerank\": 0, \"kb_parser_config\":     \nFrom this log message you can see that my knowledge base's embd model is  “BAAI/bge-large",
          "created_at": "2025-05-16T06:29:14Z"
        },
        {
          "author": "wanghaohao994",
          "body": "> Hello [@20070951](https://github.com/20070951)! I'm here to help you with any bugs or questions you might have while you wait for a human maintainer. If you're looking to troubleshoot or become a contributor, feel free to ask!\n> \n> To address the issue of Raptor using the wrong embedding model, yo",
          "created_at": "2025-06-13T07:29:19Z"
        }
      ]
    },
    {
      "issue_number": 8230,
      "title": "[Question]: Why are addresses which resolve to internal IPs considered invalid URLs?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nRegarding the function [is_valid_url](https://github.com/infiniflow/ragflow/blob/d36c8d18b13a43b29d1f5b5766f4f0382d4e7582/api/utils/web_utils.py#L105), why are addresses which resolve to private IPs considered invalid?\n\nIn my case, I'm running RAGFlow in a network with an internal DNS, so I'm unable to crawl webpages hosted from the same network without some awful workarounds (like hardcoding a public IP in the machine's `/etc/hosts`).\n\nIs there a reason for this limitation and if not, would you be willing to consider relaxing it?",
      "state": "open",
      "author": "suss-mcx",
      "author_type": "User",
      "created_at": "2025-06-12T11:17:11Z",
      "updated_at": "2025-06-13T07:13:53Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8230/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8230",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8230",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:14.932438",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @suss-mcx! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nInternal IPs are considered invalid by the is_valid_url function because the implementation is designed to prevent security risks like Server-Side Request Forgery (SSRF). The fu",
          "created_at": "2025-06-12T11:19:14Z"
        },
        {
          "author": "KevinHuSh",
          "body": " The private IP should be valid by `is_valid_url`.\n\nWhat's the IP looks like?",
          "created_at": "2025-06-13T06:29:57Z"
        },
        {
          "author": "suss-mcx",
          "body": "@KevinHuSh In my case the IP the hostname resolved to is `172.22.150.251`, and the crawler failes with \"Invalid URL\". The mentioned `is_valid_url` function explicitly calls another function from the same file, `is_private_ip`, and returns False if it is.",
          "created_at": "2025-06-13T07:08:58Z"
        },
        {
          "author": "KevinHuSh",
          "body": "It should start with `http://` or `https://`, shouldn't be?\nGive it a try.",
          "created_at": "2025-06-13T07:11:32Z"
        },
        {
          "author": "suss-mcx",
          "body": "@KevinHuSh  Well yes, it does, I'm using a hostname WITH a scheme (like `https://`), the fact that it resolves to a private IP is what breaks crawling – as I mentioned, overriding system's DNS to resolve via a public IP fixes the problem, so the issue is definitely related to private IP detection",
          "created_at": "2025-06-13T07:13:53Z"
        }
      ]
    },
    {
      "issue_number": 7011,
      "title": "[Bug]: KeyError: 'chunk_id' when streaming responses via ragflow-sdk session.ask()",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n26d3480e\n\n### RAGFlow image version\n\n26d3480e(v0.17.2 full)\n\n### Other environment information\n\n```Markdown\nOS information:ubuntu server 24.04\nragflow-sdk version:0.13.0\nIDE:trae CN v0.3.9\n```\n\n### Actual behavior\n\nWhen using `session.ask(question, stream=True)` to get streamed responses, the SDK throws a `KeyError: 'chunk_id'` error when the response chunks don't contain this field.\nragflow webUI is OK:\n\n![Image](https://github.com/user-attachments/assets/cc5c0617-b588-4a93-85b6-e1fb9a541d45)\n\n### Expected behavior\n\n\n1. The SDK should handle missing `chunk_id` gracefully by either:\n   - Providing a default value (like \"N/A\" or null) when the field is absent\n   - Continuing to stream the response content without failing\n2. The error handling should:\n   - Clearly log warnings when optional fields are missing\n   - Not interrupt the streaming flow for non-critical missing data\n3. Documentation should explicitly state:\n   - Which response fields are mandatory/optional\n   - How missing fields are handled by the SDK\n\n### Steps to reproduce\n\n```Markdown\nuse docker compose to deploy ragflow latest version with full image,\nOpen this URL https://lilianweng.github.io/posts/2023-06-23-agent/\nSave the webpage as a pdf file, and then upload it to the ragflow knowledge base, the chunking method is manual, after the parsing is completed, talk to the assistant through ragflow-sdk in trae CN, and the content in the reference is indeed answered in the response, but finally there is an error: KeyError: 'chunk_id'\n```\n\n### Additional information\n\nbelow is python code:\n\n\n\nfrom ragflow_sdk import RAGFlow\n\n\nrag_object = RAGFlow(\n    api_key=\"ragflow-M2YTJkMTM2MTVkMTExZjA4MGRhOWFmMj\", \n    base_url=\"http://10.65.37.239\"\n)\n\n\nassistant = rag_object.list_chats(name=\"test-AI-assist\")[0]\n\n\nfor assistant in rag_object.list_chats():\n    print(assistant)\n\n\nsession = assistant.create_session()\n\n\nprint(\"\\n==================== test-AI-assist =====================\\n\")\nprint(\"Hello. What can I do for you?\")\n\n\nwhile True:\n    # Get user input\n    question = input(\"\\nPlease question：\\n> \")\n    print(\"\\n==================== test-AI-assist =====================\\n\")\n    cont = \"\"\n    \n\n    for ans in session.ask(question, stream=True):\n        # Print response chunks incrementally\n        print(ans.content[len(cont):], end='', flush=True)\n        cont = ans.content\n\n![Image](https://github.com/user-attachments/assets/34df59dc-430c-42fd-a488-6b80bedbb0fa)",
      "state": "open",
      "author": "iamtornado",
      "author_type": "User",
      "created_at": "2025-04-14T09:04:28Z",
      "updated_at": "2025-06-13T07:09:33Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7011/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7011",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7011",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:15.145381",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "This code might be out of date.",
          "created_at": "2025-04-15T09:53:27Z"
        },
        {
          "author": "Mxrxcx",
          "body": "I have the same issue also with streaming=False. I tried to solve it myself, but i could not figure it out. Any updates on this Bug?",
          "created_at": "2025-05-16T09:07:19Z"
        },
        {
          "author": "iamtornado",
          "body": "latest version，I have not tried\r\n\r\n\r\n\r\n\r\ntornado.deng\r\n***@***.***",
          "created_at": "2025-05-19T00:37:54Z"
        },
        {
          "author": "iamtornado",
          "body": "I have upgraded ragflow to version 0.19.0, however, this problem still exists.\n\n![Image](https://github.com/user-attachments/assets/67dadcff-8979-49fa-83b4-a1da8c5d250c)",
          "created_at": "2025-06-12T08:28:27Z"
        },
        {
          "author": "iamtornado",
          "body": "solved。\nhttps://ragflow.io/docs/v0.19.0/http_api_reference#converse-with-chat-assistant\n\nIn streaming mode, the last message is an empty message:\n\ndata:\n{\n  \"code\": 0,\n  \"data\": true\n}\n\nmy correct python code:\n```python\n# Import RAGFlow SDK\nfrom ragflow_sdk import RAGFlow\nfrom chainlit.oauth_provide",
          "created_at": "2025-06-13T07:09:33Z"
        }
      ]
    },
    {
      "issue_number": 8213,
      "title": "[Bug]: Typo \"process_duation\" in REST response body",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\ngbfe97d89\n\n### RAGFlow image version\n\n v0.18.0-130-gbfe97d89\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nThe property in the response body typoed as `process_duation`\n\n### Expected behavior\n\nThe property should be `process_du[r]ation`\n\n### Steps to reproduce\n\n```Markdown\nCall API /api/v1/datasets/{dataset_id}/documents\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "mustangxu",
      "author_type": "User",
      "created_at": "2025-06-12T04:45:39Z",
      "updated_at": "2025-06-13T07:08:49Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8213/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8213",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8213",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:15.375975",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "Noted.",
          "created_at": "2025-06-13T07:08:48Z"
        }
      ]
    },
    {
      "issue_number": 8221,
      "title": "[Bug]: Ragflow would NOT create the es index if the document no parsing and throw error: no chunk found",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n09f8dfe456a13849cfde06d0982e37c18a808c5b\n\n### RAGFlow image version\n\nv0.19.x\n\n### Other environment information\n\n```Markdown\nos: macOS\nhardware: mbp M1 PRO\n```\n\n### Actual behavior\n\nI've created an empty file document in my workspace, and try to click into the chunks, when I expected to see is that the chunks return an empty page without any errors. However, the UI page returned \"No chunk found!\" and also seen the es error:\n\n```\n2025-06-12 00:26:08 2025-06-11 20:26:08,902 INFO 18 POST http://es-bigdata-ragflow.internal:80/ragflow_2fd2c03046b111f080d2966d4d3e1e42/_search [status:404 duration:0.014s]\n2025-06-12 00:26:08 File \"/ragflow/.venv/lib/python3.10/site-packages/elasticsearch/_sync/client/__init__.py\", line 3836, in search\n2025-06-12 00:26:08 File \"/ragflow/.venv/lib/python3.10/site-packages/elasticsearch/_sync/client/utils.py\", line 446, in wrapped\n2025-06-12 00:26:08 File \"/ragflow/rag/utils/es_conn.py\", line 242, in search\n2025-06-12 00:26:08 2025-06-11 20:26:08,902 ERROR 18 ESConnection.search ['ragflow_2fd2c03046b111f080d2966d4d3e1e42'] query: {'query': {'bool': {'filter': [{'term': {'doc_id': 'abd3503c470111f0ab76966d4d3e1e42'}}, {'terms': {'kb_id': ['7e5cba7046fd11f0ae36966d4d3e1e42']}}]}}, 'from': 0, 'size': 1000, 'timeout': '600s', 'track_total_hits': True}\n2025-06-12 00:26:08 raise HTTP_EXCEPTIONS.get(meta.status, ApiError)(\n2025-06-12 00:26:08 res = self.es.search(index=indexNames,\n2025-06-12 00:26:08 elasticsearch.NotFoundError: NotFoundError(404, 'index_not_found_exception', 'no such index [ragflow_2fd2c03046b111f080d2966d4d3e1e42]', ragflow_2fd2c03046b111f080d2966d4d3e1e42, index_or_alias)\n2025-06-12 00:26:08 return self.perform_request( # type: ignore[return-value]\n2025-06-12 00:26:08 Traceback (most recent call last):\n2025-06-12 00:26:08 File \"/ragflow/.venv/lib/python3.10/site-packages/elasticsearch/_sync/client/_base.py\", line 320, in perform_request\n2025-06-12 00:26:08 return api(*args, **kwargs)\n2025-06-12 00:26:09 [INFO] 127.0.0.1:40841 - 42707\n```\n\nWhen I tried to create another kb and uploaded a document and parse it,  the issue has gone.\n\nI think it's caused by we didn't init the es index at the document create stage, instead, we did this at the task executor or parse job.\n\n\n### Expected behavior\n\nI think we should support to init the es index once a kb created rather than doing this at parse / task job stage, for example, one of our use cases are just writing the processed chunks data into ragflow kb rather than using the ragflow parsing capability, we just want to use another features of ragflow, e.g. retrieval related features.\n\n\n### Steps to reproduce\n\n```Markdown\nAs I mentioned before, just create an empty document and no parse, click into the chunks page and you'll see the error.\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "Colstuwjx",
      "author_type": "User",
      "created_at": "2025-06-12T08:19:11Z",
      "updated_at": "2025-06-13T07:02:36Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8221/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8221",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8221",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:15.579946",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYou're correct—currently, RAGFlow only creates the Elasticsearch index when a document is parsed or chunks are inserted, not at document creation. This is why you see a 404/index not found error when trying to access chunks for an unparsed document.\n\nThe main reason for this design i",
          "created_at": "2025-06-12T08:28:59Z"
        },
        {
          "author": "KevinHuSh",
          "body": "The KB has not been initiated. Upload and parse an sample file to that KB.",
          "created_at": "2025-06-13T07:02:36Z"
        }
      ]
    },
    {
      "issue_number": 8192,
      "title": "[Question]: Query about using RAGFlow as an external knowledge base for referencing in Dify",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nWhen using RAGFlow as an external knowledge base to reference in Dify, is it possible to reference tags that have been added in RAGFlow, and if so how do I need to implement this?\n请问使用RAGFlow作为外部知识库在Dify中引用时，是否可以引用到在RAGFlow中已添加的标签，如果可以的话需要如何实现？",
      "state": "open",
      "author": "uniql18",
      "author_type": "User",
      "created_at": "2025-06-11T09:17:10Z",
      "updated_at": "2025-06-13T06:48:38Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8192/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8192",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8192",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:17.692857",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "I did quite follow about reference of tags. RAGFlow did not have that kind of features.",
          "created_at": "2025-06-12T04:58:04Z"
        },
        {
          "author": "uniql18",
          "body": "> I did quite follow about reference of tags. RAGFlow did not have that kind of features.\n\nI created the tag library inside RAGFlow, and then added the created tags to the chunks of other RAGFlow knowledge bases, and observed a significant improvement in accuracy through the recall test.\nHowever, af",
          "created_at": "2025-06-12T06:51:09Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Did you utilize `/dify/retrieval` API to integerate these 2 together?\n\nAs long as you retrieve from RAGFlow, all the setups in RAGFlow take effects.",
          "created_at": "2025-06-12T09:52:17Z"
        },
        {
          "author": "uniql18",
          "body": "> Did you utilize `/dify/retrieval` API to integerate these 2 together?\n> \n> As long as you retrieve from RAGFlow, all the setups in RAGFlow take effects.\n\nI think I should have used this API.\n\nThank you very much for your reply, I will continue to explore it well in private.",
          "created_at": "2025-06-13T06:48:37Z"
        }
      ]
    },
    {
      "issue_number": 8153,
      "title": "[Question]: Where can I adjust the MEM_LIMIT for the deployed ragflow-server？",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nWhere can I adjust the MEM_LIMIT for the deployed ragflow-server？",
      "state": "closed",
      "author": "xiaomeixw",
      "author_type": "User",
      "created_at": "2025-06-10T02:36:49Z",
      "updated_at": "2025-06-13T06:16:40Z",
      "closed_at": "2025-06-13T06:16:40Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8153/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8153",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8153",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:17.914387",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYou can adjust the MEM_LIMIT for the deployed ragflow-server in the `docker/.env` file. This variable sets the maximum memory (in bytes) that each Docker container can use. After changing the value, restart the RAGFlow server for the new limit to take effect. For example:\n\n```\nMEM_LI",
          "created_at": "2025-06-10T02:38:55Z"
        },
        {
          "author": "xiaomeixw",
          "body": "The current issue is that I directly uploaded the ragflow-server image to the server for deployment. However, the .env file was not found in the ragflow-server image's system。 \n@dosubot",
          "created_at": "2025-06-10T03:37:20Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nIf the .env file isn't present in your ragflow-server image, you can still set the MEM_LIMIT by passing it as an environment variable when you start the container. For example, if you use docker run, add:\n\n```\ndocker run --env MEM_LIMIT=16147483648 ...\n```\n\nOr, if you're using Docker",
          "created_at": "2025-06-10T03:39:38Z"
        },
        {
          "author": "xiaomeixw",
          "body": "must recreate docker \nclose issue!",
          "created_at": "2025-06-13T06:16:40Z"
        }
      ]
    },
    {
      "issue_number": 8225,
      "title": "[Question]: how to change Myql  default connect    to 阿里云 mysql",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nvim .env \nMYSQL_HOST= x.x.x.x.x\nrestart ragflow_server \nlogs:\nCan't connect to MySQL server on x.x.x.x.x\n\nbut  i can connect this  using navicat\n \nso host is normal",
      "state": "closed",
      "author": "DJ-RunTu",
      "author_type": "User",
      "created_at": "2025-06-12T09:19:43Z",
      "updated_at": "2025-06-13T06:13:13Z",
      "closed_at": "2025-06-13T06:13:13Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8225/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8225",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8225",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:18.130612",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nTo connect RAGFlow to Alibaba Cloud MySQL, update both your `.env` file (set `MYSQL_HOST`, `MYSQL_PORT`, `MYSQL_DBNAME`, `MYSQL_PASSWORD` to match your Alibaba Cloud instance) and `conf/service_conf.yaml` (update the `mysql:` section with the same host, port, user, password, and data",
          "created_at": "2025-06-12T09:22:25Z"
        },
        {
          "author": "DJ-RunTu",
          "body": "> To connect RAGFlow to Alibaba Cloud MySQL, update both your `.env` file (set `MYSQL_HOST`, `MYSQL_PORT`, `MYSQL_DBNAME`, `MYSQL_PASSWORD` to match your Alibaba Cloud instance) and `conf/service_conf.yaml` (update the `mysql:` section with the same host, port, user, password, and database) [cite](h",
          "created_at": "2025-06-12T09:34:03Z"
        }
      ]
    },
    {
      "issue_number": 8183,
      "title": "[Question]: [ERROR]Generate embedding error:SILICONFLOWEmbed.encode got invalid response from https://api.siliconflow.cn/v1/embeddings",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nFiles parsing failure when calling Siliconflow embedding model of BAAI/bge-large-en-v1.5, ERROR & Configuraton information as attached pictures. Always feedback ERROR even trying to refresh few times .\n\n![Image](https://github.com/user-attachments/assets/db0467d0-9d50-4753-aec4-a9f7fd576d5b)\n\n![Image](https://github.com/user-attachments/assets/6bdba0da-800f-4a75-b28e-cca6a9a5d6f0)",
      "state": "open",
      "author": "Robert0611",
      "author_type": "User",
      "created_at": "2025-06-11T04:13:13Z",
      "updated_at": "2025-06-13T06:08:23Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 10,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8183/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8183",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8183",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:18.423235",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe error `SILICONFLOWEmbed.encode got invalid response from https://api.siliconflow.cn/v1/embeddings` means the Siliconflow API is returning a response that RAGFlow doesn't recognize as valid for embedding generation. This can happen if the API is down, the model name is incorrect, ",
          "created_at": "2025-06-11T04:16:58Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Could you apply the latest code? It prints the error response out. And please paste the error logs here.",
          "created_at": "2025-06-12T05:08:16Z"
        },
        {
          "author": "Robert0611",
          "body": "Thank you for your attention and reply. \"Apply the latest code“ means to pull the v0.19.0 again?\n",
          "created_at": "2025-06-12T05:49:55Z"
        },
        {
          "author": "Robert0611",
          "body": "@KevinHuSh Here is the part of information during the file parsing, thank you for you help ,big man!\n\n![Image](https://github.com/user-attachments/assets/3809a091-8fd6-4397-8473-7d1b79e03915)",
          "created_at": "2025-06-12T06:39:27Z"
        },
        {
          "author": "Robert0611",
          "body": "@KevinHuSh  I tried to figure out the ERROR by GIMINI, and Gemini told me it's due to context limited by Silinconflow's embedding model , the BAAI/Bge-large-eng-v1.5 context limit is set at 0.5k as attached . \n                      Anyway, thank a lot for your kind supporting!  and  **I strongly rec",
          "created_at": "2025-06-12T07:09:20Z"
        }
      ]
    },
    {
      "issue_number": 8247,
      "title": "[Question]: Exception in source code Docker image printing",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI am executing the command: docker build --platform linux/amd64 --build-arg LIGHTEN=1 --build-arg NEED_MIRROR=0 -f Dockerfile -t infiniflow/ragflow:nightly-slim .\nWhen creating Docker images, execute: RUN -- mount=type=cache, id=ragflow_npm, target=/root/. npm, sharing=locked\\\nAn exception occurred during the installation and run build of CD web&&&npm. The exception information is as follows:\n=> ERROR [builder 6/8] RUN --mount=type=cache,id=ragflow_npm,target=/root/.npm,sharing=locked     cd web && npm install && npm run build                                    214.3s \n------\n > [builder 6/8] RUN --mount=type=cache,id=ragflow_npm,target=/root/.npm,sharing=locked     cd web && npm install && npm run build:\n14.46\n14.46 > postinstall\n14.46 > umi setup\n14.46\n16.53 info  - [你知道吗？] father 4 正式发布了，详见 https://zhuanlan.zhihu.com/p/558192063\n16.54 info  - generate files\n17.90 info  - Preparing...\n20.00 info  - [icons] no icons was found\n22.05\n22.05 > prepare\n22.05 > cd .. && husky web/.husky\n22.05\n22.10 .git can't be found\n22.12 added 8 packages in 21s\n22.12\n22.12 134 packages are looking for funding\n22.12   run `npm fund` for details\n22.34\n22.34 > build\n22.34 > umi build\n22.34\n23.60 info  - [你知道吗？] 如果你有 MPA（多页应用）需求，可尝试新出的 mpa 配置项，详见 https://umijs.org/docs/guides/mpa\n23.60 info  - Umi v4.2.3\n24.47 info  - Preparing...\n25.62 info  - [icons] no icons was found\n26.10 Browserslist: caniuse-lite is outdated. Please run:\n26.10   npx update-browserslist-db@latest\n26.10   Why you should do it regularly: https://github.com/browserslist/update-db#readme\n26.14\n26.14 Rebuilding...\n27.02\n27.02 Done in 926ms.\n27.06 info  - [plugin: ./node_modules/@umijs/plugins/dist/tailwindcss] tailwindcss service exited\n30.14 Browserslist: caniuse-lite is outdated. Please run:\n30.14   npx update-browserslist-db@latest\n30.14   Why you should do it regularly: https://github.com/browserslist/update-db#readme\n30.64 ℹ Compiling Webpack\n52.25 [BABEL] Note: The code generator has deoptimised the styling of /ragflow/web/src/assets/svg/login-avatars.svg as it exceeds the max of 500KB.\n213.9 Killed\n------\nDockerfile:166\n--------------------\n 165 |     COPY docs docs\n 166 | >>> RUN --mount=type=cache,id=ragflow_npm,target=/root/.npm,sharing=locked \\\n 167 | >>>     cd web && npm install && npm run build\n 168 |\n--------------------\nERROR: failed to solve: process \"/bin/bash -c cd web && npm install && npm run build\" did not complete successfully: exit code: 137\n\nHow should I handle this issue? Thank you for your help\n\n![Image](https://github.com/user-attachments/assets/1b10f390-5c4d-4c93-bf01-74bf92717506)",
      "state": "open",
      "author": "wuqilei-code",
      "author_type": "User",
      "created_at": "2025-06-13T06:05:37Z",
      "updated_at": "2025-06-13T06:07:50Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8247/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8247",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8247",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:18.665068",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe error with exit code 137 means the build process was killed, almost always due to running out of memory inside the Docker container. This is common when building modern JavaScript apps with tools like Umi/Webpack, which can be memory-intensive during `npm run build` [citation](ht",
          "created_at": "2025-06-13T06:07:33Z"
        }
      ]
    },
    {
      "issue_number": 8244,
      "title": "[Question]:  llama.cpp   embedding",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nWhen I started an embeddings model with llama. cpp server, it is possible to execute it with commands. How can I customize adding it to ragflow\n![Image](https://github.com/user-attachments/assets/f3c6a428-3035-4782-a13e-c2b515d1b258)\n",
      "state": "open",
      "author": "taikai-zz",
      "author_type": "User",
      "created_at": "2025-06-13T03:39:10Z",
      "updated_at": "2025-06-13T05:14:47Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8244/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8244",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8244",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:18.918798",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYou can integrate your llama.cpp embedding server with RAGFlow by adding it as a custom embedding model in the configuration. Edit the `conf/llm_factories.json` file and add an entry like:\n\n```json\n{\n  \"llm_name\": \"llama-embedding@LocalAI\",\n  \"tags\": \"TEXT EMBEDDING\",\n  \"max_tokens\":",
          "created_at": "2025-06-13T03:41:45Z"
        },
        {
          "author": "taikai-zz",
          "body": "@dosu api key  How to configure API key\n",
          "created_at": "2025-06-13T04:33:50Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nTo configure an API key for a custom embedding model like llama.cpp in RAGFlow, you typically add the API key in the model configuration. For most providers, this is done in the `conf/llm_factories.json` file by including an `api_key` field in your model entry. For example:\n\n```json\n",
          "created_at": "2025-06-13T04:38:09Z"
        },
        {
          "author": "taikai-zz",
          "body": "@dosubot\n   \"factory_llm_infos\": [\n    {\n      \"name\": \"LocalAI-test\",\n      \"logo\": \"\",\n      \"tags\": \"TEXT EMBEDDING\",\n      \"status\": \"1\",\n      \"llm\": [\n        {\n          \"llm_name\": \"llama-embedding@LocalAI\",\n          \"tags\": \"TEXT EMBEDDING\",\n          \"max_tokens\": 8192,\n          \"model_t",
          "created_at": "2025-06-13T04:58:48Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYour JSON config is correct for adding a custom embedding model to RAGFlow. However, you can't add new model factories directly through the UI. To make your model appear in the UI, you need to manually add your entry to the conf/llm_factories.json file, then restart the RAGFlow backe",
          "created_at": "2025-06-13T05:02:52Z"
        }
      ]
    },
    {
      "issue_number": 8236,
      "title": "[Feature Request]: Retrieve chunks similar to another chunk",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\nWe need to find chunks that are similar to another chunk. That would be an easy vector search operation, since the embedding vector of the first chunk is already in RAGFlow's database, but there is no API for that kind of retrieval and as such you need to send the text representation of the chunk and it will run through the embedding process, which is slow and incurs unnecessary API costs.\n```\n\n### Describe the feature you'd like\n\nA simple API method to retrieve chunks that are similar to other chunks of the same document. With the same similarity parameter as the retrieve() method.\n\n### Describe implementation you've considered\n\nUsing the text of the chunk as a query.\n\n### Documentation, adoption, use case\n\n```Markdown\nFinding similar products to a given product.\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "panzi",
      "author_type": "User",
      "created_at": "2025-06-12T12:11:51Z",
      "updated_at": "2025-06-13T02:37:24Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8236/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8236",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8236",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:19.141307",
      "comments": [
        {
          "author": "panzi",
          "body": "I don't know the RAGFlow internals, but the way I imagine it this should be easy to implement. It would be the same as retrieve() but with *fewer* steps. So copy paste retrieve() and instead of getting the embedding vector from an embedding service get it from the knowledge base via a chunk ID.",
          "created_at": "2025-06-12T12:13:52Z"
        },
        {
          "author": "Woody-Hu",
          "body": "> I don't know the RAGFlow internals, but the way I imagine it this should be easy to implement. It would be the same as retrieve() but with _fewer_ steps. So copy paste retrieve() and instead of getting the embedding vector from an embedding service get it from the knowledge base via a chunk ID.\n\nI",
          "created_at": "2025-06-13T00:39:02Z"
        },
        {
          "author": "ZhenhangTung",
          "body": "@panzi could you explain more on your use cases?",
          "created_at": "2025-06-13T02:37:24Z"
        }
      ]
    },
    {
      "issue_number": 8065,
      "title": "[Bug]: graphrag task doesn't create",
      "body": "after basic parsing finished，task graph doesn't create。after basic finished，the task will success。i\nhave test the 0.19 and 0.18。what problem？",
      "state": "closed",
      "author": "wingjson",
      "author_type": "User",
      "created_at": "2025-06-05T01:26:16Z",
      "updated_at": "2025-06-13T02:07:55Z",
      "closed_at": "2025-06-13T02:07:55Z",
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8065/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8065",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8065",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:19.360295",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @wingjson! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThere are a few known issues in RAGFlow 0.18 and 0.19 that could explain why the graphrag task graph isn't created after basic parsing:\n\n- In 0.19, if Redis is not accessible or",
          "created_at": "2025-06-05T01:28:17Z"
        },
        {
          "author": "wingjson",
          "body": "![Image](https://github.com/user-attachments/assets/4e8376ed-c383-4a26-b73f-62be1420442d)\n\n![Image](https://github.com/user-attachments/assets/3aa2a429-3a81-4110-8b33-7ad1512ad7b5)\n\n![Image](https://github.com/user-attachments/assets/18b2be61-a81c-4567-9dc8-aa8eff641b14)\nredis is normal,the graph ta",
          "created_at": "2025-06-05T03:48:20Z"
        },
        {
          "author": "wingjson",
          "body": "1001295 PUT http://127.0.0.1:1200/ragflow_c837e6405f8311ef81d8f8f21ef27214/_bulk?refresh=false&timeout=60s [status:200 duration:0.089s]\n2025-06-05 12:13:48,378 INFO     1001295 PUT http://127.0.0.1:1200/ragflow_c837e6405f8311ef81d8f8f21ef27214/_bulk?refresh=false&timeout=60s [status:200 duration:0.0",
          "created_at": "2025-06-05T04:14:52Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Did you enable it here?\n\n![Image](https://github.com/user-attachments/assets/e9767f64-7961-44b8-adc3-2d7dfffcd138)",
          "created_at": "2025-06-05T07:01:43Z"
        },
        {
          "author": "wingjson",
          "body": "> Did you enable it here?\n> \n> ![Image](https://github.com/user-attachments/assets/e9767f64-7961-44b8-adc3-2d7dfffcd138)\n\n![Image](https://github.com/user-attachments/assets/de2328d8-efda-4cfa-8d93-a1a918cbfe69)\n\n![Image](https://github.com/user-attachments/assets/740ef886-bfa9-47a5-bb87-947b808d64b",
          "created_at": "2025-06-05T07:10:30Z"
        }
      ]
    },
    {
      "issue_number": 8239,
      "title": "[Question]: docker build error : docker build --platform linux/amd64 --build-arg LIGHTEN=1 -f Dockerfile -t infiniflow/ragflow:nightly-slim .Error executing build image command: docker build --platform linux/amd64 --build-arg LIGHTEN=1",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI always encounter an error in step 7 when executing the build image command. The error message seems to indicate a network issue, but when I click on the error link, it redirects to the browser where I can download the corresponding resources. Please help me solve this problem. Thank you very much\n\nComplete Command：docker build --platform linux/amd64 --build-arg LIGHTEN=1 -f Dockerfile -t infiniflow/ragflow:nightly-slim .\nCode version：0.19.0\n\n\n![Image](https://github.com/user-attachments/assets/c14b3066-8ba4-49e1-a251-b4c5babfebc8)\n\n![Image](https://github.com/user-attachments/assets/e7e607e0-90a0-4f3a-a39f-de45798054e8)\n\n![Image](https://github.com/user-attachments/assets/631f8949-37de-4195-b8b2-6e5c2e9c3ba6)",
      "state": "open",
      "author": "wuqilei-code",
      "author_type": "User",
      "created_at": "2025-06-12T15:20:13Z",
      "updated_at": "2025-06-13T01:48:20Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8239/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8239",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8239",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:19.578089",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @wuqilei-code! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nYour Docker build error is likely caused by network connectivity issues when the build process tries to fetch packages or connect to mirrors. This is a common problem, espec",
          "created_at": "2025-06-12T15:23:25Z"
        },
        {
          "author": "panzi",
          "body": "There is currently/was just a huge outage of multiple huge services (Cloudflare, some Google services, AWS). Maybe it was that?",
          "created_at": "2025-06-12T21:09:08Z"
        },
        {
          "author": "wuqilei-code",
          "body": "> 嗨！我是 [Dosu](https://go.dosu.dev/dosubot)，我正在帮助 ragflow 团队。\n> \n> 您的 Docker 构建错误可能是由构建过程尝试获取软件包或连接到镜像时出现的网络连接问题引起的。这是一个常见问题，尤其是当构建配置为使用无法从环境中访问的特定镜像时。\n> \n> 以下是为其他人解决类似问题的一些步骤：\n> \n> * 尝试使用参数进行构建，以使用默认的 PyPI 和 Ubuntu 存储库，而不是区域镜像。 例如：`--build-arg NEED_MIRROR=0````\n>   docker build --platform linux/amd6",
          "created_at": "2025-06-13T01:06:06Z"
        },
        {
          "author": "wuqilei-code",
          "body": "[@dosu](https://go.dosu.dev/dosubot)",
          "created_at": "2025-06-13T01:08:16Z"
        }
      ]
    },
    {
      "issue_number": 5131,
      "title": "[Question]: ERROR: ApiError(500, 'search_phase_execution_exception', 'Query contains too many nested clauses; maxClauseCount is set to 1277')",
      "body": "### Describe your problem\n\n2025-02-19日；拉取的最新的版本，docker部署。用的ollama本地部署的deepseek 32b模型。如果对话次数过多（测试了几次一般是4次左右）就会出现ERROR: ApiError(500, 'search_phase_execution_exception', 'Query contains too many nested clauses; maxClauseCount is set to 1277')。请问这个是什么问题，是 需要修改es的什么配置吗\n\n![Image](https://github.com/user-attachments/assets/e2b16684-af3a-4fa7-be0e-d170f0a7abbd)",
      "state": "open",
      "author": "kin1n",
      "author_type": "User",
      "created_at": "2025-02-19T07:41:20Z",
      "updated_at": "2025-06-13T01:30:56Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 20,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/5131/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/5131",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/5131",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:19.778736",
      "comments": [
        {
          "author": "sangmk",
          "body": "遇到了同样的问题，但是我的报错中提示上限为5031。\n1. 尝试了在docker container中找到\\usr\\share\\elasticsearch\\config\\elasticsearch.yml并且添加一行“indices.query.bool.max_clause_count=10240”，未能解决问题。\n2. 尝试了在ragflow\\docker\\docker-compose-base.yml中es01:environment中添加一行如上的描述，依旧未能解决问题。两次获得的报错是一样的。",
          "created_at": "2025-02-23T22:27:21Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Could you paste the error log of backend server here?\n\n",
          "created_at": "2025-02-24T03:57:00Z"
        },
        {
          "author": "Zhang-zewei",
          "body": "我也遇到了同样的问题，我的上限显示为1700，不太清楚在哪里找error log 。error: apierror(500, 'search_phase_execution_exception', 'query contains too many nested clauses; maxclausecount is set to 1700')",
          "created_at": "2025-02-25T13:00:39Z"
        },
        {
          "author": "kin1n",
          "body": "> Could you paste the error log of backend server here?\n\n2025-02-18 17:26:45,378 ERROR    14 ESConnection.search ['ragflow_bf0138d8ed9a11efae120242ac120006'] query: {'query': {'bool': {'must': [{'query_string': {'fields': ['title_tks^10', 'title_sm_tks^5', 'important_kwd^30', 'important_tks^20', 'qu",
          "created_at": "2025-02-26T03:30:37Z"
        },
        {
          "author": "kin1n",
          "body": "> Could you paste the error log of backend server here?\n\nTraceback (most recent call last):\n  File \"/ragflow/rag/utils/es_conn.py\", line 242, in search\n    res = self.es.search(index=indexNames,\n  File \"/ragflow/.venv/lib/python3.10/site-packages/elasticsearch/_sync/client/utils.py\", line 446, in wr",
          "created_at": "2025-02-26T03:31:38Z"
        }
      ]
    },
    {
      "issue_number": 7542,
      "title": "[Question]: RAGFlow failed to connect to the local Ollama model",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nOllama pull models to the local system successfully and connection test is successful between RAGFlow and Ollama service.\nBut still fail to add the Ollama local model in RAGFlow V0.18 as below error messages:  (If I deployed ollama by docker, I could add the ollama local model successfully in RAGFlow V0.17)\nPlease let me know how to resolve this problem, thanks!\n\n![Image](https://github.com/user-attachments/assets/59802e63-a84f-48fe-be9c-212b14a5b556)\n\n![Image](https://github.com/user-attachments/assets/ad5bc657-db55-4b79-814a-b2f509f465a8)",
      "state": "open",
      "author": "Bob123Yang",
      "author_type": "User",
      "created_at": "2025-05-08T16:04:56Z",
      "updated_at": "2025-06-13T01:11:57Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7542/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7542",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7542",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:20.056997",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nI found a similar open issue where users experienced connection problems between RAGFlow and the local Ollama model. Here are some suggested solutions that might help resolve your issue:\n\n1. **Ensure Ollama is Accessible**: Make sure that Ollama is running and accessible by setting t",
          "created_at": "2025-05-08T16:07:57Z"
        },
        {
          "author": "midilandlu",
          "body": "When configuring the Ollama model in your model provider, the model name must exactly match what’s shown by ollama list.\nTherefore, the correct model name should be: bge-m3:latest",
          "created_at": "2025-05-09T01:46:09Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Switch `localhost` to `127.17.0.1`. Give it a try.",
          "created_at": "2025-05-09T02:00:06Z"
        },
        {
          "author": "Bob123Yang",
          "body": "Thanks, Kevin @KevinHuSh @dosu\n\nbut fail to access ollama service from ragflow server as below that would not be the real success, right? \n\n![Image](https://github.com/user-attachments/assets/9e674b8d-795e-4d03-aadb-e13e485978fb)\n",
          "created_at": "2025-05-13T14:39:51Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nTo resolve the \"Connection refused\" error when accessing the Ollama service from the RAGFlow server, ensure that the port configurations in 'docker/service_conf.yaml.template' match those in 'docker/.env'. Use the Docker host IP address '172.17.0.1' instead of 'localhost' for the con",
          "created_at": "2025-05-13T14:41:43Z"
        }
      ]
    },
    {
      "issue_number": 7617,
      "title": "[Question]: onnxruntime::WaitNotificationFn) Available memory of 0 is smaller than requested bytes of 175657216",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\n解析PDF文件以及其他文件报错过程如下：\n\n开始于:\nTue, 13 May 2025 14:05:53 GMT\n持续时间:\n86.75 s\n进度:\n14:05:53 Task has been received.\n14:05:56 Page(1~13): Start to parse.\n14:05:56 Page(1~13): Visual model detected. Attempting to enhance figure extraction...\n14:05:56 Page(1~13): OCR started\n14:06:24 Page(1~13): [ERROR]Internal server error while chunking: Exceptions from Trio nursery (2 sub-exceptions)\n14:06:24 [ERROR][Exception]: Exceptions from Trio nursery (2 sub-exceptions) -- [ONNXRuntimeError] : 6 : RUNTIME_EXCEPTION : Non-zero status code returned while running Conv node. Name:'p2o.Conv.28' Status Message: /onnxruntime_src/onnxruntime/core/framework/bfc_arena.cc:376 void* onnxruntime::BFCArena::AllocateRawInternal(size_t, bool, onnxruntime::Stream*, bool, onnxruntime::WaitNotificationFn) Available memory of 0 is smaller than requested bytes of 187085056\n14:05:53 Task has been received.\n14:06:52 Page(13~21): Start to parse.\n14:06:52 Page(13~21): Visual model detected. Attempting to enhance figure extraction...\n14:06:52 Page(13~21): OCR started\n14:07:15 Page(13~21): [ERROR]Internal server error while chunking: Exceptions from Trio nursery (2 sub-exceptions)\n14:07:16 [ERROR][Exception]: Exceptions from Trio nursery (2 sub-exceptions) -- [ONNXRuntimeError] : 6 : RUNTIME_EXCEPTION : Non-zero status code returned while running Conv node. Name:'p2o.Conv.28' Status Message: /onnxruntime_src/onnxruntime/core/framework/bfc_arena.cc:376 void* onnxruntime::BFCArena::AllocateRawInternal(size_t, bool, onnxruntime::Stream*, bool, onnxruntime::WaitNotificationFn) Available memory of 0 is smaller than requested bytes of 175657216",
      "state": "open",
      "author": "kou1584423647",
      "author_type": "User",
      "created_at": "2025-05-13T08:16:38Z",
      "updated_at": "2025-06-13T01:06:56Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7617/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7617",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7617",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:20.265548",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nTo address the ONNXRuntime memory allocation error you're encountering during PDF parsing in RAGFlow, you can try the following solutions:\n\n1. **Limit GPU Memory Usage**: If you're using a GPU, configure ONNX Runtime to limit GPU memory usage. You can do this by setting specific opti",
          "created_at": "2025-05-13T08:17:50Z"
        },
        {
          "author": "kou1584423647",
          "body": "升级 ONNXRuntime 包到1.18.0 无法解决的。已经试过了。现在更换运行  重新下载v0.18.0-slim版本到cpu去运行RAGflow",
          "created_at": "2025-05-13T08:29:20Z"
        },
        {
          "author": "Factoryfromhere",
          "body": "我也遇到这个问题，并不是所有的文档都会报错。\n为什么进入docker环境pip show onnxruntime没有任何输出？如何查看安装的的onnxruntime版本呢？",
          "created_at": "2025-05-13T09:59:32Z"
        },
        {
          "author": "eddprogrammer",
          "body": "> 我也遇到这个问题，并不是所有的文档都会报错。 为什么进入docker环境pip show onnxruntime没有任何输出？如何查看安装的的onnxruntime版本呢？\n\nI am having the exact same issue. ",
          "created_at": "2025-06-13T01:06:56Z"
        }
      ]
    },
    {
      "issue_number": 7824,
      "title": "[Question]: Slice symbol is not effective",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nWhen I set `\\###`, but feel that the content is not split according to my delimiter.\n\n![Image](https://github.com/user-attachments/assets/cf21e1e4-ecce-47bc-9057-539c24a091ee)",
      "state": "closed",
      "author": "jionchen",
      "author_type": "User",
      "created_at": "2025-05-23T10:08:36Z",
      "updated_at": "2025-06-12T10:31:02Z",
      "closed_at": "2025-06-12T10:31:02Z",
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 21,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7824/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "yongtenglei"
      ],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7824",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7824",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:20.475878",
      "comments": []
    },
    {
      "issue_number": 8228,
      "title": "[Bug]: Inconsistent page_size Behavior in retrieval Function When doc_ids is Provided",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\ncc8029a7\n\n### RAGFlow image version\n\n3a34def55f161\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nIn the retrieval function of the Dealer class, located in rag/nlp/search.py (starting from line 348), there is a forced override of the page_size parameter when the doc_ids parameter is present. This raises questions about parameter consistency and could lead to unexpected behavior.\nSpecifically, in the following code snippet:\n\n`        if doc_ids:\n            similarity_threshold = 0\n            page_size = 30`\n\nWhen doc_ids is True, the page_size variable within the function is unconditionally reassigned to 30, regardless of the value initially passed by the caller.\nProblem Analysis:\nParameter Semantic Inconsistency: The retrieval function explicitly accepts a page_size parameter, which typically implies that the caller can control the number of results returned. However, in the doc_ids scenario, this forced override renders the caller's page_size value ineffective, leading to unclear parameter semantics and unpredictable function behavior.\nPotential Computational Waste: The calculation of idx (which selects chunk indices from the reranked results) on line 382:\nidx = np.argsort(sim * -1)[(page - 1) * page_size:page * page_size]\nThis calculation uses the original page_size value passed by the caller. This means if the initial page_size is, for example, 100, the system will process and identify indices for 100 candidate chunks. However, the subsequent loop's length check and the final truncation will use the page_size value that has been forcibly set to 30 (when doc_ids is true). This leads to a mismatch where more chunks are processed initially than are ultimately returned, potentially causing unnecessary computation for the unused chunks.\nLimited Flexibility: This hardcoded limitation restricts the ability to flexibly control the number of returned chunks when doc_ids are specified. Users might need fewer than 30 chunks (e.g., just a few representative snippets from specific documents) or more than 30 (e.g., all relevant chunks from a set of specified documents).\n\n\n### Expected behavior\n\nTo address these issues and improve the function's behavior, I propose two possible solutions:\nRemove the forced page_size = 30 override:\nThe most straightforward solution is to simply remove line 390, page_size = 30; from rag/nlp/search.py.\n\n### Steps to reproduce\n\n```Markdown\n...\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "RyzeAngler",
      "author_type": "User",
      "created_at": "2025-06-12T10:04:19Z",
      "updated_at": "2025-06-12T10:06:47Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8228/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8228",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8228",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:20.475917",
      "comments": [
        {
          "author": "RyzeAngler",
          "body": "I found this code was merged when solving the problem #6228. I don't quite understand why the problem of being unable to parse uploaded images is limiting page_size.\nhttps://github.com/infiniflow/ragflow/issues/6228",
          "created_at": "2025-06-12T10:06:47Z"
        }
      ]
    },
    {
      "issue_number": 7643,
      "title": "[Bug]: Deepdoc doesn’t handle tri-column formatted PDFs very well",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n5d5dbb3\n\n### RAGFlow image version\n\n0.18\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\n- The content from the three columns is intermingled\n- pls refer the snapshot\n\n### Expected behavior\n\n- Correctly recognize content in three-column layouts.\n\n### Steps to reproduce\n\n```Markdown\n- Upload pdf\n- Process 'General' parse with deepdoc\n```\n\n### Additional information\n\n![Image](https://github.com/user-attachments/assets/bf93dc89-6cbc-4636-837f-bfa79244264b)\n\n![Image](https://github.com/user-attachments/assets/a9c7ef45-26bd-4b7f-b12e-32c1e322b021)",
      "state": "open",
      "author": "flowerljl",
      "author_type": "User",
      "created_at": "2025-05-14T08:24:00Z",
      "updated_at": "2025-06-12T09:50:06Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7643/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7643",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7643",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:20.668485",
      "comments": [
        {
          "author": "lamhktommy",
          "body": "> ### Self Checks\n> * [x]  I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.[x]  I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).[x]  No",
          "created_at": "2025-05-14T08:26:16Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe issue you're experiencing with tri-column formatted PDFs in RAGFlow's deepdoc component might be related to how the `RAGFlowPdfParser` handles multi-column layouts. The parser uses the `LayoutRecognizer` to identify and process different layout types, but it seems that tri-column",
          "created_at": "2025-05-14T08:27:12Z"
        },
        {
          "author": "flowerljl",
          "body": "> > ### Self Checks\n> > \n> > \n> > * [x]   I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.[x]  I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues",
          "created_at": "2025-05-14T08:46:04Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Could you share this file with us?\nkai.hu@infiniflow.org",
          "created_at": "2025-05-15T01:41:36Z"
        },
        {
          "author": "flowerljl",
          "body": "> Could you share this file with us? [kai.hu@infiniflow.org](mailto:kai.hu@infiniflow.org)\n\nsure. It is an open-domain document.\n\nFYI @KevinHuSh \n\n[_融入式_境外企业档案工作策略分析——以万宝矿产有限公司缅甸项目档案工作为例.pdf](https://github.com/user-attachments/files/20239882/_._.pdf)",
          "created_at": "2025-05-16T07:29:17Z"
        }
      ]
    },
    {
      "issue_number": 7667,
      "title": "[Question]: How to modify a document's enabled status via API?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nAPI Request Code Example:\n```\ncurl --request PUT \\\n     --url https://********.com/api/v1/datasets/17ad272c309d11f09d840242c0a85006/documents/c0fb69ee315e11f0bffc0242c0a85006 \\\n     --header 'Content-Type: application/json' \\\n     --header 'Authorization: Bearer ragflow-********' \\\n     --data '{\"status\": \"0\"}'\n```\nAPI Response:\n```\n{\"code\":0}\n```\nThe status did not change from enabled to disabled.",
      "state": "closed",
      "author": "biofer",
      "author_type": "User",
      "created_at": "2025-05-15T08:27:23Z",
      "updated_at": "2025-06-12T08:16:17Z",
      "closed_at": "2025-06-12T08:16:17Z",
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7667/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7667",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7667",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:20.891268",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nI couldn't find specific information on modifying a document's enabled status via the RAGFlow API. However, ensure that the API endpoint and parameters are correct and that the status value you are using is valid. Additionally, check if there are any prerequisites or conditions that ",
          "created_at": "2025-05-15T08:29:16Z"
        },
        {
          "author": "KevinHuSh",
          "body": "What about this?\n`{\"enable\": false}`",
          "created_at": "2025-05-16T02:44:00Z"
        },
        {
          "author": "biofer",
          "body": "It not work @KevinHuSh \n`{\"enable\": false}`  or '{\"status\": \"false\"}'\n\n\nAttached is the document information obtained from the `api/v1/datasets/17ad272c309d11f09d840242c0a85006/documents?id=a7f4877a316611f0a7a70242c0a85006` endpoint\n\n```\n{\n    \"code\": 0,\n    \"data\": {\n        \"docs\": [\n            {",
          "created_at": "2025-05-16T06:23:01Z"
        },
        {
          "author": "baclt1580",
          "body": "> It not work [@KevinHuSh](https://github.com/KevinHuSh) `{\"enable\": false}` or '{\"status\": \"false\"}'\n> \n> Attached is the document information obtained from the `api/v1/datasets/17ad272c309d11f09d840242c0a85006/documents?id=a7f4877a316611f0a7a70242c0a85006` endpoint\n> \n> ```\n> {\n>     \"code\": 0,\n> ",
          "created_at": "2025-06-11T03:10:50Z"
        },
        {
          "author": "biofer",
          "body": "Thanks, it worked.",
          "created_at": "2025-06-12T08:16:14Z"
        }
      ]
    },
    {
      "issue_number": 8203,
      "title": "[Question]: How to migrate the knowledge base to another environment",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nHi there, I currently established a RAGFlow knowledge base on my local server. Could any one please guide me how to migrate the knowledge base to another server without any repeated decode operations? The process of decoding files cost me bunch of time that I may can not endure again.\n\nBig Thx for those who may share info with me:)",
      "state": "open",
      "author": "wanghaohao994",
      "author_type": "User",
      "created_at": "2025-06-12T01:36:37Z",
      "updated_at": "2025-06-12T08:02:45Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8203/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8203",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8203",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:21.084264",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @wanghaohao994! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nRAGFlow doesn't have a built-in one-click migration tool, but you can migrate your knowledge base to another server without repeated decode operations by directly copying t",
          "created_at": "2025-06-12T01:39:37Z"
        },
        {
          "author": "wanghaohao994",
          "body": "> Hi [@wanghaohao994](https://github.com/wanghaohao994)! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n> \n> RAGFlow doesn't have a built-in one-click migration tool, but you can migrate your knowledge base to another server without repeated decode operations by directly c",
          "created_at": "2025-06-12T07:35:48Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nRAGFlow doesn't support merging an external storage source with the original one directly. The storage backend (like MinIO, S3, OSS, Azure, etc.) is selected at startup via configuration, and only one can be active at a time—there's no built-in way to combine or synchronize multiple ",
          "created_at": "2025-06-12T07:38:42Z"
        },
        {
          "author": "wanghaohao994",
          "body": "> RAGFlow doesn't support merging an external storage source with the original one directly. The storage backend (like MinIO, S3, OSS, Azure, etc.) is selected at startup via configuration, and only one can be active at a time—there's no built-in way to combine or synchronize multiple storage source",
          "created_at": "2025-06-12T07:58:57Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYes, it's feasible to split your raw documents and process them in parallel on multiple independent RAGFlow servers, but there are some important caveats.\n\nIf each server is set up with its own isolated backend (MinIO, MySQL, Elasticsearch/Infinity, etc.), you can distribute document",
          "created_at": "2025-06-12T08:02:45Z"
        }
      ]
    },
    {
      "issue_number": 8208,
      "title": "[Bug]: RAGFlow update knowledge base failed when modifying `Page Rank` with DOC_ENGINE=infinity",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nx\n\n### RAGFlow image version\n\nx\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nRAGFlow log:\n```\n2025-06-12 11:49:51,856 ERROR    25 (3022, \"Table ragflow_3265204c474011f0aa21e243a17b750b_4310a2fe474011f089d8e243a17b750b doesn't exist@src/main/query_context.cpp:226\")\nTraceback (most recent call last):\n  File \"/ragflow/api/apps/kb_app.py\", line 128, in update\n    settings.docStoreConn.update({\"kb_id\": kb.id}, {PAGERANK_FLD: req[\"pagerank\"]},\n  File \"/ragflow/rag/utils/infinity_conn.py\", line 546, in update\n    table_instance = db_instance.get_table(table_name)\n  File \"/ragflow/.venv/lib/python3.10/site-packages/infinity/remote_thrift/utils.py\", line 563, in wrapper\n    return func(*args, **kwargs)\n  File \"/ragflow/.venv/lib/python3.10/site-packages/infinity/remote_thrift/db.py\", line 113, in get_table\n    raise InfinityException(res.error_code, res.error_msg)\ninfinity.common.InfinityException: (3022, \"Table ragflow_3265204c474011f0aa21e243a17b750b_4310a2fe474011f089d8e243a17b750b doesn't exist@src/main/query_context.cpp:226\")\n2025-06-12 11:49:51,860 INFO     25 172.18.0.6 - - [12/Jun/2025 11:49:51] \"POST /v1/kb/update HTTP/1.1\" 200 -\n```\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\n1. export DOC_ENGINE=infinity\n2. Start RAGFlow service\n3. create a knowledge base \n4. Setting non-zero Page Rank\n5. save\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "asiroliu",
      "author_type": "User",
      "created_at": "2025-06-12T03:35:44Z",
      "updated_at": "2025-06-12T07:28:24Z",
      "closed_at": "2025-06-12T07:28:24Z",
      "labels": [
        "🐞 bug",
        "♾️infinity"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8208/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8208",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8208",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:21.290556",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThis error means the Infinity engine can't find the expected table for your knowledge base. This is a known issue that can happen if the table wasn't created during initialization, if there was a problem with migrations, or if configuration settings are off—especially after upgrades ",
          "created_at": "2025-06-12T03:38:16Z"
        },
        {
          "author": "KevinHuSh",
          "body": "The infinity did not support `page rank` for the time being.",
          "created_at": "2025-06-12T04:16:39Z"
        }
      ]
    },
    {
      "issue_number": 4926,
      "title": "[Question]: How to parse source code file",
      "body": "### Describe your problem\n\n我有一个程序的源码文件夹，该文件夹包含有多种数据格式，比如.py .c .cc .h .java .mk .sh .proj等多重文件格式，绝大部分都是文本格式，少部分是xml或json等格式，但是文件在解析的时候很多无法识别，比如.cc后缀就不能识别，如何修正这个bug或者自己修改哪部分代码可以完善，谢谢~",
      "state": "open",
      "author": "opensesamedoors",
      "author_type": "User",
      "created_at": "2025-02-13T03:07:51Z",
      "updated_at": "2025-06-12T06:53:02Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/4926/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/4926",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/4926",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:21.519496",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "Not supported yet.",
          "created_at": "2025-02-13T06:01:45Z"
        },
        {
          "author": "RichardFevrier",
          "body": "Is it in your roadmap?",
          "created_at": "2025-06-10T15:29:40Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Yes.",
          "created_at": "2025-06-12T06:53:02Z"
        }
      ]
    },
    {
      "issue_number": 8155,
      "title": "[Question]: Why the agent output all things related to the 1st query after the 2nd query?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nWhen i input 1st query, the agent works well. Then i give 2nd query, it outputs all the content about former query, including the knowledge retrievaled. After i input 3rd query, it starts to answer 2nd one.\n\n![Image](https://github.com/user-attachments/assets/bf94ea86-b3a4-4ced-a4f8-74acc84da6c3)\n\n![Image](https://github.com/user-attachments/assets/9acaa908-95fe-4e81-b7ad-e9eeda903773)",
      "state": "open",
      "author": "konn-submarine-bu",
      "author_type": "User",
      "created_at": "2025-06-10T06:14:25Z",
      "updated_at": "2025-06-12T06:22:22Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8155/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8155",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8155",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:21.740221",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThis happens because the agent processes the previous state before your latest input is added to the conversation history. So, after you enter your 2nd query, the agent still responds to the 1st query, and only after your 3rd input does it answer the 2nd one. This is a result of the ",
          "created_at": "2025-06-10T06:23:15Z"
        },
        {
          "author": "konn-submarine-bu",
          "body": "how i arrange agent components to handle this problem? @dosu ",
          "created_at": "2025-06-10T07:27:54Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nTo fix the issue where the agent answers queries out of order, make sure your client logic appends the new user input to the conversation history before triggering the agent's processing. In the RAGFlow frontend, this means calling `addNewestQuestion` (which updates the UI and local ",
          "created_at": "2025-06-10T07:31:51Z"
        },
        {
          "author": "KevinHuSh",
          "body": "We're refactoring and refining this part of functions.",
          "created_at": "2025-06-12T06:22:22Z"
        }
      ]
    },
    {
      "issue_number": 8163,
      "title": "[Question]: Is there any way to limit the amount of text generated by the assistant (no more than a certain number of characters)?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nIs there any way to limit the amount of text generated by the assistant (no more than a certain number of characters)?\nNo model can meet the requirements for generating a response with a certain amount (no more than ... characters) no matter what wording is used in the system prompt.",
      "state": "open",
      "author": "YustasDev",
      "author_type": "User",
      "created_at": "2025-06-10T09:32:30Z",
      "updated_at": "2025-06-12T06:18:49Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8163/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8163",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8163",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:21.973916",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "We're gona enable the `max token` field.",
          "created_at": "2025-06-12T06:18:49Z"
        }
      ]
    },
    {
      "issue_number": 8186,
      "title": "[Question]: In v0.19.0, In addition to the General chunking method, other methods(like Presentation) still cannot be parsed using the VLM model, and this problem does not seem to be solved.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nActually, #8109 still hasn't been resolved.\n\nHere is Log:\n\n2025-06-11 23:13:04,980 INFO     18 172.24.0.6 - - [11/Jun/2025 23:13:04] \"GET /v1/user/info HTTP/1.1\" 200 -\n2025-06-11 23:13:04,986 INFO     18 172.24.0.6 - - [11/Jun/2025 23:13:04] \"GET /v1/tenant/list HTTP/1.1\" 200 -\n2025-06-11 23:13:04,988 INFO     18 172.24.0.6 - - [11/Jun/2025 23:13:04] \"GET /v1/user/tenant_info HTTP/1.1\" 200 -\n2025-06-11 23:13:04,996 INFO     18 172.24.0.6 - - [11/Jun/2025 23:13:04] \"GET /v1/kb/detail?kb_id=5c23770246ce11f08b8b0242ac180006 HTTP/1.1\" 200 -\n2025-06-11 23:13:04,997 INFO     18 172.24.0.6 - - [11/Jun/2025 23:13:04] \"POST /v1/document/list?kb_id=5c23770246ce11f08b8b0242ac180006&keywords=&page_size=10&page=1 HTTP/1.1\" 200 -\n2025-06-11 23:13:04,997 INFO     18 HEAD http://es01:9200/ragflow_ff5921f8f59b11ef88e50242ac120006 [status:200 duration:0.003s]\n2025-06-11 23:13:05,026 INFO     18 POST http://es01:9200/ragflow_ff5921f8f59b11ef88e50242ac120006/_search [status:200 duration:0.005s]\n2025-06-11 23:13:05,027 INFO     18 172.24.0.6 - - [11/Jun/2025 23:13:05] \"GET /v1/kb/5c23770246ce11f08b8b0242ac180006/knowledge_graph HTTP/1.1\" 200 -\n2025-06-11 23:13:06,139 INFO     18 172.24.0.6 - - [11/Jun/2025 23:13:06] \"GET /v1/kb/detail?kb_id=5c23770246ce11f08b8b0242ac180006 HTTP/1.1\" 200 -\n2025-06-11 23:13:06,154 INFO     18 172.24.0.6 - - [11/Jun/2025 23:13:06] \"GET /v1/user/tenant_info HTTP/1.1\" 200 -\n2025-06-11 23:13:06,225 INFO     18 172.24.0.6 - - [11/Jun/2025 23:13:06] \"GET /v1/llm/list HTTP/1.1\" 200 -\n2025-06-11 23:13:06,229 INFO     18 172.24.0.6 - - [11/Jun/2025 23:13:06] \"POST /v1/kb/list HTTP/1.1\" 200 -\n2025-06-11 23:13:08,158 INFO     18 172.24.0.6 - - [11/Jun/2025 23:13:08] \"GET /v1/user/tenant_info HTTP/1.1\" 200 -\n2025-06-11 23:13:08,163 INFO     18 172.24.0.6 - - [11/Jun/2025 23:13:08] \"GET /v1/kb/detail?kb_id=5c23770246ce11f08b8b0242ac180006 HTTP/1.1\" 200 -\n2025-06-11 23:13:08,163 INFO     18 172.24.0.6 - - [11/Jun/2025 23:13:08] \"POST /v1/document/list?kb_id=5c23770246ce11f08b8b0242ac180006&keywords=&page_size=10&page=1 HTTP/1.1\" 200 -\n2025-06-11 23:13:15,208 INFO     18 172.24.0.6 - - [11/Jun/2025 23:13:15] \"POST /v1/document/upload HTTP/1.1\" 200 -\n2025-06-11 23:13:15,232 INFO     18 172.24.0.6 - - [11/Jun/2025 23:13:15] \"POST /v1/document/list?kb_id=5c23770246ce11f08b8b0242ac180006&keywords=&page_size=10&page=1 HTTP/1.1\" 200 -\n2025-06-11 23:13:15,233 INFO     18 172.24.0.6 - - [11/Jun/2025 23:13:15] \"POST /v1/document/list?kb_id=5c23770246ce11f08b8b0242ac180006&keywords=&page_size=10&page=1 HTTP/1.1\" 200 -\n2025-06-11 23:13:15,253 INFO     18 172.24.0.6 - - [11/Jun/2025 23:13:15] \"POST /v1/document/run HTTP/1.1\" 200 -\n2025-06-11 23:13:15,287 INFO     18 172.24.0.6 - - [11/Jun/2025 23:13:15] \"GET /v1/document/image/5c23770246ce11f08b8b0242ac180006-thumbnail_98f3019a46d611f090cc0242ac180006.png HTTP/1.1\" 200 -\n2025-06-11 23:13:15,300 INFO     18 172.24.0.6 - - [11/Jun/2025 23:13:15] \"POST /v1/document/list?kb_id=5c23770246ce11f08b8b0242ac180006&keywords=&page_size=10&page=1 HTTP/1.1\" 200 -\n2025-06-11 23:13:19,496 INFO     31 handle_task begin for task {\"id\": \"99020a8246d611f0aba00242ac180006\", \"doc_id\": \"98f3019a46d611f090cc0242ac180006\", \"from_page\": 0, \"to_page\": 10, \"retry_count\": 0, \"kb_id\": \"5c23770246ce11f08b8b0242ac180006\", \"parser_id\": \"presentation\", \"parser_config\": {\"layout_recognize\": \"Qwen2.5-VL-7B-Instruct___VLLM@VLLM\", \"auto_keywords\": 0, \"auto_questions\": 0, \"raptor\": {\"use_raptor\": false}, \"graphrag\": {\"use_graphrag\": false}}, \"name\": \"test_doc.pdf\", \"type\": \"pdf\", \"location\": \"test_doc.pdf\", \"size\": 1442605, \"tenant_id\": \"ff5921f8f59b11ef88e50242ac120006\", \"language\": \"English\", \"embd_id\": \"bge-m3@Xinference\", \"pagerank\": 0, \"kb_parser_config\": {\"layout_recognize\": \"Qwen2.5-VL-7B-Instruct___VLLM@VLLM\", \"auto_keywords\": 0, \"auto_questions\": 0, \"raptor\": {\"use_raptor\": false}, \"graphrag\": {\"use_graphrag\": false}}, \"img2txt_id\": \"Qwen2.5-VL-7B-Instruct___VLLM@VLLM\", \"asr_id\": \"\", \"llm_id\": \"DeepSeek-R1-Distill-Qwen-32B___OpenAI-API@OpenAI-API-Compatible\", \"update_time\": 1749654795251, \"task_type\": \"\"}\n2025-06-11 23:13:19,566 INFO     31 HTTP Request: POST http://10.133.34.19:9998/v1/embeddings \"HTTP/1.1 200 OK\"\n2025-06-11 23:13:19,576 INFO     31 HEAD http://es01:9200/ragflow_ff5921f8f59b11ef88e50242ac120006 [status:200 duration:0.003s]\n2025-06-11 23:13:19,583 INFO     31 From minio(0.006399601930752397) test_doc.pdf/test_doc.pdf\n2025-06-11 23:13:19,583 INFO     31 load_model /ragflow/rag/res/deepdoc/det.onnx reuses cached model\n2025-06-11 23:13:19,586 INFO     31 load_model /ragflow/rag/res/deepdoc/rec.onnx reuses cached model\n2025-06-11 23:13:19,587 INFO     31 load_model /ragflow/rag/res/deepdoc/layout.onnx reuses cached model\n2025-06-11 23:13:19,587 INFO     31 load_model /ragflow/rag/res/deepdoc/tsr.onnx reuses cached model\n2025-06-11 23:13:19,598 INFO     31 set_progress(99020a8246d611f0aba00242ac180006), progress: None, progress_msg: 23:13:19 Page(1~11): OCR started\n2025-06-11 23:13:21,431 INFO     31 __images__ dedupe_chars cost 1.8335928990272805s\n2025-06-11 23:13:21,435 WARNING  31 Miss outlines\n2025-06-11 23:13:21,530 INFO     31 __ocr detecting boxes of a image cost (0.09450889506842941s)\n2025-06-11 23:13:21,531 INFO     31 __ocr sorting 53 chars cost 0.0006220480427145958s\n2025-06-11 23:13:21,570 INFO     31 __ocr recognize 8 boxes cost 0.03930688195396215s\n2025-06-11 23:13:21,669 INFO     31 __ocr detecting boxes of a image cost (0.09745385695714504s)\n2025-06-11 23:13:21,670 INFO     31 __ocr sorting 43 chars cost 0.0005265669897198677s\n2025-06-11 23:13:21,701 INFO     31 __ocr recognize 7 boxes cost 0.031114830053411424s\n2025-06-11 23:13:21,809 INFO     31 __ocr detecting boxes of a image cost (0.10635609098244458s)\n2025-06-11 23:13:21,813 INFO     31 __ocr sorting 409 chars cost 0.0029008679557591677s\n2025-06-11 23:13:22,002 INFO     31 __ocr recognize 37 boxes cost 0.18889174505602568s\n2025-06-11 23:13:22,108 INFO     31 __ocr detecting boxes of a image cost (0.10438321705441922s)\n2025-06-11 23:13:22,110 INFO     31 __ocr sorting 181 chars cost 0.0016334600513800979s\n2025-06-11 23:13:22,246 INFO     31 __ocr recognize 29 boxes cost 0.13544121000450104s\n2025-06-11 23:13:22,354 INFO     31 __ocr detecting boxes of a image cost (0.10657399310730398s)\n2025-06-11 23:13:22,356 INFO     31 __ocr sorting 204 chars cost 0.001860317075625062s\n2025-06-11 23:13:22,568 INFO     31 __ocr recognize 34 boxes cost 0.2115059489151463s\n2025-06-11 23:13:22,678 INFO     31 __ocr detecting boxes of a image cost (0.10764243407174945s)\n2025-06-11 23:13:22,680 INFO     31 __ocr sorting 268 chars cost 0.001782367005944252s\n2025-06-11 23:13:23,024 INFO     31 __ocr recognize 37 boxes cost 0.3447964320657775s\n2025-06-11 23:13:23,030 INFO     31 set_progress(99020a8246d611f0aba00242ac180006), progress: 0.36, progress_msg:\n2025-06-11 23:13:23,136 INFO     31 __ocr detecting boxes of a image cost (0.10478150693234056s)\n2025-06-11 23:13:23,137 INFO     31 __ocr sorting 103 chars cost 0.0009583050850778818s\n2025-06-11 23:13:23,796 INFO     31 __ocr recognize 38 boxes cost 0.6587542770430446s\n2025-06-11 23:13:23,891 INFO     31 __ocr detecting boxes of a image cost (0.09396304795518517s)\n2025-06-11 23:13:23,892 INFO     31 __ocr sorting 68 chars cost 0.0006430470384657383s\n2025-06-11 23:13:23,925 INFO     31 __ocr recognize 5 boxes cost 0.03250362700782716s\n2025-06-11 23:13:24,019 INFO     31 __ocr detecting boxes of a image cost (0.09265734406653792s)\n2025-06-11 23:13:24,021 INFO     31 __ocr sorting 208 chars cost 0.001447585062123835s\n2025-06-11 23:13:24,049 INFO     31 __ocr recognize 8 boxes cost 0.027606691932305694s\n2025-06-11 23:13:24,133 INFO     31 __ocr detecting boxes of a image cost (0.08356666704639792s)\n2025-06-11 23:13:24,134 INFO     31 __ocr sorting 11 chars cost 0.00021717208437621593s\n2025-06-11 23:13:24,169 INFO     31 __ocr recognize 5 boxes cost 0.03483505605254322s\n2025-06-11 23:13:24,170 INFO     31 __images__ 10 pages cost 2.735132099944167s\n2025-06-11 23:13:24,175 INFO     31 set_progress(99020a8246d611f0aba00242ac180006), progress: None, progress_msg: 23:13:24 Page(1~11): Page 0~10: OCR finished (4.58s)\n2025-06-11 23:13:24,180 INFO     31 set_progress(99020a8246d611f0aba00242ac180006), progress: 0.9, progress_msg: 23:13:24 Page(1~11): Page 0~10: Parsing finished\n2025-06-11 23:13:24,258 INFO     31 Chunking(4.682046517031267) test_doc.pdf/test_doc.pdf done\n2025-06-11 23:13:24,407 INFO     31 MINIO PUT(test_doc.pdf) cost 0.148 s\n2025-06-11 23:13:24,407 INFO     31 Build document test_doc.pdf: 4.83s\n2025-06-11 23:13:24,411 INFO     31 set_progress(99020a8246d611f0aba00242ac180006), progress: None, progress_msg: 23:13:24 Page(1~11): Generate 10 chunks\n2025-06-11 23:13:24,463 INFO     31 HTTP Request: POST http://10.133.34.19:9998/v1/embeddings \"HTTP/1.1 200 OK\"\n2025-06-11 23:13:25,739 INFO     31 HTTP Request: POST http://10.133.34.19:9998/v1/embeddings \"HTTP/1.1 200 OK\"\n2025-06-11 23:13:25,792 INFO     31 set_progress(99020a8246d611f0aba00242ac180006), progress: 0.72, progress_msg:\n2025-06-11 23:13:25,792 INFO     31 Embedding chunks (1.38s)\n2025-06-11 23:13:25,796 INFO     31 set_progress(99020a8246d611f0aba00242ac180006), progress: None, progress_msg: 23:13:25 Page(1~11): Embedding chunks (1.38s)\n2025-06-11 23:13:25,816 INFO     31 PUT http://es01:9200/ragflow_ff5921f8f59b11ef88e50242ac120006/_bulk?refresh=false&timeout=60s [status:200 duration:0.016s]\n2025-06-11 23:13:25,819 INFO     31 set_progress(99020a8246d611f0aba00242ac180006), progress: 0.81, progress_msg:\n2025-06-11 23:13:25,839 INFO     31 PUT http://es01:9200/ragflow_ff5921f8f59b11ef88e50242ac120006/_bulk?refresh=false&timeout=60s [status:200 duration:0.015s]\n2025-06-11 23:13:25,851 INFO     31 PUT http://es01:9200/ragflow_ff5921f8f59b11ef88e50242ac120006/_bulk?refresh=false&timeout=60s [status:200 duration:0.010s]\n2025-06-11 23:13:25,853 INFO     31 Indexing doc(test_doc.pdf), page(0-10), chunks(10), elapsed: 0.06\n2025-06-11 23:13:25,859 INFO     31 set_progress(99020a8246d611f0aba00242ac180006), progress: 1.0, progress_msg: 23:13:25 Page(1~11): Indexing done (0.06s). Task done (6.36s)\n2025-06-11 23:13:25,859 INFO     31 Chunk doc(test_doc.pdf), page(0-10), chunks(10), token(1540), elapsed:6.36\n2025-06-11 23:13:25,859 INFO     31 handle_task done for task {\"id\": \"99020a8246d611f0aba00242ac180006\", \"doc_id\": \"98f3019a46d611f090cc0242ac180006\", \"from_page\": 0, \"to_page\": 10, \"retry_count\": 0, \"kb_id\": \"5c23770246ce11f08b8b0242ac180006\", \"parser_id\": \"presentation\", \"parser_config\": {\"layout_recognize\": \"Qwen2.5-VL-7B-Instruct___VLLM@VLLM\", \"auto_keywords\": 0, \"auto_questions\": 0, \"raptor\": {\"use_raptor\": false}, \"graphrag\": {\"use_graphrag\": false}}, \"name\": \"test_doc.pdf\", \"type\": \"pdf\", \"location\": \"test_doc.pdf\", \"size\": 1442605, \"tenant_id\": \"ff5921f8f59b11ef88e50242ac120006\", \"language\": \"English\", \"embd_id\": \"bge-m3@Xinference\", \"pagerank\": 0, \"kb_parser_config\": {\"layout_recognize\": \"Qwen2.5-VL-7B-Instruct___VLLM@VLLM\", \"auto_keywords\": 0, \"auto_questions\": 0, \"raptor\": {\"use_raptor\": false}, \"graphrag\": {\"use_graphrag\": false}}, \"img2txt_id\": \"Qwen2.5-VL-7B-Instruct___VLLM@VLLM\", \"asr_id\": \"\", \"llm_id\": \"DeepSeek-R1-Distill-Qwen-32B___OpenAI-API@OpenAI-API-Compatible\", \"update_time\": 1749654795251, \"task_type\": \"\"}\n2025-06-11 23:13:27,619 INFO     18 172.24.0.6 - - [11/Jun/2025 23:13:27] \"GET /v1/tenant/list HTTP/1.1\" 200 -\n2025-06-11 23:13:27,620 INFO     18 172.24.0.6 - - [11/Jun/2025 23:13:27] \"GET /v1/user/info HTTP/1.1\" 200 -\n2025-06-11 23:13:27,623 INFO     18 172.24.0.6 - - [11/Jun/2025 23:13:27] \"GET /v1/user/tenant_info HTTP/1.1\" 200 -\n2025-06-11 23:13:27,627 INFO     18 172.24.0.6 - - [11/Jun/2025 23:13:27] \"POST /v1/document/list?kb_id=5c23770246ce11f08b8b0242ac180006&keywords=&page_size=10&page=1 HTTP/1.1\" 200 -\n2025-06-11 23:13:27,630 INFO     18 172.24.0.6 - - [11/Jun/2025 23:13:27] \"GET /v1/kb/detail?kb_id=5c23770246ce11f08b8b0242ac180006 HTTP/1.1\" 200 -\n2025-06-11 23:13:27,632 INFO     18 HEAD http://es01:9200/ragflow_ff5921f8f59b11ef88e50242ac120006 [status:200 duration:0.003s]\n2025-06-11 23:13:27,666 INFO     18 POST http://es01:9200/ragflow_ff5921f8f59b11ef88e50242ac120006/_search [status:200 duration:0.005s]\n2025-06-11 23:13:27,666 INFO     18 172.24.0.6 - - [11/Jun/2025 23:13:27] \"GET /v1/kb/5c23770246ce11f08b8b0242ac180006/knowledge_graph HTTP/1.1\" 200 -\n2025-06-11 23:13:30,883 INFO     18 172.24.0.6 - - [11/Jun/2025 23:13:30] \"GET /v1/tenant/list HTTP/1.1\" 200 -\n2025-06-11 23:13:30,883 INFO     18 172.24.0.6 - - [11/Jun/2025 23:13:30] \"GET /v1/user/info HTTP/1.1\" 200 -\n2025-06-11 23:13:30,888 INFO     18 172.24.0.6 - - [11/Jun/2025 23:13:30] \"GET /v1/user/tenant_info HTTP/1.1\" 200 -\n2025-06-11 23:13:30,889 INFO     18 HEAD http://es01:9200/ragflow_ff5921f8f59b11ef88e50242ac120006 [status:200 duration:0.003s]\n2025-06-11 23:13:30,907 INFO     18 172.24.0.6 - - [11/Jun/2025 23:13:30] \"POST /v1/document/list?kb_id=5c23770246ce11f08b8b0242ac180006&keywords=&page_size=10&page=1 HTTP/1.1\" 200 -\n2025-06-11 23:13:30,909 INFO     18 172.24.0.6 - - [11/Jun/2025 23:13:30] \"GET /v1/kb/detail?kb_id=5c23770246ce11f08b8b0242ac180006 HTTP/1.1\" 200 -\n2025-06-11 23:13:30,924 INFO     18 POST http://es01:9200/ragflow_ff5921f8f59b11ef88e50242ac120006/_search [status:200 duration:0.005s]\n2025-06-11 23:13:30,924 INFO     18 172.24.0.6 - - [11/Jun/2025 23:13:30] \"GET /v1/kb/5c23770246ce11f08b8b0242ac180006/knowledge_graph HTTP/1.1\" 200 -",
      "state": "open",
      "author": "Dreamcatcher-wind",
      "author_type": "User",
      "created_at": "2025-06-11T07:24:26Z",
      "updated_at": "2025-06-12T05:05:49Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8186/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8186",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8186",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:22.153885",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYou are correct—this is a known limitation. As of v0.19.0, the Presentation chunking method (for both PDF and PPTX) does not support parsing via VLM (Vision Language Model) pipelines. Only the General and some other PDF chunking methods allow you to select a vision model for layout r",
          "created_at": "2025-06-11T07:29:31Z"
        },
        {
          "author": "KevinHuSh",
          "body": "I did not quite follow. Why did you think it's not been resolved?",
          "created_at": "2025-06-12T05:05:49Z"
        }
      ]
    },
    {
      "issue_number": 8189,
      "title": "[Bug]: Auto-keyword and auto-question features fail with qwq model",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nlatest\n\n### RAGFlow image version\n\nv0.19.0\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nBug reported from community. Auto-keyword and auto-question features fail with qwq model.\n\nEncounter \n\n```\nopenai.BadRequestError: Error code: 400 - {'error': {'code': 'invalid_parameter_error', 'param': None, 'message': 'This model only support stream mode, please enable the stream parameter to access the model. ', 'type': 'invalid_request_error'}, 'id': 'chatcmpl-2df09046-7e82-98ff-9f40-5dc302a34aa9', 'request_id': '2df09046-7e82-98ff-9f40-5dc302a34aa9'}\n```\n\nSteps to reproduce:\n\n<img width=\"394\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/a692fed4-9a23-46dd-a049-a8bb21895951\" />\n\n<img width=\"522\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/d334ed11-b4a7-43a3-afb1-6267d9df6264\" />\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nSee Actual behavior.\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "yongtenglei",
      "author_type": "User",
      "created_at": "2025-06-11T07:57:16Z",
      "updated_at": "2025-06-12T05:01:02Z",
      "closed_at": "2025-06-12T05:01:02Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8189/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8189",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8189",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:23.346517",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe error happens because the qwq model only supports stream mode, so the stream parameter must be enabled in your API requests. This is a known requirement for qwq and similar models like qwen3-235b-a22b—if stream mode isn't enabled, you'll get an \"invalid_parameter_error\" from the ",
          "created_at": "2025-06-11T08:00:09Z"
        }
      ]
    },
    {
      "issue_number": 8191,
      "title": "[Question]: Export the DSL file of agent",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nWhy does the exported JSON file only contain nodes and edges, but no components? Because of this, ./agent/test/client.py can’t run.",
      "state": "open",
      "author": "Mitty-ZH",
      "author_type": "User",
      "created_at": "2025-06-11T08:59:51Z",
      "updated_at": "2025-06-12T05:00:42Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8191/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8191",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8191",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:23.524743",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @Mitty-ZH! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThe exported JSON is missing the components section because the export logic relies on the frontend's in-memory graph state to build components from nodes and edges. If the UI s",
          "created_at": "2025-06-11T09:15:49Z"
        },
        {
          "author": "Mitty-ZH",
          "body": "> Hi [@Mitty-ZH](https://github.com/Mitty-ZH)! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n> \n> The exported JSON is missing the components section because the export logic relies on the frontend's in-memory graph state to build components from nodes and edges. If the U",
          "created_at": "2025-06-11T09:34:17Z"
        },
        {
          "author": "KevinHuSh",
          "body": "The DSL exported from the front end can be only used to be imported through web end.",
          "created_at": "2025-06-12T05:00:42Z"
        }
      ]
    },
    {
      "issue_number": 8178,
      "title": "[Feature Request]: Will you support Qwen3-Embedding model series?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\n\n```\n\n### Describe the feature you'd like\n\nI have reviewed the example code for Qwen3-Embedding inference and noticed it differs from BGE-M3. Do you plan to support this model in the near future?\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "eternalgogi92",
      "author_type": "User",
      "created_at": "2025-06-11T02:51:40Z",
      "updated_at": "2025-06-12T04:45:23Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8178/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8178",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8178",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:23.715792",
      "comments": [
        {
          "author": "ZhenhangTung",
          "body": "@eternalgogi92 Definitely will. ",
          "created_at": "2025-06-11T03:39:47Z"
        },
        {
          "author": "ZhenhangTung",
          "body": "Related issue: https://github.com/infiniflow/ragflow/issues/8156",
          "created_at": "2025-06-11T03:54:14Z"
        },
        {
          "author": "yingfeng",
          "body": "There are three cases:\n1. If you deploy Qwen3-Embedding through other frameworks, it's easy because RAGFlow does not care what kind of embedding model is used actually. \n2. If what you wanted is to provide Qwen3-Embedding within RAGFlow package such that you can use the builtin support from RAGFlow ",
          "created_at": "2025-06-11T04:08:31Z"
        },
        {
          "author": "nkh0472",
          "body": "Already in use\n`VLLM_USE_MODELSCOPE=True vllm serve Qwen/Qwen3-Embedding-4B`",
          "created_at": "2025-06-12T04:45:22Z"
        }
      ]
    },
    {
      "issue_number": 8211,
      "title": "[Bug]: Can't inference the where the component input is. Please identify whose output is this component's input.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nx\n\n### RAGFlow image version\n\nv0.19.0 and nightly\n\n### Other environment information\n\n```Markdown\nWindows subsystem for linux（Ubuntu 22）\n\nDocker image:\nswr.cn-north-4.myhuaweicloud.com/infiniflow/ragflow   nightly        15 hours ago    14.8GB\ninfiniflow/ragflow                                    v0.19.0        2 weeks ago     15.1GB\nvalkey/valkey                                         8              5 weeks ago     136MB\ninfiniflow/ragflow                                    v0.18.0-slim   7 weeks ago     7.11GB\ninfiniflow/infinity                    v0.6.0-dev3        4 months ago    885MB\nmysql                                  8.0.39                   10 months ago   573MB\nquay.io/minio/minio                    RELEASE.2023-12-20T01-00-02Z    17 months ago   151MB\nelasticsearch                                         8.11.3       18 months ago   1.41GB\n```\n\n### Actual behavior\n\n27 Canvas.run got exception: Can't inference the where the component input is. Please identify whose output is this component's input.\nragflow-server  | Traceback (most recent call last):\nragflow-server  |   File \"/ragflow/agent/canvas.py\", line 224, in prepare2run\nragflow-server  |     ans = cpn.run(self.history, **kwargs)\nragflow-server  |   File \"/ragflow/agent/component/base.py\", line 378, in run\nragflow-server  |     raise e\nragflow-server  |   File \"/ragflow/agent/component/base.py\", line 374, in run\nragflow-server  |     res = self._run(history, **kwargs)\nragflow-server  |   File \"/ragflow/agent/component/retrieval.py\", line 61, in _run\nragflow-server  |     query = self.get_input()\nragflow-server  |   File \"/ragflow/agent/component/base.py\", line 506, in get_input\nragflow-server  |     assert upstream_outs, \"Can't inference the where the component input is. Please identify whose output is this component's input.\"\nragflow-server  | AssertionError: Can't inference the where the component input is. Please identify whose output is this component's input.\nragflow-server  | Traceback (most recent call last):\nragflow-server  |   File \"/ragflow/api/apps/canvas_app.py\", line 142, in sse\nragflow-server  |     for ans in canvas.run(running_hint_text = running_hint_text, stream=True):\nragflow-server  |   File \"/ragflow/agent/canvas.py\", line 273, in run\nragflow-server  |     for m in prepare2run(downstream):\nragflow-server  |   File \"/ragflow/agent/canvas.py\", line 229, in prepare2run\nragflow-server  |     raise e\nragflow-server  |   File \"/ragflow/agent/canvas.py\", line 224, in prepare2run\nragflow-server  |     ans = cpn.run(self.history, **kwargs)\nragflow-server  |   File \"/ragflow/agent/component/base.py\", line 378, in run\nragflow-server  |     raise e\nragflow-server  |   File \"/ragflow/agent/component/base.py\", line 374, in run\nragflow-server  |     res = self._run(history, **kwargs)\nragflow-server  |   File \"/ragflow/agent/component/retrieval.py\", line 61, in _run\nragflow-server  |     query = self.get_input()\nragflow-server  |   File \"/ragflow/agent/component/base.py\", line 506, in get_input\nragflow-server  |     assert upstream_outs, \"Can't inference the where the component input is. Please identify whose output is this component's input.\"\n\n### Expected behavior\n\nInvoke the knowledge base correctly and answer the questions\n\n### Steps to reproduce\n\n```Markdown\nAn agent was created based on the customer service template, connected to the knowledge base, asked questions and reported errors in the agent dialog box\n```\n\n### Additional information\n\n![Image](https://github.com/user-attachments/assets/9e6e572b-15b2-4e62-b5fe-59b0aca13f2d)",
      "state": "closed",
      "author": "Kennytian",
      "author_type": "User",
      "created_at": "2025-06-12T04:09:03Z",
      "updated_at": "2025-06-12T04:19:46Z",
      "closed_at": "2025-06-12T04:18:04Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8211/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8211",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8211",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:23.955397",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThis error means the component (likely the Retrieval component) isn't receiving any input from upstream components—so it can't determine what its input should be. In RAGFlow, connections between components only define execution order, not data flow. You need to explicitly configure t",
          "created_at": "2025-06-12T04:11:36Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Did you set up this part?\n\n![Image](https://github.com/user-attachments/assets/e6942e67-c8d2-49da-9b18-aec5ddea2fca)",
          "created_at": "2025-06-12T04:13:10Z"
        },
        {
          "author": "Kennytian",
          "body": "Thank you for fast response @KevinHuSh \n\n![Image](https://github.com/user-attachments/assets/7b0e0cb4-71c1-4f4a-bb3e-b4c87e3c2b27)\n\nI resolved it",
          "created_at": "2025-06-12T04:18:04Z"
        }
      ]
    },
    {
      "issue_number": 8212,
      "title": "[Bug]: Iteration component output contains references but downstream Generate node receives empty reference values",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nv0.19.0 slim\n\n### RAGFlow image version\n\nv0.19.0 slim\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\n1. Iteration component outputs contain both content and reference fields\n2. Generate component receives the iteration output but reference field is empty\n3. Final generated report lacks citation markers (##1$$, ##2$$) and source references\n4. Only content text is preserved, all citation information is lost\n\n![Image](https://github.com/user-attachments/assets/ddb5a952-1b78-48b6-9b5a-cec1679f0ce9)\n\n![Image](https://github.com/user-attachments/assets/13c84f20-fdfc-4b79-b19a-b52237e64e36)\n\n### Expected behavior\n\n1. Iteration component output should preserve reference information when passed to downstream components\n2. Generate component should receive complete data including references\n3. Final output should contain proper citations with reference markers\n4. Citation information should be maintained throughout the component chain\n\n### Steps to reproduce\n\n```Markdown\n1. Create a workflow: Iteration (with Retrieval + Generate inside) → Generate (report generation)\n2. Configure Retrieval component with cite=true\n3. Configure inner Generate component with cite=true to preserve references\n4. Configure outer Generate component to reference the iteration output: {Iteration:ComponentName}\n5. Run the workflow and observe that references are lost in the final output\n```\n\n### Additional information\n\n- Issue occurs specifically when referencing iteration output in Generate components\n- Iteration internal components (Retrieval, Generate) work correctly and show references\n- Problem appears to be in the data transfer between Iteration and external Generate components\n- Workaround: Currently no known workaround for preserving references across this component boundary",
      "state": "open",
      "author": "Alphayellowcat",
      "author_type": "User",
      "created_at": "2025-06-12T04:09:19Z",
      "updated_at": "2025-06-12T04:11:22Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8212/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8212",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8212",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:24.171421",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "We‘re refactoring and refining this part. The new version is coming soon.",
          "created_at": "2025-06-12T04:11:22Z"
        }
      ]
    },
    {
      "issue_number": 8207,
      "title": "[Bug]: ./entrypoint.sh: line 19: 845267 Segmentation fault      (core dumped) LD_PRELOAD=$JEMALLOC_PATH $PY rag/svr/task_executor.py",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nv0.17.2\n\n### RAGFlow image version\n\nv0.17.2\n\n### Other environment information\n\n```Markdown\n系统：ubuntu\n类型：GPU\n```\n\n### Actual behavior\n\n./entrypoint.sh: line 19: 845267 Segmentation fault      (core dumped) LD_PRELOAD=$JEMALLOC_PATH $PY rag/svr/task_executor.py $1\n./entrypoint.sh: line 19: 845400 Segmentation fault      (core dumped) LD_PRELOAD=$JEMALLOC_PATH $PY rag/svr/task_executor.py $1\n./entrypoint.sh: line 19: 845533 Segmentation fault      (core dumped) LD_PRELOAD=$JEMALLOC_PATH $PY rag/svr/task_executor.py $1\n./entrypoint.sh: line 19: 845666 Segmentation fault      (core dumped) LD_PRELOAD=$JEMALLOC_PATH $PY rag/svr/task_executor.py $1\n./entrypoint.sh: line 19: 845799 Segmentation fault      (core dumped) LD_PRELOAD=$JEMALLOC_PATH $PY rag/svr/task_executor.py $1\n\n表现：task阻塞，知识库上传文件无法正常分块\n\n<img width=\"445\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/9546cd9e-bba2-4d65-8a97-5a0b6a0f9e4b\" />\n\n<img width=\"341\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/a72e72a8-fed2-4ec7-943a-b8162e8f68b6\" />\n\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\n1、服务器内存溢出\n2、服务器重启\n3、task阻塞，知识库上传文件无法正常分块\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "DJ-RunTu",
      "author_type": "User",
      "created_at": "2025-06-12T02:57:30Z",
      "updated_at": "2025-06-12T03:01:10Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8207/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8207",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8207",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:24.614425",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @DJ-RunTu! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nYour segmentation fault is likely related to memory issues or the way JEMALLOC is being preloaded. This is a known problem area in RAGFlow, especially when running on GPU or wit",
          "created_at": "2025-06-12T03:01:10Z"
        }
      ]
    },
    {
      "issue_number": 8202,
      "title": "[Feature Request]: support to create individual workspace with permission control rather than \"use personal workspace and invite\"",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\nWhile we try out the ragflow features, it seems like we didn't have chance to create an individual workspace and set the workspace owner / admin and store the knowledge base in this workspace, like [dify did](https://docs.dify.ai/en/guides/workspace/README).\n\nInstead, currently, each user in ragflow could ONLY have his/her tenant workspace and the ONLY way to share the kb to the others is to invite them into the user's tenant workspace, rather than creating an individual workspace, e.g. `hr-talent` workspace for hr talent resume kb operations.\n```\n\n### Describe the feature you'd like\n\nIt would be great if we could implement a workspace feature like dify did, two features:\n\n1. able to create an individual workspace rather than using the user's tenant ONLY;\n2. able to set the owner / admin / member with different permission;\n\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "Colstuwjx",
      "author_type": "User",
      "created_at": "2025-06-11T13:07:04Z",
      "updated_at": "2025-06-12T02:52:00Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8202/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8202",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8202",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:24.817920",
      "comments": [
        {
          "author": "ZhenhangTung",
          "body": "@Colstuwjx Totally get your point. Will take some time to deliver RBAC and cannot promise it would be a feature included in our open-source version. ",
          "created_at": "2025-06-12T02:52:00Z"
        }
      ]
    },
    {
      "issue_number": 5038,
      "title": "[Question]: http://es01:1200 is unhealthy for MacOS/M4",
      "body": "### Describe your problem\n\nI'm using MacOS ,M4 chip. following:https://github.com/infiniflow/ragflow/blob/main/docs/guides/develop/build_docker_image.mdx to build.\nI can successfully access to 127.0.0.1, however it reports error 502 when i try to sign in and sign up.\n\nLog in ragflow-server repeat as follow:\n   \n2025-02-17 14:55:23 2025-02-17 14:55:23,509 INFO     21 RAGFlow version: v0.16.0-47-g754d5ea3 full\n2025-02-17 14:55:23 2025-02-17 14:55:23,514 INFO     21 project base: /ragflow\n2025-02-17 14:55:23 2025-02-17 14:55:23,521 INFO     21 Current configs, from /ragflow/conf/service_conf.yaml:\n2025-02-17 14:55:23     ragflow: {'host': '0.0.0.0', 'http_port': 9380}\n2025-02-17 14:55:23     mysql: {'name': 'rag_flow', 'user': 'root', 'password': '********', 'host': 'mysql', 'port': 5455, 'max_connections': 100, 'stale_timeout': 30}\n2025-02-17 14:55:23     minio: {'user': 'rag_flow', 'password': '********', 'host': 'minio:9000'}\n2025-02-17 14:55:23     es: {'hosts': 'http://es01:1200', 'username': 'elastic', 'password': '********'}\n2025-02-17 14:55:23     infinity: {'uri': 'infinity:23817', 'db_name': 'default_db'}\n2025-02-17 14:55:23     redis: {'db': 1, 'password': '********', 'host': 'redis:6379'}\n2025-02-17 14:55:23 2025-02-17 14:55:23,527 INFO     21 Use Elasticsearch http://es01:1200 as the doc engine.\n2025-02-17 14:55:23 2025-02-17 14:55:23,533 INFO     21 GET http://es01:1200/ [status:N/A duration:0.001s]\n2025-02-17 14:55:23 2025-02-17 14:55:23,534 WARNING  21 Node <Urllib3HttpNode(http://es01:1200)> has failed for 1 times in a row, putting on 1 second timeout\n2025-02-17 14:55:23 2025-02-17 14:55:23,544 WARNING  21 Retrying request after failure (attempt 0 of 3)\n2025-02-17 14:55:23 Traceback (most recent call last):\n2025-02-17 14:55:23   File \"/ragflow/.venv/lib/python3.10/site-packages/elastic_transport/_transport.py\", line 328, in perform_request\n2025-02-17 14:55:23     meta, raw_data = node.perform_request(\n2025-02-17 14:55:23   File \"/ragflow/.venv/lib/python3.10/site-packages/elastic_transport/_node/_http_urllib3.py\", line 202, in perform_request\n2025-02-17 14:55:23     raise err from None\n2025-02-17 14:55:23 elastic_transport.ConnectionError: Connection error caused by: NewConnectionError(<urllib3.connection.HTTPConnection object at 0xffff1ff68a90>: Failed to establish a new connection: [Errno 111] Connection refused)\n2025-02-17 14:55:23 2025-02-17 14:55:23,554 INFO     21 GET http://es01:1200/ [status:N/A duration:0.003s]\n2025-02-17 14:55:23 2025-02-17 14:55:23,555 WARNING  21 Node <Urllib3HttpNode(http://es01:1200)> has failed for 2 times in a row, putting on 2 second timeout\n2025-02-17 14:55:23 2025-02-17 14:55:23,555 WARNING  21 Retrying request after failure (attempt 1 of 3)\n2025-02-17 14:55:23 Traceback (most recent call last):\n2025-02-17 14:55:23   File \"/ragflow/.venv/lib/python3.10/site-packages/elastic_transport/_transport.py\", line 328, in perform_request\n2025-02-17 14:55:23     meta, raw_data = node.perform_request(\n2025-02-17 14:55:23   File \"/ragflow/.venv/lib/python3.10/site-packages/elastic_transport/_node/_http_urllib3.py\", line 202, in perform_request\n2025-02-17 14:55:23     raise err from None\n2025-02-17 14:55:23 elastic_transport.ConnectionError: Connection error caused by: NewConnectionError(<urllib3.connection.HTTPConnection object at 0xffff1ff69660>: Failed to establish a new connection: [Errno 111] Connection refused)\n2025-02-17 14:55:23 2025-02-17 14:55:23,558 INFO     21 GET http://es01:1200/ [status:N/A duration:0.002s]\n2025-02-17 14:55:23 2025-02-17 14:55:23,558 WARNING  21 Node <Urllib3HttpNode(http://es01:1200)> has failed for 3 times in a row, putting on 4 second timeout\n2025-02-17 14:55:23 2025-02-17 14:55:23,558 WARNING  21 Retrying request after failure (attempt 2 of 3)\n2025-02-17 14:55:23 Traceback (most recent call last):\n2025-02-17 14:55:23   File \"/ragflow/.venv/lib/python3.10/site-packages/elastic_transport/_transport.py\", line 328, in perform_request\n2025-02-17 14:55:23     meta, raw_data = node.perform_request(\n2025-02-17 14:55:23   File \"/ragflow/.venv/lib/python3.10/site-packages/elastic_transport/_node/_http_urllib3.py\", line 202, in perform_request\n2025-02-17 14:55:23     raise err from None\n2025-02-17 14:55:23 elastic_transport.ConnectionError: Connection error caused by: NewConnectionError(<urllib3.connection.HTTPConnection object at 0xffff1ff6b250>: Failed to establish a new connection: [Errno 111] Connection refused)\n2025-02-17 14:55:23 2025-02-17 14:55:23,560 INFO     21 GET http://es01:1200/ [status:N/A duration:0.001s]\n2025-02-17 14:55:23 2025-02-17 14:55:23,560 WARNING  21 Node <Urllib3HttpNode(http://es01:1200)> has failed for 4 times in a row, putting on 8 second timeout\n2025-02-17 14:55:23 2025-02-17 14:55:23,561 WARNING  21 Connection error caused by: ConnectionError(Connection error caused by: NewConnectionError(<urllib3.connection.HTTPConnection object at 0xffff1ff68a90>: Failed to establish a new connection: [Errno 111] Connection refused)). Waiting Elasticsearch http://es01:1200 to be healthy.\n2025-02-17 14:55:28 2025-02-17 14:55:28,569 INFO     21 GET http://es01:1200/ [status:N/A duration:0.001s]\n2025-02-17 14:55:28 2025-02-17 14:55:28,570 WARNING  21 Node <Urllib3HttpNode(http://es01:1200)> has failed for 1 times in a row, putting on 1 second timeout\n2025-02-17 14:55:28 2025-02-17 14:55:28,570 WARNING  21 Retrying request after failure (attempt 0 of 3)\n2025-02-17 14:55:28 Traceback (most recent call last):\n2025-02-17 14:55:28   File \"/ragflow/.venv/lib/python3.10/site-packages/elastic_transport/_transport.py\", line 328, in perform_request\n2025-02-17 14:55:28     meta, raw_data = node.perform_request(\n2025-02-17 14:55:28   File \"/ragflow/.venv/lib/python3.10/site-packages/elastic_transport/_node/_http_urllib3.py\", line 202, in perform_request\n2025-02-17 14:55:28     raise err from None\n2025-02-17 14:55:28 elastic_transport.ConnectionError: Connection error caused by: NewConnectionError(<urllib3.connection.HTTPConnection object at 0xffff1ff69b40>: Failed to establish a new connection: [Errno 111] Connection refused)\n2025-02-17 14:55:28 2025-02-17 14:55:28,571 INFO     21 GET http://es01:1200/ [status:N/A duration:0.001s]\n2025-02-17 14:55:28 2025-02-17 14:55:28,571 WARNING  21 Node <Urllib3HttpNode(http://es01:1200)> has failed for 2 times in a row, putting on 2 second timeout\n2025-02-17 14:55:28 2025-02-17 14:55:28,572 WARNING  21 Retrying request after failure (attempt 1 of 3)\n2025-02-17 14:55:28 Traceback (most recent call last):\n2025-02-17 14:55:28   File \"/ragflow/.venv/lib/python3.10/site-packages/elastic_transport/_transport.py\", line 328, in perform_request\n2025-02-17 14:55:28     meta, raw_data = node.perform_request(\n2025-02-17 14:55:28   File \"/ragflow/.venv/lib/python3.10/site-packages/elastic_transport/_node/_http_urllib3.py\", line 202, in perform_request\n2025-02-17 14:55:28     raise err from None\n2025-02-17 14:55:28 elastic_transport.ConnectionError: Connection error caused by: NewConnectionError(<urllib3.connection.HTTPConnection object at 0xffff1ff699c0>: Failed to establish a new connection: [Errno 111] Connection refused)\n2025-02-17 14:55:28 2025-02-17 14:55:28,573 INFO     21 GET http://es01:1200/ [status:N/A duration:0.001s]\n2025-02-17 14:55:28 2025-02-17 14:55:28,573 WARNING  21 Node <Urllib3HttpNode(http://es01:1200)> has failed for 3 times in a row, putting on 4 second timeout\n2025-02-17 14:55:28 2025-02-17 14:55:28,574 WARNING  21 Retrying request after failure (attempt 2 of 3)\n2025-02-17 14:55:28 Traceback (most recent call last):\n2025-02-17 14:55:28   File \"/ragflow/.venv/lib/python3.10/site-packages/elastic_transport/_transport.py\", line 328, in perform_request\n2025-02-17 14:55:28     meta, raw_data = node.perform_request(\n2025-02-17 14:55:28   File \"/ragflow/.venv/lib/python3.10/site-packages/elastic_transport/_node/_http_urllib3.py\", line 202, in perform_request\n2025-02-17 14:55:28     raise err from None\n2025-02-17 14:55:28 elastic_transport.ConnectionError: Connection error caused by: NewConnectionError(<urllib3.connection.HTTPConnection object at 0xffff1ff68ca0>: Failed to establish a new connection: [Errno 111] Connection refused)\n2025-02-17 14:55:28 2025-02-17 14:55:28,575 INFO     21 GET http://es01:1200/ [status:N/A duration:0.001s]\n2025-02-17 14:55:28 2025-02-17 14:55:28,575 WARNING  21 Node <Urllib3HttpNode(http://es01:1200)> has failed for 4 times in a row, putting on 8 second timeout\n2025-02-17 14:55:28 2025-02-17 14:55:28,576 WARNING  21 Connection error caused by: ConnectionError(Connection error caused by: NewConnectionError(<urllib3.connection.HTTPConnection object at 0xffff1ff69b40>: Failed to establish a new connection: [Errno 111] Connection refused)). Waiting Elasticsearch http://es01:1200 to be healthy.\n2025-02-17 14:55:29 ./entrypoint.sh: line 19:    71 Illegal instruction     $PY rag/svr/task_executor.py $1\n2025-02-17 14:55:33 2025-02-17 14:55:33,582 INFO     21 Resurrected node <Urllib3HttpNode(http://es01:1200)> (force=False)\n2025-02-17 14:55:33 2025-02-17 14:55:33,583 INFO     21 HEAD http://es01:1200/ [status:N/A duration:0.001s]\n2025-02-17 14:55:33 2025-02-17 14:55:33,583 WARNING  21 Node <Urllib3HttpNode(http://es01:1200)> has failed for 5 times in a row, putting on 16 second timeout\n2025-02-17 14:55:33 2025-02-17 14:55:33,584 WARNING  21 Retrying request after failure (attempt 0 of 3)\n2025-02-17 14:55:33 Traceback (most recent call last):\n2025-02-17 14:55:33   File \"/ragflow/.venv/lib/python3.10/site-packages/elastic_transport/_transport.py\", line 328, in perform_request\n2025-02-17 14:55:33     meta, raw_data = node.perform_request(\n2025-02-17 14:55:33   File \"/ragflow/.venv/lib/python3.10/site-packages/elastic_transport/_node/_http_urllib3.py\", line 202, in perform_request\n2025-02-17 14:55:33     raise err from None\n2025-02-17 14:55:33 elastic_transport.ConnectionError: Connection error caused by: NewConnectionError(<urllib3.connection.HTTPConnection object at 0xffff1ff6aad0>: Failed to establish a new connection: [Errno 111] Connection refused)\n2025-02-17 14:55:33 2025-02-17 14:55:33,584 INFO     21 Resurrected node <Urllib3HttpNode(http://es01:1200)> (force=False)\n2025-02-17 14:55:33 2025-02-17 14:55:33,585 INFO     21 HEAD http://es01:1200/ [status:N/A duration:0.001s]\n2025-02-17 14:55:33 2025-02-17 14:55:33,585 WARNING  21 Node <Urllib3HttpNode(http://es01:1200)> has failed for 6 times in a row, putting on 30 second timeout\n2025-02-17 14:55:33 2025-02-17 14:55:33,586 WARNING  21 Retrying request after failure (attempt 1 of 3)\n2025-02-17 14:55:33 Traceback (most recent call last):\n2025-02-17 14:55:33   File \"/ragflow/.venv/lib/python3.10/site-packages/elastic_transport/_transport.py\", line 328, in perform_request\n2025-02-17 14:55:33     meta, raw_data = node.perform_request(\n2025-02-17 14:55:33   File \"/ragflow/.venv/lib/python3.10/site-packages/elastic_transport/_node/_http_urllib3.py\", line 202, in perform_request\n2025-02-17 14:55:33     raise err from None\n2025-02-17 14:55:33 elastic_transport.ConnectionError: Connection error caused by: NewConnectionError(<urllib3.connection.HTTPConnection object at 0xffff1ff69cc0>: Failed to establish a new connection: [Errno 111] Connection refused)\n2025-02-17 14:55:33 2025-02-17 14:55:33,586 INFO     21 Resurrected node <Urllib3HttpNode(http://es01:1200)> (force=False)\n2025-02-17 14:55:33 2025-02-17 14:55:33,587 INFO     21 HEAD http://es01:1200/ [status:N/A duration:0.001s]\n2025-02-17 14:55:33 2025-02-17 14:55:33,587 WARNING  21 Node <Urllib3HttpNode(http://es01:1200)> has failed for 7 times in a row, putting on 30 second timeout\n2025-02-17 14:55:33 2025-02-17 14:55:33,588 WARNING  21 Retrying request after failure (attempt 2 of 3)\n2025-02-17 14:55:33 Traceback (most recent call last):\n2025-02-17 14:55:33   File \"/ragflow/.venv/lib/python3.10/site-packages/elastic_transport/_transport.py\", line 328, in perform_request\n2025-02-17 14:55:33     meta, raw_data = node.perform_request(\n2025-02-17 14:55:33   File \"/ragflow/.venv/lib/python3.10/site-packages/elastic_transport/_node/_http_urllib3.py\", line 202, in perform_request\n2025-02-17 14:55:33     raise err from None\n2025-02-17 14:55:33 elastic_transport.ConnectionError: Connection error caused by: NewConnectionError(<urllib3.connection.HTTPConnection object at 0xffff21c8fa60>: Failed to establish a new connection: [Errno 111] Connection refused)\n2025-02-17 14:55:33 2025-02-17 14:55:33,589 INFO     21 HEAD http://es01:1200/ [status:N/A duration:0.001s]\n2025-02-17 14:55:33 2025-02-17 14:55:33,589 WARNING  21 Node <Urllib3HttpNode(http://es01:1200)> has failed for 8 times in a row, putting on 30 second timeout\n2025-02-17 14:55:33 2025-02-17 14:55:33,590 ERROR    21 Elasticsearch http://es01:1200 is unhealthy in 120s.\n2025-02-17 14:55:33 Traceback (most recent call last):\n2025-02-17 14:55:33   File \"/ragflow/api/ragflow_server.py\", line 71, in <module>\n2025-02-17 14:55:33     settings.init_settings()\n2025-02-17 14:55:33   File \"/ragflow/api/settings.py\", line 168, in init_settings\n2025-02-17 14:55:33     docStoreConn = rag.utils.es_conn.ESConnection()\n2025-02-17 14:55:33   File \"/ragflow/rag/utils/__init__.py\", line 28, in _singleton\n2025-02-17 14:55:33     instances[key] = cls(*args, **kw)\n2025-02-17 14:55:33   File \"/ragflow/rag/utils/es_conn.py\", line 63, in __init__\n2025-02-17 14:55:33     raise Exception(msg)\n2025-02-17 14:55:33 Exception: Elasticsearch http://es01:1200 is unhealthy in 120s.\n2025-02-17 14:55:35 2025-02-17 14:55:35,355 INFO     119 ragflow_server log path: /ragflow/logs/ragflow_server.log, log levels: {'peewee': 'WARNING', 'pdfminer': 'WARNING', 'root': 'INFO'}\n2025-02-17 14:55:37 ./entrypoint.sh: line 19:    95 Illegal instruction     $PY rag/svr/task_executor.py $1\n2025-02-17 14:55:38 2025-02-17 14:55:38,359 INFO     119 init database on cluster mode successfully\n\nand docker ps show as follow:\nCONTAINER ID   IMAGE                                              COMMAND                   CREATED       STATUS                       PORTS                                                              NAMES\n3405657f3e38   docker-ragflow                                     \"./entrypoint.sh\"         2 hours ago   Up 2 hours                   0.0.0.0:80->80/tcp, 0.0.0.0:443->443/tcp, 0.0.0.0:9380->9380/tcp   ragflow-server\ne2d2ed15247e   mysql:8.0.39                                       \"docker-entrypoint.s…\"   2 hours ago   Up About an hour (healthy)   3306/tcp, 33060/tcp, 0.0.0.0:5455->5455/tcp                        ragflow-mysql\ndb37d831eebc   valkey/valkey:8                                    \"docker-entrypoint.s…\"   2 hours ago   Up About an hour             0.0.0.0:6379->6379/tcp                                             ragflow-redis\ncdcda98b44ca   elasticsearch:8.11.3                               \"/bin/tini -- /usr/l…\"   2 hours ago   Up 2 hours (healthy)         9300/tcp, 0.0.0.0:1200->9200/tcp                                   ragflow-es-01\n3f65b7d848a7   quay.io/minio/minio:RELEASE.2023-12-20T01-00-02Z   \"/usr/bin/docker-ent…\"   2 hours ago   Up About an hour             0.0.0.0:9000-9001->9000-9001/tcp  \n\nAll configurations setting ports and hosts are set as default.\nTried to use default settings to compose docker but no matching manifest for linux/arm64/v8 in the manifest list entries.\nTried to access http://localhost:1200/ ,it reports as follow:\n\n{\n  \"name\": \"es01\",\n  \"cluster_name\": \"docker-cluster\",\n  \"cluster_uuid\": \"rKZsaYQtQDa4v-aD1D3nNw\",\n  \"version\": {\n    \"number\": \"8.11.3\",\n    \"build_flavor\": \"default\",\n    \"build_type\": \"docker\",\n    \"build_hash\": \"64cf052f3b56b1fd4449f5454cb88aca7e739d9a\",\n    \"build_date\": \"2023-12-08T11:33:53.634979452Z\",\n    \"build_snapshot\": false,\n    \"lucene_version\": \"9.8.0\",\n    \"minimum_wire_compatibility_version\": \"7.17.0\",\n    \"minimum_index_compatibility_version\": \"7.0.0\"\n  },\n  \"tagline\": \"You Know, for Search\"\n}\n\nTried to delete all container,volumn,image and rebuild, this question still exists.\nHow to solve this problem?",
      "state": "open",
      "author": "moo-nin",
      "author_type": "User",
      "created_at": "2025-02-17T08:38:21Z",
      "updated_at": "2025-06-12T02:50:12Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 11,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/5038/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/5038",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/5038",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:25.063396",
      "comments": [
        {
          "author": "jacmule",
          "body": "If you are deploying using Docker compose,just set the `ES_HOST`/`MYSQL_HOST`/`MINIO_HOST`/`REDIS_HOST`  in docker/.env to `127.0.0.1`",
          "created_at": "2025-02-17T09:17:29Z"
        },
        {
          "author": "KevinHuSh",
          "body": "M4 seems rich of problems. Let's figure it out.",
          "created_at": "2025-02-18T02:03:17Z"
        },
        {
          "author": "moo-nin",
          "body": "> If you are deploying using Docker compose,just set the `ES_HOST`/`MYSQL_HOST`/`MINIO_HOST`/`REDIS_HOST` in docker/.env to `127.0.0.1`\n\nThat problem still exists .\nNothing changed except for the host:\n\nWaiting Elasticsearch http://127.0.0.1:1200 to be healthy.\n\ndocker ps show as follow:\nCONTAINER I",
          "created_at": "2025-02-18T02:58:05Z"
        },
        {
          "author": "9527andy",
          "body": "any idea how to fix?",
          "created_at": "2025-02-20T09:53:04Z"
        },
        {
          "author": "B1tMaster",
          "body": "adding these 3 lines to .env file solves all mac m4 problems: \n\n  - _JAVA_OPTIONS=-XX:UseSVE=0\n  - OPENBLAS_CORETYPE=generic\n  - NUMBA_DISABLE_JIT=1\n  - ",
          "created_at": "2025-02-26T02:55:46Z"
        }
      ]
    },
    {
      "issue_number": 4815,
      "title": "[Bug]: Login RAGFlow with error code 502",
      "body": "### Is there an existing issue for the same bug?\n\n- [x] I have checked the existing issues.\n\n### RAGFlow workspace code commit ID\n\n20250209\n\n### RAGFlow image version\n\nv0.16.0\n\n### Other environment information\n\n```Markdown\nOS type：centos7.9\nHardware parameters: 处理器8 内存16\n```\n\n### Actual behavior\n\ncentos7.9根据https://ragflow.io/docs/dev/ 描述部署安装后，修改了docker/.env 中相应地更新变量 RAGFLOW_IMAGE=infiniflow/ragflow:v0.16.0\n；登录页面输入邮箱密码，点击登录没有反应，f12查看后502错误，\n\n![Image](https://github.com/user-attachments/assets/a9595511-3f08-49a2-9f40-3e08d69c32a1)\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\n根据以下官网连接步骤执行：https://ragflow.io/docs/dev/\n```\n\n### Additional information\n\n\n以下是具体的命令调试：\n[root@localhost ragflow]# docker compose -f docker/docker-compose.yml up -d\nWARN[0000] The \"HF_ENDPOINT\" variable is not set. Defaulting to a blank string. \nWARN[0000] The \"MACOS\" variable is not set. Defaulting to a blank string. \n[+] Running 4/4\n ✔ Container ragflow-minio   Running                                                                                                                                                                                  0.0s \n ✔ Container ragflow-mysql   Healthy                                                                                                                                                                                  0.5s \n ✔ Container ragflow-redis   Running                                                                                                                                                                                  0.0s \n ✔ Container ragflow-server  Running                                                                                                                                                                                  0.0s \n[root@localhost ragflow]# docker compose ps\nno configuration file provided: not found\n[root@localhost ragflow]# cd ..\n[root@localhost tianfy]# docker compose ps\nno configuration file provided: not found\n[root@localhost tianfy]# docker ps\nCONTAINER ID   IMAGE                                              COMMAND                  CREATED          STATUS                    PORTS                                                                                                                 NAMES\n90d53f253bf1   infiniflow/ragflow:v0.16.0                         \"./entrypoint.sh\"        52 minutes ago   Up 41 minutes             0.0.0.0:80->80/tcp, :::80->80/tcp, 0.0.0.0:443->443/tcp, :::443->443/tcp, 0.0.0.0:9380->9380/tcp, :::9380->9380/tcp   ragflow-server\nff0640fc359e   quay.io/minio/minio:RELEASE.2023-12-20T01-00-02Z   \"/usr/bin/docker-ent…\"   52 minutes ago   Up 30 minutes             0.0.0.0:9000-9001->9000-9001/tcp, :::9000-9001->9000-9001/tcp                                                         ragflow-minio\nf1861338dad1   mysql:8.0.39                                       \"docker-entrypoint.s…\"   52 minutes ago   Up 30 minutes (healthy)   33060/tcp, 0.0.0.0:5455->3306/tcp, :::5455->3306/tcp                                                                  ragflow-mysql\n45d3e0172772   valkey/valkey:8                                    \"docker-entrypoint.s…\"   52 minutes ago   Up 30 minutes             0.0.0.0:6379->6379/tcp, :::6379->6379/tcp                                                                             ragflow-redis\n[root@localhost tianfy]# docker restart 90d\n90d\n[root@localhost tianfy]# docker -v\nDocker version 26.1.4, build 5650f9b\n[root@localhost tianfy]# docker-compose --version\nbash: docker-compose: command not found...\n[root@localhost tianfy]# cd ragflow\n[root@localhost ragflow]# ls\nagent  conf             deepdoc  Dockerfile       Dockerfile.scratch.oc9  download_deps.py  graphrag  intergrations  pyproject.toml  README_id.md  README_ko.md  README_pt_br.md  README_zh.md  SECURITY.md  uv.lock\napi    CONTRIBUTING.md  docker   Dockerfile.deps  docs                    example           helm      LICENSE        rag             README_ja.md  README.md     README_tzh.md    sdk           show_env.sh  web\n[root@localhost ragflow]# cd docker\n[root@localhost docker]# ls\ndocker-compose-base.yml    docker-compose-gpu-CN-oc9.yml  docker-compose-macos.yml  entrypoint-parser.sh  infinity_conf.toml  launch_backend_service.sh  ragflow-logs  service_conf.yaml.template\ndocker-compose-CN-oc9.yml  docker-compose-gpu.yml         docker-compose.yml        entrypoint.sh         init.sql            nginx                      README.md\n[root@localhost docker]# cat nginx\ncat: nginx: Is a directory\n[root@localhost docker]# cd nginx\n[root@localhost nginx]# ls\nnginx.conf  proxy.conf  ragflow.conf\n[root@localhost nginx]# cat nginx.conf \nuser  root;\nworker_processes  auto;\n\nerror_log  /var/log/nginx/error.log notice;\npid        /var/run/nginx.pid;\n\n\nevents {\n    worker_connections  1024;\n}\n\n\nhttp {\n    include       /etc/nginx/mime.types;\n    default_type  application/octet-stream;\n\n    log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '\n                      '$status $body_bytes_sent \"$http_referer\" '\n                      '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n\n    access_log  /var/log/nginx/access.log  main;\n\n    sendfile        on;\n    #tcp_nopush     on;\n\n    keepalive_timeout  65;\n\n    #gzip  on;\n    client_max_body_size 128M;\n\n    include /etc/nginx/conf.d/ragflow.conf;\n}\n\n[root@localhost nginx]# cd..\nbash: cd..: command not found...\n[root@localhost nginx]# cd ..\n[root@localhost docker]# cd ..\n[root@localhost ragflow]# docker compose -f docker/docker-compose.yml up -d\nWARN[0000] The \"HF_ENDPOINT\" variable is not set. Defaulting to a blank string. \nWARN[0000] The \"MACOS\" variable is not set. Defaulting to a blank string. \n[+] Running 4/4\n ✔ Container ragflow-redis   Running                                                                                                                                                                                  0.0s \n ✔ Container ragflow-mysql   Healthy                                                                                                                                                                                  0.5s \n ✔ Container ragflow-minio   Running                                                                                                                                                                                  0.0s \n ✔ Container ragflow-server  Running    ",
      "state": "open",
      "author": "Jackytfy",
      "author_type": "User",
      "created_at": "2025-02-09T01:12:51Z",
      "updated_at": "2025-06-12T02:44:48Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 27,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/4815/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/4815",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/4815",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:25.285375",
      "comments": []
    },
    {
      "issue_number": 8171,
      "title": "[Bug]: Document parsing error with traditional Chinese characters.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n26d3480e\n\n### RAGFlow image version\n\nv0.19.0\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nOperation steps:\nLog in to ragflow → Knowledge Base → Upload Document → Parse Document → Prompt \"Failed\" in parsing.\n\n### Expected behavior\n\nOperation steps:\nLog in to ragflow → Knowledge Base → Upload Document → Parse Document → Prompt \"Failed\" in parsing.\n\n### Steps to reproduce\n\n```Markdown\nOperation steps:\nLog in to ragflow → Knowledge Base → Upload Document → Parse Document → Prompt \"Failed\" in parsing.\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "Maxliang2025",
      "author_type": "User",
      "created_at": "2025-06-10T11:43:16Z",
      "updated_at": "2025-06-12T02:19:02Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8171/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8171",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8171",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:25.285389",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @Maxliang2025! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nRAGFlow relies on the HanziConv library to convert traditional Chinese characters to simplified Chinese during document parsing, especially in the PDF and DOCX parsers. This",
          "created_at": "2025-06-10T11:52:44Z"
        },
        {
          "author": "midilandlu",
          "body": "I’ve also uploaded documents in Traditional Chinese without encountering the issue you described. Could you let me know what file type you were uploading—was it a PDF or PPT?",
          "created_at": "2025-06-12T02:19:02Z"
        }
      ]
    },
    {
      "issue_number": 8193,
      "title": "[Bug]: parser_config does not apply for Create Dataset and Update Document via API call",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n834c4d8\n\n### RAGFlow image version\n\nv0.14.1 slim\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\n`parser_config` that I am passing to dataset does not seem to apply at the point where I trigger the parsing.\nI created the dataset:\n```bash\ncurl --request POST \\\n     --url <RAGFLOW_URL>/api/v1/datasets \\\n     --header 'Content-Type: application/json' \\\n     --header 'Authorization: Bearer <API_KEY>' \\\n     --data '{\n      \"name\": \"test_123\",\"embedding_model\": \"BAAI/bge-m3___OpenAI-API\",\"chunk_method\": \"naive\",\"parser_config\": {\"chunk_token_count\": 512, \"task_page_size\": 24}\n      }'\n```\n\nResponse:\n```bash\n{\"code\":0,\"data\":{\"avatar\":null,\"chunk_count\":0,\"chunk_method\":\"naive\",\"create_date\":\"Wed, 11 Jun 2025 17:58:53 GMT\",\"create_time\":1749635933877,\"created_by\":\"fae62316b07011efbef30242c0a8e006\",\"description\":null,\"document_count\":0,\"embedding_model\":\"BAAI/bge-m3___OpenAI-API\",\"id\":\"aec0bdd646aa11f08f4f0242c0a8e006\",\"language\":\"English\",\"name\":\"test_123\",\"parser_config\":{\"chunk_token_count\":512,\"task_page_size\":24},\"permission\":\"me\",\"similarity_threshold\":0.2,\"status\":\"1\",\"tenant_id\":\"fae62316b07011efbef30242c0a8e006\",\"token_num\":0,\"update_date\":\"Wed, 11 Jun 2025 17:58:53 GMT\",\"update_time\":1749635933877,\"vector_similarity_weight\":0.3}}\n```\nListing dataset also returns the config I set:\n```bash\ncurl --request GET \\ \n     --url \"<RAGFLOW_URL>/api/v1/datasets/?id=aec0bdd646aa11f08f4f0242c0a8e006\" \\\n     --header 'Authorization: Bearer <API_KEY>'  \n```\nResponse:\n```bash\n{\"code\":0,\"data\":[{\"avatar\":null,\"chunk_count\":0,\"chunk_method\":\"naive\",\"create_date\":\"Wed, 11 Jun 2025 17:58:53 GMT\",\"create_time\":1749635933877,\"created_by\":\"fae62316b07011efbef30242c0a8e006\",\"description\":null,\"document_count\":0,\"embedding_model\":\"BAAI/bge-m3___OpenAI-API\",\"id\":\"aec0bdd646aa11f08f4f0242c0a8e006\",\"language\":\"English\",\"name\":\"test_123\",\"parser_config\":{\"chunk_token_count\":512,\"task_page_size\":24},\"permission\":\"me\",\"similarity_threshold\":0.2,\"status\":\"1\",\"tenant_id\":\"fae62316b07011efbef30242c0a8e006\",\"token_num\":0,\"update_date\":\"Wed, 11 Jun 2025 17:58:53 GMT\",\"update_time\":1749635933877,\"vector_similarity_weight\":0.3}]}\n```\nHowever, the dashboard does not reflect this, showing chunk token number as 128 instead of 512. The same applies for other parameters in `parser_config` like delimiter. Only if I apply the modifications via dashboard then it works. I would prefer if it can be controlled via API calls as well, for me to operate and modify my pipeline without manual intervention.\nIf other parameters are changed e.g. `chunk_method` and `task_page_size`, it is reflected. So it is only parser_config that is not accepted. \n\n![Image](https://github.com/user-attachments/assets/ca4167d2-07aa-450b-beae-8d812ddf656a)\n\nAs shown in the image below, I uploaded and parsed the same document twice. The top row is uploaded and Chunk configurations modified via the dashboard, while the second row is uploaded and parsed via API calls only. As you can see they reflect a greatly different number of chunks, as the number of tokens per chunk is different.\n\n![Image](https://github.com/user-attachments/assets/90a0d686-a379-4529-aaa5-e480fc59541d)\n\nI have also tried updating the configurations via PUT Update document but faced similar issue. \nPlease let me know if I have made any error, or I missed out a fix in a later version. Thank you.\n\n### Expected behavior\n\nDataset and its documents able to parse as per the specified `parser_config` by user.\n\n### Steps to reproduce\n\n```Markdown\nCreate dataset with config different from default\n\ncurl --request POST \\\n     --url <RAGFLOW_URL>/api/v1/datasets \\\n     --header 'Content-Type: application/json' \\\n     --header 'Authorization: Bearer <API_KEY>' \\\n     --data '{\n      \"name\": \"test_123\",\"embedding_model\": \"BAAI/bge-m3___OpenAI-API\",\"chunk_method\": \"naive\",\"parser_config\": {\"chunk_token_count\": 512, \"task_page_size\": 24}\n      }'\n\nUpload document and trigger parsing.\n\ncurl --request POST \\                                           \n     --url <RAGFLOW_URL>/api/v1/datasets/<DATASET_ID>/documents \\\n     --header 'Content-Type: multipart/form-data' \\\n     --header 'Authorization: Bearer <API_KEY>' \\\n     --form 'file=@path/to/document'\n\n\ncurl --request POST \\\n     --url <RAGFLOW_URL>/api/v1/datasets/<DATASET>/chunks \\\n     --header 'Content-Type: application/json' \\   \n     --header 'Authorization: Bearer <API_KEY>' \\\n     --data '                                                                          \n     {                 \n          \"document_ids\": [\"<DOCUMENT_ID>\"]                                    \n     }'\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "missedmyeye",
      "author_type": "User",
      "created_at": "2025-06-11T10:36:30Z",
      "updated_at": "2025-06-12T01:59:19Z",
      "closed_at": "2025-06-12T01:59:19Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8193/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8193",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8193",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:25.488415",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @missedmyeye! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nBased on the code and tests, RAGFlow is designed so that `parser_config` provided via API should be applied to datasets and documents, and changes should propagate to parsing",
          "created_at": "2025-06-11T10:45:45Z"
        },
        {
          "author": "missedmyeye",
          "body": "<img width=\"1299\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/8cc9c7ec-162e-44be-a84a-16c3ad108c76\" />\n\nThe issue was that the parameter was actually `chunk_token_num` but the API documentation provided in `v0.14.1` image was inconsistent, showing `chunk_token_count` in the instructi",
          "created_at": "2025-06-12T01:59:19Z"
        }
      ]
    },
    {
      "issue_number": 5999,
      "title": "[Question]: The Infinity engine crashed due to too many files being added to the workspace.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI am using the Infinity engine nightly version. When I add many files (8900 files) to a certain knowledge base, just opening this knowledge base causes the Infinity engine to crash, followed by a popup saying 'Could not connect to any of [('172.18.0.3', 23817)]'. Then the system shows (2008, 'Infinity is initing'). Is this an issue with the Infinity engine or did I do something wrong in my operation? Is there any temporary solution?\n\n![Image](https://github.com/user-attachments/assets/0828fc58-2cbb-489d-ab70-f42f5252f90d)\n![Image](https://github.com/user-attachments/assets/758abd5d-c887-486e-b398-b033251e54b3)",
      "state": "closed",
      "author": "POURCHA",
      "author_type": "User",
      "created_at": "2025-03-12T17:59:33Z",
      "updated_at": "2025-06-12T01:48:47Z",
      "closed_at": "2025-03-13T08:14:00Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/5999/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/5999",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/5999",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:25.732747",
      "comments": [
        {
          "author": "JinHai-CN",
          "body": "This is a bug of Infinity, and will be fixed in next Infinity release.\n\n1. Remove all data in Infinity directory, restart Infinity or RAGFlow cluster, then re-insert all files.\n2. Use Elasticsearch.",
          "created_at": "2025-03-13T02:30:02Z"
        },
        {
          "author": "POURCHA",
          "body": "> 这是 Infinity 的一个错误，并将在下一个 Infinity 版本中修复。\n> \n> 1. 删除 Infinity 目录中的所有数据，重新启动 Infinity 或 RAGFlow 集群，然后重新插入所有文件。\n> 2. 使用 Elasticsearch。\nThank you so much. ヾ(•ω•`)o\n",
          "created_at": "2025-03-13T08:14:00Z"
        },
        {
          "author": "shurllsy",
          "body": "Have date plan about infinity next release?",
          "created_at": "2025-03-14T07:55:16Z"
        },
        {
          "author": "Wystan0608",
          "body": "@JinHai-CN 加油啊大佬，我留着报错等更新。",
          "created_at": "2025-04-24T03:09:11Z"
        },
        {
          "author": "ghj1976",
          "body": "0.18 版本还有这个问题呀。",
          "created_at": "2025-05-15T01:49:01Z"
        }
      ]
    },
    {
      "issue_number": 7981,
      "title": "[Bug]: Use much more VRAM  to chat with Ollama models than running in cmd",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n.\n\n### RAGFlow image version\n\nnightly\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nwhen i excute `ollama run qwen3:32b`, and `ollama ps`\nit shows 45g VRAM occupied.\nBut when i try bind this model to ragflow, it shows need 71g VRAM and results 30% parameters loaded on CPU\nI was thinking its ollama problem, however I uninstall and install it with many versions, there still is this issue.\nI dont know whether it is because of ragflow.\nCould you clarify how ragflow invokes ollama server?\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nfail to bind qwen3:32b to ragflow although run it smoothly in cmd\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "konn-submarine-bu",
      "author_type": "User",
      "created_at": "2025-05-30T09:30:38Z",
      "updated_at": "2025-06-12T00:17:09Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7981/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7981",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7981",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:25.950338",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nRAGFlow invokes Ollama models through dedicated adapter classes (like OllamaChat, OllamaEmbed, and OllamaCV) that use the Ollama Python client to communicate with the Ollama server over HTTP. These adapters allow RAGFlow to set options such as context size, batch size, and memory map",
          "created_at": "2025-05-30T09:32:59Z"
        },
        {
          "author": "konn-submarine-bu",
          "body": "what code is executed when trying bind ollama models and how to adjust RAGFlow Ollama model configuration? @dosu",
          "created_at": "2025-05-31T02:55:22Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nWhen you bind Ollama models in RAGFlow, the framework uses dedicated adapter classes—OllamaChat, OllamaEmbed, and OllamaCV—to interface with the Ollama server via the Ollama Python client. These classes are responsible for initializing the connection (using the host URL and optional ",
          "created_at": "2025-05-31T02:58:05Z"
        },
        {
          "author": "konn-submarine-bu",
          "body": "i handled my problem after setting OLLAMA_NUM_GPU=1 and updating ollama to latest version",
          "created_at": "2025-06-03T06:18:06Z"
        },
        {
          "author": "2731557667",
          "body": "> i handled my problem after setting OLLAMA_NUM_GPU=1 and updating ollama to latest version\n\nstill can't do it. May I ask if you have configured anything else, such as environment variables?",
          "created_at": "2025-06-07T05:14:36Z"
        }
      ]
    },
    {
      "issue_number": 7859,
      "title": "[Question]: The VRAM usage when running the model with ragflow is much higher than when running it with ollama run qwen3:14b.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nMy original version 0.17 used 14GB of VRAM when calling qwen3:14b. After upgrading to ragflow 0.18, calling qwen3:14b used 21GB of VRAM. After upgrading to ragflow 0.19, calling qwen3:14b used 49GB of VRAM.\n\nHowever, when I run ollama run qwen3:14b from the command line, it always only uses 14GB of VRAM.\n\n![Image](https://github.com/user-attachments/assets/52010a73-2e6a-431e-a797-8875c6d87058)\n\n<img width=\"428\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/9d13cbfe-0cf1-4450-b66a-c4fd0ec4eebf\" />",
      "state": "open",
      "author": "2731557667",
      "author_type": "User",
      "created_at": "2025-05-26T09:18:42Z",
      "updated_at": "2025-06-12T00:16:06Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7859/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7859",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7859",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:26.165422",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nBased on the information available, there are a few key factors that could explain the increased VRAM usage in ragflow versions 0.18 and 0.19 compared to version 0.17 and to running qwen3:14b directly with `ollama run`:\n\n- **Version changes and processing strategy:** In ragflow 0.19,",
          "created_at": "2025-05-26T09:36:56Z"
        },
        {
          "author": "konn-submarine-bu",
          "body": "same problem",
          "created_at": "2025-05-30T09:01:07Z"
        },
        {
          "author": "2731557667",
          "body": "> Based on the information available, there are a few key factors that could explain the increased VRAM usage in ragflow versions 0.18 and 0.19 compared to version 0.17 and to running qwen3:14b directly with `ollama run`:\n> \n> * **Version changes and processing strategy:** In ragflow 0.19, the docum",
          "created_at": "2025-06-07T02:24:41Z"
        },
        {
          "author": "RNGMARTIN",
          "body": "I have the same problem. I cannot use ragflow 0.19 unless this problem is fixed.",
          "created_at": "2025-06-12T00:16:06Z"
        }
      ]
    },
    {
      "issue_number": 1921,
      "title": "[Question]: using generated chat API key to get dialog list got 401 Unauthorized  ",
      "body": "### Describe your problem\n\nwhen using generated chat API key to get dialog list got 401 Unauthorized  error .\r\nand does the chat API key is authorized  to v1/dialog/list  ?\r\n\r\nthanks.",
      "state": "open",
      "author": "yangboz",
      "author_type": "User",
      "created_at": "2024-08-13T02:15:51Z",
      "updated_at": "2025-06-11T22:26:12Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 16,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/1921/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/1921",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/1921",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:26.391717",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "No.",
          "created_at": "2024-08-13T02:16:44Z"
        },
        {
          "author": "yangboz",
          "body": "> No.\r\nthen. how  to get  an authorized API key to access   it?",
          "created_at": "2024-08-13T02:29:37Z"
        },
        {
          "author": "yangboz",
          "body": "> No.\r\n\r\nand I saw the codebase  with  @login_required  decorations, how long does this valid session?  ",
          "created_at": "2024-08-13T03:47:58Z"
        },
        {
          "author": "learnerLj",
          "body": ">  From copilot\r\n\r\n@yangboz The session validity for `@login_required` in Flask is typically managed by the session configuration in your Flask application. By default, Flask sessions are valid until the browser is closed or the session cookie expires. You can configure the session duration using th",
          "created_at": "2024-08-13T08:03:28Z"
        },
        {
          "author": "yangboz",
          "body": " tried the code base , but I got \r\n```\r\n#res.json(): {'data': None, 'retcode': 100, 'retmsg': \"<NotFound '404: Not Found'>\"}\r\n```\r\nany idea ? thanks.",
          "created_at": "2024-08-14T01:00:36Z"
        }
      ]
    },
    {
      "issue_number": 4310,
      "title": "[Feature Request]: Examples on RAGFlow API",
      "body": "### Is there an existing issue for the same feature request?\r\n\r\n- [X] I have checked the existing issues.\r\n\r\n### Describe the feature you'd like\r\n\r\nAlthough there is already documentation for the RAGFlow API, it would be easier for developers to use if specific examples were provided. This issue proposes creating examples for the RAGFlow SDK, and accessing HTTP interfaces with cURL. \r\n\r\nPython SDK example: example/sdk\r\nHTTP API with cURL: example/http\r\n",
      "state": "open",
      "author": "JinHai-CN",
      "author_type": "User",
      "created_at": "2024-12-31T09:05:11Z",
      "updated_at": "2025-06-11T16:01:44Z",
      "closed_at": null,
      "labels": [
        "good first issue"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 10,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/4310/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "simin75simin"
      ],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/4310",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/4310",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:26.612709",
      "comments": [
        {
          "author": "JinHai-CN",
          "body": "dataset related examples:\r\nhttps://github.com/infiniflow/ragflow/blob/main/example/sdk/dataset_example.py\r\nhttps://github.com/infiniflow/ragflow/blob/main/example/http/dataset_example.sh",
          "created_at": "2024-12-31T09:06:16Z"
        },
        {
          "author": "simin75simin",
          "body": "Hi I'd like to work on this, could you assign it to me? Thanks!",
          "created_at": "2025-01-22T03:47:18Z"
        },
        {
          "author": "saishreyakumar",
          "body": "Hi @simin75simin @KevinHuSh , just checking in, is this issue still active or are you currently working on it? I would love to help out if it's available. Thanks!",
          "created_at": "2025-06-10T05:57:05Z"
        },
        {
          "author": "simin75simin",
          "body": "> Hi [@simin75simin](https://github.com/simin75simin) , just checking in, is this issue still active or are you currently working on it? I would love to help out if it's available. Thanks!\n\nyeah, i think i'd get a pr in a few days, sorry I was working on other things before, i was also checking with",
          "created_at": "2025-06-10T05:59:10Z"
        },
        {
          "author": "bulolo",
          "body": "is there any way  chat/completions only by a file? llike this\n\n```\n{\n        model: 'glm-4-flash',\n        messages: formattedMessages,\n        stream: true,\n        temperature: 0.7,\n        max_tokens: 9000,\n        files: [\n          {\n            type: \"file\",\n            id: \"82b8653b-3399-4edb",
          "created_at": "2025-06-11T06:50:27Z"
        }
      ]
    },
    {
      "issue_number": 2562,
      "title": "[Feature Request]: Request for API Method: retrieve_relevant_chunks_by_query()",
      "body": "### Is there an existing issue for the same feature request?\r\n\r\n- [X] I have checked the existing issues.\r\n\r\n### Is your feature request related to a problem?\r\n\r\n```Markdown\r\nYes, I'm currently working on a research project where I want to use ragflow's search function, and I'm having trouble using it because I don't have this interface.\r\n```\r\n\r\n\r\n### Describe the feature you'd like\r\n\r\nI would like to propose the addition of a method called retrieve_relevant_chunks_by_query() to the API. \r\nThe use case for this method is to enable retrieval of relevant chunks from Ragflow, which can then be handed off to agents built using other frameworks.\r\n\r\nThank you for considering this request.\r\n\r\n### Describe implementation you've considered\r\n\r\n_No response_\r\n\r\n### Documentation, adoption, use case\r\n\r\n_No response_\r\n\r\n### Additional information\r\n\r\n_No response_",
      "state": "closed",
      "author": "FredericVAN",
      "author_type": "User",
      "created_at": "2024-09-24T08:40:37Z",
      "updated_at": "2025-06-11T11:21:18Z",
      "closed_at": "2025-06-11T11:21:18Z",
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/2562/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/2562",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/2562",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:26.872240",
      "comments": [
        {
          "author": "which-W",
          "body": "@FredericVAN \nThanks so much for the suggestion — and sorry for the delay in getting back to you! ⏳\n\nWe’ve added the retrieve_relevant_chunks functionality to the REST API, which should help with the use case you mentioned 🔍. If this solves your issue, please feel free to close the feature request w",
          "created_at": "2025-05-19T06:54:42Z"
        },
        {
          "author": "FredericVAN",
          "body": "> [@FredericVAN](https://github.com/FredericVAN) Thanks so much for the suggestion — and sorry for the delay in getting back to you! ⏳非常感谢您的建议 — 很抱歉耽误了回复您！⏳\n> \n> We’ve added the retrieve_relevant_chunks functionality to the REST API, which should help with the use case you mentioned 🔍. If this solve",
          "created_at": "2025-06-11T11:21:18Z"
        }
      ]
    },
    {
      "issue_number": 7860,
      "title": "[Question]: about LayoutRecognizer4YOLOv10 labels",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nHi, thank you for your work. \nI have a question, why do the Figure caption and Table caption have to be repeated here?\n\nhttps://github.com/infiniflow/ragflow/blob/main/deepdoc/vision/layout_recognizer.py#L178",
      "state": "open",
      "author": "Danee-wawawa",
      "author_type": "User",
      "created_at": "2025-05-26T09:34:36Z",
      "updated_at": "2025-06-11T09:28:17Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7860/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7860",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7860",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:27.026473",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe repetition of \"Figure caption\" and \"Table caption\" in the labels list of the `LayoutRecognizer4YOLOv10` class appears to be intentional in the code, but there is no explicit documentation or comments explaining the rationale behind this design choice. The labels list is as follow",
          "created_at": "2025-05-26T09:38:16Z"
        },
        {
          "author": "Danee-wawawa",
          "body": "someone can answer?",
          "created_at": "2025-06-11T09:28:17Z"
        }
      ]
    },
    {
      "issue_number": 8109,
      "title": "[Question]: In v0.19.0, why does only the General chunking method automatically call the VL model to parse pdf docs? Other chunking methods still use OCR even if the PDF parser is set to a VL model.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nAs shown in the figure, I choose the Presentation chunking method and the PDF parser as the VL model, but I upload a pdf document and I don't use the VL model when parsing it.\n\n![Image](https://github.com/user-attachments/assets/568aca80-9642-44d0-85e7-c2029771f254)\n\n![Image](https://github.com/user-attachments/assets/8a971eb2-933d-4dea-aeef-d7d67054c0be)",
      "state": "closed",
      "author": "Dreamcatcher-wind",
      "author_type": "User",
      "created_at": "2025-06-06T10:08:14Z",
      "updated_at": "2025-06-11T07:15:55Z",
      "closed_at": "2025-06-11T07:15:55Z",
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8109/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8109",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8109",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:27.218878",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nIn v0.19.0, the Presentation chunking method defaults to using OCR for PDF parsing, even if you select a Vision-Language (VL) model as the PDF parser. This is because the Presentation method's implementation always starts with the `PdfParser` class, which performs OCR on each page an",
          "created_at": "2025-06-06T10:11:44Z"
        }
      ]
    },
    {
      "issue_number": 8166,
      "title": "[Bug]: Severe OCR accuracy degradation on PDF documents rotated by 90 degrees",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nc5e4684b4434bcdc766224548959e579d6259166\n\n### RAGFlow image version\n\nv0.19.0\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nThe OCR engine fails to produce usable results when processing PDF documents that have been rotated 90 degrees from their standard upright orientation. Here's the document sample page: \n\n![Image](https://github.com/user-attachments/assets/7a62efc3-f8b0-498c-9c8d-355356f7eddd)\n\nThe output is like this: \n`<table>\\n<tr><td  >分湿</td><td></td><td></td><td  >市</td><td  >> 设 建 计</td><td  >等 局</td><td  >市</td><td></td></tr>\\n<tr><td  >地州回古</td><td></td><td  >贯</td><td></td><td></td><td></td><td></td><td></td></tr>\\n<tr><td  >2</td><td  >3</td><td  >4</td><td  >S</td><td  >9</td><td  >7</td><td  >8</td><td  >9</td></tr>\\n<tr><td></td><td></td><td  >善 完</td><td  >噪中</td><td  >理 管</td><td  >系 体</td><td></td><td></td></tr>\\n</table>`\n\nThe output lost a lot of info and table setup, so the result couldn't be used.\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nupload the doc, use the default ocr engine\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "cwr31",
      "author_type": "User",
      "created_at": "2025-06-10T10:30:10Z",
      "updated_at": "2025-06-11T06:18:35Z",
      "closed_at": "2025-06-11T06:18:35Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8166/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8166",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8166",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:27.465599",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @cwr31! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nI couldn't find any existing issues or discussions about OCR accuracy problems with rotated PDFs in RAGFlow.\n\nFrom the code, the OCR engine processes detected text regions and appl",
          "created_at": "2025-06-10T10:33:16Z"
        }
      ]
    },
    {
      "issue_number": 8116,
      "title": "[Feature Request]: LMstudio rerank model isn't supported",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n-\n\n### RAGFlow image version\n\nv0.19.0-full\n\n### Other environment information\n\n```Markdown\nWindows 11 with Docker\n```\n\n### Actual behavior\n\n![Image](https://github.com/user-attachments/assets/2fe0085d-19b0-42bb-a565-aea646578ca6)\n\nThis is the log:\n\n2025-06-07 00:45:35,419 ERROR 22\n\nFail to access model(text-embedding-qwen.qwen3-reranker-0.6b).The LmStudioRerank has not been implement\n\nNoneType: None\n\n2025-06-07 00:45:35,421 INFO 22 172.20.0.6 - - [07/Jun/2025 00:45:35] \"POST /v1/llm/add_llm HTTP/1.1\" 200 -\n\n2025-06-07 00:45:37,097 ERROR 22\n\nFail to access model(text-embedding-qwen.qwen3-reranker-0.6b).The LmStudioRerank has not been implement\n\nNoneType: None\n\n2025-06-07 00:45:37,098 INFO 22 172.20.0.6 - - [07/Jun/2025 00:45:37] \"POST /v1/llm/add_llm HTTP/1.1\" 200 -\n\n### Expected behavior\n\nThe docs says that reranking models for LMstudio are supported.\n\n### Steps to reproduce\n\n![Image](https://github.com/user-attachments/assets/2e04c120-9954-4d1c-922d-55f1a895ad9f)\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "r3vs",
      "author_type": "User",
      "created_at": "2025-06-06T16:54:21Z",
      "updated_at": "2025-06-11T03:56:04Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8116/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8116",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8116",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:27.643507",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @r3vs! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThe LMstudio rerank model is listed in the codebase, but its implementation is missing—the main method raises a \"NotImplementedError\" and isn't functional yet, which matches the err",
          "created_at": "2025-06-06T16:56:54Z"
        },
        {
          "author": "ZhenhangTung",
          "body": "@r3vs Noted",
          "created_at": "2025-06-11T03:56:04Z"
        }
      ]
    },
    {
      "issue_number": 8176,
      "title": "[Feature Request]: \"Use knowledge graph\" toggle in embedded chat",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\nRetrieval time when using a knowledge graph is long (20-30 seconds)\n```\n\n### Describe the feature you'd like\n\nAdd a button in the embedded chat allowing a user to toggle knowledge graph retrieval mode on and off\n\n### Describe implementation you've considered\n\nUntil this feature is implemented I will need to embed two separate chats, one with \"Use knowledge graph\" enabled and one without. \n\n### Documentation, adoption, use case\n\n```Markdown\nRetrieval time with knowledge graph is taking 10 times longer than not using knowledge graph.  \n\nBy default retrieval should be done without knowledge graph, but the user should be able to easily switch on knowledge graph retrieval if they are unsatisfied with the response.\n```\n\n### Additional information\n\nMany Chat LLM providers provide options under the chatbox.  Adding these user-configurable options would be a major improvement to the user-experience with the embedded chat.  Ideally an administrator would be able to configure which options would be available to the user.\n\n![Image](https://github.com/user-attachments/assets/b0b418d9-be04-4dfa-91ef-8807f0929513)\n![Image](https://github.com/user-attachments/assets/5b5cebd2-3e5b-4852-821f-ace703800195)\n![Image](https://github.com/user-attachments/assets/585d54f2-e7e3-465c-9be9-081877a1e995)\n![Image](https://github.com/user-attachments/assets/e502dba9-038e-4fb6-b624-659dc0e316a5)\n![Image](https://github.com/user-attachments/assets/8f17f319-7612-41b1-bd47-9abee1067113)\n\n",
      "state": "open",
      "author": "homewmt",
      "author_type": "User",
      "created_at": "2025-06-11T01:39:52Z",
      "updated_at": "2025-06-11T03:51:56Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8176/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8176",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8176",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:27.843102",
      "comments": [
        {
          "author": "ZhenhangTung",
          "body": "@homewmt Hi! I'm the product manager — thanks for bringing this up.\n\nAt this stage, we don't plan to expose a toggle to end users for turning knowledge graph retrieval on/off directly, as it's a bit too technical and could lead to confusion in most use cases.\n\nThat said, I totally understand your ne",
          "created_at": "2025-06-11T03:51:56Z"
        }
      ]
    },
    {
      "issue_number": 7012,
      "title": "[Question]config s3 with tencent cos config，but not work",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nmodify service_conf.yaml.template file，how to use tencent cloud cos adapter s3 config\n\n",
      "state": "open",
      "author": "liuyang1986",
      "author_type": "User",
      "created_at": "2025-04-14T09:41:00Z",
      "updated_at": "2025-06-11T01:52:41Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7012/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7012",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7012",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:28.046976",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHello @liuyang1986! 👋 I'm [Dosu](https://dosu.dev), your friendly bot here to help you solve bugs, answer questions, and assist you in becoming a contributor. I'm here while you wait for a human maintainer. Let's tackle this together! 🚀\n\n<!-- Answer -->\nTo configure S3 with Tencent",
          "created_at": "2025-04-14T09:45:55Z"
        },
        {
          "author": "liuyang1986",
          "body": "the service_conf.yaml.template file is correctly set up with the necessary parameters as your said, restart services, but not work, how to  configure service_conf.yaml.template file,should i annotation minio config？",
          "created_at": "2025-04-15T08:49:49Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nIf you've already set up the `service_conf.yaml.template` file with the necessary Tencent Cloud COS parameters and it's still not working, you should ensure that the MinIO configuration is not conflicting with your setup. You can comment out or remove the MinIO configuration if you a",
          "created_at": "2025-04-15T08:51:19Z"
        },
        {
          "author": "jinjianming",
          "body": "https://github.com/infiniflow/ragflow/blob/main/docker/service_conf.yaml.template\nI didn't see the COS configuration",
          "created_at": "2025-06-10T10:33:38Z"
        },
        {
          "author": "jinjianming",
          "body": "> https://github.com/infiniflow/ragflow/blob/main/docker/service_conf.yaml.template I didn't see the COS configuration\n\nhttps://github.com/infiniflow/ragflow/blob/f0a3d91171dc2a493f681e7db16a41e7fa946356/rag/settings.py#L44-L51",
          "created_at": "2025-06-11T01:52:41Z"
        }
      ]
    },
    {
      "issue_number": 7863,
      "title": "[Question]: how can configure custom embedding models？",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nHow does RagFLow support non openAi data structure style embedding models or rerank models? I cannot configure it on the OpenAI API Compatible configuration page.",
      "state": "open",
      "author": "pangsiuming",
      "author_type": "User",
      "created_at": "2025-05-26T10:34:28Z",
      "updated_at": "2025-06-11T00:32:26Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 12,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7863/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7863",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7863",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:28.289283",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nRAGFlow supports non-OpenAI embedding models and rerank models through its flexible configuration system, not limited to OpenAI API-compatible models.\n\nTo configure non-OpenAI models, you should use the configuration files rather than the OpenAI API Compatible configuration page. Spe",
          "created_at": "2025-05-26T10:41:25Z"
        },
        {
          "author": "pangsiuming",
          "body": "Thank you very much for your answer firstly. I have a general understanding, but as you said, I just want to know how to know RAGFlow's expected input/output formats. And I want to confirm one thing, for example, if the data structure is different, can RagFlow solve it through configuration, or does",
          "created_at": "2025-05-27T01:22:24Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nHere’s how RAGFlow handles embedding model integration and what you need to do to make your specific model compatible:\n\n### 1. RAGFlow’s Expected Input/Output Formats\n\n- **Input:** RAGFlow expects the input to the embedding model to be a valid string (the text/query to embed). The mo",
          "created_at": "2025-05-27T01:35:23Z"
        },
        {
          "author": "pangsiuming",
          "body": "It seems like there is a solution. Let me try it out.",
          "created_at": "2025-05-28T02:15:13Z"
        },
        {
          "author": "pangsiuming",
          "body": "I tried to configure it and did find the model I configured in the Set default models of the Model provider, but it seems to have failed. I couldn't find it in the menu search function module, and the knowledge base chat assistant didn't work. How about I list the interface information for embedding",
          "created_at": "2025-05-30T02:16:26Z"
        }
      ]
    },
    {
      "issue_number": 5367,
      "title": "[Bug]: Solution to M4 mac arch64 elastic container crashing and $PY rag/svr/task_executor.py $1 issue with main server.",
      "body": "### Is there an existing issue for the same bug?\n\n- [x] I have checked the existing issues.\n\n### RAGFlow workspace code commit ID\n\n4e2afcd\n\n### RAGFlow image version\n\nnightly\n\n### Other environment information\n\n```Markdown\nM4, macmini pro , 15.3.1 (24D70)\n```\n\n### Actual behavior\n\nthis is actual solution to solve the problem. \n\nI added below 3 ENV variables to my .env file under docker directory:\n\n_JAVA_OPTIONS=-XX:UseSVE=0\nOPENBLAS_CORETYPE=generic\nNUMBA_DISABLE_JIT=1\n\nThis solution solves 2 problems:\n\n1. Elastic search container constantly re-boot due to Java crash.. related to MacBook m4 macmini ARch64 incompatibility .   \n2. main ragflow server , not being able to start properly due to executor failing all the time again due to MacBook m4 Arch64 incompatibility .  \nbasically if you get this:  illegal  $PY rag/svr/task_executor.py $1\n\n\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nthis is a fix.. just add those lines to .env file if you are on macOS m4 \n\n_JAVA_OPTIONS=-XX:UseSVE=0\nOPENBLAS_CORETYPE=generic\nNUMBA_DISABLE_JIT=1\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "B1tMaster",
      "author_type": "User",
      "created_at": "2025-02-26T03:04:50Z",
      "updated_at": "2025-06-10T17:38:53Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/5367/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/5367",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/5367",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:28.536034",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "Also, you could build an image from source.\n```\ngit clone https://github.com/infiniflow/ragflow.git\ncd ragflow/\npip3 install huggingface_hub nltk\npython3 download_deps.py\ndocker build -f Dockerfile.deps -t infiniflow/ragflow_deps .\ndocker build -f Dockerfile -t infiniflow/ragflow:nightly .\ndocker bu",
          "created_at": "2025-02-26T03:39:14Z"
        },
        {
          "author": "jt-z",
          "body": "I used the two solutions above, set the environment variables in the env, and pulled the nightly code to rebuild the image, and finally it could run on the M4 chip.",
          "created_at": "2025-03-10T05:42:25Z"
        },
        {
          "author": "rollinsio",
          "body": "I ended up using this, but also had the issue that elastic search was set to use 8GB memory. However, I had only allotted 6GB for all of Docker. Once I bumped ES down to 4GB (which is still a lot) things started running smoothly",
          "created_at": "2025-06-10T17:38:53Z"
        }
      ]
    },
    {
      "issue_number": 7414,
      "title": "[Question]: Make model loading, keep-alive, and context scaling configurable in Ragflow for Ollama integrationn",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI'm using Ollama with Ragflow, and I’ve noticed that inference times are particularly long.\n\nIt would be very helpful to have the ability to configure the model loading behavior—either directly during assistant creation, when adding a model, or through assistant settings. Specifically, I would like to:\n\n- Customize how long a model stays loaded in memory \n- Increase the keep-alive duration in OllamaChat’s chat_model beyond the default 10 seconds, potentially up to several minutes.\n- Add intermediate context length tiers in the _calculate_dynamic_ctx method of chat_model, instead of jumping directly from 8192 to 16384 tokens. This would allow for more granular memory and performance management based on usage patterns.\n\nThese enhancements would significantly improve responsiveness and resource efficiency, especially when using larger models or handling variable workloads.\n\nThanks for considering this feature!\n\n",
      "state": "open",
      "author": "jordybacherotsied",
      "author_type": "User",
      "created_at": "2025-04-29T09:24:37Z",
      "updated_at": "2025-06-10T15:17:28Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question",
        "💞 feature"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7414/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7414",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7414",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:28.747486",
      "comments": [
        {
          "author": "jordybacherotsied",
          "body": "Also, it would be worth revisiting the token estimation method, which currently seems to significantly overestimate usage (e.g., treating 1 character as 1 token).",
          "created_at": "2025-04-29T11:39:08Z"
        }
      ]
    },
    {
      "issue_number": 8175,
      "title": "[Bug]: The OpenAI-Compatible Agent API returns an incorrect message",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n2ee55a6b37bfe25f91cc0fc6a4bddcb148ab8964\n\n### RAGFlow image version\n\nv0.19\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nWhen using the openai compatible agent API to make a request, the welcome statement and session id of the agent will be returned instead of replying directly as in the API documentation, and the fixed reply is as follows:\n```\ndata: {\"id\": \"2a744d22460511f0b3de26b620624c1b\", \"object\": \"chat.completion.chunk\", \"created\": null, \"model\": \"344829ba41f811f0b644eeaa47e29626\", \"param\": null, \"usage\": {\"prompt_tokens\": 10, \"completion_tokens\": 15, \"total_tokens\": 25, \"completion_tokens_details\": {\"reasoning_tokens\": 0, \"accepted_prediction_tokens\": 0, \"rejected_prediction_tokens\": 0}}, \"choices\": [{\"message\": {\"role\": \"assistant\", \"content\": \"Hi! I'm your smart assistant. What can I do for you?\"}, \"logprobs\": null, \"finish_reason\": \"stop\", \"index\": 0}]}\n```\n\n### Expected behavior\n\n```\n{\n    \"id\": \"chatcmpl-3a9c3572f29311efa69751e139332ced\",\n    \"choices\": [\n        {\n            \"delta\": {\n                \"content\": \"This is a test. If you have any specific questions or need information, feel\",\n                \"role\": \"assistant\",\n                \"function_call\": null,\n                \"tool_calls\": null\n            },\n            \"finish_reason\": null,\n            \"index\": 0,\n            \"logprobs\": null\n        }\n    ],\n    \"created\": 1740543996,\n    \"model\": \"model\",\n    \"object\": \"chat.completion.chunk\",\n    \"system_fingerprint\": \"\",\n    \"usage\": null\n}\n// omit duplicated information\n{\"choices\":[{\"delta\":{\"content\":\" free to ask, and I will do my best to provide an answer based on\",\"role\":\"assistant\"}}]}\n{\"choices\":[{\"delta\":{\"content\":\" the knowledge I have. If your question is unrelated to the provided knowledge base,\",\"role\":\"assistant\"}}]}\n{\"choices\":[{\"delta\":{\"content\":\" I will let you know.\",\"role\":\"assistant\"}}]}\n// the last chunk\n{\n    \"id\": \"chatcmpl-3a9c3572f29311efa69751e139332ced\",\n    \"choices\": [\n        {\n            \"delta\": {\n                \"content\": null,\n                \"role\": \"assistant\",\n                \"function_call\": null,\n                \"tool_calls\": null\n            },\n            \"finish_reason\": \"stop\",\n            \"index\": 0,\n            \"logprobs\": null\n        }\n    ],\n    \"created\": 1740543996,\n    \"model\": \"model\",\n    \"object\": \"chat.completion.chunk\",\n    \"system_fingerprint\": \"\",\n    \"usage\": {\n        \"prompt_tokens\": 18,\n        \"completion_tokens\": 225,\n        \"total_tokens\": 243\n    }\n}\n```\n\n### Steps to reproduce\n\n```Markdown\nI made the following request in full accordance with the “Create agent completion section” of the API documentation::\n\ncurl --request POST \\\n     --url http://{address}/api/v1/agents_openai/{agent_id}/chat/completions \\\n     --header 'Content-Type: application/json' \\\n     --header 'Authorization: Bearer <YOUR_API_KEY>' \\\n     --data '{\n        \"model\": \"model\",\n        \"messages\": [{\"role\": \"user\", \"content\": \"Say this is a test!\"}],\n        \"stream\": true\n      }'\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "ysay-d",
      "author_type": "User",
      "created_at": "2025-06-10T14:39:14Z",
      "updated_at": "2025-06-10T14:41:45Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8175/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8175",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8175",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:28.923223",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe OpenAI-Compatible Agent API returns a welcome message when the session is first initialized and only contains the assistant's prologue; this is expected behavior based on how the code handles session and message flow. The API expects your request to include a 'messages' list with",
          "created_at": "2025-06-10T14:41:45Z"
        }
      ]
    },
    {
      "issue_number": 8165,
      "title": "[Question]: Document vectorization",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nasync def embedding(docs, mdl, parser_config=None, callback=None):\n    if parser_config is None:\n        parser_config = {}\n    batch_size = 16\n    tts, cnts = [], []\n    for d in docs:\n        tts.append(d.get(\"docnm_kwd\", \"Title\"))\n        c = \"\\n\".join(d.get(\"question_kwd\", []))\n        if not c:\n            c = d[\"content_with_weight\"]\n        c = re.sub(r\"</?(table|td|caption|tr|th)( [^<>]{0,12})?>\", \" \", c)\n        if not c:\n            c = \"None\"\n        cnts.append(c） If there is a preset question, the question is used as the vector of the entire document block, and the original document content vector is discarded, so that a lot of important information is not lost",
      "state": "open",
      "author": "sznariOsmosis",
      "author_type": "User",
      "created_at": "2025-06-10T10:04:47Z",
      "updated_at": "2025-06-10T10:07:03Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8165/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8165",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8165",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:29.123302",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @sznariOsmosis! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nYour understanding is correct: in RAGFlow, the async embedding logic (like in rag/svr/task_executor.py) can use preset questions as the vector for a document block, which m",
          "created_at": "2025-06-10T10:07:03Z"
        }
      ]
    },
    {
      "issue_number": 8164,
      "title": "[Question]: How do I update an agent using the API ?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI've been trying to update an agent using the API and the documentation but I keep getting \"<NotFound '404: Not Found'>\"\n\nI'm doing a get of agents\n![Image](https://github.com/user-attachments/assets/f5eb3b68-c081-4748-92dd-1a43fc9ef8ec)\n\nAnd using this Id in the url\n![Image](https://github.com/user-attachments/assets/d79ec181-1191-418b-bdfa-311379bd95cf)\n\nI'm also using the correct Bearer Token since I'm not having issues with other request.\n\nThis is the response :\n![Image](https://github.com/user-attachments/assets/c6172b45-28e3-4862-a148-f4e3d3114036)\n\nI also can't create a new agent using the API.\nEvery time I'm doing a POST to the URL /api/v1/agents I'm getting :\n\n![Image](https://github.com/user-attachments/assets/d07fdbe8-d704-4ae1-8fd2-7af81cf55cb2)\n\nAm I doing something wrong ?\n\nThanks in advance.",
      "state": "closed",
      "author": "bryantomadon",
      "author_type": "User",
      "created_at": "2025-06-10T09:39:20Z",
      "updated_at": "2025-06-10T09:55:57Z",
      "closed_at": "2025-06-10T09:55:57Z",
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8164/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8164",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8164",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:29.305519",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nCurrently, RAGFlow does not support creating, updating, or deleting agents via the API—these actions can only be performed through the UI interface [(source)](https://github.com/infiniflow/ragflow/issues/5502). The 404 and 405 errors you're seeing are expected if you try to use non-e",
          "created_at": "2025-06-10T09:41:57Z"
        }
      ]
    },
    {
      "issue_number": 8139,
      "title": "Ragflow Dataset Pagination Issue After Filtering",
      "body": "For the RAGFlow dataset, the number of paginated pages does not change after filtering. Even if there is only one matching record on the last page, you still have to navigate to the last page to see it.",
      "state": "open",
      "author": "lahok",
      "author_type": "User",
      "created_at": "2025-06-09T08:23:49Z",
      "updated_at": "2025-06-10T09:42:27Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8139/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8139",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8139",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:29.487870",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThere is a known pagination issue in RAGFlow where the number of pages doesn't update correctly after filtering, which can lead to situations like the one you described. This issue was fixed in the nightly version of the RAGFlow Docker image—updating to that version should resolve th",
          "created_at": "2025-06-09T08:28:12Z"
        },
        {
          "author": "Woody-Hu",
          "body": "I tried on my local and check the source code but can not 100% understand this case, can I get a screenshot to better understand this case? ",
          "created_at": "2025-06-10T02:14:45Z"
        },
        {
          "author": "lahok",
          "body": "![Image](https://github.com/user-attachments/assets/74bd6efd-ebcc-4c02-9b39-ec57d9500c7b)\n\n![Image](https://github.com/user-attachments/assets/085e6f2f-2059-45c2-9953-9b76902d148f)\n\n![Image](https://github.com/user-attachments/assets/760bf674-3f01-4ced-bdb0-3801abbda48e)",
          "created_at": "2025-06-10T09:42:27Z"
        }
      ]
    },
    {
      "issue_number": 8158,
      "title": "[Question]: How to use Baidu components for online search?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nThe input I provided is: Beijing weather. Output:[\n  {\n    \"content\": \"\"\n  }\n]\n\n![Image](https://github.com/user-attachments/assets/a6d3a703-16da-49b1-b926-5a98e8b736bf)",
      "state": "open",
      "author": "99RRR",
      "author_type": "User",
      "created_at": "2025-06-10T08:48:38Z",
      "updated_at": "2025-06-10T09:35:13Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8158/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8158",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8158",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:29.677484",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe Baidu component in RAGFlow is implemented in `agent/component/baidu.py` and works by sending your query to Baidu Search, scraping the results, and returning them as a list of content snippets. If you’re getting empty results, here are some things to check:\n\n- Make sure your agent",
          "created_at": "2025-06-10T08:51:20Z"
        },
        {
          "author": "99RRR",
          "body": "@dosu. 还是不行\n",
          "created_at": "2025-06-10T09:32:42Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\n还是不行的话，可以再确认几个关键点：\n\n1. 你用的是不是最新的 nightly 版镜像？nightly-slim 版本和旧版会导致空结果，只有 nightly 版修复了相关 bug（[参考](https://github.com/infiniflow/ragflow/issues/6420)）。\n2. 组件在 Agent 流程里必须串联起来，不能单独测试，否则不会有结果（[参考](https://github.com/infiniflow/ragflow/issues/6883)）。\n3. 如果你在国内网络环境，Baidu 访问需要代理的话，需要进容器手动修改",
          "created_at": "2025-06-10T09:35:13Z"
        }
      ]
    },
    {
      "issue_number": 8160,
      "title": "[Question]:",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nThe input I provided is: Beijing weather. Output:[\n  {\n    \"content\": \"\"\n  }\n]\n\n![Image](https://github.com/user-attachments/assets/a6d3a703-16da-49b1-b926-5a98e8b736bf)",
      "state": "closed",
      "author": "99RRR",
      "author_type": "User",
      "created_at": "2025-06-10T08:48:44Z",
      "updated_at": "2025-06-10T09:00:50Z",
      "closed_at": "2025-06-10T08:50:21Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8160/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8160",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8160",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:29.908906",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe empty output is likely because the QWeather component requires a valid API key, but by default it uses a placeholder. If the API key is missing or invalid, the weather API returns no data, resulting in an empty response. To fix this, make sure you set a real QWeather API key in t",
          "created_at": "2025-06-10T09:00:50Z"
        }
      ]
    },
    {
      "issue_number": 8161,
      "title": "[Question]:",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nThe input I provided is: Beijing weather. Output:[\n  {\n    \"content\": \"\"\n  }\n]\n\n![Image](https://github.com/user-attachments/assets/a6d3a703-16da-49b1-b926-5a98e8b736bf)",
      "state": "closed",
      "author": "99RRR",
      "author_type": "User",
      "created_at": "2025-06-10T08:48:47Z",
      "updated_at": "2025-06-10T08:55:48Z",
      "closed_at": "2025-06-10T08:50:14Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8161/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8161",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8161",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:30.110674",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe empty output for \"Beijing weather\" is likely due to one or more of these reasons:\n\n- RAGFlow currently only matches queries in the same language as the indexed content, so if your knowledge base content is in Chinese and your query is in English (or vice versa), you may get empty",
          "created_at": "2025-06-10T08:55:48Z"
        }
      ]
    },
    {
      "issue_number": 8159,
      "title": "[Question]:",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nThe input I provided is: Beijing weather. Output:[\n  {\n    \"content\": \"\"\n  }\n]\n\n![Image](https://github.com/user-attachments/assets/a6d3a703-16da-49b1-b926-5a98e8b736bf)",
      "state": "closed",
      "author": "99RRR",
      "author_type": "User",
      "created_at": "2025-06-10T08:48:40Z",
      "updated_at": "2025-06-10T08:52:28Z",
      "closed_at": "2025-06-10T08:50:04Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8159/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8159",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8159",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:30.336660",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe empty output for \"Beijing weather\" is likely due to how the QWeather component handles API responses. If the API returns an error code (like \"204\" for no data available for the region, or \"404\" for a non-existent region), or if the input or response is empty, the component will r",
          "created_at": "2025-06-10T08:52:28Z"
        }
      ]
    },
    {
      "issue_number": 8157,
      "title": "[Question]: Module not found: Error: Can't resolve '@parent/docs/references/http_api_reference.md' in '.\\src\\components\\api-service\\chat-overview-modal'",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nModule not found: Error: Can't resolve '@parent/docs/references/http_api_reference.md' in 'D:\\pythonCode\\ragflow\\web\\src\\components\\api-service\\chat-overview-modal'",
      "state": "open",
      "author": "startForZero",
      "author_type": "User",
      "created_at": "2025-06-10T08:21:53Z",
      "updated_at": "2025-06-10T08:31:58Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8157/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8157",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8157",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:32.304351",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @startForZero! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThe error happens because the `@parent` alias is set up in the UmiJS/webpack config for runtime, but it's missing from your TypeScript config, so TypeScript (and your editor",
          "created_at": "2025-06-10T08:31:56Z"
        }
      ]
    },
    {
      "issue_number": 7886,
      "title": "[Question] Update Process Terminates Prematurely",
      "body": "https://github.com/infiniflow/ragflow/blob/590070e47dda0e52da2de9dfb027bd32ea708ebe/api/apps/sdk/doc.py#L310\n\nWhen chunk_method field remains unchanged, and parser_config or status cannot enter the update code block.\nEspecially when using HTTP APIs, the update process is particularly cumbersome. To update some attributes, one must first query the current attributes, then compare each field to identify differences, and finally pass only the changed fields to the API. This approach is inefficient, as it requires multiple steps and unnecessary overhead for what should be a straightforward update operation.",
      "state": "closed",
      "author": "mumumi",
      "author_type": "User",
      "created_at": "2025-05-27T07:49:22Z",
      "updated_at": "2025-06-10T07:48:48Z",
      "closed_at": "2025-06-10T07:48:48Z",
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7886/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7886",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7886",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:32.491614",
      "comments": [
        {
          "author": "ZhenhangTung",
          "body": "cc @yongtenglei ",
          "created_at": "2025-05-28T04:24:47Z"
        }
      ]
    },
    {
      "issue_number": 8143,
      "title": "[Bug]: Model parameter is not used in HTTP request",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nd9b98cb\n\n### RAGFlow image version\n\nv0.19.0\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nWhen sending HTTP request API, model parameter is not used in HTTP request\n\nFor example\n```\ncurl --request POST \\\n     --url https://kb.9mdd.com/api/v1/chats_openai/{dialogID}/chat/completions \\\n     --header 'Content-Type: application/json' \\\n     --header 'Authorization: Bearer ragflow-EwMjJhMWQyMzc4MDExZjA5MzYyNjZkMz' \\\n     --data '{\\n        \"model\": \"deepseek-r1@Tongyi-Qianwen\",\\n        \"messages\": [{\\\"role\\\": \"user\", \\\"content\\\": \"请仔细思考一下!\"}],\\n        \"stream\": true\\n      }'\n```\n\nThe model parameter is `deepseek-r1@Tongyi-Qianwen` here, but it actually still uses what is set in front end chat assistant setting, which is `qwen` here.\n\nAlthough the documentation said:\n\n> model (Body parameter) string, Required The model used to generate the response. The server will parse this automatically, so you can set it to any value for now.\n\nBut I still think the logic is not correct.\n\n\n\n\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nAs described above.\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "kowyo",
      "author_type": "User",
      "created_at": "2025-06-09T10:04:41Z",
      "updated_at": "2025-06-10T07:42:10Z",
      "closed_at": "2025-06-10T07:42:10Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8143/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8143",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8143",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:32.681227",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThere are similar reports where the model parameter in the HTTP request was not respected, and the backend defaulted to the model set in the frontend or workspace settings. For models like Qwen3 or DeepSeek, it's important to ensure that the model parameter is set in the request as `",
          "created_at": "2025-06-09T10:07:36Z"
        },
        {
          "author": "yongtenglei",
          "body": "Hi, @kowyo \n\nThat's what you said. You can leave any value for `model` field, as RAGFlow can parse correct model automatically to interact with LLMs, where you set APIs in the frontend.\n\nWhat if you set a random string for `model` or the `model` is unknown for RAGFlow, we cannot perform task for you",
          "created_at": "2025-06-09T10:48:05Z"
        }
      ]
    },
    {
      "issue_number": 8107,
      "title": "[Feature Request]: Retrieval component support cross-lang search",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\n\n```\n\n### Describe the feature you'd like\n\nKnowledge base has supported the cross-language search, I hope Retrieval component can also support cross-lang search in Agent.\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "TeslaZY",
      "author_type": "User",
      "created_at": "2025-06-06T08:38:38Z",
      "updated_at": "2025-06-10T07:27:04Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8107/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8107",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8107",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:32.869854",
      "comments": [
        {
          "author": "ZhenhangTung",
          "body": "@TeslaZY Great point. We're working hard on v0.20. Will review it after the release. ",
          "created_at": "2025-06-10T02:46:59Z"
        },
        {
          "author": "TeslaZY",
          "body": "What an exciting news.",
          "created_at": "2025-06-10T07:27:03Z"
        }
      ]
    },
    {
      "issue_number": 8105,
      "title": "[Question]: The Linux operating system based on ARM architecture parses documents too slowly",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nWhy does it only take 200 - 300 seconds to process chunks of the same document on an X86 - based Ubuntu system with 4 cores and 16GB of memory, but when I move this document to a Kylin system based on the ARM architecture with 64 cores and 64GB of memory, it takes several hours or more to parse the chunks? Why is this?",
      "state": "closed",
      "author": "earlBell",
      "author_type": "User",
      "created_at": "2025-06-06T08:06:52Z",
      "updated_at": "2025-06-10T03:57:14Z",
      "closed_at": "2025-06-10T03:57:14Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 8,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8105/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8105",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8105",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:33.053286",
      "comments": [
        {
          "author": "earlBell",
          "body": "[@dosu](https://go.dosu.dev/dosubot)",
          "created_at": "2025-06-06T08:09:08Z"
        },
        {
          "author": "earlBell",
          "body": "docker stats\n```\nCONTAINER ID   NAME             CPU %      MEM USAGE / LIMIT     MEM %     NET I/O           BLOCK I/O         PIDS \n8104c1fcc730   ragflow-server   1079.35%   10.49GiB / 62.57GiB   16.76%    990MB / 420MB     5.42GB / 23.5MB   1267 \ne622c147d6e6   ragflow-minio    1.17%      527.9M",
          "created_at": "2025-06-06T08:19:21Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYour ARM-based system shows extremely high CPU usage for the ragflow-server container, which matches known issues with RAGFlow's document parsing being very CPU-intensive—especially for tasks like OCR and layout analysis. RAGFlow is only officially supported on x86 CPUs and NVIDIA GP",
          "created_at": "2025-06-06T08:22:55Z"
        },
        {
          "author": "earlBell",
          "body": " \n\n> Your ARM-based system shows extremely high CPU usage for the ragflow-server container, which matches known issues with RAGFlow's document parsing being very CPU-intensive—especially for tasks like OCR and layout analysis. RAGFlow is only officially supported on x86 CPUs and NVIDIA GPUs; while i",
          "created_at": "2025-06-06T08:44:04Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nHere are a few more remedies you can try for ARM performance in RAGFlow:\n\n- Use the \"native\" parsing method instead of \"deepdoc\" if you don't need image recognition—this is much more resource-efficient and can significantly reduce CPU/memory usage on ARM systems [(source)](https://gi",
          "created_at": "2025-06-06T08:47:28Z"
        }
      ]
    },
    {
      "issue_number": 8147,
      "title": "[Question]: How to configure different LLM models for the agent",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI am implementing a web program that requests the RAGFlow agent via an HTTP API. I want the agent to switch the model from QWEN to deepseek R1 when the user clicks the \"Deep Thinking\" button, so that the context can be shared in the same session, but I don't know how to achieve this functionality using the existing agent component. Does anyone have a good idea about this?",
      "state": "open",
      "author": "ysay-d",
      "author_type": "User",
      "created_at": "2025-06-09T12:21:27Z",
      "updated_at": "2025-06-10T03:34:07Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8147/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8147",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8147",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:33.283541",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @ysay-d! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nYou can switch LLM models for the same agent and session in RAGFlow by specifying the desired model in your API request. Use the model parameter in your HTTP request body, and for",
          "created_at": "2025-06-09T12:24:51Z"
        },
        {
          "author": "KevinHuSh",
          "body": "There's no feasible way for this feature through API for the time being.",
          "created_at": "2025-06-10T03:34:07Z"
        }
      ]
    },
    {
      "issue_number": 7732,
      "title": "[Bug]: Thrift Connection Error During Batch File Parsing - Frontend Refresh Fails (Connection refused)",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nRelease v0.18.0 created from 94181a9\n\n### RAGFlow image version\n\nv0.18.0\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\n我使用代码按批次解析未解析的文件\n```python\nimport time\nfrom ragflow_sdk import RAGFlow\nAPI_KEY = \"ragflow-*****\"\nBASE_URL = \"http://ip:80\" \nrag_object = RAGFlow(api_key=API_KEY, base_url=BASE_URL)\ndataset = rag_object.list_datasets(name=\"janes\")[0]\nall_docs = dataset.list_documents(page_size= 22000)\nall_ids = [doc.id for doc in all_docs]\nprint(all_docs)\nprint(f\"共获取到 {len(all_ids)} 个文档，准备分批进行解析...\")\nunparsed_docs = [doc for doc in all_docs if doc.run != \"DONE\"]\nprint(f\"共有 {len(unparsed_docs)} 个文档尚未解析。\")\nBATCH_SIZE = 10\nWAIT_TIMEOUT = 600 \nCHECK_INTERVAL = 5 \ndef wait_for_batch_finish(documents, timeout=WAIT_TIMEOUT, check_interval=CHECK_INTERVAL):\n    start_time = time.time()\n    remaining_docs = {doc.id: doc.name for doc in documents}\n    print(\"remaining_docs\",remaining_docs)\n    while time.time() - start_time < timeout and remaining_docs:\n        print(f\"⏳ 正在检查 {len(remaining_docs)} 个文档是否完成解析...\")\n        for doc_id in list(remaining_docs.keys()):\n            print(doc_id)\n            # doc_status = dataset.list_documents(id=doc_id).run\n            # result = dataset.list_documents(id=doc_id)\n            doc_status = dataset.list_documents(id=doc_id)[0].run\n            if doc_status == \"DONE\":\n                print(f\"✅ 解析完成: {remaining_docs[doc_id]}\")\n                del remaining_docs[doc_id]\n            elif doc_status == \"FAIL\":\n                print(f\"⚠️ 解析失败（跳过）: {remaining_docs[doc_id]}\")\n                del remaining_docs[doc_id]\n            else:\n                print(f\"⌛ 等待中: {remaining_docs[doc_id]}（状态: {doc_status}）\")\n\n        if remaining_docs:\n            time.sleep(check_interval)\n    if remaining_docs:\n        print(f\"⚠️ 超时！仍有 {len(remaining_docs)} 个文档未完成：\")\n        for doc_id in remaining_docs:\n            print(f\" - {remaining_docs[doc_id]}\")\n    else:\n        print(\"🎉 本批全部文档解析完成。\")\nfor i in range(0, len(unparsed_docs), BATCH_SIZE):\n    batch = unparsed_docs[i:i + BATCH_SIZE]\n    ids = [doc.id for doc in batch]\n\n    print(f\"\\n🚀 启动第 {i // BATCH_SIZE + 1} 批解析，共 {len(ids)} 个文档...\")\n    dataset.async_parse_documents(ids)\n\n    # 等待当前批次完成再继续\n    wait_for_batch_finish(batch)\n\nprint(\"\\n✅ 所有文档解析流程结束。\")\n```\n在批量解析文件过程中，当尝试刷新前端或查看解析完成的文件详情时，系统抛出 Thrift 连接异常，导致:\n\n无法打开已解析文件的详情\n\n无法继续后续文件解析\n\n服务端连接被拒绝 (192.168.64.2:23817)\n代码提示报错\n```bash\nTraceback (most recent call last):\n  File \"D:\\code\\新建文件夹\\LLM-server\\ragflow\\parse_md.py\", line 63, in <module>\n    dataset.async_parse_documents(ids)\n  File \"D:\\anaconda\\envs\\py312\\Lib\\site-packages\\ragflow_sdk\\modules\\dataset.py\", line 88, in async_parse_documents\n    raise Exception(res.get(\"message\"))\nException: TTransportException(\"Could not connect to any of [('192.168.64.2', 23817)]\")\n```\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\n上传大量文件，然后按批次解析，解析过程中刷新前端，查看文件解析块\n```\n\n### Additional information\n\nragflow-server报错：\n\n```bash\nTraceback (most recent call last):\n  File \"/ragflow/.venv/lib/python3.10/site-packages/infinity/remote_thrift/client.py\", line 115, in wrapper\n    ret = func(self, *args, **kwargs)\n  File \"/ragflow/.venv/lib/python3.10/site-packages/infinity/remote_thrift/client.py\", line 162, in get_database\n    return self.client.GetDatabase(GetDatabaseRequest(session_id=self.session_id,\n  File \"/ragflow/.venv/lib/python3.10/site-packages/infinity/remote_thrift/infinity_thrift_rpc/InfinityService.py\", line 1173, in GetDatabase\n    return self.recv_GetDatabase()\n  File \"/ragflow/.venv/lib/python3.10/site-packages/infinity/remote_thrift/infinity_thrift_rpc/InfinityService.py\", line 1185, in recv_GetDatabase\n    (fname, mtype, rseqid) = iprot.readMessageBegin()\n  File \"/ragflow/.venv/lib/python3.10/site-packages/thrift/protocol/TBinaryProtocol.py\", line 134, in readMessageBegin\n    sz = self.readI32()\n  File \"/ragflow/.venv/lib/python3.10/site-packages/thrift/protocol/TBinaryProtocol.py\", line 217, in readI32\n    buff = self.trans.readAll(4)\n  File \"/ragflow/.venv/lib/python3.10/site-packages/thrift/transport/TTransport.py\", line 62, in readAll\n    chunk = self.read(sz - have)\n  File \"/ragflow/.venv/lib/python3.10/site-packages/thrift/transport/TTransport.py\", line 164, in read\n    self.__rbuf = BufferIO(self.__trans.read(max(sz, self.__rbuf_size)))\n  File \"/ragflow/.venv/lib/python3.10/site-packages/thrift/transport/TSocket.py\", line 169, in read\n    raise TTransportException(type=TTransportException.END_OF_FILE,\nthrift.transport.TTransport.TTransportException: TSocket read 0 bytes\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/ragflow/.venv/lib/python3.10/site-packages/thrift/transport/TSocket.py\", line 140, in open\n    handle.connect(sockaddr)\nConnectionRefusedError: [Errno 111] Connection refused\n2025-05-20 14:28:18,829 INFO     20 Could not connect to ('192.168.64.2', 23817)\nTraceback (most recent call last):\n  File \"/ragflow/.venv/lib/python3.10/site-packages/infinity/remote_thrift/client.py\", line 115, in wrapper\n    ret = func(self, *args, **kwargs)\n  File \"/ragflow/.venv/lib/python3.10/site-packages/infinity/remote_thrift/client.py\", line 162, in get_database\n    return self.client.GetDatabase(GetDatabaseRequest(session_id=self.session_id,\n  File \"/ragflow/.venv/lib/python3.10/site-packages/infinity/remote_thrift/infinity_thrift_rpc/InfinityService.py\", line 1173, in GetDatabase\n    return self.recv_GetDatabase()\n  File \"/ragflow/.venv/lib/python3.10/site-packages/infinity/remote_thrift/infinity_thrift_rpc/InfinityService.py\", line 1185, in recv_GetDatabase\n    (fname, mtype, rseqid) = iprot.readMessageBegin()\n  File \"/ragflow/.venv/lib/python3.10/site-packages/thrift/protocol/TBinaryProtocol.py\", line 134, in readMessageBegin\n    sz = self.readI32()\n  File \"/ragflow/.venv/lib/python3.10/site-packages/thrift/protocol/TBinaryProtocol.py\", line 217, in readI32\n    buff = self.trans.readAll(4)\n  File \"/ragflow/.venv/lib/python3.10/site-packages/thrift/transport/TTransport.py\", line 62, in readAll\n    chunk = self.read(sz - have)\n  File \"/ragflow/.venv/lib/python3.10/site-packages/thrift/transport/TTransport.py\", line 164, in read\n    self.__rbuf = BufferIO(self.__trans.read(max(sz, self.__rbuf_size)))\n  File \"/ragflow/.venv/lib/python3.10/site-packages/thrift/transport/TSocket.py\", line 169, in read\n    raise TTransportException(type=TTransportException.END_OF_FILE,\nthrift.transport.TTransport.TTransportException: TSocket read 0 bytes\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/ragflow/.venv/lib/python3.10/site-packages/thrift/transport/TSocket.py\", line 140, in open\n    handle.connect(sockaddr)\nConnectionRefusedError: [Errno 111] Connection refused\n2025-05-20 14:28:18,832 ERROR    20 Could not connect to any of [('192.168.64.2', 23817)]\n2025-05-20 14:28:18,831 ERROR    20 Could not connect to any of [('192.168.64.2', 23817)]\n2025-05-20 14:28:18,833 ERROR    20 Could not connect to any of [('192.168.64.2', 23817)]\nTraceback (most recent call last):\n  File \"/ragflow/.venv/lib/python3.10/site-packages/infinity/remote_thrift/client.py\", line 115, in wrapper\n    ret = func(self, *args, **kwargs)\n  File \"/ragflow/.venv/lib/python3.10/site-packages/infinity/remote_thrift/client.py\", line 162, in get_database\n    return self.client.GetDatabase(GetDatabaseRequest(session_id=self.session_id,\n  File \"/ragflow/.venv/lib/python3.10/site-packages/infinity/remote_thrift/infinity_thrift_rpc/InfinityService.py\", line 1173, in GetDatabase\n    return self.recv_GetDatabase()\n  File \"/ragflow/.venv/lib/python3.10/site-packages/infinity/remote_thrift/infinity_thrift_rpc/InfinityService.py\", line 1185, in recv_GetDatabase\n    (fname, mtype, rseqid) = iprot.readMessageBegin()\n  File \"/ragflow/.venv/lib/python3.10/site-packages/thrift/protocol/TBinaryProtocol.py\", line 134, in readMessageBegin\n    sz = self.readI32()\n  File \"/ragflow/.venv/lib/python3.10/site-packages/thrift/protocol/TBinaryProtocol.py\", line 217, in readI32\n    buff = self.trans.readAll(4)\n  File \"/ragflow/.venv/lib/python3.10/site-packages/thrift/transport/TTransport.py\", line 62, in readAll\n    chunk = self.read(sz - have)\n  File \"/ragflow/.venv/lib/python3.10/site-packages/thrift/transport/TTransport.py\", line 164, in read\n    self.__rbuf = BufferIO(self.__trans.read(max(sz, self.__rbuf_size)))\n  File \"/ragflow/.venv/lib/python3.10/site-packages/thrift/transport/TSocket.py\", line 169, in read\n    raise TTransportException(type=TTransportException.END_OF_FILE,\nthrift.transport.TTransport.TTransportException: TSocket read 0 bytes\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/ragflow/api/apps/chunk_app.py\", line 62, in list_chunk\n    sres = settings.retrievaler.search(query, search.index_name(tenant_id), kb_ids, highlight=True)\n  File \"<@beartype(rag.nlp.search.Dealer.search) at 0x7f943c909fc0>\", line 95, in search\n  File \"/ragflow/rag/nlp/search.py\", line 97, in search\n    res = self.dataStore.search(src, [], filters, [], orderBy, offset, limit, idx_names, kb_ids)\n  File \"/ragflow/rag/utils/infinity_conn.py\", line 298, in search\n    db_instance = inf_conn.get_database(self.dbName)\n  File \"/ragflow/.venv/lib/python3.10/site-packages/infinity/remote_thrift/utils.py\", line 563, in wrapper\n    return func(*args, **kwargs)\n  File \"/ragflow/.venv/lib/python3.10/site-packages/infinity/remote_thrift/infinity.py\", line 89, in get_database\n    res = self._client.get_database(db_name)\n  File \"/ragflow/.venv/lib/python3.10/site-packages/infinity/remote_thrift/client.py\", line 120, in wrapper\n    self._reconnect()\n  File \"/ragflow/.venv/lib/python3.10/site-packages/infinity/remote_thrift/client.py\", line 72, in _reconnect\n    self.transport.open()\n  File \"/ragflow/.venv/lib/python3.10/site-packages/thrift/transport/TTransport.py\", line 155, in open\n    return self.__trans.open()\n  File \"/ragflow/.venv/lib/python3.10/site-packages/thrift/transport/TSocket.py\", line 149, in open\n    raise TTransportException(type=TTransportException.NOT_OPEN, message=msg)\nthrift.transport.TTransport.TTransportException: Could not connect to any of [('192.168.64.2', 23817)]\nException ignored in: <function RemoteThriftInfinityConnection.__del__ at 0x7f943c8f2cb0>\nTraceback (most recent call last):\n  File \"/ragflow/.venv/lib/python3.10/site-packages/infinity/remote_thrift/infinity.py\", line 36, in __del__\n    self.disconnect()\n  File \"/ragflow/.venv/lib/python3.10/site-packages/infinity/remote_thrift/infinity.py\", line 138, in disconnect\n    raise InfinityException(res.error_code, res.error_msg)\ninfinity.common.InfinityException: (<ErrorCode.CLIENT_CLOSE: 6003>, 'Transport not open')\n2025-05-20 14:28:18,835 WARNING  20 INFINITY indexExist Could not connect to any of [('192.168.64.2', 23817)]\nException ignored in: <function RemoteThriftInfinityConnection.__del__ at 0x7f943c8f2cb0>\nTraceback (most recent call last):\n  File \"/ragflow/.venv/lib/python3.10/site-packages/infinity/remote_thrift/infinity.py\", line 36, in __del__\n    self.disconnect()\n  File \"/ragflow/.venv/lib/python3.10/site-packages/infinity/remote_thrift/infinity.py\", line 138, in disconnect\n    raise InfinityException(res.error_code, res.error_msg)\ninfinity.common.InfinityException: (<ErrorCode.CLIENT_CLOSE: 6003>, 'Transport not open')\n```",
      "state": "open",
      "author": "shuai-dian",
      "author_type": "User",
      "created_at": "2025-05-20T06:47:06Z",
      "updated_at": "2025-06-10T03:14:31Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "♾️infinity"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7732/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7732",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7732",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:33.488610",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHello @shuai-dian! I'm here to help you with any bugs, questions, or contributions you might have while you wait for a human maintainer. Let's tackle this issue together!\n\n<!-- Answer -->\nTo resolve the 'Connection refused' error in Thrift services within the RAGFlow system, ensure",
          "created_at": "2025-05-20T06:50:57Z"
        },
        {
          "author": "99RRR",
          "body": "@shuai-dian @yingfeng @rantav @panzi 这个错误解决了吗？\n",
          "created_at": "2025-06-09T02:38:53Z"
        },
        {
          "author": "shuai-dian",
          "body": "@99RRR 没有解决，数据量大的时候也就出现,可以先换成es数据库",
          "created_at": "2025-06-10T02:10:42Z"
        }
      ]
    },
    {
      "issue_number": 8148,
      "title": "[Feature Request]: S3 bucket support to do authentication base on assume role",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\nIf I want to deploy Ragflow without S3 Ak/Sk configuration in the service conf yaml, currently it's impossible since [the code](https://github.com/infiniflow/ragflow/blob/8362ab4/rag/utils/s3_conn.py#L68-L71) was written with explicit ak / sk configuration to init S3 client.\n```\n\n### Describe the feature you'd like\n\nJust allow to set empty key and boto S3 client would try to use the role credential.\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "Colstuwjx",
      "author_type": "User",
      "created_at": "2025-06-09T12:28:31Z",
      "updated_at": "2025-06-10T02:50:08Z",
      "closed_at": "2025-06-10T02:50:08Z",
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8148/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8148",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8148",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:33.676277",
      "comments": [
        {
          "author": "sumansuhag",
          "body": "Hey Colstuwjx,\n\nThanks for bringing this up! It’s an important feature request.\n\nYou’re spot on about cloud deployments, especially for businesses. Using AWS IAM roles for S3 authentication is a key security measure and really helps with flexibility.\n\nWhen we require Access Key / Secret Key setups i",
          "created_at": "2025-06-09T15:43:11Z"
        }
      ]
    },
    {
      "issue_number": 8115,
      "title": "[Feature Request]: Add Webhook Component to RAGFlow Workflows",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\nYes. Currently, RAGFlow workflows can only be triggered manually or via API integration, which limits their usability in event-driven architectures. I'm often frustrated when trying to integrate RAGFlow into automated pipelines (e.g., user form submissions, chatbot messages, webhook events from external systems), because there’s no built-in way to trigger a flow execution from an external HTTP request.\n\nThis makes it harder to use RAGFlow as a drop-in component in real-time applications or low-code/no-code systems that rely heavily on webhook-based triggers (e.g., LangFlow, n8n, Zapier).\n```\n\n### Describe the feature you'd like\n\nI would like RAGFlow to support a **Webhook trigger component** that allows workflows to start automatically upon receiving an HTTP POST request.\n\nThis feature would include:\n\n* A **Webhook node** that can be added at the start of a flow, acting as the trigger.\n* The node exposes a **public or authenticated HTTP endpoint** (e.g., `/webhook/{flow_id}`).\n* When a POST request is made to this endpoint with a JSON payload, the workflow is executed using the data in the payload as input.\n* The payload should be accessible in downstream nodes (e.g., via `webhook_input` variable).\n* Optionally, support a **response node** to return output back to the sender.\n\nThis would enable event-driven workflows and external integration with systems like web apps, CRMs, chatbots, IoT, and automation tools (e.g., n8n, Zapier).\n\n\n\n### Describe implementation you've considered\n\nA possible implementation could follow the webhook trigger pattern used in tools like **LangFlow** and **n8n**, integrated into RAGFlow’s architecture as follows:\n\n* **Webhook Node UI**: Add a new \"Webhook\" trigger node to the visual editor. This node would be the starting point of the flow and define a unique webhook URL (e.g., `/api/webhook/<flow_id>`).\n\n* **FastAPI Integration**: Since RAGFlow uses FastAPI, the server can expose dynamic endpoints for enabled flows. When a POST request is received at the webhook endpoint, it would:\n\n  * Validate the request (optional: support API key or bearer token in headers)\n  * Parse the JSON payload\n  * Inject the payload as an input variable (`webhook_input`) into the flow's context\n\n* **Flow Execution**: Trigger the flow exactly as if it were started via the UI or CLI, using the provided input values from the webhook.\n\n* **Optional Response Node**: Support a terminal node that returns a JSON response from the flow, allowing webhook calls to return AI-generated answers or status codes.\n\n* **Deployment Consideration**:\n\n  * CLI flag to enable webhook serving (e.g., `ragflow run --with-webhook`)\n  * Alternatively, use `ragflow serve` mode to keep the webhook listener active in production.\n\nI’ve also considered leveraging existing webhook-capable components in open-source tools like LangChain’s agents or using middleware (e.g., NGINX or serverless functions) to proxy webhook requests to the RAGFlow engine, but native support would be far more efficient and developer-friendly.\n\n\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n### 📚 Use Cases & Scenarios\n\n1. **Chatbot Integration**\n   A company uses a chatbot on their website. When a user sends a message, the chatbot sends an HTTP POST to a RAGFlow webhook with the message text. The flow uses the message as input, runs retrieval + LLM generation, and returns an answer — all in real time.\n\n2. **Form Submission Automation**\n   A customer support form (e.g., via Typeform or a web app) submits questions. The webhook receives the POST request, extracts the form data, and runs a QA flow using the retrieved context. The response is emailed or logged in a CRM.\n\n3. **Low-Code / No-Code Integration**\n   Tools like **n8n**, **Zapier**, or **Make.com** can call RAGFlow via webhooks as part of automated pipelines (e.g., \"when a new file is uploaded to Dropbox, send it to RAGFlow for summarization\").\n\n4. **Slack / Discord Bots**\n   A bot command (e.g., `/askdoc <question>`) triggers a webhook to RAGFlow with the question. The flow processes the query against internal documents and responds via the bot.\n\n5. **IoT or Event Processing**\n   External events (e.g., sensors, logs, alerts) send data to RAGFlow for classification, anomaly detection, or text generation using local knowledge bases.\n\n---\n\n### 🛠 API Design (Mock)\n\n**Webhook Endpoint**\n\n```http\nPOST /api/webhook/my_rag_flow\nContent-Type: application/json\nAuthorization: Bearer <optional_token>\n\n{\n  \"user_id\": \"123\",\n  \"query\": \"What is the return policy?\"\n}\n```\n\n**Inside RAGFlow**\n\n* Input mapped to variable: `webhook_input.query`\n* Used by nodes downstream (e.g., retrieval or prompt construction)\n* Flow returns structured JSON if `Response Node` is used\n\n**Example Output**\n\n```json\n{\n  \"answer\": \"Our return policy allows returns within 30 days...\",\n  \"source_documents\": [\"returns_policy.pdf\"]\n}\n```\n\n---\n\n### 📘 Documentation Ideas\n\n* Add section: `Triggers → Webhooks`\n* Include:\n\n  * Setup instructions\n  * Example flow using webhook trigger\n  * Payload structure\n  * Auth/security configuration\n  * Response handling\n\n---\n\n### 💡 Adoption & Benefits\n\n* Enables **serverless and headless deployments**\n* Makes RAGFlow usable in **enterprise workflows** and **real-time applications**\n* Brings RAGFlow to parity with **LangFlow**, **n8n**, and other modern tools\n* Encourages building reusable flows triggered by common events\n\n\n### **Additional information**\n\n* **Similar Implementations for Reference**:\n\n  * **LangFlow** – Includes a \"Webhook\" component that allows flows to be triggered via HTTP POST. Example: [[LangFlow GitHub Webhook Node](https://github.com/logspace-ai/langflow)](https://github.com/logspace-ai/langflow).\n  * **n8n** – Allows webhook-based triggers with custom payload handling, authentication, and response mapping.\n  * **Zapier Webhooks** – Very widely adopted model that supports dynamic data inputs and outputs.\n\n* **Security Considerations**:\n\n  * Recommend optional **API Key** or **Bearer Token** authentication for each webhook endpoint.\n  * Option to define IP allowlist or rate limiting.\n\n* **Scalability**:\n\n  * Should support lightweight async execution to allow handling multiple simultaneous webhook calls.\n  * Ideally compatible with FastAPI’s async handlers and background task execution.\n\n* **Design Note**:\n\n  * Consider modularizing the webhook trigger mechanism so it could later be reused for other trigger types (e.g., cron-based, file upload, queue-based).\n\n* **Future Expansion**:\n\n  * Support for **GET** requests with URL query parameters (for integrations that don’t support POST).\n  * **Webhook + Response Node** pattern, enabling flows that send responses directly via HTTP with minimal boilerplate.\n",
      "state": "open",
      "author": "gooran",
      "author_type": "User",
      "created_at": "2025-06-06T13:09:04Z",
      "updated_at": "2025-06-10T02:44:41Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8115/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8115",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8115",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:33.840206",
      "comments": [
        {
          "author": "voycey",
          "body": "Great call! I have so far had to create my own middleware to this!",
          "created_at": "2025-06-07T09:24:49Z"
        },
        {
          "author": "ZhenhangTung",
          "body": "@voycey @gooran Really appreciate your feedback. Will definitely discuss this feature with the team. ",
          "created_at": "2025-06-10T02:44:40Z"
        }
      ]
    },
    {
      "issue_number": 4683,
      "title": "[Bug]: During local embedding，RAGFlow is sending too much text at once, exceeding the model's maximum token limit, causing the model to be unable to fully read the input.",
      "body": "### Is there an existing issue for the same bug?\n\n- [x] I have checked the existing issues.\n\n### RAGFlow workspace code commit ID\n\nmain\n\n### RAGFlow image version\n\nv0.15.1,nightly\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nWhen employing embedding models with a lower 'maximum input token' capacity，models such as bge-large and conan-embedding-v1 are limited to a maximum input of 512 tokens. When using these models for embedding, RAGFlow sends more than 512 tokens at once, ollama will encounter an error.\nI've found the cause of the error here：[https://github.com/ollama/ollama/issues/7288#issuecomment-2591709109](url)\nAlthough I can adjust the maximum input limit of the model in ollama, it will cause RAGFlow's text to be truncated, resulting in incomplete embeddings.Additionally, I'm unable to locate a setting within RAGFlow to control the maximum input for the embedding model.\n\nWhen adding a model, the max token setting controls the maximum output, not the input, which doesn't apply to embedding models.\n![Image](https://github.com/user-attachments/assets/c7776696-0ef2-432d-95af-a9dccd155705)\n\nThe same issue of an ineffective max token option also exists when adding reranker models.\n\n![Image](https://github.com/user-attachments/assets/8e2a4b78-36d5-4714-88e4-e1759f4feb00)\n\n\n\n### Expected behavior\n\nPlease add a setting to RAGFlow to control the maximum number of tokens sent to the embedding model per request, and also fix the bug where the max token limit is ineffective when adding reranker models.\n\n### Steps to reproduce\n\n```Markdown\nUsing the bge-large:latest model in ollama, if the embedding is performed with a method other than 'general' (I am using 'book'), and the token count goes over 512, an error occurs and the embedding is terminated.\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "XTFG",
      "author_type": "User",
      "created_at": "2025-01-30T12:16:41Z",
      "updated_at": "2025-06-10T02:11:41Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 14,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/4683/reactions",
        "total_count": 4,
        "+1": 4,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/4683",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/4683",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:34.042776",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "What about reducing chunk token size in chunking method settings?\n\n![Image](https://github.com/user-attachments/assets/a9bb593d-1d54-4de0-8f5c-536817d33f2b)\n\nBut it will not slice text apart from the middle of text to ruin the semantics, which is meaningless to embedding.",
          "created_at": "2025-02-01T13:07:58Z"
        },
        {
          "author": "XTFG",
          "body": "> 在分块方法设置中减小块令牌大小怎么样？\n> \n> ![Image](https://github.com/user-attachments/assets/a9bb593d-1d54-4de0-8f5c-536817d33f2b)\n> \n> 但它不会将文本从文本中间切开以破坏语义，这对嵌入毫无意义。\n\nYou know, some parsing methods, like QA, resume, manual, table, paper, laws, book, presentation, one, cannot manually set the Chunk token number.\n\n",
          "created_at": "2025-02-01T14:06:13Z"
        },
        {
          "author": "KevinHuSh",
          "body": "We did not depends embedding a lot since its limitation of long text semantics representation.",
          "created_at": "2025-02-03T02:15:45Z"
        },
        {
          "author": "XTFG",
          "body": "Could you please tell me what the significance of the 'max output tokens' setting is for embedding and rerank models?\n\n![Image](https://github.com/user-attachments/assets/a5c0c64c-ba68-4586-8159-e9fb75fdfd33)\n\n![Image](https://github.com/user-attachments/assets/0c8b677f-2468-449c-b836-ddbf65a38e11)",
          "created_at": "2025-02-03T02:37:43Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Sometimes, if the input is too long, the serving of embedding reports error directly without automatically truncating.",
          "created_at": "2025-02-05T02:06:34Z"
        }
      ]
    },
    {
      "issue_number": 4527,
      "title": "[Feature Request]:  More manageable UI for datasets and agents.",
      "body": "### Is there an existing issue for the same feature request?\n\n- [x] I have checked the existing issues.\n\n### Is your feature request related to a problem?\n\n```Markdown\nI have created a lot of knowledge bases, about 40, and a lot of agents. The current UI makes my management very confusing.```\n\n### Describe the feature you'd like\n\nKnowledge base and Agent support functions similar to file management:\n\n1. Support creating folders to group content\n\n2. Support renaming, moving grouping, etc. of basic elements\n\n...\n\nSome simple management functions, similar to those in the File Management module\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "TeslaZY",
      "author_type": "User",
      "created_at": "2025-01-17T16:30:43Z",
      "updated_at": "2025-06-09T17:24:29Z",
      "closed_at": "2025-06-09T17:24:28Z",
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/4527/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/4527",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/4527",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:39.284389",
      "comments": [
        {
          "author": "JinHai-CN",
          "body": "We intend to create an international community, so we encourage using English for communication.",
          "created_at": "2025-01-18T04:35:28Z"
        },
        {
          "author": "BadwomanCraZY",
          "body": "Sorry for the late reply, and thank you so much for your valuable feedback on RAGFlow! 🙏\n\nWe’re currently in the process of redesigning the knowledge base and agent UI, so please stay tuned for the upcoming version! 🎨✨\n\nOnce again, thank you for your ongoing support of RAGFlow. We’d love to hear any",
          "created_at": "2025-05-13T02:31:14Z"
        }
      ]
    },
    {
      "issue_number": 4521,
      "title": "[Feature Request]: Agent supports global memory",
      "body": "### Is there an existing issue for the same feature request?\n\n- [x] I have checked the existing issues.\n\n### Is your feature request related to a problem?\n\n```Markdown\nIf Agent uses the Category node, it will sometimes divide the user's questions into different categories, but in fact, the two problems are contextual. For example, the first question requires agent to recommend a product. After interacting with llm, llm prompts you to need more information, such as the usage scenario of the product. At this time, if I directly reply to the use scenario name, Category will divide the scene name and the first question \"recommend a product\" into two categories. Then the agent will follow different flow branches and make memory switching, which is different from the previous tag.\n```\n\n### Describe the feature you'd like\n\nWe can consider adding the global agent memory to support better problem classification, question answer and other scenario performance, and avoid the context conversion problems caused by the switching branch caused by Category. Agents should always behave like the same person for a session, instead of looking like schizophrenic now.\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n```Markdown\n- Add the global agent memory \n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "TeslaZY",
      "author_type": "User",
      "created_at": "2025-01-17T10:28:13Z",
      "updated_at": "2025-06-09T17:23:54Z",
      "closed_at": "2025-06-09T17:23:54Z",
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/4521/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "KevinHuSh"
      ],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/4521",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/4521",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:39.546445",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "We typically use multiple `categorizes` which represents like a tree. The `scene name` is on sub-tree of the `recommend a product` node .",
          "created_at": "2025-01-17T11:00:33Z"
        },
        {
          "author": "TeslaZY",
          "body": "In some cases, it is not suitable to use sub-tree.\n\n[I hope the agent can divide the two problems into one category according to the context]\n\nUser: Recommend me a GPU\n\nAgent: Please tell me the GPU usage scenario you need.\n\nUser: machine learning\n\nAgent: return {the product information of machine l",
          "created_at": "2025-01-17T16:18:20Z"
        },
        {
          "author": "BadwomanCraZY",
          "body": "It looks like your issue has been resolved! 🎉 Thanks so much for your attention and contribution to RAGFlow. If possible, could you please close the issue at your convenience. If not, no worries – we’ll close it in 7 days as part of our routine clean-up. 🔄\nThanks again, we really appreciate your sup",
          "created_at": "2025-05-12T08:51:02Z"
        }
      ]
    },
    {
      "issue_number": 8142,
      "title": "[Bug]: Can't find chat_id in the frontend",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nd9b98cb\n\n### RAGFlow image version\n\nv0.19.0\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nWhen sending HTTP request, `chat_id` is a required parameter, which can be copied directly in an older version (see #8129).\n\nI think we are using `dialogId` now. If so, documentation should be updated.\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nNone\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "kowyo",
      "author_type": "User",
      "created_at": "2025-06-09T09:58:33Z",
      "updated_at": "2025-06-09T10:00:51Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8142/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8142",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8142",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:39.752033",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYou're correct—recent frontend code uses `dialogId` as the main identifier for chat and dialog operations, and `chat_id` is no longer present in the active UI or chat logic. `chat_id` still appears in some backend-related interfaces and for compatibility, but all user-facing and stat",
          "created_at": "2025-06-09T10:00:51Z"
        }
      ]
    },
    {
      "issue_number": 7900,
      "title": "[Feature Request]:Support for Knowledgebases Export and Import",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\nPlease support knowledgebase export and import！！！\n```\n\n### Describe the feature you'd like\n\nI found that I can't backup and merge my bases when I need to migrate one or more knowledgebases. I suggest that this mode may support uploaded files and OCRed chunks or maybe consider include knowledge graph to pack up to .tar/.zip files that we can avoid the need to export the whole docker volume every time.\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "Zaxy2022",
      "author_type": "User",
      "created_at": "2025-05-28T02:13:14Z",
      "updated_at": "2025-06-09T09:38:36Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7900/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7900",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7900",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:39.937511",
      "comments": [
        {
          "author": "ZhenhangTung",
          "body": "@Zaxy2022 Thanks for raising it. I totally get your point. Will discuss with the eng team to see if there is any solution. Can't promise right now.",
          "created_at": "2025-05-28T04:23:26Z"
        },
        {
          "author": "ZhenhangTung",
          "body": "@Zaxy2022 could you update the title?",
          "created_at": "2025-05-28T04:28:36Z"
        },
        {
          "author": "Zaxy2022",
          "body": "> [@Zaxy2022](https://github.com/Zaxy2022) could you update the title?\nThanks for the heads-up! I’ve updated the title as recommended. Really appreciate you keeping an eye on this.\n",
          "created_at": "2025-06-09T09:38:35Z"
        }
      ]
    },
    {
      "issue_number": 8049,
      "title": "[Question]: Code component read timeout",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nEvery time I run a code component, a timeout error occurs, even with the default component. I've checked Docker configurations: services start normally (logs confirm), containers are Up and healthy, ports are mapped correctly (e.g., 0.0.0.0:9385->9385/tcp). DNS resolution (nslookup, ping) and port connectivity (telnet) work, yet timeouts persist. @duso\n\nError coede:\nError: Internal error in sanbox: HTTPConnectionPool(host='sandbox-executor-manager', port=9385): Read timed out. (read timeout=10).\n\n![Image](https://github.com/user-attachments/assets/bbf7835f-4804-4906-b717-05c642c2886c)\n\n![Image](https://github.com/user-attachments/assets/bd778441-5d9a-4c5a-ac0d-aae3944b5fc8)",
      "state": "closed",
      "author": "SpongeKim666",
      "author_type": "User",
      "created_at": "2025-06-04T08:41:45Z",
      "updated_at": "2025-06-09T09:36:33Z",
      "closed_at": "2025-06-09T09:36:33Z",
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8049/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8049",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8049",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:40.125400",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYour timeout error—`HTTPConnectionPool(host='sandbox-executor-manager', port=9385): Read timed out. (read timeout=10)`—is likely caused by the sandbox-executor-manager service not responding within the default 10-second timeout window. This timeout is configurable and managed by the ",
          "created_at": "2025-06-04T08:44:13Z"
        },
        {
          "author": "yongtenglei",
          "body": "Did you execute the following commands?\n```bash\ndocker pull infiniflow/sandbox-base-nodejs:latest\ndocker pull infiniflow/sandbox-base-python:latest\n```\n\nMay I see the output of `docker ps`, `docker logs -f sandbox-executor-manager`? Or `docker logs -f ragflow-sandbox-executor-manager` in case there ",
          "created_at": "2025-06-04T10:12:31Z"
        },
        {
          "author": "SpongeKim666",
          "body": "> Did you execute the following commands?\n> \n> docker pull infiniflow/sandbox-base-nodejs:latest\n> docker pull infiniflow/sandbox-base-python:latest\n> May I see the output of `docker ps`, `docker logs -f sandbox-executor-manager`? Or `docker logs -f ragflow-sandbox-executor-manager` in case there is",
          "created_at": "2025-06-05T01:24:38Z"
        },
        {
          "author": "yongtenglei",
          "body": "I see... You didn't install the [gVisor](https://gvisor.dev/docs/user_guide/install/), see [README](https://github.com/infiniflow/ragflow#-prerequisites) and [sandbox](https://github.com/infiniflow/ragflow/tree/main/sandbox#-quick-start).",
          "created_at": "2025-06-05T01:39:01Z"
        }
      ]
    },
    {
      "issue_number": 8043,
      "title": "[Question]: official online demo - openai api style access - local certificate issues",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nhi folks,\n\nwhen i use openai api to access the online demo https://demo.ragflow.io/, \n\ni encounter this issue / problem,\n\n`httpx.ConnectError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1000)`\n\ndoes anyone can give any cues to fix this problem?\n\n\nthanks.",
      "state": "closed",
      "author": "chuanmingliu",
      "author_type": "User",
      "created_at": "2025-06-04T04:03:54Z",
      "updated_at": "2025-06-09T09:16:17Z",
      "closed_at": "2025-06-09T09:16:17Z",
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8043/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8043",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8043",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:40.396003",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe error `httpx.ConnectError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1000)` means your client cannot verify the SSL certificate presented by https://demo.ragflow.io/. This usually happens if your system is missing t",
          "created_at": "2025-06-04T04:11:43Z"
        },
        {
          "author": "chuanmingliu",
          "body": "> The error `httpx.ConnectError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1000)` means your client cannot verify the SSL certificate presented by https://demo.ragflow.io/. This usually happens if your system is missing the required ro",
          "created_at": "2025-06-04T05:05:58Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYou've already run the “Install Certificates.command” script on macOS, but the SSL certificate verification error persists when accessing https://demo.ragflow.io/. Based on all available information, there are no RAGFlow-specific settings or recent changes that would affect SSL verif",
          "created_at": "2025-06-04T05:12:31Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Demo site is not available for API invocation yet.",
          "created_at": "2025-06-04T06:04:48Z"
        },
        {
          "author": "chuanmingliu",
          "body": "> Demo site is not available for API invocation yet.\n\nok. thanks for your reply. i will turn to a local deployment solution.",
          "created_at": "2025-06-09T09:16:14Z"
        }
      ]
    },
    {
      "issue_number": 8085,
      "title": "[Question]: Get real images from pdf",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI would like to know whether RagFlow can extract all the images from a PDF document, such as a manual, as separate files (without needing to extract text from them). Then, when I ask a question on the chat page, if the answer involves these images, can they be retrieved and displayed as part of the response?",
      "state": "open",
      "author": "shuhang",
      "author_type": "User",
      "created_at": "2025-06-05T09:03:01Z",
      "updated_at": "2025-06-09T08:39:19Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question",
        "💞 feature"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8085/reactions",
        "total_count": 2,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 1
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8085",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8085",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:40.600756",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @shuhang! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nRAGFlow can extract images from PDF documents as separate files using its PDF parser, which leverages the `pdfplumber` library to rasterize each page and save them as images ([so",
          "created_at": "2025-06-05T09:05:04Z"
        },
        {
          "author": "shuhang",
          "body": "@dosu Thank you for the reply. I understand that RagFlow saves each page of the PDF as an image, but that's not what I meant. What I meant is that the PDF itself contains some original images in addition to text. What I hope is that during PDF parsing, these original images are not parsed as part of",
          "created_at": "2025-06-06T00:55:52Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nRAGFlow does not currently support extracting the original embedded images from a PDF (such as JPEGs or PNGs stored natively in the file) as separate files with indexes. Its PDF parser rasterizes each page visually and can crop out regions (like figures or tables) from these page ima",
          "created_at": "2025-06-06T00:58:04Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Yes, they can. Figures in PDFs are extracted  and saved separately, with corresponding indexes.",
          "created_at": "2025-06-06T08:35:42Z"
        },
        {
          "author": "shuhang",
          "body": "@KevinHuSh  Thank you for your response. So how should I proceed? I previously tried it, but the images in my PDF were not extracted, and I didn’t see them stored in MinIO either. Also, I noticed that in the Elasticsearch index, the images field for each chunk is just a string. If the images were tr",
          "created_at": "2025-06-09T01:00:44Z"
        }
      ]
    },
    {
      "issue_number": 8128,
      "title": "[Question]: Is ragflow support parsing excel with images?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI try to parsing excel with images, but I found the chunks do not contains those images. Is ragflow support parsing excel with images now?",
      "state": "closed",
      "author": "Poisky",
      "author_type": "User",
      "created_at": "2025-06-09T02:59:38Z",
      "updated_at": "2025-06-09T08:11:34Z",
      "closed_at": "2025-06-09T08:11:34Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8128/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8128",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8128",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:40.802011",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @Poisky! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nRAGFlow does not currently support parsing images from Excel files. The Excel parser in RAGFlow focuses on extracting cell data (text, numbers, tables) and does not include functi",
          "created_at": "2025-06-09T03:01:43Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Not yet.",
          "created_at": "2025-06-09T08:02:14Z"
        }
      ]
    },
    {
      "issue_number": 7936,
      "title": "[Feature Request]: When can the agent support the invocation of MCP services?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\nWhen can the agent support the invocation of MCP services?\n```\n\n### Describe the feature you'd like\n\nWhen can the agent support the invocation of MCP services?\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "1006076811",
      "author_type": "User",
      "created_at": "2025-05-29T03:32:06Z",
      "updated_at": "2025-06-09T07:41:51Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7936/reactions",
        "total_count": 3,
        "+1": 3,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7936",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7936",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:40.969705",
      "comments": [
        {
          "author": "ZhenhangTung",
          "body": "@1006076811 Most likely will be v0.20 or v0.21.",
          "created_at": "2025-06-03T12:44:53Z"
        }
      ]
    },
    {
      "issue_number": 7959,
      "title": "[Feature Request]: The construction of the knowledge graph is extremely slow. How can I check its progress?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\nThe construction of the knowledge graph is extremely slow. How can I check its progress? In the process of building a knowledge graph, if the construction is stopped due to failure or other unexpected events and needs to be rebuilt, can it support resuming construction from breakpoint? Looking forward to your reply.\n```\n\n### Describe the feature you'd like\n\nThe progress display of the knowledge graph shows that the knowledge graph supports resuming construction from breakpoint without having to start building from scratch.\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "zhugh2333",
      "author_type": "User",
      "created_at": "2025-05-29T12:55:06Z",
      "updated_at": "2025-06-09T07:37:01Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 18,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7959/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7959",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7959",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:41.172731",
      "comments": [
        {
          "author": "zhugh2333",
          "body": "@dosubot",
          "created_at": "2025-05-29T12:58:07Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYou can monitor the progress of knowledge graph construction in RAGFlow through the system's internal progress tracking. The codebase uses a progress callback mechanism to update the progress of tasks like knowledge graph construction, and the TaskService manages progress updates and",
          "created_at": "2025-05-29T12:59:37Z"
        },
        {
          "author": "zhugh2333",
          "body": "Need to know the progress of knowledge graph construction? How exactly can one check its construction progress. @dosubot",
          "created_at": "2025-05-29T13:01:43Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYou can check the progress of knowledge graph construction in RAGFlow by using its internal task tracking system. Progress is managed by the TaskService class, which records updates for each processing step (such as parsing, embedding, entity extraction, and merging). Each task maint",
          "created_at": "2025-05-29T13:03:03Z"
        },
        {
          "author": "zhugh2333",
          "body": "What about the specific instructions? Or which log should I specifically refer to? Could you elaborate on how to operate it",
          "created_at": "2025-05-29T13:04:25Z"
        }
      ]
    },
    {
      "issue_number": 8134,
      "title": "[Bug]: 向量数据库报错",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n.....\n\n### RAGFlow image version\n\nv0.19\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\n使用ragflow创建的知识库，第一次用知识图谱-实体归一化功能，解析太长。关闭归一化功能后再解析。使用知识库就报错：\n报错： 03:22:07.731] [344] [critical] Txn ID: 1, Text: ForceCheckpointTask, Begin TS: 31400, Commit TS: 31401, State: Committed Checkpoint: catalog path: catalog/FULL.31399.json max commit ts: 31399 is full checkpoint: 1 ForceCheckpointTask [03:22:07.731] [344] [critical] Txn ID: 18, Text: Full or delta checkpoint, Begin TS: 31402, Commit TS: 31403, State: Committed Checkpoint: catalog path: catalog/FULL.31401.json max commit ts: 31401 is full checkpoint: 1 [03:22:07.731] [344] [critical] Txn ID: 33, Text: Full or delta checkpoint, Begin TS: 31404, Commit TS: 31405, State: Committed Checkpoint: catalog path: catalog/FULL.31403.json max commit ts: 31403 is full checkpoint: 1 [03:22:07.731] [344] [critical] Txn ID: 54, Text: Full or delta checkpoint, Begin TS: 31406, Commit TS: 31407, State: Committed Checkpoint: catalog path: catalog/FULL.31405.json max commit ts: 31405 is full checkpoint: 1 [03:22:07.731] [344] [critical] Txn ID: 68, Text: Select Statement, Begin TS: 31408, Commit TS: 0, State: Started [03:22:07.731] [344] [critical] Error: SEGMENT FAULTS [03:22:07.731] [344] [critical] 0, /usr/bin/infinity(+0x4e0629) [0x558eb33db629] [03:22:07.731] [344] [critical] 1, /usr/bin/infinity(+0x22fdfb) [0x558eb312adfb] [03:22:07.731] [344] [critical] 2, /lib/x86_64-linux-gnu/libc.so.6(+0x42520) [0x7f53d41c3520] [03:22:07.731] [344] [critical] 3, /lib/x86_64-linux-gnu/libc.so.6(abort+0x178) [0x7f53d41a9898] [03:22:07.731] [344] [critical] 4, /usr/bin/infinity(+0x22fcfa) [0x558eb312acfa] [03:22:07.731] [344] [critical] 5, /usr/bin/infinity(+0x1e0d383) [0x558eb4d08383] [03:22:07.731] [344] [critical] 6, /usr/bin/infinity(+0x1e0f7e6) [0x558eb4d0a7e6] [03:22:07.731] [344] [critical] 7, /usr/bin/infinity(+0x1e0f7d0) [0x558eb4d0a7d0] [03:22:07.731] [344] [critical] 8, /usr/bin/infinity(+0x4e1500) [0x558eb33dc500] [03:22:07.731] [344] [critical] 9, /usr/bin/infinity(+0x13b3e6c) [0x558eb42aee6c] [03:22:07.731] [344] [critical] 10, /usr/bin/infinity(+0x60ad70) [0x558eb3505d70] [03:22:07.731] [344] [critical] 11, /usr/bin/infinity(+0x2be8f8) [0x558eb31b98f8] [03:22:07.731] [344] [critical] 12, /usr/bin/infinity(+0x2c1e63) [0x558eb31bce63] [03:22:07.731] [344] [critical] 13, /lib/x86_64-linux-gnu/libc.so.6(+0x94ac3) [0x7f53d4215ac3] [03:22:07.731] [344] [critical] 14, /lib/x86_64-linux-gnu/libc.so.6(clone+0x44) [0x7f53d42a6a04] [03:22:07.740] [344] [info] Periodic trigger stop ...\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\n使用ragflow创建的知识库，第一次用知识图谱-实体归一化功能，解析太长。关闭归一化功能后再解析。使用知识库就报错：\n报错： 03:22:07.731] [344] [critical] Txn ID: 1, Text: ForceCheckpointTask, Begin TS: 31400, Commit TS: 31401, State: Committed Checkpoint: catalog path: catalog/FULL.31399.json max commit ts: 31399 is full checkpoint: 1 ForceCheckpointTask [03:22:07.731] [344] [critical] Txn ID: 18, Text: Full or delta checkpoint, Begin TS: 31402, Commit TS: 31403, State: Committed Checkpoint: catalog path: catalog/FULL.31401.json max commit ts: 31401 is full checkpoint: 1 [03:22:07.731] [344] [critical] Txn ID: 33, Text: Full or delta checkpoint, Begin TS: 31404, Commit TS: 31405, State: Committed Checkpoint: catalog path: catalog/FULL.31403.json max commit ts: 31403 is full checkpoint: 1 [03:22:07.731] [344] [critical] Txn ID: 54, Text: Full or delta checkpoint, Begin TS: 31406, Commit TS: 31407, State: Committed Checkpoint: catalog path: catalog/FULL.31405.json max commit ts: 31405 is full checkpoint: 1 [03:22:07.731] [344] [critical] Txn ID: 68, Text: Select Statement, Begin TS: 31408, Commit TS: 0, State: Started [03:22:07.731] [344] [critical] Error: SEGMENT FAULTS [03:22:07.731] [344] [critical] 0, /usr/bin/infinity(+0x4e0629) [0x558eb33db629] [03:22:07.731] [344] [critical] 1, /usr/bin/infinity(+0x22fdfb) [0x558eb312adfb] [03:22:07.731] [344] [critical] 2, /lib/x86_64-linux-gnu/libc.so.6(+0x42520) [0x7f53d41c3520] [03:22:07.731] [344] [critical] 3, /lib/x86_64-linux-gnu/libc.so.6(abort+0x178) [0x7f53d41a9898] [03:22:07.731] [344] [critical] 4, /usr/bin/infinity(+0x22fcfa) [0x558eb312acfa] [03:22:07.731] [344] [critical] 5, /usr/bin/infinity(+0x1e0d383) [0x558eb4d08383] [03:22:07.731] [344] [critical] 6, /usr/bin/infinity(+0x1e0f7e6) [0x558eb4d0a7e6] [03:22:07.731] [344] [critical] 7, /usr/bin/infinity(+0x1e0f7d0) [0x558eb4d0a7d0] [03:22:07.731] [344] [critical] 8, /usr/bin/infinity(+0x4e1500) [0x558eb33dc500] [03:22:07.731] [344] [critical] 9, /usr/bin/infinity(+0x13b3e6c) [0x558eb42aee6c] [03:22:07.731] [344] [critical] 10, /usr/bin/infinity(+0x60ad70) [0x558eb3505d70] [03:22:07.731] [344] [critical] 11, /usr/bin/infinity(+0x2be8f8) [0x558eb31b98f8] [03:22:07.731] [344] [critical] 12, /usr/bin/infinity(+0x2c1e63) [0x558eb31bce63] [03:22:07.731] [344] [critical] 13, /lib/x86_64-linux-gnu/libc.so.6(+0x94ac3) [0x7f53d4215ac3] [03:22:07.731] [344] [critical] 14, /lib/x86_64-linux-gnu/libc.so.6(clone+0x44) [0x7f53d42a6a04] [03:22:07.740] [344] [info] Periodic trigger stop ...\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "yuenoble",
      "author_type": "User",
      "created_at": "2025-06-09T05:18:15Z",
      "updated_at": "2025-06-09T07:28:05Z",
      "closed_at": "2025-06-09T07:28:05Z",
      "labels": [
        "🐞 bug",
        "♾️infinity"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8134/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8134",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8134",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:41.509538",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @yuenoble! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThis segmentation fault is likely caused by issues in the underlying native libraries used for graph processing and embedding (such as graspologic or numpy), especially when han",
          "created_at": "2025-06-09T05:20:42Z"
        }
      ]
    },
    {
      "issue_number": 8127,
      "title": "[Bug]: Search Result Reference Links Not Working",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nnone\n\n### RAGFlow image version\n\nnone\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nWhen clicking on reference links in search results, the document viewer fails to load the original document content. The links appear to be clickable but result in file loading errors.\n1. User performs a search and gets results with reference links\n2. Clicking on a reference link to view the original document\n3. Document viewer fails to load the content\n4. User sees an error instead of the document content\n\n### Expected behavior\n\n1. User performs a search and gets results with reference links\n2. Clicking on a reference link should:\n   - Open the document viewer\n   - Load the original document content\n   - Display the document in the appropriate viewer (PDF, Word, etc.)\n   - Show the correct section of the document where the reference was found\n\n### Steps to reproduce\n\n```Markdown\n1. Perform a search in the application\n2. Find a search result with a reference link\n3. Click on the reference link\n4. Observe that the document viewer fails to load the content\n5. Checking browser developer tools has found: SyntaxError: Unexpected token 'd', \"data\":{\"cod\" ... is not valid JSON. in logic-hooks.ts, line 236.\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "mateng-matt",
      "author_type": "User",
      "created_at": "2025-06-09T02:24:09Z",
      "updated_at": "2025-06-09T02:41:40Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8127/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8127",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8127",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:41.751792",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThere are a few known causes for reference links in RAGFlow search results not working. First, make sure your Dialog configuration has the do_refer field set to 1—this is required for reference links to function properly. If the referenced document has been moved or deleted from the ",
          "created_at": "2025-06-09T02:26:47Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Only reviewing of PDF is supported yet.",
          "created_at": "2025-06-09T02:41:39Z"
        }
      ]
    },
    {
      "issue_number": 8126,
      "title": "[Question]: Builder error when running command \"docker build --platform linux/amd64 --build-arg LIGHTEN=1 --build-arg NEED_MIRROR=1 -f Dockerfile -t infiniflow/ragflow:nightly-slim .\"",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nWhen I build a Docker image without embedding models or including embedding models, an error occured.\n\n![Image](https://github.com/user-attachments/assets/7dc7e71e-2a42-42d5-a14b-33cb022cd90a)",
      "state": "open",
      "author": "neal-davis",
      "author_type": "User",
      "created_at": "2025-06-09T02:20:17Z",
      "updated_at": "2025-06-09T02:37:02Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8126/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8126",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8126",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:41.956849",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYour Docker build error is likely related to connectivity issues with the PyPI mirror set by the `NEED_MIRROR=1` argument. This can cause failures if the mirror is down or unreachable from your environment. To troubleshoot:\n\n- Try building with `NEED_MIRROR=0` to use the default PyPI",
          "created_at": "2025-06-09T02:22:22Z"
        },
        {
          "author": "KevinHuSh",
          "body": "It seemed network issue.",
          "created_at": "2025-06-09T02:37:01Z"
        }
      ]
    },
    {
      "issue_number": 8096,
      "title": "[Bug]: BlockingIOError: [Errno 11] write could not complete without blocking",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nN/A\n\n### RAGFlow image version\n\nv0.19.0-slim\n\n### Other environment information\n\n```Markdown\nRAGFlow deployed using Docker on Debian 12. No changes made to any of the containers.\nUsing a NVIDIA RTX A4000 GPU\n8xCPU 192GB RAM\nSSD in RAID 1\n```\n\n### Actual behavior\n\nDocument indexing of knowledge base works well until knowledge graph is enabled.  With knowledge graph enabled, ragflow-server logs show the following error:\n\nTraceback (most recent call last):\n  File \"/usr/lib/python3.10/logging/__init__.py\", line 1103, in emit\n    stream.write(msg + self.terminator)\nBlockingIOError: [Errno 11] write could not complete without blocking\nCall stack:\n  File \"/ragflow/rag/svr/task_executor.py\", line 755, in <module>\n    trio.run(main)\n  File \"/ragflow/.venv/lib/python3.10/site-packages/trio/_core/_run.py\", line 2412, in run\n    timeout = gen.send(next_send)\n  File \"/ragflow/.venv/lib/python3.10/site-packages/trio/_core/_run.py\", line 2743, in unrolled_run\n    msg = task.context.run(next_send_fn, next_send)\n  File \"/ragflow/rag/svr/task_executor.py\", line 663, in report_status\n    logging.info(f\"{CONSUMER_NAME} reported heartbeat: {heartbeat}\")\n\nAnd, looks like the knowledge graph is not created and the system jumps to the next document to index.\n\n### Expected behavior\n\nNo error and the knowledge graph created.\n\n### Steps to reproduce\n\n```Markdown\n- Create a new knowledge base\n- Set chunking method to \"One\"\n- Enable \"Extract Knowledge Graph\"\n- Select \"General\" as method\n- Enable \"Entity Resolution\" and \"Community Reports Generation\"\n- Upload documents to the knowledge base (I am using the API)\n- Start indexing documents (I am using the API)\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "AndreC10002",
      "author_type": "User",
      "created_at": "2025-06-06T00:11:05Z",
      "updated_at": "2025-06-08T23:39:36Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8096/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8096",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8096",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:42.180223",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @AndreC10002! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThe BlockingIOError you’re seeing is triggered by the logging operation in task_executor.py when the knowledge graph feature is enabled. This happens because the logging stre",
          "created_at": "2025-06-06T00:13:59Z"
        },
        {
          "author": "AndreC10002",
          "body": "@dosu Thank you for the prompt response.  What I just noticed is that the process is trying over and over again to work in one specific file. It fails with that error message and starts over, and fails again, in a never ending loop.\nThe file it is processing is a simple 455 bytes US English ASCII-on",
          "created_at": "2025-06-06T00:31:24Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe BlockingIOError is coming from the logging system, but it’s tightly linked to knowledge graph creation because the error interrupts async tasks that build the graph. In RAGFlow, logging (like logging.info in task_executor.py) runs inside async code (using trio), and if the log st",
          "created_at": "2025-06-06T00:34:26Z"
        },
        {
          "author": "Woody-Hu",
          "body": "Hi @AndreC10002, I thinkit  should be due to some reason that when handling graph task, the executor been crashed, so the task executor do not has a chance to acknowledge the task.\nIs there other logs?",
          "created_at": "2025-06-08T23:39:35Z"
        }
      ]
    },
    {
      "issue_number": 491,
      "title": "[Question]: Do you have plan to support other vector databases?",
      "body": "### Describe your problem\n\nNoticed now the backend is coupling with ElasticSearch.\r\nDo you have plan to support some other vector stores, such as Pinecone, Milvus, etc.?",
      "state": "open",
      "author": "shaoyie",
      "author_type": "User",
      "created_at": "2024-04-22T09:44:05Z",
      "updated_at": "2025-06-08T23:23:20Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 10,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/491/reactions",
        "total_count": 6,
        "+1": 6,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/491",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/491",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:42.400176",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "Do these support hybrid search like weighted vector similarity and keyword similarity?\r\nI don't think they do.",
          "created_at": "2024-04-23T00:22:54Z"
        },
        {
          "author": "jlcbj",
          "body": "Milvus 2.4 support hybrid search",
          "created_at": "2024-04-25T03:14:34Z"
        },
        {
          "author": "KevinHuSh",
          "body": "> Milvus 2.4 support hybrid search\r\n\r\nCan Milvus  support text similarity calculation such as BM25 and TFIDF?",
          "created_at": "2024-04-28T06:04:55Z"
        },
        {
          "author": "jlcbj",
          "body": "https://milvus.io/docs/embed-with-bm25.md",
          "created_at": "2024-04-29T07:23:32Z"
        },
        {
          "author": "Nuclear6",
          "body": "I feel that the latest vector database is better than the currently used hybrid retrieval. Everyone has updated and iterated to the ANN algorithm, and the ragflow project is still using the KNN algorithm.",
          "created_at": "2024-05-14T03:38:17Z"
        }
      ]
    },
    {
      "issue_number": 3178,
      "title": "[Feature Request] Backup/Export and Restore/Import of KnowledgeBase and Agents.",
      "body": "### Discussed in https://github.com/orgs/infiniflow/discussions/3163\r\n\r\n<div type='discussions-op-text'>\r\n\r\n<sup>Originally posted by **sbmandava** November  2, 2024</sup>\r\nRequirement : Ability to Backup/Export and Restore/Import Agent Workflows or Share Workflows on a new system.\r\n\r\nWhy ?\r\n\r\n- Allows us to do Version Control on the Flow Changes. (Right now anything can be changed)\r\n- Seperate Development from Production Usage. So we can tweak workflows in Dev Environment Test, Verify and then export it Production and reconnect it to production Knowledge Bases.\r\n- Backup and Restore Method of these specific components : KnowledgeBase and Agents (so they can redeploy on new system and make minor tweaks to get it production ready)\r\n</div>",
      "state": "open",
      "author": "KevinHuSh",
      "author_type": "User",
      "created_at": "2024-11-04T05:54:18Z",
      "updated_at": "2025-06-08T15:00:19Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/3178/reactions",
        "total_count": 7,
        "+1": 6,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 1,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/3178",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/3178",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:42.590650",
      "comments": [
        {
          "author": "HugoChaan",
          "body": "This is a very important feature. I hope you can put it on the agenda as soon as possible!🙏🙏🙏",
          "created_at": "2025-04-24T06:00:46Z"
        },
        {
          "author": "ZhenhangTung",
          "body": "Also related: https://github.com/infiniflow/ragflow/issues/7269",
          "created_at": "2025-04-25T09:18:08Z"
        },
        {
          "author": "ZhenhangTung",
          "body": "@HugoChaan Why is it very important to you and your team? Can you explain more to us so we can better understand your use cases to help us prioritizing features. ",
          "created_at": "2025-04-25T09:20:25Z"
        },
        {
          "author": "joergkoch",
          "body": "It is also important for us, uses cases are:\n\n- automatic deployment process / pipeline from test to production\n- manaual exchange agents between developers or different environments\n- Secure business continuity: Export and backup agents for desaster recovery situations",
          "created_at": "2025-05-16T08:45:37Z"
        },
        {
          "author": "ZhenhangTung",
          "body": "@joergkoch Thanks for the sharing. Is there any use case for the knowledge base module in your company? ",
          "created_at": "2025-05-16T09:27:59Z"
        }
      ]
    },
    {
      "issue_number": 8120,
      "title": "[Bug]: \"Duplicate column names detected \" error needs to raise original duplicate column names",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n5825a24  \n\n### RAGFlow image version\n\n5825a24  \n\n### Other environment information\n\n```Markdown\nubuntu20.04\nAMD cpu\n```\n\n### Actual behavior\n\nwhen worksheet has duplicate column names, task_executor will raise the de-duplicated names by `raise ValueError(f\"Duplicate column names detected: {set(duplicates)}\")`, which is not intuitive for fast error localization.\n\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\n1. parsing xlsx file in the dev mode\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "HaiyangPeng",
      "author_type": "User",
      "created_at": "2025-06-08T13:46:29Z",
      "updated_at": "2025-06-08T13:46:29Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8120/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8120",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8120",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:42.782739",
      "comments": []
    },
    {
      "issue_number": 8117,
      "title": "[Question]: Technical Specifications of Ragflow's Data Capacity and Key Considerations",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nWhat is the maximum data volume that Ragflow can handle, and what are the critical considerations?\nFor example, in a RAG project, can the single-machine version of Ragflow support queries on 200GB of vector data?",
      "state": "open",
      "author": "ipa2800",
      "author_type": "User",
      "created_at": "2025-06-07T02:22:56Z",
      "updated_at": "2025-06-08T02:37:24Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8117/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8117",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8117",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:42.782753",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @ipa2800! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nRagflow does not impose a software-level limit on total data volume—it can handle very large datasets (even 100TB+) by scaling backend components like Elasticsearch and MinIO nod",
          "created_at": "2025-06-07T02:26:32Z"
        },
        {
          "author": "ipa2800",
          "body": "I understand that infrastructure components like Elasticsearch and MinIO are the bottlenecks of the entire system's processing capacity. I'd like to know if there are any relevant case studies or performance test reports under large data volumes. This would significantly boost our confidence in usin",
          "created_at": "2025-06-08T02:37:24Z"
        }
      ]
    },
    {
      "issue_number": 8118,
      "title": "[Bug]: launching service from source encounters error",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n5825a24\n\n### RAGFlow image version\n\n5825a24\n\n### Other environment information\n\n```Markdown\nubuntu20.04\nAMD CPU\n```\n\n### Actual behavior\n\nI follow the README.md guideline and encounter error after running `npm run dev`. The commands before this were run without error. The error details are as follows:\n```\n\n> dev\n> cross-env UMI_DEV_SERVER_COMPRESS=none umi dev\n\ninfo  - [你知道吗？] 请求加载态、数据管理、避免竟态问题，用 react-query 帮你全部解决，详见 https://umijs.org/docs/max/react-query\ninfo  - Umi v4.2.3\ninfo  - Preparing...\ninfo  - [icons] no icons was found\nfatal - Error: ENOSPC: System limit for number of file watchers reached, watch 'xxx/ragflow/web/src/components/copy-to-clipboard.tsx'\n    at FSWatcher.<computed> (node:internal/fs/watchers:247:19)\n    at Object.watch (node:fs:2550:36)\n    at createFsWatchInstance (xxx/ragflow/web/node_modules/chokidar/lib/nodefs-handler.js:119:15)\n    at setFsWatchListener (xxx/ragflow/web/node_modules/chokidar/lib/nodefs-handler.js:166:15)\n    at NodeFsHandler._watchWithNodeFs (xxx/ragflow/web/node_modules/chokidar/lib/nodefs-handler.js:331:14)\n    at NodeFsHandler._handleFile (xxx/ragflow/web/node_modules/chokidar/lib/nodefs-handler.js:395:23)\n    at NodeFsHandler._addToNodeFs (xxx/ragflow/web/node_modules/chokidar/lib/nodefs-handler.js:637:21) {\n  errno: -28,\n  syscall: 'watch',\n  code: 'ENOSPC',\n  path: 'xxx/ragflow/web/src/components/copy-to-clipboard.tsx',\n  filename: 'xxx/ragflow/web/src/components/copy-to-clipboard.tsx'\n}\nfatal - A complete log of this run can be found in:\nfatal - xxx/ragflow/web/node_modules/.cache/logger/umi.log\nfatal - Consider reporting a GitHub issue on https://github.com/umijs/umi/issues\n```\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\n1.uv sync --python 3.10 --all-extras\n2.uv run download_deps.py\n3.docker compose -f docker/docker-compose-base.yml up -d\n4.bash docker/launch_backend_service.sh\n5.cd web &&   npm install\n6.npm run dev\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "HaiyangPeng",
      "author_type": "User",
      "created_at": "2025-06-07T12:38:52Z",
      "updated_at": "2025-06-07T13:04:48Z",
      "closed_at": "2025-06-07T13:04:48Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8118/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8118",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8118",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:42.994984",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe ENOSPC error happens because your system has hit the limit for the number of file watchers, which is common on Linux when running development servers that watch many files (like with umi/chokidar). This isn't specific to RAGFlow—it's an environment/system setting.\n\nTo fix it on U",
          "created_at": "2025-06-07T12:42:10Z"
        },
        {
          "author": "HaiyangPeng",
          "body": "> The ENOSPC error happens because your system has hit the limit for the number of file watchers, which is common on Linux when running development servers that watch many files (like with umi/chokidar). This isn't specific to RAGFlow—it's an environment/system setting.\n> \n> To fix it on Ubuntu 20.0",
          "created_at": "2025-06-07T13:04:45Z"
        }
      ]
    },
    {
      "issue_number": 8110,
      "title": "[Bug]: pyicu installation failure on ubuntu os via v sync --python 3.10 --all-extras",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n7ed9efc  \n\n### RAGFlow image version\n\n7ed9efc  \n\n### Other environment information\n\n```Markdown\nubuntu 20.04\nAMD cpu\n```\n\n### Actual behavior\n\nAfter I run the `v sync --python 3.10 --all-extras` command on ubuntu os, the following error occurs:\n```\n        self._finalize_license_expression()\n      unicodeset.cpp: In function ‘int t_unicodesetiterator_init(t_unicodesetiterator*, PyObject*, PyObject*)’:\n      unicodeset.cpp:1334:31: error: ‘class icu_66::UnicodeSetIterator’ has no member named ‘skipToStrings’\n       1334 |                 self->object->skipToStrings();\n            |                               ^~~~~~~~~~~~~\n      error: command '/usr/bin/c++' failed with exit code 1\n\n      hint: This usually indicates a problem with the package or the build environment.\n  help: `pyicu` (v2.15) was included because `ragflow` (v0.19.0) depends on `pyicu`\n```\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nstep1: activate python3.10 env\nstep2: run `sudo apt-get install libicu-dev pkg-config`\nstep3: run `uv sync --python 3.10 --all-extras`\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "HaiyangPeng",
      "author_type": "User",
      "created_at": "2025-06-06T10:55:41Z",
      "updated_at": "2025-06-07T09:35:33Z",
      "closed_at": "2025-06-07T09:33:33Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8110/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8110",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8110",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:43.227305",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @HaiyangPeng! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThe error is caused by a mismatch between the version of the ICU library installed on your system and the version expected by PyICU. Specifically, the `skipToStrings` method ",
          "created_at": "2025-06-06T11:10:31Z"
        },
        {
          "author": "voycey",
          "body": "For those having this same issue on Mac since 15.2 upgrade:\n\n1. install macports\n2. `/opt/local/bin/port search pyicu` and install the one matching the python version you used with uv\n3. remove xcode and re-install\n4. rerun `uv sync`",
          "created_at": "2025-06-07T09:27:01Z"
        },
        {
          "author": "HaiyangPeng",
          "body": "> Hi [@HaiyangPeng](https://github.com/HaiyangPeng)! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n> \n> The error is caused by a mismatch between the version of the ICU library installed on your system and the version expected by PyICU. Specifically, the `skipToStrings` m",
          "created_at": "2025-06-07T09:33:23Z"
        },
        {
          "author": "HaiyangPeng",
          "body": "> For those having this same issue on Mac since 15.2 upgrade:\n> \n>     1. install macports\n> \n>     2. `/opt/local/bin/port search pyicu` and install the one matching the python version you used with uv\n> \n>     3. remove xcode and re-install\n> \n>     4. rerun `uv sync`\n\nThanks for your help and I h",
          "created_at": "2025-06-07T09:35:32Z"
        }
      ]
    },
    {
      "issue_number": 2133,
      "title": "[Question]: How to disable public registration?",
      "body": "### Describe your problem\n\nI installed ragflow on cloud so need to disable public registration. Want to avoid someone finding my instance and being able to log in. Is there a way to do that? Even with code, any solution and help appreciated please!",
      "state": "open",
      "author": "Gluepower",
      "author_type": "User",
      "created_at": "2024-08-28T06:33:28Z",
      "updated_at": "2025-06-07T08:29:11Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 9,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/2133/reactions",
        "total_count": 9,
        "+1": 9,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/2133",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/2133",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:43.430105",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "You need to change code of front end to disable registration.\r\nUse keyword 'sign up' to find the code in folder 'web', comment out them.\r\nCompile the code using npm build.",
          "created_at": "2024-08-28T06:47:24Z"
        },
        {
          "author": "chminsc",
          "body": "hope add this future on coming version",
          "created_at": "2025-02-11T23:31:22Z"
        },
        {
          "author": "cyk-git",
          "body": "使用Nginx反向代理拒绝掉 /v1/user/register 的访问就可以禁止用户注册\n具体来说，使用这样的conf文件启动Nginx反向代理，就可以实现将原本的默认使用80端口访问服务变成使用18888端口访问服务，同时没有办法进行注册\nYou can block user registration by denying access to /v1/user/register via an Nginx reverse proxy. You can use a Nginx configuration file like the one below. \n```conf\nserver {\n  ",
          "created_at": "2025-02-16T09:21:18Z"
        },
        {
          "author": "chminsc",
          "body": "> hope add this future on coming version\n\ngood job.\nbut are there any other protocols, apis should be banned for security reasons?",
          "created_at": "2025-02-16T13:26:01Z"
        },
        {
          "author": "Marchccc",
          "body": "```\nlocation /v1/user/register {\n  deny all;\n  return 403;\n}\n\nlocation / {\n  allow all;\n  proxy_pass http://localhost:80;\n  proxy_set_header Host $http_host;\n  proxy_set_header Cookie $http_cookie;\n  proxy_set_header X-Real-IP $remote_addr;\n  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_f",
          "created_at": "2025-02-26T09:54:28Z"
        }
      ]
    },
    {
      "issue_number": 5355,
      "title": "[Bug]: Queuing task to parse documents when other already parsing Kbs are deleted",
      "body": "### Is there an existing issue for the same bug?\n\n- [x] I have checked the existing issues.\n\n### RAGFlow workspace code commit ID\n\n...\n\n### RAGFlow image version\n\nv0.16.0\n\n### Other environment information\n\n```Markdown\nI am working on an AWS virtual enviroment using ragflow via containers.\n```\n\n### Actual behavior\n\nWhen an already started to parse knowledge base is deleted and the parsing is not fully completed, the next documents you start to parse will be queued, assuming you have parse tasks left, even if you already deleted the knowledge base. My solution to this has been to restart my machine, but this has to be fixed. \n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nStart parsing documents in a knowledge base and delete it when some documents are still parsing, then create a new one and when you try to parse the new documents they will be queued.\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "Unaiideko",
      "author_type": "User",
      "created_at": "2025-02-25T14:00:09Z",
      "updated_at": "2025-06-06T22:05:43Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/5355/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/5355",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/5355",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:43.605159",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "That deleting KBs will stop all the involved parsing tasks has not been supported yet.",
          "created_at": "2025-02-26T03:00:22Z"
        },
        {
          "author": "Unaiideko",
          "body": "Okay, thank you for the response, I will handle it myself and I am willing to see this implemented in a near future, text me if so.",
          "created_at": "2025-02-26T09:00:35Z"
        },
        {
          "author": "AndreC10002",
          "body": "Having a similar issue. I had a knowledge base with 30k documents and indexing was running. I've decided the documents should be formatted differently so the knowledge base was deleted, but the system keeps trying to process the tasks.  Logs messages look like these:\n\n2025-06-06 22:00:28,166 WARNING",
          "created_at": "2025-06-06T22:05:42Z"
        }
      ]
    },
    {
      "issue_number": 7322,
      "title": "[Feature Request]: Begin component takes a variable so I cannot embed it into a webpage, but translation agent needs to get user's input",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n\nAs https://ragflow.io/docs/dev/begin_component says,\n\n> If your agent's Begin component takes a variable, you cannot embed it into a webpage.\n\nBut for a translation agent, the Begin component needs to take the variable like uploaded file, so it can't be into a webpage.\n\n\n### Describe the feature you'd like\n\nI hope to publish a translation agent that my customer can use without logging into ragflow.\n\nBut the current Begin component in translation agent prevents me from embedding it into a webpage, which means I can not \"publish\" it.\n\n### Describe implementation you've considered\n\nMaybe add a component can take user input, then the Begin component connects to it and it connects to the generate component in translation\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "qiulang",
      "author_type": "User",
      "created_at": "2025-04-25T10:07:24Z",
      "updated_at": "2025-06-06T13:19:27Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 10,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7322/reactions",
        "total_count": 3,
        "+1": 3,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7322",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7322",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:43.774349",
      "comments": [
        {
          "author": "SharkByte-Pray",
          "body": "I also need this feature, and I completely agree with your opinion. I hope the official website can implement this feature as soon as possible.",
          "created_at": "2025-04-27T08:17:41Z"
        },
        {
          "author": "which-W",
          "body": "@qiulang @SharkByte-Pray \n\nThank you for your questions about our products!\n\nI will feed back your request to our technical team. We are currently redesigning and developing workflow components. Thank you for your support and understanding!",
          "created_at": "2025-04-28T10:51:48Z"
        },
        {
          "author": "ZhenhangTung",
          "body": "Related issue https://github.com/infiniflow/ragflow/issues/7291 by @SharkByte-Pray  ",
          "created_at": "2025-05-07T03:03:22Z"
        },
        {
          "author": "qiulang",
          "body": "@ZhenhangTung @which-W I opened [an issue](https://github.com/infiniflow/ragflow/issues/4921) in Feb, finally it got attention. lol\n\nThanks!",
          "created_at": "2025-05-07T03:31:17Z"
        },
        {
          "author": "ZhenhangTung",
          "body": "@qiulang I'm now working on it.",
          "created_at": "2025-05-09T03:01:35Z"
        }
      ]
    },
    {
      "issue_number": 8097,
      "title": "[Bug]: QWenCV failed to extract text from structured streaming responses",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nd0db329f\n\n### RAGFlow image version\n\nlatest\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nQWenCV failed to properly extract the text field from structured responses in streaming multimodal conversations, resulting in incorrect output formatting.\n\n![Image](https://github.com/user-attachments/assets/93cdc4a9-cfa5-4eeb-9ba6-923288276cbf)\n\n### Expected behavior\n\nchanging\nresp.output.choices[0]['message']['content']\nto:\nresp.output.choices[0]['message']['content'][0][\"text\"]\nboth chat and chat_streamly\n\n### Steps to reproduce\n\n```Markdown\nUsing qwen-vl-plus for conversation\n```\n\n### Additional information\n\n\"**ERROR**: 'list' object has no attribute 'endswith'\"",
      "state": "closed",
      "author": "yuehong136",
      "author_type": "User",
      "created_at": "2025-06-06T02:37:06Z",
      "updated_at": "2025-06-06T09:55:14Z",
      "closed_at": "2025-06-06T09:55:14Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8097/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8097",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8097",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:43.944720",
      "comments": []
    },
    {
      "issue_number": 5250,
      "title": "[Bug]: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.",
      "body": "### Is there an existing issue for the same bug?\n\n- [x] I have checked the existing issues.\n\n### RAGFlow workspace code commit ID\n\nv0.16.0\n\n### RAGFlow image version\n\nv0.16.0\n\n### Other environment information\n\n```Markdown\nubuntu 24\n```\n\n### Actual behavior\n\n2025-02-22 12:43:05,987 WARNING  21 RedisDB.queue_info rag_flow_svr_queue got exception: no such key\n2025-02-22 12:43:05,987 INFO     21 task_consumer_0 reported heartbeat: {\"name\": \"task_consumer_0\", \"now\": \"2025-02-22T12:43:05.986+08:00\", \"boot_at\": \"2025-02-22T12:26:35.095+08:00\", \"pending\": 0, \"lag\": 0, \"done\": 0, \"failed\": 0, \"current\": null}\n2025-02-22 12:43:27,779 ERROR    19 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.\nTraceback (most recent call last):\n  File \"/ragflow/.venv/lib/python3.10/site-packages/flask/app.py\", line 880, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"/ragflow/.venv/lib/python3.10/site-packages/flask/app.py\", line 854, in dispatch_request\n    self.raise_routing_exception(req)\n  File \"/ragflow/.venv/lib/python3.10/site-packages/flask/app.py\", line 463, in raise_routing_exception\n    raise request.routing_exception  # type: ignore[misc]\n  File \"/ragflow/.venv/lib/python3.10/site-packages/flask/ctx.py\", line 362, in match_request\n    result = self.url_adapter.match(return_rule=True)  # type: ignore\n  File \"/ragflow/.venv/lib/python3.10/site-packages/werkzeug/routing/map.py\", line 629, in match\n    raise NotFound() from None\nwerkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.\n2025-02-22 12:43:27,780 INFO     19 223.99.217.210 - - [22/Feb/2025 12:43:27] \"GET / HTTP/1.1\" 200 -\n2025-02-22 12:43:27,869 ERROR    19 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.\nTraceback (most recent call last):\n  File \"/ragflow/.venv/lib/python3.10/site-packages/flask/app.py\", line 880, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"/ragflow/.venv/lib/python3.10/site-packages/flask/app.py\", line 854, in dispatch_request\n    self.raise_routing_exception(req)\n  File \"/ragflow/.venv/lib/python3.10/site-packages/flask/app.py\", line 463, in raise_routing_exception\n    raise request.routing_exception  # type: ignore[misc]\n  File \"/ragflow/.venv/lib/python3.10/site-packages/flask/ctx.py\", line 362, in match_request\n    result = self.url_adapter.match(return_rule=True)  # type: ignore\n  File \"/ragflow/.venv/lib/python3.10/site-packages/werkzeug/routing/map.py\", line 629, in match\n    raise NotFound() from None\nwerkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.\n2025-02-22 12:43:27,869 INFO     19 223.99.217.210 - - [22/Feb/2025 12:43:27] \"GET /favicon.ico HTTP/1.1\" 200 -\n2025-02-22 12:43:36,015 WARNING  21 RedisDB.queue_info rag_flow_svr_queue got exception: no such key\n2025-02-22 12:43:36,016 INFO     21 task_consumer_0 reported heartbeat: {\"name\": \"task_consumer_0\", \"now\": \"2025-02-22T12:43:36.015+08:00\", \"boot_at\": \"2025-02-22T12:26:35.095+08:00\", \"pending\": 0, \"lag\": 0, \"done\": 0, \"failed\": 0, \"current\": null}\n2025-02-22 12:44:06,017 WARNING  21 RedisDB.queue_info rag_flow_svr_queue got exception: no such key\n2025-02-22 12:44:06,017 INFO     21 task_consumer_0 reported heartbeat: {\"name\": \"task_consumer_0\", \"now\": \"2025-02-22T12:44:06.016+08:00\", \"boot_at\": \"2025-02-22T12:26:35.095+08:00\", \"pending\": 0, \"lag\": 0, \"done\": 0, \"failed\": 0, \"current\": null}\n2025-02-22 12:44:36,048 WARNING  21 RedisDB.queue_info rag_flow_svr_queue got exception: no such key\n2025-02-22 12:44:36,049 INFO     21 task_consumer_0 reported heartbeat: {\"name\": \"task_consumer_0\", \"now\": \"2025-02-22T12:44:36.047+08:00\", \"boot_at\": \"2025-02-22T12:26:35.095+08:00\", \"pending\": 0, \"lag\": 0, \"done\": 0, \"failed\": 0, \"current\": null}\n2025-02-22 12:45:06,079 WARNING  21 RedisDB.queue_info rag_flow_svr_queue got exception: no such key\n2025-02-22 12:45:06,080 INFO     21 task_consumer_0 reported heartbeat: {\"name\": \"task_consumer_0\", \"now\": \"2025-02-22T12:45:06.079+08:00\", \"boot_at\": \"2025-02-22T12:26:35.095+08:00\", \"pending\": 0, \"lag\": 0, \"done\": 0, \"failed\": 0, \"current\": null}\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\naccess the index page\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "chenggangqcg",
      "author_type": "User",
      "created_at": "2025-02-22T04:45:56Z",
      "updated_at": "2025-06-06T09:21:40Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 17,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/5250/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/5250",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/5250",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:43.944743",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "What's the URL you entered?",
          "created_at": "2025-02-24T03:02:18Z"
        },
        {
          "author": "kandaaaaa",
          "body": "@KevinHuSh Just logon `http://<ip>:9380` will get the issue and show below in browser\n```\n{\n  \"code\": 100,\n  \"data\": null,\n  \"message\": \"\\u003CNotFound '404: Not Found'\\u003E\"\n}\n```\nand the container log \n```\n2025-02-24 11:18:10,193 INFO     17 172.31.35.99 - - [24/Feb/2025 11:18:10] \"GET / HTTP/1.1",
          "created_at": "2025-02-24T03:20:36Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Strip the port number.",
          "created_at": "2025-02-24T05:00:49Z"
        },
        {
          "author": "hpx502766238",
          "body": "> Strip the port number.\n\n😂",
          "created_at": "2025-02-26T12:16:16Z"
        },
        {
          "author": "goldeneave",
          "body": "I have the same problem, and I see the infos on my terminal, and I tried strip the port and port 9222 9380 and some other ports mentioned in the other posts, there seems no other errors, how could solve the problem",
          "created_at": "2025-02-27T10:55:46Z"
        }
      ]
    },
    {
      "issue_number": 8070,
      "title": "[Bug]: when stream=false，new message without sessionid does no",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nec60b32\n\n### RAGFlow image version\n\n a4f2952 full\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nwhen stream=false,session_id is not set, as following:\ncurl --request POST \\\n     --url http://{address}/api/v1/chats/{chat_id}/completions \\\n     --header 'Content-Type: application/json' \\\n     --header 'Authorization: Bearer <YOUR_API_KEY>' \\\n     --data-binary '\n     {\n          \"question\": \"Who are you\",\n          \"stream\": false,\n         }'\nget event stream response as following:\n {code=0, data=data:{\"code\": 0, \"message\": \"\", \"data\": {\"answer\": \"Hi! I'm your assistant, what can I do for you?\", \"reference\": {}, \"audio_binary\": null, \"id\": null, \"session_id\": \"f3f601ae411f0b5920242ac120006\"}}\n\n}\n\n\n### Expected behavior\n\nget json style response,not event stream.\n\ncheck the code, the reason is  that:   conversation_service.py \nin case of “not session_id”，it does not check stream mode, always return event stream response!!!!!!\n\ndef completion(tenant_id, chat_id, question, name=\"New session\", session_id=None, stream=True, **kwargs):\n    assert name, \"`name` can not be empty.\"\n    dia = DialogService.query(id=chat_id, tenant_id=tenant_id, status=StatusEnum.VALID.value)\n    assert dia, \"You do not own the chat.\"\n\n     if not session_id:\n        session_id = get_uuid()\n        conv = {\n            \"id\": session_id,\n            \"dialog_id\": chat_id,\n            \"name\": name,\n            \"message\": [{\"role\": \"assistant\", \"content\": dia[0].prompt_config.get(\"prologue\"), \"created_at\": time.time()}],\n            \"user_id\": kwargs.get(\"user_id\", \"\")\n        }\n        ConversationService.save(**conv)\n        yield \"data:\" + json.dumps({\"code\": 0, \"message\": \"\",\n                                    \"data\": {\n                                        \"answer\": conv[\"message\"][0][\"content\"],\n                                        \"reference\": {},\n                                        \"audio_binary\": None,\n                                        \"id\": None,\n                                        \"session_id\": session_id\n                                    }},\n                                   ensure_ascii=False) + \"\\n\\n\"\n        yield \"data:\" + json.dumps({\"code\": 0, \"message\": \"\", \"data\": True}, ensure_ascii=False) + \"\\n\\n\"\n        return\n\n\n### Steps to reproduce\n\n```Markdown\ncurl --request POST \\\n     --url http://{address}/api/v1/chats/{chat_id}/completions \\\n     --header 'Content-Type: application/json' \\\n     --header 'Authorization: Bearer <YOUR_API_KEY>' \\\n     --data-binary '\n     {\n          \"question\": \"Who are you\",\n          \"stream\": false,\n         }'\n\nthen check the response in command line\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "bruce-wang518",
      "author_type": "User",
      "created_at": "2025-06-05T02:35:32Z",
      "updated_at": "2025-06-06T08:38:43Z",
      "closed_at": "2025-06-06T08:38:43Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8070/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8070",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8070",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:44.147899",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYou're correct—when no session_id is provided, the completion function in conversation_service.py does not check the stream parameter and always returns an event stream response, even if stream=false. This behavior is confirmed in the code and matches what you observed in your cURL t",
          "created_at": "2025-06-05T02:37:13Z"
        }
      ]
    },
    {
      "issue_number": 8079,
      "title": "[Question]: When I select an img2txt model for PDF document parsing, what task should I choose when deploying this model?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nFor example, when I deploy Qwen2.5-VL-7B-Instruct on vllm, this model has 'embedd', 'reward', 'classify', 'generate', 'score' these tasks, what should I choose?",
      "state": "open",
      "author": "Dreamcatcher-wind",
      "author_type": "User",
      "created_at": "2025-06-05T06:37:22Z",
      "updated_at": "2025-06-06T08:36:49Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8079/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8079",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8079",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:44.317983",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nFor deploying an img2txt model for PDF document parsing in RAGFlow, you should select the task that performs image-to-text conversion—typically called \"generate\" or \"image2text\" in most multi-modal model APIs. In RAGFlow, the integration expects the model to output text from images, ",
          "created_at": "2025-06-05T06:40:58Z"
        },
        {
          "author": "KevinHuSh",
          "body": "I guess `generate`.",
          "created_at": "2025-06-06T08:36:48Z"
        }
      ]
    },
    {
      "issue_number": 8086,
      "title": "[Question]: Why is it not necessary to set up an embedding model when creating a chat assistant?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nDoes the chat assistant use the same embedding model to process user questions as the one used for the knowledge base by default?",
      "state": "open",
      "author": "changqingla",
      "author_type": "User",
      "created_at": "2025-06-05T09:19:08Z",
      "updated_at": "2025-06-06T08:32:29Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8086/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8086",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8086",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:44.510578",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYou usually don't need to set up an embedding model when first creating a chat assistant in RAGFlow because the embedding model only becomes necessary if you want the assistant to retrieve information from a knowledge base. If you add a knowledge base, RAGFlow will prompt you to conf",
          "created_at": "2025-06-05T09:21:27Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Yes, it is. Otherwise, it can't work.",
          "created_at": "2025-06-06T08:32:27Z"
        }
      ]
    },
    {
      "issue_number": 8103,
      "title": "[Question]: Can ragflow demo be used as external knowledge base of dify?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI'm using demo.ragflow.io and trying to make it  an external knowledge base of cloud dify. I set the endpoint \"https://demo.ragflow.io/api/v1/retrieval\" as api, but it seems useless in dify. Is \"https://demo.ragflow.io/api/v1/retrieval\" an effective url ?  Can ragflow demo be used as external knowledge base of dify ? If possible, how to set the api url correctly. \n\n<img width=\"860\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/1b2c3a8d-b0ba-4905-b550-be660b5b4048\" />",
      "state": "closed",
      "author": "chenly15",
      "author_type": "User",
      "created_at": "2025-06-06T07:42:45Z",
      "updated_at": "2025-06-06T08:13:00Z",
      "closed_at": "2025-06-06T08:13:00Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8103/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8103",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8103",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:44.705447",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe RAGFlow demo at demo.ragflow.io cannot be used as an external knowledge base for dify—API access is not enabled on the demo site, so endpoints like https://demo.ragflow.io/api/v1/retrieval will not work for integration purposes [(source)](https://github.com/orgs/infiniflow/discus",
          "created_at": "2025-06-06T07:45:29Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Not supported yet.",
          "created_at": "2025-06-06T08:06:59Z"
        }
      ]
    },
    {
      "issue_number": 8101,
      "title": "[Question]: Build docker Image Fail",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\n![Image](https://github.com/user-attachments/assets/93eabd74-4629-4422-bbf9-e45989e3ea64)\n\nWhen compiling Docker images (including embedding models) locally, the process gets stuck as shown in the figure. What are the reasons for this and how can we solve it",
      "state": "open",
      "author": "MrG-HUI",
      "author_type": "User",
      "created_at": "2025-06-06T06:30:05Z",
      "updated_at": "2025-06-06T08:08:50Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8101/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8101",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8101",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:44.939296",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @MrG-HUI! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThe most common reason for Docker builds getting stuck with RAGFlow—especially when using `NEED_MIRROR=1`—is network connectivity issues with the configured mirrors. If your buil",
          "created_at": "2025-06-06T06:32:41Z"
        },
        {
          "author": "KevinHuSh",
          "body": "I guess that it's downloading the `infiniflow/ragflow_deps:latest`.",
          "created_at": "2025-06-06T08:08:49Z"
        }
      ]
    },
    {
      "issue_number": 2884,
      "title": "[Question]: Cann't start ragflow-es-01",
      "body": "### Describe your problem\n\n\r\n![image](https://github.com/user-attachments/assets/255cf927-7fdd-4f79-be58-2d01258957c1)\r\n```\r\nroot@20241017-instance:~/workspace/ragflow/docker# docker compose -f docker-compose.yml up -d\r\nWARN[0000] The \"HF_ENDPOINT\" variable is not set. Defaulting to a blank string. \r\nWARN[0000] The \"MACOS\" variable is not set. Defaulting to a blank string. \r\n[+] Running 4/4\r\n ✔ Container ragflow-redis  Running                                                                                                                                                                                                  0.0s \r\n ✔ Container ragflow-minio  Running                                                                                                                                                                                                  0.0s \r\n ✔ Container ragflow-mysql  Healthy                                                                                                                                                                                                  0.5s \r\n ✘ Container ragflow-es-01  Error                                                                                                                                                                                                    0.5s \r\ndependency failed to start: container ragflow-es-01 is unhealthy\r\nroot@20241017-instance:~/workspace/ragflow/docker# docker ps\r\nCONTAINER ID   IMAGE                                                  COMMAND                  CREATED             STATUS                            PORTS                                                           NAMES\r\nf09157332198   docker.elastic.co/elasticsearch/elasticsearch:8.11.3   \"/bin/tini -- /usr/l…\"   About an hour ago   Restarting (137) 29 seconds ago                                                                   ragflow-es-01\r\n75a6bd9a9eb0   redis:7.2.4                                            \"docker-entrypoint.s…\"   About an hour ago   Up 8 minutes                      0.0.0.0:6379->6379/tcp, :::6379->6379/tcp                       ragflow-redis\r\n939d9da8b4b9   quay.io/minio/minio:RELEASE.2023-12-20T01-00-02Z       \"/usr/bin/docker-ent…\"   About an hour ago   Up 8 minutes                      0.0.0.0:9000-9001->9000-9001/tcp, :::9000-9001->9000-9001/tcp   ragflow-minio\r\na29ae0479029   mysql:8.0.39                                           \"docker-entrypoint.s…\"   About an hour ago   Up 8 minutes (healthy)            33060/tcp, 0.0.0.0:5455->3306/tcp, [::]:5455->3306/tcp          ragflow-mysql\r\nroot@20241017-instance:~/workspace/ragflow/docker# docker logs f09157332198\r\nCreated elasticsearch keystore in /usr/share/elasticsearch/config/elasticsearch.keystore\r\n\r\nERROR: Elasticsearch exited unexpectedly, with exit code 137\r\n\r\nERROR: Elasticsearch exited unexpectedly, with exit code 137\r\n\r\nERROR: Elasticsearch exited unexpectedly, with exit code 137\r\n\r\nERROR: Elasticsearch exited unexpectedly, with exit code 137\r\n\r\nERROR: Elasticsearch exited unexpectedly, with exit code 137\r\n\r\n\r\n```\r\nI followed the guide document and found that the startup failed.\r\n\r\nCan you provide some directions or suggestions to solve this problem？\r\n\r\n\r\n",
      "state": "open",
      "author": "xiaoquanWu",
      "author_type": "User",
      "created_at": "2024-10-17T11:29:36Z",
      "updated_at": "2025-06-06T07:57:22Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/2884/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/2884",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/2884",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:45.136504",
      "comments": [
        {
          "author": "PascalRM",
          "body": "Hi\r\nIt might be an issue with memory. [Stackoverflow issue](\r\nhttps://stackoverflow.com/questions/77829883/elasticsearch-docker-compose-exited-with-code-137-on-ubuntu-20)\r\n\r\nDid you modify the vm.max_map_count first before starting the containers? If you didn't do it, you can use this guide:\r\n\r\nsysc",
          "created_at": "2024-10-17T15:53:42Z"
        },
        {
          "author": "xiaoquanWu",
          "body": "@PascalRM \r\nThank you for your reply.\r\n\r\nI updated/etc/sysctl.conf from the beginning and set vm. max_map_count=262144, but it doesn't solve my problem. Do you have any other good ideas?",
          "created_at": "2024-10-18T05:54:32Z"
        },
        {
          "author": "xiaoquanWu",
          "body": "![image](https://github.com/user-attachments/assets/3ca5a4f6-741e-46a0-b512-80f12c5f6c22)\r\n\r\nAfter I remove the docker/docker-compose-base.yml config `mem_limit`\r\nI started up it successfully. I don't kown why? ",
          "created_at": "2024-10-18T08:05:29Z"
        },
        {
          "author": "PascalRM",
          "body": "@xiaoquanWu This limits the amount of memory Docker can use ([Source](\r\nhttps://bobcares.com/blog/mem_limit-docker-compose/)).\r\n\r\nHow much memory does your system have? For RagFlow you should atleast have 16GB. \r\n",
          "created_at": "2024-10-18T09:02:46Z"
        },
        {
          "author": "xiaoquanWu",
          "body": "@PascalRM \r\nMy system is  8CPU and 32G.  The information as follows\r\n```\r\nroot@20241017-instance:~# lsmem\r\nRANGE                                 SIZE  STATE REMOVABLE  BLOCK\r\n0x0000000000000000-0x00000000bfffffff   3G online       yes   0-23\r\n0x0000000100000000-0x000000083fffffff  29G online       y",
          "created_at": "2024-10-18T09:33:12Z"
        }
      ]
    },
    {
      "issue_number": 8060,
      "title": "[Bug]: Text excerpts from file prompts.py contianed in generated answer",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n94181a9\n\n### RAGFlow image version\n\n94181a9(v0.18.2)\n\n### Other environment information\n\n```Markdown\nWindows Server 2022, no gpu, 32GB ram,\n```\n\n### Actual behavior\n\nI'm using ragflow in version v0.18.2 and have created a knowledge base creating embeddings with built-in bge-zh-v1.5 model with auto generation of keywords (5) and questions (2) and graphrag on 70 pdfs. When using a german chat with model llama3.2:3b, which is hosted locally with ollama having activated keywords and graphrag I get the following engleish text within the german answer: \n\nChat answer ...\n\n_Musk has consistently expressed his fondness for Dogecoin, often citing its humor and the inclusion of dogs in its branding. He has referred to it as his favorite cryptocurrency. Recently, Musk has hinted at potential future roles for Dogecoin. His tweets have sparked speculation about Dogecoin's potential integration into public services.\n\n The market is heating up after Elon Musk's announcement about Dogecoin. Is this a new era for crypto?\n##7$_\n\nChat answer continued ......\n\n\n\nCould it be that we are facing a run away prompt which has not ended and some how has included parts of the source file prompts.py [see](https://github.com/infiniflow/ragflow/blob/ec60b322abfa0174da8125f46dccaf3da2c939bf/rag/prompts.py#L176) \n\nOr was the text from the prompts.py exapmle code somehow part of the graphrag database?\n\n### Expected behavior\n\ngenerate answers only from chunks which are in the knowledge base\n\n### Steps to reproduce\n\n```Markdown\nnot sure if you are able to reproduce it\n```\n\n### Additional information\n\nMaybe you can support me with some commands how we can check that the addadional text from prompts.py is in the graphrag or other componets and how we can delete it from the system. ",
      "state": "open",
      "author": "joergkoch",
      "author_type": "User",
      "created_at": "2025-06-04T14:47:29Z",
      "updated_at": "2025-06-06T07:19:56Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8060/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8060",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8060",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:45.309327",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "The 3B LLM is very naive that you can't control its behaviour though prompt well.",
          "created_at": "2025-06-05T02:06:32Z"
        },
        {
          "author": "joergkoch",
          "body": "Thanks for your answer. In case that 3B is very naïve, what would you recommend than to prevent this error? Does this explain why ragflows source code is part of the answer? \r\n\r\n    \r\n\r\nFrom: Kevin Hu ***@***.***> \r\nSent: Thursday, 5 June 2025 04:07\r\nTo: infiniflow/ragflow ***@***.***>\r\nCc: Koch, Jö",
          "created_at": "2025-06-05T13:24:46Z"
        },
        {
          "author": "KevinHuSh",
          "body": "No better method rather than switching to a larger LLM.",
          "created_at": "2025-06-06T07:19:54Z"
        }
      ]
    },
    {
      "issue_number": 7957,
      "title": "[Bug]: GraphRAG will not finish - multiple failures and parsing stuck after 36 hours and $200 on openai-mini models",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nge3e7c7dd\n\n### RAGFlow image version\n\nSystem v0.18.0-178-ge3e7c7dd full\n\n### Other environment information\n\n```Markdown\nARM Oracle Cloud Apex A1 instances\n```\n\n### Actual behavior\n\nGraphRAG doesnt finish even on single page documents, Its like the queue gets broken and it restarts - this causes a HUGE number of calls to the LLM to catch up - this needs to be looked at to solve because its not feasible to use this right now.\n\nBegin at:\nMon, 26 May 2025 19:00:05 GMT\nDuration:\n132914.00 s\nProgress:\n19:14:43 Task has been received.\n19:14:48 Page(1~100000001): Start to parse.\n19:14:48 Page(1~100000001): Finish parsing.\n19:14:48 Page(1~100000001): Start to generate questions for every chunk ...\n19:14:50 Page(1~100000001): Question generation 1 chunks completed in 1.99s\n19:14:51 Page(1~100000001): Generate 1 chunks\n19:14:53 Page(1~100000001): Embedding chunks (2.25s)\n19:14:55 Page(1~100000001): Indexing done (1.43s). Task done (11.34s)\n19:14:58 created task graphrag\n19:30:33 Task has been received.\n20:29:23 Entities extraction of chunk 0 1/1 done, 5 nodes, 7 edges, 8025 tokens.\n20:29:23 Entities and relationships extraction done, 5 nodes, 7 edges, 8025 tokens, 3527.94s.\n20:29:23 Entities merging done, 0.01s.\n20:29:23 Relationships merging done, 0.04s.\n20:29:23 generated subgraph for doc 948259303a1f11f087ddf685024a868d in 3528.02 seconds.\n20:58:38 run_graphrag 948259303a1f11f087ddf685024a868d graphrag_task_lock acquired\n20:58:41 set_graph removed 0 nodes and 0 edges from index in 1.83s.\n20:58:45 set_graph converted graph change to 17 chunks in 4.64s.\n20:58:49 set_graph added/updated 5 nodes and 7 edges from index in 3.90s.\n20:58:49 merging subgraph for doc 948259303a1f11f087ddf685024a868d into the global graph done in 11.12 seconds.\n20:58:49 run_graphrag 948259303a1f11f087ddf685024a868d graphrag_task_lock acquired\n20:58:53 Identified 27328 candidate pairs\n07:48:39 Resolved 27328 candidate pairs, 3 of them are selected to merge.\n07:48:55 Graph resolution removed 3 nodes and 6 edges.\n07:48:55 Graph resolution updated pagerank.\n07:52:09 set_graph removed 3 nodes and 6 edges from index in 193.58s.\n07:52:53 set_graph converted graph change to 7 chunks in 44.48s.\n07:54:38 set_graph added/updated 2 nodes and 0 edges from index in 104.99s.\n07:54:38 Graph resolution done in 39348.86s.\n13:45:38 run_graphrag 948259303a1f11f087ddf685024a868d graphrag_task_lock acquired\n07:55:12 Task has been received.\n07:55:14 Graph already contains 948259303a1f11f087ddf685024a868d\n07:55:14 Knowledge Graph done (1.08s)\n\n### Expected behavior\n\nIf RagFlow crashes - this should pick up where it left off without having to restart huge sections of the process (its a slow and expensive process already). I think additional logging might be helpful as its hard to see what is happening under the hood here\n\n### Steps to reproduce\n\n```Markdown\nI guess just upload any number of PDF and Markdown documents - especially ones that build a complex knowledge graph\n```\n\n### Additional information\n\nThis is an example of one that has gone faster (I am running it on a local GPU):\n\nBegin at:\nThu, 29 May 2025 17:01:59 GMT\nDuration:\n10211.50 s\nProgress:\n17:02:03 Task has been received.\n17:02:12 Page(1~13): OCR started\n17:02:35 Page(1~13): OCR finished (22.76s)\n17:02:57 Page(1~13): Layout analysis (22.21s)\n17:02:59 Page(1~13): Text extraction (23.73s)\n17:03:15 Page(1~13): Generate 195 chunks\n17:04:15 Page(1~13): Embedding chunks (59.99s)\n17:05:48 Page(1~13): Indexing done (92.91s). Task done (225.65s)\n17:02:10 Task has been received.\n17:04:00 Page(13~25): OCR started\n17:04:13 Page(13~25): OCR finished (13.35s)\n17:04:47 Page(13~25): Layout analysis (33.08s)\n17:04:48 Page(13~25): Text extraction (33.74s)\n17:05:56 Page(13~25): Generate 227 chunks\n17:06:53 Page(13~25): Embedding chunks (55.96s)\n17:07:38 Page(13~25): Indexing done (44.70s). Task done (327.63s)\n17:02:10 Task has been received.\n17:04:53 Page(37~49): OCR started\n17:05:04 Page(37~49): OCR finished (10.83s)\n17:05:35 Page(37~49): Layout analysis (30.25s)\n17:05:39 Page(37~49): Text extraction (34.73s)\n17:06:29 Page(37~49): Generate 375 chunks\n17:07:43 Page(37~49): Embedding chunks (72.38s)\n17:08:28 Page(37~49): Indexing done (44.67s). Task done (377.78s)\n17:02:10 Task has been received.\n17:05:51 Page(25~37): OCR started\n17:06:02 Page(25~37): OCR finished (11.51s)\n17:06:39 Page(25~37): Layout analysis (35.89s)\n17:06:40 Page(25~37): Text extraction (36.64s)\n17:07:15 Page(25~37): Generate 261 chunks\n17:07:56 Page(25~37): Embedding chunks (41.01s)\n17:08:39 Page(25~37): Indexing done (42.34s). Task done (388.35s)\n17:02:11 Task has been received.\n17:03:05 Page(49~61): OCR started\n17:03:15 Page(49~61): OCR finished (10.64s)\n17:03:48 Page(49~61): Layout analysis (32.04s)\n17:03:52 Page(49~61): Text extraction (36.31s)\n17:04:22 Page(49~61): Generate 323 chunks\n17:06:04 Page(49~61): Embedding chunks (101.17s)\n17:07:24 Page(49~61): Indexing done (79.95s). Task done (313.00s)\n17:05:49 Task has been received.\n17:06:45 Page(61~73): OCR started\n17:06:54 Page(61~73): OCR finished (9.72s)\n17:07:19 Page(61~73): Layout analysis (24.37s)\n17:07:20 Page(61~73): Text extraction (24.99s)\n17:07:42 Page(61~73): Generate 331 chunks\n17:08:34 Page(61~73): Embedding chunks (51.23s)\n17:09:53 Page(61~73): Indexing done (78.75s). Task done (243.37s)\n17:07:24 Task has been received.\n17:07:25 Page(73~85): OCR started\n17:07:35 Page(73~85): OCR finished (9.69s)\n17:08:00 Page(73~85): Layout analysis (24.74s)\n17:08:00 Page(73~85): Text extraction (25.05s)\n17:08:32 Page(73~85): Generate 330 chunks\n17:09:28 Page(73~85): Embedding chunks (56.02s)\n17:10:36 Page(73~85): Indexing done (67.41s). Task done (191.94s)\n17:07:38 Task has been received.\n17:08:06 Page(85~97): OCR started\n17:08:14 Page(85~97): OCR finished (8.28s)\n17:08:39 Page(85~97): Layout analysis (25.28s)\n17:08:40 Page(85~97): Text extraction (25.78s)\n17:09:03 Page(85~97): Generate 264 chunks\n17:09:53 Page(85~97): Embedding chunks (49.06s)\n17:10:38 Page(85~97): Indexing done (45.24s). Task done (179.85s)\n17:08:29 Task has been received.\n17:08:45 Page(97~109): OCR started\n17:08:52 Page(97~109): OCR finished (7.59s)\n17:09:19 Page(97~109): Layout analysis (25.63s)\n17:09:20 Page(97~109): Text extraction (26.47s)\n17:10:02 Page(97~109): Generate 295 chunks\n17:10:50 Page(97~109): Embedding chunks (47.35s)\n17:11:18 Page(97~109): Indexing done (27.60s). Task done (169.10s)\n17:08:39 Task has been received.\n17:09:25 Page(109~121): OCR started\n17:09:42 Page(109~121): OCR finished (16.88s)\n17:10:05 Page(109~121): Layout analysis (23.13s)\n17:10:06 Page(109~121): Text extraction (23.77s)\n17:10:32 Page(109~121): Generate 321 chunks\n17:11:21 Page(109~121): Embedding chunks (49.21s)\n17:11:55 Page(109~121): Indexing done (34.40s). Task done (196.43s)\n17:09:54 Task has been received.\n17:10:09 Page(121~133): OCR started\n17:10:23 Page(121~133): OCR finished (13.83s)\n17:10:49 Page(121~133): Layout analysis (26.28s)\n17:10:50 Page(121~133): Text extraction (26.80s)\n17:10:53 Page(121~133): Generate 37 chunks\n17:11:02 Page(121~133): Embedding chunks (8.71s)\n17:11:07 Page(121~133): Indexing done (4.83s). Task done (73.53s)\n17:10:37 Task has been received.\n17:10:51 Page(133~145): OCR started\n17:10:59 Page(133~145): OCR finished (7.55s)\n17:11:22 Page(133~145): Layout analysis (23.53s)\n17:11:23 Page(133~145): Text extraction (23.89s)\n17:11:40 Page(133~145): Generate 259 chunks\n17:12:12 Page(133~145): Embedding chunks (32.50s)\n17:12:47 Page(133~145): Indexing done (34.69s). Task done (130.44s)\n17:10:38 Task has been received.\n17:11:26 Page(145~157): OCR started\n17:11:52 Page(145~157): OCR finished (26.20s)\n17:12:15 Page(145~157): Layout analysis (22.72s)\n17:12:15 Page(145~157): Text extraction (23.20s)\n17:12:53 Page(145~157): Generate 874 chunks\n17:15:14 Page(145~157): Embedding chunks (140.05s)\n17:16:58 Page(145~157): Indexing done (104.16s). Task done (379.56s)\n17:11:07 Task has been received.\n17:12:20 Page(157~167): OCR started\n17:12:33 Page(157~167): OCR finished (12.94s)\n17:12:50 Page(157~167): Layout analysis (17.32s)\n17:12:52 Page(157~167): Text extraction (18.76s)\n17:13:33 Page(157~167): Generate 1376 chunks\n17:17:05 Page(157~167): Embedding chunks (212.08s)\n17:20:31 Page(157~167): Indexing done (205.93s). Task done (563.69s)\n17:20:32 created task graphrag\n17:56:39 Task has been received.\n\nEven now - it gets stuck at \"Task has been received\" with no further updates ",
      "state": "open",
      "author": "voycey",
      "author_type": "User",
      "created_at": "2025-05-29T11:54:02Z",
      "updated_at": "2025-06-06T07:15:34Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 17,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7957/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7957",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7957",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:45.511067",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThere are several known issues and recent changes in RAGFlow that may be related to the GraphRAG restart and performance problems you’re experiencing.\n\nFirst, the use of RedisDistributedLock in the GraphRAG codebase is intended to manage task locks and prevent concurrent processing i",
          "created_at": "2025-05-29T11:57:30Z"
        },
        {
          "author": "voycey",
          "body": "I will add that my local Ragflow version is the latest 0.19 version and i am seeing similar behaviour on that - tasks seem to stall at the.:\n\n```\nBegin at:\nThu, 29 May 2025 17:01:59 GMT\nDuration:\n10709.30 s\nProgress:\n17:02:03 Task has been received.\n17:02:12 Page(1~13): OCR started\n17:02:35 Page(1~1",
          "created_at": "2025-05-29T12:01:25Z"
        },
        {
          "author": "voycey",
          "body": "Additional logs here from the 0.19 version:\n\n```\n2025-05-29 19:59:07,774 INFO     23 HTTP Request: POST http://ollama:11434/api/chat \"HTTP/1.1 200 OK\"\n2025-05-29 19:59:10,440 INFO     23 HTTP Request: POST http://ollama:11434/api/chat \"HTTP/1.1 200 OK\"\n2025-05-29 19:59:17,487 INFO     23 HTTP Reques",
          "created_at": "2025-05-29T12:11:49Z"
        },
        {
          "author": "voycey",
          "body": "The restart logs look like this now:\n\n```\n025-05-29 20:14:21,027 INFO     23 \n  ______           __      ______                     __\n /_  __/___ ______/ /__   / ____/  _____  _______  __/ /_____  _____\n  / / / __ `/ ___/ //_/  / __/ | |/_/ _ \\/ ___/ / / / __/ __ \\/ ___/\n / / / /_/ (__  ) ,<    / /",
          "created_at": "2025-05-29T12:18:00Z"
        },
        {
          "author": "Woody-Hu",
          "body": "Hi @voycey I am interested in this part, just from the code I found RAGFlow already tried to ack the task. So I want to confrim:\n1. How do you deploy RAGflow, and how do you restart it?\n2. Can you help to confirm if each time \n`2025-05-29 20:14:21,069 INFO     23 RedisDB.get_unacked_iterator rag_flo",
          "created_at": "2025-05-30T01:45:12Z"
        }
      ]
    },
    {
      "issue_number": 8027,
      "title": "[Bug]: Can't upload more than 10 MB in batch, locally deployed docker",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n-\n\n### RAGFlow image version\n\n v0.19.x-62-ge47186cc \n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nBatch upload cannot be more than 10 MB total\n\n### Expected behavior\n\nShould be 1 GB by default\n\n### Steps to reproduce\n\n```Markdown\n-\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "sebastiangeislerlipo",
      "author_type": "User",
      "created_at": "2025-06-03T10:35:44Z",
      "updated_at": "2025-06-06T06:37:15Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8027/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "asiroliu"
      ],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8027",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8027",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:45.720697",
      "comments": [
        {
          "author": "asiroliu",
          "body": "@sebastiangeislerlipo \nI tested with:\n- A single 20MB file: `dd if=/dev/zero of=20mb_file.txt bs=1m count=20`\n- Ten 2MB files:         `for i in {1..10}; do dd if=/dev/zero of=file_${i}.txt bs=2m count=1; done`\n\nBut couldn't reproduce the issue you mentioned. \nPlease verify if you have sufficient di",
          "created_at": "2025-06-04T08:17:30Z"
        },
        {
          "author": "sebastiangeislerlipo",
          "body": "Thanks for testing @asiroliu , free space is about 500GB. With \"docker logs ragflow-server\" i cannot see any error. \n\nThis is what I get within the browser when trying to upload 2x 9MB pdfs:\n![Image](https://github.com/user-attachments/assets/2b3652ea-4838-4aaa-9fad-834a5d5533d8)\n\nAdditionally I get",
          "created_at": "2025-06-04T10:31:09Z"
        },
        {
          "author": "asiroliu",
          "body": "Could you please verify the value of the `MAX_CONTENT_LENGTH` environment variable? \nAccording to the code analysis, this variable controls the maximum upload size for documents.",
          "created_at": "2025-06-06T02:02:02Z"
        },
        {
          "author": "sebastiangeislerlipo",
          "body": "```\ncat docker/.env |grep MAX_C\nMAX_CONTENT_LENGTH=1073741824\n```\nand\n```\ndocker exec ragflow-server env |grep MAX\nMAX_CONTENT_LENGTH=1073741824\n```",
          "created_at": "2025-06-06T06:37:15Z"
        }
      ]
    },
    {
      "issue_number": 8087,
      "title": "[Question]: QA Chunk Embedding and File Management API",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nHello, I have two questions regarding RAGflow's functionality:\nQA Chunk Embedding\nWhen using the QA chunking mode, does RAGflow support generating embeddings only for the Questions (Q) while excluding the Answers (A)? This could optimize storage and retrieval efficiency for specific use cases.\nFile Management API\nAre there APIs available for performing operations on the File Management module, such as:\nAdding new files\nDeleting existing files\nGenerating download links for files",
      "state": "open",
      "author": "cxycxm",
      "author_type": "User",
      "created_at": "2025-06-05T09:31:04Z",
      "updated_at": "2025-06-06T05:51:15Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8087/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8087",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8087",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:45.959852",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nRAGflow does not natively support generating embeddings only for Questions (Q) while excluding Answers (A) in QA chunking mode—the system combines both question and answer as a single chunk for embedding. Achieving question-only embeddings would require custom code changes, as there’",
          "created_at": "2025-06-05T09:33:32Z"
        },
        {
          "author": "cxycxm",
          "body": "\nI haven't found a way to call the File Management API yet, and I can only see that these operations can be done through the web interface.",
          "created_at": "2025-06-05T09:42:53Z"
        },
        {
          "author": "KevinHuSh",
          "body": "It's not supported yet in term of FM API.",
          "created_at": "2025-06-06T05:51:14Z"
        }
      ]
    },
    {
      "issue_number": 8071,
      "title": "[Feature Request]:optional ai model during chunk creation",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\n\n```\n\n### Describe the feature you'd like\n\n  Allows to customize the ai model instead of directly using the default  \n\n![Image](https://github.com/user-attachments/assets/e2e35272-58a6-45fe-ac71-86a0de50c033)\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "isthaison",
      "author_type": "User",
      "created_at": "2025-06-05T02:49:16Z",
      "updated_at": "2025-06-06T04:40:14Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8071/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8071",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8071",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:46.149332",
      "comments": [
        {
          "author": "ZhenhangTung",
          "body": "@isthaison could you explain more on your idea?",
          "created_at": "2025-06-06T03:09:38Z"
        },
        {
          "author": "isthaison",
          "body": "Allows for optional AI model during analysis, instead of using default  \n\n![Image](https://github.com/user-attachments/assets/6f07ee22-70e8-4462-a017-070139786657)",
          "created_at": "2025-06-06T04:40:13Z"
        }
      ]
    },
    {
      "issue_number": 7177,
      "title": "[Question]: Use the invoke component and prompt AssertionError('Please verify the input parameters first.')",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nUse the invoke component and prompt AssertionError('Please verify the input parameters first.').\n\n![Image](https://github.com/user-attachments/assets/42060e6c-abbb-455c-8fea-dec523788661)",
      "state": "open",
      "author": "qlanto224",
      "author_type": "User",
      "created_at": "2025-04-22T01:51:53Z",
      "updated_at": "2025-06-06T03:54:03Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7177/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7177",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7177",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:46.323349",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe AssertionError you're encountering, \"Please verify the input parameters first,\" suggests that there might be an issue with the parameters being passed to the 'invoke' component. RAGFlow validates input parameters using the `check` method in the `InvokeParam` class, which checks f",
          "created_at": "2025-04-22T01:53:25Z"
        },
        {
          "author": "qlanto224",
          "body": "@dosubot Everything has been set",
          "created_at": "2025-04-22T01:54:52Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nHey @qlanto224! I'm here to help with bugs, technical questions, and engineering knowledge. If everything is set and you're still facing issues, it might be something outside my current capabilities. You can reach out to the [Dosu Team](mailto:customersuccess@dosu.dev) for further as",
          "created_at": "2025-04-22T01:55:10Z"
        },
        {
          "author": "Harvey-ZouZ",
          "body": "@qlanto224 \nHello, have you solved this problem? I also encountered the same problem",
          "created_at": "2025-06-06T03:54:02Z"
        }
      ]
    },
    {
      "issue_number": 8098,
      "title": "[Question]: ssl.SSLCertVerificationError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nWhen I install ragflow from building source code  on arm64 openEuler system.\nI run the command  uv sync --python 3.10 --all-extras  and get the tips about errors just as follows:\n---------------------- tips begin ------------------------------\n     Built google-search-results==2.4.2\n      Built warc3-wet-clueweb09==0.2.5\n      Built wikipedia==1.4.0\n  × Failed to build `pystemmer==2.2.0.3`\n  ├─▶ The build backend returned an error\n  ╰─▶ Call to `setuptools.build_meta:__legacy__.build_wheel` failed (exit status: 1)\n\n      [stdout]\n      Downloading https://snowballstem.org/dist/libstemmer_c-2.2.0.tar.gz...\n\n      [stderr]\n      Traceback (most recent call last):\n        File \"/root/.local/share/uv/python/cpython-3.10.18-linux-aarch64-gnu/lib/python3.10/urllib/request.py\", line 1348, in do_open\n          h.request(req.get_method(), req.selector, req.data, headers,\n        File \"/root/.local/share/uv/python/cpython-3.10.18-linux-aarch64-gnu/lib/python3.10/http/client.py\", line 1283, in request\n          self._send_request(method, url, body, headers, encode_chunked)\n        File \"/root/.local/share/uv/python/cpython-3.10.18-linux-aarch64-gnu/lib/python3.10/http/client.py\", line 1329, in _send_request\n          self.endheaders(body, encode_chunked=encode_chunked)\n        File \"/root/.local/share/uv/python/cpython-3.10.18-linux-aarch64-gnu/lib/python3.10/http/client.py\", line 1278, in endheaders\n          self._send_output(message_body, encode_chunked=encode_chunked)\n        File \"/root/.local/share/uv/python/cpython-3.10.18-linux-aarch64-gnu/lib/python3.10/http/client.py\", line 1038, in _send_output\n          self.send(msg)\n        File \"/root/.local/share/uv/python/cpython-3.10.18-linux-aarch64-gnu/lib/python3.10/http/client.py\", line 976, in send\n          self.connect()\n        File \"/root/.local/share/uv/python/cpython-3.10.18-linux-aarch64-gnu/lib/python3.10/http/client.py\", line 1455, in connect\n          self.sock = self._context.wrap_socket(self.sock,\n        File \"/root/.local/share/uv/python/cpython-3.10.18-linux-aarch64-gnu/lib/python3.10/ssl.py\", line 513, in wrap_socket\n          return self.sslsocket_class._create(\n        File \"/root/.local/share/uv/python/cpython-3.10.18-linux-aarch64-gnu/lib/python3.10/ssl.py\", line 1104, in _create\n          self.do_handshake()\n        File \"/root/.local/share/uv/python/cpython-3.10.18-linux-aarch64-gnu/lib/python3.10/ssl.py\", line 1375, in do_handshake\n          self._sslobj.do_handshake()\n      ssl.SSLCertVerificationError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate\n      (_ssl.c:1017)\n\n      During handling of the above exception, another exception occurred:\n\n      Traceback (most recent call last):\n        File \"<string>\", line 14, in <module>\n        File \"/root/.cache/uv/builds-v0/.tmpImDJRC/lib/python3.10/site-packages/setuptools/build_meta.py\", line 331, in\n      get_requires_for_build_wheel\n          return self._get_build_requires(config_settings, requirements=[])\n        File \"/root/.cache/uv/builds-v0/.tmpImDJRC/lib/python3.10/site-packages/setuptools/build_meta.py\", line 301, in _get_build_requires\n          self.run_setup()\n        File \"/root/.cache/uv/builds-v0/.tmpImDJRC/lib/python3.10/site-packages/setuptools/build_meta.py\", line 512, in run_setup\n          super().run_setup(setup_script=setup_script)\n        File \"/root/.cache/uv/builds-v0/.tmpImDJRC/lib/python3.10/site-packages/setuptools/build_meta.py\", line 317, in run_setup\n          exec(code, locals())\n        File \"<string>\", line 126, in <module>\n        File \"<string>\", line 110, in download\n        File \"/root/.cache/uv/sdists-v9/index/3ba65c4f41aac3a1/pystemmer/2.2.0.3/OeFr0yHyyD_YciX6rIlm9/src/tarballfetcher.py\", line 40, in\n      download_and_extract_tarball\n          download_file(tarball_url, tarball_filename)\n        File \"/root/.cache/uv/sdists-v9/index/3ba65c4f41aac3a1/pystemmer/2.2.0.3/OeFr0yHyyD_YciX6rIlm9/src/tarballfetcher.py\", line 17, in\n      download_file\n          urlretrieve(url, filename)\n        File \"/root/.local/share/uv/python/cpython-3.10.18-linux-aarch64-gnu/lib/python3.10/urllib/request.py\", line 241, in urlretrieve\n          with contextlib.closing(urlopen(url, data)) as fp:\n        File \"/root/.local/share/uv/python/cpython-3.10.18-linux-aarch64-gnu/lib/python3.10/urllib/request.py\", line 216, in urlopen\n          return opener.open(url, data, timeout)\n        File \"/root/.local/share/uv/python/cpython-3.10.18-linux-aarch64-gnu/lib/python3.10/urllib/request.py\", line 519, in open\n          response = self._open(req, data)\n        File \"/root/.local/share/uv/python/cpython-3.10.18-linux-aarch64-gnu/lib/python3.10/urllib/request.py\", line 536, in _open\n          result = self._call_chain(self.handle_open, protocol, protocol +\n        File \"/root/.local/share/uv/python/cpython-3.10.18-linux-aarch64-gnu/lib/python3.10/urllib/request.py\", line 496, in _call_chain\n          result = func(*args)\n        File \"/root/.local/share/uv/python/cpython-3.10.18-linux-aarch64-gnu/lib/python3.10/urllib/request.py\", line 1391, in https_open\n          return self.do_open(http.client.HTTPSConnection, req,\n        File \"/root/.local/share/uv/python/cpython-3.10.18-linux-aarch64-gnu/lib/python3.10/urllib/request.py\", line 1351, in do_open\n          raise URLError(err)\n      urllib.error.URLError: <urlopen error [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer\n      certificate (_ssl.c:1017)>\n\n      hint: This usually indicates a problem with the package or the build environment.\n  help: `pystemmer` (v2.2.0.3) was included because `ragflow[full]` (v0.19.0) depends on `fastembed` (v0.3.6) which depends on `pystemmer`\n-------------------tips   end --------------------\nCan you tell me how to solve this problem?\nThanks very much.",
      "state": "open",
      "author": "btdan",
      "author_type": "User",
      "created_at": "2025-06-06T03:18:17Z",
      "updated_at": "2025-06-06T03:26:35Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8098/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8098",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8098",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:46.540188",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThis error usually means your system is missing the necessary root CA certificates to verify SSL connections. On openEuler, you can often fix this by installing or updating the `ca-certificates` package:\n\n```bash\nsudo dnf install ca-certificates\nsudo update-ca-trust\n```\n\nAfter updati",
          "created_at": "2025-06-06T03:21:35Z"
        },
        {
          "author": "btdan",
          "body": "Thanks very much for your help.\nI just follow your advice and run the commands:\n\nsudo dnf install ca-certificates\nsudo update-ca-trust\n\nAnd nothing is changed because I have do this before.\nand I find that there is no /etc/ssl/certs/ca-certificates.crt.\nI run the command to search:\nfind / -name ca-c",
          "created_at": "2025-06-06T03:26:34Z"
        }
      ]
    },
    {
      "issue_number": 8038,
      "title": "[Feature Request]: add migrate tool for \"doc engine from Elasticsearch to Infinity\"",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\n\n```\n\n### Describe the feature you'd like\n\nRAGFlow uses Elasticsearch by default for storing full text and vectors.After switch to Infinity,  the existing data will be cleared.\nCan we support a data migration tool?\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "kalsolio",
      "author_type": "User",
      "created_at": "2025-06-04T01:27:37Z",
      "updated_at": "2025-06-06T03:10:23Z",
      "closed_at": null,
      "labels": [
        "💞 feature",
        "♾️infinity"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8038/reactions",
        "total_count": 3,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 1
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8038",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8038",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:46.766017",
      "comments": [
        {
          "author": "ZhenhangTung",
          "body": "@kalsolio noted. ",
          "created_at": "2025-06-06T03:10:21Z"
        }
      ]
    },
    {
      "issue_number": 8074,
      "title": "[Feature Request]: Object storage supports OpenDAL.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\nso far ragflow ossstorage part support oss, s3, localfile and so on. if i try to use new oss storage way such as relational database,i have to implement by myself.OpenDAL supports many services, it is more convenient.\n```\n\n### Describe the feature you'd like\n\nsupport openDAL as oss access\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "dengdazhuang",
      "author_type": "User",
      "created_at": "2025-06-05T02:58:20Z",
      "updated_at": "2025-06-06T03:09:01Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8074/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8074",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8074",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:47.002509",
      "comments": [
        {
          "author": "ZhenhangTung",
          "body": "@dengdazhuang noted.",
          "created_at": "2025-06-06T03:09:00Z"
        }
      ]
    },
    {
      "issue_number": 8092,
      "title": "[Question]: Why not use minerU to parse the document? At least this option can be added?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\n**Using minerU to parse documents is clearly a relatively good choice. Although it is cut rather finely, we can merge it. We sincerely hope that the development team will incorporate this option to enable the project to truly leverage its advantages. What do you all think?**### ",
      "state": "open",
      "author": "ljtihaveadream",
      "author_type": "User",
      "created_at": "2025-06-05T12:09:36Z",
      "updated_at": "2025-06-06T03:07:58Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question",
        "💞 feature"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8092/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8092",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8092",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:47.183350",
      "comments": [
        {
          "author": "ZhenhangTung",
          "body": "@ljtihaveadream Integrating MinerU is on our roadmap. I've already had a chat with MinerU team. Just need some time to make it happen, for we have other important features coming soon.",
          "created_at": "2025-06-06T03:07:57Z"
        }
      ]
    },
    {
      "issue_number": 8055,
      "title": "[Bug]: delimiter  not working when parse docx pdf and markdown",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n0.19.0\n\n### RAGFlow image version\n\n0.19.0-slim\n\n### Other environment information\n\n```Markdown\nCPU:Intel(R) Xeon(R) Silver 4316 CPU @ 2.30GHz\nMEM:128GB\nOS:Ubuntu 22.04-server\n```\n\n### Actual behavior\n\ndelimiter setting  of file type  docx markdown and pdf is useless.\nOnly chunk token size  works .\n\n### Expected behavior\n\nall kinds of file will be chunked using the specified delimiter firse , not just only depend on chunk size.\n\n\n### Steps to reproduce\n\n```Markdown\nupload a docx/markdown file \nsettting a specified  delimiter \nstart to parse\n\nthe chunk content is not not split based on the delimiter, but solely based on the chunk size.\n```\n\n### Additional information\n\nI reviewed the implementation code for Markdown, DOCX, and PDF, and none of them use a delimiter to chunk content based on user-specified separators. Only the TXT parser uses a delimiter — and unfortunately, even the TXT parser behaves quite differently from similar utility functions in libraries like LangChain and LlamaIndex.",
      "state": "open",
      "author": "sinopec",
      "author_type": "User",
      "created_at": "2025-06-04T11:30:36Z",
      "updated_at": "2025-06-06T02:52:34Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8055/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8055",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8055",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:47.350774",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "Pull the `nightly` version of docker image in which it's fixed there.",
          "created_at": "2025-06-05T02:16:01Z"
        },
        {
          "author": "sinopec",
          "body": "> Pull the `nightly` version of docker image in which it's fixed there.\n\ndocx seems have some commit to fix this.\nbut  For markdown file, the latest code still dont use delimiter\nhttps://github.com/infiniflow/ragflow/blob/ee5200087003241d8190f68c773ab524d91125e2/rag/app/naive.py#L467",
          "created_at": "2025-06-05T06:14:52Z"
        },
        {
          "author": "mu-dan",
          "body": "> > 拉取修复它的 docker image 版本。`nightly`\n> \n> docx 似乎有一些提交来解决这个问题。但是对于 markdown 文件，最新的代码仍然不使用 delimiter\n> \n> [ragflow/rag/app/naive.py](https://github.com/infiniflow/ragflow/blob/ee5200087003241d8190f68c773ab524d91125e2/rag/app/naive.py#L467)\n> \n> 467 行 在[EE52000](/infiniflow/ragflow/commit/ee5200087003",
          "created_at": "2025-06-06T02:52:33Z"
        }
      ]
    },
    {
      "issue_number": 6732,
      "title": "Is the current text-to-sql capable of outputting data analysis charts?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\n\n```\n\n### Describe the feature you'd like\n\nIs the current text-to-sql capable of outputting data analysis charts? Does the agent support the output of simple data analysis charts?\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "gavinju",
      "author_type": "User",
      "created_at": "2025-04-01T11:51:59Z",
      "updated_at": "2025-06-06T02:39:29Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question",
        "💞 feature"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/6732/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/6732",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/6732",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:47.581342",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "Not supported yet.",
          "created_at": "2025-04-03T01:59:57Z"
        },
        {
          "author": "ZhenhangTung",
          "body": "@gavinju Great question—thanks for asking!\n\nJust to understand better:  \n- What’s the **business scenario** or **workflow** where you’d like to generate data analysis charts from Text-to-SQL or agents?  \n- Are you working with structured business data (e.g. sales, users, operations), and aiming to v",
          "created_at": "2025-05-14T02:35:38Z"
        },
        {
          "author": "ooodwbooo",
          "body": "@ZhenhangTung \nThe method I am currently using is to have the LLM output HTML code segments, modify the front-end source code, load those with the classname \"language-html\" into an iframe for display. The ECharts JS files are placed in the public folder. In fact, if a code segment preview function i",
          "created_at": "2025-06-05T09:42:40Z"
        },
        {
          "author": "ZhenhangTung",
          "body": "@ooodwbooo Got it. I think we could gradually support this kind of capability as we enhance the Deep Research feature set within the Agent module. I'll keep it in mind during the design phase.",
          "created_at": "2025-06-06T02:39:27Z"
        }
      ]
    },
    {
      "issue_number": 8088,
      "title": "[Bug]: Unimplemented function in ppt_parser",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n6488f22540b142b4a0f761fd319f8f07843c6702\n\n### RAGFlow image version\n\n6488f22540b142b4a0f761fd319f8f07843c6702\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nhttps://github.com/infiniflow/ragflow/blob/6488f22540b142b4a0f761fd319f8f07843c6702/deepdoc/parser/ppt_parser.py#L66 \n\n![Image](https://github.com/user-attachments/assets/d01675db-3536-47a9-8d3c-1290e0e7886d)\n\nI didn't find any definition about this function. A typo maybe?\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nnothing\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "oasis-0927",
      "author_type": "User",
      "created_at": "2025-06-05T09:55:12Z",
      "updated_at": "2025-06-06T02:06:00Z",
      "closed_at": "2025-06-06T02:06:00Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8088/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8088",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8088",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:47.756089",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @oasis-0927! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nYou're right—there's no definition for __extract_texts in ppt_parser.py. This looks like a typo. The code is trying to recursively extract text from shapes in a group, and eve",
          "created_at": "2025-06-05T09:58:26Z"
        }
      ]
    },
    {
      "issue_number": 8089,
      "title": "[Question]: I want to use ragflow as an external RAG for knowledge retrieval. How should I integrate it into my existing AI framework?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\n[Question]: I want to use ragflow as an external RAG for knowledge retrieval. How should I integrate it into my existing AI framework?",
      "state": "open",
      "author": "Tommm66",
      "author_type": "User",
      "created_at": "2025-06-05T10:11:05Z",
      "updated_at": "2025-06-06T02:05:14Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8089/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8089",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8089",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:47.975140",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYou can integrate RAGFlow as an external RAG for knowledge retrieval using its REST API or Python SDK. The most common approach is to use RAGFlow’s OpenAI-compatible API, which allows your AI framework to interact with RAGFlow as if it were an OpenAI endpoint. This works well for fra",
          "created_at": "2025-06-05T10:13:42Z"
        },
        {
          "author": "KevinHuSh",
          "body": "[OpenAI-Compatible API](https://ragflow.io/docs/dev/http_api_reference#openai-compatible-api).",
          "created_at": "2025-06-06T02:05:13Z"
        }
      ]
    },
    {
      "issue_number": 7767,
      "title": "[Feature Request]: Allow dify to modify the vector_similarity_weight？",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\nAs the external knowledge base of dify, the value of vector_similarity_weight cannot be adjusted, resulting in the inability to retrieve appropriate blocks for some problems with strong semantics.\n```\n\n### Describe the feature you'd like\n\nIn the current dify_retrieval.py, vector_similarity_weight is fixed at 0.3. Can it be modified by passing in parameters like similarity_threshold?\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "kuruas",
      "author_type": "User",
      "created_at": "2025-05-21T08:19:34Z",
      "updated_at": "2025-06-06T01:49:28Z",
      "closed_at": "2025-06-06T01:49:28Z",
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7767/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7767",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7767",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:48.183467",
      "comments": [
        {
          "author": "ZhenhangTung",
          "body": "cc @yongtenglei for evaluation.",
          "created_at": "2025-05-26T03:47:49Z"
        }
      ]
    },
    {
      "issue_number": 7751,
      "title": "[Question]: How to login RAGFlow from another system.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nRAGFlow services started successfully and login it from the local system successfully, but how to login it from another system?\n\n**local system logs:**\n<pre><font color=\"#26A269\"><b>test@test-test-Product</b></font>:<font color=\"#12488B\"><b>~/ragflow/docker</b></font>$ docker logs -f ragflow-server\nStarting nginx...\nStarting ragflow_server...\nStarting 1 task executor(s) on host &apos;0b7116e22504&apos;...\n2025-05-21 09:43:56,073 INFO     15 ragflow_server log path: /ragflow/logs/ragflow_server.log, log levels: {&apos;peewee&apos;: &apos;WARNING&apos;, &apos;pdfminer&apos;: &apos;WARNING&apos;, &apos;root&apos;: &apos;INFO&apos;}\n2025-05-21 09:43:56,650 INFO     15 can&apos;t import package &apos;torch&apos;\n2025-05-21 09:44:00,297 INFO     15 init database on cluster mode successfully\n2025-05-21 09:44:02,848 INFO     15 load_model /ragflow/rag/res/deepdoc/det.onnx uses CPU\n2025-05-21 09:44:02,920 INFO     15 load_model /ragflow/rag/res/deepdoc/rec.onnx uses CPU\n2025-05-21 09:44:07,934 INFO     15 \n        ____   ___    ______ ______ __               \n       / __ \\ /   |  / ____// ____// /____  _      __\n      / /_/ // /| | / / __ / /_   / // __ \\| | /| / /\n     / _, _// ___ |/ /_/ // __/  / // /_/ /| |/ |/ / \n    /_/ |_|/_/  |_|\\____//_/    /_/ \\____/ |__/|__/                             \n\n    \n2025-05-21 09:44:07,934 INFO     15 RAGFlow version: v0.18.0 slim\n2025-05-21 09:44:07,935 INFO     15 project base: /ragflow\n2025-05-21 09:44:07,935 INFO     15 Current configs, from /ragflow/conf/service_conf.yaml:\n\tragflow: {&apos;host&apos;: &apos;0.0.0.0&apos;, &apos;http_port&apos;: 9380}\n\tmysql: {&apos;name&apos;: &apos;rag_flow&apos;, &apos;user&apos;: &apos;root&apos;, &apos;password&apos;: &apos;********&apos;, &apos;host&apos;: &apos;mysql&apos;, &apos;port&apos;: 3306, &apos;max_connections&apos;: 100, &apos;stale_timeout&apos;: 30}\n\tminio: {&apos;user&apos;: &apos;rag_flow&apos;, &apos;password&apos;: &apos;********&apos;, &apos;host&apos;: &apos;minio:9000&apos;}\n\tes: {&apos;hosts&apos;: &apos;http://es01:9200&apos;, &apos;username&apos;: &apos;elastic&apos;, &apos;password&apos;: &apos;********&apos;}\n\tinfinity: {&apos;uri&apos;: &apos;infinity:23817&apos;, &apos;db_name&apos;: &apos;default_db&apos;}\n\tredis: {&apos;db&apos;: 1, &apos;password&apos;: &apos;********&apos;, &apos;host&apos;: &apos;redis:6379&apos;}\n2025-05-21 09:44:07,935 INFO     15 Use Elasticsearch http://es01:9200 as the doc engine.\n2025-05-21 09:44:08,018 INFO     15 GET http://es01:9200/ [status:200 duration:0.082s]\n2025-05-21 09:44:08,022 INFO     15 HEAD http://es01:9200/ [status:200 duration:0.003s]\n2025-05-21 09:44:08,022 INFO     15 Elasticsearch http://es01:9200 is healthy.\n2025-05-21 09:44:08,027 WARNING  15 Load term.freq FAIL!\n2025-05-21 09:44:08,029 WARNING  15 Realtime synonym is disabled, since no redis connection.\n2025-05-21 09:44:08,031 WARNING  15 Load term.freq FAIL!\n2025-05-21 09:44:08,034 WARNING  15 Realtime synonym is disabled, since no redis connection.\n2025-05-21 09:44:08,034 INFO     15 MAX_CONTENT_LENGTH: 134217728\n2025-05-21 09:44:08,034 INFO     15 MAX_FILE_COUNT_PER_USER: 0\n2025-05-21 09:44:08,879 INFO     15 init web data success:0.7857134342193604\n2025-05-21 09:44:08,881 INFO     15 update_progress lock_value: e1d8814c-d9ed-4864-ab87-511f1e31ffdc\n2025-05-21 09:44:08,881 INFO     15 RAGFlow HTTP server start...\n2025-05-21 09:44:08,882 INFO     15 <font color=\"#C01C28\"><b>WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.</b></font>\n * Running on all addresses (0.0.0.0)\n * Running on http://127.0.0.1:9380\n * Running on http://172.18.0.6:9380\n2025-05-21 09:44:08,882 INFO     15 <font color=\"#A2734C\">Press CTRL+C to quit</font>\n2025-05-21 09:44:15,184 INFO     31 task_executor_0b7116e22504_0 log path: /ragflow/logs/task_executor_0b7116e22504_0.log, log levels: {&apos;peewee&apos;: &apos;WARNING&apos;, &apos;pdfminer&apos;: &apos;WARNING&apos;, &apos;root&apos;: &apos;INFO&apos;}\n2025-05-21 09:44:15,184 INFO     31 \n  ______           __      ______                     __\n /_  __/___ ______/ /__   / ____/  _____  _______  __/ /_____  _____\n  / / / __ `/ ___/ //_/  / __/ | |/_/ _ \\/ ___/ / / / __/ __ \\/ ___/\n / / / /_/ (__  ) ,&lt;    / /____&gt;  &lt;/  __/ /__/ /_/ / /_/ /_/ / /\n/_/  \\__,_/____/_/|_|  /_____/_/|_|\\___/\\___/\\__,_/\\__/\\____/_/\n    \n2025-05-21 09:44:15,185 INFO     31 TaskExecutor: RAGFlow version: v0.18.0 slim\n2025-05-21 09:44:15,185 INFO     31 Use Elasticsearch http://es01:9200 as the doc engine.\n2025-05-21 09:44:15,196 INFO     31 GET http://es01:9200/ [status:200 duration:0.010s]\n2025-05-21 09:44:15,199 INFO     31 HEAD http://es01:9200/ [status:200 duration:0.002s]\n2025-05-21 09:44:15,199 INFO     31 Elasticsearch http://es01:9200 is healthy.\n2025-05-21 09:44:15,203 WARNING  31 Load term.freq FAIL!\n2025-05-21 09:44:15,206 WARNING  31 Realtime synonym is disabled, since no redis connection.\n2025-05-21 09:44:15,210 WARNING  31 Load term.freq FAIL!\n2025-05-21 09:44:15,213 WARNING  31 Realtime synonym is disabled, since no redis connection.\n2025-05-21 09:44:15,213 INFO     31 MAX_CONTENT_LENGTH: 134217728\n2025-05-21 09:44:15,213 INFO     31 MAX_FILE_COUNT_PER_USER: 0\n2025-05-21 09:44:15,219 INFO     31 task_executor_0b7116e22504_0 reported heartbeat: {&quot;name&quot;: &quot;task_executor_0b7116e22504_0&quot;, &quot;now&quot;: &quot;2025-05-21T09:44:15.218+08:00&quot;, &quot;boot_at&quot;: &quot;2025-05-21T09:44:15.183+08:00&quot;, &quot;pending&quot;: 0, &quot;lag&quot;: 0, &quot;done&quot;: 0, &quot;failed&quot;: 0, &quot;current&quot;: {}}\n2025-05-21 09:44:15,220 INFO     31 task_executor_5895627f6965_0 expired, removed\n</pre>\n\n**local system ifconfig output:**\n<pre><font color=\"#26A269\"><b>test@test-test-Product</b></font>:<font color=\"#12488B\"><b>~/ragflow/docker</b></font>$ ifconfig\nbr-58af26eb4c8f: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 172.18.0.1  netmask 255.255.0.0  broadcast 172.18.255.255\n        inet6 fe80::42:29ff:fe9c:4651  prefixlen 64  scopeid 0x20&lt;link&gt;\n        ether 02:42:29:9c:46:51  txqueuelen 0  (Ethernet)\n        RX packets 43  bytes 3249 (3.2 KB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 138  bytes 25774 (25.7 KB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\ndocker0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500\n        inet 172.17.0.1  netmask 255.255.0.0  broadcast 172.17.255.255\n        ether 02:42:e4:36:e0:39  txqueuelen 0  (Ethernet)\n        RX packets 0  bytes 0 (0.0 B)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 0  bytes 0 (0.0 B)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\neno2: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500\n        ether f4:6b:8c:8d:f0:51  txqueuelen 1000  (Ethernet)\n        RX packets 0  bytes 0 (0.0 B)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 0  bytes 0 (0.0 B)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\nlo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536\n        inet 127.0.0.1  netmask 255.0.0.0\n        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;\n        loop  txqueuelen 1000  (Local Loopback)\n        RX packets 546053380  bytes 41043432504 (41.0 GB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 546053380  bytes 41043432504 (41.0 GB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\nveth1a134ec: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet6 fe80::30ce:cff:fe19:2e4b  prefixlen 64  scopeid 0x20&lt;link&gt;\n        ether 32:ce:0c:19:2e:4b  txqueuelen 0  (Ethernet)\n        RX packets 10091  bytes 3035846 (3.0 MB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 15182  bytes 1593994 (1.5 MB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\nveth6680e22: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet6 fe80::5804:29ff:fe83:8ab4  prefixlen 64  scopeid 0x20&lt;link&gt;\n        ether 5a:04:29:83:8a:b4  txqueuelen 0  (Ethernet)\n        RX packets 13572  bytes 1415547 (1.4 MB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 8440  bytes 1356041 (1.3 MB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\nveth746de6e: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet6 fe80::8ca4:83ff:fe57:9851  prefixlen 64  scopeid 0x20&lt;link&gt;\n        ether 8e:a4:83:57:98:51  txqueuelen 0  (Ethernet)\n        RX packets 1571  bytes 172790 (172.7 KB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 1702  bytes 1684767 (1.6 MB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\nveth96306fb: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet6 fe80::a445:31ff:fe87:8512  prefixlen 64  scopeid 0x20&lt;link&gt;\n        ether a6:45:31:87:85:12  txqueuelen 0  (Ethernet)\n        RX packets 38  bytes 3641 (3.6 KB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 64  bytes 16521 (16.5 KB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\nvethe55ea48: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet6 fe80::1c7d:2fff:fee1:7208  prefixlen 64  scopeid 0x20&lt;link&gt;\n        ether 1e:7d:2f:e1:72:08  txqueuelen 0  (Ethernet)\n        RX packets 11  bytes 2326 (2.3 KB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 46  bytes 5809 (5.8 KB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\nwls1: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 10.103.162.176  netmask 255.255.254.0  broadcast 10.103.163.255\n        inet6 fe80::aac2:2af3:fd06:6095  prefixlen 64  scopeid 0x20&lt;link&gt;\n        ether 54:14:f3:c2:3a:3a  txqueuelen 1000  (Ethernet)\n        RX packets 50554633  bytes 7803146918 (7.8 GB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 50546209  bytes 4907462432 (4.9 GB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\n<font color=\"#26A269\"><b>test@test-test-Product</b></font>:<font color=\"#12488B\"><b>~/ragflow/docker</b></font>$ \n</pre>",
      "state": "open",
      "author": "Bob123Yang",
      "author_type": "User",
      "created_at": "2025-05-21T01:49:34Z",
      "updated_at": "2025-06-06T01:42:58Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 8,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7751/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7751",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7751",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:48.390846",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nTo log in to RAGFlow from another system, follow these steps:\n\n1. **Ensure Server Initialization**: First, make sure that the RAGFlow server is fully initialized. You can verify this by checking the server logs with the command `docker logs -f ragflow-server`. Look for the message in",
          "created_at": "2025-05-21T02:04:12Z"
        },
        {
          "author": "Bob123Yang",
          "body": "@dosu \n\nFrom the logs I pasted as above, please tell me which IP I can use to login RAGFlow from a remote system with the network connection available to RAGFlow server.",
          "created_at": "2025-05-21T02:43:46Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYou can use the IP address `172.18.0.6` to log in to RAGFlow from another system. Since RAGFlow is configured to listen on `0.0.0.0` and the HTTP port is set to `9380`, you should be able to access it using the URL `http://172.18.0.6:9380` <sup>[[1]](https://github.com/infiniflow/rag",
          "created_at": "2025-05-21T02:44:48Z"
        },
        {
          "author": "Bob123Yang",
          "body": "@dosu \n\nFail to access the RAGFlow using the URL http://172.18.0.6:9380 in the Firefox from the remote system and also fail to \"ping 172.18.0.6\" from the remote system.\n\nI can get reply if I ping 10.103.162.176 from the remote system but fail to ccess the RAGFlow using the URL http://10.103.162.176:",
          "created_at": "2025-05-21T03:05:17Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe IP address `172.18.0.6` is likely a Docker internal IP, which is not accessible from external networks. Instead, you should use the server's external IP, `10.103.162.176`, for remote access. Since you can ping `10.103.162.176` but cannot access RAGFlow, the issue might be related",
          "created_at": "2025-05-21T03:06:31Z"
        }
      ]
    },
    {
      "issue_number": 6546,
      "title": "[Feature Request]: Support Qdrant as vector DB in RagFlow",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\n\n```\n\n### Describe the feature you'd like\n\nQdrant is a vector similarity search engine and vector database. It provides a production-ready service with a convenient API for storing, searching, and managing points—vectors. Also, Qdrant has been widely integrated into other RAG engines. Hope RagFlow can support Qdrant as one of the vector database options.\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "CyrusCY",
      "author_type": "User",
      "created_at": "2025-03-26T07:11:51Z",
      "updated_at": "2025-06-05T16:20:26Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/6546/reactions",
        "total_count": 5,
        "+1": 5,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/6546",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/6546",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:48.621051",
      "comments": [
        {
          "author": "BadwomanCraZY",
          "body": "@CyrusCY Thanks a bunch for your suggestions on RAGFlow! 😊\n\nQdrant is indeed a really powerful database. We'll conduct a requirement review for it. If it's confirmed to be a cool feature, we'll complete its development in the subsequent versions.\n\nOnce again, we're extremely grateful for your suppor",
          "created_at": "2025-05-23T08:06:46Z"
        },
        {
          "author": "nPeppon",
          "body": "For what is worth, I second this, especially since we could also play with ColPali afterwards",
          "created_at": "2025-06-05T16:20:25Z"
        }
      ]
    },
    {
      "issue_number": 8035,
      "title": "[Feature Request]: Return number of used tokens from endpoints that use tokens",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\nI want to track the number of tokens used by the different requests made.\n```\n\n### Describe the feature you'd like\n\nAny endpoint that uses up tokens at a 3rd party AI provider should return the number of used tokens for the given action. Such endpoints would be e.g.:\n\n- POST `/api/v1/chats/{chat_id}/completions`\n- POST `/api/v1/agents/{agent_id}/completions`\n- POST `/api/v1/datasets/{dataset_id}/documents/{document_id}/chunks`\n\n### Describe implementation you've considered\n\nThis information is currently not returned by RAGFlow.\n\n### Documentation, adoption, use case\n\n```Markdown\nRecording more detailed statistics as just how many tokens where used last month in general.\n```\n\n### Additional information\n\nNot sure if it is possible just like that, given that RAGFlow might invoke several different services. I guess it should be a map of services to tokens then.",
      "state": "open",
      "author": "panzi",
      "author_type": "User",
      "created_at": "2025-06-03T20:56:16Z",
      "updated_at": "2025-06-05T15:29:47Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8035/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8035",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8035",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:48.801007",
      "comments": [
        {
          "author": "ZhenhangTung",
          "body": "Hi @panzi ! I'm the PM of RAGFlow. Could you share why do you want to track the number of tokens? That will help us understand the problem and provide the solution.",
          "created_at": "2025-06-04T09:45:50Z"
        },
        {
          "author": "panzi",
          "body": "AI services calculate costs based on tokens. We provide a sort of chatbot integration backed by RAGFlow and OpenAI and other LLMs. If we want to pass on the costs accurately to our customers we need to know how many tokens their invocations have cost. Alternatively getting such stats on a per knowle",
          "created_at": "2025-06-05T03:37:38Z"
        }
      ]
    },
    {
      "issue_number": 8062,
      "title": "[Question]: Is this meant to be '，' (U+FF0C)?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nIs this meant to be '，' (U+FF0C) or is it a mistake and it was meant to be ', ' (U+2C U+20)?\n\nhttps://github.com/infiniflow/ragflow/blob/ec60b322abfa0174da8125f46dccaf3da2c939bf/deepdoc/parser/resume/step_two.py#L559",
      "state": "open",
      "author": "panzi",
      "author_type": "User",
      "created_at": "2025-06-04T17:40:03Z",
      "updated_at": "2025-06-05T15:28:30Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8062/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8062",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8062",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:49.000599",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe use of '，' (U+FF0C), the full-width Chinese comma, at line 559 in `deepdoc/parser/resume/step_two.py` is intentional. This character is used as part of a regular expression to handle text normalization and tokenization for multilingual data, especially Chinese resumes, where punc",
          "created_at": "2025-06-04T17:42:32Z"
        },
        {
          "author": "panzi",
          "body": "It's not the parsing part, but the replacement part, though. Or is that the input to another parser at another point?",
          "created_at": "2025-06-04T17:44:45Z"
        },
        {
          "author": "ZhenhangTung",
          "body": "@panzi Hi. Thanks for pointing this out! You're absolutely right — currently, we use the fullwidth comma ， (U+FF0C) because our initial user base was primarily Chinese-speaking, and this punctuation is standard in CJK (Chinese, Japanese, Korean) contexts.\n\nHowever, as the community grows and more us",
          "created_at": "2025-06-05T02:31:10Z"
        },
        {
          "author": "panzi",
          "body": "I wasn't saying it's an issue. I just noticed that character in a lot of places where it was obviously wrong (I have submitted a pull request for those), but I also noticed this place and can't tell if it is meant to be like that here or not. Hence the `[Question]`. 😄 ",
          "created_at": "2025-06-05T15:28:29Z"
        }
      ]
    },
    {
      "issue_number": 5975,
      "title": "[Question]: AUTH <password> called without any password configured for the default user. Are you sure your configuration is correct? Failed to launch ragflow service from source",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI successfully built and ran the RAGFlow Docker image locally. However, when following the guidance to launch the service ​from source code, I encountered a Redis authentication error. The Redis passport are defined in the .env file. how to solve it?\n`During handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/xpa/project/ragflow/rag/utils/redis_conn.py\", line 215, in queue_consumer\n    group_info = self.REDIS.xinfo_groups(queue_name)\n  File \"/home/xpa/project/ragflow/.venv/lib/python3.10/site-packages/valkey/commands/core.py\", line 3810, in xinfo_groups\n    return self.execute_command(\"XINFO GROUPS\", name)\n  File \"/home/xpa/project/ragflow/.venv/lib/python3.10/site-packages/valkey/client.py\", line 564, in execute_command\n    conn = self.connection or pool.get_connection(command_name, **options)\n  File \"/home/xpa/project/ragflow/.venv/lib/python3.10/site-packages/valkey/connection.py\", line 1107, in get_connection\n    connection.connect()\n  File \"/home/xpa/project/ragflow/.venv/lib/python3.10/site-packages/valkey/connection.py\", line 314, in connect\n    self.on_connect()\n  File \"/home/xpa/project/ragflow/.venv/lib/python3.10/site-packages/valkey/connection.py\", line 379, in on_connect\n    auth_response = self.read_response()\n  File \"/home/xpa/project/ragflow/.venv/lib/python3.10/site-packages/valkey/connection.py\", line 546, in read_response\n    response = self._parser.read_response(disable_decoding=disable_decoding)\n  File \"/home/xpa/project/ragflow/.venv/lib/python3.10/site-packages/valkey/_parsers/resp2.py\", line 15, in read_response\n    result = self._read_response(disable_decoding=disable_decoding)\n  File \"/home/xpa/project/ragflow/.venv/lib/python3.10/site-packages/valkey/_parsers/resp2.py\", line 38, in _read_response\n    raise error\nvalkey.exceptions.AuthenticationError: AUTH <password> called without any password configured for the default user. Are you sure your configuration is correct?\n2025-03-12 16:05:14,915 ERROR    3133708 RedisDB.queue_consumer rag_flow_svr_queue got exception: AUTH <password> called without any password configured for the default user. Are you sure your configuration is correct?\nTraceback (most recent call last):\n  File \"/home/xpa/project/ragflow/rag/svr/task_executor.py\", line 170, in collect\n    redis_msg = next(UNACKED_ITERATOR)\nStopIteration`\n",
      "state": "open",
      "author": "liyubo-debug",
      "author_type": "User",
      "created_at": "2025-03-12T08:32:57Z",
      "updated_at": "2025-06-05T13:26:21Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/5975/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/5975",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/5975",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:49.248729",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "Did your password include some special charactor?\nWhat about changing to an easy one?",
          "created_at": "2025-03-13T02:30:38Z"
        },
        {
          "author": "liyubo-debug",
          "body": "> Did your password include some special charactor? What about changing to an easy one?\n\nThanks for your tip. Actually, I kept the default REDIS_PASSWORD = infini_rag_flow in the .env file. But the error is still exist.",
          "created_at": "2025-03-13T03:03:16Z"
        },
        {
          "author": "IllTamer",
          "body": "> Did your password include some special charactor? What about changing to an easy one?\n\nThe same error with default docker-compose.yml\n\n![Image](https://github.com/user-attachments/assets/af9c4688-0d99-4ae5-b585-74e47dea4b5e)",
          "created_at": "2025-03-25T15:39:48Z"
        },
        {
          "author": "decaMinCow",
          "body": "The same error with default docker-compose.yml",
          "created_at": "2025-04-16T06:22:54Z"
        },
        {
          "author": "zhaoblake",
          "body": "I got this error too!",
          "created_at": "2025-06-05T12:15:13Z"
        }
      ]
    },
    {
      "issue_number": 8007,
      "title": "[Bug]: 22:19:42 [ERROR][Exception]: Exceptions from Trio nursery (1 sub-exception) -- **ERROR**: POST predict: Post \"http://127.0.0.1:33395/completion\": EOF",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nge97fd2b5\n\n### RAGFlow image version\n\nv0.19.x-40-ge97fd2b5 full\n\n### Other environment information\n\n```Markdown\nRTX A2000, Running on Docker\n```\n\n### Actual behavior\n\nBegin at:\nMon, 02 Jun 2025 18:14:20 GMT\nDuration:\n14728.60 s\nProgress:\n18:14:22 Task has been received.\n18:15:27 Page(1~13): OCR started\n18:15:45 Page(1~13): OCR finished (17.60s)\n18:16:14 Page(1~13): Layout analysis (28.97s)\n18:16:14 Page(1~13): Text extraction (29.04s)\n18:16:28 Page(1~13): Start to generate keywords for every chunk ...\n18:18:40 Page(1~13): Keywords generation 195 chunks completed in 132.48s\n18:18:40 Page(1~13): Start to generate questions for every chunk ...\n18:22:41 Page(1~13): Question generation 195 chunks completed in 240.64s\n18:22:41 Page(1~13): Generate 195 chunks\n18:22:44 Page(1~13): Embedding chunks (3.47s)\n18:22:55 Page(1~13): Indexing done (10.29s). Task done (512.39s)\n18:14:41 Task has been received.\n18:14:44 Page(13~25): OCR started\n18:15:00 Page(13~25): OCR finished (16.73s)\n18:15:23 Page(13~25): Layout analysis (22.43s)\n18:15:23 Page(13~25): Text extraction (22.79s)\n18:15:35 Page(13~25): Start to generate keywords for every chunk ...\n18:16:17 Page(13~25): Keywords generation 230 chunks completed in 41.94s\n18:16:17 Page(13~25): Start to generate questions for every chunk ...\n18:18:09 Page(13~25): Question generation 230 chunks completed in 112.58s\n18:18:10 Page(13~25): Generate 230 chunks\n18:18:14 Page(13~25): Embedding chunks (4.85s)\n18:18:37 Page(13~25): Indexing done (22.64s). Task done (236.46s)\n18:14:41 Task has been received.\n18:16:17 Page(61~73): OCR started\n18:16:27 Page(61~73): OCR finished (10.33s)\n18:16:54 Page(61~73): Layout analysis (26.22s)\n18:16:54 Page(61~73): Text extraction (26.31s)\n18:17:10 Page(61~73): Start to generate keywords for every chunk ...\n18:19:31 Page(61~73): Keywords generation 331 chunks completed in 140.61s\n18:19:31 Page(61~73): Start to generate questions for every chunk ...\n18:26:06 Page(61~73): Question generation 331 chunks completed in 395.17s\n18:26:06 Page(61~73): Generate 331 chunks\n18:26:12 Page(61~73): Embedding chunks (5.52s)\n18:26:28 Page(61~73): Indexing done (16.69s). Task done (707.03s)\n18:14:41 Task has been received.\n18:16:59 Page(37~49): OCR started\n18:17:09 Page(37~49): OCR finished (10.06s)\n18:17:35 Page(37~49): Layout analysis (25.91s)\n18:17:35 Page(37~49): Text extraction (25.96s)\n18:17:51 Page(37~49): Start to generate keywords for every chunk ...\n18:20:24 Page(37~49): Keywords generation 375 chunks completed in 152.80s\n18:20:24 Page(37~49): Start to generate questions for every chunk ...\n18:29:48 Page(37~49): Question generation 375 chunks completed in 563.96s\n18:29:49 Page(37~49): Generate 375 chunks\n18:29:55 Page(37~49): Embedding chunks (6.57s)\n18:30:51 Page(37~49): Indexing done (55.81s). Task done (970.12s)\n18:14:41 Task has been received.\n18:17:40 Page(25~37): OCR started\n18:17:49 Page(25~37): OCR finished (8.79s)\n18:18:13 Page(25~37): Layout analysis (24.25s)\n18:18:13 Page(25~37): Text extraction (24.38s)\n18:18:31 Page(25~37): Start to generate keywords for every chunk ...\n18:21:09 Page(25~37): Keywords generation 261 chunks completed in 158.01s\n18:21:09 Page(25~37): Start to generate questions for every chunk ...\n18:33:44 Page(25~37): Question generation 261 chunks completed in 754.62s\n18:33:44 Page(25~37): Generate 261 chunks\n18:33:49 Page(25~37): Embedding chunks (4.59s)\n18:34:02 Page(25~37): Indexing done (13.68s). Task done (1161.46s)\n18:14:41 Task has been received.\n18:18:18 Page(49~61): OCR started\n18:18:29 Page(49~61): OCR finished (10.13s)\n18:18:55 Page(49~61): Layout analysis (26.05s)\n18:18:55 Page(49~61): Text extraction (26.34s)\n18:19:10 Page(49~61): Start to generate keywords for every chunk ...\n18:23:30 Page(49~61): Keywords generation 323 chunks completed in 260.04s\n18:23:30 Page(49~61): Start to generate questions for every chunk ...\n18:36:55 Page(49~61): Question generation 323 chunks completed in 805.44s\n18:36:55 Page(49~61): Generate 323 chunks\n18:37:01 Page(49~61): Embedding chunks (5.55s)\n18:37:16 Page(49~61): Indexing done (15.19s). Task done (1354.89s)\n18:14:41 Task has been received.\n18:18:59 Page(73~85): OCR started\n18:19:10 Page(73~85): OCR finished (10.63s)\n18:19:34 Page(73~85): Layout analysis (23.97s)\n18:19:34 Page(73~85): Text extraction (24.24s)\n18:19:50 Page(73~85): Start to generate keywords for every chunk ...\n18:27:07 Page(73~85): Keywords generation 330 chunks completed in 437.78s\n18:27:08 Page(73~85): Start to generate questions for every chunk ...\n18:40:08 Page(73~85): Question generation 330 chunks completed in 780.08s\n18:40:08 Page(73~85): Generate 330 chunks\n18:40:13 Page(73~85): Embedding chunks (5.45s)\n18:40:29 Page(73~85): Indexing done (15.30s). Task done (1547.09s)\n18:14:42 Task has been received.\n18:19:39 Page(97~109): OCR started\n18:19:48 Page(97~109): OCR finished (9.00s)\n18:20:13 Page(97~109): Layout analysis (24.64s)\n18:20:13 Page(97~109): Text extraction (24.89s)\n18:20:27 Page(97~109): Start to generate keywords for every chunk ...\n18:30:48 Page(97~109): Keywords generation 295 chunks completed in 620.71s\n18:30:48 Page(97~109): Start to generate questions for every chunk ...\n18:44:47 Page(97~109): Question generation 295 chunks completed in 839.32s\n18:44:47 Page(97~109): Generate 295 chunks\n18:44:53 Page(97~109): Embedding chunks (5.15s)\n18:45:09 Page(97~109): Indexing done (16.60s). Task done (1827.16s)\n18:14:42 Task has been received.\n18:20:17 Page(85~97): OCR started\n18:20:27 Page(85~97): OCR finished (9.62s)\n18:20:53 Page(85~97): Layout analysis (25.65s)\n18:20:53 Page(85~97): Text extraction (25.72s)\n18:21:04 Page(85~97): Start to generate keywords for every chunk ...\n18:31:33 Page(85~97): Keywords generation 264 chunks completed in 628.17s\n18:31:33 Page(85~97): Start to generate questions for every chunk ...\n18:46:55 Page(85~97): Question generation 264 chunks completed in 922.41s\n18:46:55 Page(85~97): Generate 264 chunks\n18:47:00 Page(85~97): Embedding chunks (4.25s)\n18:47:14 Page(85~97): Indexing done (14.50s). Task done (1952.58s)\n18:14:42 Task has been received.\n18:20:57 Page(109~121): OCR started\n18:21:14 Page(109~121): OCR finished (17.02s)\n18:21:37 Page(109~121): Layout analysis (22.94s)\n18:21:37 Page(109~121): Text extraction (23.25s)\n18:21:49 Page(109~121): Start to generate keywords for every chunk ...\n18:34:24 Page(109~121): Keywords generation 321 chunks completed in 755.37s\n18:34:24 Page(109~121): Start to generate questions for every chunk ...\n18:51:43 Page(109~121): Question generation 321 chunks completed in 1038.71s\n18:51:43 Page(109~121): Generate 321 chunks\n18:51:48 Page(109~121): Embedding chunks (4.87s)\n18:52:03 Page(109~121): Indexing done (14.66s). Task done (2240.08s)\n18:18:37 Task has been received.\n18:21:40 Page(121~133): OCR started\n18:21:54 Page(121~133): OCR finished (14.25s)\n18:22:18 Page(121~133): Layout analysis (23.78s)\n18:22:18 Page(121~133): Text extraction (23.86s)\n18:22:21 Page(121~133): Start to generate keywords for every chunk ...\n18:34:33 Page(121~133): Keywords generation 37 chunks completed in 731.82s\n18:34:33 Page(121~133): Start to generate questions for every chunk ...\n18:52:06 Page(121~133): Question generation 37 chunks completed in 1053.28s\n18:52:07 Page(121~133): Generate 37 chunks\n18:52:09 Page(121~133): Embedding chunks (1.13s)\n18:52:11 Page(121~133): Indexing done (1.96s). Task done (2013.42s)\n18:22:55 Task has been received.\n18:22:55 Page(133~145): OCR started\n18:23:03 Page(133~145): OCR finished (7.54s)\n18:23:28 Page(133~145): Layout analysis (24.81s)\n18:23:28 Page(133~145): Text extraction (25.19s)\n18:23:38 Page(133~145): Start to generate keywords for every chunk ...\n18:37:28 Page(133~145): Keywords generation 259 chunks completed in 829.47s\n18:37:28 Page(133~145): Start to generate questions for every chunk ...\n18:54:17 Page(133~145): Question generation 259 chunks completed in 1008.87s\n18:54:17 Page(133~145): Generate 259 chunks\n18:54:23 Page(133~145): Embedding chunks (5.61s)\n18:54:35 Page(133~145): Indexing done (12.14s). Task done (1900.16s)\n18:26:29 Task has been received.\n18:26:29 Page(145~157): OCR started\n18:27:00 Page(145~157): OCR finished (31.00s)\n18:27:24 Page(145~157): Layout analysis (24.42s)\n18:27:24 Page(145~157): Text extraction (24.55s)\n18:27:45 Page(145~157): Start to generate keywords for every chunk ...\n18:42:28 Page(145~157): Keywords generation 874 chunks completed in 882.74s\n18:42:28 Page(145~157): Start to generate questions for every chunk ...\n19:02:22 Page(145~157): Question generation 874 chunks completed in 1193.92s\n19:02:22 Page(145~157): Generate 874 chunks\n19:02:36 Page(145~157): Embedding chunks (13.75s)\n19:03:18 Page(145~157): Indexing done (41.56s). Task done (2209.15s)\n18:30:51 Task has been received.\n18:30:52 Page(157~167): OCR started\n18:31:07 Page(157~167): OCR finished (15.19s)\n18:31:26 Page(157~167): Layout analysis (18.98s)\n18:31:26 Page(157~167): Text extraction (19.08s)\n18:31:54 Page(157~167): Start to generate keywords for every chunk ...\n18:49:47 Page(157~167): Keywords generation 1376 chunks completed in 1072.87s\n18:49:48 Page(157~167): Start to generate questions for every chunk ...\n19:12:30 Page(157~167): Question generation 1376 chunks completed in 1362.05s\n19:12:30 Page(157~167): Generate 1376 chunks\n19:12:50 Page(157~167): Embedding chunks (19.77s)\n19:13:46 Page(157~167): Indexing done (56.12s). Task done (2574.18s)\n19:13:48 created task raptor\n21:52:11 Task has been received.\n22:19:42 [ERROR][Exception]: Exceptions from Trio nursery (1 sub-exception) -- **ERROR**: POST predict: Post \"http://127.0.0.1:33395/completion\": EOF\n\nSeemed to work ok but couldnt send the notification to the completion endpoint? Some Docker servers dont accept 127.0.0.1 due to networking - this should be renamed to be the ragflow-server container I guess?\n\nWhat is the payload for Parse completion so I can mark these as complete manually via curl?\n\n### Expected behavior\n\nParsing should mark the document as complete\n\n### Steps to reproduce\n\n```Markdown\nSimple PDF Parse with RAPTOR only\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "voycey",
      "author_type": "User",
      "created_at": "2025-06-02T22:29:21Z",
      "updated_at": "2025-06-05T11:56:15Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 8,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8007/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8007",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8007",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:49.457041",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe EOF error when posting to http://127.0.0.1:33395/completion is likely due to Docker networking: 127.0.0.1 inside a container refers to the container itself, not the host or other containers. For inter-container communication, use the Docker Compose service name (e.g., ragflow-ser",
          "created_at": "2025-06-02T22:31:36Z"
        },
        {
          "author": "voycey",
          "body": "@dosu how do I mark an etnire document as complete? It seems that is where it is failing",
          "created_at": "2025-06-02T22:34:39Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nTo mark an entire document as complete in RAGFlow, you need to update its status using the API. The relevant endpoint is `/change_status`, which requires a POST request with the following JSON payload:\n\n```json\n{\n  \"doc_id\": \"<YOUR_DOCUMENT_ID>\",\n  \"status\": \"1\"\n}\n```\n\nHere, `\"status",
          "created_at": "2025-06-02T22:36:36Z"
        },
        {
          "author": "voycey",
          "body": "@dosubot \n\n```\nERROR    22 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.\nTraceback (most recent call last):\n  File \"/ragflow/.venv/lib/python3.10/site-packages/flask/app.py\", line 880, in full_dispatch_request\n",
          "created_at": "2025-06-05T10:07:33Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYou can update the document status directly in the database or Elasticsearch, bypassing the API.\n\nFor the database:  \nThe document status is stored in the document table as the status field (CharField, \"1\" = valid/active, \"0\" = wasted). You can run a SQL query like:\n```sql\nUPDATE doc",
          "created_at": "2025-06-05T10:10:01Z"
        }
      ]
    },
    {
      "issue_number": 5350,
      "title": "[Question]: Does ragflow support the self-built OceanBase database?",
      "body": "### Describe your problem\n\nDoes ragflow support the self-built OceanBase database?",
      "state": "open",
      "author": "Lee1985",
      "author_type": "User",
      "created_at": "2025-02-25T12:14:36Z",
      "updated_at": "2025-06-05T10:12:06Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/5350/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/5350",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/5350",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:49.698515",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "Not supported so far.",
          "created_at": "2025-02-26T02:44:33Z"
        },
        {
          "author": "sunhongzhi315",
          "body": "when support it ?",
          "created_at": "2025-06-05T10:12:05Z"
        }
      ]
    },
    {
      "issue_number": 1268,
      "title": "[Feature Request]: deploy using WSGI.",
      "body": "### Is there an existing issue for the same feature request?\n\n- [X] I have checked the existing issues.\n\n### Is your feature request related to a problem?\n\n```Markdown\n./entrypoint.sh: line 25: 18337 Killed                  $PY api/ragflow_server.py\r\n[WARNING] [2024-06-24 07:59:24,499] [synonym.__init__] [line:24]: Realtime synonym is disabled, since no redis connection.\r\nSUM: [WARNING] Load term.freq FAIL!\r\n\r\n    ____                 ______ __               \r\n   / __ \\ ____ _ ____ _ / ____// /____  _      __\r\n  / /_/ // __ `// __ `// /_   / // __ \\| | /| / /\r\n / _, _// /_/ // /_/ // __/  / // /_/ /| |/ |/ / \r\n/_/ |_| \\__,_/ \\__, //_/    /_/ \\____/ |__/|__/  \r\n              /____/                             \r\n\r\n    \r\n[INFO] [2024-06-24 07:59:36,021] [_internal._log] [line:96]: WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.\n```\n\n\n### Describe the feature you'd like\n\nrun_simple causes the service to be killed, interrupting the service. I hope to be able to deploy using WSGI.\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n_No response_\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "shichunshan",
      "author_type": "User",
      "created_at": "2024-06-25T02:18:49Z",
      "updated_at": "2025-06-05T08:06:16Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 18,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/1268/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/1268",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/1268",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:51.624229",
      "comments": [
        {
          "author": "r1ng13",
          "body": "想问下这个问题解决了吗",
          "created_at": "2024-07-11T10:05:58Z"
        },
        {
          "author": "bwnjnOEI",
          "body": "+1",
          "created_at": "2024-07-13T12:06:55Z"
        },
        {
          "author": "a1299646329",
          "body": "+1",
          "created_at": "2024-09-30T08:22:00Z"
        },
        {
          "author": "tuoxiebushuijiao",
          "body": "+1\r\n",
          "created_at": "2024-10-22T07:34:36Z"
        },
        {
          "author": "lichanghai",
          "body": "+1\n",
          "created_at": "2025-03-13T12:35:01Z"
        }
      ]
    },
    {
      "issue_number": 5099,
      "title": "[Bug]: the knowledge graph is not displayed on the webpage",
      "body": "### Is there an existing issue for the same bug?\n\n- [x] I have checked the existing issues.\n\n### RAGFlow workspace code commit ID\n\nlatest\n\n### RAGFlow image version\n\nlatest\n\n### Other environment information\n\n```Markdown\nwindows wsl Ubuntu24.04,source code deployment,google browser\n```\n\n### Actual behavior\n\n![Image](https://github.com/user-attachments/assets/2c7c9a5e-140e-468e-824f-52951c2aa2cc)\nthe interface can return data,but the knowledge graph is not displayed on this webpage\n\n<img width=\"507\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/8d766625-3d7f-428f-a0cd-650961bf9fe4\" />\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nThe second question is the embedding model request from siliconflow，I have a detail examination for apikey and request url，which no problem，but the error are sill occured as above graph\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "3414391918",
      "author_type": "User",
      "created_at": "2025-02-18T15:51:24Z",
      "updated_at": "2025-06-05T03:56:08Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 11,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/5099/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/5099",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/5099",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:51.876824",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "Give it a try: pull the `nightly` version of docker image.",
          "created_at": "2025-02-19T04:38:08Z"
        },
        {
          "author": "3414391918",
          "body": "> Give it a try: pull the `nightly` version of docker image.\n\nThe problem are still not be solved after I pull the latest code,my deploy method is source code deployment",
          "created_at": "2025-02-19T14:11:59Z"
        },
        {
          "author": "3414391918",
          "body": "> Give it a try: pull the `nightly` version of docker image.\n\nI am sure that the back-end interface returns data. The problem should be the logic of the front-end display of the knowledge graph.",
          "created_at": "2025-02-19T14:17:36Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Could you attach this json file here?",
          "created_at": "2025-02-20T06:31:26Z"
        },
        {
          "author": "3414391918",
          "body": "> Could you attach this json file here?\n\nyes, this is the json file from the request return\n\n[graph.json](https://github.com/user-attachments/files/18888130/graph.json)",
          "created_at": "2025-02-20T14:37:40Z"
        }
      ]
    },
    {
      "issue_number": 8075,
      "title": "[Question]: Update chunk:Q&A must be separated by TAB/ENTER key",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nWhen I Call Update chunk API,I Have a issue:Q&A must be separated by TAB/ENTER key.\nPUT /api/v1/datasets/{dataset_id}/documents/{document_id}/chunks/{chunk_id}\nrequire example：\n{\n\t\"content\": \"Question:今天成都天气怎么样？Answer: 今日成都天阴天，空气湿度18\",\n    \"important_keywords\": [],\n\t\"available\": true\n}\n\nresponse：{\n    \"code\": 102,\n    \"message\": \"Q&A must be separated by TAB/ENTER key.\"\n}",
      "state": "closed",
      "author": "wngbob",
      "author_type": "User",
      "created_at": "2025-06-05T03:32:49Z",
      "updated_at": "2025-06-05T03:38:20Z",
      "closed_at": "2025-06-05T03:38:19Z",
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8075/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8075",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8075",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:52.078960",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @wngbob! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThe Update chunk API requires the question and answer in the content field to be separated by either a TAB (`\\t`) or ENTER (`\\n`) character. For example, your content should look ",
          "created_at": "2025-06-05T03:35:01Z"
        },
        {
          "author": "wngbob",
          "body": "Thx!",
          "created_at": "2025-06-05T03:38:04Z"
        },
        {
          "author": "wngbob",
          "body": "> Hi [@wngbob](https://github.com/wngbob)! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n> \n> The Update chunk API requires the question and answer in the content field to be separated by either a TAB (`\\t`) or ENTER (`\\n`) character. For example, your content should look",
          "created_at": "2025-06-05T03:38:19Z"
        }
      ]
    },
    {
      "issue_number": 8059,
      "title": "[Question]: In version 0.19, the Python API does not support calling custom embedded models.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n以下这个测试用例没法通过，我用xinference运行了自定义的嵌入式模型， 名称为custom-embedding，但没有通过create_dataset接口调用\n`\n    def test_create_dataset_embed():\n        rag = RAGFlow(API_KEY, HOST_ADDRESS)\n        rag.create_dataset(\"test_create_dataset_embed\",embedding_model=\"custom-embedding@Xinference\")\n`\n报错图片：\n\n![Image](https://github.com/user-attachments/assets/89a0af6a-9df0-42fa-89db-bc68f921d0f1)",
      "state": "closed",
      "author": "web3aipro",
      "author_type": "User",
      "created_at": "2025-06-04T14:24:47Z",
      "updated_at": "2025-06-05T02:39:49Z",
      "closed_at": "2025-06-05T02:39:49Z",
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 18,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8059/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8059",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8059",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:52.257636",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nRAGFlow v0.19 does allow integration of custom embedding models, but there are important limitations and requirements. The Python API’s `create_dataset` method accepts an `embedding_model` parameter, but the model you specify (e.g., `\"custom-embedding@Xinference\"`) must be registered",
          "created_at": "2025-06-04T14:28:26Z"
        },
        {
          "author": "web3aipro",
          "body": "This is version 0.18\n`\ndef create_dataset(self, name: str, avatar: str = \"\", description: str = \"\", embedding_model:str = \"BAAI/bge-large-zh-v1.5\",\n                       language: str = \"English\",\n                       permission: str = \"me\",chunk_method: str = \"naive\",\n                       pars",
          "created_at": "2025-06-04T14:55:14Z"
        },
        {
          "author": "web3aipro",
          "body": "> This is version 0.18 `def create_dataset(self, name: str, avatar: str = \"\", description: str = \"\", embedding_model:str = \"BAAI/bge-large-zh-v1.5\", language: str = \"English\", permission: str = \"me\",chunk_method: str = \"naive\", parser_config: DataSet.ParserConfig = None) -> DataSet:`\n> \n> but. versi",
          "created_at": "2025-06-04T14:56:32Z"
        },
        {
          "author": "web3aipro",
          "body": "这个问题应该是个bug，需要对api\\apps\\sdk\\dataset.py两处代码进行修改，可以正常运行。代码修改处如图\n\n![Image](https://github.com/user-attachments/assets/c222a9fc-dfd2-4a43-8cb8-ef96d50e4c4a)\n\n![Image](https://github.com/user-attachments/assets/efc9fecc-eab3-4c1a-a112-acae4e390e17)\n\n不确定是否会影响功能，0.19的bug也太多了",
          "created_at": "2025-06-04T15:24:11Z"
        },
        {
          "author": "web3aipro",
          "body": "![Image](https://github.com/user-attachments/assets/dadb2ae7-751c-4ca8-9eac-75bd062169e5)，感觉界面都没法加载自定义的嵌入式模型",
          "created_at": "2025-06-04T15:25:58Z"
        }
      ]
    },
    {
      "issue_number": 8061,
      "title": "[Feature Request]: user_default_llm supports to configure different model factory for each type model",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\nCurrently, it seems like the user_default_llm would ONLY support one single model factory to provide multiple models, e.g. QWen to provide both chat model, embedding model, rerank model etc. It would be great if we could support to configure different model factory for each type model.\n```\n\n### Describe the feature you'd like\n\nConfigure different model factory for each type model in the service config yaml so that the new sign-up users would have these default llm models to use.\n\n### Describe implementation you've considered\n\nlike this ?\n\n```\nuser_default_llm:\n   chat_model:\n     model: 'qwen-plus'\n     factory: 'Tongyi-Qianwen'\n     api_key: 'sk-xxxxxxxxxxxxx'\n     base_url: 'xxx'\n     max_tokens: 65536\n  embedding_model:\n     model: 'BAAI/bge-large-...'\n     factory: 'Tongyi-Qianwen'\n     api_key: 'sk-xxxxxxxxxxxxx'\n     base_url: 'xxx'\n     max_tokens: 65536\n  ...\n```\n\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "Colstuwjx",
      "author_type": "User",
      "created_at": "2025-06-04T14:58:43Z",
      "updated_at": "2025-06-05T02:36:05Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8061/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8061",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8061",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:52.469242",
      "comments": [
        {
          "author": "ZhenhangTung",
          "body": "@Colstuwjx Thanks for the feedback and will evaluate it later. ",
          "created_at": "2025-06-05T02:36:04Z"
        }
      ]
    },
    {
      "issue_number": 4016,
      "title": "[Feature Request]: Batch add chunks",
      "body": "### Is there an existing issue for the same feature request?\r\n\r\n- [X] I have checked the existing issues.\r\n\r\n### Is your feature request related to a problem?\r\n\r\n```Markdown\r\nWe do our own automated preprocessing of somewhat big data sets. Uploading it all as a single generated XSLX document would be too big. We need to record the relation of chunk IDs to our own database entries anyway, so we can properly update the chunks without re-doing everything.\r\n```\r\n\r\n\r\n### Describe the feature you'd like\r\n\r\nAPI method to batch add multiple chunks at once.\r\n\r\n```Python\r\nDocument.add_chunks(chunks: list[str]) -> list[str]\r\n```\r\n\r\nThe return value are the new chunk IDs, correctly correlated to the chunks as passed as the parameter.\r\n\r\nAlternatively including the `important_keywords` parameter and returning `Chunk` objects:\r\n\r\n```Python\r\nfrom typing import TypedDict, NotRequired\r\n\r\nclass ChunkParams(TypedDict):\r\n    content: str\r\n    important_keywords: NotRequired[str]\r\n\r\nDocument.add_chunks(chunks: list[ChunkParams]) -> list[Chunk]\r\n```\r\n\r\n### Describe implementation you've considered\r\n\r\n_No response_\r\n\r\n### Documentation, adoption, use case\r\n\r\n_No response_\r\n\r\n### Additional information\r\n\r\n_No response_",
      "state": "open",
      "author": "panzi",
      "author_type": "User",
      "created_at": "2024-12-12T20:38:10Z",
      "updated_at": "2025-06-05T02:22:10Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/4016/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/4016",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/4016",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:52.666842",
      "comments": [
        {
          "author": "which-W",
          "body": "@panzi \n👋 Thanks a lot for your suggestion, and apologies for the late reply!\n\nWe’ve added support for the batch upload chunk API 🧩 — this should help address the issue you mentioned. When you get a chance, feel free to check it out and let us know if it works for your case.\n\nIf everything looks goo",
          "created_at": "2025-06-03T06:53:28Z"
        },
        {
          "author": "panzi",
          "body": "In which version was it added? Where is it documented?",
          "created_at": "2025-06-03T13:24:27Z"
        },
        {
          "author": "which-W",
          "body": "@panzi We've made some changes related to chunk handling in our REST API. You can check out the latest updates in the documentation 📘.\n\n",
          "created_at": "2025-06-05T02:22:10Z"
        }
      ]
    },
    {
      "issue_number": 7901,
      "title": "[Feature Request]: when will Langfuse support be added to the Agent? Is there a plan in the roadmap to implement a Q&A trace?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\nI'm always frustrated When I want to track the trace data of a Q&A of the Agent through langFuse, in the actual test results of version 0.19.0, there will be multiple trace data in one Q&A\n```\n\n### Describe the feature you'd like\n\n\nI expect the data from a Q&A session to be fully visible in one trace\n\n### Describe implementation you've considered\n\nOn the basis of the existing Langfuse implementation, extend it to the agent scenario and support multiple LLM data to use the same trace ID\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "guopengdreams",
      "author_type": "User",
      "created_at": "2025-05-28T02:27:56Z",
      "updated_at": "2025-06-05T02:20:40Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7901/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7901",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7901",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:52.834699",
      "comments": [
        {
          "author": "ZhenhangTung",
          "body": "@guopengdreams Langfuse won't be added to RAGFlow for now, but I understand your problem. We will discuss internally to see how can we solve your problem. If you can give us more details or screenshots, that will help a lot. Thanks!!!",
          "created_at": "2025-05-28T04:20:12Z"
        },
        {
          "author": "ZhenhangTung",
          "body": "@guopengdreams What kind of data is important to you?",
          "created_at": "2025-05-29T03:20:51Z"
        },
        {
          "author": "guopengdreams",
          "body": "I have an agent who generates multiple traces in langfuse for one question. I hope to generate only one trace for one question, the key is to generate only one trace for one question.\n\n![Image](https://github.com/user-attachments/assets/de46b5d7-cd06-42d1-b013-f2559c226e27)\n![Image](https://github.c",
          "created_at": "2025-06-05T02:20:39Z"
        }
      ]
    },
    {
      "issue_number": 8067,
      "title": "[Bug]: Python SDK Document.update() doesn't refresh object's internal data",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nx\n\n### RAGFlow image version\n\nx\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nThis appears similar to issue #8057\n\n# PoC script \n```python\nfrom ragflow_sdk import RAGFlow\n\nrag = RAGFlow(\"ragflow-E2OThiZWJjNDE0ZDExZjBiOWI3MTZkZm\", \"http://127.0.0.1:9380\")\n\ndataset = rag.create_dataset(\"test_create_dataset\")\nblob = b\"Sample document content for test.\"\ndocument_infos = []\ndocument_infos.append({\"display_name\": \"test_1.txt\", \"blob\": blob})\n\ndocs = dataset.upload_documents(document_infos)\n\nfor doc in docs:\n    doc.update({\"name\": \"update.txt\"})\n    print(doc.name)\n```\n# result\n```\ntest_1.txt\n```\n\n# expected\n```\nupdate.txt\n```\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\n1. Create DataSet instance\n2. Create Document instance\n2. Call update() with new data\n3. Object attributes remain unchanged\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "asiroliu",
      "author_type": "User",
      "created_at": "2025-06-05T01:58:47Z",
      "updated_at": "2025-06-05T02:00:53Z",
      "closed_at": "2025-06-05T02:00:36Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8067/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8067",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8067",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:53.012075",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe behavior you're seeing is expected based on how the RAGFlow Python SDK is implemented. The Document.update() method updates the document in the database, but it does not automatically refresh the attributes of the in-memory Python object. This is a common pattern with ORMs like p",
          "created_at": "2025-06-05T02:00:52Z"
        }
      ]
    },
    {
      "issue_number": 7836,
      "title": "[Question]: white screen for 3rd layer pages",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nwhen visit some 3rd layer pages, the page display for a second and then goes to a white screen.\nI uploaded a video to show how it happen.\n\nit happened from v.0.18.0 and still in 0.19.0\nit happened for all my browsers\nhttps://github.com/user-attachments/assets/04bb342a-43b8-42b3-a6a3-78fe3d2cf272\n\nbrowser dev console shows some error as well\n![Image](https://github.com/user-attachments/assets/84c6bcb3-688b-44d6-935b-3744082dffa7)",
      "state": "open",
      "author": "stevenhe1988",
      "author_type": "User",
      "created_at": "2025-05-25T04:41:12Z",
      "updated_at": "2025-06-05T01:43:47Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7836/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7836",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7836",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:53.187749",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nBased on your description and the information available, here’s what I found regarding the white screen issue on 3rd layer pages:\n\n- There are no existing issues or discussions in the repository that directly address this specific white screen problem.\n- The error in your browser con",
          "created_at": "2025-05-25T04:46:27Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Could you specify which page does that happen on?",
          "created_at": "2025-05-26T02:07:29Z"
        },
        {
          "author": "stevenhe1988",
          "body": "it happens on a settings page of knowledge base, and \"set default model\" page in model settings. for other pages, I may need a double check after work. I uploaded a video before in this link: https://github.com/user-attachments/assets/04bb342a-43b8-42b3-a6a3-78fe3d2cf272. It might be helpful to unde",
          "created_at": "2025-05-26T02:23:34Z"
        },
        {
          "author": "ziming93",
          "body": "I encountered the same white screen issue when upgrading from version 0.17.2 to 0.19. After some investigation, I found a temporary workaround that might help.\n\nTry running the following SQL command in your MySQL database:\n\n```sql\nDELETE FROM tenant_llm WHERE llm_name='BAAI/bge-reranker-v2-m3';\n```\n",
          "created_at": "2025-06-05T01:43:46Z"
        }
      ]
    },
    {
      "issue_number": 8057,
      "title": "[Bug]: Python SDK DataSet.update() doesn't refresh object's internal data",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nx\n\n### RAGFlow image version\n\nx\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\n# PoC script \n```python\nfrom ragflow_sdk import RAGFlow\n\nrag = RAGFlow(\"ragflow-QwZGQ2MTY0NDEzNTExZjA5NjdjMWEwNG\", \"http://127.0.0.1:9380\")\n\ndataset = rag.create_dataset(\"test_create_dataset\")\ndataset.update({\"name\": \"updated_dataset\"})\n\nprint(dataset.name)\n```\n# result\n```\ntest_create_dataset\n```\n\n# expected\n```\nupdated_dataset\n```\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\n1. Create DataSet instance\n2. Call update() with new data\n3. Object attributes remain unchanged\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "asiroliu",
      "author_type": "User",
      "created_at": "2025-06-04T13:19:34Z",
      "updated_at": "2025-06-05T01:42:25Z",
      "closed_at": "2025-06-05T01:42:25Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8057/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8057",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8057",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:53.404306",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe behavior you're seeing is due to how the DataSet.update() method is implemented in the Python SDK. The method sends a PUT request to update the dataset on the server, but it does not update the local object's attributes after the server responds. As a result, the local DataSet in",
          "created_at": "2025-06-04T13:22:04Z"
        }
      ]
    },
    {
      "issue_number": 4593,
      "title": "[Bug]: The system misrecognizes the language model and image2text",
      "body": "### Is there an existing issue for the same bug?\n\n- [x] I have checked the existing issues.\n\n### RAGFlow workspace code commit ID\n\nc5c0dd2\n\n### RAGFlow image version\n\nc5c0dd2\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\n<img width=\"509\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/d81fc4bb-e8af-4682-b8c6-31951f0bcadb\" />\n\n### Expected behavior\n\n\nqwen2:7b is a chat model, but it is identified as an image2text model here. Why is this? \n\n### Steps to reproduce\n\n```Markdown\nI used ollama run qwen2:7b to pull the language model and encountered this problem when pulling the model using Model providers\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "ChangQingYan85512010613",
      "author_type": "User",
      "created_at": "2025-01-22T21:40:54Z",
      "updated_at": "2025-06-04T23:24:16Z",
      "closed_at": "2025-01-22T21:45:56Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/4593/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/4593",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/4593",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:53.601525",
      "comments": [
        {
          "author": "CarlosPinedaT",
          "body": "@ChangQingYan85512010613 How did you solve it? I have the same error!",
          "created_at": "2025-06-04T23:24:15Z"
        }
      ]
    },
    {
      "issue_number": 7688,
      "title": "[Question]: How to correctly connect RAGFlow with Open WebUI without HTTP requests?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI am running either RAGFlow and Open WebUI services via docker containers in the same network. This is the connection function I am using to connect to a RAGFlow Agent using Open WebUI:\n`  def __init__(self):\n        self.type = \"pipe\"\n        self.id = \"ragflow_agent_pipe\"\n        self.name = \"RAGFlow Agent Pipe\"\n        self.valves = self.Valves()\n        self.session_id = None\n\n    def pipe(self, body: dict, __user__: dict):\n        messages = body.get(\"messages\", [])\n        if not messages:\n            return \"No input provided.\"\n\n        # Procesamiento de mensajes y contexto (igual que antes)\n        history_limit = max(0, int(self.valves.RAGFLOW_HISTORY_LIMIT))\n        if history_limit == 0:\n            relevant_messages = [messages[-1]]\n        else:\n            relevant_messages = messages[-min(history_limit + 1, len(messages)) :]\n\n        conversation_context = \"\"\n        for msg in relevant_messages[:-1]:\n            role = msg.get(\"role\", \"\")\n            content = msg.get(\"content\", \"\")\n            if role and content:\n                conversation_context += f\"{role.capitalize()}: {content}\\n\\n\"\n\n        user_question = messages[-1][\"content\"]\n        full_question = (\n            f\"Conversation history:\\n{conversation_context}\\nUser's current question: {user_question}\"\n            if conversation_context\n            else user_question\n        )\n\n        headers = {\n            \"Authorization\": f\"Bearer {self.valves.RAGFLOW_API_KEY}\",\n            \"Content-Type\": \"application/json\",\n        }\n\n        # 1. Crear sesión\n        session_url = f\"{self.valves.RAGFLOW_API_BASE_URL}/api/v1/agents/{self.valves.RAGFLOW_AGENT_ID}/sessions\"\n        session_response = requests.post(session_url, headers=headers, json={})\n\n        if session_response.status_code != 200:\n            return f\"Error al crear la sesión: {session_response.text}\"\n\n        session_json = session_response.json()\n        session_id = session_json.get(\"data\", {}).get(\"id\")\n\n        ask_url = f\"{self.valves.RAGFLOW_API_BASE_URL}/api/v1/agents/{self.valves.RAGFLOW_AGENT_ID}/completions\"\n        payload = {\"question\": full_question, \"stream\": True, \"session_id\": session_id}\n        ask_response = requests.post(\n            ask_url, headers=headers, json=payload, stream=True\n        )\n`\n\n\nI want to know if there is a possibility to run this without using requests, as I do not want to have access to Internet in my PC when I run this agent.  ",
      "state": "closed",
      "author": "Unaiideko",
      "author_type": "User",
      "created_at": "2025-05-16T09:28:08Z",
      "updated_at": "2025-06-04T17:22:38Z",
      "closed_at": "2025-05-28T06:51:35Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 10,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7688/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7688",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7688",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:53.780648",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "What about utilizing [Python SDK](https://ragflow.io/docs/dev/python_api_reference)?",
          "created_at": "2025-05-19T03:55:23Z"
        },
        {
          "author": "executed",
          "body": "FYI I succeeded in connecting regular chat, haven't tried agent yet.",
          "created_at": "2025-05-23T01:12:17Z"
        },
        {
          "author": "Unaiideko",
          "body": "Hi there, we finally successfully achieved in the connection of an agent made in RAGFlow to a UI named OpenWebUI (on premises via ragflow_sdk). This has been possible via pipe functions made as connectors for OpenWebUI with RAGFlow.",
          "created_at": "2025-05-23T07:07:05Z"
        },
        {
          "author": "y0ung-y",
          "body": "\n\n\n> Hi there, we finally successfully achieved in the connection of an agent made in RAGFlow to a UI named OpenWebUI (on premises via ragflow_sdk). This has been possible via pipe functions made as connectors for OpenWebUI with RAGFlow.\n\nHello, may I ask how to connect ragflow and openwebui through",
          "created_at": "2025-05-26T04:21:32Z"
        },
        {
          "author": "Unaiideko",
          "body": "```\nclass Pipe:\n    class Valves(BaseModel):\n        RAGFLOW_API_BASE_URL: str = Field(\n            default=\"http://XX.XX.XX.XX:ragflow_port\",\n            description=\"Base URL for accessing RAGFlow API endpoints.\",\n        )\n        RAGFLOW_API_KEY: str = Field(\n            default=\"XXXXXXXXXX\",\n  ",
          "created_at": "2025-05-28T06:27:44Z"
        }
      ]
    },
    {
      "issue_number": 4014,
      "title": "[Feature Request]: Add IMAP/POP3 retrieval",
      "body": "### Is there an existing issue for the same feature request?\n\n- [X] I have checked the existing issues.\n\n### Is your feature request related to a problem?\n\n_No response_\n\n### Describe the feature you'd like\n\nIt would be awesome to create a mechanism, which imports/synchronizes E-mails (and attachments) and add them to a dataset for parsing.\r\n\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n_No response_\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "Snify89",
      "author_type": "User",
      "created_at": "2024-12-12T14:27:32Z",
      "updated_at": "2025-06-04T17:16:08Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/4014/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/4014",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/4014",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:54.094747",
      "comments": [
        {
          "author": "which-W",
          "body": "@Snify89 \n👋 Thanks so much for your suggestion, and apologies for the delayed response!\n\nThis feature hasn’t been implemented yet, but we’d love to better understand your use case 🛠️\nCould you share more details about how you plan to use it? That would really help us evaluate its potential impact an",
          "created_at": "2025-06-03T06:46:04Z"
        },
        {
          "author": "ralienpp",
          "body": "I'm not the original poster, but I've been following this issue. I have these scenarios:\n\n1. Keep an eye on a mailing list (e.g., IETF working groups) and provide a weekly digest + the ability to ask questions about the discussions and get relevant references and quotes.\n2. Personally, I've been kee",
          "created_at": "2025-06-04T14:55:42Z"
        },
        {
          "author": "Snify89",
          "body": "Eml files support would be a good start I think.",
          "created_at": "2025-06-04T17:16:07Z"
        }
      ]
    },
    {
      "issue_number": 4707,
      "title": "[Bug]: Error when inviting a new user hint : 102 User not found.",
      "body": "### Is there an existing issue for the same bug?\n\n- [x] I have checked the existing issues.\n\n### RAGFlow workspace code commit ID\n\n1160b58\n\n### RAGFlow image version\n\nv.0.15.1\n\n### Other environment information\n\n```Markdown\nOS: Windows 10\n```\n\n### Actual behavior\n\nAfter having registered a new user with ragflow, I'm not able to invite that user to a team in a local installation. I'm getting the error: hint : 102\nUser not found.\n\n### Expected behavior\n\nUser is being added to team.\n\n### Steps to reproduce\n\n```Markdown\n1. Register new user\n2. Invite user in local installation\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "joergkoch",
      "author_type": "User",
      "created_at": "2025-02-04T10:56:32Z",
      "updated_at": "2025-06-04T14:52:22Z",
      "closed_at": "2025-06-04T14:52:21Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 12,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/4707/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/4707",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/4707",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:54.262736",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "I guess the email address was not correct.",
          "created_at": "2025-02-05T02:40:21Z"
        },
        {
          "author": "joergkoch",
          "body": "Dear Kevin,\r\n\r\n \r\n\r\nno, the email is correct, because it is my personal one: ***@***.*** ***@***.***> .\r\n\r\n \r\n\r\nAny other ideas?\r\n\r\n \r\n\r\nThanks for your support, Jörg\r\n\r\n \r\n\r\nFrom: Kevin Hu ***@***.***> \r\nSent: Wednesday, 5 February 2025 03:41\r\nTo: infiniflow/ragflow ***@***.***>\r\nCc: Koch, Jörg ***",
          "created_at": "2025-02-05T07:16:12Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Strip the white spaces.",
          "created_at": "2025-02-06T03:10:47Z"
        },
        {
          "author": "BondingX",
          "body": "I have the same issue, it keeps saying \"hint: 102 user not found\" even the address is correct",
          "created_at": "2025-02-13T15:08:13Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Have you signed up at first place?",
          "created_at": "2025-02-14T03:21:49Z"
        }
      ]
    },
    {
      "issue_number": 8056,
      "title": "[Question]: reference.chunks.positions numbers meaning",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI'm creating a new front to use with ragflow and was wondering what each of the numbers were representing reference.chunks.positions when using the API. \nI haven't found anything in the documentation.\n\nExemple [ 204, 26, 540, 160, 334 ]\n\nThanks in advance",
      "state": "closed",
      "author": "bryantomadon",
      "author_type": "User",
      "created_at": "2025-06-04T12:21:44Z",
      "updated_at": "2025-06-04T12:25:25Z",
      "closed_at": "2025-06-04T12:25:25Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8056/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8056",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8056",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:54.521877",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @bryantomadon! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThe numbers in reference.chunks.positions represent the physical location of a chunk within a visual document (such as a PDF, figure, table, or image). Each array follows th",
          "created_at": "2025-06-04T12:24:06Z"
        }
      ]
    },
    {
      "issue_number": 8048,
      "title": "[Feature Request]: add AI/ML API as provider",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\n\n```\n\n### Describe the feature you'd like\n\nHi!\n\nI'm Sergey from the Integrations team over at AI/ML API, a startup with 150K+ users, providing over 300 AI models in one place. \n\nYour project looks dope, so we'd like to have a native integration with it.We already got integrations with Langflow, Agno, and AutoGPT - so our integrations team is pretty seasoned\n\nSay you're interested, and we'll test the compatibility, update the code/docs to include us, create a PR and add a tutorial on using RagFlow with AI/ML API to our docs\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "OctavianTheI",
      "author_type": "User",
      "created_at": "2025-06-04T08:24:33Z",
      "updated_at": "2025-06-04T12:07:07Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8048/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8048",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8048",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:54.749730",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "A PR is welcomed!\n\n@ZhenhangTung",
          "created_at": "2025-06-04T09:21:49Z"
        },
        {
          "author": "ZhenhangTung",
          "body": "Hi Sergey @OctavianTheI ! I'm the product manager, Leon.\n\nThanks for your interest and kind words. Really appreciate your recognition of our project. \n\nI'd love to take a closer look at your platform first to better understand how your offering aligns with our current roadmap and priorities. Once I’",
          "created_at": "2025-06-04T09:38:28Z"
        },
        {
          "author": "OctavianTheI",
          "body": "Hi @ZhenhangTung \nNo rush if you guys need some time - but we can take on the development ourselves and save you guys the developer hours :)\nI've sent you an email with subject line \"AI/ML API x Ragflow\"\nWould love to connect, discuss how to do this seamlessly and some potential crosspromo opportuni",
          "created_at": "2025-06-04T12:07:06Z"
        }
      ]
    },
    {
      "issue_number": 7288,
      "title": "[Bug]: Adjusting the knowledge base of the file link will cause any file corresponding to the knowledge base that has already linked this file to need to be reparsed",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n86f76df5\n\n### RAGFlow image version\n\ninfiniflow/ragflow:nightly   v0.17.2？\n\n### Other environment information\n\n```Markdown\nCurrent Repository: ragflow\nCommit Id: 86f76df5\nOperating system: Ubuntu 24.04 (Kernel version: 6.11.0-21-generic)\nCPU Type: x86_64\nMemory: 251Gi\nDocker Version: 26.1.3,\n```\n\n### Actual behavior\n\n1. Create a new knowledge base\n\n2. Switch to File management and link the pdf document to the new knowledge base\n\n3. The corresponding pdf files in the previously linked and parsed knowledge database need to be parsed again.\n\n### Expected behavior\n\n1. Create a new knowledge base\n\n2. Switch to File management and link the pdf document to the new knowledge base\n\n3. The corresponding pdf files in the previously linked and parsed knowledge database do not need to be parsed again.\n\n### Steps to reproduce\n\n```Markdown\n1. Create a new knowledge base\n\n2. Switch to File management and link the pdf document to the new knowledge base\n\n3. The corresponding pdf files in the previously linked and parsed knowledge database need to be parsed again.\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "zhugh2333",
      "author_type": "User",
      "created_at": "2025-04-24T12:13:32Z",
      "updated_at": "2025-06-04T11:15:52Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7288/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7288",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7288",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:54.952433",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nI found a similar open issue that might be relevant to your situation: [Question: The knowledge base resolves configuration consistency problems](https://github.com/infiniflow/ragflow/issues/6133). This issue was last updated on March 16, 2025, and it is still open. However, it curre",
          "created_at": "2025-04-24T12:15:54Z"
        },
        {
          "author": "ZhenhangTung",
          "body": "@zhugh2333 Thanks for the report! \nOne quick question for clarification: are both the original and the new knowledge bases configured to use the same embedding model? \nAt the same time, we'll investigate this internally and get back to you soon.",
          "created_at": "2025-04-24T12:23:30Z"
        },
        {
          "author": "zhugh2333",
          "body": "Thank you for your reply.",
          "created_at": "2025-04-24T12:27:59Z"
        },
        {
          "author": "zhugh2333",
          "body": "Yes, the same embedded model is used, and this problem still exists in version 0.19.",
          "created_at": "2025-05-26T11:40:42Z"
        },
        {
          "author": "ZhenhangTung",
          "body": "@zhugh2333 Got it. Could you also share some screenshots or video recordings? Just want to make sure we understand your issue correctly. ",
          "created_at": "2025-06-04T10:18:09Z"
        }
      ]
    },
    {
      "issue_number": 8052,
      "title": "[Bug]: /api/v1/retrieval: dataset_id format (string vs. array) depends on chunk ingestion source (/chunk/create vs. file import)",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\na99739166cf5be0553dcf2e56f39c80b5878e324 \n\n### RAGFlow image version\n\nv0.17.2\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nThe /api/v1/retrieval endpoint returns an inconsistent format for the dataset_id field within the chunks array of its response.\n\nWhen chunks are ingested into RAGFlow via file import, the corresponding dataset_id in the API response is a string (e.g., \"xxxxxxxx\").\nWhen chunks are created via the /api/v1/chunk/create API endpoint, the corresponding dataset_id in the /api/v1/retrieval API response is an array containing a single string (e.g., [\"xxxxxxxx\"]). This inconsistency in data type (string vs. array) for the same conceptual field causes deserialization issues in strongly-typed client applications.\n\n### Expected behavior\n\nThe dataset_id field in the /api/v1/retrieval API response should have a consistent data format for all chunks, regardless of how they were created or ingested.\nIdeally, since dataset_id typically refers to a single dataset to which a chunk belongs, it should consistently be a string. If there's a reason for it to be an array (e.g., a chunk could belong to multiple datasets), then it should always be an array (even if it's an array with a single element or an empty array). The current mixed behavior is problematic.\n\n### Steps to reproduce\n\n```Markdown\nCreate a Knowledge Base:\nCreate a new knowledge base (dataset) in the RAGFlow UI. Let's call its ID test_kb_id.\nImport a File:\nUpload a file into test_kb_id. For example, an Excel file formatted as QA pairs, containing at least one QA pair. This will be parsed into one or more chunks by RAGFlow.\nManually Add a Chunk via UI:\nNavigate within the RAGFlow UI to the knowledge base test_kb_id and the document created from the imported file.\nManually add a new chunk to this document through the UI.\nQuery Elasticsearch:\nDirectly query Elasticsearch to inspect the chunks created in steps 2 and 3 within the index associated with test_kb_id (e.g., ragflow_test_kb_id or similar). Example query to retrieve some chunks from the relevant index:\nBash\n\ncurl -u \"elastic:infini_rag_flow\" \"http://<your_es_host>:<your_es_port>/<index_for_test_kb_id>/_search?pretty&size=10\"\nObserve kb_id Inconsistency:\nIn the Elasticsearch results, compare the _source.kb_id field for chunks created by file import (step 2) versus the chunk manually added via the UI (step 3).\nIt's observed that the kb_id for the file-imported chunk is a string (e.g., \"test_kb_id\"), while the kb_id for the chunk manually added via the UI is an array containing a single string (e.g., [\"test_kb_id\"]).\n```\n\n### Additional information\n\nThis inconsistency in _source.kb_id storage within Elasticsearch (string vs. array) directly leads to the /api/v1/retrieval endpoint returning dataset_id with varying formats. This, in turn, causes deserialization problems for client applications expecting a consistent schema. The OpenAPI specification for /api/v1/retrieval also suggests dataset_id should be a string.",
      "state": "open",
      "author": "openproix",
      "author_type": "User",
      "created_at": "2025-06-04T10:08:54Z",
      "updated_at": "2025-06-04T10:25:51Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8052/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8052",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8052",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:55.152290",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe inconsistency you observed with the dataset_id (or kb_id) format in the /api/v1/retrieval endpoint—sometimes being a string and other times an array—stems from a recent change in the backend where the identifier was renamed from dataset_ids to kb_id. The backend now expects kb_id",
          "created_at": "2025-06-04T10:11:58Z"
        },
        {
          "author": "openproix",
          "body": "Commit a99739166cf5be0553dcf2e56f39c80b5878e324 (messaged as \"Code format.\") changed the kb_id assignment from doc.kb_id to [doc.kb_id]. Was this change to store kb_id as an array intentional?\n\nThis appears to contribute to inconsistent dataset_id formats (string vs. array) in the /api/v1/retrieval ",
          "created_at": "2025-06-04T10:25:49Z"
        }
      ]
    },
    {
      "issue_number": 7819,
      "title": "[Bug]: graphknowledge Error: Tree structure not found for treeKey: combo",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nv0.18.0\n\n### RAGFlow image version\n\nv0.18.0\n\n### Other environment information\n\n```Markdown\nlinux\nxinference llm\nStart in source code mode\n```\n\n### Actual behavior\n\nAfter parsing the document using the knowledge graph function, the following error was reported when opening the knowledge graph page\n\n![Image](https://github.com/user-attachments/assets/07091809-7e26-4e49-a478-34b1146824f0)\n\nBy consulting the code, I found that each node in the front end requires a communities attribute, but the node after my successful parsing does not have this attribute\n\n![Image](https://github.com/user-attachments/assets/8f229314-1b1e-4767-b569-50465969c74b)\n\n![Image](https://github.com/user-attachments/assets/ad0d3e8f-aeb6-4faf-86c0-03afd012499d)\n\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nParse the knowledge graph normally using the light mode\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "1006076811",
      "author_type": "User",
      "created_at": "2025-05-23T08:06:03Z",
      "updated_at": "2025-06-04T10:24:00Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7819/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7819",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7819",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:55.343709",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nBased on your description and the code review, the error `graphknowledge Error: Tree structure not found for treeKey: combo` is caused by nodes missing the required `communities` attribute after parsing. The frontend logic expects each node to have a `communities` array, which is use",
          "created_at": "2025-05-23T08:14:41Z"
        },
        {
          "author": "1006076811",
          "body": "I checked the `extract_community_report` function in `community_reports_extractor.py`. I found that after this function finishes executing `add_community_info2graph`, it adds a `communities` attribute to each node, but it does not update the graph in Elasticsearch (es).  \nAs a result, when the page ",
          "created_at": "2025-05-23T08:48:39Z"
        },
        {
          "author": "nslgit",
          "body": "G6的文档，'combo'的类型是string | null，'buildNodesAndCombos'方法中'nextNodes'的'combo'由find查找获取，查找不到的时候返回了' undefined'导致报错。修改为查找不到的时候的默认值为 null 即可解决。",
          "created_at": "2025-06-04T10:23:58Z"
        }
      ]
    },
    {
      "issue_number": 7750,
      "title": "[Feature Request]: Increase small2big",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\nRecently, it has been found that the slices divided by document structure are too large, resulting in lower recall accuracy. However, if the slices are divided by length, the integrity of the document will be lost.\n```\n\n### Describe the feature you'd like\n\nI hope to add methods for small2big.\nWhy add small2big.\nSmall2big can improve the accuracy of recall, and using large slices can also ensure integrity.\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "wanyuks",
      "author_type": "User",
      "created_at": "2025-05-21T01:04:38Z",
      "updated_at": "2025-06-04T10:15:37Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7750/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7750",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7750",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:55.527943",
      "comments": [
        {
          "author": "ZhenhangTung",
          "body": "@wanyuks Hi, I'm the product manager of RAGFlow. Thanks for the suggestion. \nTo help us better evaluate and design the `small2big` strategy, could you share more about:\n- Are you dealing with specific document types where structure-based slicing fails?\n- Any **examples or use cases** where you’ve se",
          "created_at": "2025-05-21T03:06:31Z"
        },
        {
          "author": "wanyuks",
          "body": "@ZhenhangTung My documents are all long documents. When cut by structure, the document chunk will be very large, resulting in insufficient recall effect. When cut by length, semantics and context will be cut off. Therefore, I want to use small2big to recall the small chunk first, and then use the co",
          "created_at": "2025-05-27T00:14:50Z"
        },
        {
          "author": "ZhenhangTung",
          "body": "@wanyuks appreciate your feedback. will do some investigations around it. ",
          "created_at": "2025-06-04T10:15:36Z"
        }
      ]
    },
    {
      "issue_number": 8051,
      "title": "[Bug]: Okta OIDC integration would return jwks 404",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n09f8dfe\n\n### RAGFlow image version\n\n/\n\n### Other environment information\n\n```Markdown\nmacOS M1 Prod, started the web service from source\n```\n\n### Actual behavior\n\nTry to login with okta and error returned:\n\n```\nTraceback (most recent call last):\n  File \"/Users/user/Projects/ragflow/api/apps/auth/oidc.py\", line 73, in parse_id_token\n    signing_key = jwks_cli.get_signing_key_from_jwt(id_token).key\n  File \"/opt/homebrew/anaconda3/envs/ragflow-local/lib/python3.10/site-packages/jwt/jwks_client.py\", line 113, in get_signing_key_from_jwt\n    return self.get_signing_key(header.get(\"kid\"))\n  File \"/opt/homebrew/anaconda3/envs/ragflow-local/lib/python3.10/site-packages/jwt/jwks_client.py\", line 95, in get_signing_key\n    signing_keys = self.get_signing_keys()\n  File \"/opt/homebrew/anaconda3/envs/ragflow-local/lib/python3.10/site-packages/jwt/jwks_client.py\", line 82, in get_signing_keys\n    jwk_set = self.get_jwk_set(refresh)\n  File \"/opt/homebrew/anaconda3/envs/ragflow-local/lib/python3.10/site-packages/jwt/jwks_client.py\", line 74, in get_jwk_set\n    data = self.fetch_data()\n  File \"/opt/homebrew/anaconda3/envs/ragflow-local/lib/python3.10/site-packages/jwt/jwks_client.py\", line 59, in fetch_data\n    raise PyJWKClientConnectionError(\njwt.exceptions.PyJWKClientConnectionError: Fail to fetch data from the url, err: \"HTTP Error 404: Not Found\"\n2025-06-04 14:03:08,468 ERROR    58577 Error parsing ID Token: Fail to fetch data from the url, err: \"HTTP Error 404: Not Found\"\n```\n\n\n### Expected behavior\n\nCould be able to login with okta channel\n\n### Steps to reproduce\n\n```Markdown\n1. start the service on local from source;\n2. set configs in yaml:\n\n\n...\noauth:\n  oidc:\n    display_name: \"Okta OIDC\"\n    client_id: \"xxx\"\n    client_secret: \"xxx\"\n    issuer: \"https://YOU_OKTA_DOMAIN.okta.com/oauth2/default\"\n    authorization_url: \"https://YOU_OKTA_DOMAIN.okta.com/oauth2/default/v1/authorize\"\n    token_url: \"https://YOU_OKTA_DOMAIN.okta.com/oauth2/default/v1/token\"\n    userinfo_url: \"https://YOU_OKTA_DOMAIN.okta.com/oauth2/default/v1/userinfo\"\n    scope: \"openid email profile\"\n    redirect_uri: \"http://localhost/v1/user/oauth/callback/oidc\"\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "Colstuwjx",
      "author_type": "User",
      "created_at": "2025-06-04T10:06:27Z",
      "updated_at": "2025-06-04T10:09:49Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8051/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8051",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8051",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:55.713393",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nBased on the traceback and the RAGFlow code, the JWKS 404 error occurs because the backend tries to fetch the JSON Web Key Set (JWKS) from your Okta issuer at the endpoint `https://YOUR_OKTA_DOMAIN.okta.com/oauth2/default/.well-known/jwks.json` (or as specified by the issuer's metada",
          "created_at": "2025-06-04T10:08:53Z"
        },
        {
          "author": "Colstuwjx",
          "body": "I fixed this issue by manually change [the code in oidc.py](https://github.com/infiniflow/ragflow/blob/main/api/apps/auth/oidc.py#L71-L73) , and also I've found the `scope` config is necessary to make the okta works :\n\n```\n...\n    scope: \"openid email profile\"\n...\n```\n\nI'll submit the fix PR if need",
          "created_at": "2025-06-04T10:09:49Z"
        }
      ]
    },
    {
      "issue_number": 8044,
      "title": "[Question]: Incorrect RAGFlow Chunking: Headings and Tables Split",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI'm trying to chunk a Markdown file using RAGFlow. My Markdown has sections, each starting with a ## heading followed by a table. \n## label1\n\n| problem  | reason  | measure  |\n| --- | :-: | :-: |\n| problem1 | reason1 | measure1 |\n| problem2 | reason2 | measure2 |\n| problem3 | reason3 | measure3 |\n\n## label2\n\n| problem   |  reason  |  measure  |\n| ---- | :--: | :--: |\n| problem21 | reason21 | measure21 |\n| problem22 | reason22 | measure22 |\n| problem23 | reason23 | measure23 |\n\nI've set RAGFlow to split chunks by the ## delimiter, hoping to get each heading and its table together in one chunk.\n\n![Image](https://github.com/user-attachments/assets/f2721246-2d94-422b-b53d-1589f55246f2)\n\nHowever, RAGFlow is currently putting all the headings into one chunk and all the tables into a different chunk (or multiple chunks, one for each table), rather than keeping each heading with its own table. The RAGFlow settings I'm using are shown in this screenshot.\n\n![Image](https://github.com/user-attachments/assets/1198409b-387b-49d0-82f0-f4202881dca8)\n",
      "state": "open",
      "author": "tanxinz",
      "author_type": "User",
      "created_at": "2025-06-04T04:50:40Z",
      "updated_at": "2025-06-04T09:53:23Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8044/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8044",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8044",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:55.877689",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @tanxinz! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nYour issue—where RAGFlow splits all headings into one chunk and all tables into separate chunks, instead of keeping each heading with its table—is a known challenge with the curr",
          "created_at": "2025-06-04T04:53:02Z"
        },
        {
          "author": "tanxinz",
          "body": "Hello, I'm using the latest RAGFlow (version 0.19). I have already removed the blank lines between each heading  and its corresponding table, and I've also adjusted the 'Chunk token number' setting to 2, but this still hasn't resolved the current issue.\n[@dosu](https://go.dosu.dev/dosubot).",
          "created_at": "2025-06-04T06:09:24Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYour configuration changes—removing blank lines and setting the chunk token number to 2—did not resolve the issue because of how RAGFlow's Markdown parser currently works. The parser extracts tables and headings as separate entities before chunking, so even with the correct delimiter",
          "created_at": "2025-06-04T06:18:54Z"
        },
        {
          "author": "tanxinz",
          "body": "I've manually inserted headers into the table's blocks.[@dosu](https://go.dosu.dev/dosubot).",
          "created_at": "2025-06-04T09:53:21Z"
        }
      ]
    },
    {
      "issue_number": 8050,
      "title": "[Bug]: Knowledge base is selected, but not referenced in chat",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nno\n\n### RAGFlow image version\n\nno\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nWhen creating a new assistant in demo.ragflow.io, I didn't select a knowledge base initially. Later, while editing the assistant, I chose an existing knowledge base. However, after inspecting the /v1/dialog/get API request parameters, I noticed that prompt_config.parameters was empty. As a result, the chat feature fails to retrieve content from the knowledge base.\n\n### Expected behavior\n\nWhen a knowledge base is selected (either during creation or editing), the system should automatically populate prompt_config.parameters with the required configuration to enable retrieval.\n\n### Steps to reproduce\n\n```Markdown\nWhen creating a new assistant in demo.ragflow.io, I didn't select a knowledge base initially. Later, while editing the assistant, I chose an existing knowledge base. However, after inspecting the /v1/dialog/get API request parameters, I noticed that prompt_config.parameters was empty. As a result, the chat feature fails to retrieve content from the knowledge base.\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "zhongy-web",
      "author_type": "User",
      "created_at": "2025-06-04T09:02:36Z",
      "updated_at": "2025-06-04T09:30:18Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8050/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8050",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8050",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:56.161924",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @zhongy-web! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nYour issue—where selecting a knowledge base after assistant creation does not update prompt_config.parameters, causing chat retrieval to fail—matches a known problem in RAGFlo",
          "created_at": "2025-06-04T09:05:44Z"
        },
        {
          "author": "KevinHuSh",
          "body": "What about creating a new one with KB selected initially?",
          "created_at": "2025-06-04T09:15:07Z"
        },
        {
          "author": "zhongy-web",
          "body": "If parameters are included when creating with a knowledge base, they will be properly carried over. However, when I create an assistant without including parameters, subsequent creations of new assistants also do not include the parameters.",
          "created_at": "2025-06-04T09:28:15Z"
        },
        {
          "author": "zhongy-web",
          "body": "I replicated this directly on your demo site—feel free to follow my steps to reproduce it.",
          "created_at": "2025-06-04T09:30:17Z"
        }
      ]
    },
    {
      "issue_number": 8018,
      "title": "[Question]:",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI get this error when using DuckDuckGo Component Search Engine\nError to search using lite backend: https://lite.duckduckgo.com/lite/ 202 Ratelimit",
      "state": "open",
      "author": "tuilaHiu",
      "author_type": "User",
      "created_at": "2025-06-03T07:15:46Z",
      "updated_at": "2025-06-04T06:32:21Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8018/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8018",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8018",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:56.413577",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "Please utilize `Tavily` which is more stable. It's within the `Retrieval` component.",
          "created_at": "2025-06-04T06:32:21Z"
        }
      ]
    },
    {
      "issue_number": 6071,
      "title": "[Question]: WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nAfter starting ragflow, the following message appears:\n\n\"WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.\"\n\nHow can this be resolved?\n\nI need to deploy the ragflow project on a Linux server.",
      "state": "open",
      "author": "lichanghai",
      "author_type": "User",
      "created_at": "2025-03-14T03:37:35Z",
      "updated_at": "2025-06-04T06:20:49Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/6071/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/6071",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/6071",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:56.607945",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "[WSGI](https://stackoverflow.com/questions/51025893/flask-at-first-run-do-not-use-the-development-server-in-a-production-environmen)",
          "created_at": "2025-03-14T05:06:19Z"
        },
        {
          "author": "Colstuwjx",
          "body": "hi @KevinHuSh , seems like our Dockerfile was also using this way to start the web server, is it possible to update a Dockerfile with production use ? \n",
          "created_at": "2025-06-04T06:20:47Z"
        }
      ]
    },
    {
      "issue_number": 8017,
      "title": "调用/api/v1/retrieval API时怎样提供rerank_id参数",
      "body": "当使用/api/v1/retrieval API时， 如果没有提供rerank_id参数， 调用它时会使用系统默认模型中的Rerank模型吗？\n如果需要提供rerank_id参数，这个模型的ID应该怎样获取到？",
      "state": "closed",
      "author": "lahok",
      "author_type": "User",
      "created_at": "2025-06-03T07:02:06Z",
      "updated_at": "2025-06-04T06:16:10Z",
      "closed_at": "2025-06-04T06:16:09Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8017/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8017",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8017",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:56.820855",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\n调用 /api/v1/retrieval API 时，可以在请求体中通过 rerank_id 字段指定重排序模型，例如：\n\n```json\n{\n  \"question\": \"你的问题\",\n  \"dataset_ids\": [\"数据集ID\"],\n  \"rerank_id\": \"gte-rerank@Tongyi-Qianwen\"\n}\n```\nrerank_id 的格式如 \"gte-rerank@Tongyi-Qianwen\" 是正确的，具体可用的 rerank_id 可以在 UI 的“Retrieval Testing”页面的“Rerank model”下拉菜单中",
          "created_at": "2025-06-03T07:03:58Z"
        },
        {
          "author": "lahok",
          "body": "感谢你的回复。\n但在调用API并传递 rerank_id 参数时，报这个错误：LookupError('Model(bge-reranker-v2-m3) not authorized')\n不知识是不是模型需要单独授权？\n\n遇到的另一个问题是：另一个用户共享给我的知识， 我不能在“聊天配置”中使用，会报：Datasets use different embedding models: ['bge-large___VLLM@VLLM', 'bge-m3___OpenAI-API@OpenAI-API-Compatible']\"\n实际上我们两个用户只是帐号不同， 使用的是模型都是相同的，只不过是每",
          "created_at": "2025-06-03T07:15:15Z"
        },
        {
          "author": "KevinHuSh",
          "body": "[Language policy violation](https://github.com/infiniflow/ragflow/issues/5910).",
          "created_at": "2025-06-04T06:16:09Z"
        }
      ]
    },
    {
      "issue_number": 8034,
      "title": "[Question]: why little json file parse slowly?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\n I upload a json file about 3MB to ragflow platform，it take about 5 hours to parsing this json file. and the progress now is about 73%  \n\n![Image](https://github.com/user-attachments/assets/2308c554-0e9c-48c9-8d15-d876b35e6352)\n\n![Image](https://github.com/user-attachments/assets/f4536239-79e3-4f51-939c-39ddfa2fa049)\n\n![Image](https://github.com/user-attachments/assets/60a8d64d-fe7b-4696-8abc-e320c63e4656) . from the log ,I FOUND \"19:28:06 Page(1~100000001) \"     ,is  number \"100000001 means the  json files has parsing 100000001 pages? if so ,why it has so many pages to parse.",
      "state": "open",
      "author": "cjjjy",
      "author_type": "User",
      "created_at": "2025-06-03T15:40:17Z",
      "updated_at": "2025-06-04T06:10:42Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8034/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8034",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8034",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:57.043279",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @cjjjy! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nParsing a 3MB JSON file should normally be very fast, so taking 3 hours indicates something is wrong with the process or the environment. There are several known issues in RAGFlow ",
          "created_at": "2025-06-03T15:43:05Z"
        },
        {
          "author": "cjjjy",
          "body": "> 可能是错误或对文件结构的误解\n\nthank you for your reply, I check my ragflow enviroment , the version is 0.19.0 ,first ,I FOUND I use the mysql  database NOT maria DB, second I have already disabled the raptor and select \"naive\" item as documents parser,third,there is only one little json file in ragflow platform",
          "created_at": "2025-06-03T15:53:05Z"
        },
        {
          "author": "KevinHuSh",
          "body": "I bet that the embedding services were not healthy. As my recomandation, utilize a SAAS embedding services.",
          "created_at": "2025-06-04T06:10:41Z"
        }
      ]
    },
    {
      "issue_number": 8040,
      "title": "[Question]:  can not web login both with edge and chrome",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nit is not user-friendly because when a user logs in from two different browsers, the later login will automatically invalidate the earlier one. This happens because the token is refreshed based on the username during each login process, which doesn't seem to be an intentional design choice.\n\nI would like to confirm whether this is by design or if it can be adjusted？\n",
      "state": "open",
      "author": "tomyangshsh",
      "author_type": "User",
      "created_at": "2025-06-04T02:26:49Z",
      "updated_at": "2025-06-04T06:06:51Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8040/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8040",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8040",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:57.227060",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @tomyangshsh! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThe behavior you described—where logging in from a second browser (or device) invalidates the previous session—is by design in RAGFlow. Each successful login generates a new ",
          "created_at": "2025-06-04T02:29:06Z"
        },
        {
          "author": "KevinHuSh",
          "body": "We've designed to be single-end authorized.",
          "created_at": "2025-06-04T06:06:50Z"
        }
      ]
    },
    {
      "issue_number": 4704,
      "title": "[Bug]: Delimiter setting not working as intended",
      "body": "### Is there an existing issue for the same bug?\n\n- [x] I have checked the existing issues.\n\n### RAGFlow workspace code commit ID\n\nna\n\n### RAGFlow image version\n\nv0.15.1-180-g036f37a6 full\n\n### Other environment information\n\n```Markdown\ndocker windows gpu compose file, no changes\n```\n\n### Actual behavior\n\nUsing mutli-char delimiter is not working as intended. Setting `word` in backticks does not lead to a chunk on that word. A quick glance at the codebase suggests the way the regex is built may not be handling string delimiters properly (treating them as a collection of individual chars instead)\n\n### Expected behavior\n\ntext to delimit on a given string match and be visible as chunks \n\n### Steps to reproduce\n\n```Markdown\ncreate basic collection\nuse general parser\nupdate the delimiter section to have `word` as sole value\nupload text or md document containing the desired delimiter at intervals\nprocess document in ui and view chunks\nnote they have not delimited on provided word\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "mwd102",
      "author_type": "User",
      "created_at": "2025-02-04T03:48:42Z",
      "updated_at": "2025-06-04T05:56:09Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 18,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/4704/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "DiamondPoirier"
      ],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/4704",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/4704",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:57.412225",
      "comments": [
        {
          "author": "mwd102",
          "body": "Just to add to this by inserting a special char e.g. | before every occurance of my desired word and then using that as a single char match, the system delimits as expected",
          "created_at": "2025-02-04T04:04:17Z"
        },
        {
          "author": "Snify89",
          "body": "Great find. Thank you for reporting",
          "created_at": "2025-02-04T05:55:31Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Could you specify the case?",
          "created_at": "2025-02-05T02:28:20Z"
        },
        {
          "author": "mwd102",
          "body": "@KevinHuSh  this happens on any delimiter that is more than one char. Try ingesting a simple text document and chunking on a given word within the doc. It won't work as despite the tooltip ragflow seems to treat a delimiter in backticks e.g. \\`mydelim\\` as seperate chars not as a whole token/string.",
          "created_at": "2025-02-05T16:24:45Z"
        },
        {
          "author": "DiamondPoirier",
          "body": "Based on the issues you've provided, after multiple attempts, I found that the system is working fine. Regarding the multi-character segmentation problem you mentioned, I suspect it might be caused by setting the Chunk token number too big, which leads to segmentation issues. I recommend choosing a ",
          "created_at": "2025-02-06T07:46:46Z"
        }
      ]
    },
    {
      "issue_number": 8006,
      "title": "[Bug]: agent categorize node v0.18.0 is ok , but the  v0.19.0 Can't inference the where the component input is. Please identify whose output is this component's input.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nv0.19.0\n\n### RAGFlow image version\n\nv0.19.0\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nagent categorize node v0.18.0 is ok , but the  v0.19.0 Can't inference the where the component input is. Please identify whose output is this component's input. \n\n<img width=\"797\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/10f1c9ad-40c1-4394-850b-00d6e52f2437\" />\n\n### Expected behavior\n\nrepair docker \n\n### Steps to reproduce\n\n```Markdown\nagent categorize node v0.18.0 is ok , but the  v0.19.0 Can't inference the where the component input is. Please identify whose output is this component's input.\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "superswxwb",
      "author_type": "User",
      "created_at": "2025-06-02T15:21:49Z",
      "updated_at": "2025-06-04T03:58:50Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 10,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8006/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8006",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8006",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:57.609622",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @superswxwb! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nBased on the code for RAGFlow v0.19.0, the inference of component inputs for the agent categorize node is handled by the get_input() method in agent/component/base.py. This me",
          "created_at": "2025-06-02T15:24:41Z"
        },
        {
          "author": "superswxwb",
          "body": "\r\n\r\n\r\ni try this ok.\r\n\r\n\r\n\r\nanother question;\r\n     i want to bring parameter to workflow\r\n\r\n\r\n\r\n\r\nthe repair string is: ### 查询语句中相关变量需要进行替换: ***@***.***_parameter}\r\n\r\n\r\n\r\nif run in the editor, it's ok\r\ni can get the right sql \r\nselect zcmc, count(1) as zcsl from prd_zcall where syrbh = 'C11025' and",
          "created_at": "2025-06-03T10:02:06Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe issue is that the repair_parameter works in the editor but not when using the iframe embed. Based on the available code and documentation, there is no special handling for a parameter named repair_parameter in the backend or frontend. Instead, RAGFlow supports passing generic par",
          "created_at": "2025-06-03T10:04:29Z"
        },
        {
          "author": "superswxwb",
          "body": "i change the parameter set like this:\r\n\r\n\r\n\r\nif the Optional is true, the work flow is right, but not get parameter\r\n\r\n\r\n\r\nif the Optional is true, \r\nthe work flow is disable, like this\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nThat means I didn't pass the parameters correctly, but I can with V0.18.0\r\nhelp me , thanks\r\n\r\n\r\n\r\n",
          "created_at": "2025-06-04T03:07:44Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYour issue is caused by how RAGFlow expects parameters to be passed in iframes in v0.19.0. The parameter repair_parameter is not recognized by the backend or frontend in either v0.18.0 or v0.19.0. In v0.19.0, you must use the data_xx format in your iframe URL, for example: &data_当前用户",
          "created_at": "2025-06-04T03:12:11Z"
        }
      ]
    },
    {
      "issue_number": 7299,
      "title": "[Seeking help] Memory may be not released after PDF parsing",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n6e98cd311c76128c8d8a88f574475d95d8b0fdf5\n\n### RAGFlow image version\n\nv0.18.0\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nMemory may remains some after PDF parsing.\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nParsing a large amount of PDFs.\n```\n\n### Additional information\n\nOriginal issues: #4031 and #4309.\nFollow up and discussion with more contexts: #7238.",
      "state": "open",
      "author": "yongtenglei",
      "author_type": "User",
      "created_at": "2025-04-25T02:41:32Z",
      "updated_at": "2025-06-04T03:24:43Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7299/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7299",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7299",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:57.848985",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nI found a similar open issue titled \"[Bug]: pdf parse ： memory leak ！\" which suggests that the problem arises because the image-occupied content during the PDF parsing process is not released <sup>[[1]](https://github.com/infiniflow/ragflow/issues/4309)</sup>. Additionally, a closed ",
          "created_at": "2025-04-25T02:43:38Z"
        },
        {
          "author": "S0b3Rr",
          "body": "Hi, I've been looking into this problem for a while too, before any major fix, here's a finding that may help a little:\n\nDuring my inspection of the memory usage, even when the executor is idle, the memory usage will increase `~1.5MB per 30 secs`. After perform the following change in `task_executor",
          "created_at": "2025-06-04T03:24:42Z"
        }
      ]
    },
    {
      "issue_number": 8033,
      "title": "[Bug]: /v1/conversation/completion  KeyError: 'conversation_id'",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n31d2b3cb5afb91d32ba2cd4c6444d60be80ea721\n\n### RAGFlow image version\n\n31d2b3cb5afb91d32ba2cd4c6444d60be80ea721\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nWhen requesting the API interface /v1/conversation/completion with the parameter stream set to false, an error occurs.\nIn the code for this interface, del req[\"conversation_id\"] is executed, but the code later tries to retrieve the value using req[\"conversation_id\"].\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\npost /v1/conversation/completion\n\n{\n \"conversation_id\":\"you conversation_id\",\n \"messages\":[],\n \"stream\":false\n}\n```\n\n### Additional information\n\n2025-06-03 22:26:50,298 ERROR    16 'conversation_id'\nTraceback (most recent call last):\n  File \"/ragflow/api/apps/conversation_app.py\", line 254, in completion\n    answer = structure_answer(conv, ans, message_id, req[\"conversation_id\"])\nKeyError: 'conversation_id'\n2025-06-03 22:26:50,299 INFO     16 172.19.0.6 - - [03/Jun/2025 22:26:50] \"POST /v1/conversation/completion HTTP/1.1\" 200 -",
      "state": "closed",
      "author": "Linpjia",
      "author_type": "User",
      "created_at": "2025-06-03T15:00:29Z",
      "updated_at": "2025-06-04T02:18:15Z",
      "closed_at": "2025-06-04T02:18:15Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8033/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8033",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8033",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:58.053931",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @Linpjia! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThe KeyError for 'conversation_id' in the /v1/conversation/completion API occurs because the code deletes req[\"conversation_id\"] from the request dictionary and then tries to acc",
          "created_at": "2025-06-03T15:02:48Z"
        }
      ]
    },
    {
      "issue_number": 2839,
      "title": "[Question]: Why does Ragflow use Elasticsearch instead of Milvus?",
      "body": "### Describe your problem\n\nMilvus is better at vector search",
      "state": "open",
      "author": "DAAworld",
      "author_type": "User",
      "created_at": "2024-10-15T02:51:00Z",
      "updated_at": "2025-06-04T01:33:55Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/2839/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/2839",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/2839",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:58.276642",
      "comments": [
        {
          "author": "JinHai-CN",
          "body": "RAGFlow also needs full-text index to search key words.",
          "created_at": "2024-10-15T02:59:17Z"
        },
        {
          "author": "Halfknow",
          "body": "ragflow using es as vector storage and now using infiniflow",
          "created_at": "2024-10-17T06:38:05Z"
        },
        {
          "author": "seetimee",
          "body": "This is quite intriguing, I'd love to learn more!\r\n",
          "created_at": "2024-12-24T03:01:52Z"
        },
        {
          "author": "snoopy7713",
          "body": "如果你需要最强的纯文本搜索，选 Elasticsearch。\n\n如果你需要最强的向量搜索 + 基础全文检索 + 属性过滤组合，或者核心需求是无缝融合关键词和语义的混合检索，选 Milvus。Milvus 2.5 的全文检索功能使其在需要结合文本匹配和语义理解的场景中成为极具吸引力的选择。",
          "created_at": "2025-06-04T01:33:55Z"
        }
      ]
    },
    {
      "issue_number": 7881,
      "title": "[Question]:when conducting a knowledge base search in the chat interface, it was found that ollama has a high cpu usage rate?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nCurrently, when conducting a knowledge base search in the chat interface, it was found that ollama has a high cpu usage rate, but the GPU load is indeed empty, and the search takes more than ten minutes to complete. What happened during this process? Why does such a phenomenon occur?",
      "state": "open",
      "author": "zhugh2333",
      "author_type": "User",
      "created_at": "2025-05-27T05:57:12Z",
      "updated_at": "2025-06-04T00:04:20Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 26,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7881/reactions",
        "total_count": 3,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 1
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7881",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7881",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:58.468728",
      "comments": []
    },
    {
      "issue_number": 8004,
      "title": "[Feature Request]: shall we update the Dockerfile and support to deploy web ui / server / task executor individually ?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\nCurrently, it seems like to be an all-in-one deployment within the entrypoint.sh: https://github.com/infiniflow/ragflow/blob/main/Dockerfile#L207\n```\n\n### Describe the feature you'd like\n\nSplit the components and able to deploy them individually like dify did: https://github.com/langgenius/dify/blob/main/docker/docker-compose.yaml#L539\n\n\n### Describe implementation you've considered\n\nOr we could split it by manually, but the other end users wouldn't be able to do the same thing easily.\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "Colstuwjx",
      "author_type": "User",
      "created_at": "2025-06-02T10:06:26Z",
      "updated_at": "2025-06-03T15:28:17Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8004/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8004",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8004",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:58.468795",
      "comments": [
        {
          "author": "ZhenhangTung",
          "body": "@Colstuwjx Why do you want to deploy them separately?",
          "created_at": "2025-06-03T12:43:38Z"
        },
        {
          "author": "Colstuwjx",
          "body": "I think it's no doubt that if we follow a microservice pattern to develop a website, it naturally needs this feature support. Otherwise an UI changes need to restart the whole service, which is not good for the production even though there could be a graceful exit handler.\n",
          "created_at": "2025-06-03T14:36:59Z"
        },
        {
          "author": "ZhenhangTung",
          "body": "> I think it's no doubt that if we follow a microservice pattern to develop a website, it naturally needs this feature support. Otherwise an UI changes need to restart the whole service, which is not good for the production even though there could be a graceful exit handler.\n\n@Colstuwjx Thanks for t",
          "created_at": "2025-06-03T15:28:16Z"
        }
      ]
    },
    {
      "issue_number": 7931,
      "title": "[Feature Request]: It is suggested to parallelize the workflow nodes of the agent",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\nFor example, if a parent node A connects to two child nodes B and C, and node D integrates the outputs of nodes B and C, are nodes B and C computed in parallel, or is B executed first, followed by C?\n```\n\n### Describe the feature you'd like\n\nIt is recommended that nodes B and C be allowed to run in parallel until their results are integrated by node D.\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "1006076811",
      "author_type": "User",
      "created_at": "2025-05-29T02:38:53Z",
      "updated_at": "2025-06-03T12:55:36Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7931/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7931",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7931",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:58.694546",
      "comments": [
        {
          "author": "ZhenhangTung",
          "body": "@1006076811 Thanks for the input. Will talk to our eng team about it.",
          "created_at": "2025-06-03T12:55:34Z"
        }
      ]
    },
    {
      "issue_number": 7994,
      "title": "[Feature Request]:Optimize the current chunk split strategy based on separators and the max token setting.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\nI feel that the current chunk split logic is counterintuitive and incorrect. \nThe current approach first uses multiple separators to split the text into small chunks, and then stitches those small fragments back together until reaching the specified max_token limit.\n\nUnder this logic, even if the first separator already produces chunks that meet the max token limit, the system still combines this chunk with subsequent ones. — This is highly counterintuitive. If a user sets multiple separators, the expectation is that the first separator will produce chunks that satisfy the token limit. Only when a chunk exceeds the max token limit should the second separator be used to further split it.\n```\n\n### Describe the feature you'd like\n\nI believe the correct logic should be: \nIf I specify multiple separators, the system should first try splitting using the first separator. \nIf the resulting segments are smaller than the max_token value, then each of those should be treated as complete chunks. \nIf any segment is larger than max_token, then the next separator should be tried for further splitting. If all separators are exhausted and the resulting segment is still larger than max_token, only then should the last resort be applied—truncating based on the max_token limit.\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "sinopec",
      "author_type": "User",
      "created_at": "2025-05-31T11:58:45Z",
      "updated_at": "2025-06-03T12:54:16Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7994/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7994",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7994",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:58.893409",
      "comments": [
        {
          "author": "ZhenhangTung",
          "body": "@sinopec Thanks for the thoughtful proposal.\n\nTo help us better understand and prioritize this, could you share what specific problems the current chunking logic has caused in your actual use cases? For example, are there particular retrieval failures, performance issues, or quality concerns that th",
          "created_at": "2025-06-03T12:54:15Z"
        }
      ]
    },
    {
      "issue_number": 7996,
      "title": "[Feature Request]: Add support for parent-child chunk and chunk overlap functionality.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\nThe current chunk strategy is not effective, especially in scenarios where related content is spread far apart. \nAdditionally, the current segmentation does not support overlap between chunks, which leads to severe semantic fragmentation when truncating based on the max token limit.\n```\n\n### Describe the feature you'd like\n\nAdd support for parent-child chunk, so that when a specific chunk is retrieved, its parent section—or even the entire document—can also be retrieved accordingly.\n\nAdd an overlap setting so that when truncation based on the max token limit is unavoidable, a specified number of characters from the previous chunk can be included in the current chunk. This helps prevent semantic fragmentation.\n\n### Describe implementation you've considered\n\nThis is a feature that has already been implemented by competitors. As a project dedicated to building knowledge bases, RAGFlow should do this better than other projects that treat knowledge bases as just a minor feature—otherwise, where is RAGFlow's competitive edge?\n\n\n### Documentation, adoption, use case\n\n```Markdown\n[https://docs.dify.ai/en/guides/knowledge-base/create-knowledge-and-upload-documents/chunking-and-cleaning-text](url)\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "sinopec",
      "author_type": "User",
      "created_at": "2025-05-31T12:16:51Z",
      "updated_at": "2025-06-03T12:52:00Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7996/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7996",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7996",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:59.072928",
      "comments": [
        {
          "author": "ZhenhangTung",
          "body": "@sinopec Hi, I’m the product manager of RAGFlow. Wanna say thanks to your feedback. \n\nWe don’t adopt features solely because competitors have implemented them. For the issue you raised, we’ll evaluate it carefully. Whether and how we address it will be based on internal research and user need priori",
          "created_at": "2025-06-03T12:51:58Z"
        }
      ]
    },
    {
      "issue_number": 8026,
      "title": "[Feature Request]: Knowledge base supporting multi-modal embedding models",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\n\n```\n\n### Describe the feature you'd like\n\nBackground and Significance:\nBoth Alibaba and Volcano Engine have launched multimodal embedding models, which can greatly expand the application scope of knowledge bases (for example, creating a product image knowledge base for image retrieval).\nRequirement:\nragflow supports multimodal embedding models.\n\n### Describe implementation you've considered\n\n1: Support for adding multimodal embedding models\n2: The knowledge base supports using multimodal embedding models to store and index data\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "xxyj6450",
      "author_type": "User",
      "created_at": "2025-06-03T10:31:44Z",
      "updated_at": "2025-06-03T12:42:13Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8026/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8026",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8026",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:59.276843",
      "comments": [
        {
          "author": "ZhenhangTung",
          "body": "@xxyj6450 Thanks for your feedback. What's your use cases in your team trying to solve using multimodal embedding models? We did add multimodal embedding model like https://blog.voyageai.com/2024/11/12/voyage-multimodal-3/ after getting user's feedback in our discord channel.",
          "created_at": "2025-06-03T12:42:12Z"
        }
      ]
    },
    {
      "issue_number": 8029,
      "title": "[Feature Request]: provide raw db migrate sqls for more restrict enterprise production environment",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\nHi team,\n\nI've found the db migration would be done by automatically with `init_web_db()` and `init_web_data()`. However, within a more restrict enterprise production environment, it would be hard to grant create table such DDL permissions to the application service, instead, we need to provide all of the raw sqls and complete the audit / review before actually run the migration.\n\nIs it possible to provide all of the migration sqls like langfuse did: https://github.com/langfuse/langfuse/tree/main/packages/shared/prisma/migrations ?\n```\n\n### Describe the feature you'd like\n\nProvide the raw migration sqls under an individual folder so that we could do manual migration.\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "Colstuwjx",
      "author_type": "User",
      "created_at": "2025-06-03T11:41:28Z",
      "updated_at": "2025-06-03T12:37:17Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8029/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8029",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8029",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:59.527473",
      "comments": [
        {
          "author": "ZhenhangTung",
          "body": "@Colstuwjx Thanks for raising this question. Cannot promise any plans on it right now and I will review it from time to time to see if we can solve this problem. ",
          "created_at": "2025-06-03T12:37:16Z"
        }
      ]
    },
    {
      "issue_number": 3665,
      "title": "[Feature Request]: Outline KB integration (getoutline.com)",
      "body": "### Is there an existing issue for the same feature request?\n\n- [X] I have checked the existing issues.\n\n### Is your feature request related to a problem?\n\n```Markdown\nYes. Currently, RAGFlow’s knowledge bases are limited to file uploads, which restricts the ability to integrate dynamic, structured data from external platforms (e.g., Outline, BookStack, Docmost, etc.). This creates friction for users who want to unify their workflows with live or collaboratively updated knowledge bases.\n```\n\n\n### Describe the feature you'd like\n\nI’d like to suggest RAGFlow support integration with external knowledge bases, starting with platforms like [Outline](https://www.getoutline.com/). This would enable users to connect their external KBs directly to RAGFlow, providing real-time access to structured data for retrieval-augmented generation.\r\n\r\n## Key capabilities\r\n- Sync structured data (e.g., collections, documents, pages) from external APIs.\r\n- Enable real-time updates via webhooks or polling mechanisms.\r\n- Allow users to manage and prioritise multiple knowledge base connections within RAGFlow.\n\n### Describe implementation you've considered\n\n- API integration: Begin with Outline’s RPC-style API and OpenAPI specification to fetch and sync content. Extend to other platforms like BookStack and Docmost using their respective APIs.\r\n- Incremental Syncs: Implement webhook-based incremental updates or scheduled polling to ensure live data remains accessible.\r\n- Data structuring: Map external knowledge base structures (e.g., Collections/Documents in Outline, Books/Pages in BookStack) to RAGFlow’s knowledge base model.\r\n- Authentication: Use API keys.\n\n### Documentation, adoption, use case\n\n```Markdown\nScenarios:\r\n- Dynamic knowledge updates: A team using Outline, Docmost or BookStack to manage evolving documentation can sync their collections/pages with RAGFlow, ensuring generated responses reflect the most current information.\r\n- Collaborative KBs: Teams working on shared knowledge bases like Outline, Docmost, BookStack, etc., can integrate directly into RAGFlow for enhanced querying, summarisation, and retrieval.\r\n- Hybrid workflows: Organisations combining file-based and live knowledge systems can centralise their workflows by integrating these platforms with RAGFlow.\r\n\r\nExample Workflow:\r\n1. User connects an external knowledge base (e.g., Outline) by providing API credentials.\r\n2. RAGFlow fetches and indexes the content for retrieval.\r\n3. Subsequent updates in the external platform trigger real-time syncs or periodic updates in RAGFlow.\n```\n\n\n### Additional information\n\n[Outline API Documentation](https://www.getoutline.com/developers)\r\n\r\n---\r\n\r\n<img width=\"1438\" alt=\"screenshot\" src=\"https://github.com/user-attachments/assets/18377448-0d6b-4751-8076-6ae1ec591993\">\r\n",
      "state": "open",
      "author": "fullstackdesign-xyz",
      "author_type": "User",
      "created_at": "2024-11-26T13:51:16Z",
      "updated_at": "2025-06-03T12:31:58Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/3665/reactions",
        "total_count": 2,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 2,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/3665",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/3665",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:59.701688",
      "comments": [
        {
          "author": "metorm",
          "body": "I'd like this too.",
          "created_at": "2025-04-01T12:47:37Z"
        },
        {
          "author": "which-W",
          "body": "@fullstackdesign-xyz \n👋 Thanks a lot for your suggestion, and sorry for the delayed response!\n\nYour idea about supporting external knowledge bases like Outline really gave us something to think about 💡. While this isn’t currently supported in our product, we’ll be evaluating the potential of adding ",
          "created_at": "2025-05-26T10:31:48Z"
        },
        {
          "author": "metorm",
          "body": "Hi guys, I wrote a simple script [ragflow-sync](https://github.com/metorm/ragflow-sync), on the base of the [excellent outline wiki api wrapper called outline-python-api](https://github.com/Yoshino-s/outline-python-api). You can used this as a temporary solution. \n\nAlso, please consider add this to ",
          "created_at": "2025-05-31T03:24:11Z"
        },
        {
          "author": "ZhenhangTung",
          "body": "@metorm Got it. Can't promise that we will integrate outline, but we do plan to integrate S3, Google Drive, etc.",
          "created_at": "2025-06-03T12:31:57Z"
        }
      ]
    },
    {
      "issue_number": 7460,
      "title": "[Bug]: Embeddable Chat Iframe Causes Parent Page to Jump When New Messages Appear",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\ncb37f00a8fb517d8507dc48a7c017d57ba8828c0\n\n### RAGFlow image version\n\nv0.18.0 slim\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nWhen embedding the RAGFlow chat interface as an iframe in an external website, the parent page jumps/scrolls to the position of the iframe whenever a new message is added to the chat. This creates a disruptive user experience when the iframe is positioned lower on the page, as users are constantly scrolled away from their current position.\n\nThe issue occurs because the chat component uses scrollIntoView() to automatically scroll to new messages, but this method affects the parent page's scrolling as well, not just the content within the iframe.\n\n### Expected behavior\n\nThe chat interface should automatically scroll to show new messages, but this scrolling should be contained within the iframe only. The parent page should remain at its current scroll position regardless of activity within the embedded chat.\n\n### Steps to reproduce\n\n```Markdown\nCreate a chat assistant and share it using the embed feature\nCopy the generated iframe code\nCreate a test HTML page with significant content before the iframe (to ensure scrolling is noticeable)\nEmbed the iframe in the test page\nLoad the page and scroll down to see the iframe\nSend a message in the chat\nObserve how the parent page jumps to bring the iframe into view when the response is received\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "dangerousbeans",
      "author_type": "User",
      "created_at": "2025-05-04T00:13:45Z",
      "updated_at": "2025-06-03T12:08:55Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7460/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "cike8899"
      ],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7460",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7460",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:45:59.913735",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHello @dangerousbeans! 👋 I'm [Dosu](https://dosu.dev), your friendly bot here to help you tackle bugs, answer questions, and navigate the world of contributions while you wait for a human maintainer. Let's get started! 🚀\n\n<!-- Answer -->\nThe issue you're experiencing with the RAGFl",
          "created_at": "2025-05-04T00:15:23Z"
        },
        {
          "author": "dangerousbeans",
          "body": "https://github.com/infiniflow/ragflow/pull/7461",
          "created_at": "2025-05-04T00:23:18Z"
        },
        {
          "author": "PaDev123",
          "body": "After upgrading RagFlow into v0.19.0, this issue still remains the same. The Embedded Chat IFrame still causing Parent Page always scrolling to the bottom part of where the Chat IFrame located at whenever there are any input to or response from the chat.\n\nAre there any way to workaround with this cu",
          "created_at": "2025-06-03T12:08:53Z"
        }
      ]
    },
    {
      "issue_number": 8030,
      "title": "[Question]: Make ragflow as Dify's external Knowledge, the request is timeout",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nMake ragflow as Dify's external Knowledge, the request is timeout. But after 30 seconds the log of request can be seen. ",
      "state": "open",
      "author": "huanzai",
      "author_type": "User",
      "created_at": "2025-06-03T11:44:07Z",
      "updated_at": "2025-06-03T11:46:56Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8030/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8030",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8030",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:00.147366",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe timeout issue when making RAGFlow serve as Dify's external Knowledge is a known problem, especially if the request takes longer than the default timeout duration. This often happens when the processing is heavy or the output is large. You can address this by increasing the timeou",
          "created_at": "2025-06-03T11:46:55Z"
        }
      ]
    },
    {
      "issue_number": 8022,
      "title": "[Question]: Chat doesn't retrieve answer from knowledge",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nChat doesn't retrieve answer from knowledge. The knowledge is worked when I use the search.  please help",
      "state": "open",
      "author": "huanzai",
      "author_type": "User",
      "created_at": "2025-06-03T08:02:52Z",
      "updated_at": "2025-06-03T11:26:37Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 10,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8022/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8022",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8022",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:00.356227",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThere are several known reasons why the chat feature in RAGFlow might not retrieve answers from the knowledge base, even though the search function works:\n\n- The Retrieval component may not be properly linked to your knowledge base in the chatbot configuration. Double-check that the ",
          "created_at": "2025-06-03T08:05:59Z"
        },
        {
          "author": "huanzai",
          "body": "@dosu 人工",
          "created_at": "2025-06-03T08:36:38Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\n你的“@dosu 人工”意思是需要人工协助或更详细的帮助。根据你之前反馈的“Chat 不从知识库检索答案，但搜索功能正常”，目前社区和官方有一些常见排查和解决方法：\n\n1. 检查 Chatbot 配置里的 Retrieval 组件，确保已正确关联知识库，并且知识库和 Chatbot 使用的 embedding model 一致，否则无法检索到内容。[参考](https://github.com/infiniflow/ragflow/issues/7910)\n2. 系统提示词（system prompt）必须包含 `{knowledge}` 变量，否则检索到的知识",
          "created_at": "2025-06-03T08:38:17Z"
        },
        {
          "author": "huanzai",
          "body": "@dosu 都检查过了",
          "created_at": "2025-06-03T09:20:36Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\n你已经排查了所有常见配置和参数问题，但 chat 依然无法从知识库检索答案。根据近期社区反馈和源码分析，目前还有以下几个方向可以进一步尝试：\n\n1. 很多类似问题在升级到最新 nightly 版 Docker 镜像后解决，尤其是 v0.17.2 及之前版本存在已知 bug，建议务必拉取并使用 nightly 版镜像进行测试（不是 nightly-slim）[参考](https://github.com/infiniflow/ragflow/issues/6488)。\n2. 如果你已经在用 nightly 版，建议明确下当前的 RAGFlow 版本号和镜像 tag",
          "created_at": "2025-06-03T09:24:14Z"
        }
      ]
    },
    {
      "issue_number": 8025,
      "title": "[Bug]:Unable to add the Volcano Engine embedding model",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n不知道\n\n### RAGFlow image version\n\n0.17.0,0.19.0都存在\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\n添加火山引擎的向量模型（例如mteb的中文王者模型doubao-embedding-large-text-250515）时提示：\nFail to access embedding model(doubao-embedding-large-text-250515).Error code: 404 - {'error': {'code': 'InvalidEndpointOrModel.NotFound', 'message': 'The model or endpoint https://ark.cn-beijing.volces.com/api/v3 does not exist or you do not have access to it. Request id: 02174894259610013bec6323f33f78c303ae4a7b399329b2955b0', 'param': '', 'type': 'NotFound'}}\n\n![Image](https://github.com/user-attachments/assets/7184c442-a2dc-44b1-8fc5-da31fdbf39d2)\n\n我尝试过使用快捷API方式接入或创建在线推理来接入（仅模型ID不同），都是相同的错误。\n而使用同样的配置在其他rag平台都能正常接入（例如maxkb)\n此外，目前已经在ragflow中添加了火山引擎的豆包模型、deepseek模型等大语言模型，只是embedding模型添加不上\n\n---\nWhen adding a vector model of ByteDance Volcano Engine (such as the Chinese king model doubao-embedding-large-text-250515 in MTEB), the prompt is:\nFail to access embedding model(doubao-embedding-large-text-250515).Error code: 404 - {'error': {'code': 'InvalidEndpointOrModel.NotFound', 'message': 'The model or endpoint https://ark.cn-beijing.volces.com/api/v3 does not exist or you do not have access to it. Request id: 02174894259610013bec6323f33f78c303ae4a7b399329b2955b0', 'param': '', 'type': 'NotFound'}}\n\n![Image](https://github.com/user-attachments/assets/7184c442-a2dc-44b1-8fc5-da31fdbf39d2)\n\nI have tried to access through the quick API method or create online inference for access (only the model ID is different), but the same error occurs. And with the same configuration, it can be accessed normally on other RAG platforms (such as maxkb). In addition, large language models such as Doubao model of ByteDance and DeepSeek model have been added to RAGFlow, but the embedding model cannot be added. \n\n### Expected behavior\n\nHope to access the Volcengine vector model normally\n\n### Steps to reproduce\n\n```Markdown\n1、进入ragflow 模型提供商\n2、添加火山引擎模型\n3、选择embedding模型，输入模型名称doubao-embedding-large-text-250515、EndpointID（https://ark.cn-beijing.volces.com/api/v3）、api key和最大tokens(4096)\n4、点击“确定”\n\n---\n\n1、Enter the ragflow model provider.\n2、Add the Volcengine model.\n3、Select the embedding model and enter the model name doubao - embedding - large - text - 250515, EndpointID (https://ark.cn - beijing.volces.com/api/v3), api key, and the maximum number of tokens (4096).\n4、Click \"OK\".\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "xxyj6450",
      "author_type": "User",
      "created_at": "2025-06-03T10:04:37Z",
      "updated_at": "2025-06-03T10:13:05Z",
      "closed_at": "2025-06-03T10:13:03Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8025/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8025",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8025",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:00.555664",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @xxyj6450! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nYour issue with adding the Volcano Engine embedding model in RAGFlow appears to be due to a combination of endpoint configuration and model support.\n\n1. **Endpoint URL**: The 40",
          "created_at": "2025-06-03T10:07:08Z"
        },
        {
          "author": "xxyj6450",
          "body": "> Hi [@xxyj6450](https://github.com/xxyj6450)! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n> \n> Your issue with adding the Volcano Engine embedding model in RAGFlow appears to be due to a combination of endpoint configuration and model support.\n> \n> 1. **Endpoint URL**:",
          "created_at": "2025-06-03T10:13:03Z"
        }
      ]
    },
    {
      "issue_number": 8024,
      "title": "[Bug]: 'Result window is too large, from + size must be less than or equal to: [10000] but was [12000]",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\ncommit 37075eab987336405bf28d3731d3ad3f50e4ec41\n\n### RAGFlow image version\n\n v0.18.0-99-g7d462d7c full\n\n### Other environment information\n\n```Markdown\narm64\n```\n\n### Actual behavior\n\n{\"ragflow_4b47c52612c811f099450242c0a8e006\":{\"settings\":{\"index\":{\"routing\":{\"allocation\":{\"include\":{\"_tier_preference\":\"data_content\"}}},\"refresh_interval\":\"1000ms\",\"number_of_shards\":\"2\",\"provided_name\":\"ragflow_4b47c52612c811f099450242c0a8e006\",\"similarity\":{\"scripted_sim\":{\"type\":\"scripted\",\"script\":{\"source\":\"double idf = Math.log(1+(field.docCount-term.docFreq+0.5)/(term.docFreq + 0.5))/Math.log(1+((field.docCount-0.5)/1.5)); return query.boost * idf * Math.min(doc.freq, 1);\"}}},\"creation_date\":\"1748698477769\",\"number_of_replicas\":\"0\",\"uuid\":\"le_ttJBeQ6WnYcUeYA0ZFA\",\"version\":{\"created\":\"8500003\"}}}},\"ragflow_d24b8ef2129811f0928b0242c0a89006\":{\"settings\":{\"index\":{\"routing\":{\"allocation\":{\"include\":{\"_tier_preference\":\"data_content\"}}},\"refresh_interval\":\"1000ms\",\"number_of_shards\":\"2\",\"provided_name\":\"ragflow_d24b8ef2129811f0928b0242c0a89006\",\"similarity\":{\"scripted_sim\":{\"type\":\"scripted\",\"script\":{\"source\":\"double idf = Math.log(1+(field.docCount-term.docFreq+0.5)/(term.docFreq + 0.5))/Math.log(1+((field.docCount-0.5)/1.5)); return query.boost * idf * Math.min(doc.freq, 1);\"}}},\"max_result_window\":\"500000\",\"creation_date\":\"1743911103126\",\"number_of_replicas\":\"0\",\"uuid\":\"EK_9f8DgSOqoBT6ccattfw\",\"version\":{\"created\":\"8500003\"}}}},\"ragflow_8888aa52152211f0b2d10242c0a87006\":{\"settings\":{\"index\":{\"routing\":{\"allocation\":{\"include\":{\"_tier_preference\":\"data_content\"}}},\"refresh_interval\":\"1000ms\",\"number_of_shards\":\"2\",\"provided_name\":\"ragflow_8888aa52152211f0b2d10242c0a87006\",\"similarity\":{\"scripted_sim\":{\"type\":\"scripted\",\"script\":{\"source\":\"double idf = Math.log(1+(field.docCount-term.docFreq+0.5)/(term.docFreq + 0.5))/Math.log(1+((field.docCount-0.5)/1.5)); return query.boost * idf * Math.min(doc.freq, 1);\"}}},**\"max_result_window\":\"500000\"**,\"creation_date\":\"1744600061833\",\"number_of_replicas\":\"0\",\"uuid\":\"7LezeTuSTRqWE2Grj2Mbbg\",\"version\":{\"created\":\"8500003\"}}}}}\n\nhttp://192.168.1.20:8080/knowledge/dataset/chunk?id=9055ab0c3e2311f0980c0242ac170006&doc_id=c8d763b23e2311f0ba430242ac170006&page=1200&size=10\n\npage=1200&size=10  **12000**\n\nBadRequestError('search_phase_execution_exception', meta=ApiResponseMeta(status=400, http_version='1.1', headers={'X-elastic-product': 'Elasticsearch', 'content-type': 'application/vnd.elasticsearch+json;compatible-with=8', 'content-length': '1495'}, duration=0.0032165050506591797, node=NodeConfig(scheme='http', host='es01', port=9200, path_prefix='', headers={'user-agent': 'elasticsearch-py/8.12.1 (Python/3.10.12; elastic-transport/8.12.0)'}, connections_per_node=10, request_timeout=10.0, http_compress=False, verify_certs=False, ca_certs=None, client_cert=None, client_key=None, ssl_assert_hostname=None, ssl_assert_fingerprint=None, ssl_version=None, ssl_context=None, ssl_show_warn=True, _extras={})), body={'error': {'root_cause': [{'type': 'illegal_argument_exception', 'reason': 'Result window is too large, from + size must be less than or equal to: **[10000] but was [12000]**. See the scroll api for a more efficient way to request large data sets. This limit can be set by changing the [index.max_result_window] index level setting.'}], 'type': 'search_phase_execution_exception', 'reason': 'all shards failed', 'phase': 'query', 'grouped': True, 'failed_shards': [{'shard': 0, 'index': 'ragflow_4b47c52612c811f099450242c0a8e006', 'node': 'l4S-yv3_QTesDPTUnwijoQ', 'reason': {'type': 'illegal_argument_exception', 'reason': 'Result window is too large, from + size must be less than or equal to: [10000] but was [12000]. See the scroll api for a more efficient way to request large data sets. This limit can be set by changing the [index.max_result_window] index level setting.'}}], 'caused_by': {'type': 'illegal_argument_exception', 'reason': 'Result window is too large, from + size must be less than or equal to: [10000] but was [12000]. See the scroll api for a more efficient way to request large data sets. This limit can be set by changing the [index.max_result_window] index level setting.', 'caused_by': {'type': 'illegal_argument_exception', 'reason': 'Result window is too large, from + size must be less than or equal to: [10000] but was [12000]. See the scroll api for a more efficient way to request large data sets. This limit can be set by changing the [index.max_result_window] index level setting.'}}}, 'status': 400})\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nhttp://192.168.1.20:8080/knowledge/dataset/chunk?id=9055ab0c3e2311f0980c0242ac170006&doc_id=c8d763b23e2311f0ba430242ac170006&page=1201&size=10\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "RodriguezZhang",
      "author_type": "User",
      "created_at": "2025-06-03T09:01:33Z",
      "updated_at": "2025-06-03T09:03:56Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8024/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8024",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8024",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:00.746099",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @RodriguezZhang! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThe error \"Result window is too large, from + size must be less than or equal to: [10000] but was [12000]\" occurs because Elasticsearch limits the number of results you ca",
          "created_at": "2025-06-03T09:03:55Z"
        }
      ]
    },
    {
      "issue_number": 5393,
      "title": "[Bug]: Ask a question about Excel data, Prompt automatically changes",
      "body": "### Is there an existing issue for the same bug?\n\n- [x] I have checked the existing issues.\n\n### RAGFlow workspace code commit ID\n\n0\n\n### RAGFlow image version\n\n0\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nAsk a question about Excel data, Prompt automatically changes You are a Database Administrator. You need to check the fields of the following tables based on the user's list of questions and write the SQL corresponding to the last question.You are a Database Administrator. You need to check the fields of the following tables based on the user's list of questions and write the SQL corresponding to the last question.\n\n![Image](https://github.com/user-attachments/assets/78206db5-ae38-4f1f-add1-338e0a54b397)\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nAsk a question about Excel data, Prompt automatically changes\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "Kiteflyingee",
      "author_type": "User",
      "created_at": "2025-02-26T09:34:45Z",
      "updated_at": "2025-06-03T09:01:58Z",
      "closed_at": "2025-03-02T14:08:45Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/5393/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/5393",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/5393",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:00.964635",
      "comments": [
        {
          "author": "Kiteflyingee",
          "body": "![Image](https://github.com/user-attachments/assets/fcd88a18-fa7e-4fd9-8cb3-f512cfef4ac8)",
          "created_at": "2025-02-26T09:35:40Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Please use `General` chunking method to parse it.",
          "created_at": "2025-02-27T02:03:03Z"
        },
        {
          "author": "Kiteflyingee",
          "body": "thinks ",
          "created_at": "2025-03-02T14:08:45Z"
        },
        {
          "author": "fyxkszz",
          "body": "I'm also having an issue like this, could it be a bug?",
          "created_at": "2025-03-03T06:38:19Z"
        },
        {
          "author": "linux1650",
          "body": "I also encountered a similar problem, which cannot be solved for the time being. I suspect that there is some problem with the workflow settings of the built-in chat customer service, which caused the prompt to be replaced when retrieving the table information. So I chose to upload the excel table a",
          "created_at": "2025-03-11T01:05:35Z"
        }
      ]
    },
    {
      "issue_number": 7910,
      "title": "[Bug]: The knowledge is not used in my conversation.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n v0.19.0 slim\n\n### RAGFlow image version\n\n v0.19.0 slim\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nI am using the slim version of Ragflow and have locally deployed Qwen2.5-LM. For the embedding model, I am using BGE-M3. I have uploaded relevant PDFs as the knowledge base and created a corresponding chatbot. However, after starting a conversation, I noticed that the responses do not utilize the knowledge base when answering questions.\n\n<img width=\"1409\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/0742a6f5-97cf-45a3-95a9-17d29136d39b\" />\n\nThe configuration of my chatbot is\n\n<img width=\"540\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/807184c9-7184-4dc6-b5cd-af28724b2795\" />\n\n<img width=\"630\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/bd92ae72-1143-4c2a-9a68-d005b3181341\" />\n\n<img width=\"633\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/d89195d9-f309-4689-b223-b1414614b03a\" />\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nI have locally deployed Qwen and BGE-M3 using Ollama. When building the knowledge base, I selected \"general\" as the template. After the knowledge base was successfully constructed, I encountered this issue.\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "lcy0604",
      "author_type": "User",
      "created_at": "2025-05-28T07:22:08Z",
      "updated_at": "2025-06-03T08:28:23Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7910/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7910",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7910",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:01.183639",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @lcy0604! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nBased on your description and the configuration screenshots, here are the most likely reasons why your chatbot is not using the knowledge base, along with steps to troubleshoot:\n",
          "created_at": "2025-05-28T07:30:36Z"
        },
        {
          "author": "KevinHuSh",
          "body": "If you want to summarize a document, you might need to upload it in the chat window.",
          "created_at": "2025-05-30T09:12:18Z"
        },
        {
          "author": "huanzai",
          "body": "@lcy0604 解决了吗？我这边也是 0.191.0 slim   在 chat 里无法索引知识库  ",
          "created_at": "2025-06-03T08:28:22Z"
        }
      ]
    },
    {
      "issue_number": 7985,
      "title": "[Question]: Why can't I successfully invoke the rerank model deployed by vllm when using the API at /api/v1/retrieval?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nmy rerank model was successfully deployed with vllm,and I have successfully use this rerank model to test callback with my knowledge base\n![Image](https://github.com/user-attachments/assets/a7081e98-3e28-4857-8e1d-ac9525a6c271)\n\nbut when I try to use api , the request was wrong with this response:\n`{\n  \"code\": 100,\n  \"data\": null,\n  \"message\": \"LookupError('Model(vllm/bge-reranker-v2-m3) not authorized')\"\n}`\n\nthis is my api code:\n`try:\n    response = requests.post(\n        url=\"http://192.168.191.101:8092/api/v1/retrieval\",\n        headers={\n            \"Authorization\": \"Bearer ragflow-kzNmJhYWE4MmRlODeXZjBhN2IyMGE2Nj\",\n            \"content-Type\": \"application/json\"\n        },\n        json={\n            \"question\": \"特种设备检验检测过程中发现设备存在严重事故隐患时该如何处理？\",\n            \"dataset_ids\": [\"9ec38706301b11f08abf0a66212dace0\"],\n            \"top_k\": 3,\n            \"page\": 1,\n            \"page_size\": 3,\n            \"keyword\": False,\n            \"highlight\": False,\n            \"similarity_threshold\": 0.5,\n            \"vector_similarity_weight\": 0.7,\n            \"rerank_id\": \"vllm/bge-reranker-v2-m3\",\n        },\n        timeout=120,\n    )\n    response.raise_for_status()\nexcept requests.exceptions.RequestException as e:`\n\nhow can I use this rerank model?\n",
      "state": "open",
      "author": "lovekarri",
      "author_type": "User",
      "created_at": "2025-05-30T11:00:36Z",
      "updated_at": "2025-06-03T07:50:32Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7985/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7985",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7985",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:01.380169",
      "comments": [
        {
          "author": "lovekarri",
          "body": "this is my api code \n\n```python\ntry:\n    response = requests.post(\n        url=\"http://192.168.191.101:8092/api/v1/retrieval\",\n        headers={\n            \"Authorization\": \"Bearer ragflow-kzNmJhYWE4MmRlODExZjBhN2IyMGE2Nj\",\n            \"content-Type\": \"application/json\"\n        },\n        json={\n  ",
          "created_at": "2025-05-30T11:04:53Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @lovekarri! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThe error `LookupError('Model(vllm/bge-reranker-v2-m3) not authorized')` means that the rerank_id you provided is not recognized or authorized by RAGFlow. This usually happens ",
          "created_at": "2025-05-30T11:08:30Z"
        },
        {
          "author": "lovekarri",
          "body": "@dosu \nyes, I'm sure the name of vllm/bge-reranker-v2-m3 was valid rerank model name, it's in the \"Rerank model\" dropdown in the Retrieval Testing page of the UI. the image above showed this name in the Retrieval Testing page, and it's active.\nmy API key in the Authorization header as Bearer <YOUR_A",
          "created_at": "2025-05-30T11:31:34Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nBased on the backend configuration and code, the rerank model ID vllm/bge-reranker-v2-m3 is not recognized as a valid rerank model by the RAGFlow API, even if it appears in the UI dropdown. The backend only accepts exact string matches for model names defined in its configuration fil",
          "created_at": "2025-05-30T11:34:14Z"
        },
        {
          "author": "lovekarri",
          "body": "finally resloved this problem.\nyou mustbe change the key. \nthe key 'rerank_id' is effective when you use Xinference,but if use vllm, the key must change to 'rerank_model'.\n\n```\ntry:\n    response = requests.post(\n        url=\"http://192.168.191.101:8092/api/v1/retrieval\",\n        headers={\n          ",
          "created_at": "2025-06-03T07:50:31Z"
        }
      ]
    },
    {
      "issue_number": 8020,
      "title": "[Question]:  What is the situation when the user table is locked for a long time",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\npeewee.OperationalError: (1205, 'Lock wait timeout exceeded; try restarting transaction') ，I didn't have this problem before, but it keeps getting this error today. I think it's still the user table",
      "state": "open",
      "author": "shentingming",
      "author_type": "User",
      "created_at": "2025-06-03T07:44:42Z",
      "updated_at": "2025-06-03T07:47:03Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8020/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8020",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8020",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:01.575942",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nA table in a database, such as the user table, can become locked for a long time when a transaction holds a lock and does not release it promptly. This often happens if a transaction is left open (for example, due to a long-running operation, a crash, or a deadlock), or if multiple c",
          "created_at": "2025-06-03T07:47:02Z"
        }
      ]
    },
    {
      "issue_number": 7791,
      "title": "[Bug]: The RagFlow HTTP API for updating the chat assistant cannot update the model.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n53c59c47a13bab9b7c8c56898e4d38325daa276b\n\n### RAGFlow image version\n\n0.18\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\n![Image](https://github.com/user-attachments/assets/f8b3cafc-41c0-4c27-b917-34bcbb05d0e2)\n\nWhen I update the model selection through the Update chat assistant interface: PUT /api/v1/chats/{chat_id}, and provide llm.model_name=deepseek-r1:32b to the interface, it can be successfully saved. However, the assistant session cannot call the model because the @Ollama field is not added to my model in the above code, resulting in llm_id=deepseek-r1:32b. If I want llm_id to be saved correctly, I need to set llm.model_name=deepseek-r1:32b@Ollama, but this makes it impossible for me to verify through the source code in the above screenshot.\n\n![Image](https://github.com/user-attachments/assets/1979b4ba-b2d1-48cc-9e83-86c59a5d2120)\n\n![Image](https://github.com/user-attachments/assets/7951222e-f241-4b06-b687-fea08b63e762)\n\n### Expected behavior\n\nThe llm.model_name=deepseek-r1:32b I submitted should be processed by adding the @ suffix, or when verifying the query, the @ suffix should be automatically truncated for the query.\n\n### Steps to reproduce\n\n```Markdown\nSubmit a modification to the chat assistant through the \"Update chat assistant\" method by sending a PUT request to /api/v1/chats/{chat_id}, and update and submit the value of llm.model_name\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "PaoGitCode",
      "author_type": "User",
      "created_at": "2025-05-22T04:00:10Z",
      "updated_at": "2025-06-03T07:23:06Z",
      "closed_at": "2025-06-03T07:23:06Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7791/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7791",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7791",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:01.807016",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nBased on the code and documentation, the '@Ollama' suffix is used as a factory identifier to distinguish between different model providers in RagFlow. When you update the chat assistant via the PUT /api/v1/chats/{chat_id} endpoint and set llm.model_name=deepseek-r1:32b, the system sa",
          "created_at": "2025-05-22T04:12:44Z"
        },
        {
          "author": "PaoGitCode",
          "body": "![Image](https://github.com/user-attachments/assets/ab7d4424-58fd-4443-87c9-79fdaa370221)\n\nThe current problem is that I am unable to update the value with @ollama through the above interface. This is because the code will query tenant_llm by including the entire string of @ollama, but the llm_name ",
          "created_at": "2025-05-22T15:23:20Z"
        },
        {
          "author": "asiroliu",
          "body": "@PaoGitCode \nThis is a known issue that we're currently tracking.\n\nWe've now fixed the issues that occurred during dataset creation and updates. Would you be interested in submitting a PR for this?\n\nrefer： https://github.com/infiniflow/ragflow/blob/main/api/apps/sdk/dataset.py#L147\nhttps://github.co",
          "created_at": "2025-05-26T06:34:25Z"
        },
        {
          "author": "tardigrde",
          "body": "I have a similar problem. \nWhen I try \n\n```python\nrag_flow.create_dataset(name=dataset_name, embedding_model=\"bge-m3@Ollama\")\n```\nI get `Unsupported model: <bge-m3@Ollama>`, but it's there and set as the default embedding model.\n\nSimilarly, when I try\n\n```python\nrag_flow.create_chat(name=assistant_n",
          "created_at": "2025-06-03T05:27:38Z"
        }
      ]
    },
    {
      "issue_number": 4113,
      "title": "[Bug]: Knowledge base deleted but bucket and documents in minio not deleted",
      "body": "### Is there an existing issue for the same bug?\r\n\r\n- [X] I have checked the existing issues.\r\n\r\n### RAGFlow workspace code commit ID\r\n\r\n20d14e43\r\n\r\n### RAGFlow image version\r\n\r\n20d14e43\r\n\r\n### Other environment information\r\n\r\n```Markdown\r\nBoth in windows docker and linux docker, we found this situation is existed in all our environments from version 0.10.0 to 0.15.0.\r\n```\r\n\r\n\r\n### Actual behavior\r\n\r\nThe knowledge base deleted but the bucket and documents in minio are not deleted.\r\n\r\n### Expected behavior\r\n\r\nSince the bucket is not supported to be deleted directly if there are still documents in the bucket. After deleting the kb, all the documents should be deleted and then the empty bucket should be removed.\r\n\r\n\r\n### Steps to reproduce\r\n\r\n```Markdown\r\nCreate a kb and upload some documents, then delete the whole kb, the corresponding bucket in minio is still there.\r\n```\r\n\r\n\r\n### Additional information\r\n\r\n![image](https://github.com/user-attachments/assets/954758a7-31ae-45cf-a92f-733e326c6c84)\r\n",
      "state": "open",
      "author": "Halfknow",
      "author_type": "User",
      "created_at": "2024-12-19T06:53:55Z",
      "updated_at": "2025-06-03T07:13:39Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "💞 feature"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/4113/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/4113",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/4113",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:02.001460",
      "comments": [
        {
          "author": "which-W",
          "body": "@Halfknow \n👋 Thanks so much for your suggestion — and sorry for the delayed response!\n\nThis issue should now be resolved with recent updates 🛠️. When you have a moment, feel free to close this feature request. We may do a round of clean-up on resolved items soon ✅\n\nAppreciate your input, and we’d lo",
          "created_at": "2025-06-03T07:13:38Z"
        }
      ]
    },
    {
      "issue_number": 4104,
      "title": "[Feature Request]: Add (additional) Keywords and Questions to RAPTOR results",
      "body": "### Is there an existing issue for the same feature request?\r\n\r\n- [X] I have checked the existing issues.\r\n\r\n### Is your feature request related to a problem?\r\n\r\n_No response_\r\n\r\n### Describe the feature you'd like\r\n\r\nI noticed, that the RAPTOR summary, does not have any keywords and/or questions assigned. (which is indented).\r\nNot sure if this would be an overkill and/or additional functionality but it is technically possible, to (auto) provide further/additional keywords and questions to the RAPTOR result. Will this enhance the accucary maybe?\r\n\r\nEdit:\r\nCareful not to end up in a \"parsing\" loop\r\n\r\n### Describe implementation you've considered\r\n\r\n_No response_\r\n\r\n### Documentation, adoption, use case\r\n\r\n_No response_\r\n\r\n### Additional information\r\n\r\n_No response_",
      "state": "open",
      "author": "Snify89",
      "author_type": "User",
      "created_at": "2024-12-18T14:35:34Z",
      "updated_at": "2025-06-03T07:07:33Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/4104/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/4104",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/4104",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:02.174645",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "Possible.",
          "created_at": "2024-12-19T01:53:54Z"
        },
        {
          "author": "which-W",
          "body": "@Snify89 \n👋 Thanks a lot for your suggestion — and sorry for the late reply!\n\nAt the moment, you can use the keyword field to input specific keywords or questions 🔍. This might help with what you're trying to do!\n\nIf that works for your case, feel free to close this feature request when you get a ch",
          "created_at": "2025-06-03T07:07:32Z"
        }
      ]
    },
    {
      "issue_number": 4064,
      "title": "[Feature Request]: Add GPUStack.ai as model provider",
      "body": "### Is there an existing issue for the same feature request?\n\n- [X] I have checked the existing issues.\n\n### Is your feature request related to a problem?\n\n```Markdown\n如题\n```\n\n\n### Describe the feature you'd like\n\n如题\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n_No response_\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "czhcc",
      "author_type": "User",
      "created_at": "2024-12-17T07:37:56Z",
      "updated_at": "2025-06-03T06:57:29Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/4064/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/4064",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/4064",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:02.355788",
      "comments": [
        {
          "author": "lizheng419",
          "body": "This way you can access\r\n![image](https://github.com/user-attachments/assets/43c315ad-2bbb-401f-9ab2-9772051c1a8f)\r\n",
          "created_at": "2024-12-17T07:41:25Z"
        },
        {
          "author": "which-W",
          "body": "@czhcc \n👋 Thanks so much for your suggestion, and sorry for the delayed response!\n\nWe’ve now added support for the GPUStack model 💪 — this might help address your request. Feel free to give it a try when you have time!\n\nIf it solves your issue, you can close this feature request at your convenience.",
          "created_at": "2025-06-03T06:57:28Z"
        }
      ]
    },
    {
      "issue_number": 3990,
      "title": "[Question]: How to add body info correctly in invoke component?",
      "body": "### Describe your problem\n\nI notice the header can be provided as json format while the body passed through key-value always fail to parsed as right data type. can we give the body info directly by json format?",
      "state": "open",
      "author": "zydmtaichi",
      "author_type": "User",
      "created_at": "2024-12-11T09:02:34Z",
      "updated_at": "2025-06-03T06:42:43Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question",
        "💞 feature"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/3990/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/3990",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/3990",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:07.555135",
      "comments": [
        {
          "author": "zydmtaichi",
          "body": "![c4ec03b5ede6903fe5b6789bae3b3ca](https://github.com/user-attachments/assets/13297f4c-edd2-4045-847a-3171126e67a2)\r\nfor example, as above img, the width and height don't pass as a integer type in request body",
          "created_at": "2024-12-11T09:08:53Z"
        },
        {
          "author": "peizimo",
          "body": "![image](https://github.com/user-attachments/assets/d81b36a4-9135-466f-8f19-8212de74db3c)\r\n![image](https://github.com/user-attachments/assets/e093f43e-d6e9-4c85-b480-0048900c7f33)\r\nI want to use this component to upload files to my knowledge base, but I don't know how to operate it, and \"Error:begi",
          "created_at": "2024-12-21T14:49:31Z"
        },
        {
          "author": "which-W",
          "body": "@zydmtaichi \n👋 Thanks so much for your feedback, and apologies for the late reply!\n\nWe’ve added a type field to the start component recently, which might address the issue you raised 🧩\nWhen you have a chance, feel free to check it out — and if it works for your use case, please consider closing this",
          "created_at": "2025-06-03T06:42:41Z"
        }
      ]
    },
    {
      "issue_number": 3964,
      "title": "[Feature Request]: Can the ragflow project provide a rag technical document, or a paper?",
      "body": "### Is there an existing issue for the same feature request?\n\n- [X] I have checked the existing issues.\n\n### Is your feature request related to a problem?\n\n_No response_\n\n### Describe the feature you'd like\n\nThanks\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n_No response_\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "changqingla",
      "author_type": "User",
      "created_at": "2024-12-10T09:02:35Z",
      "updated_at": "2025-06-03T06:38:56Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/3964/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/3964",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/3964",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:07.732481",
      "comments": [
        {
          "author": "which-W",
          "body": "@changqingla \n👋 Thanks a lot for your suggestion, and apologies for the delayed response!\n\nJust to clarify — could you let us know what kind of technical documentation you're referring to?\nIn the meantime, we do have some developer docs available here: https://ragflow.io/docs/dev/ 📚\n\nIf that helps a",
          "created_at": "2025-06-03T06:38:55Z"
        }
      ]
    },
    {
      "issue_number": 8014,
      "title": "[Feature Request]: local development doc is not good enough to install and startup the service on macOS",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\nIt was supposed to be able to complete the local development environment setup by following [this document](https://github.com/infiniflow/ragflow/tree/main?tab=readme-ov-file#-launch-service-from-source-for-development) , however, there are some issues I've found:\n\n1. `uv sync --python 3.10 --all-extras` would throw exception like [5589#issuecomment-2699579373](https://github.com/infiniflow/ragflow/issues/5589#issuecomment-2699579373) , and also the issue comment instruction seems like not enough to fix the issue on my local, I've tried to fix the pyicu issue by adding the envs and try again:\n\n\nexport SDKROOT=$(xcrun --sdk macosx --show-sdk-path)\nexport CPLUS_INCLUDE_PATH=\"$SDKROOT/usr/include/c++/v1\"\nexport C_INCLUDE_PATH=\"$SDKROOT/usr/include\"\n\n\n2. When I'm trying to continue to startup the service by `python3 api/ragflow_server.py`, it returned error `python3.10 ModuleNotFoundError: No module named 'beartype'`, then I tried `pip install .` and this issue seems like to be fixed\n\n3. however, it continue to return another error `torch not found`, and I fixed this by `pip install \".[full]\"`\n\n4. When I try to start the backend service at the third time, it continues to return error `Resource wordnet not found.\n  Please use the NLTK Downloader to obtain the resource:\n\n  >>> import nltk\n  >>> nltk.download('wordnet')\n` \n\nEm.. is it possible to make the local development and installation guide more complement, so we don't need to waste time on this.\n```\n\n### Describe the feature you'd like\n\nWrite down a comprehensive guide to resolve these installation issues, TBH, I've seen a lot of issues are related to this, it would be great for the end users if we can spend a few time on the documentation work.\n\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "Colstuwjx",
      "author_type": "User",
      "created_at": "2025-06-03T05:51:20Z",
      "updated_at": "2025-06-03T06:20:46Z",
      "closed_at": null,
      "labels": [
        "📖 documentation",
        "💞 feature"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8014/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8014",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8014",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:07.898425",
      "comments": [
        {
          "author": "Colstuwjx",
          "body": "Two more steps I've tried:\n\n```\n# to fix Resource wordnet not found issue\nimport nltk; nltk.download('wordnet')\n```\n\nand it throws another issue:\n\n```\n    import pyodbc\nImportError: dlopen(/opt/homebrew/anaconda3/envs/ragflow-local/lib/python3.10/site-packages/pyodbc.cpython-310-darwin.so, 0x0002): ",
          "created_at": "2025-06-03T06:07:46Z"
        },
        {
          "author": "Colstuwjx",
          "body": "And also [launch_backend_service.sh](https://github.com/infiniflow/ragflow/blob/main/docker/launch_backend_service.sh) didn't work on macOS since a lot of dependencies are using different path, it would be great if we could update the development document and make it works under macOS environment.\n",
          "created_at": "2025-06-03T06:20:45Z"
        }
      ]
    },
    {
      "issue_number": 7980,
      "title": "[Bug]: Using os.path.join for api_base and v1 causes incorrect URL on Windows",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nv0.19.0\n\n### RAGFlow image version\n\nv0.19.0\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nWhen calling the cv_model classes, the api_base is concatenated with 'v1' using `os.path.join()`. On Windows, this results in:\n\n![Image](https://github.com/user-attachments/assets/956f58a4-043b-4b67-950c-19e983b94ee8)\n\n![Image](https://github.com/user-attachments/assets/1118aa8c-6fd2-444c-9047-43f26bf9fb38)\n\nHowever, the expected URL should be: `http://{api_base}/v1`\nI think this happens because os.path.join is intended for file system paths and uses backslashes (\\) on Windows.\n\n### Expected behavior\n\nThe api_base and 'v1' should be joined to form a valid URL using forward slashes (/), regardless of the operating system. \n\n### Steps to reproduce\n\n```Markdown\nOn a Windows machine:\n1. Deploy the image2txt model on Ragflow.\n2. Parse a file, which calls vision_model (located at app/naive.py, line 422).\n3. This triggers a call to the cv_model class in llm/cv_model.py.\n4. An error occurs due to malformed URL construction when joining api_base and 'v1' using os.path.join.\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "tangxxiii",
      "author_type": "User",
      "created_at": "2025-05-30T09:28:33Z",
      "updated_at": "2025-06-03T06:18:41Z",
      "closed_at": "2025-06-03T06:18:41Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7980/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7980",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7980",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:08.101295",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @tangxxiii! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nYou are correct that using os.path.join for URL construction causes issues on Windows, as it introduces backslashes instead of forward slashes. This is not suitable for URLs, w",
          "created_at": "2025-05-30T09:31:42Z"
        }
      ]
    },
    {
      "issue_number": 7921,
      "title": "[Question]: ver:0.19 , api list chat assistant session error",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nrequest :  http://192.168.100.10/api/v1/chats/03843eec3ba711f0b8720242ac120006/sessions?page=0&page_size=10000&name=公共会话\n\nresult : {\n    \"code\": 100,\n    \"data\": null,\n    \"message\": \"IndexError('list index out of range')\"\n}\n\nIf the system defaults to not chatting, it is fine. If you list the session again after chatting, there will be a problem.",
      "state": "closed",
      "author": "cenyong",
      "author_type": "User",
      "created_at": "2025-05-28T10:25:36Z",
      "updated_at": "2025-06-03T06:05:44Z",
      "closed_at": "2025-06-03T06:05:43Z",
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7921/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7921",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7921",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:08.337733",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @cenyong! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThe \"IndexError('list index out of range')\" you encountered when listing chat assistant sessions in RAGFlow v0.19 is a known issue that occurs when there is a mismatch between th",
          "created_at": "2025-05-28T10:28:43Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Do you have backend error log stacks?",
          "created_at": "2025-05-30T09:08:30Z"
        },
        {
          "author": "KamilAtWorkBerlin",
          "body": "I am having the same issue using the python-sdk.\n`session = chat.list_sessions(id=session_id)[0]`\nworks only the first time when the Session is empty.\nWhen the session is not empty i get: \n\n> Exception: IndexError('list index out of range')\n\nBackend logs:\n\n```\n2025-06-02 14:22:43 ragflow-server  | 2",
          "created_at": "2025-06-02T12:48:01Z"
        },
        {
          "author": "panzi",
          "body": "Getting the same error now. I continued an old conversation with one message and it worked. Continued the same conversation a few minutes later and now every message crashes when it tries to get the conversation object. Excerpt from the RAGFlow server log:\n\n```\n2025-06-02 22:49:36,579 INFO     20 17",
          "created_at": "2025-06-02T14:57:57Z"
        },
        {
          "author": "panzi",
          "body": "I have now downgraded to RAGFlow v0.18.0 as that old version works.",
          "created_at": "2025-06-02T16:42:51Z"
        }
      ]
    },
    {
      "issue_number": 8011,
      "title": "[Question]: Why is the document parsing progress not updated sometimes?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nRagflow version:0.19.\nEmbedding model uses external services and pdf parser use \"naive\".\nChunking method: Laws.\n\nUpload some sample files and the progress will not be updated. If i restart all docker contains, all the files are shown as successful.\n\nWhat's the problem? Do I need to restart the service from time to time?",
      "state": "open",
      "author": "LCHONE",
      "author_type": "User",
      "created_at": "2025-06-03T03:16:54Z",
      "updated_at": "2025-06-03T04:53:02Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 9,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8011/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8011",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8011",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:08.525325",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe issue with document parsing progress not updating in RAGFlow v0.19 is most likely due to changes in the processing strategy: the system now waits for all documents to finish embedding before sending them to raptor in a batch. This can cause progress to appear stalled, especially ",
          "created_at": "2025-06-03T03:19:33Z"
        },
        {
          "author": "LCHONE",
          "body": "@dosu Pdf parser use \"naive\" and chunking method use \"Laws\" will cause the pdf file parsing to use ocr. Why is it happen? I understand that ocr should not be used with \"naive\". ",
          "created_at": "2025-06-03T03:45:18Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe reason OCR is being used when you select the \"naive\" PDF parser with the \"Laws\" chunking method is due to how the parser and chunking logic are implemented in RAGFlow. Both the \"naive\" and \"Laws\" chunking methods for PDFs rely on a parser class that, by default, performs OCR as p",
          "created_at": "2025-06-03T03:48:11Z"
        },
        {
          "author": "LCHONE",
          "body": "@dosu How to disable ocr?",
          "created_at": "2025-06-03T03:50:25Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nTo disable OCR in RAGFlow when parsing PDFs (including with the \"naive\" parser and \"Laws\" chunking method), set the parser configuration option layout_recognize to \"Plain Text\". This forces RAGFlow to use the PlainParser, which extracts text directly from the PDF and skips OCR entire",
          "created_at": "2025-06-03T03:52:59Z"
        }
      ]
    },
    {
      "issue_number": 7992,
      "title": "[Bug]: Final answer repeats over and over again, without ends.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nnull\n\n### RAGFlow image version\n\n0.19\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nFinal Answer： repeat without ends. \npart of information is as follows:\n================\nFinal Answer:\n\n根据提供的资料，美辰居门窗安装的具体收费标准如下：\n\n基础安装费用: 每平方米138元。\n复尺费用: 每平方米20元。\n物流配送费: 包含搬运费，需额外计算。\n对于每户安装面积小于10平方米的情况，将按10平方米收费。\n这些信息来自《美家门窗安装外包服务合同》。如需进一步了解或确认，请联系美辰居的官方客服或访问其官方网站以获取更详细的收费信息 .\n\nFinal Answer:\n\n关于“是怎么收费的”，以下是相关信息：\n\n基础安装费用: 每平方米138元。\n复尺费用: 每平方米20元。\n物流配送费: 包含搬运费，需额外计算。\n对于每户安装面积小于10平方米的情况，将按10平方米收费。\n这些信息来自《美家门窗安装外包服务合同》。如需进一步了解或确认，请联系美辰居的官方客服或访问其官方网站以获取更详细的收费信息 .\n\nFinal Answer:\n\n根据知识库中的数据，“是怎么收费的”问题涉及美辰居门窗安装的具体收费标准，包括基础安装费用、复尺费用和物流配送费。这些标准详细列于《美家门窗安装外包服务合同》中。\n\n因此，具体收费如下：\n\n基础安装费用: 每平方米138元。\n复尺费用: 每平方米20元。\n物流配送费: 包含搬运费，需额外计算。\n对于每户安装面积小于10平方米的情况，将按10平方米收费。\n如需进一步确认，请联系美辰居的官方客服或访问其官方网站 .\n\nFinal Answer:\n\n根据知识库中的信息，“是怎么收费的”问题涉及美辰居门窗安装的具体收费标准。以下是相关信息：\n\n基础安装费用: 每平方米138元。\n复尺费用: 每平方米20元。\n物流配送费: 包含搬运费，需额外计算。\n对于每户安装面积小于10平方米的情况，将按10平方米收费。\n这些信息来自《美家门窗安装外包服务合同》。如需进一步了解或确认，请联系美辰居的官方客服或访问其官方网站以获取更详细的收费信息 .\n\nFinal Answer:\n\n关于“是怎么收费的”，以下是详细的信息：\n\n基础安装费用: 每平方米138元。\n复尺费用: 每平方米20元。\n物流配送费: 包含搬运费，需额外计算。\n对于每户安装面积小于10平方米的情况，将按10平方米收费。\n这些信息来自《美家门窗安装外包服务合同》。如需进一步确认，请联系美辰居的官方客服或访问其官方网站以获取更详细的收费信息 .\n\nFinal Answer:\n\n### Expected behavior\n\nrepeat only once.\n\n### Steps to reproduce\n\n```Markdown\noccasionally, but many times.\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "xiaoweifang2024",
      "author_type": "User",
      "created_at": "2025-05-31T00:11:59Z",
      "updated_at": "2025-06-03T04:48:34Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7992/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7992",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7992",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:08.780529",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "Give it a try to turn up these 2 values.\n\n![Image](https://github.com/user-attachments/assets/0c58b736-dd13-4b5b-8ac3-1ae611c8b99e)",
          "created_at": "2025-06-03T04:48:33Z"
        }
      ]
    },
    {
      "issue_number": 7999,
      "title": "[Question]: no language set in 0.19 version?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nMay I ask what the function of this language set in the knowledge base is? Why can't I see the new version 0.19 of knowledge base setting page again?",
      "state": "open",
      "author": "LCHONE",
      "author_type": "User",
      "created_at": "2025-06-01T14:32:20Z",
      "updated_at": "2025-06-03T04:41:55Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7999/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7999",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7999",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:08.973196",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe language setting does exist in RAGFlow version 0.19. Its main function is to specify the primary language of your knowledge base, which can affect how documents are processed, embedded, and retrieved. By default, the system sets this to \"Chinese\" if your server environment variab",
          "created_at": "2025-06-01T14:37:32Z"
        },
        {
          "author": "KevinHuSh",
          "body": "We discovered that the language setting for most users were meaningless. The documents in a KB could be in any language.\nSo, we deprecated it.",
          "created_at": "2025-06-03T04:41:54Z"
        }
      ]
    },
    {
      "issue_number": 8001,
      "title": "[Question]: Successful parsing and chunking but Retrieval Testing always has 0 Files",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI am able to install Ragflow, access the web UI, upload PDF and docx files, and then parse them successfully.  I get stuck at Retrieval testing, it always says 0/0 files selected and does not show any of my successfully parsed files.  I've tried multiple installs:\n- Linux v0.19.0-slim\n- Build nightly-slim on Mac OS X\n- Run v0.19.0-slim on Mac OS x\n- Run v0.19.0-slim on Mac OS X x86 mode \n\nI have tried over 10 PDFs and docx files.  No error messages show on the Docker ragflow server logs.\n\n![Image](https://github.com/user-attachments/assets/d9efe08c-ec15-4eb0-b671-d6bb7f1d988b)\n\n![Image](https://github.com/user-attachments/assets/5b9e9ec8-b563-4ccf-adc3-4f8f72e18b00)\n",
      "state": "open",
      "author": "nynj",
      "author_type": "User",
      "created_at": "2025-06-02T05:20:46Z",
      "updated_at": "2025-06-03T04:36:35Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8001/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8001",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8001",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:10.193934",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @nynj! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nBased on your description and the codebase, there are several common reasons why Retrieval Testing in RAGFlow shows 0 files even after successful parsing and chunking:\n\n1. **Image V",
          "created_at": "2025-06-02T05:24:12Z"
        },
        {
          "author": "nynj",
          "body": "1. installing nightly (not nightly-slim) did not fix the issue\n2. I navigate to Retrieval Testing while already in a Knowledge Base, and there is no UI to select a Knowledge Base from Retrieval Testing\n3. N/A\n4. The chunks are enabled, there is no other UI to manage available_int flag\n5. N/A\n6. N/A",
          "created_at": "2025-06-02T05:46:47Z"
        },
        {
          "author": "KevinHuSh",
          "body": "I didn't see any inputs in `test text` box.\n\n![Image](https://github.com/user-attachments/assets/2b278159-676b-4af9-ad8e-7b93612a0ab8)",
          "created_at": "2025-06-03T04:36:33Z"
        }
      ]
    },
    {
      "issue_number": 8003,
      "title": "[Question]: What context does the assistant (RagFlow chat) use when answering the question(s)",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nHow can I see which context the assistant (RagFlow Chat) uses when answering the question(s) - only the current question or all the questions that were in the current session?",
      "state": "open",
      "author": "YustasDev",
      "author_type": "User",
      "created_at": "2025-06-02T07:08:29Z",
      "updated_at": "2025-06-03T04:34:24Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8003/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8003",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8003",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:10.407960",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nRagFlow Chat uses the entire conversation history from the current session as context when answering questions, not just the most recent question. All previous messages in the session (except system messages) are included and sent to the language model, as long as the total length do",
          "created_at": "2025-06-02T07:11:03Z"
        },
        {
          "author": "KevinHuSh",
          "body": "The entire chat history will be sent to LLM.",
          "created_at": "2025-06-03T04:34:24Z"
        }
      ]
    },
    {
      "issue_number": 3945,
      "title": "[Feature Request]: Support external pdf parsers",
      "body": "### Is there an existing issue for the same feature request?\n\n- [X] I have checked the existing issues.\n\n### Is your feature request related to a problem?\n\n```Markdown\nThe PDF parser looks great but some providers implements this feature too\r\n\r\nlike azure Azure AI Document Intelligence. Maybe give the option of use this providers would be great.\n```\n\n\n### Describe the feature you'd like\n\nImplement support for change the document parser and use azure or amazon options.\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n_No response_\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "devMls",
      "author_type": "User",
      "created_at": "2024-12-09T21:37:54Z",
      "updated_at": "2025-06-03T04:01:21Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/3945/reactions",
        "total_count": 4,
        "+1": 4,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/3945",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/3945",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:12.264021",
      "comments": [
        {
          "author": "devMls",
          "body": "Gemini looks a cheap alternative",
          "created_at": "2024-12-10T20:25:57Z"
        },
        {
          "author": "devMls",
          "body": "Maybe ragflow can intégrate specialiced librarys about ingest documents like https://github.com/DS4SD/docling\r\n",
          "created_at": "2024-12-16T23:04:55Z"
        },
        {
          "author": "devMls",
          "body": "also comented here https://github.com/infiniflow/ragflow/issues/3443",
          "created_at": "2025-01-06T00:41:28Z"
        },
        {
          "author": "ozp",
          "body": "Is the ragflow ingestion system not as good as docling? I thought it was using it and would go beyond ",
          "created_at": "2025-04-06T19:51:05Z"
        },
        {
          "author": "which-W",
          "body": "@devMls \n👋 Thanks so much for your suggestion, and sorry for the delayed reply!\n\nAt the moment, we haven't added support for Azure or Amazon options within the PDF parser. That said, your request has brought up an interesting point, and we're open to reviewing the need for broader PDF parsing suppor",
          "created_at": "2025-06-03T04:01:20Z"
        }
      ]
    },
    {
      "issue_number": 3937,
      "title": "[Feature Request]: Function to implement own chunking / RAG methods",
      "body": "### Is there an existing issue for the same feature request?\n\n- [X] I have checked the existing issues.\n\n### Is your feature request related to a problem?\n\n```Markdown\nRAPTOR is great, but I think beeing able to implement custom chunking and retrieval functions would really push this project to be a one of a kind for RAG apps.\n```\n\n\n### Describe the feature you'd like\n\nA button on the KB config to load a custom chunking / embedding function. \n\n### Describe implementation you've considered\n\n-\n\n### Documentation, adoption, use case\n\n```Markdown\nUsers could implement and share other custom retrieval methods. Custom retrieval methods would allow users to fully customize their KB and enable their data to be used to the fullest.\n```\n\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "Naschkater",
      "author_type": "User",
      "created_at": "2024-12-09T08:13:07Z",
      "updated_at": "2025-06-03T03:50:19Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/3937/reactions",
        "total_count": 3,
        "+1": 3,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/3937",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/3937",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:12.449733",
      "comments": [
        {
          "author": "farbodbj",
          "body": "I'm trying to use RagFlow to use a RAG-based solution on a large codebase, the naive chunking method available by default on RagFlow often causes the code to be chunked at wrong positions which may result in losing meaning. This can be improved by a customized or pluggable chunking method",
          "created_at": "2024-12-09T10:54:08Z"
        },
        {
          "author": "which-W",
          "body": "@Naschkater \n👋 Thanks a lot for your suggestion — and sorry for the late reply!\n\nWe've now added several chunking methods 🧩✨ Hopefully this addresses your needs. If everything works for you now, feel free to close this feature request at your convenience ✅\n\nThanks again for helping us improve! You'r",
          "created_at": "2025-06-03T03:50:18Z"
        }
      ]
    },
    {
      "issue_number": 3922,
      "title": "[Feature Request]: Prioritize multi language first.",
      "body": "### Is there an existing issue for the same feature request?\r\n\r\n- [X] I have checked the existing issues.\r\n\r\n### Is your feature request related to a problem?\r\n\r\n_No response_\r\n\r\n### Describe the feature you'd like\r\n\r\nAs already told, you're doing a great job and really awesome work.\r\nRagflow to me has high potential and is just a few steps away for use in production (to me).\r\nI use the assistant UI only at the moment as I'd just like to chat casually with indexed documents. It works great - but only a few steps are missing to get the best backend for everyone, which is about multilinguage support. Your OCR/parsing is just a few steps away to detect special \"Westen/European\" Characters. Another thing is, that the generated questions (not sure about keywords), are sometimes generated in English. A multilanguage model might be able to handle translation and context understanding but I am not sure about the embedding. Multiple stored languages in the vector might kill the accuracy.\r\n\r\nIt would be great if you could \"priorize\" these 2 things but we all understand, if you have other plans or priorities which is no problem of course. Thank you so far for your contribution. Keep it up.\r\n\r\n### Describe implementation you've considered\r\n\r\n_No response_\r\n\r\n### Documentation, adoption, use case\r\n\r\n_No response_\r\n\r\n### Additional information\r\n\r\n_No response_\r\n\r\nEdit:\r\nIf you need support for datasets or training, etc. let me know. I don't know much but I'd like to help somehow. Just let me know.",
      "state": "open",
      "author": "Snify89",
      "author_type": "User",
      "created_at": "2024-12-08T13:32:47Z",
      "updated_at": "2025-06-03T03:47:38Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/3922/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/3922",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/3922",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:12.681926",
      "comments": [
        {
          "author": "which-W",
          "body": "@Snify89 \n👋 Thanks so much for your thoughtful suggestion — and apologies for the delayed response!\n\nWe've recently added multilingual support in our retrieval system 🌍📚 However, we haven’t specifically tested the retrieval accuracy in mixed-language document scenarios yet. If you're able to share s",
          "created_at": "2025-06-03T03:47:37Z"
        }
      ]
    },
    {
      "issue_number": 8009,
      "title": "[Question]: When creating a new blank workflow, the \"missing dsl\" appears occasionally",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\n![Image](https://github.com/user-attachments/assets/a0397af7-d4d9-41ed-bdce-2bbdfcfde257)",
      "state": "open",
      "author": "chendalian",
      "author_type": "User",
      "created_at": "2025-06-03T02:10:37Z",
      "updated_at": "2025-06-03T02:13:17Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/8009/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/8009",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/8009",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:12.864535",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe \"missing dsl\" error occurs when the required 'dsl' argument (which defines the workflow structure) is not included or is improperly formatted in the request payload during workflow creation. The RAGFlow backend enforces the presence of this field for all workflow and agent creati",
          "created_at": "2025-06-03T02:13:17Z"
        }
      ]
    },
    {
      "issue_number": 7216,
      "title": "How should I set the document parsing language?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI use the Main branch. There is no option to set the parsing language in my knowledge base settings interface.\n\n![Image](https://github.com/user-attachments/assets/8baf65b2-4906-4a22-9bda-578555be754b)\n\nBut there is an option to set the language in the official documentation.\n\n![Image](https://github.com/user-attachments/assets/100c32db-382b-49ea-bcfe-9b1a0a9e5e90)",
      "state": "closed",
      "author": "just-wang",
      "author_type": "User",
      "created_at": "2025-04-23T02:23:02Z",
      "updated_at": "2025-06-01T11:02:38Z",
      "closed_at": "2025-04-23T05:33:53Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7216/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7216",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7216",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:13.118385",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHello @just-wang! I'm [Dosu](https://dosu.dev), your friendly bot here to help you solve bugs, answer questions, and assist you in becoming a contributor. I'll be here while you wait for a human maintainer. Let's tackle your issue together!\n\n<!-- Answer -->\nThe language setting for",
          "created_at": "2025-04-23T02:25:25Z"
        },
        {
          "author": "just-wang",
          "body": "@dosu I set LANG=zh_CN in the .env file, but it caused the error raise ConnectionError(self._error_message(e)) valkey.exceptions.ConnectionError: Error -3 connecting to redis:6379. Temporary failure in name resolution. If I don't set it, ragflow can start normally.",
          "created_at": "2025-04-23T03:21:08Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe error you're encountering, `ConnectionError: Error -3 connecting to redis:6379. Temporary failure in name resolution`, suggests that setting `LANG=zh_CN` in the `.env` file might be affecting the network configuration or DNS resolution in your environment, which in turn impacts t",
          "created_at": "2025-04-23T03:24:04Z"
        },
        {
          "author": "just-wang",
          "body": "@dosu How should I set the document parsing language?",
          "created_at": "2025-04-23T03:25:30Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nRAGFlow sets the document parsing language by using the server's environment variable `LANG`. If \"zh_CN\" is detected in `os.getenv(\"LANG\", \"\")`, it defaults to \"Chinese\"; otherwise, it defaults to \"English\" <sup>[[1]](https://github.com/infiniflow/ragflow/issues/6889)</sup>. Addition",
          "created_at": "2025-04-23T03:26:44Z"
        }
      ]
    },
    {
      "issue_number": 7989,
      "title": "[Question]: I have created several assistants (chats) in the GUI. How can I get the \"chat_it\" list for all these chats?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI have created several assistants (chats) in the GUI. How can I get the \"chat_it\" list for all these chats?",
      "state": "open",
      "author": "YustasDev",
      "author_type": "User",
      "created_at": "2025-05-30T16:20:06Z",
      "updated_at": "2025-05-30T16:45:30Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7989/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7989",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7989",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:13.345258",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nTo get the list of chat IDs (\"chat_it\") for all assistants (chats) you've created in the RAGFlow GUI, you can use the RAGFlow API. Make a GET request to the `/api/v1/chats` endpoint. This will return a paginated list of all chat assistants, each with its unique identifier (chat_id) a",
          "created_at": "2025-05-30T16:22:18Z"
        },
        {
          "author": "YustasDev",
          "body": "Thanks!",
          "created_at": "2025-05-30T16:45:29Z"
        }
      ]
    },
    {
      "issue_number": 7988,
      "title": "[Bug]: upload file in Chat seems not working?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nnull\n\n### RAGFlow image version\n\n0.19\n\n### Other environment information\n\n```Markdown\nUbuntu\n```\n\n### Actual behavior\n\nUpload a file, about 100KB size, and chat with Deepseek r1:14B/32B, tell deepseed to analysis the file.\nalthough file uploading success, but Deepseek ignored it?\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nUpload a file, about 100KB size, and chat with Deepseek r1:14B/32B, tell deepseed to analysis the file.\nalthough file uploading success, but Deepseek ignored it?\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "xiaoweifang2024",
      "author_type": "User",
      "created_at": "2025-05-30T14:04:56Z",
      "updated_at": "2025-05-30T15:20:28Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7988/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7988",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7988",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:13.583645",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYour file upload is likely succeeding, but Deepseek is not analyzing the file because the document has not completed the parsing and chunking process required for retrieval-augmented generation (RAG) in RAGFlow. This is a common situation: the upload step only stores the file (typica",
          "created_at": "2025-05-30T14:07:47Z"
        },
        {
          "author": "xiaoweifang2024",
          "body": "Got it, I have another question,  I want to send deepseek a whole file, etc a contract, and let deepseek to analyse whether there are risks in the contract. I know that ragflow retrieves by chunks, and only sends the top N chunks  to deepseek. How to ensure the whole file not part of file is sent?@d",
          "created_at": "2025-05-30T15:17:08Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nRAGFlow does not provide a built-in way to bypass chunking and send an entire file directly to Deepseek. By default, RAGFlow splits documents into chunks (based on token count and delimiters) and only retrieves the top N most relevant chunks for LLM analysis, regardless of the backen",
          "created_at": "2025-05-30T15:20:26Z"
        }
      ]
    },
    {
      "issue_number": 7402,
      "title": "[Question]: After I tagged the documents using the tag set, I found that the mixed similarity was greater than 100 during the retrieval test",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nAfter I tagged the documents using the tag set, I found that the mixed similarity was greater than 100 during the retrieval test, which caused it to exceed the maximum value of 100 for the similarity threshold. Is there a problem here?",
      "state": "open",
      "author": "wly1024666",
      "author_type": "User",
      "created_at": "2025-04-29T03:14:18Z",
      "updated_at": "2025-05-30T10:42:29Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7402/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7402",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7402",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:13.807972",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHello @wly1024666! I'm [Dosu](https://dosu.dev), your friendly bot here to help you with bugs and questions while you wait for a human maintainer. Let’s tackle this issue together!\n\n<!-- Answer -->\nThe mixed similarity in RAGFlow is calculated using a combination of weighted keywor",
          "created_at": "2025-04-29T03:16:25Z"
        },
        {
          "author": "wly1024666",
          "body": "In the retrieval test, I did not use the rerank model, the similarity threshold was set to 0.8, and the keyword similarity weight was set to 0.4. The mixed similarity of many documents in the retrieved results was greater than 100, far exceeding the similarity threshold, and the retrieval results co",
          "created_at": "2025-04-29T03:26:56Z"
        },
        {
          "author": "KevinHuSh",
          "body": "For now, we did not figure out a proper way to normalize the score into 0 to 1.",
          "created_at": "2025-04-29T05:20:55Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nWhen the rerank model is not used, the mixed similarity in RAGFlow is calculated using a combination of keyword similarity and vector similarity. The weights you mentioned, with a keyword similarity weight of 0.4, imply that the vector similarity weight would be 0.6, as the total sho",
          "created_at": "2025-04-29T05:22:47Z"
        },
        {
          "author": "lianzhao",
          "body": "The `rerank` method is implemented as follows:\n```python\n    def rerank(self, sres, query, tkweight=0.3,\n               vtweight=0.7, cfield=\"content_ltks\",\n               rank_feature: dict | None = None\n               ):\n        # ...\n        ## For rank feature(tag_fea) scores.\n        rank_fea =",
          "created_at": "2025-05-30T10:42:28Z"
        }
      ]
    },
    {
      "issue_number": 7982,
      "title": "[Question]: v1/user/login",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nIs it not correct to directly pass the account and password as character strings when accessing this API with Postman? Do I not need to pass the encrypted string?\n\n![Image](https://github.com/user-attachments/assets/f65dc7b5-81ba-4e99-ba27-e80c71dfed6e)",
      "state": "open",
      "author": "GXKIM",
      "author_type": "User",
      "created_at": "2025-05-30T09:35:49Z",
      "updated_at": "2025-05-30T09:37:42Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7982/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7982",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7982",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:13.999349",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYou cannot pass the account and password as plain character strings when using the v1/user/login API endpoint. The password must be encrypted using RSA encryption with the server's public key before sending it in your POST request. If you send the password as plaintext, the server wi",
          "created_at": "2025-05-30T09:37:42Z"
        }
      ]
    },
    {
      "issue_number": 7913,
      "title": "[Question]: Excuse me,is there an MCP service extracted from RAGFlow that I can use in Cherry Studio?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nExcuse me,is there an MCP service extracted from RAGFlow that I can use in Cherry Studio?",
      "state": "open",
      "author": "qiufeihong2018",
      "author_type": "User",
      "created_at": "2025-05-28T08:02:20Z",
      "updated_at": "2025-05-30T09:10:29Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7913/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7913",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7913",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:14.218811",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYes, RAGFlow provides an MCP (Model Context Protocol) server that can be used as an independent service. The MCP server is designed to help users search for relevant information using RAGFlow's DeepDoc technology, and it exposes tools such as \"retrieve\" for fetching relevant document",
          "created_at": "2025-05-28T08:04:32Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Please refer to [this](https://ragflow.io/docs/dev/category/mcp).",
          "created_at": "2025-05-30T09:10:28Z"
        }
      ]
    },
    {
      "issue_number": 7939,
      "title": "[Question]:",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nwhere is the location for knowledge base and agent？I want to backup them.",
      "state": "open",
      "author": "asking002",
      "author_type": "User",
      "created_at": "2025-05-29T04:20:16Z",
      "updated_at": "2025-05-30T08:33:44Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7939/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7939",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7939",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:14.428384",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe knowledge base data in RAGFlow is primarily stored in MinIO, with each file located at `/data/kb_id/filename` inside the MinIO container, where `kb_id` is the unique identifier for your knowledge base and `filename` is the name of the uploaded file. When you create a knowledge ba",
          "created_at": "2025-05-29T04:22:28Z"
        },
        {
          "author": "KevinHuSh",
          "body": "You need to backup data in MySQL/ES/Minio, which is not an easy job to do.",
          "created_at": "2025-05-30T08:33:43Z"
        }
      ]
    },
    {
      "issue_number": 6794,
      "title": "[Bug]: docker started mysql with an error",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n2372a3a01ffd38d80b40e3c9ebb4d4a436dd88f5\n\n### RAGFlow image version\n\nv0.15.1\n\n### Other environment information\n\n```Markdown\nChange port 80 to 9099 and redis ports 6379 to 6399\n```\n\n### Actual behavior\n\n[Server] A message intended for a client cannot be sent there as no client-session is attached.  Therefore, we're sending the information to the error-log instead: MY-000029 - File '/data/application/init. sql' not found (OS errno 13 - Permission denied)\n2025-04-03T08:27:03.010948Z 0 [ERROR] [MY-010455] [Server] Failed to open the bootstrap file /data/application/init.sql\n2025-04-03T08:27:03.010956Z 0 [ERROR] [MY-013236] [Server] The designated data directory /var/lib/mysql/ is unusable.  You can remove all files that the server added to it.\n2025-04-03T08:27:03.010961Z 0 [ERROR] [MY-010119] [Server] Aborting\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\ndocker compose -f docker/docker-compose.yml up -d\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "childefish",
      "author_type": "User",
      "created_at": "2025-04-03T08:41:05Z",
      "updated_at": "2025-05-30T08:27:27Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/6794/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/6794",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/6794",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:14.656173",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHello, @childefish! I'm here to assist you with any bugs, questions, or contributions you may have. Let's work together to resolve your issue.\n\n<!-- Answer -->\nI found a similar closed issue that might help resolve your problem. The issue involved a \"1105 Input Output error\" relate",
          "created_at": "2025-04-03T08:43:13Z"
        },
        {
          "author": "childefish",
          "body": "started successfully  \n`chmod 644 ./init.sql`\n\n\n\n",
          "created_at": "2025-04-03T09:39:58Z"
        },
        {
          "author": "nkh0472",
          "body": "> started successfully `chmod 644 ./init.sql`\n\nnot work in my docker:\n`docker exec -it 98928d41a381d7742bce61a96f1046b3506c498e78f971862955267996f32f0e chmod 644 ./data/application/init.sql`\n\nI also tried to set a longer timeout even as 180s like #7975, but mysql still keep shutdown and restart in f",
          "created_at": "2025-05-30T08:23:04Z"
        }
      ]
    },
    {
      "issue_number": 7976,
      "title": "[Bug]: Unable to input Chinese in the chat box.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n7980\n\n### RAGFlow image version\n\nv0.19.0\n\n### Other environment information\n\n```Markdown\nubuntu22.04+deepseek+docker+ragflow\n```\n\n### Actual behavior\n\nWe have installed RagFlow on Ubuntu 22.04, but we are unable to input Chinese in the chat box.\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nWe have installed Ollama and RagFlow on Ubuntu 22.04. After opening RagFlow in the firefox browser, we are unable to input Chinese characters on the chat page, but we can paste Chinese text.\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "nihaozmma",
      "author_type": "User",
      "created_at": "2025-05-30T07:30:13Z",
      "updated_at": "2025-05-30T07:30:13Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7976/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7976",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7976",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:14.888004",
      "comments": []
    },
    {
      "issue_number": 7950,
      "title": "[Question]: How to use MCP in Ragflow? Is there any documentation? If so, where can I find it?",
      "body": "### Self Checks\n\n- [ ] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [ ] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [ ] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [ ] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nHow to use MCP in Ragflow? Is there any documentation? If so, where can I find it?",
      "state": "open",
      "author": "myplxdm",
      "author_type": "User",
      "created_at": "2025-05-29T08:41:39Z",
      "updated_at": "2025-05-30T07:29:22Z",
      "closed_at": null,
      "labels": [
        "📖 documentation",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7950/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7950",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7950",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:14.888020",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYes, there is documentation and code support for using MCP (Model Context Protocol) in Ragflow.\n\nTo get started, you can refer to the official documentation files in the repository:\n\n- [MCP Tools Overview](https://github.com/infiniflow/ragflow/blob/main/docs/develop/mcp/mcp_tools.md)",
          "created_at": "2025-05-29T08:43:22Z"
        },
        {
          "author": "KevinHuSh",
          "body": "[Here](https://ragflow.io/docs/dev/category/mcp)",
          "created_at": "2025-05-30T07:29:21Z"
        }
      ]
    },
    {
      "issue_number": 7944,
      "title": "[Question]: 请问支持在昇腾910B上部署吗？",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\n请问支持在昇腾910B上部署吗？",
      "state": "closed",
      "author": "winni0",
      "author_type": "User",
      "created_at": "2025-05-29T06:57:43Z",
      "updated_at": "2025-05-30T07:28:38Z",
      "closed_at": "2025-05-30T07:28:37Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7944/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7944",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7944",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:15.073714",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @winni0! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\n目前在 RAGFlow 的公开文档和 issue 中，没有发现关于在昇腾910B平台部署的支持或相关说明，也没有相关的讨论或案例记录[[source]](https://github.com/infiniflow/ragflow/blob/main/README.md)。现有文档主要涉及 Docker、Kubernetes 等常规环境的部署，并未提及对昇腾",
          "created_at": "2025-05-29T06:59:01Z"
        },
        {
          "author": "winni0",
          "body": "> low 的公开文档和问题中，没有发现关于在升腾910B 平台部署的或相关说明，也没有相关的讨论或案例记录[[来源]](https://github.com/infiniflow/ragflow/blob/main/README.md)。现有文档主要涉及 Docker、Kubernetes 等常规环境的部署，倾向于提及对升腾910B 硬件的支持或配置[[来源]](https://github.com/infiniflow/ragflow/blob/main/helm/templates/ragflow.yaml)。\n> \n> 如果您有特定的器件需求，建议关注后续官方文档更新，或在社区中进一步",
          "created_at": "2025-05-29T07:03:43Z"
        },
        {
          "author": "KevinHuSh",
          "body": "[Language policy violation](https://github.com/infiniflow/ragflow/issues/5910).",
          "created_at": "2025-05-30T07:28:37Z"
        }
      ]
    },
    {
      "issue_number": 7953,
      "title": "[Feature Request]: Support dynamic update of Agent begin component parameters through interface",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\n\n```\n\n### Describe the feature you'd like\n\nIn the process of using RAGflow, I found that when the agent's begin component creates a dialogue through an interface call, the internal parameters cannot be dynamically updated once they are set. Even if the subsequent business logic changes, the original parameters remain unchanged and can only be indirectly implemented by calling the new interface through the invoke component. \n\nWhen actually building an agent with multiple steps, some initial parameters may need to be updated based on subsequent user input or external events. For example, if the user modifies the goal or supplements information during the process, or the system needs to dynamically adjust the configuration, the flexibility of the agent will be limited if the parameters of the begin component cannot be updated.\n\nIt is hoped that the parameters of the begin component can be dynamically updated during the session lifecycle through an API interface, or related update methods can be provided so that the agent can flexibly adjust its behavior according to changes in business processes or user input.\n\n### Describe implementation you've considered\n\nProvide an API interface for updating begin parameters;\nOr allow some mechanism to bind begin component parameters to context variables so that they change with context changes.\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "yunjie-wang",
      "author_type": "User",
      "created_at": "2025-05-29T09:45:18Z",
      "updated_at": "2025-05-30T07:26:53Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7953/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7953",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7953",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:15.278353",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "We're refactoring and upgrading the agent module.",
          "created_at": "2025-05-30T07:26:51Z"
        }
      ]
    },
    {
      "issue_number": 6742,
      "title": "[Question]: why always `nothing found in knowledge base` ?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\n明明解析的知识块里面有相关数据 为什么一直说 知识库中未找到您要的答案！  数据集也有关联上了\n\n![Image](https://github.com/user-attachments/assets/85175451-2c46-4a47-bd61-5fffb8a462d4)\n\n![Image](https://github.com/user-attachments/assets/3bf11461-6a15-4ed1-b5af-48098f275d34)\n\n![Image](https://github.com/user-attachments/assets/53b49a55-b73b-46a6-9f62-ac2691ee223e)",
      "state": "open",
      "author": "wsy1111111",
      "author_type": "User",
      "created_at": "2025-04-02T02:14:40Z",
      "updated_at": "2025-05-30T07:20:54Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 6,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/6742/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/6742",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/6742",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:15.468087",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe system says \"the knowledge base could not find the answer you want\" because the prompt in the `customer_service.json` file is designed to include this sentence when all knowledge base content is irrelevant to the question. This behavior is explicitly defined in the prompt configu",
          "created_at": "2025-04-02T02:16:59Z"
        },
        {
          "author": "Formyselfonly",
          "body": "你好，解决了吗？",
          "created_at": "2025-04-02T03:01:39Z"
        },
        {
          "author": "wsy1111111",
          "body": "> 你好，成功了吗？\n\n没有 好多问题 哈哈哈",
          "created_at": "2025-04-02T03:04:47Z"
        },
        {
          "author": "myplxdm",
          "body": "我今天刚更新的最新版本，但是在知识库中的检索检测中能搜索出分块，但是在助手聊天中就查询不到问题，奇怪。之前的v0.17.2 full版本是可以的，后面经常更新夜间版本后现在不行了，我切换回v0.17.2 也不行了，无语了，现在正把所有都删除重新来一次，不行就没办法，只能等作者解决了",
          "created_at": "2025-04-02T06:38:48Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Click the little lamp here to check what LLM recieved. \nUse the `retrieval test` to adjust parameters until relevant info retrieved.\n\n![Image](https://github.com/user-attachments/assets/1ca81323-29c6-4894-8067-70957da16423)",
          "created_at": "2025-04-03T01:38:44Z"
        }
      ]
    },
    {
      "issue_number": 1397,
      "title": "[Question]: In the knowledge base search test page, the retrieval is successful. However, on the chat page, it returns that nothing is found in the knowledge base, despite the same similarity parameter configuration being used.",
      "body": "### Describe your problem\n\n1.Running via Docker on Ubuntu 22.04, tested for multiple days, always fetching the latest code and images.\r\n2.Established the knowledge base using BCE embedding, uploaded PDFs, parsing was successful, search tests were successful, the first result matched.\r\n3.Configured the chat feature, using the same parameters and models as before; with the same query, the information could not be found.\r\n\r\nWhat could be the possible reasons? How should I go about troubleshooting?\r\nThanks\r\n\r\nknowledge:\r\n![微信截图_20240705222920](https://github.com/infiniflow/ragflow/assets/776181/a38e45b6-4f71-4d5b-a689-2748df1b67db)\r\n\r\nchat:\r\n![image](https://github.com/infiniflow/ragflow/assets/776181/aba373ec-8de1-4900-b597-5e5b37690340)\r\n",
      "state": "closed",
      "author": "allentern",
      "author_type": "User",
      "created_at": "2024-07-05T16:15:55Z",
      "updated_at": "2025-05-30T07:19:57Z",
      "closed_at": "2024-11-30T15:23:37Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 8,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/1397/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/1397",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/1397",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:15.687965",
      "comments": [
        {
          "author": "guoyuhao2330",
          "body": "you can try to change the chat model or making the prompt less limitations",
          "created_at": "2024-07-08T03:32:40Z"
        },
        {
          "author": "KevinHuSh",
          "body": "What LLM you're using?\r\nLLM can't relate the question and the retrievals though the related answer has been already retrived.",
          "created_at": "2024-07-08T04:43:51Z"
        },
        {
          "author": "allentern",
          "body": "> What LLM you're using? LLM can't relate the question and the retrievals though the related answer has been already retrived.\r\n\r\n> you can try to change the chat model or making the prompt less limitations\r\n\r\nThanks, I used online API: qwen-plus and deepseek-chat,  doesn't work either; information ",
          "created_at": "2024-07-08T06:20:28Z"
        },
        {
          "author": "Stella12121",
          "body": "Hi, I had the same problem. Have you solved it yet?",
          "created_at": "2024-08-07T07:38:27Z"
        },
        {
          "author": "sznariOsmosis",
          "body": "Hi, I had the same problem. Have you solved it yet?",
          "created_at": "2024-08-21T03:53:05Z"
        }
      ]
    },
    {
      "issue_number": 7967,
      "title": "[Question]: 请问增强的图像显示这个效果要怎样看到？",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\n现在已经是0.19.0版，看到有“增强的图像显示”这个功能。现用带有图片的pdf构建了知识库，问答时怎样在聊天时能显示图片？",
      "state": "closed",
      "author": "czhcc",
      "author_type": "User",
      "created_at": "2025-05-30T03:16:33Z",
      "updated_at": "2025-05-30T07:18:34Z",
      "closed_at": "2025-05-30T07:18:33Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7967/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7967",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7967",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:15.920221",
      "comments": [
        {
          "author": "asking002",
          "body": "same question",
          "created_at": "2025-05-30T04:13:39Z"
        },
        {
          "author": "KevinHuSh",
          "body": "[Language policy violation](https://github.com/infiniflow/ragflow/issues/5910).",
          "created_at": "2025-05-30T07:18:33Z"
        }
      ]
    },
    {
      "issue_number": 7943,
      "title": "[Question]: The order of the chunk parsed by General is inconsistent with that of the original text",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nThe order of the chunks parsed by General is inconsistent with the original text\n![Image](https://github.com/user-attachments/assets/1db6d378-1493-4873-a157-bc1e79396915)\n\n![Image](https://github.com/user-attachments/assets/536b40c3-1c65-41f4-aba9-233beafa08e2)",
      "state": "closed",
      "author": "Sol-Ghf",
      "author_type": "User",
      "created_at": "2025-05-29T06:39:50Z",
      "updated_at": "2025-05-30T07:16:20Z",
      "closed_at": "2025-05-30T07:16:20Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7943/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7943",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7943",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:16.112757",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe chunk order inconsistency you’re seeing with the \"General\" method in RAGFlow is likely due to how this method processes and combines text segments. The \"General\" (or \"naive\") chunking approach splits a document into segments and then combines adjacent segments until the token cou",
          "created_at": "2025-05-29T06:41:33Z"
        },
        {
          "author": "Sol-Ghf",
          "body": "@dosu my chunk token number is 500 ,and  I'm just working with the documents,it may be a bit complicated",
          "created_at": "2025-05-29T06:49:49Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nWith a chunk token number of 500, RAGFlow will create much larger chunks, which can cause short sections of your document to be merged together. This merging can disrupt the original order of the text, especially in complex documents with varied formatting or structure. The chunking ",
          "created_at": "2025-05-29T06:51:41Z"
        },
        {
          "author": "Sol-Ghf",
          "body": "@dosu Since my document belongs to the product manual, I need to set a large chunk token，If you're going through the paragraphs and tables in the actual order of the document, rather than all the paragraphs and then all the tables, then I don't think the order should change even after merging",
          "created_at": "2025-05-29T06:56:30Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe order of chunks can change even if you process paragraphs and tables in the original document order, especially when using a large chunk token number. This is because RAGFlow’s \"General\" method splits the document into segments (often by delimiters or structural markers), then me",
          "created_at": "2025-05-29T06:58:15Z"
        }
      ]
    },
    {
      "issue_number": 7958,
      "title": "[Bug]: Code Component Can not send http request",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nv0.19.0\n\n### RAGFlow image version\n\ninfiniflow/ragflow:v0.19.0-slim\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\n![Image](https://github.com/user-attachments/assets/bd8eca61-9f6e-4515-ba5a-d282bc1b5dc1)\n\n![Image](https://github.com/user-attachments/assets/d0513ae1-5cda-4f7f-adf9-e8657fd7de5d)\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nJust use the default JS code directly; Python is actually the same.\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "zhong1002",
      "author_type": "User",
      "created_at": "2025-05-29T12:21:34Z",
      "updated_at": "2025-05-30T06:50:43Z",
      "closed_at": "2025-05-30T06:50:43Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7958/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7958",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7958",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:21.344766",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @zhong1002! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nYour issue with the code component not being able to send HTTP requests in RAGFlow v0.19.0 is likely related to a DNS resolution problem in your Docker environment. This is a k",
          "created_at": "2025-05-29T12:23:14Z"
        }
      ]
    },
    {
      "issue_number": 7970,
      "title": "[Question]: How to create a flow that waits for multiple user messages before interacting?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI'm trying to build a flow where the user can send multiple messages before triggering a response from the AI. For example, the user might type a few words (I'd like to <enter>) and press Enter without completing the sentence, or in some scenarios, the agent may only call a tool to do something without needing to respond immediately. Then, once a condition is met (like the user typing \"done\"), the flow should proceed and generate a response using OpenAI.\n\nI understand that every flow step must eventually lead to an interact, but in my use case, I'd like the flow to pause or loop without forcing an interact immediately—so the user can continue sending text freely until the condition is met.\n\nIs there a way to:\n\nHave an interact step that effectively does nothing, just to satisfy the requirement?\n\nOr allow flows to continue without needing to show something to the user each time?",
      "state": "open",
      "author": "Kiennh",
      "author_type": "User",
      "created_at": "2025-05-30T04:12:56Z",
      "updated_at": "2025-05-30T04:46:44Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7970/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7970",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7970",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:21.532611",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @Kiennh! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nRAGFlow requires an Interact component as the interface between the user and the agent, and every flow must eventually reach an Interact step to receive user input or display a re",
          "created_at": "2025-05-30T04:15:58Z"
        },
        {
          "author": "Kiennh",
          "body": "I’ve implemented the suggested approach using an Interact and Switch loop to collect user input until a trigger word like \"done\" is received. However, I’ve run into one issue: when looping back to the Interact component, if the message field is not explicitly set, the system throws an error like:\n\nE",
          "created_at": "2025-05-30T04:44:24Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThere is currently no built-in or documented way in RAGFlow to implement a truly “silent” Interact component that waits for user input without displaying a message or raising an error if the message field is unset. The error you’re seeing—'NoneType' object is not callable—typically o",
          "created_at": "2025-05-30T04:46:42Z"
        }
      ]
    },
    {
      "issue_number": 7498,
      "title": "[Question]: Werkzeug.serving cannot be hot overloaded, and the modified code cannot take effect immediately",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\n  # start http server\n    try:\n        logging.info(\"RAGFlow HTTP server start...\")\n        run_simple(\n            hostname=settings.HOST_IP,\n            port=settings.HOST_PORT,\n            application=app,\n            threaded=True,\n            use_reloader=True,\n            use_debugger=True,\n            reloader_type='watchdog'\n        )\n    except Exception:\n        traceback.print_exc()\n        stop_event.set()\n        time.sleep(1)\n        os.kill(os.getpid(), signal.SIGKILL)\n\n\n\n![Image](https://github.com/user-attachments/assets/bb94467c-aaac-4767-b0a8-6de0a2b5886c)\n",
      "state": "open",
      "author": "1953705297",
      "author_type": "User",
      "created_at": "2025-05-07T02:40:16Z",
      "updated_at": "2025-05-30T03:05:02Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7498/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7498",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7498",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:21.741105",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHello @1953705297! I'm [Dosu](https://dosu.dev), your friendly bot here to help you with bugs, questions, and everything in between while we wait for a human maintainer. Let's dive into your issue together! 🤖\n\n<!-- Answer -->\nThe issue you're experiencing with Werkzeug's hot reload",
          "created_at": "2025-05-07T02:41:51Z"
        },
        {
          "author": "KraHsu",
          "body": "Hi @1953705297 , I also encountered this issue and submitted [PR #7966](https://github.com/infiniflow/ragflow/pull/7966) which attempts to fix it.",
          "created_at": "2025-05-30T03:05:01Z"
        }
      ]
    },
    {
      "issue_number": 7874,
      "title": "[Question]: [ERROR][Exception]: Model(Doubao-pro-128k) not authorized",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI made the following changes to the service_conf.yaml.template file: \n![Image](https://github.com/user-attachments/assets/11751e78-0e95-40e7-8f0e-e9c9a255f78c)\nBut the following error occurred,  could someone please help me solve this problem?\n\n![Image](https://github.com/user-attachments/assets/7d5631ec-9bb1-4274-a372-2e178ce05294)",
      "state": "open",
      "author": "Jevon-Du",
      "author_type": "User",
      "created_at": "2025-05-27T03:02:27Z",
      "updated_at": "2025-05-30T02:48:01Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7874/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7874",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7874",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:21.921900",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @Jevon-Du! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThe error `Model(Doubao-pro-128k) not authorized` indicates that RAGFlow does not have the necessary authorization to access the specified model. Here are the key points and ste",
          "created_at": "2025-05-27T03:05:44Z"
        },
        {
          "author": "mike-2020",
          "body": "@dosu\n\nencountered similar error on \"agent\", but \"knowledge base\" and \"search\" worked well. I guess it is unlikely the ragflow not be able to connect to LLM service.\n\n_ERROR: Model(deepseek-chat) not authorized_\n\n",
          "created_at": "2025-05-30T01:53:18Z"
        }
      ]
    },
    {
      "issue_number": 7963,
      "title": "[Bug]: When performing the dify_retrieval, the metadata of the document was empty.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n26d348g0e\n\n### RAGFlow image version\n\n<v0.19\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\n![Image](https://github.com/user-attachments/assets/851d4ca2-9a73-4f85-b1b7-1cc68ead847a)\n\n### Expected behavior\n\n![Image](https://github.com/user-attachments/assets/f12c5bcd-79be-4883-b8c2-8d0e75eb2f95)\n\n### Steps to reproduce\n\n```Markdown\nnone\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "bravecharge",
      "author_type": "User",
      "created_at": "2025-05-30T02:28:35Z",
      "updated_at": "2025-05-30T02:28:35Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7963/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7963",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7963",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:22.137275",
      "comments": []
    },
    {
      "issue_number": 7897,
      "title": "[Question]: Running the agent, first conversation returns error message and the next conversation directly return",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nWhen running the agent, during the first conversation, if the \"invoke\" component call times out, it returns the message:  \n`ERROR: HTTPConnectionPool(host='172.31.7.174', port=8080): Read timed out. (read timeout=5)`\n\nIf you continue the conversation, the second response directly returns:  \n`{'content': {'0': \"HTTPConnectionPool(host='172.31.7.174', port=8080): Read timed out. (read timeout=5)\"}`\n\nAnd in the third round of conversation, it again returns:  \n`ERROR: HTTPConnectionPool(host='172.31.7.174', port=8080): Read timed out. (read timeout=5)`\n\nWe tried increasing the invoke timeout to 60 seconds since we're unsure how long the API might take, but this issue can still occur.  \nDo you have any suggestions on how to fix this?\n\nHere's what the three conversation steps look like in the image\n\n![Image](https://github.com/user-attachments/assets/907c3c69-c7e3-4587-8872-1b5dceb63532)\n![Image](https://github.com/user-attachments/assets/96935718-abb1-4aa5-896c-91de54a5b2de)",
      "state": "closed",
      "author": "chenlanqing",
      "author_type": "User",
      "created_at": "2025-05-28T01:12:35Z",
      "updated_at": "2025-05-30T01:40:46Z",
      "closed_at": "2025-05-30T01:40:46Z",
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7897/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7897",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7897",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:22.137294",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe timeout errors you’re seeing with the \"invoke\" component indicate that the remote server at `172.31.7.174:8080` is not responding within the specified timeout window. Increasing the timeout to 60 seconds is a good first step, but if the server is overloaded, unresponsive, or ther",
          "created_at": "2025-05-28T01:24:46Z"
        },
        {
          "author": "chenlanqing",
          "body": "What other options do we have here? And are you planning to build in retries for the invoke component down the line? \n@dosu",
          "created_at": "2025-05-28T02:06:34Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nCurrently, there are no documented plans or existing discussions in the RAGFlow repository about adding retries to the \"invoke\" component. The component only supports a configurable timeout, and if the remote service does not respond within that period, it returns an error without re",
          "created_at": "2025-05-28T02:11:14Z"
        },
        {
          "author": "chenlanqing",
          "body": "@dosu\nI saw what you mentioned earlier: \"so a single failure will immediately propagate the error to the user in subsequent conversation rounds, as you observed.\"\nIs there a way to handle this so that errors from components don’t get passed back to users in follow-up conversations?",
          "created_at": "2025-05-28T03:17:13Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThere isn’t currently a built-in mechanism in RAGFlow to prevent errors from components like \"invoke\" from being passed back to users in follow-up conversations. When a component fails (for example, due to a timeout), the error is returned as the response and stored in the conversati",
          "created_at": "2025-05-28T03:22:13Z"
        }
      ]
    },
    {
      "issue_number": 7945,
      "title": "[Question]: Why are the number of chunks the same after resolution for different chunk token numbers?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nThis chunk token number is 128\n![Image](https://github.com/user-attachments/assets/a070f3ce-f46e-4896-af0c-800c47a085d1)\nThis chunk token number is 500\n![Image](https://github.com/user-attachments/assets/ed86418b-3d84-4941-958c-ebfb28c913aa)\nHowever, the chunk number parsed by the General method is all 64",
      "state": "closed",
      "author": "Sol-Ghf",
      "author_type": "User",
      "created_at": "2025-05-29T07:20:55Z",
      "updated_at": "2025-05-30T01:09:29Z",
      "closed_at": "2025-05-30T01:09:29Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7945/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7945",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7945",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:22.353854",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe reason the number of chunks remains the same (64) after resolution, even when you change the chunk token number (e.g., from 128 to 500), is likely due to how the \"General\" slicing method works in RAGFlow. The General method splits the document into segments and then combines adja",
          "created_at": "2025-05-29T07:22:29Z"
        },
        {
          "author": "Sol-Ghf",
          "body": "@dosu Chunks smaller than the chunk token number will not be merged after splitting?",
          "created_at": "2025-05-29T07:25:28Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYes, in RAGFlow's \"General\" slicing method, chunks (segments) smaller than the chunk token number will be merged with adjacent segments until the combined token count exceeds the threshold you set. This means that short segments are not left alone—they are combined to form larger chu",
          "created_at": "2025-05-29T07:26:48Z"
        }
      ]
    },
    {
      "issue_number": 3783,
      "title": "[Feature Request]: API Enhancement: Enable Input/Output Data Transmission for Agent Component",
      "body": "### Is there an existing issue for the same feature request?\n\n- [X] I have checked the existing issues.\n\n### Is your feature request related to a problem?\n\n_No response_\n\n### Describe the feature you'd like\n\nThank you to the RAGflow team for your hard work and contributions. Recently, while using the Agent to build an assistant, I have a new request regarding the Agent API:\r\n\r\nIn the Agentic flow, it would be great if the input and output information of the Agent component could also be transmitted through the API.\r\n\r\nThe purpose is to monitor the input and output information as a reference for improving the effectiveness of RAG.\r\n\r\nI wonder if this idea could be implemented in the future. If this feature already exists and I am unaware of how to use it, I kindly ask for your guidance. Thank you!\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n_No response_\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "midilandlu",
      "author_type": "User",
      "created_at": "2024-12-01T18:21:29Z",
      "updated_at": "2025-05-29T11:22:37Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/3783/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/3783",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/3783",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:22.555830",
      "comments": [
        {
          "author": "kdta91",
          "body": "This would be great to have. As of now on our implementation, we created a nodejs backend to capture the user prompts and ragflow response and saved the data in a mongodb database to analyze the data like response time, response score, user feedback and top keywords.\r\n\r\nIt would be wonderful if this",
          "created_at": "2024-12-02T03:10:51Z"
        },
        {
          "author": "which-W",
          "body": "@kdta91 @midilandlu \n👋 Thanks a lot for your suggestion — and sorry for the delay in getting back to you!\n\nWe now provide message-passing APIs for Agents, which might align with what you’re looking for 🧠💬\n\nIf this meets your needs, feel free to close this feature request at your convenience. And as ",
          "created_at": "2025-05-29T11:22:36Z"
        }
      ]
    },
    {
      "issue_number": 7952,
      "title": "[Bug]:[ERROR]Generate embedding error:float() argument must be a string or a real number, not 'NoneType'",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n6ca1aef\n\n### RAGFlow image version\n\nv0.19.0 full\n\n### Other environment information\n\n```Markdown\ndocker\n```\n\n### Actual behavior\n\nThe same document can be parsed successfully when submitted manually through the system, but when using the API to create a knowledge base, upload the document, and initiate parsing, an error occurs.\n```\n2025-05-29 17:15:39,547 ERROR    33 handle_task got exception for task {\"id\": \"727d5fce3c6d11f08e760242ac1d0006\", \"doc_id\": \"99b043be3c6c11f0a5530242ac1d0006\", \"from_page\": 0, \"to_page\": 100000000, \"retry_count\": 0, \"kb_id\": \"de721fc43c6a11f0b8b50242ac1d0006\", \"parser_id\": \"naive\", \"parser_config\": {\"auto_keywords\": 3, \"auto_questions\": 0, \"chunk_token_num\": 512, \"delimiter\": \"\\\\n\", \"graphrag\": {\"use_graphrag\": true, \"entity_types\": [\"drug\", \"tumor\", \"gene\", \"mutation\", \"category\"], \"method\": \"light\", \"community\": false, \"resolution\": false}, \"html4excel\": false, \"layout_recognize\": \"DeepDOC\", \"raptor\": {\"use_raptor\": false, \"prompt\": \"Please summarize the following paragraphs. Be careful with the numbers, do not make things up. Paragraphs as following:\\n      {cluster_content}\\nThe above is the content you need to summarize.\", \"max_token\": 256, \"threshold\": 0.1, \"max_cluster\": 64, \"random_seed\": 0}, \"tag_kb_ids\": [], \"topn_tags\": 1, \"filename_embd_weight\": null, \"task_page_size\": null, \"pages\": null}, \"name\": \"\\u524d\\u5217\\u817a\\u764c.docx\", \"type\": \"doc\", \"location\": \"\\u524d\\u5217\\u817a\\u764c.docx\", \"size\": 2550910, \"tenant_id\": \"39f8e0ea3c6a11f0a8c30242ac1c0006\", \"language\": \"English\", \"embd_id\": \"BAAI/bge-large-zh-v1.5@BAAI\", \"pagerank\": 0, \"kb_parser_config\": {\"auto_keywords\": 3, \"auto_questions\": 0, \"chunk_token_num\": 512, \"delimiter\": \"\\\\n\", \"graphrag\": {\"use_graphrag\": true, \"entity_types\": [\"drug\", \"tumor\", \"gene\", \"mutation\", \"category\"], \"method\": \"light\", \"community\": false, \"resolution\": false}, \"html4excel\": false, \"layout_recognize\": \"DeepDOC\", \"raptor\": {\"use_raptor\": false, \"prompt\": \"Please summarize the following paragraphs. Be careful with the numbers, do not make things up. Paragraphs as following:\\n      {cluster_content}\\nThe above is the content you need to summarize.\", \"max_token\": 256, \"threshold\": 0.1, \"max_cluster\": 64, \"random_seed\": 0}, \"tag_kb_ids\": [], \"topn_tags\": 1, \"filename_embd_weight\": null, \"task_page_size\": null, \"pages\": null}, \"img2txt_id\": \"\", \"asr_id\": \"\", \"llm_id\": \"deepseek-chat___OpenAI-API@OpenAI-API-Compatible\", \"update_time\": 1748510121933, \"task_type\": \"\"}\nTraceback (most recent call last):\n  File \"/ragflow/rag/svr/task_executor.py\", line 642, in handle_task\n    await do_handle_task(task)\n  File \"/ragflow/rag/svr/task_executor.py\", line 569, in do_handle_task\n    token_count, vector_size = await embedding(chunks, embedding_model, task_parser_config, progress_callback)\n  File \"/ragflow/rag/svr/task_executor.py\", line 438, in embedding\n    title_w = float(parser_config.get(\"filename_embd_weight\", 0.1))\nTypeError: float() argument must be a string or a real number, not 'NoneType'\n```\nand\n```\n开始于:\nThu, 29 May 2025 17:15:21 GMT\n持续时间:\n19.77 s\n进度:\n17:15:24 Task has been received.\n17:15:25 Page(1~100000001): Start to parse.\n17:15:25 Page(1~100000001): Finish parsing.\n17:15:26 Page(1~100000001): Start to generate keywords for every chunk ...\n17:15:26 Page(1~100000001): Keywords generation 11 chunks completed in 0.18s\n17:15:26 Page(1~100000001): Generate 11 chunks\n17:15:39 Page(1~100000001): [ERROR]Generate embedding error:float() argument must be a string or a real number, not 'NoneType'\n17:15:39 [ERROR][Exception]: float() argument must be a string or a real number, not 'NoneType'\n```\n\n### Expected behavior\n\n\n\n\n### Steps to reproduce\n\n```Markdown\nUsing this parameter, the document can be parsed successfully.\n\n$ curl --request POST \\\n>      --url https://******/api/v1/datasets \\\n>      --header 'Content-Type: application/json' \\\n>      --header 'Authorization: Bearer ragflow-*****' \\\n>      --data '{\nquote>         \"name\": \"测试1\", \nquote>         \"description\": \"\", \nquote>         \"embedding_model\": \"BAAI/bge-large-zh-v1.5@BAAI\", \nquote>         \"permission\": \"me\", \nquote>         \"chunk_method\": \"naive\"\nquote>       }'\n{\"code\":0,\"data\":{\"avatar\":null,\"chunk_count\":0,\"chunk_method\":\"naive\",\"create_date\":\"Thu, 29 May 2025 17:24:51 GMT\",\"create_time\":1748510691307,\"created_by\":\"39f8e0ea3c6a11f0a8c30242ac1c0006\",\"description\":\"\",\"document_count\":0,\"embedding_model\":\"BAAI/bge-large-zh-v1.5@BAAI\",\"id\":\"c5e9d2403c6e11f0b7900242ac1d0006\",\"language\":\"English\",\"name\":\"\\u6d4b\\u8bd51\",\"pagerank\":0,\"parser_config\":{\"chunk_token_num\":128,\"delimiter\":\"\\\\n\",\"html4excel\":false,\"layout_recognize\":\"DeepDOC\",\"raptor\":{\"use_raptor\":false}},\"permission\":\"me\",\"similarity_threshold\":0.2,\"status\":\"1\",\"tenant_id\":\"39f8e0ea3c6a11f0a8c30242ac1c0006\",\"token_num\":0,\"update_date\":\"Thu, 29 May 2025 17:24:51 GMT\",\"update_time\":1748510691307,\"vector_similarity_weight\":0.3}}\n```\nAfter adding \"auto_keywords\": 3, the document parsing failed with an error.\n```\n$ curl --request POST \\\n>      --url https://******/api/v1/datasets \\\n>      --header 'Content-Type: application/json' \\\n>      --header 'Authorization: Bearer ragflow-*****' \\\n>      --data '{\nquote>         \"name\": \"测试2\", \nquote>         \"description\": \"\", \nquote>         \"embedding_model\": \"BAAI/bge-large-zh-v1.5@BAAI\", \nquote>         \"permission\": \"me\", \nquote>         \"chunk_method\": \"naive\",\nquote>         \"parser_config\": {\nquote>             \"auto_keywords\": 3\nquote>         }\nquote>       }'\n{\"code\":0,\"data\":{\"avatar\":null,\"chunk_count\":0,\"chunk_method\":\"naive\",\"create_date\":\"Thu, 29 May 2025 17:23:58 GMT\",\"create_time\":1748510638292,\"created_by\":\"39f8e0ea3c6a11f0a8c30242ac1c0006\",\"description\":\"\",\"document_count\":0,\"embedding_model\":\"BAAI/bge-large-zh-v1.5@BAAI\",\"id\":\"a65053d23c6e11f0b1c60242ac1d0006\",\"language\":\"English\",\"name\":\"\\u6d4b\\u8bd52\",\"pagerank\":0,\"parser_config\":{\"auto_keywords\":3,\"auto_questions\":0,\"chunk_token_num\":128,\"delimiter\":\"\\\\n\",\"filename_embd_weight\":null,\"graphrag\":null,\"html4excel\":false,\"layout_recognize\":\"DeepDOC\",\"pages\":null,\"raptor\":null,\"tag_kb_ids\":[],\"task_page_size\":null,\"topn_tags\":1},\"permission\":\"me\",\"similarity_threshold\":0.2,\"status\":\"1\",\"tenant_id\":\"39f8e0ea3c6a11f0a8c30242ac1c0006\",\"token_num\":0,\"update_date\":\"Thu, 29 May 2025 17:23:58 GMT\",\"update_time\":1748510638292,\"vector_similarity_weight\":0.3}}\n```\n\n### Additional information\n\n[前列腺癌.docx](https://github.com/user-attachments/files/20502063/default.docx)\n\n@KevinHuSh Expert, urgent help needed!",
      "state": "closed",
      "author": "biofer",
      "author_type": "User",
      "created_at": "2025-05-29T09:26:43Z",
      "updated_at": "2025-05-29T11:12:59Z",
      "closed_at": "2025-05-29T11:12:59Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7952/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7952",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7952",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:22.738994",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe error `float() argument must be a string or a real number, not 'NoneType'` occurs because the `filename_embd_weight` parameter in your `parser_config` is set to `null` (which becomes `None` in Python) when using the API. The code expects this value to be a float, so passing `None",
          "created_at": "2025-05-29T09:31:44Z"
        },
        {
          "author": "biofer",
          "body": "great, ths!",
          "created_at": "2025-05-29T11:04:29Z"
        }
      ]
    },
    {
      "issue_number": 3738,
      "title": "[Question]: RAGFlow streaming output suggestions",
      "body": "### Describe your problem\n\n我发现ragflow的流式返回有问题，我对比了直接调用大模型的流式。\r\n\r\n举例：如何对应使用 ragflow 接口，进行流式数据返回？\r\n\r\n大模型流式数据返回举例：\r\n--如何\r\n--对\r\n--应使用\r\n... 以此类推\r\n\r\nRagflow 数据返回举例：\r\n--如何对应\r\n--如何对应使用\r\n--如何对应使用 ragflow 接口\r\n--如何对应使用 ragflow 接口，进行流式数据返回？\r\n\r\n调用接口是\r\n<img width=\"940\" alt=\"微信图片_20241129115134\" src=\"https://github.com/user-attachments/assets/eae64dcb-686f-41e9-a7a7-a60aaec040de\">\r\n\r\n目前的想法是，流式返回，由 1->12->123 -> 12(ref1)34(ref2) 变成： 1->2->3->4，ref1(pos), ref2(pos)，类似这样的协议\r\n\r\n",
      "state": "open",
      "author": "lizheng419",
      "author_type": "User",
      "created_at": "2024-11-29T03:53:19Z",
      "updated_at": "2025-05-29T11:10:59Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question",
        "💞 feature"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/3738/reactions",
        "total_count": 1,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 1,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "KevinHuSh"
      ],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/3738",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/3738",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:22.909341",
      "comments": [
        {
          "author": "which-W",
          "body": "@lizheng419 \n👋 Thanks so much for your suggestion — and sorry for the late reply!\n\nWe've recently refactored the SDK session logic and made improvements to streaming support. This update might cover your use case now 🎉\n\nIf it works for you, feel free to close this feature request when you have a mom",
          "created_at": "2025-05-29T11:10:58Z"
        }
      ]
    },
    {
      "issue_number": 7948,
      "title": "[Question]: Can you introduce the functions of each file under the rag/app/ directory? Or provide an overall introduction to the entire project code (if the developer has maintained it, provide a link).",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nCan you introduce the functions of each file under the rag/app/ directory? Or provide an overall introduction to the entire project code (if the developer has maintained it, provide a link).\n",
      "state": "closed",
      "author": "azobottle",
      "author_type": "User",
      "created_at": "2025-05-29T08:06:11Z",
      "updated_at": "2025-05-29T09:31:50Z",
      "closed_at": "2025-05-29T09:31:50Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7948/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7948",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7948",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:23.099506",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nHere’s an introduction to the functions of each file under the rag/app/ directory, based on available information:\n\n- **manual.py**: Contains classes for parsing PDF and DOCX documents using OCR and layout analysis. The `Pdf` class performs OCR on PDF documents and analyzes their lay",
          "created_at": "2025-05-29T08:07:47Z"
        },
        {
          "author": "azobottle",
          "body": "@dosu What is the purpose of each file in the rag/app/ directory?\nExplain their differences.",
          "created_at": "2025-05-29T08:15:31Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nEach file in the rag/app/ directory serves as an example of using DeepDoc to parse different types of documents, with each file focusing on specific formats or extraction tasks. Here’s a breakdown of their purposes and differences:\n\nmanual.py provides classes for parsing PDF and DOCX",
          "created_at": "2025-05-29T08:16:54Z"
        },
        {
          "author": "azobottle",
          "body": "@dosu How does ragflow decide what method to use to parse docx files?",
          "created_at": "2025-05-29T08:27:37Z"
        }
      ]
    },
    {
      "issue_number": 4873,
      "title": "[Question]: Can view the debug logs of calling the LLM API in the Agent flow?",
      "body": "### Describe your problem\n\nExpect to view the log information of the real call to the LLM interface during the execution of the agent workflow.",
      "state": "closed",
      "author": "stardyun",
      "author_type": "User",
      "created_at": "2025-02-11T06:37:21Z",
      "updated_at": "2025-05-29T09:10:47Z",
      "closed_at": "2025-05-29T09:10:47Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/4873/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/4873",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/4873",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:23.354915",
      "comments": []
    },
    {
      "issue_number": 5203,
      "title": "[Feature Request]: hope to be able to modify the content in the chat history and get a re-generated answer.",
      "body": "### Is there an existing issue for the same feature request?\n\n- [x] I have checked the existing issues.\n\n### Is your feature request related to a problem?\n\n```Markdown\n\n```\n\n### Describe the feature you'd like\n\nCurrently, the input parameter of the Converse with agent API only includes \"question\", but it is not possible to modify the content of the historical messages to regenerate the answer.\nhttps://ragflow.io/docs/dev/http_api_reference#converse-with-agent\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "stardyun",
      "author_type": "User",
      "created_at": "2025-02-20T13:49:57Z",
      "updated_at": "2025-05-29T09:10:36Z",
      "closed_at": "2025-05-29T09:10:36Z",
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/5203/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/5203",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/5203",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:23.354935",
      "comments": [
        {
          "author": "BadwomanCraZY",
          "body": "@stardyun Apologies for the late reply, and thank you so much for your excellent suggestion! 🙏\n\nAllowing users to edit chat history and regenerate answers is indeed a powerful and valuable feature. We’ll be reviewing this in our upcoming feature evaluation, and if confirmed to be a cool and useful a",
          "created_at": "2025-05-19T02:20:31Z"
        }
      ]
    },
    {
      "issue_number": 7113,
      "title": "[Feature Request]: The problem of automatic multiple line breaks when saving and reopening after pasting the \"System Prompt\"",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\nIn the agent-generated answer component, after pasting ** System prompt **, save and reopen will automatically wrap multiple times\n```\n\n### Describe the feature you'd like\n\n- Keep it as it is after pasting, what you see is what you get.\n- Can support ctrl + z revocation\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n- ** This is the first time to paste **\n\n![Image](https://github.com/user-attachments/assets/15afc814-b0c7-44cc-98f6-b990c91912a3)\n \n- ** This is after reopening **\n![Image](https://github.com/user-attachments/assets/cfbc9d6f-e528-4111-8179-7ee6792cdbc0)",
      "state": "closed",
      "author": "stardyun",
      "author_type": "User",
      "created_at": "2025-04-17T07:32:31Z",
      "updated_at": "2025-05-29T09:10:00Z",
      "closed_at": "2025-05-29T09:10:00Z",
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7113/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7113",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7113",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:23.526948",
      "comments": [
        {
          "author": "stardyun",
          "body": "@cike8899 ",
          "created_at": "2025-05-07T05:18:04Z"
        }
      ]
    },
    {
      "issue_number": 7951,
      "title": "[Question]: The problem of automatic multiple line breaks when saving and reopening after pasting the \"System Prompt\"",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\n### In the agent-generated answer component, after pasting ** System prompt **, save and reopen will automatically wrap multiple times\n\n\n- ** This is the first time to paste **\n\n![Image](https://github.com/user-attachments/assets/15afc814-b0c7-44cc-98f6-b990c91912a3)\n \n- ** This is after reopening **\n![Image](https://github.com/user-attachments/assets/cfbc9d6f-e528-4111-8179-7ee6792cdbc0)",
      "state": "open",
      "author": "stardyun",
      "author_type": "User",
      "created_at": "2025-05-29T09:04:39Z",
      "updated_at": "2025-05-29T09:06:50Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7951/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7951",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7951",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:23.696882",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThere are currently no existing issues or discussions in the repository that directly address the problem of automatic multiple line breaks when saving and reopening after pasting the \"System Prompt\".\n\nBased on the code and documentation, the handling of line breaks may be influenced",
          "created_at": "2025-05-29T09:06:10Z"
        }
      ]
    },
    {
      "issue_number": 7946,
      "title": "[Question]: Does the deepdoc module convert docx tables into html?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nDoes the deepdoc module convert docx tables into html?\n",
      "state": "closed",
      "author": "azobottle",
      "author_type": "User",
      "created_at": "2025-05-29T07:55:43Z",
      "updated_at": "2025-05-29T08:04:43Z",
      "closed_at": "2025-05-29T08:04:32Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7946/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7946",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7946",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:23.903243",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @azobottle! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nYes, the deepdoc module in RAGFlow does convert docx tables into HTML. The relevant code in the repository shows that the Docx parser processes docx files and transforms tables",
          "created_at": "2025-05-29T07:57:02Z"
        }
      ]
    },
    {
      "issue_number": 7947,
      "title": "[Question]:  disk was fully occupied by docker",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nhe deployed ragflow service was not shut down. After one day, the server disk was fully occupied by docker. What is the reason?",
      "state": "open",
      "author": "wjy666-rbg",
      "author_type": "User",
      "created_at": "2025-05-29T07:56:42Z",
      "updated_at": "2025-05-29T07:58:51Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7947/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7947",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7947",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:24.116267",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @wjy666-rbg! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThe most likely reason your server disk was fully occupied by Docker after running the RAGFlow service is that the Docker containers, especially those for services like Elasti",
          "created_at": "2025-05-29T07:58:12Z"
        }
      ]
    },
    {
      "issue_number": 7869,
      "title": "[Bug]: the wrong use of task_limiter cause parse stuck when enable graphrag",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nlatest\n\n### RAGFlow image version\n\n0.19.0-slim\n\n### Other environment information\n\n```Markdown\nCPU:Intel(R) Xeon(R) Silver 4316 CPU @ 2.30GHz\nMEM:128GB\nOS:Ubuntu 22.04-server\n\nset WORKERS = 4 in entrypoint.sh to start 4 task_executor.\n```\n\n### Actual behavior\n\nin task_executor.py  do_handle_task ,when task_type is graphrag, the task_limiter will be replaced with a new one.\n```python\n        global task_limiter\n        task_limiter = trio.CapacityLimiter(2)\n```\n\nthis is the wrong use of trio  CapacityLimiter, and will cause capacity limit outof control.\nthis can be verified in the follow code\n```python\nimport trio\n\nMAX_CONCURRENT_TASKS = 5\ntask_limiter = trio.CapacityLimiter(MAX_CONCURRENT_TASKS)\n\n# 模拟任务函数\nasync def long_task(n):\n    global task_limiter\n    async with task_limiter:\n        print(f\"[{n}] Got token, running...\")\n        if n % 5 == 0 :\n            task_limiter = trio.CapacityLimiter(2)\n            #task_limiter.total_tokens = 2\n\n        await trio.sleep(20 * 60)  \n        print(f\"[{n}] Task completed.\")\n\nasync def task_generator():\n    task_id = 1\n    while True:\n        task_id += 1\n        print(f\"[{task_id}] Spawning new task...\")\n        trio.lowlevel.spawn_system_task(long_task, task_id)\n        await trio.sleep(1)  \n\n\nif __name__ == \"__main__\":\n    trio.run(task_generator)\n\n```\n\nthe task will be handlled endless untile crash.\n\n\n\n### Expected behavior\n\nif we want to  set the capacity dynamicly  ,we shou use \n```python\ntask_limiter.total_tokens = 2\n```\n\nbut this is still not the right way to control graphrag task count .I think we should do it  in two ways:\n1. control the graphrag task generate speed —— only when graphrag task count is lower than specific count .\n2. use a different redis queue,  special use for graphrag task ,and a unique task_limiter for graphrag. So we dont need to change de task_limiter,and graphrag will not block normal chunk build task.\n\n### Steps to reproduce\n\n```Markdown\nenable graphrag , parse 1k docs in the same time .\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "sinopec",
      "author_type": "User",
      "created_at": "2025-05-27T01:46:27Z",
      "updated_at": "2025-05-29T07:31:45Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7869/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7869",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7869",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:24.324841",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYou are correct in identifying that replacing the global `task_limiter` with a new `trio.CapacityLimiter` instance inside the task handler (especially for `graphrag` tasks) can lead to capacity control issues and unpredictable concurrency behavior. This approach breaks the intended c",
          "created_at": "2025-05-27T01:52:02Z"
        },
        {
          "author": "sinopec",
          "body": "#7873  kg_limiter  can prevent the generation of unlimited tasks, but graphrag tasks still consume the capacity of the regular task_limiter, which may block normal chunk tasks.\n\nTherefore, a better approach is to use separate Redis queues for graphrag, raptor, and regular chunk tasks. This way, diff",
          "created_at": "2025-05-28T01:25:12Z"
        },
        {
          "author": "KevinHuSh",
          "body": "@sinopec Did you run the latest code? And what's the phenomenon?",
          "created_at": "2025-05-29T05:20:56Z"
        },
        {
          "author": "sinopec",
          "body": "> [@sinopec](https://github.com/sinopec) Did you run the latest code? And what's the phenomenon?\n\nAfter performing large-scale knowledge graph parsing, the graphrag tasks still overwhelm the capacity of the task_limiter, which prevents basic chunk tasks from being executed. One improvement is that t",
          "created_at": "2025-05-29T07:31:45Z"
        }
      ]
    },
    {
      "issue_number": 7942,
      "title": "[Question]: Should rag recall the use of lightrag or graphrag? Which method answers multi-hop questions better？",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nShould rag recall the use of lightrag or graphrag? Which method answers multi-hop questions better？  @dosubot",
      "state": "open",
      "author": "zhugh2333",
      "author_type": "User",
      "created_at": "2025-05-29T06:37:32Z",
      "updated_at": "2025-05-29T07:30:51Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 11,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7942/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7942",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7942",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:24.552609",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nFor multi-hop question answering in RAGFlow, GraphRAG is specifically designed to construct a knowledge graph over file chunks to enhance reasoning over multiple pieces of information and handle nested logic, which is central to multi-hop tasks. This makes GraphRAG generally better s",
          "created_at": "2025-05-29T06:38:56Z"
        },
        {
          "author": "zhugh2333",
          "body": "Does the construction quality and response quality of a knowledge graph depend on anything? @dosubot",
          "created_at": "2025-05-29T07:11:29Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYes, both the construction quality and the response quality of a knowledge graph in RAGFlow depend on several factors:\n\n- The completeness and accuracy of the data used to build the graph are crucial. Constructing a knowledge graph over all text chunks in the knowledge base can signi",
          "created_at": "2025-05-29T07:12:54Z"
        },
        {
          "author": "zhugh2333",
          "body": "Does the construction quality and response quality of a knowledge graph not rely on the understanding ability of the generative model？",
          "created_at": "2025-05-29T07:14:49Z"
        },
        {
          "author": "zhugh2333",
          "body": "@dosubot",
          "created_at": "2025-05-29T07:19:55Z"
        }
      ]
    },
    {
      "issue_number": 6004,
      "title": "[Question]: Internal server error while chunking: Coordinate lower is less than upper.",
      "body": "### Self Checks\n\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nplease, when i parsing document, This error was prompted.\n\n![Image](https://github.com/user-attachments/assets/b92cdf29-f769-4241-aae0-34f302680935)\n\n![Image](https://github.com/user-attachments/assets/c6380c8f-bbbc-4ffc-ac54-59562a7a2991)",
      "state": "open",
      "author": "qlanto224",
      "author_type": "User",
      "created_at": "2025-03-13T01:56:31Z",
      "updated_at": "2025-05-29T07:02:27Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 14,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/6004/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/6004",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/6004",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:24.751584",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "Could you share your file?\nkai.hu@infiniflow.org",
          "created_at": "2025-03-13T03:20:01Z"
        },
        {
          "author": "qlanto224",
          "body": "\n> Could you share your file? [kai.hu@infiniflow.org](mailto:kai.hu@infiniflow.org)\n\nHave been sent",
          "created_at": "2025-03-16T04:47:54Z"
        },
        {
          "author": "qlanto224",
          "body": "> Could you share your file? [kai.hu@infiniflow.org](mailto:kai.hu@infiniflow.org)\n\n这是错误信息:\n```\n12:16:39 Page(109~121): [ERROR]Internal server error while chunking: Coordinate lower is less than upper\n12:16:39 [ERROR][Exception]: Coordinate 'lower' is less than 'upper'\n11:40:32 Task has been receive",
          "created_at": "2025-03-16T04:59:59Z"
        },
        {
          "author": "AngGaGim",
          "body": "same question",
          "created_at": "2025-03-16T19:00:45Z"
        },
        {
          "author": "Rzlnmc",
          "body": "Same question. Is this problem solved?",
          "created_at": "2025-03-28T12:50:02Z"
        }
      ]
    },
    {
      "issue_number": 3687,
      "title": "[Question]: Can the stream interface of converse with chat assistant filter the returned fields?",
      "body": "### Describe your problem\n\nFor example if I want a chunks field in reference not returned, because it's too much and I don't need it.",
      "state": "open",
      "author": "tilince",
      "author_type": "User",
      "created_at": "2024-11-27T06:59:54Z",
      "updated_at": "2025-05-29T06:28:17Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question",
        "💞 feature"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/3687/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/3687",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/3687",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:24.959047",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "You could disable 'cite' in dialog setting.",
          "created_at": "2024-11-28T03:37:39Z"
        },
        {
          "author": "tilince",
          "body": "> You could disable 'cite' in dialog setting.\r\n\r\n\r\nThank you. I'll try.",
          "created_at": "2024-11-28T09:14:31Z"
        },
        {
          "author": "tilince",
          "body": "> You could disable 'cite' in dialog setting.\r\n\r\n😁 It's still not working. I do need the reference field, but I don't need the chunks in it.",
          "created_at": "2024-12-02T02:52:55Z"
        },
        {
          "author": "which-W",
          "body": "@tilince \n👋 Thanks a lot for your suggestion — and sorry for the delayed response!\n\nTo better understand and address the issue, could you please provide a bit more detail about your use case or what you're running into? 🕵️‍♂️ Any additional context would really help us look into this more effectivel",
          "created_at": "2025-05-29T06:28:16Z"
        }
      ]
    },
    {
      "issue_number": 7928,
      "title": "[Question]: the difference between lightrag and graphrag？",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nKnowledge graph construction methods support lightrag and graphrag. What are the differences between the two? What are their respective advantages?",
      "state": "open",
      "author": "zhugh2333",
      "author_type": "User",
      "created_at": "2025-05-29T02:18:13Z",
      "updated_at": "2025-05-29T06:25:55Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7928/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7928",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7928",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:25.145180",
      "comments": [
        {
          "author": "zhugh2333",
          "body": "@dosubot",
          "created_at": "2025-05-29T02:18:23Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nHere are the main differences and advantages between lightrag and graphrag for knowledge graph construction in RAGFlow:\n\nLightRAG is the default method and is designed to be simple and fast. It uses prompts to extract entities and relationships, consuming fewer tokens, less memory, a",
          "created_at": "2025-05-29T02:19:52Z"
        },
        {
          "author": "mu-dan",
          "body": "![Image](https://github.com/user-attachments/assets/d757c026-186a-4031-a99c-af4077b10543)\nBut I'm going to choose either of these two here, and I'm still using graphrag when generating knowledge graphs\n\n![Image](https://github.com/user-attachments/assets/21488f31-dc2a-4dec-aa90-760b00322b1c)\n\n![Imag",
          "created_at": "2025-05-29T06:25:54Z"
        }
      ]
    },
    {
      "issue_number": 7858,
      "title": "[Question]: Why is it that sometimes the correct answer is indexed and sometimes not? The same question, the same knowledge base",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nWhy is it that sometimes the correct answer is indexed and sometimes not? \nThe same question, the same knowledge base，Perhaps after refreshing multiple times, the correct graph fragment will be indexed and the correct answer will be obtained. Why are the search results for the same question different each time it is refreshed.\nLooking forward to your answers.",
      "state": "open",
      "author": "zhugh2333",
      "author_type": "User",
      "created_at": "2025-05-26T09:12:22Z",
      "updated_at": "2025-05-29T06:19:25Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 11,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7858/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7858",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7858",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:25.398996",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe variability you’re seeing—where the correct answer is sometimes indexed and sometimes not, even with the same question and knowledge base—can be explained by how RAGFlow’s retrieval process works.\n\nRAGFlow uses a combination of weighted keyword similarity and vector (embedding) s",
          "created_at": "2025-05-26T09:17:07Z"
        },
        {
          "author": "zhugh2333",
          "body": "Thank you. This modification works, but how can we set up the large model to directly use the content in the knowledge base instead of the web content in the chat conversation",
          "created_at": "2025-05-26T09:29:29Z"
        },
        {
          "author": "zhugh2333",
          "body": "@dosu-bot",
          "created_at": "2025-05-26T09:32:51Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nTo configure the large model in RAGFlow to prioritize content from your knowledge base (and not web content) during chat conversations, you should use the \"page rank\" feature. This allows you to boost the retrieval priority of specific knowledge bases:\n\n- Go to the Configuration page",
          "created_at": "2025-05-26T09:36:19Z"
        },
        {
          "author": "zhugh2333",
          "body": "How to disable web search in the context of a chat conversation？",
          "created_at": "2025-05-26T09:45:55Z"
        }
      ]
    },
    {
      "issue_number": 7940,
      "title": "[Question]: How to deal with the situation that the user_id returned in the Conversation table in the database is null?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nWe want to retrieve the user's conversation history in the background, but the user_id returned in the Conversation table in the database is null",
      "state": "open",
      "author": "Lmengxi",
      "author_type": "User",
      "created_at": "2025-05-29T05:38:49Z",
      "updated_at": "2025-05-29T05:41:20Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7940/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7940",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7940",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:25.634922",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @Lmengxi! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThe Conversation table in RAGFlow allows the user_id field to be null, which means that if user_id is not provided or handled correctly during conversation creation or updates, i",
          "created_at": "2025-05-29T05:40:14Z"
        },
        {
          "author": "Lmengxi",
          "body": "The id, message and other fields returned in the conversation table are normal, only user_id is null",
          "created_at": "2025-05-29T05:41:18Z"
        }
      ]
    },
    {
      "issue_number": 7912,
      "title": "[Question]: In v0.19.0, where can I select a VLM model for document parsing?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\n![Image](https://github.com/user-attachments/assets/8f7e74e1-3ef5-4d7d-82ae-5aaad0ca4cbe)",
      "state": "closed",
      "author": "Dreamcatcher-wind",
      "author_type": "User",
      "created_at": "2025-05-28T07:38:27Z",
      "updated_at": "2025-05-29T05:40:03Z",
      "closed_at": "2025-05-29T05:40:03Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7912/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7912",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7912",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:25.811280",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nIn RAGFlow v0.19.0, you can select a Vision-Language Model (VLM) for document (PDF) parsing from your knowledge base's Configuration page. First, choose a chunking method compatible with PDFs (such as General, Manual, Paper, Book, Laws, Presentation, or One). This will make the \"PDF ",
          "created_at": "2025-05-28T07:41:17Z"
        }
      ]
    },
    {
      "issue_number": 7934,
      "title": "[Bug]: Doc file chunk order",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n0.19.0-slim docker\n\n### RAGFlow image version\n\n0.19.0-slim docker\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nI uploaded a docx file to ragflow using default settings, but the chunks were parsed out of order.\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\n1.Run docker images\n2.Open the localhost:80 web\n3.create a new dataset\n4.upload a docx file,15pages,6k character\n5.parse file\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "Z-ZHHH",
      "author_type": "User",
      "created_at": "2025-05-29T03:18:13Z",
      "updated_at": "2025-05-29T03:18:13Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7934/reactions",
        "total_count": 3,
        "+1": 3,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7934",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7934",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:26.049974",
      "comments": []
    },
    {
      "issue_number": 7904,
      "title": "[Bug]: Display bug in the early stage of conversation chat",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nnull\n\n### RAGFlow image version\n\n0.17.2\n\n### Other environment information\n\n```Markdown\nlinux\n```\n\n### Actual behavior\n\n1. Create a new knowledge base and upload a PDF\n2. Default configuration parsing file\n3. Configure the corresponding knowledge base for the chat interface\n4. Conduct Q&A sessions （Q：Number of Nongfu Spring patents in 2020：2020年农夫山泉专利数量）\n5. Output results，See Attachment\n6. In the answer results \n\n### Expected behavior\n\nThe final answer should not have a strikethrough\n\n### Steps to reproduce\n\n```Markdown\n1. Create a new knowledge base and upload a PDF\n2. Default configuration parsing file\n3. Configure the corresponding knowledge base for the chat interface\n4. Conduct Q&A sessions （Q：Number of Nongfu Spring patents in 2020：2020年农夫山泉专利数量）\n5. Output results，See Attachment\n6. In the answer results\n```\n\n### Additional information\n\n<img width=\"1016\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/1f9f5a17-3bf3-4115-888e-8a7da643199e\" />\n\n[2020 ESG报告.pdf](https://github.com/user-attachments/files/20473511/2020.ESG.pdf)\n\nprompts.py \nSuggested modifications\n# Citation Requirements (Optimized):\n- Use a uniform citation format of `[ID:i]`, where \"i\" is the document ID enclosed in square brackets. Separate multiple IDs with spaces (e.g., `[ID:0] [ID:1]`).\n- Citation markers must be placed at the end of a sentence, separated by a space from the final punctuation (e.g., period, question mark). A maximum of 4 IDs are allowed per sentence.\n- Do not add citations for non-knowledge base content (e.g., common sense). Strictly prohibit the use of strikethrough symbols (e.g., `~~`) or other formatting syntax.\n",
      "state": "closed",
      "author": "asmalluniverse",
      "author_type": "User",
      "created_at": "2025-05-28T03:03:21Z",
      "updated_at": "2025-05-29T03:09:15Z",
      "closed_at": "2025-05-29T03:09:15Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7904/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "yongtenglei"
      ],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7904",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7904",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:26.049995",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nBased on your description and a review of the codebase, the strikethrough formatting in the chat answer output is likely related to how markdown is rendered in the chat interface. The file responsible for rendering markdown content is `web/src/pages/chat/markdown-content/index.tsx`, ",
          "created_at": "2025-05-28T03:11:16Z"
        }
      ]
    },
    {
      "issue_number": 7877,
      "title": "[Bug]: api bug ",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n0.18.0\n\nretrival chunk\"similarity_threshold\"\n-url http://{address}/api/v1/retrieval \n![Image](https://github.com/user-attachments/assets/d2e5212d-fc76-46b5-9d19-6934e53316a1)\n\n\nThe set threshold cannot be filtered",
      "state": "open",
      "author": "GXKIM",
      "author_type": "User",
      "created_at": "2025-05-27T05:04:32Z",
      "updated_at": "2025-05-29T02:52:40Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7877/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7877",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7877",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:26.287700",
      "comments": [
        {
          "author": "ZhenhangTung",
          "body": "cc @yongtenglei ",
          "created_at": "2025-05-28T05:52:32Z"
        },
        {
          "author": "yongtenglei",
          "body": "Hi, @GXKIM \n\nIt's intended. For tasks like **summary**, we usually pass in document_ids to ensure all related documents are included, as this generally improves performance. If this is a major concern for you, [here](https://github.com/infiniflow/ragflow/blob/20ab6aad4ab73b6843bc3b79e07c87f3a16fd771",
          "created_at": "2025-05-28T06:19:26Z"
        },
        {
          "author": "GXKIM",
          "body": "> Hi, [@GXKIM](https://github.com/GXKIM)\n> \n> It's intended. For tasks like **summary**, we usually pass in document_ids to ensure all related documents are included, as this generally improves performance. If this is a major concern for you, [here](https://github.com/infiniflow/ragflow/blob/20ab6aa",
          "created_at": "2025-05-28T06:37:48Z"
        },
        {
          "author": "yongtenglei",
          "body": "Hi, @GXKIM, see [here](https://github.com/infiniflow/ragflow/blob/20ab6aad4ab73b6843bc3b79e07c87f3a16fd771/rag/nlp/search.py#L388). Once document_ids are set, similarity_threshold will default to 0. If this matters to you, delete line 389.",
          "created_at": "2025-05-29T01:48:06Z"
        },
        {
          "author": "GXKIM",
          "body": "I tried commenting out the document_id and setting \"similarity_threshold\": 0.3 and \"top_k\": 2. It did filter out chunks below the threshold, but the number of returned chunks exceeded two. \n\n![Image](https://github.com/user-attachments/assets/b367f9cc-076e-41d6-8131-b9de06d7de38)",
          "created_at": "2025-05-29T02:52:39Z"
        }
      ]
    },
    {
      "issue_number": 7930,
      "title": "[Question]: Is the workflow of the agent parallel?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nIs the workflow of the agent parallel?\nFor example, if a parent node A connects to two child nodes B and C, and node D integrates the outputs of nodes B and C, are nodes B and C computed in parallel, or is B executed first, followed by C?",
      "state": "open",
      "author": "1006076811",
      "author_type": "User",
      "created_at": "2025-05-29T02:31:36Z",
      "updated_at": "2025-05-29T02:35:07Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7930/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7930",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7930",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:26.478337",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nBased on the available information, the agent workflow in RAGFlow does not appear to execute nodes in parallel. The core execution logic, managed by the Canvas class in agent/canvas.py, prepares and runs components by iterating over them, checking dependencies, and managing execution",
          "created_at": "2025-05-29T02:35:06Z"
        }
      ]
    },
    {
      "issue_number": 7699,
      "title": "[Bug]:service \"sandbox-executor-manager\" has neither an image nor a build context specified: invalid compose project",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nNone\n\n### RAGFlow image version\n\nv0.18.0-slim\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nWhy do I encounter this issue when following the README instructions?\n![Image](https://github.com/user-attachments/assets/4f8c5faf-b44a-410d-95b5-7e76cd662535)\n\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\ncd docker\ndocker compose -f docker-compose-gpu.yml up -d\nQuestion is：\ntime=\"2025-05-17T20:03:13+08:00\" level=warning msg=\"The \\\"HF_ENDPOINT\\\" variable is not set. Defaulting to a blank string.\"\ntime=\"2025-05-17T20:03:13+08:00\" level=warning msg=\"The \\\"MACOS\\\" variable is not set. Defaulting to a blank string.\"\ntime=\"2025-05-17T20:03:13+08:00\" level=warning msg=\"The \\\"SANDBOX_EXECUTOR_MANAGER_IMAGE\\\" variable is not set. Defaulting to a blank string.\"\ntime=\"2025-05-17T20:03:13+08:00\" level=warning msg=\"The \\\"SANDBOX_EXECUTOR_MANAGER_PORT\\\" variable is not set. Defaulting to a blank string.\"\nservice \"sandbox-executor-manager\" has neither an image nor a build context specified: invalid compose project\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "120L020910fanshuo",
      "author_type": "User",
      "created_at": "2025-05-17T12:14:18Z",
      "updated_at": "2025-05-29T01:49:30Z",
      "closed_at": "2025-05-29T01:49:30Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7699/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7699",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7699",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:26.647477",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHello @120L020910fanshuo! I'm [Dosu](https://dosu.dev), a helpful bot here to assist you with bugs, answer your questions, and guide you in becoming a contributor. I'm here to help while you wait for a human maintainer. How can I assist you today?\n\n<!-- Answer -->\nThe issue you're ",
          "created_at": "2025-05-17T12:21:58Z"
        },
        {
          "author": "KevinHuSh",
          "body": "@yongtenglei Please confirm and help.",
          "created_at": "2025-05-19T03:47:49Z"
        },
        {
          "author": "yongtenglei",
          "body": "Hi, @120L020910fanshuo \n\nSandbox is our latest feature, and it is disabled by default, as you can see the profiles setting in `docker/.env` does not include sandbox. With the default configuration, you should not encounter the error you mentioned. \n\nSince you are experiencing this issue, I assume yo",
          "created_at": "2025-05-19T06:47:40Z"
        },
        {
          "author": "373675032",
          "body": "我也遇到了这个问题，我给你说一下我的解决方案：\n\n![Image](https://github.com/user-attachments/assets/6b509ec4-4cf0-4dfa-ba3a-3c686a09c4c5)",
          "created_at": "2025-05-20T09:57:39Z"
        },
        {
          "author": "quiet666",
          "body": "我根据.env文件中进行设置，并且拉取了infiniflow/sandbox-executor-manager：lastest镜像，依旧报错。最后通过\ndocker inspect infiniflow/sandbox-executor-manager:lastest  发现该镜像是amd架构，而我服务器是arm架构。\n目前在尝试寻找寻找arm版本的sandbox-executor-manager",
          "created_at": "2025-05-21T09:19:45Z"
        }
      ]
    },
    {
      "issue_number": 7917,
      "title": "[Question]: Why not use the infinity database by default but the elasticsearch database instead？",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nWhy not use the infinity database by default but the elasticsearch database instead？What are the differences between the two？",
      "state": "closed",
      "author": "zhugh2333",
      "author_type": "User",
      "created_at": "2025-05-28T09:51:04Z",
      "updated_at": "2025-05-29T01:39:57Z",
      "closed_at": "2025-05-29T01:39:57Z",
      "labels": [
        "🙋‍♀️ question",
        "♾️infinity"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7917/reactions",
        "total_count": 2,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 1
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7917",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7917",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:26.844823",
      "comments": [
        {
          "author": "zhugh2333",
          "body": "@dosubot",
          "created_at": "2025-05-28T09:52:24Z"
        },
        {
          "author": "zhugh2333",
          "body": "@dosubot",
          "created_at": "2025-05-29T01:34:30Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nElasticsearch is used as the default database in RAGFlow because it provides robust support for both full-text and vector search, which are essential for deep document understanding. It offers advanced features like bm25 scoring, phrase and sloppy queries, dynamic query pruning, and ",
          "created_at": "2025-05-29T01:36:07Z"
        },
        {
          "author": "zhugh2333",
          "body": "ok,Thank you for your reply.",
          "created_at": "2025-05-29T01:39:55Z"
        }
      ]
    },
    {
      "issue_number": 7925,
      "title": "[Bug]: Parameter 'dataset_ids' is expected to be an array.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n6ca1aef\n\n### RAGFlow image version\n\n v0.19.0 full\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nI use self-host mcp mode and use openhands as the mcp client, the openhands UI and the openhands logs has shown that it choose ragflow mcp tool, but the UI and logs show errors:\n\n<img width=\"1220\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/74a9c8c9-9357-4f8d-bd37-5836762fe002\" />\n\n### Expected behavior\n\nexacute the mcp tool sucessfully\n\n### Steps to reproduce\n\n```Markdown\n1 start ragflow docker version 0.19.0 with mcp server at self-host mode\n2 config the openhands mcp server:\n{\n  \"sse_servers\": [\n    {\n      \"url\": \"http://xx.xx.xx.xx:9382/sse\",\n      \"api_key\": \"ragflow-xxxxxxxxxxxxxxx\"\n    }\n  ],\n  \"stdio_servers\": []\n}\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "dust1or2",
      "author_type": "User",
      "created_at": "2025-05-29T01:21:25Z",
      "updated_at": "2025-05-29T01:23:06Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7925/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7925",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7925",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:27.039833",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe error occurs because the RAGFlow API expects the parameter dataset_ids to be an array (list of strings), not a single string or null value. This is required for endpoints like /api/v1/retrieval and for SDK methods such as create_chat. For example, the correct format in your reque",
          "created_at": "2025-05-29T01:23:05Z"
        }
      ]
    },
    {
      "issue_number": 7916,
      "title": "[Question]: In RAGFlow v0.19.0 . pptx file.A screenshot of the knowledge base with a watermark on it. “fvaluation only.created with Aspose. slides for python via .net 24.12.”",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nIn RAGFlow v0.19.0 . \npptx file.\nA screenshot of the knowledge base with a watermark on it. \n“fvaluation only.created with Aspose. slides for python via .net 24.12.” \n\nHow should I remove it?",
      "state": "closed",
      "author": "ooodwbooo",
      "author_type": "User",
      "created_at": "2025-05-28T09:31:48Z",
      "updated_at": "2025-05-29T00:31:34Z",
      "closed_at": "2025-05-29T00:31:34Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7916/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7916",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7916",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:27.254858",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @ooodwbooo! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThe watermark “evaluation only.created with Aspose.slides for python via .net 24.12.” on your .pptx file in RAGFlow v0.19.0 indicates that the Aspose.Slides library is running ",
          "created_at": "2025-05-28T09:40:24Z"
        }
      ]
    },
    {
      "issue_number": 7831,
      "title": "[Question]: what is the latest version for macOS？",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI have rebuild the image for macOS m4 chip，when run it from docker, it shows version v0.18.0-207-g552023ee full. not v.0.19.",
      "state": "open",
      "author": "asking002",
      "author_type": "User",
      "created_at": "2025-05-24T10:01:57Z",
      "updated_at": "2025-05-28T16:25:28Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7831/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7831",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7831",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:27.433400",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe latest version of RAGFlow for macOS is v0.19.0, released on May 26, 2025. There are two editions available:\n\n- **Slim edition**: `infiniflow/ragflow:v0.19.0-slim` (does not include embedding models)\n- **Full edition**: `infiniflow/ragflow:v0.19.0` (includes embedding models)  \n[d",
          "created_at": "2025-05-24T10:04:51Z"
        },
        {
          "author": "asking002",
          "body": "Is anyone succeeded for installing 0.19 on macos?",
          "created_at": "2025-05-28T16:25:27Z"
        }
      ]
    },
    {
      "issue_number": 7660,
      "title": "[Question]: Error when uploading pdf file",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\n2025-05-15 13:07:01,748 INFO     21 \n  ______           __      ______                     __\n /_  __/___ ______/ /__   / ____/  _____  _______  __/ /_____  _____\n  / / / __ `/ ___/ //_/  / __/ | |/_/ _ \\/ ___/ / / / __/ __ \\/ ___/\n / / / /_/ (__  ) ,<    / /____>  </  __/ /__/ /_/ / /_/ /_/ / /\n/_/  \\__,_/____/_/|_|  /_____/_/|_|\\___/\\___/\\__,_/\\__/\\____/_/\n    \n2025-05-15 13:07:01,748 INFO     21 TaskExecutor: RAGFlow version: v0.18.0-137-g36e32dde slim\n2025-05-15 13:07:01,749 INFO     21 Use Elasticsearch http://es01:9200 as the doc engine.\n2025-05-15 13:07:01,752 INFO     21 GET http://es01:9200/ [status:200 duration:0.002s]\n2025-05-15 13:07:01,754 INFO     21 HEAD http://es01:9200/ [status:200 duration:0.002s]\n2025-05-15 13:07:01,755 INFO     21 Elasticsearch http://es01:9200 is healthy.\n2025-05-15 13:07:01,759 WARNING  21 Load term.freq FAIL!\n2025-05-15 13:07:01,762 WARNING  21 Realtime synonym is disabled, since no redis connection.\n2025-05-15 13:07:01,766 WARNING  21 Load term.freq FAIL!\n2025-05-15 13:07:01,769 WARNING  21 Realtime synonym is disabled, since no redis connection.\n2025-05-15 13:07:01,770 INFO     21 MAX_CONTENT_LENGTH: 134217728\n2025-05-15 13:07:01,770 INFO     21 MAX_FILE_COUNT_PER_USER: 0\n2025-05-15 13:07:01,776 INFO     21 task_executor_2055719b06ac_0 reported heartbeat: {\"name\": \"task_executor_2055719b06ac_0\", \"now\": \"2025-05-15T13:07:01.776+08:00\", \"boot_at\": \"2025-05-15T13:07:01.747+08:00\", \"pending\": 0, \"lag\": 0, \"done\": 0, \"failed\": 0, \"current\": {}}\n2025-05-15 13:07:01,777 WARNING  21 RedisDB.get_unacked_iterator queue rag_flow_svr_queue_1 doesn't exist\n2025-05-15 13:07:27,086 INFO     19 172.21.0.6 - - [15/May/2025 13:07:27] \"GET /v1/user/info HTTP/1.1\" 200 -\n2025-05-15 13:07:27,094 INFO     19 172.21.0.6 - - [15/May/2025 13:07:27] \"GET /v1/user/tenant_info HTTP/1.1\" 200 -\n2025-05-15 13:07:27,110 INFO     19 172.21.0.6 - - [15/May/2025 13:07:27] \"POST /v1/document/list?kb_id=4250e17230b511f0bcf3a63c07dbe2b5&keywords=&page_size=10&page=1 HTTP/1.1\" 200 -\n2025-05-15 13:07:27,127 INFO     19 172.21.0.6 - - [15/May/2025 13:07:27] \"GET /v1/tenant/list HTTP/1.1\" 200 -\n2025-05-15 13:07:27,137 INFO     19 HEAD http://es01:9200/ragflow_375bba0430af11f0a06fa63c07dbe2b5 [status:200 duration:0.008s]\n2025-05-15 13:07:27,156 INFO     19 172.21.0.6 - - [15/May/2025 13:07:27] \"GET /v1/kb/detail?kb_id=4250e17230b511f0bcf3a63c07dbe2b5 HTTP/1.1\" 200 -\n2025-05-15 13:07:27,227 INFO     19 172.21.0.6 - - [15/May/2025 13:07:27] \"GET /v1/llm/list HTTP/1.1\" 200 -\n2025-05-15 13:07:27,569 INFO     19 POST http://es01:9200/ragflow_375bba0430af11f0a06fa63c07dbe2b5/_search [status:200 duration:0.003s]\n2025-05-15 13:07:27,570 INFO     19 172.21.0.6 - - [15/May/2025 13:07:27] \"GET /v1/kb/4250e17230b511f0bcf3a63c07dbe2b5/knowledge_graph HTTP/1.1\" 200 -\n2025-05-15 13:07:30,297 INFO     19 HEAD http://es01:9200/ragflow_375bba0430af11f0a06fa63c07dbe2b5 [status:200 duration:0.004s]\n2025-05-15 13:07:30,297 INFO     19 172.21.0.6 - - [15/May/2025 13:07:30] \"GET /v1/user/info HTTP/1.1\" 200 -\n2025-05-15 13:07:30,322 INFO     19 172.21.0.6 - - [15/May/2025 13:07:30] \"GET /v1/user/tenant_info HTTP/1.1\" 200 -\n2025-05-15 13:07:30,322 INFO     19 172.21.0.6 - - [15/May/2025 13:07:30] \"GET /v1/kb/detail?kb_id=4250e17230b511f0bcf3a63c07dbe2b5 HTTP/1.1\" 200 -\n2025-05-15 13:07:30,323 INFO     19 172.21.0.6 - - [15/May/2025 13:07:30] \"POST /v1/document/list?kb_id=4250e17230b511f0bcf3a63c07dbe2b5&keywords=&page_size=10&page=1 HTTP/1.1\" 200 -\n2025-05-15 13:07:30,340 INFO     19 POST http://es01:9200/ragflow_375bba0430af11f0a06fa63c07dbe2b5/_search [status:200 duration:0.003s]\n2025-05-15 13:07:30,342 INFO     19 172.21.0.6 - - [15/May/2025 13:07:30] \"GET /v1/kb/4250e17230b511f0bcf3a63c07dbe2b5/knowledge_graph HTTP/1.1\" 200 -\n2025-05-15 13:07:30,345 INFO     19 172.21.0.6 - - [15/May/2025 13:07:30] \"GET /v1/tenant/list HTTP/1.1\" 200 -\n2025-05-15 13:07:30,414 ERROR    19 Fail to get 4250e17230b511f0bcf3a63c07dbe2b5/thumbnail_d47c347e314711f0b0ea3a9a40e7f046.png\nTraceback (most recent call last):\n  File \"/ragflow/rag/utils/minio_conn.py\", line 88, in get\n    r = self.conn.get_object(bucket, filename)\n  File \"/ragflow/.venv/lib/python3.10/site-packages/minio/api.py\", line 1244, in get_object\n    return self._execute(\n  File \"/ragflow/.venv/lib/python3.10/site-packages/minio/api.py\", line 437, in _execute\n    region = self._get_region(bucket_name)\n  File \"/ragflow/.venv/lib/python3.10/site-packages/minio/api.py\", line 494, in _get_region\n    response = self._url_open(\n  File \"/ragflow/.venv/lib/python3.10/site-packages/minio/api.py\", line 423, in _url_open\n    raise response_error\nminio.error.S3Error: S3 operation failed; code: InvalidRequest, message: Invalid Request (invalid hostname), resource: /4250e17230b511f0bcf3a63c07dbe2b5, request_id: 183F9B0AA201B7B1, host_id: dd9025bab4ad464b049177c95eb6ebf374d3b3fd1af9251148b658df7ac2e3e8\n2025-05-15 13:07:31,418 ERROR    19 The view function for 'document.get_image' did not return a valid response. The function either returned None or ended without a return statement.\nTraceback (most recent call last):\n  File \"/ragflow/api/apps/document_app.py\", line 559, in get_image\n    response = flask.make_response(STORAGE_IMPL.get(bkt, nm))\n  File \"/ragflow/.venv/lib/python3.10/site-packages/flask/helpers.py\", line 173, in make_response\n    return current_app.make_response(args)\n  File \"/ragflow/.venv/lib/python3.10/site-packages/flask/app.py\", line 1174, in make_response\n    raise TypeError(\nTypeError: The view function for 'document.get_image' did not return a valid response. The function either returned None or ended without a return statement.\n2025-05-15 13:07:31,422 INFO     19 172.21.0.6 - - [15/May/2025 13:07:31] \"GET /v1/document/image/4250e17230b511f0bcf3a63c07dbe2b5-thumbnail_d47c347e314711f0b0ea3a9a40e7f046.png HTTP/1.1\" 200 -\n2025-05-15 13:07:31,850 INFO     21 task_executor_2055719b06ac_0 reported heartbeat: {\"name\": \"task_executor_2055719b06ac_0\", \"now\": \"2025-05-15T13:07:31.849+08:00\", \"boot_at\": \"2025-05-15T13:07:01.747+08:00\", \"pending\": 0, \"lag\": 0, \"done\": 0, \"failed\": 0, \"current\": {}}\n2025-05-15 13:07:33,353 INFO     19 172.21.0.6 - - [15/May/2025 13:07:33] \"POST /v1/document/list?kb_id=4250e17230b511f0bcf3a63c07dbe2b5&keywords=&page_size=10&page=1 HTTP/1.1\" 200 -\n2025-05-15 13:07:33,358 INFO     19 172.21.0.6 - - [15/May/2025 13:07:33] \"POST /v1/document/run HTTP/1.1\" 200 -\n2025-05-15 13:07:33,404 INFO     19 172.21.0.6 - - [15/May/2025 13:07:33] \"POST /v1/document/list?kb_id=4250e17230b511f0bcf3a63c07dbe2b5&keywords=&page_size=10&page=1 HTTP/1.1\" 200 -\n2025-05-15 13:07:35,232 INFO     19 172.21.0.6 - - [15/May/2025 13:07:35] \"POST /v1/document/list?kb_id=4250e17230b511f0bcf3a63c07dbe2b5&keywords=&page_size=10&page=1 HTTP/1.1\" 200 -\n2025-05-15 13:07:35,253 ERROR    19 Fail to get 4250e17230b511f0bcf3a63c07dbe2b5/2305.08428v1.pdf\nTraceback (most recent call last):\n  File \"/ragflow/rag/utils/minio_conn.py\", line 88, in get\n    r = self.conn.get_object(bucket, filename)\n  File \"/ragflow/.venv/lib/python3.10/site-packages/minio/api.py\", line 1244, in get_object\n    return self._execute(\n  File \"/ragflow/.venv/lib/python3.10/site-packages/minio/api.py\", line 437, in _execute\n    region = self._get_region(bucket_name)\n  File \"/ragflow/.venv/lib/python3.10/site-packages/minio/api.py\", line 494, in _get_region\n    response = self._url_open(\n  File \"/ragflow/.venv/lib/python3.10/site-packages/minio/api.py\", line 423, in _url_open\n    raise response_error\nminio.error.S3Error: S3 operation failed; code: InvalidRequest, message: Invalid Request (invalid hostname), resource: /4250e17230b511f0bcf3a63c07dbe2b5, request_id: 183F9B0BC27BECD6, host_id: dd9025bab4ad464b049177c95eb6ebf374d3b3fd1af9251148b658df7ac2e3e8\n2025-05-15 13:07:36,254 ERROR    19 total_page_number\nTraceback (most recent call last):\n  File \"/ragflow/deepdoc/parser/pdf_parser.py\", line 995, in total_page_number\n    pdf = pdfplumber.open(\n  File \"/ragflow/.venv/lib/python3.10/site-packages/pdfplumber/pdf.py\", line 86, in open\n    stream = open(path_or_fp, \"rb\")\nFileNotFoundError: [Errno 2] No such file or directory: '2305.08428v1.pdf'\n2025-05-15 13:07:36,257 ERROR    19 '<' not supported between instances of 'NoneType' and 'int'\nTraceback (most recent call last):\n  File \"/ragflow/api/apps/document_app.py\", line 427, in run\n    queue_tasks(doc, bucket, name, 0)\n  File \"<@beartype(api.db.services.task_service.queue_tasks) at 0x7fa79f079090>\", line 88, in queue_tasks\n  File \"/ragflow/api/db/services/task_service.py\", line 330, in queue_tasks\n    e = min(e - 1, pages)\nTypeError: '<' not supported between instances of 'NoneType' and 'int'\n2025-05-15 13:07:36,260 INFO     19 172.21.0.6 - - [15/May/2025 13:07:36] \"POST /v1/document/run HTTP/1.1\" 200 -\n2025-05-15 13:07:41,703 INFO     19 172.21.0.6 - - [15/May/2025 13:07:41] \"POST /v1/user/setting HTTP/1.1\" 200 -\n2025-05-15 13:07:41,751 INFO     19 172.21.0.6 - - [15/May/2025 13:07:41] \"GET /v1/user/info HTTP/1.1\" 200 -\n2025-05-15 13:07:43,699 INFO     19 172.21.0.6 - - [15/May/2025 13:07:43] \"POST /v1/document/list?kb_id=4250e17230b511f0bcf3a63c07dbe2b5&keywords=&page_size=10&page=1 HTTP/1.1\" 200 -\n2025-05-15 13:07:43,723 ERROR    19 Fail to get 4250e17230b511f0bcf3a63c07dbe2b5/2305.08428v1.pdf\nTraceback (most recent call last):\n  File \"/ragflow/rag/utils/minio_conn.py\", line 88, in get\n    r = self.conn.get_object(bucket, filename)\n  File \"/ragflow/.venv/lib/python3.10/site-packages/minio/api.py\", line 1244, in get_object\n    return self._execute(\n  File \"/ragflow/.venv/lib/python3.10/site-packages/minio/api.py\", line 437, in _execute\n    region = self._get_region(bucket_name)\n  File \"/ragflow/.venv/lib/python3.10/site-packages/minio/api.py\", line 494, in _get_region\n    response = self._url_open(\n  File \"/ragflow/.venv/lib/python3.10/site-packages/minio/api.py\", line 423, in _url_open\n    raise response_error\nminio.error.S3Error: S3 operation failed; code: InvalidRequest, message: Invalid Request (invalid hostname), resource: /4250e17230b511f0bcf3a63c07dbe2b5, request_id: 183F9B0DBB54B4B4, host_id: dd9025bab4ad464b049177c95eb6ebf374d3b3fd1af9251148b658df7ac2e3e8\n2025-05-15 13:07:44,724 ERROR    19 total_page_number\nTraceback (most recent call last):\n  File \"/ragflow/deepdoc/parser/pdf_parser.py\", line 995, in total_page_number\n    pdf = pdfplumber.open(\n  File \"/ragflow/.venv/lib/python3.10/site-packages/pdfplumber/pdf.py\", line 86, in open\n    stream = open(path_or_fp, \"rb\")\nFileNotFoundError: [Errno 2] No such file or directory: '2305.08428v1.pdf'\n2025-05-15 13:07:44,725 ERROR    19 '<' not supported between instances of 'NoneType' and 'int'\nTraceback (most recent call last):\n  File \"/ragflow/api/apps/document_app.py\", line 427, in run\n    queue_tasks(doc, bucket, name, 0)\n  File \"<@beartype(api.db.services.task_service.queue_tasks) at 0x7fa79f079090>\", line 88, in queue_tasks\n  File \"/ragflow/api/db/services/task_service.py\", line 330, in queue_tasks\n    e = min(e - 1, pages)\nTypeError: '<' not supported between instances of 'NoneType' and 'int'\n2025-05-15 13:07:44,729 INFO     19 172.21.0.6 - - [15/May/2025 13:07:44",
      "state": "open",
      "author": "hecongqing",
      "author_type": "User",
      "created_at": "2025-05-15T05:09:38Z",
      "updated_at": "2025-05-28T15:06:56Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7660/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7660",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7660",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:27.621757",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHello @hecongqing! I'm [Dosu](https://dosu.dev), your friendly bot here to help you with bugs, answer questions, and guide you on your journey to becoming a contributor. I'm here while you wait for a human maintainer. Let's tackle this together! 🤖\n\n<!-- Answer -->\nI found a similar",
          "created_at": "2025-05-15T05:14:38Z"
        },
        {
          "author": "hecongqing",
          "body": "I already pull the 'nightly' version, RAGFLOW_IMAGE=infiniflow/ragflow:nightly-slim",
          "created_at": "2025-05-15T05:19:42Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Please check the `minio` part in `service_conf.yaml`.",
          "created_at": "2025-05-16T02:56:39Z"
        },
        {
          "author": "prettyprettyboy",
          "body": "the same question",
          "created_at": "2025-05-28T15:06:55Z"
        }
      ]
    },
    {
      "issue_number": 4884,
      "title": "[Question]: Cannot import VolcEngine's doubao-embedding-vision",
      "body": "### Describe your problem\n\n![Image](https://github.com/user-attachments/assets/568d2bf4-eacf-4e39-93b3-fc5cea48e46d)The image shows the parameters I imported, and the error message is in the upper right corner.",
      "state": "open",
      "author": "yelishuang",
      "author_type": "User",
      "created_at": "2025-02-11T14:51:10Z",
      "updated_at": "2025-05-28T14:05:13Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/4884/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/4884",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/4884",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:27.849577",
      "comments": [
        {
          "author": "gbm777",
          "body": "same issue.",
          "created_at": "2025-03-18T16:31:59Z"
        },
        {
          "author": "SeanWang918",
          "body": "same issue.",
          "created_at": "2025-05-28T14:05:12Z"
        }
      ]
    },
    {
      "issue_number": 7919,
      "title": "[Question]:",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nHello, I deployed ragflow using docker compose before, using the image infiniflow/ragflow:v0.17.2-slim. However, in order to disable the registration function on its page, I had to change RAGFLOW_IMAGE=infiniflow/ragflow:v0.19.0-slim in the .env file. Then I executed docker compose down and continued to execute docker compose up -d. I found that the previous account prompted that the user could not log in. It seems that all the data in the database is gone. I don’t know what’s going on. Is there a solution?",
      "state": "open",
      "author": "corepot",
      "author_type": "User",
      "created_at": "2025-05-28T10:09:14Z",
      "updated_at": "2025-05-28T10:19:55Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7919/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7919",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7919",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:28.020116",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe data loss you experienced is most likely due to how Docker volumes are handled when restarting containers. When you run docker compose down (especially with the -v flag), Docker removes the containers and their associated volumes, which deletes all data stored in those volumes—in",
          "created_at": "2025-05-28T10:13:33Z"
        },
        {
          "author": "corepot",
          "body": "@dosu I just used the docker compose down command without adding -v\n",
          "created_at": "2025-05-28T10:15:51Z"
        }
      ]
    },
    {
      "issue_number": 5589,
      "title": "[Question]: I encountered an issue where the installation of pyicu==2.14 failed when I was running `uv sync --python 3.10 --all-extras`.",
      "body": "### Describe your problem\n\nI encountered an issue where the installation of pyicu==2.14 failed when I was running `uv sync --python 3.10 --all-extras`.\n\n![Image](https://github.com/user-attachments/assets/7198133e-5831-4e3c-9792-2b5a82ed96e7)",
      "state": "open",
      "author": "15003587050",
      "author_type": "User",
      "created_at": "2025-03-04T03:58:58Z",
      "updated_at": "2025-05-28T09:57:58Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 7,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/5589/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/5589",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/5589",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:28.267124",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "The error \"Failed to build pyicu==2.14\" typically occurs due to missing dependencies, compiler issues, or incorrect environment configurations. Here are the steps to resolve it:\nInstall Required Dependencies: Ensure that pkg-config and ICU libraries are installed. On macOS, you can use Homebrew:\n```",
          "created_at": "2025-03-05T02:18:31Z"
        },
        {
          "author": "mc-xm",
          "body": "In Windows environment you can resolve with this method\n访问 [ICU 官方发布页](https://github.com/unicode-org/icu/releases)，找到最新稳定版（如 icu4c-XX.X.X），                                  下载以下文件：文件名示例：icu4c-73_2-Win64-MSVC.zip）                                                                                       ",
          "created_at": "2025-04-28T06:53:15Z"
        },
        {
          "author": "amscosta",
          "body": "How about linux ? How to solve the issue?",
          "created_at": "2025-05-02T18:09:24Z"
        },
        {
          "author": "DestinyJayE",
          "body": "> How about linux ? How to solve the issue?\nI encountered the same problem. Since my ICU version was outdated (58.2 on Ubuntu), I decided to manually install the latest version (76.1). This fixed the issue.",
          "created_at": "2025-05-06T08:46:20Z"
        },
        {
          "author": "mc-xm",
          "body": "> How about linux ? How to solve the issue?\n\nsudo apt-get install libicu-dev",
          "created_at": "2025-05-23T07:36:47Z"
        }
      ]
    },
    {
      "issue_number": 7888,
      "title": "[Question]: Is demo still working",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\ncan not login demo successfully",
      "state": "closed",
      "author": "JJ-H",
      "author_type": "User",
      "created_at": "2025-05-27T08:36:19Z",
      "updated_at": "2025-05-28T09:17:26Z",
      "closed_at": "2025-05-28T09:17:26Z",
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 8,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7888/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7888",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7888",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:28.437670",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nBased on the information available, I could not find any recent documentation or issues confirming whether the RAGFlow demo is currently operational or experiencing a known outage. The login process in the demo uses standard authentication methods, including email/password and third-",
          "created_at": "2025-05-27T08:48:01Z"
        },
        {
          "author": "zhifeiyue",
          "body": "can not login demo since yesterday",
          "created_at": "2025-05-28T02:06:39Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Still there. How do you login?\n",
          "created_at": "2025-05-28T03:37:25Z"
        },
        {
          "author": "JJ-H",
          "body": "google、github and manual registration not work",
          "created_at": "2025-05-28T03:47:49Z"
        },
        {
          "author": "ZhenhangTung",
          "body": "@JJ-H @zhifeiyue could you share screenshots? Or registration email?",
          "created_at": "2025-05-28T07:01:15Z"
        }
      ]
    },
    {
      "issue_number": 2079,
      "title": "[Question]: bad escape issue",
      "body": "### Describe your problem\n\nIn demo ragflow everytime I use the agent templates and run it, the first response goes well but later responses output is \" bad escape\"\r\n![Screenshot_20240823-220135_Chrome](https://github.com/user-attachments/assets/b6620ee7-1f51-45de-ad7f-5f0644d25d4d)\r\n",
      "state": "open",
      "author": "cotaa956",
      "author_type": "User",
      "created_at": "2024-08-23T19:07:39Z",
      "updated_at": "2025-05-28T08:50:36Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/2079/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "guoyuhao2330"
      ],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/2079",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/2079",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:28.667888",
      "comments": [
        {
          "author": "guoyuhao2330",
          "body": "\r\n![image](https://github.com/user-attachments/assets/f8b81b42-cd43-4d73-bf4e-b2e1cb45f15d)\r\n\r\nSorry I can't reproduce this bug, can you provide more details?\r\n",
          "created_at": "2024-08-26T09:09:38Z"
        },
        {
          "author": "jjohare",
          "body": "I get this a lot TBH. Seems like it's a ChatGPT 4o mini issue, (for me) in SOME models of accuracy of response, but not others.\r\nFrom the logs.\r\n{\"0\": \"bad escape \\\\u at position 7884 (line 105, column 34)\"}}}}, \"downstream\": [\"Answer:PoorMapsCover\"], \"upstream\": [\"DuckDuckGo:SoftButtonsRefuse\", \"Wi",
          "created_at": "2024-08-26T11:13:50Z"
        },
        {
          "author": "cotaa956",
          "body": "> ![image](https://private-user-images.githubusercontent.com/43509927/361379731-f8b81b42-cd43-4d73-bf4e-b2e1cb45f15d.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MjQ4NjkyMzAsIm5iZiI6MTcyNDg2ODkzMCwicG",
          "created_at": "2024-08-28T18:23:23Z"
        },
        {
          "author": "snowffer",
          "body": "I met with the same issue",
          "created_at": "2025-05-28T08:50:35Z"
        }
      ]
    },
    {
      "issue_number": 1727,
      "title": "[Bug]: `bad escape \\P at position 374 (line 18, column 23)` when using the graph feature",
      "body": "### Is there an existing issue for the same bug?\n\n- [X] I have checked the existing issues.\n\n### Branch name\n\nmain\n\n### Commit ID\n\nc943517\n\n### Other environment information\n\n```Markdown\nHardware: VMWare Workstation 16.2.3, Intel Xeon X5690 (6 threads assigned), 24GB RAM assigned, No available GPU\r\nOS Type: Ubuntu Server 24.04 LTS\n```\n\n\n### Actual behavior\n\nFlow of the graph crashed at node `retrieval-windows` and responds error `bad escape \\P at position 374 (line 18, column 23)` after a Retrieval node. The graph is shown in the picture:\r\n![图片](https://github.com/user-attachments/assets/1a8dcc14-46d1-417c-aaa9-e875debddcad)\r\nNode `retrieval-windows` has following settings: \r\n\r\n(other categories are omitted as those categories and related nodes are running fine.)\r\n```\r\nName: Windows\r\nDescription: 问题中包含Windows字样或一个Windows版本。\r\nExamples:\r\nWindows\r\nWindows Server\r\nWindows 11\r\nWindows 10\r\nWindows 7\r\nWindows Vista\r\nWindows XP\r\nXP系统\r\nTo: retrieval-windows\r\n```\r\n\r\nThe generate node `LovelyTipsCall` is using qwen-plus model.\r\n\r\nThere is no meaningful information given in the log.\r\n\r\nI'm really sorry, but the document to be used to generate the knowledge database for this graph, and probably the sliced content is not allowed to be distributed according to its copyright claims.\n\n### Expected behavior\n\nFlow of the graph continues to run and reply the final result in the chat window.\n\n### Steps to reproduce\n\n```Markdown\nBuild a similar graph and run.\n```\n\n\n### Additional information\n\nThis is probably caused by some kind of strange characters in either the source document or sliced results ?",
      "state": "open",
      "author": "Randname666",
      "author_type": "User",
      "created_at": "2024-07-27T13:00:37Z",
      "updated_at": "2025-05-28T06:46:27Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/1727/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/1727",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/1727",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:30.690087",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "Why are there 2 'generate', if you don't mind?",
          "created_at": "2024-07-29T01:54:59Z"
        },
        {
          "author": "guoyuhao2330",
          "body": "![image](https://github.com/user-attachments/assets/5da762f8-dd8c-40a5-a8cb-10f74c364820)\r\nSorry I can't reproduce this bug, maybe your question contains special characters that cause the bug, please provide more details, and you need to use one 'Answer' to implement the loop.",
          "created_at": "2024-07-29T02:24:33Z"
        },
        {
          "author": "Randname666",
          "body": "> Why are there 2 'generate', if you don't mind?\r\n\r\nLayout recognition feature doesn't work very well for the document using here and it scrambles the text all over the place, especially when a paragraph is composed with both Chinese and English content. \r\n\r\nE.g. `数据库、用户移植对象之前，一般SQ应L 先迁P移L数/S据QL 库、用",
          "created_at": "2024-08-01T09:28:21Z"
        },
        {
          "author": "yuzhichang",
          "body": "Cannot reproduce.",
          "created_at": "2024-11-29T01:40:50Z"
        },
        {
          "author": "TeslaZY",
          "body": "When the upstream of the template component is an arxiv component, the input of the template component is:{\ncontent: {\n0: \"Title: Equilibrium properties of the Ising frustrated lattice gas Pdf_Url: <a href=\"http://arxiv.or...\"\n1: \"Title: Metastable Ultracondensed Solid Hydrogenous Materials Pdf_Url:",
          "created_at": "2025-05-28T06:45:02Z"
        }
      ]
    },
    {
      "issue_number": 7898,
      "title": "[Question]: What the library pyicu use for?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nIt's my device's problem that I can't update my icu's version which mean I was unable to install the pyicu library, but I can't find the usage of pyicu in this project?",
      "state": "closed",
      "author": "Rama-19",
      "author_type": "User",
      "created_at": "2025-05-28T02:01:45Z",
      "updated_at": "2025-05-28T06:16:49Z",
      "closed_at": "2025-05-28T06:16:15Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7898/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7898",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7898",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:30.918067",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nPyICU is a Python library that provides bindings for the International Components for Unicode (ICU) library, which is widely used for Unicode support, text processing, and internationalization tasks such as collation (sorting), transliteration, and locale-aware string handling.\n\nIn t",
          "created_at": "2025-05-28T02:04:07Z"
        },
        {
          "author": "KevinHuSh",
          "body": "[Here](https://github.com/infiniflow/ragflow/issues?q=is%3Aissue%20state%3Aopen%20pyicu).",
          "created_at": "2025-05-28T03:29:22Z"
        },
        {
          "author": "Rama-19",
          "body": "> [Here](https://github.com/infiniflow/ragflow/issues?q=is%3Aissue%20state%3Aopen%20pyicu).\n\nthank you",
          "created_at": "2025-05-28T06:16:48Z"
        }
      ]
    },
    {
      "issue_number": 7882,
      "title": "[Question]: I cannot open the link referenced by the Knowledge Base",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nWhen I ask a question, the answer contains data from the knowledge base and provides a knowledge base reference, but I can't open the reference link\n![Image](https://github.com/user-attachments/assets/4de25814-5e69-48c6-9dde-4b66a1ff2efd)\n![Image](https://github.com/user-attachments/assets/c4823b48-6415-4db4-b9ab-8298d803c3fd)",
      "state": "closed",
      "author": "michaelbennn",
      "author_type": "User",
      "created_at": "2025-05-27T06:23:08Z",
      "updated_at": "2025-05-28T05:49:32Z",
      "closed_at": "2025-05-28T05:49:32Z",
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7882/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7882",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7882",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:31.104322",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @michaelbennn! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nBased on your description and the screenshots, the issue with not being able to open the Knowledge Base reference link could be due to several factors:\n\n1. **Configuration S",
          "created_at": "2025-05-27T06:29:42Z"
        },
        {
          "author": "KevinHuSh",
          "body": "`CSV` file does not support previewing for the time being.",
          "created_at": "2025-05-28T03:45:47Z"
        }
      ]
    },
    {
      "issue_number": 7778,
      "title": "[Feature Request]: helm chart for production installation",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\nHi team,\n\nI've found there is a [helm](https://github.com/infiniflow/ragflow/tree/main/helm) folder, however, it's not supported to do some customizations based on the end users requirement, for example, like [higress did](https://github.com/alibaba/higress/blob/main/helm/core/templates/service.yaml#L13), it would be great if we could support to define the service annotation / port mapping.\n\nOtherwise it would need additional effort from end users to install it for production use.\n```\n\n### Describe the feature you'd like\n\nMake the helm chart as production installation default option and provide some options / adjust the configuration based on the production requirements, e.g. allow to define S3 rather than minio since it would be more stable for prod use.\n\n\n### Describe implementation you've considered\n\nReferences like higress chart: https://github.com/alibaba/higress/tree/main/helm https://github.com/langfuse/langfuse-k8s/tree/main/charts/langfuse \n\n### Documentation, adoption, use case\n\n```Markdown\nA more user-friendly installation document is also necessary to new customers, otherwise it would be hard to try out this solution in the end users' internal environment.\n```\n\n### Additional information\n\nAnd also, ragflow couldn't be installed in Mac M1 Pro since it has an [issue](https://github.com/infiniflow/infinity/issues/1720) in infinity, which also makes it inconvenient to do the feature testing.",
      "state": "open",
      "author": "Colstuwjx",
      "author_type": "User",
      "created_at": "2025-05-21T11:45:52Z",
      "updated_at": "2025-05-28T05:08:43Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7778/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7778",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7778",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:31.478235",
      "comments": [
        {
          "author": "ZhenhangTung",
          "body": "@Colstuwjx Thanks for raising this—I'm actively looking into it.\nOther developers have also mentioned the challenges of setting up RAGFlow for production environments. I’m planning to investigate and improve this area.\nAs part of that, may I ask which cloud provider your team is planning to deploy t",
          "created_at": "2025-05-23T03:25:41Z"
        },
        {
          "author": "Colstuwjx",
          "body": "Hi @ZhenhangTung , I'm using aws cloud as our cloud provider, and also it would be great if we could align with the standard like langfuse: https://github.com/langfuse/langfuse-k8s/blob/main/charts/langfuse/values.yaml , I think its chart is pretty comprehensive.\n\nThanks.\n",
          "created_at": "2025-05-23T04:31:41Z"
        },
        {
          "author": "ZhenhangTung",
          "body": "@Colstuwjx Thanks for the reference. Will talk to our eng team about it. Would you like contributing to this feature if you have some time? ",
          "created_at": "2025-05-26T03:46:14Z"
        },
        {
          "author": "tpural",
          "body": "I'm also looking for an easier way to run Ragflow in production. I was able to get v0.17 running a few months ago, but my solution was extremely hacky since we wanted to use Postgres and Azure Blob, which weren’t configurable via Helm at the time. I ended up deleting the unused Helm templates (for M",
          "created_at": "2025-05-28T05:08:42Z"
        }
      ]
    },
    {
      "issue_number": 7872,
      "title": "[Feature Request]: use different redis queue and task_limiter for different tasks",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\ngraphrag task block normal chunk task.\n```\n\n### Describe the feature you'd like\n\nThere are currently three different types of tasks: chunk, raptor, and graphrag. Each takes a different amount of time to complete and they have dependency relationships in sequence. However, all three types of tasks are currently passed through the same Redis queue and share the same task_limiter for concurrency control.\n\nBecause graphrag tasks are particularly time-consuming and cannot be executed concurrently within the same knowledge base (KB), the current approach is to reduce the task limiter's capacity when a graphrag task is received, in order to restrict the number of concurrent tasks.\n\nHowever, this approach has two problems:\n1.Existing tasks cannot be canceled. In actual tests, even with a single worker, there are still 5 graphrag tasks waiting in the queue.\n2.graphrag tasks occupy all the available task slots, preventing new, lightweight chunk tasks from being executed — even though they are not time-consuming.\n\n\n\n### Describe implementation you've considered\n\nSeparate the graphrag  , raptor and chunk tasks into different Redis queues, and use different task_limiter instances to control them independently.\n\n\n\n\n\n\n\n\n\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "sinopec",
      "author_type": "User",
      "created_at": "2025-05-27T02:28:40Z",
      "updated_at": "2025-05-28T04:27:37Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7872/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7872",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7872",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:31.725159",
      "comments": [
        {
          "author": "ZhenhangTung",
          "body": "@sinopec Thanks for the proposal. Will discuss with our eng team. ",
          "created_at": "2025-05-28T04:27:36Z"
        }
      ]
    },
    {
      "issue_number": 7884,
      "title": "[Feature Request]: Use specialized graph databases such as Neo4j to manage and store knowledge graphs and related content.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Is your feature request related to a problem?\n\n```Markdown\nThe current knowledge graph parsing and merging process is slow and not file-parallelized. The locking granularity is at the entire knowledge base level. When parsing a knowledge graph for a single file and merging it into the knowledge base, the whole knowledge base must be locked, which severely affects the processing speed of GraphRAG. A large number of pending GraphRAG tasks block other tasks, such as chunk processing, from getting execution opportunities.\n```\n\n### Describe the feature you'd like\n\nUse specialized graph databases like Neo4j instead of Elasticsearch to manage knowledge graphs, improving speed and parallelism while minimizing the use of Redis locks that lock the entire knowledge base.\n\n### Describe implementation you've considered\n\nLeverage features provided by graph databases like Neo4j, such as CREATE, MERGE, and transaction commits, to delegate concurrency control and locking overhead to the database itself. This approach aims to maximize file-level parallelism during parsing, improve parsing speed, and avoid global locks as much as possible. At the same time, it helps reduce the read/write load on the Elasticsearch database.\n\n### Documentation, adoption, use case\n\n```Markdown\n\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "sinopec",
      "author_type": "User",
      "created_at": "2025-05-27T06:41:33Z",
      "updated_at": "2025-05-28T04:26:39Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7884/reactions",
        "total_count": 5,
        "+1": 5,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7884",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7884",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:31.898793",
      "comments": [
        {
          "author": "emocat17",
          "body": "Yes, it is indeed a demand in this regard. I also want this.\n\nMoreover, the extracted entities and relationships can be customized, edited and modified in `Neo4j`, which is very convenient.\nIn the code sample of [LightRAG](https://github.com/HKUDS/LightRAG/blob/main/examples/graph_visual_with_neo4j.",
          "created_at": "2025-05-28T04:03:33Z"
        },
        {
          "author": "ZhenhangTung",
          "body": "@sinopec @emocat17 hey guys, thanks for raising this discussion. Will do some investigations and come back to you guys for further details. ",
          "created_at": "2025-05-28T04:26:38Z"
        }
      ]
    },
    {
      "issue_number": 7890,
      "title": "[Question]: I propose a phrase, and I want to prioritize matching text blocks that are exactly the same as the phrase.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\n I propose a phrase, and I want to prioritize matching text blocks that are exactly the same as the phrase.",
      "state": "open",
      "author": "toukuiPoppy",
      "author_type": "User",
      "created_at": "2025-05-27T09:07:13Z",
      "updated_at": "2025-05-28T04:24:14Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question",
        "💞 feature"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7890/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7890",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7890",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:32.118128",
      "comments": [
        {
          "author": "ZhenhangTung",
          "body": "@toukuiPoppy Could you give us more details? Screenshots will also help. Thx.",
          "created_at": "2025-05-28T04:24:13Z"
        }
      ]
    },
    {
      "issue_number": 7879,
      "title": "[Bug]: KeyError: 'method' still  occurred with v0.19.0 version",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n6ca1aef5\n\n### RAGFlow image version\n\nv0.19.0\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nWhen uploading pdf files and parsing them, I always encounter this error as below. \n\n![Image](https://github.com/user-attachments/assets/063ce2cc-931a-4628-9ca3-960291c2947b)\n\n![Image](https://github.com/user-attachments/assets/084ca1c5-6263-498d-ae47-b6220aa92120)\n\nI have read your previous solution for similar problems, but it seems that the problem still exists\n\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\n1. upload and parse the pdf files\n2. check task_exector.log\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "unmurphy",
      "author_type": "User",
      "created_at": "2025-05-27T05:45:20Z",
      "updated_at": "2025-05-28T03:46:42Z",
      "closed_at": "2025-05-28T03:46:42Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7879/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7879",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7879",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:32.282531",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe `KeyError: 'method'` occurs because the backend code in `run_graphrag` directly accesses `row['kb_parser_config']['graphrag']['method']` without checking if the `method` key exists. If the `method` key is missing from the configuration, this will raise a KeyError. This is consist",
          "created_at": "2025-05-27T05:49:16Z"
        },
        {
          "author": "unmurphy",
          "body": "method字段似乎在parser_config里面，这parser_config和kb_parser_config 有啥区别",
          "created_at": "2025-05-27T06:01:28Z"
        }
      ]
    },
    {
      "issue_number": 7634,
      "title": "[Question]: ERROR: Connection error caused by: ConnectionError(Connection error caused by: NewConnectionError(<urllib3.connection.HTTPConnection object at 0x7f4dab71bdf0>: Failed to establish a new connection: [Errno 111] Connection refused))",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nHow to resolve this error in chat?",
      "state": "closed",
      "author": "mff-a11y",
      "author_type": "User",
      "created_at": "2025-05-14T03:19:06Z",
      "updated_at": "2025-05-28T03:14:48Z",
      "closed_at": "2025-05-14T03:43:31Z",
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7634/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7634",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7634",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:32.522830",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHello @mff-a11y! I'm [Dosu](https://dosu.dev), your friendly bot here to help you solve bugs, answer questions, and assist you in becoming a contributor. I'm here while you wait for a human maintainer. Let's tackle this issue together!\n\n<!-- Answer -->\nTo resolve the connection err",
          "created_at": "2025-05-14T03:21:43Z"
        },
        {
          "author": "mff-a11y",
          "body": "> Hello [@mff-a11y](https://github.com/mff-a11y)! I'm [Dosu](https://dosu.dev), your friendly bot here to help you solve bugs, answer questions, and assist you in becoming a contributor. I'm here while you wait for a human maintainer. Let's tackle this issue together!\n> \n> To resolve the connection ",
          "created_at": "2025-05-14T03:46:08Z"
        },
        {
          "author": "Hirro029",
          "body": "Which model caused the error, and do you have a screenshot with the specific configuration?",
          "created_at": "2025-05-28T03:14:47Z"
        }
      ]
    },
    {
      "issue_number": 7854,
      "title": "[Bug]: chunk missing in presentation method",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n94181a9\n\n### RAGFlow image version\n\nI deploy ragflow through the source code(v0.18.0) instead of the image.\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\n![Image](https://github.com/user-attachments/assets/9fadeb1c-f0c8-462e-8d73-71d890ff84e6)\n\nI uploaded a 13 pages pdf，and the chunk method is presentation.\nAs shown in the screenshot，there's a chunk missing.\n\nAnyone knows why?\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nI cannot provide the pdf due to company's policy.\n\n1. Upload the 13 pages pdf\n2. Change the chunk method to presentation\n3. Finish the parsing\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "nevergone123",
      "author_type": "User",
      "created_at": "2025-05-26T07:31:48Z",
      "updated_at": "2025-05-28T02:39:36Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7854/reactions",
        "total_count": 2,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 1
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7854",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7854",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:32.763533",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nBased on the code and documentation for the presentation chunk method, each page of a PDF should be treated as a separate chunk, with its thumbnail stored. The chunking process for PDFs relies on the `Pdf` class, which extracts text from each page and filters out \"garbage\" text (such",
          "created_at": "2025-05-26T07:46:25Z"
        },
        {
          "author": "nevergone123",
          "body": "The missing chunk is related to  page 2 / page 3，the ocr result of both is the same.\n\nHowever, if I decrease the pdf to only 4 pages，there is no chunk missing.",
          "created_at": "2025-05-26T08:54:36Z"
        },
        {
          "author": "Woody-Hu",
          "body": "the chunk id is from\n`       d[\"id\"] = xxhash.xxh64((chunk[\"content_with_weight\"] + str(d[\"doc_id\"])).encode(\"utf-8\")).hexdigest() `\nwhich means the same \"content_with_weight\" will lead the same chunk id (the same chunk)",
          "created_at": "2025-05-28T02:39:35Z"
        }
      ]
    },
    {
      "issue_number": 7861,
      "title": "[Bug]: a 300MB .docx file has succeeded uploaded, but analysed failed",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n590b9da\n\n### RAGFlow image version\n\nv0.18.0 full\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nerror appers when analyse a big file\n![Image](https://github.com/user-attachments/assets/d97d99b0-12ea-4c94-8a21-6723991f3bc5)\n\nand here are my configs\n![Image](https://github.com/user-attachments/assets/556ca9fd-e783-4bf9-938e-40275da63be7)\n![Image](https://github.com/user-attachments/assets/6b183cf0-ab8b-40de-9bbd-ebd1b3228e2e)\n![Image](https://github.com/user-attachments/assets/cd7705dc-50bb-4a28-8c5a-f326760cdaab)\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nupload xxx.docx（300MB） and analyse it\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "541543262",
      "author_type": "User",
      "created_at": "2025-05-26T09:35:04Z",
      "updated_at": "2025-05-28T01:29:35Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7861/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7861",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7861",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:32.953425",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe failure to analyze your 300MB .docx file is most likely due to a file size limit in local RAGFlow deployments. While uploads may succeed, the actual analysis step enforces a 128MB file size limit, which matches the error you encountered. This is a known constraint in the current ",
          "created_at": "2025-05-26T09:47:21Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Set up `MAX_CONTENT_LENGTH` in `.env`.",
          "created_at": "2025-05-27T03:15:29Z"
        },
        {
          "author": "541543262",
          "body": "I change it like :\nMX_CONTENT_LENGTH=1073741824\nand error changes：\n\n![Image](https://github.com/user-attachments/assets/0d4698c2-e40c-426a-99ae-23d1cb2ac150)",
          "created_at": "2025-05-28T01:29:34Z"
        }
      ]
    },
    {
      "issue_number": 2104,
      "title": "[Question]: How to use our own OCR model API for other languages",
      "body": "### Describe your problem\n\nIt's a great job. We intend to use ragflow on other languages, like Japanese or Korean documents. But after testing deepdoc, it performs well on English and Chinese, but not so excellent on other languages. So we are planning to use our own OCR model API, what code changes are needed please? This question may be a bit complicated, thanks in advance",
      "state": "closed",
      "author": "guijuzhejiang",
      "author_type": "User",
      "created_at": "2024-08-27T01:47:02Z",
      "updated_at": "2025-05-27T14:52:58Z",
      "closed_at": "2024-08-27T07:36:17Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/2104/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/2104",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/2104",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:33.183325",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "Please refer to deepdoc/vision/ocr.py",
          "created_at": "2024-08-27T01:50:25Z"
        }
      ]
    },
    {
      "issue_number": 6397,
      "title": "[Bug]: Cannot retrieve the external knowledgebase on ragflow from dify",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nv0.17.2\n\n### RAGFlow image version\n\nv0.17.2\n\n### Other environment information\n\n```Markdown\nragflow: 0.17.2\ndify: 0.15.3, 1.1.1\n```\n\n### Actual behavior\n\ni use the `api/v1/dify` to connect the ragflow knowledgebase as external knowledgebase on dify, then have a retrieval test against the external knowledgebase but nothing returned.\n\n<img width=\"777\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/06ded50c-33a7-44eb-9fe4-d164ae3ee026\" />\n\nFrom the logs of ragflow server,  it reports 404: \"POST /api/v1/dify/retrieval HTTP/1.1\" 404\n\n<img width=\"790\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/552a3215-7bf6-4da2-9c5a-dcc3c1629b6c\" />\n\n### Expected behavior\n\ncan retrieve data from the knowledgebase on ragflow \n\n### Steps to reproduce\n\n```Markdown\n1. deploy dify 0.15.3\n2. deploy ragflow 0.17.2\n3. add ragflow as external knowledge api on dify\n4. copy the dataset id on ragflow and then establish an external knowledgebase on dify\n5. do retirval testing on the external knowledgebase\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "zengqingfu1442",
      "author_type": "User",
      "created_at": "2025-03-21T08:08:07Z",
      "updated_at": "2025-05-27T14:14:09Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 13,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/6397/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/6397",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/6397",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:33.387053",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "What about switching the  port number to 9380?",
          "created_at": "2025-03-21T09:34:06Z"
        },
        {
          "author": "zengqingfu1442",
          "body": "> What about switching the port number to 9380?\n\nChange the port of ragflow from 8080 to 9380?",
          "created_at": "2025-03-21T10:24:44Z"
        },
        {
          "author": "zengqingfu1442",
          "body": "> What about switching the port number to 9380?\n\nI tried to change the port to 9380, but it still not work, nothing returned in retrieval testing.\n\n<img width=\"857\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/76b9bdf4-4769-4cdf-8820-73d2796bb87b\" />\n\n![Image](https://github.com/user-",
          "created_at": "2025-03-21T10:56:22Z"
        },
        {
          "author": "zengqingfu1442",
          "body": "I find that it usually(near 90%+) reached the max retries(3).",
          "created_at": "2025-03-23T08:03:42Z"
        },
        {
          "author": "skywalkerfmc",
          "body": "maybe you should open the ragflow port in your dify config",
          "created_at": "2025-03-25T09:15:32Z"
        }
      ]
    },
    {
      "issue_number": 7584,
      "title": "[Bug]: run a general purpose agent，responses \"ERROR: Can't inference the where the component input is. Please identify whose output is this component's input.\"",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n26d3480e\n\n### RAGFlow image version\n\n v0.18.0-76-g27ffc0ed full\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nruns a general purpose agent（just copy from template. ask question about weather)， it response \"ERROR: Can't inference the where the component input is. Please identify whose output is this component's input.\"\nbut this works well in localhost（browser and  ragflow are in same machine） , but fails if ragflow runs in other server.\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\n1. create an agent,just copy from the general purpose agent template\n2. run the agent\n3. input \"what is the weather today in shanghai \"\n4. it responses error\n\"ERROR: Can't inference the where the component input is. Please identify whose output is this component's input.\"\nhowever if ragflow and browser run in the same machine, this function works\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "bruce-wang518",
      "author_type": "User",
      "created_at": "2025-05-12T06:26:49Z",
      "updated_at": "2025-05-27T13:52:12Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7584/reactions",
        "total_count": 3,
        "+1": 3,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7584",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7584",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:33.583807",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHello @bruce-wang518! I'm here to help you with bugs, answer questions, and assist you in becoming a contributor. While you wait for a human maintainer, feel free to share more details or ask anything!\n\n<!-- Answer -->\nI found a similar closed issue that might be relevant to your p",
          "created_at": "2025-05-12T06:29:03Z"
        },
        {
          "author": "bruce-wang518",
          "body": "I get the same error by the ragflow demo application, it may not an issue related to version. #\n\n<img width=\"1178\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/07f6f56d-9e2d-4c8f-8633-8d3a1f0ef7d7\" />\n\n",
          "created_at": "2025-05-13T03:53:58Z"
        },
        {
          "author": "DFRZYumu",
          "body": "Hey, Have you resolved this issue? I ran into the same problem in version v0.19.0 slim. This feature worked fine in version 0.15, but as I re-downloaded version 0.19, I ran into the same issue like you.",
          "created_at": "2025-05-27T13:26:40Z"
        }
      ]
    },
    {
      "issue_number": 7885,
      "title": "[Question]: What is the sequence of ragflow knowledge base retrieval? What is the principle?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nSuppose I raise a question that requires accessing different segmented contents from three knowledge libraries to retrieve. How does ragflow handle this problem and conduct the retrieval?",
      "state": "open",
      "author": "zhugh2333",
      "author_type": "User",
      "created_at": "2025-05-27T07:43:39Z",
      "updated_at": "2025-05-27T13:41:51Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 16,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7885/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7885",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7885",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:33.778798",
      "comments": [
        {
          "author": "zhugh2333",
          "body": "@dosubot",
          "created_at": "2025-05-27T07:46:03Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nHere’s how RAGFlow handles knowledge base retrieval and the principles behind it, especially when accessing segmented content from multiple knowledge libraries:\n\n**Sequence and Principle of Retrieval**\n\n1. **Retrieval and Generation**: RAGFlow operates on two main principles: retriev",
          "created_at": "2025-05-27T07:51:07Z"
        },
        {
          "author": "zhugh2333",
          "body": "Suppose the problem involves xx GPIOs and xx pwm channels, and there are three knowledge bases. Each knowledge base contains a corresponding chip knowledge manual, and the information related to GPIO and pwm in each manual is in a different chapter. How does ragflow handle such problems and what are",
          "created_at": "2025-05-27T07:54:58Z"
        },
        {
          "author": "zhugh2333",
          "body": "@dosubot",
          "created_at": "2025-05-27T07:55:14Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nHere’s how RAGFlow handles retrieval in scenarios like yours—where you have multiple knowledge bases (each a chip manual), and information about GPIOs and PWM channels is segmented into different chapters:\n\n**1. Document Parsing and Chunking**\n- When you upload chip manuals (PDF, DOC",
          "created_at": "2025-05-27T08:02:48Z"
        }
      ]
    },
    {
      "issue_number": 7893,
      "title": "[Bug]: Error -3 connecting to redis:6379",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n6ca1aef\n\n### RAGFlow image version\n\nv0.19.0 slim\n\n### Other environment information\n\n```Markdown\nUbuntu 24 lts\ni5 9400\n32gb ram\n\nUsing docker\n```\n\n### Actual behavior\n\n![Image](https://github.com/user-attachments/assets/3770ffb8-326f-42c3-a0e6-3c61fb9497b2)\n\nRedis is not connecting, \n\n### Expected behavior\n\nRedis working if no modifications to the installer were made \n\n### Steps to reproduce\n\n```Markdown\non ubuntu:\ninstall latest release according to docker install guide \nthen login and see error\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "mollo010",
      "author_type": "User",
      "created_at": "2025-05-27T11:10:36Z",
      "updated_at": "2025-05-27T11:26:47Z",
      "closed_at": "2025-05-27T11:26:45Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7893/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7893",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7893",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:34.005773",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @mollo010! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nYour error (`Error -3 connecting to redis:6379`) is most likely caused by a DNS resolution issue or a misconfiguration in the Docker environment. Here’s what you should check an",
          "created_at": "2025-05-27T11:14:56Z"
        },
        {
          "author": "mollo010",
          "body": "step 2 solved it ",
          "created_at": "2025-05-27T11:26:45Z"
        }
      ]
    },
    {
      "issue_number": 7880,
      "title": "[Question]: What is the current default database  and  differences between the infinity database and the current default database？",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nWhat is the current default database  and  differences between the infinity database and the current default database？",
      "state": "closed",
      "author": "zhugh2333",
      "author_type": "User",
      "created_at": "2025-05-27T05:46:46Z",
      "updated_at": "2025-05-27T05:54:36Z",
      "closed_at": "2025-05-27T05:54:35Z",
      "labels": [
        "🙋‍♀️ question",
        "♾️infinity"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7880/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7880",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7880",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:34.256012",
      "comments": [
        {
          "author": "zhugh2333",
          "body": "@dosubot",
          "created_at": "2025-05-27T05:47:53Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe current default database for vector storage in RAGFlow is Elasticsearch, which provides both full-text search and vector search capabilities. For conversation history and other relational data, MySQL is used by default, though PostgreSQL is also supported depending on configurati",
          "created_at": "2025-05-27T05:50:42Z"
        },
        {
          "author": "zhugh2333",
          "body": "Thank you for your answer",
          "created_at": "2025-05-27T05:54:35Z"
        }
      ]
    },
    {
      "issue_number": 7328,
      "title": "[Bug]: Exceptions from Trio nursery (10 sub-exceptions) -- Account abnormal. Please ensure it's on good standing to use QWen's",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n3569320\n\n### RAGFlow image version\n\nv0.18.0\n\n### Other environment information\n\n```Markdown\nLinux AMD64\n```\n\n### Actual behavior\n\n[ERROR][Exception]: Exceptions from Trio nursery (10 sub-exceptions) -- Account abnormal. Please ensure it's on good standing to use QWen's\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nUpload PDF and parse\n```\n\n### Additional information\n\nI have tested api key with\n\n```\nimport os\nfrom openai import OpenAI\n\nclient = OpenAI(\n    api_key=os.getenv(\"DASHSCOPE_API_KEY\"),  # 如果您没有配置环境变量，请在此处用您的API Key进行替换\n    base_url=\"https://dashscope.aliyuncs.com/compatible-mode/v1\"  # 百炼服务的base_url\n)\n\ncompletion = client.embeddings.create(\n    model=\"text-embedding-v3\",\n    input='衣服的质量杠杠的，很漂亮，不枉我等了这么久啊，喜欢，以后还来这里买',\n    dimensions=1024, # 指定向量维度（仅 text-embedding-v3 支持该参数）\n    encoding_format=\"float\"\n)\n\nprint(completion.model_dump_json())\n```\n\nIt returns normally. I don't know what's wrong with Qwen\n",
      "state": "open",
      "author": "kowyo",
      "author_type": "User",
      "created_at": "2025-04-25T17:32:40Z",
      "updated_at": "2025-05-27T05:40:58Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 11,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7328/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7328",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7328",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:34.466383",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe error message \"Account abnormal. Please ensure it's on good standing to use QWen's\" indicates that there might be an issue with the account status when using QWen's services through RAGFlow. This error is raised when the account associated with the API key is not in good standing",
          "created_at": "2025-04-25T17:34:52Z"
        },
        {
          "author": "kowyo",
          "body": "Similar isses https://github.com/infiniflow/ragflow/issues/5761",
          "created_at": "2025-04-25T17:35:12Z"
        },
        {
          "author": "kowyo",
          "body": "![Image](https://github.com/user-attachments/assets/f71005da-ce6f-4c1c-870d-823b779b0cd9)",
          "created_at": "2025-04-26T03:18:38Z"
        },
        {
          "author": "kowyo",
          "body": "    +---------------- 10 ----------------\n    | Traceback (most recent call last):\n    |   File \"/ragflow/rag/llm/embedding_model.py\", line 199, in encode\n    |     embds = [[] for _ in range(len(resp[\"output\"][\"embeddings\"]))]\n    | TypeError: 'NoneType' object is not subscriptable\n    |\n    | Duri",
          "created_at": "2025-04-26T03:18:50Z"
        },
        {
          "author": "craihyc",
          "body": "yh，I have the same problem.\n\nlogs:\n2025-04-27 08:49:03,641 INFO     23 set_progress(61b4c504230111f087792e3ceb3d9e59), progress: -1, progress_msg: 08:49:03 [ERROR][Exception]: Exceptions from Trio nursery (10 sub-exceptions) -- Account abnormal. Please ensure it's on good standing to use QWen's text",
          "created_at": "2025-04-27T00:55:23Z"
        }
      ]
    },
    {
      "issue_number": 7787,
      "title": "[Bug]: Chunk Data Not Updated Immediately After API Call",
      "body": "When updating a chunk via the API and then immediately calling list_chunks, the retrieved chunk data reflects the state before the update.\n\n```\ndoc.list_chunks()[0].to_json()\ndoc.list_chunks()[0].update({'content':'new content'})\ndoc.list_chunks()[0].to_json()\n# not new content\n```",
      "state": "open",
      "author": "mumumi",
      "author_type": "User",
      "created_at": "2025-05-22T02:42:07Z",
      "updated_at": "2025-05-27T05:29:26Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7787/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7787",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7787",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:34.665907",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe behavior you're seeing—where updating a chunk via the API and then immediately calling list_chunks does not reflect the updated data—is a known characteristic of the current implementation.\n\nHere's what is happening:\n\n- The chunk update is performed via a PUT request to the API, ",
          "created_at": "2025-05-22T02:49:28Z"
        },
        {
          "author": "Woody-Hu",
          "body": "As I know the default kb_conn ES will not affect the write change immediately, https://www.elastic.co/docs/api/doc/elasticsearch/operation/operation-indices-refresh-1",
          "created_at": "2025-05-23T01:52:10Z"
        },
        {
          "author": "asiroliu",
          "body": "@mumumi \nAs I know this is an asynchronous operation. You'll need to check the status manually using the list_chunks method.",
          "created_at": "2025-05-26T06:37:48Z"
        },
        {
          "author": "mumumi",
          "body": "> [@mumumi](https://github.com/mumumi) As I know this is an asynchronous operation. You'll need to check the status manually using the list_chunks method.\n\nI know that “async_parse” and “async_cancel_parse” are asynchronous operations. It’s counterintuitive that the “update” operation is asynchronou",
          "created_at": "2025-05-27T03:48:48Z"
        },
        {
          "author": "Woody-Hu",
          "body": "> > [@mumumi](https://github.com/mumumi) As I know this is an asynchronous operation. You'll need to check the status manually using the list_chunks method.\n> \n> I know that “async_parse” and “async_cancel_parse” are asynchronous operations. It’s counterintuitive that the “update” operation is async",
          "created_at": "2025-05-27T05:29:24Z"
        }
      ]
    },
    {
      "issue_number": 7876,
      "title": "[Bug]: When you click to open an attached Excel file, instead of displaying properly, only a small portion of the file is shown in the new page, making it impossible to view the content",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n12345d\n\n### RAGFlow image version\n\nv0.19.0\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nWhen you click to open an attached Excel file, instead of displaying properly, only a small portion of the file is shown in the new page, making it impossible to view the content\n\n<img width=\"1219\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/ca177c93-3c65-4c00-a2ff-4d242935d459\" />\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nWhen you click to open an attached Excel file, instead of displaying properly, only a small portion of the file is shown in the new page, making it impossible to view the content\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "liupandatacs",
      "author_type": "User",
      "created_at": "2025-05-27T04:00:19Z",
      "updated_at": "2025-05-27T04:00:19Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 0,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7876/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7876",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7876",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:34.868977",
      "comments": []
    },
    {
      "issue_number": 7160,
      "title": "[Question]: How to share the model configuration? Is there an API for joining the team?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nScene：I have an administrator account in ragflow, such as admin. I configured the model, knowledge base and agent on admin. Then I registered a new account user1 through the api. Then I want the user1 account to join the admin team through the api. And it can share the model, knowledge base and agent configured by admin, and user1 can also establish its own knowledge base and agent.\n\nQ1：After I registered user1 through the api, how can I join the admin team via the api?\nQ2：Now that I manually invite members to join the team, the configuration is not shared. Can the model configuration be shared? Or rather, what should I do? Modify the source code and start it in the form of source code? Are there any other configurations?",
      "state": "closed",
      "author": "ztq-max",
      "author_type": "User",
      "created_at": "2025-04-21T06:34:53Z",
      "updated_at": "2025-05-27T03:02:39Z",
      "closed_at": "2025-05-27T03:02:39Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7160/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7160",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7160",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:34.868998",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nIn RAGFlow, sharing model provider configurations between team members is only possible in the Enterprise version. The free version requires each team member to configure model provider settings individually <sup>[[1]](https://github.com/infiniflow/ragflow/issues/7027)</sup>. \n\nRegar",
          "created_at": "2025-04-21T06:36:00Z"
        },
        {
          "author": "KevinHuSh",
          "body": "LLM sharing is a feature  of our enterprise version.\nNo API for team joinning yet.",
          "created_at": "2025-04-22T05:10:21Z"
        },
        {
          "author": "ztq-max",
          "body": "\nHow many knowledge bases can be created under one account? Is there any restriction on this？",
          "created_at": "2025-04-22T06:48:05Z"
        },
        {
          "author": "KevinHuSh",
          "body": "No restriction.",
          "created_at": "2025-04-22T06:50:11Z"
        }
      ]
    },
    {
      "issue_number": 7815,
      "title": "[Bug]: The answer always return a table format data whatever you asked when using a table-parsed data knowledge base",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n94181a99\n\n### RAGFlow image version\n\nv0.18.0\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nAfter upgrading to RAGFlow v0.18.0, when a knowledge base contains table-parsed data and query results are returned in tabular format, the system consistently returns the same table data in response to all subsequent queries. The issue can only be resolved by deleting knowledge base references containing tables.\n\n<img width=\"1369\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/0f844a5f-119f-4df4-ac15-7e3dc7b33f63\" />\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\n1、create a knowledge base first and upload a excel file\n2、create a chat assistant and attach the knowledge base\n3、ask a question about the content of the excel file and return a table format data\n4、repeat serval times\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "carl1321",
      "author_type": "User",
      "created_at": "2025-05-23T07:00:42Z",
      "updated_at": "2025-05-27T03:02:12Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7815/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7815",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7815",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:35.085246",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "`Table` method is used for data dumped from database. The user's question will be transfered to SQL to search the data.",
          "created_at": "2025-05-26T02:42:37Z"
        },
        {
          "author": "carl1321",
          "body": "> `Table` method is used for data dumped from database. The user's question will be transfered to SQL to search the data.\n\nwill it be fixed in the future? The LLM needs to analyze the question first before deciding whether to convert it.",
          "created_at": "2025-05-27T03:02:11Z"
        }
      ]
    },
    {
      "issue_number": 5882,
      "title": "[Bug]: 0.17.0 Helm部署失败：infinity Python SDK不兼容",
      "body": "### Is there an existing issue for the same bug?\n\n- [x] I have checked the existing issues.\n\n### RAGFlow workspace code commit ID\n\n..\n\n### RAGFlow image version\n\n0.17.0-slim\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\n2025-03-11T10:27:19.493912274+08:00 AttributeError: 'ThriftInfinityClient' object has no attribute '_is_connected'\n\n2025-03-11T10:27:19.494414070+08:00 Exception ignored in: <function RemoteThriftInfinityConnection.__del__ at 0x768a81d60af0>\n\n2025-03-11T10:27:19.494481003+08:00 Traceback (most recent call last):\n\n2025-03-11T10:27:19.494582289+08:00   File \"/ragflow/.venv/lib/python3.10/site-packages/infinity/remote_thrift/infinity.py\", line 35, in __del__\n\n2025-03-11T10:27:19.494679865+08:00     if self._is_connected is True:\n\n2025-03-11T10:27:19.494702451+08:00 AttributeError: 'RemoteThriftInfinityConnection' object has no attribute '_is_connected'\n\n2025-03-11T10:27:19.498068707+08:00 WARNING:ragflow.infinity_conn:(2003, \"Index: 29 isn't supported, you are using a deprecated version of Python SDK. Please install the corresponding version Python SDK.\"). Waiting Infinity IP: ragflow-17-infinity.rag.svc, Port: 23817 to be healthy.\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\ngit clone ....(tag/0.17)\ncd ragflow/ragflow-0.17.0/helm/\nhelm install ....\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "MartianHY",
      "author_type": "User",
      "created_at": "2025-03-11T02:33:11Z",
      "updated_at": "2025-05-27T02:32:00Z",
      "closed_at": "2025-03-11T02:58:00Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/5882/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/5882",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/5882",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:35.274389",
      "comments": [
        {
          "author": "MartianHY",
          "body": "升级infinity镜像版本至[v0.6.0-dev3]可解决；",
          "created_at": "2025-03-11T02:58:00Z"
        },
        {
          "author": "felix5572",
          "body": "save issue. solved with image  infiniflow/infinity:v0.6.0-dev3 （instead of infiniflow/infinity:v0.5.0）.\nmodify helm/values.yaml file",
          "created_at": "2025-03-26T10:12:38Z"
        },
        {
          "author": "ghj1976",
          "body": "这个修复的版本啥时候发布呢？ 被 infinity 坑死了。",
          "created_at": "2025-05-27T02:31:59Z"
        }
      ]
    },
    {
      "issue_number": 7868,
      "title": "[Bug]: Generate embedding error",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n9a1ac80\n\n### RAGFlow image version\n\n0.18.0\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\n<!-- Failed to upload \"image.png\" -->\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\n1. Upload a 113k JSON file\n2. Use general chunking method, chunk size=128\n3. Parse\n```\n\n### Additional information\n\nragflow-server  | 2025-05-27 08:07:52,688 INFO     24 set_progress(80d299943a8e11f0acbcbeee61f34b47), progress: -1, progress_msg: 08:07:52 Page(1~100000001): [ERROR]Generate embedding error:all the input array dimensions except for the concatenation axis must match exactly, but along dimension 1, the array at index 0 has size 1024 and the array at index 1 has size 16384\nragflow-server  | 2025-05-27 08:07:52,688 ERROR    24 Generate embedding error:all the input array dimensions except for the concatenation axis must match exactly, but along dimension 1, the array at index 0 has size 1024 and the array at index 1 has size 16384\nragflow-server  | Traceback (most recent call last):\nragflow-server  |   File \"/ragflow/rag/svr/task_executor.py\", line 558, in do_handle_task\nragflow-server  |     token_count, vector_size = await embedding(chunks, embedding_model, task_parser_config, progress_callback)\nragflow-server  |   File \"/ragflow/rag/svr/task_executor.py\", line 422, in embedding\nragflow-server  |     cnts_ = np.concatenate((cnts_, vts), axis=0)\nragflow-server  | ValueError: all the input array dimensions except for the concatenation axis must match exactly, but along dimension 1, the array at index 0 has size 1024 and the array at index 1 has size 16384\nragflow-server  | 2025-05-27 08:07:52,699 INFO     24 set_progress(80d299943a8e11f0acbcbeee61f34b47), progress: -1, progress_msg: 08:07:52 [ERROR][Exception]: all the input array dimensions except for the concatenation axis must match exactly, but along dimension 1, the array at index 0 has size 1024 and the array at index 1 has size 16384\nragflow-server  | 2025-05-27 08:07:52,699 ERROR    24 handle_task got exception for task {\"id\": \"80d299943a8e11f0acbcbeee61f34b47\", \"doc_id\": \"6b77db983a0911f0a090beee61f34b47\", \"from_page\": 0, \"to_page\": 100000000, \"retry_count\": 0, \"kb_id\": \"6c69bcdc352311f09f95beee61f34b47\", \"parser_id\": \"naive\", \"parser_config\": {\"layout_recognize\": \"DeepDOC\", \"chunk_token_num\": 64, \"delimiter\": \"\\n\", \"auto_keywords\": 0, \"auto_questions\": 0, \"html4excel\": false, \"raptor\": {\"use_raptor\": false}, \"graphrag\": {\"use_graphrag\": false}, \"pages\": []}, \"name\": \"\\u5458\\u5de5\\u529e\\u4e8b\\u6307\\u5357\\u67e5\\u8be2.json\", \"type\": \"doc\", \"location\": \"\\u5458\\u5de5\\u529e\\u4e8b\\u6307\\u5357\\u67e5\\u8be2.json\", \"size\": 115880, \"tenant_id\": \"6cfeda26f82211efa8ed2e10d4de833b\", \"language\": \"English\", \"embd_id\": \"wyyy-embedding___OpenAI-API@OpenAI-API-Compatible\", \"pagerank\": 0, \"kb_parser_config\": {\"layout_recognize\": \"DeepDOC\", \"chunk_token_num\": 128, \"delimiter\": \"\\n\", \"auto_keywords\": 0, \"auto_questions\": 0, \"html4excel\": false, \"raptor\": {\"use_raptor\": false}, \"graphrag\": {\"use_graphrag\": false}}, \"img2txt_id\": \"\", \"asr_id\": \"\", \"llm_id\": \"deepseek-v3___OpenAI-API@OpenAI-API-Compatible\", \"update_time\": 1748304416965, \"task_type\": \"\"}\nragflow-server  | Traceback (most recent call last):\nragflow-server  |   File \"/ragflow/rag/svr/task_executor.py\", line 613, in handle_task\nragflow-server  |     await do_handle_task(task)\nragflow-server  |   File \"/ragflow/rag/svr/task_executor.py\", line 558, in do_handle_task\nragflow-server  |     token_count, vector_size = await embedding(chunks, embedding_model, task_parser_config, progress_callback)\nragflow-server  |   File \"/ragflow/rag/svr/task_executor.py\", line 422, in embedding\nragflow-server  |     cnts_ = np.concatenate((cnts_, vts), axis=0)\nragflow-server  | ValueError: all the input array dimensions except for the concatenation axis must match exactly, but along dimension 1, the array at index 0 has size 1024 and the array at index 1 has size 16384",
      "state": "closed",
      "author": "fangxy926",
      "author_type": "User",
      "created_at": "2025-05-27T00:16:24Z",
      "updated_at": "2025-05-27T01:42:42Z",
      "closed_at": "2025-05-27T01:42:42Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7868/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7868",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7868",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:35.561298",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHi @fangxy926! I'm [Dosu](https://go.dosu.dev/dosubot) and I’m helping the ragflow team.\n\n<!-- Answer -->\nThe error you're encountering—`ValueError: all the input array dimensions except for the concatenation axis must match exactly, but along dimension 1, the array at index 0 has ",
          "created_at": "2025-05-27T00:26:22Z"
        }
      ]
    },
    {
      "issue_number": 7518,
      "title": "[Question]: Ragflow 0.18.0 Ollama Model Reload Issue",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\n## 中文\n我部署了ragflow:0.18.0的镜像，模型使用ollama 0.6.8版本。发现ollama经常会重新加载模型。通过排除法测试发现：\n- ragflow:0.17.2 + ollama:0.6.8 + qwen3模型运行良好\n- 但升级到0.18.0后就会出现问题\n\nollama的日志没有显示异常信息，只有VRAM警告。请问有什么解决办法吗？\n\n## English\nI deployed the ragflow:0.18.0 image with ollama version 0.6.8, and found that ollama frequently reloads the model. Through elimination testing, I found:\n- ragflow:0.17.2 + ollama:0.6.8 + qwen3 model works well\n- but after upgrading to 0.18.0, the issue occurs\n\nOllama logs show no abnormal information except VRAM warnings. Are there any solutions to this problem?",
      "state": "closed",
      "author": "SHADOW-LI0327",
      "author_type": "User",
      "created_at": "2025-05-07T14:12:53Z",
      "updated_at": "2025-05-26T21:06:08Z",
      "closed_at": "2025-05-26T21:06:08Z",
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7518/reactions",
        "total_count": 3,
        "+1": 3,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7518",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7518",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:35.771297",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHello @SHADOW-LI0327! I'm [Dosu](https://dosu.dev), a bot here to assist you with any bugs, questions, or contributions you may have. I'm ready to help while you wait for a human maintainer.\n\n<!-- Answer -->\nRagflow version 0.18.0 removed built-in rerank models, which could affect ",
          "created_at": "2025-05-07T14:14:33Z"
        },
        {
          "author": "which-W",
          "body": "@SHADOW-LI0327 \nThank you for your questions about our products!\n\nWill VRAM warnings directly affect your use of our products? If yes please provide more log information about this issue.",
          "created_at": "2025-05-08T03:09:05Z"
        },
        {
          "author": "SHADOW-LI0327",
          "body": "> [@SHADOW-LI0327](https://github.com/SHADOW-LI0327) Thank you for your questions about our products!\n> \n> Will VRAM warnings directly affect your use of our products? If yes please provide more log information about this issue.\n# Update\n刚刚看到#7560这个问题已被修复，我会测试 nightly 版本进行验证。感谢告知进展！\nI just noticed t",
          "created_at": "2025-05-14T16:14:40Z"
        },
        {
          "author": "KevinHuSh",
          "body": "I heard about that people could setup keep-alive time when start up the ollama service, dosen't it?",
          "created_at": "2025-05-16T03:18:13Z"
        }
      ]
    },
    {
      "issue_number": 7867,
      "title": "[Question]:",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nHow does the parser do with pdf readable? If I have a readable pdf  with text and table(it means that can copy text from pdf), I want to extract pdf as html table? How can I do that?\n\nThank you.",
      "state": "open",
      "author": "phamkhactu",
      "author_type": "User",
      "created_at": "2025-05-26T14:12:54Z",
      "updated_at": "2025-05-26T14:47:03Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7867/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7867",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7867",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:36.029459",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nRAGFlow's parser is designed to handle PDF files containing both text and tables using a combination of OCR (Optical Character Recognition), TSR (Table Structure Recognition), and DLR (Document Layout Recognition) tasks. You can select the appropriate visual model for your use case, ",
          "created_at": "2025-05-26T14:21:06Z"
        },
        {
          "author": "phamkhactu",
          "body": "@dosu-bot, in my case, i have a readable pdf, it means that I can copy text, how can I make use of text in pdf not using OCR, and table in pdf not using table contruction to convert out as html table?",
          "created_at": "2025-05-26T14:38:03Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nFor extracting text from a readable PDF (where you can copy text) without using OCR, RAGFlow provides a way to do this:\n\n- Use the **Naive** or **Plain Text** parser option. This skips OCR, Table Structure Recognition (TSR), and Document Layout Recognition (DLR), and directly extract",
          "created_at": "2025-05-26T14:47:02Z"
        }
      ]
    },
    {
      "issue_number": 7569,
      "title": "[Question]:The parsing language of the uploaded document is inaccurate",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nMy dataset is in Chinese, but there is no document language option in the configuration. I searched for the previous question and saw that the language would be automatically selected based on the content of the document, but I noticed that the language of the log document output by the backend is English. The content of the knowledge graph I constructed is in English. May I ask how to solve this problem.\n\n<!-- Failed to upload \"a917758d91b9ceb843937a4adac31f77_origin(1).jpg\" -->\n![Image](https://github.com/user-attachments/assets/a1018b5b-3afc-4302-aef4-76243c1cd0c1)\n![Image](https://github.com/user-attachments/assets/9797e910-d3c7-44d3-a21d-b52baeed9bc2)\n\n![Image](https://github.com/user-attachments/assets/b7a68790-b6b7-4d6a-8446-846a58911767)",
      "state": "open",
      "author": "0zxq0",
      "author_type": "User",
      "created_at": "2025-05-10T03:39:41Z",
      "updated_at": "2025-05-26T13:38:34Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7569/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7569",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7569",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:36.246450",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHello @0zxq0! I'm [Dosu](https://dosu.dev), your friendly bot here to help you solve bugs, answer questions, and get you on your way to becoming a contributor while we wait for a human maintainer. Let's tackle your issue together! 🤖\n\n<!-- Answer -->\nI found a similar open issue tit",
          "created_at": "2025-05-10T03:40:53Z"
        },
        {
          "author": "AlexRice13",
          "body": "You could edit lots of hardcoded prompt in individual python file, translate them to chinese to solve this problem",
          "created_at": "2025-05-10T13:04:01Z"
        },
        {
          "author": "mu-dan",
          "body": "> ### 自检\n> * [x] 我已搜索现有问题，[搜索现有问题](https://github.com/infiniflow/ragflow/issues)，包括已关闭的问题。[x] 我确认我使用英语提交此报告（[语言政策](https://github.com/infiniflow/ragflow/issues/5910)）。[x] 非英文标题提交将被直接关闭 （ 非英文标题的提交将会被直接关闭 ） （[语言政策](https://github.com/infiniflow/ragflow/issues/5910)）。[x] 请不要修改此模板:)并填写所有必填字段。\n> \n> ### 描",
          "created_at": "2025-05-12T08:11:26Z"
        },
        {
          "author": "YAETHeryk",
          "body": "> You could edit lots of hardcoded prompt in individual python file, translate them to chinese to solve this problem\n\nCould you let me know which prompt is used by the picture parser to let LLM describe pictures? I found some prompts in prompts.py, but I‘m not very sure.",
          "created_at": "2025-05-21T02:23:18Z"
        },
        {
          "author": "AlexRice13",
          "body": "Translate prompts below\n\n![Image](https://github.com/user-attachments/assets/223f3d8f-ab8e-45e4-b1b0-ce21fc5fed06)",
          "created_at": "2025-05-26T13:38:33Z"
        }
      ]
    },
    {
      "issue_number": 7506,
      "title": "[Bug]: Fail to access model(qwen3-235b-a22b)",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n*ERROR**: Error code: 400\n\n### RAGFlow image version\n\nchatcmpl-f81da5f0-8bb3-9ea3-9cb1-402ed4d20a75\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nOpenAI-API-Compatible add modle qwen3-235b-a22b，All the other models work fine, but this new one doesn't，This model only support stream mode\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nFail to access model(qwen3-235b-a22b).**ERROR**: Error code: 400 - {'error': {'code': 'invalid_parameter_error', 'param': None, 'message': 'This model only support stream mode, please enable the stream parameter to access the model. ', 'type': 'invalid_request_error'}, 'id': 'chatcmpl-f1b4c404-bf39-98bb-91ac-da7e43a7e274', 'request_id': 'f1b4c404-bf39-98bb-91ac-da7e43a7e274'}\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "Demon-papa",
      "author_type": "User",
      "created_at": "2025-05-07T07:35:25Z",
      "updated_at": "2025-05-26T13:07:01Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 5,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7506/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7506",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7506",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:36.526042",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHello @Demon-papa! I'm [Dosu](https://dosu.dev), your friendly bot here to help you with any bugs, questions, or contributions you might need while waiting for a human maintainer. How can I assist you today?\n\n<!-- Answer -->\nTo resolve the issue with accessing the `qwen3-235b-a22b`",
          "created_at": "2025-05-07T07:36:47Z"
        },
        {
          "author": "Demon-papa",
          "body": "已收到您的邮件，我将尽快查看，谢谢！--------------------------------------------------------Your E-mail has been received,THX",
          "created_at": "2025-05-07T07:37:20Z"
        },
        {
          "author": "Demon-papa",
          "body": "it's ok now",
          "created_at": "2025-05-07T13:07:59Z"
        },
        {
          "author": "lffwhanlin",
          "body": "I also encountered this problem, have you solved it?",
          "created_at": "2025-05-26T13:06:29Z"
        },
        {
          "author": "Demon-papa",
          "body": "已收到您的邮件，我将尽快查看，谢谢！--------------------------------------------------------Your E-mail has been received,THX",
          "created_at": "2025-05-26T13:07:00Z"
        }
      ]
    },
    {
      "issue_number": 7866,
      "title": "[Question]: How does cross-language search work? Is it to convert the problem into the language in the document or how to handle it?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nHow does cross-language search work? Is it to convert the problem into the language in the document or how to handle it? Looking forward to your answer",
      "state": "closed",
      "author": "zhugh2333",
      "author_type": "User",
      "created_at": "2025-05-26T12:16:31Z",
      "updated_at": "2025-05-26T12:35:54Z",
      "closed_at": "2025-05-26T12:35:54Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7866/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7866",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7866",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:36.750707",
      "comments": [
        {
          "author": "zhugh2333",
          "body": "@dosubot",
          "created_at": "2025-05-26T12:20:13Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nCross-language search in RAGFlow works by translating your query into the target language(s) of the documents using the system’s default chat model. This translation ensures that the semantic meaning of your query is accurately matched with documents, even if they are written in a di",
          "created_at": "2025-05-26T12:20:17Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nCross-language search in RAGFlow allows you to submit a query in one language and retrieve relevant documents written in other languages. This is achieved by translating your query into the target language(s) using the system’s default chat model, which ensures accurate semantic matc",
          "created_at": "2025-05-26T12:22:27Z"
        },
        {
          "author": "zhugh2333",
          "body": "Thank you for your team. This is a wonderful feature.",
          "created_at": "2025-05-26T12:35:28Z"
        }
      ]
    },
    {
      "issue_number": 3680,
      "title": "[Bug]: Importing the ReRank model through ollama resulted in a keyerror 'ollama'",
      "body": "### Is there an existing issue for the same bug?\n\n- [X] I have checked the existing issues.\n\n### RAGFlow workspace code commit ID\n\n4454b33e(v0.13.0~211) slim\n\n### RAGFlow image version\n\n4454b33e(v0.13.0~211) slim\n\n### Other environment information\n\n```Markdown\nwindows 10\r\nollama version is 0.4.5\r\nmodel:modelscope.cn/gpustack/bge-reranker-v2-m3-GGUF:latest\n```\n\n\n### Actual behavior\n\npic\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\n2024-11-27 12:16:48,084 INFO     19 task_consumer_0 reported heartbeat: {\"name\": \"task_consumer_0\", \"now\": \"2024-11-27T12:16:48.079644\", \"boot_at\": \"2024-11-27T11:09:40.928496\", \"pending\": 0, \"lag\": 0, \"done\": 2, \"failed\": 2, \"current\": null}\r\n2024-11-27 12:16:59,379 ERROR    20 'Ollama'\r\nTraceback (most recent call last):\r\n  File \"/ragflow/.venv/lib/python3.10/site-packages/flask/app.py\", line 880, in full_dispatch_request\r\n    rv = self.dispatch_request()\r\n  File \"/ragflow/.venv/lib/python3.10/site-packages/flask/app.py\", line 865, in dispatch_request\r\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\r\n  File \"/ragflow/.venv/lib/python3.10/site-packages/flask_login/utils.py\", line 290, in decorated_view\r\n    return current_app.ensure_sync(func)(*args, **kwargs)\r\n  File \"/ragflow/api/utils/api_utils.py\", line 171, in decorated_function\r\n    return func(*_args, **_kwargs)\r\n  File \"/ragflow/api/apps/llm_app.py\", line 238, in add_llm\r\n    mdl = RerankModel[factory](\r\nKeyError: 'Ollama'\n```\n\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "cns-cash",
      "author_type": "User",
      "created_at": "2024-11-27T04:21:03Z",
      "updated_at": "2025-05-26T10:39:14Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 8,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/3680/reactions",
        "total_count": 8,
        "+1": 8,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "Feiue"
      ],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/3680",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/3680",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:36.991356",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "Not supported yet.",
          "created_at": "2024-11-28T03:28:51Z"
        },
        {
          "author": "lrq3000",
          "body": "Please add support, it's the only thing that prevents using RAGflow fully offline while still preserving decent production-ready RAG results (especially in multi-needle tests).\r\n\r\nAwesome app BTW, it's the only one that supports very long documents without context collapse.",
          "created_at": "2024-12-30T19:36:38Z"
        },
        {
          "author": "Feiue",
          "body": "`olloma` does not provide an interface for the rerank model.",
          "created_at": "2024-12-31T02:31:44Z"
        },
        {
          "author": "Reza2kn",
          "body": "how about from huggingface hub then? there's a ton of them hosted there..",
          "created_at": "2025-01-01T05:59:03Z"
        },
        {
          "author": "lrq3000",
          "body": "Yes since [recently](https://www.kdnuggets.com/use-almost-any-language-model-locally-with-ollama-and-hugging-face-hub) ollama [can](https://huggingface.co/docs/hub/ollama) now run any HF model including rerank models, is that enough or does a specific metadata need to be provided in the response?\r\n\r",
          "created_at": "2025-01-01T11:22:00Z"
        }
      ]
    },
    {
      "issue_number": 7130,
      "title": "[Question]: When deleting the document, the sliced data in the vector library was not synchronously deleted",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\n![Image](https://github.com/user-attachments/assets/70d480c7-3751-44ca-ab37-8f824a76c2b9)",
      "state": "open",
      "author": "elite-player",
      "author_type": "User",
      "created_at": "2025-04-18T02:10:44Z",
      "updated_at": "2025-05-26T09:21:03Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7130/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7130",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7130",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:37.171956",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHello @elite-player! I'm [Dosu](https://dosu.dev), your friendly bot here to assist you with bugs, questions, and becoming a contributor. I'm ready to help you while we wait for a human maintainer. How can I assist you today?\n\n<!-- Answer -->\nThe issue you're experiencing, where th",
          "created_at": "2025-04-18T02:12:04Z"
        },
        {
          "author": "Halfknow",
          "body": "I found the same issue. After I deleted the (1) duplicated document and added a new document, I retrieve the related chunks, the (1) document can still be searched out.",
          "created_at": "2025-04-22T01:45:56Z"
        },
        {
          "author": "linqicong",
          "body": "I found the same issue.",
          "created_at": "2025-05-26T09:21:02Z"
        }
      ]
    },
    {
      "issue_number": 7378,
      "title": "[Question]: Calling ollama doubles the memory size",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nIn the new version of ragflow, I called ollama qwen2.5:32b locally and showed that the video memory was 60GB, but with ollama run, other software or version 0.17 I don't have this problem\n",
      "state": "open",
      "author": "Jeffyinan",
      "author_type": "User",
      "created_at": "2025-04-28T06:38:43Z",
      "updated_at": "2025-05-26T08:03:28Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7378/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7378",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7378",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:37.405750",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Greeting -->\nHello @Jeffyinan! I'm [Dosu](https://dosu.dev), a bot here to help you with bugs, answer questions, and assist you in becoming a contributor. I'll be here while you wait for a human maintainer. How can I assist you today?\n\n<!-- Answer -->\nThe issue of video memory doubling to 60GB ",
          "created_at": "2025-04-28T06:39:53Z"
        },
        {
          "author": "2731557667",
          "body": "Brother, has it been solved",
          "created_at": "2025-05-26T08:03:27Z"
        }
      ]
    },
    {
      "issue_number": 7851,
      "title": "[Question]:About updown_concat_xgb.model",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nWhat model is updown_comcat-xgb.model? What problem is being solved?",
      "state": "open",
      "author": "eshine996",
      "author_type": "User",
      "created_at": "2025-05-26T06:21:30Z",
      "updated_at": "2025-05-26T06:30:22Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7851/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7851",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7851",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:37.670347",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe `updown_concat_xgb.model` in RAGFlow is an XGBoost machine learning model used within the PDF parser component. Its primary function is to help determine whether two text boxes in a PDF should be concatenated vertically (i.e., whether they belong to the same logical block of text",
          "created_at": "2025-05-26T06:23:42Z"
        },
        {
          "author": "eshine996",
          "body": "@dosu-bot What is the principle of updown_comcat-xgb.model and how is it trained?",
          "created_at": "2025-05-26T06:26:34Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe principle behind the `updown_concat_xgb.model` is to predict whether two text boxes in a PDF should be concatenated vertically, meaning whether they belong to the same logical block of text. This is achieved by computing a set of features that describe the relationship between tw",
          "created_at": "2025-05-26T06:30:21Z"
        }
      ]
    },
    {
      "issue_number": 7850,
      "title": "[Question]: In the HTTP API, how can the usage of tokens be obtained through the chat interface?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nIn the HTTP API, how can the usage of tokens be obtained through the chat interface?",
      "state": "open",
      "author": "Lee1985",
      "author_type": "User",
      "created_at": "2025-05-26T06:21:00Z",
      "updated_at": "2025-05-26T06:25:19Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7850/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7850",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7850",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:37.887722",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nTo obtain token usage through the chat interface in the RAGFlow HTTP API, you can use the following endpoints and methods:\n\n### 1. `/stats` Endpoint\nThe `/stats` endpoint provides statistics related to API usage, including token usage metrics. When you call this endpoint, you receive",
          "created_at": "2025-05-26T06:25:18Z"
        }
      ]
    },
    {
      "issue_number": 7832,
      "title": "[Question]: Registration API?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nHi, in my use case I need to create tenants through API. I wonder, is there any plan to add this to API? Or maybe any workaround for this?",
      "state": "open",
      "author": "blumfontein",
      "author_type": "User",
      "created_at": "2025-05-24T10:27:00Z",
      "updated_at": "2025-05-26T06:12:57Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question",
        "💞 feature"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7832/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7832",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7832",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:38.131362",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nBased on the available information, there is currently no dedicated API endpoint in RAGFlow for creating tenants (i.e., a \"tenant registration\" API). The codebase does include several endpoints and functions for tenant management, such as listing tenants, adding or deleting tenant us",
          "created_at": "2025-05-24T10:29:09Z"
        },
        {
          "author": "ZhenhangTung",
          "body": "@blumfontein thanks for raising it. I've wrote it down and will discuss with the team. Could you share more details on your use case? That will give us more details, helping us prioritizing features.  ",
          "created_at": "2025-05-26T03:43:56Z"
        },
        {
          "author": "asiroliu",
          "body": "@blumfontein \nFor automated testing, I recommend first implementing the web API approach.\n[conftest.py](https://github.com/infiniflow/ragflow/blob/main/sdk/python/test/conftest.py)",
          "created_at": "2025-05-26T06:12:56Z"
        }
      ]
    },
    {
      "issue_number": 7848,
      "title": "[Question]: About RAGFlowDocxParser",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI would like to ask, the docx parser separates text and tables for parsing, which loses the correlation between text and tables. It seems that the image has not been parsed either. Is that so? At the same time, using page breaks to determine page numbers may not be accurate, right? If that's the case, is there a better solution?",
      "state": "closed",
      "author": "eshine996",
      "author_type": "User",
      "created_at": "2025-05-26T03:23:39Z",
      "updated_at": "2025-05-26T06:12:39Z",
      "closed_at": "2025-05-26T06:12:39Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7848/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7848",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7848",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:38.375580",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYour understanding is mostly correct, but there are some important clarifications and details:\n\n- **Text and Table Correlation:** The RAGFlowDocxParser does separate text and tables for parsing, which can indeed result in a loss of correlation between them. However, there are efforts",
          "created_at": "2025-05-26T03:26:15Z"
        }
      ]
    },
    {
      "issue_number": 3663,
      "title": "[Feature Request]: Need support import exist file in object storage",
      "body": "### Is there an existing issue for the same feature request?\n\n- [X] I have checked the existing issues.\n\n### Is your feature request related to a problem?\n\n_No response_\n\n### Describe the feature you'd like\n\n大多数情况下，数据会直接写入对象存储，而不是通过Ragflow去写数据，Ragflow的API设计没有做数据通道和管理通道的分离，也不适合传递数据， 因此需要支持直接从Ragflow导入已经存在于对象存储中的数据。\r\n\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n_No response_\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "baifachuan",
      "author_type": "User",
      "created_at": "2024-11-26T10:36:33Z",
      "updated_at": "2025-05-26T03:59:28Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/3663/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/3663",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/3663",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:38.586092",
      "comments": [
        {
          "author": "which-W",
          "body": "@baifachuan \n👋 Thanks so much for your contribution, and apologies for the delayed reply!\n\nWe really appreciate your PR 🙌 — however, it looks like it didn’t pass the CI checks, so we’re unable to merge it at this time. If you’re able to revise the code to pass the tests, we’d love to take another lo",
          "created_at": "2025-05-26T03:59:27Z"
        }
      ]
    },
    {
      "issue_number": 4517,
      "title": "[Bug]: \"key: expected bytes or bytearray, but got 'NoneType'\"",
      "body": "### Is there an existing issue for the same bug?\n\n- [x] I have checked the existing issues.\n\n### RAGFlow workspace code commit ID\n\ni don't know how to get th commit ID\n\n### RAGFlow image version\n\nv0.15.1\n\n### Other environment information\n\n```Markdown\nCPU：intel i7 11850h\nmemory:32G\nos:synology（群晖）\n```\n\n### Actual behavior\n\n注册后无法正常登录，出现以下错误提示：“key: expected bytes or bytearray, but got 'NoneType'”\n\n\n错误日志如下：\n\nypeError: key: expected bytes or bytearray, but got 'NoneType'\n--\n2025/01/17 13:18:57 | stderr | raise TypeError(\"key: expected bytes or bytearray, but got %r\" % type(key).__name__)\n2025/01/17 13:18:57 | stderr | File \"/usr/lib/python3.10/hmac.py\", line 53, in __init__\n2025/01/17 13:18:57 | stderr | return HMAC(key, msg, digestmod)\n2025/01/17 13:18:57 | stderr | File \"/usr/lib/python3.10/hmac.py\", line 184, in new\n2025/01/17 13:18:57 | stderr | return hmac.new(key, payload.encode(\"utf-8\"), sha512).hexdigest()\n2025/01/17 13:18:57 | stderr | File \"/ragflow/.venv/lib/python3.10/site-packages/flask_login/utils.py\", line 380, in _cookie_digest\n2025/01/17 13:18:57 | stderr | if hmac.compare_digest(_cookie_digest(payload, key=key), digest):\n2025/01/17 13:18:57 | stderr | File \"/ragflow/.venv/lib/python3.10/site-packages/flask_login/utils.py\", line 62, in decode_cookie\n2025/01/17 13:18:57 | stderr | user_id = decode_cookie(cookie)\n2025/01/17 13:18:57 | stderr | File \"/ragflow/.venv/lib/python3.10/site-packages/flask_login/login_manager.py\", line 414, in _load_user_from_remember_cookie\n2025/01/17 13:18:57 | stderr | user = self._load_user_from_remember_cookie(cookie)\n2025/01/17 13:18:57 | stderr | File \"/ragflow/.venv/lib/python3.10/site-packages/flask_login/login_manager.py\", line 376, in _load_user\n2025/01/17 13:18:57 | stderr | current_app.login_manager._load_user()\n2025/01/17 13:18:57 | stderr | File \"/ragflow/.venv/lib/python3.10/site-packages/flask_login/utils.py\", line 370, in _get_user\n2025/01/17 13:18:57 | stderr | current_user = LocalProxy(lambda: _get_user())\n2025/01/17 13:18:57 | stderr | File \"/ragflow/.venv/lib/python3.10/site-packages/flask_login/utils.py\", line 25, in <lambda>\n2025/01/17 13:18:57 | stderr | return get_name(local())\n2025/01/17 13:18:57 | stderr | File \"/ragflow/.venv/lib/python3.10/site-packages/werkzeug/local.py\", line 526, in _get_current_object\n2025/01/17 13:18:57 | stderr | obj = instance._get_current_object()\n2025/01/17 13:18:57 | stderr | File \"/ragflow/.venv/lib/python3.10/site-packages/werkzeug/local.py\", line 318, in __get__\n2025/01/17 13:18:57 | stderr | elif not current_user.is_authenticated:\n2025/01/17 13:18:57 | stderr | File \"/ragflow/.venv/lib/python3.10/site-packages/flask_login/utils.py\", line 284, in decorated_view\n2025/01/17 13:18:57 | stderr | return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n2025/01/17 13:18:57 | stderr | File \"/ragflow/.venv/lib/python3.10/site-packages/flask/app.py\", line 865, in dispatch_request\n2025/01/17 13:18:57 | stderr | rv = self.dispatch_request()\n2025/01/17 13:18:57 | stderr | File \"/ragflow/.venv/lib/python3.10/site-packages/flask/app.py\", line 880, in full_dispatch_request\n2025/01/17 13:18:57 | stderr | Traceback (most recent call last):\n2025/01/17 13:18:57 | stderr | 2025-01-17 13:18:57,962 ERROR    22 key: expected bytes or bytearray, but got 'NoneType'\n2025/01/17 13:18:57 | stderr | TypeError: key: expected bytes or bytearray, but got 'NoneType'\n2025/01/17 13:18:57 | stderr | raise TypeError(\"key: expected bytes or bytearray, but got %r\" % type(key).__name__)\n2025/01/17 13:18:57 | stderr | File \"/usr/lib/python3.10/hmac.py\", line 53, in __init__\n2025/01/17 13:18:57 | stderr | return HMAC(key, msg, digestmod)\n2025/01/17 13:18:57 | stderr | File \"/usr/lib/python3.10/hmac.py\", line 184, in new\n2025/01/17 13:18:57 | stderr | return hmac.new(key, payload.encode(\"utf-8\"), sha512).hexdigest()\n2025/01/17 13:18:57 | stderr | File \"/ragflow/.venv/lib/python3.10/site-packages/flask_login/utils.py\", line 380, in _cookie_digest\n2025/01/17 13:18:57 | stderr | if hmac.compare_digest(_cookie_digest(payload, key=key), digest):\n2025/01/17 13:18:57 | stderr | File \"/ragflow/.venv/lib/python3.10/site-packages/flask_login/utils.py\", line 62, in decode_cookie\n2025/01/17 13:18:57 | stderr | user_id = decode_cookie(cookie)\n2025/01/17 13:18:57 | stderr | File \"/ragflow/.venv/lib/python3.10/site-packages/flask_login/login_manager.py\", line 414, in _load_user_from_remember_cookie\n2025/01/17 13:18:57 | stderr | user = self._load_user_from_remember_cookie(cookie)\n2025/01/17 13:18:57 | stderr | File \"/ragflow/.venv/lib/python3.10/site-packages/flask_login/login_manager.py\", line 376, in _load_user\n2025/01/17 13:18:57 | stderr | current_app.login_manager._load_user()\n2025/01/17 13:18:57 | stderr | File \"/ragflow/.venv/lib/python3.10/site-packages/flask_login/utils.py\", line 370, in _get_user\n2025/01/17 13:18:57 | stderr | current_user = LocalProxy(lambda: _get_user())\n2025/01/17 13:18:57 | stderr | File \"/ragflow/.venv/lib/python3.10/site-packages/flask_login/utils.py\", line 25, in <lambda>\n2025/01/17 13:18:57 | stderr | return get_name(local())\n2025/01/17 13:18:57 | stderr | File \"/ragflow/.venv/lib/python3.10/site-packages/werkzeug/local.py\", line 526, in _get_current_object\n2025/01/17 13:18:57 | stderr | obj = instance._get_current_object()\n2025/01/17 13:18:57 | stderr | File \"/ragflow/.venv/lib/python3.10/site-packages/werkzeug/local.py\", line 318, in __get__\n2025/01/17 13:18:57 | stderr | elif not current_user.is_authenticated:\n2025/01/17 13:18:57 | stderr | File \"/ragflow/.venv/lib/python3.10/site-packages/flask_login/utils.py\", line 284, in decorated_view\n2025/01/17 13:18:57 | stderr | return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n2025/01/17 13:18:57 | stderr | File \"/ragflow/.venv/lib/python3.10/site-packages/flask/app.py\", line 865, in dispatch_request\n2025/01/17 13:18:57 | stderr | rv = self.dispatch_request()\n2025/01/17 13:18:57 | stderr | File \"/ragflow/.venv/lib/python3.10/site-packages/flask/app.py\", line 880, in full_dispatch_request\n2025/01/17 13:18:57 | stderr | Traceback (most recent call last):\n2025/01/17 13:18:57 | stderr | 2025-01-17 13:18:57,961 ERROR    22 key: expected bytes or bytearray, but got 'NoneType'\n\n\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\ndocker compose -f docker-compose-base.yml -f docker-compose.yml up -d\n```\n\n### Additional information\n\n“key: expected bytes or bytearray, but got 'NoneType'”",
      "state": "closed",
      "author": "fuwaking",
      "author_type": "User",
      "created_at": "2025-01-17T05:52:42Z",
      "updated_at": "2025-05-26T03:49:27Z",
      "closed_at": "2025-01-18T09:19:28Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 3,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/4517/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/4517",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/4517",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:38.760134",
      "comments": [
        {
          "author": "fuwaking",
          "body": "i has fix the problem. The project works normally when i switch the web from edge to edge dev,the problem dispear. ",
          "created_at": "2025-01-18T09:19:28Z"
        },
        {
          "author": "crazywen",
          "body": "2025-02-24 16:02:11 2025-02-24 16:02:11,426 ERROR    15 key: expected bytes or bytearray, but got 'NoneType'\n2025-02-24 16:02:11 Traceback (most recent call last):\n2025-02-24 16:02:11   File \"/ragflow/.venv/lib/python3.10/site-packages/flask/app.py\", line 880, in full_dispatch_request\n2025-02-24 16:",
          "created_at": "2025-02-24T08:03:03Z"
        },
        {
          "author": "gs80140",
          "body": "got sam issue , chrome 版本 136.0.7103.114（正式版本） （64 位）\n\nMicrosoft Edge 版本 136.0.3240.92 (正式版本) (64 位)  不报错",
          "created_at": "2025-05-26T03:45:04Z"
        }
      ]
    },
    {
      "issue_number": 3544,
      "title": "[Question]: Can you provide the api for registration, login and password change",
      "body": "### Describe your problem\n\nIs there a login, registration, password change interface?",
      "state": "open",
      "author": "smileyee",
      "author_type": "User",
      "created_at": "2024-11-21T02:20:44Z",
      "updated_at": "2025-05-26T03:37:26Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question",
        "💞 feature"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/3544/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/3544",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/3544",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:38.941265",
      "comments": [
        {
          "author": "which-W",
          "body": "@smileyee \n👋 Thanks a lot for your suggestion — and sorry for the delayed response!\n\nAt the moment, the feature for updating account credentials is only available on the demo page and hasn’t been added to the open-source version yet 🔒. That said, your feedback is valuable, and we’ll consider adding ",
          "created_at": "2025-05-26T03:37:25Z"
        }
      ]
    },
    {
      "issue_number": 3478,
      "title": "[Question]:  How RAGFlow integrates custom text cutting functions",
      "body": "### Describe your problem\n\n![image](https://github.com/user-attachments/assets/375acd82-c419-4d78-abb4-9b89f8d4a3a8)\r\n",
      "state": "open",
      "author": "lvyoudashuju",
      "author_type": "User",
      "created_at": "2024-11-19T03:37:01Z",
      "updated_at": "2025-05-26T03:30:36Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question",
        "💞 feature"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/3478/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/3478",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/3478",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:39.130681",
      "comments": [
        {
          "author": "which-W",
          "body": "@lvyoudashuju \n👋 Thanks so much for your suggestion — and sorry for the late reply!\n\nYou can take a look at the relevant code in the api/app directory to explore how we handle text chunking 🧩. Let us know if this approach fits your needs!\n\nIf this helps solve your issue, feel free to close this feat",
          "created_at": "2025-05-26T03:30:35Z"
        }
      ]
    },
    {
      "issue_number": 3415,
      "title": "[Feature Request]: multiple citations",
      "body": "### Is there an existing issue for the same feature request?\r\n\r\n- [X] I have checked the existing issues.\r\n\r\n### Describe the feature you'd like\r\n\r\nIs it possible to configure Ragflow to provide multiple references, if more than one document in the knowledge-base contains the relevant information?\r\n\r\nMy experience so far is that the system finds a matching paragraph in a document and stops at that, therefore I never get more than one citation. However, I know that the topic of my prompt is discussed in several documents and I would prefer to see several sources, to get a better overview and ensure that the sources are consistent with each other.",
      "state": "open",
      "author": "ralienpp",
      "author_type": "User",
      "created_at": "2024-11-14T13:52:13Z",
      "updated_at": "2025-05-26T03:11:31Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/3415/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/3415",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/3415",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:39.288328",
      "comments": [
        {
          "author": "which-W",
          "body": "@ralienpp \n👋 Thanks a lot for your suggestion — and sorry for the delayed response!\n\nWe’ve now added support for displaying multiple references after content is generated 🔍📚. Hopefully this aligns with what you were looking for!\n\nIf this update addresses your needs, feel free to close this feature r",
          "created_at": "2025-05-26T03:11:30Z"
        }
      ]
    },
    {
      "issue_number": 3399,
      "title": "[Feature Request]: Direct Document Parsing from URLs",
      "body": "### Is there an existing issue for the same feature request?\n\n- [X] I have checked the existing issues.\n\n### Is your feature request related to a problem?\n\n```Markdown\nCurrently, ragflow relies on independent file uploads to parse documents. However, many people within enterprises are already accustomed to uploading knowledge to internal wiki websites. Therefore, document administrators must either save web pages as files and re-upload them, or request that authors provide docx files. This makes the process very inconvenient.\n```\n\n\n### Describe the feature you'd like\n\nIt is hoped that ragflow can directly support parsing documents from a URL provided by the administrator.\n\n### Describe implementation you've considered\n\n_No response_\n\n### Documentation, adoption, use case\n\n_No response_\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "Sail64",
      "author_type": "User",
      "created_at": "2024-11-14T06:54:55Z",
      "updated_at": "2025-05-26T03:06:02Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/3399/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/3399",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/3399",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:39.459385",
      "comments": [
        {
          "author": "yan-rui",
          "body": "这个feature有更新吗",
          "created_at": "2025-03-12T09:07:32Z"
        },
        {
          "author": "which-W",
          "body": "@Sail64 \n👋 Thanks so much for your suggestion — and sorry for the late reply!\n\nCurrently, our product does support uploading documents via URL to the knowledge base for further parsing 🌐📄. To better understand your request, could you please clarify what you mean by \"direct parsing\"? If you could sha",
          "created_at": "2025-05-26T03:06:01Z"
        }
      ]
    },
    {
      "issue_number": 3378,
      "title": "document parse uniform api",
      "body": "### Is there an existing issue for the same feature request?\n\n- [X] I have checked the existing issues.\n\n### Is your feature request related to a problem?\n\n```Markdown\nyes, it is related to the document parsing method\n```\n\n\n### Describe the feature you'd like\n\nthe deepdoc has lots of bugs and it cannot be finetuned, so is there any way to use the api like embedding or rerank api , so we can develop an useful api to parse the PDF documents\n\n### Describe implementation you've considered\n\na uniform api definition of pdf parse \n\n### Documentation, adoption, use case\n\n_No response_\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "zhang001122",
      "author_type": "User",
      "created_at": "2024-11-13T07:02:40Z",
      "updated_at": "2025-05-26T02:59:21Z",
      "closed_at": null,
      "labels": [
        "💞 feature"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/3378/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/3378",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/3378",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:39.664263",
      "comments": [
        {
          "author": "which-W",
          "body": "@zhang001122 \n👋 Thanks a lot for your valuable suggestion — and sorry for the delayed response!\n\nWe've now provided multiple APIs for the PDF parser 📄 and made improvements to deepdoc to enhance its accuracy 🔧. These updates should help address the issue you raised.\n\nIf everything is working as expe",
          "created_at": "2025-05-26T02:59:20Z"
        }
      ]
    },
    {
      "issue_number": 7828,
      "title": "[Question]: why replace task_limiter with limit of 2 while encounter task type graphrag",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nin task_executor.py  The default task_limit is 5 got from env.\nBut why we replace the value to a fixed 2 while recv a graphrag task, and never restored again ?\nDose this means when a graphrag task is recved ,all kinds of task is limited to a fixed number of 2? And why set to a fixed number ?  And it will never go back to the default task limit ( 5)?\n```python\n\nMAX_CONCURRENT_TASKS = int(os.environ.get('MAX_CONCURRENT_TASKS', \"5\"))\nMAX_CONCURRENT_CHUNK_BUILDERS = int(os.environ.get('MAX_CONCURRENT_CHUNK_BUILDERS', \"1\"))\nMAX_CONCURRENT_MINIO = int(os.environ.get('MAX_CONCURRENT_MINIO', '10'))\ntask_limiter = trio.CapacityLimiter(MAX_CONCURRENT_TASKS)\n\n\nasync def do_handle_task(task):\n    ...\n    # Either using graphrag or Standard chunking methods\n    elif task.get(\"task_type\", \"\") == \"graphrag\":\n        global task_limiter\n        task_limiter = trio.CapacityLimiter(2)\n```",
      "state": "closed",
      "author": "sinopec",
      "author_type": "User",
      "created_at": "2025-05-23T14:21:29Z",
      "updated_at": "2025-05-26T02:59:02Z",
      "closed_at": "2025-05-26T02:59:02Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7828/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7828",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7828",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:39.840032",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nBased on the available information, the default task limiter in `task_executor.py` is set using the `MAX_CONCURRENT_TASKS` environment variable, which defaults to 5. This is implemented with a `trio.CapacityLimiter` in the code [[source]](https://github.com/infiniflow/ragflow/blob/ma",
          "created_at": "2025-05-23T14:27:15Z"
        }
      ]
    },
    {
      "issue_number": 7783,
      "title": "[Question]: will the sandbox be open-sourced in the future?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nwill the sandbox be open-sourced in the future? can the user modify it? maybe fix bugs",
      "state": "closed",
      "author": "hellomme",
      "author_type": "User",
      "created_at": "2025-05-22T02:00:42Z",
      "updated_at": "2025-05-26T02:58:33Z",
      "closed_at": "2025-05-26T02:58:31Z",
      "labels": [
        "🙋‍♀️ question"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7783/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7783",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7783",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:40.098554",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "[Here](https://github.com/infiniflow/ragflow/tree/main/sandbox)",
          "created_at": "2025-05-26T02:58:31Z"
        }
      ]
    },
    {
      "issue_number": 7790,
      "title": "[Bug]: Potential Issue in `naive_merge_docx` Function",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nnone\n\n### RAGFlow image version\n\nnone\n\n### Other environment information\n\n```Markdown\n### Environment\n- File: `rag/nlp/__init__.py`\n- Function: `naive_merge_docx`\n- Default chunk_token_num: 128\n```\n\n### Actual behavior\n\n**Description**\nThere appears to be a logical issue in the `naive_merge_docx` function in `rag/nlp/__init__.py`. The function initializes `tk_nums = [0]` and uses `tk_nums[-1] > chunk_token_num` as a condition for creating new chunks. This can lead to unexpected behavior when processing the first section of a document.\n\n**Current** Behavior\n1. When processing the first section, `tk_nums[-1]` is always 0\n2. Since 0 < chunk_token_num (default 128), the first section is always added to the first chunk\n3. This can result in the first chunk being larger than intended, as there's no proper size control for the initial chunk\n\n**Code** Location\n```python\ndef naive_merge_docx(sections, chunk_token_num=128, delimiter=\"\\n。；！？\"):\n    if not sections:\n        return [], []\n\n    cks = [\"\"]\n    images = [None]\n    tk_nums = [0]  # Initialized with 0\n\n    def add_chunk(t, image, pos=\"\"):\n        nonlocal cks, tk_nums, delimiter\n        tnum = num_tokens_from_string(t)\n        if tnum < 8:\n            pos = \"\"\n        if tk_nums[-1] > chunk_token_num:  # This condition is always false for the first section\n            # ... rest of the code\n```\n\n### Expected behavior\n\nThe function should properly control chunk sizes from the very beginning, ensuring that:\n1. The first chunk follows the same size constraints as subsequent chunks\n2. Each chunk's size is properly limited by chunk_token_num\n3. The initial empty chunk should be handled appropriately\n\nAdd a check for empty chunks to ensure proper chunk size control from the beginning:\n```python\nif cks[-1] == \"\" or tk_nums[-1] > chunk_token_num:\n    # Create new chunk\n```\n\n### Steps to reproduce\n\n```Markdown\nnone\n```\n\n### Additional information\n\nThis bug could affect:\n1. Document chunking accuracy\n2. Memory usage\n3. Processing efficiency\n4. Quality of downstream tasks that depend on properly sized chunks",
      "state": "closed",
      "author": "mateng-matt",
      "author_type": "User",
      "created_at": "2025-05-22T03:30:40Z",
      "updated_at": "2025-05-26T02:56:20Z",
      "closed_at": "2025-05-26T02:56:20Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7790/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7790",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7790",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:40.289767",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nYour analysis of the `naive_merge_docx` function is correct. The function initializes `tk_nums` with `[0]` and uses `tk_nums[-1] > chunk_token_num` to determine when to create a new chunk. This means the first section is always added to the first chunk, regardless of its size, which ",
          "created_at": "2025-05-22T03:40:18Z"
        }
      ]
    },
    {
      "issue_number": 7789,
      "title": "[Question]: is ollama embeding url wrong",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\n![Image](https://github.com/user-attachments/assets/42c65bd8-abd7-4885-a4e9-94161883c685)\n\nin ollama doc ,embeding url is /api/embed\nbut ragflow call is /api/embeddings\nragflow call wrong ollama embeding url ??\n",
      "state": "open",
      "author": "liuxh613",
      "author_type": "User",
      "created_at": "2025-05-22T03:24:20Z",
      "updated_at": "2025-05-26T02:54:49Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7789/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7789",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7789",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:40.468369",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nBased on the information available, the Ollama documentation specifies the embedding endpoint as `/api/embed`, while you observed that Ragflow is calling `/api/embeddings`. In the Ragflow code and documentation, there is no explicit mention of either `/api/embed` or `/api/embeddings`",
          "created_at": "2025-05-22T03:36:51Z"
        },
        {
          "author": "KevinHuSh",
          "body": "Did you set access token for Ollama? Or, the URL to Ollama servier is not correct.",
          "created_at": "2025-05-26T02:54:48Z"
        }
      ]
    },
    {
      "issue_number": 3277,
      "title": "[Bug]: Supports update max-tokens for local deployment LLM",
      "body": "### Is there an existing issue for the same bug?\n\n- [X] I have checked the existing issues.\n\n### Branch name\n\nv0.13\n\n### Commit ID\n\ntoken123\n\n### Other environment information\n\n_No response_\n\n### Actual behavior\n\n1、使用xinference部署本地大模型，例如qwen系列。\r\n2、登录ragflow,切换到用户管理->模型页面，添加xinference模型，该页面没有max-tokens参数。\r\n3、在全局模型配置中将新增模型设置为全局模型。\r\n4、对话中新建对话，选择新增的模型，提问题，经常回答由于长度限制……继续吗？输入继续无效。\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\n1、使用xinference部署本地大模型，例如qwen系列。\r\n2、登录ragflow,切换到用户管理->模型页面，添加xinference模型，该页面没有max-tokens参数。\r\n3、在全局模型配置中将新增模型设置为全局模型。\r\n4、对话中新建对话，选择新增的模型，此处有max-tokens，对商业API-KEY方式接入大模型有效，对本地部署模型无效。\r\n5、查看模型列表API数据，发展本地部署模型，没有max-tokens参数。\r\n6、提问题，经常回答由于长度限制……继续吗？输入继续无效。\r\n7、根本原因在于添加的本地部署大模型，即用户模型缺少max-tokens字段，模型配置页面和数据库中没有相关字段，导致问答时，调用的大模型实例使用了默认的8192（以前是512）所致。\n```\n\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "fengyuhan2019",
      "author_type": "User",
      "created_at": "2024-11-08T00:27:42Z",
      "updated_at": "2025-05-26T02:47:10Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "💞 feature"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/3277/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [
        "yuzhichang"
      ],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/3277",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/3277",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:40.671079",
      "comments": [
        {
          "author": "which-W",
          "body": "@fengyuhan2019 \n👋 Thanks so much for your patience and for sharing your suggestion!\n\nWe’ve added support for setting max_tokens in Xinference 🛠️ — this should help address your request. If everything looks good on your end, feel free to close this feature request at your convenience. We may do a rou",
          "created_at": "2025-05-26T02:47:09Z"
        }
      ]
    },
    {
      "issue_number": 7830,
      "title": "[Bug]: Setting the message_history_window_size to 0 does not take effect.",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nnone\n\n### RAGFlow image version\n\nv0.18.0-nightly\n\n### Other environment information\n\n```Markdown\nall in v0.18.0-nightly\n```\n\n### Actual behavior\n\nAfter setting the `message_history_window_size` of the agent to 0, there is still historical memory information.\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nI want to implement an LLM without historical memory in the agent, \nbut after setting the agent's message_history_window_size to 0,\n I found that the LLM still has historical memory information. \nFor example, when I added the date May 2025 in the previous question, \nit still uses this date for searching in the next question. \nThis is not what I want. \n\nAre there other methods to achieve no conversation memory?\n```\n\n### Additional information\n\n_No response_",
      "state": "closed",
      "author": "yourbikun",
      "author_type": "User",
      "created_at": "2025-05-24T07:01:54Z",
      "updated_at": "2025-05-26T02:28:48Z",
      "closed_at": "2025-05-26T02:28:48Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7830/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7830",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7830",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:40.832283",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nBased on the available information, setting `message_history_window_size` to 0 does not currently disable conversation memory in RAGFlow. Even when set to 0, the agent continues to retain historical memory information. There is no documentation or code comment explaining how a value ",
          "created_at": "2025-05-24T07:16:24Z"
        }
      ]
    },
    {
      "issue_number": 7837,
      "title": "[Bug]: ERROR    33 list index out of range",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n?\n\n### RAGFlow image version\n\nRAGFlow version: v0.19.0 slim\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\n```\n2025-05-24 16:21:03,837 ERROR    33 list index out of range\nTraceback (most recent call last):\n  File \"/ragflow/.venv/lib/python3.10/site-packages/flask/app.py\", line 880, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"/ragflow/.venv/lib/python3.10/site-packages/flask/app.py\", line 865, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n  File \"/ragflow/api/utils/api_utils.py\", line 298, in decorated_function\n    return func(*args, **kwargs)\n  File \"/ragflow/api/apps/sdk/session.py\", line 470, in list_session\n    if \"chunks\" in conv[\"reference\"][message_num]:\n```\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nIt is not clear how to reproduce it at the moment, I will add more information after reproducing it.\n```\n\n### Additional information\n\nFrom looking at the [source code](https://github.com/infiniflow/ragflow/blob/552023ee4b377c7948a55350cf189c26f6a26444/api/apps/sdk/session.py#L470C36-L470C53), it seems that the error is at ` len(conv[\"messages\"]) > len(conv[\"reference\"]) `",
      "state": "closed",
      "author": "smalltalkman",
      "author_type": "User",
      "created_at": "2025-05-25T08:17:41Z",
      "updated_at": "2025-05-26T02:28:37Z",
      "closed_at": "2025-05-26T02:28:37Z",
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7837/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7837",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7837",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:41.062047",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe \"list index out of range\" error in your traceback occurs in the `list_session` function in `session.py` at line 470, specifically when accessing `conv[\"reference\"][message_num]`. This happens when the code iterates over `conv[\"messages\"]` and tries to access the corresponding ind",
          "created_at": "2025-05-25T08:23:02Z"
        }
      ]
    },
    {
      "issue_number": 3261,
      "title": "[Question]: the language preference of  knowledge graph chunk method",
      "body": "### Describe your problem\r\n\r\nAlthough, to set the language preference to \"Chinese\", the result of chunks are based on English mostly.\r\n\r\nAnd this behavior decrease the accuracy rate of query. E.g.  A general name in Chinese character will be converted to in Pinyin form. So, if I query with the name in Chinese character, I will get nothing.\r\n\r\nI wish the [auto_prompt_tuning](https://microsoft.github.io/graphrag/prompt_tuning/auto_prompt_tuning/) function can be added or switch the `prompts` based on the language preference.",
      "state": "open",
      "author": "k0286",
      "author_type": "User",
      "created_at": "2024-11-07T07:05:12Z",
      "updated_at": "2025-05-26T02:25:49Z",
      "closed_at": null,
      "labels": [
        "🙋‍♀️ question",
        "💞 feature"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/3261/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/3261",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/3261",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:41.229220",
      "comments": [
        {
          "author": "which-W",
          "body": " @k0286 \n👋 Thanks a lot for the thoughtful suggestion — and sorry for the delayed response!\n\nCurrently, our knowledge graph doesn't support language preference settings and mainly categorizes content in English 🌐. That said, your idea is very insightful and gives us something to think about. We’ll c",
          "created_at": "2025-05-26T02:25:48Z"
        }
      ]
    },
    {
      "issue_number": 7829,
      "title": "[Bug]: The parsing speed is different for .png and .pdf",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n#6791\n\n### RAGFlow image version\n\nv0.19.0\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nI parsed a png image file to make a local knowledge base, and it is very fast. However, when I converted the png file to the pdf file, the parsing speed is very low, ant the hint is \"Proceeding with figure enhancement...\".\n\n### Expected behavior\n\nThe png file and the pdf file should have the similar parsing speeding.\n\n### Steps to reproduce\n\n```Markdown\n1. Upload a png file to make local knowledge base;\n2. Convert the png file to pdf file;\n3. Upload the pdf file for parsing;\n4. The parsing speed for pdf file is much slower than that for the png fle;\n5. The hint is \"Proceeding with figure enhancement...\".\n```\n\n### Additional information\n\nI suggested the MinerU should be added into the Ragflow as a substitute for Deepdoc, so we can have different choice. ",
      "state": "open",
      "author": "dragoneptech",
      "author_type": "User",
      "created_at": "2025-05-24T01:20:05Z",
      "updated_at": "2025-05-26T02:12:35Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7829/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7829",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7829",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:41.420134",
      "comments": [
        {
          "author": "KevinHuSh",
          "body": "Images and PDFs they have different parse method, which can't be with the same speed for now.",
          "created_at": "2025-05-26T02:12:34Z"
        }
      ]
    },
    {
      "issue_number": 7768,
      "title": "[Bug]: Parse document via API failed",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\nbaf3b9b\n\n### RAGFlow image version\n\nv0.17.2-slim\n\n### Other environment information\n\n```Markdown\n\n```\n\n### Actual behavior\n\nI can't reparse the failed documents via /api/v1/datasets/{dataset_id}/chunks  <POST>.  \n\nThe document status is as follows:\n\n![Image](https://github.com/user-attachments/assets/905e4418-f37e-4451-a491-c62a9c5ee307)\n\nAnd the result:\n\n![Image](https://github.com/user-attachments/assets/d3036911-2c84-43a8-b15b-d9525f4906ac).\n\nI am absolutely sure that I used the POST method, not the DELETE method.\n\nAdditionally, could you please update your API documentation? Some information is outdated. For example, the \"run\" attribute of a document is documented as returning 1, 2, 3, or 4, but in reality it returns values like \"cancel\", \"failed\", and \"done\".\n\n\n\n### Expected behavior\n\n_No response_\n\n### Steps to reproduce\n\n```Markdown\nAll relevant information has been provided above.\n```\n\n### Additional information\n\n_No response_",
      "state": "open",
      "author": "ericwu0930",
      "author_type": "User",
      "created_at": "2025-05-21T08:36:12Z",
      "updated_at": "2025-05-26T02:10:25Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7768/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7768",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7768",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:41.615228",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nThe error you're encountering, \"Can't stop parsing document with progress at '0 or 100'\", is defined in the `api/apps/sdk/doc.py` file. This error occurs when an attempt is made to stop parsing a document that has a progress status of either 0 or 100 <sup>[[1]](https://github.com/inf",
          "created_at": "2025-05-21T08:40:58Z"
        },
        {
          "author": "asiroliu",
          "body": "@ericwu0930 \nYou should first call stop_parse, then initiate a new parse operation. The error occurs because the previous parse process is still running.",
          "created_at": "2025-05-21T09:39:07Z"
        },
        {
          "author": "Woody-Hu",
          "body": "> [@ericwu0930](https://github.com/ericwu0930) You should first call stop_parse, then initiate a new parse operation. The error occurs because the previous parse process is still running.\n\nHi @asiroliu based on @ericwu0930 's description  his task should already have failed (progress -1),  I reviewe",
          "created_at": "2025-05-21T23:29:09Z"
        },
        {
          "author": "ericwu0930",
          "body": "@asiroliu @Woody-Hu \nYes, the task has failed.\n![Image](https://github.com/user-attachments/assets/a9f7c66d-9834-4fb3-bfad-7225168386d7)\nBased on git log, I think it's a bug in v0.17.2 and has fixed in v0.18.0.\nI will update the dock image and check if it resolves this problem.",
          "created_at": "2025-05-26T02:10:24Z"
        }
      ]
    },
    {
      "issue_number": 7834,
      "title": "[Question]: Upgrading to V0.19.0, the knowledge base cannot be opened at all. How to backup before upgrading?",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nAfter upgrading to version V0.19.0, an error message appeared when creating a new knowledge base:<MethodNotAllowed '405: Method Not Allowed'>. Even before opening the knowledge base, an error code of 3022 was displayed. Only by redeployment of ragflow could it be restored to use, but all knowledge bases were cleared. How can I back up Ragflow to prevent the knowledge base from not functioning properly after the next upgrade?\nThe infinity I am using.\n",
      "state": "open",
      "author": "dongchun2008",
      "author_type": "User",
      "created_at": "2025-05-25T01:33:42Z",
      "updated_at": "2025-05-26T02:09:15Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 2,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7834/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7834",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7834",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:41.819384",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nTo back up Ragflow before upgrading (especially to prevent loss of knowledge bases if something goes wrong), you should back up all key data components: MySQL, Elasticsearch, and MinIO. Here are the recommended steps and commands:\n\n---\n\n### 1. MySQL Database Backup\n\n```bash\ndocker ex",
          "created_at": "2025-05-25T01:39:19Z"
        },
        {
          "author": "KevinHuSh",
          "body": "`Ctrl + Shift + F5` for web browser.",
          "created_at": "2025-05-26T02:09:14Z"
        }
      ]
    },
    {
      "issue_number": 7838,
      "title": "[Question]: Unable to Re-parse Failed Documents via Python API",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nI'm currently using the RAGFlow Python API to build a workflow for batch uploading and parsing documents. The upload and parsing processes generally work fine, but I've consistently encountered an issue where some documents fail to parse. These failed documents are scattered among successfully parsed ones.\n\nI was able to retrieve the documents marked with a `FAIL` status using the relevant API. However, I haven’t been able to find any method that allows me to re-parse these failed documents via the API—similar to the \"Re-parse\" button available in the UI.\n\nHere’s what I’ve tried so far:\n\n- I attempted to use `async_parse_documents` with the IDs of the failed documents, but I received the following error:\n  ```\n  Can't stop parsing document with progress at 0 or 1\n  ```\n- I found a related issue suggesting that the document might need to be canceled first, so I called `async_cancel_parse_documents`, but I got the same error message.\n- I then inspected the `progress` value of the failed documents and noticed it was `-1.0`.\n\nAt this point, I haven’t been able to identify any API endpoint or documented approach that allows me to re-parse failed documents programmatically. Specifically:\n- There doesn't seem to be a method under the **\"FILE MANAGEMENT WITHIN DATASET\"** section that handles this.\n- I also couldn’t find a way to reset the document’s `progress` or parsing status to make it eligible for reprocessing.\n\n### Request\n\nCould you clarify:\n- Is there an official way to re-parse failed documents via the Python API?\n- If not, could this functionality be added to align with what’s available in the UI?\n\nThanks in advance for your support!\n\n---\n\n### RAGFlow image version\n\nv0.16.0 full",
      "state": "open",
      "author": "THEYBL",
      "author_type": "User",
      "created_at": "2025-05-25T09:05:12Z",
      "updated_at": "2025-05-26T02:03:39Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 4,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7838/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7838",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7838",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:42.004732",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nBased on a thorough review of the RAGFlow codebase and available documentation, there is currently **no official way to re-parse failed documents via the Python API**. The `parse` function in the API is responsible for starting the parsing process for documents, but there is no docum",
          "created_at": "2025-05-25T09:14:40Z"
        },
        {
          "author": "THEYBL",
          "body": "Is it possible to combine existing APIs to achieve the functionality of re-parsing failed documents?\n@dosu-bot",
          "created_at": "2025-05-25T09:20:31Z"
        },
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nIt is possible to approximate the \"Re-parse\" functionality for failed documents by combining existing APIs, but it requires a workaround rather than a direct, documented method.\n\nThe key is to reset the document's parsing status and progress, making it eligible for re-parsing. In the",
          "created_at": "2025-05-25T09:22:04Z"
        },
        {
          "author": "ericwu0930",
          "body": "same problem.\nIt's a bug in v0.17.2.\n\n![Image](https://github.com/user-attachments/assets/541f6fb2-a7f6-4b85-8549-9384cba96a17)\n\nI think you can update dock image greater than v0.18.0 to solve it.",
          "created_at": "2025-05-26T02:03:38Z"
        }
      ]
    },
    {
      "issue_number": 7840,
      "title": "[Question]: 0.19 raptor error report",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### Describe your problem\n\nWe noticed some issues with the task request order in version 0.19 after enabling the raptor strategy, which caused previous problem-solving methods to become ineffective, such as https://github.com/infiniflow/ragflow/issues/7442 and https://github.com/infiniflow/ragflow/issues/5942. These issues primarily arise because raptor and graph have high requirements for the concurrent capabilities of LLMs. The previous solution was to modify MAX_CONCURRENT_CHATS=2, meaning the CHATS Number during raptor runtime = raptor number * MAX_CONCURRENT_CHATS, thereby reducing concurrency demands by lowering the MAX_CONCURRENT_CHATS value. The specific reason for the problem in 0.19 is that in version 0.18, if n documents were parsed (paper number=n), the number of articles entering raptor was m (raptor number=m). When processing a large number of articles, the raptor number in 0.18's processing method was rolling, meaning raptor tasks were processed concurrently while other articles were undergoing OCR, thereby reducing the raptor number. By controlling CPU cores or limiting GPU allocation, the raptor number was ensured to remain within a reasonable range, preventing rate limit errors. However, 0.19's processing method leads to an actual raptor number = paper number, which is much larger than the dynamic raptor number in 0.18, consequently causing the MAX_CONCURRENT_CHATS=2 method to fail.",
      "state": "open",
      "author": "vickyyd",
      "author_type": "User",
      "created_at": "2025-05-25T17:36:27Z",
      "updated_at": "2025-05-25T17:39:24Z",
      "closed_at": null,
      "labels": [
        "🐞 bug",
        "🙋‍♀️ question"
      ],
      "label_count": 2,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7840/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7840",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7840",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:42.205599",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nIn version 0.19, the raptor strategy changed from a dynamic, rolling processing model (used in 0.18) to a batch processing model. In 0.18, documents were processed by raptor as they finished embedding, allowing concurrency to be managed dynamically—this kept the number of concurrent ",
          "created_at": "2025-05-25T17:39:23Z"
        }
      ]
    },
    {
      "issue_number": 7839,
      "title": "[Bug]: parse get stuck frequently when enable graphrag",
      "body": "### Self Checks\n\n- [x] I have searched for existing issues [search for existing issues](https://github.com/infiniflow/ragflow/issues), including closed ones.\n- [x] I confirm that I am using English to submit this report ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Non-english title submitions will be closed directly ( 非英文标题的提交将会被直接关闭 ) ([Language Policy](https://github.com/infiniflow/ragflow/issues/5910)).\n- [x] Please do not modify this template :) and fill in all the required fields.\n\n### RAGFlow workspace code commit ID\n\n0.19.0\n\n### RAGFlow image version\n\n0.19.0-slim\n\n### Other environment information\n\n```Markdown\nCPU:Intel(R) Xeon(R) Silver 4316 CPU @ 2.30GHz\nMEM:128GB\nOS:Ubuntu 22.04-server\n\nset WORKERS = 4 in entrypoint.sh to start 4 task_executor.\n```\n\n### Actual behavior\n\nthe parse progress of all doc is freezed.\n\nobserve the whole progess:\n\n1. ,mostly chunk will be done ( but seems the task will be receivd again? or it will be received/executed by multi task_executoer?):\n```json\n21:11:57 Task has been received.\n21:16:11 Page(1~100000001): Start to parse.\n21:16:12 Page(1~100000001): Finish parsing.\n21:22:32 Page(1~100000001): Start to generate keywords for every chunk ...\n21:24:40 Page(1~100000001): Keywords generation 1 chunks completed in 128.01s\n21:24:40 Page(1~100000001): Start to generate questions for every chunk ...\n21:25:44 Page(1~100000001): Question generation 1 chunks completed in 64.49s\n21:25:45 Page(1~100000001): Generate 1 chunks\n21:33:11 Page(1~100000001): Embedding chunks (445.71s)\n21:35:19 Page(1~100000001): Indexing done (128.79s). Task done (1402.74s)\n16:43:07 Task has been received.\n16:58:35 Page(1~100000001): Start to parse.\n16:58:35 Page(1~100000001): Finish parsing.\n```\n\n2. grpahrap will not start for a longlong time:\n```json\n16:26:46 created task graphrag\n```\nit just show graphrag task is created and nothing else.\n\n3.i checked the server log  and it reports the task heartbeat ;\n\n![Image](https://github.com/user-attachments/assets/a0236093-ae9d-4054-b6d8-5b81df24814c)\n\nI also reviewed the code, and I have two questions:\n\nWill tasks sent through Redis be received multiple times by one task executor ? Can they be received by different task executors\n\n- During the execution of run_graphrag, RedisDistributedLock is used. Its mechanism involves deleting the key before acquiring it, which I don’t quite understand — how does this prevent others from accessing the lock at the same time? Is it that only the current process can delete the lock? I’d like an explanation of how RedisDistributedLock is able to provide protection during the execution of graphrag.\n- During the execution of graphrag.run, if an exception occurs midway, could it result in the task_limiter not being released, eventually reaching its limit and preventing any further tasks from being processed?\n- The global task_limiter (default 5) is reset to 2 when a task of type graphrag is received. What is the intention behind this design? What problem is it trying to solve or avoid? Could this approach potentially lead to all tasks getting stuck in the end?\n\n\n### Expected behavior\n\nparse one by one ,slow is acceptable but stuck is not .\n\n### Steps to reproduce\n\n```Markdown\nCreate a dataset ,with auto keywords,auto question,raptor,and graphrag ON.\nupload 1k docs, and all start parse.\n```\n\n### Additional information\n\n0.19.0",
      "state": "open",
      "author": "sinopec",
      "author_type": "User",
      "created_at": "2025-05-25T11:59:58Z",
      "updated_at": "2025-05-25T12:11:40Z",
      "closed_at": null,
      "labels": [
        "🐞 bug"
      ],
      "label_count": 1,
      "has_labels": true,
      "comments_count": 1,
      "reactions": {
        "url": "https://api.github.com/repos/infiniflow/ragflow/issues/7839/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "assignees": [],
      "milestone": null,
      "html_url": "https://github.com/infiniflow/ragflow/issues/7839",
      "api_url": "https://api.github.com/repos/infiniflow/ragflow/issues/7839",
      "repository": "infiniflow/ragflow",
      "extraction_date": "2025-06-21T22:46:42.406719",
      "comments": [
        {
          "author": "dosubot[bot]",
          "body": "<!-- Answer -->\nHere’s what I found regarding your questions about task execution, RedisDistributedLock, and task limiting in RAGFlow 0.19.0:\n\n---\n\n### 1. **RedisDistributedLock Mechanism**\n\nThe `RedisDistributedLock` class uses a lock key and a unique lock value (usually a UUID). When acquiring the",
          "created_at": "2025-05-25T12:11:39Z"
        }
      ]
    }
  ]
}